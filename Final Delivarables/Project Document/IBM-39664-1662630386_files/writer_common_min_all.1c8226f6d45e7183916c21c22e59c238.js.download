function Conversions(){}function LinkedList(){this.items={},this.first=this.last=null,this.length=0}!function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){function i(t){var e=t.length,i=Q.type(t);return"function"!==i&&!Q.isWindow(t)&&(!(1!==t.nodeType||!e)||("array"===i||0===e||"number"==typeof e&&e>0&&e-1 in t))}function n(t,e,i){if(Q.isFunction(e))return Q.grep(t,function(t,n){return!!e.call(t,n,t)!==i});if(e.nodeType)return Q.grep(t,function(t){return t===e!==i});if("string"==typeof e){if(at.test(e))return Q.filter(e,t,i);e=Q.filter(e,t)}return Q.grep(t,function(t){return V.call(e,t)>=0!==i})}function r(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function s(t){var e=ft[t]={};return Q.each(t.match(pt)||[],function(t,i){e[i]=!0}),e}function o(){X.removeEventListener("DOMContentLoaded",o,!1),t.removeEventListener("load",o,!1),Q.ready()}function a(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=Q.expando+Math.random()}function l(t,e,i){var n;if(void 0===i&&1===t.nodeType)if(n="data-"+e.replace(Yt,"-$1").toLowerCase(),i=t.getAttribute(n),"string"==typeof i){try{i="true"===i||"false"!==i&&("null"===i?null:+i+""===i?+i:bt.test(i)?Q.parseJSON(i):i)}catch(t){}Mt.set(t,e,i)}else i=void 0;return i}function c(){return!0}function u(){return!1}function h(){try{return X.activeElement}catch(t){}}function d(t,e){return Q.nodeName(t,"table")&&Q.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function p(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function f(t){var e=Nt.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function m(t,e){for(var i=0,n=t.length;i<n;i++)vt.set(t[i],"globalEval",!e||vt.get(e[i],"globalEval"))}function g(t,e){var i,n,r,s,o,a,l,c;if(1===e.nodeType){if(vt.hasData(t)&&(s=vt.access(t),o=vt.set(e,s),c=s.events)){delete o.handle,o.events={};for(r in c)for(i=0,n=c[r].length;i<n;i++)Q.event.add(e,r,c[r][i])}Mt.hasData(t)&&(a=Mt.access(t),l=Q.extend({},a),Mt.set(e,l))}}function v(t,e){var i=t.getElementsByTagName?t.getElementsByTagName(e||"*"):t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&Q.nodeName(t,e)?Q.merge([t],i):i}function M(t,e){var i=e.nodeName.toLowerCase();"input"===i&&Tt.test(t.type)?e.checked=t.checked:"input"!==i&&"textarea"!==i||(e.defaultValue=t.defaultValue)}function b(e,i){var n,r=Q(i.createElement(e)).appendTo(i.body),s=t.getDefaultComputedStyle&&(n=t.getDefaultComputedStyle(r[0]))?n.display:Q.css(r[0],"display");return r.detach(),s}function Y(t){var e=X,i=Ut[t];return i||(i=b(t,e),"none"!==i&&i||(Ft=(Ft||Q("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=Ft[0].contentDocument,e.write(),e.close(),i=b(t,e),Ft.detach()),Ut[t]=i),i}function y(t,e,i){var n,r,s,o,a=t.style;return i=i||Wt(t),i&&(o=i.getPropertyValue(e)||i[e]),i&&(""!==o||Q.contains(t.ownerDocument,t)||(o=Q.style(t,e)),Bt.test(o)&&zt.test(e)&&(n=a.width,r=a.minWidth,s=a.maxWidth,a.minWidth=a.maxWidth=a.width=o,o=i.width,a.width=n,a.minWidth=r,a.maxWidth=s)),void 0!==o?o+"":o}function _(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function D(t,e){if(e in t)return e;for(var i=e[0].toUpperCase()+e.slice(1),n=e,r=Kt.length;r--;)if(e=Kt[r]+i,e in t)return e;return n}function T(t,e,i){var n=$t.exec(e);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):e}function w(t,e,i,n,r){for(var s=i===(n?"border":"content")?4:"width"===e?1:0,o=0;s<4;s+=2)"margin"===i&&(o+=Q.css(t,i+_t[s],!0,r)),n?("content"===i&&(o-=Q.css(t,"padding"+_t[s],!0,r)),"margin"!==i&&(o-=Q.css(t,"border"+_t[s]+"Width",!0,r))):(o+=Q.css(t,"padding"+_t[s],!0,r),"padding"!==i&&(o+=Q.css(t,"border"+_t[s]+"Width",!0,r)));return o}function E(t,e,i){var n=!0,r="width"===e?t.offsetWidth:t.offsetHeight,s=Wt(t),o="border-box"===Q.css(t,"boxSizing",!1,s);if(r<=0||null==r){if(r=y(t,e,s),(r<0||null==r)&&(r=t.style[e]),Bt.test(r))return r;n=o&&(J.boxSizingReliable()||r===t.style[e]),r=parseFloat(r)||0}return r+w(t,e,i||(o?"border":"content"),n,s)+"px"}function x(t,e){for(var i,n,r,s=[],o=0,a=t.length;o<a;o++)n=t[o],n.style&&(s[o]=vt.get(n,"olddisplay"),i=n.style.display,e?(s[o]||"none"!==i||(n.style.display=""),""===n.style.display&&Dt(n)&&(s[o]=vt.access(n,"olddisplay",Y(n.nodeName)))):(r=Dt(n),"none"===i&&r||vt.set(n,"olddisplay",r?i:Q.css(n,"display"))));for(o=0;o<a;o++)n=t[o],n.style&&(e&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=e?s[o]||"":"none"));return t}function A(t,e,i,n,r){return new A.prototype.init(t,e,i,n,r)}function S(){return setTimeout(function(){Jt=void 0}),Jt=Q.now()}function C(t,e){var i,n=0,r={height:t};for(e=e?1:0;n<4;n+=2-e)i=_t[n],r["margin"+i]=r["padding"+i]=t;return e&&(r.opacity=r.width=t),r}function k(t,e,i){for(var n,r=(ie[e]||[]).concat(ie["*"]),s=0,o=r.length;s<o;s++)if(n=r[s].call(i,e,t))return n}function H(t,e,i){var n,r,s,o,a,l,c,u,h=this,d={},p=t.style,f=t.nodeType&&Dt(t),m=vt.get(t,"fxshow");i.queue||(a=Q._queueHooks(t,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,h.always(function(){h.always(function(){a.unqueued--,Q.queue(t,"fx").length||a.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],c=Q.css(t,"display"),u="none"===c?vt.get(t,"olddisplay")||Y(t.nodeName):c,"inline"===u&&"none"===Q.css(t,"float")&&(p.display="inline-block")),i.overflow&&(p.overflow="hidden",h.always(function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]}));for(n in e)if(r=e[n],Zt.exec(r)){if(delete e[n],s=s||"toggle"===r,r===(f?"hide":"show")){if("show"!==r||!m||void 0===m[n])continue;f=!0}d[n]=m&&m[n]||Q.style(t,n)}else c=void 0;if(Q.isEmptyObject(d))"inline"===("none"===c?Y(t.nodeName):c)&&(p.display=c);else{m?"hidden"in m&&(f=m.hidden):m=vt.access(t,"fxshow",{}),s&&(m.hidden=!f),f?Q(t).show():h.done(function(){Q(t).hide()}),h.done(function(){var e;vt.remove(t,"fxshow");for(e in d)Q.style(t,e,d[e])});for(n in d)o=k(f?m[n]:0,n,h),n in m||(m[n]=o.start,f&&(o.end=o.start,o.start="width"===n||"height"===n?1:0))}}function O(t,e){var i,n,r,s,o;for(i in t)if(n=Q.camelCase(i),r=e[n],s=t[i],Q.isArray(s)&&(r=s[1],s=t[i]=s[0]),i!==n&&(t[n]=s,delete t[i]),o=Q.cssHooks[n],o&&"expand"in o){s=o.expand(s),delete t[n];for(i in s)i in t||(t[i]=s[i],e[i]=r)}else e[n]=r}function I(t,e,i){var n,r,s=0,o=ee.length,a=Q.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var e=Jt||S(),i=Math.max(0,c.startTime+c.duration-e),n=i/c.duration||0,s=1-n,o=0,l=c.tweens.length;o<l;o++)c.tweens[o].run(s);return a.notifyWith(t,[c,s,i]),s<1&&l?i:(a.resolveWith(t,[c]),!1)},c=a.promise({elem:t,props:Q.extend({},e),opts:Q.extend(!0,{specialEasing:{}},i),originalProperties:e,originalOptions:i,startTime:Jt||S(),duration:i.duration,tweens:[],createTween:function(e,i){var n=Q.Tween(t,c.opts,e,i,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(n),n},stop:function(e){var i=0,n=e?c.tweens.length:0;if(r)return this;for(r=!0;i<n;i++)c.tweens[i].run(1);return e?a.resolveWith(t,[c,e]):a.rejectWith(t,[c,e]),this}}),u=c.props;for(O(u,c.opts.specialEasing);s<o;s++)if(n=ee[s].call(c,t,u,c.opts))return n;return Q.map(u,k,c),Q.isFunction(c.opts.start)&&c.opts.start.call(t,c),Q.fx.timer(Q.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function P(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var n,r=0,s=e.toLowerCase().match(pt)||[];if(Q.isFunction(i))for(;n=s[r++];)"+"===n[0]?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(i)):(t[n]=t[n]||[]).push(i)}}function N(t,e,i,n){function r(a){var l;return s[a]=!0,Q.each(t[a]||[],function(t,a){var c=a(e,i,n);return"string"!=typeof c||o||s[c]?o?!(l=c):void 0:(e.dataTypes.unshift(c),r(c),!1)}),l}var s={},o=t===ye;return r(e.dataTypes[0])||!s["*"]&&r("*")}function R(t,e){var i,n,r=Q.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((r[i]?t:n||(n={}))[i]=e[i]);return n&&Q.extend(!0,t,n),t}function L(t,e,i){for(var n,r,s,o,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=t.mimeType||e.getResponseHeader("Content-Type"));if(n)for(r in a)if(a[r]&&a[r].test(n)){l.unshift(r);break}if(l[0]in i)s=l[0];else{for(r in i){if(!l[0]||t.converters[r+" "+l[0]]){s=r;break}o||(o=r)}s=s||o}if(s)return s!==l[0]&&l.unshift(s),i[s]}function F(t,e,i,n){var r,s,o,a,l,c={},u=t.dataTypes.slice();if(u[1])for(o in t.converters)c[o.toLowerCase()]=t.converters[o];for(s=u.shift();s;)if(t.responseFields[s]&&(i[t.responseFields[s]]=e),!l&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=s,s=u.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(o=c[l+" "+s]||c["* "+s],!o)for(r in c)if(a=r.split(" "),a[1]===s&&(o=c[l+" "+a[0]]||c["* "+a[0]])){o===!0?o=c[r]:c[r]!==!0&&(s=a[0],u.unshift(a[1]));break}if(o!==!0)if(o&&t.throws)e=o(e);else try{e=o(e)}catch(t){return{state:"parsererror",error:o?t:"No conversion from "+l+" to "+s}}}return{state:"success",data:e}}function U(t,e,i,n){var r;if(Q.isArray(e))Q.each(e,function(e,r){i||Te.test(t)?n(t,r):U(t+"["+("object"==typeof r?e:"")+"]",r,i,n)});else if(i||"object"!==Q.type(e))n(t,e);else for(r in e)U(t+"["+r+"]",e[r],i,n)}function z(t){return Q.isWindow(t)?t:9===t.nodeType&&t.defaultView}var B=[],W=B.slice,j=B.concat,$=B.push,V=B.indexOf,G={},q=G.toString,K=G.hasOwnProperty,J={},X=t.document,Z="2.1.1",Q=function(t,e){return new Q.fn.init(t,e)},tt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,et=/^-ms-/,it=/-([\da-z])/gi,nt=function(t,e){return e.toUpperCase()};Q.fn=Q.prototype={jquery:Z,constructor:Q,selector:"",length:0,toArray:function(){return W.call(this)},get:function(t){return null!=t?t<0?this[t+this.length]:this[t]:W.call(this)},pushStack:function(t){var e=Q.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return Q.each(this,t,e)},map:function(t){return this.pushStack(Q.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return this.pushStack(W.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(t<0?e:0);return this.pushStack(i>=0&&i<e?[this[i]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:$,sort:B.sort,splice:B.splice},Q.extend=Q.fn.extend=function(){var t,e,i,n,r,s,o=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof o&&(c=o,o=arguments[a]||{},a++),"object"==typeof o||Q.isFunction(o)||(o={}),a===l&&(o=this,a--);a<l;a++)if(null!=(t=arguments[a]))for(e in t)i=o[e],n=t[e],o!==n&&(c&&n&&(Q.isPlainObject(n)||(r=Q.isArray(n)))?(r?(r=!1,s=i&&Q.isArray(i)?i:[]):s=i&&Q.isPlainObject(i)?i:{},o[e]=Q.extend(c,s,n)):void 0!==n&&(o[e]=n));return o},Q.extend({expando:"jQuery"+(Z+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===Q.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){return!Q.isArray(t)&&t-parseFloat(t)>=0},isPlainObject:function(t){return"object"===Q.type(t)&&!t.nodeType&&!Q.isWindow(t)&&!(t.constructor&&!K.call(t.constructor.prototype,"isPrototypeOf"))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?G[q.call(t)]||"object":typeof t},globalEval:function(t){var e,i=eval;t=Q.trim(t),t&&(1===t.indexOf("use strict")?(e=X.createElement("script"),e.text=t,X.head.appendChild(e).parentNode.removeChild(e)):i(t))},camelCase:function(t){return t.replace(et,"ms-").replace(it,nt)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,n){var r,s=0,o=t.length,a=i(t);if(n){if(a)for(;s<o&&(r=e.apply(t[s],n),r!==!1);s++);else for(s in t)if(r=e.apply(t[s],n),r===!1)break}else if(a)for(;s<o&&(r=e.call(t[s],s,t[s]),r!==!1);s++);else for(s in t)if(r=e.call(t[s],s,t[s]),r===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(tt,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(i(Object(t))?Q.merge(n,"string"==typeof t?[t]:t):$.call(n,t)),n},inArray:function(t,e,i){return null==e?-1:V.call(e,t,i)},merge:function(t,e){for(var i=+e.length,n=0,r=t.length;n<i;n++)t[r++]=e[n];return t.length=r,t},grep:function(t,e,i){for(var n,r=[],s=0,o=t.length,a=!i;s<o;s++)n=!e(t[s],s),n!==a&&r.push(t[s]);return r},map:function(t,e,n){var r,s=0,o=t.length,a=i(t),l=[];if(a)for(;s<o;s++)r=e(t[s],s,n),null!=r&&l.push(r);else for(s in t)r=e(t[s],s,n),null!=r&&l.push(r);return j.apply([],l)},guid:1,proxy:function(t,e){var i,n,r;if("string"==typeof e&&(i=t[e],e=t,t=i),Q.isFunction(t))return n=W.call(arguments,2),r=function(){return t.apply(e||this,n.concat(W.call(arguments)))},r.guid=t.guid=t.guid||Q.guid++,r},now:Date.now,support:J}),Q.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){G["[object "+e+"]"]=e.toLowerCase()});var rt=function(t){function e(t,e,i,n){var r,s,o,a,l,c,h,p,f,m;if((e?e.ownerDocument||e:U)!==H&&k(e),e=e||H,i=i||[],!t||"string"!=typeof t)return i;if(1!==(a=e.nodeType)&&9!==a)return[];if(I&&!n){if(r=Mt.exec(t))if(o=r[1]){if(9===a){if(s=e.getElementById(o),!s||!s.parentNode)return i;if(s.id===o)return i.push(s),i}else if(e.ownerDocument&&(s=e.ownerDocument.getElementById(o))&&L(e,s)&&s.id===o)return i.push(s),i}else{if(r[2])return Q.apply(i,e.getElementsByTagName(t)),i;if((o=r[3])&&y.getElementsByClassName&&e.getElementsByClassName)return Q.apply(i,e.getElementsByClassName(o)),i}if(y.qsa&&(!P||!P.test(t))){if(p=h=F,f=e,m=9===a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(c=w(t),(h=e.getAttribute("id"))?p=h.replace(Yt,"\\$&"):e.setAttribute("id",p),p="[id='"+p+"'] ",l=c.length;l--;)c[l]=p+d(c[l]);f=bt.test(t)&&u(e.parentNode)||e,m=c.join(",")}if(m)try{return Q.apply(i,f.querySelectorAll(m)),i}catch(t){}finally{h||e.removeAttribute("id")}}}return x(t.replace(lt,"$1"),e,i,n)}function i(){function t(i,n){return e.push(i+" ")>_.cacheLength&&delete t[e.shift()],t[i+" "]=n}var e=[];return t}function n(t){return t[F]=!0,t}function r(t){var e=H.createElement("div");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function s(t,e){for(var i=t.split("|"),n=t.length;n--;)_.attrHandle[i[n]]=e}function o(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||q)-(~t.sourceIndex||q);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function a(t){return function(e){var i=e.nodeName.toLowerCase();return"input"===i&&e.type===t}}function l(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}function c(t){return n(function(e){return e=+e,n(function(i,n){for(var r,s=t([],i.length,e),o=s.length;o--;)i[r=s[o]]&&(i[r]=!(n[r]=i[r]))})})}function u(t){return t&&typeof t.getElementsByTagName!==G&&t}function h(){}function d(t){for(var e=0,i=t.length,n="";e<i;e++)n+=t[e].value;return n}function p(t,e,i){var n=e.dir,r=i&&"parentNode"===n,s=B++;return e.first?function(e,i,s){for(;e=e[n];)if(1===e.nodeType||r)return t(e,i,s)}:function(e,i,o){var a,l,c=[z,s];if(o){for(;e=e[n];)if((1===e.nodeType||r)&&t(e,i,o))return!0}else for(;e=e[n];)if(1===e.nodeType||r){if(l=e[F]||(e[F]={}),(a=l[n])&&a[0]===z&&a[1]===s)return c[2]=a[2];if(l[n]=c,c[2]=t(e,i,o))return!0}}}function f(t){return t.length>1?function(e,i,n){for(var r=t.length;r--;)if(!t[r](e,i,n))return!1;return!0}:t[0]}function m(t,i,n){for(var r=0,s=i.length;r<s;r++)e(t,i[r],n);return n}function g(t,e,i,n,r){for(var s,o=[],a=0,l=t.length,c=null!=e;a<l;a++)(s=t[a])&&(i&&!i(s,n,r)||(o.push(s),c&&e.push(a)));return o}function v(t,e,i,r,s,o){return r&&!r[F]&&(r=v(r)),s&&!s[F]&&(s=v(s,o)),n(function(n,o,a,l){var c,u,h,d=[],p=[],f=o.length,v=n||m(e||"*",a.nodeType?[a]:a,[]),M=!t||!n&&e?v:g(v,d,t,a,l),b=i?s||(n?t:f||r)?[]:o:M;if(i&&i(M,b,a,l),r)for(c=g(b,p),r(c,[],a,l),u=c.length;u--;)(h=c[u])&&(b[p[u]]=!(M[p[u]]=h));if(n){if(s||t){if(s){for(c=[],u=b.length;u--;)(h=b[u])&&c.push(M[u]=h);s(null,b=[],c,l)}for(u=b.length;u--;)(h=b[u])&&(c=s?et.call(n,h):d[u])>-1&&(n[c]=!(o[c]=h))}}else b=g(b===o?b.splice(f,b.length):b),s?s(null,o,b,l):Q.apply(o,b)})}function M(t){for(var e,i,n,r=t.length,s=_.relative[t[0].type],o=s||_.relative[" "],a=s?1:0,l=p(function(t){return t===e},o,!0),c=p(function(t){return et.call(e,t)>-1},o,!0),u=[function(t,i,n){return!s&&(n||i!==A)||((e=i).nodeType?l(t,i,n):c(t,i,n))}];a<r;a++)if(i=_.relative[t[a].type])u=[p(f(u),i)];else{if(i=_.filter[t[a].type].apply(null,t[a].matches),i[F]){for(n=++a;n<r&&!_.relative[t[n].type];n++);return v(a>1&&f(u),a>1&&d(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(lt,"$1"),i,a<n&&M(t.slice(a,n)),n<r&&M(t=t.slice(n)),n<r&&d(t))}u.push(i)}return f(u)}function b(t,i){var r=i.length>0,s=t.length>0,o=function(n,o,a,l,c){var u,h,d,p=0,f="0",m=n&&[],v=[],M=A,b=n||s&&_.find.TAG("*",c),Y=z+=null==M?1:Math.random()||.1,y=b.length;for(c&&(A=o!==H&&o);f!==y&&null!=(u=b[f]);f++){if(s&&u){for(h=0;d=t[h++];)if(d(u,o,a)){l.push(u);break}c&&(z=Y)}r&&((u=!d&&u)&&p--,n&&m.push(u))}if(p+=f,r&&f!==p){for(h=0;d=i[h++];)d(m,v,o,a);if(n){if(p>0)for(;f--;)m[f]||v[f]||(v[f]=X.call(l));v=g(v)}Q.apply(l,v),c&&!n&&v.length>0&&p+i.length>1&&e.uniqueSort(l)}return c&&(z=Y,A=M),m};return r?n(o):o}var Y,y,_,D,T,w,E,x,A,S,C,k,H,O,I,P,N,R,L,F="sizzle"+-new Date,U=t.document,z=0,B=0,W=i(),j=i(),$=i(),V=function(t,e){return t===e&&(C=!0),0},G="undefined",q=1<<31,K={}.hasOwnProperty,J=[],X=J.pop,Z=J.push,Q=J.push,tt=J.slice,et=J.indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(this[e]===t)return e;return-1},it="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",nt="[\\x20\\t\\r\\n\\f]",rt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",st=rt.replace("w","w#"),ot="\\["+nt+"*("+rt+")(?:"+nt+"*([*^$|!~]?=)"+nt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+st+"))|)"+nt+"*\\]",at=":("+rt+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ot+")*)|.*)\\)|)",lt=new RegExp("^"+nt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+nt+"+$","g"),ct=new RegExp("^"+nt+"*,"+nt+"*"),ut=new RegExp("^"+nt+"*([>+~]|"+nt+")"+nt+"*"),ht=new RegExp("="+nt+"*([^\\]'\"]*?)"+nt+"*\\]","g"),dt=new RegExp(at),pt=new RegExp("^"+st+"$"),ft={ID:new RegExp("^#("+rt+")"),CLASS:new RegExp("^\\.("+rt+")"),TAG:new RegExp("^("+rt.replace("w","w*")+")"),ATTR:new RegExp("^"+ot),PSEUDO:new RegExp("^"+at),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+nt+"*(even|odd|(([+-]|)(\\d*)n|)"+nt+"*(?:([+-]|)"+nt+"*(\\d+)|))"+nt+"*\\)|)","i"),bool:new RegExp("^(?:"+it+")$","i"),needsContext:new RegExp("^"+nt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+nt+"*((?:-\\d)?\\d*)"+nt+"*\\)|)(?=[^-]|$)","i")},mt=/^(?:input|select|textarea|button)$/i,gt=/^h\d$/i,vt=/^[^{]+\{\s*\[native \w/,Mt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,bt=/[+~]/,Yt=/'|\\/g,yt=new RegExp("\\\\([\\da-f]{1,6}"+nt+"?|("+nt+")|.)","ig"),_t=function(t,e,i){var n="0x"+e-65536;return n!==n||i?e:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)};try{Q.apply(J=tt.call(U.childNodes),U.childNodes),J[U.childNodes.length].nodeType}catch(t){Q={apply:J.length?function(t,e){Z.apply(t,tt.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}y=e.support={},T=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},k=e.setDocument=function(t){var e,i=t?t.ownerDocument||t:U,n=i.defaultView;return i!==H&&9===i.nodeType&&i.documentElement?(H=i,O=i.documentElement,I=!T(i),n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",function(){k()},!1):n.attachEvent&&n.attachEvent("onunload",function(){k()})),y.attributes=r(function(t){return t.className="i",!t.getAttribute("className")}),y.getElementsByTagName=r(function(t){return t.appendChild(i.createComment("")),!t.getElementsByTagName("*").length}),y.getElementsByClassName=vt.test(i.getElementsByClassName)&&r(function(t){return t.innerHTML="<div class='a'></div><div class='a i'></div>",t.firstChild.className="i",2===t.getElementsByClassName("i").length}),y.getById=r(function(t){return O.appendChild(t).id=F,!i.getElementsByName||!i.getElementsByName(F).length}),y.getById?(_.find.ID=function(t,e){if(typeof e.getElementById!==G&&I){var i=e.getElementById(t);return i&&i.parentNode?[i]:[]}},_.filter.ID=function(t){var e=t.replace(yt,_t);return function(t){return t.getAttribute("id")===e}}):(delete _.find.ID,_.filter.ID=function(t){var e=t.replace(yt,_t);return function(t){var i=typeof t.getAttributeNode!==G&&t.getAttributeNode("id");return i&&i.value===e}}),_.find.TAG=y.getElementsByTagName?function(t,e){if(typeof e.getElementsByTagName!==G)return e.getElementsByTagName(t)}:function(t,e){var i,n=[],r=0,s=e.getElementsByTagName(t);if("*"===t){for(;i=s[r++];)1===i.nodeType&&n.push(i);return n}return s},_.find.CLASS=y.getElementsByClassName&&function(t,e){if(typeof e.getElementsByClassName!==G&&I)return e.getElementsByClassName(t)},N=[],P=[],(y.qsa=vt.test(i.querySelectorAll))&&(r(function(t){t.innerHTML="<select msallowclip=''><option selected=''></option></select>",t.querySelectorAll("[msallowclip^='']").length&&P.push("[*^$]="+nt+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||P.push("\\["+nt+"*(?:value|"+it+")"),t.querySelectorAll(":checked").length||P.push(":checked")}),r(function(t){var e=i.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&P.push("name"+nt+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||P.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),P.push(",.*:")})),(y.matchesSelector=vt.test(R=O.matches||O.webkitMatchesSelector||O.mozMatchesSelector||O.oMatchesSelector||O.msMatchesSelector))&&r(function(t){y.disconnectedMatch=R.call(t,"div"),R.call(t,"[s!='']:x"),N.push("!=",at)}),P=P.length&&new RegExp(P.join("|")),N=N.length&&new RegExp(N.join("|")),e=vt.test(O.compareDocumentPosition),L=e||vt.test(O.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},V=e?function(t,e){if(t===e)return C=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n?n:(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&n||!y.sortDetached&&e.compareDocumentPosition(t)===n?t===i||t.ownerDocument===U&&L(U,t)?-1:e===i||e.ownerDocument===U&&L(U,e)?1:S?et.call(S,t)-et.call(S,e):0:4&n?-1:1)}:function(t,e){if(t===e)return C=!0,0;var n,r=0,s=t.parentNode,a=e.parentNode,l=[t],c=[e];if(!s||!a)return t===i?-1:e===i?1:s?-1:a?1:S?et.call(S,t)-et.call(S,e):0;if(s===a)return o(t,e);for(n=t;n=n.parentNode;)l.unshift(n);for(n=e;n=n.parentNode;)c.unshift(n);for(;l[r]===c[r];)r++;return r?o(l[r],c[r]):l[r]===U?-1:c[r]===U?1:0},i):H},e.matches=function(t,i){return e(t,null,null,i)},e.matchesSelector=function(t,i){if((t.ownerDocument||t)!==H&&k(t),i=i.replace(ht,"='$1']"),y.matchesSelector&&I&&(!N||!N.test(i))&&(!P||!P.test(i)))try{var n=R.call(t,i);if(n||y.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){}return e(i,H,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==H&&k(t),L(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==H&&k(t);var i=_.attrHandle[e.toLowerCase()],n=i&&K.call(_.attrHandle,e.toLowerCase())?i(t,e,!I):void 0;return void 0!==n?n:y.attributes||!I?t.getAttribute(e):(n=t.getAttributeNode(e))&&n.specified?n.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,i=[],n=0,r=0;if(C=!y.detectDuplicates,S=!y.sortStable&&t.slice(0),t.sort(V),C){for(;e=t[r++];)e===t[r]&&(n=i.push(r));for(;n--;)t.splice(i[n],1)}return S=null,t},D=e.getText=function(t){var e,i="",n=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=D(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[n++];)i+=D(e);return i},_=e.selectors={cacheLength:50,createPseudo:n,match:ft,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(yt,_t),t[3]=(t[3]||t[4]||t[5]||"").replace(yt,_t),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return ft.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&dt.test(i)&&(e=w(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(yt,_t).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=W[t+" "];return e||(e=new RegExp("(^|"+nt+")"+t+"("+nt+"|$)"))&&W(t,function(t){return e.test("string"==typeof t.className&&t.className||typeof t.getAttribute!==G&&t.getAttribute("class")||"")})},ATTR:function(t,i,n){return function(r){var s=e.attr(r,t);return null==s?"!="===i:!i||(s+="","="===i?s===n:"!="===i?s!==n:"^="===i?n&&0===s.indexOf(n):"*="===i?n&&s.indexOf(n)>-1:"$="===i?n&&s.slice(-n.length)===n:"~="===i?(" "+s+" ").indexOf(n)>-1:"|="===i&&(s===n||s.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,i,n,r){var s="nth"!==t.slice(0,3),o="last"!==t.slice(-4),a="of-type"===e;return 1===n&&0===r?function(t){return!!t.parentNode}:function(e,i,l){var c,u,h,d,p,f,m=s!==o?"nextSibling":"previousSibling",g=e.parentNode,v=a&&e.nodeName.toLowerCase(),M=!l&&!a;if(g){if(s){for(;m;){for(h=e;h=h[m];)if(a?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;f=m="only"===t&&!f&&"nextSibling"}return!0}if(f=[o?g.firstChild:g.lastChild],o&&M){for(u=g[F]||(g[F]={}),c=u[t]||[],p=c[0]===z&&c[1],d=c[0]===z&&c[2],h=p&&g.childNodes[p];h=++p&&h&&h[m]||(d=p=0)||f.pop();)if(1===h.nodeType&&++d&&h===e){u[t]=[z,p,d];break}}else if(M&&(c=(e[F]||(e[F]={}))[t])&&c[0]===z)d=c[1];else for(;(h=++p&&h&&h[m]||(d=p=0)||f.pop())&&((a?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++d||(M&&((h[F]||(h[F]={}))[t]=[z,d]),h!==e)););return d-=r,d===n||d%n===0&&d/n>=0}}},PSEUDO:function(t,i){var r,s=_.pseudos[t]||_.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return s[F]?s(i):s.length>1?(r=[t,t,"",i],_.setFilters.hasOwnProperty(t.toLowerCase())?n(function(t,e){for(var n,r=s(t,i),o=r.length;o--;)n=et.call(t,r[o]),t[n]=!(e[n]=r[o])}):function(t){return s(t,0,r)}):s}},pseudos:{not:n(function(t){var e=[],i=[],r=E(t.replace(lt,"$1"));return r[F]?n(function(t,e,i,n){for(var s,o=r(t,null,n,[]),a=t.length;a--;)(s=o[a])&&(t[a]=!(e[a]=s))}):function(t,n,s){return e[0]=t,r(e,null,s,i),!i.pop()}}),has:n(function(t){return function(i){return e(t,i).length>0}}),contains:n(function(t){return function(e){return(e.textContent||e.innerText||D(e)).indexOf(t)>-1}}),lang:n(function(t){return pt.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(yt,_t).toLowerCase(),function(e){var i;do if(i=I?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return i=i.toLowerCase(),i===t||0===i.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===O},focus:function(t){return t===H.activeElement&&(!H.hasFocus||H.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!_.pseudos.empty(t)},header:function(t){return gt.test(t.nodeName)},input:function(t){return mt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:c(function(){return[0]}),last:c(function(t,e){return[e-1]}),eq:c(function(t,e,i){return[i<0?i+e:i]}),even:c(function(t,e){for(var i=0;i<e;i+=2)t.push(i);return t}),odd:c(function(t,e){for(var i=1;i<e;i+=2)t.push(i);return t}),lt:c(function(t,e,i){for(var n=i<0?i+e:i;--n>=0;)t.push(n);return t}),gt:c(function(t,e,i){for(var n=i<0?i+e:i;++n<e;)t.push(n);return t})}},_.pseudos.nth=_.pseudos.eq;for(Y in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})_.pseudos[Y]=a(Y);for(Y in{submit:!0,reset:!0})_.pseudos[Y]=l(Y);return h.prototype=_.filters=_.pseudos,_.setFilters=new h,w=e.tokenize=function(t,i){var n,r,s,o,a,l,c,u=j[t+" "];if(u)return i?0:u.slice(0);for(a=t,l=[],c=_.preFilter;a;){n&&!(r=ct.exec(a))||(r&&(a=a.slice(r[0].length)||a),l.push(s=[])),n=!1,(r=ut.exec(a))&&(n=r.shift(),s.push({value:n,type:r[0].replace(lt," ")}),a=a.slice(n.length));for(o in _.filter)!(r=ft[o].exec(a))||c[o]&&!(r=c[o](r))||(n=r.shift(),s.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return i?a.length:a?e.error(t):j(t,l).slice(0)},E=e.compile=function(t,e){var i,n=[],r=[],s=$[t+" "];if(!s){for(e||(e=w(t)),i=e.length;i--;)s=M(e[i]),s[F]?n.push(s):r.push(s);s=$(t,b(r,n)),s.selector=t}return s},x=e.select=function(t,e,i,n){var r,s,o,a,l,c="function"==typeof t&&t,h=!n&&w(t=c.selector||t);if(i=i||[],1===h.length){if(s=h[0]=h[0].slice(0),s.length>2&&"ID"===(o=s[0]).type&&y.getById&&9===e.nodeType&&I&&_.relative[s[1].type]){if(e=(_.find.ID(o.matches[0].replace(yt,_t),e)||[])[0],!e)return i;c&&(e=e.parentNode),t=t.slice(s.shift().value.length)}for(r=ft.needsContext.test(t)?0:s.length;r--&&(o=s[r],!_.relative[a=o.type]);)if((l=_.find[a])&&(n=l(o.matches[0].replace(yt,_t),bt.test(s[0].type)&&u(e.parentNode)||e))){if(s.splice(r,1),t=n.length&&d(s),!t)return Q.apply(i,n),i;break}}return(c||E(t,h))(n,e,!I,i,bt.test(t)&&u(e.parentNode)||e),i},y.sortStable=F.split("").sort(V).join("")===F,y.detectDuplicates=!!C,k(),y.sortDetached=r(function(t){return 1&t.compareDocumentPosition(H.createElement("div"))}),r(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||s("type|href|height|width",function(t,e,i){if(!i)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),y.attributes&&r(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||s("value",function(t,e,i){if(!i&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),r(function(t){return null==t.getAttribute("disabled")})||s(it,function(t,e,i){var n;if(!i)return t[e]===!0?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null}),e}(t);Q.find=rt,Q.expr=rt.selectors,Q.expr[":"]=Q.expr.pseudos,Q.unique=rt.uniqueSort,Q.text=rt.getText,Q.isXMLDoc=rt.isXML,Q.contains=rt.contains;var st=Q.expr.match.needsContext,ot=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,at=/^.[^:#\[\.,]*$/;Q.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?Q.find.matchesSelector(n,t)?[n]:[]:Q.find.matches(t,Q.grep(e,function(t){return 1===t.nodeType}))},Q.fn.extend({find:function(t){var e,i=this.length,n=[],r=this;if("string"!=typeof t)return this.pushStack(Q(t).filter(function(){for(e=0;e<i;e++)if(Q.contains(r[e],this))return!0}));for(e=0;e<i;e++)Q.find(t,r[e],n);return n=this.pushStack(i>1?Q.unique(n):n),n.selector=this.selector?this.selector+" "+t:t,n},filter:function(t){return this.pushStack(n(this,t||[],!1))},not:function(t){return this.pushStack(n(this,t||[],!0))},is:function(t){return!!n(this,"string"==typeof t&&st.test(t)?Q(t):t||[],!1).length}});var lt,ct=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ut=Q.fn.init=function(t,e){var i,n;if(!t)return this;if("string"==typeof t){if(i="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:ct.exec(t),!i||!i[1]&&e)return!e||e.jquery?(e||lt).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof Q?e[0]:e,Q.merge(this,Q.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:X,!0)),ot.test(i[1])&&Q.isPlainObject(e))for(i in e)Q.isFunction(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return n=X.getElementById(i[2]),n&&n.parentNode&&(this.length=1,this[0]=n),this.context=X,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):Q.isFunction(t)?"undefined"!=typeof lt.ready?lt.ready(t):t(Q):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),Q.makeArray(t,this))};ut.prototype=Q.fn,lt=Q(X);var ht=/^(?:parents|prev(?:Until|All))/,dt={children:!0,contents:!0,next:!0,prev:!0};Q.extend({dir:function(t,e,i){for(var n=[],r=void 0!==i;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&Q(t).is(i))break;n.push(t)}return n},sibling:function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i}}),Q.fn.extend({has:function(t){var e=Q(t,this),i=e.length;return this.filter(function(){for(var t=0;t<i;t++)if(Q.contains(this,e[t]))return!0})},closest:function(t,e){for(var i,n=0,r=this.length,s=[],o=st.test(t)||"string"!=typeof t?Q(t,e||this.context):0;n<r;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(o?o.index(i)>-1:1===i.nodeType&&Q.find.matchesSelector(i,t))){s.push(i);break}return this.pushStack(s.length>1?Q.unique(s):s)},index:function(t){return t?"string"==typeof t?V.call(Q(t),this[0]):V.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(Q.unique(Q.merge(this.get(),Q(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),Q.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return Q.dir(t,"parentNode")},parentsUntil:function(t,e,i){return Q.dir(t,"parentNode",i)},next:function(t){return r(t,"nextSibling")},prev:function(t){return r(t,"previousSibling")},nextAll:function(t){return Q.dir(t,"nextSibling")},prevAll:function(t){return Q.dir(t,"previousSibling")},nextUntil:function(t,e,i){return Q.dir(t,"nextSibling",i)},prevUntil:function(t,e,i){return Q.dir(t,"previousSibling",i)},siblings:function(t){return Q.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return Q.sibling(t.firstChild)},contents:function(t){return t.contentDocument||Q.merge([],t.childNodes)}},function(t,e){Q.fn[t]=function(i,n){var r=Q.map(this,e,i);return"Until"!==t.slice(-5)&&(n=i),n&&"string"==typeof n&&(r=Q.filter(n,r)),this.length>1&&(dt[t]||Q.unique(r),ht.test(t)&&r.reverse()),this.pushStack(r)}});var pt=/\S+/g,ft={};Q.Callbacks=function(t){t="string"==typeof t?ft[t]||s(t):Q.extend({},t);var e,i,n,r,o,a,l=[],c=!t.once&&[],u=function(s){for(e=t.memory&&s,i=!0,a=r||0,r=0,o=l.length,n=!0;l&&a<o;a++)if(l[a].apply(s[0],s[1])===!1&&t.stopOnFalse){e=!1;break}n=!1,l&&(c?c.length&&u(c.shift()):e?l=[]:h.disable())},h={add:function(){if(l){var i=l.length;!function e(i){Q.each(i,function(i,n){var r=Q.type(n);"function"===r?t.unique&&h.has(n)||l.push(n):n&&n.length&&"string"!==r&&e(n)})}(arguments),n?o=l.length:e&&(r=i,u(e))}return this},remove:function(){return l&&Q.each(arguments,function(t,e){for(var i;(i=Q.inArray(e,l,i))>-1;)l.splice(i,1),n&&(i<=o&&o--,i<=a&&a--)}),this},has:function(t){return t?Q.inArray(t,l)>-1:!(!l||!l.length)},empty:function(){return l=[],o=0,this},disable:function(){return l=c=e=void 0,this},disabled:function(){return!l},lock:function(){return c=void 0,e||h.disable(),this},locked:function(){return!c},fireWith:function(t,e){return!l||i&&!c||(e=e||[],e=[t,e.slice?e.slice():e],n?c.push(e):u(e)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!i}};return h},Q.extend({Deferred:function(t){var e=[["resolve","done",Q.Callbacks("once memory"),"resolved"],["reject","fail",Q.Callbacks("once memory"),"rejected"],["notify","progress",Q.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var t=arguments;return Q.Deferred(function(i){Q.each(e,function(e,s){var o=Q.isFunction(t[e])&&t[e];r[s[1]](function(){var t=o&&o.apply(this,arguments);t&&Q.isFunction(t.promise)?t.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[s[0]+"With"](this===n?i.promise():this,o?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?Q.extend(t,n):n}},r={};return n.pipe=n.then,Q.each(e,function(t,s){var o=s[2],a=s[3];n[s[1]]=o.add,a&&o.add(function(){i=a},e[1^t][2].disable,e[2][2].lock),r[s[0]]=function(){return r[s[0]+"With"](this===r?n:this,arguments),this},r[s[0]+"With"]=o.fireWith}),n.promise(r),t&&t.call(r,r),r},when:function(t){var e,i,n,r=0,s=W.call(arguments),o=s.length,a=1!==o||t&&Q.isFunction(t.promise)?o:0,l=1===a?t:Q.Deferred(),c=function(t,i,n){return function(r){i[t]=this,n[t]=arguments.length>1?W.call(arguments):r,n===e?l.notifyWith(i,n):--a||l.resolveWith(i,n)}};if(o>1)for(e=new Array(o),i=new Array(o),n=new Array(o);r<o;r++)s[r]&&Q.isFunction(s[r].promise)?s[r].promise().done(c(r,n,s)).fail(l.reject).progress(c(r,i,e)):--a;return a||l.resolveWith(n,s),l.promise()}});var mt;Q.fn.ready=function(t){return Q.ready.promise().done(t),this},Q.extend({isReady:!1,readyWait:1,holdReady:function(t){t?Q.readyWait++:Q.ready(!0)},ready:function(t){(t===!0?--Q.readyWait:Q.isReady)||(Q.isReady=!0,t!==!0&&--Q.readyWait>0||(mt.resolveWith(X,[Q]),Q.fn.triggerHandler&&(Q(X).triggerHandler("ready"),Q(X).off("ready"))))}}),Q.ready.promise=function(e){return mt||(mt=Q.Deferred(),"complete"===X.readyState?setTimeout(Q.ready):(X.addEventListener("DOMContentLoaded",o,!1),t.addEventListener("load",o,!1))),mt.promise(e)},Q.ready.promise();var gt=Q.access=function(t,e,i,n,r,s,o){var a=0,l=t.length,c=null==i;if("object"===Q.type(i)){r=!0;for(a in i)Q.access(t,e,a,i[a],!0,s,o)}else if(void 0!==n&&(r=!0,Q.isFunction(n)||(o=!0),c&&(o?(e.call(t,n),e=null):(c=e,e=function(t,e,i){return c.call(Q(t),i)})),e))for(;a<l;a++)e(t[a],i,o?n:n.call(t[a],a,e(t[a],i)));return r?t:c?e.call(t):l?e(t[0],i):s};Q.acceptData=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType},a.uid=1,a.accepts=Q.acceptData,a.prototype={key:function(t){if(!a.accepts(t))return 0;var e={},i=t[this.expando];if(!i){i=a.uid++;try{e[this.expando]={value:i},Object.defineProperties(t,e)}catch(n){e[this.expando]=i,Q.extend(t,e)}}return this.cache[i]||(this.cache[i]={}),i},set:function(t,e,i){var n,r=this.key(t),s=this.cache[r];if("string"==typeof e)s[e]=i;else if(Q.isEmptyObject(s))Q.extend(this.cache[r],e);else for(n in e)s[n]=e[n];return s},get:function(t,e){var i=this.cache[this.key(t)];return void 0===e?i:i[e]},access:function(t,e,i){var n;return void 0===e||e&&"string"==typeof e&&void 0===i?(n=this.get(t,e),void 0!==n?n:this.get(t,Q.camelCase(e))):(this.set(t,e,i),void 0!==i?i:e)},remove:function(t,e){var i,n,r,s=this.key(t),o=this.cache[s];if(void 0===e)this.cache[s]={};else{Q.isArray(e)?n=e.concat(e.map(Q.camelCase)):(r=Q.camelCase(e),e in o?n=[e,r]:(n=r,n=n in o?[n]:n.match(pt)||[])),i=n.length;for(;i--;)delete o[n[i]]}},hasData:function(t){return!Q.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(t){t[this.expando]&&delete this.cache[t[this.expando]]}};var vt=new a,Mt=new a,bt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Yt=/([A-Z])/g;Q.extend({hasData:function(t){return Mt.hasData(t)||vt.hasData(t)},data:function(t,e,i){return Mt.access(t,e,i)},removeData:function(t,e){Mt.remove(t,e)},_data:function(t,e,i){return vt.access(t,e,i)},_removeData:function(t,e){vt.remove(t,e)}}),Q.fn.extend({data:function(t,e){var i,n,r,s=this[0],o=s&&s.attributes;if(void 0===t){if(this.length&&(r=Mt.get(s),1===s.nodeType&&!vt.get(s,"hasDataAttrs"))){for(i=o.length;i--;)o[i]&&(n=o[i].name,0===n.indexOf("data-")&&(n=Q.camelCase(n.slice(5)),l(s,n,r[n])));vt.set(s,"hasDataAttrs",!0)}return r}return"object"==typeof t?this.each(function(){Mt.set(this,t)}):gt(this,function(e){var i,n=Q.camelCase(t);if(s&&void 0===e){if(i=Mt.get(s,t),void 0!==i)return i;if(i=Mt.get(s,n),void 0!==i)return i;if(i=l(s,n,void 0),void 0!==i)return i}else this.each(function(){var i=Mt.get(this,n);Mt.set(this,n,e),t.indexOf("-")!==-1&&void 0!==i&&Mt.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){Mt.remove(this,t)})}}),Q.extend({queue:function(t,e,i){var n;if(t)return e=(e||"fx")+"queue",n=vt.get(t,e),i&&(!n||Q.isArray(i)?n=vt.access(t,e,Q.makeArray(i)):n.push(i)),n||[]},dequeue:function(t,e){e=e||"fx";var i=Q.queue(t,e),n=i.length,r=i.shift(),s=Q._queueHooks(t,e),o=function(){Q.dequeue(t,e)};"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===e&&i.unshift("inprogress"),delete s.stop,r.call(t,o,s)),!n&&s&&s.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return vt.get(t,i)||vt.access(t,i,{empty:Q.Callbacks("once memory").add(function(){vt.remove(t,[e+"queue",i])})})}}),Q.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),arguments.length<i?Q.queue(this[0],t):void 0===e?this:this.each(function(){var i=Q.queue(this,t,e);Q._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&Q.dequeue(this,t)})},dequeue:function(t){return this.each(function(){Q.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,r=Q.Deferred(),s=this,o=this.length,a=function(){--n||r.resolveWith(s,[s])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";o--;)i=vt.get(s[o],t+"queueHooks"),i&&i.empty&&(n++,i.empty.add(a));return a(),r.promise(e)}});var yt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,_t=["Top","Right","Bottom","Left"],Dt=function(t,e){return t=e||t,"none"===Q.css(t,"display")||!Q.contains(t.ownerDocument,t)},Tt=/^(?:checkbox|radio)$/i;!function(){var t=X.createDocumentFragment(),e=t.appendChild(X.createElement("div")),i=X.createElement("input");i.setAttribute("type","radio"),i.setAttribute("checked","checked"),i.setAttribute("name","t"),e.appendChild(i),J.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",J.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var wt="undefined";J.focusinBubbles="onfocusin"in t;var Et=/^key/,xt=/^(?:mouse|pointer|contextmenu)|click/,At=/^(?:focusinfocus|focusoutblur)$/,St=/^([^.]*)(?:\.(.+)|)$/;Q.event={global:{},add:function(t,e,i,n,r){var s,o,a,l,c,u,h,d,p,f,m,g=vt.get(t);if(g)for(i.handler&&(s=i,i=s.handler,r=s.selector),i.guid||(i.guid=Q.guid++),(l=g.events)||(l=g.events={}),(o=g.handle)||(o=g.handle=function(e){return typeof Q!==wt&&Q.event.triggered!==e.type?Q.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(pt)||[""],c=e.length;c--;)a=St.exec(e[c])||[],p=m=a[1],f=(a[2]||"").split(".").sort(),p&&(h=Q.event.special[p]||{},p=(r?h.delegateType:h.bindType)||p,h=Q.event.special[p]||{},u=Q.extend({type:p,origType:m,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&Q.expr.match.needsContext.test(r),namespace:f.join(".")},s),(d=l[p])||(d=l[p]=[],d.delegateCount=0,h.setup&&h.setup.call(t,n,f,o)!==!1||t.addEventListener&&t.addEventListener(p,o,!1)),h.add&&(h.add.call(t,u),u.handler.guid||(u.handler.guid=i.guid)),r?d.splice(d.delegateCount++,0,u):d.push(u),Q.event.global[p]=!0)},remove:function(t,e,i,n,r){var s,o,a,l,c,u,h,d,p,f,m,g=vt.hasData(t)&&vt.get(t);if(g&&(l=g.events)){for(e=(e||"").match(pt)||[""],c=e.length;c--;)if(a=St.exec(e[c])||[],p=m=a[1],f=(a[2]||"").split(".").sort(),p){for(h=Q.event.special[p]||{},p=(n?h.delegateType:h.bindType)||p,d=l[p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=s=d.length;s--;)u=d[s],!r&&m!==u.origType||i&&i.guid!==u.guid||a&&!a.test(u.namespace)||n&&n!==u.selector&&("**"!==n||!u.selector)||(d.splice(s,1),u.selector&&d.delegateCount--,h.remove&&h.remove.call(t,u));o&&!d.length&&(h.teardown&&h.teardown.call(t,f,g.handle)!==!1||Q.removeEvent(t,p,g.handle),delete l[p])}else for(p in l)Q.event.remove(t,p+e[c],i,n,!0);Q.isEmptyObject(l)&&(delete g.handle,vt.remove(t,"events"))}},trigger:function(e,i,n,r){var s,o,a,l,c,u,h,d=[n||X],p=K.call(e,"type")?e.type:e,f=K.call(e,"namespace")?e.namespace.split("."):[];if(o=a=n=n||X,3!==n.nodeType&&8!==n.nodeType&&!At.test(p+Q.event.triggered)&&(p.indexOf(".")>=0&&(f=p.split("."),p=f.shift(),f.sort()),c=p.indexOf(":")<0&&"on"+p,e=e[Q.expando]?e:new Q.Event(p,"object"==typeof e&&e),e.isTrigger=r?2:3,e.namespace=f.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),i=null==i?[e]:Q.makeArray(i,[e]),h=Q.event.special[p]||{},r||!h.trigger||h.trigger.apply(n,i)!==!1)){if(!r&&!h.noBubble&&!Q.isWindow(n)){for(l=h.delegateType||p,At.test(l+p)||(o=o.parentNode);o;o=o.parentNode)d.push(o),a=o;a===(n.ownerDocument||X)&&d.push(a.defaultView||a.parentWindow||t)}for(s=0;(o=d[s++])&&!e.isPropagationStopped();)e.type=s>1?l:h.bindType||p,u=(vt.get(o,"events")||{})[e.type]&&vt.get(o,"handle"),u&&u.apply(o,i),u=c&&o[c],u&&u.apply&&Q.acceptData(o)&&(e.result=u.apply(o,i),e.result===!1&&e.preventDefault());return e.type=p,r||e.isDefaultPrevented()||h._default&&h._default.apply(d.pop(),i)!==!1||!Q.acceptData(n)||c&&Q.isFunction(n[p])&&!Q.isWindow(n)&&(a=n[c],a&&(n[c]=null),Q.event.triggered=p,n[p](),Q.event.triggered=void 0,a&&(n[c]=a)),e.result}},dispatch:function(t){t=Q.event.fix(t);var e,i,n,r,s,o=[],a=W.call(arguments),l=(vt.get(this,"events")||{})[t.type]||[],c=Q.event.special[t.type]||{};if(a[0]=t,t.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,t)!==!1){for(o=Q.event.handlers.call(this,t,l),e=0;(r=o[e++])&&!t.isPropagationStopped();)for(t.currentTarget=r.elem,i=0;(s=r.handlers[i++])&&!t.isImmediatePropagationStopped();)t.namespace_re&&!t.namespace_re.test(s.namespace)||(t.handleObj=s,t.data=s.data,n=((Q.event.special[s.origType]||{}).handle||s.handler).apply(r.elem,a),void 0!==n&&(t.result=n)===!1&&(t.preventDefault(),t.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,t),t.result}},handlers:function(t,e){var i,n,r,s,o=[],a=e.delegateCount,l=t.target;if(a&&l.nodeType&&(!t.button||"click"!==t.type))for(;l!==this;l=l.parentNode||this)if(l.disabled!==!0||"click"!==t.type){for(n=[],i=0;i<a;i++)s=e[i],r=s.selector+" ",void 0===n[r]&&(n[r]=s.needsContext?Q(r,this).index(l)>=0:Q.find(r,this,null,[l]).length),n[r]&&n.push(s);n.length&&o.push({elem:l,handlers:n})}return a<e.length&&o.push({elem:this,handlers:e.slice(a)}),o},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var i,n,r,s=e.button;return null==t.pageX&&null!=e.clientX&&(i=t.target.ownerDocument||X,n=i.documentElement,r=i.body,t.pageX=e.clientX+(n&&n.scrollLeft||r&&r.scrollLeft||0)-(n&&n.clientLeft||r&&r.clientLeft||0),t.pageY=e.clientY+(n&&n.scrollTop||r&&r.scrollTop||0)-(n&&n.clientTop||r&&r.clientTop||0)),t.which||void 0===s||(t.which=1&s?1:2&s?3:4&s?2:0),t}},fix:function(t){if(t[Q.expando])return t;var e,i,n,r=t.type,s=t,o=this.fixHooks[r];for(o||(this.fixHooks[r]=o=xt.test(r)?this.mouseHooks:Et.test(r)?this.keyHooks:{}),n=o.props?this.props.concat(o.props):this.props,t=new Q.Event(s),e=n.length;e--;)i=n[e],t[i]=s[i];return t.target||(t.target=X),3===t.target.nodeType&&(t.target=t.target.parentNode),o.filter?o.filter(t,s):t},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==h()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===h()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&Q.nodeName(this,"input"))return this.click(),!1},_default:function(t){return Q.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,i,n){var r=Q.extend(new Q.Event,i,{type:t,isSimulated:!0,originalEvent:{}});n?Q.event.trigger(r,null,e):Q.event.dispatch.call(e,r),r.isDefaultPrevented()&&i.preventDefault()}},Q.removeEvent=function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i,!1)},Q.Event=function(t,e){return this instanceof Q.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?c:u):this.type=t,e&&Q.extend(this,e),this.timeStamp=t&&t.timeStamp||Q.now(),void(this[Q.expando]=!0)):new Q.Event(t,e)},Q.Event.prototype={isDefaultPrevented:u,isPropagationStopped:u,isImmediatePropagationStopped:u,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=c,t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=c,t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=c,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},Q.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){Q.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=this,r=t.relatedTarget,s=t.handleObj;return r&&(r===n||Q.contains(n,r))||(t.type=s.origType,i=s.handler.apply(this,arguments),t.type=e),i}}}),J.focusinBubbles||Q.each({focus:"focusin",blur:"focusout"},function(t,e){var i=function(t){Q.event.simulate(e,t.target,Q.event.fix(t),!0)};Q.event.special[e]={setup:function(){var n=this.ownerDocument||this,r=vt.access(n,e);r||n.addEventListener(t,i,!0),vt.access(n,e,(r||0)+1)},teardown:function(){var n=this.ownerDocument||this,r=vt.access(n,e)-1;r?vt.access(n,e,r):(n.removeEventListener(t,i,!0),vt.remove(n,e))}}}),Q.fn.extend({on:function(t,e,i,n,r){var s,o;if("object"==typeof t){"string"!=typeof e&&(i=i||e,e=void 0);for(o in t)this.on(o,e,i,t[o],r);return this}if(null==i&&null==n?(n=e,i=e=void 0):null==n&&("string"==typeof e?(n=i,i=void 0):(n=i,i=e,e=void 0)),n===!1)n=u;else if(!n)return this;return 1===r&&(s=n,n=function(t){return Q().off(t),s.apply(this,arguments)},n.guid=s.guid||(s.guid=Q.guid++)),this.each(function(){Q.event.add(this,t,n,i,e)})},one:function(t,e,i,n){return this.on(t,e,i,n,1)},off:function(t,e,i){var n,r;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,Q(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return e!==!1&&"function"!=typeof e||(i=e,e=void 0),i===!1&&(i=u),this.each(function(){Q.event.remove(this,t,i,e)})},trigger:function(t,e){return this.each(function(){Q.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];if(i)return Q.event.trigger(t,e,i,!0)}});var Ct=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,kt=/<([\w:]+)/,Ht=/<|&#?\w+;/,Ot=/<(?:script|style|link)/i,It=/checked\s*(?:[^=]|=\s*.checked.)/i,Pt=/^$|\/(?:java|ecma)script/i,Nt=/^true\/(.*)/,Rt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Lt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Lt.optgroup=Lt.option,Lt.tbody=Lt.tfoot=Lt.colgroup=Lt.caption=Lt.thead,Lt.th=Lt.td,Q.extend({clone:function(t,e,i){var n,r,s,o,a=t.cloneNode(!0),l=Q.contains(t.ownerDocument,t);if(!(J.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||Q.isXMLDoc(t)))for(o=v(a),s=v(t),n=0,r=s.length;n<r;n++)M(s[n],o[n]);if(e)if(i)for(s=s||v(t),o=o||v(a),n=0,r=s.length;n<r;n++)g(s[n],o[n]);else g(t,a);return o=v(a,"script"),o.length>0&&m(o,!l&&v(t,"script")),a},buildFragment:function(t,e,i,n){for(var r,s,o,a,l,c,u=e.createDocumentFragment(),h=[],d=0,p=t.length;d<p;d++)if(r=t[d],r||0===r)if("object"===Q.type(r))Q.merge(h,r.nodeType?[r]:r);else if(Ht.test(r)){for(s=s||u.appendChild(e.createElement("div")),o=(kt.exec(r)||["",""])[1].toLowerCase(),a=Lt[o]||Lt._default,s.innerHTML=a[1]+r.replace(Ct,"<$1></$2>")+a[2],c=a[0];c--;)s=s.lastChild;Q.merge(h,s.childNodes),s=u.firstChild,s.textContent=""}else h.push(e.createTextNode(r));for(u.textContent="",d=0;r=h[d++];)if((!n||Q.inArray(r,n)===-1)&&(l=Q.contains(r.ownerDocument,r),s=v(u.appendChild(r),"script"),l&&m(s),i))for(c=0;r=s[c++];)Pt.test(r.type||"")&&i.push(r);return u},cleanData:function(t){for(var e,i,n,r,s=Q.event.special,o=0;void 0!==(i=t[o]);o++){if(Q.acceptData(i)&&(r=i[vt.expando],r&&(e=vt.cache[r]))){if(e.events)for(n in e.events)s[n]?Q.event.remove(i,n):Q.removeEvent(i,n,e.handle);vt.cache[r]&&delete vt.cache[r]}delete Mt.cache[i[Mt.expando]]}}}),Q.fn.extend({text:function(t){return gt(this,function(t){return void 0===t?Q.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=d(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=d(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var i,n=t?Q.filter(t,this):this,r=0;null!=(i=n[r]);r++)e||1!==i.nodeType||Q.cleanData(v(i)),i.parentNode&&(e&&Q.contains(i.ownerDocument,i)&&m(v(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(Q.cleanData(v(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return Q.clone(this,t,e)})},html:function(t){return gt(this,function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Ot.test(t)&&!Lt[(kt.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(Ct,"<$1></$2>");try{for(;i<n;i++)e=this[i]||{},1===e.nodeType&&(Q.cleanData(v(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,Q.cleanData(v(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=j.apply([],t);var i,n,r,s,o,a,l=0,c=this.length,u=this,h=c-1,d=t[0],m=Q.isFunction(d);if(m||c>1&&"string"==typeof d&&!J.checkClone&&It.test(d))return this.each(function(i){var n=u.eq(i);m&&(t[0]=d.call(this,i,n.html())),n.domManip(t,e)});if(c&&(i=Q.buildFragment(t,this[0].ownerDocument,!1,this),n=i.firstChild,1===i.childNodes.length&&(i=n),n)){for(r=Q.map(v(i,"script"),p),s=r.length;l<c;l++)o=i,l!==h&&(o=Q.clone(o,!0,!0),s&&Q.merge(r,v(o,"script"))),e.call(this[l],o,l);if(s)for(a=r[r.length-1].ownerDocument,Q.map(r,f),l=0;l<s;l++)o=r[l],Pt.test(o.type||"")&&!vt.access(o,"globalEval")&&Q.contains(a,o)&&(o.src?Q._evalUrl&&Q._evalUrl(o.src):Q.globalEval(o.textContent.replace(Rt,"")))}return this}}),Q.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){Q.fn[t]=function(t){for(var i,n=[],r=Q(t),s=r.length-1,o=0;o<=s;o++)i=o===s?this:this.clone(!0),Q(r[o])[e](i),$.apply(n,i.get());return this.pushStack(n)}});var Ft,Ut={},zt=/^margin/,Bt=new RegExp("^("+yt+")(?!px)[a-z%]+$","i"),Wt=function(t){return t.ownerDocument.defaultView.getComputedStyle(t,null)};!function(){function e(){o.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",o.innerHTML="",r.appendChild(s);var e=t.getComputedStyle(o,null);i="1%"!==e.top,n="4px"===e.width,r.removeChild(s)}var i,n,r=X.documentElement,s=X.createElement("div"),o=X.createElement("div");o.style&&(o.style.backgroundClip="content-box",o.cloneNode(!0).style.backgroundClip="",J.clearCloneStyle="content-box"===o.style.backgroundClip,s.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",s.appendChild(o),t.getComputedStyle&&Q.extend(J,{pixelPosition:function(){return e(),i},boxSizingReliable:function(){return null==n&&e(),n},reliableMarginRight:function(){var e,i=o.appendChild(X.createElement("div"));return i.style.cssText=o.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",o.style.width="1px",r.appendChild(s),e=!parseFloat(t.getComputedStyle(i,null).marginRight),r.removeChild(s),e}}))}(),Q.swap=function(t,e,i,n){var r,s,o={};for(s in e)o[s]=t.style[s],t.style[s]=e[s];r=i.apply(t,n||[]);for(s in e)t.style[s]=o[s];return r};var jt=/^(none|table(?!-c[ea]).+)/,$t=new RegExp("^("+yt+")(.*)$","i"),Vt=new RegExp("^([+-])=("+yt+")","i"),Gt={position:"absolute",visibility:"hidden",display:"block"},qt={letterSpacing:"0",fontWeight:"400"},Kt=["Webkit","O","Moz","ms"];Q.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=y(t,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,s,o,a=Q.camelCase(e),l=t.style;return e=Q.cssProps[a]||(Q.cssProps[a]=D(l,a)),o=Q.cssHooks[e]||Q.cssHooks[a],void 0===i?o&&"get"in o&&void 0!==(r=o.get(t,!1,n))?r:l[e]:(s=typeof i,"string"===s&&(r=Vt.exec(i))&&(i=(r[1]+1)*r[2]+parseFloat(Q.css(t,e)),s="number"),null!=i&&i===i&&("number"!==s||Q.cssNumber[a]||(i+="px"),J.clearCloneStyle||""!==i||0!==e.indexOf("background")||(l[e]="inherit"),o&&"set"in o&&void 0===(i=o.set(t,i,n))||(l[e]=i)),void 0)}},css:function(t,e,i,n){var r,s,o,a=Q.camelCase(e);return e=Q.cssProps[a]||(Q.cssProps[a]=D(t.style,a)),o=Q.cssHooks[e]||Q.cssHooks[a],o&&"get"in o&&(r=o.get(t,!0,i)),void 0===r&&(r=y(t,e,n)),"normal"===r&&e in qt&&(r=qt[e]),""===i||i?(s=parseFloat(r),i===!0||Q.isNumeric(s)?s||0:r):r}}),Q.each(["height","width"],function(t,e){Q.cssHooks[e]={get:function(t,i,n){if(i)return jt.test(Q.css(t,"display"))&&0===t.offsetWidth?Q.swap(t,Gt,function(){return E(t,e,n)}):E(t,e,n)},set:function(t,i,n){var r=n&&Wt(t);return T(t,i,n?w(t,e,n,"border-box"===Q.css(t,"boxSizing",!1,r),r):0)}}}),Q.cssHooks.marginRight=_(J.reliableMarginRight,function(t,e){if(e)return Q.swap(t,{display:"inline-block"},y,[t,"marginRight"])}),Q.each({margin:"",padding:"",border:"Width"},function(t,e){Q.cssHooks[t+e]={expand:function(i){for(var n=0,r={},s="string"==typeof i?i.split(" "):[i];n<4;n++)r[t+_t[n]+e]=s[n]||s[n-2]||s[0];return r}},zt.test(t)||(Q.cssHooks[t+e].set=T)}),Q.fn.extend({css:function(t,e){return gt(this,function(t,e,i){var n,r,s={},o=0;if(Q.isArray(e)){for(n=Wt(t),r=e.length;o<r;o++)s[e[o]]=Q.css(t,e[o],!1,n);return s}return void 0!==i?Q.style(t,e,i):Q.css(t,e)},t,e,arguments.length>1)},show:function(){return x(this,!0)},hide:function(){return x(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Dt(this)?Q(this).show():Q(this).hide()})}}),Q.Tween=A,A.prototype={constructor:A,init:function(t,e,i,n,r,s){this.elem=t,this.prop=i,this.easing=r||"swing",this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=s||(Q.cssNumber[i]?"":"px")},cur:function(){var t=A.propHooks[this.prop];return t&&t.get?t.get(this):A.propHooks._default.get(this)},run:function(t){var e,i=A.propHooks[this.prop];return this.options.duration?this.pos=e=Q.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):A.propHooks._default.set(this),this}},A.prototype.init.prototype=A.prototype,A.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=Q.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){Q.fx.step[t.prop]?Q.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[Q.cssProps[t.prop]]||Q.cssHooks[t.prop])?Q.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},A.propHooks.scrollTop=A.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},Q.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},Q.fx=A.prototype.init,Q.fx.step={};var Jt,Xt,Zt=/^(?:toggle|show|hide)$/,Qt=new RegExp("^(?:([+-])=|)("+yt+")([a-z%]*)$","i"),te=/queueHooks$/,ee=[H],ie={"*":[function(t,e){var i=this.createTween(t,e),n=i.cur(),r=Qt.exec(e),s=r&&r[3]||(Q.cssNumber[t]?"":"px"),o=(Q.cssNumber[t]||"px"!==s&&+n)&&Qt.exec(Q.css(i.elem,t)),a=1,l=20;if(o&&o[3]!==s){s=s||o[3],r=r||[],o=+n||1;do a=a||".5",o/=a,Q.style(i.elem,t,o+s);while(a!==(a=i.cur()/n)&&1!==a&&--l)}return r&&(o=i.start=+o||+n||0,i.unit=s,i.end=r[1]?o+(r[1]+1)*r[2]:+r[2]),i}]};Q.Animation=Q.extend(I,{tweener:function(t,e){Q.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var i,n=0,r=t.length;n<r;n++)i=t[n],ie[i]=ie[i]||[],ie[i].unshift(e)},prefilter:function(t,e){e?ee.unshift(t):ee.push(t)}}),Q.speed=function(t,e,i){var n=t&&"object"==typeof t?Q.extend({},t):{complete:i||!i&&e||Q.isFunction(t)&&t,duration:t,easing:i&&e||e&&!Q.isFunction(e)&&e};return n.duration=Q.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in Q.fx.speeds?Q.fx.speeds[n.duration]:Q.fx.speeds._default,null!=n.queue&&n.queue!==!0||(n.queue="fx"),n.old=n.complete,n.complete=function(){Q.isFunction(n.old)&&n.old.call(this),n.queue&&Q.dequeue(this,n.queue)},n},Q.fn.extend({fadeTo:function(t,e,i,n){return this.filter(Dt).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var r=Q.isEmptyObject(t),s=Q.speed(e,i,n),o=function(){var e=I(this,Q.extend({},t),s);(r||vt.get(this,"finish"))&&e.stop(!0)};return o.finish=o,r||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(t,e,i){var n=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,r=null!=t&&t+"queueHooks",s=Q.timers,o=vt.get(this);if(r)o[r]&&o[r].stop&&n(o[r]);else for(r in o)o[r]&&o[r].stop&&te.test(r)&&n(o[r]);for(r=s.length;r--;)s[r].elem!==this||null!=t&&s[r].queue!==t||(s[r].anim.stop(i),e=!1,s.splice(r,1));!e&&i||Q.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,i=vt.get(this),n=i[t+"queue"],r=i[t+"queueHooks"],s=Q.timers,o=n?n.length:0;for(i.finish=!0,Q.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=s.length;e--;)s[e].elem===this&&s[e].queue===t&&(s[e].anim.stop(!0),s.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete i.finish})}}),Q.each(["toggle","show","hide"],function(t,e){var i=Q.fn[e];Q.fn[e]=function(t,n,r){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(C(e,!0),t,n,r)}}),Q.each({slideDown:C("show"),slideUp:C("hide"),slideToggle:C("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){Q.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}}),Q.timers=[],Q.fx.tick=function(){var t,e=0,i=Q.timers;for(Jt=Q.now();e<i.length;e++)t=i[e],t()||i[e]!==t||i.splice(e--,1);i.length||Q.fx.stop(),Jt=void 0},Q.fx.timer=function(t){Q.timers.push(t),t()?Q.fx.start():Q.timers.pop()},Q.fx.interval=13,Q.fx.start=function(){Xt||(Xt=setInterval(Q.fx.tick,Q.fx.interval))},Q.fx.stop=function(){clearInterval(Xt),Xt=null},Q.fx.speeds={slow:600,fast:200,_default:400},Q.fn.delay=function(t,e){return t=Q.fx?Q.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,i){var n=setTimeout(e,t);i.stop=function(){clearTimeout(n)}})},function(){var t=X.createElement("input"),e=X.createElement("select"),i=e.appendChild(X.createElement("option"));t.type="checkbox",J.checkOn=""!==t.value,J.optSelected=i.selected,e.disabled=!0,J.optDisabled=!i.disabled,t=X.createElement("input"),t.value="t",t.type="radio",J.radioValue="t"===t.value}();var ne,re,se=Q.expr.attrHandle;Q.fn.extend({attr:function(t,e){return gt(this,Q.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){Q.removeAttr(this,t)})}}),Q.extend({attr:function(t,e,i){var n,r,s=t.nodeType;if(t&&3!==s&&8!==s&&2!==s)return typeof t.getAttribute===wt?Q.prop(t,e,i):(1===s&&Q.isXMLDoc(t)||(e=e.toLowerCase(),n=Q.attrHooks[e]||(Q.expr.match.bool.test(e)?re:ne)),void 0===i?n&&"get"in n&&null!==(r=n.get(t,e))?r:(r=Q.find.attr(t,e),null==r?void 0:r):null!==i?n&&"set"in n&&void 0!==(r=n.set(t,i,e))?r:(t.setAttribute(e,i+""),i):void Q.removeAttr(t,e))},removeAttr:function(t,e){var i,n,r=0,s=e&&e.match(pt);if(s&&1===t.nodeType)for(;i=s[r++];)n=Q.propFix[i]||i,Q.expr.match.bool.test(i)&&(t[n]=!1),t.removeAttribute(i)},attrHooks:{type:{set:function(t,e){if(!J.radioValue&&"radio"===e&&Q.nodeName(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}}}),re={set:function(t,e,i){return e===!1?Q.removeAttr(t,i):t.setAttribute(i,i),i}},Q.each(Q.expr.match.bool.source.match(/\w+/g),function(t,e){var i=se[e]||Q.find.attr;se[e]=function(t,e,n){var r,s;return n||(s=se[e],se[e]=r,r=null!=i(t,e,n)?e.toLowerCase():null,se[e]=s),r}});var oe=/^(?:input|select|textarea|button)$/i;Q.fn.extend({prop:function(t,e){return gt(this,Q.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[Q.propFix[t]||t]})}}),Q.extend({propFix:{for:"htmlFor",class:"className"},prop:function(t,e,i){var n,r,s,o=t.nodeType;if(t&&3!==o&&8!==o&&2!==o)return s=1!==o||!Q.isXMLDoc(t),s&&(e=Q.propFix[e]||e,r=Q.propHooks[e]),void 0!==i?r&&"set"in r&&void 0!==(n=r.set(t,i,e))?n:t[e]=i:r&&"get"in r&&null!==(n=r.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){return t.hasAttribute("tabindex")||oe.test(t.nodeName)||t.href?t.tabIndex:-1}}}}),J.optSelected||(Q.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null}}),Q.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){Q.propFix[this.toLowerCase()]=this});var ae=/[\t\r\n\f]/g;Q.fn.extend({addClass:function(t){var e,i,n,r,s,o,a="string"==typeof t&&t,l=0,c=this.length;if(Q.isFunction(t))return this.each(function(e){Q(this).addClass(t.call(this,e,this.className))});if(a)for(e=(t||"").match(pt)||[];l<c;l++)if(i=this[l],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(ae," "):" ")){for(s=0;r=e[s++];)n.indexOf(" "+r+" ")<0&&(n+=r+" ");o=Q.trim(n),i.className!==o&&(i.className=o)}return this},removeClass:function(t){var e,i,n,r,s,o,a=0===arguments.length||"string"==typeof t&&t,l=0,c=this.length;if(Q.isFunction(t))return this.each(function(e){Q(this).removeClass(t.call(this,e,this.className))});if(a)for(e=(t||"").match(pt)||[];l<c;l++)if(i=this[l],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(ae," "):"")){for(s=0;r=e[s++];)for(;n.indexOf(" "+r+" ")>=0;)n=n.replace(" "+r+" "," ");o=t?Q.trim(n):"",i.className!==o&&(i.className=o)}return this},toggleClass:function(t,e){var i=typeof t;return"boolean"==typeof e&&"string"===i?e?this.addClass(t):this.removeClass(t):Q.isFunction(t)?this.each(function(i){Q(this).toggleClass(t.call(this,i,this.className,e),e)}):this.each(function(){if("string"===i)for(var e,n=0,r=Q(this),s=t.match(pt)||[];e=s[n++];)r.hasClass(e)?r.removeClass(e):r.addClass(e);else i!==wt&&"boolean"!==i||(this.className&&vt.set(this,"__className__",this.className),this.className=this.className||t===!1?"":vt.get(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",i=0,n=this.length;i<n;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(ae," ").indexOf(e)>=0)return!0;return!1}});var le=/\r/g;Q.fn.extend({val:function(t){var e,i,n,r=this[0];{if(arguments.length)return n=Q.isFunction(t),this.each(function(i){var r;1===this.nodeType&&(r=n?t.call(this,i,Q(this).val()):t,null==r?r="":"number"==typeof r?r+="":Q.isArray(r)&&(r=Q.map(r,function(t){return null==t?"":t+""})),e=Q.valHooks[this.type]||Q.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))});if(r)return e=Q.valHooks[r.type]||Q.valHooks[r.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(i=e.get(r,"value"))?i:(i=r.value,"string"==typeof i?i.replace(le,""):null==i?"":i)}}}),Q.extend({valHooks:{option:{get:function(t){var e=Q.find.attr(t,"value");return null!=e?e:Q.trim(Q.text(t))}},select:{get:function(t){for(var e,i,n=t.options,r=t.selectedIndex,s="select-one"===t.type||r<0,o=s?null:[],a=s?r+1:n.length,l=r<0?a:s?r:0;l<a;l++)if(i=n[l],(i.selected||l===r)&&(J.optDisabled?!i.disabled:null===i.getAttribute("disabled"))&&(!i.parentNode.disabled||!Q.nodeName(i.parentNode,"optgroup"))){if(e=Q(i).val(),s)return e;o.push(e)}return o},set:function(t,e){for(var i,n,r=t.options,s=Q.makeArray(e),o=r.length;o--;)n=r[o],(n.selected=Q.inArray(n.value,s)>=0)&&(i=!0);return i||(t.selectedIndex=-1),s}}}}),Q.each(["radio","checkbox"],function(){Q.valHooks[this]={set:function(t,e){if(Q.isArray(e))return t.checked=Q.inArray(Q(t).val(),e)>=0}},J.checkOn||(Q.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),Q.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){Q.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}}),Q.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)}});var ce=Q.now(),ue=/\?/;Q.parseJSON=function(t){return JSON.parse(t+"")},Q.parseXML=function(t){var e,i;if(!t||"string"!=typeof t)return null;try{i=new DOMParser,e=i.parseFromString(t,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||Q.error("Invalid XML: "+t),e};var he,de,pe=/#.*$/,fe=/([?&])_=[^&]*/,me=/^(.*?):[ \t]*([^\r\n]*)$/gm,ge=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ve=/^(?:GET|HEAD)$/,Me=/^\/\//,be=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Ye={},ye={},_e="*/".concat("*");try{de=location.href}catch(t){de=X.createElement("a"),de.href="",de=de.href}he=be.exec(de.toLowerCase())||[],Q.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:de,type:"GET",isLocal:ge.test(he[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":_e,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":Q.parseJSON,"text xml":Q.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?R(R(t,Q.ajaxSettings),e):R(Q.ajaxSettings,t)},ajaxPrefilter:P(Ye),ajaxTransport:P(ye),ajax:function(t,e){function i(t,e,i,o){var l,u,v,M,Y,_=e;2!==b&&(b=2,a&&clearTimeout(a),n=void 0,s=o||"",y.readyState=t>0?4:0,l=t>=200&&t<300||304===t,i&&(M=L(h,y,i)),M=F(h,M,y,l),l?(h.ifModified&&(Y=y.getResponseHeader("Last-Modified"),Y&&(Q.lastModified[r]=Y),Y=y.getResponseHeader("etag"),Y&&(Q.etag[r]=Y)),204===t||"HEAD"===h.type?_="nocontent":304===t?_="notmodified":(_=M.state,u=M.data,v=M.error,l=!v)):(v=_,!t&&_||(_="error",t<0&&(t=0))),y.status=t,y.statusText=(e||_)+"",l?f.resolveWith(d,[u,_,y]):f.rejectWith(d,[y,_,v]),y.statusCode(g),g=void 0,c&&p.trigger(l?"ajaxSuccess":"ajaxError",[y,h,l?u:v]),m.fireWith(d,[y,_]),c&&(p.trigger("ajaxComplete",[y,h]),--Q.active||Q.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,r,s,o,a,l,c,u,h=Q.ajaxSetup({},e),d=h.context||h,p=h.context&&(d.nodeType||d.jquery)?Q(d):Q.event,f=Q.Deferred(),m=Q.Callbacks("once memory"),g=h.statusCode||{},v={},M={},b=0,Y="canceled",y={readyState:0,getResponseHeader:function(t){var e;if(2===b){if(!o)for(o={};e=me.exec(s);)o[e[1].toLowerCase()]=e[2];e=o[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===b?s:null},setRequestHeader:function(t,e){var i=t.toLowerCase();return b||(t=M[i]=M[i]||t,v[t]=e),this},overrideMimeType:function(t){return b||(h.mimeType=t),this},statusCode:function(t){var e;if(t)if(b<2)for(e in t)g[e]=[g[e],t[e]];else y.always(t[y.status]);return this},abort:function(t){var e=t||Y;return n&&n.abort(e),i(0,e),this}};if(f.promise(y).complete=m.add,y.success=y.done,y.error=y.fail,h.url=((t||h.url||de)+"").replace(pe,"").replace(Me,he[1]+"//"),h.type=e.method||e.type||h.method||h.type,h.dataTypes=Q.trim(h.dataType||"*").toLowerCase().match(pt)||[""],null==h.crossDomain&&(l=be.exec(h.url.toLowerCase()),h.crossDomain=!(!l||l[1]===he[1]&&l[2]===he[2]&&(l[3]||("http:"===l[1]?"80":"443"))===(he[3]||("http:"===he[1]?"80":"443")))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=Q.param(h.data,h.traditional)),N(Ye,h,e,y),2===b)return y;c=h.global,c&&0===Q.active++&&Q.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!ve.test(h.type),r=h.url,h.hasContent||(h.data&&(r=h.url+=(ue.test(r)?"&":"?")+h.data,delete h.data),h.cache===!1&&(h.url=fe.test(r)?r.replace(fe,"$1_="+ce++):r+(ue.test(r)?"&":"?")+"_="+ce++)),h.ifModified&&(Q.lastModified[r]&&y.setRequestHeader("If-Modified-Since",Q.lastModified[r]),Q.etag[r]&&y.setRequestHeader("If-None-Match",Q.etag[r])),(h.data&&h.hasContent&&h.contentType!==!1||e.contentType)&&y.setRequestHeader("Content-Type",h.contentType),y.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+_e+"; q=0.01":""):h.accepts["*"]);for(u in h.headers)y.setRequestHeader(u,h.headers[u]);if(h.beforeSend&&(h.beforeSend.call(d,y,h)===!1||2===b))return y.abort();Y="abort";for(u in{success:1,error:1,complete:1})y[u](h[u]);if(n=N(ye,h,e,y)){y.readyState=1,c&&p.trigger("ajaxSend",[y,h]),h.async&&h.timeout>0&&(a=setTimeout(function(){y.abort("timeout")},h.timeout));try{b=1,n.send(v,i)}catch(t){if(!(b<2))throw t;i(-1,t)}}else i(-1,"No Transport");return y},getJSON:function(t,e,i){return Q.get(t,e,i,"json")},getScript:function(t,e){return Q.get(t,void 0,e,"script")}}),Q.each(["get","post"],function(t,e){Q[e]=function(t,i,n,r){return Q.isFunction(i)&&(r=r||n,n=i,i=void 0),Q.ajax({url:t,type:e,dataType:r,data:i,success:n})}}),Q.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){Q.fn[e]=function(t){return this.on(e,t)}}),Q._evalUrl=function(t){return Q.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},Q.fn.extend({wrapAll:function(t){var e;return Q.isFunction(t)?this.each(function(e){Q(this).wrapAll(t.call(this,e))}):(this[0]&&(e=Q(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(t){return Q.isFunction(t)?this.each(function(e){Q(this).wrapInner(t.call(this,e))}):this.each(function(){var e=Q(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)})},wrap:function(t){var e=Q.isFunction(t);return this.each(function(i){Q(this).wrapAll(e?t.call(this,i):t)})},unwrap:function(){return this.parent().each(function(){Q.nodeName(this,"body")||Q(this).replaceWith(this.childNodes)}).end()}}),Q.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0},Q.expr.filters.visible=function(t){return!Q.expr.filters.hidden(t)};var De=/%20/g,Te=/\[\]$/,we=/\r?\n/g,Ee=/^(?:submit|button|image|reset|file)$/i,xe=/^(?:input|select|textarea|keygen)/i;Q.param=function(t,e){var i,n=[],r=function(t,e){e=Q.isFunction(e)?e():null==e?"":e,n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=Q.ajaxSettings&&Q.ajaxSettings.traditional),Q.isArray(t)||t.jquery&&!Q.isPlainObject(t))Q.each(t,function(){r(this.name,this.value)});else for(i in t)U(i,t[i],e,r);return n.join("&").replace(De,"+")},Q.fn.extend({serialize:function(){return Q.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=Q.prop(this,"elements");return t?Q.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!Q(this).is(":disabled")&&xe.test(this.nodeName)&&!Ee.test(t)&&(this.checked||!Tt.test(t))}).map(function(t,e){var i=Q(this).val();return null==i?null:Q.isArray(i)?Q.map(i,function(t){return{name:e.name,value:t.replace(we,"\r\n")}}):{name:e.name,value:i.replace(we,"\r\n")}}).get()}}),Q.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(t){}};var Ae=0,Se={},Ce={0:200,1223:204},ke=Q.ajaxSettings.xhr();t.ActiveXObject&&Q(t).on("unload",function(){for(var t in Se)Se[t]()}),J.cors=!!ke&&"withCredentials"in ke,J.ajax=ke=!!ke,Q.ajaxTransport(function(t){var e;if(J.cors||ke&&!t.crossDomain)return{send:function(i,n){var r,s=t.xhr(),o=++Ae;if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(r in t.xhrFields)s[r]=t.xhrFields[r];t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(r in i)s.setRequestHeader(r,i[r]);e=function(t){return function(){e&&(delete Se[o],e=s.onload=s.onerror=null,"abort"===t?s.abort():"error"===t?n(s.status,s.statusText):n(Ce[s.status]||s.status,s.statusText,"string"==typeof s.responseText?{text:s.responseText}:void 0,s.getAllResponseHeaders()))}},s.onload=e(),s.onerror=e("error"),e=Se[o]=e("abort");try{s.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}}),Q.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return Q.globalEval(t),t}}}),Q.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),Q.ajaxTransport("script",function(t){if(t.crossDomain){var e,i;return{send:function(n,r){e=Q("<script>").prop({async:!0,charset:t.scriptCharset,src:t.url}).on("load error",i=function(t){e.remove(),i=null,t&&r("error"===t.type?404:200,t.type)}),X.head.appendChild(e[0])},abort:function(){i&&i()}}}});var He=[],Oe=/(=)\?(?=&|$)|\?\?/;Q.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=He.pop()||Q.expando+"_"+ce++;return this[t]=!0,t}}),Q.ajaxPrefilter("json jsonp",function(e,i,n){var r,s,o,a=e.jsonp!==!1&&(Oe.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Oe.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=Q.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Oe,"$1"+r):e.jsonp!==!1&&(e.url+=(ue.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||Q.error(r+" was not called"),o[0]},e.dataTypes[0]="json",s=t[r],t[r]=function(){o=arguments},n.always(function(){t[r]=s,e[r]&&(e.jsonpCallback=i.jsonpCallback,He.push(r)),o&&Q.isFunction(s)&&s(o[0]),o=s=void 0}),"script"}),Q.parseHTML=function(t,e,i){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(i=e,e=!1),e=e||X;var n=ot.exec(t),r=!i&&[];return n?[e.createElement(n[1])]:(n=Q.buildFragment([t],e,r),r&&r.length&&Q(r).remove(),Q.merge([],n.childNodes))};var Ie=Q.fn.load;Q.fn.load=function(t,e,i){if("string"!=typeof t&&Ie)return Ie.apply(this,arguments);var n,r,s,o=this,a=t.indexOf(" ");return a>=0&&(n=Q.trim(t.slice(a)),t=t.slice(0,a)),Q.isFunction(e)?(i=e,e=void 0):e&&"object"==typeof e&&(r="POST"),o.length>0&&Q.ajax({url:t,type:r,dataType:"html",data:e}).done(function(t){s=arguments,o.html(n?Q("<div>").append(Q.parseHTML(t)).find(n):t)}).complete(i&&function(t,e){o.each(i,s||[t.responseText,e,t])}),this},Q.expr.filters.animated=function(t){return Q.grep(Q.timers,function(e){return t===e.elem}).length};var Pe=t.document.documentElement;Q.offset={setOffset:function(t,e,i){var n,r,s,o,a,l,c,u=Q.css(t,"position"),h=Q(t),d={};"static"===u&&(t.style.position="relative"),a=h.offset(),s=Q.css(t,"top"),l=Q.css(t,"left"),c=("absolute"===u||"fixed"===u)&&(s+l).indexOf("auto")>-1,c?(n=h.position(),o=n.top,r=n.left):(o=parseFloat(s)||0,r=parseFloat(l)||0),Q.isFunction(e)&&(e=e.call(t,i,a)),null!=e.top&&(d.top=e.top-a.top+o),null!=e.left&&(d.left=e.left-a.left+r),"using"in e?e.using.call(t,d):h.css(d)}},Q.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){Q.offset.setOffset(this,t,e)});var e,i,n=this[0],r={top:0,left:0},s=n&&n.ownerDocument;if(s)return e=s.documentElement,Q.contains(e,n)?(typeof n.getBoundingClientRect!==wt&&(r=n.getBoundingClientRect()),i=z(s),{top:r.top+i.pageYOffset-e.clientTop,left:r.left+i.pageXOffset-e.clientLeft}):r},position:function(){if(this[0]){var t,e,i=this[0],n={top:0,left:0};return"fixed"===Q.css(i,"position")?e=i.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),Q.nodeName(t[0],"html")||(n=t.offset()),n.top+=Q.css(t[0],"borderTopWidth",!0),n.left+=Q.css(t[0],"borderLeftWidth",!0)),{top:e.top-n.top-Q.css(i,"marginTop",!0),left:e.left-n.left-Q.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||Pe;t&&!Q.nodeName(t,"html")&&"static"===Q.css(t,"position");)t=t.offsetParent;return t||Pe})}}),Q.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,i){var n="pageYOffset"===i;Q.fn[e]=function(r){return gt(this,function(e,r,s){var o=z(e);return void 0===s?o?o[i]:e[r]:void(o?o.scrollTo(n?t.pageXOffset:s,n?s:t.pageYOffset):e[r]=s)},e,r,arguments.length,null)}}),Q.each(["top","left"],function(t,e){Q.cssHooks[e]=_(J.pixelPosition,function(t,i){if(i)return i=y(t,e),Bt.test(i)?Q(t).position()[e]+"px":i})}),Q.each({Height:"height",Width:"width"},function(t,e){Q.each({padding:"inner"+t,content:e,"":"outer"+t},function(i,n){Q.fn[n]=function(n,r){var s=arguments.length&&(i||"boolean"!=typeof n),o=i||(n===!0||r===!0?"margin":"border");return gt(this,function(e,i,n){var r;return Q.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+t],r["scroll"+t],e.body["offset"+t],r["offset"+t],r["client"+t])):void 0===n?Q.css(e,i,o):Q.style(e,i,n,o)},e,s?n:void 0,s,null)}})}),Q.fn.size=function(){return this.length},Q.fn.andSelf=Q.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return Q});var Ne=t.jQuery,Re=t.$;return Q.noConflict=function(e){return t.$===Q&&(t.$=Re),e&&t.jQuery===Q&&(t.jQuery=Ne),Q},typeof e===wt&&(t.jQuery=t.$=Q),Q}),function(t,e){function i(e,i){var r,s,o,a=e.nodeName.toLowerCase();return"area"===a?(r=e.parentNode,s=r.name,!(!e.href||!s||"map"!==r.nodeName.toLowerCase())&&(o=t("img[usemap=#"+s+"]")[0],!!o&&n(o))):(/input|select|textarea|button|object/.test(a)?!e.disabled:"a"===a?e.href||i:i)&&n(e)}function n(e){return t.expr.filters.visible(e)&&!t(e).parents().andSelf().filter(function(){return"hidden"===t.css(this,"visibility")}).length}var r=0,s=/^ui-id-\d+$/;t.ui=t.ui||{},t.ui.version||(t.extend(t.ui,{version:"1.9.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({_focus:t.fn.focus,focus:function(e,i){return"number"==typeof e?this.each(function(){var n=this;setTimeout(function(){t(n).focus(),i&&i.call(n)},e)}):this._focus.apply(this,arguments)},scrollParent:function(){var e;return e=t.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(t.css(this,"position"))&&/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!e.length?t(document):e},zIndex:function(i){if(i!==e)return this.css("zIndex",i);if(this.length)for(var n,r,s=t(this[0]);s.length&&s[0]!==document;){if(n=s.css("position"),("absolute"===n||"relative"===n||"fixed"===n)&&(r=parseInt(s.css("zIndex"),10),!isNaN(r)&&0!==r))return r;s=s.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++r)})},removeUniqueId:function(){return this.each(function(){s.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,n){return!!t.data(e,n[3])},focusable:function(e){return i(e,!isNaN(t.attr(e,"tabindex")))},tabbable:function(e){var n=t.attr(e,"tabindex"),r=isNaN(n);return(r||n>=0)&&i(e,!r)}}),t(function(){var e=document.body,i=e.appendChild(i=document.createElement("div"));i.offsetHeight,t.extend(i.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),t.support.minHeight=100===i.offsetHeight,t.support.selectstart="onselectstart"in i,e.removeChild(i).style.display="none"}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(i,n){function r(e,i,n,r){return t.each(s,function(){i-=parseFloat(t.css(e,"padding"+this))||0,n&&(i-=parseFloat(t.css(e,"border"+this+"Width"))||0),r&&(i-=parseFloat(t.css(e,"margin"+this))||0)}),i}var s="Width"===n?["Left","Right"]:["Top","Bottom"],o=n.toLowerCase(),a={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+n]=function(i){return i===e?a["inner"+n].call(this):this.each(function(){t(this).css(o,r(this,i)+"px")})},t.fn["outer"+n]=function(e,i){return"number"!=typeof e?a["outer"+n].call(this,e):this.each(function(){t(this).css(o,r(this,e,!0,i)+"px")})}}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(i){return arguments.length?e.call(this,t.camelCase(i)):e.call(this)}}(t.fn.removeData)),function(){var e=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];t.ui.ie=!!e.length,t.ui.ie6=6===parseFloat(e[1],10)}(),t.fn.extend({disableSelection:function(){return this.bind((t.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(t){t.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),t.extend(t.ui,{plugin:{add:function(e,i,n){var r,s=t.ui[e].prototype;for(r in n)s.plugins[r]=s.plugins[r]||[],s.plugins[r].push([i,n[r]])},call:function(t,e,i){var n,r=t.plugins[e];if(r&&t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType)for(n=0;n<r.length;n++)t.options[r[n][0]]&&r[n][1].apply(t.element,i)}},contains:t.contains,hasScroll:function(e,i){if("hidden"===t(e).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",r=!1;return e[n]>0||(e[n]=1,r=e[n]>0,e[n]=0,r)},isOverAxis:function(t,e,i){return t>e&&t<e+i},isOver:function(e,i,n,r,s,o){return t.ui.isOverAxis(e,n,s)&&t.ui.isOverAxis(i,r,o)}}))}(jQuery),function(t,e){function i(t,e,i){var n=getStringAsFunction(t);return n.callable.apply(e,i)}var n=0,r=Array.prototype.slice,s=t.cleanData;t.cleanData=function(e){for(var i,n=0;null!=(i=e[n]);n++)try{t(i).triggerHandler("remove")}catch(t){}s(e)},t.widget=function(e,i,n){var r,s,o,a,l=e.split(".")[0];e=e.split(".")[1],r=l+"-"+e,n||(n=i,i=t.Widget),t.expr[":"][r.toLowerCase()]=function(e){return!!t.data(e,r)},t[l]=t[l]||{},s=t[l][e],o=t[l][e]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new o(t,e)},t.extend(o,s,{version:n.version,_proto:t.extend({},n),_childConstructors:[]}),a=new i,a.options=t.widget.extend({},a.options),t.each(n,function(e,r){t.isFunction(r)&&(n[e]=function(){var t=function(){return i.prototype[e].apply(this,arguments)},n=function(t){return i.prototype[e].apply(this,t)};return function(){var e,i=this._super,s=this._superApply;return this._super=t,this._superApply=n,e=r.apply(this,arguments),this._super=i,this._superApply=s,e}}())}),o.prototype=t.widget.extend(a,{widgetEventPrefix:s?a.widgetEventPrefix:e},n,{constructor:o,namespace:l,widgetName:e,widgetBaseClass:r,widgetFullName:r}),s?(t.each(s._childConstructors,function(e,i){var n=i.prototype;t.widget(n.namespace+"."+n.widgetName,o,i._proto)}),delete s._childConstructors):i._childConstructors.push(o),t.widget.bridge(e,o)},t.widget.extend=function(i){for(var n,s,o=r.call(arguments,1),a=0,l=o.length;a<l;a++)for(n in o[a])s=o[a][n],o[a].hasOwnProperty(n)&&s!==e&&(t.isPlainObject(s)?i[n]=t.isPlainObject(i[n])?t.widget.extend({},i[n],s):t.widget.extend({},s):i[n]=s);return i},t.widget.bridge=function(i,n){var s=n.prototype.widgetFullName||i;t.fn[i]=function(o){var a="string"==typeof o,l=r.call(arguments,1),c=this;return o=!a&&l.length?t.widget.extend.apply(null,[o].concat(l)):o,a?this.each(function(){var n,r=t.data(this,s);return r?t.isFunction(r[o])&&"_"!==o.charAt(0)?(n=r[o].apply(r,l),n!==r&&n!==e?(c=n&&n.jquery?c.pushStack(n.get()):n,!1):void 0):t.error("no such method '"+o+"' for "+i+" widget instance"):t.error("cannot call methods on "+i+" prior to initialization; attempted to call method '"+o+"'")}):this.each(function(){var e=t.data(this,s);e?e.option(o||{})._init():t.data(this,s,new n(o,this))}),c}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,i){i=t(i||this.defaultElement||this)[0],this.element=t(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),i!==this&&(t.data(i,this.widgetName,this),t.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===i&&this.destroy()}}),this.document=t(i.style?i.ownerDocument:i.document||i),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(i,n){var r,s,o,a=i;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof i)if(a={},r=i.split("."),i=r.shift(),r.length){for(s=a[i]=t.widget.extend({},this.options[i]),o=0;o<r.length-1;o++)s[r[o]]=s[r[o]]||{},s=s[r[o]];if(i=r.pop(),n===e)return s[i]===e?null:s[i];s[i]=n}else{if(n===e)return this.options[i]===e?null:this.options[i];a[i]=n}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(e,i,n){var r,s=this;"boolean"!=typeof e&&(n=i,i=e,e=!1),n?(i=r=t(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,r=this.widget()),t.each(n,function(n,o){function a(){if(e||s.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled"))return("string"==typeof o?s[o]:o).apply(s,arguments)}"string"!=typeof o&&(a.guid=o.guid=o.guid||a.guid||t.guid++);var l=n.match(/^(\w+)\s*(.*)$/),c=l[1]+s.eventNamespace,u=l[2];u?r.delegate(u,c,a):i.bind(c,a)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function i(){return("string"==typeof t?n[t]:t).apply(n,arguments)}var n=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,n,r){var s,o,a=this.options[e];if(r=r||{},n=t.Event(n),n.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),n.target=this.element[0],o=n.originalEvent)for(s in o)s in n||(n[s]=o[s]);return this.element.trigger(n,r),a&&"string"==typeof a?!(i(a,this.element[0],[n].concat(r))===!1||n.isDefaultPrevented()):!(t.isFunction(a)&&a.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},getStringAsFunction=function(e){if(e){var i=e.split("."),n=window,r="";return t(i).each(function(t,e){n=n[e]?n[e]:n,t==i.length-2&&(r=n)}),{fn:n,base:r,callable:function(){var t=Array.prototype.slice.call(arguments);return n.apply(r,t)}}}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(n,r,s){"string"==typeof r&&(r={effect:r});var o,a=r?r===!0||"number"==typeof r?i:r.effect||i:e;r=r||{},"number"==typeof r&&(r={duration:r}),o=!t.isEmptyObject(r),r.complete=s,r.delay&&n.delay(r.delay),o&&t.effects&&(t.effects.effect[a]||t.uiBackCompat!==!1&&t.effects[a])?n[e](r):a!==e&&n[a]?n[a](r.duration,r.easing,s):n.queue(function(i){t(this)[e](),s&&s.call(n[0]),i()})}}),t.uiBackCompat!==!1&&(t.Widget.prototype._getCreateOptions=function(){return t.metadata&&t.metadata.get(this.element[0])[this.widgetName]})}(jQuery),function(t,e){var i=!1;t(document).mouseup(function(t){i=!1}),t.widget("ui.mouse",{version:"1.9.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(i){if(!0===t.data(i.target,e.widgetName+".preventClickEvent"))return t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!i){this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var n=this,r=1===e.which,s=!("string"!=typeof this.options.cancel||!e.target.nodeName)&&t(e.target).closest(this.options.cancel).length;return!(r&&!s&&this._mouseCapture(e))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(e)!==!1,!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return n._mouseMove(t)},this._mouseUpDelegate=function(t){return n._mouseUp(t)},t(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),i=!0,!0))}},_mouseMove:function(e){return!t.ui.ie||document.documentMode>=9||e.button?this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted):this._mouseUp(e)},_mouseUp:function(e){return t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(t){return this.mouseDelayMet},_mouseStart:function(t){},_mouseDrag:function(t){},_mouseStop:function(t){},_mouseCapture:function(t){return!0}})}(jQuery),function(t,e){function i(t,e,i){return[parseInt(t[0],10)*(d.test(t[0])?e/100:1),parseInt(t[1],10)*(d.test(t[1])?i/100:1)]}function n(e,i){return parseInt(t.css(e,i),10)||0}t.ui=t.ui||{};var r,s=Math.max,o=Math.abs,a=Math.round,l=/left|center|right/,c=/top|center|bottom/,u=/[\+\-]\d+%?/,h=/^\w+/,d=/%$/,p=t.fn.position;t.position={scrollbarWidth:function(){if(r!==e)return r;var i,n,s=t("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=s.children()[0];return t("body").append(s),i=o.offsetWidth,s.css("overflow","scroll"),n=o.offsetWidth,i===n&&(n=s[0].clientWidth),s.remove(),r=i-n},getScrollInfo:function(e){var i=e.isWindow?"":e.element.css("overflow-x"),n=e.isWindow?"":e.element.css("overflow-y"),r="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth,s="scroll"===n||"auto"===n&&e.height<e.element[0].scrollHeight;return{width:r?t.position.scrollbarWidth():0,height:s?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),n=t.isWindow(i[0]);return{element:i,isWindow:n,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:n?i.width():i.outerWidth(),height:n?i.height():i.outerHeight()}}},t.fn.position=function(e){if(!e||!e.of)return p.apply(this,arguments);e=t.extend({},e);var r,d,f,m,g,v=t(e.of),M=t.position.getWithinInfo(e.within),b=t.position.getScrollInfo(M),Y=v[0],y=(e.collision||"flip").split(" "),_={};return 9===Y.nodeType?(d=v.width(),f=v.height(),m={top:0,left:0}):t.isWindow(Y)?(d=v.width(),f=v.height(),m={top:v.scrollTop(),left:v.scrollLeft()}):Y.preventDefault?(e.at="left top",d=f=0,m={top:Y.pageY,left:Y.pageX}):(d=v.outerWidth(),f=v.outerHeight(),m=v.offset()),g=t.extend({},m),t.each(["my","at"],function(){var t,i,n=(e[this]||"").split(" ");1===n.length&&(n=l.test(n[0])?n.concat(["center"]):c.test(n[0])?["center"].concat(n):["center","center"]),n[0]=l.test(n[0])?n[0]:"center",n[1]=c.test(n[1])?n[1]:"center",t=u.exec(n[0]),i=u.exec(n[1]),_[this]=[t?t[0]:0,i?i[0]:0],e[this]=[h.exec(n[0])[0],h.exec(n[1])[0]]}),1===y.length&&(y[1]=y[0]),"right"===e.at[0]?g.left+=d:"center"===e.at[0]&&(g.left+=d/2),"bottom"===e.at[1]?g.top+=f:"center"===e.at[1]&&(g.top+=f/2),r=i(_.at,d,f),g.left+=r[0],g.top+=r[1],this.each(function(){var l,c,u=t(this),h=u.outerWidth(),p=u.outerHeight(),Y=n(this,"marginLeft"),D=n(this,"marginTop"),T=h+Y+n(this,"marginRight")+b.width,w=p+D+n(this,"marginBottom")+b.height,E=t.extend({},g),x=i(_.my,u.outerWidth(),u.outerHeight());"right"===e.my[0]?E.left-=h:"center"===e.my[0]&&(E.left-=h/2),"bottom"===e.my[1]?E.top-=p:"center"===e.my[1]&&(E.top-=p/2),E.left+=x[0],E.top+=x[1],t.support.offsetFractions||(E.left=a(E.left),E.top=a(E.top)),l={marginLeft:Y,marginTop:D},t.each(["left","top"],function(i,n){t.ui.position[y[i]]&&t.ui.position[y[i]][n](E,{targetWidth:d,targetHeight:f,elemWidth:h,elemHeight:p,collisionPosition:l,collisionWidth:T,collisionHeight:w,offset:[r[0]+x[0],r[1]+x[1]],my:e.my,at:e.at,within:M,elem:u})}),t.fn.bgiframe&&u.bgiframe(),e.using&&(c=function(t){var i=m.left-E.left,n=i+d-h,r=m.top-E.top,a=r+f-p,l={target:{element:v,left:m.left,top:m.top,width:d,height:f},element:{element:u,left:E.left,top:E.top,width:h,height:p},horizontal:n<0?"left":i>0?"right":"center",vertical:a<0?"top":r>0?"bottom":"middle"};d<h&&o(i+n)<d&&(l.horizontal="center"),f<p&&o(r+a)<f&&(l.vertical="middle"),s(o(i),o(n))>s(o(r),o(a))?l.important="horizontal":l.important="vertical",e.using.call(this,t,l)}),u.offset(t.extend(E,{using:c}))})},t.ui.position={fit:{left:function(t,e){var i,n=e.within,r=n.isWindow?n.scrollLeft:n.offset.left,o=n.width,a=t.left-e.collisionPosition.marginLeft,l=r-a,c=a+e.collisionWidth-o-r;e.collisionWidth>o?l>0&&c<=0?(i=t.left+l+e.collisionWidth-o-r,t.left+=l-i):c>0&&l<=0?t.left=r:l>c?t.left=r+o-e.collisionWidth:t.left=r:l>0?t.left+=l:c>0?t.left-=c:t.left=s(t.left-a,t.left)},top:function(t,e){var i,n=e.within,r=n.isWindow?n.scrollTop:n.offset.top,o=e.within.height,a=t.top-e.collisionPosition.marginTop,l=r-a,c=a+e.collisionHeight-o-r;e.collisionHeight>o?l>0&&c<=0?(i=t.top+l+e.collisionHeight-o-r,t.top+=l-i):c>0&&l<=0?t.top=r:l>c?t.top=r+o-e.collisionHeight:t.top=r:l>0?t.top+=l:c>0?t.top-=c:t.top=s(t.top-a,t.top)}},flip:{left:function(t,e){var i,n,r=e.within,s=r.offset.left+r.scrollLeft,a=r.width,l=r.isWindow?r.scrollLeft:r.offset.left,c=t.left-e.collisionPosition.marginLeft,u=c-l,h=c+e.collisionWidth-a-l,d="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,p="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];u<0?(i=t.left+d+p+f+e.collisionWidth-a-s,(i<0||i<o(u))&&(t.left+=d+p+f)):h>0&&(n=t.left-e.collisionPosition.marginLeft+d+p+f-l,(n>0||o(n)<h)&&(t.left+=d+p+f))},top:function(t,e){var i,n,r=e.within,s=r.offset.top+r.scrollTop,a=r.height,l=r.isWindow?r.scrollTop:r.offset.top,c=t.top-e.collisionPosition.marginTop,u=c-l,h=c+e.collisionHeight-a-l,d="top"===e.my[1],p=d?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,f="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,m=-2*e.offset[1];u<0?(n=t.top+p+f+m+e.collisionHeight-a-s,t.top+p+f+m>u&&(n<0||n<o(u))&&(t.top+=p+f+m)):h>0&&(i=t.top-e.collisionPosition.marginTop+p+f+m-l,t.top+p+f+m>h&&(i>0||o(i)<h)&&(t.top+=p+f+m))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,i,n,r,s,o=document.getElementsByTagName("body")[0],a=document.createElement("div");e=document.createElement(o?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&t.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"});for(s in n)e.style[s]=n[s];e.appendChild(a),i=o||document.documentElement,i.insertBefore(e,i.firstChild),a.style.cssText="position: absolute; left: 10.7432222px;",r=t(a).offset().left,t.support.offsetFractions=r>10&&r<11,e.innerHTML="",i.removeChild(e)}(),t.uiBackCompat!==!1&&!function(t){var i=t.fn.position;t.fn.position=function(n){if(!n||!n.offset)return i.call(this,n);var r=n.offset.split(" "),s=n.at.split(" ");return 1===r.length&&(r[1]=r[0]),/^\d/.test(r[0])&&(r[0]="+"+r[0]),/^\d/.test(r[1])&&(r[1]="+"+r[1]),1===s.length&&(/left|center|right/.test(s[0])?s[1]="center":(s[1]=s[0],s[0]="center")),i.call(this,t.extend(n,{at:s[0]+r[0]+" "+s[1]+r[1],offset:e}))}}(jQuery)}(jQuery),function(t,e){var i=0,n={},r={};n.height=n.paddingTop=n.paddingBottom=n.borderTopWidth=n.borderBottomWidth="hide",r.height=r.paddingTop=r.paddingBottom=r.borderTopWidth=r.borderBottomWidth="show",t.widget("ui.accordion",{version:"1.9.2",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var e=this.accordionId="ui-accordion-"+(this.element.attr("id")||++i),n=this.options;this.prevShow=this.prevHide=t(),this.element.addClass("ui-accordion ui-widget ui-helper-reset"),this.headers=this.element.find(n.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this._hoverable(this.headers),this._focusable(this.headers),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").hide(),n.collapsible||n.active!==!1&&null!=n.active||(n.active=0),n.active<0&&(n.active+=this.headers.length),this.active=this._findActive(n.active).addClass("ui-accordion-header-active ui-state-active").toggleClass("ui-corner-all ui-corner-top"),this.active.next().addClass("ui-accordion-content-active").show(),this._createIcons(),this.refresh(),this.element.attr("role","tablist"),this.headers.attr("role","tab").each(function(i){var n=t(this),r=n.attr("id"),s=n.next(),o=s.attr("id");r||(r=e+"-header-"+i,n.attr("id",r)),o||(o=e+"-panel-"+i,s.attr("id",o)),n.attr("aria-controls",o),s.attr("aria-labelledby",r)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._on(this.headers,{keydown:"_keydown"}),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._setupEvents(n.event)},_getCreateEventData:function(){return{header:this.active,content:this.active.length?this.active.next():t()}},_createIcons:function(){var e=this.options.icons;e&&(t("<span>").addClass("ui-accordion-header-icon ui-icon "+e.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(e.header).addClass(e.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var t;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),t=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&t.css("height","")},_setOption:function(t,e){return"active"===t?void this._activate(e):("event"===t&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(e)),this._super(t,e),"collapsible"!==t||e||this.options.active!==!1||this._activate(0),"icons"===t&&(this._destroyIcons(),e&&this._createIcons()),void("disabled"===t&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!e)))},_keydown:function(e){if(!e.altKey&&!e.ctrlKey){var i=t.ui.keyCode,n=this.headers.length,r=this.headers.index(e.target),s=!1;switch(e.keyCode){case i.RIGHT:case i.DOWN:s=this.headers[(r+1)%n];break;case i.LEFT:case i.UP:s=this.headers[(r-1+n)%n];break;case i.SPACE:case i.ENTER:this._eventHandler(e);break;case i.HOME:s=this.headers[0];break;case i.END:s=this.headers[n-1]}s&&(t(e.target).attr("tabIndex",-1),t(s).attr("tabIndex",0),s.focus(),e.preventDefault())}},_panelKeyDown:function(e){e.keyCode===t.ui.keyCode.UP&&e.ctrlKey&&t(e.currentTarget).prev().focus()},refresh:function(){var e,i,n=this.options.heightStyle,r=this.element.parent();"fill"===n?(t.support.minHeight||(i=r.css("overflow"),r.css("overflow","hidden")),e=r.height(),this.element.siblings(":visible").each(function(){var i=t(this),n=i.css("position");"absolute"!==n&&"fixed"!==n&&(e-=i.outerHeight(!0))}),i&&r.css("overflow",i),this.headers.each(function(){e-=t(this).outerHeight(!0)}),this.headers.next().each(function(){t(this).height(Math.max(0,e-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")):"auto"===n&&(e=0,this.headers.next().each(function(){e=Math.max(e,t(this).css("height","").height())}).height(e))},_activate:function(e){var i=this._findActive(e)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:t.noop}))},_findActive:function(e){return"number"==typeof e?this.headers.eq(e):t()},_setupEvents:function(e){var i={};e&&(t.each(e.split(" "),function(t,e){i[e]="_eventHandler"}),this._on(this.headers,i))},_eventHandler:function(e){var i=this.options,n=this.active,r=t(e.currentTarget),s=r[0]===n[0],o=s&&i.collapsible,a=o?t():r.next(),l=n.next(),c={oldHeader:n,oldPanel:l,newHeader:o?t():r,newPanel:a};e.preventDefault(),s&&!i.collapsible||this._trigger("beforeActivate",e,c)===!1||(i.active=!o&&this.headers.index(r),this.active=s?t():r,this._toggle(c),n.removeClass("ui-accordion-header-active ui-state-active"),i.icons&&n.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),s||(r.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&r.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),r.next().addClass("ui-accordion-content-active")))},_toggle:function(e){var i=e.newPanel,n=this.prevShow.length?this.prevShow:e.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=n,this.options.animate?this._animate(i,n,e):(n.hide(),i.show(),this._toggleComplete(e)),n.attr({"aria-expanded":"false","aria-hidden":"true"}),n.prev().attr("aria-selected","false"),i.length&&n.length?n.prev().attr("tabIndex",-1):i.length&&this.headers.filter(function(){return 0===t(this).attr("tabIndex")}).attr("tabIndex",-1),i.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(t,e,i){var s,o,a,l=this,c=0,u=t.length&&(!e.length||t.index()<e.index()),h=this.options.animate||{},d=u&&h.down||h,p=function(){l._toggleComplete(i)};return"number"==typeof d&&(a=d),"string"==typeof d&&(o=d),o=o||d.easing||h.easing,a=a||d.duration||h.duration,e.length?t.length?(s=t.show().outerHeight(),e.animate(n,{duration:a,easing:o,step:function(t,e){e.now=Math.round(t)}}),void t.hide().animate(r,{duration:a,easing:o,complete:p,step:function(t,i){i.now=Math.round(t),"height"!==i.prop?c+=i.now:"content"!==l.options.heightStyle&&(i.now=Math.round(s-e.outerHeight()-c),c=0)}})):e.animate(n,a,o,p):t.animate(r,a,o,p)},_toggleComplete:function(t){var e=t.oldPanel;e.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),e.length&&(e.parent()[0].className=e.parent()[0].className),this._trigger("activate",null,t)}}),t.uiBackCompat!==!1&&(!function(t,e){t.extend(e.options,{navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}});var i=e._create;e._create=function(){if(this.options.navigation){var e=this,n=this.element.find(this.options.header),r=n.next(),s=n.add(r).find("a").filter(this.options.navigationFilter)[0];s&&n.add(r).each(function(i){if(t.contains(this,s))return e.options.active=Math.floor(i/2),!1})}i.call(this)}}(jQuery,jQuery.ui.accordion.prototype),function(t,e){t.extend(e.options,{heightStyle:null,autoHeight:!0,clearStyle:!1,fillSpace:!1});var i=e._create,n=e._setOption;t.extend(e,{_create:function(){this.options.heightStyle=this.options.heightStyle||this._mergeHeightStyle(),i.call(this)},_setOption:function(t){"autoHeight"!==t&&"clearStyle"!==t&&"fillSpace"!==t||(this.options.heightStyle=this._mergeHeightStyle()),n.apply(this,arguments)},_mergeHeightStyle:function(){var t=this.options;return t.fillSpace?"fill":t.clearStyle?"content":t.autoHeight?"auto":void 0}})}(jQuery,jQuery.ui.accordion.prototype),function(t,e){t.extend(e.options.icons,{activeHeader:null,headerSelected:"ui-icon-triangle-1-s"});var i=e._createIcons;e._createIcons=function(){this.options.icons&&(this.options.icons.activeHeader=this.options.icons.activeHeader||this.options.icons.headerSelected),i.call(this)}}(jQuery,jQuery.ui.accordion.prototype),function(t,e){e.activate=e._activate;var i=e._findActive;e._findActive=function(t){return t===-1&&(t=!1),t&&"number"!=typeof t&&(t=this.headers.index(this.headers.filter(t)),t===-1&&(t=!1)),i.call(this,t)}}(jQuery,jQuery.ui.accordion.prototype),jQuery.ui.accordion.prototype.resize=jQuery.ui.accordion.prototype.refresh,function(t,e){t.extend(e.options,{change:null,changestart:null});var i=e._trigger;e._trigger=function(t,e,n){var r=i.apply(this,arguments);return!!r&&("beforeActivate"===t?r=i.call(this,"changestart",e,{oldHeader:n.oldHeader,oldContent:n.oldPanel,newHeader:n.newHeader,newContent:n.newPanel}):"activate"===t&&(r=i.call(this,"change",e,{oldHeader:n.oldHeader,oldContent:n.oldPanel,newHeader:n.newHeader,newContent:n.newPanel})),r)}}(jQuery,jQuery.ui.accordion.prototype),function(t,e){t.extend(e.options,{animate:null,animated:"slide"});var i=e._create;e._create=function(){var t=this.options;null===t.animate&&(t.animated?"slide"===t.animated?t.animate=300:"bounceslide"===t.animated?t.animate={duration:200,down:{easing:"easeOutBounce",duration:1e3}}:t.animate=t.animated:t.animate=!1),i.call(this)}}(jQuery,jQuery.ui.accordion.prototype))}(jQuery),function(t,e){var i=0;t.widget("ui.autocomplete",{version:"1.9.2",defaultElement:"<input>",options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var e,i,n;this.isMultiLine=this._isMultiLine(),this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(r){if(this.element.prop("readOnly"))return e=!0,n=!0,void(i=!0);e=!1,n=!1,i=!1;var s=t.ui.keyCode;switch(r.keyCode){case s.PAGE_UP:e=!0,this._move("previousPage",r);break;case s.PAGE_DOWN:e=!0,this._move("nextPage",r);break;case s.UP:e=!1,this._keyEvent("previous",r);break;case s.DOWN:e=!1,this._keyEvent("next",r);break;case s.ENTER:case s.NUMPAD_ENTER:this.menu.active&&(e=!0,r.preventDefault(),this.menu.select(r));break;case s.TAB:this.menu.active&&this.menu.select(r);break;case s.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(r),r.preventDefault());break;default:i=!0,this._searchTimeout(r)}},keypress:function(n){if(e)return e=!1,void n.preventDefault();if(!i){var r=t.ui.keyCode;switch(n.keyCode){case r.PAGE_UP:this._move("previousPage",n);break;case r.PAGE_DOWN:this._move("nextPage",n);break;case r.UP:this._keyEvent("previous",n);break;case r.DOWN:this._keyEvent("next",n)}}},input:function(t){return n?(n=!1,void t.preventDefault()):void this._searchTimeout(t)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(t){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(t),void this._change(t))}}),this._initSource(),this.menu=t("<ul>").addClass("ui-autocomplete").appendTo(this.document.find(this.options.appendTo||"body")[0]).menu({input:t(),role:null}).zIndex(this.element.zIndex()+1).hide().data("menu"),this._on(this.menu.element,{mousedown:function(e){e.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];t(e.target).closest(".ui-menu-item").length||this._delay(function(){var e=this;this.document.one("mousedown",function(n){n.target===e.element[0]||n.target===i||t.contains(i,n.target)||e.close()})})},menufocus:function(e,i){if(this.isNewMenu&&(this.isNewMenu=!1,e.originalEvent&&/^mouse/.test(e.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){t(e.target).trigger(e.originalEvent)});var n=i.item.data("ui-autocomplete-item")||i.item.data("item.autocomplete");!1!==this._trigger("focus",e,{item:n})?e.originalEvent&&/^key/.test(e.originalEvent.type)&&this._value(n.value):this.liveRegion.text(n.value)},menuselect:function(t,e){var i=e.item.data("ui-autocomplete-item")||e.item.data("item.autocomplete"),n=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n,this.selectedItem=i})),!1!==this._trigger("select",t,{item:i})&&this._value(i.value),this.term=this._value(),this.close(t),this.selectedItem=i}}),this.liveRegion=t("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element),t.fn.bgiframe&&this.menu.element.bgiframe(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(t,e){this._super(t,e),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(this.document.find(e||"body")[0]),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},_isMultiLine:function(){return!!this.element.is("textarea")||!this.element.is("input")&&this.element.prop("isContentEditable")},_initSource:function(){var e,i,n=this;t.isArray(this.options.source)?(e=this.options.source,this.source=function(i,n){n(t.ui.autocomplete.filter(e,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(e,r){n.xhr&&n.xhr.abort(),n.xhr=t.ajax({url:i,data:e,dataType:"json",success:function(t){r(t)},error:function(){r([])}})}):this.source=this.options.source},_searchTimeout:function(t){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,t))},this.options.delay)},search:function(t,e){return t=null!=t?t:this._value(),this.term=this._value(),t.length<this.options.minLength?this.close(e):this._trigger("search",e)!==!1?this._search(t):void 0},_search:function(t){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:t},this._response())},_response:function(){var t=this,e=++i;return function(n){e===i&&t.__response(n),t.pending--,t.pending||t.element.removeClass("ui-autocomplete-loading")}},__response:function(t){t&&(t=this._normalize(t)),this._trigger("response",null,{content:t}),!this.options.disabled&&t&&t.length&&!this.cancelSearch?(this._suggest(t),this._trigger("open")):this._close()},close:function(t){this.cancelSearch=!0,this._close(t)},_close:function(t){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",t))},_change:function(t){this.previous!==this._value()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(e){return e.length&&e[0].label&&e[0].value?e:t.map(e,function(e){return"string"==typeof e?{label:e,value:e}:t.extend({label:e.label||e.value,value:e.value||e.label},e)})},_suggest:function(e){var i=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(i,e),this.menu.refresh(),i.show(),this._resizeMenu(),i.position(t.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(e,i){var n=this;t.each(i,function(t,i){n._renderItemData(e,i)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-autocomplete-item",e)},_renderItem:function(e,i){return t("<li>").append(t("<a>").text(i.label)).appendTo(e)},_move:function(t,e){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)?(this._value(this.term),void this.menu.blur()):void this.menu[t](e):void this.search(null,e)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(t,e){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(t,e),e.preventDefault())}}),t.extend(t.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(e,i){var n=new RegExp(t.ui.autocomplete.escapeRegex(i),"i");return t.grep(e,function(t){return n.test(t.label||t.value||t)})}}),t.widget("ui.autocomplete",t.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(t){return t+(t>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var e;this._superApply(arguments),this.options.disabled||this.cancelSearch||(e=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.text(e))}})}(jQuery),function(t,e){var i,n,r,s,o="ui-button ui-widget ui-state-default ui-corner-all",a="ui-state-hover ui-state-active ",l="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",c=function(){var e=t(this).find(":ui-button");setTimeout(function(){e.button("refresh")},1)},u=function(e){var i=e.name,n=e.form,r=t([]);return i&&(r=n?t(n).find("[name='"+i+"']"):t("[name='"+i+"']",e.ownerDocument).filter(function(){return!this.form})),r};t.widget("ui.button",{version:"1.9.2",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,c),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var e=this,a=this.options,l="checkbox"===this.type||"radio"===this.type,h=l?"":"ui-state-active",d="ui-state-focus";null===a.label&&(a.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(o).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){a.disabled||this===i&&t(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){a.disabled||t(this).removeClass(h)}).bind("click"+this.eventNamespace,function(t){a.disabled&&(t.preventDefault(),t.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){e.buttonElement.addClass(d)}).bind("blur"+this.eventNamespace,function(){e.buttonElement.removeClass(d)}),l&&(this.element.bind("change"+this.eventNamespace,function(){s||e.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(t){a.disabled||(s=!1,n=t.pageX,r=t.pageY)}).bind("mouseup"+this.eventNamespace,function(t){a.disabled||n===t.pageX&&r===t.pageY||(s=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return!a.disabled&&!s&&(t(this).toggleClass("ui-state-active"),void e.buttonElement.attr("aria-pressed",e.element[0].checked))}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(a.disabled||s)return!1;t(this).addClass("ui-state-active"),e.buttonElement.attr("aria-pressed","true");var i=e.element[0];u(i).not(i).map(function(){return t(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return!a.disabled&&(t(this).addClass("ui-state-active"),i=this,void e.document.one("mouseup",function(){i=null}))}).bind("mouseup"+this.eventNamespace,function(){return!a.disabled&&void t(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(e){return!a.disabled&&void(e.keyCode!==t.ui.keyCode.SPACE&&e.keyCode!==t.ui.keyCode.ENTER||t(this).addClass("ui-state-active"))}).bind("keyup"+this.eventNamespace,function(){t(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(e){e.keyCode===t.ui.keyCode.SPACE&&t(this).click()})),this._setOption("disabled",a.disabled),this._resetButton()},_determineButtonType:function(){var t,e,i;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button","checkbox"===this.type||"radio"===this.type?(t=this.element.parents().last(),e="label[for='"+this.element.attr("id")+"']",this.buttonElement=t.find(e),this.buttonElement.length||(t=t.length?t.siblings():this.element.siblings(),this.buttonElement=t.filter(e),this.buttonElement.length||(this.buttonElement=t.find(e))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(o+" "+a+" "+l).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(t,e){return this._super(t,e),"disabled"===t?(e?this.element.prop("disabled",!0):this.element.prop("disabled",!1),void this._trigger("disabled",null,{element:this.element,disabled:e})):void this._resetButton()},refresh:function(){var e=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOption("disabled",e),"radio"===this.type?u(this.element[0]).each(function(){t(this).is(":checked")?t(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):t(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var e=this.buttonElement.removeClass(l),i=t("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(e.empty()).text(),n=this.options.icons,r=n.primary&&n.secondary,s=[];n.primary||n.secondary?(this.options.text&&s.push("ui-button-text-icon"+(r?"s":n.primary?"-primary":"-secondary")),n.primary&&e.prepend("<span class='ui-button-icon-primary ui-icon "+n.primary+"'></span>"),n.secondary&&e.append("<span class='ui-button-icon-secondary ui-icon "+n.secondary+"'></span>"),this.options.text||(s.push(r?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||e.attr("title",t.trim(i)))):s.push("ui-button-text-only"),e.addClass(s.join(" "))}}),t.widget("ui.buttonset",{version:"1.9.2",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(t,e){"disabled"===t&&this.buttons.button("option",t,e),this._super(t,e)},refresh:function(){if("custom"!=this.element.data("uitype")){var e="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(e?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(e?"ui-corner-left":"ui-corner-right").end().end()}},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons!==e&&this.buttons.length&&this.buttons.map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(t){var e="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(e,"mouseout",function(){$(this).removeClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!=-1&&$(this).removeClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!=-1&&$(this).removeClass("ui-datepicker-next-hover")}).delegate(e,"mouseover",function(){$.datepicker._isDisabledDatepicker(instActive.inline?t.parent()[0]:instActive.input[0])||($(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),$(this).addClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!=-1&&$(this).addClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!=-1&&$(this).addClass("ui-datepicker-next-hover"))})}function extendRemove(t,e){$.extend(t,e);for(var i in e)null!=e[i]&&e[i]!=undefined||(t[i]=e[i]);return t}$.extend($.ui,{datepicker:{version:"1.9.2"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return extendRemove(this._defaults,t||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(t){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline="div"==nodeName||"span"==nodeName;target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),"input"==nodeName?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(t,e){var i=t[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:i,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:e,dpDiv:e?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(t,e){var i=$(t);e.append=$([]),e.trigger=$([]),i.hasClass(this.markerClassName)||(this._attachments(i,e),i.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(t,i,n){e.settings[i]=n}).bind("getData.datepicker",function(t,i){return this._get(e,i)}),this._autoSize(e),$.data(t,PROP_NAME,e),e.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,e){var i=this._get(e,"appendText"),n=this._get(e,"isRTL");e.append&&e.append.remove(),i&&(e.append=$('<span class="'+this._appendClass+'">'+i+"</span>"),t[n?"before":"after"](e.append)),t.unbind("focus",this._showDatepicker),e.trigger&&e.trigger.remove();var r=this._get(e,"showOn");if("focus"!=r&&"both"!=r||t.focus(this._showDatepicker),"button"==r||"both"==r){var s=this._get(e,"buttonText"),o=this._get(e,"buttonImage");e.trigger=$(this._get(e,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:o,alt:s,title:s}):$('<button type="button"></button>').addClass(this._triggerClass).html(""==o?s:$("<img/>").attr({src:o,alt:s,title:s}))),t[n?"before":"after"](e.trigger),e.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==t[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=t[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(t[0])):$.datepicker._showDatepicker(t[0]),!1})}},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e=new Date(2009,11,20),i=this._get(t,"dateFormat");if(i.match(/[DM]/)){var n=function(t){for(var e=0,i=0,n=0;n<t.length;n++)t[n].length>e&&(e=t[n].length,i=n);return i};e.setMonth(n(this._get(t,i.match(/MM/)?"monthNames":"monthNamesShort"))),e.setDate(n(this._get(t,i.match(/DD/)?"dayNames":"dayNamesShort"))+20-e.getDay())}t.input.attr("size",this._formatDate(t,e).length)}},_inlineDatepicker:function(t,e){var i=$(t);i.hasClass(this.markerClassName)||(i.addClass(this.markerClassName).append(e.dpDiv).bind("setData.datepicker",function(t,i,n){e.settings[i]=n}).bind("getData.datepicker",function(t,i){return this._get(e,i)}),$.data(t,PROP_NAME,e),this._setDate(e,this._getDefaultDate(e),!0),this._updateDatepicker(e),this._updateAlternate(e),e.settings.disabled&&this._disableDatepicker(t),e.dpDiv.css("display","block"))},_dialogDatepicker:function(t,e,i,n,r){var s=this._dialogInst;if(!s){this.uuid+=1;var o="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+o+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),s=this._dialogInst=this._newInst(this._dialogInput,!1),s.settings={},$.data(this._dialogInput[0],PROP_NAME,s)}if(extendRemove(s.settings,n||{}),e=e&&e.constructor==Date?this._formatDate(s,e):e,this._dialogInput.val(e),this._pos=r?r.length?r:[r.pageX,r.pageY]:null,!this._pos){var a=document.documentElement.clientWidth,l=document.documentElement.clientHeight,c=document.documentElement.scrollLeft||document.body.scrollLeft,u=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[a/2-100+c,l/2-150+u]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),s.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,s),this},_destroyDatepicker:function(t){var e=$(t),i=$.data(t,PROP_NAME);if(e.hasClass(this.markerClassName)){var n=t.nodeName.toLowerCase();$.removeData(t,PROP_NAME),"input"==n?(i.append.remove(),i.trigger.remove(),e.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):"div"!=n&&"span"!=n||e.removeClass(this.markerClassName).empty()}},_enableDatepicker:function(t){var e=$(t),i=$.data(t,PROP_NAME);if(e.hasClass(this.markerClassName)){var n=t.nodeName.toLowerCase();if("input"==n)t.disabled=!1,i.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"==n||"span"==n){var r=e.children("."+this._inlineClass);r.children().removeClass("ui-state-disabled"),r.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)}this._disabledInputs=$.map(this._disabledInputs,function(e){return e==t?null:e})}},_disableDatepicker:function(t){var e=$(t),i=$.data(t,PROP_NAME);if(e.hasClass(this.markerClassName)){var n=t.nodeName.toLowerCase();if("input"==n)t.disabled=!0,i.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"==n||"span"==n){var r=e.children("."+this._inlineClass);r.children().addClass("ui-state-disabled"),r.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)}this._disabledInputs=$.map(this._disabledInputs,function(e){return e==t?null:e}),this._disabledInputs[this._disabledInputs.length]=t}},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;e<this._disabledInputs.length;e++)if(this._disabledInputs[e]==t)return!0;return!1},_getInst:function(t){try{return $.data(t,PROP_NAME)}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,e,i){var n=this._getInst(t);if(2==arguments.length&&"string"==typeof e)return"defaults"==e?$.extend({},$.datepicker._defaults):n?"all"==e?$.extend({},n.settings):this._get(n,e):null;var r=e||{};if("string"==typeof e&&(r={},r[e]=i),n){this._curInst==n&&this._hideDatepicker();var s=this._getDateDatepicker(t,!0),o=this._getMinMaxDate(n,"min"),a=this._getMinMaxDate(n,"max");extendRemove(n.settings,r),null!==o&&r.dateFormat!==undefined&&r.minDate===undefined&&(n.settings.minDate=this._formatDate(n,o)),null!==a&&r.dateFormat!==undefined&&r.maxDate===undefined&&(n.settings.maxDate=this._formatDate(n,a)),this._attachments($(t),n),this._autoSize(n),this._setDate(n,s),this._updateAlternate(n),this._updateDatepicker(n)}},_changeDatepicker:function(t,e,i){this._optionDatepicker(t,e,i)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var i=this._getInst(t);i&&(this._setDate(i,e),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(t,e){var i=this._getInst(t);return i&&!i.inline&&this._setDateFromField(i,e),i?this._getDate(i):null},_doKeyDown:function(t){var e=$.datepicker._getInst(t.target),i=!0,n=e.dpDiv.is(".ui-datepicker-rtl");if(e._keyEvent=!0,$.datepicker._datepickerShowing)switch(t.keyCode){case 9:$.datepicker._hideDatepicker(),i=!1;break;case 13:var r=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",e.dpDiv);r[0]&&$.datepicker._selectDay(t.target,e.selectedMonth,e.selectedYear,r[0]);var s=$.datepicker._get(e,"onSelect");if(s){var o=$.datepicker._formatDate(e);s.apply(e.input?e.input[0]:null,[o,e])}else $.datepicker._hideDatepicker();return!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(t.target,t.ctrlKey?-$.datepicker._get(e,"stepBigMonths"):-$.datepicker._get(e,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(t.target,t.ctrlKey?+$.datepicker._get(e,"stepBigMonths"):+$.datepicker._get(e,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&$.datepicker._clearDate(t.target),i=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&$.datepicker._gotoToday(t.target),i=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&$.datepicker._adjustDate(t.target,n?1:-1,"D"),i=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&$.datepicker._adjustDate(t.target,t.ctrlKey?-$.datepicker._get(e,"stepBigMonths"):-$.datepicker._get(e,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&$.datepicker._adjustDate(t.target,-7,"D"),i=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&$.datepicker._adjustDate(t.target,n?-1:1,"D"),i=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&$.datepicker._adjustDate(t.target,t.ctrlKey?+$.datepicker._get(e,"stepBigMonths"):+$.datepicker._get(e,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&$.datepicker._adjustDate(t.target,7,"D"),i=t.ctrlKey||t.metaKey;break;default:i=!1}else 36==t.keyCode&&t.ctrlKey?$.datepicker._showDatepicker(this):i=!1;i&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var e=$.datepicker._getInst(t.target);if($.datepicker._get(e,"constrainInput")){var i=$.datepicker._possibleChars($.datepicker._get(e,"dateFormat")),n=String.fromCharCode(t.charCode==undefined?t.keyCode:t.charCode);return t.ctrlKey||t.metaKey||n<" "||!i||i.indexOf(n)>-1}},_doKeyUp:function(t){var e=$.datepicker._getInst(t.target);if(e.input.val()!=e.lastVal)try{var i=$.datepicker.parseDate($.datepicker._get(e,"dateFormat"),e.input?e.input.val():null,$.datepicker._getFormatConfig(e));i&&($.datepicker._setDateFromField(e),$.datepicker._updateAlternate(e),$.datepicker._updateDatepicker(e))}catch(t){$.datepicker.log(t)}return!0},_showDatepicker:function(t){if(t=t.target||t,"input"!=t.nodeName.toLowerCase()&&(t=$("input",t.parentNode)[0]),!$.datepicker._isDisabledDatepicker(t)&&$.datepicker._lastInput!=t){var e=$.datepicker._getInst(t);$.datepicker._curInst&&$.datepicker._curInst!=e&&($.datepicker._curInst.dpDiv.stop(!0,!0),e&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var i=$.datepicker._get(e,"beforeShow"),n=i?i.apply(t,[t,e]):{};if(n!==!1){extendRemove(e.settings,n),e.lastVal=null,$.datepicker._lastInput=t,$.datepicker._setDateFromField(e),$.datepicker._inDialog&&(t.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(t),$.datepicker._pos[1]+=t.offsetHeight);var r=!1;$(t).parents().each(function(){return r|="fixed"==$(this).css("position"),!r});var s={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};if($.datepicker._pos=null,e.dpDiv.empty(),e.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(e),s=$.datepicker._checkOffset(e,s,r),e.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":r?"fixed":"absolute",display:"none",left:s.left+"px",top:s.top+"px"}),!e.inline){var o=$.datepicker._get(e,"showAnim"),a=$.datepicker._get(e,"duration"),l=function(){var t=e.dpDiv.find("iframe.ui-datepicker-cover");if(t.length){var i=$.datepicker._getBorders(e.dpDiv);t.css({left:-i[0],top:-i[1],width:e.dpDiv.outerWidth(),height:e.dpDiv.outerHeight()})}};e.dpDiv.zIndex($(t).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&($.effects.effect[o]||$.effects[o])?e.dpDiv.show(o,$.datepicker._get(e,"showOptions"),a,l):e.dpDiv[o||"show"](o?a:null,l),o&&a||l(),e.input.is(":visible")&&!e.input.is(":disabled")&&e.input.focus(),$.datepicker._curInst=e}}}},_updateDatepicker:function(t){this.maxRows=4;var e=$.datepicker._getBorders(t.dpDiv);instActive=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t);var i=t.dpDiv.find("iframe.ui-datepicker-cover");i.length&&i.css({left:-e[0],top:-e[1],width:t.dpDiv.outerWidth(),height:t.dpDiv.outerHeight()}),t.dpDiv.find("."+this._dayOverClass+" a").mouseover();var n=this._getNumberOfMonths(t),r=n[1],s=17;if(t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),r>1&&t.dpDiv.addClass("ui-datepicker-multi-"+r).css("width",s*r+"em"),t.dpDiv[(1!=n[0]||1!=n[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t==$.datepicker._curInst&&$.datepicker._datepickerShowing&&t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&t.input[0]!=document.activeElement&&t.input.focus(),t.yearshtml){var o=t.yearshtml;setTimeout(function(){o===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),o=t.yearshtml=null},0)}},_getBorders:function(t){var e=function(t){return{thin:1,medium:2,thick:3}[t]||t};return[parseFloat(e(t.css("border-left-width"))),parseFloat(e(t.css("border-top-width")))]},_checkOffset:function(t,e,i){var n=t.dpDiv.outerWidth(),r=t.dpDiv.outerHeight(),s=t.input?t.input.outerWidth():0,o=t.input?t.input.outerHeight():0,a=document.documentElement.clientWidth+(i?0:$(document).scrollLeft()),l=document.documentElement.clientHeight+(i?0:$(document).scrollTop());return e.left-=this._get(t,"isRTL")?n-s:0,e.left-=i&&e.left==t.input.offset().left?$(document).scrollLeft():0,e.top-=i&&e.top==t.input.offset().top+o?$(document).scrollTop():0,e.left-=Math.min(e.left,e.left+n>a&&a>n?Math.abs(e.left+n-a):0),e.top-=Math.min(e.top,e.top+r>l&&l>r?Math.abs(r+o):0),e},_findPos:function(t){for(var e=this._getInst(t),i=this._get(e,"isRTL");t&&("hidden"==t.type||1!=t.nodeType||$.expr.filters.hidden(t));)t=t[i?"previousSibling":"nextSibling"];var n=$(t).offset();return[n.left,n.top]},_hideDatepicker:function(t){var e=this._curInst;if(e&&(!t||e==$.data(t,PROP_NAME))&&this._datepickerShowing){var i=this._get(e,"showAnim"),n=this._get(e,"duration"),r=function(){$.datepicker._tidyDialog(e)};$.effects&&($.effects.effect[i]||$.effects[i])?e.dpDiv.hide(i,$.datepicker._get(e,"showOptions"),n,r):e.dpDiv["slideDown"==i?"slideUp":"fadeIn"==i?"fadeOut":"hide"](i?n:null,r),i||r(),this._datepickerShowing=!1;var s=this._get(e,"onClose");s&&s.apply(e.input?e.input[0]:null,[e.input?e.input.val():"",e]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if($.datepicker._curInst){var e=$(t.target),i=$.datepicker._getInst(e[0]);(e[0].id==$.datepicker._mainDivId||0!=e.parents("#"+$.datepicker._mainDivId).length||e.hasClass($.datepicker.markerClassName)||e.closest("."+$.datepicker._triggerClass).length||!$.datepicker._datepickerShowing||$.datepicker._inDialog&&$.blockUI)&&(!e.hasClass($.datepicker.markerClassName)||$.datepicker._curInst==i)||$.datepicker._hideDatepicker()}},_adjustDate:function(t,e,i){var n=$(t),r=this._getInst(n[0]);this._isDisabledDatepicker(n[0])||(this._adjustInstDate(r,e+("M"==i?this._get(r,"showCurrentAtPos"):0),i),this._updateDatepicker(r))},_gotoToday:function(t){var e=$(t),i=this._getInst(e[0]);if(this._get(i,"gotoCurrent")&&i.currentDay)i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear;else{var n=new Date;i.selectedDay=n.getDate(),i.drawMonth=i.selectedMonth=n.getMonth(),i.drawYear=i.selectedYear=n.getFullYear()}this._notifyChange(i),this._adjustDate(e)},_selectMonthYear:function(t,e,i){var n=$(t),r=this._getInst(n[0]);r["selected"+("M"==i?"Month":"Year")]=r["draw"+("M"==i?"Month":"Year")]=parseInt(e.options[e.selectedIndex].value,10),this._notifyChange(r),this._adjustDate(n)},_selectDay:function(t,e,i,n){var r=$(t);if(!$(n).hasClass(this._unselectableClass)&&!this._isDisabledDatepicker(r[0])){var s=this._getInst(r[0]);s.selectedDay=s.currentDay=$("a",n).html(),s.selectedMonth=s.currentMonth=e,s.selectedYear=s.currentYear=i,this._selectDate(t,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear))}},_clearDate:function(t){var e=$(t);this._getInst(e[0]);this._selectDate(e,"")},_selectDate:function(t,e){var i=$(t),n=this._getInst(i[0]);e=null!=e?e:this._formatDate(n),n.input&&n.input.val(e),this._updateAlternate(n);var r=this._get(n,"onSelect");r?r.apply(n.input?n.input[0]:null,[e,n]):n.input&&n.input.trigger("change"),n.inline?this._updateDatepicker(n):(this._hideDatepicker(),this._lastInput=n.input[0],"object"!=typeof n.input[0]&&n.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var e=this._get(t,"altField");if(e){var i=this._get(t,"altFormat")||this._get(t,"dateFormat"),n=this._getDate(t),r=this.formatDate(i,n,this._getFormatConfig(t));$(e).each(function(){$(this).val(r)})}},noWeekends:function(t){var e=t.getDay();return[e>0&&e<6,""]},iso8601Week:function(t){var e=new Date(t.getTime());e.setDate(e.getDate()+4-(e.getDay()||7));var i=e.getTime();return e.setMonth(0),e.setDate(1),Math.floor(Math.round((i-e)/864e5)/7)+1},parseDate:function(t,e,i){if(null==t||null==e)throw"Invalid arguments";if(e="object"==typeof e?e.toString():e+"",""==e)return null;var n=(i?i.shortYearCutoff:null)||this._defaults.shortYearCutoff;n="string"!=typeof n?n:(new Date).getFullYear()%100+parseInt(n,10);for(var r=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,s=(i?i.dayNames:null)||this._defaults.dayNames,o=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,a=(i?i.monthNames:null)||this._defaults.monthNames,l=-1,c=-1,u=-1,h=-1,d=!1,p=function(e){var i=M+1<t.length&&t.charAt(M+1)==e;return i&&M++,i},f=function(t){var i=p(t),n="@"==t?14:"!"==t?20:"y"==t&&i?4:"o"==t?3:2,r=new RegExp("^\\d{1,"+n+"}"),s=e.substring(v).match(r);if(!s)throw"Missing number at position "+v;return v+=s[0].length,parseInt(s[0],10)},m=function(t,i,n){var r=$.map(p(t)?n:i,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)}),s=-1;if($.each(r,function(t,i){var n=i[1];if(e.substr(v,n.length).toLowerCase()==n.toLowerCase())return s=i[0],v+=n.length,!1}),s!=-1)return s+1;throw"Unknown name at position "+v},g=function(){if(e.charAt(v)!=t.charAt(M))throw"Unexpected literal at position "+v;v++},v=0,M=0;M<t.length;M++)if(d)"'"!=t.charAt(M)||p("'")?g():d=!1;else switch(t.charAt(M)){case"d":u=f("d");break;case"D":m("D",r,s);break;case"o":h=f("o");break;case"m":c=f("m");break;case"M":c=m("M",o,a);break;case"y":l=f("y");break;case"@":var b=new Date(f("@"));l=b.getFullYear(),c=b.getMonth()+1,u=b.getDate();break;case"!":var b=new Date((f("!")-this._ticksTo1970)/1e4);l=b.getFullYear(),c=b.getMonth()+1,u=b.getDate();break;case"'":p("'")?g():d=!0;break;default:g()}if(v<e.length){var Y=e.substr(v);if(!/^\s+/.test(Y))throw"Extra/unparsed characters found in date: "+Y}if(l==-1?l=(new Date).getFullYear():l<100&&(l+=(new Date).getFullYear()-(new Date).getFullYear()%100+(l<=n?0:-100)),h>-1)for(c=1,u=h;;){var y=this._getDaysInMonth(l,c-1);if(u<=y)break;c++,u-=y}var b=this._daylightSavingAdjust(new Date(l,c-1,u));if(b.getFullYear()!=l||b.getMonth()+1!=c||b.getDate()!=u)throw"Invalid date";return b},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(t,e,i){if(!e)return"";var n=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,r=(i?i.dayNames:null)||this._defaults.dayNames,s=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,o=(i?i.monthNames:null)||this._defaults.monthNames,a=function(e){var i=d+1<t.length&&t.charAt(d+1)==e;return i&&d++,i},l=function(t,e,i){var n=""+e;if(a(t))for(;n.length<i;)n="0"+n;return n},c=function(t,e,i,n){return a(t)?n[e]:i[e]},u="",h=!1;if(e)for(var d=0;d<t.length;d++)if(h)"'"!=t.charAt(d)||a("'")?u+=t.charAt(d):h=!1;else switch(t.charAt(d)){case"d":u+=l("d",e.getDate(),2);break;case"D":u+=c("D",e.getDay(),n,r);break;case"o":u+=l("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=l("m",e.getMonth()+1,2);break;case"M":u+=c("M",e.getMonth(),s,o);break;case"y":u+=a("y")?e.getFullYear():(e.getYear()%100<10?"0":"")+e.getYear()%100;break;case"@":u+=e.getTime();break;case"!":u+=1e4*e.getTime()+this._ticksTo1970;break;case"'":a("'")?u+="'":h=!0;break;default:u+=t.charAt(d)}return u},_possibleChars:function(t){for(var e="",i=!1,n=function(e){var i=r+1<t.length&&t.charAt(r+1)==e;return i&&r++,i},r=0;r<t.length;r++)if(i)"'"!=t.charAt(r)||n("'")?e+=t.charAt(r):i=!1;else switch(t.charAt(r)){case"d":case"m":case"y":case"@":e+="0123456789";break;case"D":case"M":return null;case"'":n("'")?e+="'":i=!0;break;default:e+=t.charAt(r)}return e},_get:function(t,e){return t.settings[e]!==undefined?t.settings[e]:this._defaults[e]},_setDateFromField:function(t,e){if(t.input.val()!=t.lastVal){var i,n,r=this._get(t,"dateFormat"),s=t.lastVal=t.input?t.input.val():null;i=n=this._getDefaultDate(t);var o=this._getFormatConfig(t);try{i=this.parseDate(r,s,o)||n}catch(t){this.log(t),s=e?"":s}t.selectedDay=i.getDate(),t.drawMonth=t.selectedMonth=i.getMonth(),t.drawYear=t.selectedYear=i.getFullYear(),t.currentDay=s?i.getDate():0,t.currentMonth=s?i.getMonth():0,t.currentYear=s?i.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(t,e,i){var n=function(t){var e=new Date;return e.setDate(e.getDate()+t),e},r=function(e){try{return $.datepicker.parseDate($.datepicker._get(t,"dateFormat"),e,$.datepicker._getFormatConfig(t))}catch(t){}for(var i=(e.toLowerCase().match(/^c/)?$.datepicker._getDate(t):null)||new Date,n=i.getFullYear(),r=i.getMonth(),s=i.getDate(),o=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,a=o.exec(e);a;){switch(a[2]||"d"){case"d":case"D":s+=parseInt(a[1],10);break;case"w":case"W":s+=7*parseInt(a[1],10);break;case"m":case"M":r+=parseInt(a[1],10),s=Math.min(s,$.datepicker._getDaysInMonth(n,r));break;case"y":case"Y":n+=parseInt(a[1],10),s=Math.min(s,$.datepicker._getDaysInMonth(n,r))}a=o.exec(e)}return new Date(n,r,s)},s=null==e||""===e?i:"string"==typeof e?r(e):"number"==typeof e?isNaN(e)?i:n(e):new Date(e.getTime());return s=s&&"Invalid Date"==s.toString()?i:s,s&&(s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0)),this._daylightSavingAdjust(s)},_daylightSavingAdjust:function(t){return t?(t.setHours(t.getHours()>12?t.getHours()+2:0),t):null},_setDate:function(t,e,i){var n=!e,r=t.selectedMonth,s=t.selectedYear,o=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=o.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=o.getMonth(),t.drawYear=t.selectedYear=t.currentYear=o.getFullYear(),r==t.selectedMonth&&s==t.selectedYear||i||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(n?"":this._formatDate(t))},_getDate:function(t){var e=!t.currentYear||t.input&&""==t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return e},_attachHandlers:function(t){var e=this._get(t,"stepMonths"),i="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(i,-e,"M")},next:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(i,+e,"M")},hide:function(){window["DP_jQuery_"+dpuuid].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+dpuuid].datepicker._gotoToday(i)},selectDay:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(i,this,"Y"),!1}};$(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e=new Date;e=this._daylightSavingAdjust(new Date(e.getFullYear(),e.getMonth(),e.getDate()));var i=this._get(t,"isRTL"),n=this._get(t,"showButtonPanel"),r=this._get(t,"hideIfNoPrevNext"),s=this._get(t,"navigationAsDateFormat"),o=this._getNumberOfMonths(t),a=this._get(t,"showCurrentAtPos"),l=this._get(t,"stepMonths"),c=1!=o[0]||1!=o[1],u=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),h=this._getMinMaxDate(t,"min"),d=this._getMinMaxDate(t,"max"),p=t.drawMonth-a,f=t.drawYear;if(p<0&&(p+=12,f--),d){var m=this._daylightSavingAdjust(new Date(d.getFullYear(),d.getMonth()-o[0]*o[1]+1,d.getDate()));for(m=h&&m<h?h:m;this._daylightSavingAdjust(new Date(f,p,1))>m;)p--,p<0&&(p=11,f--)}t.drawMonth=p,t.drawYear=f;var g=this._get(t,"prevText");g=s?this.formatDate(g,this._daylightSavingAdjust(new Date(f,p-l,1)),this._getFormatConfig(t)):g;var v=this._canAdjustMonth(t,-1,f,p)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+g+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"e":"w")+'">'+g+"</span></a>":r?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+g+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"e":"w")+'">'+g+"</span></a>",M=this._get(t,"nextText");M=s?this.formatDate(M,this._daylightSavingAdjust(new Date(f,p+l,1)),this._getFormatConfig(t)):M;var b=this._canAdjustMonth(t,1,f,p)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+M+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"w":"e")+'">'+M+"</span></a>":r?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+M+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"w":"e")+'">'+M+"</span></a>",Y=this._get(t,"currentText"),y=this._get(t,"gotoCurrent")&&t.currentDay?u:e;Y=s?this.formatDate(Y,y,this._getFormatConfig(t)):Y;var _=t.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(t,"closeText")+"</button>",D=n?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(i?_:"")+(this._isInRange(t,y)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+Y+"</button>":"")+(i?"":_)+"</div>":"",T=parseInt(this._get(t,"firstDay"),10);T=isNaN(T)?0:T;for(var w=this._get(t,"showWeek"),E=this._get(t,"dayNames"),x=(this._get(t,"dayNamesShort"),this._get(t,"dayNamesMin")),A=this._get(t,"monthNames"),S=this._get(t,"monthNamesShort"),C=this._get(t,"beforeShowDay"),k=this._get(t,"showOtherMonths"),H=this._get(t,"selectOtherMonths"),O=(this._get(t,"calculateWeek")||this.iso8601Week,this._getDefaultDate(t)),I="",P=0;P<o[0];P++){var N="";this.maxRows=4;for(var R=0;R<o[1];R++){var L=this._daylightSavingAdjust(new Date(f,p,t.selectedDay)),F=" ui-corner-all",U="";if(c){if(U+='<div class="ui-datepicker-group',o[1]>1)switch(R){case 0:U+=" ui-datepicker-group-first",F=" ui-corner-"+(i?"right":"left");break;case o[1]-1:U+=" ui-datepicker-group-last",F=" ui-corner-"+(i?"left":"right");break;default:U+=" ui-datepicker-group-middle",F=""}U+='">'}U+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+F+'">'+(/all|left/.test(F)&&0==P?i?b:v:"")+(/all|right/.test(F)&&0==P?i?v:b:"")+this._generateMonthYearHeader(t,p,f,h,d,P>0||R>0,A,S)+'</div><table class="ui-datepicker-calendar"><thead><tr>';for(var z=w?'<th class="ui-datepicker-week-col">'+this._get(t,"weekHeader")+"</th>":"",B=0;B<7;B++){var W=(B+T)%7;z+="<th"+((B+T+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+E[W]+'">'+x[W]+"</span></th>"}U+=z+"</tr></thead><tbody>";var j=this._getDaysInMonth(f,p);f==t.selectedYear&&p==t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,j));var V=(this._getFirstDayOfMonth(f,p)-T+7)%7,G=Math.ceil((V+j)/7),q=c&&this.maxRows>G?this.maxRows:G;this.maxRows=q;for(var K=this._daylightSavingAdjust(new Date(f,p,1-V)),J=0;J<q;J++){U+="<tr>";for(var X=w?'<td class="ui-datepicker-week-col">'+this._get(t,"calculateWeek")(K)+"</td>":"",B=0;B<7;B++){var Z=C?C.apply(t.input?t.input[0]:null,[K]):[!0,""],Q=K.getMonth()!=p,tt=Q&&!H||!Z[0]||h&&K<h||d&&K>d;X+='<td class="'+((B+T+6)%7>=5?" ui-datepicker-week-end":"")+(Q?" ui-datepicker-other-month":"")+(K.getTime()==L.getTime()&&p==t.selectedMonth&&t._keyEvent||O.getTime()==K.getTime()&&O.getTime()==L.getTime()?" "+this._dayOverClass:"")+(tt?" "+this._unselectableClass+" ui-state-disabled":"")+(Q&&!k?"":" "+Z[1]+(K.getTime()==u.getTime()?" "+this._currentClass:"")+(K.getTime()==e.getTime()?" ui-datepicker-today":""))+'"'+(Q&&!k||!Z[2]?"":' title="'+Z[2]+'"')+(tt?"":' data-handler="selectDay" data-event="click" data-month="'+K.getMonth()+'" data-year="'+K.getFullYear()+'"')+">"+(Q&&!k?"&#xa0;":tt?'<span class="ui-state-default">'+K.getDate()+"</span>":'<a class="ui-state-default'+(K.getTime()==e.getTime()?" ui-state-highlight":"")+(K.getTime()==u.getTime()?" ui-state-active":"")+(Q?" ui-priority-secondary":"")+'" href="#">'+K.getDate()+"</a>")+"</td>",K.setDate(K.getDate()+1),K=this._daylightSavingAdjust(K)}U+=X+"</tr>"}p++,p>11&&(p=0,f++),U+="</tbody></table>"+(c?"</div>"+(o[0]>0&&R==o[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),N+=U}I+=N}return I+=D+($.ui.ie6&&!t.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),t._keyEvent=!1,I},_generateMonthYearHeader:function(t,e,i,n,r,s,o,a){var l=this._get(t,"changeMonth"),c=this._get(t,"changeYear"),u=this._get(t,"showMonthAfterYear"),h='<div class="ui-datepicker-title">',d="";if(s||!l)d+='<span class="ui-datepicker-month">'+o[e]+"</span>";else{var p=n&&n.getFullYear()==i,f=r&&r.getFullYear()==i;d+='<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';for(var m=0;m<12;m++)(!p||m>=n.getMonth())&&(!f||m<=r.getMonth())&&(d+='<option value="'+m+'"'+(m==e?' selected="selected"':"")+">"+a[m]+"</option>");d+="</select>"}if(u||(h+=d+(!s&&l&&c?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",s||!c)h+='<span class="ui-datepicker-year">'+i+"</span>";else{var g=this._get(t,"yearRange").split(":"),v=(new Date).getFullYear(),M=function(t){var e=t.match(/c[+-].*/)?i+parseInt(t.substring(1),10):t.match(/[+-].*/)?v+parseInt(t,10):parseInt(t,10);return isNaN(e)?v:e},b=M(g[0]),Y=Math.max(b,M(g[1]||""));for(b=n?Math.max(b,n.getFullYear()):b,Y=r?Math.min(Y,r.getFullYear()):Y,t.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';b<=Y;b++)t.yearshtml+='<option value="'+b+'"'+(b==i?' selected="selected"':"")+">"+b+"</option>";t.yearshtml+="</select>",h+=t.yearshtml,t.yearshtml=null}return h+=this._get(t,"yearSuffix"),u&&(h+=(!s&&l&&c?"":"&#xa0;")+d),h+="</div>"},_adjustInstDate:function(t,e,i){var n=t.drawYear+("Y"==i?e:0),r=t.drawMonth+("M"==i?e:0),s=Math.min(t.selectedDay,this._getDaysInMonth(n,r))+("D"==i?e:0),o=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(n,r,s)));t.selectedDay=o.getDate(),t.drawMonth=t.selectedMonth=o.getMonth(),t.drawYear=t.selectedYear=o.getFullYear(),"M"!=i&&"Y"!=i||this._notifyChange(t)},_restrictMinMax:function(t,e){var i=this._getMinMaxDate(t,"min"),n=this._getMinMaxDate(t,"max"),r=i&&e<i?i:e;return r=n&&r>n?n:r},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,i,n){var r=this._getNumberOfMonths(t),s=this._daylightSavingAdjust(new Date(i,n+(e<0?e:r[0]*r[1]),1));return e<0&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(t,s)},_isInRange:function(t,e){var i=this._getMinMaxDate(t,"min"),n=this._getMinMaxDate(t,"max");return(!i||e.getTime()>=i.getTime())&&(!n||e.getTime()<=n.getTime())},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),{shortYearCutoff:e,dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,i,n){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var r=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(n,i,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),r,this._getFormatConfig(t))}}),$.fn.datepicker=function(t){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find(document.body).append($.datepicker.dpDiv),$.datepicker.initialized=!0);var e=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!=t&&"getDate"!=t&&"widget"!=t?"option"==t&&2==arguments.length&&"string"==typeof arguments[1]?$.datepicker["_"+t+"Datepicker"].apply($.datepicker,[this[0]].concat(e)):this.each(function(){"string"==typeof t?$.datepicker["_"+t+"Datepicker"].apply($.datepicker,[this].concat(e)):$.datepicker._attachDatepicker(this,t)}):$.datepicker["_"+t+"Datepicker"].apply($.datepicker,[this[0]].concat(e))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.9.2",window["DP_jQuery_"+dpuuid]=$}(jQuery),function(t,e){var i="ui-dialog ui-widget ui-widget-content ui-corner-all ",n={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},r={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};t.widget("ui.dialog",{version:"1.9.2",options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var i=t(this).css(e).offset().top;i<0&&t(this).css("top",e.top-i)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),"string"!=typeof this.originalTitle&&(this.originalTitle=""),this.oldPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.options.title=this.options.title||this.originalTitle;var e,n,r,s,o,a=this,l=this.options,c=l.title||"&#160;";e=(this.uiDialog=t("<div>")).addClass(i+l.dialogClass).css({display:"none",outline:0,zIndex:l.zIndex}).attr("tabIndex",-1).keydown(function(e){l.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===t.ui.keyCode.ESCAPE&&(a.close(e),e.preventDefault())}).mousedown(function(t){a.moveToTop(!1,t)}).appendTo("body"),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(e),n=(this.uiDialogTitlebar=t("<div>")).addClass("ui-dialog-titlebar  ui-widget-header  ui-corner-all  ui-helper-clearfix").bind("mousedown",function(){e.focus()}).prependTo(e),r=t("<a href='#'></a>").addClass("ui-dialog-titlebar-close  ui-corner-all").attr("role","button").click(function(t){t.preventDefault(),a.close(t)}).appendTo(n),(this.uiDialogTitlebarCloseText=t("<span>")).addClass("ui-icon ui-icon-closethick").text(l.closeText).appendTo(r),s=t("<span>").uniqueId().addClass("ui-dialog-title").html(c).prependTo(n),o=(this.uiDialogButtonPane=t("<div>")).addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),(this.uiButtonSet=t("<div>")).addClass("ui-dialog-buttonset").appendTo(o),e.attr({role:"dialog","aria-labelledby":s.attr("id")}),n.find("*").add(n).disableSelection(),this._hoverable(r),this._focusable(r),l.draggable&&t.fn.draggable&&this._makeDraggable(),l.resizable&&t.fn.resizable&&this._makeResizable(),this._createButtons(l.buttons),this._isOpen=!1,t.fn.bgiframe&&e.bgiframe(),this._on(e,{keydown:function(i){if(l.modal&&i.keyCode===t.ui.keyCode.TAB){var n=t(":tabbable",e),r=n.filter(":first"),s=n.filter(":last");return i.target!==s[0]||i.shiftKey?i.target===r[0]&&i.shiftKey?(s.focus(1),!1):void 0:(r.focus(1),!1)}}})},_init:function(){this.options.autoOpen&&this.open()},_destroy:function(){var t,e=this.oldPosition;this.overlay&&this.overlay.destroy(),this.uiDialog.hide(),this.element.removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),t=e.parent.children().eq(e.index),t.length&&t[0]!==this.element[0]?t.before(this.element):e.parent.append(this.element)},widget:function(){return this.uiDialog},close:function(e){var i,n,r=this;if(this._isOpen&&!1!==this._trigger("beforeClose",e))return this._isOpen=!1,this.overlay&&this.overlay.destroy(),this.options.hide?this._hide(this.uiDialog,this.options.hide,function(){r._trigger("close",e)}):(this.uiDialog.hide(),this._trigger("close",e)),t.ui.dialog.overlay.resize(),this.options.modal&&(i=0,t(".ui-dialog").each(function(){this!==r.uiDialog[0]&&(n=t(this).css("z-index"),isNaN(n)||(i=Math.max(i,n)))}),t.ui.dialog.maxZ=i),this},isOpen:function(){return this._isOpen},moveToTop:function(e,i){var n,r=this.options;return r.modal&&!e||!r.stack&&!r.modal?this._trigger("focus",i):(r.zIndex>t.ui.dialog.maxZ&&(t.ui.dialog.maxZ=r.zIndex),this.overlay&&(t.ui.dialog.maxZ+=1,t.ui.dialog.overlay.maxZ=t.ui.dialog.maxZ,this.overlay.$el.css("z-index",t.ui.dialog.overlay.maxZ)),n={scrollTop:this.element.scrollTop(),scrollLeft:this.element.scrollLeft()},t.ui.dialog.maxZ+=1,this.uiDialog.css("z-index",t.ui.dialog.maxZ),this.element.attr(n),this._trigger("focus",i),this)},open:function(){if(!this._isOpen){var e,i=this.options,n=this.uiDialog;return this._size(),this._position(i.position),n.show(i.show),this.overlay=i.modal?new t.ui.dialog.overlay(this):null,this.moveToTop(!0),e=this.element.find(":tabbable"),e.length||(e=this.uiDialogButtonPane.find(":tabbable"),e.length||(e=n)),e.eq(0).focus(),this._isOpen=!0,this._trigger("open"),this}},_createButtons:function(e){var i=this,n=!1;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),"object"==typeof e&&null!==e&&t.each(e,function(){return!(n=!0)}),n?(t.each(e,function(e,n){var r,s;n=t.isFunction(n)?{click:n,text:e}:n,n=t.extend({type:"button"},n),s=n.click,n.click=function(){s.apply(i.element[0],arguments)},r=t("<button></button>",n).appendTo(i.uiButtonSet),t.fn.button&&r.button()}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)):this.uiDialog.removeClass("ui-dialog-buttons")},_makeDraggable:function(){function e(t){return{position:t.position,offset:t.offset}}var i=this,n=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,r){t(this).addClass("ui-dialog-dragging"),i._trigger("dragStart",n,e(r))},drag:function(t,n){i._trigger("drag",t,e(n))},stop:function(r,s){n.position=[s.position.left-i.document.scrollLeft(),s.position.top-i.document.scrollTop()],t(this).removeClass("ui-dialog-dragging"),i._trigger("dragStop",r,e(s)),t.ui.dialog.overlay.resize()}})},_makeResizable:function(i){function n(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}i=i===e?this.options.resizable:i;var r=this,s=this.options,o=this.uiDialog.css("position"),a="string"==typeof i?i:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:s.maxWidth,maxHeight:s.maxHeight,minWidth:s.minWidth,minHeight:this._minHeight(),handles:a,start:function(e,i){t(this).addClass("ui-dialog-resizing"),r._trigger("resizeStart",e,n(i))},resize:function(t,e){r._trigger("resize",t,n(e))},stop:function(e,i){t(this).removeClass("ui-dialog-resizing"),s.height=t(this).height(),s.width=t(this).width(),r._trigger("resizeStop",e,n(i)),t.ui.dialog.overlay.resize()}}).css("position",o).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(e){var i,n=[],r=[0,0];e?(("string"==typeof e||"object"==typeof e&&"0"in e)&&(n=e.split?e.split(" "):[e[0],e[1]],1===n.length&&(n[1]=n[0]),t.each(["left","top"],function(t,e){+n[t]===n[t]&&(r[t]=n[t],n[t]=e)}),e={my:n[0]+(r[0]<0?r[0]:"+"+r[0])+" "+n[1]+(r[1]<0?r[1]:"+"+r[1]),at:n.join(" ")}),e=t.extend({},t.ui.dialog.prototype.options.position,e)):e=t.ui.dialog.prototype.options.position,i=this.uiDialog.is(":visible"),i||this.uiDialog.show(),this.uiDialog.position(e),i||this.uiDialog.hide()},_setOptions:function(e){var i=this,s={},o=!1;t.each(e,function(t,e){i._setOption(t,e),t in n&&(o=!0),t in r&&(s[t]=e)}),o&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",s)},_setOption:function(e,n){var r,s,o=this.uiDialog;switch(e){case"buttons":this._createButtons(n);break;case"closeText":this.uiDialogTitlebarCloseText.text(""+n);break;case"dialogClass":o.removeClass(this.options.dialogClass).addClass(i+n);break;case"disabled":n?o.addClass("ui-dialog-disabled"):o.removeClass("ui-dialog-disabled");break;case"draggable":r=o.is(":data(draggable)"),r&&!n&&o.draggable("destroy"),!r&&n&&this._makeDraggable();break;case"position":this._position(n);break;case"resizable":s=o.is(":data(resizable)"),s&&!n&&o.resizable("destroy"),s&&"string"==typeof n&&o.resizable("option","handles",n),s||n===!1||this._makeResizable(n);break;case"title":t(".ui-dialog-title",this.uiDialogTitlebar).html(""+(n||"&#160;"))}this._super(e,n)},_size:function(){var e,i,n,r=this.options,s=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0}),r.minWidth>r.width&&(r.width=r.minWidth),e=this.uiDialog.css({height:"auto",width:r.width}).outerHeight(),i=Math.max(0,r.minHeight-e),"auto"===r.height?t.support.minHeight?this.element.css({minHeight:i,height:"auto"}):(this.uiDialog.show(),n=this.element.css("height","auto").height(),s||this.uiDialog.hide(),this.element.height(Math.max(n,i))):this.element.height(Math.max(r.height-e,0)),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),t.extend(t.ui.dialog,{uuid:0,maxZ:0,getTitleId:function(t){var e=t.attr("id");return e||(this.uuid+=1,e=this.uuid),"ui-dialog-title-"+e},overlay:function(e){this.$el=t.ui.dialog.overlay.create(e)}}),t.extend(t.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:t.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(t){return t+".dialog-overlay"}).join(" "),create:function(e){0===this.instances.length&&(setTimeout(function(){t.ui.dialog.overlay.instances.length&&t(document).bind(t.ui.dialog.overlay.events,function(e){if(t(e.target).zIndex()<t.ui.dialog.overlay.maxZ)return!1})},1),t(window).bind("resize.dialog-overlay",t.ui.dialog.overlay.resize));var i=this.oldInstances.pop()||t("<div>").addClass("ui-widget-overlay");return t(document).bind("keydown.dialog-overlay",function(n){var r=t.ui.dialog.overlay.instances;0!==r.length&&r[r.length-1]===i&&e.options.closeOnEscape&&!n.isDefaultPrevented()&&n.keyCode&&n.keyCode===t.ui.keyCode.ESCAPE&&(e.close(n),n.preventDefault())}),i.appendTo(document.body).css({width:this.width(),height:this.height()}),t.fn.bgiframe&&i.bgiframe(),this.instances.push(i),i},destroy:function(e){var i=t.inArray(e,this.instances),n=0;i!==-1&&this.oldInstances.push(this.instances.splice(i,1)[0]),0===this.instances.length&&t([document,window]).unbind(".dialog-overlay"),e.height(0).width(0).remove(),t.each(this.instances,function(){n=Math.max(n,this.css("z-index"))}),this.maxZ=n},height:function(){var e,i;return t.ui.ie?(e=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),i=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),e<i?t(window).height()+"px":e+"px"):t(document).height()+"px"},width:function(){var e,i;return t.ui.ie?(e=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),i=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),e<i?t(window).width()+"px":e+"px"):t(document).width()+"px"},resize:function(){var e=t([]);t.each(t.ui.dialog.overlay.instances,function(){e=e.add(this)}),e.css({width:0,height:0}).css({width:t.ui.dialog.overlay.width(),height:t.ui.dialog.overlay.height()})}}),t.extend(t.ui.dialog.overlay.prototype,{destroy:function(){t.ui.dialog.overlay.destroy(this.$el)}})}(jQuery),function(t,e){t.widget("ui.draggable",t.ui.mouse,{version:"1.9.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"!=this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(e){var i=this.options;return!(this.helper||i.disabled||t(e.target).is(".ui-resizable-handle"))&&(this.handle=this._getHandle(e),!!this.handle&&(t(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){t('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(t(this).offset()).appendTo("body")}),!0))},_mouseStart:function(e){var i=this.options;return this.helper=this._createHelper(e),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),i.containment&&this._setContainment(),this._trigger("start",e)===!1?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_mouseDrag:function(e,i){if(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(this._trigger("drag",e,n)===!1)return this._mouseUp({}),!1;this.position=n.position}return this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var i=!1;t.ui.ddmanager&&!this.options.dropBehaviour&&(i=t.ui.ddmanager.drop(this,e)),this.dropped&&(i=this.dropped,this.dropped=!1);for(var n=this.element[0],r=!1;n&&(n=n.parentNode);)n==document&&(r=!0);if(!r&&"original"===this.options.helper)return!1;if("invalid"==this.options.revert&&!i||"valid"==this.options.revert&&i||this.options.revert===!0||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)){var s=this;t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){s._trigger("stop",e)!==!1&&s._clear()})}else this._trigger("stop",e)!==!1&&this._clear();return!1},_mouseUp:function(e){return t("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){var i=!this.options.handle||!t(this.options.handle,this.element).length;return t(this.options.handle,this.element).find("*").andSelf().each(function(){this==e.target&&(i=!0)}),i},_createHelper:function(e){var i=this.options,n=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e])):"clone"==i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"==i.appendTo?this.element[0].parentNode:i.appendTo),n[0]==this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var t=this.element.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e=this.options;if("parent"==e.containment&&(e.containment=this.helper[0].parentNode),"document"!=e.containment&&"window"!=e.containment||(this.containment=["document"==e.containment?0:t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==e.containment?0:t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==e.containment?0:t(window).scrollLeft())+t("document"==e.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==e.containment?0:t(window).scrollTop())+(t("document"==e.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(e.containment)||e.containment.constructor==Array)e.containment.constructor==Array&&(this.containment=e.containment);else{var i=t(e.containment),n=i[0];if(!n)return;var r=(i.offset(),"hidden"!=t(n).css("overflow"));this.containment=[(parseInt(t(n).css("borderLeftWidth"),10)||0)+(parseInt(t(n).css("paddingLeft"),10)||0),(parseInt(t(n).css("borderTopWidth"),10)||0)+(parseInt(t(n).css("paddingTop"),10)||0),(r?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(t(n).css("borderLeftWidth"),10)||0)-(parseInt(t(n).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(r?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(t(n).css("borderTopWidth"),10)||0)-(parseInt(t(n).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i}},_convertPositionTo:function(e,i){i||(i=this.position);var n="absolute"==e?1:-1,r=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),s=/(html|body)/i.test(r[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():s?0:r.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():s?0:r.scrollLeft())*n}},_generatePosition:function(e){var i=this.options,n="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(n[0].tagName),s=e.pageX,o=e.pageY;if(this.originalPosition){var a;if(this.containment){if(this.relative_container){var l=this.relative_container.offset();a=[this.containment[0]+l.left,this.containment[1]+l.top,this.containment[2]+l.left,this.containment[3]+l.top]}else a=this.containment;e.pageX-this.offset.click.left<a[0]&&(s=a[0]+this.offset.click.left),e.pageY-this.offset.click.top<a[1]&&(o=a[1]+this.offset.click.top),e.pageX-this.offset.click.left>a[2]&&(s=a[2]+this.offset.click.left),e.pageY-this.offset.click.top>a[3]&&(o=a[3]+this.offset.click.top)}if(i.grid){var c=i.grid[1]?this.originalPageY+Math.round((o-this.originalPageY)/i.grid[1])*i.grid[1]:this.originalPageY;o=a&&(c-this.offset.click.top<a[1]||c-this.offset.click.top>a[3])?c-this.offset.click.top<a[1]?c+i.grid[1]:c-i.grid[1]:c;var u=i.grid[0]?this.originalPageX+Math.round((s-this.originalPageX)/i.grid[0])*i.grid[0]:this.originalPageX;s=a&&(u-this.offset.click.left<a[0]||u-this.offset.click.left>a[2])?u-this.offset.click.left<a[0]?u+i.grid[0]:u-i.grid[0]:u}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():r?0:n.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():r?0:n.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]==this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(e,i,n){return n=n||this._uiHash(),t.ui.plugin.call(this,e,[i,n]),"drag"==e&&(this.positionAbs=this._convertPositionTo("absolute")),t.Widget.prototype._trigger.call(this,e,i,n)},plugins:{},_uiHash:function(t){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,i){var n=t(this).data("draggable"),r=n.options,s=t.extend({},i,{item:n.element});n.sortables=[],t(r.connectToSortable).each(function(){var i=t.data(this,"sortable");i&&!i.options.disabled&&(n.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",e,s))})},stop:function(e,i){var n=t(this).data("draggable"),r=t.extend({},i,{item:n.element});t.each(n.sortables,function(){this.instance.isOver?(this.instance.isOver=0,n.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(e),this.instance.options.helper=this.instance.options._helper,"original"==n.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",e,r))})},drag:function(e,i){var n=t(this).data("draggable"),r=this;t.each(n.sortables,function(s){var o=!1,a=this;this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(o=!0,t.each(n.sortables,function(){return this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this!=a&&this.instance._intersectsWith(this.instance.containerCache)&&t.ui.contains(a.instance.element[0],this.instance.element[0])&&(o=!1),o})),o?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=t(r).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},e.target=this.instance.currentItem[0],this.instance._mouseCapture(e,!0),this.instance._mouseStart(e,!0,!0),this.instance.offset.click.top=n.offset.click.top,this.instance.offset.click.left=n.offset.click.left,this.instance.offset.parent.left-=n.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=n.offset.parent.top-this.instance.offset.parent.top,n._trigger("toSortable",e),n.dropped=this.instance.element,n.currentItem=n.element,this.instance.fromOutside=n),this.instance.currentItem&&this.instance._mouseDrag(e)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",e,this.instance._uiHash(this.instance)),this.instance._mouseStop(e,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),n._trigger("fromSortable",e),n.dropped=!1)})}}),t.ui.plugin.add("draggable","cursor",{start:function(e,i){var n=t("body"),r=t(this).data("draggable").options;n.css("cursor")&&(r._cursor=n.css("cursor")),n.css("cursor",r.cursor)},stop:function(e,i){var n=t(this).data("draggable").options;n._cursor&&t("body").css("cursor",n._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,i){var n=t(i.helper),r=t(this).data("draggable").options;n.css("opacity")&&(r._opacity=n.css("opacity")),n.css("opacity",r.opacity)},stop:function(e,i){var n=t(this).data("draggable").options;n._opacity&&t(i.helper).css("opacity",n._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(e,i){var n=t(this).data("draggable");n.scrollParent[0]!=document&&"HTML"!=n.scrollParent[0].tagName&&(n.overflowOffset=n.scrollParent.offset())},drag:function(e,i){var n=t(this).data("draggable"),r=n.options,s=!1;n.scrollParent[0]!=document&&"HTML"!=n.scrollParent[0].tagName?(r.axis&&"x"==r.axis||(n.overflowOffset.top+n.scrollParent[0].offsetHeight-e.pageY<r.scrollSensitivity?n.scrollParent[0].scrollTop=s=n.scrollParent[0].scrollTop+r.scrollSpeed:e.pageY-n.overflowOffset.top<r.scrollSensitivity&&(n.scrollParent[0].scrollTop=s=n.scrollParent[0].scrollTop-r.scrollSpeed)),r.axis&&"y"==r.axis||(n.overflowOffset.left+n.scrollParent[0].offsetWidth-e.pageX<r.scrollSensitivity?n.scrollParent[0].scrollLeft=s=n.scrollParent[0].scrollLeft+r.scrollSpeed:e.pageX-n.overflowOffset.left<r.scrollSensitivity&&(n.scrollParent[0].scrollLeft=s=n.scrollParent[0].scrollLeft-r.scrollSpeed))):(r.axis&&"x"==r.axis||(e.pageY-t(document).scrollTop()<r.scrollSensitivity?s=t(document).scrollTop(t(document).scrollTop()-r.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<r.scrollSensitivity&&(s=t(document).scrollTop(t(document).scrollTop()+r.scrollSpeed))),r.axis&&"y"==r.axis||(e.pageX-t(document).scrollLeft()<r.scrollSensitivity?s=t(document).scrollLeft(t(document).scrollLeft()-r.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<r.scrollSensitivity&&(s=t(document).scrollLeft(t(document).scrollLeft()+r.scrollSpeed)))),s!==!1&&t.ui.ddmanager&&!r.dropBehaviour&&t.ui.ddmanager.prepareOffsets(n,e)}}),t.ui.plugin.add("draggable","snap",{start:function(e,i){var n=t(this).data("draggable"),r=n.options;n.snapElements=[],t(r.snap.constructor!=String?r.snap.items||":data(draggable)":r.snap).each(function(){var e=t(this),i=e.offset();this!=n.element[0]&&n.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:i.top,left:i.left})})},drag:function(e,i){for(var n=t(this).data("draggable"),r=n.options,s=r.snapTolerance,o=i.offset.left,a=o+n.helperProportions.width,l=i.offset.top,c=l+n.helperProportions.height,u=n.snapElements.length-1;u>=0;u--){var h=n.snapElements[u].left,d=h+n.snapElements[u].width,p=n.snapElements[u].top,f=p+n.snapElements[u].height;if(h-s<o&&o<d+s&&p-s<l&&l<f+s||h-s<o&&o<d+s&&p-s<c&&c<f+s||h-s<a&&a<d+s&&p-s<l&&l<f+s||h-s<a&&a<d+s&&p-s<c&&c<f+s){if("inner"!=r.snapMode){var m=Math.abs(p-c)<=s,g=Math.abs(f-l)<=s,v=Math.abs(h-a)<=s,M=Math.abs(d-o)<=s;m&&(i.position.top=n._convertPositionTo("relative",{top:p-n.helperProportions.height,left:0}).top-n.margins.top),g&&(i.position.top=n._convertPositionTo("relative",{top:f,left:0}).top-n.margins.top),v&&(i.position.left=n._convertPositionTo("relative",{top:0,left:h-n.helperProportions.width}).left-n.margins.left),M&&(i.position.left=n._convertPositionTo("relative",{top:0,left:d}).left-n.margins.left)}var b=m||g||v||M;if("outer"!=r.snapMode){var m=Math.abs(p-l)<=s,g=Math.abs(f-c)<=s,v=Math.abs(h-o)<=s,M=Math.abs(d-a)<=s;m&&(i.position.top=n._convertPositionTo("relative",{top:p,left:0}).top-n.margins.top),g&&(i.position.top=n._convertPositionTo("relative",{top:f-n.helperProportions.height,left:0}).top-n.margins.top),v&&(i.position.left=n._convertPositionTo("relative",{top:0,left:h}).left-n.margins.left),M&&(i.position.left=n._convertPositionTo("relative",{top:0,left:d-n.helperProportions.width}).left-n.margins.left)}!n.snapElements[u].snapping&&(m||g||v||M||b)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,e,t.extend(n._uiHash(),{snapItem:n.snapElements[u].item})),n.snapElements[u].snapping=m||g||v||M||b}else n.snapElements[u].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,e,t.extend(n._uiHash(),{snapItem:n.snapElements[u].item})),n.snapElements[u].snapping=!1}}}),t.ui.plugin.add("draggable","stack",{start:function(e,i){var n=t(this).data("draggable").options,r=t.makeArray(t(n.stack)).sort(function(e,i){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(i).css("zIndex"),10)||0)});if(r.length){var s=parseInt(r[0].style.zIndex)||0;t(r).each(function(t){this.style.zIndex=s+t}),this[0].style.zIndex=s+r.length}}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,i){var n=t(i.helper),r=t(this).data("draggable").options;n.css("zIndex")&&(r._zIndex=n.css("zIndex")),n.css("zIndex",r.zIndex)},stop:function(e,i){var n=t(this).data("draggable").options;n._zIndex&&t(i.helper).css("zIndex",n._zIndex)}})}(jQuery),function(t,e){t.widget("ui.droppable",{version:"1.9.2",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var e=this.options,i=e.accept;this.isover=0,this.isout=1,this.accept=t.isFunction(i)?i:function(t){return t.is(i)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},t.ui.ddmanager.droppables[e.scope]=t.ui.ddmanager.droppables[e.scope]||[],t.ui.ddmanager.droppables[e.scope].push(this),e.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var e=t.ui.ddmanager.droppables[this.options.scope],i=0;i<e.length;i++)e[i]==this&&e.splice(i,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(e,i){"accept"==e&&(this.accept=t.isFunction(i)?i:function(t){return t.is(i)}),t.Widget.prototype._setOption.apply(this,arguments)},_activate:function(e){var i=t.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",e,this.ui(i))},_deactivate:function(e){var i=t.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",e,this.ui(i))},_over:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!=this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",e,this.ui(i)))},_out:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!=this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",e,this.ui(i)))},_drop:function(e,i){var n=i||t.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]==this.element[0])return!1;var r=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var e=t.data(this,"droppable");if(e.options.greedy&&!e.options.disabled&&e.options.scope==n.options.scope&&e.accept.call(e.element[0],n.currentItem||n.element)&&t.ui.intersect(n,t.extend(e,{offset:e.element.offset()}),e.options.tolerance))return r=!0,!1}),!r&&(!!this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",e,this.ui(n)),this.element))},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}}}),t.ui.intersect=function(e,i,n){if(!i.offset)return!1;var r=(e.positionAbs||e.position.absolute).left,s=r+e.helperProportions.width,o=(e.positionAbs||e.position.absolute).top,a=o+e.helperProportions.height,l=i.offset.left,c=l+i.proportions.width,u=i.offset.top,h=u+i.proportions.height;switch(n){case"fit":return l<=r&&s<=c&&u<=o&&a<=h;case"intersect":return l<r+e.helperProportions.width/2&&s-e.helperProportions.width/2<c&&u<o+e.helperProportions.height/2&&a-e.helperProportions.height/2<h;case"pointer":var d=(e.positionAbs||e.position.absolute).left+(e.clickOffset||e.offset.click).left,p=(e.positionAbs||e.position.absolute).top+(e.clickOffset||e.offset.click).top,f=t.ui.isOver(p,d,u,l,i.proportions.height,i.proportions.width);return f;case"touch":return(o>=u&&o<=h||a>=u&&a<=h||o<u&&a>h)&&(r>=l&&r<=c||s>=l&&s<=c||r<l&&s>c);default:return!1}},t.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(e,i){var n=t.ui.ddmanager.droppables[e.options.scope]||[],r=i?i.type:null,s=(e.currentItem||e.element).find(":data(droppable)").andSelf();t:for(var o=0;o<n.length;o++)if(!(n[o].options.disabled||e&&!n[o].accept.call(n[o].element[0],e.currentItem||e.element))){for(var a=0;a<s.length;a++)if(s[a]==n[o].element[0]){n[o].proportions.height=0;continue t}n[o].visible="none"!=n[o].element.css("display"),n[o].visible&&("mousedown"==r&&n[o]._activate.call(n[o],i),n[o].offset=n[o].element.offset(),n[o].proportions={width:n[o].element[0].offsetWidth,height:n[o].element[0].offsetHeight})}},drop:function(e,i){var n=!1;return t.each(t.ui.ddmanager.droppables[e.options.scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&t.ui.intersect(e,this,this.options.tolerance)&&(n=this._drop.call(this,i)||n),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,i)))}),n},dragStart:function(e,i){e.element.parentsUntil("body").bind("scroll.droppable",function(){e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)})},drag:function(e,i){e.options.refreshPositions&&t.ui.ddmanager.prepareOffsets(e,i),t.each(t.ui.ddmanager.droppables[e.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var n=t.ui.intersect(e,this,this.options.tolerance),r=n||1!=this.isover?n&&0==this.isover?"isover":null:"isout";if(r){var s;if(this.options.greedy){var o=this.options.scope,a=this.element.parents(":data(droppable)").filter(function(){return t.data(this,"droppable").options.scope===o});a.length&&(s=t.data(a[0],"droppable"),s.greedyChild="isover"==r?1:0)}s&&"isover"==r&&(s.isover=0,s.isout=1,s._out.call(s,i)),this[r]=1,this["isout"==r?"isover":"isout"]=0,this["isover"==r?"_over":"_out"].call(this,i),s&&"isout"==r&&(s.isout=0,s.isover=1,s._over.call(s,i))}}})},dragStop:function(e,i){e.element.parentsUntil("body").unbind("scroll.droppable"),e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)}}}(jQuery),jQuery.effects||function(t,e){var i=t.uiBackCompat!==!1,n="ui-effects-";t.effects={effect:{}},function(e,i){function n(t,e,i){var n=d[e.type]||{};return null==t?i||!e.def?null:e.def:(t=n.floor?~~t:parseFloat(t),isNaN(t)?e.def:n.mod?(t+n.mod)%n.mod:0>t?0:n.max<t?n.max:t)}function r(t){var i=u(),n=i._rgba=[];return t=t.toLowerCase(),m(c,function(e,r){var s,o=r.re.exec(t),a=o&&r.parse(o),l=r.space||"rgba";if(a)return s=i[l](a),i[h[l].cache]=s[h[l].cache],n=i._rgba=s._rgba,!1}),n.length?("0,0,0,0"===n.join()&&e.extend(n,o.transparent),i):o[t]}function s(t,e,i){return i=(i+1)%1,6*i<1?t+(e-t)*i*6:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}var o,a="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor".split(" "),l=/^([\-+])=\s*(\d+\.?\d*)/,c=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],u=e.Color=function(t,i,n,r){return new e.Color.fn.parse(t,i,n,r)},h={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},d={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},p=u.support={},f=e("<p>")[0],m=e.each;f.style.cssText="background-color:rgba(1,1,1,.5)",p.rgba=f.style.backgroundColor.indexOf("rgba")>-1,m(h,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),u.fn=e.extend(u.prototype,{parse:function(s,a,l,c){if(s===i)return this._rgba=[null,null,null,null],this;(s.jquery||s.nodeType)&&(s=e(s).css(a),a=i);var d=this,p=e.type(s),f=this._rgba=[];return a!==i&&(s=[s,a,l,c],p="array"),"string"===p?this.parse(r(s)||o._default):"array"===p?(m(h.rgba.props,function(t,e){f[e.idx]=n(s[e.idx],e)}),this):"object"===p?(s instanceof u?m(h,function(t,e){s[e.cache]&&(d[e.cache]=s[e.cache].slice())}):m(h,function(e,i){var r=i.cache;m(i.props,function(t,e){if(!d[r]&&i.to){if("alpha"===t||null==s[t])return;d[r]=i.to(d._rgba)}d[r][e.idx]=n(s[t],e,!0)}),d[r]&&t.inArray(null,d[r].slice(0,3))<0&&(d[r][3]=1,i.from&&(d._rgba=i.from(d[r])))}),this):void 0},is:function(t){var e=u(t),i=!0,n=this;return m(h,function(t,r){var s,o=e[r.cache];return o&&(s=n[r.cache]||r.to&&r.to(n._rgba)||[],m(r.props,function(t,e){if(null!=o[e.idx])return i=o[e.idx]===s[e.idx]})),i}),i},_space:function(){var t=[],e=this;return m(h,function(i,n){e[n.cache]&&t.push(i)}),t.pop()},transition:function(t,e){var i=u(t),r=i._space(),s=h[r],o=0===this.alpha()?u("transparent"):this,a=o[s.cache]||s.to(o._rgba),l=a.slice();return i=i[s.cache],m(s.props,function(t,r){var s=r.idx,o=a[s],c=i[s],u=d[r.type]||{};null!==c&&(null===o?l[s]=c:(u.mod&&(c-o>u.mod/2?o+=u.mod:o-c>u.mod/2&&(o-=u.mod)),l[s]=n((c-o)*e+o,r)))}),this[r](l)},blend:function(t){if(1===this._rgba[3])return this;var i=this._rgba.slice(),n=i.pop(),r=u(t)._rgba;return u(e.map(i,function(t,e){return(1-n)*r[e]+n*t}))},toRgbaString:function(){var t="rgba(",i=e.map(this._rgba,function(t,e){return null==t?e>2?1:0:t});return 1===i[3]&&(i.pop(),t="rgb("),t+i.join()+")"},toHslaString:function(){var t="hsla(",i=e.map(this.hsla(),function(t,e){return null==t&&(t=e>2?1:0),e&&e<3&&(t=Math.round(100*t)+"%"),t});return 1===i[3]&&(i.pop(),t="hsl("),t+i.join()+")"},toHexString:function(t){var i=this._rgba.slice(),n=i.pop();return t&&i.push(~~(255*n)),"#"+e.map(i,function(t){return t=(t||0).toString(16),1===t.length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),u.fn.parse.prototype=u.fn,h.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,i,n=t[0]/255,r=t[1]/255,s=t[2]/255,o=t[3],a=Math.max(n,r,s),l=Math.min(n,r,s),c=a-l,u=a+l,h=.5*u;return e=l===a?0:n===a?60*(r-s)/c+360:r===a?60*(s-n)/c+120:60*(n-r)/c+240,i=0===h||1===h?h:h<=.5?c/u:c/(2-u),[Math.round(e)%360,i,h,null==o?1:o]},h.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,i=t[1],n=t[2],r=t[3],o=n<=.5?n*(1+i):n+i-n*i,a=2*n-o;return[Math.round(255*s(a,o,e+1/3)),Math.round(255*s(a,o,e)),Math.round(255*s(a,o,e-1/3)),r]},m(h,function(t,r){var s=r.props,o=r.cache,a=r.to,c=r.from;u.fn[t]=function(t){if(a&&!this[o]&&(this[o]=a(this._rgba)),t===i)return this[o].slice();var r,l=e.type(t),h="array"===l||"object"===l?t:arguments,d=this[o].slice();return m(s,function(t,e){var i=h["object"===l?t:e.idx];null==i&&(i=d[e.idx]),d[e.idx]=n(i,e)}),c?(r=u(c(d)),r[o]=d,r):u(d)},m(s,function(i,n){u.fn[i]||(u.fn[i]=function(r){var s,o=e.type(r),a="alpha"===i?this._hsla?"hsla":"rgba":t,c=this[a](),u=c[n.idx];return"undefined"===o?u:("function"===o&&(r=r.call(this,u),o=e.type(r)),null==r&&n.empty?this:("string"===o&&(s=l.exec(r),s&&(r=u+parseFloat(s[2])*("+"===s[1]?1:-1))),c[n.idx]=r,this[a](c)))})})}),m(a,function(t,i){e.cssHooks[i]={set:function(t,n){var s,o,a="";if("string"!==e.type(n)||(s=r(n))){if(n=u(s||n),!p.rgba&&1!==n._rgba[3]){for(o="backgroundColor"===i?t.parentNode:t;(""===a||"transparent"===a)&&o&&o.style;)try{a=e.css(o,"backgroundColor"),o=o.parentNode}catch(t){}n=n.blend(a&&"transparent"!==a?a:"_default")}n=n.toRgbaString()}try{t.style[i]=n}catch(t){}}},e.fx.step[i]=function(t){t.colorInit||(t.start=u(t.elem,i),t.end=u(t.end),t.colorInit=!0),e.cssHooks[i].set(t.elem,t.start.transition(t.end,t.pos))}}),e.cssHooks.borderColor={expand:function(t){var e={};return m(["Top","Right","Bottom","Left"],function(i,n){e["border"+n+"Color"]=t}),e}},o=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function i(){var e,i,n=this.ownerDocument.defaultView?this.ownerDocument.defaultView.getComputedStyle(this,null):this.currentStyle,r={};if(n&&n.length&&n[0]&&n[n[0]])for(i=n.length;i--;)e=n[i],"string"==typeof n[e]&&(r[t.camelCase(e)]=n[e]);else for(e in n)"string"==typeof n[e]&&(r[e]=n[e]);return r}function n(e,i){var n,r,o={};for(n in i)r=i[n],e[n]!==r&&(s[n]||!t.fx.step[n]&&isNaN(parseFloat(r))||(o[n]=r));return o}var r=["add","remove","toggle"],s={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};t.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(e,i){t.fx.step[i]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(jQuery.style(t.elem,i,t.end),t.setAttr=!0)}}),t.effects.animateClass=function(e,s,o,a){var l=t.speed(s,o,a);return this.queue(function(){var s,o=t(this),a=o.attr("class")||"",c=l.children?o.find("*").andSelf():o;c=c.map(function(){var e=t(this);return{el:e,start:i.call(this)}}),s=function(){t.each(r,function(t,i){e[i]&&o[i+"Class"](e[i])})},s(),c=c.map(function(){return this.end=i.call(this.el[0]),this.diff=n(this.start,this.end),this}),o.attr("class",a),c=c.map(function(){var e=this,i=t.Deferred(),n=jQuery.extend({},l,{queue:!1,complete:function(){i.resolve(e)}});return this.el.animate(this.diff,n),i.promise()}),t.when.apply(t,c.get()).done(function(){s(),t.each(arguments,function(){var e=this.el;t.each(this.diff,function(t){e.css(t,"")})}),l.complete.call(o[0])})})},t.fn.extend({_addClass:t.fn.addClass,addClass:function(e,i,n,r){return i?t.effects.animateClass.call(this,{add:e},i,n,r):this._addClass(e)},_removeClass:t.fn.removeClass,removeClass:function(e,i,n,r){return i?t.effects.animateClass.call(this,{remove:e},i,n,r):this._removeClass(e)},_toggleClass:t.fn.toggleClass,toggleClass:function(i,n,r,s,o){return"boolean"==typeof n||n===e?r?t.effects.animateClass.call(this,n?{add:i}:{remove:i},r,s,o):this._toggleClass(i,n):t.effects.animateClass.call(this,{toggle:i},n,r,s)},switchClass:function(e,i,n,r,s){return t.effects.animateClass.call(this,{add:i,remove:e},n,r,s)}})}(),function(){function r(e,i,n,r){return t.isPlainObject(e)&&(i=e,e=e.effect),e={effect:e},null==i&&(i={}),t.isFunction(i)&&(r=i,n=null,i={}),("number"==typeof i||t.fx.speeds[i])&&(r=n,n=i,i={}),t.isFunction(n)&&(r=n,n=null),i&&t.extend(e,i),n=n||i.duration,e.duration=t.fx.off?0:"number"==typeof n?n:n in t.fx.speeds?t.fx.speeds[n]:t.fx.speeds._default,e.complete=r||i.complete,e}function s(e){return!(e&&"number"!=typeof e&&!t.fx.speeds[e])||"string"==typeof e&&!t.effects.effect[e]&&(!i||!t.effects[e])}t.extend(t.effects,{version:"1.9.2",save:function(t,e){for(var i=0;i<e.length;i++)null!==e[i]&&t.data(n+e[i],t[0].style[e[i]])},restore:function(t,i){var r,s;for(s=0;s<i.length;s++)null!==i[s]&&(r=t.data(n+i[s]),r===e&&(r=""),t.css(i[s],r))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},getBaseline:function(t,e){var i,n;switch(t[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=t[0]/e.height}switch(t[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=t[1]/e.width}return{x:n,y:i}},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var i={width:e.outerWidth(!0),height:e.outerHeight(!0),float:e.css("float")},n=t("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),r={width:e.width(),height:e.height()},s=document.activeElement;try{s.id}catch(t){s=document.body}return e.wrap(n),(e[0]===s||t.contains(e[0],s))&&t(s).focus(),n=e.parent(),"static"===e.css("position")?(n.css({position:"relative"}),e.css({position:"relative"})):(t.extend(i,{position:e.css("position"),zIndex:e.css("z-index")}),t.each(["top","left","bottom","right"],function(t,n){i[n]=e.css(n),isNaN(parseInt(i[n],10))&&(i[n]="auto")}),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),e.css(r),n.css(i).show()},removeWrapper:function(e){var i=document.activeElement;return e.parent().is(".ui-effects-wrapper")&&(e.parent().replaceWith(e),(e[0]===i||t.contains(e[0],i))&&t(i).focus()),e},setTransition:function(e,i,n,r){return r=r||{},t.each(i,function(t,i){var s=e.cssUnit(i);s[0]>0&&(r[i]=s[0]*n+s[1])}),r}}),t.fn.extend({effect:function(){function e(e){function i(){t.isFunction(s)&&s.call(r[0]),t.isFunction(e)&&e()}var r=t(this),s=n.complete,o=n.mode;(r.is(":hidden")?"hide"===o:"show"===o)?i():a.call(r[0],n,i)}var n=r.apply(this,arguments),s=n.mode,o=n.queue,a=t.effects.effect[n.effect],l=!a&&i&&t.effects[n.effect];return t.fx.off||!a&&!l?s?this[s](n.duration,n.complete):this.each(function(){n.complete&&n.complete.call(this)}):a?o===!1?this.each(e):this.queue(o||"fx",e):l.call(this,{options:n,duration:n.duration,callback:n.complete,mode:n.mode})},_show:t.fn.show,show:function(t){if(s(t))return this._show.apply(this,arguments);var e=r.apply(this,arguments);return e.mode="show",this.effect.call(this,e)},_hide:t.fn.hide,hide:function(t){if(s(t))return this._hide.apply(this,arguments);var e=r.apply(this,arguments);return e.mode="hide",this.effect.call(this,e)},__toggle:t.fn.toggle,toggle:function(e){if(s(e)||"boolean"==typeof e||t.isFunction(e))return this.__toggle.apply(this,arguments);var i=r.apply(this,arguments);return i.mode="toggle",this.effect.call(this,i)},cssUnit:function(e){var i=this.css(e),n=[];return t.each(["em","px","%","pt"],function(t,e){i.indexOf(e)>0&&(n=[parseFloat(i),e])}),n}})}(),function(){var e={};t.each(["Quad","Cubic","Quart","Quint","Expo"],function(t,i){e[i]=function(e){return Math.pow(e,t+2)}}),t.extend(e,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,i=4;t<((e=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*e-2)/22-t,2)}}),t.each(e,function(e,i){t.easing["easeIn"+e]=i,t.easing["easeOut"+e]=function(t){return 1-i(1-t)},t.easing["easeInOut"+e]=function(t){return t<.5?i(2*t)/2:1-i(t*-2+2)/2}})}()}(jQuery),function(t,e){var i=/up|down|vertical/,n=/up|left|vertical|horizontal/;t.effects.effect.blind=function(e,r){var s,o,a,l=t(this),c=["position","top","bottom","left","right","height","width"],u=t.effects.setMode(l,e.mode||"hide"),h=e.direction||"up",d=i.test(h),p=d?"height":"width",f=d?"top":"left",m=n.test(h),g={},v="show"===u;l.parent().is(".ui-effects-wrapper")?t.effects.save(l.parent(),c):t.effects.save(l,c),l.show(),s=t.effects.createWrapper(l).css({overflow:"hidden"}),o=s[p](),a=parseFloat(s.css(f))||0,g[p]=v?o:0,m||(l.css(d?"bottom":"right",0).css(d?"top":"left","auto").css({position:"absolute"}),g[f]=v?a:o+a),v&&(s.css(p,0),m||s.css(f,a+o)),s.animate(g,{duration:e.duration,easing:e.easing,queue:!1,complete:function(){"hide"===u&&l.hide(),t.effects.restore(l,c),t.effects.removeWrapper(l),r()}})}}(jQuery),function(t,e){t.effects.effect.bounce=function(e,i){var n,r,s,o=t(this),a=["position","top","bottom","left","right","height","width"],l=t.effects.setMode(o,e.mode||"effect"),c="hide"===l,u="show"===l,h=e.direction||"up",d=e.distance,p=e.times||5,f=2*p+(u||c?1:0),m=e.duration/f,g=e.easing,v="up"===h||"down"===h?"top":"left",M="up"===h||"left"===h,b=o.queue(),Y=b.length;for((u||c)&&a.push("opacity"),t.effects.save(o,a),o.show(),t.effects.createWrapper(o),d||(d=o["top"===v?"outerHeight":"outerWidth"]()/3),u&&(s={opacity:1},s[v]=0,o.css("opacity",0).css(v,M?2*-d:2*d).animate(s,m,g)),c&&(d/=Math.pow(2,p-1)),s={},s[v]=0,n=0;n<p;n++)r={},r[v]=(M?"-=":"+=")+d,o.animate(r,m,g).animate(s,m,g),d=c?2*d:d/2;c&&(r={opacity:0},r[v]=(M?"-=":"+=")+d,o.animate(r,m,g)),o.queue(function(){c&&o.hide(),t.effects.restore(o,a),t.effects.removeWrapper(o),i()}),Y>1&&b.splice.apply(b,[1,0].concat(b.splice(Y,f+1))),o.dequeue()}}(jQuery),function(t,e){t.effects.effect.clip=function(e,i){var n,r,s,o=t(this),a=["position","top","bottom","left","right","height","width"],l=t.effects.setMode(o,e.mode||"hide"),c="show"===l,u=e.direction||"vertical",h="vertical"===u,d=h?"height":"width",p=h?"top":"left",f={};t.effects.save(o,a),o.show(),n=t.effects.createWrapper(o).css({overflow:"hidden"}),r="IMG"===o[0].tagName?n:o,s=r[d](),c&&(r.css(d,0),r.css(p,s/2)),f[d]=c?s:0,f[p]=c?0:s/2,r.animate(f,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){c||o.hide(),t.effects.restore(o,a),t.effects.removeWrapper(o),i()}})}}(jQuery),function(t,e){t.effects.effect.drop=function(e,i){var n,r=t(this),s=["position","top","bottom","left","right","opacity","height","width"],o=t.effects.setMode(r,e.mode||"hide"),a="show"===o,l=e.direction||"left",c="up"===l||"down"===l?"top":"left",u="up"===l||"left"===l?"pos":"neg",h={opacity:a?1:0};t.effects.save(r,s),r.show(),t.effects.createWrapper(r),n=e.distance||r["top"===c?"outerHeight":"outerWidth"](!0)/2,a&&r.css("opacity",0).css(c,"pos"===u?-n:n),h[c]=(a?"pos"===u?"+=":"-=":"pos"===u?"-=":"+=")+n,r.animate(h,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===o&&r.hide(),t.effects.restore(r,s),t.effects.removeWrapper(r),i()}})}}(jQuery),function(t,e){t.effects.effect.explode=function(e,i){function n(){b.push(this),b.length===h*d&&r()}function r(){p.css({visibility:"visible"}),t(b).remove(),m||p.hide(),i()}var s,o,a,l,c,u,h=e.pieces?Math.round(Math.sqrt(e.pieces)):3,d=h,p=t(this),f=t.effects.setMode(p,e.mode||"hide"),m="show"===f,g=p.show().css("visibility","hidden").offset(),v=Math.ceil(p.outerWidth()/d),M=Math.ceil(p.outerHeight()/h),b=[];for(s=0;s<h;s++)for(l=g.top+s*M,u=s-(h-1)/2,o=0;o<d;o++)a=g.left+o*v,c=o-(d-1)/2,p.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-o*v,top:-s*M}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:v,height:M,left:a+(m?c*v:0),top:l+(m?u*M:0),opacity:m?0:1}).animate({left:a+(m?0:c*v),top:l+(m?0:u*M),opacity:m?1:0},e.duration||500,e.easing,n)}}(jQuery),function(t,e){t.effects.effect.fade=function(e,i){var n=t(this),r=t.effects.setMode(n,e.mode||"toggle");n.animate({opacity:r},{queue:!1,duration:e.duration,easing:e.easing,complete:i})}}(jQuery),function(t,e){t.effects.effect.fold=function(e,i){var n,r,s=t(this),o=["position","top","bottom","left","right","height","width"],a=t.effects.setMode(s,e.mode||"hide"),l="show"===a,c="hide"===a,u=e.size||15,h=/([0-9]+)%/.exec(u),d=!!e.horizFirst,p=l!==d,f=p?["width","height"]:["height","width"],m=e.duration/2,g={},v={};t.effects.save(s,o),s.show(),n=t.effects.createWrapper(s).css({overflow:"hidden"}),r=p?[n.width(),n.height()]:[n.height(),n.width()],h&&(u=parseInt(h[1],10)/100*r[c?0:1]),l&&n.css(d?{height:0,width:u}:{height:u,width:0}),g[f[0]]=l?r[0]:u,v[f[1]]=l?r[1]:0,n.animate(g,m,e.easing).animate(v,m,e.easing,function(){c&&s.hide(),t.effects.restore(s,o),t.effects.removeWrapper(s),i()})}}(jQuery),function(t,e){t.effects.effect.highlight=function(e,i){var n=t(this),r=["backgroundImage","backgroundColor","opacity"],s=t.effects.setMode(n,e.mode||"show"),o={backgroundColor:n.css("backgroundColor")};"hide"===s&&(o.opacity=0),t.effects.save(n,r),n.show().css({backgroundImage:"none",backgroundColor:e.color||"#ffff99"}).animate(o,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===s&&n.hide(),t.effects.restore(n,r),i()}})}}(jQuery),function(t,e){t.effects.effect.pulsate=function(e,i){var n,r=t(this),s=t.effects.setMode(r,e.mode||"show"),o="show"===s,a="hide"===s,l=o||"hide"===s,c=2*(e.times||5)+(l?1:0),u=e.duration/c,h=0,d=r.queue(),p=d.length;for(!o&&r.is(":visible")||(r.css("opacity",0).show(),h=1),n=1;n<c;n++)r.animate({opacity:h},u,e.easing),h=1-h;r.animate({opacity:h},u,e.easing),r.queue(function(){a&&r.hide(),i()}),p>1&&d.splice.apply(d,[1,0].concat(d.splice(p,c+1))),r.dequeue()}}(jQuery),function(t,e){t.effects.effect.puff=function(e,i){var n=t(this),r=t.effects.setMode(n,e.mode||"hide"),s="hide"===r,o=parseInt(e.percent,10)||150,a=o/100,l={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()};t.extend(e,{effect:"scale",queue:!1,fade:!0,mode:r,complete:i,percent:s?o:100,from:s?l:{height:l.height*a,width:l.width*a,outerHeight:l.outerHeight*a,outerWidth:l.outerWidth*a}}),n.effect(e)},t.effects.effect.scale=function(e,i){var n=t(this),r=t.extend(!0,{},e),s=t.effects.setMode(n,e.mode||"effect"),o=parseInt(e.percent,10)||(0===parseInt(e.percent,10)?0:"hide"===s?0:100),a=e.direction||"both",l=e.origin,c={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()},u={y:"horizontal"!==a?o/100:1,x:"vertical"!==a?o/100:1};r.effect="size",r.queue=!1,r.complete=i,"effect"!==s&&(r.origin=l||["middle","center"],r.restore=!0),r.from=e.from||("show"===s?{height:0,width:0,outerHeight:0,outerWidth:0}:c),r.to={height:c.height*u.y,width:c.width*u.x,outerHeight:c.outerHeight*u.y,outerWidth:c.outerWidth*u.x},r.fade&&("show"===s&&(r.from.opacity=0,r.to.opacity=1),"hide"===s&&(r.from.opacity=1,r.to.opacity=0)),n.effect(r)},t.effects.effect.size=function(e,i){var n,r,s,o=t(this),a=["position","top","bottom","left","right","width","height","overflow","opacity"],l=["position","top","bottom","left","right","overflow","opacity"],c=["width","height","overflow"],u=["fontSize"],h=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],d=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=t.effects.setMode(o,e.mode||"effect"),f=e.restore||"effect"!==p,m=e.scale||"both",g=e.origin||["middle","center"],v=o.css("position"),M=f?a:l,b={height:0,width:0,outerHeight:0,outerWidth:0};"show"===p&&o.show(),n={height:o.height(),width:o.width(),outerHeight:o.outerHeight(),outerWidth:o.outerWidth()},"toggle"===e.mode&&"show"===p?(o.from=e.to||b,o.to=e.from||n):(o.from=e.from||("show"===p?b:n),o.to=e.to||("hide"===p?b:n)),s={from:{y:o.from.height/n.height,x:o.from.width/n.width},to:{y:o.to.height/n.height,x:o.to.width/n.width}},"box"!==m&&"both"!==m||(s.from.y!==s.to.y&&(M=M.concat(h),o.from=t.effects.setTransition(o,h,s.from.y,o.from),o.to=t.effects.setTransition(o,h,s.to.y,o.to)),s.from.x!==s.to.x&&(M=M.concat(d),o.from=t.effects.setTransition(o,d,s.from.x,o.from),o.to=t.effects.setTransition(o,d,s.to.x,o.to))),"content"!==m&&"both"!==m||s.from.y!==s.to.y&&(M=M.concat(u).concat(c),o.from=t.effects.setTransition(o,u,s.from.y,o.from),o.to=t.effects.setTransition(o,u,s.to.y,o.to)),t.effects.save(o,M),o.show(),t.effects.createWrapper(o),o.css("overflow","hidden").css(o.from),g&&(r=t.effects.getBaseline(g,n),o.from.top=(n.outerHeight-o.outerHeight())*r.y,o.from.left=(n.outerWidth-o.outerWidth())*r.x,o.to.top=(n.outerHeight-o.to.outerHeight)*r.y,o.to.left=(n.outerWidth-o.to.outerWidth)*r.x),o.css(o.from),"content"!==m&&"both"!==m||(h=h.concat(["marginTop","marginBottom"]).concat(u),d=d.concat(["marginLeft","marginRight"]),c=a.concat(h).concat(d),o.find("*[width]").each(function(){var i=t(this),n={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};f&&t.effects.save(i,c),i.from={height:n.height*s.from.y,width:n.width*s.from.x,outerHeight:n.outerHeight*s.from.y,outerWidth:n.outerWidth*s.from.x},i.to={height:n.height*s.to.y,width:n.width*s.to.x,outerHeight:n.height*s.to.y,outerWidth:n.width*s.to.x},s.from.y!==s.to.y&&(i.from=t.effects.setTransition(i,h,s.from.y,i.from),i.to=t.effects.setTransition(i,h,s.to.y,i.to)),s.from.x!==s.to.x&&(i.from=t.effects.setTransition(i,d,s.from.x,i.from),i.to=t.effects.setTransition(i,d,s.to.x,i.to)),i.css(i.from),i.animate(i.to,e.duration,e.easing,function(){f&&t.effects.restore(i,c)})})),o.animate(o.to,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){0===o.to.opacity&&o.css("opacity",o.from.opacity),"hide"===p&&o.hide(),t.effects.restore(o,M),f||("static"===v?o.css({position:"relative",top:o.to.top,left:o.to.left}):t.each(["top","left"],function(t,e){o.css(e,function(e,i){var n=parseInt(i,10),r=t?o.to.left:o.to.top;return"auto"===i?r+"px":n+r+"px"})})),t.effects.removeWrapper(o),i()}})}}(jQuery),function(t,e){t.effects.effect.shake=function(e,i){var n,r=t(this),s=["position","top","bottom","left","right","height","width"],o=t.effects.setMode(r,e.mode||"effect"),a=e.direction||"left",l=e.distance||20,c=e.times||3,u=2*c+1,h=Math.round(e.duration/u),d="up"===a||"down"===a?"top":"left",p="up"===a||"left"===a,f={},m={},g={},v=r.queue(),M=v.length;for(t.effects.save(r,s),r.show(),t.effects.createWrapper(r),f[d]=(p?"-=":"+=")+l,m[d]=(p?"+=":"-=")+2*l,g[d]=(p?"-=":"+=")+2*l,r.animate(f,h,e.easing),n=1;n<c;n++)r.animate(m,h,e.easing).animate(g,h,e.easing);r.animate(m,h,e.easing).animate(f,h/2,e.easing).queue(function(){"hide"===o&&r.hide(),t.effects.restore(r,s),t.effects.removeWrapper(r),i()}),M>1&&v.splice.apply(v,[1,0].concat(v.splice(M,u+1))),r.dequeue()}}(jQuery),function(t,e){t.effects.effect.slide=function(e,i){var n,r=t(this),s=["position","top","bottom","left","right","width","height"],o=t.effects.setMode(r,e.mode||"show"),a="show"===o,l=e.direction||"left",c="up"===l||"down"===l?"top":"left",u="up"===l||"left"===l,h={};t.effects.save(r,s),r.show(),n=e.distance||r["top"===c?"outerHeight":"outerWidth"](!0),t.effects.createWrapper(r).css({overflow:"hidden"}),a&&r.css(c,u?isNaN(n)?"-"+n:-n:n),h[c]=(a?u?"+=":"-=":u?"-=":"+=")+n,r.animate(h,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===o&&r.hide(),t.effects.restore(r,s),t.effects.removeWrapper(r),i()}})}}(jQuery),function(t,e){t.effects.effect.transfer=function(e,i){var n=t(this),r=t(e.to),s="fixed"===r.css("position"),o=t("body"),a=s?o.scrollTop():0,l=s?o.scrollLeft():0,c=r.offset(),u={top:c.top-a,left:c.left-l,height:r.innerHeight(),width:r.innerWidth()},h=n.offset(),d=t('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(e.className).css({top:h.top-a,left:h.left-l,height:n.innerHeight(),width:n.innerWidth(),position:s?"fixed":"absolute"}).animate(u,e.duration,e.easing,function(){d.remove(),i()})}}(jQuery),function(t,e){var i=!1;t.widget("ui.menu",{version:"1.9.2",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,t.proxy(function(t){this.options.disabled&&t.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(t){t.preventDefault()},"click .ui-state-disabled > a":function(t){t.preventDefault()},"click .ui-menu-item:has(a)":function(e){var n=t(e.target).closest(".ui-menu-item");!i&&n.not(".ui-state-disabled").length&&(i=!0,this.select(e),n.has(".ui-menu").length?this.expand(e):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(e){var i=t(e.currentTarget);i.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(e,i)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var i=this.active||this.element.children(".ui-menu-item").eq(0);e||this.focus(t,i)},blur:function(e){this._delay(function(){t.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(e)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){t(e.target).closest(".ui-menu").length||this.collapseAll(e),i=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").andSelf().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var e=t(this);e.data("ui-menu-submenu-carat")&&e.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(e){function i(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var n,r,s,o,a,l=!0;switch(e.keyCode){case t.ui.keyCode.PAGE_UP:this.previousPage(e);break;case t.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case t.ui.keyCode.HOME:this._move("first","first",e);break;case t.ui.keyCode.END:this._move("last","last",e);break;case t.ui.keyCode.UP:this.previous(e);break;case t.ui.keyCode.DOWN:this.next(e);break;case t.ui.keyCode.LEFT:this.collapse(e);break;case t.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case t.ui.keyCode.ENTER:case t.ui.keyCode.SPACE:this._activate(e);break;case t.ui.keyCode.ESCAPE:this.collapse(e);break;default:l=!1,r=this.previousFilter||"",s=String.fromCharCode(e.keyCode),o=!1,clearTimeout(this.filterTimer),s===r?o=!0:s=r+s,a=new RegExp("^"+i(s),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return a.test(t(this).children("a").text())}),n=o&&n.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):n,n.length||(s=String.fromCharCode(e.keyCode),a=new RegExp("^"+i(s),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return a.test(t(this).children("a").text())})),n.length?(this.focus(e,n),n.length>1?(this.previousFilter=s,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}l&&e.preventDefault()},_activate:function(t){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(t):this.select(t))},refresh:function(){var e,i=this.options.icons.submenu,n=this.element.find(this.options.menus);n.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var e=t(this),n=e.prev("a"),r=t("<span>").addClass("ui-menu-icon ui-icon "+i).data("ui-menu-submenu-carat",!0);n.attr("aria-haspopup","true").prepend(r),e.attr("aria-labelledby",n.attr("id"))}),e=n.add(this.element),e.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),e.children(":not(.ui-menu-item)").each(function(){var e=t(this);/[^\-\s]/.test(e.text())||e.addClass("ui-widget-content ui-menu-divider")}),e.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!t.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},focus:function(t,e){var i,n;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),n=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",n.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=e.children(".ui-menu"),i.length&&/^mouse/.test(t.type)&&this._startOpening(i),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(e){var i,n,r,s,o,a;this._hasScroll()&&(i=parseFloat(t.css(this.activeMenu[0],"borderTopWidth"))||0,n=parseFloat(t.css(this.activeMenu[0],"paddingTop"))||0,r=e.offset().top-this.activeMenu.offset().top-i-n,s=this.activeMenu.scrollTop(),o=this.activeMenu.height(),a=e.height(),r<0?this.activeMenu.scrollTop(s+r):r+a>o&&this.activeMenu.scrollTop(s+r-o+a))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",t,{item:this.active}))},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(t)},this.delay))},_open:function(e){var i=t.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true"),e.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(e,i){clearTimeout(this.timer),this.timer=this._delay(function(){var n=i?this.element:t(e&&e.target).closest(this.element.find(".ui-menu"));n.length||(n=this.element),this._close(n),this.blur(e),this.activeMenu=n},this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(t,e)}))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,i){var n;this.active&&(n="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),n&&n.length&&this.active||(n=this.activeMenu.children(".ui-menu-item")[e]()),this.focus(i,n)},nextPage:function(e){var i,n,r;return this.active?void(this.isLastItem()||(this._hasScroll()?(n=this.active.offset().top,r=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=t(this),i.offset().top-n-r<0}),this.focus(e,i)):this.focus(e,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]()))):void this.next(e)},previousPage:function(e){var i,n,r;return this.active?void(this.isFirstItem()||(this._hasScroll()?(n=this.active.offset().top,r=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=t(this),i.offset().top-n+r>0}),this.focus(e,i)):this.focus(e,this.activeMenu.children(".ui-menu-item").first()))):void this.next(e)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||t(e.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,!0),this._trigger("select",e,i)}})}(jQuery),function(t,e){t.widget("ui.progressbar",{version:"1.9.2",options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=t("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(t){return t===e?this._value():(this._setOption("value",t),this)},_setOption:function(t,e){"value"===t&&(this.options.value=e,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),this._super(t,e)},_value:function(){var t=this.options.value;return"number"!=typeof t&&(t=0),Math.min(this.options.max,Math.max(this.min,t))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var t=this.value(),e=this._percentage();this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),this.valueDiv.toggle(t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(e.toFixed(0)+"%"),this.element.attr("aria-valuenow",t)}})}(jQuery),function(t,e){t.widget("ui.resizable",t.ui.mouse,{version:"1.9.2",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var e=this,i=this.options;if(this.element.addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:i.helper||i.ghost||i.animate?i.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(t('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=i.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var n=this.handles.split(",");this.handles={};for(var r=0;r<n.length;r++){var s=t.trim(n[r]),o="ui-resizable-"+s,a=t('<div class="ui-resizable-handle '+o+'"></div>');a.css({zIndex:i.zIndex}),"se"==s&&a.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(a)}}this._renderAxis=function(e){e=e||this.element;for(var i in this.handles){if(this.handles[i].constructor==String&&(this.handles[i]=t(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var n=t(this.handles[i],this.element),r=0;r=/sw|ne|nw|se|n|s/.test(i)?n.outerHeight():n.outerWidth();var s=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join("");e.css(s,r),this._proportionallyResize()}t(this.handles[i]).length}},this._renderAxis(this.element),this._handles=t(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!e.resizing){if(this.className)var t=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);e.axis=t&&t[1]?t[1]:"se"}}),i.autoHide&&(this._handles.hide(),t(this.element).addClass("ui-resizable-autohide").mouseenter(function(){i.disabled||(t(this).removeClass("ui-resizable-autohide"),e._handles.show())}).mouseleave(function(){i.disabled||e.resizing||(t(this).addClass("ui-resizable-autohide"),e._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e=function(e){t(e).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){e(this.element);var i=this.element;this.originalElement.css({position:i.css("position"),width:i.outerWidth(),height:i.outerHeight(),top:i.css("top"),left:i.css("left")}).insertAfter(i),i.remove()}return this.originalElement.css("resize",this.originalResizeStyle),e(this.originalElement),this},_mouseCapture:function(e){var i=!1;for(var n in this.handles)t(this.handles[n])[0]==e.target&&(i=!0);return!this.options.disabled&&i},_mouseStart:function(e){var n=this.options,r=this.element.position(),s=this.element;this.resizing=!0,this.documentScroll={top:t(document).scrollTop(),left:t(document).scrollLeft()},(s.is(".ui-draggable")||/absolute/.test(s.css("position")))&&s.css({position:"absolute",top:r.top,left:r.left}),this._renderProxy();var o=i(this.helper.css("left")),a=i(this.helper.css("top"));n.containment&&(o+=t(n.containment).scrollLeft()||0,a+=t(n.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:o,top:a},this.size=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.originalSize=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.originalPosition={left:o,top:a},this.sizeDiff={width:s.outerWidth()-s.width(),height:s.outerHeight()-s.height()},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof n.aspectRatio?n.aspectRatio:this.originalSize.width/this.originalSize.height||1;var l=t(".ui-resizable-"+this.axis).css("cursor");return t("body").css("cursor","auto"==l?this.axis+"-resize":l),s.addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(t){var e=this.helper,i=(this.options,this.originalMousePosition),n=this.axis,r=t.pageX-i.left||0,s=t.pageY-i.top||0,o=this._change[n];if(!o)return!1;var a=o.apply(this,[t,r,s]);return this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(a=this._updateRatio(a,t)),a=this._respectSize(a,t),this._propagate("resize",t),e.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(a),this._trigger("resize",t,this.ui()),!1},_mouseStop:function(e){this.resizing=!1;var i=this.options,n=this;if(this._helper){var r=this._proportionallyResizeElements,s=r.length&&/textarea/i.test(r[0].nodeName),o=s&&t.ui.hasScroll(r[0],"left")?0:n.sizeDiff.height,a=s?0:n.sizeDiff.width,l={width:n.helper.width()-a,height:n.helper.height()-o},c=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,u=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;i.animate||this.element.css(t.extend(l,{top:u,left:c})),n.helper.height(n.size.height),n.helper.width(n.size.width),this._helper&&!i.animate&&this._proportionallyResize()}return t("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(t){var e,i,r,s,o,a=this.options;o={minWidth:n(a.minWidth)?a.minWidth:0,maxWidth:n(a.maxWidth)?a.maxWidth:1/0,minHeight:n(a.minHeight)?a.minHeight:0,maxHeight:n(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||t)&&(e=o.minHeight*this.aspectRatio,r=o.minWidth/this.aspectRatio,i=o.maxHeight*this.aspectRatio,s=o.maxWidth/this.aspectRatio,e>o.minWidth&&(o.minWidth=e),r>o.minHeight&&(o.minHeight=r),i<o.maxWidth&&(o.maxWidth=i),s<o.maxHeight&&(o.maxHeight=s)),this._vBoundaries=o},_updateCache:function(t){this.options;this.offset=this.helper.offset(),n(t.left)&&(this.position.left=t.left),n(t.top)&&(this.position.top=t.top),n(t.height)&&(this.size.height=t.height),n(t.width)&&(this.size.width=t.width)},_updateRatio:function(t,e){var i=(this.options,this.position),r=this.size,s=this.axis;return n(t.height)?t.width=t.height*this.aspectRatio:n(t.width)&&(t.height=t.width/this.aspectRatio),"sw"==s&&(t.left=i.left+(r.width-t.width),t.top=null),"nw"==s&&(t.top=i.top+(r.height-t.height),t.left=i.left+(r.width-t.width)),t},_respectSize:function(t,e){var i=(this.helper,this._vBoundaries),r=(this._aspectRatio||e.shiftKey,this.axis),s=n(t.width)&&i.maxWidth&&i.maxWidth<t.width,o=n(t.height)&&i.maxHeight&&i.maxHeight<t.height,a=n(t.width)&&i.minWidth&&i.minWidth>t.width,l=n(t.height)&&i.minHeight&&i.minHeight>t.height;a&&(t.width=i.minWidth),l&&(t.height=i.minHeight),s&&(t.width=i.maxWidth),o&&(t.height=i.maxHeight);var c=this.originalPosition.left+this.originalSize.width,u=this.position.top+this.size.height,h=/sw|nw|w/.test(r),d=/nw|ne|n/.test(r);a&&h&&(t.left=c-i.minWidth),s&&h&&(t.left=c-i.maxWidth),l&&d&&(t.top=u-i.minHeight),o&&d&&(t.top=u-i.maxHeight);var p=!t.width&&!t.height;return p&&!t.left&&t.top?t.top=null:p&&!t.top&&t.left&&(t.left=null),t},_proportionallyResize:function(){this.options;if(this._proportionallyResizeElements.length)for(var e=this.helper||this.element,i=0;i<this._proportionallyResizeElements.length;i++){var n=this._proportionallyResizeElements[i];if(!this.borderDif){var r=[n.css("borderTopWidth"),n.css("borderRightWidth"),n.css("borderBottomWidth"),n.css("borderLeftWidth")],s=[n.css("paddingTop"),n.css("paddingRight"),n.css("paddingBottom"),n.css("paddingLeft")];this.borderDif=t.map(r,function(t,e){var i=parseInt(t,10)||0,n=parseInt(s[e],10)||0;return i+n})}n.css({height:e.height()-this.borderDif[0]-this.borderDif[2]||0,width:e.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var e=this.element,i=this.options;if(this.elementOffset=e.offset(),this._helper){this.helper=this.helper||t('<div style="overflow:hidden;"></div>');var n=t.ui.ie6?1:0,r=t.ui.ie6?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+r,height:this.element.outerHeight()+r,position:"absolute",left:this.elementOffset.left-n+"px",top:this.elementOffset.top-n+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(t,e,i){return{width:this.originalSize.width+e}},w:function(t,e,i){var n=(this.options,this.originalSize),r=this.originalPosition;return{left:r.left+e,width:n.width-e}},n:function(t,e,i){var n=(this.options,this.originalSize),r=this.originalPosition;return{top:r.top+i,height:n.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,n){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,n]))},sw:function(e,i,n){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,n]))},ne:function(e,i,n){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,n]))},nw:function(e,i,n){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,n]))}},_propagate:function(e,i){t.ui.plugin.call(this,e,[i,this.ui()]),"resize"!=e&&this._trigger(e,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","alsoResize",{start:function(e,i){var n=t(this).data("resizable"),r=n.options,s=function(e){t(e).each(function(){var e=t(this);e.data("resizable-alsoresize",{width:parseInt(e.width(),10),height:parseInt(e.height(),10),left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10)})})};"object"!=typeof r.alsoResize||r.alsoResize.parentNode?s(r.alsoResize):r.alsoResize.length?(r.alsoResize=r.alsoResize[0],s(r.alsoResize)):t.each(r.alsoResize,function(t){s(t)})},resize:function(e,i){var n=t(this).data("resizable"),r=n.options,s=n.originalSize,o=n.originalPosition,a={height:n.size.height-s.height||0,width:n.size.width-s.width||0,top:n.position.top-o.top||0,left:n.position.left-o.left||0},l=function(e,n){t(e).each(function(){var e=t(this),r=t(this).data("resizable-alsoresize"),s={},o=n&&n.length?n:e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(o,function(t,e){var i=(r[e]||0)+(a[e]||0);i&&i>=0&&(s[e]=i||null)}),e.css(s)})};"object"!=typeof r.alsoResize||r.alsoResize.nodeType?l(r.alsoResize):t.each(r.alsoResize,function(t,e){l(t,e)})},stop:function(e,i){t(this).removeData("resizable-alsoresize")}}),t.ui.plugin.add("resizable","animate",{stop:function(e,i){var n=t(this).data("resizable"),r=n.options,s=n._proportionallyResizeElements,o=s.length&&/textarea/i.test(s[0].nodeName),a=o&&t.ui.hasScroll(s[0],"left")?0:n.sizeDiff.height,l=o?0:n.sizeDiff.width,c={width:n.size.width-l,height:n.size.height-a},u=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,h=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;n.element.animate(t.extend(c,h&&u?{top:h,left:u}:{}),{duration:r.animateDuration,easing:r.animateEasing,step:function(){var i={width:parseInt(n.element.css("width"),10),height:parseInt(n.element.css("height"),10),top:parseInt(n.element.css("top"),10),left:parseInt(n.element.css("left"),10)};s&&s.length&&t(s[0]).css({width:i.width,height:i.height}),n._updateCache(i),n._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(e,n){var r=t(this).data("resizable"),s=r.options,o=r.element,a=s.containment,l=a instanceof t?a.get(0):/parent/.test(a)?o.parent().get(0):a;if(l)if(r.containerElement=t(l),/document/.test(a)||a==document)r.containerOffset={left:0,top:0},r.containerPosition={left:0,top:0},r.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight};else{var c=t(l),u=[];t(["Top","Right","Left","Bottom"]).each(function(t,e){u[t]=i(c.css("padding"+e))}),r.containerOffset=c.offset(),r.containerPosition=c.position(),r.containerSize={height:c.innerHeight()-u[3],width:c.innerWidth()-u[1]};var h=r.containerOffset,d=r.containerSize.height,p=r.containerSize.width,f=t.ui.hasScroll(l,"left")?l.scrollWidth:p,m=t.ui.hasScroll(l)?l.scrollHeight:d;r.parentData={element:l,left:h.left,top:h.top,width:f,height:m}}},resize:function(e,i){var n=t(this).data("resizable"),r=n.options,s=(n.containerSize,n.containerOffset),o=(n.size,n.position),a=n._aspectRatio||e.shiftKey,l={top:0,left:0},c=n.containerElement;c[0]!=document&&/static/.test(c.css("position"))&&(l=s),o.left<(n._helper?s.left:0)&&(n.size.width=n.size.width+(n._helper?n.position.left-s.left:n.position.left-l.left),a&&(n.size.height=n.size.width/n.aspectRatio),n.position.left=r.helper?s.left:0),o.top<(n._helper?s.top:0)&&(n.size.height=n.size.height+(n._helper?n.position.top-s.top:n.position.top),a&&(n.size.width=n.size.height*n.aspectRatio),n.position.top=n._helper?s.top:0),n.offset.left=n.parentData.left+n.position.left,n.offset.top=n.parentData.top+n.position.top;var u=Math.abs((n._helper?n.offset.left-l.left:n.offset.left-l.left)+n.sizeDiff.width),h=Math.abs((n._helper?n.offset.top-l.top:n.offset.top-s.top)+n.sizeDiff.height),d=n.containerElement.get(0)==n.element.parent().get(0),p=/relative|absolute/.test(n.containerElement.css("position"));d&&p&&(u-=n.parentData.left),u+n.size.width>=n.parentData.width&&(n.size.width=n.parentData.width-u,a&&(n.size.height=n.size.width/n.aspectRatio)),h+n.size.height>=n.parentData.height&&(n.size.height=n.parentData.height-h,a&&(n.size.width=n.size.height*n.aspectRatio))},stop:function(e,i){var n=t(this).data("resizable"),r=n.options,s=(n.position,n.containerOffset),o=n.containerPosition,a=n.containerElement,l=t(n.helper),c=l.offset(),u=l.outerWidth()-n.sizeDiff.width,h=l.outerHeight()-n.sizeDiff.height;n._helper&&!r.animate&&/relative/.test(a.css("position"))&&t(this).css({left:c.left-o.left-s.left,width:u,height:h}),n._helper&&!r.animate&&/static/.test(a.css("position"))&&t(this).css({left:c.left-o.left-s.left,width:u,height:h})}}),t.ui.plugin.add("resizable","ghost",{start:function(e,i){var n=t(this).data("resizable"),r=n.options,s=n.size;n.ghost=n.originalElement.clone(),n.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof r.ghost?r.ghost:""),n.ghost.appendTo(n.helper)},resize:function(e,i){var n=t(this).data("resizable");n.options;n.ghost&&n.ghost.css({position:"relative",height:n.size.height,width:n.size.width})},stop:function(e,i){var n=t(this).data("resizable");n.options;n.ghost&&n.helper&&n.helper.get(0).removeChild(n.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(e,i){var n=t(this).data("resizable"),r=n.options,s=n.size,o=n.originalSize,a=n.originalPosition,l=n.axis;r._aspectRatio||e.shiftKey;r.grid="number"==typeof r.grid?[r.grid,r.grid]:r.grid;var c=Math.round((s.width-o.width)/(r.grid[0]||1))*(r.grid[0]||1),u=Math.round((s.height-o.height)/(r.grid[1]||1))*(r.grid[1]||1);/^(se|s|e)$/.test(l)?(n.size.width=o.width+c,n.size.height=o.height+u):/^(ne)$/.test(l)?(n.size.width=o.width+c,n.size.height=o.height+u,n.position.top=a.top-u):/^(sw)$/.test(l)?(n.size.width=o.width+c,n.size.height=o.height+u,n.position.left=a.left-c):(n.size.width=o.width+c,n.size.height=o.height+u,n.position.top=a.top-u,n.position.left=a.left-c)}});var i=function(t){return parseInt(t,10)||0},n=function(t){return!isNaN(parseInt(t,10))}}(jQuery),function(t,e){t.widget("ui.selectable",t.ui.mouse,{version:"1.9.2",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var e=this;this.element.addClass("ui-selectable"),this.dragged=!1;var i;this.refresh=function(){i=t(e.options.filter,e.element[0]),i.addClass("ui-selectee"),i.each(function(){var e=t(this),i=e.offset();t.data(this,"selectable-item",{element:this,$element:e,left:i.left,top:i.top,right:i.left+e.outerWidth(),bottom:i.top+e.outerHeight(),startselected:!1,selected:e.hasClass("ui-selected"),selecting:e.hasClass("ui-selecting"),unselecting:e.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=i.addClass("ui-selectee"),this._mouseInit(),this.helper=t("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(e){var i=this;if(this.opos=[e.pageX,e.pageY],!this.options.disabled){var n=this.options;this.selectees=t(n.filter,this.element[0]),this._trigger("start",e),t(n.appendTo).append(this.helper),this.helper.css({left:e.clientX,top:e.clientY,width:0,height:0}),n.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var n=t.data(this,"selectable-item");n.startselected=!0,e.metaKey||e.ctrlKey||(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,i._trigger("unselecting",e,{unselecting:n.element}))}),t(e.target).parents().andSelf().each(function(){var n=t.data(this,"selectable-item");if(n){var r=!e.metaKey&&!e.ctrlKey||!n.$element.hasClass("ui-selected");return n.$element.removeClass(r?"ui-unselecting":"ui-selected").addClass(r?"ui-selecting":"ui-unselecting"),n.unselecting=!r,n.selecting=r,n.selected=r,r?i._trigger("selecting",e,{selecting:n.element}):i._trigger("unselecting",e,{unselecting:n.element}),!1}})}},_mouseDrag:function(e){var i=this;if(this.dragged=!0,!this.options.disabled){var n=this.options,r=this.opos[0],s=this.opos[1],o=e.pageX,a=e.pageY;if(r>o){var l=o;o=r,r=l}if(s>a){var l=a;a=s,s=l}return this.helper.css({left:r,top:s,width:o-r,height:a-s}),this.selectees.each(function(){var l=t.data(this,"selectable-item");if(l&&l.element!=i.element[0]){var c=!1;"touch"==n.tolerance?c=!(l.left>o||l.right<r||l.top>a||l.bottom<s):"fit"==n.tolerance&&(c=l.left>r&&l.right<o&&l.top>s&&l.bottom<a),c?(l.selected&&(l.$element.removeClass("ui-selected"),l.selected=!1),l.unselecting&&(l.$element.removeClass("ui-unselecting"),l.unselecting=!1),l.selecting||(l.$element.addClass("ui-selecting"),l.selecting=!0,i._trigger("selecting",e,{selecting:l.element}))):(l.selecting&&((e.metaKey||e.ctrlKey)&&l.startselected?(l.$element.removeClass("ui-selecting"),l.selecting=!1,l.$element.addClass("ui-selected"),l.selected=!0):(l.$element.removeClass("ui-selecting"),l.selecting=!1,l.startselected&&(l.$element.addClass("ui-unselecting"),l.unselecting=!0),i._trigger("unselecting",e,{unselecting:l.element}))),l.selected&&(e.metaKey||e.ctrlKey||l.startselected||(l.$element.removeClass("ui-selected"),l.selected=!1,l.$element.addClass("ui-unselecting"),l.unselecting=!0,i._trigger("unselecting",e,{unselecting:l.element}))))}}),!1}},_mouseStop:function(e){var i=this;this.dragged=!1;this.options;return t(".ui-unselecting",this.element[0]).each(function(){var n=t.data(this,"selectable-item");n.$element.removeClass("ui-unselecting"),n.unselecting=!1,n.startselected=!1,i._trigger("unselected",e,{unselected:n.element})}),t(".ui-selecting",this.element[0]).each(function(){var n=t.data(this,"selectable-item");n.$element.removeClass("ui-selecting").addClass("ui-selected"),n.selecting=!1,n.selected=!0,n.startselected=!0,i._trigger("selected",e,{selected:n.element})}),this._trigger("stop",e),this.helper.remove(),!1}})}(jQuery),function(t,e){var i=5;t.widget("ui.slider",t.ui.mouse,{version:"1.9.2",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var e,n,r=this.options,s=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),o="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",a=[];for(this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(r.disabled?" ui-slider-disabled ui-disabled":"")),this.range=t([]),r.range&&(r.range===!0&&(r.values||(r.values=[this._valueMin(),this._valueMin()]),r.values.length&&2!==r.values.length&&(r.values=[r.values[0],r.values[0]])),this.range=t("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===r.range||"max"===r.range?" ui-slider-range-"+r.range:""))),n=r.values&&r.values.length||1,e=s.length;e<n;e++)a.push(o);this.handles=s.add(t(a.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(t){t.preventDefault()}).mouseenter(function(){r.disabled||t(this).addClass("ui-state-hover")}).mouseleave(function(){t(this).removeClass("ui-state-hover")}).focus(function(){r.disabled?t(this).blur():(t(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),t(this).addClass("ui-state-focus"))}).blur(function(){t(this).removeClass("ui-state-focus")}),this.handles.each(function(e){t(this).data("ui-slider-handle-index",e)}),this._on(this.handles,{keydown:function(e){var n,r,s,o,a=t(e.target).data("ui-slider-handle-index");switch(e.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(e.preventDefault(),!this._keySliding&&(this._keySliding=!0,t(e.target).addClass("ui-state-active"),n=this._start(e,a),n===!1))return}switch(o=this.options.step,r=s=this.options.values&&this.options.values.length?this.values(a):this.value(),e.keyCode){case t.ui.keyCode.HOME:s=this._valueMin();break;case t.ui.keyCode.END:s=this._valueMax();break;case t.ui.keyCode.PAGE_UP:s=this._trimAlignValue(r+(this._valueMax()-this._valueMin())/i);break;case t.ui.keyCode.PAGE_DOWN:s=this._trimAlignValue(r-(this._valueMax()-this._valueMin())/i);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(r===this._valueMax())return;s=this._trimAlignValue(r+o);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(r===this._valueMin())return;s=this._trimAlignValue(r-o)}this._slide(e,a,s)},keyup:function(e){var i=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,i),this._change(e,i),t(e.target).removeClass("ui-state-active"))}}),this._refreshValue(),this._animateOff=!1},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(e){var i,n,r,s,o,a,l,c,u=this,h=this.options;return!h.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(i),r=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var i=Math.abs(n-u.values(e));r>i&&(r=i,s=t(this),o=e)}),h.range===!0&&this.values(1)===h.min&&(o+=1,s=t(this.handles[o])),a=this._start(e,o),a!==!1&&(this._mouseSliding=!0,this._handleIndex=o,s.addClass("ui-state-active").focus(),l=s.offset(),c=!t(e.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=c?{left:0,top:0}:{left:e.pageX-l.left-s.width()/2,top:e.pageY-l.top-s.height()/2-(parseInt(s.css("borderTopWidth"),10)||0)-(parseInt(s.css("borderBottomWidth"),10)||0)+(parseInt(s.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,o,n),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,i),!1},_mouseStop:function(t){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,i,n,r,s;return"horizontal"===this.orientation?(e=this.elementSize.width,i=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,i=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),n=i/e,n>1&&(n=1),n<0&&(n=0),"vertical"===this.orientation&&(n=1-n),r=this._valueMax()-this._valueMin(),s=this._valueMin()+n*r,this._trimAlignValue(s)},_start:function(t,e){var i={handle:this.handles[e],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("start",t,i)},_slide:function(t,e,i){var n,r,s;this.options.values&&this.options.values.length?(n=this.values(e?0:1),2===this.options.values.length&&this.options.range===!0&&(0===e&&i>n||1===e&&i<n)&&(i=n),i!==this.values(e)&&(r=this.values(),r[e]=i,s=this._trigger("slide",t,{handle:this.handles[e],value:i,values:r}),n=this.values(e?0:1),s!==!1&&this.values(e,i,!0))):i!==this.value()&&(s=this._trigger("slide",t,{handle:this.handles[e],value:i}),s!==!1&&this.value(i))},_stop:function(t,e){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("stop",t,i)},_change:function(t,e){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("change",t,i)}},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),void this._change(null,0)):this._value()},values:function(e,i){var n,r,s;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(i),this._refreshValue(),void this._change(null,e);if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(e):this.value();for(n=this.options.values,r=arguments[0],s=0;s<n.length;s+=1)n[s]=this._trimAlignValue(r[s]),this._change(null,s);this._refreshValue()},_setOption:function(e,i){var n,r=0;switch(t.isArray(this.options.values)&&(r=this.options.values.length),t.Widget.prototype._setOption.apply(this,arguments),e){case"disabled":i?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.prop("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.prop("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=0;n<r;n+=1)this._change(null,n);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1}},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,i,n;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);for(i=this.options.values.slice(),n=0;n<i.length;n+=1)i[n]=this._trimAlignValue(i[n]);return i},_trimAlignValue:function(t){if(t<=this._valueMin())return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,i=(t-this._valueMin())%e,n=t-i;return 2*Math.abs(i)>=e&&(n+=i>0?e:-e),parseFloat(n.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var e,i,n,r,s,o=this.options.range,a=this.options,l=this,c=!this._animateOff&&a.animate,u={};this.options.values&&this.options.values.length?this.handles.each(function(n){i=(l.values(n)-l._valueMin())/(l._valueMax()-l._valueMin())*100,u["horizontal"===l.orientation?"left":"bottom"]=i+"%",t(this).stop(1,1)[c?"animate":"css"](u,a.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===n&&l.range.stop(1,1)[c?"animate":"css"]({left:i+"%"},a.animate),1===n&&l.range[c?"animate":"css"]({width:i-e+"%"},{queue:!1,duration:a.animate})):(0===n&&l.range.stop(1,1)[c?"animate":"css"]({bottom:i+"%"},a.animate),1===n&&l.range[c?"animate":"css"]({height:i-e+"%"},{queue:!1,duration:a.animate}))),e=i}):(n=this.value(),r=this._valueMin(),s=this._valueMax(),i=s!==r?(n-r)/(s-r)*100:0,u["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[c?"animate":"css"](u,a.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:i+"%"},a.animate),"max"===o&&"horizontal"===this.orientation&&this.range[c?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:a.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:i+"%"},a.animate),"max"===o&&"vertical"===this.orientation&&this.range[c?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:a.animate}))}})}(jQuery),function(t,e){t.widget("ui.sortable",t.ui.mouse,{version:"1.9.2",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var t=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=!!this.items.length&&("x"===t.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display"))),this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_setOption:function(e,i){"disabled"===e?(this.options[e]=i,this.widget().toggleClass("ui-sortable-disabled",!!i)):t.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(e,i){var n=this;if(this.reverting)return!1;if(this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(e);var r=null;t(e.target).parents().each(function(){if(t.data(this,n.widgetName+"-item")==n)return r=t(this),!1});if(t.data(e.target,n.widgetName+"-item")==n&&(r=t(e.target)),!r)return!1;if(this.options.handle&&!i){var s=!1;if(t(this.options.handle,r).find("*").andSelf().each(function(){this==e.target&&(s=!0)}),!s)return!1}return this.currentItem=r,this._removeCurrentsFromItems(),!0},_mouseStart:function(e,i,n){var r=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,r.cursorAt&&this._adjustOffsetFromHelper(r.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),r.containment&&this._setContainment(),r.cursor&&(t("body").css("cursor")&&(this._storedCursor=t("body").css("cursor")),t("body").css("cursor",r.cursor)),r.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",r.opacity)),r.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",r.zIndex)),this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(var s=this.containers.length-1;s>=0;s--)this.containers[s]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!r.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){if(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll){var i=this.options,n=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<i.scrollSensitivity?this.scrollParent[0].scrollTop=n=this.scrollParent[0].scrollTop+i.scrollSpeed:e.pageY-this.overflowOffset.top<i.scrollSensitivity&&(this.scrollParent[0].scrollTop=n=this.scrollParent[0].scrollTop-i.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<i.scrollSensitivity?this.scrollParent[0].scrollLeft=n=this.scrollParent[0].scrollLeft+i.scrollSpeed:e.pageX-this.overflowOffset.left<i.scrollSensitivity&&(this.scrollParent[0].scrollLeft=n=this.scrollParent[0].scrollLeft-i.scrollSpeed)):(e.pageY-t(document).scrollTop()<i.scrollSensitivity?n=t(document).scrollTop(t(document).scrollTop()-i.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<i.scrollSensitivity&&(n=t(document).scrollTop(t(document).scrollTop()+i.scrollSpeed)),e.pageX-t(document).scrollLeft()<i.scrollSensitivity?n=t(document).scrollLeft(t(document).scrollLeft()-i.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<i.scrollSensitivity&&(n=t(document).scrollLeft(t(document).scrollLeft()+i.scrollSpeed))),n!==!1&&t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)}this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(var r=this.items.length-1;r>=0;r--){var s=this.items[r],o=s.item[0],a=this._intersectsWithPointer(s);if(a&&s.instance===this.currentContainer&&!(o==this.currentItem[0]||this.placeholder[1==a?"next":"prev"]()[0]==o||t.contains(this.placeholder[0],o)||"semi-dynamic"==this.options.type&&t.contains(this.element[0],o))){if(this.direction=1==a?"down":"up","pointer"!=this.options.tolerance&&!this._intersectsWithSides(s))break;this._rearrange(e,s),this._trigger("change",e,this._uiHash());break}}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,i){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var n=this,r=this.placeholder.offset();this.reverting=!0,t(this.helper).animate({left:r.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:r.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){n._clear(e)})}else this._clear(e,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var i=this._getItemsAsjQuery(e&&e.connected),n=[];return e=e||{},t(i).each(function(){var i=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[-=_](.+)/);i&&n.push((e.key||i[1]+"[]")+"="+(e.key&&e.expression?i[1]:i[2]))}),!n.length&&e.key&&n.push(e.key+"="),n.join("&")},toArray:function(e){var i=this._getItemsAsjQuery(e&&e.connected),n=[];return e=e||{},i.each(function(){n.push(t(e.item||this).attr(e.attribute||"id")||"")}),n},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,n=this.positionAbs.top,r=n+this.helperProportions.height,s=t.left,o=s+t.width,a=t.top,l=a+t.height,c=this.offset.click.top,u=this.offset.click.left,h=n+c>a&&n+c<l&&e+u>s&&e+u<o;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?h:s<e+this.helperProportions.width/2&&i-this.helperProportions.width/2<o&&a<n+this.helperProportions.height/2&&r-this.helperProportions.height/2<l},_intersectsWithPointer:function(e){var i="x"===this.options.axis||t.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),n="y"===this.options.axis||t.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),r=i&&n,s=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return!!r&&(this.floating?o&&"right"==o||"down"==s?2:1:s&&("down"==s?2:1))},_intersectsWithSides:function(e){var i=t.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),n=t.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),r=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?"right"==s&&n||"left"==s&&!n:r&&("down"==r&&i||"up"==r&&!i)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!=t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!=t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor==String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){var i=[],n=[],r=this._connectWith();if(r&&e)for(var s=r.length-1;s>=0;s--)for(var o=t(r[s]),a=o.length-1;a>=0;a--){var l=t.data(o[a],this.widgetName);l&&l!=this&&!l.options.disabled&&n.push([t.isFunction(l.options.items)?l.options.items.call(l.element):t(l.options.items,l.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),l])}n.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var s=n.length-1;s>=0;s--)n[s][0].each(function(){i.push(this)});return t(i)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var i=0;i<e.length;i++)if(e[i]==t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var i=this.items,n=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],r=this._connectWith();if(r&&this.ready)for(var s=r.length-1;s>=0;s--)for(var o=t(r[s]),a=o.length-1;a>=0;a--){var l=t.data(o[a],this.widgetName);l&&l!=this&&!l.options.disabled&&(n.push([t.isFunction(l.options.items)?l.options.items.call(l.element[0],e,{item:this.currentItem}):t(l.options.items,l.element),l]),this.containers.push(l))}for(var s=n.length-1;s>=0;s--)for(var c=n[s][1],u=n[s][0],a=0,h=u.length;a<h;a++){var d=t(u[a]);d.data(this.widgetName+"-item",c),i.push({item:d,instance:c,width:0,height:0,left:0,top:0})}},refreshPositions:function(e){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var i=this.items.length-1;i>=0;i--){var n=this.items[i];if(n.instance==this.currentContainer||!this.currentContainer||n.item[0]==this.currentItem[0]){var r=this.options.toleranceElement?t(this.options.toleranceElement,n.item):n.item;e||(n.width=r.outerWidth(),n.height=r.outerHeight());var s=r.offset();n.left=s.left,n.top=s.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var i=this.containers.length-1;i>=0;i--){var s=this.containers[i].element.offset();this.containers[i].containerCache.left=s.left,this.containers[i].containerCache.top=s.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight()}return this},_createPlaceholder:function(e){e=e||this;var i=e.options;if(!i.placeholder||i.placeholder.constructor==String){var n=i.placeholder;i.placeholder={element:function(){var i=t(document.createElement(e.currentItem[0].nodeName)).addClass(n||e.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return n||(i.style.visibility="hidden"),i},update:function(t,r){n&&!i.forcePlaceholderSize||(r.height()||r.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),r.width()||r.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}}e.placeholder=t(i.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),i.placeholder.update(e,e.placeholder)},_contactContainers:function(e){for(var i=null,n=null,r=this.containers.length-1;r>=0;r--)if(!t.contains(this.currentItem[0],this.containers[r].element[0]))if(this._intersectsWith(this.containers[r].containerCache)){if(i&&t.contains(this.containers[r].element[0],i.element[0]))continue;i=this.containers[r],n=r}else this.containers[r].containerCache.over&&(this.containers[r]._trigger("out",e,this._uiHash(this)),this.containers[r].containerCache.over=0);if(i)if(1===this.containers.length)this.containers[n]._trigger("over",e,this._uiHash(this)),this.containers[n].containerCache.over=1;else{for(var s=1e4,o=null,a=this.containers[n].floating?"left":"top",l=this.containers[n].floating?"width":"height",c=this.positionAbs[a]+this.offset.click[a],u=this.items.length-1;u>=0;u--)if(t.contains(this.containers[n].element[0],this.items[u].item[0])&&this.items[u].item[0]!=this.currentItem[0]){var h=this.items[u].item.offset()[a],d=!1;Math.abs(h-c)>Math.abs(h+this.items[u][l]-c)&&(d=!0,h+=this.items[u][l]),Math.abs(h-c)<s&&(s=Math.abs(h-c),o=this.items[u],this.direction=d?"up":"down")}if(!o&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[n],o?this._rearrange(e,o,null,!0):this._rearrange(e,null,this.containers[n].element,!0),this._trigger("change",e,this._uiHash()),this.containers[n]._trigger("change",e,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[n]._trigger("over",e,this._uiHash(this)),this.containers[n].containerCache.over=1}},_createHelper:function(e){var i=this.options,n=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e,this.currentItem])):"clone"==i.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||t("parent"!=i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(""==n[0].style.width||i.forceHelperSize)&&n.width(this.currentItem.width()),(""==n[0].style.height||i.forceHelperSize)&&n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e=this.options;if("parent"==e.containment&&(e.containment=this.helper[0].parentNode),"document"!=e.containment&&"window"!=e.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,t("document"==e.containment?document:window).width()-this.helperProportions.width-this.margins.left,(t("document"==e.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),!/^(document|window|parent)$/.test(e.containment)){var i=t(e.containment)[0],n=t(e.containment).offset(),r="hidden"!=t(i).css("overflow");this.containment=[n.left+(parseInt(t(i).css("borderLeftWidth"),10)||0)+(parseInt(t(i).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(t(i).css("borderTopWidth"),10)||0)+(parseInt(t(i).css("paddingTop"),10)||0)-this.margins.top,n.left+(r?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(t(i).css("borderLeftWidth"),10)||0)-(parseInt(t(i).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(r?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(t(i).css("borderTopWidth"),10)||0)-(parseInt(t(i).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(e,i){i||(i=this.position);var n="absolute"==e?1:-1,r=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),s=/(html|body)/i.test(r[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():s?0:r.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():s?0:r.scrollLeft())*n}},_generatePosition:function(e){var i=this.options,n="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(n[0].tagName);"relative"!=this.cssPosition||this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset());var s=e.pageX,o=e.pageY;if(this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),i.grid)){var a=this.originalPageY+Math.round((o-this.originalPageY)/i.grid[1])*i.grid[1];o=this.containment&&(a-this.offset.click.top<this.containment[1]||a-this.offset.click.top>this.containment[3])?a-this.offset.click.top<this.containment[1]?a+i.grid[1]:a-i.grid[1]:a;var l=this.originalPageX+Math.round((s-this.originalPageX)/i.grid[0])*i.grid[0];s=this.containment&&(l-this.offset.click.left<this.containment[0]||l-this.offset.click.left>this.containment[2])?l-this.offset.click.left<this.containment[0]?l+i.grid[0]:l-i.grid[0]:l}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():r?0:n.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():r?0:n.scrollLeft())}},_rearrange:function(t,e,i,n){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var r=this.counter;this._delay(function(){r==this.counter&&this.refreshPositions(!n)})},_clear:function(e,i){this.reverting=!1;var n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]==this.currentItem[0]){for(var r in this._storedCSS)"auto"!=this._storedCSS[r]&&"static"!=this._storedCSS[r]||(this._storedCSS[r]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!i&&n.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev==this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent==this.currentItem.parent()[0]||i||n.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(i||(n.push(function(t){this._trigger("remove",t,this._uiHash())}),n.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer))));for(var r=this.containers.length-1;r>=0;r--)i||n.push(function(t){return function(e){t._trigger("deactivate",e,this._uiHash(this))}}.call(this,this.containers[r])),this.containers[r].containerCache.over&&(n.push(function(t){return function(e){t._trigger("out",e,this._uiHash(this))}}.call(this,this.containers[r])),this.containers[r].containerCache.over=0);if(this._storedCursor&&t("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!i){this._trigger("beforeStop",e,this._uiHash());for(var r=0;r<n.length;r++)n[r].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!1}if(i||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null,!i){for(var r=0;r<n.length;r++)n[r].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){t.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(e){var i=e||this;return{helper:i.helper,placeholder:i.placeholder||t([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:e?e.element:null}}})}(jQuery),function(t){function e(t){return function(){var e=this.element.val();t.apply(this,arguments),this._refresh(),e!==this.element.val()&&this._trigger("change")}}t.widget("ui.spinner",{version:"1.9.2",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var e={},i=this.element;return t.each(["min","max","step"],function(t,n){var r=i.attr(n);void 0!==r&&r.length&&(e[n]=r)}),e},_events:{keydown:function(t){this._start(t)&&this._keydown(t)&&t.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(t){return this.cancelBlur?void delete this.cancelBlur:(this._refresh(),void(this.previous!==this.element.val()&&this._trigger("change",t)))},mousewheel:function(t,e){if(e){if(!this.spinning&&!this._start(t))return!1;this._spin((e>0?1:-1)*this.options.step,t),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(t)},100),t.preventDefault()}},"mousedown .ui-spinner-button":function(e){function i(){var t=this.element[0]===this.document[0].activeElement;t||(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n}))}var n;n=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),e.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,i.call(this)}),this._start(e)!==!1&&this._repeat(null,t(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(e){if(t(e.currentTarget).hasClass("ui-state-active"))return this._start(e)!==!1&&void this._repeat(null,t(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e)},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var t=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=t.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*t.height())&&t.height()>0&&t.height(t.height()),this.options.disabled&&this.disable()},_keydown:function(e){var i=this.options,n=t.ui.keyCode;switch(e.keyCode){case n.UP:return this._repeat(null,1,e),!0;case n.DOWN:return this._repeat(null,-1,e),!0;case n.PAGE_UP:return this._repeat(null,i.page,e),!0;case n.PAGE_DOWN:return this._repeat(null,-i.page,e),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(t){return!(!this.spinning&&this._trigger("start",t)===!1)&&(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(t,e,i){t=t||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,e,i)},t),this._spin(e*this.options.step,i)},_spin:function(t,e){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+t*this._increment(this.counter)),this.spinning&&this._trigger("spin",e,{value:i})===!1||(this._value(i),this.counter++)},_increment:function(e){var i=this.options.incremental;return i?t.isFunction(i)?i(e):Math.floor(e*e*e/5e4-e*e/500+17*e/200+1):1},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=t.toString(),i=e.indexOf(".");return i===-1?0:e.length-i-1},_adjustValue:function(t){var e,i,n=this.options;return e=null!==n.min?n.min:0,i=t-e,i=Math.round(i/n.step)*n.step,t=e+i,t=parseFloat(t.toFixed(this._precision())),null!==n.max&&t>n.max?n.max:null!==n.min&&t<n.min?n.min:t},_stop:function(t){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",t))},_setOption:function(t,e){if("culture"===t||"numberFormat"===t){var i=this._parse(this.element.val());return this.options[t]=e,void this.element.val(this._format(i))}"max"!==t&&"min"!==t&&"step"!==t||"string"==typeof e&&(e=this._parse(e)),this._super(t,e),"disabled"===t&&(e?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:e(function(t){this._super(t),this._value(this.element.val())}),_parse:function(t){return"string"==typeof t&&""!==t&&(t=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(t,10,this.options.culture):+t),""===t||isNaN(t)?null:t},_format:function(t){return""===t?"":window.Globalize&&this.options.numberFormat?Globalize.format(t,this.options.numberFormat,this.options.culture):t},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(t,e){var i;""!==t&&(i=this._parse(t),null!==i&&(e||(i=this._adjustValue(i)),t=this._format(i))),this.element.val(t),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:e(function(t){this._stepUp(t)}),_stepUp:function(t){this._spin((t||1)*this.options.step)},stepDown:e(function(t){this._stepDown(t)}),_stepDown:function(t){this._spin((t||1)*-this.options.step)},pageUp:e(function(t){this._stepUp((t||1)*this.options.page)}),pageDown:e(function(t){this._stepDown((t||1)*this.options.page)}),value:function(t){return arguments.length?void e(this._value).call(this,t):this._parse(this.element.val())},widget:function(){return this.uiSpinner}})}(jQuery),function(t,e){function i(){return++r}function n(t){return t.hash.length>1&&t.href.replace(s,"")===location.href.replace(s,"").replace(/\s/g,"%20")}var r=0,s=/#.*$/;t.widget("ui.tabs",{version:"1.9.2",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var e=this,i=this.options,n=i.active,r=location.hash.substring(1);this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",i.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(e){t(this).is(".ui-state-disabled")&&e.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){t(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),null===n&&(r&&this.tabs.each(function(e,i){if(t(i).attr("aria-controls")===r)return n=e,!1}),null===n&&(n=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null!==n&&n!==-1||(n=!!this.tabs.length&&0)),n!==!1&&(n=this.tabs.index(this.tabs.eq(n)),n===-1&&(n=!i.collapsible&&0)),i.active=n,!i.collapsible&&i.active===!1&&this.anchors.length&&(i.active=0),t.isArray(i.disabled)&&(i.disabled=t.unique(i.disabled.concat(t.map(this.tabs.filter(".ui-state-disabled"),function(t){return e.tabs.index(t)}))).sort()),this.options.active!==!1&&this.anchors.length?this.active=this._findActive(this.options.active):this.active=t(),this._refresh(),this.active.length&&this.load(i.active)},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):t()}},_tabKeydown:function(e){var i=t(this.document[0].activeElement).closest("li"),n=this.tabs.index(i),r=!0;if(!this._handlePageNav(e)){switch(e.keyCode){case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:n++;break;case t.ui.keyCode.UP:case t.ui.keyCode.LEFT:r=!1,n--;break;case t.ui.keyCode.END:n=this.anchors.length-1;break;case t.ui.keyCode.HOME:n=0;break;case t.ui.keyCode.SPACE:return e.preventDefault(),clearTimeout(this.activating),void this._activate(n);case t.ui.keyCode.ENTER:return e.preventDefault(),clearTimeout(this.activating),void this._activate(n!==this.options.active&&n);default:return}e.preventDefault(),clearTimeout(this.activating),n=this._focusNextTab(n,r),e.ctrlKey||(i.attr("aria-selected","false"),this.tabs.eq(n).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",n)},this.delay))}},_panelKeydown:function(e){this._handlePageNav(e)||e.ctrlKey&&e.keyCode===t.ui.keyCode.UP&&(e.preventDefault(),this.active.focus())},_handlePageNav:function(e){return e.altKey&&e.keyCode===t.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):e.altKey&&e.keyCode===t.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(e,i){function n(){return e>r&&(e=0),e<0&&(e=r),e}for(var r=this.tabs.length-1;t.inArray(n(),this.options.disabled)!==-1;)e=i?e+1:e-1;return e},_focusNextTab:function(t,e){return t=this._findNextTab(t,e),this.tabs.eq(t).focus(),t},_setOption:function(t,e){return"active"===t?void this._activate(e):"disabled"===t?void this._setupDisabled(e):(this._super(t,e),"collapsible"===t&&(this.element.toggleClass("ui-tabs-collapsible",e),e||this.options.active!==!1||this._activate(0)),"event"===t&&this._setupEvents(e),void("heightStyle"===t&&this._setupHeightStyle(e)))},_tabId:function(t){return t.attr("aria-controls")||"ui-tabs-"+i()},_sanitizeSelector:function(t){return t?t.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var e=this.options,i=this.tablist.children(":has(a[href])");e.disabled=t.map(i.filter(".ui-state-disabled"),function(t){return i.index(t)}),this._processTabs(),e.active!==!1&&this.anchors.length?this.active.length&&!t.contains(this.tablist[0],this.active[0])?this.tabs.length===e.disabled.length?(e.active=!1,this.active=t()):this._activate(this._findNextTab(Math.max(0,e.active-1),!1)):e.active=this.tabs.index(this.active):(e.active=!1,this.active=t()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var e=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return t("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=t(),this.anchors.each(function(i,r){var s,o,a,l=t(r).uniqueId().attr("id"),c=t(r).closest("li"),u=c.attr("aria-controls");n(r)?(s=r.hash,o=e.element.find(e._sanitizeSelector(s))):(a=e._tabId(c),s="#"+a,o=e.element.find(s),o.length||(o=e._createPanel(a),o.insertAfter(e.panels[i-1]||e.tablist)),o.attr("aria-live","polite")),o.length&&(e.panels=e.panels.add(o)),u&&c.data("ui-tabs-aria-controls",u),c.attr({"aria-controls":s.substring(1),"aria-labelledby":l}),o.attr("aria-labelledby",l)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(e){return t("<div>").attr("id",e).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(e){t.isArray(e)&&(e.length?e.length===this.anchors.length&&(e=!0):e=!1);for(var i,n=0;i=this.tabs[n];n++)e===!0||t.inArray(n,e)!==-1?t(i).addClass("ui-state-disabled").attr("aria-disabled","true"):t(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=e},_setupEvents:function(e){var i={click:function(t){t.preventDefault()}};e&&t.each(e.split(" "),function(t,e){i[e]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(e){var i,n,r=this.element.parent();"fill"===e?(t.support.minHeight||(n=r.css("overflow"),r.css("overflow","hidden")),i=r.height(),this.element.siblings(":visible").each(function(){var e=t(this),n=e.css("position");"absolute"!==n&&"fixed"!==n&&(i-=e.outerHeight(!0))}),n&&r.css("overflow",n),this.element.children().not(this.panels).each(function(){i-=t(this).outerHeight(!0)}),this.panels.each(function(){t(this).height(Math.max(0,i-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")):"auto"===e&&(i=0,this.panels.each(function(){i=Math.max(i,t(this).height("").height())}).height(i))},_eventHandler:function(e){var i=this.options,n=this.active,r=t(e.currentTarget),s=r.closest("li"),o=s[0]===n[0],a=o&&i.collapsible,l=a?t():this._getPanelForTab(s),c=n.length?this._getPanelForTab(n):t(),u={oldTab:n,oldPanel:c,newTab:a?t():s,newPanel:l};e.preventDefault(),s.hasClass("ui-state-disabled")||s.hasClass("ui-tabs-loading")||this.running||o&&!i.collapsible||this._trigger("beforeActivate",e,u)===!1||(i.active=!a&&this.tabs.index(s),this.active=o?t():s,this.xhr&&this.xhr.abort(),c.length||l.length||t.error("jQuery UI Tabs: Mismatching fragment identifier."),l.length&&this.load(this.tabs.index(s),e),this._toggle(e,u))},_toggle:function(e,i){function n(){s.running=!1,s._trigger("activate",e,i)}function r(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),o.length&&s.options.show?s._show(o,s.options.show,n):(o.show(),n())}var s=this,o=i.newPanel,a=i.oldPanel;this.running=!0,a.length&&this.options.hide?this._hide(a,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),r()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),a.hide(),r()),a.attr({"aria-expanded":"false","aria-hidden":"true"}),i.oldTab.attr("aria-selected","false"),o.length&&a.length?i.oldTab.attr("tabIndex",-1):o.length&&this.tabs.filter(function(){return 0===t(this).attr("tabIndex")}).attr("tabIndex",-1),o.attr({"aria-expanded":"true","aria-hidden":"false"}),i.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(e){var i,n=this._findActive(e);n[0]!==this.active[0]&&(n.length||(n=this.active),i=n.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:t.noop}))},_findActive:function(e){return e===!1?t():this.tabs.eq(e)},_getIndex:function(t){return"string"==typeof t&&(t=this.anchors.index(this.anchors.filter("[href$='"+t+"']"))),t},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeData("href.tabs").removeData("load.tabs").removeUniqueId(),this.tabs.add(this.panels).each(function(){t.data(this,"ui-tabs-destroy")?t(this).remove():t(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var e=t(this),i=e.data("ui-tabs-aria-controls");i?e.attr("aria-controls",i):e.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(i){var n=this.options.disabled;n!==!1&&(i===e?n=!1:(i=this._getIndex(i),n=t.isArray(n)?t.map(n,function(t){return t!==i?t:null}):t.map(this.tabs,function(t,e){return e!==i?e:null})),this._setupDisabled(n))},disable:function(i){var n=this.options.disabled;if(n!==!0){if(i===e)n=!0;else{if(i=this._getIndex(i),t.inArray(i,n)!==-1)return;n=t.isArray(n)?t.merge([i],n).sort():[i]}this._setupDisabled(n)}},load:function(e,i){e=this._getIndex(e);var r=this,s=this.tabs.eq(e),o=s.find(".ui-tabs-anchor"),a=this._getPanelForTab(s),l={tab:s,panel:a};n(o[0])||(this.xhr=t.ajax(this._ajaxSettings(o,i,l)),this.xhr&&"canceled"!==this.xhr.statusText&&(s.addClass("ui-tabs-loading"),a.attr("aria-busy","true"),this.xhr.success(function(t){setTimeout(function(){a.html(t),r._trigger("load",i,l)},1)}).complete(function(t,e){setTimeout(function(){"abort"===e&&r.panels.stop(!1,!0),s.removeClass("ui-tabs-loading"),a.removeAttr("aria-busy"),t===r.xhr&&delete r.xhr},1)})))},_ajaxSettings:function(e,i,n){var r=this;return{url:e.attr("href"),beforeSend:function(e,s){return r._trigger("beforeLoad",i,t.extend({jqXHR:e,ajaxSettings:s},n))}}},_getPanelForTab:function(e){var i=t(e).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}}),t.uiBackCompat!==!1&&(t.ui.tabs.prototype._ui=function(t,e){return{tab:t,panel:e,index:this.anchors.index(t)}},t.widget("ui.tabs",t.ui.tabs,{url:function(t,e){this.anchors.eq(t).attr("href",e)}}),t.widget("ui.tabs",t.ui.tabs,{options:{ajaxOptions:null,cache:!1},_create:function(){this._super();var e=this;this._on({tabsbeforeload:function(i,n){return t.data(n.tab[0],"cache.tabs")?void i.preventDefault():void n.jqXHR.success(function(){e.options.cache&&t.data(n.tab[0],"cache.tabs",!0)})}})},_ajaxSettings:function(e,i,n){var r=this.options.ajaxOptions;return t.extend({},r,{error:function(t,e){try{r.error(t,e,n.tab.closest("li").index(),n.tab[0])}catch(t){}}},this._superApply(arguments))},_setOption:function(t,e){"cache"===t&&e===!1&&this.anchors.removeData("cache.tabs"),this._super(t,e)},_destroy:function(){this.anchors.removeData("cache.tabs"),this._super()},url:function(t){this.anchors.eq(t).removeData("cache.tabs"),this._superApply(arguments)}}),t.widget("ui.tabs",t.ui.tabs,{abort:function(){this.xhr&&this.xhr.abort()}}),t.widget("ui.tabs",t.ui.tabs,{options:{spinner:"<em>Loading&#8230;</em>"},_create:function(){this._super(),this._on({tabsbeforeload:function(t,e){if(t.target===this.element[0]&&this.options.spinner){var i=e.tab.find("span"),n=i.html();i.html(this.options.spinner),e.jqXHR.complete(function(){i.html(n)})}}})}}),t.widget("ui.tabs",t.ui.tabs,{options:{enable:null,disable:null},enable:function(e){var i,n=this.options;(e&&n.disabled===!0||t.isArray(n.disabled)&&t.inArray(e,n.disabled)!==-1)&&(i=!0),this._superApply(arguments),i&&this._trigger("enable",null,this._ui(this.anchors[e],this.panels[e]))},disable:function(e){var i,n=this.options;(e&&n.disabled===!1||t.isArray(n.disabled)&&t.inArray(e,n.disabled)===-1)&&(i=!0),this._superApply(arguments),i&&this._trigger("disable",null,this._ui(this.anchors[e],this.panels[e]))}}),t.widget("ui.tabs",t.ui.tabs,{options:{add:null,remove:null,tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},add:function(i,n,r){r===e&&(r=this.anchors.length);var s,o,a=this.options,l=t(a.tabTemplate.replace(/#\{href\}/g,i).replace(/#\{label\}/g,n)),c=i.indexOf("#")?this._tabId(l):i.replace("#","");return l.addClass("ui-state-default ui-corner-top").data("ui-tabs-destroy",!0),l.attr("aria-controls",c),s=r>=this.tabs.length,o=this.element.find("#"+c),o.length||(o=this._createPanel(c),s?r>0?o.insertAfter(this.panels.eq(-1)):o.appendTo(this.element):o.insertBefore(this.panels[r])),o.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").hide(),s?l.appendTo(this.tablist):l.insertBefore(this.tabs[r]),a.disabled=t.map(a.disabled,function(t){return t>=r?++t:t}),this.refresh(),1===this.tabs.length&&a.active===!1&&this.option("active",0),this._trigger("add",null,this._ui(this.anchors[r],this.panels[r])),this},remove:function(e){e=this._getIndex(e);var i=this.options,n=this.tabs.eq(e).remove(),r=this._getPanelForTab(n).remove();return n.hasClass("ui-tabs-active")&&this.anchors.length>2&&this._activate(e+(e+1<this.anchors.length?1:-1)),i.disabled=t.map(t.grep(i.disabled,function(t){return t!==e}),function(t){return t>=e?--t:t}),this.refresh(),this._trigger("remove",null,this._ui(n.find("a")[0],r[0])),this}}),t.widget("ui.tabs",t.ui.tabs,{length:function(){return this.anchors.length}}),t.widget("ui.tabs",t.ui.tabs,{options:{idPrefix:"ui-tabs-"},_tabId:function(e){var n=e.is("li")?e.find("a[href]"):e;return n=n[0],t(n).closest("li").attr("aria-controls")||n.title&&n.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF\-]/g,"")||this.options.idPrefix+i()}}),t.widget("ui.tabs",t.ui.tabs,{options:{panelTemplate:"<div></div>"},_createPanel:function(e){return t(this.options.panelTemplate).attr("id",e).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)}}),t.widget("ui.tabs",t.ui.tabs,{_create:function(){var t=this.options;null===t.active&&t.selected!==e&&(t.active=t.selected!==-1&&t.selected),this._super(),t.selected=t.active,t.selected===!1&&(t.selected=-1)},_setOption:function(t,e){if("selected"!==t)return this._super(t,e);var i=this.options;this._super("active",e!==-1&&e),i.selected=i.active,i.selected===!1&&(i.selected=-1)},_eventHandler:function(){this._superApply(arguments),this.options.selected=this.options.active,this.options.selected===!1&&(this.options.selected=-1)}}),t.widget("ui.tabs",t.ui.tabs,{options:{show:null,select:null},_create:function(){this._super(),this.options.active!==!1&&this._trigger("show",null,this._ui(this.active.find(".ui-tabs-anchor")[0],this._getPanelForTab(this.active)[0]))},_trigger:function(t,e,i){var n,r,s=this._superApply(arguments);return!!s&&("beforeActivate"===t?(n=i.newTab.length?i.newTab:i.oldTab,r=i.newPanel.length?i.newPanel:i.oldPanel,s=this._super("select",e,{tab:n.find(".ui-tabs-anchor")[0],panel:r[0],index:n.closest("li").index()})):"activate"===t&&i.newTab.length&&(s=this._super("show",e,{tab:i.newTab.find(".ui-tabs-anchor")[0],panel:i.newPanel[0],index:i.newTab.closest("li").index()})),s)}}),t.widget("ui.tabs",t.ui.tabs,{select:function(t){if(t=this._getIndex(t),t===-1){if(!this.options.collapsible||this.options.selected===-1)return;t=this.options.selected}this.anchors.eq(t).trigger(this.options.event+this.eventNamespace)}}),function(){var e=0;t.widget("ui.tabs",t.ui.tabs,{options:{cookie:null},_create:function(){var t,e=this.options;null==e.active&&e.cookie&&(t=parseInt(this._cookie(),10),t===-1&&(t=!1),e.active=t),this._super()},_cookie:function(i){var n=[this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+ ++e)];return arguments.length&&(n.push(i===!1?-1:i),n.push(this.options.cookie)),t.cookie.apply(null,n)},_refresh:function(){this._super(),this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_eventHandler:function(){this._superApply(arguments),this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_destroy:function(){this._super(),this.options.cookie&&this._cookie(null,this.options.cookie)}})}(),t.widget("ui.tabs",t.ui.tabs,{_trigger:function(e,i,n){var r=t.extend({},n);return"load"===e&&(r.panel=r.panel[0],r.tab=r.tab.find(".ui-tabs-anchor")[0]),this._super(e,i,r)}}),t.widget("ui.tabs",t.ui.tabs,{options:{fx:null},_getFx:function(){var e,i,n=this.options.fx;return n&&(t.isArray(n)?(e=n[0],i=n[1]):e=i=n),n?{show:i,hide:e}:null},_toggle:function(t,e){function i(){r.running=!1,r._trigger("activate",t,e)}function n(){e.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),s.length&&a.show?s.animate(a.show,a.show.duration,function(){i()}):(s.show(),i())}var r=this,s=e.newPanel,o=e.oldPanel,a=this._getFx();return a?(r.running=!0,void(o.length&&a.hide?o.animate(a.hide,a.hide.duration,function(){e.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),n()}):(e.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),o.hide(),n()))):this._super(t,e)}}))}(jQuery),function(t){function e(e,i){var n=(e.attr("aria-describedby")||"").split(/\s+/);n.push(i),e.data("ui-tooltip-id",i).attr("aria-describedby",t.trim(n.join(" ")))}function i(e){var i=e.data("ui-tooltip-id"),n=(e.attr("aria-describedby")||"").split(/\s+/),r=t.inArray(i,n);r!==-1&&n.splice(r,1),e.removeData("ui-tooltip-id"),n=t.trim(n.join(" ")),n?e.attr("aria-describedby",n):e.removeAttr("aria-describedby")}var n=0;t.widget("ui.tooltip",{version:"1.9.2",options:{content:function(){return t(this).attr("title")},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(e,i){var n=this;return"disabled"===e?(this[i?"_disable":"_enable"](),void(this.options[e]=i)):(this._super(e,i),void("content"===e&&t.each(this.tooltips,function(t,e){n._updateContent(e)})))},_disable:function(){var e=this;t.each(this.tooltips,function(i,n){var r=t.Event("blur");r.target=r.currentTarget=n[0],e.close(r,!0)}),this.element.find(this.options.items).andSelf().each(function(){var e=t(this);e.is("[title]")&&e.data("ui-tooltip-title",e.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).andSelf().each(function(){var e=t(this);e.data("ui-tooltip-title")&&e.attr("title",e.data("ui-tooltip-title"))})},open:function(e){var i=this,n=t(e?e.target:this.element).closest(this.options.items);n.length&&!n.data("ui-tooltip-id")&&(n.attr("title")&&n.data("ui-tooltip-title",n.attr("title")),n.data("ui-tooltip-open",!0),e&&"mouseover"===e.type&&n.parents().each(function(){var e,n=t(this);n.data("ui-tooltip-open")&&(e=t.Event("blur"),e.target=e.currentTarget=this,i.close(e,!0)),n.attr("title")&&(n.uniqueId(),i.parents[this.id]={element:this,title:n.attr("title")},n.attr("title",""))}),this._updateContent(n,e))},_updateContent:function(t,e){var i,n=this.options.content,r=this,s=e?e.type:null;return"string"==typeof n?this._open(e,t,n):(i=n.call(t[0],function(i){t.data("ui-tooltip-open")&&r._delay(function(){e&&(e.type=s),this._open(e,t,i)})}),void(i&&this._open(e,t,i)))},_open:function(i,n,r){function s(t){c.of=t,o.is(":hidden")||o.position(c)}var o,a,l,c=t.extend({},this.options.position);if(r){if(o=this._find(n),o.length)return void o.find(".ui-tooltip-content").html(r);n.is("[title]")&&(i&&"mouseover"===i.type?n.attr("title",""):n.removeAttr("title")),o=this._tooltip(n),e(n,o.attr("id")),o.find(".ui-tooltip-content").html(r),this.options.track&&i&&/^mouse/.test(i.type)?(this._on(this.document,{mousemove:s}),s(i)):o.position(t.extend({of:n},this.options.position)),o.hide(),this._show(o,this.options.show),this.options.show&&this.options.show.delay&&(l=setInterval(function(){o.is(":visible")&&(s(c.of),clearInterval(l))},t.fx.interval)),this._trigger("open",i,{tooltip:o}),a={keyup:function(e){if(e.keyCode===t.ui.keyCode.ESCAPE){var i=t.Event(e);i.currentTarget=n[0],this.close(i,!0)}},remove:function(){this._removeTooltip(o)}},i&&"mouseover"!==i.type||(a.mouseleave="close"),i&&"focusin"!==i.type||(a.focusout="close"),this._on(!0,n,a)}},close:function(e){var n=this,r=t(e?e.currentTarget:this.element),s=this._find(r);this.closing||(r.data("ui-tooltip-title")&&r.attr("title",r.data("ui-tooltip-title")),i(r),s.stop(!0),this._hide(s,this.options.hide,function(){n._removeTooltip(t(this))}),r.removeData("ui-tooltip-open"),this._off(r,"mouseleave focusout keyup"),r[0]!==this.element[0]&&this._off(r,"remove"),this._off(this.document,"mousemove"),e&&"mouseleave"===e.type&&t.each(this.parents,function(e,i){t(i.element).attr("title",i.title),delete n.parents[e]}),this.closing=!0,this._trigger("close",e,{tooltip:s}),this.closing=!1)},_tooltip:function(e){var i="ui-tooltip-"+n++,r=t("<div>").attr({id:i,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return t("<div>").addClass("ui-tooltip-content").appendTo(r),r.appendTo(this.document[0].body),t.fn.bgiframe&&r.bgiframe(),this.tooltips[i]=e,r},_find:function(e){var i=e.data("ui-tooltip-id");return i?t("#"+i):t()},_removeTooltip:function(t){t.remove(),delete this.tooltips[t.attr("id")]},_destroy:function(){var e=this;t.each(this.tooltips,function(i,n){var r=t.Event("blur");r.target=r.currentTarget=n[0],e.close(r,!0),t("#"+i).remove(),n.data("ui-tooltip-title")&&(n.attr("title",n.data("ui-tooltip-title")),n.removeData("ui-tooltip-title"))})}})}(jQuery),function($){$.extend({metadata:{defaults:{type:"attr",name:"data",cre:/({.*})/,single:"metadata"},setType:function(t,e){this.defaults.type=t,this.defaults.name=e},get:function(elem,opts){var settings=$.extend({},this.defaults,opts);settings.single.length||(settings.single="metadata");var data=$.data(elem,settings.single);if(data)return data;data="{}";var getData=function(data){return"string"!=typeof data?data:void(data.indexOf("{")<0&&(data=eval("("+data+")")))},getObject=function(data){return"string"!=typeof data?data:data=eval("("+data+")")};if("html5"==settings.type){var object={};$(elem.attributes).each(function(){var t=this.nodeName;return!t.match(/^data-/)||(t=t.replace(/^data-/,""),void(object[t]=getObject(this.nodeValue)))})}else{if("class"==settings.type){var m=settings.cre.exec(elem.className);m&&(data=m[1])}else if("elem"==settings.type){if(!elem.getElementsByTagName)return;var e=elem.getElementsByTagName(settings.name);e.length&&(data=$.trim(e[0].innerHTML))}else if(void 0!=elem.getAttribute){var attr=elem.getAttribute(settings.name);attr&&(data=attr)}object=getObject(data.indexOf("{")<0?"{"+data+"}":data)}return $.data(elem,settings.single,object),object}}}),$.fn.metadata=function(t){return $.metadata.get(this[0],t)}}(jQuery),jQuery(function(t){var e={},i=function(i){t.isArray(i)&&(i=i[0]),e=i},n="key",r="module",s="service",o=function(t){var e=t.split(".",2),i={};if(2!=e.length)return i[n]=t,i;i[s]=e[0],i[r]=e[1];var o=e[0].length+e[1].length+1,a=t.indexOf(".",o);return i[n]=t.substring(a+1,t.length),i},a=function(t,i,n){var r=e[t],s="[noi18n] "+i;if(r){var o=r[i];o&&(s=l(o,n))}return s},l=function(t,e){if("undefined"!=typeof e&&e.length>0)for(var i=0;i<e.length;i++){var n=new RegExp("\\{"+i+"\\}","gi");t=t.replace(n,e[i])}return t},c=function(t,e){var i=o(t);return a(i[r],i[n],e)};t.i18n=function(){var t=arguments,e=t[0];return 1==t.length&&"object"==typeof e?i(e):t.length>=1?"string"==typeof t[1]?a(t[0],t[1],t[2]):c(e,t[1]):void 0}}),jQuery(function(t){var e={zadvancedcolorpalette:{"hue.label":"H","saturation.label":"S","value.label":"V","red.label":"R","green.label":"G","blue.label":"B"},zcolorpalette:{"standardcolors.label":"Standard Colors","recentcolors.label":"Recent Colors","morecolors.label":"More Colors ","advancedcolorpalette.label":"Advanced Color Palette","darken.label":"Darken","lighten.label":"Lighten","defaultcolor.label":"Default Color","nofill.label":"No Fill"},zinoutlist:{"buttons.add":"Add","buttons.remove":"Remove"},zgradientslider:{"addstoptext.label":"Add Stop","removestoptext.label":"Remove Stop","stopshint.label":"(Click on the Stops to change value)","stopcolortext.label":"Stop Color:","transparencytext.label":"Transparency:","positiontext.label":"Position:","directiontext.label":"Direction:","angletext.label":"Angle:","gradientfilltext.label":"Gradient Fill:","colorpresets.label":"Color Presets:"},zpagination:{pagestring:"Page {0}"},common:{ok:"OK",cancel:"Cancel",close:"Close"},zimagelist:{"public.label":"Public","imagenotfound.label":"We can't find the image at that URL.","google.label":"Google","addtolibrary.label":"Add to Library",newest:"Newest First","uploading.label":"Uploading","decent.label":"Decent","pageno.label":"Page No :","upload.label":"Upload","chooseanimagetoupload.label":"Choose an Image to Upload","mylibrarysearch.label":"Search Image from My Library","dragdropimages.label":"Drag and Drop Images Here","library.label":"My Library","search.label":"Search","flickr.label":"Flickr","delete.label":"Delete","previewmessage.label":"If your URL is correct, you'll see a preview here. Large images may take a few minutes to appear.",namedesc:"Name (Z-A/9-0)","sortBy.label":"Sort By: ","picasa.label":"Picasa","signinasadifferentuser.label":"Sign in as a different user","ascent.label":"Ascent","checkurladdress.label":"Please check the address for typing errors.","pasteanimageurl.label":"Paste an image URL here:","addpicture.label":"Add Picture","myaccount.label":"My Account","usermsg.label":"My {0} Images","noimagesavailable.label":"No Images Available","or.label":"(or)","mylibrary.label":"My Library","checkimageispublic.label":"Make sure the image is public. If your image is protected by a password, or on an internal network, we will not be able to read it.",oldest:"Oldest First",nameasc:"Name (A-Z/0-9)"},imagelibrary:{"fromurl.label":"From URL","picasa.label":"Picasa","close.label":"Close","title.label":"Image Library","websearch.label":"Web Search","insert.label":"Insert","mylibrary.label":"My Library","flickr.label":"Flickr"},zvideohandler:{"novideofound.label":"No videos found.","uploaded.label":"Uploaded on","youtube.label":"YouTube","dailymotion.label":"DailyMotion","note.label":"Note:","insert.label":"Insert","change.label":"Change","insertgadget.label":"Insert Gadget","changegadget.label":"Change Gadget","pasteembedcode.label":"Paste the Embed Code here.","changeembedcode.label":"Change the Embed Code here.","searchmessage.label":"Type your search here to find videos.","provideproperembedcode.label":"Please provide proper embed code to insert.","notsupportedembedurl.label":"Embed URL from {0} service is not supported."},zcollaborator:{"customchatmessage.label":"Type your message for collaborators...","activeusers.label":"Active Users","otherusers.label":"Others","sharedusers.label":"Shared Users","collaborators.label":"Collaborators","actions.label":"Actions"},zdialog:{"close.label":"Close","minimize.label":"Minimize","maximize.label":"Maximize"},zerror:{"validfilemessage.label":"Please select a valid file"},zcommon:{"more.label":"More...","moreoptions.label":"More options..."},zoompanel:{"fittoscreen.label":"Fit To Screen"},zannouncementbar:{"title.label":"Announcement","announcement.label":"Announcement","whatsnew.label":"What's New?","more.label":"Learn more","close.label":"Close"},zimport:{"validfilemessage.label":"Please select a valid file","supportedfileformats.label":"Supported File Formats: ","maximumallowedfilesize.label":"Maximum file size allowed is ","localfile.label":"Local File","fromurl.label":"From URL","import.label":"Import","cancel.label":"Cancel","close.label":"Close","ispasswordprotected.label":"Is Password Protected?","yes.label":"Yes","no.label":"No","documentname.label":"Document Name:","importing.label":"Importing...","successmessage.label":"Imported Successfully","errormessage.label":"Unable to Import due to an unknown error in the specified file","cancelmessage.label":"Import Cancelled","optional.label":"Optional","enterpassword.label":"Enter Password","open.label":"Open","passwordprotectedmessage.label":"Only unprotected files will be imported","splCharacError.label":'Document Name cannot contain "<" character',"validsizemessage.label":"The file size exceeds the limit allowed.","erroronuploading.label":"Error while uploading files , Please try again","emptyfileuploaderror.label":"Empty file cannot be uploaded","filecontainsvirus.label":"File contains Virus!","storagespaceexceeds.label":"Your Storage space exceeds, Please upgrade your account.","fileconversionerror.label":"Uploaded successfully. Error while converting the file."},zscreengrabber:{"highlight.label":"Highlight","blackout.label":"Blackout","attach.label":"Attach","cancel.label":"Cancel","message.label":"Click to select the full screen. Drag to select part of the screen.","screencapturealert.label":"Unable to capture your screen due to an unknown error","screencapturefailure.label":"Sorry! We are unable to capture your screen due to an unknown error","actualsize.label":"Actual Size","smallsize.label":"Small Size","retry.label":"Retry","quit.label":"Quit"},ztoggle:{"on.label":"ON","off.label":"OFF"},znotifycollaborator:{"cancel.label":"Cancel","send.label":"Send","sending.label":"Sending...","title.label":"Notify Collaborators","more.label":"more","message.label":"Message","subject.label":"Subject","recipients.label":"To","allcollaborators.label":"All Collaborators","owneronly.label":"Owner Only","ownerandcoowner.label":"Owner & Co-Owners","selectedrecipients.label":"Specific People...","sendmailsuccessfully.label":"Mail sent successfully","sendmailwithoutsubject.label":"Would you like to send mail without a subject?","noresultsfound.label":"We could not find people matching your search."},ztab:{"expand.label":"Expand Toolbar","collapse.label":"Collapse Toolbar"},ztopbar:{salesAndMarketing:"SALES & MARKETING",customProcesses:"CUSTOM PROCESSES",customerSupport:"CUSTOMER SUPPORT",hr:"HR",finance:"FINANCE",emailAndCollaboration:"EMAIL & COLLABORATION",myAccount:"My Account",myStore:"My Store",signout:"Sign Out",zoho:"Zoho",show:"Show",sheet:"Sheet",writer:"Writer",zohoApps:"Zoho Apps",help:"Help",settings:"Settings",notifications:"Notifications",messages:"Inbox",upload:"Add",change:"Change",tryOtherEditions:"Try Other Editions",subscriptions:"Subscription",manageSubscription:"Manage Subscription",close:"Close",trialNotifyMessage:"Your {0} edition trial will expire in {1} days.",trialNotifyMessageToday:"Your {0} edition trial will expire today.",trialNotifyMessageTomorrow:"Your {0} edition trial will expire tomorrow.",trialNotifyMessageExpired:"Your {0} edition trial has expired.",helpCenter:"Help Center",faq:"FAQ",gettingStarted:"Getting Started",takeATour:"Take a Tour",forums:"Forums",support:"Support",feedback:"Feedback",liveChat:"Live Chat",blogs:"Blogs",upgradeNow:"Upgrade Now",upgrade:"Upgrade",managePortals:"Manage Portals",myPreferences:"My Preferences",adminPanel:"Admin Panel",projectSettings:"Project Settings",portalSettings:"Portal Settings",portals:"Portals",about:"About",crm:"CRM",campaigns:"Campaigns",sites:"Sites",survey:"Survey",creator:"Creator",reports:"Reports",vault:"Vault",support:"Support",assist:"Assist",liveDesk:"LiveDesk",books:"Books",invoice:"Invoice",people:"People",recruit:"Recruit",mail:"Mail",docs:"Docs",projects:"Projects",bugtracker:"BugTracker",meeting:"Meeting",connect:"Connect",salesiq:"Sales IQ",contactmanager:"ContactManager",willDoLater:"Will do later",userIdLabel:"User ID",nextLabel:"Next",prevLabel:"Prev",zohoHomeLabel:"Go to Zoho Home",allAppsLabel:"All Apps",myAppsLabel:"My Apps",userIdTooltipDefinition:"This is your unique identification number in Zoho.",userIdTooltipDescription:"It will be handy for you to identify yourself to our customer support executive, say when you seek our assistance through our Toll Free number."}};t.i18n(e)}),jQuery(function(t){function e(e,i,s){var o=e.data("menuButton");o&&o.button(i?"disable":"enable"),e=t(e);var a=void 0,l=void 0;if(e.is(".zmenu__item")?(a=t(e.parents(".zmenu").get(0)),l="zmenu"):(a=e.is("[ctype]")?e:t(e.parents("[ctype]").get(0)),l=a.attr("ctype")),!a.length)return!1;switch(l){case"ztoolbar":a[l](i?"disableButton":"enableButton",e.attr("id"));break;case"zmenu":a.data(l)?a[l]("setMenuItemsAttribute",[e],"disabled",i):i?e.attr("disabled",!0):e.removeAttr("disabled");break;case"zbutton":case"zmenubutton":case"zsplitbutton":i?n(e):r(e);break;default:return!!e.is("[ctype]")&&(e[e.attr("ctype")](i?"disable":"enable"),!0)}return!0}function i(e,i,n){return!!e.is(".zbutton")&&(t(e).each(function(e,n){n=t(n);var r=n.attr("ctype");r=r?r:"zbutton",n[r]("setAttribute","disabled",!i)}),!0)}function n(e){i(e)||t(e).is(":disabled")||(t(e).prop("disabled",!0),t(e).addClass("is-disabled"),c[u]=t(e),u++)}function r(e,n){i(e,!0)||(n?s(e):t(e).removeAttr("disabled"),t(e).removeClass("is-disabled"))}function s(e){t(c).each(function(e,i){t(i).removeAttr("disabled")})}function o(t){return t.is("input")||t.is("button")||t.is("select")||t.is("textarea")?t.is(":disabled"):t.hasClass("is-disabled")}function a(t,e,i){i=i?i:{},i.element=t,i.disabled=e,t.trigger("element_state_changed",i)}function l(e,i,n,r,s){1===e.length?h(e,i,n):e.each(function(e,r){h(t(r),i,n)}),(void 0==r||r)&&a(e,i,s)}var c=[],u=0,h=function(s,o,a,l){if(!e(s,o)){if(!a)return void(o?n(t(s)):r(t(s),!0,void 0,l));var c=t(s).find("[ctype]");t(c).each(function(e,n){n=t(n);var r=n.attr("ctype");i(n,!o)||n[r](o?"disable":"enable")}),c=t(s).find("select,div,button,input:not([ctype]):not(.ui-widget)"),t(c).each(function(e,i){i=t(i);var a=i.closest(".ui-widget");s.has(a[0]).length||(o?n(i):r(i,l))}),o?n(s):r(s)}};t.fn.isDisabled=function(){var e=t(this);return o(e)},t.fn.disable=function(e,i,n){l(t(this),!0,e,i,n)},t.fn.enable=function(e,i,n,r){l(t(this),!1,e,i,n)}}),function(t){t.fn.inlineStyler=function(e){var i=t.extend({propertyGroups:{"*":["border","border-radius","box-shadow","height","margin","padding","width","max-width","min-width","border-collapse","border-spacing","caption-side","empty-cells","table-layout","direction","font","font-family","font-style","font-variant","font-size","font-weight","letter-spacing","line-height","text-align","text-decoration","text-indent","text-overflow","text-shadow","text-transform","white-space","word-spacing","word-wrap","vertical-align","color","background","background-color","background-image","background-position","background-repeat","Opacity","bottom","clear","clip","cursor","display","float","left","opacity","outline ","overflow","position","resize ","right","top","visibility","z-index","list-style-image","list-style-position","list-style-type"],block:["margin","padding"]},elementGroups:{"*":["A","ABBR","ACRONYM","ADDRESS","APPLET","AREA","ARTICLE","ASIDE","AUDIO","B","BASE","BASEFONT","BDI","BDO","BIG","BLOCKQUOTE","BODY","BR","BUTTON","CANVAS","CAPTION","CENTER","CITE","CODE","COL","COLGROUP","COMMAND","DATALIST","DD","DEL","DETAILS","DFN","DIALOG","DIR","DIV","DL","DT","EM","EMBED","FIELDSET","FIGCAPTION","FIGURE","FONT","FOOTER","FORM","FRAME","FRAMESET","H1","HEAD","HEADER","HR","HTML","I","IFRAME","IMG","INPUT","INS","KBD","KEYGEN","LABEL","LEGEND","LI","LINK","MAP","MARK","MENU","META","METER","NAV","NOFRAMES","NOSCRIPT","OBJECT","OL","OPTGROUP","OPTION","OUTPUT","P","PARAM","PRE","PROGRESS","Q","RP","RT","RUBY","S","SAMP","SCRIPT","SECTION","SELECT","SMALL","SOURCE","SPAN","STRIKE","STRONG","STYLE","SUB","SUMMARY","SUP","TABLE","TBODY","TD","TEXTAREA","TFOOT","TH","THEAD","TIME","TITLE","TR","TRACK","TT","U","UL","VAR","VIDEO","WBR"]}},e);this.each(function(e,n){for(var r in i.elementGroups)for(var s=0,o=i.elementGroups[r].length;s<o;s++){var a=t(this).find(i.elementGroups[r][s]);a.each(function(){if(t(this).attr("style"))var e=t(this).attr("style"),n=e.split(";");else var n=[];for(var s=0,o=i.propertyGroups[r].length;s<o;s++){var a=i.propertyGroups[r][s];t(this).css(a)&&n.push(a+":"+t(this).css(a))}t(this).attr("style",n.join(";"))})}})}}(jQuery),function(t){"use strict";var e={i18n:{ar:{months:[" ","","","","","","","",""," "," "," "],dayOfWeek:["","","","","","",""]},ro:{months:["ianuarie","februarie","martie","aprilie","mai","iunie","iulie","august","septembrie","octombrie","noiembrie","decembrie"],dayOfWeek:["l","ma","mi","j","v","s","d"]},id:{months:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],dayOfWeek:["Sen","Sel","Rab","Kam","Jum","Sab","Min"]},bg:{months:["","","","","","","","","","","",""],dayOfWeek:["","","","","","",""]},fa:{months:["","","","","","","","","","","",""],dayOfWeek:["",""," ","","","",""]},ru:{months:["","","","","","","","","","","",""],dayOfWeek:["","","","","","",""]},uk:{months:["","","","","","","","","","","",""],dayOfWeek:["","","","","","",""]},en:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],dayOfWeek:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},el:{months:["","","","","","","","","","","",""],dayOfWeek:["","","","","","",""]},de:{months:["Januar","Februar","Mrz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],dayOfWeek:["So","Mo","Di","Mi","Do","Fr","Sa"]},nl:{months:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],dayOfWeek:["zo","ma","di","wo","do","vr","za"]},tr:{months:["Ocak","ubat","Mart","Nisan","Mays","Haziran","Temmuz","Austos","Eyll","Ekim","Kasm","Aralk"],dayOfWeek:["Paz","Pts","Sal","ar","Per","Cum","Cts"]},fr:{months:["Janvier","Fvrier","Mars","Avril","Mai","Juin","Juillet","Aot","Septembre","Octobre","Novembre","Dcembre"],dayOfWeek:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"]},es:{months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],dayOfWeek:["Dom","Lun","Mar","Mi","Jue","Vie","Sb"]},th:{months:["","","","","","","","","","","",""],dayOfWeek:[".",".",".",".",".",".","."]},pl:{months:["stycze","luty","marzec","kwiecie","maj","czerwiec","lipiec","sierpie","wrzesie","padziernik","listopad","grudzie"],dayOfWeek:["nd","pn","wt","r","cz","pt","sb"]},pt:{months:["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],dayOfWeek:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"]},ch:{months:["","","","","","","","","","","",""],dayOfWeek:["","","","","","",""]},se:{months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],dayOfWeek:["Sn","Mn","Tis","Ons","Tor","Fre","Lr"]},kr:{months:["1","2","3","4","5","6","7","8","9","10","11","12"],dayOfWeek:["","","","","","",""]},it:{months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],dayOfWeek:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"]},da:{months:["January","Februar","Marts","April","Maj","Juni","July","August","September","Oktober","November","December"],dayOfWeek:["Sn","Man","Tir","Ons","Tor","Fre","Lr"]},no:{months:["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],dayOfWeek:["Sn","Man","Tir","Ons","Tor","Fre","Lr"]},ja:{months:["1","2","3","4","5","6","7","8","9","10","11","12"],dayOfWeek:["","","","","","",""]},vi:{months:["Thng 1","Thng 2","Thng 3","Thng 4","Thng 5","Thng 6","Thng 7","Thng 8","Thng 9","Thng 10","Thng 11","Thng 12"],dayOfWeek:["CN","T2","T3","T4","T5","T6","T7"]},sl:{months:["Januar","Februar","Marec","April","Maj","Junij","Julij","Avgust","September","Oktober","November","December"],dayOfWeek:["Ned","Pon","Tor","Sre","et","Pet","Sob"]},cs:{months:["Leden","nor","Bezen","Duben","Kvten","erven","ervenec","Srpen","Z","jen","Listopad","Prosinec"],dayOfWeek:["Ne","Po","t","St","t","P","So"]},hu:{months:["Janur","Februr","Mrcius","prilis","Mjus","Jnius","Jlius","Augusztus","Szeptember","Oktber","November","December"],dayOfWeek:["Va","H","Ke","Sze","Cs","P","Szo"]},az:{months:["Yanvar","Fevral","Mart","Aprel","May","Iyun","Iyul","Avqust","Sentyabr","Oktyabr","Noyabr","Dekabr"],dayOfWeek:["B","Be","a","","Ca","C",""]},bs:{months:["Januar","Februar","Mart","April","Maj","Jun","Jul","Avgust","Septembar","Oktobar","Novembar","Decembar"],dayOfWeek:["Ned","Pon","Uto","Sri","et","Pet","Sub"]},ca:{months:["Gener","Febrer","Mar","Abril","Maig","Juny","Juliol","Agost","Setembre","Octubre","Novembre","Desembre"],dayOfWeek:["Dg","Dl","Dt","Dc","Dj","Dv","Ds"]},"en-GB":{months:["January","February","March","April","May","June","July","August","September","October","November","December"],dayOfWeek:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},et:{months:["Jaanuar","Veebruar","Mrts","Aprill","Mai","Juuni","Juuli","August","September","Oktoober","November","Detsember"],dayOfWeek:["P","E","T","K","N","R","L"]},eu:{months:["Urtarrila","Otsaila","Martxoa","Apirila","Maiatza","Ekaina","Uztaila","Abuztua","Iraila","Urria","Azaroa","Abendua"],dayOfWeek:["Ig.","Al.","Ar.","Az.","Og.","Or.","La."]},fi:{months:["Tammikuu","Helmikuu","Maaliskuu","Huhtikuu","Toukokuu","Keskuu","Heinkuu","Elokuu","Syyskuu","Lokakuu","Marraskuu","Joulukuu"],dayOfWeek:["Su","Ma","Ti","Ke","To","Pe","La"]},gl:{months:["Xan","Feb","Maz","Abr","Mai","Xun","Xul","Ago","Set","Out","Nov","Dec"],dayOfWeek:["Dom","Lun","Mar","Mer","Xov","Ven","Sab"]},hr:{months:["Sijeanj","Veljaa","Oujak","Travanj","Svibanj","Lipanj","Srpanj","Kolovoz","Rujan","Listopad","Studeni","Prosinac"],dayOfWeek:["Ned","Pon","Uto","Sri","et","Pet","Sub"]},ko:{months:["1","2","3","4","5","6","7","8","9","10","11","12"],dayOfWeek:["","","","","","",""]},lt:{months:["Sausio","Vasario","Kovo","Balandio","Gegus","Birelio","Liepos","Rugpjio","Rugsjo","Spalio","Lapkriio","Gruodio"],dayOfWeek:["Sek","Pir","Ant","Tre","Ket","Pen","e"]},lv:{months:["Janvris","Februris","Marts","Aprlis ","Maijs","Jnijs","Jlijs","Augusts","Septembris","Oktobris","Novembris","Decembris"],dayOfWeek:["Sv","Pr","Ot","Tr","Ct","Pk","St"]},mk:{months:["","","","","","","","","","","",""],dayOfWeek:["","","","","","",""]},mn:{months:["1- ","2- ","3- ","4- ","5- ","6- ","7- ","8- ","9- ","10- ","11- ","12- "],dayOfWeek:["","","","","","",""]},"pt-BR":{months:["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],dayOfWeek:["Dom","Seg","Ter","Qua","Qui","Sex","Sb"]},sk:{months:["Janur","Februr","Marec","Aprl","Mj","Jn","Jl","August","September","Oktber","November","December"],dayOfWeek:["Ne","Po","Ut","St","t","Pi","So"]},sq:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],dayOfWeek:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},"sr-YU":{months:["Januar","Februar","Mart","April","Maj","Jun","Jul","Avgust","Septembar","Oktobar","Novembar","Decembar"],dayOfWeek:["Ned","Pon","Uto","Sre","et","Pet","Sub"]},sr:{months:["","","","","","","","","","","",""],dayOfWeek:["","","","","","",""]},sv:{months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],dayOfWeek:["Sn","Mn","Tis","Ons","Tor","Fre","Lr"]},"zh-TW":{months:["","","","","","","","","","","",""],dayOfWeek:["","","","","","",""]},zh:{months:["","","","","","","","","","","",""],dayOfWeek:["","","","","","",""]},he:{months:["","","","","","","","","","","",""],dayOfWeek:["'","'","'","'","'","'",""]}},value:"",lang:"en",format:"Y/m/d H:i",formatTime:"H:i",formatDate:"Y/m/d",startDate:!1,step:60,monthChangeSpinner:!0,closeOnDateSelect:!1,closeOnWithoutClick:!0,closeOnInputClick:!0,timepicker:!0,datepicker:!0,weeks:!1,defaultTime:!1,defaultDate:!1,minDate:!1,maxDate:!1,minTime:!1,maxTime:!1,allowTimes:[],opened:!1,initTime:!0,inline:!1,theme:"",onSelectDate:function(){},onSelectTime:function(){},onChangeMonth:function(){},onChangeYear:function(){},onChangeDateTime:function(){},onShow:function(){},onClose:function(){},onGenerate:function(){},withoutCopyright:!0,inverseButton:!1,hours12:!1,next:"xdsoft_next",prev:"xdsoft_prev",dayOfWeekStart:0,parentID:"body",timeHeightInTimePicker:25,timepickerScrollbar:!0,todayButton:!0,defaultSelect:!0,scrollMonth:!0,scrollTime:!0,scrollInput:!0,lazyInit:!1,mask:!1,validateOnBlur:!0,allowBlank:!0,yearStart:1950,yearEnd:2050,style:"",id:"",fixed:!1,roundTime:"round",className:"",weekends:[],disabledDates:[],yearOffset:0,beforeShowDay:null,enterLikeTab:!0};Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){var i,n;for(i=e||0,n=this.length;i<n;i+=1)if(this[i]===t)return i;return-1}),Date.prototype.countDaysInMonth=function(){return new Date(this.getFullYear(),this.getMonth()+1,0).getDate()},t.fn.xdsoftScroller=function(e){return this.each(function(){var i,n,r,s,o,a=t(this),l=function(t){var e,i={x:0,y:0};return"touchstart"===t.type||"touchmove"===t.type||"touchend"===t.type||"touchcancel"===t.type?(e=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0],i.x=e.clientX,i.y=e.clientY):"mousedown"!==t.type&&"mouseup"!==t.type&&"mousemove"!==t.type&&"mouseover"!==t.type&&"mouseout"!==t.type&&"mouseenter"!==t.type&&"mouseleave"!==t.type||(i.x=t.clientX,i.y=t.clientY),i},c=100,u=!1,h=0,d=0,p=0,f=!1,m=0,g=function(){};return"hide"===e?void a.find(".xdsoft_scrollbar").hide():(t(this).hasClass("xdsoft_scroller_box")||(i=a.children().eq(0),n=a[0].clientHeight,r=i[0].offsetHeight,s=t('<div class="xdsoft_scrollbar"></div>'),o=t('<div class="xdsoft_scroller"></div>'),s.append(o),a.addClass("xdsoft_scroller_box").append(s),g=function(t){var e=l(t).y-h+m;e<0&&(e=0),e+o[0].offsetHeight>p&&(e=p-o[0].offsetHeight),a.trigger("scroll_element.xdsoft_scroller",[c?e/c:0])},o.on("touchstart.xdsoft_scroller mousedown.xdsoft_scroller",function(i){n||a.trigger("resize_scroll.xdsoft_scroller",[e]),h=l(i).y,m=parseInt(o.css("margin-top"),10),p=s[0].offsetHeight,"mousedown"===i.type?(document&&t(document.body).addClass("xdsoft_noselect"),t([document.body,window]).on("mouseup.xdsoft_scroller",function e(){t([document.body,window]).off("mouseup.xdsoft_scroller",e).off("mousemove.xdsoft_scroller",g).removeClass("xdsoft_noselect")}),t(document.body).on("mousemove.xdsoft_scroller",g)):(f=!0,i.stopPropagation(),i.preventDefault())}).on("touchmove",function(t){f&&(t.preventDefault(),g(t))}).on("touchend touchcancel",function(t){f=!1,m=0}),a.on("scroll_element.xdsoft_scroller",function(t,e){n||a.trigger("resize_scroll.xdsoft_scroller",[e,!0]),e=e>1?1:e<0||isNaN(e)?0:e,o.css("margin-top",c*e),setTimeout(function(){i.css("marginTop",-parseInt((i[0].offsetHeight-n)*e,10))},10)}).on("resize_scroll.xdsoft_scroller",function(t,e,l){var u,h;n=a[0].clientHeight,r=i[0].offsetHeight,u=n/r,h=u*s[0].offsetHeight,u>1?o.hide():(o.show(),o.css("height",parseInt(h>10?h:10,10)),c=s[0].offsetHeight-o[0].offsetHeight,l!==!0&&a.trigger("scroll_element.xdsoft_scroller",[e||Math.abs(parseInt(i.css("marginTop"),10))/(r-n)]))}),a.on("mousewheel",function(t){var e=Math.abs(parseInt(i.css("marginTop"),10));return e-=20*t.deltaY,e<0&&(e=0),a.trigger("scroll_element.xdsoft_scroller",[e/(r-n)]),t.stopPropagation(),!1}),a.on("touchstart",function(t){u=l(t),d=Math.abs(parseInt(i.css("marginTop"),10))}),a.on("touchmove",function(t){if(u){t.preventDefault();var e=l(t);a.trigger("scroll_element.xdsoft_scroller",[(d-(e.y-u.y))/(r-n)])}}),a.on("touchend touchcancel",function(t){u=!1,d=0})),void a.trigger("resize_scroll.xdsoft_scroller",[e]))})},t.fn.datetimepicker=function(i){var n,r,s=48,o=57,a=96,l=105,c=17,u=46,h=13,d=27,p=8,f=37,m=38,g=39,v=40,M=9,b=116,Y=65,y=67,_=86,D=90,T=89,w=!1,E=t.isPlainObject(i)||!i?t.extend(!0,{},e,i):t.extend(!0,{},e),x=0,A=function(t){t.on("open.xdsoft focusin.xdsoft mousedown.xdsoft",function e(i){t.is(":disabled")||t.data("xdsoft_datetimepicker")||(clearTimeout(x),x=setTimeout(function(){t.data("xdsoft_datetimepicker")||n(t),t.off("open.xdsoft focusin.xdsoft mousedown.xdsoft",e).trigger("open.xdsoft")},100))})};return n=function(e){function n(){var t,i=!1;return E.startDate?i=k.strToDate(E.startDate):(i=E.value||(e&&e.val&&e.val()?e.val():""),i?i=k.strToDateTime(i):E.defaultDate&&(i=k.strToDate(E.defaultDate),E.defaultTime&&(t=k.strtotime(E.defaultTime),i.setHours(t.getHours()),i.setMinutes(t.getMinutes())))),i&&k.isValidDate(i)?H.data("changed",!0):i="",i||0}var r,x,A,S,C,k,H=t("<div "+(E.id?'id="'+E.id+'"':"")+" "+(E.style?'style="'+E.style+'"':"")+' class="xdsoft_datetimepicker xdsoft_'+E.theme+" xdsoft_noselect "+(E.weeks?" xdsoft_showweeks":"")+E.className+'"></div>'),O=t('<div class="xdsoft_copyright"><a target="_blank" href="http://xdsoft.net/jqplugins/datetimepicker/">xdsoft.net</a></div>'),I=t('<div class="xdsoft_datepicker active"></div>'),P=t('<div class="xdsoft_mounthpicker"><button type="button" class="xdsoft_prev"></button><button type="button" class="xdsoft_today_button"></button><div class="xdsoft_label xdsoft_month"><span></span><i></i></div><div class="xdsoft_label xdsoft_year"><span></span><i></i></div><button type="button" class="xdsoft_next"></button></div>'),N=t('<div class="xdsoft_calendar"></div>'),R=t('<div class="xdsoft_timepicker active"><button type="button" class="xdsoft_prev"></button><div class="xdsoft_time_box"></div><button type="button" class="xdsoft_next"></button></div>'),L=R.find(".xdsoft_time_box").eq(0),F=t('<div class="xdsoft_time_variant"></div>'),U=t('<div class="xdsoft_select xdsoft_monthselect"><div></div></div>'),z=t('<div class="xdsoft_select xdsoft_yearselect"><div></div></div>'),B=!1,W=0,j=0;P.find(".xdsoft_month span").after(U),P.find(".xdsoft_year span").after(z),P.find(".xdsoft_month,.xdsoft_year").on("mousedown.xdsoft",function(e){var i,n,r=t(this).find(".xdsoft_select").eq(0),s=0,o=0,a=r.is(":visible");for(P.find(".xdsoft_select").hide(),k.currentTime&&(s=k.currentTime[t(this).hasClass("xdsoft_month")?"getMonth":"getFullYear"]()),r[a?"hide":"show"](),i=r.find("div.xdsoft_option"),n=0;n<i.length&&i.eq(n).data("value")!==s;n+=1)o+=i[0].offsetHeight;return r.xdsoftScroller(o/(r.children()[0].offsetHeight-r[0].clientHeight)),e.stopPropagation(),!1}),P.find(".xdsoft_select").xdsoftScroller().on("mousedown.xdsoft",function(t){t.stopPropagation(),t.preventDefault()}).on("mousedown.xdsoft",".xdsoft_option",function(e){var i=k.currentTime.getFullYear();k&&k.currentTime&&k.currentTime[t(this).parent().parent().hasClass("xdsoft_monthselect")?"setMonth":"setFullYear"](t(this).data("value")),t(this).parent().parent().hide(),H.trigger("xchange.xdsoft"),E.onChangeMonth&&t.isFunction(E.onChangeMonth)&&E.onChangeMonth.call(H,k.currentTime,H.data("input")),i!==k.currentTime.getFullYear()&&t.isFunction(E.onChangeYear)&&E.onChangeYear.call(H,k.currentTime,H.data("input"))}),H.setOptions=function(i){if(E=t.extend(!0,{},E,i),i.allowTimes&&t.isArray(i.allowTimes)&&i.allowTimes.length&&(E.allowTimes=t.extend(!0,[],i.allowTimes)),i.weekends&&t.isArray(i.weekends)&&i.weekends.length&&(E.weekends=t.extend(!0,[],i.weekends)),i.disabledDates&&t.isArray(i.disabledDates)&&i.disabledDates.length&&(E.disabledDates=t.extend(!0,[],i.disabledDates)),!E.open&&!E.opened||E.inline||e.trigger("open.xdsoft"),E.inline&&(B=!0,H.addClass("xdsoft_inline"),e.after(H).hide()),E.inverseButton&&(E.next="xdsoft_prev",E.prev="xdsoft_next"),E.datepicker?I.addClass("active"):I.removeClass("active"),E.timepicker?R.addClass("active"):R.removeClass("active"),E.value&&(e&&e.val&&e.val(E.value),k.setCurrentTime(E.value)),isNaN(E.dayOfWeekStart)?E.dayOfWeekStart=0:E.dayOfWeekStart=parseInt(E.dayOfWeekStart,10)%7,E.timepickerScrollbar||L.xdsoftScroller("hide"),E.minDate&&/^-(.*)$/.test(E.minDate)&&(E.minDate=k.strToDateTime(E.minDate).dateFormat(E.formatDate)),E.maxDate&&/^\+(.*)$/.test(E.maxDate)&&(E.maxDate=k.strToDateTime(E.maxDate).dateFormat(E.formatDate)),P.find(".xdsoft_today_button").css("visibility",E.todayButton?"visible":"hidden"),E.mask){var n=function(t){try{if(document.selection&&document.selection.createRange){var e=document.selection.createRange();return e.getBookmark().charCodeAt(2)-2}if(t.setSelectionRange)return t.selectionStart}catch(t){return 0}},r=function(t,e){if(t="string"==typeof t||t instanceof String?document.getElementById(t):t,!t)return!1;if(t.createTextRange){var i=t.createTextRange();return i.collapse(!0),i.moveEnd("character",e),i.moveStart("character",e),i.select(),!0}return!!t.setSelectionRange&&(t.setSelectionRange(e,e),!0)},x=function(t,e){var i=t.replace(/([\[\]\/\{\}\(\)\-\.\+]{1})/g,"\\$1").replace(/_/g,"{digit+}").replace(/([0-9]{1})/g,"{digit$1}").replace(/\{digit([0-9]{1})\}/g,"[0-$1_]{1}").replace(/\{digit[\+]\}/g,"[0-9_]{1}");return new RegExp(i).test(e)};e.off("keydown.xdsoft"),E.mask===!0&&(E.mask=E.format.replace(/Y/g,"9999").replace(/F/g,"9999").replace(/m/g,"19").replace(/d/g,"39").replace(/H/g,"29").replace(/i/g,"59").replace(/s/g,"59")),"string"===t.type(E.mask)&&(x(E.mask,e.val())||e.val(E.mask.replace(/[0-9]/g,"_")),e.on("keydown.xdsoft",function(i){var A,S,C=this.value,k=i.which;if(k>=s&&k<=o||k>=a&&k<=l||k===p||k===u){for(A=n(this),S=k!==p&&k!==u?String.fromCharCode(a<=k&&k<=l?k-s:k):"_",k!==p&&k!==u||!A||(A-=1,S="_");/[^0-9_]/.test(E.mask.substr(A,1))&&A<E.mask.length&&A>0;)A+=k===p||k===u?-1:1;if(C=C.substr(0,A)+S+C.substr(A+1),""===t.trim(C))C=E.mask.replace(/[0-9]/g,"_");else if(A===E.mask.length)return i.preventDefault(),!1;for(A+=k===p||k===u?0:1;/[^0-9_]/.test(E.mask.substr(A,1))&&A<E.mask.length&&A>0;)A+=k===p||k===u?-1:1;x(E.mask,C)?(this.value=C,r(this,A)):""===t.trim(C)?this.value=E.mask.replace(/[0-9]/g,"_"):e.trigger("error_input.xdsoft")}else if([Y,y,_,D,T].indexOf(k)!==-1&&w||[d,m,v,f,g,b,c,M,h].indexOf(k)!==-1)return!0;return i.preventDefault(),!1}))}E.validateOnBlur&&e.off("blur.xdsoft").on("blur.xdsoft",function(){if(E.allowBlank&&!t.trim(t(this).val()).length)t(this).val(null),H.data("xdsoft_datetime").empty();else if(Date.parseDate(t(this).val(),E.format))H.data("xdsoft_datetime").setCurrentTime(t(this).val());else{var e=+[t(this).val()[0],t(this).val()[1]].join(""),i=+[t(this).val()[2],t(this).val()[3]].join("");!E.datepicker&&E.timepicker&&e>=0&&e<24&&i>=0&&i<60?t(this).val([e,i].map(function(t){return t>9?t:"0"+t}).join(":")):t(this).val(k.now().dateFormat(E.format)),H.data("xdsoft_datetime").setCurrentTime(t(this).val())}H.trigger("changedatetime.xdsoft")}),E.dayOfWeekStartPrev=0===E.dayOfWeekStart?6:E.dayOfWeekStart-1,H.trigger("xchange.xdsoft").trigger("afterOpen.xdsoft")},H.data("options",E).on("mousedown.xdsoft",function(t){return t.stopPropagation(),t.preventDefault(),z.hide(),U.hide(),!1}),L.append(F),L.xdsoftScroller(),H.on("afterOpen.xdsoft",function(){L.xdsoftScroller()}),H.append(I).append(R),E.withoutCopyright!==!0&&H.append(O),I.append(P).append(N),t(E.parentID).append(H),r=function(){var e=this;e.now=function(t){var i,n,r=new Date;return!t&&E.defaultDate&&(i=e.strToDate(E.defaultDate),r.setFullYear(i.getFullYear()),r.setMonth(i.getMonth()),r.setDate(i.getDate())),E.yearOffset&&r.setFullYear(r.getFullYear()+E.yearOffset),!t&&E.defaultTime&&(n=e.strtotime(E.defaultTime),r.setHours(n.getHours()),r.setMinutes(n.getMinutes())),r},e.isValidDate=function(t){return"[object Date]"===Object.prototype.toString.call(t)&&!isNaN(t.getTime())},e.setCurrentTime=function(t){e.currentTime="string"==typeof t?e.strToDateTime(t):e.isValidDate(t)?t:e.now(),H.trigger("xchange.xdsoft")},e.empty=function(){e.currentTime=null},e.getCurrentTime=function(t){return e.currentTime},e.nextMonth=function(){var i,n=e.currentTime.getMonth()+1;return 12===n&&(e.currentTime.setFullYear(e.currentTime.getFullYear()+1),n=0),i=e.currentTime.getFullYear(),e.currentTime.setDate(Math.min(new Date(e.currentTime.getFullYear(),n+1,0).getDate(),e.currentTime.getDate())),e.currentTime.setMonth(n),E.onChangeMonth&&t.isFunction(E.onChangeMonth)&&E.onChangeMonth.call(H,k.currentTime,H.data("input")),i!==e.currentTime.getFullYear()&&t.isFunction(E.onChangeYear)&&E.onChangeYear.call(H,k.currentTime,H.data("input")),H.trigger("xchange.xdsoft"),n},e.prevMonth=function(){var i=e.currentTime.getMonth()-1;return i===-1&&(e.currentTime.setFullYear(e.currentTime.getFullYear()-1),i=11),e.currentTime.setDate(Math.min(new Date(e.currentTime.getFullYear(),i+1,0).getDate(),e.currentTime.getDate())),e.currentTime.setMonth(i),E.onChangeMonth&&t.isFunction(E.onChangeMonth)&&E.onChangeMonth.call(H,k.currentTime,H.data("input")),H.trigger("xchange.xdsoft"),i},e.getWeekOfYear=function(t){var e=new Date(t.getFullYear(),0,1);return Math.ceil(((t-e)/864e5+e.getDay()+1)/7)},e.strToDateTime=function(t){var i,n,r=[];return t&&t instanceof Date&&e.isValidDate(t)?t:(r=/^(\+|\-)(.*)$/.exec(t),r&&(r[2]=Date.parseDate(r[2],E.formatDate)),r&&r[2]?(i=r[2].getTime()-6e4*r[2].getTimezoneOffset(),n=new Date(k.now().getTime()+parseInt(r[1]+"1",10)*i)):n=t?Date.parseDate(t,E.format):e.now(),e.isValidDate(n)||(n=e.now()),n)},e.strToDate=function(t){if(t&&t instanceof Date&&e.isValidDate(t))return t;var i=t?Date.parseDate(t,E.formatDate):e.now(!0);return e.isValidDate(i)||(i=e.now(!0)),i},e.strtotime=function(t){if(t&&t instanceof Date&&e.isValidDate(t))return t;var i=t?Date.parseDate(t,E.formatTime):e.now(!0);return e.isValidDate(i)||(i=e.now(!0)),i},e.str=function(){return e.currentTime.dateFormat(E.format)},e.currentTime=this.now()},k=new r,P.find(".xdsoft_today_button").on("mousedown.xdsoft",function(){H.data("changed",!0),k.setCurrentTime(0),H.trigger("afterOpen.xdsoft")}).on("dblclick.xdsoft",function(){e.val(k.str()),H.trigger("close.xdsoft")}),P.find(".xdsoft_prev,.xdsoft_next").on("mousedown.xdsoft",function(){var e=t(this),i=0,n=!1;!function t(r){k.currentTime.getMonth();e.hasClass(E.next)?k.nextMonth():e.hasClass(E.prev)&&k.prevMonth(),E.monthChangeSpinner&&(n||(i=setTimeout(t,r||100)))}(500),t([document.body,window]).on("mouseup.xdsoft",function e(){clearTimeout(i),n=!0,t([document.body,window]).off("mouseup.xdsoft",e)})}),R.find(".xdsoft_prev,.xdsoft_next").on("mousedown.xdsoft",function(){var e=t(this),i=0,n=!1,r=110;!function t(s){var o=L[0].clientHeight,a=F[0].offsetHeight,l=Math.abs(parseInt(F.css("marginTop"),10));e.hasClass(E.next)&&a-o-E.timeHeightInTimePicker>=l?F.css("marginTop","-"+(l+E.timeHeightInTimePicker)+"px"):e.hasClass(E.prev)&&l-E.timeHeightInTimePicker>=0&&F.css("marginTop","-"+(l-E.timeHeightInTimePicker)+"px"),L.trigger("scroll_element.xdsoft_scroller",[Math.abs(parseInt(F.css("marginTop"),10)/(a-o))]),r=r>10?10:r-10,n||(i=setTimeout(t,s||r))}(500),t([document.body,window]).on("mouseup.xdsoft",function e(){clearTimeout(i),n=!0,t([document.body,window]).off("mouseup.xdsoft",e)})}),x=0,H.on("xchange.xdsoft",function(e){clearTimeout(x),x=setTimeout(function(){for(var e,n,r,s,o,a,l,c="",u=new Date(k.currentTime.getFullYear(),k.currentTime.getMonth(),1,12,0,0),h=0,d=k.now(),p=!1,f=!1,m=[],g=!0,v="",M="";u.getDay()!==E.dayOfWeekStart;)u.setDate(u.getDate()-1);for(c+="<table><thead><tr>",E.weeks&&(c+="<th></th>"),e=0;e<7;e+=1)c+="<th>"+E.i18n[E.lang].dayOfWeek[(e+E.dayOfWeekStart)%7]+"</th>";for(c+="</tr></thead>",c+="<tbody>",E.maxDate!==!1&&(p=k.strToDate(E.maxDate),p=new Date(p.getFullYear(),p.getMonth(),p.getDate(),23,59,59,999)),E.minDate!==!1&&(f=k.strToDate(E.minDate),f=new Date(f.getFullYear(),f.getMonth(),f.getDate()));h<k.currentTime.countDaysInMonth()||u.getDay()!==E.dayOfWeekStart||k.currentTime.getMonth()===u.getMonth();)m=[],h+=1,n=u.getDate(),r=u.getFullYear(),s=u.getMonth(),o=k.getWeekOfYear(u),m.push("xdsoft_date"),a=E.beforeShowDay&&t.isFunction(E.beforeShowDay.call)?E.beforeShowDay.call(H,u):null,p!==!1&&u>p||f!==!1&&u<f||a&&a[0]===!1?m.push("xdsoft_disabled"):E.disabledDates.indexOf(u.dateFormat(E.formatDate))!==-1&&m.push("xdsoft_disabled"),a&&""!==a[1]&&m.push(a[1]),k.currentTime.getMonth()!==s&&m.push("xdsoft_other_month"),(E.defaultSelect||H.data("changed"))&&k.currentTime.dateFormat(E.formatDate)===u.dateFormat(E.formatDate)&&m.push("xdsoft_current"),d.dateFormat(E.formatDate)===u.dateFormat(E.formatDate)&&m.push("xdsoft_today"),(0===u.getDay()||6===u.getDay()||~E.weekends.indexOf(u.dateFormat(E.formatDate)))&&m.push("xdsoft_weekend"),E.beforeShowDay&&t.isFunction(E.beforeShowDay)&&m.push(E.beforeShowDay(u)),g&&(c+="<tr>",g=!1,E.weeks&&(c+="<th>"+o+"</th>")),c+='<td data-date="'+n+'" data-month="'+s+'" data-year="'+r+'" class="xdsoft_date xdsoft_day_of_week'+u.getDay()+" "+m.join(" ")+'"><div>'+n+"</div></td>",u.getDay()===E.dayOfWeekStartPrev&&(c+="</tr>",g=!0),u.setDate(n+1);if(c+="</tbody></table>",N.html(c),P.find(".xdsoft_label span").eq(0).text(E.i18n[E.lang].months[k.currentTime.getMonth()]),P.find(".xdsoft_label span").eq(1).text(k.currentTime.getFullYear()),v="",M="",s="",l=function(t,e){var i=k.now();i.setHours(t),t=parseInt(i.getHours(),10),i.setMinutes(e),e=parseInt(i.getMinutes(),10);var n=new Date(k.currentTime);n.setHours(t),n.setMinutes(e),m=[],(E.minDateTime!==!1&&E.minDateTime>n||E.maxTime!==!1&&k.strtotime(E.maxTime).getTime()<i.getTime()||E.minTime!==!1&&k.strtotime(E.minTime).getTime()>i.getTime())&&m.push("xdsoft_disabled"),(E.initTime||E.defaultSelect||H.data("changed"))&&parseInt(k.currentTime.getHours(),10)===parseInt(t,10)&&(E.step>59||Math[E.roundTime](k.currentTime.getMinutes()/E.step)*E.step===parseInt(e,10))&&(E.defaultSelect||H.data("changed")?m.push("xdsoft_current"):E.initTime&&m.push("xdsoft_init_time")),parseInt(d.getHours(),10)===parseInt(t,10)&&parseInt(d.getMinutes(),10)===parseInt(e,10)&&m.push("xdsoft_today"),v+='<div class="xdsoft_time '+m.join(" ")+'" data-hour="'+t+'" data-minute="'+e+'">'+i.dateFormat(E.formatTime)+"</div>"},E.allowTimes&&t.isArray(E.allowTimes)&&E.allowTimes.length)for(h=0;h<E.allowTimes.length;h+=1)M=k.strtotime(E.allowTimes[h]).getHours(),s=k.strtotime(E.allowTimes[h]).getMinutes(),l(M,s);else for(h=0,e=0;h<(E.hours12?12:24);h+=1)for(e=0;e<60;e+=E.step)M=(h<10?"0":"")+h,s=(e<10?"0":"")+e,l(M,s);for(F.html(v),i="",h=0,h=parseInt(E.yearStart,10)+E.yearOffset;h<=parseInt(E.yearEnd,10)+E.yearOffset;h+=1)i+='<div class="xdsoft_option '+(k.currentTime.getFullYear()===h?"xdsoft_current":"")+'" data-value="'+h+'">'+h+"</div>";for(z.children().eq(0).html(i),h=0,i="";h<=11;h+=1)i+='<div class="xdsoft_option '+(k.currentTime.getMonth()===h?"xdsoft_current":"")+'" data-value="'+h+'">'+E.i18n[E.lang].months[h]+"</div>";U.children().eq(0).html(i),t(H).trigger("generate.xdsoft")},10),e.stopPropagation()}).on("afterOpen.xdsoft",function(){if(E.timepicker){var t,e,i,n;F.find(".xdsoft_current").length?t=".xdsoft_current":F.find(".xdsoft_init_time").length&&(t=".xdsoft_init_time"),t?(e=L[0].clientHeight,i=F[0].offsetHeight,n=F.find(t).index()*E.timeHeightInTimePicker+1,i-e<n&&(n=i-e),L.trigger("scroll_element.xdsoft_scroller",[parseInt(n,10)/(i-e)])):L.trigger("scroll_element.xdsoft_scroller",[0])}}),A=0,N.on("click.xdsoft","td",function(i){i.stopPropagation(),A+=1;var n=t(this),r=k.currentTime;return void 0!==r&&null!==r||(k.currentTime=k.now(),r=k.currentTime),!n.hasClass("xdsoft_disabled")&&(r.setDate(1),r.setFullYear(n.data("year")),r.setMonth(n.data("month")),r.setDate(n.data("date")),H.trigger("select.xdsoft",[r]),e.val(k.str()),(A>1||E.closeOnDateSelect===!0||0===E.closeOnDateSelect&&!E.timepicker)&&!E.inline&&H.trigger("close.xdsoft"),E.onSelectDate&&t.isFunction(E.onSelectDate)&&E.onSelectDate.call(H,k.currentTime,H.data("input"),i),H.data("changed",!0),H.trigger("xchange.xdsoft"),H.trigger("changedatetime.xdsoft"),void setTimeout(function(){A=0},200))}),F.on("click.xdsoft","div",function(e){e.stopPropagation();var i=t(this),n=k.currentTime;return void 0!==n&&null!==n||(k.currentTime=k.now(),n=k.currentTime),!i.hasClass("xdsoft_disabled")&&(n.setHours(i.data("hour")),n.setMinutes(i.data("minute")),H.trigger("select.xdsoft",[n]),H.data("input").val(k.str()),E.inline||H.trigger("close.xdsoft"),E.onSelectTime&&t.isFunction(E.onSelectTime)&&E.onSelectTime.call(H,k.currentTime,H.data("input"),e),H.data("changed",!0),H.trigger("xchange.xdsoft"),void H.trigger("changedatetime.xdsoft"))}),I.on("mousewheel.xdsoft",function(t){return!E.scrollMonth||(t.deltaY<0?k.nextMonth():k.prevMonth(),!1)}),e.on("mousewheel.xdsoft",function(t){return!E.scrollInput||(!E.datepicker&&E.timepicker?(S=F.find(".xdsoft_current").length?F.find(".xdsoft_current").eq(0).index():0,S+t.deltaY>=0&&S+t.deltaY<F.children().length&&(S+=t.deltaY),F.children().eq(S).length&&F.children().eq(S).trigger("mousedown"),!1):E.datepicker&&!E.timepicker?(I.trigger(t,[t.deltaY,t.deltaX,t.deltaY]),e.val&&e.val(k.str()),H.trigger("changedatetime.xdsoft"),!1):void 0)}),H.on("changedatetime.xdsoft",function(e){if(E.onChangeDateTime&&t.isFunction(E.onChangeDateTime)){var i=H.data("input");E.onChangeDateTime.call(H,k.currentTime,i,e),delete E.value,i.trigger("change")}}).on("generate.xdsoft",function(){E.onGenerate&&t.isFunction(E.onGenerate)&&E.onGenerate.call(H,k.currentTime,H.data("input")),B&&(H.trigger("afterOpen.xdsoft"),B=!1)}).on("click.xdsoft",function(t){t.stopPropagation()}),S=0,C=function(){var e=H.data("input").offset(),i=e.top+H.data("input")[0].offsetHeight-1,n=e.left,r="absolute";E.fixed?(i-=t(window).scrollTop(),n-=t(window).scrollLeft(),r="fixed"):(i+H[0].offsetHeight>t(window).height()+t(window).scrollTop()&&(i=e.top-H[0].offsetHeight+1),i<0&&(i=0),n+H[0].offsetWidth>t(window).width()&&(n=t(window).width()-H[0].offsetWidth)),H.css({left:n,top:i,position:r})},H.on("open.xdsoft",function(e){var i=!0;E.onShow&&t.isFunction(E.onShow)&&(i=E.onShow.call(H,k.currentTime,H.data("input"),e)),i!==!1&&(H.show(),C(),t(window).off("resize.xdsoft",C).on("resize.xdsoft",C),E.closeOnWithoutClick&&t([document.body,window]).on("mousedown.xdsoft",function e(){H.trigger("close.xdsoft"),t([document.body,window]).off("mousedown.xdsoft",e)}))}).on("close.xdsoft",function(e){var i=!0;P.find(".xdsoft_month,.xdsoft_year").find(".xdsoft_select").hide(),E.onClose&&t.isFunction(E.onClose)&&(i=E.onClose.call(H,k.currentTime,H.data("input"),e)),i===!1||E.opened||E.inline||H.hide(),e.stopPropagation()}).on("toggle.xdsoft",function(t){H.is(":visible")?H.trigger("close.xdsoft"):H.trigger("open.xdsoft")}).data("input",e),W=0,j=0,H.data("xdsoft_datetime",k),H.setOptions(E),k.setCurrentTime(n()),e.data("xdsoft_datetimepicker",H).on("open.xdsoft focusin.xdsoft mousedown.xdsoft",function(t){e.is(":disabled")||e.data("xdsoft_datetimepicker").is(":visible")&&E.closeOnInputClick||(clearTimeout(W),W=setTimeout(function(){e.is(":disabled")||(B=!0,k.setCurrentTime(n()),H.trigger("open.xdsoft"))},100))}).on("keydown.xdsoft",function(e){var i,n=(this.value,e.which);return[h].indexOf(n)!==-1&&E.enterLikeTab?(i=t("input:visible,textarea:visible"),H.trigger("close.xdsoft"),i.eq(i.index(this)+1).focus(),!1):[M].indexOf(n)!==-1?(H.trigger("close.xdsoft"),!0):void 0})},r=function(e){var i=e.data("xdsoft_datetimepicker");i&&(i.data("xdsoft_datetime",null),i.remove(),e.data("xdsoft_datetimepicker",null).off(".xdsoft"),t(window).off("resize.xdsoft"),t([window,document.body]).off("mousedown.xdsoft"),e.unmousewheel&&e.unmousewheel())},t(document).off("keydown.xdsoftctrl keyup.xdsoftctrl").on("keydown.xdsoftctrl",function(t){t.keyCode===c&&(w=!0)}).on("keyup.xdsoftctrl",function(t){t.keyCode===c&&(w=!1)}),this.each(function(){var e=t(this).data("xdsoft_datetimepicker");if(e){if("string"===t.type(i))switch(i){case"show":t(this).select().focus(),e.trigger("open.xdsoft");break;case"hide":e.trigger("close.xdsoft");break;case"toggle":e.trigger("toggle.xdsoft");break;case"destroy":r(t(this));break;case"reset":this.value=this.defaultValue,this.value&&e.data("xdsoft_datetime").isValidDate(Date.parseDate(this.value,E.format))||e.data("changed",!1),e.data("xdsoft_datetime").setCurrentTime(this.value)}else e.setOptions(i);return 0}"string"!==t.type(i)&&(!E.lazyInit||E.open||E.inline?n(t(this)):A(t(this)))})},t.fn.datetimepicker.defaults=e}(jQuery),function(){!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t:t(jQuery)}(function(t){function e(e){var o=e||window.event,a=l.call(arguments,1),c=0,h=0,d=0,p=0,f=0,m=0;if(e=t.event.fix(o),e.type="mousewheel","detail"in o&&(d=-1*o.detail),"wheelDelta"in o&&(d=o.wheelDelta),"wheelDeltaY"in o&&(d=o.wheelDeltaY),"wheelDeltaX"in o&&(h=-1*o.wheelDeltaX),"axis"in o&&o.axis===o.HORIZONTAL_AXIS&&(h=-1*d,d=0),c=0===d?h:d,"deltaY"in o&&(d=-1*o.deltaY,c=d),"deltaX"in o&&(h=o.deltaX,0===d&&(c=-1*h)),0!==d||0!==h){if(1===o.deltaMode){var g=t.data(this,"mousewheel-line-height");c*=g,d*=g,h*=g}else if(2===o.deltaMode){var v=t.data(this,"mousewheel-page-height");c*=v,d*=v,h*=v}if(p=Math.max(Math.abs(d),Math.abs(h)),(!s||s>p)&&(s=p,n(o,p)&&(s/=40)),n(o,p)&&(c/=40,h/=40,d/=40),c=Math[c>=1?"floor":"ceil"](c/s),h=Math[h>=1?"floor":"ceil"](h/s),d=Math[d>=1?"floor":"ceil"](d/s),u.settings.normalizeOffset&&this.getBoundingClientRect){var M=this.getBoundingClientRect();f=e.clientX-M.left,m=e.clientY-M.top}return e.deltaX=h,e.deltaY=d,e.deltaFactor=s,e.offsetX=f,e.offsetY=m,e.deltaMode=0,a.unshift(e,c,h,d),r&&clearTimeout(r),r=setTimeout(i,200),(t.event.dispatch||t.event.handle).apply(this,a)}}function i(){s=null}function n(t,e){return u.settings.adjustOldDeltas&&"mousewheel"===t.type&&e%120===0}var r,s,o=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],a="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],l=Array.prototype.slice;if(t.event.fixHooks)for(var c=o.length;c;)t.event.fixHooks[o[--c]]=t.event.mouseHooks;var u=t.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var i=a.length;i;)this.addEventListener(a[--i],e,!1);else this.onmousewheel=e;t.data(this,"mousewheel-line-height",u.getLineHeight(this)),t.data(this,"mousewheel-page-height",u.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var i=a.length;i;)this.removeEventListener(a[--i],e,!1);else this.onmousewheel=null;t.removeData(this,"mousewheel-line-height"),t.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var i=t(e),n=i["offsetParent"in t.fn?"offsetParent":"parent"]();return n.length||(n=t("body")),parseInt(n.css("fontSize"),10)||parseInt(i.css("fontSize"),10)||16},getPageHeight:function(e){return t(e).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}),Date.parseFunctions={count:0},Date.parseRegexes=[],Date.formatFunctions={count:0},Date.prototype.dateFormat=function(t){if("unixtime"==t)return parseInt(this.getTime()/1e3);null==Date.formatFunctions[t]&&Date.createNewFormat(t);var e=Date.formatFunctions[t];return this[e]()},Date.createNewFormat=function(format){var funcName="format"+Date.formatFunctions.count++;Date.formatFunctions[format]=funcName;for(var code="Date.prototype."+funcName+" = function() {return ",special=!1,ch="",i=0;i<format.length;++i)ch=format.charAt(i),special||"\\"!=ch?special?(special=!1,code+="'"+String.escape(ch)+"' + "):code+=Date.getFormatCode(ch):special=!0;eval(code.substring(0,code.length-3)+";}")},Date.getFormatCode=function(t){switch(t){case"d":return"String.leftPad(this.getDate(), 2, '0') + ";case"D":return"Date.dayNames[this.getDay()].substring(0, 3) + ";case"j":return"this.getDate() + ";case"l":return"Date.dayNames[this.getDay()] + ";case"S":return"this.getSuffix() + ";case"w":return"this.getDay() + ";case"z":return"this.getDayOfYear() + ";case"W":return"this.getWeekOfYear() + ";case"F":return"Date.monthNames[this.getMonth()] + ";case"m":return"String.leftPad(this.getMonth() + 1, 2, '0') + ";case"M":return"Date.monthNames[this.getMonth()].substring(0, 3) + ";case"n":return"(this.getMonth() + 1) + ";case"t":return"this.getDaysInMonth() + ";case"L":return"(this.isLeapYear() ? 1 : 0) + ";case"Y":return"this.getFullYear() + ";case"y":return"('' + this.getFullYear()).substring(2, 4) + ";case"a":return"(this.getHours() < 12 ? 'am' : 'pm') + ";case"A":return"(this.getHours() < 12 ? 'AM' : 'PM') + ";case"g":return"((this.getHours() %12) ? this.getHours() % 12 : 12) + ";case"G":return"this.getHours() + ";case"h":return"String.leftPad((this.getHours() %12) ? this.getHours() % 12 : 12, 2, '0') + ";case"H":return"String.leftPad(this.getHours(), 2, '0') + ";case"i":return"String.leftPad(this.getMinutes(), 2, '0') + ";case"s":return"String.leftPad(this.getSeconds(), 2, '0') + ";case"O":return"this.getGMTOffset() + ";case"T":return"this.getTimezone() + ";case"Z":return"(this.getTimezoneOffset() * -60) + ";default:return"'"+String.escape(t)+"' + "}},Date.parseDate=function(t,e){if("unixtime"==e)return new Date(isNaN(parseInt(t))?0:1e3*parseInt(t));null==Date.parseFunctions[e]&&Date.createParser(e);var i=Date.parseFunctions[e];return Date[i](t)},Date.createParser=function(format){var funcName="parse"+Date.parseFunctions.count++,regexNum=Date.parseRegexes.length,currentGroup=1;Date.parseFunctions[format]=funcName;for(var code="Date."+funcName+" = function(input) {\nvar y = -1, m = -1, d = -1, h = -1, i = -1, s = -1, z = -1;\nvar d = new Date();\ny = d.getFullYear();\nm = d.getMonth();\nd = d.getDate();\nvar results = input.match(Date.parseRegexes["+regexNum+"]);\nif (results && results.length > 0) {",regex="",special=!1,ch="",i=0;i<format.length;++i)ch=format.charAt(i),special||"\\"!=ch?special?(special=!1,regex+=String.escape(ch)):(obj=Date.formatCodeToRegex(ch,currentGroup),currentGroup+=obj.g,regex+=obj.s,obj.g&&obj.c&&(code+=obj.c)):special=!0;code+="if (y > 0 && z > 0){\nvar doyDate = new Date(y,0);\ndoyDate.setDate(z);\nm = doyDate.getMonth();\nd = doyDate.getDate();\n}",code+="if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0 && s >= 0)\n{return new Date(y, m, d, h, i, s);}\nelse if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0)\n{return new Date(y, m, d, h, i);}\nelse if (y > 0 && m >= 0 && d > 0 && h >= 0)\n{return new Date(y, m, d, h);}\nelse if (y > 0 && m >= 0 && d > 0)\n{return new Date(y, m, d);}\nelse if (y > 0 && m >= 0)\n{return new Date(y, m);}\nelse if (y > 0)\n{return new Date(y);}\n}return null;}",Date.parseRegexes[regexNum]=new RegExp("^"+regex+"$"),eval(code)},Date.formatCodeToRegex=function(t,e){switch(t){case"D":return{g:0,c:null,s:"(?:Sun|Mon|Tue|Wed|Thu|Fri|Sat)"};case"j":case"d":return{g:1,c:"d = parseInt(results["+e+"], 10);\n",s:"(\\d{1,2})"};case"l":return{g:0,c:null,s:"(?:"+Date.dayNames.join("|")+")"};case"S":return{g:0,c:null,s:"(?:st|nd|rd|th)"};case"w":return{g:0,c:null,s:"\\d"};case"z":return{g:1,c:"z = parseInt(results["+e+"], 10);\n",s:"(\\d{1,3})"};case"W":return{g:0,c:null,s:"(?:\\d{2})"};case"F":return{g:1,c:"m = parseInt(Date.monthNumbers[results["+e+"].substring(0, 3)], 10);\n",s:"("+Date.monthNames.join("|")+")"};case"M":return{g:1,c:"m = parseInt(Date.monthNumbers[results["+e+"]], 10);\n",s:"(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)"};case"n":case"m":return{g:1,c:"m = parseInt(results["+e+"], 10) - 1;\n",s:"(\\d{1,2})"};case"t":return{g:0,c:null,s:"\\d{1,2}"};case"L":return{g:0,c:null,s:"(?:1|0)"};case"Y":return{g:1,c:"y = parseInt(results["+e+"], 10);\n",s:"(\\d{4})"};case"y":return{g:1,c:"var ty = parseInt(results["+e+"], 10);\ny = ty > Date.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{1,2})"};case"a":return{g:1,c:"if (results["+e+"] == 'am') {\nif (h == 12) { h = 0; }\n} else { if (h < 12) { h += 12; }}",s:"(am|pm)"};case"A":return{g:1,c:"if (results["+e+"] == 'AM') {\nif (h == 12) { h = 0; }\n} else { if (h < 12) { h += 12; }}",s:"(AM|PM)"};case"g":case"G":case"h":case"H":return{g:1,c:"h = parseInt(results["+e+"], 10);\n",s:"(\\d{1,2})"};case"i":return{g:1,c:"i = parseInt(results["+e+"], 10);\n",s:"(\\d{2})"};case"s":return{g:1,c:"s = parseInt(results["+e+"], 10);\n",s:"(\\d{2})"};case"O":return{g:0,c:null,s:"[+-]\\d{4}"};case"T":return{g:0,c:null,s:"[A-Z]{3}"};case"Z":return{g:0,c:null,s:"[+-]\\d{1,5}"};default:return{g:0,c:null,s:String.escape(t)}}},Date.prototype.getTimezone=function(){return this.toString().replace(/^.*? ([A-Z]{3}) [0-9]{4}.*$/,"$1").replace(/^.*?\(([A-Z])[a-z]+ ([A-Z])[a-z]+ ([A-Z])[a-z]+\)$/,"$1$2$3")},Date.prototype.getGMTOffset=function(){return(this.getTimezoneOffset()>0?"-":"+")+String.leftPad(Math.floor(Math.abs(this.getTimezoneOffset())/60),2,"0")+String.leftPad(Math.abs(this.getTimezoneOffset())%60,2,"0")},Date.prototype.getDayOfYear=function(){var t=0;Date.daysInMonth[1]=this.isLeapYear()?29:28;for(var e=0;e<this.getMonth();++e)t+=Date.daysInMonth[e];return t+this.getDate()},Date.prototype.getWeekOfYear=function(){var t=this.getDayOfYear()+(4-this.getDay()),e=new Date(this.getFullYear(),0,1),i=7-e.getDay()+4;return String.leftPad(Math.ceil((t-i)/7)+1,2,"0")},Date.prototype.isLeapYear=function(){var t=this.getFullYear();return 0==(3&t)&&(t%100||t%400==0&&t)},Date.prototype.getFirstDayOfMonth=function(){var t=(this.getDay()-(this.getDate()-1))%7;return t<0?t+7:t},Date.prototype.getLastDayOfMonth=function(){var t=(this.getDay()+(Date.daysInMonth[this.getMonth()]-this.getDate()))%7;return t<0?t+7:t},Date.prototype.getDaysInMonth=function(){return Date.daysInMonth[1]=this.isLeapYear()?29:28,Date.daysInMonth[this.getMonth()]},Date.prototype.getSuffix=function(){switch(this.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},String.escape=function(t){return t.replace(/('|\\)/g,"\\$1")},String.leftPad=function(t,e,i){var n=new String(t);for(null==i&&(i=" ");n.length<e;)n=i+n;return n},Date.daysInMonth=[31,28,31,30,31,30,31,31,30,31,30,31],Date.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],Date.dayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Date.y2kYear=50,Date.monthNumbers={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},Date.patterns={ISO8601LongPattern:"Y-m-d H:i:s",ISO8601ShortPattern:"Y-m-d",ShortDatePattern:"n/j/Y",LongDatePattern:"l, F d, Y",FullDateTimePattern:"l, F d, Y g:i:s A",MonthDayPattern:"F d",ShortTimePattern:"g:i A",LongTimePattern:"g:i:s A",SortableDateTimePattern:"Y-m-d\\TH:i:s",UniversalSortableDateTimePattern:"Y-m-d H:i:sO",YearMonthPattern:"F, Y"}}(),function(t){t.fn.extend({addTimerClass:function(t,e,i){var n=this;return this.addClass(t),setTimeout(function(){n.removeClass(t),i&&i.call()},e||0),this},closestChild:function(){var t=Array.prototype.slice.call(arguments);return this.find.apply(this,t).first()},closestParent:function(){var t=Array.prototype.slice.call(arguments);return this.parent().closest.apply(this,t)},donetyping:function(e,i){i=i||1e3;var n,r=function(t){n&&(n=null,e.call(t))};return this.each(function(e,s){var o=t(s);o.is(":input")&&o.on("keyup keypress paste",function(t){"keyup"==t.type&&8!=t.keyCode||(clearTimeout(n),n=setTimeout(function(){r(s)},i))}).on("blur",function(){r(s)})})}}),t.expr.filters.hidden=function(e){return!t.expr.filters.visible(e)},t.expr.filters.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)}}(jQuery),jQuery(function(t){t.extend({_isAjaxUploadCompatible:function(){return void 0==this._isCompatible&&(this._isCompatible="undefined"!=typeof(new XMLHttpRequest).upload),this._isCompatible},_isFileParam:function(e){if("object"==typeof e)try{var i=t(e)[0];if(i.name||i.files||i.nodeType&&t(i).is("input[type=file]"))return!0}catch(t){}return!1},_parseFiles:function(e){var i={},n=this;return e=t.isArray(e)?e:[e],this._isAjaxUploadCompatible()?t.each(e,function(e,r){t.each(r,function(e,s){var o=n._isFileParam(s);if(o){var a=[];if(t(s).is("input[type=file]")){for(var l=0;l<t(s).length;l++){var c=t(s)[l];c.nodeType&&c.files&&a.push(c.files)}i[e]=a}else i[e]=s;r[e]=void 0,delete r[e]}})}):t.each(e,function(e,r){t.each(r,function(e,s){var o=n._isFileParam(s);if(o){var a=t(s)[0];a.nodeType&&t(a).is("input[type=file]")&&a.files&&(s=a.files),i[e]=s,r[e]=void 0,delete r[e]}})}),i},ajaxUpload:function(t,e,i,n,r,s){var o=this._parseFiles(e);return this._getUploader().post(this,t,e,o,i,n,r,s)},ajaxDownload:function(t,e,i,n){return this.uploaders.iframeUploader.get(this,t,e,[],i,n)},_getUploader:function(){return this.uploaders[this._isAjaxUploadCompatible()?"ajaxUploader":"iframeUploader"]},_getParamFilledURL:function(e,i){return t.each(i,function(t,i){e+=e.indexOf("?")==-1?"?":"&",e+=t+"="+unescape(encodeURIComponent(i))}),e},uploaders:{ajaxUploader:{post:function(e,i,n,r,s,o,a,l){var c=this;r=this._getFiles(r);var u=[];return l?t(r).each(function(t,r){var l=c.upload(e,i,n,r,s,o,a);u.push(l)}):u=c.upload(e,i,n,r,s,o,a),this._controller(u,r)},_controller:function(e,i){return{files:i,abort:function(){t.each(e,function(t,e){e.abort()})},getFilesDetails:function(){var e=[];return t(i).each(function(t,i){e.push({name:i.fileName,size:i.size})}),e}}},_getFiles:function(e){var i=this,n=[];return t.each(e,function(e,r){r.name?(r.pname=e,n.push(r)):t.each(r,function(t,r){if(r.name)r.pname=e,n.push(r);else for(var s=i._getFiles(r),t=0;t<s.length;t++){var o=s[t];o&&(o.pname=e,n.push(o))}})}),n.length||(n[0]=void 0),n},_getFileName:function(t){return t.fileName?t.fileName:t.name},_getFileSize:function(t){return t.fileSize?t.fileSize:t.size},upload:function(t,e,i,n,r,s,o){var a=new XMLHttpRequest,l=r.customData?r.customData:void 0;if(a.onreadystatechange=function(){if(4==a.readyState){var t=200==a.status?r.success:r.fail;t&&t(a.responseText,a,l)}},r.progress){var c=function(t){var e=Math.floor(t.loaded/t.total*100);t.file=n,void 0!==l?(l.percentage=e,r.progress(t,l)):r.progress(t,e)};a.addEventListener("progress",c,!1),a.upload.addEventListener("progress",c,!1)}return r.complete&&(a.addEventListener("load",r.complete,!1),a.upload.addEventListener("load",r.complete,!1)),r.beforeSend&&r.beforeSend(a),a.open("POST",e,!o),this["undefined"!=typeof FormData?"_doFormUpload":"_doBinaryUpload"](a,i,n,r),a},_doFormUpload:function(e,i,n,r){var s=new FormData;t.each(i,function(t,e){s.append(t,e)}),t.each(n,function(t,e){e&&s.append(e.pname,e)}),r.setHeaders&&r.setHeaders(e),e.send(s)},_doBinaryUpload:function(e,i,n,r){var s="zoho",o="---------------"+s+Math.random(),a="\r\n--"+o,l="",c=this;t.each(i,function(t,e){l+="\r\n"+c._getMultiPartParamStr(t,e),l+="\r\n--"+o}),a+=l,n?(a+="\r\n",a+=this._getMultiPartFileParamStr(n.pname,n),a+="\r\n--"+o+"--"):a+="--",r.setHeaders&&r.setHeaders(e),e.setRequestHeader("Content-Length",a.length),e.setRequestHeader("Content-Type","multipart/form-data; charset: UTF-8; accept-charset: UTF-8; boundary="+o),e.setRequestHeader("Connection","close"),e.sendAsBinary(a)},_getMultiPartFileParamStr:function(t,e){return'Content-Disposition: form-data; name="'+t+'"; filename="'+unescape(encodeURIComponent(e.fileName))+'"\r\nContent-Type: application/octet-stream\r\n\r\n'+e.getAsBinary()},_getMultiPartParamStr:function(t,e){return'Content-Disposition: form-data; name="'+t+'"\r\n\r\n'+unescape(encodeURIComponent(e))}},iframeUploader:{post:function(t,e,i,n,r,s){return this._perform(t,e,i,n,r,s)},get:function(t,e,i,n,r,s){return this._perform(t,e,i,n,r,s,!0)},_perform:function(e,i,n,r,s,o,a){var l=this._createIframe(),c=this._fillParams(e,i,n,r,l.attr("name"),a),u=s.customData?s.customData:void 0,e=this;return l.load(function(i){var n=e.getResponse(t(l[0].contentWindow.document.body),o);s.success&&s.success(n,void 0,u),c.remove(),l.remove()}),s.beforeSend&&s.beforeSend(),c.submit(),this._controller(l,c,r)},getResponse:function(e,i){switch(i){case"json":case"jsonp":return t.parseJSON(e.text());case"html":return e.html();case"text":default:return e.text()}},_controller:function(e,i,n){return{files:[n],abort:function(){e[0].contentWindow.stop()},getFilesDetails:function(){var e=[];return t(n).each(function(i,n){n=t(n),e.push({name:n.val(),size:""})}),e}}},_createIframe:function(){var e="uploadFrame"+(new Date).getTime(),i=t('<iframe name="'+e+'">').attr({src:"about:blank",height:"0",width:"0",frameborder:"0",id:e});return this._iframe=i,t(document.body).append(i),i},_getParamFilledForm:function(e,i,n){t.each(i,function(i,n){if(n){var r=t("<input type=hidden name="+i+">").attr({value:n});e.append(r)}}),t.each(n,function(i,n){n=t(n),n.data("parent",n.parent());var r=n.clone(!0);r.insertBefore(n),e.append(n)})},_fillParams:function(e,i,n,r,s,o){var a=t("<form>").attr({method:o?"get":"post",target:s,action:i});return o||(a.attr("enctype","multipart/form-data"),a[0].encoding="multipart/form-data"),t(document.body).append(a.fadeTo(0,0)),this._getParamFilledForm(a,n,r),a}}}})}),function(t,e){"$:nomunge";var i,n=t.jQuery||t.Cowboy||(t.Cowboy={});n.throttle=i=function(t,i,r,s){function o(){function n(){l=+new Date,r.apply(c,h)}function o(){a=e}var c=this,u=+new Date-l,h=arguments;s&&!a&&n(),a&&clearTimeout(a),s===e&&u>t?n():i!==!0&&(a=setTimeout(s?o:n,s===e?t-u:t))}var a,l=0;return"boolean"!=typeof i&&(s=r,r=i,i=e),n.guid&&(o.guid=r.guid=r.guid||n.guid++),o},n.debounce=function(t,n,r){return r===e?i(t,n,!1):i(t,r,n!==!1)}}(this),function(t){t.whileAsync=function(t){var e=Math.abs(t.delay)||10,i=isNaN(t.bulk)?500:Math.abs(t.bulk),n=t.test||function(){return!0},r=t.loop||function(){},s=t.end||function(){};!function(){for(var t=!1,o=new Date;(t=n())&&(r(),!(0===i||new Date-o>i)););t?setTimeout(arguments.callee,e):s()}()},t.eachAsync=function(e,i){var n=0,r=e.length,s=i.loop||function(){};t.whileAsync(t.extend(i,{test:function(){return n<r},loop:function(){var t=e[n];return s.call(t,n++,t)}}))},t.fn.eachAsync=function(e){return t.eachAsync(this,e),this}}(jQuery),function(){function t(t){function e(e,i,n,r,s,o){for(;s>=0&&o>s;s+=t){var a=r?r[s]:s;n=i(n,e[a],a,e)}return n}return function(i,n,r,s){n=b(n,s,4);var o=!E(i)&&M.keys(i),a=(o||i).length,l=t>0?0:a-1;return arguments.length<3&&(r=i[o?o[l]:l],l+=t),e(i,n,r,o,l,a)}}function e(t){return function(e,i,n){i=Y(i,n);for(var r=w(e),s=t>0?0:r-1;s>=0&&r>s;s+=t)if(i(e[s],s,e))return s;return-1}}function i(t,e,i){return function(n,r,s){var o=0,a=w(n);if("number"==typeof s)t>0?o=s>=0?s:Math.max(s+a,o):a=s>=0?Math.min(s+1,a):s+a+1;else if(i&&s&&a)return s=i(n,r),n[s]===r?s:-1;if(r!==r)return s=e(u.call(n,o,a),M.isNaN),s>=0?s+o:-1;for(s=t>0?o:a-1;s>=0&&a>s;s+=t)if(n[s]===r)return s;return-1}}function n(t,e){var i=k.length,n=t.constructor,r=M.isFunction(n)&&n.prototype||a,s="constructor";for(M.has(t,s)&&!M.contains(e,s)&&e.push(s);i--;)s=k[i],s in t&&t[s]!==r[s]&&!M.contains(e,s)&&e.push(s)}var r=this,s=r._,o=Array.prototype,a=Object.prototype,l=Function.prototype,c=o.push,u=o.slice,h=a.toString,d=a.hasOwnProperty,p=Array.isArray,f=Object.keys,m=l.bind,g=Object.create,v=function(){},M=function(t){return t instanceof M?t:this instanceof M?void(this._wrapped=t):new M(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=M),exports._=M):r._=M,M.VERSION="1.8.3";var b=function(t,e,i){if(void 0===e)return t;switch(null==i?3:i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,r){return t.call(e,i,n,r)};case 4:return function(i,n,r,s){return t.call(e,i,n,r,s)}}return function(){return t.apply(e,arguments)}},Y=function(t,e,i){return null==t?M.identity:M.isFunction(t)?b(t,e,i):M.isObject(t)?M.matcher(t):M.property(t)};M.iteratee=function(t,e){return Y(t,e,1/0)};var y=function(t,e){return function(i){var n=arguments.length;if(2>n||null==i)return i;for(var r=1;n>r;r++)for(var s=arguments[r],o=t(s),a=o.length,l=0;a>l;l++){var c=o[l];e&&void 0!==i[c]||(i[c]=s[c])}return i}},_=function(t){if(!M.isObject(t))return{};if(g)return g(t);v.prototype=t;var e=new v;return v.prototype=null,e},D=function(t){return function(e){return null==e?void 0:e[t]}},T=Math.pow(2,53)-1,w=D("length"),E=function(t){var e=w(t);return"number"==typeof e&&e>=0&&T>=e};M.each=M.forEach=function(t,e,i){e=b(e,i);var n,r;if(E(t))for(n=0,r=t.length;r>n;n++)e(t[n],n,t);else{var s=M.keys(t);for(n=0,r=s.length;r>n;n++)e(t[s[n]],s[n],t)}return t},M.map=M.collect=function(t,e,i){e=Y(e,i);for(var n=!E(t)&&M.keys(t),r=(n||t).length,s=Array(r),o=0;r>o;o++){var a=n?n[o]:o;s[o]=e(t[a],a,t)}return s},M.reduce=M.foldl=M.inject=t(1),M.reduceRight=M.foldr=t(-1),M.find=M.detect=function(t,e,i){var n;return n=E(t)?M.findIndex(t,e,i):M.findKey(t,e,i),void 0!==n&&n!==-1?t[n]:void 0},M.filter=M.select=function(t,e,i){var n=[];return e=Y(e,i),M.each(t,function(t,i,r){e(t,i,r)&&n.push(t)}),n},M.reject=function(t,e,i){return M.filter(t,M.negate(Y(e)),i)},M.every=M.all=function(t,e,i){e=Y(e,i);for(var n=!E(t)&&M.keys(t),r=(n||t).length,s=0;r>s;s++){var o=n?n[s]:s;if(!e(t[o],o,t))return!1}return!0},M.some=M.any=function(t,e,i){e=Y(e,i);for(var n=!E(t)&&M.keys(t),r=(n||t).length,s=0;r>s;s++){var o=n?n[s]:s;if(e(t[o],o,t))return!0}return!1},M.contains=M.includes=M.include=function(t,e,i,n){return E(t)||(t=M.values(t)),("number"!=typeof i||n)&&(i=0),M.indexOf(t,e,i)>=0},M.invoke=function(t,e){var i=u.call(arguments,2),n=M.isFunction(e);return M.map(t,function(t){var r=n?e:t[e];return null==r?r:r.apply(t,i)})},M.pluck=function(t,e){return M.map(t,M.property(e))},M.where=function(t,e){return M.filter(t,M.matcher(e))},M.findWhere=function(t,e){return M.find(t,M.matcher(e))},M.max=function(t,e,i){var n,r,s=-1/0,o=-1/0;if(null==e&&null!=t){t=E(t)?t:M.values(t);for(var a=0,l=t.length;l>a;a++)n=t[a],n>s&&(s=n)}else e=Y(e,i),M.each(t,function(t,i,n){r=e(t,i,n),(r>o||r===-1/0&&s===-1/0)&&(s=t,o=r)});return s},M.min=function(t,e,i){var n,r,s=1/0,o=1/0;if(null==e&&null!=t){t=E(t)?t:M.values(t);for(var a=0,l=t.length;l>a;a++)n=t[a],s>n&&(s=n)}else e=Y(e,i),M.each(t,function(t,i,n){r=e(t,i,n),(o>r||1/0===r&&1/0===s)&&(s=t,o=r)});return s},M.shuffle=function(t){for(var e,i=E(t)?t:M.values(t),n=i.length,r=Array(n),s=0;n>s;s++)e=M.random(0,s),e!==s&&(r[s]=r[e]),r[e]=i[s];return r},M.sample=function(t,e,i){return null==e||i?(E(t)||(t=M.values(t)),t[M.random(t.length-1)]):M.shuffle(t).slice(0,Math.max(0,e))},M.sortBy=function(t,e,i){return e=Y(e,i),M.pluck(M.map(t,function(t,i,n){return{value:t,index:i,criteria:e(t,i,n)}}).sort(function(t,e){var i=t.criteria,n=e.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(n>i||void 0===n)return-1}return t.index-e.index}),"value")};var x=function(t){return function(e,i,n){var r={};return i=Y(i,n),M.each(e,function(n,s){var o=i(n,s,e);t(r,n,o)}),r}};M.groupBy=x(function(t,e,i){M.has(t,i)?t[i].push(e):t[i]=[e]}),M.indexBy=x(function(t,e,i){t[i]=e}),M.countBy=x(function(t,e,i){M.has(t,i)?t[i]++:t[i]=1}),M.toArray=function(t){return t?M.isArray(t)?u.call(t):E(t)?M.map(t,M.identity):M.values(t):[]},M.size=function(t){return null==t?0:E(t)?t.length:M.keys(t).length},M.partition=function(t,e,i){e=Y(e,i);var n=[],r=[];return M.each(t,function(t,i,s){(e(t,i,s)?n:r).push(t)}),[n,r]},M.first=M.head=M.take=function(t,e,i){return null==t?void 0:null==e||i?t[0]:M.initial(t,t.length-e)},M.initial=function(t,e,i){return u.call(t,0,Math.max(0,t.length-(null==e||i?1:e)))},M.last=function(t,e,i){return null==t?void 0:null==e||i?t[t.length-1]:M.rest(t,Math.max(0,t.length-e))},M.rest=M.tail=M.drop=function(t,e,i){return u.call(t,null==e||i?1:e)},M.compact=function(t){return M.filter(t,M.identity)};var A=function(t,e,i,n){for(var r=[],s=0,o=n||0,a=w(t);a>o;o++){var l=t[o];if(E(l)&&(M.isArray(l)||M.isArguments(l))){e||(l=A(l,e,i));var c=0,u=l.length;for(r.length+=u;u>c;)r[s++]=l[c++]}else i||(r[s++]=l)}return r};M.flatten=function(t,e){return A(t,e,!1)},M.without=function(t){return M.difference(t,u.call(arguments,1))},M.uniq=M.unique=function(t,e,i,n){M.isBoolean(e)||(n=i,i=e,e=!1),null!=i&&(i=Y(i,n));for(var r=[],s=[],o=0,a=w(t);a>o;o++){var l=t[o],c=i?i(l,o,t):l;e?(o&&s===c||r.push(l),s=c):i?M.contains(s,c)||(s.push(c),r.push(l)):M.contains(r,l)||r.push(l)}return r},M.union=function(){return M.uniq(A(arguments,!0,!0))},M.intersection=function(t){for(var e=[],i=arguments.length,n=0,r=w(t);r>n;n++){var s=t[n];if(!M.contains(e,s)){for(var o=1;i>o&&M.contains(arguments[o],s);o++);o===i&&e.push(s)}}return e},M.difference=function(t){var e=A(arguments,!0,!0,1);return M.filter(t,function(t){return!M.contains(e,t)})},M.zip=function(){return M.unzip(arguments)},M.unzip=function(t){for(var e=t&&M.max(t,w).length||0,i=Array(e),n=0;e>n;n++)i[n]=M.pluck(t,n);return i},M.object=function(t,e){for(var i={},n=0,r=w(t);r>n;n++)e?i[t[n]]=e[n]:i[t[n][0]]=t[n][1];return i},M.findIndex=e(1),M.findLastIndex=e(-1),M.sortedIndex=function(t,e,i,n){i=Y(i,n,1);for(var r=i(e),s=0,o=w(t);o>s;){var a=Math.floor((s+o)/2);i(t[a])<r?s=a+1:o=a}return s},M.indexOf=i(1,M.findIndex,M.sortedIndex),M.lastIndexOf=i(-1,M.findLastIndex),M.range=function(t,e,i){null==e&&(e=t||0,t=0),i=i||1;for(var n=Math.max(Math.ceil((e-t)/i),0),r=Array(n),s=0;n>s;s++,t+=i)r[s]=t;return r};var S=function(t,e,i,n,r){if(!(n instanceof e))return t.apply(i,r);var s=_(t.prototype),o=t.apply(s,r);return M.isObject(o)?o:s};M.bind=function(t,e){if(m&&t.bind===m)return m.apply(t,u.call(arguments,1));if(!M.isFunction(t))throw new TypeError("Bind must be called on a function");var i=u.call(arguments,2),n=function(){return S(t,n,e,this,i.concat(u.call(arguments)))};return n},M.partial=function(t){var e=u.call(arguments,1),i=function(){for(var n=0,r=e.length,s=Array(r),o=0;r>o;o++)s[o]=e[o]===M?arguments[n++]:e[o];for(;n<arguments.length;)s.push(arguments[n++]);return S(t,i,this,this,s)};return i},M.bindAll=function(t){var e,i,n=arguments.length;if(1>=n)throw new Error("bindAll must be passed function names");for(e=1;n>e;e++)i=arguments[e],t[i]=M.bind(t[i],t);return t},M.memoize=function(t,e){var i=function(n){var r=i.cache,s=""+(e?e.apply(this,arguments):n);return M.has(r,s)||(r[s]=t.apply(this,arguments)),r[s]};return i.cache={},i},M.delay=function(t,e){var i=u.call(arguments,2);return setTimeout(function(){return t.apply(null,i)},e)},M.defer=M.partial(M.delay,M,1),M.throttle=function(t,e,i){var n,r,s,o=null,a=0;i||(i={});var l=function(){a=i.leading===!1?0:M.now(),o=null,s=t.apply(n,r),o||(n=r=null)};return function(){var c=M.now();a||i.leading!==!1||(a=c);var u=e-(c-a);return n=this,r=arguments,0>=u||u>e?(o&&(clearTimeout(o),o=null),a=c,s=t.apply(n,r),o||(n=r=null)):o||i.trailing===!1||(o=setTimeout(l,u)),s}},M.debounce=function(t,e,i){var n,r,s,o,a,l=function(){var c=M.now()-o;e>c&&c>=0?n=setTimeout(l,e-c):(n=null,i||(a=t.apply(s,r),n||(s=r=null)))};return function(){s=this,r=arguments,o=M.now();var c=i&&!n;return n||(n=setTimeout(l,e)),c&&(a=t.apply(s,r),s=r=null),a}},M.wrap=function(t,e){return M.partial(e,t)},M.negate=function(t){return function(){return!t.apply(this,arguments)}},M.compose=function(){var t=arguments,e=t.length-1;return function(){for(var i=e,n=t[e].apply(this,arguments);i--;)n=t[i].call(this,n);return n}},M.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},M.before=function(t,e){var i;return function(){return--t>0&&(i=e.apply(this,arguments)),1>=t&&(e=null),i}},M.once=M.partial(M.before,2);var C=!{toString:null}.propertyIsEnumerable("toString"),k=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];M.keys=function(t){if(!M.isObject(t))return[];if(f)return f(t);var e=[];for(var i in t)M.has(t,i)&&e.push(i);return C&&n(t,e),e},M.allKeys=function(t){if(!M.isObject(t))return[];var e=[];for(var i in t)e.push(i);return C&&n(t,e),e},M.values=function(t){for(var e=M.keys(t),i=e.length,n=Array(i),r=0;i>r;r++)n[r]=t[e[r]];return n},M.mapObject=function(t,e,i){e=Y(e,i);for(var n,r=M.keys(t),s=r.length,o={},a=0;s>a;a++)n=r[a],o[n]=e(t[n],n,t);return o},M.pairs=function(t){for(var e=M.keys(t),i=e.length,n=Array(i),r=0;i>r;r++)n[r]=[e[r],t[e[r]]];return n},M.invert=function(t){for(var e={},i=M.keys(t),n=0,r=i.length;r>n;n++)e[t[i[n]]]=i[n];return e},M.functions=M.methods=function(t){var e=[];for(var i in t)M.isFunction(t[i])&&e.push(i);return e.sort()},M.extend=y(M.allKeys),M.extendOwn=M.assign=y(M.keys),M.findKey=function(t,e,i){e=Y(e,i);for(var n,r=M.keys(t),s=0,o=r.length;o>s;s++)if(n=r[s],e(t[n],n,t))return n},M.pick=function(t,e,i){var n,r,s={},o=t;if(null==o)return s;M.isFunction(e)?(r=M.allKeys(o),n=b(e,i)):(r=A(arguments,!1,!1,1),n=function(t,e,i){return e in i},o=Object(o));for(var a=0,l=r.length;l>a;a++){var c=r[a],u=o[c];n(u,c,o)&&(s[c]=u)}return s},M.omit=function(t,e,i){if(M.isFunction(e))e=M.negate(e);else{var n=M.map(A(arguments,!1,!1,1),String);e=function(t,e){return!M.contains(n,e)}}return M.pick(t,e,i)},M.defaults=y(M.allKeys,!0),M.create=function(t,e){var i=_(t);return e&&M.extendOwn(i,e),i},M.clone=function(t){return M.isObject(t)?M.isArray(t)?t.slice():M.extend({},t):t},M.tap=function(t,e){return e(t),t},M.isMatch=function(t,e){var i=M.keys(e),n=i.length;if(null==t)return!n;for(var r=Object(t),s=0;n>s;s++){var o=i[s];if(e[o]!==r[o]||!(o in r))return!1}return!0};var H=function(t,e,i,n){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;t instanceof M&&(t=t._wrapped),e instanceof M&&(e=e._wrapped);var r=h.call(t);if(r!==h.call(e))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}var s="[object Array]"===r;if(!s){if("object"!=typeof t||"object"!=typeof e)return!1;var o=t.constructor,a=e.constructor;if(o!==a&&!(M.isFunction(o)&&o instanceof o&&M.isFunction(a)&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1}i=i||[],n=n||[];for(var l=i.length;l--;)if(i[l]===t)return n[l]===e;if(i.push(t),n.push(e),s){if(l=t.length,l!==e.length)return!1;for(;l--;)if(!H(t[l],e[l],i,n))return!1}else{var c,u=M.keys(t);if(l=u.length,M.keys(e).length!==l)return!1;for(;l--;)if(c=u[l],!M.has(e,c)||!H(t[c],e[c],i,n))return!1}return i.pop(),n.pop(),!0};M.isEqual=function(t,e){return H(t,e)},M.isEmpty=function(t){return null==t||(E(t)&&(M.isArray(t)||M.isString(t)||M.isArguments(t))?0===t.length:0===M.keys(t).length)},M.isElement=function(t){return!(!t||1!==t.nodeType)},M.isArray=p||function(t){return"[object Array]"===h.call(t)},M.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},M.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){M["is"+t]=function(e){return h.call(e)==="[object "+t+"]"}}),M.isArguments(arguments)||(M.isArguments=function(t){return M.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(M.isFunction=function(t){return"function"==typeof t||!1}),M.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},M.isNaN=function(t){return M.isNumber(t)&&t!==+t},M.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===h.call(t)},M.isNull=function(t){return null===t},M.isUndefined=function(t){return void 0===t},M.has=function(t,e){return null!=t&&d.call(t,e)},M.noConflict=function(){return r._=s,this},M.identity=function(t){return t},M.constant=function(t){return function(){return t}},M.noop=function(){},M.property=D,M.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},M.matcher=M.matches=function(t){return t=M.extendOwn({},t),function(e){return M.isMatch(e,t)}},M.times=function(t,e,i){var n=Array(Math.max(0,t));e=b(e,i,1);for(var r=0;t>r;r++)n[r]=e(r);return n},M.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},M.now=Date.now||function(){return(new Date).getTime()};var O={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},I=M.invert(O),P=function(t){var e=function(e){return t[e]},i="(?:"+M.keys(t).join("|")+")",n=RegExp(i),r=RegExp(i,"g");return function(t){return t=null==t?"":""+t,n.test(t)?t.replace(r,e):t}};M.escape=P(O),M.unescape=P(I),M.result=function(t,e,i){var n=null==t?void 0:t[e];return void 0===n&&(n=i),M.isFunction(n)?n.call(t):n};var N=0;M.uniqueId=function(t){var e=++N+"";return t?t+e:e},M.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var R=/(.)^/,L={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},F=/\\|'|\r|\n|\u2028|\u2029/g,U=function(t){return"\\"+L[t]};M.template=function(t,e,i){!e&&i&&(e=i),e=M.defaults({},e,M.templateSettings);var n=RegExp([(e.escape||R).source,(e.interpolate||R).source,(e.evaluate||R).source].join("|")+"|$","g"),r=0,s="__p+='";t.replace(n,function(e,i,n,o,a){return s+=t.slice(r,a).replace(F,U),r=a+e.length,i?s+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":n?s+="'+\n((__t=("+n+"))==null?'':__t)+\n'":o&&(s+="';\n"+o+"\n__p+='"),e}),s+="';\n",e.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{var o=new Function(e.variable||"obj","_",s)}catch(t){throw t.source=s,t}var a=function(t){return o.call(this,t,M)},l=e.variable||"obj";return a.source="function("+l+"){\n"+s+"}",a},M.chain=function(t){var e=M(t);return e._chain=!0,e};var z=function(t,e){return t._chain?M(e).chain():e};M.mixin=function(t){M.each(M.functions(t),function(e){var i=M[e]=t[e];M.prototype[e]=function(){var t=[this._wrapped];return c.apply(t,arguments),z(this,i.apply(M,t))}})},M.mixin(M),M.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=o[t];M.prototype[t]=function(){var i=this._wrapped;return e.apply(i,arguments),"shift"!==t&&"splice"!==t||0!==i.length||delete i[0],z(this,i)}}),M.each(["concat","join","slice"],function(t){var e=o[t];M.prototype[t]=function(){return z(this,e.apply(this._wrapped,arguments))}}),M.prototype.value=function(){return this._wrapped},M.prototype.valueOf=M.prototype.toJSON=M.prototype.value,M.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return M})}.call(this),function(t,e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define(e):t.printStackTrace=e()}(this,function(){function t(e){e=e||{guess:!0};var i=e.e||null,n=!!e.guess,r=new t.implementation,s=r.run(i);return n?r.guessAnonymousFunctions(s):s}return t.implementation=function(){},t.implementation.prototype={run:function(t,e){return t=t||this.createException(),e=e||this.mode(t),"other"===e?this.other(arguments.callee):this[e](t)},createException:function(){try{this.undef()}catch(t){return t}},mode:function(t){return t.arguments&&t.stack?"chrome":t.stack&&t.sourceURL?"safari":t.stack&&t.number?"ie":t.stack&&t.fileName?"firefox":t.message&&t["opera#sourceloc"]?t.stacktrace?t.message.indexOf("\n")>-1&&t.message.split("\n").length>t.stacktrace.split("\n").length?"opera9":"opera10a":"opera9":t.message&&t.stack&&t.stacktrace?t.stacktrace.indexOf("called from line")<0?"opera10b":"opera11":t.stack&&!t.fileName?"chrome":"other"},instrumentFunction:function(e,i,n){e=e||window;var r=e[i];e[i]=function(){return n.call(this,t().slice(4)),e[i]._instrumented.apply(this,arguments)},e[i]._instrumented=r},deinstrumentFunction:function(t,e){t[e].constructor===Function&&t[e]._instrumented&&t[e]._instrumented.constructor===Function&&(t[e]=t[e]._instrumented)},chrome:function(t){return(t.stack+"\n").replace(/^[\s\S]+?\s+at\s+/," at ").replace(/^\s+(at eval )?at\s+/gm,"").replace(/^([^\(]+?)([\n$])/gm,"{anonymous}() ($1)$2").replace(/^Object.<anonymous>\s*\(([^\)]+)\)/gm,"{anonymous}() ($1)").replace(/^(.+) \((.+)\)$/gm,"$1@$2").split("\n").slice(0,-1)},safari:function(t){return t.stack.replace(/\[native code\]\n/m,"").replace(/^(?=\w+Error\:).*$\n/m,"").replace(/^@/gm,"{anonymous}()@").split("\n")},ie:function(t){return t.stack.replace(/^\s*at\s+(.*)$/gm,"$1").replace(/^Anonymous function\s+/gm,"{anonymous}() ").replace(/^(.+)\s+\((.+)\)$/gm,"$1@$2").split("\n").slice(1)},firefox:function(t){return t.stack.replace(/(?:\n@:0)?\s+$/m,"").replace(/^(?:\((\S*)\))?@/gm,"{anonymous}($1)@").split("\n")},opera11:function(t){for(var e="{anonymous}",i=/^.*line (\d+), column (\d+)(?: in (.+))? in (\S+):$/,n=t.stacktrace.split("\n"),r=[],s=0,o=n.length;s<o;s+=2){var a=i.exec(n[s]);if(a){var l=a[4]+":"+a[1]+":"+a[2],c=a[3]||"global code";c=c.replace(/<anonymous function: (\S+)>/,"$1").replace(/<anonymous function>/,e),r.push(c+"@"+l+" -- "+n[s+1].replace(/^\s+/,""))}}return r},opera10b:function(t){for(var e=/^(.*)@(.+):(\d+)$/,i=t.stacktrace.split("\n"),n=[],r=0,s=i.length;r<s;r++){var o=e.exec(i[r]);if(o){var a=o[1]?o[1]+"()":"global code";n.push(a+"@"+o[2]+":"+o[3])}}return n},opera10a:function(t){for(var e="{anonymous}",i=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,n=t.stacktrace.split("\n"),r=[],s=0,o=n.length;s<o;s+=2){var a=i.exec(n[s]);if(a){var l=a[3]||e;r.push(l+"()@"+a[2]+":"+a[1]+" -- "+n[s+1].replace(/^\s+/,""))}}return r},opera9:function(t){for(var e="{anonymous}",i=/Line (\d+).*script (?:in )?(\S+)/i,n=t.message.split("\n"),r=[],s=2,o=n.length;s<o;s+=2){var a=i.exec(n[s]);a&&r.push(e+"()@"+a[2]+":"+a[1]+" -- "+n[s+1].replace(/^\s+/,""))}return r},other:function(t){for(var e,i,n="{anonymous}",r=/function\s*([\w\-$]+)?\s*\(/i,s=[],o=10,a=Array.prototype.slice;t&&t.arguments&&s.length<o;){e=r.test(t.toString())?RegExp.$1||n:n,i=a.call(t.arguments||[]),s[s.length]=e+"("+this.stringifyArguments(i)+")";try{t=t.caller}catch(t){s[s.length]=""+t;break}}return s},stringifyArguments:function(t){for(var e=[],i=Array.prototype.slice,n=0;n<t.length;++n){var r=t[n];void 0===r?e[n]="undefined":null===r?e[n]="null":r.constructor&&(r.constructor===Array?r.length<3?e[n]="["+this.stringifyArguments(r)+"]":e[n]="["+this.stringifyArguments(i.call(r,0,1))+"..."+this.stringifyArguments(i.call(r,-1))+"]":r.constructor===Object?e[n]="#object":r.constructor===Function?e[n]="#function":r.constructor===String?e[n]='"'+r+'"':r.constructor===Number?e[n]=r:e[n]="?")}return e.join(",")},sourceCache:{},ajax:function(t){var e=this.createXMLHTTPObject();if(e)try{return e.open("GET",t,!1),e.send(null),e.responseText}catch(t){}return""},createXMLHTTPObject:function(){for(var t,e=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],i=0;i<e.length;i++)try{return t=e[i](),this.createXMLHTTPObject=e[i],t}catch(t){}},isSameDomain:function(t){return"undefined"!=typeof location&&t.indexOf(location.hostname)!==-1},getSource:function(t){return this.sourceCache[t]||(this.sourceCache[t]=this.ajax(t).split("\n")),this.sourceCache[t]},guessAnonymousFunctions:function(t){for(var e=0;e<t.length;++e){var i=/\{anonymous\}\(.*\)@(.*)/,n=/^(.*?)(?::(\d+))(?::(\d+))?(?: -- .+)?$/,r=t[e],s=i.exec(r);if(s){var o=n.exec(s[1]);if(o){var a=o[1],l=o[2],c=o[3]||0;if(a&&this.isSameDomain(a)&&l){var u=this.guessAnonymousFunction(a,l,c);t[e]=r.replace("{anonymous}",u)}}}}return t},guessAnonymousFunction:function(t,e,i){var n;try{n=this.findFunctionName(this.getSource(t),e)}catch(e){n="getSource failed with url: "+t+", exception: "+e.toString()}return n},findFunctionName:function(t,e){for(var i,n,r,s=/function\s+([^(]*?)\s*\(([^)]*)\)/,o=/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*function\b/,a=/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*(?:eval|new Function)\b/,l="",c=Math.min(e,20),u=0;u<c;++u)if(i=t[e-u-1],r=i.indexOf("//"),r>=0&&(i=i.substr(0,r)),i){if(l=i+l,n=o.exec(l),n&&n[1])return n[1];if(n=s.exec(l),n&&n[1])return n[1];if(n=a.exec(l),n&&n[1])return n[1]}return"(?)"}},t}),function(){function t(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}t.prototype.diff_main=function(t,e,i,n){if("undefined"==typeof n&&(n=0>=this.Diff_Timeout?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout),null==t||null==e)throw Error("Null input. (diff_main)");if(t==e)return t?[[0,t]]:[];"undefined"==typeof i&&(i=!0);var r=i,s=this.diff_commonPrefix(t,e);i=t.substring(0,s),t=t.substring(s),e=e.substring(s);var s=this.diff_commonSuffix(t,e),o=t.substring(t.length-s);return t=t.substring(0,t.length-s),e=e.substring(0,e.length-s),t=this.diff_compute_(t,e,r,n),i&&t.unshift([0,i]),o&&t.push([0,o]),this.diff_cleanupMerge(t),t},t.prototype.diff_compute_=function(t,e,i,n){if(!t)return[[1,e]];if(!e)return[[-1,t]];var r=t.length>e.length?t:e,s=t.length>e.length?e:t,o=r.indexOf(s);return-1!=o?(i=[[1,r.substring(0,o)],[0,s],[1,r.substring(o+s.length)]],t.length>e.length&&(i[0][0]=i[2][0]=-1),i):1==s.length?[[-1,t],[1,e]]:(r=this.diff_halfMatch_(t,e))?(s=r[0],t=r[1],o=r[2],e=r[3],r=r[4],s=this.diff_main(s,o,i,n),i=this.diff_main(t,e,i,n),s.concat([[0,r]],i)):i&&100<t.length&&100<e.length?this.diff_lineMode_(t,e,n):this.diff_bisect_(t,e,n)},t.prototype.diff_lineMode_=function(t,e,i){var n=this.diff_linesToChars_(t,e);t=n.chars1,e=n.chars2,n=n.lineArray,t=this.diff_main(t,e,!1,i),this.diff_charsToLines_(t,n),this.diff_cleanupSemantic(t),t.push([0,""]);for(var r=n=e=0,s="",o="";e<t.length;){switch(t[e][0]){case 1:r++,o+=t[e][1];break;case-1:n++,s+=t[e][1];break;case 0:if(1<=n&&1<=r){for(t.splice(e-n-r,n+r),e=e-n-r,n=this.diff_main(s,o,!1,i),r=n.length-1;0<=r;r--)t.splice(e,0,n[r]);e+=n.length}n=r=0,o=s=""}e++}return t.pop(),t},t.prototype.diff_bisect_=function(t,e,i){for(var n=t.length,r=e.length,s=Math.ceil((n+r)/2),o=s,a=2*s,l=Array(a),c=Array(a),u=0;u<a;u++)l[u]=-1,c[u]=-1;l[o+1]=0,c[o+1]=0;for(var u=n-r,h=0!=u%2,d=0,p=0,f=0,m=0,g=0;g<s&&!((new Date).getTime()>i);g++){for(var v=-g+d;v<=g-p;v+=2){var M,b=o+v;M=v==-g||v!=g&&l[b-1]<l[b+1]?l[b+1]:l[b-1]+1;for(var Y=M-v;M<n&&Y<r&&t.charAt(M)==e.charAt(Y);)M++,Y++;if(l[b]=M,M>n)p+=2;else if(Y>r)d+=2;else if(h&&(b=o+u-v,0<=b&&b<a&&-1!=c[b])){var y=n-c[b];if(M>=y)return this.diff_bisectSplit_(t,e,M,Y,i)}}for(v=-g+f;v<=g-m;v+=2){for(b=o+v,y=v==-g||v!=g&&c[b-1]<c[b+1]?c[b+1]:c[b-1]+1,M=y-v;y<n&&M<r&&t.charAt(n-y-1)==e.charAt(r-M-1);)y++,M++;if(c[b]=y,y>n)m+=2;else if(M>r)f+=2;else if(!h&&(b=o+u-v,0<=b&&b<a&&-1!=l[b]&&(M=l[b],Y=o+M-b,y=n-y,M>=y)))return this.diff_bisectSplit_(t,e,M,Y,i)}}return[[-1,t],[1,e]]},t.prototype.diff_bisectSplit_=function(t,e,i,n,r){var s=t.substring(0,i),o=e.substring(0,n);return t=t.substring(i),e=e.substring(n),s=this.diff_main(s,o,!1,r),r=this.diff_main(t,e,!1,r),s.concat(r)},t.prototype.diff_linesToChars_=function(t,e){function i(t){for(var e="",i=0,s=-1,o=n.length;s<t.length-1;){s=t.indexOf("\n",i),-1==s&&(s=t.length-1);var a=t.substring(i,s+1),i=s+1;(r.hasOwnProperty?r.hasOwnProperty(a):void 0!==r[a])?e+=String.fromCharCode(r[a]):(e+=String.fromCharCode(o),r[a]=o,n[o++]=a)}return e}var n=[],r={};n[0]="";var s=i(t),o=i(e);return{chars1:s,chars2:o,lineArray:n}},t.prototype.diff_charsToLines_=function(t,e){for(var i=0;i<t.length;i++){for(var n=t[i][1],r=[],s=0;s<n.length;s++)r[s]=e[n.charCodeAt(s)];t[i][1]=r.join("")}},t.prototype.diff_commonPrefix=function(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;for(var i=0,n=Math.min(t.length,e.length),r=n,s=0;i<r;)t.substring(s,r)==e.substring(s,r)?s=i=r:n=r,r=Math.floor((n-i)/2+i);return r},t.prototype.diff_commonSuffix=function(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;for(var i=0,n=Math.min(t.length,e.length),r=n,s=0;i<r;)t.substring(t.length-r,t.length-s)==e.substring(e.length-r,e.length-s)?s=i=r:n=r,r=Math.floor((n-i)/2+i);return r},t.prototype.diff_commonOverlap_=function(t,e){var i=t.length,n=e.length;if(0==i||0==n)return 0;if(i>n?t=t.substring(i-n):i<n&&(e=e.substring(0,i)),i=Math.min(i,n),t==e)return i;for(var n=0,r=1;;){var s=t.substring(i-r),s=e.indexOf(s);if(-1==s)return n;r+=s,0!=s&&t.substring(i-r)!=e.substring(0,r)||(n=r,r++)}},t.prototype.diff_halfMatch_=function(t,e){function i(t,e,i){for(var n,r,s,a,l=t.substring(i,i+Math.floor(t.length/4)),c=-1,u="";-1!=(c=e.indexOf(l,c+1));){var h=o.diff_commonPrefix(t.substring(i),e.substring(c)),d=o.diff_commonSuffix(t.substring(0,i),e.substring(0,c));u.length<d+h&&(u=e.substring(c-d,c)+e.substring(c,c+h),n=t.substring(0,i-d),r=t.substring(i+h),s=e.substring(0,c-d),a=e.substring(c+h))}return 2*u.length>=t.length?[n,r,s,a,u]:null}if(0>=this.Diff_Timeout)return null;var n=t.length>e.length?t:e,r=t.length>e.length?e:t;if(4>n.length||2*r.length<n.length)return null;var s,o=this,a=i(n,r,Math.ceil(n.length/4)),n=i(n,r,Math.ceil(n.length/2));if(!a&&!n)return null;s=n?a&&a[4].length>n[4].length?a:n:a;var l;return t.length>e.length?(a=s[0],n=s[1],r=s[2],l=s[3]):(r=s[0],l=s[1],a=s[2],n=s[3]),s=s[4],[a,n,r,l,s]},t.prototype.diff_cleanupSemantic=function(t){for(var e=!1,i=[],n=0,r=null,s=0,o=0,a=0,l=0,c=0;s<t.length;)0==t[s][0]?(i[n++]=s,o=l,a=c,c=l=0,r=t[s][1]):(1==t[s][0]?l+=t[s][1].length:c+=t[s][1].length,r&&r.length<=Math.max(o,a)&&r.length<=Math.max(l,c)&&(t.splice(i[n-1],0,[-1,r]),t[i[n-1]+1][0]=1,n--,n--,s=0<n?i[n-1]:-1,c=l=a=o=0,r=null,e=!0)),s++;for(e&&this.diff_cleanupMerge(t),this.diff_cleanupSemanticLossless(t),s=1;s<t.length;)-1==t[s-1][0]&&1==t[s][0]&&(e=t[s-1][1],i=t[s][1],n=this.diff_commonOverlap_(e,i),r=this.diff_commonOverlap_(i,e),n>=r?(n>=e.length/2||n>=i.length/2)&&(t.splice(s,0,[0,i.substring(0,n)]),t[s-1][1]=e.substring(0,e.length-n),t[s+1][1]=i.substring(n),s++):(r>=e.length/2||r>=i.length/2)&&(t.splice(s,0,[0,e.substring(0,r)]),t[s-1][0]=1,t[s-1][1]=i.substring(0,i.length-r),t[s+1][0]=-1,t[s+1][1]=e.substring(r),s++),s++),s++},t.prototype.diff_cleanupSemanticLossless=function(e){function i(e,i){if(!e||!i)return 6;var n=e.charAt(e.length-1),r=i.charAt(0),s=n.match(t.nonAlphaNumericRegex_),o=r.match(t.nonAlphaNumericRegex_),a=s&&n.match(t.whitespaceRegex_),l=o&&r.match(t.whitespaceRegex_),n=a&&n.match(t.linebreakRegex_),r=l&&r.match(t.linebreakRegex_),c=n&&e.match(t.blanklineEndRegex_),u=r&&i.match(t.blanklineStartRegex_);return c||u?5:n||r?4:s&&!a&&l?3:a||l?2:s||o?1:0}for(var n=1;n<e.length-1;){if(0==e[n-1][0]&&0==e[n+1][0]){var r=e[n-1][1],s=e[n][1],o=e[n+1][1],a=this.diff_commonSuffix(r,s);if(a)var l=s.substring(s.length-a),r=r.substring(0,r.length-a),s=l+s.substring(0,s.length-a),o=l+o;for(var a=r,l=s,c=o,u=i(r,s)+i(s,o);s.charAt(0)===o.charAt(0);){var r=r+s.charAt(0),s=s.substring(1)+o.charAt(0),o=o.substring(1),h=i(r,s)+i(s,o);h>=u&&(u=h,a=r,l=s,c=o)}e[n-1][1]!=a&&(a?e[n-1][1]=a:(e.splice(n-1,1),n--),e[n][1]=l,c?e[n+1][1]=c:(e.splice(n+1,1),n--))}n++}},t.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,t.whitespaceRegex_=/\s/,t.linebreakRegex_=/[\r\n]/,t.blanklineEndRegex_=/\n\r?\n$/,t.blanklineStartRegex_=/^\r?\n\r?\n/,t.prototype.diff_cleanupEfficiency=function(t){for(var e=!1,i=[],n=0,r=null,s=0,o=!1,a=!1,l=!1,c=!1;s<t.length;)0==t[s][0]?(t[s][1].length<this.Diff_EditCost&&(l||c)?(i[n++]=s,o=l,a=c,r=t[s][1]):(n=0,r=null),l=c=!1):(-1==t[s][0]?c=!0:l=!0,r&&(o&&a&&l&&c||r.length<this.Diff_EditCost/2&&3==o+a+l+c)&&(t.splice(i[n-1],0,[-1,r]),t[i[n-1]+1][0]=1,n--,r=null,o&&a?(l=c=!0,n=0):(n--,s=0<n?i[n-1]:-1,l=c=!1),e=!0)),s++;e&&this.diff_cleanupMerge(t)},t.prototype.diff_cleanupMerge=function(t){t.push([0,""]);for(var e,i=0,n=0,r=0,s="",o="";i<t.length;)switch(t[i][0]){case 1:r++,o+=t[i][1],i++;break;case-1:n++,s+=t[i][1],i++;break;case 0:1<n+r?(0!==n&&0!==r&&(e=this.diff_commonPrefix(o,s),0!==e&&(0<i-n-r&&0==t[i-n-r-1][0]?t[i-n-r-1][1]+=o.substring(0,e):(t.splice(0,0,[0,o.substring(0,e)]),i++),o=o.substring(e),s=s.substring(e)),e=this.diff_commonSuffix(o,s),0!==e&&(t[i][1]=o.substring(o.length-e)+t[i][1],o=o.substring(0,o.length-e),s=s.substring(0,s.length-e))),0===n?t.splice(i-r,n+r,[1,o]):0===r?t.splice(i-n,n+r,[-1,s]):t.splice(i-n-r,n+r,[-1,s],[1,o]),i=i-n-r+(n?1:0)+(r?1:0)+1):0!==i&&0==t[i-1][0]?(t[i-1][1]+=t[i][1],t.splice(i,1)):i++,n=r=0,o=s=""}for(""===t[t.length-1][1]&&t.pop(),n=!1,i=1;i<t.length-1;)0==t[i-1][0]&&0==t[i+1][0]&&(t[i][1].substring(t[i][1].length-t[i-1][1].length)==t[i-1][1]?(t[i][1]=t[i-1][1]+t[i][1].substring(0,t[i][1].length-t[i-1][1].length),t[i+1][1]=t[i-1][1]+t[i+1][1],t.splice(i-1,1),n=!0):t[i][1].substring(0,t[i+1][1].length)==t[i+1][1]&&(t[i-1][1]+=t[i+1][1],t[i][1]=t[i][1].substring(t[i+1][1].length)+t[i+1][1],t.splice(i+1,1),n=!0)),i++;n&&this.diff_cleanupMerge(t)},t.prototype.diff_xIndex=function(t,e){var i,n=0,r=0,s=0,o=0;for(i=0;i<t.length&&(1!==t[i][0]&&(n+=t[i][1].length),-1!==t[i][0]&&(r+=t[i][1].length),!(n>e));i++)s=n,o=r;return t.length!=i&&-1===t[i][0]?o:o+(e-s)},t.prototype.diff_prettyHtml=function(t){for(var e=[],i=/&/g,n=/</g,r=/>/g,s=/\n/g,o=0;o<t.length;o++){var a=t[o][0],l=t[o][1],l=l.replace(i,"&amp;").replace(n,"&lt;").replace(r,"&gt;").replace(s,"&para;<br>");switch(a){case 1:e[o]='<ins style="background:#e6ffe6;">'+l+"</ins>";break;case-1:e[o]='<del style="background:#ffe6e6;">'+l+"</del>";break;case 0:e[o]="<span>"+l+"</span>";}}return e.join("")},t.prototype.diff_text1=function(t){for(var e=[],i=0;i<t.length;i++)1!==t[i][0]&&(e[i]=t[i][1]);return e.join("")},t.prototype.diff_text2=function(t){for(var e=[],i=0;i<t.length;i++)-1!==t[i][0]&&(e[i]=t[i][1]);return e.join("")},t.prototype.diff_levenshtein=function(t){for(var e=0,i=0,n=0,r=0;r<t.length;r++){var s=t[r][0],o=t[r][1];switch(s){case 1:i+=o.length;break;case-1:n+=o.length;break;case 0:e+=Math.max(i,n),n=i=0}}return e+=Math.max(i,n)},t.prototype.diff_toDelta=function(t){for(var e=[],i=0;i<t.length;i++)switch(t[i][0]){case 1:e[i]="+"+encodeURI(t[i][1]);break;case-1:e[i]="-"+t[i][1].length;break;case 0:e[i]="="+t[i][1].length}return e.join("\t").replace(/%20/g," ")},t.prototype.diff_fromDelta=function(t,e){for(var i=[],n=0,r=0,s=e.split(/\t/g),o=0;o<s.length;o++){var a=s[o].substring(1);switch(s[o].charAt(0)){case"+":try{i[n++]=[1,decodeURI(a)]}catch(t){throw Error("Illegal escape in diff_fromDelta: "+a)}break;case"-":case"=":var l=parseInt(a,10);if(isNaN(l)||0>l)throw Error("Invalid number in diff_fromDelta: "+a);a=t.substring(r,r+=l),"="==s[o].charAt(0)?i[n++]=[0,a]:i[n++]=[-1,a];break;default:if(s[o])throw Error("Invalid diff operation in diff_fromDelta: "+s[o])}}if(r!=t.length)throw Error("Delta length ("+r+") does not equal source text length ("+t.length+").");return i},t.prototype.match_main=function(t,e,i){if(null==t||null==e||null==i)throw Error("Null input. (match_main)");return i=Math.max(0,Math.min(i,t.length)),t==e?0:t.length?t.substring(i,i+e.length)==e?i:this.match_bitap_(t,e,i):-1},t.prototype.match_bitap_=function(t,e,i){function n(t,n){var r=t/e.length,o=Math.abs(i-n);return s.Match_Distance?r+o/s.Match_Distance:o?1:r}if(e.length>this.Match_MaxBits)throw Error("Pattern too long for this browser.");var r=this.match_alphabet_(e),s=this,o=this.Match_Threshold,a=t.indexOf(e,i);-1!=a&&(o=Math.min(n(0,a),o),a=t.lastIndexOf(e,i+e.length),-1!=a&&(o=Math.min(n(0,a),o)));for(var l,c,u,h=1<<e.length-1,a=-1,d=e.length+t.length,p=0;p<e.length;p++){for(l=0,c=d;l<c;)n(p,i+c)<=o?l=c:d=c,c=Math.floor((d-l)/2+l);d=c,l=Math.max(1,i-c+1);var f=Math.min(i+c,t.length)+e.length;for(c=Array(f+2),c[f+1]=(1<<p)-1;f>=l;f--){var m=r[t.charAt(f-1)];if(c[f]=0===p?(c[f+1]<<1|1)&m:(c[f+1]<<1|1)&m|((u[f+1]|u[f])<<1|1)|u[f+1],c[f]&h&&(m=n(p,f-1),m<=o)){if(o=m,a=f-1,!(a>i))break;l=Math.max(1,2*i-a)}}if(n(p+1,i)>o)break;u=c}return a},t.prototype.match_alphabet_=function(t){for(var e={},i=0;i<t.length;i++)e[t.charAt(i)]=0;for(i=0;i<t.length;i++)e[t.charAt(i)]|=1<<t.length-i-1;return e},t.prototype.patch_addContext_=function(t,e){if(0!=e.length){for(var i=e.substring(t.start2,t.start2+t.length1),n=0;e.indexOf(i)!=e.lastIndexOf(i)&&i.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)n+=this.Patch_Margin,i=e.substring(t.start2-n,t.start2+t.length1+n);n+=this.Patch_Margin,(i=e.substring(t.start2-n,t.start2))&&t.diffs.unshift([0,i]),(n=e.substring(t.start2+t.length1,t.start2+t.length1+n))&&t.diffs.push([0,n]),t.start1-=i.length,t.start2-=i.length,t.length1+=i.length+n.length,t.length2+=i.length+n.length}},t.prototype.patch_make=function(e,i,n){var r;if("string"==typeof e&&"string"==typeof i&&"undefined"==typeof n)r=e,i=this.diff_main(r,i,!0),2<i.length&&(this.diff_cleanupSemantic(i),this.diff_cleanupEfficiency(i));else if(e&&"object"==typeof e&&"undefined"==typeof i&&"undefined"==typeof n)i=e,r=this.diff_text1(i);else if("string"==typeof e&&i&&"object"==typeof i&&"undefined"==typeof n)r=e;else{if("string"!=typeof e||"string"!=typeof i||!n||"object"!=typeof n)throw Error("Unknown call format to patch_make.");r=e,i=n}if(0===i.length)return[];n=[],e=new t.patch_obj;for(var s=0,o=0,a=0,l=r,c=0;c<i.length;c++){var u=i[c][0],h=i[c][1];switch(!s&&0!==u&&(e.start1=o,e.start2=a),u){case 1:e.diffs[s++]=i[c],e.length2+=h.length,r=r.substring(0,a)+h+r.substring(a);break;case-1:e.length1+=h.length,e.diffs[s++]=i[c],r=r.substring(0,a)+r.substring(a+h.length);break;case 0:h.length<=2*this.Patch_Margin&&s&&i.length!=c+1?(e.diffs[s++]=i[c],e.length1+=h.length,e.length2+=h.length):h.length>=2*this.Patch_Margin&&s&&(this.patch_addContext_(e,l),n.push(e),e=new t.patch_obj,s=0,l=r,o=a)}1!==u&&(o+=h.length),-1!==u&&(a+=h.length)}return s&&(this.patch_addContext_(e,l),n.push(e)),n},t.prototype.patch_deepCopy=function(e){for(var i=[],n=0;n<e.length;n++){var r=e[n],s=new t.patch_obj;s.diffs=[];for(var o=0;o<r.diffs.length;o++)s.diffs[o]=r.diffs[o].slice();s.start1=r.start1,s.start2=r.start2,s.length1=r.length1,s.length2=r.length2,i[n]=s}return i},t.prototype.patch_apply=function(t,e){if(0==t.length)return[e,[]];t=this.patch_deepCopy(t);var i=this.patch_addPadding(t);e=i+e+i,this.patch_splitMax(t);for(var n=0,r=[],s=0;s<t.length;s++){var o,a=t[s].start2+n,l=this.diff_text1(t[s].diffs),c=-1;if(l.length>this.Match_MaxBits?(o=this.match_main(e,l.substring(0,this.Match_MaxBits),a),-1!=o&&(c=this.match_main(e,l.substring(l.length-this.Match_MaxBits),a+l.length-this.Match_MaxBits),-1==c||o>=c)&&(o=-1)):o=this.match_main(e,l,a),-1==o)r[s]=!1,n-=t[s].length2-t[s].length1;else if(r[s]=!0,n=o-a,a=-1==c?e.substring(o,o+l.length):e.substring(o,c+this.Match_MaxBits),l==a)e=e.substring(0,o)+this.diff_text2(t[s].diffs)+e.substring(o+l.length);else if(a=this.diff_main(l,a,!1),l.length>this.Match_MaxBits&&this.diff_levenshtein(a)/l.length>this.Patch_DeleteThreshold)r[s]=!1;else{this.diff_cleanupSemanticLossless(a);for(var u,l=0,c=0;c<t[s].diffs.length;c++){var h=t[s].diffs[c];0!==h[0]&&(u=this.diff_xIndex(a,l)),1===h[0]?e=e.substring(0,o+u)+h[1]+e.substring(o+u):-1===h[0]&&(e=e.substring(0,o+u)+e.substring(o+this.diff_xIndex(a,l+h[1].length))),-1!==h[0]&&(l+=h[1].length)}}}return e=e.substring(i.length,e.length-i.length),[e,r]},t.prototype.patch_addPadding=function(t){for(var e=this.Patch_Margin,i="",n=1;n<=e;n++)i+=String.fromCharCode(n);for(n=0;n<t.length;n++)t[n].start1+=e,t[n].start2+=e;var n=t[0],r=n.diffs;if(0==r.length||0!=r[0][0])r.unshift([0,i]),n.start1-=e,n.start2-=e,n.length1+=e,n.length2+=e;else if(e>r[0][1].length){var s=e-r[0][1].length;r[0][1]=i.substring(r[0][1].length)+r[0][1],n.start1-=s,n.start2-=s,n.length1+=s,n.length2+=s}return n=t[t.length-1],r=n.diffs,0==r.length||0!=r[r.length-1][0]?(r.push([0,i]),n.length1+=e,n.length2+=e):e>r[r.length-1][1].length&&(s=e-r[r.length-1][1].length,r[r.length-1][1]+=i.substring(0,s),n.length1+=s,n.length2+=s),i},t.prototype.patch_splitMax=function(e){for(var i=this.Match_MaxBits,n=0;n<e.length;n++)if(!(e[n].length1<=i)){var r=e[n];e.splice(n--,1);for(var s=r.start1,o=r.start2,a="";0!==r.diffs.length;){var l=new t.patch_obj,c=!0;for(l.start1=s-a.length,l.start2=o-a.length,""!==a&&(l.length1=l.length2=a.length,l.diffs.push([0,a]));0!==r.diffs.length&&l.length1<i-this.Patch_Margin;){var a=r.diffs[0][0],u=r.diffs[0][1];1===a?(l.length2+=u.length,o+=u.length,l.diffs.push(r.diffs.shift()),c=!1):-1===a&&1==l.diffs.length&&0==l.diffs[0][0]&&u.length>2*i?(l.length1+=u.length,s+=u.length,c=!1,l.diffs.push([a,u]),r.diffs.shift()):(u=u.substring(0,i-l.length1-this.Patch_Margin),l.length1+=u.length,s+=u.length,0===a?(l.length2+=u.length,o+=u.length):c=!1,l.diffs.push([a,u]),u==r.diffs[0][1]?r.diffs.shift():r.diffs[0][1]=r.diffs[0][1].substring(u.length))}a=this.diff_text2(l.diffs),a=a.substring(a.length-this.Patch_Margin),u=this.diff_text1(r.diffs).substring(0,this.Patch_Margin),""!==u&&(l.length1+=u.length,l.length2+=u.length,0!==l.diffs.length&&0===l.diffs[l.diffs.length-1][0]?l.diffs[l.diffs.length-1][1]+=u:l.diffs.push([0,u])),c||e.splice(++n,0,l)}}},t.prototype.patch_toText=function(t){for(var e=[],i=0;i<t.length;i++)e[i]=t[i];return e.join("")},t.prototype.patch_fromText=function(e){var i=[];if(!e)return i;e=e.split("\n");for(var n=0,r=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;n<e.length;){var s=e[n].match(r);if(!s)throw Error("Invalid patch string: "+e[n]);var o=new t.patch_obj;for(i.push(o),o.start1=parseInt(s[1],10),""===s[2]?(o.start1--,o.length1=1):"0"==s[2]?o.length1=0:(o.start1--,o.length1=parseInt(s[2],10)),o.start2=parseInt(s[3],10),""===s[4]?(o.start2--,o.length2=1):"0"==s[4]?o.length2=0:(o.start2--,o.length2=parseInt(s[4],10)),n++;n<e.length;){s=e[n].charAt(0);try{var a=decodeURI(e[n].substring(1))}catch(t){throw Error("Illegal escape in patch_fromText: "+a)}if("-"==s)o.diffs.push([-1,a]);else if("+"==s)o.diffs.push([1,a]);else if(" "==s)o.diffs.push([0,a]);else{if("@"==s)break;if(""!==s)throw Error('Invalid patch mode "'+s+'" in: '+a)}n++}}return i},t.patch_obj=function(){this.diffs=[],this.start2=this.start1=null,this.length2=this.length1=0},t.patch_obj.prototype.toString=function(){var t,e;t=0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1,e=0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2,t=["@@ -"+t+" +"+e+" @@\n"];var i;for(e=0;e<this.diffs.length;e++){switch(this.diffs[e][0]){case 1:i="+";break;case-1:i="-";break;case 0:i=" "}t[e+1]=i+encodeURI(this.diffs[e][1])+"\n"}return t.join("").replace(/%20/g," ")},this.diff_match_patch=t,this.DIFF_DELETE=-1,this.DIFF_INSERT=1,this.DIFF_EQUAL=0}(),!function(){"use strict";function t(t,e){e?(d[0]=d[16]=d[1]=d[2]=d[3]=d[4]=d[5]=d[6]=d[7]=d[8]=d[9]=d[10]=d[11]=d[12]=d[13]=d[14]=d[15]=0,this.blocks=d):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=t}function i(e,i,n){var r,s=typeof e;if("string"===s){var o,a=[],l=e.length,c=0;for(r=0;r<l;++r)(o=e.charCodeAt(r))<128?a[c++]=o:o<2048?(a[c++]=192|o>>6,a[c++]=128|63&o):o<55296||o>=57344?(a[c++]=224|o>>12,a[c++]=128|o>>6&63,a[c++]=128|63&o):(o=65536+((1023&o)<<10|1023&e.charCodeAt(++r)),a[c++]=240|o>>18,a[c++]=128|o>>12&63,a[c++]=128|o>>6&63,a[c++]=128|63&o);e=a}else{if("object"!==s)throw new Error(h);if(null===e)throw new Error(h);if(f&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||f&&ArrayBuffer.isView(e)))throw new Error(h)}e.length>64&&(e=new t(i,!0).update(e).array());var u=[],d=[];for(r=0;r<64;++r){var p=e[r]||0;u[r]=92^p,d[r]=54^p}t.call(this,i,n),this.update(d),this.oKeyPad=u,this.inner=!0,this.sharedMemory=n}var h="input is invalid type",r="object"==typeof window,s=r?window:{};s.JS_SHA256_NO_WINDOW&&(r=!1);var e=!r&&"object"==typeof self,n=!s.JS_SHA256_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;n?s=global:e&&(s=self);var o=!s.JS_SHA256_NO_COMMON_JS&&"object"==typeof module&&module.exports,a="function"==typeof define&&define.amd,f=!s.JS_SHA256_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,u="0123456789abcdef".split(""),c=[-2147483648,8388608,32768,128],y=[24,16,8,0],p=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],l=["hex","array","digest","arrayBuffer"],d=[];!s.JS_SHA256_NO_NODE_JS&&Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),!f||!s.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(t){return"object"==typeof t&&t.buffer&&t.buffer.constructor===ArrayBuffer});var A=function(e,i){return function(n){return new t(i,!0).update(n)[e]()}},w=function(e){var i=A("hex",e);n&&(i=b(i,e)),i.create=function(){return new t(e)},i.update=function(t){return i.create().update(t)};for(var r=0;r<l.length;++r){var s=l[r];i[s]=A(s,e)}return i},b=function(t,i){var r=eval("require('crypto')"),s=eval("require('buffer').Buffer"),e=i?"sha224":"sha256",n=function(i){if("string"==typeof i)return r.createHash(e).update(i,"utf8").digest("hex");if(null===i||void 0===i)throw new Error(h);return i.constructor===ArrayBuffer&&(i=new Uint8Array(i)),Array.isArray(i)||ArrayBuffer.isView(i)||i.constructor===s?r.createHash(e).update(new s(i)).digest("hex"):t(i)};return n},v=function(t,e){return function(n,r){return new i(n,e,!0).update(r)[t]()}},_=function(t){var e=v("hex",t);e.create=function(e){return new i(e,t)},e.update=function(t,i){return e.create(t).update(i)};for(var n=0;n<l.length;++n){var r=l[n];e[r]=v(r,t)}return e};t.prototype.update=function(t){if(!this.finalized){var e,i=typeof t;if("string"!==i){if("object"!==i)throw new Error(h);if(null===t)throw new Error(h);if(f&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||f&&ArrayBuffer.isView(t)))throw new Error(h);e=!0}for(var n,r,s=0,o=t.length,a=this.blocks;s<o;){if(this.hashed&&(this.hashed=!1,a[0]=this.block,a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0),e)for(r=this.start;s<o&&r<64;++s)a[r>>2]|=t[s]<<y[3&r++];else for(r=this.start;s<o&&r<64;++s)(n=t.charCodeAt(s))<128?a[r>>2]|=n<<y[3&r++]:n<2048?(a[r>>2]|=(192|n>>6)<<y[3&r++],a[r>>2]|=(128|63&n)<<y[3&r++]):n<55296||n>=57344?(a[r>>2]|=(224|n>>12)<<y[3&r++],a[r>>2]|=(128|n>>6&63)<<y[3&r++],a[r>>2]|=(128|63&n)<<y[3&r++]):(n=65536+((1023&n)<<10|1023&t.charCodeAt(++s)),a[r>>2]|=(240|n>>18)<<y[3&r++],a[r>>2]|=(128|n>>12&63)<<y[3&r++],a[r>>2]|=(128|n>>6&63)<<y[3&r++],a[r>>2]|=(128|63&n)<<y[3&r++]);this.lastByteIndex=r,this.bytes+=r-this.start,r>=64?(this.block=a[16],this.start=r-64,this.hash(),this.hashed=!0):this.start=r}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},t.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex;t[16]=this.block,t[e>>2]|=c[3&e],this.block=t[16],e>=56&&(this.hashed||this.hash(),t[0]=this.block,t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=this.hBytes<<3|this.bytes>>>29,t[15]=this.bytes<<3,this.hash()}},t.prototype.hash=function(){var t,e,i,n,r,s,o,a,l,c=this.h0,u=this.h1,h=this.h2,d=this.h3,f=this.h4,m=this.h5,g=this.h6,v=this.h7,M=this.blocks;for(t=16;t<64;++t)e=((r=M[t-15])>>>7|r<<25)^(r>>>18|r<<14)^r>>>3,i=((r=M[t-2])>>>17|r<<15)^(r>>>19|r<<13)^r>>>10,M[t]=M[t-16]+e+M[t-7]+i<<0;for(l=u&h,t=0;t<64;t+=4)this.first?(this.is224?(s=300032,v=(r=M[0]-1413257819)-150054599<<0,d=r+24177077<<0):(s=704751109,v=(r=M[0]-210244248)-1521486534<<0,d=r+143694565<<0),this.first=!1):(e=(c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),n=(s=c&u)^c&h^l,v=d+(r=v+(i=(f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7))+(f&m^~f&g)+p[t]+M[t])<<0,d=r+(e+n)<<0),e=(d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10),n=(o=d&c)^d&u^s,g=h+(r=g+(i=(v>>>6|v<<26)^(v>>>11|v<<21)^(v>>>25|v<<7))+(v&f^~v&m)+p[t+1]+M[t+1])<<0,e=((h=r+(e+n)<<0)>>>2|h<<30)^(h>>>13|h<<19)^(h>>>22|h<<10),n=(a=h&d)^h&c^o,m=u+(r=m+(i=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7))+(g&v^~g&f)+p[t+2]+M[t+2])<<0,e=((u=r+(e+n)<<0)>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10),n=(l=u&h)^u&d^a,f=c+(r=f+(i=(m>>>6|m<<26)^(m>>>11|m<<21)^(m>>>25|m<<7))+(m&g^~m&v)+p[t+3]+M[t+3])<<0,c=r+(e+n)<<0;this.h0=this.h0+c<<0,this.h1=this.h1+u<<0,this.h2=this.h2+h<<0,this.h3=this.h3+d<<0,this.h4=this.h4+f<<0,this.h5=this.h5+m<<0,this.h6=this.h6+g<<0,this.h7=this.h7+v<<0},t.prototype.hex=function(){this.finalize();var t=this.h0,e=this.h1,i=this.h2,n=this.h3,r=this.h4,s=this.h5,o=this.h6,a=this.h7,l=u[t>>28&15]+u[t>>24&15]+u[t>>20&15]+u[t>>16&15]+u[t>>12&15]+u[t>>8&15]+u[t>>4&15]+u[15&t]+u[e>>28&15]+u[e>>24&15]+u[e>>20&15]+u[e>>16&15]+u[e>>12&15]+u[e>>8&15]+u[e>>4&15]+u[15&e]+u[i>>28&15]+u[i>>24&15]+u[i>>20&15]+u[i>>16&15]+u[i>>12&15]+u[i>>8&15]+u[i>>4&15]+u[15&i]+u[n>>28&15]+u[n>>24&15]+u[n>>20&15]+u[n>>16&15]+u[n>>12&15]+u[n>>8&15]+u[n>>4&15]+u[15&n]+u[r>>28&15]+u[r>>24&15]+u[r>>20&15]+u[r>>16&15]+u[r>>12&15]+u[r>>8&15]+u[r>>4&15]+u[15&r]+u[s>>28&15]+u[s>>24&15]+u[s>>20&15]+u[s>>16&15]+u[s>>12&15]+u[s>>8&15]+u[s>>4&15]+u[15&s]+u[o>>28&15]+u[o>>24&15]+u[o>>20&15]+u[o>>16&15]+u[o>>12&15]+u[o>>8&15]+u[o>>4&15]+u[15&o];return this.is224||(l+=u[a>>28&15]+u[a>>24&15]+u[a>>20&15]+u[a>>16&15]+u[a>>12&15]+u[a>>8&15]+u[a>>4&15]+u[15&a]),l},t.prototype.toString=t.prototype.hex,t.prototype.digest=function(){this.finalize();var t=this.h0,e=this.h1,i=this.h2,n=this.h3,r=this.h4,s=this.h5,o=this.h6,a=this.h7,l=[t>>24&255,t>>16&255,t>>8&255,255&t,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24&255,i>>16&255,i>>8&255,255&i,n>>24&255,n>>16&255,n>>8&255,255&n,r>>24&255,r>>16&255,r>>8&255,255&r,s>>24&255,s>>16&255,s>>8&255,255&s,o>>24&255,o>>16&255,o>>8&255,255&o];return this.is224||l.push(a>>24&255,a>>16&255,a>>8&255,255&a),l},t.prototype.array=t.prototype.digest,t.prototype.arrayBuffer=function(){this.finalize();var t=new ArrayBuffer(this.is224?28:32),e=new DataView(t);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),e.setUint32(20,this.h5),e.setUint32(24,this.h6),this.is224||e.setUint32(28,this.h7),t},i.prototype=new t,i.prototype.finalize=function(){if(t.prototype.finalize.call(this),this.inner){this.inner=!1;var e=this.array();t.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(e),t.prototype.finalize.call(this)}};var B=w();B.sha256=B,B.sha224=w(!0),B.sha256.hmac=_(),B.sha224.hmac=_(!0),o?module.exports=B:(s.sha256=B.sha256,s.sha224=B.sha224,a&&define(function(){return B}))}();var Deferred=function(){function t(t){return"[object Array]"===Object.prototype.toString.call(t)}function e(e,i){if(t(e))for(var n=0;n<e.length;n++)i(e[n]);else i(e)}function i(n){var r="pending",s=[],o=[],a=[],l=null,c={done:function(){for(var e=0;e<arguments.length;e++)if(arguments[e])if(t(arguments[e]))for(var i=arguments[e],n=0;n<i.length;n++)"resolved"===r&&i[n].apply(this,l),s.push(i[n]);else"resolved"===r&&arguments[e].apply(this,l),s.push(arguments[e]);return this},fail:function(){for(var e=0;e<arguments.length;e++)if(arguments[e])if(t(arguments[e]))for(var i=arguments[e],n=0;n<i.length;n++)"rejected"===r&&i[n].apply(this,l),o.push(i[n]);else"rejected"===r&&arguments[e].apply(this,l),o.push(arguments[e]);return this},always:function(){return this.done.apply(this,arguments).fail.apply(this,arguments)},progress:function(){for(var e=0;e<arguments.length;e++)if(arguments[e])if(t(arguments[e]))for(var i=arguments[e],n=0;n<i.length;n++)"pending"===r&&a.push(i[n]);else"pending"===r&&a.push(arguments[e]);return this},then:function(){arguments.length>1&&arguments[1]&&this.fail(arguments[1]),arguments.length>0&&arguments[0]&&this.done(arguments[0]),arguments.length>2&&arguments[2]&&this.progress(arguments[2])},promise:function(t){if(null==t)return c;for(var e in c)t[e]=c[e];return t},state:function(){return r},debug:function(){console.log("[debug]",s,o,r)},isRejected:function(){return"rejected"===r},isResolved:function(){return"resolved"===r},pipe:function(t,n,r){return i(function(i){e(t,function(t){"function"==typeof t?u.done(function(){var e=t.apply(this,arguments);e&&"function"==typeof e?e.promise().then(i.resolve,i.reject,i.notify):i.resolve(e)}):u.done(i.resolve)}),e(n,function(t){"function"==typeof t?u.fail(function(){var e=t.apply(this,arguments);e&&"function"==typeof e?e.promise().then(i.resolve,i.reject,i.notify):i.reject(e)}):u.fail(i.reject)})}).promise()}},u={resolveWith:function(t){if("pending"===r){r="resolved";for(var e=l=arguments.length>1?arguments[1]:[],i=0;i<s.length;i++)s[i].apply(t,e)}return this},rejectWith:function(t){if("pending"===r){r="rejected";for(var e=l=arguments.length>1?arguments[1]:[],i=0;i<o.length;i++)o[i].apply(t,e)}return this},notifyWith:function(t){if("pending"===r)for(var e=l=arguments.length>1?arguments[1]:[],i=0;i<a.length;i++)a[i].apply(t,e);return this},resolve:function(){return this.resolveWith(this,arguments)},reject:function(){return this.rejectWith(this,arguments)},notify:function(){return this.notifyWith(this,arguments)}},h=c.promise(u);return n&&n.apply(h,[h]),h}return i.when=function(){if(arguments.length<2){var t=arguments.length?arguments[0]:void 0;return t&&"function"==typeof t.isResolved&&"function"==typeof t.isRejected?t.promise():i().resolve(t).promise()}return function(t){for(var e=i(),n=t.length,r=0,s=new Array(n),o=0;o<t.length;o++)!function(i){var o=null;t[i].done?t[i].done(function(){s[i]=arguments.length<2?arguments[0]:arguments,++r==n&&e.resolve.apply(e,s)}).fail(function(){e.reject(arguments)}):(o=t[i],t[i]=new Deferred,t[i].done(function(){s[i]=arguments.length<2?arguments[0]:arguments,++r==n&&e.resolve.apply(e,s)}).fail(function(){e.reject(arguments)}).resolve(o))}(o);return e.promise()}(arguments)},i}(),IN_GLOBAL_SCOPE=!0;window.PR_SHOULD_USE_CONTINUATION=!0;var prettyPrintOne,prettyPrint;!function(){function t(t){function e(t){var e=t.charCodeAt(0);if(92!==e)return e;var i=t.charAt(1);return e=h[i],e?e:"0"<=i&&i<="7"?parseInt(t.substring(1),8):"u"===i||"x"===i?parseInt(t.substring(2),16):t.charCodeAt(1)}function i(t){if(t<32)return(t<16?"\\x0":"\\x")+t.toString(16);var e=String.fromCharCode(t);return"\\"===e||"-"===e||"]"===e||"^"===e?"\\"+e:e}function n(t){var n=t.substring(1,t.length-1).match(new RegExp("\\\\u[0-9A-Fa-f]{4}|\\\\x[0-9A-Fa-f]{2}|\\\\[0-3][0-7]{0,2}|\\\\[0-7]{1,2}|\\\\[\\s\\S]|-|[^-\\\\]","g")),r=[],s="^"===n[0],o=["["];s&&o.push("^");for(var a=s?1:0,l=n.length;a<l;++a){var c=n[a];if(/\\[bdsw]/i.test(c))o.push(c);else{var u,h=e(c);a+2<l&&"-"===n[a+1]?(u=e(n[a+2]),a+=2):u=h,r.push([h,u]),u<65||h>122||(u<65||h>90||r.push([32|Math.max(65,h),32|Math.min(u,90)]),u<97||h>122||r.push([Math.max(97,h)&-33,Math.min(u,122)&-33]))}}r.sort(function(t,e){return t[0]-e[0]||e[1]-t[1]});for(var d=[],p=[],a=0;a<r.length;++a){var f=r[a];f[0]<=p[1]+1?p[1]=Math.max(p[1],f[1]):d.push(p=f)}for(var a=0;a<d.length;++a){var f=d[a];o.push(i(f[0])),f[1]>f[0]&&(f[1]+1>f[0]&&o.push("-"),o.push(i(f[1])))}return o.push("]"),o.join("")}function r(t){for(var e=t.source.match(new RegExp("(?:\\[(?:[^\\x5C\\x5D]|\\\\[\\s\\S])*\\]|\\\\u[A-Fa-f0-9]{4}|\\\\x[A-Fa-f0-9]{2}|\\\\[0-9]+|\\\\[^ux0-9]|\\(\\?[:!=]|[\\(\\)\\^]|[^\\x5B\\x5C\\(\\)\\^]+)","g")),r=e.length,a=[],l=0,c=0;l<r;++l){var u=e[l];if("("===u)++c;else if("\\"===u.charAt(0)){var h=+u.substring(1);h&&(h<=c?a[h]=-1:e[l]=i(h))}}for(var l=1;l<a.length;++l)-1===a[l]&&(a[l]=++s);for(var l=0,c=0;l<r;++l){var u=e[l];if("("===u)++c,a[c]||(e[l]="(?:");else if("\\"===u.charAt(0)){var h=+u.substring(1);h&&h<=c&&(e[l]="\\"+a[h])}}for(var l=0;l<r;++l)"^"===e[l]&&"^"!==e[l+1]&&(e[l]="");if(t.ignoreCase&&o)for(var l=0;l<r;++l){var u=e[l],d=u.charAt(0);u.length>=2&&"["===d?e[l]=n(u):"\\"!==d&&(e[l]=u.replace(/[a-zA-Z]/g,function(t){var e=t.charCodeAt(0);return"["+String.fromCharCode(e&-33,32|e)+"]"}))}return e.join("")}for(var s=0,o=!1,a=!1,l=0,c=t.length;l<c;++l){var u=t[l];if(u.ignoreCase)a=!0;else if(/[a-z]/i.test(u.source.replace(/\\u[0-9a-f]{4}|\\x[0-9a-f]{2}|\\[^ux]/gi,""))){o=!0,a=!1;break}}for(var h={b:8,t:9,n:10,v:11,f:12,r:13},d=[],l=0,c=t.length;l<c;++l){var u=t[l];if(u.global||u.multiline)throw new Error(""+u);d.push("(?:"+r(u)+")")}return new RegExp(d.join("|"),a?"gi":"g")}function e(t,e){function i(t){var l=t.nodeType;if(1==l){if(n.test(t.className))return;for(var c=t.firstChild;c;c=c.nextSibling)i(c);var u=t.nodeName.toLowerCase();"br"!==u&&"li"!==u||(r[a]="\n",o[a<<1]=s++,o[a++<<1|1]=t)}else if(3==l||4==l){var h=t.nodeValue;h.length&&(h=e?h.replace(/\r\n?/g,"\n"):h.replace(/[ \t\r\n]+/g," "),r[a]=h,o[a<<1]=s,s+=h.length,o[a++<<1|1]=t)}}var n=/(?:^|\s)nocode(?:\s|$)/,r=[],s=0,o=[],a=0;return i(t),{sourceCode:r.join("").replace(/\n$/,""),spans:o}}function i(t,e,i,n){if(e){var r={sourceCode:e,basePos:t};i(r),n.push.apply(n,r.decorations)}}function n(t){for(var e=void 0,i=t.firstChild;i;i=i.nextSibling){var n=i.nodeType;e=1===n?e?t:i:3===n&&W.test(i.nodeValue)?t:e}return e===t?void 0:e}function r(e,n){var r,s={};!function(){for(var i=e.concat(n),o=[],a={},l=0,c=i.length;l<c;++l){var u=i[l],h=u[3];if(h)for(var d=h.length;--d>=0;)s[h.charAt(d)]=u;var p=u[1],f=""+p;a.hasOwnProperty(f)||(o.push(p),a[f]=null)}o.push(/[\0-\uffff]/),r=t(o)}();var o=n.length,a=function(t){for(var e=t.sourceCode,l=t.basePos,u=[l,P],h=0,d=e.match(r)||[],p={},f=0,m=d.length;f<m;++f){var g,v=d[f],M=p[v],b=void 0;if("string"==typeof M)g=!1;else{var Y=s[v.charAt(0)];if(Y)b=v.match(Y[1]),M=Y[0];else{for(var y=0;y<o;++y)if(Y=n[y],b=v.match(Y[1])){M=Y[0];break}b||(M=P)}g=M.length>=5&&"lang-"===M.substring(0,5),!g||b&&"string"==typeof b[1]||(g=!1,M=L),g||(p[v]=M)}var _=h;if(h+=v.length,g){var D=b[1],T=v.indexOf(D),w=T+D.length;b[2]&&(w=v.length-b[2].length,T=w-D.length);var E=M.substring(5);i(l+_,v.substring(0,T),a,u),i(l+_+T,D,c(E,D),u),i(l+_+w,v.substring(w),a,u)}else u.push(l+_,M)}t.decorations=u};return a}function s(t){var e=[],i=[];t.tripleQuotedStrings?e.push([S,/^(?:\'\'\'(?:[^\'\\]|\\[\s\S]|\'{1,2}(?=[^\']))*(?:\'\'\'|$)|\"\"\"(?:[^\"\\]|\\[\s\S]|\"{1,2}(?=[^\"]))*(?:\"\"\"|$)|\'(?:[^\\\']|\\[\s\S])*(?:\'|$)|\"(?:[^\\\"]|\\[\s\S])*(?:\"|$))/,null,"'\""]):t.multiLineStrings?e.push([S,/^(?:\'(?:[^\\\']|\\[\s\S])*(?:\'|$)|\"(?:[^\\\"]|\\[\s\S])*(?:\"|$)|\`(?:[^\\\`]|\\[\s\S])*(?:\`|$))/,null,"'\"`"]):e.push([S,/^(?:\'(?:[^\\\'\r\n]|\\.)*(?:\'|$)|\"(?:[^\\\"\r\n]|\\.)*(?:\"|$))/,null,"\"'"]),t.verbatimStrings&&i.push([S,/^@\"(?:[^\"]|\"\")*(?:\"|$)/,null]);var n=t.hashComments;n&&(t.cStyleComments?(n>1?e.push([k,/^#(?:##(?:[^#]|#(?!##))*(?:###|$)|.*)/,null,"#"]):e.push([k,/^#(?:(?:define|e(?:l|nd)if|else|error|ifn?def|include|line|pragma|undef|warning)\b|[^\r\n]*)/,null,"#"]),i.push([S,/^<(?:(?:(?:\.\.\/)*|\/?)(?:[\w-]+(?:\/[\w-]+)+)?[\w-]+\.h(?:h|pp|\+\+)?|[a-z]\w*)>/,null])):e.push([k,/^#[^\r\n]*/,null,"#"])),t.cStyleComments&&(i.push([k,/^\/\/[^\r\n]*/,null]),i.push([k,/^\/\*[\s\S]*?(?:\*\/|$)/,null]));var s=t.regexLiterals;if(s){var o=s>1?"":"\n\r",a=o?".":"[\\S\\s]",l="/(?=[^/*"+o+"])(?:[^/\\x5B\\x5C"+o+"]|\\x5C"+a+"|\\x5B(?:[^\\x5C\\x5D"+o+"]|\\x5C"+a+")*(?:\\x5D|$))+/";i.push(["lang-regex",RegExp("^"+B+"("+l+")")])}var c=t.types;c&&i.push([H,c]);var u=(""+t.keywords).replace(/^ | $/g,"");u.length&&i.push([C,new RegExp("^(?:"+u.replace(/[\s,]+/g,"|")+")\\b"),null]),e.push([P,/^\s+/,null," \r\n\t"]);var h="^.[^\\s\\w.$@'\"`/\\\\]*";return t.regexLiterals&&(h+="(?!s*/)"),i.push([O,/^@[a-z_$][a-z_$@0-9]*/i,null],[H,/^(?:[@_]?[A-Z]+[a-z][A-Za-z_$@0-9]*|\w+_t\b)/,null],[P,/^[a-z_$][a-z_$@0-9]*/i,null],[O,new RegExp("^(?:0x[a-f0-9]+|(?:\\d(?:_\\d+)*\\d*(?:\\.\\d*)?|\\.\\d\\+)(?:e[+\\-]?\\d+)?)[a-z]*","i"),null,"0123456789"],[P,/^\\[\s\S]?/,null],[I,new RegExp(h),null]),r(e,i)}function o(t,e,i){function n(t){var e=t.nodeType;if(1!=e||s.test(t.className)){if((3==e||4==e)&&i){var l=t.nodeValue,c=l.match(o);if(c){var u=l.substring(0,c.index);t.nodeValue=u;var h=l.substring(c.index+c[0].length);if(h){var d=t.parentNode;d.insertBefore(a.createTextNode(h),t.nextSibling)}r(t),u||t.parentNode.removeChild(t)}}}else if("br"===t.nodeName)r(t),t.parentNode&&t.parentNode.removeChild(t);else for(var p=t.firstChild;p;p=p.nextSibling)n(p)}function r(t){function e(t,i){var n=i?t.cloneNode(!1):t,r=t.parentNode;if(r){var s=e(r,1),o=t.nextSibling;s.appendChild(n);for(var a=o;a;a=o)o=a.nextSibling,s.appendChild(a)}return n}for(;!t.nextSibling;)if(t=t.parentNode,!t)return;for(var i,n=e(t.nextSibling,0);(i=n.parentNode)&&1===i.nodeType;)n=i;c.push(n)}for(var s=/(?:^|\s)nocode(?:\s|$)/,o=/\r\n?|\n/,a=t.ownerDocument,l=a.createElement("li");t.firstChild;)l.appendChild(t.firstChild);for(var c=[l],u=0;u<c.length;++u)n(c[u]);e===(0|e)&&c[0].setAttribute("value",e);var h=a.createElement("ol");h.className="linenums";for(var d=Math.max(0,e-1|0)||0,u=0,p=c.length;u<p;++u)l=c[u],l.className="L"+(u+d)%10,l.firstChild||l.appendChild(a.createTextNode("")),h.appendChild(l);t.appendChild(h)}function a(t){var e=/\bMSIE\s(\d+)/.exec(navigator.userAgent);e=e&&+e[1]<=8;var i=/\n/g,n=t.sourceCode,r=n.length,s=0,o=t.spans,a=o.length,l=0,c=t.decorations,u=c.length,h=0;c[u]=r;var d,p;for(p=d=0;p<u;)c[p]!==c[p+2]?(c[d++]=c[p++],c[d++]=c[p++]):p+=2;for(u=d,p=d=0;p<u;){for(var f=c[p],m=c[p+1],g=p+2;g+2<=u&&c[g+1]===m;)g+=2;c[d++]=f,c[d++]=m,p=g}u=c.length=d;var v,M=t.sourceNode;M&&(v=M.style.display,M.style.display="none");try{for(;l<a;){var b,Y=(o[l],o[l+2]||r),y=c[h+2]||r,g=Math.min(Y,y),_=o[l+1];if(1!==_.nodeType&&(b=n.substring(s,g))){e&&(b=b.replace(i,"\r")),_.nodeValue=b;var D=_.ownerDocument,T=D.createElement("span");T.className=c[h+1];var w=_.parentNode;w.replaceChild(T,_),T.appendChild(_),s<Y&&(o[l+1]=_=D.createTextNode(n.substring(g,Y)),w.insertBefore(_,T.nextSibling))}s=g,s>=Y&&(l+=2),s>=y&&(h+=2)}}finally{M&&(M.style.display=v)}}function l(t,e){for(var i=e.length;--i>=0;){var n=e[i];$.hasOwnProperty(n)?f.console&&console.warn("cannot override language handler %s",n):$[n]=t}}function c(t,e){return t&&$.hasOwnProperty(t)||(t=/^\s*</.test(e)?"default-markup":"default-code"),$[t]}function u(t){var i=t.langExtension;try{var n=e(t.sourceNode,t.pre),r=n.sourceCode;t.sourceCode=r,t.spans=n.spans,t.basePos=0,c(i,r)(t),a(t)}catch(t){f.console&&console.log(t&&t.stack||t)}}function h(t,e,i){var n=document.createElement("div");n.innerHTML="<pre>"+t+"</pre>",n=n.firstChild,i&&o(n,i,!0);var r={langExtension:e,numberLines:i,sourceNode:n,pre:1};return u(r),n.innerHTML}function d(t,e){var i={langExtension:e,sourceCode:t,spans:[0,t],basePos:0};try{c(e,t)(i)}catch(t){f.console&&console.log(t&&t.stack||t)}i.decorations.splice(0,2);for(var n=0;n<i.decorations.length-2;)i.decorations[n]===i.decorations[n+2]?i.decorations.splice(n,2):n+=2;return i.decorations}function p(t,e){function i(t){return s.getElementsByTagName(t)}function r(){for(var e=f.PR_SHOULD_USE_CONTINUATION?m.now()+250:1/0;v<c.length&&m.now()<e;v++){for(var i=c[v],s=T,l=i;l=l.previousSibling;){var h=l.nodeType,d=(7===h||8===h)&&l.nodeValue;if(d?!/^\??prettify\b/.test(d):3!==h||/\S/.test(l.nodeValue))break;if(d){s={},d.replace(/\b(\w+)=([\w:.%+-]+)/g,function(t,e,i){s[e]=i});break}}var p=i.className;if((s!==T||b.test(p))&&!Y.test(p)){for(var w=!1,E=i.parentNode;E;E=E.parentNode){var x=E.tagName;if(D.test(x)&&E.className&&b.test(E.className)){w=!0;break}}if(!w){i.className+=" prettyprinted";var A=s.lang;if(!A){A=p.match(M);var S;!A&&(S=n(i))&&_.test(S.tagName)&&(A=S.className.match(M)),A&&(A=A[1])}var C;if(y.test(i.tagName))C=1;else{var k=i.currentStyle,H=a.defaultView,O=k?k.whiteSpace:H&&H.getComputedStyle?H.getComputedStyle(i,null).getPropertyValue("white-space"):0;C=O&&"pre"===O.substring(0,3)}var I=s.linenums;(I="true"===I||+I)||(I=p.match(/\blinenums\b(?::(\d+))?/),I=!!I&&(!I[1]||!I[1].length||+I[1])),I&&o(i,I,C),g={langExtension:A,sourceNode:i,numberLines:I,pre:C},u(g)}}}v<c.length?setTimeout(r,250):"function"==typeof t&&t()}for(var s=e||document.body,a=s.ownerDocument||document,l=[i("pre"),i("code"),i("xmp")],c=[],h=0;h<l.length;++h)for(var d=0,p=l[h].length;d<p;++d)c.push(l[h][d]);l=null;var m=Date;m.now||(m={now:function(){return+new Date}});var g,v=0,M=/\blang(?:uage)?-([\w.]+)(?!\S)/,b=/\bprettyprint\b/,Y=/\bprettyprinted\b/,y=/pre|xmp/i,_=/^code$/i,D=/^(?:pre|code|xmp)$/i,T={};r()}var f=window,m=["break,continue,do,else,for,if,return,while"],g=[m,"auto,case,char,const,default,double,enum,extern,float,goto,inline,int,long,register,short,signed,sizeof,static,struct,switch,typedef,union,unsigned,void,volatile"],v=[g,"catch,class,delete,false,import,new,operator,private,protected,public,this,throw,true,try,typeof"],M=[v,"alignof,align_union,asm,axiom,bool,concept,concept_map,const_cast,constexpr,decltype,delegate,dynamic_cast,explicit,export,friend,generic,late_check,mutable,namespace,nullptr,property,reinterpret_cast,static_assert,static_cast,template,typeid,typename,using,virtual,where"],b=[v,"abstract,assert,boolean,byte,extends,finally,final,implements,import,instanceof,interface,null,native,package,strictfp,super,synchronized,throws,transient"],Y=[v,"abstract,as,base,bool,by,byte,checked,decimal,delegate,descending,dynamic,event,finally,fixed,foreach,from,group,implicit,in,interface,internal,into,is,let,lock,null,object,out,override,orderby,params,partial,readonly,ref,sbyte,sealed,stackalloc,string,select,uint,ulong,unchecked,unsafe,ushort,var,virtual,where"],y="all,and,by,catch,class,else,extends,false,finally,for,if,in,is,isnt,loop,new,no,not,null,of,off,on,or,return,super,then,throw,true,try,unless,until,when,while,yes",_=[v,"debugger,eval,export,function,get,instanceof,null,set,undefined,var,with,Infinity,NaN"],D="caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END",T=[m,"and,as,assert,class,def,del,elif,except,exec,finally,from,global,import,in,is,lambda,nonlocal,not,or,pass,print,raise,try,with,yield,False,True,None"],w=[m,"alias,and,begin,case,class,def,defined,elsif,end,ensure,false,in,module,next,nil,not,or,redo,rescue,retry,self,super,then,true,undef,unless,until,when,yield,BEGIN,END"],E=[m,"case,done,elif,esac,eval,fi,function,in,local,set,then,until"],x=[M,Y,b,_,D,T,w,E],A=/^(DIR|FILE|vector|(de|priority_)?queue|list|stack|(const_)?iterator|(multi)?(set|map)|bitset|u?(int|float)\d*)\b/,S="str",C="kwd",k="com",H="typ",O="lit",I="pun",P="pln",N="tag",R="dec",L="src",F="atn",U="atv",z="nocode",B="(?:^^\\.?|[+-]|[!=]=?=?|\\#|%=?|&&?=?|\\(|\\*=?|[+\\-]=|->|\\/=?|::?|<<?=?|>>?>?=?|,|;|\\?|@|\\[|~|{|\\^\\^?=?|\\|\\|?=?|break|case|continue|delete|do|else|finally|instanceof|return|throw|try|typeof)\\s*",W=/\S/,j=s({keywords:x,hashComments:!0,cStyleComments:!0,multiLineStrings:!0,regexLiterals:!0}),$={};l(j,["default-code"]),l(r([],[[P,/^[^<?]+/],[R,/^<!\w[^>]*(?:>|$)/],[k,/^<\!--[\s\S]*?(?:-\->|$)/],["lang-",/^<\?([\s\S]+?)(?:\?>|$)/],["lang-",/^<%([\s\S]+?)(?:%>|$)/],[I,/^(?:<[%?]|[%?]>)/],["lang-",/^<xmp\b[^>]*>([\s\S]+?)<\/xmp\b[^>]*>/i],["lang-js",/^<script\b[^>]*>([\s\S]*?)(<\/script\b[^>]*>)/i],["lang-css",/^<style\b[^>]*>([\s\S]*?)(<\/style\b[^>]*>)/i],["lang-in.tag",/^(<\/?[a-z][^<>]*>)/i]]),["default-markup","htm","html","mxml","xhtml","xml","xsl"]),l(r([[P,/^[\s]+/,null," \t\r\n"],[U,/^(?:\"[^\"]*\"?|\'[^\']*\'?)/,null,"\"'"]],[[N,/^^<\/?[a-z](?:[\w.:-]*\w)?|\/?>$/i],[F,/^(?!style[\s=]|on)[a-z](?:[\w:-]*\w)?/i],["lang-uq.val",/^=\s*([^>\'\"\s]*(?:[^>\'\"\s\/]|\/(?=\s)))/],[I,/^[=<>\/]+/],["lang-js",/^on\w+\s*=\s*\"([^\"]+)\"/i],["lang-js",/^on\w+\s*=\s*\'([^\']+)\'/i],["lang-js",/^on\w+\s*=\s*([^\"\'>\s]+)/i],["lang-css",/^style\s*=\s*\"([^\"]+)\"/i],["lang-css",/^style\s*=\s*\'([^\']+)\'/i],["lang-css",/^style\s*=\s*([^\"\'>\s]+)/i]]),["in.tag"]),l(r([],[[U,/^[\s\S]+/]]),["uq.val"]),l(s({keywords:M,hashComments:!0,cStyleComments:!0,types:A}),["c","cc","cpp","cxx","cyc","m"]),l(s({keywords:"null,true,false"}),["json"]),l(s({keywords:Y,hashComments:!0,cStyleComments:!0,verbatimStrings:!0,types:A}),["cs"]),l(s({keywords:b,cStyleComments:!0}),["java"]),l(s({keywords:E,hashComments:!0,multiLineStrings:!0}),["bash","bsh","csh","sh"]),l(s({keywords:T,hashComments:!0,multiLineStrings:!0,tripleQuotedStrings:!0}),["cv","py","python"]),l(s({keywords:D,hashComments:!0,multiLineStrings:!0,regexLiterals:2}),["perl","pl","pm"]),l(s({keywords:w,hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["rb","ruby"]),l(s({keywords:_,cStyleComments:!0,regexLiterals:!0}),["javascript","js"]),l(s({keywords:y,hashComments:3,cStyleComments:!0,multilineStrings:!0,tripleQuotedStrings:!0,regexLiterals:!0}),["coffee"]),l(r([],[[S,/^[\s\S]+/]]),["regex"]);var V=f.PR={createSimpleLexer:r,registerLangHandler:l,sourceDecorator:s,PR_ATTRIB_NAME:F,PR_ATTRIB_VALUE:U,PR_COMMENT:k,PR_DECLARATION:R,PR_KEYWORD:C,PR_LITERAL:O,PR_NOCODE:z,PR_PLAIN:P,PR_PUNCTUATION:I,PR_SOURCE:L,PR_STRING:S,PR_TAG:N,PR_TYPE:H,prettyPrintOne:IN_GLOBAL_SCOPE?f.prettyPrintOne=h:prettyPrintOne=h,prettyPrint:prettyPrint=IN_GLOBAL_SCOPE?f.prettyPrint=p:prettyPrint=p,prettyTokens:d};"function"==typeof define&&define.amd&&define("google-code-prettify",[],function(){return V})}(),PR.registerLangHandler(PR.createSimpleLexer([[PR.PR_PLAIN,/^[\t\n\r \xA0]+/,null,"\t\n\r "],[PR.PR_PLAIN,/^(?:\"(?:[^\"\\]|\\[\s\S])*(?:\"|$)|\'(?:[^\'\\]|\\[\s\S])+(?:\'|$)|`[^`]*(?:`|$))/,null,"\"'"]],[[PR.PR_COMMENT,/^(?:\/\/[^\r\n]*|\/\*[\s\S]*?\*\/)/],[PR.PR_PLAIN,/^(?:[^\/\"\'`]|\/(?![\/\*]))+/i]]),["go"]),PR.registerLangHandler(PR.createSimpleLexer([[PR.PR_PLAIN,/^[\t\n\r \xA0]+/,null,"\t\n\r "],[PR.PR_STRING,/^(?:"(?:[^\"\\]|\\.)*"|'(?:[^\'\\]|\\.)*')/,null,"\"'"]],[[PR.PR_COMMENT,/^(?:--[^\r\n]*|\/\*[\s\S]*?(?:\*\/|$))/],[PR.PR_KEYWORD,/^(?:ADD|ALL|ALTER|AND|ANY|APPLY|AS|ASC|AUTHORIZATION|BACKUP|BEGIN|BETWEEN|BREAK|BROWSE|BULK|BY|CASCADE|CASE|CHECK|CHECKPOINT|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMN|COMMIT|COMPUTE|CONNECT|CONSTRAINT|CONTAINS|CONTAINSTABLE|CONTINUE|CONVERT|CREATE|CROSS|CURRENT|CURRENT_DATE|CURRENT_TIME|CURRENT_TIMESTAMP|CURRENT_USER|CURSOR|DATABASE|DBCC|DEALLOCATE|DECLARE|DEFAULT|DELETE|DENY|DESC|DISK|DISTINCT|DISTRIBUTED|DOUBLE|DROP|DUMMY|DUMP|ELSE|END|ERRLVL|ESCAPE|EXCEPT|EXEC|EXECUTE|EXISTS|EXIT|FETCH|FILE|FILLFACTOR|FOLLOWING|FOR|FOREIGN|FREETEXT|FREETEXTTABLE|FROM|FULL|FUNCTION|GOTO|GRANT|GROUP|HAVING|HOLDLOCK|IDENTITY|IDENTITYCOL|IDENTITY_INSERT|IF|IN|INDEX|INNER|INSERT|INTERSECT|INTO|IS|JOIN|KEY|KILL|LEFT|LIKE|LINENO|LOAD|MATCH|MATCHED|MERGE|NATURAL|NATIONAL|NOCHECK|NONCLUSTERED|NOCYCLE|NOT|NULL|NULLIF|OF|OFF|OFFSETS|ON|OPEN|OPENDATASOURCE|OPENQUERY|OPENROWSET|OPENXML|OPTION|OR|ORDER|OUTER|OVER|PARTITION|PERCENT|PIVOT|PLAN|PRECEDING|PRECISION|PRIMARY|PRINT|PROC|PROCEDURE|PUBLIC|RAISERROR|READ|READTEXT|RECONFIGURE|REFERENCES|REPLICATION|RESTORE|RESTRICT|RETURN|REVOKE|RIGHT|ROLLBACK|ROWCOUNT|ROWGUIDCOL|ROWS?|RULE|SAVE|SCHEMA|SELECT|SESSION_USER|SET|SETUSER|SHUTDOWN|SOME|START|STATISTICS|SYSTEM_USER|TABLE|TEXTSIZE|THEN|TO|TOP|TRAN|TRANSACTION|TRIGGER|TRUNCATE|TSEQUAL|UNBOUNDED|UNION|UNIQUE|UNPIVOT|UPDATE|UPDATETEXT|USE|USER|USING|VALUES|VARYING|VIEW|WAITFOR|WHEN|WHERE|WHILE|WITH|WITHIN|WRITETEXT|XML)(?=[^\w-]|$)/i,null],[PR.PR_LITERAL,/^[+-]?(?:0x[\da-f]+|(?:(?:\.\d+|\d+(?:\.\d*)?)(?:e[+\-]?\d+)?))/i],[PR.PR_PLAIN,/^[a-z_][\w-]*/i],[PR.PR_PUNCTUATION,/^[^\w\t\n\r \xA0\"\'][^\w\t\n\r \xA0+\-\"\']*/]]),["sql"]),PR.registerLangHandler(PR.createSimpleLexer([[PR.PR_PLAIN,/^[ \t\r\n\f]+/,null," \t\r\n\f"]],[[PR.PR_STRING,/^\"(?:[^\n\r\f\\\"]|\\(?:\r\n?|\n|\f)|\\[\s\S])*\"/,null],[PR.PR_STRING,/^\'(?:[^\n\r\f\\\']|\\(?:\r\n?|\n|\f)|\\[\s\S])*\'/,null],["lang-css-str",/^url\(([^\)\"\']+)\)/i],[PR.PR_KEYWORD,/^(?:url|rgb|\!important|@import|@page|@media|@charset|inherit)(?=[^\-\w]|$)/i,null],["lang-css-kw",/^(-?(?:[_a-z]|(?:\\[0-9a-f]+ ?))(?:[_a-z0-9\-]|\\(?:\\[0-9a-f]+ ?))*)\s*:/i],[PR.PR_COMMENT,/^\/\*[^*]*\*+(?:[^\/*][^*]*\*+)*\//],[PR.PR_COMMENT,/^(?:<!--|-->)/],[PR.PR_LITERAL,/^(?:\d+|\d*\.\d+)(?:%|[a-z]+)?/i],[PR.PR_LITERAL,/^#(?:[0-9a-f]{3}){1,2}\b/i],[PR.PR_PLAIN,/^-?(?:[_a-z]|(?:\\[\da-f]+ ?))(?:[_a-z\d\-]|\\(?:\\[\da-f]+ ?))*/i],[PR.PR_PUNCTUATION,/^[^\s\w\'\"]+/]]),["css"]),PR.registerLangHandler(PR.createSimpleLexer([],[[PR.PR_KEYWORD,/^-?(?:[_a-z]|(?:\\[\da-f]+ ?))(?:[_a-z\d\-]|\\(?:\\[\da-f]+ ?))*/i]]),["css-kw"]),PR.registerLangHandler(PR.createSimpleLexer([],[[PR.PR_STRING,/^[^\)\"\']+/]]),["css-str"]),PR.registerLangHandler(PR.createSimpleLexer([[PR.PR_PLAIN,/^[ \n\r\t\v\f\0]+/,null," \n\r\t\v\f\0"],[PR.PR_STRING,/^"(?:[^"\\]|(?:\\.)|(?:\\\((?:[^"\\)]|\\.)*\)))*"/,null,'"']],[[PR.PR_LITERAL,/^(?:(?:0x[\da-fA-F][\da-fA-F_]*\.[\da-fA-F][\da-fA-F_]*[pP]?)|(?:\d[\d_]*\.\d[\d_]*[eE]?))[+-]?\d[\d_]*/,null],[PR.PR_LITERAL,/^-?(?:(?:0(?:(?:b[01][01_]*)|(?:o[0-7][0-7_]*)|(?:x[\da-fA-F][\da-fA-F_]*)))|(?:\d[\d_]*))/,null],[PR.PR_LITERAL,/^(?:true|false|nil)\b/,null],[PR.PR_KEYWORD,/^\b(?:__COLUMN__|__FILE__|__FUNCTION__|__LINE__|#available|#else|#elseif|#endif|#if|#line|arch|arm|arm64|associativity|as|break|case|catch|class|continue|convenience|default|defer|deinit|didSet|do|dynamic|dynamicType|else|enum|fallthrough|final|for|func|get|import|indirect|infix|init|inout|internal|i386|if|in|iOS|iOSApplicationExtension|is|lazy|left|let|mutating|none|nonmutating|operator|optional|OSX|OSXApplicationExtension|override|postfix|precedence|prefix|private|protocol|Protocol|public|required|rethrows|return|right|safe|self|set|static|struct|subscript|super|switch|throw|try|Type|typealias|unowned|unsafe|var|weak|watchOS|while|willSet|x86_64)\b/,null],[PR.PR_COMMENT,/^\/\/.*?[\n\r]/,null],[PR.PR_COMMENT,/^\/\*[\s\S]*?(?:\*\/|$)/,null],[PR.PR_PUNCTUATION,/^<<=|<=|<<|>>=|>=|>>|===|==|\.\.\.|&&=|\.\.<|!==|!=|&=|~=|~|\(|\)|\[|\]|{|}|@|#|;|\.|,|:|\|\|=|\?\?|\|\||&&|&\*|&\+|&-|&=|\+=|-=|\/=|\*=|\^=|%=|\|=|->|`|==|\+\+|--|\/|\+|!|\*|%|<|>|&|\||\^|\?|=|-|_/,null],[PR.PR_TYPE,/^\b(?:[@_]?[A-Z]+[a-z][A-Za-z_$@0-9]*|\w+_t\b)/,null]]),["swift"]),function(t){t.PR&&(t.ZWPR=PR)}(window),function(t,e,i){function n(t,e,i){return t.addEventListener?void t.addEventListener(e,i,!1):void t.attachEvent("on"+e,i)}function r(t){if("keypress"==t.type){var e=String.fromCharCode(t.which);return t.shiftKey||(e=e.toLowerCase()),e}return E[t.which]?E[t.which]:x[t.which]?x[t.which]:String.fromCharCode(t.which).toLowerCase()}function s(t,e){return t.sort().join(",")===e.sort().join(",")}function o(t){t=t||{};var e,i=!1;for(e in H)t[e]?i=!0:H[e]=0;i||(P=!1)}function a(t,e,i,n,r,o){var a,l,c=[],u=i.type;if(!C[t])return[];for("keyup"==u&&f(t)&&(e=[t]),a=0;a<C[t].length;++a)if(l=C[t][a],(n||!l.seq||H[l.seq]==l.level)&&u==l.action&&("keypress"==u&&!i.metaKey&&!i.ctrlKey||s(e,l.modifiers))){var h=!n&&l.combo==r,d=n&&l.seq==n&&l.level==o;(h||d)&&C[t].splice(a,1),c.push(l)}return c}function l(t){var e=[];return t.shiftKey&&e.push("shift"),t.altKey&&e.push("alt"),t.ctrlKey&&e.push("ctrl"),t.metaKey&&e.push("meta"),e}function c(t){return t.preventDefault?void t.preventDefault():void(t.returnValue=!1)}function u(t){return t.stopPropagation?void t.stopPropagation():void(t.cancelBubble=!0)}function h(t,e,i,n){R.stopCallback(e,e.target||e.srcElement,i,n)||t(e,i)===!1&&(c(e),u(e))}function d(t,e,i){var n,r=a(t,e,i),s={},l=0,c=!1;for(n=0;n<r.length;++n)r[n].seq&&(l=Math.max(l,r[n].level));for(n=0;n<r.length;++n)if(r[n].seq){if(r[n].level!=l)continue;c=!0,s[r[n].seq]=1,h(r[n].callback,i,r[n].combo,r[n].seq)}else c||h(r[n].callback,i,r[n].combo);var u="keypress"==i.type&&I;i.type!=P||f(t)||u||o(s),I=c&&"keydown"==i.type}function p(t){"number"!=typeof t.which&&(t.which=t.keyCode);var e=r(t);if(e)return"keyup"==t.type&&O===e?void(O=!1):void R.handleKey(e,l(t),t)}function f(t){return"shift"==t||"ctrl"==t||"alt"==t||"meta"==t}function m(){clearTimeout(w),w=setTimeout(o,1e3)}function g(){if(!T){T={};for(var t in E)t>95&&t<112||E.hasOwnProperty(t)&&(T[E[t]]=t)}return T}function v(t,e,i){return i||(i=g()[t]?"keydown":"keypress"),"keypress"==i&&e.length&&(i="keydown"),i}function M(t,e,i,n){function s(e){return function(){P=e,++H[t],m()}}function a(e){h(i,e,t),"keyup"!==n&&(O=r(e)),setTimeout(o,10)}H[t]=0;for(var l=0;l<e.length;++l){var c=l+1===e.length,u=c?a:s(n||Y(e[l+1]).action);y(e[l],u,n,t,l)}}function b(t){return"+"===t?["+"]:t.split("+")}function Y(t,e){var i,n,r,s=[];for(i=b(t),r=0;r<i.length;++r)n=i[r],S[n]&&(n=S[n]),e&&"keypress"!=e&&A[n]&&(n=A[n],s.push("shift")),f(n)&&s.push(n);return e=v(n,s,e),{key:n,modifiers:s,action:e}}function y(t,e,i,n,r){k[t+":"+i]=e,t=t.replace(/\s+/g," ");var s,o=t.split(" ");return o.length>1?void M(t,o,e,i):(s=Y(t,i),C[s.key]=C[s.key]||[],a(s.key,s.modifiers,{type:s.action},n,t,r),void C[s.key][n?"unshift":"push"]({callback:e,modifiers:s.modifiers,action:s.action,seq:n,level:r,combo:t}))}function _(t,e,i){for(var n=0;n<t.length;++n)y(t[n],e,i)}function D(t){t=t||e;var i="undefined"!=typeof InstallTrigger;i&&(x[173]="-"),n(t,"keypress",p),n(t,"keydown",p),n(t,"keyup",p)}for(var T,w,E={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},x={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},A={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},S={option:"alt",command:"meta",return:"enter",escape:"esc",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},C={},k={},H={},O=!1,I=!1,P=!1,N=1;N<20;++N)E[111+N]="f"+N;for(N=0;N<=9;++N)E[N+96]=N;var R={bind:function(t,e,i){return t=t instanceof Array?t:[t],_(t,e,i),this},unbind:function(t,e){return R.bind(t,function(){},e)},trigger:function(t,e){return k[t+":"+e]&&k[t+":"+e]({},t),this},reset:function(){return C={},k={},this},stopCallback:function(t,e){return!1},handleKey:d,init:D};t.Mousetrap=R,"function"==typeof define&&define.amd&&define(R)}(window,document),function(t){t(function(){var e={primaryStyles:["fontFamily","fontSize","fontWeight","fontVariant","fontStyle","paddingLeft","paddingTop","paddingBottom","paddingRight","marginLeft","marginTop","marginBottom","marginRight","borderLeftColor","borderTopColor","borderBottomColor","borderRightColor","borderLeftStyle","borderTopStyle","borderBottomStyle","borderRightStyle","borderLeftWidth","borderTopWidth","borderBottomWidth","borderRightWidth","line-height","outline","text-align"],specificStyle:{"word-wrap":"break-word","overflow-x":"hidden","overflow-y":"auto"},simulator:t('<div id="textarea_simulator"/>').css({position:"absolute",top:0,left:0,visibility:"hidden"}).appendTo(document.body),toHtml:function(t){return t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br>").split(" ").join('<span style="white-space:prev-wrap">&nbsp;</span>')},getCaretPosition:function(){var i=e,n=this,r=n[0],s=n.offset();if(t.browser.msie&&t.browser.version<=9){r.focus();var o=document.selection.createRange();return t("#hskeywords").val(r.scrollTop),{left:o.boundingLeft-s.left,top:parseInt(o.boundingTop)-s.top+r.scrollTop+document.documentElement.scrollTop+parseInt(n.getComputedStyle("fontSize"))}}i.simulator.empty(),t.each(i.primaryStyles,function(t,e){n.cloneStyle(i.simulator,e)}),i.simulator.css(t.extend({width:n.width(),height:n.height()},i.specificStyle));var a=n.val()||n.text(),l=n.getCursorPosition(),c=a.substring(0,l),u=a.substring(l),h=t('<span class="before"/>').html(i.toHtml(c)),d=t('<span class="focus"/>'),p=t('<span class="after"/>').html(i.toHtml(u));i.simulator.append(h).append(d).append(p);var f=d.offset(),m=i.simulator.offset();return{top:f.top-m.top-r.scrollTop+(t.browser.mozilla?0:parseInt(n.getComputedStyle("fontSize"))),left:d[0].offsetLeft-i.simulator[0].offsetLeft-r.scrollLeft}}};t.fn.extend({setCursorPosition:function(e){return 0==this.length?this:t(this).setSelection(e,e)},setSelection:function(t,e){if(0==this.length)return this;if(input=this[0],input.createTextRange){var i=input.createTextRange();i.collapse(!0),i.moveEnd("character",e),i.moveStart("character",t),i.select()}else if(input.setSelectionRange)input.focus(),input.setSelectionRange(t,e);else{var n=this.get(0),i=document.createRange();i.collapse(!0),i.setStart(n.childNodes[0],t),i.setEnd(n.childNodes[0],e);var r=window.getSelection();r.removeAllRanges(),r.addRange(i)}return this},getComputedStyle:function(e){if(0!=this.length){var i=this[0],n=this.css(e);return n=n||(t.browser.msie?i.currentStyle[e]:document.defaultView.getComputedStyle(i,null)[e])}},cloneStyle:function(e,i){var n=this.getComputedStyle(i);n&&t(e).css(i,n)},cloneAllStyle:function(t,e){var i=this[0];for(var n in i.style){var r=i.style[n];"string"==typeof r||"number"==typeof r?this.cloneStyle(t,n):NaN}},getCursorPosition:function(){var t=input=this[0],e=input.value||input.innerText;this.data("lastCursorPosition")||this.data("lastCursorPosition",0);var i=this.data("lastCursorPosition");if(document.selection){input.focus();var n=document.selection.createRange(),r=document.selection.createRange().text.length;n.moveStart("character",-e.length),i=n.text.length-r}else{if(input.selectionStart||"0"==input.selectionStart)return input.selectionStart;if("undefined"!=typeof window.getSelection&&window.getSelection().rangeCount>0)try{var s=window.getSelection(),o=s.getRangeAt(0),a=o.cloneRange();a.selectNodeContents(t),a.setEnd(o.endContainer,o.endOffset),i=a.toString().length}catch(t){i=this.data("lastCursorPosition")}else if("undefined"!=typeof document.selection&&"Control"!=document.selection.type){var l=document.selection.createRange(),c=document.body.createTextRange();c.moveToElementText(t),c.setEndPoint("EndToEnd",l),i=c.text.length}}return this.data("lastCursorPosition",i),i},getCaretPosition:e.getCaretPosition})})}(jQuery),function(t,e,i){function n(e,i){this.options=t.extend({},u,i),n.MENU_TEMPLATE=this.options.menuTemplate,n.ITEM_TEMPLATE=this.options.listItemTemplate,this.element=e,this.$element=t(e),this.$itemList=t(n.MENU_TEMPLATE),this.reset(),this._defaults=u,this._name=c,this.expression=new RegExp("(^|\\s)"+this.options.token+"([-\\w.]*)$"),this.cleanupHandle=null,this.init()}var r=function(t,e){t.text(e.val)},s=function(t){var e=t.filter(function(t){return""!==val&&(t.val.toLowerCase().indexOf(val.toLowerCase())>=0||(t.meta||"").toLowerCase().indexOf(val.toLowerCase())>=0)});return e},o=function(t,e){},a=function(t){t.show()},l=function(t){t.hide()},c="sew",u={token:"@",elementFactory:r,values:[],unique:!1,repeat:!0,maxNoOfSuggestions:10,filterFn:s,menuTemplate:"<div class='-sew-list-container' style='display: none; position: absolute;'><ul class='-sew-list'></ul></div>",listItemTemplate:'<li class="-sew-list-item"></li>',renderCallback:o,show:a,hide:l,extras:{}};n.MENU_TEMPLATE=u.menuTemplate,n.ITEM_TEMPLATE=u.listItemTemplate,n.KEYS=[40,38,13,27,9],n.prototype.init=function(){this.$element.bind("keyup",t.proxy(this.onKeyUp,this)).bind("keydown",t.proxy(this.onKeyDown,this)).bind("blur",t.proxy(this.remove,this))},n.prototype.reset=function(){this.options.unique&&(this.options.values=n.getUniqueElements(this.options.values)),this.index=0,this.matched=!1,this.dontFilter=!1,this.lastFilter=i,this.filtered=this.options.values.slice(0)},n.prototype.next=function(){this.index=(this.index+1)%this.filtered.length,this.hightlightItem()},n.prototype.prev=function(){this.index=(this.index+this.filtered.length-1)%this.filtered.length,this.hightlightItem()},n.prototype.select=function(){this.replace(this.filtered[this.index].val),this.$element.trigger("mention-selected",this.filtered[this.index]),this.hideList()},n.prototype.remove=function(){this.options.hide(this.$itemList),this.cleanupHandle=e.setTimeout(t.proxy(function(){this.$itemList.remove()},this),1e3)},n.prototype.replace=function(t){var e=this.$element.getCursorPosition(),i=this.getText(),n=i.substring(0,e);n=n.replace(this.expression,"$1"+this.options.token+t);var r=i.substring(e,i.length),s=r.match(/^\s/)?"":" ",o=n+s+r;this.setText(o),this.$element.setCursorPosition(n.length+1)},n.prototype.hightlightItem=function(){this.$itemList.find(".-sew-list-item").removeClass("selected");var t=this.$itemList.find(".-sew-list-item").parent(),e=this.filtered[this.index].element.addClass("selected"),i=e.position().top;t.scrollTop(t.scrollTop()+i)},n.prototype.renderElements=function(e){this.$element.parent().append(this.$itemList);var i=this.$itemList.empty();e.forEach(t.proxy(function(e,r){var s=t(n.ITEM_TEMPLATE);this.options.elementFactory(s,e),e.element=s.appendTo(i).bind("click",t.proxy(this.onItemClick,this,e)).bind("mouseover",t.proxy(this.onItemHover,this,r))},this)),this.index=0,this.hightlightItem(),this.options.renderCallback(this.$element,this.$itemList)},n.prototype.displayList=function(){if(this.filtered.length){this.options.show(this.$itemList);var t=this.$element,e=this.$element.position(),i=t.getCaretPosition();this.$itemList.css({left:e.left+i.left,top:e.top+i.top})}},n.prototype.hideList=function(){this.options.hide(this.$itemList),this.reset()},n.prototype.filterList=function(t){if(t!=this.lastFilter){this.lastFilter=t,this.$itemList.find(".-sew-list-item").remove();var e=this.options.values,i=this;this.options.filterFn({values:e,query:t},function(t){i.filtered=t,t=i.filtered=t.slice(0,i.options.maxNoOfSuggestions),t.length?(i.renderElements(t),i.options.show(i.$itemList)):i.hideList()})}},n.getUniqueElements=function(t){var e=[];return t.forEach(function(t){var i=e.map(function(t){return t.val}).indexOf(t.val)>=0;i||e.push(t)}),e},n.prototype.getText=function(){return this.$element.val()||this.$element.text()},n.prototype.setText=function(t){this.$element.is("input,textarea")?this.$element.val(t):this.$element.html(t)},n.prototype.onKeyUp=function(t){var e=this.$element.getCursorPosition(),i=this.getText().substring(0,e),n=i.match(this.expression);return!n&&this.matched?(this.matched=!1,this.dontFilter=!1,void this.hideList()):(n&&!this.matched&&(this.lastFilter="\n",this.matched=!0),void(n&&!this.dontFilter&&this.filterList(n[2])))},n.prototype.onKeyDown=function(t){var e=this.$itemList.is(":visible");if(e&&!(n.KEYS.indexOf(t.keyCode)<0)){switch(t.keyCode){case 9:case 13:this.select();break;case 40:this.next();break;case 38:this.prev();break;case 27:this.options.hide(this.$itemList),this.dontFilter=!0}t.preventDefault()}},n.prototype.onItemClick=function(t,i){this.cleanupHandle&&e.clearTimeout(this.cleanupHandle),this.replace(t.val),this.$element.trigger("mention-selected",this.filtered[this.index]),this.hideList()},n.prototype.onItemHover=function(t,e){this.index=t,this.hightlightItem()},t.fn[c]=function(e){return this.each(function(){t.data(this,"plugin_"+c)||t.data(this,"plugin_"+c,new n(this,e))})}}(jQuery,window),function(){function t(t,e,i){return t.call.apply(t.bind,arguments)}function e(t,e,i){if(!t)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,n),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function i(n,r,s){return i=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?t:e,i.apply(null,arguments)}function n(t,e){this.a=t,this.m=e||t,this.c=this.m.document}function r(t,e,i,n){if(e=t.c.createElement(e),i)for(var r in i)i.hasOwnProperty(r)&&("style"==r?e.style.cssText=i[r]:e.setAttribute(r,i[r]));return n&&e.appendChild(t.c.createTextNode(n)),e}function s(t,e,i){t=t.c.getElementsByTagName(e)[0],t||(t=document.documentElement),t.insertBefore(i,t.lastChild)}function o(t){t.parentNode&&t.parentNode.removeChild(t)}function a(t,e,i){e=e||[],i=i||[];for(var n=t.className.split(/\s+/),r=0;r<e.length;r+=1){for(var s=!1,o=0;o<n.length;o+=1)if(e[r]===n[o]){s=!0;break}s||n.push(e[r])}for(e=[],r=0;r<n.length;r+=1){for(s=!1,o=0;o<i.length;o+=1)if(n[r]===i[o]){s=!0;break}s||e.push(n[r])}t.className=e.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function l(t,e){for(var i=t.className.split(/\s+/),n=0,r=i.length;n<r;n++)if(i[n]==e)return!0;return!1}function c(t){if("string"==typeof t.f)return t.f;var e=t.m.location.protocol;return"about:"==e&&(e=t.a.location.protocol),"https:"==e?"https:":"http:"}function u(t){return t.m.location.hostname||t.a.location.hostname}function h(t,e,i){function n(){c&&o&&a&&(c(l),c=null)}e=r(t,"link",{rel:"stylesheet",href:e,media:"all"});var o=!1,a=!0,l=null,c=i||null;nt?(e.onload=function(){o=!0,n()},e.onerror=function(){o=!0,l=Error("Stylesheet failed to load"),n()}):setTimeout(function(){o=!0,n()},0),s(t,"head",e)}function d(t,e,i,n){var s=t.c.getElementsByTagName("head")[0];if(s){var o=r(t,"script",{src:e}),a=!1;return o.onload=o.onreadystatechange=function(){a||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(a=!0,i&&i(null),o.onload=o.onreadystatechange=null,"HEAD"==o.parentNode.tagName&&s.removeChild(o))},s.appendChild(o),setTimeout(function(){a||(a=!0,i&&i(Error("Script load timeout")))},n||5e3),o}return null}function p(){this.a=0,this.c=null}function f(t){return t.a++,function(){t.a--,g(t)}}function m(t,e){t.c=e,g(t)}function g(t){0==t.a&&t.c&&(t.c(),t.c=null)}function v(t){this.a=t||"-"}function M(t,e){this.c=t,this.f=4,this.a="n";var i=(e||"n4").match(/^([nio])([1-9])$/i);i&&(this.a=i[1],this.f=parseInt(i[2],10))}function b(t){return _(t)+" "+(t.f+"00")+" 300px "+Y(t.c)}function Y(t){var e=[];t=t.split(/,\s*/);for(var i=0;i<t.length;i++){var n=t[i].replace(/['"]/g,"");-1!=n.indexOf(" ")||/^\d/.test(n)?e.push("'"+n+"'"):e.push(n)}return e.join(",")}function y(t){return t.a+t.f}function _(t){var e="normal";return"o"===t.a?e="oblique":"i"===t.a&&(e="italic"),e}function D(t){var e=4,i="n",n=null;return t&&((n=t.match(/(normal|oblique|italic)/i))&&n[1]&&(i=n[1].substr(0,1).toLowerCase()),(n=t.match(/([1-9]00|normal|bold)/i))&&n[1]&&(/bold/i.test(n[1])?e=7:/[1-9]00/.test(n[1])&&(e=parseInt(n[1].substr(0,1),10)))),i+e}function T(t,e){this.c=t,this.f=t.m.document.documentElement,this.h=e,this.a=new v("-"),this.j=!1!==e.events,this.g=!1!==e.classes}function w(t){t.g&&a(t.f,[t.a.c("wf","loading")]),x(t,"loading")}function E(t){if(t.g){var e=l(t.f,t.a.c("wf","active")),i=[],n=[t.a.c("wf","loading")];e||i.push(t.a.c("wf","inactive")),a(t.f,i,n)}x(t,"inactive")}function x(t,e,i){t.j&&t.h[e]&&(i?t.h[e](i.c,y(i)):t.h[e]())}function A(){this.c={}}function S(t,e,i){var n,r=[];for(n in e)if(e.hasOwnProperty(n)){var s=t.c[n];s&&r.push(s(e[n],i))}return r}function C(t,e){this.c=t,this.f=e,this.a=r(this.c,"span",{"aria-hidden":"true"},this.f)}function k(t){s(t.c,"body",t.a)}function H(t){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+Y(t.c)+";"+("font-style:"+_(t)+";font-weight:"+(t.f+"00")+";")}function O(t,e,i,n,r,s){this.g=t,this.j=e,this.a=n,this.c=i,this.f=r||3e3,this.h=s||void 0}function I(t,e,i,n,r,s,o){this.v=t,this.B=e,this.c=i,this.a=n,this.s=o||"BESbswy",this.f={},this.w=r||3e3,this.u=s||null,this.o=this.j=this.h=this.g=null,this.g=new C(this.c,this.s),this.h=new C(this.c,this.s),this.j=new C(this.c,this.s),this.o=new C(this.c,this.s),t=new M(this.a.c+",serif",y(this.a)),t=H(t),this.g.a.style.cssText=t,t=new M(this.a.c+",sans-serif",y(this.a)),t=H(t),this.h.a.style.cssText=t,t=new M("serif",y(this.a)),t=H(t),this.j.a.style.cssText=t,t=new M("sans-serif",y(this.a)),t=H(t),this.o.a.style.cssText=t,k(this.g),k(this.h),k(this.j),k(this.o)}function P(){if(null===st){var t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);st=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))}return st}function N(t,e,i){for(var n in rt)if(rt.hasOwnProperty(n)&&e===t.f[rt[n]]&&i===t.f[rt[n]])return!0;return!1}function R(t){var e,i=t.g.a.offsetWidth,n=t.h.a.offsetWidth;(e=i===t.f.serif&&n===t.f["sans-serif"])||(e=P()&&N(t,i,n)),e?it()-t.A>=t.w?P()&&N(t,i,n)&&(null===t.u||t.u.hasOwnProperty(t.a.c))?F(t,t.v):F(t,t.B):L(t):F(t,t.v)}function L(t){setTimeout(i(function(){R(this)},t),50)}function F(t,e){setTimeout(i(function(){o(this.g.a),o(this.h.a),o(this.j.a),o(this.o.a),e(this.a)},t),0)}function U(t,e,i){this.c=t,this.a=e,this.f=0,this.o=this.j=!1,this.s=i}function z(t){0==--t.f&&t.j&&(t.o?(t=t.a,t.g&&a(t.f,[t.a.c("wf","active")],[t.a.c("wf","loading"),t.a.c("wf","inactive")]),x(t,"active")):E(t.a))}function B(t){this.j=t,this.a=new A,this.h=0,this.f=this.g=!0}function W(t,e,n,r,s){var o=0==--t.h;(t.f||t.g)&&setTimeout(function(){var t=s||null,l=r||null||{};if(0===n.length&&o)E(e.a);else{e.f+=n.length,o&&(e.j=o);var c,u=[];for(c=0;c<n.length;c++){var h=n[c],d=l[h.c],p=e.a,f=h;if(p.g&&a(p.f,[p.a.c("wf",f.c,y(f).toString(),"loading")]),x(p,"fontloading",f),p=null,null===ot)if(window.FontFace){var f=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent),m=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);ot=f?42<parseInt(f[1],10):!m}else ot=!1;p=ot?new O(i(e.g,e),i(e.h,e),e.c,h,e.s,d):new I(i(e.g,e),i(e.h,e),e.c,h,e.s,t,d),u.push(p)}for(c=0;c<u.length;c++)u[c].start()}},0)}function j(t,e,i){var n=[],r=i.timeout;w(e);var n=S(t.a,i,t.c),s=new U(t.c,e,r);for(t.h=n.length,e=0,i=n.length;e<i;e++)n[e].load(function(e,i,n){W(t,s,e,i,n)})}function $(t,e){this.c=t,this.a=e}function V(t,e,i){var n=c(t.c);return t=(t.a.api||"fast.fonts.net/jsapi").replace(/^.*http(s?):(\/\/)?/,""),n+"//"+t+"/"+e+".js"+(i?"?v="+i:"")}function G(t,e){this.c=t,this.a=e}function q(t,e,i){t?this.c=t:this.c=e+at,this.a=[],this.f=[],this.g=i||""}function K(t,e){for(var i=e.length,n=0;n<i;n++){var r=e[n].split(":");3==r.length&&t.f.push(r.pop());var s="";2==r.length&&""!=r[1]&&(s=":"),t.a.push(r.join(s))}}function J(t){if(0==t.a.length)throw Error("No fonts to load!");if(-1!=t.c.indexOf("kit="))return t.c;for(var e=t.a.length,i=[],n=0;n<e;n++)i.push(t.a[n].replace(/ /g,"+"));return e=t.c+"?family="+i.join("%7C"),0<t.f.length&&(e+="&subset="+t.f.join(",")),0<t.g.length&&(e+="&text="+encodeURIComponent(t.g)),e}function X(t){this.f=t,this.a=[],this.c={}}function Z(t){for(var e=t.f.length,i=0;i<e;i++){var n=t.f[i].split(":"),r=n[0].replace(/\+/g," "),s=["n4"];if(2<=n.length){var o,a=n[1];if(o=[],a)for(var a=a.split(","),l=a.length,c=0;c<l;c++){var u;if(u=a[c],u.match(/^[\w-]+$/)){var h=ht.exec(u.toLowerCase());if(null==h)u="";else{if(u=h[2],u=null==u||""==u?"n":ut[u],h=h[1],null==h||""==h)h="4";else var d=ct[h],h=d?d:isNaN(h)?"4":h.substr(0,1);u=[u,h].join("")}}else u="";u&&o.push(u)}0<o.length&&(s=o),3==n.length&&(n=n[2],o=[],n=n?n.split(","):o,0<n.length&&(n=lt[n[0]])&&(t.c[r]=n))}for(t.c[r]||(n=lt[r])&&(t.c[r]=n),n=0;n<s.length;n+=1)t.a.push(new M(r,s[n]))}}function Q(t,e){this.c=t,this.a=e}function tt(t,e){this.c=t,this.a=e}function et(t,e){this.c=t,this.f=e,this.a=[]}var it=Date.now||function(){return+new Date},nt=!!window.FontFace;v.prototype.c=function(t){for(var e=[],i=0;i<arguments.length;i++)e.push(arguments[i].replace(/[\W_]+/g,"").toLowerCase());return e.join(this.a)},O.prototype.start=function(){var t=this.c.m.document,e=this,i=it(),n=new Promise(function(n,r){function s(){it()-i>=e.f?r():t.fonts.load(b(e.a),e.h).then(function(t){1<=t.length?n():setTimeout(s,25)},function(){r()})}s()}),r=new Promise(function(t,i){setTimeout(i,e.f)});Promise.race([r,n]).then(function(){e.g(e.a)},function(){e.j(e.a)})};var rt={D:"serif",C:"sans-serif"},st=null;I.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.o.a.offsetWidth,this.A=it(),R(this)};var ot=null;U.prototype.g=function(t){var e=this.a;e.g&&a(e.f,[e.a.c("wf",t.c,y(t).toString(),"active")],[e.a.c("wf",t.c,y(t).toString(),"loading"),e.a.c("wf",t.c,y(t).toString(),"inactive")]),x(e,"fontactive",t),this.o=!0,z(this)},U.prototype.h=function(t){var e=this.a;if(e.g){var i=l(e.f,e.a.c("wf",t.c,y(t).toString(),"active")),n=[],r=[e.a.c("wf",t.c,y(t).toString(),"loading")];i||n.push(e.a.c("wf",t.c,y(t).toString(),"inactive")),a(e.f,n,r)}x(e,"fontinactive",t),z(this)},B.prototype.load=function(t){this.c=new n(this.j,t.context||this.j),this.g=!1!==t.events,this.f=!1!==t.classes,j(this,new T(this.c,t),t)},$.prototype.load=function(t){function e(){if(s["__mti_fntLst"+n]){var i,r=s["__mti_fntLst"+n](),o=[];if(r)for(var a=0;a<r.length;a++){var l=r[a].fontfamily;void 0!=r[a].fontStyle&&void 0!=r[a].fontWeight?(i=r[a].fontStyle+r[a].fontWeight,o.push(new M(l,i))):o.push(new M(l))}t(o)}else setTimeout(function(){e()},50)}var i=this,n=i.a.projectId,r=i.a.version;if(n){var s=i.c.m;d(this.c,V(i,n,r),function(r){r?t([]):(s["__MonotypeConfiguration__"+n]=function(){return i.a},e())}).id="__MonotypeAPIScript__"+n}else t([])},G.prototype.load=function(t){var e,i,n=this.a.urls||[],r=this.a.families||[],s=this.a.testStrings||{},o=new p;for(e=0,i=n.length;e<i;e++)h(this.c,n[e],f(o));var a=[];for(e=0,i=r.length;e<i;e++)if(n=r[e].split(":"),n[1])for(var l=n[1].split(","),c=0;c<l.length;c+=1)a.push(new M(n[0],l[c]));else a.push(new M(n[0]));m(o,function(){t(a,s)})};var at="//fonts.googleapis.com/css",lt={latin:"BESbswy","latin-ext":"",cyrillic:"",greek:"",khmer:"",Hanuman:""},ct={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},ut={i:"i",italic:"i",n:"n",normal:"n"},ht=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/,dt={Arimo:!0,Cousine:!0,Tinos:!0};Q.prototype.load=function(t){var e=new p,i=this.c,n=new q(this.a.api,c(i),this.a.text),r=this.a.families;K(n,r);var s=new X(r);Z(s),h(i,J(n),f(e)),m(e,function(){t(s.a,s.c,dt)})},tt.prototype.load=function(t){var e=this.a.id,i=this.c.m;e?d(this.c,(this.a.api||"https://use.typekit.net")+"/"+e+".js",function(e){if(e)t([]);else if(i.Typekit&&i.Typekit.config&&i.Typekit.config.fn){e=i.Typekit.config.fn;for(var n=[],r=0;r<e.length;r+=2)for(var s=e[r],o=e[r+1],a=0;a<o.length;a++)n.push(new M(s,o[a]));try{i.Typekit.load({events:!1,classes:!1,async:!0})}catch(t){}t(n)}},2e3):t([])},et.prototype.load=function(t){var e=this.f.id,i=this.c.m,n=this;e?(i.__webfontfontdeckmodule__||(i.__webfontfontdeckmodule__={}),i.__webfontfontdeckmodule__[e]=function(e,i){for(var r=0,s=i.fonts.length;r<s;++r){var o=i.fonts[r];n.a.push(new M(o.name,D("font-weight:"+o.weight+";font-style:"+o.style)))}t(n.a)},d(this.c,c(this.c)+(this.f.api||"//f.fontdeck.com/s/css/js/")+u(this.c)+"/"+e+".js",function(e){e&&t([])})):t([])};var pt=new B(window);pt.a.c.custom=function(t,e){return new G(e,t)},pt.a.c.fontdeck=function(t,e){return new et(e,t)},pt.a.c.monotype=function(t,e){return new $(e,t)},pt.a.c.typekit=function(t,e){return new tt(e,t)},pt.a.c.google=function(t,e){return new Q(e,t)};var ft={load:i(pt.load,pt)};"function"==typeof define&&define.amd?define(function(){return ft}):"undefined"!=typeof module&&module.exports?module.exports=ft:(window.WebFont=ft,window.WebFontConfig&&pt.load(window.WebFontConfig))}(),function(t,e){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(i,n,r){t.Backbone=e(t,r,i,n)});else if("undefined"!=typeof exports){var i=require("underscore");e(t,exports,i)}else t.Backbone=e(t,{},t._,t.jQuery||t.Zepto||t.ender||t.$)}(this,function(t,e,i,n){var r=t.Backbone,s=[],o=(s.push,s.slice);s.splice;e.VERSION="1.1.2",e.$=n,e.noConflict=function(){return t.Backbone=r,this},e.emulateHTTP=!1,e.emulateJSON=!1;var a=e.Events={on:function(t,e,i){if(!c(this,"on",t,[e,i])||!e)return this;this._events||(this._events={});var n=this._events[t]||(this._events[t]=[]);return n.push({callback:e,context:i,ctx:i||this}),this},once:function(t,e,n){if(!c(this,"once",t,[e,n])||!e)return this;var r=this,s=i.once(function(){r.off(t,s),e.apply(this,arguments)});return s._callback=e,this.on(t,s,n)},off:function(t,e,n){var r,s,o,a,l,u,h,d;if(!this._events||!c(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events=void 0,this;for(a=t?[t]:i.keys(this._events),l=0,u=a.length;l<u;l++)if(t=a[l],o=this._events[t]){if(this._events[t]=r=[],e||n)for(h=0,d=o.length;h<d;h++)s=o[h],(e&&e!==s.callback&&e!==s.callback._callback||n&&n!==s.context)&&r.push(s);r.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=o.call(arguments,1);if(!c(this,"trigger",t,e))return this;var i=this._events[t],n=this._events.all;return i&&u(i,e),n&&u(n,arguments),this},stopListening:function(t,e,n){var r=this._listeningTo;if(!r)return this;var s=!e&&!n;n||"object"!=typeof e||(n=this),t&&((r={})[t._listenId]=t);for(var o in r)t=r[o],t.off(e,n,this),(s||i.isEmpty(t._events))&&delete this._listeningTo[o];return this}},l=/\s+/,c=function(t,e,i,n){if(!i)return!0;if("object"==typeof i){for(var r in i)t[e].apply(t,[r,i[r]].concat(n));return!1}if(l.test(i)){for(var s=i.split(l),o=0,a=s.length;o<a;o++)t[e].apply(t,[s[o]].concat(n));return!1}return!0},u=function(t,e){var i,n=-1,r=t.length,s=e[0],o=e[1],a=e[2];switch(e.length){case 0:for(;++n<r;)(i=t[n]).callback.call(i.ctx);return;case 1:for(;++n<r;)(i=t[n]).callback.call(i.ctx,s);return;case 2:for(;++n<r;)(i=t[n]).callback.call(i.ctx,s,o);return;case 3:for(;++n<r;)(i=t[n]).callback.call(i.ctx,s,o,a);return;default:for(;++n<r;)(i=t[n]).callback.apply(i.ctx,e);return}},h={listenTo:"on",listenToOnce:"once"};i.each(h,function(t,e){a[e]=function(e,n,r){var s=this._listeningTo||(this._listeningTo={}),o=e._listenId||(e._listenId=i.uniqueId("l"));return s[o]=e,r||"object"!=typeof n||(r=this),e[t](n,r,this),this}}),a.bind=a.on,a.unbind=a.off,i.extend(e,a);var d=e.Model=function(t,e){var n=t||{};e||(e={}),this.cid=i.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{}),n=i.defaults({},n,i.result(this,"defaults")),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)};i.extend(d.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return i.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,n){var r,s,o,a,l,c,u,h;if(null==t)return this;if("object"==typeof t?(s=t,n=e):(s={})[t]=e,n||(n={}),!this._validate(s,n))return!1;o=n.unset,l=n.silent,a=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=i.clone(this.attributes),this.changed={}),h=this.attributes,u=this._previousAttributes,this.idAttribute in s&&(this.id=s[this.idAttribute]);for(r in s)e=s[r],i.isEqual(h[r],e)||a.push(r),i.isEqual(u[r],e)?delete this.changed[r]:this.changed[r]=e,o?delete h[r]:h[r]=e;if(!l){a.length&&(this._pending=n);for(var d=0,p=a.length;d<p;d++)this.trigger("change:"+a[d],this,h[a[d]],n)}if(c)return this;if(!l)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,i.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,i.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!i.isEmpty(this.changed):i.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&i.clone(this.changed);var e,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(var s in t)i.isEqual(r[s],e=t[s])||((n||(n={}))[s]=e);return n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(t){t=t?i.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,n=t.success;return t.success=function(i){return!!e.set(e.parse(i,t),t)&&(n&&n(e,i,t),void e.trigger("sync",e,i,t))},R(this,t),this.sync("read",this,t)},save:function(t,e,n){var r,s,o,a=this.attributes;if(null==t||"object"==typeof t?(r=t,n=e):(r={})[t]=e,n=i.extend({validate:!0},n),r&&!n.wait){if(!this.set(r,n))return!1}else if(!this._validate(r,n))return!1;r&&n.wait&&(this.attributes=i.extend({},a,r)),void 0===n.parse&&(n.parse=!0);var l=this,c=n.success;return n.success=function(t){l.attributes=a;var e=l.parse(t,n);return n.wait&&(e=i.extend(r||{},e)),!(i.isObject(e)&&!l.set(e,n))&&(c&&c(l,t,n),void l.trigger("sync",l,t,n))},R(this,n),s=this.isNew()?"create":n.patch?"patch":"update","patch"===s&&(n.attrs=r),o=this.sync(s,this,n),r&&n.wait&&(this.attributes=a),o},destroy:function(t){t=t?i.clone(t):{};var e=this,n=t.success,r=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(i){(t.wait||e.isNew())&&r(),n&&n(e,i,t),e.isNew()||e.trigger("sync",e,i,t)},this.isNew())return t.success(),!1;R(this,t);var s=this.sync("delete",this,t);return t.wait||r(),s},url:function(){var t=i.result(this,"urlRoot")||i.result(this.collection,"url")||N();return this.isNew()?t:t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},i.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=i.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return!n||(this.trigger("invalid",this,n,i.extend(e,{validationError:n})),!1)}});var p=["keys","values","pairs","invert","pick","omit"];i.each(p,function(t){d.prototype[t]=function(){var e=o.call(arguments);return e.unshift(this.attributes),i[t].apply(i,e)}});var f=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,i.extend({silent:!0},e))},m={add:!0,remove:!0,merge:!0},g={add:!0,remove:!1};i.extend(f.prototype,a,{model:d,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,i.extend({merge:!1},e,g))},remove:function(t,e){var n=!i.isArray(t);t=n?[t]:i.clone(t),e||(e={});var r,s,o,a;for(r=0,s=t.length;r<s;r++)a=t[r]=this.get(t[r]),a&&(delete this._byId[a.id],delete this._byId[a.cid],o=this.indexOf(a),this.models.splice(o,1),this.length--,e.silent||(e.index=o,a.trigger("remove",a,this,e)),this._removeReference(a,e));return n?t[0]:t},set:function(t,e){e=i.defaults({},e,m),e.parse&&(t=this.parse(t,e));var n=!i.isArray(t);t=n?t?[t]:[]:i.clone(t);var r,s,o,a,l,c,u,h=e.at,p=this.model,f=this.comparator&&null==h&&e.sort!==!1,g=i.isString(this.comparator)?this.comparator:null,v=[],M=[],b={},Y=e.add,y=e.merge,_=e.remove,D=!(f||!Y||!_)&&[];for(r=0,s=t.length;r<s;r++){if(l=t[r]||{},o=l instanceof d?a=l:l[p.prototype.idAttribute||"id"],c=this.get(o))_&&(b[c.cid]=!0),y&&(l=l===a?a.attributes:l,e.parse&&(l=c.parse(l,e)),c.set(l,e),f&&!u&&c.hasChanged(g)&&(u=!0)),t[r]=c;else if(Y){if(a=t[r]=this._prepareModel(l,e),!a)continue;v.push(a),this._addReference(a,e)}a=c||a,!D||!a.isNew()&&b[a.id]||D.push(a),b[a.id]=!0}if(_){for(r=0,s=this.length;r<s;++r)b[(a=this.models[r]).cid]||M.push(a);M.length&&this.remove(M,e)}if(v.length||D&&D.length)if(f&&(u=!0),this.length+=v.length,null!=h)for(r=0,s=v.length;r<s;r++)this.models.splice(h+r,0,v[r]);else{D&&(this.models.length=0);var T=D||v;for(r=0,s=T.length;r<s;r++)this.models.push(T[r])}if(u&&this.sort({silent:!0}),!e.silent){for(r=0,s=v.length;r<s;r++)(a=v[r]).trigger("add",a,this,e);(u||D&&D.length)&&this.trigger("sort",this,e)}return n?t[0]:t},reset:function(t,e){e||(e={});for(var n=0,r=this.models.length;n<r;n++)this._removeReference(this.models[n],e);return e.previousModels=this.models,this._reset(),t=this.add(t,i.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,i.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,i.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return o.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[t.id]||this._byId[t.cid]},at:function(t){return this.models[t]},where:function(t,e){return i.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var i in t)if(t[i]!==e.get(i))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),i.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(i.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return i.invoke(this.models,"get",t)},fetch:function(t){t=t?i.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,n=this;return t.success=function(i){var r=t.reset?"reset":"set";n[r](i,t),e&&e(n,i,t),n.trigger("sync",n,i,t)},R(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?i.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var n=this,r=e.success;return e.success=function(t,i){e.wait&&n.add(t,e),r&&r(t,i,e)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof d)return t;e=e?i.clone(e):{},e.collection=this;var n=new this.model(t,e);return n.validationError?(this.trigger("invalid",this,n.validationError,e),!1):n},_addReference:function(t,e){this._byId[t.cid]=t,null!=t.id&&(this._byId[t.id]=t),t.collection||(t.collection=this),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){("add"!==t&&"remove"!==t||i===this)&&("destroy"===t&&this.remove(e,n),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var v=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];i.each(v,function(t){f.prototype[t]=function(){var e=o.call(arguments);return e.unshift(this.models),i[t].apply(i,e)}});var M=["groupBy","countBy","sortBy","indexBy"];i.each(M,function(t){f.prototype[t]=function(e,n){var r=i.isFunction(e)?e:function(t){return t.get(e)};return i[t](this.models,r,n)}});var b=e.View=function(t){this.cid=i.uniqueId("view"),t||(t={}),i.extend(this,i.pick(t,y)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},Y=/^(\S+)\s*(.*)$/,y=["model","collection","el","id","attributes","className","tagName","events"];i.extend(b.prototype,a,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,i){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],i!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=i.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var n=t[e];if(i.isFunction(n)||(n=this[t[e]]),n){var r=e.match(Y),s=r[1],o=r[2];n=i.bind(n,this),s+=".delegateEvents"+this.cid,""===o?this.$el.on(s,n):this.$el.on(s,o,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"),!1);else{var t=i.extend({},i.result(this,"attributes"));this.id&&(t.id=i.result(this,"id")),this.className&&(t.class=i.result(this,"className"));var n=e.$("<"+i.result(this,"tagName")+">").attr(t);this.setElement(n,!1)}}}),e.sync=function(t,n,r){var s=D[t];i.defaults(r||(r={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var o={type:s,dataType:"json"};if(r.url||(o.url=i.result(n,"url")||N()),null!=r.data||!n||"create"!==t&&"update"!==t&&"patch"!==t||(o.contentType="application/json",o.data=JSON.stringify(r.attrs||n.toJSON(r))),r.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),r.emulateHTTP&&("PUT"===s||"DELETE"===s||"PATCH"===s)){o.type="POST",r.emulateJSON&&(o.data._method=s);var a=r.beforeSend;r.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",s),a)return a.apply(this,arguments)}}"GET"===o.type||r.emulateJSON||(o.processData=!1),"PATCH"===o.type&&_&&(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=r.xhr=e.ajax(i.extend(o,r));return n.trigger("request",n,l,r),l};var _=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),D={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var T=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},w=/\((.*?)\)/g,E=/(\(\?)?:\w+/g,x=/\*\w+/g,A=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(T.prototype,a,{initialize:function(){},route:function(t,n,r){i.isRegExp(t)||(t=this._routeToRegExp(t)),i.isFunction(n)&&(r=n,n=""),r||(r=this[n]);var s=this;return e.history.route(t,function(i){var o=s._extractParameters(t,i);s.execute(r,o),s.trigger.apply(s,["route:"+n].concat(o)),s.trigger("route",n,o),e.history.trigger("route",s,n,o)}),this},execute:function(t,e){t&&t.apply(this,e)},navigate:function(t,i){return e.history.navigate(t,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var t,e=i.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(A,"\\$&").replace(w,"(?:$1)?").replace(E,function(t,e){return e?t:"([^/?]+)"}).replace(x,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return i.map(n,function(t,e){return e===n.length-1?t||null:t?decodeURIComponent(t):null})}});var S=e.History=function(){this.handlers=[],i.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},C=/^[#\/]|\s+$/g,k=/^\/+|\/+$/g,H=/msie [\w.]+/,O=/\/$/,I=/#.*$/;S.started=!1,i.extend(S.prototype,a,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=decodeURI(this.location.pathname+this.location.search);var i=this.root.replace(O,"");t.indexOf(i)||(t=t.slice(i.length))}else t=this.getHash();return t.replace(C,"")},start:function(t){if(S.started)throw new Error("Backbone.history has already been started");S.started=!0,this.options=i.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),r=document.documentMode,s=H.exec(navigator.userAgent.toLowerCase())&&(!r||r<=7);if(this.root=("/"+this.root+"/").replace(k,"/"),s&&this._wantsHashChange){var o=e.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=o.hide().appendTo("body")[0].contentWindow,this.navigate(n)}this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!s?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var a=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&a.hash&&(this.fragment=this.getHash().replace(C,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),S.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e!==this.fragment&&(this.iframe&&this.navigate(e),void this.loadUrl())},loadUrl:function(t){return t=this.fragment=this.getFragment(t),i.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0})},navigate:function(t,e){if(!S.started)return!1;e&&e!==!0||(e={trigger:!!e});var i=this.root+(t=this.getFragment(t||""));if(t=t.replace(I,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==i&&(i=i.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,i){if(i){var n=t.href.replace(/(javascript:|#).*$/,"");t.replace(n+"#"+e)}else t.hash="#"+e}}),e.history=new S;var P=function(t,e){var n,r=this;n=t&&i.has(t,"constructor")?t.constructor:function(){return r.apply(this,arguments)},i.extend(n,r,e);var s=function(){this.constructor=n};return s.prototype=r.prototype,n.prototype=new s,t&&i.extend(n.prototype,t),n.__super__=r.prototype,n};d.extend=f.extend=T.extend=b.extend=S.extend=P;var N=function(){throw new Error('A "url" property or function must be specified')},R=function(t,e){var i=e.error;e.error=function(n){i&&i(t,n,e),t.trigger("error",t,n,e)}};return e}),!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Handlebars=e():t.Handlebars=e()}(this,function(){return function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return t[n].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){"use strict";function n(){var t=v();return t.compile=function(e,i){return u.compile(e,i,t)},t.precompile=function(e,i){return u.precompile(e,i,t)},t.AST=l.default,t.Compiler=u.Compiler,t.JavaScriptCompiler=d.default,t.Parser=c.parser,t.parse=c.parse,t.parseWithoutProcessing=c.parseWithoutProcessing,t}var r=i(1).default;e.__esModule=!0;var s=i(2),o=r(s),a=i(45),l=r(a),c=i(46),u=i(51),h=i(52),d=r(h),p=i(49),f=r(p),m=i(44),g=r(m),v=o.default.create,M=n();M.create=n,g.default(M),M.Visitor=f.default,M.default=M,e.default=M,t.exports=e.default},function(t,e){"use strict";e.default=function(t){return t&&t.__esModule?t:{default:t}},e.__esModule=!0},function(t,e,i){"use strict";function n(){var t=new a.HandlebarsEnvironment;return p.extend(t,a),t.SafeString=c.default,t.Exception=h.default,t.Utils=p,t.escapeExpression=p.escapeExpression,t.VM=m,t.template=function(e){return m.template(e,t)},t}var r=i(3).default,s=i(1).default;e.__esModule=!0;var o=i(4),a=r(o),l=i(37),c=s(l),u=i(6),h=s(u),d=i(5),p=r(d),f=i(38),m=r(f),g=i(44),v=s(g),M=n();M.create=n,v.default(M),M.default=M,e.default=M,t.exports=e.default},function(t,e){"use strict";e.default=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e},e.__esModule=!0},function(t,e,i){"use strict";function n(t,e,i){this.helpers=t||{},this.partials=e||{},this.decorators=i||{},l.registerDefaultHelpers(this),c.registerDefaultDecorators(this)}var r=i(1).default;e.__esModule=!0,e.HandlebarsEnvironment=n;var s=i(5),o=i(6),a=r(o),l=i(10),c=i(30),u=i(32),h=r(u),d=i(33),p="4.7.6";e.VERSION=p;var f=8;e.COMPILER_REVISION=f;var m=7;e.LAST_COMPATIBLE_COMPILER_REVISION=m;var g={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"};e.REVISION_CHANGES=g;var v="[object Object]";n.prototype={constructor:n,logger:h.default,log:h.default.log,registerHelper:function(t,e){if(s.toString.call(t)===v){if(e)throw new a.default("Arg not supported with multiple helpers");s.extend(this.helpers,t)}else this.helpers[t]=e},unregisterHelper:function(t){delete this.helpers[t]},registerPartial:function(t,e){if(s.toString.call(t)===v)s.extend(this.partials,t);else{if("undefined"==typeof e)throw new a.default('Attempting to register a partial called "'+t+'" as undefined');this.partials[t]=e}},unregisterPartial:function(t){delete this.partials[t]},registerDecorator:function(t,e){if(s.toString.call(t)===v){if(e)throw new a.default("Arg not supported with multiple decorators");s.extend(this.decorators,t)}else this.decorators[t]=e},unregisterDecorator:function(t){delete this.decorators[t]},resetLoggedPropertyAccesses:function(){d.resetLoggedProperties()}};var M=h.default.log;e.log=M,e.createFrame=s.createFrame,e.logger=h.default},function(t,e){"use strict";function i(t){return u[t]}function n(t){for(var e=1;e<arguments.length;e++)for(var i in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],i)&&(t[i]=arguments[e][i]);return t}function r(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1}function s(t){if("string"!=typeof t){if(t&&t.toHTML)return t.toHTML();if(null==t)return"";if(!t)return t+"";t=""+t}return d.test(t)?t.replace(h,i):t}function o(t){return!t&&0!==t||!(!m(t)||0!==t.length)}function a(t){var e=n({},t);return e._parent=t,e}function l(t,e){return t.path=e,t}function c(t,e){return(t?t+".":"")+e}e.__esModule=!0,e.extend=n,e.indexOf=r,e.escapeExpression=s,e.isEmpty=o,e.createFrame=a,e.blockParams=l,e.appendContextPath=c;var u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},h=/[&<>"'`=]/g,d=/[&<>"'`=]/,p=Object.prototype.toString;e.toString=p;var f=function(t){return"function"==typeof t};f(/x/)&&(e.isFunction=f=function(t){return"function"==typeof t&&"[object Function]"===p.call(t)}),e.isFunction=f;var m=Array.isArray||function(t){return!(!t||"object"!=typeof t)&&"[object Array]"===p.call(t)};e.isArray=m},function(t,e,i){"use strict";function n(t,e){var i=e&&e.loc,o=void 0,a=void 0,l=void 0,c=void 0;i&&(o=i.start.line,a=i.end.line,l=i.start.column,c=i.end.column,t+=" - "+o+":"+l);for(var u=Error.prototype.constructor.call(this,t),h=0;h<s.length;h++)this[s[h]]=u[s[h]];Error.captureStackTrace&&Error.captureStackTrace(this,n);try{i&&(this.lineNumber=o,this.endLineNumber=a,r?(Object.defineProperty(this,"column",{value:l,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:c,enumerable:!0})):(this.column=l,this.endColumn=c))}catch(t){}}var r=i(7).default;e.__esModule=!0;var s=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];n.prototype=new Error,e.default=n,t.exports=e.default},function(t,e,i){t.exports={default:i(8),__esModule:!0}},function(t,e,i){var n=i(9);t.exports=function(t,e,i){return n.setDesc(t,e,i)}},function(t,e){var i=Object;t.exports={create:i.create,getProto:i.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:i.getOwnPropertyDescriptor,setDesc:i.defineProperty,setDescs:i.defineProperties,getKeys:i.keys,getNames:i.getOwnPropertyNames,getSymbols:i.getOwnPropertySymbols,each:[].forEach}},function(t,e,i){"use strict";function n(t){a.default(t),c.default(t),h.default(t),p.default(t),m.default(t),v.default(t),b.default(t)}function r(t,e,i){t.helpers[e]&&(t.hooks[e]=t.helpers[e],i||delete t.helpers[e])}var s=i(1).default;e.__esModule=!0,e.registerDefaultHelpers=n,e.moveHelperToHooks=r;var o=i(11),a=s(o),l=i(12),c=s(l),u=i(25),h=s(u),d=i(26),p=s(d),f=i(27),m=s(f),g=i(28),v=s(g),M=i(29),b=s(M)},function(t,e,i){"use strict";e.__esModule=!0;var n=i(5);e.default=function(t){t.registerHelper("blockHelperMissing",function(e,i){var r=i.inverse,s=i.fn;if(e===!0)return s(this);if(e===!1||null==e)return r(this);if(n.isArray(e))return e.length>0?(i.ids&&(i.ids=[i.name]),t.helpers.each(e,i)):r(this);if(i.data&&i.ids){var o=n.createFrame(i.data);o.contextPath=n.appendContextPath(i.data.contextPath,i.name),i={data:o}}return s(e,i)})},t.exports=e.default},function(t,e,i){(function(n){"use strict";var r=i(13).default,s=i(1).default;e.__esModule=!0;var o=i(5),a=i(6),l=s(a);e.default=function(t){t.registerHelper("each",function(t,e){function i(e,i,n){h&&(h.key=e,h.index=i,h.first=0===i,h.last=!!n,d&&(h.contextPath=d+e)),u+=s(t[e],{data:h,blockParams:o.blockParams([t[e],e],[d+e,null])})}if(!e)throw new l.default("Must pass iterator to #each");var s=e.fn,a=e.inverse,c=0,u="",h=void 0,d=void 0;if(e.data&&e.ids&&(d=o.appendContextPath(e.data.contextPath,e.ids[0])+"."),o.isFunction(t)&&(t=t.call(this)),e.data&&(h=o.createFrame(e.data)),t&&"object"==typeof t)if(o.isArray(t))for(var p=t.length;c<p;c++)c in t&&i(c,c,c===t.length-1);else if(n.Symbol&&t[n.Symbol.iterator]){for(var f=[],m=t[n.Symbol.iterator](),g=m.next();!g.done;g=m.next())f.push(g.value);t=f;for(var p=t.length;c<p;c++)i(c,c,c===t.length-1)}else!function(){var e=void 0;r(t).forEach(function(t){void 0!==e&&i(e,c-1),e=t,c++}),void 0!==e&&i(e,c-1,!0)}();return 0===c&&(u=a(this)),u})},t.exports=e.default}).call(e,function(){return this}())},function(t,e,i){t.exports={default:i(14),__esModule:!0}},function(t,e,i){i(15),t.exports=i(21).Object.keys},function(t,e,i){var n=i(16);i(18)("keys",function(t){return function(e){return t(n(e))}})},function(t,e,i){var n=i(17);t.exports=function(t){return Object(n(t))}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,i){var n=i(19),r=i(21),s=i(24);t.exports=function(t,e){var i=(r.Object||{})[t]||Object[t],o={};o[t]=e(i),n(n.S+n.F*s(function(){i(1)}),"Object",o)}},function(t,e,i){var n=i(20),r=i(21),s=i(22),o="prototype",a=function(t,e,i){var l,c,u,h=t&a.F,d=t&a.G,p=t&a.S,f=t&a.P,m=t&a.B,g=t&a.W,v=d?r:r[e]||(r[e]={}),M=d?n:p?n[e]:(n[e]||{})[o];d&&(i=e);for(l in i)c=!h&&M&&l in M,c&&l in v||(u=c?M[l]:i[l],v[l]=d&&"function"!=typeof M[l]?i[l]:m&&c?s(u,n):g&&M[l]==u?function(t){var e=function(e){return this instanceof t?new t(e):t(e)};return e[o]=t[o],e}(u):f&&"function"==typeof u?s(Function.call,u):u,f&&((v[o]||(v[o]={}))[l]=u))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,t.exports=a},function(t,e){var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(t,e){var i=t.exports={version:"1.2.6"};"number"==typeof __e&&(__e=i)},function(t,e,i){var n=i(23);t.exports=function(t,e,i){if(n(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,r){return t.call(e,i,n,r)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,i){"use strict";var n=i(1).default;e.__esModule=!0;var r=i(6),s=n(r);e.default=function(t){t.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new s.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})},t.exports=e.default},function(t,e,i){"use strict";var n=i(1).default;e.__esModule=!0;var r=i(5),s=i(6),o=n(s);e.default=function(t){t.registerHelper("if",function(t,e){if(2!=arguments.length)throw new o.default("#if requires exactly one argument");return r.isFunction(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||r.isEmpty(t)?e.inverse(this):e.fn(this)}),t.registerHelper("unless",function(e,i){if(2!=arguments.length)throw new o.default("#unless requires exactly one argument");return t.helpers.if.call(this,e,{fn:i.inverse,inverse:i.fn,hash:i.hash})})},t.exports=e.default},function(t,e){"use strict";e.__esModule=!0,e.default=function(t){t.registerHelper("log",function(){for(var e=[void 0],i=arguments[arguments.length-1],n=0;n<arguments.length-1;n++)e.push(arguments[n]);var r=1;null!=i.hash.level?r=i.hash.level:i.data&&null!=i.data.level&&(r=i.data.level),e[0]=r,t.log.apply(t,e)})},t.exports=e.default},function(t,e){"use strict";e.__esModule=!0,e.default=function(t){t.registerHelper("lookup",function(t,e,i){return t?i.lookupProperty(t,e):t})},t.exports=e.default},function(t,e,i){"use strict";var n=i(1).default;e.__esModule=!0;var r=i(5),s=i(6),o=n(s);e.default=function(t){t.registerHelper("with",function(t,e){if(2!=arguments.length)throw new o.default("#with requires exactly one argument");r.isFunction(t)&&(t=t.call(this));var i=e.fn;if(r.isEmpty(t))return e.inverse(this);var n=e.data;return e.data&&e.ids&&(n=r.createFrame(e.data),n.contextPath=r.appendContextPath(e.data.contextPath,e.ids[0])),i(t,{data:n,blockParams:r.blockParams([t],[n&&n.contextPath])})})},t.exports=e.default},function(t,e,i){"use strict";function n(t){o.default(t)}var r=i(1).default;e.__esModule=!0,e.registerDefaultDecorators=n;var s=i(31),o=r(s)},function(t,e,i){"use strict";e.__esModule=!0;var n=i(5);e.default=function(t){t.registerDecorator("inline",function(t,e,i,r){var s=t;return e.partials||(e.partials={},s=function(r,s){var o=i.partials;i.partials=n.extend({},o,e.partials);var a=t(r,s);return i.partials=o,a}),e.partials[r.args[0]]=r.fn,s})},t.exports=e.default},function(t,e,i){"use strict";e.__esModule=!0;var n=i(5),r={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(t){if("string"==typeof t){var e=n.indexOf(r.methodMap,t.toLowerCase());t=e>=0?e:parseInt(t,10)}return t},log:function(t){if(t=r.lookupLevel(t),"undefined"!=typeof console&&r.lookupLevel(r.level)<=t){var e=r.methodMap[t];console[e]||(e="log");for(var i=arguments.length,n=Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];console[e].apply(console,n)}}};e.default=r,t.exports=e.default},function(t,e,i){"use strict";function n(t){var e=l(null);e.constructor=!1,e.__defineGetter__=!1,e.__defineSetter__=!1,e.__lookupGetter__=!1;var i=l(null);return i.__proto__=!1,{properties:{whitelist:h.createNewLookupObject(i,t.allowedProtoProperties),defaultValue:t.allowProtoPropertiesByDefault},methods:{whitelist:h.createNewLookupObject(e,t.allowedProtoMethods),defaultValue:t.allowProtoMethodsByDefault}}}function r(t,e,i){return"function"==typeof t?s(e.methods,i):s(e.properties,i)}function s(t,e){return void 0!==t.whitelist[e]?t.whitelist[e]===!0:void 0!==t.defaultValue?t.defaultValue:(o(e),!1)}function o(t){f[t]!==!0&&(f[t]=!0,p.log("error",'Handlebars: Access has been denied to resolve the property "'+t+'" because it is not an "own property" of its parent.\nYou can add a runtime option to disable the check or this warning:\nSee https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details'))}function a(){c(f).forEach(function(t){delete f[t]})}var l=i(34).default,c=i(13).default,u=i(3).default;e.__esModule=!0,e.createProtoAccessControl=n,e.resultIsAllowed=r,e.resetLoggedProperties=a;var h=i(36),d=i(32),p=u(d),f=l(null)},function(t,e,i){t.exports={default:i(35),__esModule:!0}},function(t,e,i){var n=i(9);t.exports=function(t,e){return n.create(t,e)}},function(t,e,i){"use strict";function n(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return s.extend.apply(void 0,[r(null)].concat(e))}var r=i(34).default;e.__esModule=!0,e.createNewLookupObject=n;var s=i(5)},function(t,e){"use strict";function i(t){this.string=t}e.__esModule=!0,i.prototype.toString=i.prototype.toHTML=function(){return""+this.string},e.default=i,t.exports=e.default},function(t,e,i){"use strict";function n(t){var e=t&&t[0]||1,i=y.COMPILER_REVISION;if(!(e>=y.LAST_COMPATIBLE_COMPILER_REVISION&&e<=y.COMPILER_REVISION)){if(e<y.LAST_COMPATIBLE_COMPILER_REVISION){var n=y.REVISION_CHANGES[i],r=y.REVISION_CHANGES[e];throw new Y.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+n+") or downgrade your runtime to an older version ("+r+").")}throw new Y.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}}function r(t,e){function i(i,n,r){r.hash&&(n=M.extend({},n,r.hash),r.ids&&(r.ids[0]=!0)),i=e.VM.resolvePartial.call(this,i,n,r);var s=M.extend({},r,{hooks:this.hooks,protoAccessControl:this.protoAccessControl}),o=e.VM.invokePartial.call(this,i,n,s);if(null==o&&e.compile&&(r.partials[r.name]=e.compile(i,t.compilerOptions,e),o=r.partials[r.name](n,s)),null!=o){if(r.indent){for(var a=o.split("\n"),l=0,c=a.length;l<c&&(a[l]||l+1!==c);l++)a[l]=r.indent+a[l];o=a.join("\n")}return o}throw new Y.default("The partial "+r.name+" could not be compiled when running in runtime-only mode")}function n(e){function i(e){return""+t.main(o,e,o.helpers,o.partials,s,l,a)}var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=r.data;n._setup(r),!r.partial&&t.useData&&(s=c(e,s));var a=void 0,l=t.useBlockParams?[]:void 0;return t.useDepths&&(a=r.depths?e!=r.depths[0]?[e].concat(r.depths):r.depths:[e]),(i=u(t.main,i,o,r.depths||[],s,l))(e,r)}if(!e)throw new Y.default("No environment passed to template");if(!t||!t.main)throw new Y.default("Unknown template object: "+typeof t);t.main.decorator=t.main_d,e.VM.checkRevision(t.compiler);var r=t.compiler&&7===t.compiler[0],o={strict:function(t,e,i){if(!(t&&e in t))throw new Y.default('"'+e+'" not defined in '+t,{loc:i});return t[e]},lookupProperty:function(t,e){var i=t[e];return null==i?i:Object.prototype.hasOwnProperty.call(t,e)?i:T.resultIsAllowed(i,o.protoAccessControl,e)?i:void 0},lookup:function(t,e){for(var i=t.length,n=0;n<i;n++){var r=t[n]&&o.lookupProperty(t[n],e);if(null!=r)return t[n][e]}},lambda:function(t,e){return"function"==typeof t?t.call(e):t},escapeExpression:M.escapeExpression,invokePartial:i,fn:function(e){var i=t[e];return i.decorator=t[e+"_d"],i},programs:[],program:function(t,e,i,n,r){var o=this.programs[t],a=this.fn(t);return e||r||n||i?o=s(this,t,a,e,i,n,r):o||(o=this.programs[t]=s(this,t,a)),o},data:function(t,e){for(;t&&e--;)t=t._parent;return t},mergeIfNeeded:function(t,e){var i=t||e;return t&&e&&t!==e&&(i=M.extend({},e,t)),i},nullContext:p({}),noop:e.VM.noop,compilerInfo:t.compiler};return n.isTop=!0,n._setup=function(i){if(i.partial)o.protoAccessControl=i.protoAccessControl,o.helpers=i.helpers,o.partials=i.partials,o.decorators=i.decorators,o.hooks=i.hooks;else{var n=M.extend({},e.helpers,i.helpers);h(n,o),o.helpers=n,t.usePartial&&(o.partials=o.mergeIfNeeded(i.partials,e.partials)),(t.usePartial||t.useDecorators)&&(o.decorators=M.extend({},e.decorators,i.decorators)),o.hooks={},o.protoAccessControl=T.createProtoAccessControl(i);var s=i.allowCallsToHelperMissing||r;_.moveHelperToHooks(o,"helperMissing",s),_.moveHelperToHooks(o,"blockHelperMissing",s)}},n._child=function(e,i,n,r){if(t.useBlockParams&&!n)throw new Y.default("must pass block params");if(t.useDepths&&!r)throw new Y.default("must pass parent depths");return s(o,e,t[e],i,0,n,r)},n}function s(t,e,i,n,r,s,o){function a(e){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=o;return!o||e==o[0]||e===t.nullContext&&null===o[0]||(a=[e].concat(o)),i(t,e,t.helpers,t.partials,r.data||n,s&&[r.blockParams].concat(s),a)}return a=u(i,a,t,o,n,s),a.program=e,a.depth=o?o.length:0,a.blockParams=r||0,a}function o(t,e,i){return t?t.call||i.name||(i.name=t,t=i.partials[t]):t="@partial-block"===i.name?i.data["partial-block"]:i.partials[i.name],t}function a(t,e,i){var n=i.data&&i.data["partial-block"];i.partial=!0,i.ids&&(i.data.contextPath=i.ids[0]||i.data.contextPath);var r=void 0;if(i.fn&&i.fn!==l&&!function(){i.data=y.createFrame(i.data);var t=i.fn;r=i.data["partial-block"]=function(e){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return i.data=y.createFrame(i.data),i.data["partial-block"]=n,t(e,i)},t.partials&&(i.partials=M.extend({},i.partials,t.partials))}(),void 0===t&&r&&(t=r),void 0===t)throw new Y.default("The partial "+i.name+" could not be found");if(t instanceof Function)return t(e,i)}function l(){return""}function c(t,e){return e&&"root"in e||(e=e?y.createFrame(e):{},e.root=t),e}function u(t,e,i,n,r,s){if(t.decorator){var o={};e=t.decorator(e,o,i,n&&n[0],r,s,n),M.extend(e,o)}return e}function h(t,e){f(t).forEach(function(i){var n=t[i];t[i]=d(n,e)})}function d(t,e){var i=e.lookupProperty;return D.wrapHelper(t,function(t){return M.extend({lookupProperty:i},t)})}var p=i(39).default,f=i(13).default,m=i(3).default,g=i(1).default;e.__esModule=!0,e.checkRevision=n,e.template=r,e.wrapProgram=s,e.resolvePartial=o,e.invokePartial=a,e.noop=l;var v=i(5),M=m(v),b=i(6),Y=g(b),y=i(4),_=i(10),D=i(43),T=i(33)},function(t,e,i){t.exports={default:i(40),__esModule:!0}},function(t,e,i){i(41),t.exports=i(21).Object.seal},function(t,e,i){var n=i(42);i(18)("seal",function(t){return function(e){return t&&n(e)?t(e):e}})},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){"use strict";function i(t,e){if("function"!=typeof t)return t;var i=function(){var i=arguments[arguments.length-1];return arguments[arguments.length-1]=e(i),t.apply(this,arguments)};return i}e.__esModule=!0,e.wrapHelper=i},function(t,e){(function(i){"use strict";e.__esModule=!0,e.default=function(t){var e="undefined"!=typeof i?i:window,n=e.Handlebars;t.noConflict=function(){return e.Handlebars===t&&(e.Handlebars=n),t}},t.exports=e.default}).call(e,function(){return this}())},function(t,e){"use strict";e.__esModule=!0;var i={helpers:{helperExpression:function(t){return"SubExpression"===t.type||("MustacheStatement"===t.type||"BlockStatement"===t.type)&&!!(t.params&&t.params.length||t.hash)},scopedId:function(t){return/^\.|this\b/.test(t.original)},simpleId:function(t){return 1===t.parts.length&&!i.helpers.scopedId(t)&&!t.depth}}};e.default=i,t.exports=e.default},function(t,e,i){"use strict";function n(t,e){if("Program"===t.type)return t;l.default.yy=f,f.locInfo=function(t){return new f.SourceLocation(e&&e.srcName,t)};var i=l.default.parse(t);return i}function r(t,e){var i=n(t,e),r=new u.default(e);return r.accept(i)}var s=i(1).default,o=i(3).default;e.__esModule=!0,e.parseWithoutProcessing=n,e.parse=r;var a=i(47),l=s(a),c=i(48),u=s(c),h=i(50),d=o(h),p=i(5);e.parser=l.default;var f={};p.extend(f,d)},function(t,e){"use strict";e.__esModule=!0;var i=function(){function t(){this.yy={}}var e={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,0],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(t,e,i,n,r,s,o){var a=s.length-1;switch(r){case 1:return s[a-1];case 2:this.$=n.prepareProgram(s[a]);break;case 3:this.$=s[a];break;case 4:this.$=s[a];break;case 5:this.$=s[a];break;case 6:this.$=s[a];break;case 7:this.$=s[a];break;case 8:this.$=s[a];break;case 9:this.$={type:"CommentStatement",value:n.stripComment(s[a]),strip:n.stripFlags(s[a],s[a]),loc:n.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:s[a],value:s[a],loc:n.locInfo(this._$)};break;case 11:this.$=n.prepareRawBlock(s[a-2],s[a-1],s[a],this._$);break;case 12:this.$={path:s[a-3],params:s[a-2],hash:s[a-1]};break;case 13:this.$=n.prepareBlock(s[a-3],s[a-2],s[a-1],s[a],!1,this._$);break;case 14:this.$=n.prepareBlock(s[a-3],s[a-2],s[a-1],s[a],!0,this._$);break;case 15:this.$={open:s[a-5],path:s[a-4],params:s[a-3],hash:s[a-2],blockParams:s[a-1],strip:n.stripFlags(s[a-5],s[a])};break;case 16:this.$={path:s[a-4],params:s[a-3],hash:s[a-2],blockParams:s[a-1],strip:n.stripFlags(s[a-5],s[a])};break;case 17:this.$={path:s[a-4],params:s[a-3],hash:s[a-2],blockParams:s[a-1],strip:n.stripFlags(s[a-5],s[a])};break;case 18:this.$={strip:n.stripFlags(s[a-1],s[a-1]),program:s[a]};break;case 19:var l=n.prepareBlock(s[a-2],s[a-1],s[a],s[a],!1,this._$),c=n.prepareProgram([l],s[a-1].loc);c.chained=!0,this.$={strip:s[a-2].strip,program:c,chain:!0};break;case 20:this.$=s[a];break;case 21:this.$={path:s[a-1],strip:n.stripFlags(s[a-2],s[a])};break;case 22:this.$=n.prepareMustache(s[a-3],s[a-2],s[a-1],s[a-4],n.stripFlags(s[a-4],s[a]),this._$);break;case 23:this.$=n.prepareMustache(s[a-3],s[a-2],s[a-1],s[a-4],n.stripFlags(s[a-4],s[a]),this._$);break;case 24:this.$={type:"PartialStatement",name:s[a-3],params:s[a-2],hash:s[a-1],indent:"",strip:n.stripFlags(s[a-4],s[a]),loc:n.locInfo(this._$)};break;case 25:this.$=n.preparePartialBlock(s[a-2],s[a-1],s[a],this._$);break;case 26:this.$={path:s[a-3],params:s[a-2],hash:s[a-1],strip:n.stripFlags(s[a-4],s[a])};break;case 27:this.$=s[a];break;case 28:this.$=s[a];break;case 29:this.$={type:"SubExpression",path:s[a-3],params:s[a-2],hash:s[a-1],loc:n.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:s[a],loc:n.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:n.id(s[a-2]),value:s[a],loc:n.locInfo(this._$)};break;case 32:this.$=n.id(s[a-1]);break;case 33:this.$=s[a];break;case 34:this.$=s[a];break;case 35:this.$={type:"StringLiteral",value:s[a],original:s[a],loc:n.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(s[a]),original:Number(s[a]),loc:n.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:"true"===s[a],original:"true"===s[a],loc:n.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:n.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:n.locInfo(this._$)};break;case 40:this.$=s[a];break;case 41:this.$=s[a];break;case 42:this.$=n.preparePath(!0,s[a],this._$);break;case 43:this.$=n.preparePath(!1,s[a],this._$);break;case 44:s[a-2].push({part:n.id(s[a]),original:s[a],separator:s[a-1]}),this.$=s[a-2];break;case 45:this.$=[{part:n.id(s[a]),original:s[a]}];break;case 46:this.$=[];break;case 47:s[a-1].push(s[a]);break;case 48:this.$=[];break;case 49:s[a-1].push(s[a]);break;case 50:this.$=[];break;case 51:s[a-1].push(s[a]);break;case 58:this.$=[];break;case 59:s[a-1].push(s[a]);break;case 64:this.$=[];break;case 65:s[a-1].push(s[a]);break;case 70:this.$=[];break;case 71:s[a-1].push(s[a]);break;case 78:this.$=[];break;case 79:s[a-1].push(s[a]);break;case 82:this.$=[];break;case 83:s[a-1].push(s[a]);break;case 86:this.$=[];break;case 87:s[a-1].push(s[a]);break;case 90:this.$=[];break;case 91:s[a-1].push(s[a]);break;case 94:this.$=[];break;case 95:s[a-1].push(s[a]);break;case 98:this.$=[s[a]];break;case 99:s[a-1].push(s[a]);break;case 100:this.$=[s[a]];break;case 101:s[a-1].push(s[a])}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{15:[2,48],17:39,18:[2,48]},{20:41,56:40,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:44,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:45,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:41,56:48,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:49,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,50]},{72:[1,35],86:51},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:52,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:53,38:55,39:[1,57],43:56,44:[1,58],45:54,47:[2,54]},{28:59,43:60,44:[1,58],47:[2,56]},{13:62,15:[1,20],18:[1,61]},{33:[2,86],57:63,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:64,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:65,47:[1,66]},{30:67,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:68,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:69,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:70,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:74,33:[2,80],50:71,63:72,64:75,65:[1,43],69:73,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,79]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,50]},{20:74,53:80,54:[2,84],63:81,64:75,65:[1,43],69:82,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:83,47:[1,66]},{47:[2,55]},{4:84,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:85,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:86,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:87,47:[1,66]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:74,33:[2,88],58:88,63:89,64:75,65:[1,43],69:90,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:91,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:92,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,31:93,33:[2,60],63:94,64:75,65:[1,43],69:95,70:76,71:77,72:[1,78],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,66],36:96,63:97,64:75,65:[1,43],69:98,70:76,71:77,72:[1,78],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,22:99,23:[2,52],63:100,64:75,65:[1,43],69:101,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,92],62:102,63:103,64:75,65:[1,43],69:104,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,105]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:106,72:[1,107],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,108],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,109]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:55,39:[1,57],43:56,44:[1,58],45:111,46:110,47:[2,76]},{33:[2,70],40:112,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,113]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:74,63:115,64:75,65:[1,43],67:114,68:[2,96],69:116,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,117]},{32:118,33:[2,62],74:119,75:[1,120]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:121,74:122,75:[1,120]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,123]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,124]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,108]},{20:74,63:125,64:75,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:74,33:[2,72],41:126,63:127,64:75,65:[1,43],69:128,70:76,71:77,72:[1,78],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,129]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,130]},{33:[2,63]},{72:[1,132],76:131},{33:[1,133]},{33:[2,69]},{15:[2,12],18:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:134,74:135,75:[1,120]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,137],77:[1,136]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,138]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],54:[2,55],56:[2,20],60:[2,57],73:[2,81],82:[2,85],86:[2,18],90:[2,89],101:[2,53],104:[2,93],110:[2,19],111:[2,77],116:[2,97],119:[2,63],122:[2,69],135:[2,75],136:[2,32]},parseError:function(t,e){throw new Error(t)},parse:function(t){function e(){var t;return t=i.lexer.lex()||1,"number"!=typeof t&&(t=i.symbols_[t]||t),t}var i=this,n=[0],r=[null],s=[],o=this.table,a="",l=0,c=0,u=0;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var h=this.lexer.yylloc;s.push(h);var d=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var p,f,m,g,v,M,b,Y,y,_={};;){if(m=n[n.length-1],this.defaultActions[m]?g=this.defaultActions[m]:(null!==p&&"undefined"!=typeof p||(p=e()),g=o[m]&&o[m][p]),"undefined"==typeof g||!g.length||!g[0]){var D="";if(!u){y=[];for(M in o[m])this.terminals_[M]&&M>2&&y.push("'"+this.terminals_[M]+"'");D=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+y.join(", ")+", got '"+(this.terminals_[p]||p)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==p?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(D,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:h,expected:y})}}if(g[0]instanceof Array&&g.length>1)throw new Error("Parse Error: multiple actions possible at state: "+m+", token: "+p);switch(g[0]){case 1:n.push(p),r.push(this.lexer.yytext),s.push(this.lexer.yylloc),n.push(g[1]),p=null,f?(p=f,f=null):(c=this.lexer.yyleng,a=this.lexer.yytext,l=this.lexer.yylineno,h=this.lexer.yylloc,u>0&&u--);break;case 2:if(b=this.productions_[g[1]][1],_.$=r[r.length-b],_._$={first_line:s[s.length-(b||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(b||1)].first_column,last_column:s[s.length-1].last_column},d&&(_._$.range=[s[s.length-(b||1)].range[0],s[s.length-1].range[1]]),v=this.performAction.call(_,a,c,l,this.yy,g[1],r,s),"undefined"!=typeof v)return v;b&&(n=n.slice(0,-1*b*2),r=r.slice(0,-1*b),s=s.slice(0,-1*b)),n.push(this.productions_[g[1]][0]),r.push(_.$),s.push(_._$),Y=o[n[n.length-2]][n[n.length-1]],n.push(Y);break;case 3:return!0}}return!0}},i=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t;var e=t.match(/(?:\r\n?|\n).*/g);return e?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,i=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e-1),this.offset-=e;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),i.length-1&&(this.yylineno-=i.length-1);var r=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:i?(i.length===n.length?this.yylloc.first_column:0)+n[n.length-i.length].length-i[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-e]),this},more:function(){return this._more=!0,this},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var t,e,i,n,r;this._more||(this.yytext="",this.match="");for(var s=this._currentRules(),o=0;o<s.length&&(i=this._input.match(this.rules[s[o]]),!i||e&&!(i[0].length>e[0].length)||(e=i,n=o,this.options.flex));o++);return e?(r=e[0].match(/(?:\r\n?|\n).*/g),r&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],t=this.performAction.call(this,this.yy,this,s[n],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),t?t:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return"undefined"!=typeof t?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return t.options={},t.performAction=function(t,e,i,n){function r(t,i){return e.yytext=e.yytext.substring(t,e.yyleng-i+t)}switch(i){case 0:if("\\\\"===e.yytext.slice(-2)?(r(0,1),this.begin("mu")):"\\"===e.yytext.slice(-1)?(r(0,1),this.begin("emu")):this.begin("mu"),e.yytext)return 15;break;case 1:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:return this.popState(),"raw"===this.conditionStack[this.conditionStack.length-1]?15:(r(5,9),"END_RAW_BLOCK");case 5:return 15;case 6:return this.popState(),14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:return this.popState(),44;case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:return 48;case 21:this.unput(e.yytext),this.popState(),this.begin("com");break;case 22:return this.popState(),14;case 23:return 48;case 24:return 73;case 25:return 72;case 26:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return e.yytext=r(1,2).replace(/\\"/g,'"'),80;case 32:return e.yytext=r(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:return 82;case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 41:return 72;case 42:return e.yytext=e.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},t.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^\/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]+?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],t.conditions={mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}},t}();return e.lexer=i,t.prototype=e,e.Parser=t,new t}();e.default=i,t.exports=e.default},function(t,e,i){"use strict";function n(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.options=t}function r(t,e,i){void 0===e&&(e=t.length);var n=t[e-1],r=t[e-2];return n?"ContentStatement"===n.type?(r||!i?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(n.original):void 0:i}function s(t,e,i){void 0===e&&(e=-1);var n=t[e+1],r=t[e+2];return n?"ContentStatement"===n.type?(r||!i?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(n.original):void 0:i}function o(t,e,i){var n=t[null==e?0:e+1];if(n&&"ContentStatement"===n.type&&(i||!n.rightStripped)){var r=n.value;n.value=n.value.replace(i?/^\s+/:/^[ \t]*\r?\n?/,""),n.rightStripped=n.value!==r}}function a(t,e,i){var n=t[null==e?t.length-1:e-1];if(n&&"ContentStatement"===n.type&&(i||!n.leftStripped)){var r=n.value;return n.value=n.value.replace(i?/\s+$/:/[ \t]+$/,""),n.leftStripped=n.value!==r,n.leftStripped}}var l=i(1).default;e.__esModule=!0;var c=i(49),u=l(c);n.prototype=new u.default,n.prototype.Program=function(t){var e=!this.options.ignoreStandalone,i=!this.isRootSeen;this.isRootSeen=!0;for(var n=t.body,l=0,c=n.length;l<c;l++){var u=n[l],h=this.accept(u);if(h){var d=r(n,l,i),p=s(n,l,i),f=h.openStandalone&&d,m=h.closeStandalone&&p,g=h.inlineStandalone&&d&&p;h.close&&o(n,l,!0),h.open&&a(n,l,!0),e&&g&&(o(n,l),a(n,l)&&"PartialStatement"===u.type&&(u.indent=/([ \t]+$)/.exec(n[l-1].original)[1])),e&&f&&(o((u.program||u.inverse).body),a(n,l)),e&&m&&(o(n,l),a((u.inverse||u.program).body))}}return t},n.prototype.BlockStatement=n.prototype.DecoratorBlock=n.prototype.PartialBlockStatement=function(t){this.accept(t.program),this.accept(t.inverse);var e=t.program||t.inverse,i=t.program&&t.inverse,n=i,l=i;if(i&&i.chained)for(n=i.body[0].program;l.chained;)l=l.body[l.body.length-1].program;var c={open:t.openStrip.open,close:t.closeStrip.close,openStandalone:s(e.body),closeStandalone:r((n||e).body)};if(t.openStrip.close&&o(e.body,null,!0),i){var u=t.inverseStrip;u.open&&a(e.body,null,!0),u.close&&o(n.body,null,!0),t.closeStrip.open&&a(l.body,null,!0),!this.options.ignoreStandalone&&r(e.body)&&s(n.body)&&(a(e.body),o(n.body))}else t.closeStrip.open&&a(e.body,null,!0);return c},n.prototype.Decorator=n.prototype.MustacheStatement=function(t){return t.strip},n.prototype.PartialStatement=n.prototype.CommentStatement=function(t){var e=t.strip||{};return{inlineStandalone:!0,open:e.open,close:e.close}},e.default=n,t.exports=e.default},function(t,e,i){"use strict";function n(){this.parents=[]}function r(t){this.acceptRequired(t,"path"),this.acceptArray(t.params),this.acceptKey(t,"hash")}function s(t){r.call(this,t),this.acceptKey(t,"program"),this.acceptKey(t,"inverse")}function o(t){this.acceptRequired(t,"name"),this.acceptArray(t.params),this.acceptKey(t,"hash")}var a=i(1).default;e.__esModule=!0;var l=i(6),c=a(l);n.prototype={constructor:n,mutating:!1,acceptKey:function(t,e){var i=this.accept(t[e]);if(this.mutating){if(i&&!n.prototype[i.type])throw new c.default('Unexpected node type "'+i.type+'" found when accepting '+e+" on "+t.type);t[e]=i}},acceptRequired:function(t,e){if(this.acceptKey(t,e),!t[e])throw new c.default(t.type+" requires "+e)},acceptArray:function(t){for(var e=0,i=t.length;e<i;e++)this.acceptKey(t,e),t[e]||(t.splice(e,1),e--,i--)},accept:function(t){if(t){if(!this[t.type])throw new c.default("Unknown type: "+t.type,t);this.current&&this.parents.unshift(this.current),this.current=t;var e=this[t.type](t);return this.current=this.parents.shift(),!this.mutating||e?e:e!==!1?t:void 0}},Program:function(t){this.acceptArray(t.body)},MustacheStatement:r,Decorator:r,BlockStatement:s,DecoratorBlock:s,PartialStatement:o,PartialBlockStatement:function(t){o.call(this,t),this.acceptKey(t,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:r,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(t){this.acceptArray(t.pairs)},HashPair:function(t){this.acceptRequired(t,"value")}},e.default=n,t.exports=e.default},function(t,e,i){"use strict";function n(t,e){if(e=e.path?e.path.original:e,t.path.original!==e){var i={loc:t.path.loc};throw new g.default(t.path.original+" doesn't match "+e,i)}}function r(t,e){this.source=t,this.start={line:e.first_line,column:e.first_column},this.end={line:e.last_line,column:e.last_column}}function s(t){return/^\[.*\]$/.test(t)?t.substring(1,t.length-1):t}function o(t,e){return{open:"~"===t.charAt(2),close:"~"===e.charAt(e.length-3)}}function a(t){return t.replace(/^\{\{~?!-?-?/,"").replace(/-?-?~?\}\}$/,"")}function l(t,e,i){i=this.locInfo(i);for(var n=t?"@":"",r=[],s=0,o=0,a=e.length;o<a;o++){var l=e[o].part,c=e[o].original!==l;if(n+=(e[o].separator||"")+l,c||".."!==l&&"."!==l&&"this"!==l)r.push(l);else{if(r.length>0)throw new g.default("Invalid path: "+n,{loc:i});".."===l&&s++}}return{type:"PathExpression",data:t,depth:s,parts:r,original:n,loc:i}}function c(t,e,i,n,r,s){var o=n.charAt(3)||n.charAt(2),a="{"!==o&&"&"!==o,l=/\*/.test(n);return{type:l?"Decorator":"MustacheStatement",path:t,params:e,hash:i,escaped:a,strip:r,loc:this.locInfo(s)}}function u(t,e,i,r){n(t,i),r=this.locInfo(r);var s={type:"Program",body:e,strip:{},loc:r};return{type:"BlockStatement",path:t.path,params:t.params,hash:t.hash,program:s,openStrip:{},inverseStrip:{},closeStrip:{},loc:r}}function h(t,e,i,r,s,o){r&&r.path&&n(t,r);var a=/\*/.test(t.open);e.blockParams=t.blockParams;var l=void 0,c=void 0;if(i){if(a)throw new g.default("Unexpected inverse block on decorator",i);i.chain&&(i.program.body[0].closeStrip=r.strip),c=i.strip,l=i.program}return s&&(s=l,l=e,e=s),{type:a?"DecoratorBlock":"BlockStatement",path:t.path,params:t.params,hash:t.hash,program:e,inverse:l,openStrip:t.strip,inverseStrip:c,closeStrip:r&&r.strip,loc:this.locInfo(o)}}function d(t,e){if(!e&&t.length){var i=t[0].loc,n=t[t.length-1].loc;i&&n&&(e={source:i.source,start:{line:i.start.line,column:i.start.column},end:{line:n.end.line,column:n.end.column}})}return{type:"Program",body:t,strip:{},loc:e}}function p(t,e,i,r){return n(t,i),{type:"PartialBlockStatement",name:t.path,params:t.params,hash:t.hash,program:e,openStrip:t.strip,closeStrip:i&&i.strip,loc:this.locInfo(r)}}var f=i(1).default;e.__esModule=!0,e.SourceLocation=r,e.id=s,e.stripFlags=o,e.stripComment=a,e.preparePath=l,e.prepareMustache=c,e.prepareRawBlock=u,e.prepareBlock=h,e.prepareProgram=d,e.preparePartialBlock=p;var m=i(6),g=f(m)},function(t,e,i){"use strict";function n(){}function r(t,e,i){if(null==t||"string"!=typeof t&&"Program"!==t.type)throw new h.default("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+t);e=e||{},"data"in e||(e.data=!0),e.compat&&(e.useDepths=!0);var n=i.parse(t,e),r=(new i.Compiler).compile(n,e);return(new i.JavaScriptCompiler).compile(r,e)}function s(t,e,i){function n(){var n=i.parse(t,e),r=(new i.Compiler).compile(n,e),s=(new i.JavaScriptCompiler).compile(r,e,void 0,!0);return i.template(s)}function r(t,e){return s||(s=n()),s.call(this,t,e)}if(void 0===e&&(e={}),null==t||"string"!=typeof t&&"Program"!==t.type)throw new h.default("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+t);e=d.extend({},e),"data"in e||(e.data=!0),e.compat&&(e.useDepths=!0);var s=void 0;return r._setup=function(t){return s||(s=n()),s._setup(t)},r._child=function(t,e,i,r){return s||(s=n()),s._child(t,e,i,r)},r}function o(t,e){if(t===e)return!0;if(d.isArray(t)&&d.isArray(e)&&t.length===e.length){for(var i=0;i<t.length;i++)if(!o(t[i],e[i]))return!1;return!0}}function a(t){if(!t.path.parts){var e=t.path;t.path={type:"PathExpression",data:!1,depth:0,parts:[e.original+""],original:e.original+"",loc:e.loc}}}var l=i(34).default,c=i(1).default;e.__esModule=!0,e.Compiler=n,e.precompile=r,e.compile=s;var u=i(6),h=c(u),d=i(5),p=i(45),f=c(p),m=[].slice;n.prototype={compiler:n,equals:function(t){var e=this.opcodes.length;if(t.opcodes.length!==e)return!1;for(var i=0;i<e;i++){var n=this.opcodes[i],r=t.opcodes[i];if(n.opcode!==r.opcode||!o(n.args,r.args))return!1}e=this.children.length;for(var i=0;i<e;i++)if(!this.children[i].equals(t.children[i]))return!1;return!0},guid:0,compile:function(t,e){return this.sourceNode=[],this.opcodes=[],this.children=[],this.options=e,this.stringParams=e.stringParams,this.trackIds=e.trackIds,e.blockParams=e.blockParams||[],e.knownHelpers=d.extend(l(null),{helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0,lookup:!0},e.knownHelpers),this.accept(t)},compileProgram:function(t){var e=new this.compiler,i=e.compile(t,this.options),n=this.guid++;return this.usePartial=this.usePartial||i.usePartial,this.children[n]=i,this.useDepths=this.useDepths||i.useDepths,n},accept:function(t){if(!this[t.type])throw new h.default("Unknown type: "+t.type,t);this.sourceNode.unshift(t);var e=this[t.type](t);return this.sourceNode.shift(),e},Program:function(t){this.options.blockParams.unshift(t.blockParams);for(var e=t.body,i=e.length,n=0;n<i;n++)this.accept(e[n]);return this.options.blockParams.shift(),this.isSimple=1===i,this.blockParams=t.blockParams?t.blockParams.length:0,this},BlockStatement:function(t){a(t);var e=t.program,i=t.inverse;e=e&&this.compileProgram(e),i=i&&this.compileProgram(i);var n=this.classifySexpr(t);"helper"===n?this.helperSexpr(t,e,i):"simple"===n?(this.simpleSexpr(t),this.opcode("pushProgram",e),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("blockValue",t.path.original)):(this.ambiguousSexpr(t,e,i),this.opcode("pushProgram",e),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(t){var e=t.program&&this.compileProgram(t.program),i=this.setupFullMustacheParams(t,e,void 0),n=t.path;this.useDecorators=!0,this.opcode("registerDecorator",i.length,n.original)},PartialStatement:function(t){this.usePartial=!0;var e=t.program;e&&(e=this.compileProgram(t.program));var i=t.params;if(i.length>1)throw new h.default("Unsupported number of partial arguments: "+i.length,t);i.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):i.push({type:"PathExpression",parts:[],depth:0}));var n=t.name.original,r="SubExpression"===t.name.type;r&&this.accept(t.name),this.setupFullMustacheParams(t,e,void 0,!0);var s=t.indent||"";this.options.preventIndent&&s&&(this.opcode("appendContent",s),s=""),this.opcode("invokePartial",r,n,s),this.opcode("append")},PartialBlockStatement:function(t){this.PartialStatement(t)},MustacheStatement:function(t){this.SubExpression(t),t.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(t){this.DecoratorBlock(t)},ContentStatement:function(t){t.value&&this.opcode("appendContent",t.value)},CommentStatement:function(){},SubExpression:function(t){a(t);var e=this.classifySexpr(t);"simple"===e?this.simpleSexpr(t):"helper"===e?this.helperSexpr(t):this.ambiguousSexpr(t)},ambiguousSexpr:function(t,e,i){var n=t.path,r=n.parts[0],s=null!=e||null!=i;this.opcode("getContext",n.depth),this.opcode("pushProgram",e),this.opcode("pushProgram",i),n.strict=!0,this.accept(n),this.opcode("invokeAmbiguous",r,s)},simpleSexpr:function(t){var e=t.path;e.strict=!0,this.accept(e),this.opcode("resolvePossibleLambda")},helperSexpr:function(t,e,i){var n=this.setupFullMustacheParams(t,e,i),r=t.path,s=r.parts[0];if(this.options.knownHelpers[s])this.opcode("invokeKnownHelper",n.length,s);else{if(this.options.knownHelpersOnly)throw new h.default("You specified knownHelpersOnly, but used the unknown helper "+s,t);r.strict=!0,r.falsy=!0,this.accept(r),this.opcode("invokeHelper",n.length,r.original,f.default.helpers.simpleId(r))}},PathExpression:function(t){this.addDepth(t.depth),this.opcode("getContext",t.depth);var e=t.parts[0],i=f.default.helpers.scopedId(t),n=!t.depth&&!i&&this.blockParamIndex(e);n?this.opcode("lookupBlockParam",n,t.parts):e?t.data?(this.options.data=!0,this.opcode("lookupData",t.depth,t.parts,t.strict)):this.opcode("lookupOnContext",t.parts,t.falsy,t.strict,i):this.opcode("pushContext")},StringLiteral:function(t){this.opcode("pushString",t.value)},NumberLiteral:function(t){this.opcode("pushLiteral",t.value)},BooleanLiteral:function(t){this.opcode("pushLiteral",t.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(t){var e=t.pairs,i=0,n=e.length;for(this.opcode("pushHash");i<n;i++)this.pushParam(e[i].value);for(;i--;)this.opcode("assignToHash",e[i].key);this.opcode("popHash")},opcode:function(t){this.opcodes.push({opcode:t,args:m.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(t){t&&(this.useDepths=!0)},classifySexpr:function(t){var e=f.default.helpers.simpleId(t.path),i=e&&!!this.blockParamIndex(t.path.parts[0]),n=!i&&f.default.helpers.helperExpression(t),r=!i&&(n||e);if(r&&!n){var s=t.path.parts[0],o=this.options;o.knownHelpers[s]?n=!0:o.knownHelpersOnly&&(r=!1)}return n?"helper":r?"ambiguous":"simple"},pushParams:function(t){for(var e=0,i=t.length;e<i;e++)this.pushParam(t[e])},pushParam:function(t){var e=null!=t.value?t.value:t.original||"";if(this.stringParams)e.replace&&(e=e.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),t.depth&&this.addDepth(t.depth),this.opcode("getContext",t.depth||0),this.opcode("pushStringParam",e,t.type),"SubExpression"===t.type&&this.accept(t);else{if(this.trackIds){var i=void 0;if(!t.parts||f.default.helpers.scopedId(t)||t.depth||(i=this.blockParamIndex(t.parts[0])),i){var n=t.parts.slice(1).join(".");this.opcode("pushId","BlockParam",i,n)}else e=t.original||e,e.replace&&(e=e.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",t.type,e)}this.accept(t)}},setupFullMustacheParams:function(t,e,i,n){var r=t.params;return this.pushParams(r),this.opcode("pushProgram",e),this.opcode("pushProgram",i),t.hash?this.accept(t.hash):this.opcode("emptyHash",n),r},blockParamIndex:function(t){for(var e=0,i=this.options.blockParams.length;e<i;e++){var n=this.options.blockParams[e],r=n&&d.indexOf(n,t);if(n&&r>=0)return[e,r]}}}},function(t,e,i){"use strict";function n(t){this.value=t}function r(){}function s(t,e,i,n){var r=e.popStack(),s=0,o=i.length;for(t&&o--;s<o;s++)r=e.nameLookup(r,i[s],n);return t?[e.aliasable("container.strict"),"(",r,", ",e.quotedString(i[s]),", ",JSON.stringify(e.source.currentLocation)," )"]:r}var o=i(13).default,a=i(1).default;e.__esModule=!0;var l=i(4),c=i(6),u=a(c),h=i(5),d=i(53),p=a(d);r.prototype={nameLookup:function(t,e){return this.internalNameLookup(t,e)},depthedLookup:function(t){return[this.aliasable("container.lookup"),'(depths, "',t,'")']},compilerInfo:function(){var t=l.COMPILER_REVISION,e=l.REVISION_CHANGES[t];return[t,e]},appendToBuffer:function(t,e,i){return h.isArray(t)||(t=[t]),t=this.source.wrap(t,e),this.environment.isSimple?["return ",t,";"]:i?["buffer += ",t,";"]:(t.appendToBuffer=!0,t)},initializeBuffer:function(){return this.quotedString("")},internalNameLookup:function(t,e){return this.lookupPropertyFunctionIsUsed=!0,["lookupProperty(",t,",",JSON.stringify(e),")"]},lookupPropertyFunctionIsUsed:!1,compile:function(t,e,i,n){this.environment=t,this.options=e,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!n,this.name=this.environment.name,this.isChild=!!i,this.context=i||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(t,e),this.useDepths=this.useDepths||t.useDepths||t.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||t.useBlockParams;var r=t.opcodes,s=void 0,o=void 0,a=void 0,l=void 0;for(a=0,l=r.length;a<l;a++)s=r[a],this.source.currentLocation=s.loc,o=o||s.loc,this[s.opcode].apply(this,s.args);if(this.source.currentLocation=o,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new u.default("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend(["var decorators = container.decorators, ",this.lookupPropertyFunctionVarDeclaration(),";\n"]),this.decorators.push("return fn;"),n?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n"),this.decorators.push("}\n"),this.decorators=this.decorators.merge()));var c=this.createFunctionContext(n);if(this.isChild)return c;var h={compiler:this.compilerInfo(),main:c};this.decorators&&(h.main_d=this.decorators,h.useDecorators=!0);var d=this.context,p=d.programs,f=d.decorators;for(a=0,l=p.length;a<l;a++)p[a]&&(h[a]=p[a],f[a]&&(h[a+"_d"]=f[a],h.useDecorators=!0));return this.environment.usePartial&&(h.usePartial=!0),this.options.data&&(h.useData=!0),this.useDepths&&(h.useDepths=!0),this.useBlockParams&&(h.useBlockParams=!0),this.options.compat&&(h.compat=!0),n?h.compilerOptions=this.options:(h.compiler=JSON.stringify(h.compiler),this.source.currentLocation={start:{line:1,column:0}},h=this.objectLiteral(h),e.srcName?(h=h.toStringWithSourceMap({file:e.destName}),h.map=h.map&&h.map.toString()):h=h.toString()),h},preamble:function(){this.lastContext=0,this.source=new p.default(this.options.srcName),this.decorators=new p.default(this.options.srcName)},createFunctionContext:function(t){var e=this,i="",n=this.stackVars.concat(this.registers.list);n.length>0&&(i+=", "+n.join(", "));var r=0;o(this.aliases).forEach(function(t){var n=e.aliases[t];n.children&&n.referenceCount>1&&(i+=", alias"+ ++r+"="+t,n.children[0]="alias"+r)}),this.lookupPropertyFunctionIsUsed&&(i+=", "+this.lookupPropertyFunctionVarDeclaration());var s=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&s.push("blockParams"),this.useDepths&&s.push("depths");var a=this.mergeSource(i);return t?(s.push(a),Function.apply(this,s)):this.source.wrap(["function(",s.join(","),") {\n  ",a,"}"])},mergeSource:function(t){var e=this.environment.isSimple,i=!this.forceBuffer,n=void 0,r=void 0,s=void 0,o=void 0;return this.source.each(function(t){t.appendToBuffer?(s?t.prepend("  + "):s=t,o=t):(s&&(r?s.prepend("buffer += "):n=!0,o.add(";"),s=o=void 0),r=!0,e||(i=!1))}),i?s?(s.prepend("return "),o.add(";")):r||this.source.push('return "";'):(t+=", buffer = "+(n?"":this.initializeBuffer()),s?(s.prepend("return buffer + "),o.add(";")):this.source.push("return buffer;")),t&&this.source.prepend("var "+t.substring(2)+(n?"":";\n")),this.source.merge()},lookupPropertyFunctionVarDeclaration:function(){return"\n      lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    }\n    ".trim()},blockValue:function(t){var e=this.aliasable("container.hooks.blockHelperMissing"),i=[this.contextName(0)];this.setupHelperArgs(t,0,i);var n=this.popStack();i.splice(1,0,n),this.push(this.source.functionCall(e,"call",i))},ambiguousBlockValue:function(){var t=this.aliasable("container.hooks.blockHelperMissing"),e=[this.contextName(0)];this.setupHelperArgs("",0,e,!0),this.flushInline();var i=this.topStack();e.splice(1,0,i),this.pushSource(["if (!",this.lastHelper,") { ",i," = ",this.source.functionCall(t,"call",e),"}"])},appendContent:function(t){this.pendingContent?t=this.pendingContent+t:this.pendingLocation=this.source.currentLocation,this.pendingContent=t},append:function(){if(this.isInline())this.replaceStack(function(t){return[" != null ? ",t,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var t=this.popStack();this.pushSource(["if (",t," != null) { ",this.appendToBuffer(t,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(t){this.lastContext=t},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(t,e,i,n){var r=0;n||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(t[r++])),this.resolvePath("context",t,r,e,i)},lookupBlockParam:function(t,e){this.useBlockParams=!0,this.push(["blockParams[",t[0],"][",t[1],"]"]),this.resolvePath("context",e,1)},lookupData:function(t,e,i){t?this.pushStackLiteral("container.data(data, "+t+")"):this.pushStackLiteral("data"),this.resolvePath("data",e,0,!0,i)},resolvePath:function(t,e,i,n,r){var o=this;if(this.options.strict||this.options.assumeObjects)return void this.push(s(this.options.strict&&r,this,e,t));for(var a=e.length;i<a;i++)this.replaceStack(function(r){var s=o.nameLookup(r,e[i],t);return n?[" && ",s]:[" != null ? ",s," : ",r]})},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(t,e){this.pushContext(),this.pushString(e),"SubExpression"!==e&&("string"==typeof t?this.pushString(t):this.pushStackLiteral(t))},emptyHash:function(t){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(t?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:{},types:[],contexts:[],ids:[]}},popHash:function(){var t=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(t.ids)),this.stringParams&&(this.push(this.objectLiteral(t.contexts)),this.push(this.objectLiteral(t.types))),this.push(this.objectLiteral(t.values))},pushString:function(t){this.pushStackLiteral(this.quotedString(t))},pushLiteral:function(t){this.pushStackLiteral(t)},pushProgram:function(t){null!=t?this.pushStackLiteral(this.programExpression(t)):this.pushStackLiteral(null)},registerDecorator:function(t,e){var i=this.nameLookup("decorators",e,"decorator"),n=this.setupHelperArgs(e,t);this.decorators.push(["fn = ",this.decorators.functionCall(i,"",["fn","props","container",n])," || fn;"])},invokeHelper:function(t,e,i){var n=this.popStack(),r=this.setupHelper(t,e),s=[];i&&s.push(r.name),s.push(n),this.options.strict||s.push(this.aliasable("container.hooks.helperMissing"));var o=["(",this.itemsSeparatedBy(s,"||"),")"],a=this.source.functionCall(o,"call",r.callParams);this.push(a)},itemsSeparatedBy:function(t,e){var i=[];i.push(t[0]);for(var n=1;n<t.length;n++)i.push(e,t[n]);return i},invokeKnownHelper:function(t,e){var i=this.setupHelper(t,e);this.push(this.source.functionCall(i.name,"call",i.callParams))},invokeAmbiguous:function(t,e){this.useRegister("helper");var i=this.popStack();this.emptyHash();var n=this.setupHelper(0,t,e),r=this.lastHelper=this.nameLookup("helpers",t,"helper"),s=["(","(helper = ",r," || ",i,")"];this.options.strict||(s[0]="(helper = ",s.push(" != null ? helper : ",this.aliasable("container.hooks.helperMissing"))),this.push(["(",s,n.paramsInit?["),(",n.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",n.callParams)," : helper))"])},invokePartial:function(t,e,i){var n=[],r=this.setupParams(e,1,n);t&&(e=this.popStack(),delete r.name),i&&(r.indent=JSON.stringify(i)),r.helpers="helpers",r.partials="partials",r.decorators="container.decorators",t?n.unshift(e):n.unshift(this.nameLookup("partials",e,"partial")),this.options.compat&&(r.depths="depths"),r=this.objectLiteral(r),n.push(r),this.push(this.source.functionCall("container.invokePartial","",n))},assignToHash:function(t){var e=this.popStack(),i=void 0,n=void 0,r=void 0;this.trackIds&&(r=this.popStack()),this.stringParams&&(n=this.popStack(),i=this.popStack());var s=this.hash;i&&(s.contexts[t]=i),n&&(s.types[t]=n),r&&(s.ids[t]=r),s.values[t]=e},pushId:function(t,e,i){"BlockParam"===t?this.pushStackLiteral("blockParams["+e[0]+"].path["+e[1]+"]"+(i?" + "+JSON.stringify("."+i):"")):"PathExpression"===t?this.pushString(e):"SubExpression"===t?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:r,compileChildren:function(t,e){for(var i=t.children,n=void 0,r=void 0,s=0,o=i.length;s<o;s++){n=i[s],r=new this.compiler;var a=this.matchExistingProgram(n);if(null==a){this.context.programs.push("");var l=this.context.programs.length;n.index=l,n.name="program"+l,this.context.programs[l]=r.compile(n,e,this.context,!this.precompile),this.context.decorators[l]=r.decorators,this.context.environments[l]=n,this.useDepths=this.useDepths||r.useDepths,this.useBlockParams=this.useBlockParams||r.useBlockParams,n.useDepths=this.useDepths,n.useBlockParams=this.useBlockParams}else n.index=a.index,n.name="program"+a.index,this.useDepths=this.useDepths||a.useDepths,this.useBlockParams=this.useBlockParams||a.useBlockParams}},matchExistingProgram:function(t){for(var e=0,i=this.context.environments.length;e<i;e++){var n=this.context.environments[e];if(n&&n.equals(t))return n}},programExpression:function(t){var e=this.environment.children[t],i=[e.index,"data",e.blockParams];return(this.useBlockParams||this.useDepths)&&i.push("blockParams"),this.useDepths&&i.push("depths"),"container.program("+i.join(", ")+")"},useRegister:function(t){this.registers[t]||(this.registers[t]=!0,this.registers.list.push(t))},push:function(t){return t instanceof n||(t=this.source.wrap(t)),this.inlineStack.push(t),t},pushStackLiteral:function(t){this.push(new n(t))},pushSource:function(t){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),t&&this.source.push(t)},replaceStack:function(t){var e=["("],i=void 0,r=void 0,s=void 0;if(!this.isInline())throw new u.default("replaceStack on non-inline");var o=this.popStack(!0);if(o instanceof n)i=[o.value],e=["(",i],s=!0;else{r=!0;var a=this.incrStack();e=["((",this.push(a)," = ",o,")"],i=this.topStack()}var l=t.call(this,i);s||this.popStack(),r&&this.stackSlot--,this.push(e.concat(l,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var t=this.inlineStack;this.inlineStack=[];for(var e=0,i=t.length;e<i;e++){var r=t[e];if(r instanceof n)this.compileStack.push(r);else{var s=this.incrStack();this.pushSource([s," = ",r,";"]),this.compileStack.push(s)}}},isInline:function(){return this.inlineStack.length},popStack:function(t){var e=this.isInline(),i=(e?this.inlineStack:this.compileStack).pop();if(!t&&i instanceof n)return i.value;if(!e){if(!this.stackSlot)throw new u.default("Invalid stack pop");this.stackSlot--}return i},topStack:function(){var t=this.isInline()?this.inlineStack:this.compileStack,e=t[t.length-1];return e instanceof n?e.value:e},contextName:function(t){return this.useDepths&&t?"depths["+t+"]":"depth"+t},quotedString:function(t){return this.source.quotedString(t)},objectLiteral:function(t){return this.source.objectLiteral(t)},aliasable:function(t){var e=this.aliases[t];return e?(e.referenceCount++,e):(e=this.aliases[t]=this.source.wrap(t),e.aliasable=!0,e.referenceCount=1,e)},setupHelper:function(t,e,i){var n=[],r=this.setupHelperArgs(e,t,n,i),s=this.nameLookup("helpers",e,"helper"),o=this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})");return{params:n,paramsInit:r,name:s,callParams:[o].concat(n)}},setupParams:function(t,e,i){var n={},r=[],s=[],o=[],a=!i,l=void 0;a&&(i=[]),n.name=this.quotedString(t),n.hash=this.popStack(),this.trackIds&&(n.hashIds=this.popStack()),this.stringParams&&(n.hashTypes=this.popStack(),n.hashContexts=this.popStack());var c=this.popStack(),u=this.popStack();(u||c)&&(n.fn=u||"container.noop",n.inverse=c||"container.noop");for(var h=e;h--;)l=this.popStack(),i[h]=l,this.trackIds&&(o[h]=this.popStack()),this.stringParams&&(s[h]=this.popStack(),r[h]=this.popStack());return a&&(n.args=this.source.generateArray(i)),this.trackIds&&(n.ids=this.source.generateArray(o)),this.stringParams&&(n.types=this.source.generateArray(s),n.contexts=this.source.generateArray(r)),this.options.data&&(n.data="data"),this.useBlockParams&&(n.blockParams="blockParams"),n},setupHelperArgs:function(t,e,i,n){var r=this.setupParams(t,e,i);return r.loc=JSON.stringify(this.source.currentLocation),r=this.objectLiteral(r),n?(this.useRegister("options"),i.push("options"),["options=",r]):i?(i.push(r),""):r}},function(){for(var t="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),e=r.RESERVED_WORDS={},i=0,n=t.length;i<n;i++)e[t[i]]=!0;}(),r.isValidJavaScriptVariableName=function(t){return!r.RESERVED_WORDS[t]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(t)},e.default=r,t.exports=e.default},function(t,e,i){"use strict";function n(t,e,i){if(o.isArray(t)){for(var n=[],r=0,s=t.length;r<s;r++)n.push(e.wrap(t[r],i));return n}return"boolean"==typeof t||"number"==typeof t?t+"":t}function r(t){this.srcFile=t,this.source=[]}var s=i(13).default;e.__esModule=!0;var o=i(5),a=void 0;try{}catch(t){}a||(a=function(t,e,i,n){this.src="",n&&this.add(n)},a.prototype={add:function(t){o.isArray(t)&&(t=t.join("")),this.src+=t},prepend:function(t){o.isArray(t)&&(t=t.join("")),this.src=t+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),r.prototype={isEmpty:function(){return!this.source.length},prepend:function(t,e){this.source.unshift(this.wrap(t,e))},push:function(t,e){this.source.push(this.wrap(t,e))},merge:function(){var t=this.empty();return this.each(function(e){t.add(["  ",e,"\n"])}),t},each:function(t){for(var e=0,i=this.source.length;e<i;e++)t(this.source[e])},empty:function(){var t=this.currentLocation||{start:{}};return new a(t.start.line,t.start.column,this.srcFile)},wrap:function(t){var e=arguments.length<=1||void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return t instanceof a?t:(t=n(t,this,e),new a(e.start.line,e.start.column,this.srcFile,t))},functionCall:function(t,e,i){return i=this.generateList(i),this.wrap([t,e?"."+e+"(":"(",i,")"])},quotedString:function(t){return'"'+(t+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(t){var e=this,i=[];s(t).forEach(function(r){var s=n(t[r],e);"undefined"!==s&&i.push([e.quotedString(r),":",s])});var r=this.generateList(i);return r.prepend("{"),r.add("}"),r},generateList:function(t){for(var e=this.empty(),i=0,r=t.length;i<r;i++)i&&e.add(","),e.add(n(t[i],this));return e},generateArray:function(t){var e=this.generateList(t);return e.prepend("["),e.add("]"),e}},e.default=r,t.exports=e.default}])}),function(t,e,i){"use strict";function n(t,e,i){var n,r=t.runtimeStyle&&t.runtimeStyle[e],s=t.style;return!/^-?[0-9]+\.?[0-9]*(?:px)?$/i.test(i)&&/^-?\d/.test(i)&&(n=s.left,r&&(t.runtimeStyle.left=t.currentStyle.left),s.left="fontSize"===e?"1em":i||0,i=s.pixelLeft+"px",s.left=n,r&&(t.runtimeStyle.left=r)),/^(thin|medium|thick)$/i.test(i)?i:Math.round(parseFloat(i))+"px"}function r(t){return parseInt(t,10)}function s(t,e,r,s){if(t=(t||"").split(","),t=t[s||0]||t[0]||"auto",t=h.Util.trimText(t).split(" "),"backgroundSize"!==r||t[0]&&!t[0].match(/cover|contain|auto/)){if(t[0]=t[0].indexOf("%")===-1?n(e,r+"X",t[0]):t[0],t[1]===i){if("backgroundSize"===r)return t[1]="auto",t;t[1]=t[0]}t[1]=t[1].indexOf("%")===-1?n(e,r+"Y",t[1]):t[1]}else;return t}function o(t,e,i,n,r,s){var o,a,l,c,u=h.Util.getCSS(e,t,r);if(1===u.length&&(c=u[0],u=[],u[0]=c,u[1]=c),u[0].toString().indexOf("%")!==-1)l=parseFloat(u[0])/100,a=i.width*l,"backgroundSize"!==t&&(a-=(s||n).width*l);else if("backgroundSize"===t)if("auto"===u[0])a=n.width;else if(/contain|cover/.test(u[0])){var d=h.Util.resizeBounds(n.width,n.height,i.width,i.height,u[0]);a=d.width,o=d.height}else a=parseInt(u[0],10);else a=parseInt(u[0],10);return"auto"===u[1]?o=a/n.width*n.height:u[1].toString().indexOf("%")!==-1?(l=parseFloat(u[1])/100,o=i.height*l,"backgroundSize"!==t&&(o-=(s||n).height*l)):o=parseInt(u[1],10),[a,o]}function a(t,e){var i=[];return{storage:i,width:t,height:e,clip:function(){i.push({type:"function",name:"clip",arguments:arguments})},translate:function(){i.push({type:"function",name:"translate",arguments:arguments})},fill:function(){i.push({type:"function",name:"fill",arguments:arguments})},save:function(){i.push({type:"function",name:"save",arguments:arguments})},restore:function(){i.push({type:"function",name:"restore",arguments:arguments})},fillRect:function(){i.push({type:"function",name:"fillRect",arguments:arguments})},createPattern:function(){i.push({type:"function",name:"createPattern",arguments:arguments})},drawShape:function(){var t=[];return i.push({type:"function",name:"drawShape",arguments:t}),{moveTo:function(){t.push({name:"moveTo",arguments:arguments})},lineTo:function(){t.push({name:"lineTo",arguments:arguments})},arcTo:function(){t.push({name:"arcTo",arguments:arguments})},bezierCurveTo:function(){t.push({name:"bezierCurveTo",arguments:arguments})},quadraticCurveTo:function(){t.push({name:"quadraticCurveTo",arguments:arguments})}}},drawImage:function(){i.push({type:"function",name:"drawImage",arguments:arguments})},fillText:function(){i.push({type:"function",name:"fillText",arguments:arguments})},setVariable:function(t,e){return i.push({type:"variable",name:t,arguments:e}),e}}}function l(t){return{zindex:t,children:[]}}var c,u,h={};h.Util={},h.Util.log=function(e){h.logging&&t.console&&t.console.log&&t.console.log(e)},h.Util.trimText=function(t){return function(e){return t?t.apply(e):((e||"")+"").replace(/^\s+|\s+$/g,"")}}(String.prototype.trim),h.Util.asFloat=function(t){return parseFloat(t)},function(){var t=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g,e=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g;h.Util.parseTextShadows=function(i){if(!i||"none"===i)return[];for(var n=i.match(t),r=[],s=0;n&&s<n.length;s++){var o=n[s].match(e);r.push({color:o[0],offsetX:o[1]?o[1].replace("px",""):0,offsetY:o[2]?o[2].replace("px",""):0,blur:o[3]?o[3].replace("px",""):0})}return r}}(),h.Util.parseBackgroundImage=function(t){var e,i,n,r,s,o,a,l,c=" \r\n\t",u=[],h=0,d=0,p=function(){e&&('"'===i.substr(0,1)&&(i=i.substr(1,i.length-2)),i&&l.push(i),"-"===e.substr(0,1)&&(r=e.indexOf("-",1)+1)>0&&(n=e.substr(0,r),e=e.substr(r)),u.push({prefix:n,method:e.toLowerCase(),value:s,args:l})),l=[],e=n=i=s=""};p();for(var f=0,m=t.length;f<m;f++)if(o=t[f],!(0===h&&c.indexOf(o)>-1)){switch(o){case'"':a?a===o&&(a=null):a=o;break;case"(":if(a)break;if(0===h){h=1,s+=o;continue}d++;break;case")":if(a)break;if(1===h){if(0===d){h=0,s+=o,p();continue}d--}break;case",":if(a)break;if(0===h){p();continue}if(1===h&&0===d&&!e.match(/^url$/i)){l.push(i),i="",s+=o;continue}}s+=o,0===h?e+=o:i+=o}return p(),u},h.Util.Bounds=function(t){var e,i={};return t.getBoundingClientRect&&(e=t.getBoundingClientRect(),i.top=e.top,i.bottom=e.bottom||e.top+e.height,i.left=e.left,i.width=t.offsetWidth,i.height=t.offsetHeight),i},h.Util.OffsetBounds=function(t){var e=t.offsetParent?h.Util.OffsetBounds(t.offsetParent):{top:0,left:0};return{top:t.offsetTop+e.top,bottom:t.offsetTop+t.offsetHeight+e.top,left:t.offsetLeft+e.left,width:t.offsetWidth,height:t.offsetHeight}},h.Util.getCSS=function(t,i,n){c!==t&&(u=e.defaultView.getComputedStyle(t,null));var o=u[i];if(/^background(Size|Position)$/.test(i))return s(o,t,i,n);if(/border(Top|Bottom)(Left|Right)Radius/.test(i)){var a=o.split(" ");return a.length<=1&&(a[1]=a[0]),a.map(r)}return o},h.Util.resizeBounds=function(t,e,i,n,r){var s,o,a=i/n,l=t/e;return r&&"auto"!==r?a<l^"contain"===r?(o=n,s=n*l):(s=i,o=i/l):(s=i,o=n),{width:s,height:o}},h.Util.BackgroundPosition=function(t,e,i,n,r){var s=o("backgroundPosition",t,e,i,n,r);return{left:s[0],top:s[1]}},h.Util.BackgroundSize=function(t,e,i,n){var r=o("backgroundSize",t,e,i,n);return{width:r[0],height:r[1]}},h.Util.Extend=function(t,e){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e},h.Util.Children=function(t){var e;try{e=t.nodeName&&"IFRAME"===t.nodeName.toUpperCase()?t.contentDocument||t.contentWindow.document:function(t){var e=[];return null!==t&&!function(t,e){var n=t.length,r=0;if("number"==typeof e.length)for(var s=e.length;r<s;r++)t[n++]=e[r];else for(;e[r]!==i;)t[n++]=e[r++];return t.length=n,t}(e,t),e}(t.childNodes)}catch(t){h.Util.log("html2canvas.Util.Children failed with exception: "+t.message),e=[]}return e},h.Util.isTransparent=function(t){return"transparent"===t||"rgba(0, 0, 0, 0)"===t},h.Util.Font=function(){var t={};return function(e,n,r){if(t[e+"-"+n]!==i)return t[e+"-"+n];var s,o,a,l=r.createElement("div"),c=r.createElement("img"),u=r.createElement("span"),h="Hidden Text";return l.style.visibility="hidden",l.style.fontFamily=e,l.style.fontSize=n,l.style.margin=0,l.style.padding=0,r.body.appendChild(l),c.src="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACwAAAAAAQABAAACAkQBADs=",c.width=1,c.height=1,c.style.margin=0,c.style.padding=0,c.style.verticalAlign="baseline",u.style.fontFamily=e,u.style.fontSize=n,u.style.margin=0,u.style.padding=0,u.appendChild(r.createTextNode(h)),l.appendChild(u),l.appendChild(c),s=c.offsetTop-u.offsetTop+1,l.removeChild(u),l.appendChild(r.createTextNode(h)),l.style.lineHeight="normal",c.style.verticalAlign="super",o=c.offsetTop-l.offsetTop+1,a={baseline:s,lineWidth:1,middle:o},t[e+"-"+n]=a,r.body.removeChild(l),a}}(),function(){function t(t){return function(e){try{t.addColorStop(e.stop,e.color)}catch(t){i.log(["failed to add color stop: ",t,"; tried to add: ",e])}}}var i=h.Util,n={};h.Generate=n;var r=[/^(-webkit-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-gradient)\((linear|radial),\s((?:\d{1,3}%?)\s(?:\d{1,3}%?),\s(?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)\-]+)\)$/,/^(-moz-linear-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-moz-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s?([a-z\-]*)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/];n.parseGradient=function(t,e){var i,n,s,o,a,l,c,u,h,d,p,f,m=r.length;for(n=0;n<m&&!(s=t.match(r[n]));n+=1);if(s)switch(s[1]){case"-webkit-linear-gradient":case"-o-linear-gradient":if(i={type:"linear",x0:null,y0:null,x1:null,y1:null,colorStops:[]},a=s[2].match(/\w+/g))for(l=a.length,n=0;n<l;n+=1)switch(a[n]){case"top":i.y0=0,i.y1=e.height;break;case"right":i.x0=e.width,i.x1=0;break;case"bottom":i.y0=e.height,i.y1=0;break;case"left":i.x0=0,i.x1=e.width}if(null===i.x0&&null===i.x1&&(i.x0=i.x1=e.width/2),null===i.y0&&null===i.y1&&(i.y0=i.y1=e.height/2),a=s[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(l=a.length,c=1/Math.max(l-1,1),n=0;n<l;n+=1)u=a[n].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),u[2]?(o=parseFloat(u[2]),o/="%"===u[3]?100:e.width):o=n*c,i.colorStops.push({color:u[1],stop:o});break;case"-webkit-gradient":if(i={type:"radial"===s[2]?"circle":s[2],x0:0,y0:0,x1:0,y1:0,colorStops:[]},a=s[3].match(/(\d{1,3})%?\s(\d{1,3})%?,\s(\d{1,3})%?\s(\d{1,3})%?/),a&&(i.x0=a[1]*e.width/100,i.y0=a[2]*e.height/100,i.x1=a[3]*e.width/100,i.y1=a[4]*e.height/100),a=s[4].match(/((?:from|to|color-stop)\((?:[0-9\.]+,\s)?(?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)\))+/g))for(l=a.length,n=0;n<l;n+=1)u=a[n].match(/(from|to|color-stop)\(([0-9\.]+)?(?:,\s)?((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\)/),o=parseFloat(u[2]),"from"===u[1]&&(o=0),"to"===u[1]&&(o=1),i.colorStops.push({color:u[3],stop:o});break;case"-moz-linear-gradient":if(i={type:"linear",x0:0,y0:0,x1:0,y1:0,colorStops:[]},a=s[2].match(/(\d{1,3})%?\s(\d{1,3})%?/),a&&(i.x0=a[1]*e.width/100,i.y0=a[2]*e.height/100,i.x1=e.width-i.x0,i.y1=e.height-i.y0),a=s[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}%)?)+/g))for(l=a.length,c=1/Math.max(l-1,1),n=0;n<l;n+=1)u=a[n].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%)?/),u[2]?(o=parseFloat(u[2]),u[3]&&(o/=100)):o=n*c,i.colorStops.push({color:u[1],stop:o});break;case"-webkit-radial-gradient":case"-moz-radial-gradient":case"-o-radial-gradient":if(i={type:"circle",x0:0,y0:0,x1:e.width,y1:e.height,cx:0,cy:0,rx:0,ry:0,colorStops:[]},a=s[2].match(/(\d{1,3})%?\s(\d{1,3})%?/),a&&(i.cx=a[1]*e.width/100,i.cy=a[2]*e.height/100),a=s[3].match(/\w+/),u=s[4].match(/[a-z\-]*/),a&&u)switch(u[0]){case"farthest-corner":case"cover":case"":h=Math.sqrt(Math.pow(i.cx,2)+Math.pow(i.cy,2)),d=Math.sqrt(Math.pow(i.cx,2)+Math.pow(i.y1-i.cy,2)),p=Math.sqrt(Math.pow(i.x1-i.cx,2)+Math.pow(i.y1-i.cy,2)),f=Math.sqrt(Math.pow(i.x1-i.cx,2)+Math.pow(i.cy,2)),i.rx=i.ry=Math.max(h,d,p,f);break;case"closest-corner":h=Math.sqrt(Math.pow(i.cx,2)+Math.pow(i.cy,2)),d=Math.sqrt(Math.pow(i.cx,2)+Math.pow(i.y1-i.cy,2)),p=Math.sqrt(Math.pow(i.x1-i.cx,2)+Math.pow(i.y1-i.cy,2)),f=Math.sqrt(Math.pow(i.x1-i.cx,2)+Math.pow(i.cy,2)),i.rx=i.ry=Math.min(h,d,p,f);break;case"farthest-side":"circle"===a[0]?i.rx=i.ry=Math.max(i.cx,i.cy,i.x1-i.cx,i.y1-i.cy):(i.type=a[0],i.rx=Math.max(i.cx,i.x1-i.cx),i.ry=Math.max(i.cy,i.y1-i.cy));break;case"closest-side":case"contain":"circle"===a[0]?i.rx=i.ry=Math.min(i.cx,i.cy,i.x1-i.cx,i.y1-i.cy):(i.type=a[0],i.rx=Math.min(i.cx,i.x1-i.cx),i.ry=Math.min(i.cy,i.y1-i.cy))}if(a=s[5].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(l=a.length,c=1/Math.max(l-1,1),n=0;n<l;n+=1)u=a[n].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),u[2]?(o=parseFloat(u[2]),o/="%"===u[3]?100:e.width):o=n*c,i.colorStops.push({color:u[1],stop:o})}return i},n.Gradient=function(i,n){if(0!==n.width&&0!==n.height){var r,s,o=e.createElement("canvas"),a=o.getContext("2d");if(o.width=n.width,o.height=n.height,r=h.Generate.parseGradient(i,n))switch(r.type){case"linear":s=a.createLinearGradient(r.x0,r.y0,r.x1,r.y1),r.colorStops.forEach(t(s)),a.fillStyle=s,a.fillRect(0,0,n.width,n.height);break;case"circle":s=a.createRadialGradient(r.cx,r.cy,0,r.cx,r.cy,r.rx),r.colorStops.forEach(t(s)),a.fillStyle=s,a.fillRect(0,0,n.width,n.height);break;case"ellipse":var l=e.createElement("canvas"),c=l.getContext("2d"),u=Math.max(r.rx,r.ry),d=2*u;l.width=l.height=d,s=c.createRadialGradient(r.rx,r.ry,0,r.rx,r.ry,u),r.colorStops.forEach(t(s)),c.fillStyle=s,c.fillRect(0,0,d,d),a.fillStyle=r.colorStops[r.colorStops.length-1].color,a.fillRect(0,0,o.width,o.height),a.drawImage(l,r.cx-r.rx,r.cy-r.ry,2*r.rx,2*r.ry)}return o}},n.ListAlpha=function(t){var e,i="";do e=t%26,i=String.fromCharCode(e+64)+i,t/=26;while(26*t>26);return i},n.ListRoman=function(t){var e,i=["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"],n=[1e3,900,500,400,100,90,50,40,10,9,5,4,1],r="",s=i.length;if(t<=0||t>=4e3)return t;for(e=0;e<s;e+=1)for(;t>=n[e];)t-=n[e],r+=i[e];return r}}(),h.Parse=function(n,r){function s(){return Math.max(Math.max(ut.body.scrollWidth,ut.documentElement.scrollWidth),Math.max(ut.body.offsetWidth,ut.documentElement.offsetWidth),Math.max(ut.body.clientWidth,ut.documentElement.clientWidth))}function o(){return Math.max(Math.max(ut.body.scrollHeight,ut.documentElement.scrollHeight),Math.max(ut.body.offsetHeight,ut.documentElement.offsetHeight),Math.max(ut.body.clientHeight,ut.documentElement.clientHeight))}function c(t,e){var i=parseInt(mt(t,e),10);return isNaN(i)?0:i}function u(t,e,i,n,r,s){"transparent"!==s&&(t.setVariable("fillStyle",s),t.fillRect(e,i,n,r),ct+=1)}function d(t,e,i){if(t.length>0)return e+i.toUpperCase()}function p(t,e){switch(e){case"lowercase":return t.toLowerCase();case"capitalize":return t.replace(/(^|\s|:|-|\(|\))([a-z])/g,d);case"uppercase":return t.toUpperCase();default:return t}}function f(t){return/^(normal|none|0px)$/.test(t)}function m(t,e,i,n){null!==t&&ht.trimText(t).length>0&&(n.fillText(t,e,i),ct+=1)}function g(t,e,i,n){var r=!1,s=mt(e,"fontWeight"),o=mt(e,"fontFamily"),a=mt(e,"fontSize"),l=ht.parseTextShadows(mt(e,"textShadow"));switch(parseInt(s,10)){case 401:s="bold";break;case 400:s="normal"}if(t.setVariable("fillStyle",n),t.setVariable("font",[mt(e,"fontStyle"),mt(e,"fontVariant"),s,a,o].join(" ")),t.setVariable("textAlign",r?"right":"left"),l.length&&(t.setVariable("shadowColor",l[0].color),t.setVariable("shadowOffsetX",l[0].offsetX),t.setVariable("shadowOffsetY",l[0].offsetY),t.setVariable("shadowBlur",l[0].blur)),"none"!==i)return ht.Font(o,a,ut)}function v(t,e,i,n,r){switch(e){case"underline":u(t,i.left,Math.round(i.top+n.baseline+n.lineWidth),i.width,1,r);break;case"overline":u(t,i.left,Math.round(i.top),i.width,1,r);break;case"line-through":u(t,i.left,Math.ceil(i.top+n.middle+n.lineWidth),i.width,1,r)}}function M(t,e,i,n,r){var s;if(dt.rangeBounds&&!r)"none"===i&&0===ht.trimText(e).length||(s=b(e,t.node,t.textOffset)),t.textOffset+=e.length;else if(t.node&&"string"==typeof t.node.nodeValue){var o=n?t.node.splitText(e.length):null;s=Y(t.node,r),t.node=o}return s}function b(t,e,i){var n=ut.createRange();return n.setStart(e,i),n.setEnd(e,i+t.length),n.getBoundingClientRect()}function Y(t,e){var i=t.parentNode,n=ut.createElement("wrapper"),r=t.cloneNode(!0);n.appendChild(t.cloneNode(!0)),i.replaceChild(n,t);var s=e?ht.OffsetBounds(n):ht.Bounds(n);return i.replaceChild(r,n),s}function y(t,e,i){var n,s,o=i.ctx,a=mt(t,"color"),l=mt(t,"textDecoration"),c=mt(t,"textAlign"),u={node:e,textOffset:0};ht.trimText(e.nodeValue).length>0&&(e.nodeValue=p(e.nodeValue,mt(t,"textTransform")),c=c.replace(["-webkit-auto"],["auto"]),s=!r.letterRendering&&/^(left|right|justify|auto)$/.test(c)&&f(mt(t,"letterSpacing"))?e.nodeValue.split(/(\b| )/):e.nodeValue.split(""),n=g(o,t,l,a),r.chinese&&s.forEach(function(t,e){/.*[\u4E00-\u9FA5].*$/.test(t)&&(t=t.split(""),t.unshift(e,1),s.splice.apply(s,t))}),s.forEach(function(t,e){var r=M(u,t,l,e<s.length-1,i.transform.matrix);r&&(m(t,r.left,r.bottom,o),v(o,l,r,n,a))}))}function _(t,e){var i,n,r=ut.createElement("boundelement");return r.style.display="inline",i=t.style.listStyleType,t.style.listStyleType="none",r.appendChild(ut.createTextNode(e)),t.insertBefore(r,t.firstChild),n=ht.Bounds(r),t.removeChild(r),t.style.listStyleType=i,n}function D(t){var e=-1,i=1,n=t.parentNode.childNodes;if(t.parentNode){for(;n[++e]!==t;)1===n[e].nodeType&&i++;return i}return-1}function T(t,e){var i,n=D(t);switch(e){case"decimal":i=n;break;case"decimal-leading-zero":i=1===n.toString().length?n="0"+n.toString():n.toString();break;case"upper-roman":i=h.Generate.ListRoman(n);break;case"lower-roman":i=h.Generate.ListRoman(n).toLowerCase();break;case"lower-alpha":i=h.Generate.ListAlpha(n).toLowerCase();break;case"upper-alpha":i=h.Generate.ListAlpha(n)}return i+". "}function w(t,e,i){var n,r,s,o=e.ctx,a=mt(t,"listStyleType");if(/^(decimal|decimal-leading-zero|upper-alpha|upper-latin|upper-roman|lower-alpha|lower-greek|lower-latin|lower-roman)$/i.test(a)){if(r=T(t,a),s=_(t,r),g(o,t,"none",mt(t,"color")),"inside"!==mt(t,"listStylePosition"))return;o.setVariable("textAlign","left"),n=i.left,m(r,n,s.bottom,o)}}function E(t){var e=n[t];return!(!e||e.succeeded!==!0)&&e.img}function x(t,e){var i=Math.max(t.left,e.left),n=Math.max(t.top,e.top),r=Math.min(t.left+t.width,e.left+e.width),s=Math.min(t.top+t.height,e.top+e.height);return{left:i,top:n,width:r-i,height:s-n}}function A(t,e,i){var n,r="static"!==e.cssPosition,s=r?mt(t,"zIndex"):"auto",o=mt(t,"opacity"),a="none"!==mt(t,"cssFloat");e.zIndex=n=l(s),n.isPositioned=r,n.isFloated=a,n.opacity=o,n.ownStacking="auto"!==s||o<1,i&&i.zIndex.children.push(e)}function S(t,e,i,n,r){var s=c(e,"paddingLeft"),o=c(e,"paddingTop"),a=c(e,"paddingRight"),l=c(e,"paddingBottom");z(t,i,0,0,i.width,i.height,n.left+s+r[3].width,n.top+o+r[0].width,n.width-(r[1].width+r[3].width+s+a),n.height-(r[0].width+r[2].width+o+l))}function C(t){return["Top","Right","Bottom","Left"].map(function(e){return{width:c(t,"border"+e+"Width"),color:mt(t,"border"+e+"Color")}})}function k(t){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(e){return mt(t,"border"+e+"Radius")})}function H(t,e,i,n){var r=function(t,e,i){return{x:t.x+(e.x-t.x)*i,y:t.y+(e.y-t.y)*i}};return{start:t,startControl:e,endControl:i,end:n,subdivide:function(s){var o=r(t,e,s),a=r(e,i,s),l=r(i,n,s),c=r(o,a,s),u=r(a,l,s),h=r(c,u,s);return[H(t,o,c,h),H(h,u,l,n)]},curveTo:function(t){t.push(["bezierCurve",e.x,e.y,i.x,i.y,n.x,n.y])},curveToReversed:function(n){n.push(["bezierCurve",i.x,i.y,e.x,e.y,t.x,t.y])}}}function O(t,e,i,n,r,s,o){e[0]>0||e[1]>0?(t.push(["line",n[0].start.x,n[0].start.y]),n[0].curveTo(t),n[1].curveTo(t)):t.push(["line",s,o]),(i[0]>0||i[1]>0)&&t.push(["line",r[0].start.x,r[0].start.y])}function I(t,e,i,n,r,s,o){var a=[];return e[0]>0||e[1]>0?(a.push(["line",n[1].start.x,n[1].start.y]),n[1].curveTo(a)):a.push(["line",t.c1[0],t.c1[1]]),i[0]>0||i[1]>0?(a.push(["line",s[0].start.x,s[0].start.y]),s[0].curveTo(a),a.push(["line",o[0].end.x,o[0].end.y]),o[0].curveToReversed(a)):(a.push(["line",t.c2[0],t.c2[1]]),a.push(["line",t.c3[0],t.c3[1]])),e[0]>0||e[1]>0?(a.push(["line",r[1].end.x,r[1].end.y]),r[1].curveToReversed(a)):a.push(["line",t.c4[0],t.c4[1]]),a}function P(t,e,i){var n=t.left,r=t.top,s=t.width,o=t.height,a=e[0][0],l=e[0][1],c=e[1][0],u=e[1][1],h=e[2][0],d=e[2][1],p=e[3][0],f=e[3][1],m=s-c,g=o-d,v=s-h,M=o-f;return{topLeftOuter:Mt(n,r,a,l).topLeft.subdivide(.5),topLeftInner:Mt(n+i[3].width,r+i[0].width,Math.max(0,a-i[3].width),Math.max(0,l-i[0].width)).topLeft.subdivide(.5),topRightOuter:Mt(n+m,r,c,u).topRight.subdivide(.5),topRightInner:Mt(n+Math.min(m,s+i[3].width),r+i[0].width,m>s+i[3].width?0:c-i[3].width,u-i[0].width).topRight.subdivide(.5),bottomRightOuter:Mt(n+v,r+g,h,d).bottomRight.subdivide(.5),bottomRightInner:Mt(n+Math.min(v,s+i[3].width),r+Math.min(g,o+i[0].width),Math.max(0,h-i[1].width),Math.max(0,d-i[2].width)).bottomRight.subdivide(.5),bottomLeftOuter:Mt(n,r+M,p,f).bottomLeft.subdivide(.5),bottomLeftInner:Mt(n+i[3].width,r+M,Math.max(0,p-i[3].width),Math.max(0,f-i[2].width)).bottomLeft.subdivide(.5)}}function N(t,e,i,n,r){var s=mt(t,"backgroundClip"),o=[];switch(s){case"content-box":case"padding-box":O(o,n[0],n[1],e.topLeftInner,e.topRightInner,r.left+i[3].width,r.top+i[0].width),O(o,n[1],n[2],e.topRightInner,e.bottomRightInner,r.left+r.width-i[1].width,r.top+i[0].width),O(o,n[2],n[3],e.bottomRightInner,e.bottomLeftInner,r.left+r.width-i[1].width,r.top+r.height-i[2].width),O(o,n[3],n[0],e.bottomLeftInner,e.topLeftInner,r.left+i[3].width,r.top+r.height-i[2].width);break;default:O(o,n[0],n[1],e.topLeftOuter,e.topRightOuter,r.left,r.top),O(o,n[1],n[2],e.topRightOuter,e.bottomRightOuter,r.left+r.width,r.top),O(o,n[2],n[3],e.bottomRightOuter,e.bottomLeftOuter,r.left+r.width,r.top+r.height),O(o,n[3],n[0],e.bottomLeftOuter,e.topLeftOuter,r.left,r.top+r.height)}return o}function R(t,e,i){var n,r,s,o,a,l,c=e.left,u=e.top,h=e.width,d=e.height,p=k(t),f=P(e,p,i),m={clip:N(t,f,i,p,e),borders:[]};for(n=0;n<4;n++)if(i[n].width>0){switch(r=c,s=u,o=h,a=d-i[2].width,n){case 0:a=i[0].width,l=I({c1:[r,s],c2:[r+o,s],c3:[r+o-i[1].width,s+a],c4:[r+i[3].width,s+a]},p[0],p[1],f.topLeftOuter,f.topLeftInner,f.topRightOuter,f.topRightInner);break;case 1:r=c+h-i[1].width,o=i[1].width,l=I({c1:[r+o,s],c2:[r+o,s+a+i[2].width],c3:[r,s+a],c4:[r,s+i[0].width]},p[1],p[2],f.topRightOuter,f.topRightInner,f.bottomRightOuter,f.bottomRightInner);break;case 2:s=s+d-i[2].width,a=i[2].width,l=I({c1:[r+o,s+a],c2:[r,s+a],c3:[r+i[3].width,s],c4:[r+o-i[3].width,s]},p[2],p[3],f.bottomRightOuter,f.bottomRightInner,f.bottomLeftOuter,f.bottomLeftInner);break;case 3:o=i[3].width,l=I({c1:[r,s+a+i[2].width],c2:[r,s],c3:[r+o,s+i[0].width],c4:[r+o,s+a]},p[3],p[0],f.bottomLeftOuter,f.bottomLeftInner,f.topLeftOuter,f.topLeftInner)}m.borders.push({args:l,color:i[n].color})}return m}function L(t,e){var i=t.drawShape();return e.forEach(function(t,e){i[0===e?"moveTo":t[0]+"To"].apply(null,t.slice(1))}),i}function F(t,e,i){"transparent"!==i&&(t.setVariable("fillStyle",i),L(t,e),t.fill(),ct+=1)}function U(t,e,i){var n,r,s=ut.createElement("valuewrap"),o=["lineHeight","textAlign","fontFamily","color","fontSize","paddingLeft","paddingTop","width","height","border","borderLeftWidth","borderTopWidth"];o.forEach(function(e){try{s.style[e]=mt(t,e)}catch(t){ht.log("html2canvas: Parse: Exception caught in renderFormValue: "+t.message)}}),s.style.borderColor="black",s.style.borderStyle="solid",s.style.display="block",s.style.position="absolute",(/^(submit|reset|button|text|password)$/.test(t.type)||"SELECT"===t.nodeName)&&(s.style.lineHeight=mt(t,"height")),s.style.top=e.top+"px",s.style.left=e.left+"px",n="SELECT"===t.nodeName?(t.options[t.selectedIndex]||0).text:t.value,n||(n=t.placeholder),r=ut.createTextNode(n),s.appendChild(r),ft.appendChild(s),y(t,r,i),ft.removeChild(s)}function z(t){t.drawImage.apply(t,Array.prototype.slice.call(arguments,1)),ct+=1}function B(i,n){var r=t.getComputedStyle(i,n);if(r&&r.content&&"none"!==r.content&&"-moz-alt-content"!==r.content&&"none"!==r.display){var s=r.content+"",o=s.substr(0,1);o===s.substr(s.length-1)&&o.match(/'|"/)&&(s=s.substr(1,s.length-2));var a="url"===s.substr(0,3),l=e.createElement(a?"img":"span");return l.className=gt+"-before "+gt+"-after",Object.keys(r).filter(W).forEach(function(t){try{l.style[t]=r[t]}catch(e){ht.log(["Tried to assign readonly property ",t,"Error:",e])}}),a?l.src=ht.parseBackgroundImage(s)[0].args[0]:l.innerHTML=s,l}}function W(e){return isNaN(t.parseInt(e,10))}function j(t,e){var i=B(t,":before"),n=B(t,":after");(i||n)&&(i&&(t.className+=" "+gt+"-before",t.parentNode.insertBefore(i,t),st(i,e,!0),t.parentNode.removeChild(i),t.className=t.className.replace(gt+"-before","").trim()),n&&(t.className+=" "+gt+"-after",t.appendChild(n),st(n,e,!0),t.removeChild(n),t.className=t.className.replace(gt+"-after","").trim()))}function $(t,e,i,n){var r=Math.round(n.left+i.left),s=Math.round(n.top+i.top);t.createPattern(e),t.translate(r,s),t.fill(),t.translate(-r,-s)}function V(t,e,i,n,r,s,o,a){var l=[];l.push(["line",Math.round(r),Math.round(s)]),l.push(["line",Math.round(r+o),Math.round(s)]),l.push(["line",Math.round(r+o),Math.round(a+s)]),l.push(["line",Math.round(r),Math.round(a+s)]),L(t,l),t.save(),t.clip(),$(t,e,i,n),t.restore()}function G(t,e,i){u(t,e.left,e.top,e.width,e.height,i)}function q(t,e,i,n,r){var s=ht.BackgroundSize(t,e,n,r),o=ht.BackgroundPosition(t,e,n,r,s),a=mt(t,"backgroundRepeat").split(",").map(ht.trimText);switch(n=J(n,s),a=a[r]||a[0]){case"repeat-x":V(i,n,o,e,e.left,e.top+o.top,99999,n.height);break;case"repeat-y":V(i,n,o,e,e.left+o.left,e.top,n.width,99999);break;case"no-repeat":V(i,n,o,e,e.left+o.left,e.top+o.top,n.width,n.height);break;default:$(i,n,o,{top:e.top,left:e.left,width:n.width,height:n.height})}}function K(t,e,i){for(var n,r=mt(t,"backgroundImage"),s=ht.parseBackgroundImage(r),o=s.length;o--;)if(r=s[o],r.args&&0!==r.args.length){var a="url"===r.method?r.args[0]:r.value;n=E(a),n?q(t,e,i,n,o):ht.log("html2canvas: Error loading background:",r)}}function J(t,e){if(t.width===e.width&&t.height===e.height)return t;var i,n=ut.createElement("canvas");return n.width=e.width,n.height=e.height,i=n.getContext("2d"),z(i,t,0,0,t.width,t.height,0,0,e.width,e.height),n}function X(t,e,i){return t.setVariable("globalAlpha",mt(e,"opacity")*(i?i.opacity:1))}function Z(t){return t.replace("px","")}function Q(t,e){var i=mt(t,"transform")||mt(t,"-webkit-transform")||mt(t,"-moz-transform")||mt(t,"-ms-transform")||mt(t,"-o-transform"),n=mt(t,"transform-origin")||mt(t,"-webkit-transform-origin")||mt(t,"-moz-transform-origin")||mt(t,"-ms-transform-origin")||mt(t,"-o-transform-origin")||"0px 0px";n=n.split(" ").map(Z).map(ht.asFloat);var r;if(i&&"none"!==i){var s=i.match(bt);if(s)switch(s[1]){case"matrix":r=s[2].split(",").map(ht.trimText).map(ht.asFloat)}}return{origin:n,matrix:r}}function tt(t,e,i,n){var l=a(e?i.width:s(),e?i.height:o()),c={ctx:l,opacity:X(l,t,e),cssPosition:mt(t,"position"),borders:C(t),transform:n,clip:e&&e.clip?ht.Extend({},e.clip):null};return A(t,c,e),r.useOverflow===!0&&/(hidden|scroll|auto)/.test(mt(t,"overflow"))===!0&&/(BODY)/i.test(t.nodeName)===!1&&(c.clip=c.clip?x(c.clip,i):i),c}function et(t,e,i){var n={left:e.left+t[3].width,top:e.top+t[0].width,width:e.width-(t[1].width+t[3].width),height:e.height-(t[0].width+t[2].width)};return i&&(n=x(n,i)),n}function it(t,e){var i=e.matrix?ht.OffsetBounds(t):ht.Bounds(t);return e.origin[0]+=i.left,e.origin[1]+=i.top,i}function nt(t,e,i,n){var r,s=Q(t,e),o=it(t,s),a=tt(t,e,o,s),l=a.borders,c=a.ctx,u=et(l,o,a.clip),h=R(t,o,l),d=pt.test(t.nodeName)?"#efefef":mt(t,"backgroundColor");switch(L(c,h.clip),c.save(),c.clip(),u.height>0&&u.width>0&&!n?(G(c,o,d),K(t,u,c)):n&&(a.backgroundColor=d),c.restore(),h.borders.forEach(function(t){F(c,t.args,t.color)}),i||j(t,a),t.nodeName){case"IMG":(r=E(t.getAttribute("src")))?S(c,t,r,o,l):ht.log("html2canvas: Error loading <img>:"+t.getAttribute("src"));break;case"INPUT":/^(text|url|email|submit|button|reset)$/.test(t.type)&&(t.value||t.placeholder||"").length>0&&U(t,o,a);break;case"TEXTAREA":(t.value||t.placeholder||"").length>0&&U(t,o,a);break;case"SELECT":(t.options||t.placeholder||"").length>0&&U(t,o,a);break;case"LI":w(t,a,u);break;case"CANVAS":S(c,t,t,o,l)}return a}function rt(t){return"none"!==mt(t,"display")&&"hidden"!==mt(t,"visibility")&&!t.hasAttribute("data-html2canvas-ignore")}function st(t,e,i){rt(t)&&(e=nt(t,e,i,!1)||e,pt.test(t.nodeName)||ot(t,e,i))}function ot(t,e,i){ht.Children(t).forEach(function(n){n.nodeType===n.ELEMENT_NODE?st(n,e,i):n.nodeType===n.TEXT_NODE&&y(t,n,e)})}function at(){var t=mt(e.documentElement,"backgroundColor"),i=ht.isTransparent(t)&&lt===e.body,n=nt(lt,null,!1,i);return ot(lt,n),i&&(t=n.backgroundColor),ft.removeChild(vt),{backgroundColor:t,stack:n}}t.scroll(0,0);var lt=r.elements===i?e.body:r.elements[0],ct=0,ut=lt.ownerDocument,ht=h.Util,dt=ht.Support(r,ut),pt=new RegExp("("+r.ignoreElements+")"),ft=ut.body,mt=ht.getCSS,gt="___html2canvas___pseudoelement",vt=ut.createElement("style");vt.innerHTML="."+gt+'-before:before { content: "" !important; display: none !important; }.'+gt+'-after:after { content: "" !important; display: none !important; }',ft.appendChild(vt),n=n||{};var Mt=function(t){return function(e,i,n,r){var s=n*t,o=r*t,a=e+n,l=i+r;return{topLeft:H({x:e,y:l},{x:e,y:l-o},{x:a-s,y:i},{x:a,y:i}),topRight:H({x:e,y:i},{x:e+s,y:i},{x:a,y:l-o},{x:a,y:l}),bottomRight:H({x:a,y:i},{x:a,y:i+o},{x:e+s,y:l},{x:e,y:l}),bottomLeft:H({x:a,y:l},{x:a-s,y:l},{x:e,y:i+o},{x:e,y:i})}}}(4*((Math.sqrt(2)-1)/3)),bt=/(matrix)\((.+)\)/;return at()},h.Preload=function(n){function r(t){E.href=t,E.href=E.href;var e=E.protocol+E.host;return e===m}function s(){Y.log("html2canvas: start: images: "+b.numLoaded+" / "+b.numTotal+" (failed: "+b.numFailed+")"),!b.firstRun&&b.numLoaded>=b.numTotal&&(Y.log("Finished loading images: # "+b.numTotal+" (failed: "+b.numFailed+")"),"function"==typeof n.complete&&n.complete(b))}function o(e,r,o){var a,l,c=n.proxy;E.href=e,e=E.href,a="html2canvas_"+y++,o.callbackname=a,c+=c.indexOf("?")>-1?"&":"?",c+="url="+encodeURIComponent(e)+"&callback="+a,l=D.createElement("script"),t[a]=function(e){"error:"===e.substring(0,6)?(o.succeeded=!1,b.numLoaded++,b.numFailed++,s()):(f(r,o),r.src=e),t[a]=i;try{delete t[a]}catch(t){}l.parentNode.removeChild(l),l=null,delete o.script,delete o.callbackname},l.setAttribute("type","text/javascript"),l.setAttribute("src",c),o.script=l,t.document.body.appendChild(l)}function a(e,i){var n=t.getComputedStyle(e,i),r=n.content;"url"===r.substr(0,3)&&g.loadImage(h.Util.parseBackgroundImage(r)[0].args[0]),d(n.backgroundImage,e)}function l(t){a(t,":before"),a(t,":after")}function c(t,e){var n=h.Generate.Gradient(t,e);n!==i&&(b[t]={img:n,succeeded:!0},b.numTotal++,b.numLoaded++,s())}function u(t){return t&&t.method&&t.args&&t.args.length>0}function d(t,e){var n;h.Util.parseBackgroundImage(t).filter(u).forEach(function(t){"url"===t.method?g.loadImage(t.args[0]):t.method.match(/\-?gradient$/)&&(n===i&&(n=h.Util.Bounds(e)),c(t.value,n))})}function p(t){var e=!1;try{Y.Children(t).forEach(p)}catch(t){}try{e=t.nodeType}catch(t){e=!1,Y.log("html2canvas: failed to access some element's nodeType - Exception: "+t.message)}if(1===e||e===i){l(t);try{d(Y.getCSS(t,"backgroundImage"),t)}catch(t){Y.log("html2canvas: failed to get background-image - Exception: "+t.message)}d(t)}}function f(e,r){e.onload=function(){r.timer!==i&&t.clearTimeout(r.timer),b.numLoaded++,r.succeeded=!0,e.onerror=e.onload=null,s()},e.onerror=function(){if("anonymous"===e.crossOrigin&&(t.clearTimeout(r.timer),n.proxy)){var i=e.src;return e=new Image,r.img=e,e.src=i,void o(e.src,e,r)}b.numLoaded++,b.numFailed++,r.succeeded=!1,e.onerror=e.onload=null,s()}}var m,g,v,M,b={numLoaded:0,numFailed:0,numTotal:0,cleanupDone:!1},Y=h.Util,y=0,_=n.elements[0]||e.body,D=_.ownerDocument,T=_.getElementsByTagName("img"),w=T.length,E=D.createElement("a"),x=function(t){return t.crossOrigin!==i}(new Image);for(E.href=t.location.href,m=E.protocol+E.host,g={loadImage:function(t){var e,s;t&&b[t]===i&&(e=new Image,t.match(/data:image\/.*;base64,/i)?(e.src=t.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),s=b[t]={img:e},b.numTotal++,f(e,s)):r(t)||n.allowTaint===!0?(s=b[t]={img:e},b.numTotal++,f(e,s),e.src=t):x&&!n.allowTaint&&n.useCORS?(e.crossOrigin="anonymous",s=b[t]={img:e},b.numTotal++,f(e,s),e.src=t):n.proxy&&(s=b[t]={img:e},b.numTotal++,o(t,e,s)))},cleanupDOM:function(r){var o,a;if(!b.cleanupDone){r&&"string"==typeof r?Y.log("html2canvas: Cleanup because: "+r):Y.log("html2canvas: Cleanup after timeout: "+n.timeout+" ms.");for(a in b)if(b.hasOwnProperty(a)&&(o=b[a],"object"==typeof o&&o.callbackname&&o.succeeded===i)){t[o.callbackname]=i;try{delete t[o.callbackname]}catch(t){}o.script&&o.script.parentNode&&(o.script.setAttribute("src","about:blank"),o.script.parentNode.removeChild(o.script)),b.numLoaded++,b.numFailed++,Y.log("html2canvas: Cleaned up failed img: '"+a+"' Steps: "+b.numLoaded+" / "+b.numTotal)}t.stop!==i?t.stop():e.execCommand!==i&&e.execCommand("Stop",!1),e.close!==i&&e.close(),b.cleanupDone=!0,r&&"string"==typeof r||s()}},renderingDone:function(){M&&t.clearTimeout(M)}},n.timeout>0&&(M=t.setTimeout(g.cleanupDOM,n.timeout)),Y.log("html2canvas: Preload starts: finding background-images"),b.firstRun=!0,p(_),Y.log("html2canvas: Preload: Finding images"),v=0;v<w;v+=1)g.loadImage(T[v].getAttribute("src"));return b.firstRun=!1,Y.log("html2canvas: Preload: Done."),b.numTotal===b.numLoaded&&s(),g},h.Renderer=function(t,n){function r(t){function e(t){Object.keys(t).sort().forEach(function(i){var n=[],s=[],o=[],a=[];t[i].forEach(function(t){t.node.zIndex.isPositioned||t.node.zIndex.opacity<1?o.push(t):t.node.zIndex.isFloated?s.push(t):n.push(t)}),function t(e){e.forEach(function(e){a.push(e),e.children&&t(e.children)})}(n.concat(s,o)),a.forEach(function(t){t.context?e(t.context):r.push(t.node)})})}var n,r=[];return n=function(t){function e(t,n,r){var s="auto"===n.zIndex.zindex?0:Number(n.zIndex.zindex),o=t,a=n.zIndex.isPositioned,l=n.zIndex.isFloated,c={node:n},u=r;n.zIndex.ownStacking?(o=c.context={"!":[{node:n,children:[]}]},u=i):(a||l)&&(u=c.children=[]),0===s&&r?r.push(c):(t[s]||(t[s]=[]),t[s].push(c)),n.zIndex.children.forEach(function(t){e(o,t,u)})}var n={};return e(n,t),n}(t),e(n),r}function s(t){var e;if("string"==typeof n.renderer&&h.Renderer[t]!==i)e=h.Renderer[t](n);else{if("function"!=typeof t)throw new Error("Unknown renderer");e=t(n)}if("function"!=typeof e)throw new Error("Invalid renderer defined");return e}return s(n.renderer)(t,n,e,r(t.stack),h)},h.Util.Support=function(t,e){function n(){var t=new Image,n=e.createElement("canvas"),r=n.getContext!==i&&n.getContext("2d");if(r===!1)return!1;n.width=n.height=10,t.src=["data:image/svg+xml,","<svg xmlns='http://www.w3.org/2000/svg' width='10' height='10'>","<foreignObject width='10' height='10'>","<div xmlns='http://www.w3.org/1999/xhtml' style='width:10;height:10;'>","sup","</div>","</foreignObject>","</svg>"].join("");try{r.drawImage(t,0,0),n.toDataURL()}catch(t){return!1}return h.Util.log("html2canvas: Parse: SVG powered rendering available"),!0}function r(){var t,i,n,r,s=!1;return e.createRange&&(t=e.createRange(),t.getBoundingClientRect&&(i=e.createElement("boundtest"),i.style.height="123px",i.style.display="block",e.body.appendChild(i),t.selectNode(i),n=t.getBoundingClientRect(),r=n.height,123===r&&(s=!0),e.body.removeChild(i))),s}return{rangeBounds:r(),svgRendering:t.svgRendering&&n()}},t.html2canvas=function(e,i){e=e.length?e:[e];var n,r,s={logging:!1,elements:e,background:"#fff",proxy:null,timeout:0,useCORS:!1,allowTaint:!1,svgRendering:!1,ignoreElements:"IFRAME|OBJECT|PARAM",useOverflow:!0,letterRendering:!1,chinese:!1,width:null,height:null,taintTest:!0,renderer:"Canvas"};return s=h.Util.Extend(i,s),h.logging=s.logging,s.complete=function(t){"function"==typeof s.onpreloaded&&s.onpreloaded(t)===!1||(n=h.Parse(t,s),"function"==typeof s.onparsed&&s.onparsed(n)===!1||(r=h.Renderer(n,s),"function"==typeof s.onrendered&&s.onrendered(r)))},t.setTimeout(function(){h.Preload(s)},0),{render:function(t,e){return h.Renderer(t,h.Util.Extend(e,s))},parse:function(t,e){return h.Parse(t,h.Util.Extend(e,s))},preload:function(t){return h.Preload(h.Util.Extend(t,s))},log:h.Util.log}},t.html2canvas.log=h.Util.log,t.html2canvas.Renderer={Canvas:i},h.Renderer.Canvas=function(t){function n(t,e){t.beginPath(),e.forEach(function(e){t[e.name].apply(t,e.arguments)}),t.closePath()}function r(t){if(a.indexOf(t.arguments[0].src)===-1){c.drawImage(t.arguments[0],0,0);try{c.getImageData(0,0,1,1)}catch(t){return l=o.createElement("canvas"),c=l.getContext("2d"),!1}a.push(t.arguments[0].src)}return!0}function s(e,i){switch(i.type){case"variable":e[i.name]=i.arguments;break;case"function":switch(i.name){case"createPattern":if(i.arguments[0].width>0&&i.arguments[0].height>0)try{e.fillStyle=e.createPattern(i.arguments[0],"repeat")}catch(t){u.log("html2canvas: Renderer: Error creating pattern",t.message)}break;case"drawShape":n(e,i.arguments);break;case"drawImage":i.arguments[8]>0&&i.arguments[7]>0&&(!t.taintTest||t.taintTest&&r(i))&&e.drawImage.apply(e,i.arguments);break;default:e[i.name].apply(e,i.arguments)}}}t=t||{};var o=e,a=[],l=e.createElement("canvas"),c=l.getContext("2d"),u=h.Util,d=t.canvas||o.createElement("canvas");return function(t,e,n,r,o){var a,l,c,h=d.getContext("2d"),p=t.stack;return d.width=d.style.width=e.width||p.ctx.width,d.height=d.style.height=e.height||p.ctx.height,c=h.fillStyle,h.fillStyle=u.isTransparent(p.backgroundColor)&&e.background!==i?e.background:t.backgroundColor,h.fillRect(0,0,d.width,d.height),h.fillStyle=c,r.forEach(function(t){h.textBaseline="bottom",h.save(),t.transform.matrix&&(h.translate(t.transform.origin[0],t.transform.origin[1]),h.transform.apply(h,t.transform.matrix),h.translate(-t.transform.origin[0],-t.transform.origin[1])),t.clip&&(h.beginPath(),h.rect(t.clip.left,t.clip.top,t.clip.width,t.clip.height),h.clip()),t.ctx.storage&&t.ctx.storage.forEach(function(t){s(h,t)}),h.restore()}),u.log("html2canvas: Renderer: Canvas renderer done - returning canvas obj"),1===e.elements.length&&"object"==typeof e.elements[0]&&"BODY"!==e.elements[0].nodeName?(l=o.Util.Bounds(e.elements[0]),a=n.createElement("canvas"),a.width=Math.ceil(l.width),a.height=Math.ceil(l.height),h=a.getContext("2d"),h.drawImage(d,l.left,l.top,l.width,l.height,0,0,l.width,l.height),d=null,a):d}}}(window,document),function(){Object.defineProperty(Array.prototype,"contains",{enumerable:!1,value:function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return!0;return!1}}),Object.defineProperty(Array.prototype,"repeat",{enumerable:!1,value:function(t,e){for(;e;)this[--e]=t;return this}}),Object.defineProperty(Array.prototype,"get",{enumerable:!1,writable:!0,value:function(t,e){for(var i=0,n=this.length;i<n;i++)if(e(this[i],t))return this[i];return null}}),Array.prototype.splitArray=function(t){var e=[],i=0,n=t;do e.push(this.slice(i,n)),i=n,n+=t;while(i<this.length);return e},Array.isArray||(Array.isArray=function(t){return t&&"object"==typeof t&&"[object Array]"===Object.prototype.toString.call(t)}),Array.from||(Array.from=function(){var t=Object.prototype.toString,e=function(e){return"function"==typeof e||"[object Function]"===t.call(e)},i=function(t){var e=Number(t);return isNaN(e)?0:0!==e&&isFinite(e)?(e>0?1:-1)*Math.floor(Math.abs(e)):e},n=Math.pow(2,53)-1,r=function(t){var e=i(t);return Math.min(Math.max(e,0),n)};return function(t){var i=this,n=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var s,o=arguments.length>1?arguments[1]:void 0;if("undefined"!=typeof o){if(!e(o))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(s=arguments[2])}for(var a,l=r(n.length),c=e(i)?Object(new i(l)):new Array(l),u=0;u<l;)a=n[u],o?c[u]="undefined"==typeof s?o(a,u):o.call(s,a,u):c[u]=a,u+=1;return c.length=l,c}}())}(),function(){var t=Array.prototype.slice,e=(Object.prototype.toString,Object.prototype.hasOwnProperty),i=function(t,i,n){if(Array.isArray(t))for(var r=0,s=t.length;r<s;r++)i.call(n,t[r]);else for(var o in t)e.call(t,o)&&i.call(n,t[o])},n=function(n){var r=t.call(arguments,1);return i(r,function(t){for(var i in t)e.call(t,i)&&(n[i]=t[i])}),n},r=function(t){var e={};for(var i in t)e[i]=t[i];return e};n(this,{extend:n,clone:r})}(),function(){Number.prototype.convertor=function(){return{inches:this.valueOf(),pixels:this.valueOf(),centimeters:this.valueOf(),millimeters:this.valueOf(),points:this.valueOf(),picas:this.valueOf()}};var t={px:96,in:1,cm:2.54,mm:25.4,pt:72,pc:862};Number.prototype.isBetween=function(t,e,i){return i?t<=this&&this<=e:t<this&&this<e},Number.prototype.contains=function(t){return(this&t)==t},Number.prototype.convertUnit=function(e,i){return this*t[i]/t[e]}}(),function(){String.prototype.capitalize=function(){return this.replace(/(?:^|\s)\S/g,function(t){return t.toUpperCase()})},String.prototype.replaceAll=function(t,e){var i=this;return i.replace(new RegExp(t,"g"),e)},String.prototype.splitWithIndex=function(t){for(var e=[],i=this.split(t),n=0,r=0;r<i.length;r++)e.push([n,i[r]]),n+=i[r].length+t.length;return e};var t={};String.prototype.convertor=function(){var e=parseFloat(this);if(t.hasOwnProperty(this)){var i=t[this],n={inches:i.inches,pixels:i.pixels,centimeters:i.centimeters,millimeters:i.millimeters,points:i.points,picas:i.picas};return n}var n={inches:e,pixels:e,centimeters:e,millimeters:e,points:e,picas:e};if(!/^[-+0-9]/.test(this)||!/px|in|cm|mm|pt|pc$/i.test(this))return n;var r=96;return/px$/i.test(this)?(n.inches*=1/r,n.centimeters*=2.54/r,n.millimeters*=25.4/r,n.points*=72/r,n.picas*=864/r):/in$/i.test(this)?(n.centimeters*=2.54,n.millimeters*=25.4,n.points*=72,n.picas*=864,n.pixels*=r):/cm$/i.test(this)?(n.inches*=1/2.54,n.millimeters*=10,n.points*=72/2.54,n.picas*=864/2.54,n.pixels*=r/2.54):/mm$/i.test(this)?(n.inches*=1/25.4,n.centimeters*=.1,n.points*=72/25.4,n.picas*=864/25.4,n.pixels*=r/25.4):/pt$/i.test(this)?(n.inches*=1/72,n.centimeters*=2.54/72,n.millimeters*=25.4/72,n.picas*=12,n.pixels*=r/72):/pc$/i.test(this)&&(n.inches*=1/864,n.centimeters*=2.54/864,n.millimeters*=25.4/864,n.points*=1/12,n.pixels*=r/864),t[this]=ZWJSONUtils.clone(n),n};var e={px:96,in:1,cm:2.54,mm:25.4,pt:72,pc:862};String.prototype.convertUnitTo=function(t){var i=parseFloat(this),n=this.search(/(px|in|cm|mm|pt|pc)$/i);if(NaN==i||n==-1)return this;var r=this.substring(n);return i*=e[t]/e[r]},"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}),"function"!=typeof String.prototype.trimRight&&(String.prototype.trimRight=function(){return String(this).replace(/\s+$/,"")}),String.prototype.endsWith||(String.prototype.endsWith=function(t){var e=Object.prototype.toString;if("[object RegExp]"===e.call(t))throw new TypeError('Cannot call method "endsWith" with a regex');t+="";var i=this.length,n=arguments.length>1?arguments[1]:void 0,r=void 0===n?i:0,s=Math.min(Math.max(r,0),i);return this.slice(s-t.length,s)===t})}();var ZWArrayUtils=function(){var t=function(){var t=Array.prototype.indexOf;return t?function(t,e){return t.indexOf(e)!=-1}:function(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]==e)return!0;return!1}}(),e=function(t){return t.filter(function(e,i,n){return t.indexOf(e)==i})},i=function(t,e){if(t.length!==e.length)return!1;for(var i=0;i<t.length;i++)if("object"==typeof t[i]&&"object"==typeof e[i]){if(!ZWJSONUtils.compareJSON(t[i],e[i]))return!1}else if(jQuery.isArray(t[i])&&jQuery.isArray(e[i])){if(!ZWArrayUtils.compareArray(t[i],e[i]))return!1}else if(t[i]!==e[i])return!1;return!0},n=function(t,e){var i,n,r=t.length,s=e.length,o=[];for(i=0;i<r;i++)for(n=0;n<s;n++)t[i]===e[n]&&o.push(t[i]);return o},r=function(t,e){for(var i=0;i<e.length;i++){var n=e[i];if(t==n.uuid){e.splice(i,1);break}}},s=function(t){return t[0]},o=function(t){return t[t.length-1]},a=function(t){for(var i=[],n=0;n<t.length;n++)i=i.concat(t[n]);return e(i)},l=function(t){for(var e=[],i=0;i<t.length;++i)Array.isArray(t[i])?e=e.concat(ZWArrayUtils.flattenArray(t[i])):e.push(t[i]);return e},c=function(t,e,i){Array.isArray(t)&&t.forEach(e,i)};return{arrayContains:t,removeDuplicates:e,compareArray:i,commonElementsInArray:n,removeObjArray:r,firstElementOf:s,lastElementOf:o,union:a,flattenArray:l,each:c}}(),ZWColorUtils=function(){var t=function(t,e){e/=100;var r=t.substring(t.indexOf("(")+1,t.lastIndexOf(")")).split(/,\s*/),s=i(parseInt(r[0]),parseInt(r[1]),parseInt(r[2]));s[2]=s[2]*e+(1-e);var o=n(s[0],s[1],s[2]);return"rgb("+o[0]+","+o[1]+","+o[2]+")"},e=function(t,e){var r=t.substring(t.indexOf("(")+1,t.lastIndexOf(")")).split(/,\s*/),s=i(parseInt(r[0]),parseInt(r[1]),parseInt(r[2]));s[2]=s[2]*(parseInt(e)/100);var o=n(s[0],s[1],s[2]);return"rgb("+o[0]+","+o[1]+","+o[2]+")"},i=function(t,e,i){t/=255,e/=255,i/=255;var n,r,s=Math.max(t,e,i),o=Math.min(t,e,i),a=(s+o)/2;if(s==o)n=r=0;else{var l=s-o;switch(r=a>.5?l/(2-s-o):l/(s+o),s){case t:n=(e-i)/l+(e<i?6:0);break;case e:n=(i-t)/l+2;break;case i:n=(t-e)/l+4}n/=6}return[n,r,a]},n=function(t,e,i){var n,r,s;if(0==e)n=r=s=i;else{var o=function(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t},a=i<.5?i*(1+e):i+e-i*e,l=2*i-a;n=o(l,a,t+1/3),r=o(l,a,t),s=o(l,a,t-1/3)}return[Math.round(255*n),Math.round(255*r),Math.round(255*s)]},r=function(t){var e=t;return e=e.substring("#".length),e=parseInt(e,16),e^=16777215,e=e.toString(16),e=("000000"+e).slice(-6),e="#"+e},s=function(t){var e=t.toString(16);return 1==e.length?"0"+e:e},o=function(t){if(0===t.indexOf("#"))return t;var e="(",i=")",n=t.substring(t.indexOf(e)+e.length,t.lastIndexOf(i)),r=n.split(",");return"#"+s(parseInt(r[0]))+s(parseInt(r[1]))+s(parseInt(r[2]))},a=function(t){var e=function(t){return t.match(/rgba/gi)};if(!e(t))return t;var i=t.match(/\d+\.*\d*/g),n={};n.R=i.shift()/255,n.G=i.shift()/255,n.B=i.shift()/255,n.A=i.shift()/1;var r={R:1,G:1,B:1},s={};s.R=parseInt(255*((1-n.A)*r.R+n.A*n.R)),s.G=parseInt(255*((1-n.A)*r.G+n.A*n.G)),s.B=parseInt(255*((1-n.A)*r.B+n.A*n.B));var o="rgb("+s.R+","+s.G+","+s.B+")";return o};return{getColorAfterTint:t,getColorAfterShade:e,rgbToHsl:i,hslToRgb:n,invertColor:r,rgbToHex:o,rgbaToRgb:a}}(),ZWImageUtils=function(){var t=function(t){return/\.(gif|jpg|jpeg|bmp|png)$/i.test(t)},e=function(t){var e=t&&(t.value||t.name||"");return/\.(gif|jpg|jpeg|bmp|png)$/i.test(e)},i=function(t,e,i){var n={};return n.cropTop=(t.cropTop/e*100).toFixed(3)+"%",n.cropBottom=(t.cropBottom/e*100).toFixed(3)+"%",n.cropLeft=(t.cropLeft/i*100).toFixed(3)+"%",n.cropRight=(t.cropRight/i*100).toFixed(3)+"%",n},n=function(t,e,i){var n={};return n.cropTop=parseFloat(t.cropTop)/100*e,n.cropBottom=parseFloat(t.cropBottom)/100*e,n.cropLeft=parseFloat(t.cropLeft)/100*i,n.cropRight=parseFloat(t.cropRight)/100*i,n},r=function(t){var e={};if(t&&t.cropRect){var i=t.cropRect,n=100-(parseFloat(i.cropTop)+parseFloat(i.cropBottom)),r=100-(parseFloat(i.cropLeft)+parseFloat(i.cropRight));e.wid=(100*t.wid/r).toFixed(3),e.ht=(100*t.ht/n).toFixed(3)}else e.ht=t.ht,e.wid=t.wid;return e},s=function(t,e){var i,n;for(e>t&&(i=t,t=e,e=i);0!=e;)n=t%e,t=e,e=n;return t},o=function(t,e){var i=s(t,e);return t/i/(e/i)},a=function(t,e){if("function"!=typeof e)return!1;fetch(t).then(function(t){return t.blob()}).then(function(t){var i=new FileReader;i.onload=function(){e(this.result)},i.readAsDataURL(t)})},l=function(t,e,i){var n=document.getElementById("copyImage");n.width=e?e:t.naturalWidth,n.height=i?i:t.naturalHeight;var r=n.getContext("2d");return r.drawImage(t,0,0),n.toDataURL("image/png")},c=function(t,e,i,n){var r,s;if("string"==typeof t?s=t:r=t,s&&n&&"function"==typeof n)editor.isOffline()&&ZWOffline.isOfflineSetupDone()?n(OfflineImpl.getImageSrc(s)):(r=document.createElement("img"),r.onload=function(){n(l(r,e,i))},r.src=s);else if(r)return l(r,e,i)},u=function(t){return Macros.isWriterImage(t)},h=function(t,e,i){var n,r;if("undefined"!=typeof editor.doc.model){var s=editor.doc.getSelection();if(i="undefined"==typeof i?s&&s.getStart():i,DocLayoutManager)if(i)n=DocLayoutManager.getViewAtIndex(i).getWidth(),r=DocLayoutManager.getContentHeightAtIndex(i);else{n=DocLayoutManager.getFirstSection().getWidth();var o=DocLayoutManager.getFirstPage();r=o.getMaxContentHeight()}else{var a;i&&(a=DocTreeManager.getTreeNodeAtIndex(i).getSection(),a.getSectionType()===SECTION_TYPES.TEXTBOX&&(n=a.width||0)),a=DocTreeManager.getSectionAtIndex(0);var l=a.getLayoutProps(),c=l.pageDimensions,u=l.margin;n=n?n:a.getContentWidth(),r=c.height-u.top-u.bottom-a.getGutterTop()}}else n=624,r=864;return t>n&&(e=e/t*n,t=n),e>r&&(t=t/e*r,e=r),{width:t,height:e}};return{isValidImage:t,isImage:e,convertCropDataToPercentage:i,convertCropDataToPixel:n,getOrginalHeighWidthOfImage:r,calculateAspectRatio:o,getImageBytes:c,getNewDimensionBasedOnContainer:h,isWriterImage:u,fetchBytes:a}}(),ZWJSONUtils=function(){var t=function(e,i){if(!e||!i)return!1;for(var n in e)if(e.hasOwnProperty(n)){var r=e[n],s=i[n];if(U.isObject(r)&&U.isObject(s)){if(!t(r,s))return!1}else if(U.isArray(r)&&U.isArray(s)){if(!ZWArrayUtils.compareArray(r,s))return!1}else if(r!==s)return!1}for(var n in i)if(i.hasOwnProperty(n)){var r=e[n],s=i[n];if(U.isObject(s)&&U.isObject(r)){if(!t(s,r))return!1}else if(U.isArray(s)&&U.isArray(r)){if(!ZWArrayUtils.compareArray(s,r))return!1}else if(s!==r)return!1}return!0},e=function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},i=function(t){try{return JSON.parse(t)&&!0}catch(t){return!1}},n=function(t,e){for(var i in e)t[i]&&"object"==typeof e[i]?n(t[i],e[i]):t[i]=e[i]},r=function(t){var e;if(null==t||"object"!=typeof t)return t;if(Array.isArray(t)){e=[];for(var i=0,n=t.length;i<n;i++)e[i]=r(t[i]);return e}if(o(t)){e={};for(var s in t)t.hasOwnProperty(s)&&(e[s]=r(t[s]));return e}return e},s=function(t,e){extend(t,r(e))},o=function(t){if("undefined"!=typeof jQuery)return jQuery.isPlainObject(t);var e=Object.getPrototypeOf(Object(t));return null===e||e===Object.prototype},a=function(t){var e;for(e in t)return!1;return!0},l=function(){return Object.keys?function(t){return t?Object.keys(t):null}:function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i);return e}}(),i=function(t){try{return JSON.parse(t)&&!0}catch(t){return!1}},c=function(t){for(var e in t)void 0===t[e]&&delete t[e];return t},u=function(t){for(var e in t)delete t[e]},h=function(t,e,i){return t[i]&&t[i]!=e[i]},d=function(t,e,i){var n=Object.keys(t),r=[];return n.forEach(function(n){r.push(i?e(t[n],n).bind(i):e(t[n],n))}),r};return{compareJSON:t,mergeJsonObjs:e,deepMerge:n,clone:r,cloneAndExtend:s,isPlainObject:o,isEmptyObject:a,getKeys:l,isJSON:i,jsonCleanser:c,emptyJSON:u,isPropertyChanged:h,mapJSON:d}}(),TransformationUtils=function(){"use strict";var t={TOP:"top",LEFT:"left"},e=function(t){var e={};return t.left&&t.top&&(e.x=t.left,e.y=t.top),e},i=function(t){var e={};return t.x&&t.y&&(e.left=t.x,e.top=t.y),e},n=function(t){var e;return e=t&&t.length?{x:f(t),y:m(t)}:{}},r=function(t){if(t){var e=[];return e.push({x:t.left,y:t.top}),e.push({x:t.right,y:t.top}),e.push({x:t.left,y:t.bottom}),e.push({x:t.right,y:t.bottom}),e}},s=function(t,e,i,n,r,s){s=s||1;var a=o(r,i,n),l=(a.height-n)/2*s,c=(a.width-i)/2*s,u={};return u.x=t+c,u.y=e+l,u},o=function(t,e,i){var n,r=[],s=[],t=parseFloat(t),n=t*(Math.PI/180),o=0,a=0,l=0,c=i,u=e,h=i,d=e,p=0,f=e/2,m=i/2,g=Math.cos(n),v=Math.sin(n);r[0]=l*g-c*v+f*(1-g)+m*v,s[0]=l*v+c*g+m*(1-g)-f*v,r[1]=u*g-h*v+f*(1-g)+m*v,s[1]=u*v+h*g+m*(1-g)-f*v,r[2]=d*g-p*v+f*(1-g)+m*v,s[2]=d*v+p*g+m*(1-g)-f*v,r[3]=o*g-a*v+f*(1-g)+m*v,s[3]=o*v+a*g+m*(1-g)-f*v,r.sort(function(t,e){return t-e}),s.sort(function(t,e){return t-e});var M=r[3]-r[0],b=s[3]-s[0];return{width:M,height:b}},a=function(t){return t*(Math.PI/180)},l=function(t,e,i,n,r){var s={};return s.x=t+i/2*r,s.y=e+n/2*r,s},c=function(t,e,i,n,r,s,o){var l;if(r%90!=0){var c=r%90,u=90,h=u-c,d=s*Math.sin(a(c)),p=s*Math.sin(a(h)),f=o*Math.sin(a(c)),m=o*Math.sin(a(h));if(r<90||r>180&&r<270){var g={x:t,y:e+m},v={x:t+p,y:e+n},M={x:t+i,y:e+d},b={x:t+f,y:e};l=[g,v,M,b]}else{var g={x:t,y:e+p},v={x:t+m,y:e+n},M={x:t+i,y:e+f},b={x:t+d,y:e};l=[g,v,M,b]}}else{var g={x:t,y:e},v={x:t,y:e+n},M={x:t+i,y:e+n},b={x:t+i,y:e};l=[g,v,M,b]}return l},u=function(t,e,i){var n=a(e),r=Math.sin(n),s=Math.cos(n);return{x:t.x*s- -t.y*r+i.x*(1-s)+-i.y*r,y:-(t.x*r+-t.y*s+-i.y*(1-s)-i.x*r)}},h=function(t,e,i,n){var r=J(i),s=r.width()*n,a=r.height()*n,l=o(e,s,a),c=r.offset(),h={x:c.left+l.width/2,y:c.top+l.height/2},d=u(t,e,h);return d},d=function(t,e,i){for(var n=[],r=0,s=t.length;r<s;r++){var o=t[r],a=u(o,e,i);n.push(a)}return n},p=function(t,e,i,n){var r=J(t),s=r.outerWidth()*i,a=r.outerHeight()*i,l=o(e,s,a),u=r.offset();n||(n={x:u.left+l.width/2,y:u.top+l.height/2});var h=c(u.left,u.top,l.width,l.height,e,s,a),p=d(h,e,n),g=m(p),v=f(p);return{x:v,y:g,width:s,height:a}},f=function(t){for(var e=t[0].x,i=1,n=t.length;i<n;i++){var r=t[i];r.x<e&&(e=r.x)}return e},m=function(t){for(var e=t[0].y,i=1,n=t.length;i<n;i++){var r=t[i];r.y<e&&(e=r.y)}return e},g=function(t,e,i){var n=0;return i=i||1,null!=t&&null!=e&&(n=Math.abs((e-t)/i)),n},v=function(i,r,o,a,u,h){a=a?a:0,h=h?h:1,u.hasOwnProperty(t.LEFT)&&u.hasOwnProperty(t.TOP)&&(u=e(u));var p=r+o.cropTop+o.cropBottom,f=i+o.cropLeft+o.cropRight,m=s(u.x,u.y,i,r,a,h),g=ZWJSONUtils.clone(m);g.x=g.x-o.cropLeft*h,g.y=g.y-o.cropTop*h;var v=c(g.x,g.y,f*h,p*h,0,f*h,p*h),M=l(m.x,m.y,i,r,h),b=d(v,-a,M),Y=n(b),y=s(Y.x,Y.y,f,p,a,h);return y};return{offsetToPoint:e,getOffsetPtFromPtList:n,getCornersFromBoundingRect:r,pointToOffset:i,getAdjustedOffset:s,getTransformedSize:o,getCorners:c,getCenter:l,rotate:u,rotateWRToEl:h,rotatePoints:d,rotateElement:p,getTop:m,getLeft:f,distanceBetween:g,getCropOffset:v}}(),TableNewThemeInfo=function(){var t="rgb(0,0,0)",e="rgb(255,255,255)",i="color100%",n="colorLight40%",r="colorLight60%",s="colorLight80%",o={type:"solid",width:"0px",color:t},a={type:"solid",width:"0px",color:e},l={type:"solid",width:"1px",color:e},c={type:"solid",width:"3px",color:e},u={type:"solid",width:"0px",color:i},h={type:"solid",width:"1px",color:i},d={type:"solid",width:"3px",color:i},p={type:"solid",width:"1px",color:n},f={theme1:{tblPr:{cell:{borders:{"border-top":h,"border-left":h,"border-bottom":h,"border-right":h}}}},theme2:{tblPr:{borders:{"border-top":o,"border-left":o,"border-bottom":o,"border-right":o,insideH:o,insideV:o},cell:{bgc:e}}},theme3:{tblPr:{borders:{"border-bottom":h,"border-top":h},cell:{bgc:e}},firstRow:{cell:{borders:{"border-bottom":h}}}},theme4:{tblPr:{cell:{bgc:e,borders:{"border-top":h,"border-left":h,"border-bottom":h,"border-right":h}}},firstRow:{cell:{bgc:i},para:{textFormat:{fgc:e,fw:"bold"}}}},theme5:{tblPr:{borders:{"border-top":l,"border-left":l,"border-right":l,"border-bottom":l,insideH:l,insideV:l},cell:{bgc:r}},firstRow:{para:{textFormat:{fgc:e,fw:"bold"}},cell:{bgc:i,borders:{"border-top":u,"border-left":l,"border-right":l}}},firstColumn:{cell:{borders:{"border-left":l}}},lastColumn:{cell:{borders:{"border-right":l}}}},theme6:{tblPr:{cell:{bgc:e,borders:{"border-top":h,"border-left":h,"border-bottom":h,"border-right":h}}},band1Horz:{cell:{bgc:s}}},theme7:{tblPr:{borders:{"border-top":l,"border-left":l,"border-right":l,"border-bottom":l,insideH:l,insideV:l}},band1Horz:{cell:{bgc:n}},band2Horz:{cell:{bgc:s}}},theme8:{tblPr:{borders:{"border-bottom":d},cell:{bgc:e}},firstRow:{cell:{bgc:n,borders:{"border-bottom":d,"border-top":d}}},band1Horz:{cell:{bgc:s}}},theme9:{tblPr:{borders:{insideH:l,insideV:l},cell:{bgc:s}},firstRow:{cell:{bgc:i},para:{textFormat:{fgc:e,fw:"bold"}}},band1Horz:{cell:{bgc:n}}},theme10:{tblPr:{cell:{bgc:e,borders:{"border-top":h,"border-left":h,"border-bottom":h,"border-right":h}}},firstRow:{cell:{borders:{"border-bottom":d}}},band1Horz:{cell:{bgc:s}}},theme11:{tblPr:{cell:{bgc:e,borders:{"border-top":h,"border-left":h,"border-bottom":h,"border-right":h}}},firstRow:{cell:{bgc:i},para:{textFormat:{fgc:e,fw:"bold"}}},band1Horz:{cell:{bgc:s}}},theme12:{tblPr:{borders:{"border-top":h,"border-left":h,"border-bottom":h,"border-right":h,insideH:h},cell:{bgc:e}},firstRow:{cell:{bgc:i},para:{textFormat:{fgc:e,fw:"bold"}}},band1Horz:{cell:{bgc:s}}},theme13:{tblPr:{cell:{bgc:n,borders:{"border-top":h,"border-left":h,"border-bottom":h,"border-right":h}}},firstRow:{cell:{bgc:i},para:{textFormat:{fgc:e,fw:"bold"}}},band1Horz:{cell:{bgc:s}}},theme14:{tblPr:{borders:{"border-top":l,"border-left":l,"border-right":l,"border-bottom":l,insideH:l,insideV:l},cell:{bgc:r}},firstColumn:{para:{textFormat:{fgc:e,fw:"bold"}},cell:{bgc:i,borders:{"border-left":u}}},lastColumn:{cell:{borders:{"border-right":u}}},firstRow:{para:{textFormat:{fgc:e,fw:"bold"}},cell:{bgc:i,borders:{"border-top":u,"border-left":u,"border-right":u}}}},theme15:{tblPr:{borders:{insideH:l},cell:{bgc:i},para:{textFormat:{fgc:e}}},firstRow:{para:{textFormat:{fgc:e,fw:"bold"}},cell:{bgc:i,borders:{"border-bottom":c,"border-right":a}}},firstColumn:{para:{textFormat:{fgc:e,fw:"bold"}},cell:{borders:{"border-right":l}}},band1Horz:{para:{textFormat:{fgc:e}}},band2Horz:{para:{textFormat:{fgc:e}}}},theme16:{tblPr:{borders:{"border-top":l,"border-left":l,"border-right":l,"border-bottom":l,insideH:l,insideV:l}},firstRow:{para:{textFormat:{fgc:e,fw:"bold"}},cell:{bgc:i,borders:{"border-right":u,"border-left":u,"border-top":u}}},firstColumn:{para:{textFormat:{fgc:e,fw:"bold"}},cell:{bgc:i,borders:{"border-left":u}}},lastColumn:{cell:{borders:{"border-right":u}}},band1Horz:{cell:{bgc:r}},band2Horz:{cell:{bgc:s}}},theme17:{tblPr:{borders:{"border-top":l,"border-left":l,"border-right":l,"border-bottom":l,insideH:l,insideV:l},cell:{bgc:s}},band1Horz:{cell:{bgc:n}},band1Vert:{cell:{bgc:n}}},theme18:{tblPr:{cell:{bgc:e,borders:{"border-top":h,"border-left":h,"border-bottom":h,"border-right":h}}},band1Vert:{cell:{bgc:r}}},theme19:{tblPr:{borders:{insideH:l,insideV:l},cell:{bgc:s}},band1Vert:{cell:{bgc:n}}},theme20:{tblPr:{cell:{bgc:e,borders:{"border-top":h,"border-left":h,"border-bottom":h,"border-right":h}}},firstRow:{cell:{bgc:i},para:{textFormat:{fgc:e,fw:"bold"}}},band1Vert:{cell:{bgc:s}}},theme21:{tblPr:{borders:{insideH:l,insideV:l},cell:{bgc:n}},firstRow:{cell:{bgc:i},para:{textFormat:{fgc:e,fw:"bold"}}},band2Vert:{cell:{bgc:s}}},theme22:{tblPr:{borders:{"border-top":l,"border-left":l,"border-right":l,"border-bottom":l,insideH:l,insideV:l}},firstRow:{para:{textFormat:{fgc:e,fw:"bold"}},cell:{bgc:i,borders:{"border-right":l,"border-left":l,"border-top":u}}},firstColumn:{para:{textFormat:{fgc:e,fw:"bold"}},cell:{bgc:i}},lastColumn:{cell:{borders:{"border-right":u}}},band1Vert:{cell:{bgc:n}},band2Vert:{cell:{bgc:s}}},theme23:{tblPr:{borders:{"border-top":l,"border-left":l,"border-right":l,"border-bottom":l,insideH:l,insideV:l},cell:{bgc:i}},firstColumn:{cell:{borders:{"border-left":l}}},band1Horz:{para:{textFormat:{fgc:e}}},band2Horz:{para:{textFormat:{fgc:e}}}},theme24:{tblPr:{borders:{"border-top":l,"border-left":l,"border-right":l,"border-bottom":l,insideH:l,insideV:l},cell:{bgc:r}},firstRow:{para:{textFormat:{fgc:e,fw:"bold"}},cell:{bgc:i,borders:{"border-top":u,"border-left":u,"border-right":u}}},lastColumn:{para:{textFormat:{fgc:e,fw:"bold"}},cell:{bgc:i,borders:{"border-right":u}}},firstColumn:{cell:{borders:{"border-left":u}}},band1Horz:{cell:{bgc:n}}},theme25:{tblPr:{borders:{"border-top":l,"border-left":l,"border-right":l,"border-bottom":l,insideH:l,insideV:l},cell:{bgc:r}},lastRow:{para:{textFormat:{fgc:e,fw:"bold"}},cell:{bgc:i,borders:{"border-bottom":u,"border-left":u,"border-right":u}}},lastColumn:{para:{textFormat:{fgc:e,fw:"bold"}},cell:{bgc:i,borders:{"border-right":u}}},firstColumn:{cell:{borders:{"border-left":u}}},band1Horz:{cell:{bgc:n}}},theme26:{tblPr:{cell:{bgc:e,borders:{"border-top":p,"border-left":p,"border-bottom":p,"border-right":p}}},firstRow:{cell:{borders:{"border-bottom":d}}},lastRow:{cell:{borders:{"border-top":{type:"double",width:"3px",color:i}}}},band1Horz:{cell:{bgc:s}}},theme27:{tblPr:{cell:{bgc:e,borders:{"border-top":h,"border-left":h,"border-bottom":h,"border-right":h}}},firstRow:{cell:{bgc:i},para:{textFormat:{fgc:e,fw:"bold"}}},lastRow:{cell:{borders:{"border-top":{type:"double",width:"3px",color:i}}}}},theme28:{tblPr:{borders:{"border-top":l,"border-left":l,"border-right":l,"border-bottom":l,insideH:l,insideV:l}},firstRow:{para:{textFormat:{fgc:e,fw:"bold"}},cell:{bgc:i,borders:{"border-right":u,"border-left":u,"border-top":u}}},lastRow:{para:{textFormat:{fgc:e,fw:"bold"}},cell:{bgc:i,borders:{"border-right":u,"border-left":u,"border-bottom":u}}},lastColumn:{para:{textFormat:{fgc:e,fw:"bold"}},cell:{bgc:i,borders:{"border-right":u,"border-left":u,"border-top":u}}},firstColumn:{cell:{borders:{"border-left":u}}},band1Horz:{cell:{bgc:r}},band2Horz:{cell:{bgc:s}}},theme29:{tblPr:{borders:{"border-top":l,"border-left":l,"border-right":l,"border-bottom":l,insideH:l,insideV:l},cell:{bgc:r}},lastRow:{para:{textFormat:{fgc:e,fw:"bold"}},cell:{bgc:i,borders:{"border-bottom":u,"border-left":u,"border-right":u}}},firstColumn:{para:{textFormat:{fgc:e,fw:"bold"}},cell:{bgc:i,borders:{"border-left":u}}},lastColumn:{cell:{borders:{"border-left":u}}},band1Horz:{cell:{bgc:n}},firstRow:{para:{textFormat:{fgc:e,fw:"bold"}},cell:{bgc:i}}},theme30:{tblPr:{borders:{"border-top":l,"border-left":l,"border-right":l,"border-bottom":l,insideH:l,insideV:l}},firstRow:{para:{textFormat:{fgc:e,fw:"bold"}},cell:{bgc:i,borders:{"border-right":u,"border-left":u,"border-top":u}}},lastRow:{para:{textFormat:{fgc:e,fw:"bold"}},cell:{bgc:i,borders:{"border-right":u,"border-left":u,"border-bottom":u}}},lastColumn:{para:{textFormat:{fgc:e,fw:"bold"}},cell:{bgc:i,borders:{"border-right":u,"border-left":u,"border-top":u}}},firstColumn:{para:{textFormat:{fgc:e,fw:"bold"}},cell:{bgc:i,borders:{"border-right":l,"border-left":u,"border-top":u}}},band1Horz:{cell:{bgc:n}},band2Horz:{cell:{bgc:s}}}};return f}(),TableThemeLeftPanelStyleStr=function(){var t=function(t){return"table.theme"+t+">:first-of-type>tr"},e=function(t){return"table.theme"+t+">:last-of-type>tr"},i=t(1),n=t(2),r=t(3),s=t(4),o=t(5),a=t(6),l=t(7),c=t(8),u=t(9),h=t(10),d=t(11),p=t(12),f=t(13),m=t(14),g=t(15),v=t(16),M=t(17),b=t(18),Y=t(19),y=t(20),_=t(21),D=t(22),T=t(23),w=t(24),E=t(25),x=e(25),A=t(26),S=e(26),C=t(27),k=e(27),H=t(28),O=e(28),I=t(29),P=e(29),N=t(30),R=e(30),L="rgb(0,0,0) !important;",F="rgb(122, 122, 122) !important;",U="color100 !important;",z="rgb(255,255,255) !important;",B="colorLight40 !important;",W="colorLight60 !important;",j="colorLight80 !important;",$="paraColor !important;",V="border-top",G="border-left",q="border-bottom",K="border-right",J="background-color",X="color",Z="first-child",Q="last-child",tt="nth-child",et=tt+"(odd)",it=tt+"(even)",nt="1px solid "+L,rt="0px solid "+L,st="1px solid "+F,ot="1px solid "+U,at="1px solid "+z,lt="0px solid "+U,ct="2px solid "+U,ut="2px solid "+z,ht="0px solid "+z,dt="1px solid "+B,pt="3px solid "+U,ft="3px double "+U,mt=[i+">td { "+V+"\t:\t"+nt+"\t}\n"+i+">td { "+G+":\t"+nt+"\t}\n"+i+">td { "+q+":\t"+nt+"\t}\n"+i+">td { "+K+":\t"+nt+"\t}\n",n+":"+Z+" td { "+V+"\t:\t"+rt+"\t}\n"+n+">td:"+Z+" { "+G+"\t:\t"+rt+"\t}\n"+n+":"+Q+">td\t{ "+q+"\t:\t"+rt+"\t}\n"+n+">td:"+Q+"\t{ "+K+"\t:\t"+rt+"\t}\n"+n+":not(:"+Q+")>td { "+q+"\t:\t"+rt+"\t}\n"+n+">td {"+J+" : "+z+"}\n"+n+">td:not(:"+Q+") { "+K+":\t"+rt+"\t}\n",r+":"+Q+">td\t{ "+q+"\t:\t"+st+"\t}\n"+r+":"+Z+">td { "+V+"\t:\t"+st+"\t}\n"+r+">td {"+J+" : "+z+"}\n"+r+":"+Z+">td { "+q+":\t"+st+"\t}\n",s+":"+Z+">td{ "+X+":"+$+"}\n"+s+">td {"+J+" : "+z+"}\n"+s+">td { "+V+"\t:\t"+ot+"\t}\n"+s+">td { "+G+":\t"+ot+"\t}\n"+s+">td { "+q+":\t"+ot+"\t}\n"+s+">td { "+K+":\t"+ot+"\t}\n"+s+":"+Z+" td { "+J+" : "+U+" }\n",o+":"+Z+">td{ "+X+":"+$+"}\n"+o+":"+Z+">td { "+V+"\t:\t"+at+"\t}\n"+o+">td:"+Z+" { "+G+"\t:\t"+at+"\t}\n"+o+">td:"+Q+"\t{ "+K+"\t:\t"+at+"\t}\n"+o+":"+Q+">td\t{ "+q+"\t:\t"+at+"\t}\n"+o+":not(:"+Q+")>td { "+q+"\t:\t"+at+"\t}\n"+o+">td:not(:"+Q+") { "+K+":\t"+at+"\t}\n"+o+">td {"+J+" : "+W+"}\n"+o+":"+Z+">td { "+V+"\t:\t"+lt+"\t}\n"+o+":"+Z+">td { "+G+":\t"+at+"\t}\n"+o+":"+Z+">td { "+K+":\t"+at+"\t}\n"+o+":"+Z+">td { "+J+" : "+U+" }\n"+o+">td:"+Z+" { "+G+": "+at+"}\n"+o+">td:"+Q+" { "+K+": "+at+"}\n",a+">td {"+J+" : "+z+"}\n"+a+">td { "+V+"\t:\t"+ot+"\t}\n"+a+">td { "+G+":\t"+ot+"\t}\n"+a+">td { "+q+":\t"+ot+"\t}\n"+a+">td { "+K+":\t"+ot+"\t}\n"+a+":"+et+">td {"+J+" : "+j+" }\n",l+":"+Z+">td { "+V+"\t:\t"+at+"\t}\n"+l+">td:"+Z+" { "+G+"\t:\t"+at+"\t}\n"+l+">td:"+Q+"\t{ "+K+"\t:\t"+at+"\t}\n"+l+":"+Q+">td\t{ "+q+"\t:\t"+at+"\t}\n"+l+":not(:"+Q+")>td { "+q+"\t:\t"+at+"\t}\n"+l+">td:not(:"+Q+") { "+K+":\t"+at+"\t}\n"+l+":"+et+">td {"+J+" : "+B+" }\n"+l+":"+it+">td {"+J+" : "+j+" }\n",c+">td {"+J+" : "+z+"}\n"+c+":"+Q+">td\t{ "+q+"\t:\t"+ot+"\t}\n"+c+":"+Z+">td { "+q+":\t"+ot+"\t}\n"+c+":"+Z+">td { "+V+"\t:\t"+ot+"\t}\n"+c+":"+Z+">td { "+J+" : "+B+" }\n"+c+":"+it+">td {"+J+" : "+j+" }\n",u+":"+Z+">td{ "+X+":"+$+"}\n"+u+":not(:"+Q+")>td { "+q+"\t:\t"+at+"\t}\n"+u+">td:not(:"+Q+") { "+K+":\t"+at+"\t}\n"+u+">td {"+J+" : "+j+"}\n"+u+":"+Z+">td { "+J+" : "+U+" }\n"+u+":"+it+">td {"+J+" : "+B+" }\n",h+">td {"+J+" : "+z+"}\n"+h+">td { "+V+"\t:\t"+ot+"\t}\n"+h+">td { "+G+":\t"+ot+"\t}\n"+h+">td { "+q+":\t"+ot+"\t}\n"+h+">td { "+K+":\t"+ot+"\t}\n"+h+":"+Z+">td { "+q+":\t"+ct+"\t}\n"+h+":"+it+">td {"+J+" : "+j+" }\n",d+":"+Z+">td{ "+X+":"+$+"}\n"+d+">td {"+J+" : "+z+"}\n"+d+">td { "+V+"\t:\t"+ot+"\t}\n"+d+">td { "+G+":\t"+ot+"\t}\n"+d+">td { "+q+":\t"+ot+"\t}\n"+d+">td { "+K+":\t"+ot+"\t}\n"+d+":"+Z+">td { "+J+" : "+U+" }\n"+d+":"+it+">td {"+J+" : "+j+" }\n",p+":"+Z+">td{ "+X+":"+$+"}\n"+p+">td {"+J+" : "+z+"}\n"+p+":"+Z+">td { "+V+"\t:\t"+ot+"\t}\n"+p+">td:"+Z+" { "+G+"\t:\t"+ot+"\t}\n"+p+":"+Q+">td\t{ "+q+"\t:\t"+ot+"\t}\n"+p+">td:"+Q+"\t{ "+K+"\t:\t"+ot+"\t}\n"+p+":not(:"+Q+")>td { "+q+"\t:\t"+ot+"\t}\n"+p+":"+Z+">td { "+J+" : "+U+" }\n"+p+":"+Z+">td>div.zw-cell-container>div.zw-paragraph>div.zw-line-div>div.zw-line-content>span.zw-portion{ "+X+":"+z+"}\n"+p+":"+it+">td {"+J+" : "+j+" }\n",f+":"+Z+">td{ "+X+":"+$+"}\n"+f+">td { "+V+"\t:\t"+ot+"\t}\n"+f+">td { "+G+":\t"+ot+"\t}\n"+f+">td { "+q+":\t"+ot+"\t}\n"+f+">td { "+K+":\t"+ot+"\t}\n"+f+":"+Z+">td { "+J+" : "+U+" }\n"+f+">td {"+J+" : "+B+"}\n"+f+":"+it+">td {"+J+" : "+j+" }\n",m+":"+Z+">td{ "+X+":"+$+"}\n"+m+">td:"+Z+" { "+X+":"+$+"}\n"+m+":"+Z+">td { "+V+"\t:\t"+at+"\t}\n"+m+">td:"+Z+" { "+G+"\t:\t"+at+"\t}\n"+m+">td:"+Q+"\t{ "+K+"\t:\t"+at+"\t}\n"+m+":"+Q+">td\t{ "+q+"\t:\t"+at+"\t}\n"+m+":not(:"+Q+")>td { "+q+"\t:\t"+at+"\t}\n"+m+">td:not(:"+Q+") { "+K+":\t"+at+"\t}\n"+m+">td {"+J+" : "+W+"}\n"+m+":"+Z+">td { "+V+"\t:\t"+lt+"\t}\n"+m+":"+Z+">td { "+G+":\t"+lt+"\t}\n"+m+":"+Z+">td { "+K+":\t"+lt+"\t}\n"+m+":"+Z+">td { "+J+" : "+U+" }\n"+m+">td:"+Z+" { "+J+" : "+U+"}\n"+m+">td:"+Z+" { "+G+": "+lt+"}\n"+m+">td:"+Q+" { "+K+": "+lt+"}\n",g+":not(:"+Q+")>td { "+q+"\t:\t"+at+"\t}\n"+g+">td {"+J+" : "+U+"}\n"+g+":"+Z+">td { "+q+":\t"+ut+"\t}\n"+g+":"+Z+">td { "+J+" : "+U+" }\n"+g+">td:"+Z+" { "+K+"\t:\t"+at+"\t}\n"+g+":"+Z+">td { "+K+":\t"+ht+"\t}\n"+g+":"+it+">td{"+X+":"+$+"}\n"+g+":"+et+">td{"+X+":"+$+"}\n",v+">td:"+Z+" { "+X+" : "+$+"}\n"+v+":"+Z+">td { "+X+" : "+$+" }\n"+v+":"+Z+">td { "+V+"\t:\t"+at+"\t}\n"+v+">td:"+Z+" { "+G+"\t:\t"+at+"\t}\n"+v+">td:"+Q+"\t{ "+K+"\t:\t"+at+"\t}\n"+v+":"+Q+">td\t{ "+q+"\t:\t"+at+"\t}\n"+v+":not(:"+Q+")>td { "+q+"\t:\t"+at+"\t}\n"+v+">td:not(:"+Q+") { "+K+":\t"+at+"\t}\n"+v+":"+Z+">td { "+K+":\t"+lt+"\t}\n"+v+":"+Z+">td { "+G+":\t"+lt+"\t}\n"+v+":"+Z+">td { "+V+"\t:\t"+lt+"\t}\n"+v+">td:"+Z+" { "+G+"\t:\t"+lt+"\t}\n"+v+">td:"+Q+" { "+K+"\t:\t"+lt+"\t}\n"+v+":"+it+">td {"+J+" : "+W+" }\n"+v+":"+et+">td {"+J+" : "+j+" }\n"+v+":"+Z+">td { "+J+" : "+U+" }\n"+v+">td:"+Z+" { "+J+" : "+U+"}\n",M+":"+Z+">td { "+V+"\t:\t"+at+"\t}\n"+M+">td:"+Z+" { "+G+"\t:\t"+at+"\t}\n"+M+">td:"+Q+"\t{ "+K+"\t:\t"+at+"\t}\n"+M+":"+Q+">td\t{ "+q+"\t:\t"+at+"\t}\n"+M+">td {"+J+" : "+j+"}\n"+M+":not(:"+Q+")>td { "+q+"\t:\t"+at+"\t}\n"+M+">td:not(:"+Q+") { "+K+":\t"+at+"\t}\n"+M+">td:"+et+" {"+J+" : "+B+" }\n"+M+":"+et+">td {"+J+" : "+B+" }\n",b+">td {"+J+" : "+z+"}\n"+b+">td { "+V+"\t:\t"+ot+"\t}\n"+b+">td { "+G+":\t"+ot+"\t}\n"+b+">td { "+q+":\t"+ot+"\t}\n"+b+">td { "+K+":\t"+ot+"\t}\n"+b+">td:"+et+" {"+J+" : "+W+" }\n",Y+":not(:"+Q+")>td { "+q+"\t:\t"+at+"\t}\n"+Y+">td:not(:"+Q+") { "+K+":\t"+at+"\t}\n"+Y+">td {"+J+" : "+j+"}\n"+Y+">td:"+et+" {"+J+" : "+B+" }\n",y+":"+Z+">td{ "+X+":"+$+"}\n"+y+">td {"+J+" : "+z+"}\n"+y+">td { "+V+"\t:\t"+ot+"\t}\n"+y+">td { "+G+":\t"+ot+"\t}\n"+y+">td { "+q+":\t"+ot+"\t}\n"+y+">td { "+K+":\t"+ot+"\t}\n"+y+">td:"+et+" {"+J+" : "+j+" }\n"+y+":"+Z+">td { "+J+" : "+U+" }\n",_+":"+Z+">td{ "+X+":"+$+"}\n"+_+":not(:"+Q+")>td { "+q+"\t:\t"+at+"\t}\n"+_+">td:not(:"+Q+") { "+K+":\t"+at+"\t}\n"+_+">td {"+J+" : "+B+"}\n"+_+">td:"+it+" {"+J+" : "+j+" }\n"+_+":"+Z+">td { "+J+" : "+U+" }\n",D+":"+Z+">td{ "+X+":"+$+"}\n"+D+">td:"+Z+" { "+X+":"+$+"}\n"+D+":"+Z+">td { "+V+"\t:\t"+at+"\t}\n"+D+">td:"+Z+" { "+G+"\t:\t"+at+"\t}\n"+D+">td:"+Q+"\t{ "+K+"\t:\t"+at+"\t}\n"+D+":"+Q+">td\t{ "+q+"\t:\t"+at+"\t}\n"+D+":not(:"+Q+")>td { "+q+"\t:\t"+at+"\t}\n"+D+">td:not(:"+Q+") { "+K+":\t"+at+"\t}\n"+D+":"+Z+">td { "+K+":\t"+at+"\t}\n"+D+":"+Z+">td { "+G+":\t"+at+"\t}\n"+D+":"+Z+">td { "+V+"\t:\t"+lt+"\t}\n"+D+">td:"+et+" {"+J+" : "+j+" }\n"+D+">td:"+it+" {"+J+" : "+B+" }\n"+D+":"+Z+">td { "+J+" : "+U+" }\n"+D+">td:"+Z+" { "+J+": "+U+"}\n"+D+">td:"+Q+" { "+K+": "+lt+"}\n",T+":"+Z+">td { "+V+"\t:\t"+at+"\t}\n"+T+">td:"+Z+" { "+G+"\t:\t"+at+"\t}\n"+T+">td:"+Q+"\t{ "+K+"\t:\t"+at+"\t}\n"+T+":"+Q+">td\t{ "+q+"\t:\t"+at+"\t}\n"+T+":not(:"+Q+")>td { "+q+"\t:\t"+at+"\t}\n"+T+">td:not(:"+Q+") { "+K+":\t"+at+"\t}\n"+T+">td {"+J+" : "+U+"}\n"+T+":"+Z+">td { "+V+"\t:\t"+lt+"\t}\n"+T+":"+Z+">td { "+G+":\t"+at+"\t}\n"+T+":"+Z+">td { "+K+":\t"+at+"\t}\n"+T+">td:"+Z+" { "+G+": "+at+"}\n"+T+">td:"+Q+" { "+K+": "+at+"}\n"+T+":"+it+">td{"+X+":"+$+"}\n"+T+":"+et+">td{"+X+":"+$+"}\n",w+":"+Z+">td { "+X+":"+$+"}\n"+w+">td:"+Q+" {"+X+":"+$+"}\n"+w+":"+Z+" td { "+V+"\t:\t"+at+"\t}\n"+w+":"+Z+">td { "+V+"\t:\t"+at+"\t}\n"+w+">td:"+Z+" { "+G+"\t:\t"+at+"\t}\n"+w+">td:"+Q+"\t{ "+K+"\t:\t"+at+"\t}\n"+w+":"+Q+">td\t{ "+q+"\t:\t"+at+"\t}\n"+w+":not(:"+Q+")>td { "+q+"\t:\t"+at+"\t}\n"+w+">td:not(:"+Q+") { "+K+":\t"+at+"\t}\n"+w+">td {"+J+" : "+W+"}\n"+w+":"+it+">td {"+J+" : "+B+" }\n"+w+":"+Z+">td { "+V+"\t:\t"+lt+"\t}\n"+w+":"+Z+">td { "+G+":\t"+lt+"\t}\n"+w+":"+Z+">td { "+K+":\t"+lt+"\t}\n"+w+":"+Z+">td { "+J+" : "+U+" }\n"+w+">td:"+Q+" { "+J+" : "+U+"}\n"+w+">td:"+Z+" { "+G+": "+lt+"}\n"+w+">td:"+Q+" { "+K+": "+lt+"}\n",x+":"+Q+">td { "+X+":"+$+" }\n"+E+">td:"+Q+" { "+X+":"+$+"}\n"+E+":"+Z+">td { "+V+"\t:\t"+at+"\t}\n"+E+">td:"+Z+" { "+G+"\t:\t"+at+"\t}\n"+E+">td:"+Q+"\t{ "+K+"\t:\t"+at+"\t}\n"+E+":"+Q+">td\t{ "+q+"\t:\t"+at+"\t}\n"+E+":not(:"+Q+")>td { "+q+"\t:\t"+at+"\t}\n"+E+">td:not(:"+Q+") { "+K+":\t"+at+"\t}\n"+E+">td {"+J+" : "+W+"}\n"+E+":"+et+">td {"+J+" : "+B+" }\n"+x+":"+Q+">td { "+q+"\t:\t"+lt+"\t}\n"+x+":"+Q+">td { "+G+"\t:\t"+lt+"\t}\n"+x+":"+Q+">td { "+K+"\t:\t"+lt+"\t}\n"+x+":"+Q+">td { "+J+" :"+U+" }\n"+E+">td:"+Q+" { "+J+" : "+U+"}\n"+E+">td:"+Z+" { "+G+": "+lt+"}\n"+E+">td:"+Q+" { "+K+": "+lt+"}\n",A+">td {"+J+" : "+z+"}\n"+A+">td { "+V+"\t:\t"+dt+"\t}\n"+A+">td { "+G+":\t"+dt+"\t}\n"+A+">td { "+q+":\t"+dt+"\t}\n"+A+">td { "+K+":\t"+dt+"\t}\n"+A+":"+Z+">td { "+q+":\t"+pt+"\t}\n"+S+":"+Q+">td { "+V+"\t:\t"+ft+"\t}\n"+A+":"+it+">td {"+J+" :"+j+" }\n",C+":"+Z+">td{ "+X+":"+$+"}\n"+C+">td {"+J+" : "+z+"}\n"+C+">td { "+V+"\t:\t"+ot+"\t}\n"+C+">td { "+G+":\t"+ot+"\t}\n"+C+">td { "+q+":\t"+ot+"\t}\n"+C+">td { "+K+":\t"+ot+"\t}\n"+C+":"+Z+">td { "+J+" : "+U+" }\n"+k+":"+Q+">td { "+V+"\t:\t"+ft+"\t}\n",H+":"+Z+">td{ "+X+":"+$+"}\n"+O+":"+Q+">td { "+X+":"+$+"}\n"+H+">td:"+Q+"{ "+X+":"+$+"}\n"+H+":"+Z+">td { "+V+"\t:\t"+at+"\t}\n"+H+">td:"+Z+" { "+G+"\t:\t"+at+"\t}\n"+H+">td:"+Q+"\t{ "+K+"\t:\t"+at+"\t}\n"+H+":"+Q+">td\t{ "+q+"\t:\t"+at+"\t}\n"+H+":not(:"+Q+")>td { "+q+"\t:\t"+at+"\t}\n"+H+">td:not(:"+Q+") { "+K+":\t"+at+"\t}\n"+H+":"+Z+">td { "+K+":\t"+lt+"\t}\n"+H+":"+Z+">td { "+G+":\t"+lt+"\t}\n"+H+":"+Z+">td { "+V+"\t:\t"+lt+"\t}\n"+O+":"+Q+">td { "+K+"\t:\t"+lt+"\t}\n"+O+":"+Q+">td { "+G+"\t:\t"+lt+"\t}\n"+O+":"+Q+">td { "+q+":\t"+lt+"\t}\n"+H+":"+it+">td {"+J+" : "+W+" }\n"+H+":"+et+">td {"+J+" : "+j+" }\n"+H+":"+Z+">td { "+J+" : "+U+" }\n"+O+":"+Q+">td { "+J+" : "+U+" }\n"+H+">td:"+Q+" { "+K+"\t:\t"+lt+"\t}\n"+H+">td:"+Q+" { "+G+"\t:\t"+lt+"\t}\n"+H+">td:"+Q+" { "+V+"\t:\t"+lt+"\t}\n"+H+">td:"+Q+" { "+J+" : "+U+"}\n"+H+">td:"+Z+" { "+G+": "+lt+"}\n",I+">td:"+Z+" {  "+X+":"+$+" }\n"+I+":"+Z+">td {  "+X+":"+$+"  }\n"+P+":"+Q+">td {  "+X+":"+$+" }\n"+I+":"+Z+">td { "+V+"\t:\t"+at+"\t}\n"+I+">td:"+Z+" { "+G+"\t:\t"+at+"\t}\n"+I+">td:"+Q+"\t{ "+K+"\t:\t"+at+"\t}\n"+I+":"+Q+">td\t{ "+q+"\t:\t"+at+"\t}\n"+I+":not(:"+Q+")>td { "+q+"\t:\t"+at+"\t}\n"+I+">td:not(:"+Q+") { "+K+":\t"+at+"\t}\n"+I+":"+it+">td {"+J+" : "+B+" }\n"+I+">td {"+J+" : "+W+"}\n"+I+":"+Z+">td { "+J+" : "+U+" }\n"+P+":"+Q+">td{ "+q+"\t:\t"+lt+"\t}\n"+P+":"+Q+">td { "+G+"\t:\t"+lt+"\t}\n"+P+":"+Q+">td { "+K+"\t:\t"+lt+"\t}\n"+P+":"+Q+">td { "+J+" : "+U+" }\n"+I+">td:"+Z+" { "+J+" : "+U+"}\n"+I+">td:"+Z+" { "+G+": "+lt+"}\n"+I+">td:"+Q+" { "+K+": "+lt+"}\n",N+":"+Z+">td{ "+X+":"+$+"}\n"+N+">td:"+Z+"{ "+X+":"+$+"}\n"+R+":"+Q+">td { "+X+":"+$+"}\n"+N+">td:"+Q+"{ "+X+":"+$+"}\n"+N+":"+Z+">td { "+V+"\t:\t"+at+"\t}\n"+N+">td:"+Z+" { "+G+"\t:\t"+at+"\t}\n"+N+">td:"+Q+"\t{ "+K+"\t:\t"+at+"\t}\n"+N+":"+Q+">td\t{ "+q+"\t:\t"+at+"\t}\n"+N+":not(:"+Q+")>td { "+q+"\t:\t"+at+"\t}\n"+N+">td:not(:"+Q+") { "+K+":\t"+at+"\t}\n"+N+":"+Z+">td { "+K+":\t"+lt+"\t}\n"+N+":"+Z+">td { "+G+":\t"+lt+"\t}\n"+N+":"+Z+">td { "+V+"\t:\t"+lt+"\t}\n"+R+":"+Q+">td { "+K+"\t:\t"+lt+"\t}\n"+R+":"+Q+">td { "+G+"\t:\t"+lt+"\t}\n"+R+":"+Q+">td { "+q+":\t"+lt+"\t}\n"+N+":"+it+">td {"+J+" : "+B+" }\n"+N+":"+et+">td {"+J+" : "+j+" }\n"+N+":"+Z+">td { "+J+" : "+U+" }\n"+R+":"+Q+">td { "+J+" : "+U+" }\n"+N+">td:"+Q+" { "+K+"\t:\t"+lt+"\t}\n"+N+">td:"+Q+" { "+G+"\t:\t"+lt+"\t}\n"+N+">td:"+Q+" { "+V+"\t:\t"+lt+"\t}\n"+N+">td:"+Q+" { "+J+" : "+U+"}\n"+N+">td:"+Z+" { "+J+" :"+U+"}\n"+N+">td:"+Z+" { "+G+": "+lt+"}\n"];return mt}(),ZWConsole;!function(t){"use strict";var e=console,i=function(){this.debug=0};i.prototype.enable=function(t){this.debug=t||1},i.prototype.disable=function(){this.debug=0},i.prototype.error=function(){this.debug>=0&&e.error.apply(e,arguments)},i.prototype.info=function(){this.debug>1&&e.info.apply(e,arguments)},i.prototype.log=function(){this.debug>0&&e.log.apply(e,arguments)},i.prototype.time=function(){this.debug>2&&e.time.apply(e,arguments)},i.prototype.timeEnd=function(){this.debug>2&&e.timeEnd.apply(e,arguments)},i.prototype.trace=function(){this.debug>2&&e.trace.apply(e,arguments)},i.prototype.warn=function(){this.debug>1&&e.warn.apply(e,arguments)},i.prototype.group=function(){this.debug>0&&e.group.apply(e,arguments)},i.prototype.groupEnd=function(){this.debug>0&&e.groupEnd.apply(e,arguments)},i.prototype.table=function(){this.debug>1&&e.table.apply(e,arguments)},ZWConsole=i}();var ZWLogger=function(){var t="",e=[],i=function(e,i,r){if(!(isHeadlessPDF||isHeadlessHTML||r&&t==r||s(r))){"COMPOSE_MIS_MATCH"!==r&&(t=r);var o=n(e,i,r);J.ajax({type:"POST",global:!1,url:ZWNetworkUtils.getUtilUrl(),async:!0,data:o,dataType:"json",beforeSend:function(t){ZWNetworkUtils.setCsrfTokenInHeader(t)},error:function(){},success:function(t){ZWLogger.updateStoppedErrorCodes(t),e&&e.indexOf("FORMAT_MISSING")!=-1&&location.reload()}})}},n=function(t,e,i){var n={},r={},s={parentIsTable:!1,parentIsComment:!1,parentIsLink:!1,activeSection:""},o={},a={},l="",c=editor.doc.getSelection(),u=c&&c.getStart();try{l=DocLocaleHandler.getLanguage()||"-",s.parentIsTable=!(!u||!editor.doc.getParents(NODE_TYPE.TABLE,u)),s.parentIsComment=!(!u||!editor.doc.getParents(NODE_TYPE.COMMENT,u)),s.parentIsLink=!(!u||!editor.doc.getParents(NODE_TYPE.LINK,u)),s.activeSection=editor.clientActiveSection?editor.clientActiveSection.className:"";var h=editor.doc.getTrackChangeDetails();o.isEnabled=h.isEnabled()+"",o.displayMode=TcUtil.getDisplayMode(),a.isOfflineSetupDone=ZWOffline.isOfflineSetupDone(),a.isOfflineOperationsAllowed=ZWOffline.isOfflineOperationsAllowed(),a.isCurrentSessionOffline=editor.isOffline()}catch(t){}var d=ZWLogger.shrinkOperationSequence(ZWCollaboration.operationSequence);return r.cursorDetails=s,r.tcDetails=o,r.language=l,r.offlineDetails=a,r.operationSequence=d.slice(d.length-50),U.extend(r,e),n.addinfo=JSON.stringify(r),n.content=t,i&&(n.errorcode=i),n=Macros.getRsidOnly(n),n=Macros.includeParamsForStats(n)},r=function(t){if(t&&t.constructor===Object)for(var i in t)e[i]=t[i],e[i].stop="true"===e[i].stop},s=function(t){return e[t]&&e[t].stop||!1},o=function(t,e){var i=editor.doc.docInfo;25==i.REVISION&&1!=i.VERSION&&(ZWCollaboration.clientInfo="",ZWCollaboration.mailInfo="");var n="\n"+(new Date).toLocaleString()+"->"+t+"| DocId ="+Utils.getDocumentId()+" Doc Len ="+editor.doc.getDocumentLength()+"|CUR:"+i.VERSION+"."+i.REVISION,r=editor.doc.getSelection();r&&(n+="|Selection: "+r.toIntervals().join("|")),ZWCollaboration.clientInfo+=n,e&&(ZWCollaboration.mailInfo+="\n"+(new Date).toLocaleString()+"->"+e)},a=function(t){U.each(Op.cursor,function(e,i,n){t+=(0===i?"[":",")+"("+e.start+","+e.end+")"+(i===n.length-1?"]":"")}),ZWCollaboration.operationSequence.push(t)},l=function(t){for(var e=[],i=null,n=0,r=0;r<t.length;r++){i=t[r],++n;var s=t[r+1];i!=s&&(n>1&&(i=i+"("+n+")"),e.push(i),n=0)}return e},c=function(){var t=window.screen.availHeight,e=window.screen.availWidth;if(1920==e&&1080==t){var i="Unknown OS";navigator.appVersion.indexOf("Win")!=-1?i="Windows":navigator.appVersion.indexOf("Mac")!=-1?i="MacOS":navigator.appVersion.indexOf("X11")!=-1?i="UNIX":navigator.appVersion.indexOf("Linux")!=-1&&(i="Linux"),ZWLogger.addToStatistics("Res_"+i+"_"+e+"x"+t)}},u=function(t){return editor.statistics?(editor.statistics[t]||(editor.statistics[t]=0),void(editor.statistics[t]+=1)):void(editor.statistics={})},h=function(){var t=editor.doc.docInfo;editor.statistics.charLen=editor.doc.getDocumentLength(),editor.statistics.isShared=t.ISSHARED?1:0,editor.statistics.isCommentInDocument=CommentAdapter.docHasComments()?1:0,editor.statistics.isPublished=t.PUBLISH_SCOPE?1:0,editor.statistics.share_any_one=t.ISSHARED&&!t.PUBLISH_SCOPE?1:0;var e=editor.browserInfo.platform||"UnknownPlatform";ZWLogger.addToStatistics(e);var i=editor.browserInfo.browserName||"UnknownBrowser";ZWLogger.addToStatistics(i)};return{sendErrorDetails:i,log:o,recordAction:a,shrinkOperationSequence:l,addScrRes:c,addToStatistics:u,generateReports:h,updateStoppedErrorCodes:r,isErrorCodeStopped:s,getErrorParams:n}}(),PlatformDefinition=function(){"use strict";function t(t){this.browserInfo=t}return t.prototype.isSafariBrowser=function(){var t=!1,e=navigator.userAgent;return e.indexOf("Flock")!=-1||e.indexOf("SeaMonkey")!=-1||e.indexOf("Opera")!=-1||e.indexOf("OPR/")!=-1||e.indexOf("Edge")!=-1||e.indexOf("CriOS")!=-1||e.indexOf("Chrome")!=-1?t=!1:e.indexOf("Safari")!=-1?t=!0:e.indexOf("Firefox")!=-1&&(t=!1),t},t.prototype.isSupportedPlatform=function(){return!(isHeadlessHTML||isHeadlessPDF||!window.indexedDB||navigator.userAgent.indexOf("MSIE")>=0||navigator.userAgent.indexOf("Trident/")>=0||navigator.userAgent.indexOf("Edge/")>=0||isV8Engine||this.isSafariBrowser())},t}(),ZWEnvironment=function(){"use strict";function t(t,e){return this.platform=new PlatformDefinition(e.browserInfo),this.isFromCache=t.isLoadedFromCache,this.buildLabel=t.buildLabel,this.type=t.type,this.currentRID=t.rid,this.usingV8Engine=t.usingV8Engine||!1,this.baseURL=e.urls.base_url,this}return t.prototype.isLoadedFromCache=function(){return this.isFromCache},t.prototype.getBuildLabel=function(){return this.buildLabel},t.prototype.getPlatform=function(){return this.platform},t.prototype.getCurrentRID=function(){return this.currentRID},t.prototype.isV8Engine=function(){return this.usingV8Engine},t.prototype.getBaseURL=function(){return this.baseURL},t.prototype.loadResource=function(){},t.prototype.getUrl=function(){},t}();!function(t){"use strict";t.prototype.loadUrl=function(t,e){e?location.href=t:Utils.safeWindowOpen(t,{},"_blank")},t.prototype.getUrl=function(){return location.href},t.prototype.loadDocument=function(t,e){this.loadUrl((self.location.origin+"/writer/open/").concat(t),e)},t.prototype.loadDashboard=function(t){this.loadUrl(self.location.origin+"/writer/documents",t)}}(ZWEnvironment),PubSub=function(){"use strict";var t=function(t,e,i){var s,o,a,l,c=i&&i.async||!1,u=i&&i.context||null,h=i&&i.once||!1,d=i&&i.timeout||0,p=!1;for(s=c?r[t]||(r[t]=[]):n[t]||(n[t]=[]),a=0,l=s.length;a<l;a++)o=s[a],e===o.callback&&u===o.context&&(p=!0);p||s.push({async:c,callback:e,context:u,name:t,once:h,timeout:d})},e=function(t,e,i){var s=i&&i.async||!1,o=i&&i.context||null,a=void 0;if(a=s?r[t]:n[t],a&&(e||o)){s?r[t]=[]:n[t]=[];for(var l,c=0;c<a.length;c++)l=a[c],e&&e!==l.callback||o&&o!==l.context?s?r[t].push(l):n[t].push(l):s&&clearTimeout(l.timer)}},i=function(t){var e=Array.prototype.slice.call(arguments,1);t.timer=setTimeout(function(){t.callback.apply(t.context,e)},t.timeout)},n={},r={},s=function(e,i,n){Array.isArray(e)&&!Array.prototype.forEach.call(e,function(e){t(e,i,n)})||t(e,i,n)},o=function(){var t=Array.prototype.slice.call(arguments),e=t[2]||{};e.once=!0,t[2]=e,s.apply(null,t)},a=function(t,i,n){Array.isArray(t)&&!Array.prototype.forEach.call(t,function(t){e(t,i,n)})||e(t,i,n)},l=function(){var t,i=Array.prototype.concat.call(r,n);for(t in i)e(t)},c=function(t){var e,s,o=Array.prototype.slice.call(arguments,1);if(s=r[t])for(e=0;e<s.length;e++)clearTimeout(s[e].timer);if(s=n[t])for(e=0;e<s.length;e++)s[e].callback&&s[e].callback.apply(s[e].context,o),s[e].once&&s.splice(e--,1);if(s=r[t])for(e=0;e<s.length;e++)i.apply(null,Array.prototype.concat.call(s[e],o))};return{allEvents:n,allAsyncEvents:r,subscribe:s,subscribeOnce:o,unsubscribe:a,unsubscribeAll:l,publish:c}}();var ActivityTracker=function(){var t,e,i,n=3,r=10,s=10,o=function(n,r,s){t=n,e=r,i=s},a=function(){if(docProps.info.SERVICE)switch(docProps.info.SERVICE){case"TeamDrive":return"Workdrive";case"ZohoCRM":return"CRM";case"ZohoWiki":return"Wiki";case"ZohoForms":return"Forms"}return"Writer"},l=function(t,e,i){this.module=t,this.action=e,this.from=i};l.prototype.getDataJSON=function(){return{module:this.module,action:this.action,from:this.from,editor_type:Macros.review.getAccessType(),service_name:a()}};var c=function(t){var n=new Deferred,r=t.map(function(t){return t.getDataJSON()}),s=Macros.getBatchActivityUrl(),o={};return i(o),e({type:"POST",url:s,data:{activities:JSON.stringify(r)},headers:o,error:function(t){n.reject()},success:function(){n.resolve()}}),n.promise()},u=function(){var t=[],e=!1,i=function(e){t.push(e)},n=function(){var e;return e=t.length>=r?r:t.length,t.splice(0,e)},o=function(){return t.length},a=function(){if(!e){e=!0;var t=function(){if(o()){var i=n();c(i).done(t).fail(function(){e=!1})}else e=!1};setTimeout(function(){t()},1e3*s)}};return{add:i,process:a}}(),h=function(t,e,i){if(!t||!e||!i)throw"Error: You need to pass MODULE_NAME & ACTION & FROM to track any activity";var n=new l(t,e,i);u.add(n),u.process()},d=0,p=function(t,i){e({type:"POST",url:t,data:i,error:function(e){d++,d<=n&&f(t,i)},success:function(){}})},f=function(t,e){p(t,e)},m=function(t,e,i){var n={},r=Macros.getInternalActivityUrl();n.module=t,n.action=e,n.from=i,n.editor_type=Macros.review.getAccessType(),n.service_name=a(),p(r,n)},g=function(t,n,r){var s={},o=Macros.getIntergationActivityUrl();s.extension=n,s.uniqueid=t,s.action=r;var a={};i(a),e({type:"POST",url:o,data:s,headers:a,error:function(t){},success:function(){}})},v=function(t,n,r){var s={},o=Macros.getChartActivityUrl();s.chart_type=t,s.chart_series=n,s.chart_aggreagate=r,s.editor_type=Macros.review.getAccessType(),s.service_name=a();var l={};i(l),e({type:"POST",url:o,data:s,headers:l,error:function(t){},success:function(){}})};return{initialize:o,trackInAnalytics:h,track:h,trackWriterStats:m,trackWriterIntegStats:g,trackChartStats:v}}(),UIActivityTracker=function(t){var e={};e["panel-container"]="LeftPanel",e["topband-wrapper"]="TopBand",e["review-tb"]="ReviewTopBand",e["popup-menu-container"]="Popup",e["zalertbanner_*"]="Banner",e.review_Rightpane="ReviewPanel",e.Rmenu="RightClick",e.bottombar="BottomBar",e.smartToolbar="SmartToolBar";var i=function(t){return e[t]},n=function(e){if(e&&i(e.parentId)&&e.actionInfo&&e.actionInfo.track_activity){var n=e.eleInfo,r=e.action,s=e.actionInfo;if(n&&"ztoggleswitch"===J(n).attr("ctype")&&s.activity_data){var o=J(n)[0].checked;s.activity_data.on&&s.activity_data.off&&(r=o?s.activity_data.on:s.activity_data.off)}t.trackInAnalytics(s.module,r,i(e.parentId))}},r=function(e){if(e&&ActionJSON.getActionInfo(e)){var i=ActionJSON.getActionInfo(e);if("ToggleTc"===e||"ToggleTcToAll"===e){var n=editor.doc.getTrackChangeDetails().isEnabled();i.activity_data&&i.activity_data.on&&i.activity_data.off&&(e=n?i.activity_data.on:i.activity_data.off)}t.trackInAnalytics(i.module,e,"Shortcut")}};PubSub.subscribe("Shortcut/ReportCapture",r),PubSub.subscribe("UIFrameWork/ActionDetails",n)}(ActivityTracker),BaseEventHandler=function(){"use strict";function t(t){var i=Array.prototype.slice.call(arguments,1);if(t&&this.eventCollection&&this.eventCollection[t])for(var n,r=this.eventCollection[t],s=0;s<r.length;s++)n=r[s],e(n,i)}function e(t,e){t.timeout?setTimeout(function(){t.callback.apply(t.context,e)},t.timeout):t.callback.apply(t.context,e)}function i(t,e,i,n){t&&e&&(this.eventCollection||(this.eventCollection={}),this.eventCollection[t]||(this.eventCollection[t]=[]),this.eventCollection[t].push({callback:e,timeout:n,context:i||null}))}function n(t,e,i){if(t&&this.eventCollection&&this.eventCollection[t])if(e)for(var n=this.eventCollection[t],r=0;r<n.length;)n[r].callback!=e||i&&i!=n[r].context?r++:n.splice(r,1);else this.eventCollection[t]=[]}function r(t,e){var i=Array.prototype.slice.call(arguments,1);t.trigger.apply(t,i)}function s(){if(this.eventCollection){var t;for(t in this.eventCollection)this.off(t);this.eventCollection={}}}return function(){return this.trigger=t,this.on=i,this.off=n,this.propagateVia=r,this.resetEventHandler=s,this}}(),ZWTimezone=function(){var t=[["Africa/Abidjan",0,0,0,0],["Africa/Accra",0,0,0,0],["Africa/Addis_Ababa",-180,-180,-180,0],["Africa/Algiers",-60,-60,-60,0],["Africa/Asmara",-180,-180,-180,0],["Africa/Asmera",-180,-180,-180,0],["Africa/Bamako",0,0,0,0],["Africa/Bangui",-60,-60,-60,0],["Africa/Banjul",0,0,0,0],["Africa/Bissau",0,0,0,0],["Africa/Blantyre",-120,-120,-120,0],["Africa/Brazzaville",-60,-60,-60,0],["Africa/Bujumbura",-120,-120,-120,0],["Africa/Cairo",-120,-120,-120,0],["Africa/Casablanca",0,0,0,0],["Africa/Ceuta",-60,-120,-120,1],["Africa/Conakry",0,0,0,0],["Africa/Dakar",0,0,0,0],["Africa/Dar_es_Salaam",-180,-180,-180,0],["Africa/Djibouti",-180,-180,-180,0],["Africa/Douala",-60,-60,-60,0],["Africa/El_Aaiun",0,-60,0,0],["Africa/Freetown",0,0,0,0],["Africa/Gaborone",-120,-120,-120,0],["Africa/Harare",-120,-120,-120,0],["Africa/Johannesburg",-120,-120,-120,0],["Africa/Juba",-120,-120,-120,0],["Africa/Kampala",-180,-180,-180,0],["Africa/Khartoum",-120,-120,-120,0],["Africa/Kigali",-120,-120,-120,0],["Africa/Kinshasa",-60,-60,-60,0],["Africa/Lagos",-60,-60,-60,0],["Africa/Libreville",-60,-60,-60,0],["Africa/Lome",0,0,0,0],["Africa/Luanda",-60,-60,-60,0],["Africa/Lubumbashi",-120,-120,-120,0],["Africa/Lusaka",-120,-120,-120,0],["Africa/Malabo",-60,-60,-60,0],["Africa/Maputo",-120,-120,-120,0],["Africa/Maseru",-120,-120,-120,0],["Africa/Mbabane",-120,-120,-120,0],["Africa/Mogadishu",-180,-180,-180,0],["Africa/Monrovia",0,0,0,0],["Africa/Nairobi",-180,-180,-180,0],["Africa/Ndjamena",-60,-60,-60,0],["Africa/Niamey",-60,-60,-60,0],["Africa/Nouakchott",0,0,0,0],["Africa/Ouagadougou",0,0,0,0],["Africa/Porto-Novo",-60,-60,-60,0],["Africa/Sao_Tome",0,0,0,0],["Africa/Timbuktu",0,0,0,0],["Africa/Tripoli",-120,-120,-120,0],["Africa/Tunis",-60,-60,-60,0],["Africa/Windhoek",-120,-120,-120,0],["America/Adak",600,540,540,1],["America/Anchorage",540,480,480,1],["America/Anguilla",240,240,240,0],["America/Antigua",240,240,240,0],["America/Araguaina",180,180,180,0],["America/Argentina/Buenos_Aires",180,180,180,0],["America/Argentina/Catamarca",180,180,180,0],["America/Argentina/ComodRivadavia",180,180,180,0],["America/Argentina/Cordoba",180,180,180,0],["America/Argentina/Jujuy",180,180,180,0],["America/Argentina/La_Rioja",180,180,180,0],["America/Argentina/Mendoza",180,180,180,0],["America/Argentina/Rio_Gallegos",180,180,180,0],["America/Argentina/Salta",180,180,180,0],["America/Argentina/San_Juan",180,180,180,0],["America/Argentina/San_Luis",180,180,180,0],["America/Argentina/Tucuman",180,180,180,0],["America/Argentina/Ushuaia",180,180,180,0],["America/Aruba",240,240,240,0],["America/Asuncion",240,180,240,1],["America/Atikokan",300,300,300,0],["America/Atka",600,540,540,0],["America/Bahia",180,180,180,0],["America/Bahia_Banderas",360,300,420,1],["America/Barbados",240,240,240,0],["America/Belem",180,180,180,0],["America/Belize",360,360,360,0],["America/Blanc-Sablon",240,240,240,0],["America/Boa_Vista",240,240,240,0],["America/Bogota",300,300,300,0],["America/Boise",420,360,360,1],["America/Buenos_Aires",180,180,180,0],["America/Cambridge_Bay",420,360,360,1],["America/Campo_Grande",240,240,240,0],["America/Cancun",300,300,300,0],["America/Caracas",240,240,240,0],["America/Catamarca",180,180,180,0],["America/Cayenne",180,180,180,0],["America/Cayman",300,300,300,0],["America/Chicago",360,300,300,1],["America/Chihuahua",420,360,360,1],["America/Coral_Harbour",300,300,300,0],["America/Cordoba",180,180,180,0],["America/Costa_Rica",360,360,360,0],["America/Creston",420,420,420,0],["America/Cuiaba",240,240,240,0],["America/Curacao",240,240,240,0],["America/Danmarkshavn",0,0,120,0],["America/Dawson",480,420,420,1],["America/Dawson_Creek",420,420,420,0],["America/Denver",420,360,360,1],["America/Detroit",300,240,240,1],["America/Dominica",240,240,240,0],["America/Edmonton",420,360,360,1],["America/Eirunepe",300,300,300,0],["America/El_Salvador",360,360,360,0],["America/Ensenada",480,420,420,0],["America/Fort_Nelson",420,420,420,0],["America/Fort_Wayne",300,240,300,0],["America/Fortaleza",180,180,180,0],["America/Glace_Bay",240,180,180,1],["America/Godthab",180,120,120,1],["America/Goose_Bay",240,180,180,1],["America/Grand_Turk",300,240,240,1],["America/Grenada",240,240,240,0],["America/Guadeloupe",240,240,240,0],["America/Guatemala",360,360,360,0],["America/Guayaquil",300,300,300,0],["America/Guyana",240,240,180,0],["America/Halifax",240,180,180,1],["America/Havana",300,240,240,1],["America/Hermosillo",420,420,420,0],["America/Indiana/Indianapolis",300,240,300,1],["America/Indiana/Knox",360,300,300,1],["America/Indiana/Marengo",300,240,300,1],["America/Indiana/Petersburg",300,240,300,1],["America/Indiana/Tell_City",360,300,300,1],["America/Indiana/Vevay",300,240,300,1],["America/Indiana/Vincennes",300,240,300,1],["America/Indiana/Winamac",300,240,300,1],["America/Indianapolis",300,240,300,0],["America/Inuvik",420,360,360,1],["America/Iqaluit",300,240,240,1],["America/Jamaica",300,300,300,0],["America/Jujuy",180,180,180,0],["America/Juneau",540,480,480,1],["America/Kentucky/Louisville",300,240,240,1],["America/Kentucky/Monticello",300,240,300,1],["America/Knox_IN",360,300,300,0],["America/Kralendijk",240,240,240,0],["America/La_Paz",240,240,240,0],["America/Lima",300,300,300,0],["America/Los_Angeles",480,420,420,1],["America/Louisville",300,240,240,0],["America/Lower_Princes",240,240,240,0],["America/Maceio",180,180,180,0],["America/Managua",360,360,360,0],["America/Manaus",240,240,240,0],["America/Marigot",240,240,240,0],["America/Martinique",240,240,240,0],["America/Matamoros",360,300,360,1],["America/Mazatlan",420,360,420,1],["America/Mendoza",180,180,180,0],["America/Menominee",360,300,300,1],["America/Merida",360,300,360,1],["America/Metlakatla",540,480,480,1],["America/Mexico_City",360,300,360,1],["America/Miquelon",180,120,120,1],["America/Moncton",240,180,180,1],["America/Monterrey",360,300,360,1],["America/Montevideo",180,180,180,0],["America/Montreal",300,240,240,0],["America/Montserrat",240,240,240,0],["America/Nassau",300,240,240,1],["America/New_York",300,240,240,1],["America/Nipigon",300,240,240,1],["America/Nome",540,480,480,1],["America/Noronha",120,120,120,0],["America/North_Dakota/Beulah",360,300,360,1],["America/North_Dakota/Center",360,300,360,1],["America/North_Dakota/New_Salem",360,300,360,1],["America/Nuuk",180,120,0,0],["America/Ojinaga",420,360,360,1],["America/Panama",300,300,300,0],["America/Pangnirtung",300,240,180,1],["America/Paramaribo",180,180,180,0],["America/Phoenix",420,420,420,0],["America/Port-au-Prince",300,240,300,1],["America/Port_of_Spain",240,240,240,0],["America/Porto_Acre",300,300,300,0],["America/Porto_Velho",240,240,240,0],["America/Puerto_Rico",240,240,240,0],["America/Punta_Arenas",180,180,180,0],["America/Rainy_River",360,300,300,1],["America/Rankin_Inlet",360,300,300,1],["America/Recife",180,180,180,0],["America/Regina",360,360,360,0],["America/Resolute",360,300,300,1],["America/Rio_Branco",300,300,300,0],["America/Rosario",180,180,180,0],["America/Santa_Isabel",480,420,420,0],["America/Santarem",180,180,240,0],["America/Santiago",240,180,180,0],["America/Santo_Domingo",240,240,240,0],["America/Sao_Paulo",180,180,180,0],["America/Scoresbysund",60,0,0,1],["America/Shiprock",420,360,360,0],["America/Sitka",540,480,480,1],["America/St_Barthelemy",240,240,240,0],["America/St_Johns",210,150,150,1],["America/St_Kitts",240,240,240,0],["America/St_Lucia",240,240,240,0],["America/St_Thomas",240,240,240,0],["America/St_Vincent",240,240,240,0],["America/Swift_Current",360,360,360,0],["America/Tegucigalpa",360,360,360,0],["America/Thule",240,180,240,1],["America/Thunder_Bay",300,240,240,1],["America/Tijuana",480,420,420,1],["America/Toronto",300,240,240,1],["America/Tortola",240,240,240,0],["America/Vancouver",480,420,420,1],["America/Virgin",240,240,240,0],["America/Whitehorse",480,420,420,1],["America/Winnipeg",360,300,300,1],["America/Yakutat",540,480,480,1],["America/Yellowknife",420,360,360,1],["Antarctica/Casey",-660,-660,-480,0],["Antarctica/Davis",-420,-420,-420,0],["Antarctica/DumontDUrville",-600,-600,-600,0],["Antarctica/Macquarie",-600,-660,-600,1],["Antarctica/Mawson",-300,-300,-360,0],["Antarctica/McMurdo",-720,-780,-780,1],["Antarctica/Palmer",180,180,180,0],["Antarctica/Rothera",180,180,180,0],["Antarctica/South_Pole",-720,-780,-780,1],["Antarctica/Syowa",-180,-180,-180,0],["Antarctica/Troll",0,-120,0,1],["Antarctica/Vostok",-360,-360,-360,0],["Arctic/Longyearbyen",-60,-120,-120,1],["Asia/Aden",-180,-180,-180,0],["Asia/Almaty",-360,-420,-420,0],["Asia/Amman",-120,-180,-180,1],["Asia/Anadyr",-720,-780,-780,0],["Asia/Aqtau",-300,-300,-360,0],["Asia/Aqtobe",-300,-360,-360,0],["Asia/Ashgabat",-300,-300,-360,0],["Asia/Ashkhabad",-300,-300,-360,0],["Asia/Atyrau",-300,-300,-360,0],["Asia/Baghdad",-180,-180,-240,0],["Asia/Bahrain",-180,-180,-180,0],["Asia/Baku",-240,-300,-300,0],["Asia/Bangkok",-420,-420,-420,0],["Asia/Barnaul",-420,-420,-480,0],["Asia/Beirut",-120,-180,-120,1],["Asia/Bishkek",-360,-360,-420,0],["Asia/Brunei",-480,-480,-480,0],["Asia/Calcutta",-330,-330,-330,0],["Asia/Chita",-540,-540,-600,0],["Asia/Choibalsan",-480,-480,-600,0],["Asia/Chongqing",-480,-480,-480,0],["Asia/Chungking",-480,-480,-480,0],["Asia/Colombo",-330,-330,-330,0],["Asia/Dacca",-360,-360,-360,0],["Asia/Damascus",-120,-180,-180,1],["Asia/Dhaka",-360,-360,-360,0],["Asia/Dili",-540,-540,-480,0],["Asia/Dubai",-240,-240,-240,0],["Asia/Dushanbe",-300,-300,-420,0],["Asia/Famagusta",-120,-180,-180,1],["Asia/Gaza",-120,-180,-120,1],["Asia/Harbin",-480,-480,-480,0],["Asia/Hebron",-120,-180,-120,1],["Asia/Ho_Chi_Minh",-420,-420,-420,0],["Asia/Hong_Kong",-480,-480,-480,0],["Asia/Hovd",-420,-420,-480,0],["Asia/Irkutsk",-480,-540,-540,0],["Asia/Istanbul",-180,-180,-180,0],["Asia/Jakarta",-420,-420,-420,0],["Asia/Jayapura",-540,-540,-540,0],["Asia/Jerusalem",-120,-180,-120,1],["Asia/Kabul",-270,-270,-270,0],["Asia/Kamchatka",-720,-780,-780,0],["Asia/Karachi",-300,-300,-300,0],["Asia/Kashgar",-360,-360,-360,0],["Asia/Kathmandu",-345,-345,-345,0],["Asia/Katmandu",-345,-345,-345,0],["Asia/Khandyga",-540,-540,-600,0],["Asia/Kolkata",-330,-330,-330,0],["Asia/Krasnoyarsk",-420,-480,-480,0],["Asia/Kuala_Lumpur",-480,-480,-480,0],["Asia/Kuching",-480,-480,-480,0],["Asia/Kuwait",-180,-180,-180,0],["Asia/Macao",-480,-480,-480,0],["Asia/Macau",-480,-480,-480,0],["Asia/Magadan",-660,-720,-720,0],["Asia/Makassar",-480,-480,-480,0],["Asia/Manila",-480,-480,-480,0],["Asia/Muscat",-240,-240,-240,0],["Asia/Nicosia",-120,-180,-180,1],["Asia/Novokuznetsk",-420,-420,-480,0],["Asia/Novosibirsk",-420,-420,-480,0],["Asia/Omsk",-360,-420,-420,0],["Asia/Oral",-300,-300,-360,0],["Asia/Phnom_Penh",-420,-420,-420,0],["Asia/Pontianak",-420,-420,-480,0],["Asia/Pyongyang",-540,-540,-540,0],["Asia/Qatar",-180,-180,-180,0],["Asia/Qostanay",-360,-360,-360,0],["Asia/Qyzylorda",-300,-300,-360,0],["Asia/Rangoon",-390,-390,-390,0],["Asia/Riyadh",-180,-180,-180,0],["Asia/Saigon",-420,-420,-420,0],["Asia/Sakhalin",-660,-660,-720,0],["Asia/Samarkand",-300,-300,-360,0],["Asia/Seoul",-540,-540,-540,0],["Asia/Shanghai",-480,-480,-480,0],["Asia/Singapore",-480,-480,-480,0],["Asia/Srednekolymsk",-660,-660,-720,0],["Asia/Taipei",-480,-480,-480,0],["Asia/Tashkent",-300,-300,-420,0],["Asia/Tbilisi",-240,-300,-300,0],["Asia/Tehran",-210,-270,-210,1],["Asia/Tel_Aviv",-120,-180,-120,0],["Asia/Thimbu",-360,-360,-330,0],["Asia/Thimphu",-360,-360,-330,0],["Asia/Tokyo",-540,-540,-540,0],["Asia/Tomsk",-420,-420,-480,0],["Asia/Ujung_Pandang",-480,-480,-480,0],["Asia/Ulaanbaatar",-480,-480,-540,0],["Asia/Ulan_Bator",-480,-480,-540,0],["Asia/Urumqi",-360,-360,-360,0],["Asia/Ust-Nera",-600,-600,-720,0],["Asia/Vientiane",-420,-420,-420,0],["Asia/Vladivostok",-600,-660,-660,0],["Asia/Yakutsk",-540,-600,-600,0],["Asia/Yangon",-390,-390,-390,0],["Asia/Yekaterinburg",-300,-360,-360,0],["Asia/Yerevan",-240,-300,-300,0],["Atlantic/Azores",60,0,0,1],["Atlantic/Bermuda",240,180,180,0],["Atlantic/Canary",0,-60,-60,1],["Atlantic/Cape_Verde",60,60,60,0],["Atlantic/Faeroe",0,-60,-60,0],["Atlantic/Faroe",0,-60,-60,1],["Atlantic/Jan_Mayen",-60,-120,-120,0],["Atlantic/Madeira",0,-60,-60,1],["Atlantic/Reykjavik",0,0,0,0],["Atlantic/South_Georgia",120,120,120,0],["Atlantic/St_Helena",0,0,0,0],["Atlantic/Stanley",180,180,180,0],["Australia/ACT",-600,-660,-660,1],["Australia/Adelaide",-570,-630,-570,1],["Australia/Brisbane",-600,-600,-600,0],["Australia/Broken_Hill",-570,-630,-570,1],["Australia/Canberra",-600,-660,-660,1],["Australia/Currie",-600,-660,-600,1],["Australia/Darwin",-570,-570,-570,0],["Australia/Eucla",-525,-525,-525,0],["Australia/Hobart",-600,-660,-600,1],["Australia/LHI",-630,-660,-660,1],["Australia/Lindeman",-600,-600,-600,0],["Australia/Lord_Howe",-630,-660,-630,1],["Australia/Melbourne",-600,-660,-600,1],["Australia/North",-570,-570,-570,0],["Australia/NSW",-600,-660,-660,1],["Australia/Perth",-480,-480,-480,0],["Australia/Queensland",-600,-600,-600,0],["Australia/South",-570,-630,-630,1],["Australia/Sydney",-600,-660,-600,1],["Australia/Tasmania",-600,-660,-660,1],["Australia/Victoria",-600,-660,-660,1],["Australia/West",-480,-480,-480,0],["Australia/Yancowinna",-570,-630,-630,1],["Brazil/Acre",300,300,300,0],["Brazil/DeNoronha",120,120,120,0],["Brazil/East",180,180,180,0],["Brazil/West",240,240,240,0],["Canada/Atlantic",240,180,180,0],["Canada/Central",360,300,300,0],["Canada/Eastern",300,240,240,0],["Canada/Mountain",420,360,360,0],["Canada/Newfoundland",210,150,150,0],["Canada/Pacific",480,420,420,0],["Canada/Saskatchewan",360,360,360,0],["Canada/Yukon",420,420,420,0],["CET",-60,-120,-120,0],["Chile/Continental",240,180,180,0],["Chile/EasterIsland",360,300,300,0],["CST6CDT",360,300,300,0],["Cuba",300,240,240,1],["EET",-120,-180,-180,0],["Egypt",-120,-120,-120,0],["Eire",-60,0,-60,0],["EST",300,300,0,0],["EST5EDT",300,240,240,0],["Etc/GMT",0,0,0,0],["Etc/GMT+0",0,0,0,0],["Etc/GMT+1",60,60,0,0],["Etc/GMT+10",600,600,0,0],["Etc/GMT+11",660,660,0,0],["Etc/GMT+12",720,720,0,0],["Etc/GMT+2",120,120,0,0],["Etc/GMT+3",180,180,0,0],["Etc/GMT+4",240,240,0,0],["Etc/GMT+5",300,300,0,0],["Etc/GMT+6",360,360,0,0],["Etc/GMT+7",420,420,0,0],["Etc/GMT+8",480,480,0,0],["Etc/GMT+9",540,540,0,0],["Etc/GMT-0",0,0,0,0],["Etc/GMT-1",-60,-60,-60,0],["Etc/GMT-10",-600,-600,-600,0],["Etc/GMT-11",-660,-660,-660,0],["Etc/GMT-12",-720,-720,-720,0],["Etc/GMT-13",-780,-780,-780,0],["Etc/GMT-14",-840,-840,-840,0],["Etc/GMT-2",-120,-120,-120,0],["Etc/GMT-3",-180,-180,-180,0],["Etc/GMT-4",-240,-240,-240,0],["Etc/GMT-5",-300,-300,-300,0],["Etc/GMT-6",-360,-360,-360,0],["Etc/GMT-7",-420,-420,-420,0],["Etc/GMT-8",-480,-480,-480,0],["Etc/GMT-9",-540,-540,-540,0],["Etc/GMT0",0,0,0,0],["Etc/Greenwich",0,0,0,0],["Etc/UCT",0,0,0,0],["Etc/Universal",0,0,0,0],["Etc/UTC",0,0,0,0],["Etc/Zulu",0,0,0,0],["Europe/Amsterdam",-60,-120,-120,1],["Europe/Andorra",-60,-120,-120,1],["Europe/Astrakhan",-240,-240,-300,0],["Europe/Athens",-120,-180,-180,1],["Europe/Belfast",0,-60,-60,0],["Europe/Belgrade",-60,-120,-120,1],["Europe/Berlin",-60,-120,-120,1],["Europe/Bratislava",-60,-120,-120,1],["Europe/Brussels",-60,-120,-120,1],["Europe/Bucharest",-120,-180,-180,1],["Europe/Budapest",-60,-120,-120,1],["Europe/Busingen",-60,-120,-120,1],["Europe/Chisinau",-120,-180,-240,1],["Europe/Copenhagen",-60,-120,-120,1],["Europe/Dublin",0,-60,-60,1],["Europe/Gibraltar",-60,-120,-120,1],["Europe/Guernsey",0,-60,-60,1],["Europe/Helsinki",-120,-180,-180,1],["Europe/Isle_of_Man",0,-60,-60,1],["Europe/Istanbul",-120,-180,-180,0],["Europe/Jersey",0,-60,-60,1],["Europe/Kaliningrad",-120,-120,-240,0],["Europe/Kiev",-120,-180,-240,1],["Europe/Kirov",-180,-180,-300,0],["Europe/Lisbon",0,-60,-60,1],["Europe/Ljubljana",-60,-120,-120,1],["Europe/London",0,-60,-60,1],["Europe/Luxembourg",-60,-120,-120,1],["Europe/Madrid",-60,-120,-120,1],["Europe/Malta",-60,-120,-120,1],["Europe/Mariehamn",-120,-180,-180,1],["Europe/Minsk",-180,-180,-240,0],["Europe/Monaco",-60,-120,-120,1],["Europe/Moscow",-180,-240,-240,0],["Europe/Nicosia",-120,-180,-180,0],["Europe/Oslo",-60,-120,-120,1],["Europe/Paris",-60,-120,-120,1],["Europe/Podgorica",-60,-120,-120,1],["Europe/Prague",-60,-120,-120,1],["Europe/Riga",-120,-180,-240,1],["Europe/Rome",-60,-120,-120,1],["Europe/Samara",-240,-300,-300,0],["Europe/San_Marino",-60,-120,-120,1],["Europe/Sarajevo",-60,-120,-120,1],["Europe/Saratov",-240,-240,-300,0],["Europe/Simferopol",-180,-180,-240,0],["Europe/Skopje",-60,-120,-120,1],["Europe/Sofia",-120,-180,-180,1],["Europe/Stockholm",-60,-120,-120,1],["Europe/Tallinn",-120,-180,-240,1],["Europe/Tirane",-60,-120,-120,1],["Europe/Tiraspol",-120,-180,-240,0],["Europe/Ulyanovsk",-240,-240,-300,0],["Europe/Uzhgorod",-120,-180,-240,1],["Europe/Vaduz",-60,-120,-120,1],["Europe/Vatican",-60,-120,-120,1],["Europe/Vienna",-60,-120,-120,1],["Europe/Vilnius",-120,-180,-240,1],["Europe/Volgograd",-180,-180,-300,0],["Europe/Warsaw",-60,-120,-120,1],["Europe/Zagreb",-60,-120,-120,1],["Europe/Zaporozhye",-120,-180,-240,1],["Europe/Zurich",-60,-120,-120,1],["Factory",0,0,0,0],["GB",0,-60,-60,0],["GB-Eire",0,-60,-60,0],["GMT",0,0,0,0],["GMT+0",0,0,0,0],["GMT-0",0,0,0,0],["GMT0",0,0,0,0],["Greenwich",0,0,0,0],["Hongkong",-480,-480,-480,0],["HST",600,600,0,0],["Iceland",0,0,0,0],["Indian/Antananarivo",-180,-180,-180,0],["Indian/Chagos",-360,-360,-300,0],["Indian/Christmas",-420,-420,-420,0],["Indian/Cocos",-390,-390,-390,0],["Indian/Comoro",-180,-180,-180,0],["Indian/Kerguelen",-300,-300,-300,0],["Indian/Mahe",-240,-240,-240,0],["Indian/Maldives",-300,-300,-300,0],["Indian/Mauritius",-240,-240,-240,0],["Indian/Mayotte",-180,-180,-180,0],["Indian/Reunion",-240,-240,-240,0],["Iran",-210,-270,-210,0],["Israel",-120,-180,-120,0],["Jamaica",300,300,300,0],["Japan",-540,-540,-540,0],["Kwajalein",-720,-720,720,0],["Libya",-120,-120,-120,0],["MET",-60,-120,-120,0],["Mexico/BajaNorte",480,420,420,0],["Mexico/BajaSur",420,360,420,0],["Mexico/General",360,300,360,0],["MST",420,420,0,0],["MST7MDT",420,360,360,0],["Navajo",420,360,360,0],["NZ",-720,-780,-780,1],["NZ-CHAT",-765,-825,-825,1],["Pacific/Apia",-780,-840,660,0],["Pacific/Auckland",-720,-780,-720,1],["Pacific/Bougainville",-660,-660,-600,0],["Pacific/Chatham",-765,-825,-765,1],["Pacific/Chuuk",-600,-600,-600,0],["Pacific/Easter",360,300,300,0],["Pacific/Efate",-660,-660,-660,0],["Pacific/Enderbury",-780,-780,660,0],["Pacific/Fakaofo",-780,-780,660,0],["Pacific/Fiji",-720,-780,-720,0],["Pacific/Funafuti",-720,-720,-720,0],["Pacific/Galapagos",360,360,360,0],["Pacific/Gambier",540,540,540,0],["Pacific/Guadalcanal",-660,-660,-660,0],["Pacific/Guam",-600,-600,-600,0],["Pacific/Honolulu",600,600,600,0],["Pacific/Johnston",600,600,600,0],["Pacific/Kiritimati",-840,-840,600,0],["Pacific/Kosrae",-660,-660,-720,0],["Pacific/Kwajalein",-720,-720,720,0],["Pacific/Majuro",-720,-720,-720,0],["Pacific/Marquesas",570,570,570,0],["Pacific/Midway",660,660,660,0],["Pacific/Nauru",-720,-720,-720,0],["Pacific/Niue",660,660,660,0],["Pacific/Norfolk",-660,-720,-720,1],["Pacific/Noumea",-660,-660,-660,0],["Pacific/Pago_Pago",660,660,660,0],["Pacific/Palau",-540,-540,-540,0],["Pacific/Pitcairn",480,480,510,0],["Pacific/Pohnpei",-660,-660,-660,0],["Pacific/Ponape",-660,-660,-660,0],["Pacific/Port_Moresby",-600,-600,-600,0],["Pacific/Rarotonga",600,600,600,0],["Pacific/Saipan",-600,-600,-600,0],["Pacific/Samoa",660,660,660,0],["Pacific/Tahiti",600,600,600,0],["Pacific/Tarawa",-720,-720,-720,0],["Pacific/Tongatapu",-780,-780,-780,0],["Pacific/Truk",-600,-600,-600,0],["Pacific/Wake",-720,-720,-720,0],["Pacific/Wallis",-720,-720,-720,0],["Pacific/Yap",-600,-600,-600,0],["Poland",-60,-120,-120,0],["Portugal",0,-60,-60,0],["PRC",-480,-480,-480,0],["PST8PDT",480,420,420,0],["ROC",-480,-480,0,0],["ROK",-540,-540,-540,0],["Singapore",-480,-480,-480,0],["Turkey",-180,-180,-180,0],["UCT",0,0,0,0],["Universal",0,0,0,0],["US/Alaska",540,480,480,0],["US/Aleutian",600,540,540,0],["US/Arizona",420,420,420,0],["US/Central",360,300,300,0],["US/East-Indiana",300,240,300,0],["US/Eastern",300,240,240,0],["US/Hawaii",600,600,600,0],["US/Indiana-Starke",360,300,300,0],["US/Michigan",300,240,240,0],["US/Mountain",420,360,360,0],["US/Pacific",480,420,420,0],["US/Samoa",660,660,660,0],["UTC",0,0,0,0],["W-SU",-180,-180,-240,0],["WET",0,-60,-60,0],["Zulu",0,0,0,0]],e=function(){for(var e={},i=t.length,n=0;n<i;n++){var r=t[n],s=r[0];e[s]={offset:r[1],dstOffset:r[2],gmtOffset:r[3],isDSTActive:1==r[4]}}return e},i=e(),n=function(t){return i[t]},r=function(t){var e=i[t];if(!e)return 0;var n,r=e.gmtOffset;return n=e.isDSTActive?e.dstOffset:e.offset,n!=r&&(n=r),n};return{getDetails:n,getOffset:r}}(),ZWDateTime=function(){"undefined"!=typeof Intl&&Intl.RelativeTimeFormat&&Intl.RelativeTimeFormat.prototype.format||("undefined"==typeof Intl&&(window.Intl={}),Intl.RelativeTimeFormat||(window.Intl.RelativeTimeFormat=function(){}),Intl.RelativeTimeFormat.prototype.format||(window.Intl.RelativeTimeFormat.prototype.format=function(t,e){var i="";return t=t||0,e=e||"second",t<-1&&t>1&&(e+="s"),i=t>=0?"in "+t+" "+e:Math.abs(t)+" "+e+" ago"}));var t={SECOND:1e3,MINUTE:6e4,HOUR:36e5,DAY:864e5,WEEK:6048e5,MONTH:24192e5,YEAR:290304e5,SECONDS_45:45e3,MINUTES_45:27e5,HOURS_22:792e5,DAYS_26:22464e5,DAYS_320:27648e6},e={YEAR:1996,MONTH:10,DAY:28,HOUR:11,MINUTE:32,SECOND:54},i=new RegExp("[0-9]+","g"),n={arab:["","","","","","","","","",""],beng:["","","","","","","","","",""],arabext:["","","","","","","","","",""],deva:["","","","","","","","","",""]},r=["ar-KW","ar-SA","bn","fa","mr"],s=["th"],o=function(t,e){var i=ZWTimezone.getOffset(e);return t+6e4*i},a=function(t,e,i,n,r){var s;try{if(t&&e)s=D(t,e,i,n,r),s=o(s,n);else if(t)if("Date"==t.constructor.name)s=t.getTime();else{if("number"!=typeof t)throw"Invalid date";s=new Date(t).getTime()}else s=(new Date).getTime()}catch(t){throw t}return s},l=function(t){switch(t){case"EEEE":case"EEE":case"EE":case"E":intlKey=z.CONSTANTS.INTL_FORMAT.TYPES.WEEKDAY;break;case"DD":case"D":intlKey=z.CONSTANTS.INTL_FORMAT.TYPES.DAY;break;case"MMMM":case"MMM":case"MM":case"M":intlKey=z.CONSTANTS.INTL_FORMAT.TYPES.MONTH;break;case"YYYY":case"YY":intlKey=z.CONSTANTS.INTL_FORMAT.TYPES.YEAR;break;case"HH":case"hh":case"h":intlKey=z.CONSTANTS.INTL_FORMAT.TYPES.HOUR;break;case"mm":case"m":intlKey=z.CONSTANTS.INTL_FORMAT.TYPES.MINUTE;break;case"ss":case"s":intlKey=z.CONSTANTS.INTL_FORMAT.TYPES.SECOND;break;case"zz":case"z":intlKey=z.CONSTANTS.INTL_FORMAT.TYPES.TIMEZONE}return intlKey},c=function(t){var e="";switch(t){case"EEEE":case"MMMM":case"zz":e=z.CONSTANTS.INTL_FORMAT.VALUES.LONG;break;case"EEE":case"MMM":case"z":e=z.CONSTANTS.INTL_FORMAT.VALUES.SHORT;break;case"EE":case"E":e=z.CONSTANTS.INTL_FORMAT.VALUES.NARROW;break;case"DD":case"MM":case"YY":case"hh":case"HH":case"mm":case"ss":case"m":case"s":e=z.CONSTANTS.INTL_FORMAT.VALUES.DIGIT_2;break;case"D":case"M":case"YYYY":case"h":e=z.CONSTANTS.INTL_FORMAT.VALUES.NUMERIC}return e},u=function(t,e,i,n){return w(t,e,{day:n,timeZone:i})},h=function(t,e,i,n){return w(t,e,{month:n,timeZone:i})},d=function(t,e,i,n){return w(t,e,{year:n,timeZone:i})},p=function(t,e,i,n){return w(t,e,{weekday:n,timeZone:i})},f=function(t,e,i,n,r){return w(t,e,{hour:n,hourCycle:r?z.CONSTANTS.INTL_FORMAT.VALUES.H12:z.CONSTANTS.INTL_FORMAT.VALUES.H23,timeZone:i})},m=function(t,e,i,n){return w(t,e,{minute:n,hourCycle:z.CONSTANTS.INTL_FORMAT.VALUES.H12,timeZone:i})},g=function(t,e,i,n){return w(t,e,{second:n,hourCycle:z.CONSTANTS.INTL_FORMAT.VALUES.H12,timeZone:i})},v=function(t,e,i,n){var r=T("DD MM YYYY hh:mm:ss");r.timeZone=i,r.hourCycle=z.CONSTANTS.INTL_FORMAT.VALUES.H23;var s=w(t,e,r);r.timeZoneName=n;var o=w(t,e,r);return o.replace(s,"").trim()},M=function(t,n,r,s){if((!r||"de"==t&&r==z.CONSTANTS.INTL_FORMAT.VALUES.SHORT)&&(r="long"),["ja-JP","zh-TW","zh-HK","ko","vi"].contains(t)||"zh-HANS"==t&&"short"==r){i.lastIndex=0;var o=s.match(i);return o&&(s=o.join("")),parseInt(s)-1}for(var a=[],l=new Date(e.YEAR,e.MONTH,e.DAY,e.HOUR,e.MINUTE,e.SECOND),c=0;c<12;c++)l.setMonth(c),a.push(h(l,t,n,r));var u=a.indexOf(s);if(u==-1)throw"Invalid Date";return u},b=function(t,e){return z.CONSTANTS.REVERSE_FORMAT[t][e]},Y=function(t){var e=Intl.NumberFormat(t),i=e.resolvedOptions();return i.numberingSystem},y=function(t,e){for(var i="",r=Y(e),s=n[r],o=0,a=t.length;o<a;o++)i+=s.indexOf(t[o]);return parseInt(i)},_=function(t,e){var n;if(r.contains(e))n=y(t,e);else{i.lastIndex=0;var s=t.match(i);s&&(n=s.join("")),n=parseInt(n)}return n},D=function(t,e,n,r,o){o||(e=z.intlToNormalFormatConverter(e,n,r));var a={date:1,month:1,year:1985,hour:12,minute:0,second:0},l="EEEE|EEE|DD|D|MMMM|MMM|MM|M|YYYY|YY|HH|hh|mm|ss|zz|z",c=RegExp(l,"gm"),u=RegExp("(AM|PM)","gmi");c.lastIndex=0,e=e.replaceAll(u,""),u.lastIndex=0;for(var h,d=c.exec(e),p=[];d&&d.index>=0;)p.push(d),c.lastIndex=d.index+d[0].length,d=c.exec(e);for(var f,m,g,v=t,b="",Y=0,y=p.length;Y<y;Y++)switch(m=p[Y][0],g="",b=e.substring(p[Y].index+m.length,p[Y+1]?p[Y+1].index:e.length),b?(f=v.indexOf(b),f<0&&(f=v.length),g=v.substring(0,f),v=v.substring(f+b.length,v.length)):v&&(g=v),m){case"EEEE":case"EEE":case"zz":case"z":break;case"DD":case"D":a.date=_(g,n);break;case"MMMM":a.month=M(n,r,"long",g)+1;break;case"MMM":a.month=M(n,r,"short",g)+1;break;case"MM":case"M":a.month=_(g,n);break;case"YYYY":if(s.contains(n)){i.lastIndex=0;var D=g.match(i);D&&(h=D.join(""),h=parseInt(h)-543,h<1920&&(a.minute=a.minute+17,a.second=a.second+56))}else h=_(g,n);a.year=h;break;case"YY":if(s.contains(n)){i.lastIndex=0;var D=g.match(i);D&&(h=D.join(""),h=parseInt(h),h=h<70?h+2e3:h+1900,h-=543,h<1920&&(a.minute=a.minute+17,a.second=a.second+56))}else h=_(g,n),h=h<70?h+2e3:h+1900;a.year=parseInt(h);break;case"HH":a.hour=_(g,n);break;case"hh":h=_(g,n);var T=u.exec(t);T&&T[0]&&("pm"==T[0]||"PM"==T[0])&&(h+=12),a.hour=h;break;case"mm":h=_(g,n),s.contains(n)?a.minute=a.minute+h:a.minute=h;break;case"ss":h=_(g,n),s.contains(n)?a.second=a.second+h:a.second=h}return Date.UTC(a.year,a.month-1,a.date,a.hour,a.minute,a.second)},T=function(t){t||(t="DD-MM-YYYY-hh-mm-ss-zz");var e={},i="EEEE|EEE|EE|E|DD|D|MMMM|MMM|MM|M|YYYY|YY|HH|hh|h|mm|m|ss|s|zz|z",n=RegExp(i,"gm");n.lastIndex=0;for(var r,s,o=n.exec(t);o&&o.index>=0;)r=l(o[0]),s=c(o[0]),r&&s&&(r==z.CONSTANTS.INTL_FORMAT.TYPES.TIMEZONE?(e[r]="timezone",e[z.CONSTANTS.INTL_FORMAT.TYPES.TIMEZONE_NAME]=s):r==z.CONSTANTS.INTL_FORMAT.TYPES.HOUR?("HH"==o[0]?e[z.CONSTANTS.INTL_FORMAT.TYPES.HOURCYCLE]=z.CONSTANTS.INTL_FORMAT.VALUES.H23:e[z.CONSTANTS.INTL_FORMAT.TYPES.HOURCYCLE]=z.CONSTANTS.INTL_FORMAT.VALUES.H12,e[r]=s):([z.CONSTANTS.INTL_FORMAT.TYPES.MINUTE,z.CONSTANTS.INTL_FORMAT.TYPES.SECOND].contains(r)&&!e[z.CONSTANTS.INTL_FORMAT.TYPES.HOURCYCLE]&&(e[z.CONSTANTS.INTL_FORMAT.TYPES.HOURCYCLE]=z.CONSTANTS.INTL_FORMAT.VALUES.H12),e[r]=s)),n.lastIndex=o.index+o[0].length,o=n.exec(t);return e},w=function(t,e,i){return new Intl.DateTimeFormat(e,i).format(t)},E=function(t,e){var i;if(e>t)return i=E(e,t),0==i?0:-i;var n=t.getFullYear(),r=e.getFullYear();return i=n-r},x=function(t,e){var i;if(e>t)return i=x(e,t),0==i?0:-i;var n=0,r=t.getFullYear(),s=e.getFullYear(),o=t.getMonth(),a=e.getMonth();return r!=s?(n=E(t,e)-1,i=12*n+o+(12-(a+1))):i=o-a,t.getDate()>=e.getDate()&&t.getMonth()!=e.getMonth()&&r!=s&&++i,i},A=function(e,i,n){var r;if(i>e)return r=A(i,e,n),0==r?0:-r;var s=new Date(e.getTime()),o=new Date(i.getTime());return s.setHours(0,0,0,0),o.setHours(0,0,0,0),r=(s-o)/t.DAY},S=function(e,i,n){var r;if(i>e){var r=S(i,e,n);return 0==r?0:-r}var s=e.getTime()-i.getTime();switch(n){case"seconds":r=s/t.SECOND;break;case"minutes":r=s/t.MINUTE;break;case"hours":r=s/t.HOUR;break;case"days":r=A(e,i);break;case"weeks":r=A(e,i)/7;break;case"months":r=x(e,i);break;case"years":r=x(e,i)/12;break;default:r=s}return r=parseFloat(r.toFixed(2))},C=function(t,e){return w(t,e,{hour:"numeric",minute:"numeric",hour12:!0})},k=function(t){var e="",i=t.getDateObj(),n=t.getLocale(),r=t.getTimezone(),s=t.diff(new z,"days");if(s>=-1&&s<=1){var o=new Intl.RelativeTimeFormat(n,{numeric:"auto"});e=o.format(s,"day"),e&&(e=e.substring(0,1).toUpperCase()+e.substring(1,e.length)),e+=" at "+C(i,n)}else s>=-6&&s<7?(s<0&&(e="Last "),e+=p(i,n,r,"long")+" at "+C(i,n)):e=i.toLocaleDateString();return e},H=function(e){var i="",n=new Date,r=new Intl.RelativeTimeFormat(e.getLocale()),s=S(e.getDateObj(),n);s=parseInt(s.toFixed());var o=Math.abs(s);return o>=t.DAYS_320?(s=Math.round(s/t.YEAR),i=r.format(s,"year")):o>=t.DAYS_26&&o<t.DAYS_320?(s=Math.round(s/t.MONTH),i=r.format(s,"month")):o>=t.HOURS_22&&o<t.DAYS_26?(s=Math.round(s/t.DAY),i=r.format(s,"day")):o>=t.MINUTES_45&&o<t.HOURS_22?(s=Math.round(s/t.HOUR),i=r.format(s,"hour")):o>=t.SECONDS_45&&o<t.MINUTES_45?(s=Math.round(s/t.MINUTE),i=r.format(s,"minute")):(s=Math.round(s/t.SECOND),i=r.format(s,"second")),i},O=function(){var t;try{t=Intl.DateTimeFormat().resolvedOptions().locale}catch(e){t="en-US"}return t},I=function(){var t;try{t=Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){t="America/Los_Angeles"}return t},P=function(t){var e={};t=t||{};var i=t.mode||"add",n=t.years||0,r=t.months||0,s=t.days||0,o=t.hours||0,a=t.minutes||0;return"add"!=i&&(n=-n,r=-r,s=-s,o=-o,a=-a),e.year=n,e.month=r,e.date=s,e.hour=o,e.minute=a,e},N="en-US",R="America/Los_Angeles",L="DD MM YYYY",F={"h:mm A":"hh mm","h:mm:ss A":"hh mm ss","MM/DD/YYYY":"DD MM YYYY","MMMM D, YYYY":"DD MMMM YYYY","MMM D, YYYY":"DD MMM YYYY","MMMM D, YYYY h:mm A":"DD MMMM YYYY hh mm","MMM D, YYYY h:mm A":"DD MMM YYYY hh mm","dddd, MMMM D, YYYY h:mm A":"EEEE DD MMMM YYYY hh mm","ddd, MMM D, YYYY h:mm A":"EEE DD MMM YYYY hh mm","HH:mm":"HH mm","HH:mm:ss":"HH mm ss","DD/MM/YYYY":"DD MM YYYY","D MMMM YYYY":"DD MMMM YYYY","D MMM YYYY":"DD MMM YYYY","D MMMM YYYY HH:mm":"DD MMMM YYYY HH mm","D MMM YYYY HH:mm":"DD MMM YYYY HH mm","dddd, D MMMM YYYY HH:mm":"EEEE DD MMMM YYYY HH mm","ddd, D MMM YYYY HH:mm":"EEE DD MMM YYYY HH mm"},U=function(){var t=DocLocaleHandler.getLanguage();DocLocaleHandler.isSupportedLanguage(t)||(z.CONSTANTS.DEFAULT_LOCALE=N,z.CONSTANTS.DEFAULT_TIMEZONE=R,z.CONSTANTS.DEFAULT_FORMAT=L);var e=DocLocaleHandler.getLanguageDetails(t),i=e&&e.timezones;i&&i.length||(i=["America/Los_Angeles",R,"Europe/Madrid"]);var n=DocLocaleHandler.getTimezone();z.CONSTANTS.DEFAULT_LOCALE=t,z.CONSTANTS.DEFAULT_TIMEZONE=i.contains(n)?n:i[0];var r=DocLocaleHandler.getDateFormat();z.SUPPORTED_DATE_FORMATS.contains(r)||(r=F[r]?F[r]:L),z.CONSTANTS.DEFAULT_FORMAT=r?r:L};PubSub.subscribe("Document/DefaultLanguageInitialized",U),PubSub.subscribe("Document/LanguageInitialized",U),PubSub.subscribe("Document/LanguageChanged",U),PubSub.subscribe("Document/DateFormatChanged",U);var z=function(t,e,i,n,r){this._originalUTC=null,this._date=null,this._locale=null,this._timezone=null,this._outputTimezone=null,i=i||O(),n=n||I(),r=!!r,t&&"ZWDateTime"==t.constructor.name?(this._originalUTC=t.getOriginalUTC(),this._date=t.getDateObj(),this._locale=t.getLocale(),this._timezone=t.getTimezone()):!t||"Date"!=t.constructor.name&&"Number"!=t.constructor.name?(this._originalUTC=a(t,e,i,n,r),this._date=new Date(this._originalUTC),this._locale=i,this._timezone=n):(this._originalUTC=a(t),this._date=new Date(this._originalUTC),this._locale=i,this._timezone=n)};z.SUPPORTED_DATE_FORMATS=["DD MM YY","DD MM YYYY","DD MMM YYYY","DD MMMM YYYY","EEE DD MM YYYY","EEE DD MMM YYYY","EEE DD MMM YYYY HH mm","EEE DD MMM YYYY hh mm","EEEE DD MMM YYYY","EEEE DD MMMM YYYY","EEEE DD MMMM YYYY HH mm","EEEE DD MMMM YYYY hh mm","DD MMM YYYY hh mm","DD MMMM YYYY hh mm","DD MM YYYY HH mm ss","DD MMMM YYYY HH mm","DD MMMM YYYY HH mm ss","DD MM YYYY HH mm ss z","DD MMMM YYYY HH mm ss zz","HH mm","HH mm ss","hh mm","hh mm ss"],z.CONSTANTS={INTL_FORMAT:{TYPES:{WEEKDAY:"weekday",DAY:"day",MONTH:"month",YEAR:"year",HOUR:"hour",MINUTE:"minute",SECOND:"second",HOUR12:"hour12",HOURCYCLE:"hourCycle",TIMEZONE:"timeZone",TIMEZONE_NAME:"timeZoneName"},VALUES:{LONG:"long",SHORT:"short",NARROW:"narrow",DIGIT_2:"2-digit",NUMERIC:"numeric",H12:"h12",H23:"h23",FALSE:!1}},REVERSE_FORMAT:{weekday:{narrow:"EE",short:"EEE",long:"EEEE"},day:{numeric:"D","2-digit":"DD"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},year:{"2-digit":"YY",numeric:"YYYY"},hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"mm","2-digit":"mm"},second:{numeric:"ss","2-digit":"ss"},timeZoneName:{short:"z",long:"zz"}},DEFAULT_LOCALE:"en-US",DEFAULT_TIMEZONE:"America/Los_Angeles",DEFAULT_FORMAT:"DD MM YYYY",DEFAULT_ADJUST_MODE:"add"},z.calculateDaysWeekendsBetween=function(t,e){var i,n;t.getTime()<=e.getTime()?(n=new Date(e.getTime()),i=new Date(t.getTime())):(n=new Date(t.getTime()),i=new Date(e.getTime())),i.setHours(0,0,0,0),n.setHours(0,0,0,0);for(var r=0,s=0;i<n;)i.setDate(i.getDate()+1),++r,0!==i.getDay()&&6!==i.getDay()||++s;return{days:r,weekdays:r-s,weekends:s}},z.getDateInfo=function(t){return t=t||{},t.input=t.input||{},t.input.locale=t.input.locale||z.CONSTANTS.DEFAULT_LOCALE,t.input.timezone=t.input.timezone||z.CONSTANTS.DEFAULT_TIMEZONE,t.input.format=t.input.format||z.CONSTANTS.DEFAULT_FORMAT,t.input.custom_format=t.input.custom_format||"",t.output=t.output||{},t.output.locale=t.output.locale||z.CONSTANTS.DEFAULT_LOCALE,t.output.timezone=t.output.timezone||z.CONSTANTS.DEFAULT_TIMEZONE,t.output.format=t.output.format||z.CONSTANTS.DEFAULT_FORMAT,t.output.custom_format=t.output.custom_format||"",t.adjustment=t.adjustment||{},t.adjustment.mode=t.adjustment.mode||z.CONSTANTS.DEFAULT_ADJUST_MODE,t.adjustment.days=t.adjustment.days||0,t.adjustment.months=t.adjustment.months||0,t.adjustment.years=t.adjustment.years||0,t.adjustment.hours=t.adjustment.hours||0,t.adjustment.minutes=t.adjustment.minutes||0,t.adjustment.filter=t.adjustment.filter||{exclude:!1,excludeValue:""},t},z.getDateStringFromDateInfo=function(t,e){var i;t||(t=new Date);var n=e.input||{},r=e.output||{},s=e.adjustment||{},o=n[MAILMERGE.DATE_FORMAT],a=!1;"custom"==o&&(o=n[MAILMERGE.DATE_CUSTOM_FORMAT],a=!0);var l=n[MAILMERGE.DATE_LOCALE],c=n[MAILMERGE.DATE_TIMEZONE],u=r[MAILMERGE.DATE_FORMAT],h=!1;"custom"==u&&(u=r[MAILMERGE.DATE_CUSTOM_FORMAT],h=!0);var d=r[MAILMERGE.DATE_LOCALE],p=r[MAILMERGE.DATE_TIMEZONE];try{if("datemerged"==t){a=!0,o="DD/MM/YYYY";var f=new z(new Date,"",l,c);t=f.customFormat(o,l,c,a)}var m=new z(t,o,l,c,a);m.adjustDate(s),i=h?m.customFormat(u,d,p):m.format(u,d,p)}catch(t){i="Invalid Date"}return i},z.getUserLocaleFormatAndTz=function(){return{locale:z.CONSTANTS.DEFAULT_LOCALE,timezone:z.CONSTANTS.DEFAULT_TIMEZONE,format:z.CONSTANTS.DEFAULT_FORMAT}};var B=function(t,e,i){return new Intl.DateTimeFormat(e,i).formatToParts(t)};z.intlToNormalFormatConverter=function(t,i,n){var r=T(t);i=i||z.CONSTANTS.DEFAULT_LOCALE,n=n||z.CONSTANTS.DEFAULT_TIMEZONE,"de"==i&&r[z.CONSTANTS.INTL_FORMAT.TYPES.MONTH]==z.CONSTANTS.INTL_FORMAT.VALUES.SHORT&&(r[z.CONSTANTS.INTL_FORMAT.TYPES.MONTH]=z.CONSTANTS.INTL_FORMAT.VALUES.LONG),"timezone"==r[z.CONSTANTS.INTL_FORMAT.TYPES.TIMEZONE]&&(r[z.CONSTANTS.INTL_FORMAT.TYPES.TIMEZONE]=n);for(var s,o,a,l=new Date(e.YEAR,e.MONTH,e.DAY,e.HOUR,e.MINUTE,e.SECOND),c=w(l,i,r),u=B(l,i,r),h=Object.keys(r),d=0,p=u.length;d<p;d++)s=u[d],o=s.type,h.contains(o)&&(a=o==z.CONSTANTS.INTL_FORMAT.TYPES.HOUR&&r[z.CONSTANTS.INTL_FORMAT.TYPES.HOURCYCLE]==z.CONSTANTS.INTL_FORMAT.VALUES.H23?"HH":b(o,r[o]),c=c.replace(s.value,a));return c};var W=["af","sq","am","ar","ar-DZ","ar-KW","ar-LY","ar-MA","ar-SA","ar-TN","hy-AM","az","eu","be","bn","bs","br","bg","my","ca","tzm","tzm-LATN","zh-HANS","zh-HK","zh-TW","cv","hr","cs","da","nl","nl-BE","en-US","en-AU","en-CA","en-IN","en-IE","en-IL","en-NZ","en-SG","en-GB","en-ZA","eo","et","fo","fa","fj","fi","fr","fr-CA","fr-CH","fy","gl-ES","ka","de","de-AT","de-CH","el","gu","he","hi","hu","is","id","ga","it","it-CH","ja-JP","jv","kn","kk","km","rw","kok","ko","ku","ky","lo","la","lv","lt","lb","mk","ms","ml","dv","mt","mi","mr","mn","cnr","ne","se","ns-ZA","nb-NO","nn-NO","oc-FR","or","pl","pt","pt-BR","pa","qu","ro","ru","gd-GB","sr","sr-Cyrl","ss","sd","si","sk","sl","es","es-CL","es-CO","es-DO","es-EC","es-MX","es-NI","es-PE","es-PR","es-UY","es-US","es-AR","es-BO","es-CR","es-CU","es-GT","es-HN","es-PA","es-PH","es-PY","es-SV","es-VE","sw-KE","sv-SE","tl","tg","tzl","ta","te","tet","th","bo","ts","tn-ZA","tr","uk-UA","ur-IN","ug","uz","ve-ZA","vi","cy","xh","yo","zu"],j=[],$=["hh mm","hh mm ss","DD MM YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY hh mm","D MMM YYYY hh mm","EEEE D MMMM YYYY hh mm","EEE D MMM YYYY hh mm"],V=["D MMMM YYYY","D MMM YYYY","D MMMM YYYY hh mm","D MMM YYYY hh mm","EEEE D MMMM YYYY hh mm","EEE D MMM YYYY hh mm"],G=JSON.parse('{"af":["HH:mm","HH:mm:ss","DD/MM/YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY HH:mm","D MMM YYYY HH:mm","dddd, D MMMM YYYY HH:mm","ddd, D MMM YYYY HH:mm"],"sq":["HH:mm","HH:mm:ss","DD/MM/YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY HH:mm","D MMM YYYY HH:mm","dddd, D MMMM YYYY HH:mm","ddd, D MMM YYYY HH:mm"],"ar":["HH:mm","HH:mm:ss","D/M/YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY HH:mm","D MMM YYYY HH:mm","dddd D MMMM YYYY HH:mm","ddd D MMM YYYY HH:mm"],"ar-DZ":["HH:mm","HH:mm:ss","DD/MM/YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY HH:mm","D MMM YYYY HH:mm","dddd D MMMM YYYY HH:mm","ddd D MMM YYYY HH:mm"],"ar-KW":["HH:mm","HH:mm:ss","DD/MM/YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY HH:mm","D MMM YYYY HH:mm","dddd D MMMM YYYY HH:mm","ddd D MMM YYYY HH:mm"],"ar-LY":["HH:mm","HH:mm:ss","D/M/YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY HH:mm","D MMM YYYY HH:mm","dddd D MMMM YYYY HH:mm","ddd D MMM YYYY HH:mm"],"ar-MA":["HH:mm","HH:mm:ss","DD/MM/YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY HH:mm","D MMM YYYY HH:mm","dddd D MMMM YYYY HH:mm","ddd D MMM YYYY HH:mm"],"ar-SA":["HH:mm","HH:mm:ss","DD/MM/YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY HH:mm","D MMM YYYY HH:mm","dddd D MMMM YYYY HH:mm","ddd D MMM YYYY HH:mm"],"ar-TN":["HH:mm","HH:mm:ss","DD/MM/YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY HH:mm","D MMM YYYY HH:mm","dddd D MMMM YYYY HH:mm","ddd D MMM YYYY HH:mm"],"hy-AM":["HH:mm","HH:mm:ss","DD.MM.YYYY","D MMMM YYYY .","D MMM YYYY .","D MMMM YYYY ., HH:mm","D MMM YYYY ., HH:mm","dddd, D MMMM YYYY ., HH:mm","ddd, D MMM YYYY ., HH:mm"],"az":["HH:mm","HH:mm:ss","DD.MM.YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY HH:mm","D MMM YYYY HH:mm","dddd, D MMMM YYYY HH:mm","ddd, D MMM YYYY HH:mm"],"eu":["HH:mm","HH:mm:ss","YYYY-MM-DD","YYYY[ko] MMMM[ren] D[a]","YYYY[ko] MMM D[a]","YYYY[ko] MMMM[ren] D[a] HH:mm","YYYY[ko] MMM D[a] HH:mm","dddd, YYYY[ko] MMMM[ren] D[a] HH:mm","ddd, YYYY[ko] MMM D[a] HH:mm"],"be":["HH:mm","HH:mm:ss","DD.MM.YYYY","D MMMM YYYY .","D MMM YYYY .","D MMMM YYYY ., HH:mm","D MMM YYYY ., HH:mm","dddd, D MMMM YYYY ., HH:mm","ddd, D MMM YYYY ., HH:mm"],"bn":["A h:mm ","A h:mm:ss ","DD/MM/YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY, A h:mm ","D MMM YYYY, A h:mm ","dddd, D MMMM YYYY, A h:mm ","ddd, D MMM YYYY, A h:mm "],"bs":["H:mm","H:mm:ss","DD.MM.YYYY","D. MMMM YYYY","D. MMM YYYY","D. MMMM YYYY H:mm","D. MMM YYYY H:mm","dddd, D. MMMM YYYY H:mm","ddd, D. MMM YYYY H:mm"],"br":["h[e]mm A","h[e]mm:ss A","DD/MM/YYYY","D [a viz] MMMM YYYY","D [a viz] MMM YYYY","D [a viz] MMMM YYYY h[e]mm A","D [a viz] MMM YYYY h[e]mm A","dddd, D [a viz] MMMM YYYY h[e]mm A","ddd, D [a viz] MMM YYYY h[e]mm A"],"bg":["H:mm","H:mm:ss","D.MM.YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY H:mm","D MMM YYYY H:mm","dddd, D MMMM YYYY H:mm","ddd, D MMM YYYY H:mm"],"my":["HH:mm","HH:mm:ss","DD/MM/YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY HH:mm","D MMM YYYY HH:mm","dddd D MMMM YYYY HH:mm","ddd D MMM YYYY HH:mm"],"ca":["H:mm","H:mm:ss","DD/MM/YYYY","D MMMM [de] YYYY","D MMM YYYY","D MMMM [de] YYYY [a les] H:mm","D MMM YYYY, H:mm","dddd D MMMM [de] YYYY [a les] H:mm","ddd D MMM YYYY, H:mm"],"tzm":["HH:mm","HH:mm:ss","DD/MM/YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY HH:mm","D MMM YYYY HH:mm","dddd D MMMM YYYY HH:mm","ddd D MMM YYYY HH:mm"],"tzm-LATN":["HH:mm","HH:mm:ss","DD/MM/YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY HH:mm","D MMM YYYY HH:mm","dddd D MMMM YYYY HH:mm","ddd D MMM YYYY HH:mm"],"zh-HANS":["h:mm A","h:mm:ss A","MM/DD/YYYY","MMMM D, YYYY","MMM D, YYYY","MMMM D, YYYY h:mm A","MMM D, YYYY h:mm A","dddd, MMMM D, YYYY h:mm A","ddd, MMM D, YYYY h:mm A"],"zh-HK":["HH:mm","HH:mm:ss","YYYY/MM/DD","YYYYMD","YYYYMD","YYYYMD HH:mm","YYYYMD HH:mm","YYYYMDdddd HH:mm","YYYYMDdddd HH:mm"],"zh-TW":["HH:mm","HH:mm:ss","YYYY/MM/DD","YYYYMD","YYYYMD","YYYYMD HH:mm","YYYYMD HH:mm","YYYYMDdddd HH:mm","YYYYMDdddd HH:mm"],"cv":["HH:mm","HH:mm:ss","DD-MM-YYYY","YYYY [] MMMM [] D[-]","YYYY [] MMM [] D[-]","YYYY [] MMMM [] D[-], HH:mm","YYYY [] MMM [] D[-], HH:mm","dddd, YYYY [] MMMM [] D[-], HH:mm","ddd, YYYY [] MMM [] D[-], HH:mm"],"hr":["H:mm","H:mm:ss","DD.MM.YYYY","D. MMMM YYYY","D. MMM YYYY","D. MMMM YYYY H:mm","D. MMM YYYY H:mm","dddd, D. MMMM YYYY H:mm","ddd, D. MMM YYYY H:mm"],"cs":["H:mm","H:mm:ss","DD.MM.YYYY","D. MMMM YYYY","D. MMM YYYY","D. MMMM YYYY H:mm","D. MMM YYYY H:mm","dddd D. MMMM YYYY H:mm","ddd D. MMM YYYY H:mm"],"da":["HH:mm","HH:mm:ss","DD.MM.YYYY","D. MMMM YYYY","D. MMM YYYY","D. MMMM YYYY HH:mm","D. MMM YYYY HH:mm","dddd [d.] D. MMMM YYYY [kl.] HH:mm","ddd [d.] D. MMM YYYY [kl.] HH:mm"],"nl":["HH:mm","HH:mm:ss","DD-MM-YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY HH:mm","D MMM YYYY HH:mm","dddd D MMMM YYYY HH:mm","ddd D MMM YYYY HH:mm"],"nl-BE":["HH:mm","HH:mm:ss","DD/MM/YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY HH:mm","D MMM YYYY HH:mm","dddd D MMMM YYYY HH:mm","ddd D MMM YYYY HH:mm"],"en-US":["h:mm A","h:mm:ss A","MM/DD/YYYY","MMMM D, YYYY","MMM D, YYYY","MMMM D, YYYY h:mm A","MMM D, YYYY h:mm A","dddd, MMMM D, YYYY h:mm A","ddd, MMM D, YYYY h:mm A"],"en-AU":["h:mm A","h:mm:ss A","DD/MM/YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY h:mm A","D MMM YYYY h:mm A","dddd, D MMMM YYYY h:mm A","ddd, D MMM YYYY h:mm A"],"en-CA":["h:mm A","h:mm:ss A","YYYY-MM-DD","MMMM D, YYYY","MMM D, YYYY","MMMM D, YYYY h:mm A","MMM D, YYYY h:mm A","dddd, MMMM D, YYYY h:mm A","ddd, MMM D, YYYY h:mm A"],"en-IE":["HH:mm","HH:mm:ss","DD-MM-YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY HH:mm","D MMM YYYY HH:mm","dddd D MMMM YYYY HH:mm","ddd D MMM YYYY HH:mm"],"en-IL":["HH:mm","HH:mm:ss","DD/MM/YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY HH:mm","D MMM YYYY HH:mm","dddd, D MMMM YYYY HH:mm","ddd, D MMM YYYY HH:mm"],"en-NZ":["h:mm A","h:mm:ss A","DD/MM/YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY h:mm A","D MMM YYYY h:mm A","dddd, D MMMM YYYY h:mm A","ddd, D MMM YYYY h:mm A"],"en-SG":["h:mm A","h:mm:ss A","MM/DD/YYYY","MMMM D, YYYY","MMM D, YYYY","MMMM D, YYYY h:mm A","MMM D, YYYY h:mm A","dddd, MMMM D, YYYY h:mm A","ddd, MMM D, YYYY h:mm A"],"en-GB":["HH:mm","HH:mm:ss","DD/MM/YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY HH:mm","D MMM YYYY HH:mm","dddd, D MMMM YYYY HH:mm","ddd, D MMM YYYY HH:mm"],"en-ZA":["h:mm A","h:mm:ss A","MM/DD/YYYY","MMMM D, YYYY","MMM D, YYYY","MMMM D, YYYY h:mm A","MMM D, YYYY h:mm A","dddd, MMMM D, YYYY h:mm A","ddd, MMM D, YYYY h:mm A"],"eo":["HH:mm","HH:mm:ss","YYYY-MM-DD","D[-a de] MMMM, YYYY","D[-a de] MMM, YYYY","D[-a de] MMMM, YYYY HH:mm","D[-a de] MMM, YYYY HH:mm","dddd, [la] D[-a de] MMMM, YYYY HH:mm","ddd, [la] D[-a de] MMM, YYYY HH:mm"],"et":["H:mm","H:mm:ss","DD.MM.YYYY","D. MMMM YYYY","D. MMM YYYY","D. MMMM YYYY H:mm","D. MMM YYYY H:mm","dddd, D. MMMM YYYY H:mm","ddd, D. MMM YYYY H:mm"],"fo":["HH:mm","HH:mm:ss","DD/MM/YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY HH:mm","D MMM YYYY HH:mm","dddd D. MMMM, YYYY HH:mm","ddd D. MMM, YYYY HH:mm"],"fa":["HH:mm","HH:mm:ss","DD/MM/YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY HH:mm","D MMM YYYY HH:mm","dddd, D MMMM YYYY HH:mm","ddd, D MMM YYYY HH:mm"],"fj":["h:mm A","h:mm:ss A","MM/DD/YYYY","MMMM D, YYYY","MMM D, YYYY","MMMM D, YYYY h:mm A","MMM D, YYYY h:mm A","dddd, MMMM D, YYYY h:mm A","ddd, MMM D, YYYY h:mm A"],"fi":["HH.mm","HH.mm.ss","DD.MM.YYYY","Do MMMM[ta] YYYY","Do MMM YYYY","Do MMMM[ta] YYYY, [klo] HH.mm","Do MMM YYYY, [klo] HH.mm","dddd, Do MMMM[ta] YYYY, [klo] HH.mm","ddd, Do MMM YYYY, [klo] HH.mm"],"fr":["HH:mm","HH:mm:ss","DD/MM/YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY HH:mm","D MMM YYYY HH:mm","dddd D MMMM YYYY HH:mm","ddd D MMM YYYY HH:mm"],"fr-CA":["HH:mm","HH:mm:ss","YYYY-MM-DD","D MMMM YYYY","D MMM YYYY","D MMMM YYYY HH:mm","D MMM YYYY HH:mm","dddd D MMMM YYYY HH:mm","ddd D MMM YYYY HH:mm"],"fr-CH":["HH:mm","HH:mm:ss","DD.MM.YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY HH:mm","D MMM YYYY HH:mm","dddd D MMMM YYYY HH:mm","ddd D MMM YYYY HH:mm"],"fy":["HH:mm","HH:mm:ss","DD-MM-YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY HH:mm","D MMM YYYY HH:mm","dddd D MMMM YYYY HH:mm","ddd D MMM YYYY HH:mm"],"gl-ES":["H:mm","H:mm:ss","DD/MM/YYYY","D [de] MMMM [de] YYYY","D [de] MMM [de] YYYY","D [de] MMMM [de] YYYY H:mm","D [de] MMM [de] YYYY H:mm","dddd, D [de] MMMM [de] YYYY H:mm","ddd, D [de] MMM [de] YYYY H:mm"],"ka":["h:mm A","h:mm:ss A","DD/MM/YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY h:mm A","D MMM YYYY h:mm A","dddd, D MMMM YYYY h:mm A","ddd, D MMM YYYY h:mm A"],"de":["HH:mm","HH:mm:ss","DD.MM.YYYY","D. MMMM YYYY","D. MMM YYYY","D. MMMM YYYY HH:mm","D. MMM YYYY HH:mm","dddd, D. MMMM YYYY HH:mm","ddd, D. MMM YYYY HH:mm"],"de-AT":["HH:mm","HH:mm:ss","DD.MM.YYYY","D. MMMM YYYY","D. MMM YYYY","D. MMMM YYYY HH:mm","D. MMM YYYY HH:mm","dddd, D. MMMM YYYY HH:mm","ddd, D. MMM YYYY HH:mm"],"de-CH":["HH:mm","HH:mm:ss","DD.MM.YYYY","D. MMMM YYYY","D. MMM YYYY","D. MMMM YYYY HH:mm","D. MMM YYYY HH:mm","dddd, D. MMMM YYYY HH:mm","ddd, D. MMM YYYY HH:mm"],"el":["h:mm A","h:mm:ss A","DD/MM/YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY h:mm A","D MMM YYYY h:mm A","dddd, D MMMM YYYY h:mm A","ddd, D MMM YYYY h:mm A"],"gu":["A h:mm ","A h:mm:ss ","DD/MM/YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY, A h:mm ","D MMM YYYY, A h:mm ","dddd, D MMMM YYYY, A h:mm ","ddd, D MMM YYYY, A h:mm "],"he":["HH:mm","HH:mm:ss","DD/MM/YYYY","D []MMMM YYYY","D MMM YYYY","D []MMMM YYYY HH:mm","D MMM YYYY HH:mm","dddd, D []MMMM YYYY HH:mm","ddd, D MMM YYYY HH:mm"],"hi":["A h:mm ","A h:mm:ss ","DD/MM/YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY, A h:mm ","D MMM YYYY, A h:mm ","dddd, D MMMM YYYY, A h:mm ","ddd, D MMM YYYY, A h:mm "],"hu":["H:mm","H:mm:ss","YYYY.MM.DD.","YYYY. MMMM D.","YYYY. MMM D.","YYYY. MMMM D. H:mm","YYYY. MMM D. H:mm","YYYY. MMMM D., dddd H:mm","YYYY. MMM D., ddd H:mm"],"is":["H:mm","H:mm:ss","DD.MM.YYYY","D. MMMM YYYY","D. MMM YYYY","D. MMMM YYYY [kl.] H:mm","D. MMM YYYY [kl.] H:mm","dddd, D. MMMM YYYY [kl.] H:mm","ddd, D. MMM YYYY [kl.] H:mm"],"id":["HH.mm","HH.mm.ss","DD/MM/YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY [pukul] HH.mm","D MMM YYYY [pukul] HH.mm","dddd, D MMMM YYYY [pukul] HH.mm","ddd, D MMM YYYY [pukul] HH.mm"],"ga":["h:mm A","h:mm:ss A","MM/DD/YYYY","MMMM D, YYYY","MMM D, YYYY","MMMM D, YYYY h:mm A","MMM D, YYYY h:mm A","dddd, MMMM D, YYYY h:mm A","ddd, MMM D, YYYY h:mm A"],"it":["HH:mm","HH:mm:ss","DD/MM/YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY HH:mm","D MMM YYYY HH:mm","dddd D MMMM YYYY HH:mm","ddd D MMM YYYY HH:mm"],"it-CH":["HH:mm","HH:mm:ss","DD/MM/YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY HH:mm","D MMM YYYY HH:mm","dddd D MMMM YYYY HH:mm","ddd D MMM YYYY HH:mm"],"ja-JP":["HH:mm","HH:mm:ss","YYYY/MM/DD","YYYYMD","YYYYMD","YYYYMD HH:mm","YYYYMD HH:mm","YYYYMD dddd HH:mm","YYYYMD(ddd) HH:mm"],"jv":["HH.mm","HH.mm.ss","DD/MM/YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY [pukul] HH.mm","D MMM YYYY [pukul] HH.mm","dddd, D MMMM YYYY [pukul] HH.mm","ddd, D MMM YYYY [pukul] HH.mm"],"kn":["A h:mm","A h:mm:ss","DD/MM/YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY, A h:mm","D MMM YYYY, A h:mm","dddd, D MMMM YYYY, A h:mm","ddd, D MMM YYYY, A h:mm"],"kk":["HH:mm","HH:mm:ss","DD.MM.YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY HH:mm","D MMM YYYY HH:mm","dddd, D MMMM YYYY HH:mm","ddd, D MMM YYYY HH:mm"],"km":["HH:mm","HH:mm:ss","DD/MM/YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY HH:mm","D MMM YYYY HH:mm","dddd, D MMMM YYYY HH:mm","ddd, D MMM YYYY HH:mm"],"rw":["h:mm A","h:mm:ss A","MM/DD/YYYY","MMMM D, YYYY","MMM D, YYYY","MMMM D, YYYY h:mm A","MMM D, YYYY h:mm A","dddd, MMMM D, YYYY h:mm A","ddd, MMM D, YYYY h:mm A"],"kok":["h:mm A","h:mm:ss A","MM/DD/YYYY","MMMM D, YYYY","MMM D, YYYY","MMMM D, YYYY h:mm A","MMM D, YYYY h:mm A","dddd, MMMM D, YYYY h:mm A","ddd, MMM D, YYYY h:mm A"],"ko":["A h:mm","A h:mm:ss","YYYY.MM.DD.","YYYY MMMM D","YYYY MMMM D","YYYY MMMM D A h:mm","YYYY MMMM D A h:mm","YYYY MMMM D dddd A h:mm","YYYY MMMM D dddd A h:mm"],"ku":["h:mm A","h:mm:ss A","MM/DD/YYYY","MMMM D, YYYY","MMM D, YYYY","MMMM D, YYYY h:mm A","MMM D, YYYY h:mm A","dddd, MMMM D, YYYY h:mm A","ddd, MMM D, YYYY h:mm A"],"ky":["HH:mm","HH:mm:ss","DD.MM.YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY HH:mm","D MMM YYYY HH:mm","dddd, D MMMM YYYY HH:mm","ddd, D MMM YYYY HH:mm"],"lo":["HH:mm","HH:mm:ss","DD/MM/YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY HH:mm","D MMM YYYY HH:mm","dddd D MMMM YYYY HH:mm","ddd D MMM YYYY HH:mm"],"la":["h:mm A","h:mm:ss A","MM/DD/YYYY","MMMM D, YYYY","MMM D, YYYY","MMMM D, YYYY h:mm A","MMM D, YYYY h:mm A","dddd, MMMM D, YYYY h:mm A","ddd, MMM D, YYYY h:mm A"],"lv":["HH:mm","HH:mm:ss","DD.MM.YYYY.","YYYY. [gada] D. MMMM","YYYY. [gada] D. MMM","YYYY. [gada] D. MMMM, HH:mm","YYYY. [gada] D. MMM, HH:mm","YYYY. [gada] D. MMMM, dddd, HH:mm","YYYY. [gada] D. MMM, ddd, HH:mm"],"lt":["HH:mm","HH:mm:ss","YYYY-MM-DD","YYYY [m.] MMMM D [d.]","YYYY [m.] MMMM D [d.]","YYYY [m.] MMMM D [d.], HH:mm [val.]","YYYY [m.] MMMM D [d.], HH:mm [val.]","YYYY [m.] MMMM D [d.], dddd, HH:mm [val.]","YYYY [m.] MMMM D [d.], ddd, HH:mm [val.]"],"lb":["H:mm [Auer]","H:mm:ss [Auer]","DD.MM.YYYY","D. MMMM YYYY","D. MMM YYYY","D. MMMM YYYY H:mm [Auer]","D. MMM YYYY H:mm [Auer]","dddd, D. MMMM YYYY H:mm [Auer]","ddd, D. MMM YYYY H:mm [Auer]"],"mk":["H:mm","H:mm:ss","D.MM.YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY H:mm","D MMM YYYY H:mm","dddd, D MMMM YYYY H:mm","ddd, D MMM YYYY H:mm"],"ms":["HH.mm","HH.mm.ss","DD/MM/YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY [pukul] HH.mm","D MMM YYYY [pukul] HH.mm","dddd, D MMMM YYYY [pukul] HH.mm","ddd, D MMM YYYY [pukul] HH.mm"],"ml":["A h:mm -","A h:mm:ss -","DD/MM/YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY, A h:mm -","D MMM YYYY, A h:mm -","dddd, D MMMM YYYY, A h:mm -","ddd, D MMM YYYY, A h:mm -"],"dv":["HH:mm","HH:mm:ss","D/M/YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY HH:mm","D MMM YYYY HH:mm","dddd D MMMM YYYY HH:mm","ddd D MMM YYYY HH:mm"],"mt":["HH:mm","HH:mm:ss","DD/MM/YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY HH:mm","D MMM YYYY HH:mm","dddd, D MMMM YYYY HH:mm","ddd, D MMM YYYY HH:mm"],"mi":["HH:mm","HH:mm:ss","DD/MM/YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY [i] HH:mm","D MMM YYYY [i] HH:mm","dddd, D MMMM YYYY [i] HH:mm","ddd, D MMM YYYY [i] HH:mm"],"mr":["A h:mm ","A h:mm:ss ","DD/MM/YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY, A h:mm ","D MMM YYYY, A h:mm ","dddd, D MMMM YYYY, A h:mm ","ddd, D MMM YYYY, A h:mm "],"mn":["HH:mm","HH:mm:ss","YYYY-MM-DD","YYYY  MMMM D","YYYY  MMM D","YYYY  MMMM D HH:mm","YYYY  MMM D HH:mm","dddd, YYYY  MMMM D HH:mm","ddd, YYYY  MMM D HH:mm"],"cnr":["h:mm A","h:mm:ss A","MM/DD/YYYY","MMMM D, YYYY","MMM D, YYYY","MMMM D, YYYY h:mm A","MMM D, YYYY h:mm A","dddd, MMMM D, YYYY h:mm A","ddd, MMM D, YYYY h:mm A"],"ne":["A h:mm ","A h:mm:ss ","DD/MM/YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY, A h:mm ","D MMM YYYY, A h:mm ","dddd, D MMMM YYYY, A h:mm ","ddd, D MMM YYYY, A h:mm "],"se":["HH:mm","HH:mm:ss","DD.MM.YYYY","MMMM D. [b.] YYYY","MMM D. [b.] YYYY","MMMM D. [b.] YYYY [ti.] HH:mm","MMM D. [b.] YYYY [ti.] HH:mm","dddd, MMMM D. [b.] YYYY [ti.] HH:mm","ddd, MMM D. [b.] YYYY [ti.] HH:mm"],"nb-NO":["HH:mm","HH:mm:ss","DD.MM.YYYY","D. MMMM YYYY","D. MMM YYYY","D. MMMM YYYY [kl.] HH:mm","D. MMM YYYY [kl.] HH:mm","dddd D. MMMM YYYY [kl.] HH:mm","ddd D. MMM YYYY [kl.] HH:mm"],"nn-NO":["HH:mm","HH:mm:ss","DD.MM.YYYY","D. MMMM YYYY","D. MMM YYYY","D. MMMM YYYY [kl.] H:mm","D. MMM YYYY [kl.] H:mm","dddd D. MMMM YYYY [kl.] HH:mm","ddd D. MMM YYYY [kl.] HH:mm"],"pl":["HH:mm","HH:mm:ss","DD.MM.YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY HH:mm","D MMM YYYY HH:mm","dddd, D MMMM YYYY HH:mm","ddd, D MMM YYYY HH:mm"],"pt":["HH:mm","HH:mm:ss","DD/MM/YYYY","D [de] MMMM [de] YYYY","D [de] MMM [de] YYYY","D [de] MMMM [de] YYYY HH:mm","D [de] MMM [de] YYYY HH:mm","dddd, D [de] MMMM [de] YYYY HH:mm","ddd, D [de] MMM [de] YYYY HH:mm"],"pt-BR":["HH:mm","HH:mm:ss","DD/MM/YYYY","D [de] MMMM [de] YYYY","D [de] MMM [de] YYYY","D [de] MMMM [de] YYYY [s] HH:mm","D [de] MMM [de] YYYY [s] HH:mm","dddd, D [de] MMMM [de] YYYY [s] HH:mm","ddd, D [de] MMM [de] YYYY [s] HH:mm"],"pa":["h:mm A","h:mm:ss A","MM/DD/YYYY","MMMM D, YYYY","MMM D, YYYY","MMMM D, YYYY h:mm A","MMM D, YYYY h:mm A","dddd, MMMM D, YYYY h:mm A","ddd, MMM D, YYYY h:mm A"],"qu":["h:mm A","h:mm:ss A","MM/DD/YYYY","MMMM D, YYYY","MMM D, YYYY","MMMM D, YYYY h:mm A","MMM D, YYYY h:mm A","dddd, MMMM D, YYYY h:mm A","ddd, MMM D, YYYY h:mm A"],"ro":["H:mm","H:mm:ss","DD.MM.YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY H:mm","D MMM YYYY H:mm","dddd, D MMMM YYYY H:mm","ddd, D MMM YYYY H:mm"],"ru":["H:mm","H:mm:ss","DD.MM.YYYY","D MMMM YYYY .","D MMM YYYY .","D MMMM YYYY ., H:mm","D MMM YYYY ., H:mm","dddd, D MMMM YYYY ., H:mm","ddd, D MMM YYYY ., H:mm"],"gd-GB":["HH:mm","HH:mm:ss","DD/MM/YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY HH:mm","D MMM YYYY HH:mm","dddd, D MMMM YYYY HH:mm","ddd, D MMM YYYY HH:mm"],"sr":["H:mm","H:mm:ss","DD.MM.YYYY","D. MMMM YYYY","D. MMM YYYY","D. MMMM YYYY H:mm","D. MMM YYYY H:mm","dddd, D. MMMM YYYY H:mm","ddd, D. MMM YYYY H:mm"],"sr-Cyrl":["H:mm","H:mm:ss","DD.MM.YYYY","D. MMMM YYYY","D. MMM YYYY","D. MMMM YYYY H:mm","D. MMM YYYY H:mm","dddd, D. MMMM YYYY H:mm","ddd, D. MMM YYYY H:mm"],"ss":["h:mm A","h:mm:ss A","DD/MM/YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY h:mm A","D MMM YYYY h:mm A","dddd, D MMMM YYYY h:mm A","ddd, D MMM YYYY h:mm A"],"sd":["HH:mm","HH:mm:ss","DD/MM/YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY HH:mm","D MMM YYYY HH:mm","dddd D MMMM YYYY HH:mm","ddd D MMM YYYY HH:mm"],"si":["a h:mm","a h:mm:ss","YYYY/MM/DD","YYYY MMMM D","YYYY MMM D","YYYY MMMM D, a h:mm","YYYY MMM D, a h:mm","YYYY MMMM D [] dddd, a h:mm:ss","YYYY MMM D [] ddd, a h:mm:ss"],"sk":["H:mm","H:mm:ss","DD.MM.YYYY","D. MMMM YYYY","D. MMM YYYY","D. MMMM YYYY H:mm","D. MMM YYYY H:mm","dddd D. MMMM YYYY H:mm","ddd D. MMM YYYY H:mm"],"sl":["H:mm","H:mm:ss","DD.MM.YYYY","D. MMMM YYYY","D. MMM YYYY","D. MMMM YYYY H:mm","D. MMM YYYY H:mm","dddd, D. MMMM YYYY H:mm","ddd, D. MMM YYYY H:mm"],"es":["H:mm","H:mm:ss","DD/MM/YYYY","D [de] MMMM [de] YYYY","D [de] MMM [de] YYYY","D [de] MMMM [de] YYYY H:mm","D [de] MMM [de] YYYY H:mm","dddd, D [de] MMMM [de] YYYY H:mm","ddd, D [de] MMM [de] YYYY H:mm"],"es-DO":["h:mm A","h:mm:ss A","DD/MM/YYYY","D [de] MMMM [de] YYYY","D [de] MMM [de] YYYY","D [de] MMMM [de] YYYY h:mm A","D [de] MMM [de] YYYY h:mm A","dddd, D [de] MMMM [de] YYYY h:mm A","ddd, D [de] MMM [de] YYYY h:mm A"],"es-US":["h:mm A","h:mm:ss A","MM/DD/YYYY","MMMM [de] D [de] YYYY","MMM [de] D [de] YYYY","MMMM [de] D [de] YYYY h:mm A","MMM [de] D [de] YYYY h:mm A","dddd, MMMM [de] D [de] YYYY h:mm A","ddd, MMM [de] D [de] YYYY h:mm A"],"sw-KE":["HH:mm","HH:mm:ss","DD.MM.YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY HH:mm","D MMM YYYY HH:mm","dddd, D MMMM YYYY HH:mm","ddd, D MMM YYYY HH:mm"],"sv-SE":["HH:mm","HH:mm:ss","YYYY-MM-DD","D MMMM YYYY","D MMM YYYY","D MMMM YYYY [kl.] HH:mm","D MMM YYYY HH:mm","dddd D MMMM YYYY [kl.] HH:mm","ddd D MMM YYYY HH:mm"],"tl":["h:mm A","h:mm:ss A","MM/DD/YYYY","MMMM D, YYYY","MMM D, YYYY","MMMM D, YYYY h:mm A","MMM D, YYYY h:mm A","dddd, MMMM D, YYYY h:mm A","ddd, MMM D, YYYY h:mm A"],"tg":["HH:mm","HH:mm:ss","DD/MM/YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY HH:mm","D MMM YYYY HH:mm","dddd, D MMMM YYYY HH:mm","ddd, D MMM YYYY HH:mm"],"tzl":["HH.mm","HH.mm.ss","DD.MM.YYYY","D. MMMM [dallas] YYYY","D. MMM [dallas] YYYY","D. MMMM [dallas] YYYY HH.mm","D. MMM [dallas] YYYY HH.mm","dddd, [li] D. MMMM [dallas] YYYY HH.mm","ddd, [li] D. MMM [dallas] YYYY HH.mm"],"ta":["HH:mm","HH:mm:ss","DD/MM/YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY, HH:mm","D MMM YYYY, HH:mm","dddd, D MMMM YYYY, HH:mm","ddd, D MMM YYYY, HH:mm"],"te":["A h:mm","A h:mm:ss","DD/MM/YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY, A h:mm","D MMM YYYY, A h:mm","dddd, D MMMM YYYY, A h:mm","ddd, D MMM YYYY, A h:mm"],"tet":["HH:mm","HH:mm:ss","DD/MM/YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY HH:mm","D MMM YYYY HH:mm","dddd, D MMMM YYYY HH:mm","ddd, D MMM YYYY HH:mm"],"th":["H:mm","H:mm:ss","DD/MM/YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY  H:mm","D MMM YYYY  H:mm","dddd D MMMM YYYY  H:mm","ddd D MMM YYYY  H:mm"],"bo":["A h:mm","A h:mm:ss","DD/MM/YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY, A h:mm","D MMM YYYY, A h:mm","dddd, D MMMM YYYY, A h:mm","ddd, D MMM YYYY, A h:mm"],"uk-UA":["HH:mm","HH:mm:ss","DD.MM.YYYY","D MMMM YYYY .","D MMM YYYY .","D MMMM YYYY ., HH:mm","D MMM YYYY ., HH:mm","dddd, D MMMM YYYY ., HH:mm","ddd, D MMM YYYY ., HH:mm"],"ur-IN":["HH:mm","HH:mm:ss","DD/MM/YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY HH:mm","D MMM YYYY HH:mm","dddd D MMMM YYYY HH:mm","ddd D MMM YYYY HH:mm"],"ug":["h:mm A","h:mm:ss A","MM/DD/YYYY","MMMM D, YYYY","MMM D, YYYY","MMMM D, YYYY h:mm A","MMM D, YYYY h:mm A","dddd, MMMM D, YYYY h:mm A","ddd, MMM D, YYYY h:mm A"],"uz":["HH:mm","HH:mm:ss","DD/MM/YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY HH:mm","D MMM YYYY HH:mm","D MMMM YYYY, dddd HH:mm","D MMM YYYY, ddd HH:mm"],"ve-ZA":["h:mm A","h:mm:ss A","MM/DD/YYYY","MMMM D, YYYY","MMM D, YYYY","MMMM D, YYYY h:mm A","MMM D, YYYY h:mm A","dddd, MMMM D, YYYY h:mm A","ddd, MMM D, YYYY h:mm A"],"vi":["HH:mm","HH:mm:ss","DD/MM/YYYY","D MMMM [nm] YYYY","D MMM YYYY","D MMMM [nm] YYYY HH:mm","D MMM YYYY HH:mm","dddd, D MMMM [nm] YYYY HH:mm","ddd, D MMM YYYY HH:mm"],"cy":["HH:mm","HH:mm:ss","DD/MM/YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY HH:mm","D MMM YYYY HH:mm","dddd, D MMMM YYYY HH:mm","ddd, D MMM YYYY HH:mm"],"xh":["h:mm A","h:mm:ss A","MM/DD/YYYY","MMMM D, YYYY","MMM D, YYYY","MMMM D, YYYY h:mm A","MMM D, YYYY h:mm A","dddd, MMMM D, YYYY h:mm A","ddd, MMM D, YYYY h:mm A"],"yo":["h:mm A","h:mm:ss A","DD/MM/YYYY","D MMMM YYYY","D MMM YYYY","D MMMM YYYY h:mm A","D MMM YYYY h:mm A","dddd, D MMMM YYYY h:mm A","ddd, D MMM YYYY h:mm A"],"zu":["h:mm A","h:mm:ss A","MM/DD/YYYY","MMMM D, YYYY","MMM D, YYYY","MMMM D, YYYY h:mm A","MMM D, YYYY h:mm A","dddd, MMMM D, YYYY h:mm A","ddd, MMM D, YYYY h:mm A"]}'),q=function(t){var e="";return t.indexOf("dddd")!=-1?e+="EEEE":t.indexOf("ddd")!=-1?e+="EEE":t.indexOf("dd")!=-1?e+="EE":t.indexOf("d")!=-1&&(e+="E"),e+=" ",t.indexOf("DD")!=-1?e+="DD":t.indexOf("D")!=-1&&(e+="D"),e+=" ",t.indexOf("MMMM")!=-1?e+="MMMM":t.indexOf("MMM")!=-1?e+="MMM":t.indexOf("MM")!=-1?e+="MM":t.indexOf("M")!=-1&&(e+="M"),e+=" ",t.indexOf("YYYY")!=-1||t.indexOf("yyyy")!=-1?e+="YYYY":t.indexOf("YY")==-1&&t.indexOf("yy")==-1||(e+="YY"),e+=" ",t.indexOf("HH")!=-1||t.indexOf("hh")!=-1?e+="hh":t.indexOf("H")==-1&&t.indexOf("h")==-1||(e+="h"),e+=" ",t.indexOf("mm")!=-1?e+="mm":t.indexOf("m")!=-1&&(e+="m"),e+=" ",t.indexOf("ss")!=-1?e+="ss":t.indexOf("s")!=-1&&(e+="s"),e+=" ",t.indexOf("ZZ")!=-1||t.indexOf("zz")!=-1?e+="zz":t.indexOf("Z")==-1&&t.indexOf("z")==-1||(e+="z"),t.indexOf("HH")!=-1&&(e=e.replaceAll("hh","HH")),e=e.trim()},K=function(t,e){if(t||(t="DD MM YYYY"),e||(e="en-US"),z.SUPPORTED_DATE_FORMATS.includes(t))return t;var i,n=[];n=G[e]?G[e]:G["en-US"];var r=n.indexOf(t);return i=r!=-1?$[r]:q(ZWDate.getMomentFormat(t)),V.indexOf(i)!=-1&&(i=i.replace("D","DD")),i};z.migrateMomentToIntlFormat=K,z.migrateMomentFormat=function(t){if(t.hasOwnProperty("isauto")||(t.isauto=1),t.val||(t.val=(new Date).getTime()),!t.date_info){var e="en-US";if(t.ffInfo&&t.ffInfo.locale)e=t.ffInfo.locale;else if(t.locale)for(var i=W.length,n=0;n<i;n++)if(j[n]||(j[n]=W[n].toLocaleLowerCase()),j[n]==t.locale){e=W[n];break}var r,s=editorProps&&editorProps.userInfo&&editorProps.userInfo.timezone||"America/Los_Angeles",o="",a=!1,l=[];l=G[e]?G[e]:G["en-US"];var c=t.datefmt||t.ffInfo&&t.ffInfo.format;if(c){var u=l.indexOf(c);r=u!=-1?$[u]:q(ZWDate.getMomentFormat(c))}else r="DD MM YYYY";if("fillablefield"==t.type)return void(t.ffInfo.format=r);a&&(o=r,r="custom"),delete t.datefmt,delete t.locale,t.date_info={input:{locale:e,timezone:s,format:r,custom_format:o},output:{locale:e,timezone:s,format:r,custom_format:o}}}},z.prototype.getOriginalUTC=function(){return this._originalUTC},z.prototype.getDateObj=function(){return this._date},z.prototype.setDateObj=function(t){this._date=t},z.prototype.getLocale=function(){return this._locale},z.prototype.setLocale=function(t){this._locale=t},z.prototype.getTimezone=function(){return this._timezone},z.prototype.setTimezone=function(t){this._timezone=t},z.prototype.getLocaleFormattedFormat=function(t,e,i){var n=T(t);e=e||this.getLocale(),i=i||this.getTimezone(),n[z.CONSTANTS.INTL_FORMAT.TYPES.TIMEZONE]=i;var r=w(this.getDateObj(),e,n);this.setLocale(e),this.setTimezone(i);for(var s,o,a=Object.keys(n),l=[z.CONSTANTS.INTL_FORMAT.TYPES.HOURCYCLE,z.CONSTANTS.INTL_FORMAT.TYPES.TIMEZONE],c=B(this.getDateObj(),e,n),u=0,h=c.length;u<h;u++){if(s=c[u],o=s.type,l.contains(o))return;a.contains(o)&&(r=r.replace(s.value,b(o,n[o])))}return r},z.prototype.format=function(t,e,i){var n=T(t);return e=e||this.getLocale(),i=i||this.getTimezone(),n[z.CONSTANTS.INTL_FORMAT.TYPES.TIMEZONE]=i,w(this.getDateObj(),e,n)};var J="(EEEE|EEE|DD|D|MMMM|MMM|MM|M|YYYY|YY|HH|H|hh|h|mm|ss|zz|z)",X=RegExp(J,"gm");z.prototype.customFormat=function(t,e,i){if(t){e||(e=this.getLocale()),i||(i=this.getTimezone()),this.setLocale(e),this.setTimezone(i);for(var n,r,s=t.split(X),o=s.length,a=0;a<o;a++)if(n=s[a],""!=n){switch(r=null,n){case"DD":r=this.getDay("2-digit");break;case"D":r=this.getDay("numeric");break;case"MMMM":r=this.getMonth("long");break;case"MMM":r=this.getMonth("short");break;case"MM":r=this.getMonth("2-digit");break;case"M":r=this.getMonth("numeric");break;case"YYYY":r=this.getYear("numeric");break;case"YY":r=this.getYear("2-digit");break;case"EEEE":r=this.getWeekday("long");break;case"EEE":r=this.getWeekday("short");break;case"HH":r=this.getHours("2-digit");break;case"H":r=this.getHours("numeric");break;case"hh":r=this.getHours("2-digit",!0);break;case"h":r=this.getHours("numeric",!0);break;case"mm":r=this.getMinutes("2-digit");break;case"ss":r=this.getSeconds("2-digit");break;case"zz":r=this.getTimezoneName("long");break;case"z":r=this.getTimezoneName("short")}null!=r&&(s[a]=r)}return s.join("")}},z.prototype.diff=function(t,e,i){var n=S(this.getDateObj(),t.getDateObj(),e);return i||(n=Math.trunc(n)),n},z.prototype.calendar=function(){return k(this)},z.prototype.fromNow=function(){return H(this)},z.prototype.getDay=function(t){return(!t||"numeric"!=t&&"2-digit"!=t)&&(t="numeric"),u(this.getDateObj(),this.getLocale(),this.getTimezone(),t)},z.prototype.getMonth=function(t){return(!t||"long"!=t&&"short"!=t&&"numeric"!=t&&"2-digit"!=t)&&(t="long"),h(this.getDateObj(),this.getLocale(),this.getTimezone(),t)},z.prototype.getYear=function(t){return(!t||"numeric"!=t&&"2-digit"!=t)&&(t="numeric"),d(this.getDateObj(),this.getLocale(),this.getTimezone(),t)},z.prototype.getWeekday=function(t){return(!t||"long"!=t&&"short"!=t)&&(t="long"),p(this.getDateObj(),this.getLocale(),this.getTimezone(),t)},z.prototype.getHours=function(t,e){return t||(t="numeric"),f(this.getDateObj(),this.getLocale(),this.getTimezone(),t,!!e)},z.prototype.getMinutes=function(t){return t||(t="numeric"),m(this.getDateObj(),this.getLocale(),this.getTimezone(),t)},z.prototype.getSeconds=function(t){return t||(t="numeric"),g(this.getDateObj(),this.getLocale(),this.getTimezone(),t)},z.prototype.getTimezoneName=function(t){return(!t||"long"!=t&&"short"!=t)&&(t="long"),v(this.getDateObj(),this.getLocale(),this.getTimezone(),t)},z.prototype.getFirstDateOfWeek=function(){var t=new Date(this.getDateObj());return t.setDate(t.getDate()-t.getDay()),t.setHours(0,0,0,0),new z(t,null,this.getLocale(),this.getTimezone(),!1)},z.prototype.adjustDate=function(t){var e=P(t),i=new Date(this.getDateObj().getTime());if(i.setFullYear(i.getFullYear()+e.year),i.setMonth(i.getMonth()+e.month),i.getDate()!=this.getDateObj().getDate()&&i.setDate(0),i.setDate(i.getDate()+e.date),i.setHours(i.getHours()+e.hour),i.setMinutes(i.getMinutes()+e.minute),t&&t.filter&&t.filter.exclude){var n=t.mode||"add",r=t.filter.excludeValue,s=z.calculateDaysWeekendsBetween(this.getDateObj(),i),o="weekdays"==r?s.weekdays:s.weekends;Z(i,o,n,r)}this.setDateObj(i)};var Z=function(t,e,i,n){for(var r,s;e>0;){if(r=0,t.setDate(t.getDate()+("add"==i?1:-1)),s=t.getDay(),"weekends"==n&&[0,6].contains(s))6==s?r="add"==i?2:-1:0==s&&(r="add"==i?1:-2);else if("weekdays"==n&&[1,2,3,4,5].contains(s))switch(s){case 1:r="add"==i?5:-1;break;case 2:r="add"==i?4:-2;break;case 3:r="add"==i?3:-3;break;case 4:r="add"==i?2:-4;break;case 5:r="add"==i?1:-5}0!=r&&t.setDate(t.getDate()+r),--e}return t};return z}();ATTR_BODY=JSON.parse('{"DS_COLCOLS":"cols","DS_COLCOUNT":"count","DS_COLSPACE":"space","DS_COLWID":"width","DS_COLISEQWID":"iseqwidth","DS_COLSEP":"seperator","DS_DEFAULTSPACE":"defaultspace","DS_WEBFONTS":"webfonts","DS_PS":"ps","DS_PW":"pw","DS_PH":"ph","DS_SPLANG":"splang","DS_LANGUAGE":"language","DS_LANGUAGE_DETAILS":"languagedetails","DS_OR":"or","DS_UN":"un","DS_AUTOLINK":"autolink","DS_AUTOLIST":"autolist","DS_AUTODATEFORMAT":"autoDateFmt","DS_AUTODATELOCALE":"autoDateLoc","DS_DATEFORMAT":"dateFmt","DS_AUTOEMBED":"autoembed","DS_PASTEOPTIONS":"pasteOptions","DS_AUTOCAPS":"autocaps","DS_AUTOCORRECTCAPSLOCK":"autocaps_correct","DS_AUTOCAPSDAYS":"autocaps_days","DS_AUTOCOMPLETE":"autocomplete","DS_AUTOSMARTQUOTES":"autosmartquotes","DS_AUTOENDASH":"autoendash","DS_AUTOEMDASH":"autoemdash","DS_BGC":"bgc","DS_DARK_MODE":"darkmode","DS_FOCUS_TYPING":"focus_typing","DS_TYPEWRITER_SOUND":"typewriter_sound","DS_DIR":"dir","DS_LS":"ls","DS_ML":"ml","DS_MR":"mr","DS_MB":"mb","DS_MT":"mt","DS_HT":"ht","DS_FB":"fb","DS_SB":"sb","DS_VIEW":"view","DS_SA":"sa","DS_EN":"endnote","DS_FN":"footnote","DS_TPS":"tps","DS_INSPL":"inspl","DS_COMM":"comm","DS_PREF":"ds_pref","DS_AUTOCORRECTS":"autocorrects","DS_HEADINGSTYLES":"headingstyles","DS_PARASTYLES":"paraStyles","DS_STYLES":"styles","DS_STYLE_UI_INFO":"styleUIInfo","DS_PARA":"para","DS_THEME":"theme","DS_PADTHEME":"padtheme","DS_FONT":"font","DS_PGBRK":"pgbrk","DS_COLBRK":"colbrk","SP_IGNOREUPPERCASE":"sp_ignoreuppercase","SP_IGNORENUMBERED":"sp_ignorenumbered","SP_IGNOREMIXEDCASE":"sp_ignoremixedcase","WQ_WORDYPHRASES":"wq_wordyphrases","WQ_REPHRASABLESENTENCES":"wq_rephrasablesentences","WQ_IMPROPERWORDCHOICES":"wq_improperwordchoices","WQ_INFORMALWRITING":"wq_informalwriting","WQ_NONINCLUSIVELANGUAGE": "wq_noninclusivelanguage","WQ_CLICHES":"wq_cliches","PROOFING":"proofing","PROOFING_SP":"sp","PROOFING_GRAMMAR":"grammar","PROOFING_WQ":"wq","DS_TABLETHEME":"tabletheme","PREF":"pref","DS_TOC":"toc","DS_HIDERUL":"hideruler","DS_BANNERVER":"bannerver","DS_HF_TYPE":"hf_type","WM_URL":"wm_url","WM_TYPE":"wm_type","WM_SIZE":"wm_size","WM_AN":"wm_an","WM_FF":"wm_ff","WM_FGC":"wm_fgc","WM_FS":"wm_fs","WM_PURL":"wm_purl","WM_TXT":"wm_txt","WM_OP":"wm_op","WM_OURL":"wm_ourl","TC_ISENABLED":"tc_isEnabled","TC_ON_BY_ZUID":"tc_on_by_zuid","DS_CUSTOM_FONT":"custom_font","TC_ON_BY_COLLAB":"tc_on_by_collab","TC_OFF_BY_COLLAB":"tc_off_by_collab","TC_COLLAB_LIST":"tc_collab_list","TC_DISPLAYMODE":"tc_displayMode","DS_SHOWNONPRINTINGCHAR":"show_non_printing_char","DS_PAGENUMBER":"pagenumber","DS_PAGENUMBER_FORMAT":"pageno_format","DS_PAGENUMBER_STARTS_AT":"pageno_starts_at","USER_IN_5_0":"USER_IN_5_0","MM_INITIATE_EMAIL":"mm_initiate_email","MM_COMPLETE_EMAIL":"mm_complete_email","USER_IN":"user_in", "IMG_COMPRESSION":"image_compression","DS_VIEW_WIDTH":"view_width","SPECIAL_MARGINS":"specialMargins"}'),ATTR_TEXT=JSON.parse('{"TS_FF":"ff","TS_FW":"fw","TS_FW_I":"fw_i","MM_FIELDNAME":"mm_fld","MM_INFO":"mminfo","TS_CS":"cs","TS_FV":"fv","TS_FS":"fs","TS_SIZE":"size","TS_FGC":"fgc","TS_BGC":"bgc","TS_TD":"td","TS_SP":"sp","TS_GR":"grammar","TS_PROOFING_WQ":"proofing_wq","TS_VA":"va","BID":"bid","TS_NULL":"ts_null","TS_AUTO_COREECT":"autocorrect","TS_TT":"tt","CHAR_STY":"char_sty","TS_HD":"heading","SORT_INFO":"sortinfo"}'),TEXT_ATTR=JSON.parse('{"font-family":"ff","font-size":"size","font-weight":"fw","font-style":"fs","font-variant":"fv","color":"fgc","text-decoration":"td","letter-spacing":"cs","background-color":"bgc","vertical-align":"va"}'),ATTR_PARAGRAPH=JSON.parse('{"PS_NULL":"ps_null","PS_SB":"sb","PS_DIR":"dir","PS_SA":"sa","PS_ML":"ml","PS_MR":"mr","TEXTFORMAT":"textFormat","PS_PL":"pl","PS_PR":"pr","PS_PT":"pt","PS_PB":"pb","PS_TI":"ti","PS_BGC":"bgc","PS_TPS":"tps","PS_LS":"ls","PS_RI":"ri","PS_AL":"al","PS_HD":"hd","PS_TYPE":"ps_type","LS_DATA":"ls_data","PS_FLI":"fli","PS_WS":"ws","PS_TS":"ts","PS_H0":"h0","EN_WO":"en_wo","EN_BL":"en_bl","EN_PB":"en_pb","EN_KN":"en_kn","PS_DROPCAP":"isDropCapPresent","PS_CODE":"code","CUST_DATA":"data-custom_data","BULLET_ID":"bullet_id","PS_LINE_RULE":"lineRule"}'),PARA_ATTR=JSON.parse('{"margin-top":"sb","margin-bottom":"sa","direction":"dir","margin-left":"ml","margin-right":"mr","padding-left":"pl","padding-right":"pr","text-indent":"ti","background-color":"bgc","line-height":"ls","right-indent":"ri","text-align":"al","word-spacing":"ws"}'),ATTR_TOC=JSON.parse('{"theme":"theme","level":"level","leader":"leader","al":"al","showNo":"showNo","al_right":"al_right"}'),ATTR_IMAGE=JSON.parse('{"I_SRC":"src","I_WID":"wid","I_CALC_WID":"calc_wid","I_WID_UN":"wid_un","I_HT_UN":"ht_un","I_HT":"ht","I_OP":"op","I_AL":"al","I_IMGSIZE":"zoom","I_LATEXEXP":"latexexp","I_ID":"id","I_ALT":"alt","I_TOOLTIP":"tooltip","I_ML":"ml","I_MR":"mr","I_MT":"mt","I_MB":"mb","I_SHAPENAME":"shapeName","I_SHAPEDATA":"shapeData","I_LEFT":"left","I_TOP":"top","I_ROTATE":"rotation","I_LINKDATA":"linkData","I_CROPRECT":"cropRect","I_ORGINALWID":"orginalWid","I_ORGINALHT":"orginalHt","I_H_POSITION":"positionH","I_V_POSITION":"positionV","I_POSITION_FROM":"from","I_POSITION_TYPE":"type","I_FITAS":"fitAs","BARCODE_INFO":"barcode_info","QRCODE_INFO":"qrcode_info","ALTSRC":"altSrc","I_ALIGN_VAL":"alignVal","I_WRAP_TYPE":"wrapType","WM_INFO":"wm_info"}'),ATTR_TABLE=JSON.parse('{"TBLS_AL":"al","TBLS_BGC":"bgc","TBLS_CP":"cp","TBLS_WID":"wid","TBLS_BGIMG":"bgimg","TBLS_THEME":"theme","TBLS_THEMENAME":"themeName","SHEET_RANGE_INFO":"sheetRangeInfo","TBLS_VER":"ver","TBLS_COLS":"cols","TBLS_ML":"ml","TBLS_DIR":"dir","TBLS_THEADER":"theader","TBLS_TBL_BGC":"z_tbl_bgc","TBLS_THEME_OBJECT":"themeObj","TBLS_BGIMG_NAME":"bgimg-name","TBLS_SUBTYPE":"subtype"}'),ATTR_ROW=JSON.parse('{"TRS_HT":"ht","TRS_BGC":"bgc","TRS_HTRULE": "htRule"}'),ATTR_CELL=JSON.parse('{"TDS_MRG":"merge","TDS_BGC":"bgc","TDS_VA":"va","TDS_TXTAL":"txtal","TDS_CSPAN":"cspan","TDS_RSPAN":"rspan","TDS_HT":"ht","TDS_WID":"wid","TDS_COL_WT":"wt","TDS_PL":"pl","TDS_PR":"pr","TDS_PB":"pb","TDS_PT":"pt","TDS_BGIMG":"bgimg","Z_TD_BGC":"z_td_bgc","TDS_BGIMG_NAME":"bgimg-name","TDS_BORDERS": "borders"}'),ATTR_CELL_MRG=JSON.parse('{"FC":"fc","HMP":"hmp","VMP":"vmp"}'),ATTR_SECTION=JSON.parse('{"SID":"sid","ST":"st","PARENTID":"parentid","CTYPE":"ctype","USERNAME":"uname","NAME":"name","TIME":"time","USERID":"uid","COLOR":"color","RESOLVE":"resolve","BREAK_TYPE":"breakType","PS":"ps","OR":"or","PW":"pw","PH":"ph","MT":"mt","MR":"mr","MB":"mb","ML":"ml","HT":"ht","FB":"fb","HEADER_IDS":"headerIds","FOOTER_IDS":"footerIds","HF_TYPE":"hf_type","COLS":"cols","GUTTER":"gutter","ENDNOTE":"endnote","FOOTNOTE":"footnote"}'),ATTR_HR=JSON.parse('{"BID":"bid","HR_AL":"al","HR_WID":"wid","HR_HT":"ht"}'),ATTR_AUTOFIELD=JSON.parse('{"FIELDTYPE":"ftype","VALUE":"val","DATEFMT":"datefmt","LOCALE":"locale","DEFINEDAUTHOR":"definedauthor","ISAUTO":"isauto","SECTIONPAGES":"sectionPages","FORMULA":"formula","FIELDSUBTYPE":"fieldSubType","DATEINFO":"date_info","LABEL":"label","SEQUENCE_INFO":"sequence_info"}'),DATE_TYPE=JSON.parse('{"CURRENT":"currentdate","CREATED":"createddate","LAST_MODIFIED":"lastmodifieddate"}'),ATTR_FORMULA=JSON.parse('{"SEPARATOR":"separator"}'),ATTR_SIGNERFIELD=JSON.parse('{"SIGNTYPE":"signType","SIGNSERVICE":"signService","SFINFO":"sfInfo","SFTYPE":"sfType","VALUE":"value","SRC":"src","ETAG":"eTag","RECIPIENT":"recipient","SIZE":"size","NAME":"name","MANDATORY":"mandatory"}'),SIGN_TYPE=JSON.parse('{"ESIGN":"esign","DIGISIGN":"digisign"}'),ATTR_LINK=JSON.parse('{"LINK_TYPE":"lnktype","LINK_URL":"url","LINK_TARGET":"target","LINK_TOOLTIP":"tooltip","RELATIVE_LINK_CONST_VAL":"$(doc_url)/"}'),ATTR_COMMON=JSON.parse('{"TYPE":"type","SUBTYPE":"subType","CLS":"cls","ST":"st","ID":"id","NAME":"name","IDX":"idx","START":"start","END":"end","FIELDINFO":"fieldinfo","BORDERS":"borders","BULLET_ID":"bullet_id","CUSTOM_DATA":"data-custom_data"}'),ATTR_SHAPE=JSON.parse('{"BGSHAPE":"bgshape"}'),ATTR_CHART=JSON.parse('{"CHART":"chart","WID":"wid","HT":"ht","SHEET_ID":"sheet_id","CHART_ID":"chart_id","CHART_TYPE":"chartType"}'),ATTR_WIDGET=JSON.parse('{"WIDGET":"widget","TYPE":"type","SUBTYPE":"subType","CUSTOM_DATA":"customdata","THUMBNAIL":"thumbnail","SRC":"widgetSrc","CONTROLS":"controls","SHEET_INFO":"sheetInfo","SERVICE":"service","ID":"id","WID":"wid","HT":"ht","WIDTH":"width","TUBEID":"id","HEIGHT":"height","MAPDETAILS":"mapDetails","SERVICE_SHOW":"SHOW","SERVICE_DOCS":"DOCS","SERVICE_REPORTS":"REPORTS","SERVICE_SHEET":"SHEET","SERVICE_YOUTUBE":"YOUTUBE","SERVICE_SHEETCHART":"SHEETCHART","SERVICE_SHEETCHARTIMG":"SHEETCHARTIMG","SERVICE_SHEETEXTERNAL":"SHEETEXTERNAL","SERVICE_SHEETINTRANET":"SHEETINTRANET","WIDGET_DEF_IMG":"images/spacer.gif","SHEET_DEF_IMG":"images/sheet_embed.png","ICONMAP":{"CITIES":"ui-prd-logo-cities","ANIMOTO":"ui-prd-logo-animoto","BLIP":"ui-prd-logo-blip","DAILYMOTION":"ui-prd-logo-dailymotion","DOTSUB":"ui-prd-logo-dotsub","FACEBOOK":"ui-prd-logo-facebook","FLICKR":"ui-prd-logo-flickr","GOOGLE":"ui-prd-logo-google","LIVESTREAM":"ui-prd-logo-livestream","MOZILLA":"ui-prd-logo-mozilla","SALESFORCE":"ui-prd-logo-salesforce","SCRIBD":"ui-prd-logo-scribd","SLIDESHARE":"ui-prd-logo-slideshare","TEACHERTUBE":"ui-prd-logo-teachertube","TECHSMITH":"ui-prd-logo-techsmith","TED":"ui-prd-logo-ted","TWITTER":"ui-prd-logo-twitter","VIDDLER":"ui-prd-logo-viddler","VIMEO":"ui-prd-logo-vimeo","VOICETHREAD":"ui-prd-logo-voicethread","WORDPRESS":"ui-prd-logo-wordpress","YAHOO":"ui-prd-logo-yahoo","YOUTUBE":"ui-prd-logo-youtube","ZOHO":"ui-prd-logo-zoho"},"RENDERTYPE":"renderType","RENDERTYPE_LIVE":"live"}'),ATTR_WIDGET.URL_REGEX=/^(http(s?)\:\/\/)[-.\w]*(\/?)([a-zA-Z0-9\|\(\)~\-\.\!\?\,\:\'\/\\\+=&amp;%\$#_@\P{InBasicLatin}]*)?$/,ATTR_WIDGET.YT_VIDEO_REGEX=/^((http|https)?\:\/\/)?(www\.)?(?:youtu\.be\/|youtube\.com(?:\/embed\/|\/v\/|\/watch\?v=|\/user\/\S+|\/ytscreeningroom\?v=))([\w\-]{10,12})\b$/,ATTR_WIDGET.ZOHO_OFFICE_REGEX="^(?:|http(?:|s)://)(?:|(?:[^/])+[.])(?:zoho.(?:com|com.cn|eu)(/writer|/sheet|/show))(?:|/.*)$",ATTR_WIDGET.VIMEO_VIDEO_REGEX=/(?:\/(?:channels\/[\w]+|(?:(?:album\/\d+|groups\/[\w]+)\/)?videos?))?\/(\d+)/i,ATTR_WIDGET.DAILYMOTION_REGEX=/(?:\/video|ly)\/([A-Za-z0-9]+)/i,ATTR_BORDERS=JSON.parse('{"TYPE":"type","WIDTH":"width","COLOR":"color","SPACE":"space","BORDER_TYPE":"border-type","B_SVG":"b-svg","B_IMG":"b-img","BORDER_DATA":"border-data","BORDER_DISPLAY":"border-display","BORDER_TOP":"border-top","BORDER_LEFT":"border-left","BORDER_RIGHT":"border-right","BORDER_BOTTOM":"border-bottom","BORDER_BETWEEN":"border-between","BORDER_RADIUS":"border-radius","RADIUS_TOPLEFT":"br-topLeft","RADIUS_TOPRIGHT":"br-topRight","RADIUS_BOTTOMLEFT":"br-bottomLeft","RADIUS_BOTTOMRIGHT":"br-bottomRight"}'),ATTR_PAGEBORDERS=JSON.parse('{"ALL_PAGES":0,"FIRST_PAGE_ONLY":1,"EXCEPT_FIRST_PAGE":2}'),ATTR_FILLABLEFIELD=JSON.parse('{"FF_CHECKED":"checked","FF_CURRENCY_CODE":"currencyISOCode","FF_CURRENCY_SYMBOL":"currencySymbol","FF_DECIMAL_PLACES":"decimalPlaces","FF_DECIMAL_SEPARATOR":"decimalSeparator","FF_DISABLED":"disabled","FF_FORMAT":"format","FF_NUMBER_FORMAT":"numberFormat","FF_HELP_TEXT":"helpText","FF_INFO":"ffInfo","FF_LIST":"list","FF_MANDATORY":"mandatory","FF_MAX_LENGTH":"maxLength","FF_NAME":"name","FF_SELECTED_INDEX":"selectedIndex","FF_SIZE":"size","FF_SUBTYPE":"subType","FF_TYPE":"ffType","FF_THOUSAND_SEPARATOR":"thousandSeparator","FF_USE_CURRENCY_SYMBOL":"useCurrencySymbol","FF_VALUE":"value","FF_WIDTH_UNIT":"wid_un","FF_WIDTH":"wid","FF_HEIGHT_UNIT":"ht_un","FF_HEIGHT":"ht","FF_ROTATE":"rotate","FF_TOP":"top","FF_LEFT":"left","FF_POSITIONV":"positionV","FF_POSITIONH":"positionH","FF_FIT_TYPE":"fitType", "FF_GROUP_NAME":"groupName", "FF_OPTIONS":"options", "FF_CHECKED_VALUE":"checkedValue", "FF_UNCHECKED_VALUE":"uncheckedValue"}'),IMAGE_FIT_TYPE=JSON.parse('{"FIXED":"fixed","FLUID":"fluid"}'),MARGINS_TYPE=JSON.parse('{"MIRRORMARGINS":"mirrorMargins"}'),ATTR_CUSTOM=JSON.parse('{"DISPLAY_TYPE":"display_type","DISPLAY_STYLE":"display_style"}');var UNITS={PIXELS:"px",MILLIMETERS:"mm",INCHES:"in",PERCENTAGE:"%"};Conversions.oneInchInMM=25.4,Conversions.globalUnit=UNITS.INCHES,Conversions.init=function(t){Conversions.globalUnit=t||Conversions.globalUnit,Conversions.globalUnit===UNITS.INCHES?(Conversions.globalUnitInPx=96,Conversions.isInInches=!0,Conversions.isInMM=!1,Conversions.showUnit='"',Conversions.step=.125,Conversions.cellPaddingMinValue=0,Conversions.cellPaddingStep=.01,Conversions.deltaForInnerTable=.1,Conversions.defaultCellPadding="0.063in",Conversions.defaultCellLeftRightPadding="0.063in",Conversions.defaultCellTopBottomPadding="0in",Conversions.narrowCellPadding="0.098in",Conversions.moderateCellPadding="0.118in",Conversions.wideCellPadding="0.138in",Conversions.noneCellPadding="0in",Conversions.factor=1,Conversions.headerTopDefault="0.5in",Conversions.footerBottomDefault="0.5in",Conversions.rowHtMinValue="0.23in",Conversions.multiColumnSpacingDefault="1.0in"):Conversions.globalUnit===UNITS.MILLIMETERS&&(Conversions.globalUnitInPx=3.779527559,Conversions.isInMM=!0,Conversions.isInInches=!1,Conversions.showUnit="mm",Conversions.step=1,Conversions.cellPaddingMinValue=0,Conversions.cellPaddingStep=.5,Conversions.deltaForInnerTable=5,Conversions.defaultCellPadding="1.588mm",Conversions.defaultCellLeftRightPadding="1.588mm",Conversions.defaultCellTopBottomPadding="0mm",Conversions.narrowCellPadding="2.5mm",Conversions.moderateCellPadding="3mm",Conversions.wideCellPadding="3.5mm",Conversions.noneCellPadding="0mm",Conversions.factor=25.4,Conversions.headerTopDefault="12.250mm",Conversions.footerBottomDefault="12.250mm",Conversions.multiColumnSpacingDefault="25.4mm",Conversions.rowHtMinValue="6.08mm")},Conversions.toGlobalValue=function(t){if(t){var e=t.convertor();return Conversions.isInMM?e.millimeters.toFixed(3)+UNITS.MILLIMETERS:Conversions.isInInches?e.inches.toFixed(3)+UNITS.INCHES:void 0}},Conversions.toPixels=function(t){if(t){if(/px$/i.test(t))return parseFloat(t);var e=t.convertor();return parseFloat(e.pixels.toFixed(3))}},Conversions.toGlobalUnit=function(t){if(t)return t.indexOf("in")==-1&&Conversions.isInMM||t.indexOf("mm")==-1&&Conversions.isInInches?parseFloat(parseFloat(t).toFixed(3)):Conversions.isInMM?parseFloat((parseFloat(t)*Conversions.oneInchInMM).toFixed(3)):Conversions.isInInches?parseFloat((parseFloat(t)/Conversions.oneInchInMM).toFixed(3)):void 0},Conversions.inchToPx=function(t){return void 0==t?0:(t&&"string"==typeof t&&t.match("in")&&(t=96*parseFloat(t)),parseInt(t))},Conversions.mmToPx=function(t){return void 0==t?0:(t&&"string"==typeof t&&t.match("mm")&&(t=96*parseFloat(t)/25.4),parseInt(t))},Conversions.ptToPx=function(t){return void 0==t?0:t&&"string"==typeof t&&t.match("pt")||"number"==typeof t?t=4*parseFloat(t)/3:parseInt(t)},extend(LinkedList.prototype,{addItem:function(t){this.items[t.id]=t,this.length+=1},append:function(t){t.prev=t.next=null,this.last?(this.last.next=t,t.prev=this.last):this.first=t,this.last=t,this.addItem(t)},insertAsFirst:function(t){t.prev=t.next=null,t.next=this.first,t.next&&(t.next.prev=t),this.first=t,!this.last&&(this.last=t),this.addItem(t)},insertAfter:function(t,e){t.prev=t.next=null,t.next=e.next,e.next&&(e.next.prev=t),t.prev=e,e.next=t,!t.next&&(this.last=t),!t.prev&&(this.first=t),this.addItem(t)},remove:function(t){return t.next&&(t.next.prev=t.prev),t.prev&&(t.prev.next=t.next),this.first==t&&(this.first=t.next||null),this.last==t&&(this.last=t.prev||null),t.next=null,t.prev=null,this.items[t.id]&&(this.length-=1),delete this.items[t.id],t},isEmpty:function(){return 0==this.length},hasItem:function(t){return this.items.hasOwnProperty(t.id)},getItemById:function(t){return this.items[t]},getItemAtIndex:function(t){for(var e=this.first,i=0;e;){if(i===t)return e;i++,e=e.next}}}),ZWClientLogger=function(t){function e(t){this.logStr="",this.disabled=!1,this.module=t}var i=new t,n="";e.prototype.enable=function(){this.disabled=!1},e.prototype.disable=function(){this.disabled=!0},e.prototype.log=function(t,e,i){this.disabled!==!0&&(t+=e?"; Details: "+JSON.stringify(e)+"\n":"\n",i=i||{},this.logStr+=t,n+=t,(i.sendMail||i.saveLog)&&this.sendLog(i))},e.prototype.printLog=function(){i.log(this.logStr)},e.prototype.sendLog=function(t){var e={additionalClientInfo:this.module.getAdditionalErrorMailInfo(),filePrefix:this.module.getLogFilePrefix(),shouldSendMail:t.sendMail,shouldWriteToFile:t.saveLog};return o(t.errorCode,this.logStr,e)};var r=function(){i.log(n)},s=function(t){var e={additionalClientInfo:{},shouldSendMail:t.sendMail,shouldWriteToFile:t.saveLog,filePrefix:this.module.getLogFilePrefix()};return o(t.errorCode,n,e)},o=function(t,e,i){var n=new Deferred,r=function(t){n.reject(t)},s={},o={};try{o.additionalClientInfo={},o.shouldSendMail=!0,o.shouldWriteToFile=!1,ZWJSONUtils.mergeJsonObjs(o,i),o.logInfo=e,s.clientinfo=JSON.stringify(o),s.errorcode=t,J.ajax({type:"POST",global:!1,url:ZWNetworkUtils.getNiceUrlPrefix("util/clienterrorlog"),data:s,dataType:"json",beforeSend:function(t){ZWNetworkUtils.setCsrfTokenInHeader(t)},error:function(t){var e={STATUS:OPERATION_STATUS.ERROR,exception:t};r(e)},success:function(t){n.resolve(t)}})}catch(t){var a={STATUS:OPERATION_STATUS.ERROR,exception:t,reason:"Error preparing client details"};r(a)}return n.promise()},a=function(t){return new e(t)};return{printLog:r,sendLog:s,sendToServer:o,createNewInstance:a}}(ZWConsole);var SECTION_TYPES={CONTENT:"content",HEADER:"header",FOOTER:"footer",ENDNOTE:"endnote",FOOTNOTE:"footnote",TEXTBOX:"textbox"},BREAK_TYPES={CONTINUOUS:1,NEXT_PAGE:2,ODD_PAGE:3,EVEN_PAGE:4},NOTE_RESTART_NUM={CONTINUOUS:0,EACH_SECTION:1,EACH_PAGE:2},NOTE_POSITION={SECT_END:0,PAGE_BOTTOM:1,BENEATH_TEXT:2,DOC_END:3},HF_SECTIONS=[SECTION_TYPES.HEADER,SECTION_TYPES.FOOTER],PAGINATING_SECTIONS=[SECTION_TYPES.CONTENT,SECTION_TYPES.ENDNOTE,SECTION_TYPES.FOOTNOTE],NOTE_SECTIONS=[SECTION_TYPES.ENDNOTE,SECTION_TYPES.FOOTNOTE],META_SECTIONS=[SECTION_TYPES.ENDNOTE,SECTION_TYPES.FOOTNOTE,SECTION_TYPES.TEXTBOX],SECTION_SEQUENCE=[SECTION_TYPES.TEXTBOX,SECTION_TYPES.ENDNOTE,SECTION_TYPES.FOOTNOTE,SECTION_TYPES.HEADER,SECTION_TYPES.FOOTER,SECTION_TYPES.CONTENT],BREAKS={PAGE_BREAK:"pgbrk",COLUMN_BREAK:"colbrk"},LAYOUT_STYLE_PROPS=[ATTR_SECTION.PS,ATTR_SECTION.PW,ATTR_SECTION.PH,ATTR_SECTION.OR],DOCUMENT_OPERATIONS={NONE:"none",SCROLL:"scroll",LOAD:"load",APPLY_OP:"applyop",APPLY_COLLABORATOR_OP:"collabop",INSERT_CHAR:"InsertChar"},VIEW={LINE:"line",PARA:"para",TABLE:"table",ROW:"row",CELL:"cell",TOC:"toc",HR:"hr",COLUMN:"column",CONTENT:"content",PAGE:"page",SECTION:"section",DOCUMENT:"document"},RECT={SELECTION:"selection",BACKGROUND:"background",BORDER:"border"},MEASURE_FROM={TEXT:"Text",EDGE:"Edge"},EVENTS={},DOCUMENT={LOADING_PROGRESS:"Document/LoadingProgress",LOADING_COMPLETE:"Document/LoadingComplete",COMMAND_PROGRESS:"DocOperation/CommandProgress",DOCTREE_INITIALIZED:"doctree/initialized",DTVIEWMANAGER_INITIALIZED:"DTViewManager/initialized",DOCTREE_DESTROYED:"Document/doctree/destroyed",DTDOCUMENT_DESTROYED:"DTDocument/destroyed",DTVIEWMANAGER_DESTROYED:"DTViewManager/destroyed",LAYOUT_MANAGER_INITIALIZED:"DocumentLayoutManager/initialized",LAYOUT_MANAGER_DESTROYED:"DocumentLayoutManager/destroyed",PAGINATION_COMPLETE:"Document/Pagination/Complete",REFRESH_TREE:"refreshTree",BEFORE_TREE_DESTROY:"Document/beforeTreeReset",AFTER_TREE_DESTROY:"Document/afterTreeReset",VIEW_CHANGED:"Document/view/changed",PAGE_BACKGROUND_CHANGED:"page/background/changed",SHAPE_REMOVE_WATERMARK:"Document/Shape/RemoveWatermark",LAYOUT_CHANGED:"Document/layout/changed",REFRESH_DOCVIEWS:"Document/refresh/docviews",PAGE_OFFSET_UPDATED:"Document/pageoffset/updated",PAGE_ADDED_TO_LAYOUT:"Document/page/addedToLayout",PAGE_REMOVED_FROM_LAYOUT:"Document/page/removedFromLayout",MAX_PAGE_WIDTH_UPDATED:"Document/max_page_width/updated",HTML_PREPROCESS_COMPLETED:"Document/HtmlPreProcess/Completed"},GROUP={PAGE_BORDER_CHANGED:"Group/PageBorderChanged",HF_VISIBILITY_UPDATE:"HF/Visibility/Update"},DTNODE={SECTION_ADDED:"section/added",SECTION_UPDATED:"section/updated",SECTION_REMOVED:"section/removed",SECTION_BUILD_STARTED:"sectionbuild/started",SECTION_BUILD_PROGRESS:"sectionbuild/progress",SECTION_BUILD_COMPLETE:"sectionbuild/complete",SECTION_BUILD_STOPPED:"sectionbuild/stopped",SECTION_BUILD_PRE_PROCESS_STARTED:"sectionbuild/pre_process_started",SECTION_BUILD_PRE_PROCESS_COMPLETE:"sectionbuild/pre_process_complete",ITEM_BUILD_START:"itemBuild/start",ITEM_BUILD_END:"itemBuild/end",METASECTION_REFERENCE_UPDATED:"metasection/referenceupdated"},DTVIEW={SECTION_ADDED:"section/added",SECTION_UPDATED:"section/updated",SECTION_REMOVED:"section/removed",SECTION_BUILD_STARTED:"sectionbuild/started",SECTION_BUILD_COMPLETE:"sectionbuild/complete",SECTION_BUILD_PRE_PROCESS_STARTED:"sectionbuild/pre_process_started",SECTION_BUILD_PRE_PROCESS_COMPLETE:"sectionbuild/pre_process_complete",SECTION_OP_PROCESSED:"section/op/processed",VIEW_LIST_UPDATED:"view/list/updated",VIEW_ADDED:"view/added",VIEW_UPDATED:"view/updated",VIEW_REMOVED:"view/removed",VIEW_ADJUST_BORDER:"view/adjust/border",NOTE_SEQUENCE_NUMBER_UPDATED:"note/sequencenumberupdated",NOTE_CHAR_UPDATED:"NoteCharUpdated"},DOCVIEW={SECTION_ADDED:"section/added",SECTION_UPDATED:"section/updated",SECTION_STYLE_UPDATED:"section/styleupdated",SECTION_HEIGHT_UPDATED:"section/heightupdated",SECTION_TOP_UPDATED:"section/top/updated",AFTER_HF_SECTION_UPDATE:"hfsection/after/update",AFTER_HF_SECTION_BUILD_COMPLETE:"hfsection/after/build/complete",TEXTBOX_CHANGED:"textbox/changed",PAGE_CONTENT_HEIGHT_UPDATED:"page/contentheight/updated",SECTION_REMOVED:"section/removed",SECTION_ATTACHED:"section/attached",SECTION_BEFORE_DETACHED:"section/before/detached",SECTION_AFTER_DETACHED:"section/after/detached",SECTION_PROPERTIES_CHANGED:"properties/changed",SECTION_BALANCING_COMPLETE:"sectionbalancing/complete",SECTIONGROUP_LAYOUT_CHANGED:"sectiongroup/layoutchanged",CURRENT_GROUP_LAYOUT_CHANGED:"sectiongroup/currentlayoutchanged",SECTIONGROUP_ADDED:"sectiongroup/added",SECTIONGROUP_REMOVED:"sectiongroup/removed",COLUMN_ADDED:"column/added",COLUMN_UPDATED:"column/updated",COLUMN_REMOVED:"column/removed",COLUMN_MOVED:"column/moved",VIEW_BEFORE_CREATE:"view/before/create",VIEW_BEFORE_UPDATE:"view/before/update",VIEW_TOP_UPDATED:"view/top/updated",VIEW_MOVED:"view/moved",VIEW_REMOVED:"view/removed",VIEW_BEFORE_REMOVE:"view/before/remove",VIEW_ATTACHED:"view/attached",VIEW_DETACHED:"view/detached",VIEW_AFTER_CREATE:"view/after/create",VIEW_AFTER_UPDATE:"view/after/update",VIEW_ADJUST_BORDER:"view/adjust/border",HEIGHT_UPDATED:"view/height/udpated",STYLE_UPDATED:"view/style/udpated",VIEW_AFTER_UPDATE_LIST:"view/after/update_list",VIEW_AFTER_ADJUST_BORDER:"view/after/adjust_border",LINE_ADDED:"line/added",LINE_UPDATED:"line/updated",LINE_STYLE_UPDATED:"line/style/updated",LINE_RECREATED:"line/recreated",LINE_BEFORE_REMOVE:"line/before/remove",LIST_NUMBER_CHANGED:"line/listnumber/changed",PAGE_CREATED:"page/created",PAGE_UPDATED:"page/updated",PAGE_REMOVED:"page/removed",UPDATE_SURROUNDING_PAGES:"update/surrounding_pages",FLOAT_IMAGES_UPDATED:"float_images/updated",NOTE_CHAR_UPDATED:"NoteCharUpdated",PAGE_COUNT_UPDATED:"update/pagecount",PAGE_NUMBER_UPDATED:"update/pagenumber",PAGE_COUNT_UPDATED_IN_HF:"update/HF/pagecount",PAGE_NUMBER_UPDATED_IN_HF:"update/HF/pagenumber",PAGE_HEIGHT_UPDATED:"page/height/updated",PAGE_PAGINATED:"page/paginated",ROWSPAN_UPDATED:"rowspan/updated",TABLE_HEADER_ROW_UPDATED:"table/header_row/updated",ROW_VISIBILITY_UPDATED:"row/visibility/updated",AFTER_TABLE_SPLIT:"after/table/split",AFTER_TABLE_MERGE:"after/table/merge",PARAVIEW_AFTER_CREATE:"paraview/create",CELLVIEW_AFTER_CREATE:"cellview/create",ROWVIEW_AFTER_CREATE:"rowview/create",TABLEVIEW_AFTER_CREATE:"tableview/create",HRVIEW_AFTER_CREATE:"hrview/create",TOCVIEW_AFTER_CREATE:"tocview/create",PARAVIEW_AFTER_UPDATE:"paraview/update",CELLVIEW_AFTER_UPDATE:"cellview/update",ROWVIEW_AFTER_UPDATE:"rowview/update",TABLEVIEW_AFTER_UPDATE:"tableview/update",HRVIEW_AFTER_UPDATE:"hrview/update",TOCVIEW_AFTER_UPDATE:"tocview/update",PARAVIEW_BEFORE_REMOVE:"paraview/before/remove",CELLVIEW_BEFORE_REMOVE:"cellview/before/remove",ROWVIEW_BEFORE_REMOVE:"rowview/before/remove",TABLEVIEW_BEFORE_REMOVE:"tableview/before/remove",HRVIEW_BEFORE_REMOVE:"hrview/before/remove",TOCVIEW_BEFORE_REMOVE:"tocview/before/remove"},DOMVIEW={PAGE_CREATED:"DOM/page/created",PAGE_REMOVED:"DOM/page/removed",LINE_ADDED:"DOM/line/added",LINE_UPDATED:"DOM/line/updated",LINE_BEFORE_REMOVE:"DOM/line/before/remove",LINE_BEFORE_UPDATE:"DOM/line/before/update",PARAVIEW_AFTER_CREATE:"DOM/paraview/create",CELLVIEW_AFTER_CREATE:"DOM/cellview/create",ROWVIEW_AFTER_CREATE:"DOM/rowview/create",TABLEVIEW_AFTER_CREATE:"DOM/tableview/create",HRVIEW_AFTER_CREATE:"DOM/hrview/create",TOCVIEW_AFTER_CREATE:"DOM/tocview/create",PARAVIEW_AFTER_UPDATE:"DOM/paraview/update",CELLVIEW_AFTER_UPDATE:"DOM/cellview/update",ROWVIEW_AFTER_UPDATE:"DOM/rowview/update",TABLEVIEW_AFTER_UPDATE:"DOM/tableview/update",HRVIEW_AFTER_UPDATE:"DOM/hrview/update",TOCVIEW_AFTER_UPDATE:"DOM/tocview/update",PARAVIEW_BEFORE_REMOVE:"DOM/paraview/remove",CELLVIEW_BEFORE_REMOVE:"DOM/cellview/remove",ROWVIEW_BEFORE_REMOVE:"DOM/rowview/remove",TABLEVIEW_BEFORE_REMOVE:"DOM/tableview/remove",HRVIEW_BEFORE_REMOVE:"DOM/hrview/remove",TOCVIEW_BEFORE_REMOVE:"DOM/tocview/remove",VIEW_AFTER_CREATE:"DOM/view/after/create",VIEW_AFTER_UPDATE:"DOM/view/after/update",VIEW_BEFORE_REMOVE:"DOM/view/before/remove",VIEW_TOP_UPDATED:"DOM/view/top/updated"},CELL_MERGE_TYPE={FC:"fc",VMP:"vmp",HMP:"hmp",NONE:"none"},ROW_HEIGHT_RULE={EXACT:"exact",AUTO:"auto",ATLEAST:"atleast"},CELL_BACKGROUND_TYPE={COLOR:"color",IMAGE:"image",NONE:"none"},DEFAULT_PAGE_BACKGROUND_COLOR="rgb(255, 255, 255)",IMAGE_ALIGN={BOTTOM:"bottom",BEHIND:"behind",CENTER:"center",FRONT:"front",LEFT:"left",RIGHT:"right"},RENDER_STYLES={NONE:"none",AS_INLINE:"asInline",AS_STYLESHEET:"asStyleSheet"},CONDITIONAL_FIELD={FONT_FAMILY:"TeXGyreCursor",IF_START:"if(&hellip;)",ELSE:"else",IF_END:"end if",FONT_STRING:"font-weight:0;font-size:11pt;font-family:TeXGyreCursor;letter-spacing:0"},MAX_WEB_VIEW_RENDERING_HEIGHT=1e7,DEFAULT_LIST_TAB_WIDTH=24,VIEWS_DOM_SELECTOR="div.zw-paragraph,div.zw-hr,table.zw-table,tr.zw-tr,td.zw-td,div#toc",MARGIN={TOP:"margin-top",RIGHT:"margin-right",BOTTOM:"margin-bottom",LEFT:"margin-left"},PADDING={TOP:"padding-top",RIGHT:"padding-right",BOTTOM:"padding-bottom",LEFT:"padding-left"},ABSOLUTE_TO={WINDOW:"window"},TOC_PREFIX="_Toc",LINK_DEFAULT={FGC:"blue",TD:"underline"},GUTTER_POSITION={TOP:"top",LEFT:"left",RIGHT:"right"},CONTENT_TYPE={RTL:"rtl",LTR:"ltr",AN:"an"};!function(e){var t={cellshape:{nvOProps:{nvDProps:{id:"cellshape"}},props:{transform:{fliph:!1,flipv:!1,dim:{width:50,height:50},pos:{left:10,top:10}}},themeRef:{fillRef:{ref:"THEME",color:{type:"A1"}},strokeRef:{ref:"THEME",color:{type:"A1",tweaks:{shade:.5}}},fontRef:{ref:"MINOR",color:{type:"CUSTOM",rgb:[255,255,255]}}},textBody:{props:{inset:{left:10,top:5,right:10,bottom:5}},paras:[{portions:[{}]}]}},pointer:{nvOProps:{nvDProps:{id:"pointer"}},props:{transform:{fliph:!1,flipv:!1,dim:{width:20,height:20},pos:{left:10,top:10,zindex:1e4}},fill:{type:"SOLID",solid:{color:{type:"CUSTOM",rgb:[255,0,0]}}},stroke:{type:"SOLID",width:0,jointype:"MITER",fill:{type:"SOLID",solid:{color:{type:"CUSTOM",rgb:[255,255,255]}}}},geom:{type:"PRESET",preset:{type:"DONUT",modifiers:[.25]}}}},shape:{nvOProps:{nvDProps:{id:"shape"}},props:{transform:{fliph:!1,flipv:!1,dim:{width:50,height:50},pos:{left:10,top:10}}},themeRef:{fillRef:{ref:"THEME",color:{type:"A1"}},strokeRef:{ref:"THEME",color:{type:"A1",tweaks:{shade:.5}}},fontRef:{ref:"MINOR",color:{type:"CUSTOM",rgb:[255,255,255]}}},textBody:{props:{valign:"MIDDLE",autoFit:{type:"NONE"}},paras:[{portions:[{}],style:{halign:"CENTER"}}]}},groupshape:{nvOProps:{nvDProps:{id:"groupshape"}},props:{transform:{fliph:!1,flipv:!1,dim:{width:50,height:50},pos:{left:10,top:10},chDim:{width:50,height:50},chPos:{left:10,top:10}}}},custom:{nvOProps:{nvDProps:{id:"custom"}},props:{transform:{fliph:!1,flipv:!1,dim:{width:8,height:8},pos:{left:10,top:10,zindex:1e4}},geom:{type:"CUSTOM",custom:{pathList:[{width:1,height:1,path:[{type:"M",m:{x:1,y:1}},{type:"L",l:{x:1,y:1}}]}]}}},themeRef:{fillRef:{ref:"THEME",color:{type:"A1"}},strokeRef:{ref:"THEME",color:{type:"A1",tweaks:{shade:.5}}},fontRef:{ref:"MINOR",color:{type:"TX1"}}},textBody:{props:{valign:"MIDDLE",autoFit:{type:"NONE"}},paras:[{portions:[{}],style:{halign:"CENTER"}}]}},fill:{PATTERN:{foreground:[{dim:{width:0,height:10},fill:{type:"SOLID",solid:{color:{type:"A1"}}},stroke:{type:"SOLID",width:3},geom:{type:"PRESET",preset:{type:"LINE"}}}],background:{type:"SOLID",solid:{color:{type:"CUSTOM",rgb:[255,255,255]}}},distance:{left:8,top:8},preset:"wdDnDiag",rotate:315},SOLID:{color:{type:"A1"}},GRADIENT:{LINEAR:{type:"LINEAR",rotate:0,stops:[{color:{type:"A1",tweaks:{tint:.5,hsl:{saturation:[{mode:"MODIFY",value:3}]}}},position:0},{color:{type:"A1",tweaks:{tint:.37,hsl:{saturation:[{mode:"MODIFY",value:3}]}}},position:.35},{color:{type:"A1",tweaks:{tint:.15,hsl:{saturation:[{mode:"MODIFY",value:3.5}]}}},position:1}]},ANGULAR:{type:"ANGULAR",rotate:0,stops:[{color:{type:"A1",tweaks:{tint:.5,hsl:{saturation:[{mode:"MODIFY",value:3}]}}},position:0},{color:{type:"A1",tweaks:{tint:.37,hsl:{saturation:[{mode:"MODIFY",value:3}]}}},position:.35},{color:{type:"A1",tweaks:{tint:.15,hsl:{saturation:[{mode:"MODIFY",value:3.5}]}}},position:1}]},RADIAL:{type:"RADIAL",rotate:0,stops:[{color:{type:"A1",tweaks:{tint:.5,hsl:{saturation:[{mode:"MODIFY",value:3}]}}},position:0},{color:{type:"A1",tweaks:{tint:.37,hsl:{saturation:[{mode:"MODIFY",value:3}]}}},position:.35},{color:{type:"A1",tweaks:{tint:.15,hsl:{saturation:[{mode:"MODIFY",value:3.5}]}}},position:1}],radial:{fillToRect:{left:.5,top:.5,right:.5,bottom:.5},tileRect:{left:0,top:0,right:0,bottom:0}}}}},FontWeight:{HEAVY:"800",MEDIUM:"500",LIGHT:"300",BOLD:"700",BLACK:"900",EXTRA_LIGHT:"200",DEMI_BOLD:"600",THIN:"100",NORMAL:"400"},staticshape:{nvOProps:{nvDProps:{id:"staticshape"}},props:{transform:{fliph:!1,flipv:!1,dim:{width:50,height:50},pos:{left:10,top:10}}},themeRef:{fillRef:{ref:"THEME",color:{type:"A1"}},strokeRef:{ref:"THEME",color:{type:"A1",tweaks:{shade:.5}}},fontRef:{ref:"MINOR",color:{type:"CUSTOM",rgb:[255,255,255]}}}},picture:{nvOProps:{nvDProps:{id:"picture"},nvODProps:{locks:{noAspectChange:!0}}},value:{id:"picture",type:"USERDEFINED"},props:{transform:{fliph:!1,flipv:!1,dim:{width:16,height:16},pos:{left:10,top:10,zindex:1e4}}}},FontVariants:{CAPITALIZE:"capitalize",ALLCAPS:"uppercase",SMALLCAPS:"lowercase",NONE:"none"},connector:{nvOProps:{nvDProps:{id:"connector"}},props:{transform:{fliph:!1,flipv:!1,dim:{width:50,height:50},pos:{left:10,top:10}}},themeRef:{fillRef:{ref:"THEME",color:{type:"A1"}},strokeRef:{ref:"THEME",color:{type:"A1"}},fontRef:{ref:"MINOR",color:{type:"CUSTOM",rgb:[255,255,255]}}}},selection:{nvOProps:{nvDProps:{id:"selection"}},props:{transform:{fliph:!1,flipv:!1,dim:{width:8,height:8},pos:{left:10,top:10,zindex:1e4}},fill:{type:"SOLID",solid:{color:{type:"CUSTOM",rgb:[149,179,215],tweaks:{alpha:.7}}}},stroke:{type:"SOLID",width:2,jointype:"ROUND",fill:{type:"SOLID",solid:{color:{type:"CUSTOM",rgb:[54,93,140]}}}},geom:{type:"PRESET",preset:{type:"RECT"}}}},highlighter:{nvOProps:{nvDProps:{id:"highlighter"}},props:{transform:{fliph:!1,flipv:!1,dim:{width:8,height:8},pos:{left:10,top:10,zindex:1e4}},fill:{type:"NONE"},stroke:{type:"SOLID",width:18,jointype:"ROUND",fill:{type:"SOLID",solid:{color:{type:"CUSTOM",rgb:[255,255,0],tweaks:{alpha:.6}}}}},geom:{type:"CUSTOM",custom:{pathList:[{width:1,height:1,path:[{type:"M",m:{x:1,y:1}},{type:"L",l:{x:1,y:1}}]}]}}}},grid:{nvOProps:{nvDProps:{id:"grid"},nvODProps:{locks:{noMove:!0,noSelect:!0}}},props:{transform:{fliph:!1,flipv:!1,dim:{width:1,height:1},pos:{left:10,top:10,zindex:1e4}},stroke:{type:"ROUND_DOT",width:1,jointype:"MITER",fill:{type:"SOLID",solid:{color:{type:"CUSTOM",rgb:[64,64,64]}}},captype:"CAPROUND"},geom:{type:"PRESET",preset:{type:"GRID"}}}},bgshape:{nvOProps:{nvDProps:{id:"bgshape"},nvODProps:{locks:{noSelect:!0}}},props:{transform:{fliph:!1,flipv:!1,dim:{width:1,height:1},pos:{left:0,top:0,zindex:100}},geom:{type:"PRESET",preset:{type:"RECT"}}},themeRef:{fillRef:{ref:"THEME",color:{type:"BG1"}},fontRef:{ref:"MINOR",color:{type:"TX1"}}}},pen:{nvOProps:{nvDProps:{id:"pen"}},props:{transform:{fliph:!1,flipv:!1,dim:{width:8,height:8},pos:{left:10,top:10,zindex:1e4}},fill:{type:"NONE"},stroke:{type:"SOLID",width:2,jointype:"ROUND",fill:{type:"SOLID",solid:{color:{type:"CUSTOM",rgb:[255,0,0]}}}},geom:{type:"CUSTOM",custom:{pathList:[{width:1,height:1,path:[{type:"M",m:{x:1,y:1}},{type:"L",l:{x:1,y:1}}]}]}}}},cropBox:{nvOProps:{nvDProps:{id:"cropBox"}},props:{transform:{fliph:!1,flipv:!1,dim:{width:8,height:8},pos:{left:10,top:10,zindex:1e4}},fill:{type:"NONE"},stroke:{type:"DASH",width:1,jointype:"ROUND",fill:{type:"SOLID",solid:{color:{type:"CUSTOM",rgb:[164,164,164]}}},captype:"FLAT"},geom:{type:"PRESET",preset:{type:"RECT"}}}},text:{nvOProps:{nvDProps:{id:"shape"},nvODProps:{textbox:!0}},props:{transform:{fliph:!1,flipv:!1,dim:{width:300,height:50},pos:{left:10,top:10,zindex:1e4}},geom:{type:"PRESET",preset:{type:"RECT"}}},textBody:{props:{inset:{left:10,top:5,right:10,bottom:5},autoFit:{type:"SHAPE"}},paras:[{portions:[{}]}]},edit:{htmlbox:!0}},groupselect:{nvOProps:{nvDProps:{id:"groupselect"}},props:{transform:{fliph:!1,flipv:!1,dim:{width:8,height:8},pos:{left:10,top:10,zindex:1e4}},fill:{type:"SOLID",solid:{color:{type:"CUSTOM",rgb:[149,179,215],tweaks:{alpha:.6}}}},stroke:{type:"SOLID",width:1,jointype:"ROUND",fill:{type:"SOLID",solid:{color:{type:"CUSTOM",rgb:[54,93,140]}}}},geom:{type:"PRESET",preset:{type:"RECT"}}}},guide:{nvOProps:{nvDProps:{id:"guide"}},props:{transform:{fliph:!1,flipv:!1,dim:{width:1,height:1},pos:{left:10,top:10,zindex:1e4}},stroke:{type:"DASH",width:1,jointype:"MITER",fill:{type:"SOLID",solid:{color:{type:"CUSTOM",rgb:[255,0,0]}}},captype:"SQUARE"},geom:{type:"PRESET",preset:{type:"LINE"}}}},bgfill:{SOLID:{color:{type:"BG2"}},GRADIENT:{LINEAR:{type:"LINEAR",rotate:0,stops:[{color:{type:"BG2",tweaks:{tint:.5,hsl:{saturation:[{mode:"MODIFY",value:3}]}}},position:0},{color:{type:"BG2",tweaks:{tint:.37,hsl:{saturation:[{mode:"MODIFY",value:3}]}}},position:.35},{color:{type:"BG2",tweaks:{tint:.15,hsl:{saturation:[{mode:"MODIFY",value:3.5}]}}},position:1}]},ANGULAR:{type:"ANGULAR",rotate:0,stops:[{color:{type:"BG2",tweaks:{tint:.5,hsl:{saturation:[{mode:"MODIFY",value:3}]}}},position:0},{color:{type:"BG2",tweaks:{tint:.37,hsl:{saturation:[{mode:"MODIFY",value:3}]}}},position:.35},{color:{type:"BG2",tweaks:{tint:.15,hsl:{saturation:[{mode:"MODIFY",value:3.5}]}}},position:1}]},RADIAL:{type:"RADIAL",rotate:0,stops:[{color:{type:"BG2",tweaks:{tint:.5,hsl:{saturation:[{mode:"MODIFY",value:3}]}}},position:0},{color:{type:"BG2",tweaks:{tint:.37,hsl:{saturation:[{mode:"MODIFY",value:3}]}}},position:.35},{color:{type:"BG2",tweaks:{tint:.15,hsl:{saturation:[{mode:"MODIFY",value:3.5}]}}},position:1}],radial:{fillToRect:{left:.5,top:.5,right:.5,bottom:.5},tileRect:{left:0,top:0,right:0,bottom:0}}}}}};jQuery.ShapeDefault=t}();var shapeConstantsArr={StyleAnimationProp:{STROKE:"STROKE",FILL:"FILL",TRANSFORM:"TRANSFORM",PROPS:"PROPS",EFFECTS:"EFFECTS"},AnimationStart:{WITHEFFECT:"WITHEFFECT",AFTEREFFECT:"AFTEREFFECT",CLICK:"CLICK"},ReferStyleFrom:{UNKNOWN_REFERENCE:"UNKNOWN_REFERENCE",DOCUMENT_STYLE:"DOCUMENT_STYLE",LOCAL_STYLE:"LOCAL_STYLE"},ReactionStatus:{SHOUT_OUT:"SHOUT_OUT",CALM:"CALM",CLAP:"CLAP",NO_REACTION:"NO_REACTION",HEART_BROKEN:"HEART_BROKEN",CROSS_MARK:"CROSS_MARK",HUNDRED_POINTS:"HUNDRED_POINTS",TROPHY:"TROPHY",LOVE:"LOVE",QUESTION_MARK:"QUESTION_MARK",THINK:"THINK",COOL:"COOL",ASTONISHED:"ASTONISHED",FIRE:"FIRE",FOR_PLUS:"FOR_PLUS",AGAINST_MINUS:"AGAINST_MINUS",RAISING_HAND:"RAISING_HAND",SMILE:"SMILE",PRAY:"PRAY",SUPER:"SUPER",WORRIED:"WORRIED",CELEBRATION:"CELEBRATION",WINK:"WINK",DISLIKE:"DISLIKE",LAUGH:"LAUGH",CONGRATS:"CONGRATS",TEARS:"TEARS",DISAPPROVE:"DISAPPROVE",LIKE:"LIKE",IRRITATED:"IRRITATED",SAD:"SAD",ANGRY:"ANGRY",CRYING:"CRYING",ANGUISH:"ANGUISH"},FontRef:{MAJOR:"MAJOR",MINOR:"MINOR"},PresetProps:{PRESET2:"PRESET2",PRESET1:"PRESET1",PRESET6:"PRESET6",PRESET5:"PRESET5",PRESET4:"PRESET4",PRESET3:"PRESET3",PRESET17:"PRESET17",PRESET9:"PRESET9",PRESET16:"PRESET16",PRESET8:"PRESET8",PRESET7:"PRESET7",PRESET18:"PRESET18",PRESET13:"PRESET13",PRESET12:"PRESET12",PRESET15:"PRESET15",PRESET14:"PRESET14",PRESET11:"PRESET11",PRESET10:"PRESET10"},Size:{EXTRA_WIDE:"EXTRA_WIDE",MEDIUM:"MEDIUM",WIDE:"WIDE",NARROW:"NARROW"},SearchedFrom:{PICASA:"PICASA",FLICKR:"FLICKR",UNSPLASH:"UNSPLASH",GOOGLE:"GOOGLE"},LangDirection:{LTR:"LTR",RTL:"RTL"},StrokePosition:{CENTER:"CENTER",UNKNOWN_POSITION:"UNKNOWN_POSITION",OUTSIDE:"OUTSIDE",INSIDE:"INSIDE"},TweakMode:{ABSOLUTE:"ABSOLUTE",MODIFY:"MODIFY",OFFSET:"OFFSET"},DateTimeField:{FORMAT9:"FORMAT9",FORMAT7:"FORMAT7",FORMAT8:"FORMAT8",FORMAT1:"FORMAT1",FORMAT11:"FORMAT11",FORMAT2:"FORMAT2",FORMAT10:"FORMAT10",FORMAT5:"FORMAT5",FORMAT6:"FORMAT6",FORMAT3:"FORMAT3",FORMAT4:"FORMAT4",FORMAT15:"FORMAT15",FORMAT14:"FORMAT14",FORMAT13:"FORMAT13",FORMAT12:"FORMAT12"},AllowedDomains:{TABLEAU_COM:"TABLEAU_COM",ZOHO_COM:"ZOHO_COM",ZOHO_EU:"ZOHO_EU",YOUTU_BE:"YOUTU_BE",ZOHOPUBLIC_IN:"ZOHOPUBLIC_IN",_24TRU_COM:"_24TRU_COM",QQ_COM:"QQ_COM",MLB_COM:"MLB_COM",SALESFORCE_COM:"SALESFORCE_COM",MANAGEENGINE_COM:"MANAGEENGINE_COM",TED_COM:"TED_COM",MENTIMETER_COM:"MENTIMETER_COM",YIMG_COM:"YIMG_COM",GOOGLE_COM:"GOOGLE_COM",DAILYMOTION_COM:"DAILYMOTION_COM",CLIPCHAMP_COM:"CLIPCHAMP_COM",MIRO_COM:"MIRO_COM",LATERALVISION_COM:"LATERALVISION_COM",WOOCLAP_COM:"WOOCLAP_COM",ZOHOEXTERNAL_CN:"ZOHOEXTERNAL_CN",VOCAROO_COM:"VOCAROO_COM",VOICETHREAD_COM:"VOICETHREAD_COM",SCHOOLTUBE_COM:"SCHOOLTUBE_COM",LIVESTREAM_COM:"LIVESTREAM_COM",ZOHOEXTERNAL_IN:"ZOHOEXTERNAL_IN",YOUKU_COM:"YOUKU_COM",SKYDESK_JP:"SKYDESK_JP",PADLET_COM:"PADLET_COM",SKETCHUP_COM:"SKETCHUP_COM",NO_DOMAIN:"NO_DOMAIN",MIXER_COM:"MIXER_COM",ZOHOSTATIC_COM:"ZOHOSTATIC_COM",NDTV_COM:"NDTV_COM",CUSTOM:"CUSTOM",WALLS_IO:"WALLS_IO",SOUNDCLOUD_COM:"SOUNDCLOUD_COM",FLICKR_COM:"FLICKR_COM",ZOHOWEBSTATIC_COM:"ZOHOWEBSTATIC_COM",RENDERFOREST_COM:"RENDERFOREST_COM",GOANIMATE_COM:"GOANIMATE_COM",ZOHOPUBLIC_COM_CN:"ZOHOPUBLIC_COM_CN",SLIDESHARE_NET:"SLIDESHARE_NET",VIMEO_COM:"VIMEO_COM",GIPHY_COM:"GIPHY_COM",HISTORY_COM:"HISTORY_COM",ZOHOEXTERNAL_AU:"ZOHOEXTERNAL_AU",WORDPRESS_COM:"WORDPRESS_COM",SPOTIFY_COM:"SPOTIFY_COM",ZOHO_COM_AU:"ZOHO_COM_AU",DOTSUB_COM:"DOTSUB_COM",ONEDRIVE_COM:"ONEDRIVE_COM",MOMENTO360_COM:"MOMENTO360_COM",TUBECHOP_COM:"TUBECHOP_COM",ZOHOEXTERNAL_COM:"ZOHOEXTERNAL_COM",ZOHO_IN:"ZOHO_IN",TEACHERTUBE_COM:"TEACHERTUBE_COM",WPCOMSTAGING_COM:"WPCOMSTAGING_COM",ZOHO_COM_CN:"ZOHO_COM_CN",BLOGSPOT_COM:"BLOGSPOT_COM",ZOHOPUBLIC_COM_AU:"ZOHOPUBLIC_COM_AU",BLIP_TV:"BLIP_TV",REVERBNATION_COM:"REVERBNATION_COM",PLANNINGCENTERONLINE_COM:"PLANNINGCENTERONLINE_COM",LIVE_COM:"LIVE_COM",SLIDESHARECDN_COM:"SLIDESHARECDN_COM",PHOTOSYNTH_NET:"PHOTOSYNTH_NET",CANVA_COM:"CANVA_COM",PREZI_COM:"PREZI_COM",VIDDLER_COM:"VIDDLER_COM",ELFSIGHT_COM:"ELFSIGHT_COM",LOCALZOHO_COM:"LOCALZOHO_COM",YAHOO_COM:"YAHOO_COM",INVESTING_COM:"INVESTING_COM",PHOTOBUCKET_COM:"PHOTOBUCKET_COM",FLAT_IO:"FLAT_IO",CLICFLIC_COM:"CLICFLIC_COM",YOUTUBE__HYPHEN__NOCOOKIE_COM:"YOUTUBE__HYPHEN__NOCOOKIE_COM",LOOM_COM:"LOOM_COM",ANIMOTO_COM:"ANIMOTO_COM",LINKEDIN_COM:"LINKEDIN_COM",QUALVU_COM:"QUALVU_COM",FLIPPINGBOOK_COM:"FLIPPINGBOOK_COM",WIDGETS_INVESTING_COM:"WIDGETS_INVESTING_COM",FACEBOOK_COM:"FACEBOOK_COM",GETLOUPE_COM:"GETLOUPE_COM",CODEPEN_IO:"CODEPEN_IO",_360CITIES_NET:"_360CITIES_NET",ZOHOEXTERNAL_EU:"ZOHOEXTERNAL_EU",FIGMA_COM:"FIGMA_COM",YOUTUBE_COM:"YOUTUBE_COM",ZOHOPUBLIC_COM:"ZOHOPUBLIC_COM",EDUCAPLAY_COM:"EDUCAPLAY_COM",SCREENCAST_COM:"SCREENCAST_COM",ARTICULATE_COM:"ARTICULATE_COM",MYSPACE_COM:"MYSPACE_COM",_4SHARED_COM:"_4SHARED_COM",AMCHARTS_COM:"AMCHARTS_COM",ZOHOPUBLIC_EU:"ZOHOPUBLIC_EU"},TextOverflow:{ALLOW:"ALLOW",CLIP:"CLIP"},XAxisConstraintsType:{NO_XAXIS_CONSTRAINT:"NO_XAXIS_CONSTRAINT",FIXED_LEFT_MARGIN:"FIXED_LEFT_MARGIN",FIXED_WIDTH:"FIXED_WIDTH",FIXED_RIGHT_MARGIN:"FIXED_RIGHT_MARGIN"},TextDirection:{DEFAULT_DIRECTION:"DEFAULT_DIRECTION",RIGHT_TO_LEFT:"RIGHT_TO_LEFT",LEFT_TO_RIGHT:"LEFT_TO_RIGHT"},SpacingValueType:{ABSOLUTE:"ABSOLUTE",PERCENT:"PERCENT"},CapType:{SQUARE:"SQUARE",FLAT:"FLAT",CAPROUND:"CAPROUND"},ScreenType:{SIXTEEN_BY_TEN:"SIXTEEN_BY_TEN",FREEFLOW:"FREEFLOW",CUSTOM:"CUSTOM",FOUR_BY_THREE:"FOUR_BY_THREE",SIXTEEN_BY_NINE:"SIXTEEN_BY_NINE"},FillType:{GRP:"GRP",PATTERN:"PATTERN",TEXTBOX:"TEXTBOX",NONE:"NONE",SOLID:"SOLID",GRADIENT:"GRADIENT",PICT:"PICT"},TimeUnit:{MONTHS:"MONTHS",YEARS:"YEARS",DAYS:"DAYS"},DynamicSlideType:{LAST:"LAST",NEXT:"NEXT",LASTVIEWED:"LASTVIEWED",FIRST:"FIRST",PREVIOUS:"PREVIOUS"},RepresentBubbleSize:{AREA:"AREA",WIDTH:"WIDTH"},CommentState:{COMPLETE:"COMPLETE",EDITING:"EDITING"},PatternType:{NONE:"NONE",FADE:"FADE"},DocumentFormatType:{DOCX:"DOCX",PPTX:"PPTX",UNKNOWN_DOCUMENT_FORMAT:"UNKNOWN_DOCUMENT_FORMAT",PDF:"PDF",HTML:"HTML"},ExplanationDetailsType:{MEDIA:"MEDIA",CONTENT:"CONTENT",AUDIO:"AUDIO"},NumberValueType:{FRACTION:"FRACTION",WHOLE:"WHOLE",PERCENTAGE:"PERCENTAGE"},LinkSlideType:{FIXED:"FIXED",DYNAMIC:"DYNAMIC"},FileFormatType:{UNKNOWN_FILE_FORMAT:"UNKNOWN_FILE_FORMAT",PICTURE_FORMAT:"PICTURE_FORMAT",DOCUMENT_FORMAT:"DOCUMENT_FORMAT"},BlurType:{UNKNOWN_TYPE:"UNKNOWN_TYPE",MOTION:"MOTION",MASKED:"MASKED",DISC:"DISC",GAUSSIAN:"GAUSSIAN",ZOOM:"ZOOM",BOX:"BOX"},HideElement:{ALL:"ALL",SHAPES:"SHAPES",PLACEHOLDERS:"PLACEHOLDERS"},ExportScaleType:{WIDTH_BASED:"WIDTH_BASED",ON_THE_WHOLE:"ON_THE_WHOLE",UNKNOWN_SCALE_TYPE:"UNKNOWN_SCALE_TYPE",HEIGHT_BASED:"HEIGHT_BASED"},LayoutMode:{FACTOR:"FACTOR",EDGE:"EDGE"},TickMarkType:{IN:"IN",CROSS:"CROSS",NONE:"NONE",OUT:"OUT"},ShapeAutoFitType:{DEFINED_BOUNDARY:"DEFINED_BOUNDARY",NO_BOUNDARY:"NO_BOUNDARY"},CombinedNodeType:{SHAPE:"SHAPE",COMBINEDOBJECT:"COMBINEDOBJECT",UNKNOWN:"UNKNOWN"},AnimationNode:{BG:"BG",PARA:"PARA",CATEGORY:"CATEGORY",TABLE_COLUMN:"TABLE_COLUMN",SERIES_VALUE:"SERIES_VALUE",TABLE_CELL:"TABLE_CELL",PER_CATEGORY:"PER_CATEGORY",TABLE_ROW:"TABLE_ROW",PER_SERIES_VALUE:"PER_SERIES_VALUE"},Grouping:{STACKED:"STACKED",PERCENTSTACKED:"PERCENTSTACKED",STANDARD:"STANDARD",CLUSTERED:"CLUSTERED"},Orientation:{MINMAX:"MINMAX",MAXMIN:"MAXMIN"},BarShapeType:{CYLINDER:"CYLINDER",PYRAMID:"PYRAMID",BOX:"BOX",CONE:"CONE"},GraphicObjectType:{TABLE:"TABLE",CHART:"CHART"},TextType:{STR:"STR",RICH:"RICH"},FontVariant:{CAPITALIZE:"CAPITALIZE",ALLCAPS:"ALLCAPS",SMALLCAPS:"SMALLCAPS",NONE:"NONE"},ValueVariant:{ABSOLUTE:"ABSOLUTE",RELATIVE:"RELATIVE",UNKNOWN_VARIANT:"UNKNOWN_VARIANT"},StyleAnimationType:{PATH:"PATH",STROKE_COLOR:"STROKE_COLOR",TEETER:"TEETER",SHIMMER:"SHIMMER",CONTRAST_COLOR:"CONTRAST_COLOR",UNDERLINE:"UNDERLINE",WAVE:"WAVE",BRUSH:"BRUSH",BOLD_REVEAL:"BOLD_REVEAL",SHAKE:"SHAKE",TRANSPARENCY:"TRANSPARENCY",FONT_COLOR:"FONT_COLOR",STRIKE:"STRIKE",DARKEN:"DARKEN",NONE:"NONE",OBJECT_COLOR:"OBJECT_COLOR",SPIN:"SPIN",DESATURATE:"DESATURATE",COMPLEMENTARY_COLOR:"COMPLEMENTARY_COLOR",BOUNCE:"BOUNCE",GROW_WITH_COLOR:"GROW_WITH_COLOR",LIGHTEN:"LIGHTEN",FLASH:"FLASH",COLORPULSE:"COLORPULSE",GROW:"GROW",PULSE:"PULSE",FILL_COLOR:"FILL_COLOR",BOLD_FLASH:"BOLD_FLASH"},ReviewState:{PROCESSED:"PROCESSED",ERROR:"ERROR",IGNORED:"IGNORED"},MeasuringUnit:{INCH:"INCH",CM:"CM",PIXEL:"PIXEL"},EmbedObjectType:{NOT_KNOWN:"NOT_KNOWN",IFRAME:"IFRAME"},TextWrap:{RECT:"RECT",NONE:"NONE"},PortionType:{FIELD:"FIELD",LINEBREAK:"LINEBREAK"},RepresentiveType:{BAR:"BAR",PIE:"PIE"},DisplayUnitType:{HUNDREDS:"HUNDREDS",THOUSANDS:"THOUSANDS",MILLIONS:"MILLIONS",BILLIONS:"BILLIONS",HUNDREDMILLIONS:"HUNDREDMILLIONS",HUNDREDTHOUSANDS:"HUNDREDTHOUSANDS",TENMILLIONS:"TENMILLIONS",TENTHOUSANDS:"TENTHOUSANDS",CUSTOM:"CUSTOM",TRILLIONS:"TRILLIONS",NONE:"NONE"},VerticalAlignType:{TOP:"TOP",BOTTOM:"BOTTOM",MIDDLE:"MIDDLE"},BulletType:{NUMBER:"NUMBER",PICTURE:"PICTURE",CHARACTER:"CHARACTER",NONE:"NONE",SELECTABLE:"SELECTABLE"},CellDeliveryModel:{COLUMN_WISE:"COLUMN_WISE",ROW_WISE:"ROW_WISE"},CustomGeometryType:{PENCIL:"PENCIL",HIGHLIGHTER:"HIGHLIGHTER",UNKNOWN_CUSTOM:"UNKNOWN_CUSTOM",SKETCH:"SKETCH"},EasingCurve:{QUADRATIC:"QUADRATIC",QUARTIC:"QUARTIC",BOUNCE:"BOUNCE",BACK:"BACK",POWER:"POWER",SINE:"SINE",QUINTIC:"QUINTIC",EXPONENTIAL:"EXPONENTIAL",ELASTIC:"ELASTIC",CUBIC:"CUBIC",CIRCLE:"CIRCLE"},Direction:{CENTER:"CENTER",DOWN:"DOWN",LEFT_DOWN:"LEFT_DOWN",RIGHT_UP:"RIGHT_UP",LEFT:"LEFT",RIGHT:"RIGHT",LEFT_UP:"LEFT_UP",RIGHT_DOWN:"RIGHT_DOWN",UP:"UP"},TwitterType:{MARKED:"MARKED",LIVE:"LIVE"},ObjectType:{STRIP:"STRIP",PARTICLE:"PARTICLE"},UseParentProps:{TEXTBOX:"TEXTBOX",NONE:"NONE"},YAxisConstraintsType:{FIXED_HEIGHT:"FIXED_HEIGHT",FIXED_TOP_MARGIN:"FIXED_TOP_MARGIN",FIXED_BOTTOM_MARGIN:"FIXED_BOTTOM_MARGIN",NO_YAXIS_CONSTRAINTS:"NO_YAXIS_CONSTRAINTS"},XPosition:{CENTER:"CENTER",LEFT:"LEFT",RIGHT:"RIGHT",CUSTOM_X:"CUSTOM_X"},ElementCategoryType:{LEADER:"LEADER",NONE:"NONE",FOLLOWER:"FOLLOWER"},EmbeddedSite:{YOUTUBE:"YOUTUBE",DAILYMOTION:"DAILYMOTION",TWITTER:"TWITTER"},SmartTextType:{NUMERIC:"NUMERIC",DATETIME:"DATETIME",UNKNOWN_SMART_FIELDTYPE:"UNKNOWN_SMART_FIELDTYPE",CONTENT:"CONTENT",ALPHABETIC:"ALPHABETIC"},PresetShapeGeometry:{RIGHT_ARROW:"RIGHT_ARROW",POLYGON:"POLYGON",MAGNETIC_DISK:"MAGNETIC_DISK",AUDIO:"AUDIO",DOUBLE_BRACKET:"DOUBLE_BRACKET",MINUS:"MINUS",OFFPAGE_CONNECTOR:"OFFPAGE_CONNECTOR",MOD_RECT:"MOD_RECT",PROCESS:"PROCESS",U_TURN_ARROW:"U_TURN_ARROW",BENT_UP_ARROW:"BENT_UP_ARROW",CURVED_UP_ARROW:"CURVED_UP_ARROW",LEFT_BRACKET:"LEFT_BRACKET",STORED_DATA:"STORED_DATA",CUBE:"CUBE",TOP_BANNER:"TOP_BANNER",BENT_ARROW:"BENT_ARROW",LEFT_ARROW_CALLOUT:"LEFT_ARROW_CALLOUT",SUN:"SUN",DOWN_ARROW:"DOWN_ARROW",HEART:"HEART",ARC:"ARC",SEVEN_POINT_STAR:"SEVEN_POINT_STAR",UP_DOWN_ARROW:"UP_DOWN_ARROW",ELBOW_CONNECTOR5:"ELBOW_CONNECTOR5",ELBOW_CONNECTOR2:"ELBOW_CONNECTOR2",CLOCK:"CLOCK",ELBOW_CONNECTOR4:"ELBOW_CONNECTOR4",ELBOW_CONNECTOR3:"ELBOW_CONNECTOR3",FLOWCHART_CONNECTOR:"FLOWCHART_CONNECTOR",RHOMBUS_ON_BOW_BOARD:"RHOMBUS_ON_BOW_BOARD",DIAMOND:"DIAMOND",MERGE:"MERGE",CALLOUT1:"CALLOUT1",CALLOUT2:"CALLOUT2",TRAPEZOID:"TRAPEZOID",LEFT_RIGHT_ARROW:"LEFT_RIGHT_ARROW",CALLOUT3:"CALLOUT3",DIVIDE:"DIVIDE",EXPLOSION1:"EXPLOSION1",EXPLOSION2:"EXPLOSION2",HORIZONTAL_SCROLL:"HORIZONTAL_SCROLL",SIXTEEN_POINT_STAR:"SIXTEEN_POINT_STAR",ROUND_SINGLE_RECT:"ROUND_SINGLE_RECT",ACTION_INFORMATION:"ACTION_INFORMATION",CURVED_CONNECTOR5:"CURVED_CONNECTOR5",CURVED_CONNECTOR4:"CURVED_CONNECTOR4",CURVED_CONNECTOR3:"CURVED_CONNECTOR3",ACTION_END:"ACTION_END",PLAQUE:"PLAQUE",UP_RIBBON:"UP_RIBBON",RECT_QUOTE:"RECT_QUOTE",SMILEY:"SMILEY",CURVED_CONNECTOR2:"CURVED_CONNECTOR2",STAR:"STAR",LEFT_BANNER:"LEFT_BANNER",OVAL:"OVAL",NOT_EQUAL:"NOT_EQUAL",TEN_POINT_STAR:"TEN_POINT_STAR",PREDEFINED_PROCESS:"PREDEFINED_PROCESS",DIAGONAL_STRIPE:"DIAGONAL_STRIPE",RIGHT_TRIANGLE:"RIGHT_TRIANGLE",LEFT_ARROW:"LEFT_ARROW",FOLDED_CORNER:"FOLDED_CORNER",OVAL_CALLOUT:"OVAL_CALLOUT",ACTION_CUSTOM:"ACTION_CUSTOM",ACTION_RETURN:"ACTION_RETURN",ELLIPSE_FILLER:"ELLIPSE_FILLER",CURVED_RIGHT_ARROW:"CURVED_RIGHT_ARROW",LEFT_BRACE:"LEFT_BRACE",EXTRACT:"EXTRACT",LOCK_SYMBOL:"LOCK_SYMBOL",NO_SYMBOL:"NO_SYMBOL",FOUR_POINT_STAR:"FOUR_POINT_STAR",FOUR_EDGED_FRAME:"FOUR_EDGED_FRAME",ACTION_SOUND:"ACTION_SOUND",ISOSCELES_TRIANGLE:"ISOSCELES_TRIANGLE",ROUND_DIAGONAL_RECT:"ROUND_DIAGONAL_RECT",DOUBLE_BRACE:"DOUBLE_BRACE",BORDER_QUOTE:"BORDER_QUOTE",DELAY:"DELAY",CIRCLE_FILLER:"CIRCLE_FILLER",UP_ARROW:"UP_ARROW",HORIZONTAL_SLIDER:"HORIZONTAL_SLIDER",WAVE:"WAVE",DISPLAY:"DISPLAY",LSHAPE:"LSHAPE",MULTI_DOCUMENT:"MULTI_DOCUMENT",ACCENT_BORDER_CALLOUT3:"ACCENT_BORDER_CALLOUT3",LEFT_RIGHT_ARROW_CALLOUT:"LEFT_RIGHT_ARROW_CALLOUT",ACCENT_BORDER_CALLOUT2:"ACCENT_BORDER_CALLOUT2",DONUT:"DONUT",EQUAL:"EQUAL",ACCENT_BORDER_CALLOUT1:"ACCENT_BORDER_CALLOUT1",RIGHT_BRACKET:"RIGHT_BRACKET",BORDER_CALLOUT3:"BORDER_CALLOUT3",BORDER_CALLOUT1:"BORDER_CALLOUT1",BORDER_CALLOUT2:"BORDER_CALLOUT2",INTERNAL_STORAGE:"INTERNAL_STORAGE",CURVED_UP_RIBBON:"CURVED_UP_RIBBON",VERTICAL_SLIDER:"VERTICAL_SLIDER",SNIP_ROUND_SINGLE_RECT:"SNIP_ROUND_SINGLE_RECT",SIX_POINT_STAR:"SIX_POINT_STAR",CURVED_DOWN_ARROW:"CURVED_DOWN_ARROW",CHEVRON:"CHEVRON",DOUBLE_WAVE:"DOUBLE_WAVE",MANUAL_OPERATION:"MANUAL_OPERATION",METER_NEEDLE:"METER_NEEDLE",TWIN_COMET:"TWIN_COMET",TWELVE_POINT_STAR:"TWELVE_POINT_STAR",SEQUENTIAL_ACCESS_STORAGE:"SEQUENTIAL_ACCESS_STORAGE",EIGHT_POINT_STAR:"EIGHT_POINT_STAR",DODECAGON:"DODECAGON",MOON:"MOON",ACTION_NEXT:"ACTION_NEXT",LEFT_UP_ARROW:"LEFT_UP_ARROW",PARALLELOGRAM:"PARALLELOGRAM",STRIPED_RIGHT_ARROW:"STRIPED_RIGHT_ARROW",MOD_CAN:"MOD_CAN",TEARDROP:"TEARDROP",SNIP_SAMESIDE_RECT:"SNIP_SAMESIDE_RECT",MAN:"MAN",ACTION_HOME:"ACTION_HOME",FIVE_POINT_STAR:"FIVE_POINT_STAR",BLOCK_ARC:"BLOCK_ARC",FRAME:"FRAME",QUAD_ARROW_CALLOUT:"QUAD_ARROW_CALLOUT",ACTION_BEGIN:"ACTION_BEGIN",SNIP_DIAGONAL_RECT:"SNIP_DIAGONAL_RECT",TIMER_SCALE:"TIMER_SCALE",PUNCHED_CARD:"PUNCHED_CARD",SNIP_SINGLE_RECT:"SNIP_SINGLE_RECT",HEPTAGON:"HEPTAGON",TWENTY_FOUR_POINT_STAR:"TWENTY_FOUR_POINT_STAR",COLLATE:"COLLATE",CURVED_DOWN_RIBBON:"CURVED_DOWN_RIBBON",CLOCK_NEEDLE:"CLOCK_NEEDLE",GRID:"GRID",NOTCHED_RIGHT_ARROW:"NOTCHED_RIGHT_ARROW",SUMMING_JUNCTION:"SUMMING_JUNCTION",PIE:"PIE",CROP_FRAME:"CROP_FRAME",TWO_EDGED_FRAME:"TWO_EDGED_FRAME",ACTION_MOVIE:"ACTION_MOVIE",ACCENT_CALLOUT2:"ACCENT_CALLOUT2",HEXAGON:"HEXAGON",ACCENT_CALLOUT1:"ACCENT_CALLOUT1",RECTANGULAR_CALLOUT:"RECTANGULAR_CALLOUT",ACCENT_CALLOUT3:"ACCENT_CALLOUT3",PUNCHED_TAPE:"PUNCHED_TAPE",TERMINATOR:"TERMINATOR",DECISION:"DECISION",FLOWCHART_DOCUMENT:"FLOWCHART_DOCUMENT",TABLECELL:"TABLECELL",DOTTED_SIGN:"DOTTED_SIGN",WOMAN:"WOMAN",PENTAGON_ARROW:"PENTAGON_ARROW",DOWN_ARROW_CALLOUT:"DOWN_ARROW_CALLOUT",MANUAL_INPUT:"MANUAL_INPUT",LIGHTNING_BOLT:"LIGHTNING_BOLT",BEVEL:"BEVEL",OCTAGON:"OCTAGON",ACTION_PREVIOUS:"ACTION_PREVIOUS",CURVED_LEFT_ARROW:"CURVED_LEFT_ARROW",PREPARATION:"PREPARATION",UP_ARROW_CALLOUT:"UP_ARROW_CALLOUT",DIRECT_ACCESS_STORAGE:"DIRECT_ACCESS_STORAGE",CAN:"CAN",HALF_FRAME:"HALF_FRAME",RIGHT_ARROW_CALLOUT:"RIGHT_ARROW_CALLOUT",DATA:"DATA",ROUNDED_RECTANGULAR_CALLOUT:"ROUNDED_RECTANGULAR_CALLOUT",ALTERNATE_PROCESS:"ALTERNATE_PROCESS",SORT:"SORT",THIRTY_TWO_POINT_STAR:"THIRTY_TWO_POINT_STAR",MOD_ROUND_RECT:"MOD_ROUND_RECT",MULTIPLY:"MULTIPLY",PLUS:"PLUS",RECT:"RECT",PENTAGON:"PENTAGON",CLOUD:"CLOUD",ACTION_DOCUMENT:"ACTION_DOCUMENT",ROUND_SAMESIDE_RECT:"ROUND_SAMESIDE_RECT",LEFT_RIGHT_UP_ARROW:"LEFT_RIGHT_UP_ARROW",QUAD_ARROW:"QUAD_ARROW",DECAGON:"DECAGON",DOWN_RIBBON:"DOWN_RIBBON",LINE:"LINE",ACTION_HELP:"ACTION_HELP",CLOUD_CALLOUT:"CLOUD_CALLOUT",RIGHT_BRACE:"RIGHT_BRACE",OR:"OR",VERTICAL_SCROLL:"VERTICAL_SCROLL",CIRCLE_QUOTE:"CIRCLE_QUOTE",CIRCULAR_ARROW:"CIRCULAR_ARROW",SQUARE_ON_CIRCLE_BOARD:"SQUARE_ON_CIRCLE_BOARD",MOD_PARALLELOGRAM:"MOD_PARALLELOGRAM",ROUND_RECT:"ROUND_RECT",CHORD:"CHORD",CROSS:"CROSS"},FollowerModificationStatus:{NO_MODIFICATION:"NO_MODIFICATION",MODIFIED:"MODIFIED",REMOVED:"REMOVED"},Style:{REGULAR:"REGULAR",UNKNOWN:"UNKNOWN",HIDDEN:"HIDDEN"},CombineRule:{COMBINE:"COMBINE",INVERSE_INTERSECT:"INVERSE_INTERSECT",NO_RULE:"NO_RULE",INTERSECT:"INTERSECT",UNION:"UNION",SUBTRACT:"SUBTRACT"},FillRule:{EVEN_ODD:"EVEN_ODD",NO_RULE:"NO_RULE",NON_ZERO:"NON_ZERO"},CreativeCommonsLicense:{ANN:"ANN",A:"A",AS:"AS",ANCS:"ANCS",ANC:"ANC",NO_ATT:"NO_ATT",AN:"AN"},OriginRelation:{SLIDE:"SLIDE",PARENT:"PARENT"},AnimationVariant:{PATH:"PATH",ENTRY:"ENTRY",EMPHASIS:"EMPHASIS",EXIT:"EXIT"},ScatterType:{LINEMARKER:"LINEMARKER",MARKER:"MARKER",SMOOTHMARKER:"SMOOTHMARKER",LINE:"LINE",SMOOTH:"SMOOTH",NONE:"NONE"},ShadowType:{OUTER:"OUTER",INNER:"INNER"},ExportScaleValueType:{ABSOLUTE:"ABSOLUTE",FACTOR:"FACTOR",UNKNONWN_EXPORTSCALEVALUE_TYPE:"UNKNONWN_EXPORTSCALEVALUE_TYPE"},CyclicCategory:{TOGGLE:"TOGGLE",PEAK_AND_RETURN:"PEAK_AND_RETURN"},HorizontalAlignType:{CENTER:"CENTER",LEFT:"LEFT",RIGHT:"RIGHT"},PathType:{CC:"CC",QC:"QC",SCC:"SCC",C:"C",SQC:"SQC",L:"L",EA:"EA",M:"M"},SelectedStyle:{DOT_STYLE:"DOT_STYLE",UNKNOWN_SELECTEDSTATE:"UNKNOWN_SELECTEDSTATE",TICK_STYLE:"TICK_STYLE",DASH_STYLE:"DASH_STYLE"},Ref:{THEME:"THEME",CUSTOM:"CUSTOM",THEMEINDEX:"THEMEINDEX"},DataLabelPosition:{CENTER:"CENTER",LEFT:"LEFT",TOP:"TOP",RIGHT:"RIGHT",BOTTOM:"BOTTOM",INBASE:"INBASE",OUTEND:"OUTEND",BESTFIT:"BESTFIT",INEND:"INEND"},EasingBase:{EASE_IN_OUT:"EASE_IN_OUT",NONE:"NONE",EASE_OUT:"EASE_OUT",EASE_IN:"EASE_IN"},MovementMode:{ROTATE_OBJECT_ALONG:"ROTATE_OBJECT_ALONG",NONE:"NONE"},OrderMethodology:{ASCENDING:"ASCENDING",RANDOM:"RANDOM",UNKNOWN_METHODOLOGY:"UNKNOWN_METHODOLOGY",DESCENDING:"DESCENDING"},ColorSchemeIndex:{ACCENT4:"ACCENT4",DARK2:"DARK2",ACCENT5:"ACCENT5",ACCENT2:"ACCENT2",ACCENT3:"ACCENT3",DARK1:"DARK1",ACCENT6:"ACCENT6",HLINK:"HLINK",FOLLOWHLINK:"FOLLOWHLINK",LIGHT2:"LIGHT2",LIGHT1:"LIGHT1",ACCENT1:"ACCENT1"},LinkType:{ANCHOR_POINT:"ANCHOR_POINT",SLIDE:"SLIDE",CUSTOM:"CUSTOM",LINK:"LINK",NONE:"NONE",EMAIL:"EMAIL",FRAME:"FRAME",SHAPEOBJECT:"SHAPEOBJECT"},BarType:{COL:"COL",BAR:"BAR"},KeyType:{DEFINED:"DEFINED",NO_TYPE:"NO_TYPE"},RotateDirection:{CLOCKWISE:"CLOCKWISE",ANTI_CLOCKWISE:"ANTI_CLOCKWISE"},StrokeType:{DASHDOT:"DASHDOT",SQUARE_DOT:"SQUARE_DOT",LONG_DASH:"LONG_DASH",ROUND_DOT:"ROUND_DOT",DASH_PATTERN:"DASH_PATTERN",LONG_DASH_DOT_DOT:"LONG_DASH_DOT_DOT",LONG_DASH_DOT:"LONG_DASH_DOT",SOLID:"SOLID",DASH:"DASH"},LayoutType:{TXT_TWO_OBJ:"TXT_TWO_OBJ",TWO_OBJ:"TWO_OBJ",OBJ_TXT:"OBJ_TXT",TWO_OBJ_OBJ:"TWO_OBJ_OBJ",CLIPART_VERT_TXT:"CLIPART_VERT_TXT",TWO_OBJ_TXT:"TWO_OBJ_TXT",TITLE_FOUR_PICT:"TITLE_FOUR_PICT",TABLE:"TABLE",TXT:"TXT",TXT_OVER_OBJ:"TXT_OVER_OBJ",PIC_TITLE_CENTER:"PIC_TITLE_CENTER",MEDIA_TXT:"MEDIA_TXT",OBJ:"OBJ",TWO_OBJ_TWO_TXT:"TWO_OBJ_TWO_TXT",VERT_TITLE_TXT:"VERT_TITLE_TXT",CUSTOM:"CUSTOM",TXT_CHART:"TXT_CHART",PIC_TXT:"PIC_TXT",THREE_PICT_TXT:"THREE_PICT_TXT",PIC_TITLE_TXT_RGT:"PIC_TITLE_TXT_RGT",CHART_TXT:"CHART_TXT",TITLE_ONLY:"TITLE_ONLY",FOUR_OBJ:"FOUR_OBJ",PIC_TITLE_TXT_LFT:"PIC_TITLE_TXT_LFT",OBJ_OVER_TXT:"OBJ_OVER_TXT",TXT_OBJ:"TXT_OBJ",TWO_OBJ_OVER_TXT:"TWO_OBJ_OVER_TXT",OBJ_ONLY:"OBJ_ONLY",PIC_TITLE_LFT:"PIC_TITLE_LFT",TXT_CLIPART:"TXT_CLIPART",SMARTART:"SMARTART",VERT_TXT:"VERT_TXT",CHART:"CHART",VERT_TITLE_TX_OVER_CHART:"VERT_TITLE_TX_OVER_CHART",BLANK:"BLANK",SEC_HEADER:"SEC_HEADER",OBJ_AND_TXT:"OBJ_AND_TXT",TXT_MEDIA:"TXT_MEDIA",PIC_TITLE_RGT:"PIC_TITLE_RGT",TITLE_THREE_PICT_TXT:"TITLE_THREE_PICT_TXT",TITLE_TXT_TWO_PICT:"TITLE_TXT_TWO_PICT",TITLE:"TITLE",TWO_TXT:"TWO_TXT",OBJ_TWO_OBJ:"OBJ_TWO_OBJ",CLIPART_TXT:"CLIPART_TXT"},SlideType:{MASTER:"MASTER",SLIDE:"SLIDE",LAYOUT:"LAYOUT"},AssociatedObj:{PARA:"PARA",PORTION:"PORTION"},YPosition:{TOP:"TOP",BOTTOM:"BOTTOM",MIDDLE:"MIDDLE",CUSTOM_Y:"CUSTOM_Y"},TransitionType:{PATH:"PATH",GLITTER:"GLITTER",DOOR:"DOOR",WHIP:"WHIP",CURVY_FLOAT:"CURVY_FLOAT",RANDOMBAR:"RANDOMBAR",NONE:"NONE",COMB:"COMB",CHECKERS:"CHECKERS",CUT:"CUT",RIPPLE:"RIPPLE",FERRISWHEEL:"FERRISWHEEL",TWIRL:"TWIRL",FADED_SWIVEL:"FADED_SWIVEL",BOUNCE:"BOUNCE",CUBE:"CUBE",GALLERY:"GALLERY",BOX:"BOX",PIVOT:"PIVOT",FADED_ZOOM:"FADED_ZOOM",SPINNER:"SPINNER",REVEAL:"REVEAL",FLASH:"FLASH",CIRCLE:"CIRCLE",GEOMETRIC:"GEOMETRIC",STRIPS:"STRIPS",NEWSFLASH:"NEWSFLASH",SWAP:"SWAP",CURVE_UP_OR_DOWN:"CURVE_UP_OR_DOWN",ROTATE:"ROTATE",PIN_WHEEL:"PIN_WHEEL",HONEYCOMB:"HONEYCOMB",CONVEYOR:"CONVEYOR",FLYTHRU:"FLYTHRU",DISSOLVE:"DISSOLVE",PLUS:"PLUS",PUSH:"PUSH",COVER:"COVER",FLOAT:"FLOAT",DIAMOND:"DIAMOND",GROW_OR_SHRINK_AND_TURN:"GROW_OR_SHRINK_AND_TURN",BOOMER:"BOOMER",CENTER_REVOLVE:"CENTER_REVOLVE",WHEEL_WIPE:"WHEEL_WIPE",SPLIT:"SPLIT",FLIP:"FLIP",BLINDS:"BLINDS",DROP:"DROP",SHRED:"SHRED",WHEEL:"WHEEL",FLY:"FLY",ORBIT:"ORBIT",SPIRAL:"SPIRAL",FALL:"FALL",FADE:"FADE",RISEUP_SINKDOWN:"RISEUP_SINKDOWN",PULL:"PULL",EXPAND_OR_CONTRACT:"EXPAND_OR_CONTRACT",CREDITS:"CREDITS",APPEAR:"APPEAR",DRAW:"DRAW",RANDOM:"RANDOM",REVOLVINGDOOR:"REVOLVINGDOOR",VORTEX:"VORTEX",WINDOW:"WINDOW",WIPE:"WIPE",METEOR:"METEOR",SWIVEL:"SWIVEL",ZOOM:"ZOOM",PAN:"PAN",WEDGE:"WEDGE",PEEK:"PEEK"},TextAnimationCategory:{PER_WORD:"PER_WORD",PER_LETTER:"PER_LETTER",PER_LINE:"PER_LINE",FULL_TEXT:"FULL_TEXT"},AnimationObject:{TABLE:"TABLE",SHAPE:"SHAPE",CHART:"CHART"},DateTimeModifierValueType:{DATE:"DATE",DATE_AND_TIME:"DATE_AND_TIME",TIME:"TIME"},SoundType:{EXTERNAL:"EXTERNAL",BUILTIN:"BUILTIN"},TimeVariant:{HOUR:"HOUR",MERIDIEM:"MERIDIEM",MINUTE:"MINUTE",SECOND:"SECOND",BASE_TIME:"BASE_TIME"},ListState:{RESOLVED:"RESOLVED",OPENED:"OPENED"},GradientFillType:{PATH:"PATH",RECTANGULAR:"RECTANGULAR",LINEAR:"LINEAR",ANGULAR:"ANGULAR",RADIAL:"RADIAL"},ElementType:{STR:"STR",NUM:"NUM"},PageOrientation:{LANDSCAPE:"LANDSCAPE",PORTRAIT:"PORTRAIT"},DisplayBlank:{ZERO:"ZERO",GAP:"GAP",SPAN:"SPAN"},ChartAnimationDeliveryModel:{CATEGORY:"CATEGORY",SERIES_VALUE:"SERIES_VALUE",PER_CATEGORY:"PER_CATEGORY",WHOLE:"WHOLE",PER_SERIES_VALUE:"PER_SERIES_VALUE"},TableAnimationDeliveryModel:{COLUMN:"COLUMN",ROW:"ROW",WHOLE:"WHOLE",CELL:"CELL"},AnimateThyselfType:{TEXTFIELD:"TEXTFIELD",MODIFIERS:"MODIFIERS",GROUPSHAPE:"GROUPSHAPE"},BlendMode:{LUMINOSITY:"LUMINOSITY",COLOR_BURN:"COLOR_BURN",LIGHTEN:"LIGHTEN",COLOR_DODGE:"COLOR_DODGE",OVERLAY:"OVERLAY",EXCLUSION:"EXCLUSION",DIFFERENCE:"DIFFERENCE",SCREEN:"SCREEN",COLOR:"COLOR",SOFT_LIGHT:"SOFT_LIGHT",HUE:"HUE",MULTIPLY:"MULTIPLY",DARKEN:"DARKEN",NORMAL:"NORMAL",SATURATION:"SATURATION",HARD_LIGHT:"HARD_LIGHT"},LinkOpenType:{NEW:"NEW",SELF:"SELF"},ApplyTextStyle:{TEXT_RENDERED_PART:"TEXT_RENDERED_PART",WHOLE:"WHOLE"},CrossBetween:{MIDCAT:"MIDCAT",DEFAULT:"DEFAULT"},ChartType:{AREA3D:"AREA3D",REPPIE:"REPPIE",DOUGHNUT:"DOUGHNUT",BUBBLE:"BUBBLE",BAR:"BAR",AREA:"AREA",BAR3D:"BAR3D",PIE3D:"PIE3D",LINE:"LINE",SCATTER:"SCATTER",LINE3D:"LINE3D",PIE:"PIE"},AnimationRepeatType:{NEXTSLIDE:"NEXTSLIDE",REPEATCOUNT:"REPEATCOUNT",NEXTCLICK:"NEXTCLICK"},DefinedKey:{FULLSCREEN:"FULLSCREEN",BORDER:"BORDER",TRANSPARENCY:"TRANSPARENCY",UNDEFINED:"UNDEFINED",SCROLLING:"SCROLLING"},DateTimeModifierValueConstant:{FIXED:"FIXED",REAL:"REAL"},ColorReference:{FOLLOWHLINK:"FOLLOWHLINK",LT1:"LT1",DK1:"DK1",TX1:"TX1",BG2:"BG2",BG1:"BG1",TX2:"TX2",A1:"A1",A2:"A2",A3:"A3",A4:"A4",A5:"A5",HOLDER:"HOLDER",A6:"A6",HLINK:"HLINK",CUSTOM:"CUSTOM"},FixedDimension:{WIDTH:"WIDTH",NONE:"NONE",HEIGHT:"HEIGHT"},PictureType:{TEXTURE:"TEXTURE",EXTERNAL:"EXTERNAL",THEMEBG:"THEMEBG",CLIPART:"CLIPART",USERDEFINED:"USERDEFINED",PLACEHOLDER:"PLACEHOLDER"},ShapeGeometryType:{PRESET_SMART:"PRESET_SMART",PRESET:"PRESET",CUSTOM:"CUSTOM"},TextAnimationType:{PARA:"PARA",BOX:"BOX",LEVEL:"LEVEL"},ScrollDirection:{VERTICAL:"VERTICAL",HORIZONTAL:"HORIZONTAL",NOSCROLL:"NOSCROLL",BOTH:"BOTH"},CrossType:{MIN:"MIN",MAX:"MAX",MANUAL:"MANUAL",AUTOZERO:"AUTOZERO"},ModifierValueType:{NUMBER:"NUMBER",DATETIME:"DATETIME",UNKNOWN_VALUE_TYPE:"UNKNOWN_VALUE_TYPE"},ShapeNodeType:{SHAPE:"SHAPE",COMBINEDOBJECT:"COMBINEDOBJECT",PICTURE:"PICTURE",PARAGRAPH:"PARAGRAPH",GRAPHICFRAME:"GRAPHICFRAME",GROUPSHAPE:"GROUPSHAPE",CONNECTOR:"CONNECTOR"},AffixType:{SUFFIX:"SUFFIX",UNKNOWN_AFFIX:"UNKNOWN_AFFIX",PREFIX:"PREFIX",BOTH:"BOTH"},FontWeight:{HEAVY:"HEAVY",MEDIUM:"MEDIUM",LIGHT:"LIGHT",BOLD:"BOLD",BLACK:"BLACK",EXTRA_LIGHT:"EXTRA_LIGHT",DEMI_BOLD:"DEMI_BOLD",THIN:"THIN",NORMAL:"NORMAL"},PresetSmartShapeGeometry:{WALL_CLOCK:"WALL_CLOCK",CIRCULAR_PLAIN_INDICATOR:"CIRCULAR_PLAIN_INDICATOR",TIMER_CLOCK:"TIMER_CLOCK",HORIZONTAL_BLOCK_BATTERY:"HORIZONTAL_BLOCK_BATTERY",HORIZONTAL_BLOCK_INDICATOR:"HORIZONTAL_BLOCK_INDICATOR",VERTICAL_CENTERBUBLE_INDICATOR:"VERTICAL_CENTERBUBLE_INDICATOR",ARC_SPEED_METER:"ARC_SPEED_METER",HORIZONTAL_CENTERCIRCLE_INDICATOR:"HORIZONTAL_CENTERCIRCLE_INDICATOR",CIRCULAR_VERTICALFILL_INDICATOR:"CIRCULAR_VERTICALFILL_INDICATOR",ARC_PLAIN_METER:"ARC_PLAIN_METER",VERTICAL_BLOCK_INDICATOR:"VERTICAL_BLOCK_INDICATOR",CIRCULAR_ENCIRCLED_INDICATOR:"CIRCULAR_ENCIRCLED_INDICATOR",DIGITAL_CLOCK:"DIGITAL_CLOCK",PEOPLE_INDICATOR:"PEOPLE_INDICATOR",VERTICAL_BLOCK_BATTERY:"VERTICAL_BLOCK_BATTERY",VERTICAL_CENTERPOINT_INDICATOR:"VERTICAL_CENTERPOINT_INDICATOR",CIRCULAR_PLAINFILL_INDICATOR:"CIRCULAR_PLAINFILL_INDICATOR",ARC_NEEDLE_METER:"ARC_NEEDLE_METER",HORIZONTAL_PLAIN_INDICATOR:"HORIZONTAL_PLAIN_INDICATOR",VERTICAL_PLAIN_INDICATOR:"VERTICAL_PLAIN_INDICATOR"},PositionElement:{B:"B",R:"R",C:"C",T:"T",MANUAL:"MANUAL",L:"L",TR:"TR"},ProtocolScheme:{HTTPS:"HTTPS",NO_SCHEME:"NO_SCHEME",HTTP:"HTTP"},SplitType:{POS:"POS",PERCENT:"PERCENT",CUSTOM:"CUSTOM",VALUE:"VALUE"},Gradual:{UNTIL_PROP:"UNTIL_PROP",UNTIL_END:"UNTIL_END"},ChartLinePropsType:{STD:"STD",CUSTOM:"CUSTOM"},SelectableBulletType:{UNKNOWN_SELECTABLE:"UNKNOWN_SELECTABLE",ROUND_SELECT:"ROUND_SELECT",SQUARE_SELECT:"SQUARE_SELECT"},LineType:{SINGLE:"SINGLE",NONE:"NONE"},Axis:{VER:"VER",HOR:"HOR"},Loop:{FOREVER:"FOREVER",TILL_CHANGE:"TILL_CHANGE"},EmbedType:{EXTERNAL:"EXTERNAL",INTERNAL:"INTERNAL",MEDIA:"MEDIA"},ValueType:{FLOAT:"FLOAT",STRING:"STRING",UNKNOWN:"UNKNOWN",BOOLEAN:"BOOLEAN"},Mode:{BILEVEL:"BILEVEL",SEPIA:"SEPIA",DUOTONE:"DUOTONE",GRAYSCALE:"GRAYSCALE",NONE:"NONE"},LockProp:{ROTATION:"ROTATION",PARA_PROPS:"PARA_PROPS",FILL:"FILL",MODIFY:"MODIFY",TEXTBODY_PROPS:"TEXTBODY_PROPS",STYLE:"STYLE",SHAPE_TYPE_CHANGE:"SHAPE_TYPE_CHANGE",SELECT:"SELECT",CROP:"CROP",STROKE:"STROKE",ASPECT_CHANGE:"ASPECT_CHANGE",GROUP:"GROUP",RESIZE:"RESIZE",MOVE:"MOVE",ARROW_HEAD_CHANGE:"ARROW_HEAD_CHANGE",TEXT_PROPS:"TEXT_PROPS",SHAPE_PROPS:"SHAPE_PROPS",PORTION_PROPS:"PORTION_PROPS",UNGROUP:"UNGROUP",HANDLES:"HANDLES",EFFECTS:"EFFECTS"},JoinType:{ROUND:"ROUND",BEVEL:"BEVEL",MITER:"MITER"},NumberedBulletType:{LCROMAN:"LCROMAN",UCROMAN:"UCROMAN",NUMERIC:"NUMERIC",UCALPHABET:"UCALPHABET",LCALPHABET:"LCALPHABET"},ColorModelRepresentation:{DEFAULT_COLOR_MODEL:"DEFAULT_COLOR_MODEL",HSB:"HSB",RGB:"RGB"},FillPictureAs:{FIT:"FIT",FILL:"FILL",TILE:"TILE",FRAME:"FRAME"},UpdateType:{AUTOMATIC:"AUTOMATIC",MANUAL:"MANUAL"},AutoFitType:{SHAPE:"SHAPE",BEST:"BEST",NONE:"NONE",NORMAL:"NORMAL"},FieldType:{DATETIME:"DATETIME",EMOJI:"EMOJI",TAG:"TAG",USER:"USER",SMART:"SMART",DATAFIELD:"DATAFIELD",SLIDENUM:"SLIDENUM"},TextWritingMode:{STACK:"STACK",VERTICAL:"VERTICAL",DEFAULT_WRITING_MODE:"DEFAULT_WRITING_MODE",HORIZONTAL:"HORIZONTAL"},StyleAnimationCategory:{CYCLIC:"CYCLIC",GRADUAL:"GRADUAL"},PlaceHolderType:{TXTBODY:"TXTBODY",CLIPART:"CLIPART",FOOTER:"FOOTER",SUBTITLE:"SUBTITLE",SMARTART:"SMARTART",PICT:"PICT",CHART:"CHART",TABLE:"TABLE",TXT:"TXT",DATETIME:"DATETIME",MEDIA:"MEDIA",TITLE:"TITLE",CONTENT:"CONTENT",SLIDENUM:"SLIDENUM"},LabelPos:{NIL:"NIL",NEXTTO:"NEXTTO",HIGH:"HIGH",LOW:"LOW"},RelatedMode:{RELATIVE:"RELATIVE",FIXED:"FIXED"},SeparatorType:{COMMA:"COMMA",SPACE:"SPACE",SEMICOLON:"SEMICOLON",NEWLINE:"NEWLINE",PERIOD:"PERIOD",ANY:"ANY"},SlideNumberField:{NUM2:"NUM2",NUM1:"NUM1"},MarkerType:{DIAMOND:"DIAMOND",OVAL:"OVAL",BLOCK:"BLOCK",NONE:"NONE",CLASSIC:"CLASSIC",OPEN:"OPEN"},CommentModification:{EDITED:"EDITED",DELETED:"DELETED"},TransitionDirection:{OUT_FROM_BOTTOM:"OUT_FROM_BOTTOM",IN_FROM_CENTER:"IN_FROM_CENTER",IN:"IN",OUT_TO_CENTER:"OUT_TO_CENTER",OUT_SLIGHTLY:"OUT_SLIGHTLY",IN_TO_BOTTOM:"IN_TO_BOTTOM",IN_SLIGHTLY:"IN_SLIGHTLY",OUT:"OUT"},DataMarkerType:{SQUARE:"SQUARE",TRIANGLE:"TRIANGLE",STAR:"STAR",DIAMOND:"DIAMOND",PICTURE:"PICTURE",DOT:"DOT",XMARK:"XMARK",NONE:"NONE",DASH:"DASH",CIRCLE:"CIRCLE",PLUS:"PLUS"}};ShapeConstants=shapeConstantsArr,function(e){var t={editPointborder:{type:"SHAPE",shape:{nvOProps:{nvDProps:{id:"editPointborder"}},props:{transform:{fliph:!1,flipv:!1,dim:{width:10,height:10},pos:{left:0,top:0,zindex:1e4}},fill:{type:"NONE"},stroke:{type:"SOLID",width:1,jointype:"ROUND",fill:{type:"SOLID",solid:{color:{type:"CUSTOM",rgb:[166,166,166]}}},captype:"FLAT"},geom:{type:"PRESET",preset:{type:"RECT"}}}}},border:{type:"SHAPE",shape:{nvOProps:{nvDProps:{id:"border"}},props:{transform:{fliph:!1,flipv:!1,dim:{width:8,height:8},pos:{left:10,top:10,zindex:9999}},stroke:{type:"DASH",width:1,jointype:"ROUND",fill:{type:"SOLID",solid:{color:{type:"CUSTOM",rgb:[111,111,111]}}},captype:"FLAT"},geom:{type:"PRESET",preset:{type:"RECT"}}}}},rotate:{type:"SHAPE",shape:{nvOProps:{nvDProps:{id:"rotate"}},props:{transform:{fliph:!1,flipv:!1,dim:{width:8,height:8},pos:{left:10,top:10,zindex:1e4}},fill:{type:"SOLID",solid:{color:{type:"CUSTOM",rgb:[195,234,115]}}},stroke:{type:"SOLID",width:1,jointype:"MITER",fill:{type:"SOLID",solid:{color:{type:"CUSTOM",rgb:[64,64,64]}}}},geom:{type:"PRESET",preset:{type:"OVAL"}}}}},borderframe:{type:"SHAPE",shape:{nvOProps:{nvDProps:{id:"borderframe"}},props:{transform:{fliph:!1,flipv:!1,dim:{width:10,height:10},pos:{left:10,top:10,zindex:1e4}},fill:{type:"SOLID",solid:{color:{type:"CUSTOM",rgb:[225,236,250]}}},stroke:{type:"SOLID",width:1,jointype:"MITER",fill:{type:"SOLID",solid:{color:{type:"CUSTOM",rgb:[203,222,248]}}}},geom:{type:"PRESET",preset:{type:"FRAME"}}}}},other:{type:"SHAPE",shape:{nvOProps:{nvDProps:{id:"other"}},props:{transform:{fliph:!1,flipv:!1,dim:{width:8,height:8},pos:{left:10,top:10,zindex:1e4}},fill:{type:"SOLID",solid:{color:{type:"CUSTOM",rgb:[10,136,250]}}},stroke:{type:"SOLID",width:1,jointype:"MITER",fill:{type:"SOLID",solid:{color:{type:"CUSTOM",rgb:[255,255,255]}}}},geom:{type:"PRESET",preset:{type:"RECT"}}}}},lock_border:{type:"SHAPE",shape:{nvOProps:{nvDProps:{id:"border"}},props:{transform:{fliph:!1,flipv:!1,dim:{width:8,height:8},pos:{left:10,top:10,zindex:9999}},stroke:{type:"SOLID",width:1,jointype:"ROUND",fill:{type:"SOLID",solid:{color:{type:"CUSTOM",rgb:[111,111,111]}}},captype:"FLAT"},geom:{type:"PRESET",preset:{type:"RECT"}}}}},editPointend:{type:"SHAPE",shape:{nvOProps:{nvDProps:{id:"editPoint"}},props:{transform:{fliph:!1,flipv:!1,dim:{width:9,height:9},pos:{left:0,top:0,zindex:1e4}},fill:{type:"SOLID",solid:{color:{type:"CUSTOM",rgb:[255,255,255]}}},stroke:{type:"SOLID",width:2,jointype:"MITER",fill:{type:"SOLID",solid:{color:{type:"CUSTOM",rgb:[0,133,254]}}}},geom:{type:"PRESET",preset:{type:"OVAL"}}}}},editPointnew:{type:"SHAPE",shape:{nvOProps:{nvDProps:{id:"editPointnew"}},props:{transform:{fliph:!1,flipv:!1,dim:{width:9,height:9},pos:{left:0,top:0,zindex:1e4}},fill:{type:"SOLID",solid:{color:{type:"CUSTOM",rgb:[222,222,222]}}},stroke:{type:"SOLID",width:3,jointype:"MITER",fill:{type:"SOLID",solid:{color:{type:"CUSTOM",rgb:[0,0,0]}}}},geom:{type:"PRESET",preset:{type:"OVAL"}}}}},cropcenter:{type:"SHAPE",shape:{nvOProps:{nvDProps:{id:"cropcenter"}},props:{transform:{fliph:!1,flipv:!1,dim:{width:15,height:5},pos:{left:10,top:10,zindex:1e4}},fill:{type:"SOLID",solid:{color:{type:"CUSTOM",rgb:[252,240,23]}}},stroke:{type:"SOLID",width:1,jointype:"MITER",fill:{type:"SOLID",solid:{color:{type:"CUSTOM",rgb:[0,0,0]}}}},geom:{type:"PRESET",preset:{type:"RECT"}}}}},handle:{type:"SHAPE",shape:{nvOProps:{nvDProps:{id:"handle"}},props:{transform:{fliph:!1,flipv:!1,dim:{width:9,height:9},pos:{left:10,top:10,zindex:1e4}},fill:{type:"SOLID",solid:{color:{type:"CUSTOM",rgb:[252,240,23]}}},stroke:{type:"SOLID",width:1,jointype:"MITER",fill:{type:"SOLID",solid:{color:{type:"CUSTOM",rgb:[64,64,64]}}}},geom:{type:"PRESET",preset:{type:"DIAMOND"}}}}},editPointcontrolline:{type:"SHAPE",shape:{nvOProps:{nvDProps:{id:"editPointcontrolline"}},props:{transform:{fliph:!1,flipv:!1,dim:{width:10,height:10},pos:{left:0,top:0,zindex:1e4}},fill:{type:"NONE"},stroke:{type:"SOLID",width:1,jointype:"MITER",fill:{type:"SOLID",solid:{color:{type:"CUSTOM",rgb:[170,170,170]}}},captype:"FLAT"},geom:{type:"PRESET",preset:{type:"RECT"}}}}},resizerbox:{type:"PICTURE",picture:{nvOProps:{nvDProps:{id:"resizerbox"}},value:{id:"resizerbox",type:"EXTERNAL",url:"url"},props:{transform:{fliph:!1,flipv:!1,dim:{width:10,height:10},pos:{left:10,top:10,zindex:1e4}},geom:{type:"PRESET",preset:{type:"RECT"}}}}},highlight:{type:"SHAPE",shape:{nvOProps:{nvDProps:{id:"highlight"}},props:{geom:{type:"PRESET",preset:{type:"RECT"}}}}},corner:{type:"SHAPE",shape:{nvOProps:{nvDProps:{id:"corner"}},props:{transform:{fliph:!1,flipv:!1,dim:{width:9,height:9},pos:{left:10,top:10,zindex:1e4}},fill:{type:"SOLID",solid:{color:{type:"CUSTOM",rgb:[10,136,250]}}},stroke:{type:"SOLID",width:1,jointype:"MITER",fill:{type:"SOLID",solid:{color:{type:"CUSTOM",rgb:[255,255,255]}}}},geom:{type:"PRESET",preset:{type:"OVAL"}}}}},connector:{type:"SHAPE",shape:{nvOProps:{nvDProps:{id:"connector"}},props:{transform:{fliph:!1,flipv:!1,dim:{width:8,height:8},pos:{left:10,top:10,zindex:1e4}},fill:{type:"SOLID",solid:{color:{type:"CUSTOM",rgb:[240,110,100],tweaks:{alpha:0}}}},stroke:{type:"SOLID",width:1,jointype:"ROUND",fill:{type:"SOLID",solid:{color:{type:"CUSTOM",rgb:[245,245,245],tweaks:{alpha:.5}}}}},geom:{type:"PRESET",preset:{type:"BEVEL"}}}}},cropmiddle:{type:"SHAPE",shape:{nvOProps:{nvDProps:{id:"cropmiddle"}},props:{transform:{fliph:!1,flipv:!1,dim:{width:5,height:15},pos:{left:10,top:10,zindex:1e4}},fill:{type:"SOLID",solid:{color:{type:"CUSTOM",rgb:[252,240,23]}}},stroke:{type:"SOLID",width:1,jointype:"MITER",fill:{type:"SOLID",solid:{color:{type:"CUSTOM",rgb:[0,0,0]}}}},geom:{type:"PRESET",preset:{type:"RECT"}}}}},lock:{type:"SHAPE",shape:{nvOProps:{nvDProps:{id:"lock"}},props:{transform:{fliph:!1,flipv:!1,dim:{width:8,height:8},pos:{left:10,top:10,zindex:1e4}},fill:{type:"SOLID",solid:{color:{type:"CUSTOM",rgb:[124,124,124]}}},stroke:{type:"SOLID",width:1,jointype:"MITER",fill:{type:"SOLID",solid:{color:{type:"CUSTOM",rgb:[0,0,0]}}}},geom:{type:"PRESET",preset:{type:"LOCK_SYMBOL"}}}}},editPointcontrol:{type:"SHAPE",shape:{nvOProps:{nvDProps:{id:"editPointscontrol"}},props:{transform:{fliph:!1,flipv:!1,dim:{width:9,height:9},pos:{left:0,top:0,zindex:1e4}},fill:{type:"SOLID",solid:{color:{type:"CUSTOM",rgb:[195,234,115]}}},stroke:{type:"SOLID",width:1,jointype:"MITER",fill:{type:"SOLID",solid:{color:{type:"CUSTOM",rgb:[64,64,64]}}}},geom:{type:"PRESET",preset:{type:"OVAL"}}}}},cropcorner:{type:"SHAPE",shape:{nvOProps:{nvDProps:{id:"cropcorner"}},props:{transform:{fliph:!1,flipv:!1,dim:{width:10,height:10},pos:{left:10,top:10,zindex:1e4}},fill:{type:"SOLID",solid:{color:{type:"CUSTOM",rgb:[252,240,23]}}},stroke:{type:"SOLID",width:1,jointype:"MITER",fill:{type:"SOLID",solid:{color:{type:"CUSTOM",rgb:[0,0,0]}}}},geom:{type:"PRESET",preset:{type:"LSHAPE"}}}}},editPointhighlighter:{type:"SHAPE",shape:{nvOProps:{nvDProps:{id:"editPointhighlighter"}},props:{transform:{fliph:!1,flipv:!1,dim:{width:10,height:10},pos:{left:0,top:0,zindex:1e4}},fill:{type:"NONE"},stroke:{type:"SOLID",width:1,jointype:"MITER",fill:{type:"SOLID",solid:{color:{type:"CUSTOM",rgb:[0,133,254]}}},captype:"FLAT"},geom:{type:"PRESET",preset:{type:"RECT"}}}}},li:{type:"SHAPE",shape:{nvOProps:{nvDProps:{id:"li"}},props:{transform:{fliph:!1,flipv:!1,dim:{width:0,height:25},pos:{left:10,top:10,zindex:1e4}},fill:{type:"SOLID",solid:{color:{type:"CUSTOM",rgb:[252,240,23]}}},stroke:{type:"SOLID",width:1,jointype:"MITER",fill:{type:"SOLID",solid:{color:{type:"CUSTOM",rgb:[64,64,64]}}}},geom:{type:"PRESET",preset:{type:"LINE"}}}}},value:{li:"li",border:"border",borderframe:"borderframe",nwbox:"corner",nbox:"other",nebox:"corner",ebox:"other",sebox:"corner",sbox:"other",swbox:"corner",wbox:"other",rotate:"rotate",resizerbox:"resizerbox"},crop:{type:"SHAPE",shape:{nvOProps:{nvDProps:{id:"handle"}},props:{transform:{fliph:!1,flipv:!1,dim:{width:9,height:9},pos:{left:10,top:10,zindex:1e4}},fill:{type:"SOLID",solid:{color:{type:"CUSTOM",rgb:[252,240,23]}}},stroke:{type:"SOLID",width:1,jointype:"MITER",fill:{type:"SOLID",solid:{color:{type:"CUSTOM",rgb:[64,64,64]}}}},geom:{type:"PRESET",preset:{type:"RECT"}}}}}};jQuery.BBoxConstant=t}(),this.JSON||(this.JSON={}),function(){function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var a,o,i,r,s,n=gap,d=t[e];switch(d&&"object"==typeof d&&"function"==typeof d.toJSON&&(d=d.toJSON(e)),"function"==typeof rep&&(d=rep.call(t,e,d)),typeof d){case"string":return quote(d);case"number":return isFinite(d)?String(d):"null";case"boolean":case"null":return String(d);case"object":if(!d)return"null";if(gap+=indent,s=[],"[object Array]"===Object.prototype.toString.apply(d)){for(r=d.length,a=0;a<r;a+=1)s[a]=str(a,d)||"null";return i=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+n+"]":"["+s.join(",")+"]",gap=n,i}if(rep&&"object"==typeof rep)for(r=rep.length,a=0;a<r;a+=1)"string"==typeof(o=rep[a])&&(i=str(o,d))&&s.push(quote(o)+(gap?": ":":")+i);else for(o in d)Object.hasOwnProperty.call(d,o)&&(i=str(o,d))&&s.push(quote(o)+(gap?": ":":")+i);return i=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+n+"}":"{"+s.join(",")+"}",gap=n,i}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,a){var o;if(gap="",indent="","number"==typeof a)for(o=0;o<a;o+=1)indent+=" ";else"string"==typeof a&&(indent=a);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var a,o,i=e[t];if(i&&"object"==typeof i)for(a in i)Object.hasOwnProperty.call(i,a)&&(void 0!==(o=walk(i,a))?i[a]=o:delete i[a]);return reviver.call(e,t,i)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),jQuery.Constants={CSRF_PARAM_NAME:"",CSRF_COOKIE_NAME:""},function(e){var t=[{type:[{DASHDOT:"4,2,1,2",SQUARE_DOT:"1,2",LONG_DASH:"8,2",ROUND_DOT:"1,2",LONG_DASH_DOT_DOT:"8,2,1,2,1,2",LONG_DASH_DOT:"8,2,1,2",SOLID:"0",DASH:"4,2"},{DASHDOT:"dashdot",SQUARE_DOT:"dot",LONG_DASH:"longdash",ROUND_DOT:"dot",LONG_DASH_DOT_DOT:"longdashdotdot",LONG_DASH_DOT:"longdashdot",SOLID:"solid",DASH:"dash"}],marker:[{MEDIUM:"5",WIDE:"7",NARROW:"4"},{WIDE:"LONG",NARROW:"SHORT"}],captype:{SQUARE:"SQUARE",FLAT:"FLAT",CAPROUND:"ROUND"}}];jQuery.Stroke=t[0]}();var Util;!function(){"use strict";Util={isEmptyObject:function(e){return 0===Object.keys(e).length},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},roundOff:function(e){return Math.round(1e3*e)/1e3},isDatasetSupportedForSvg:function(){return void 0!==document.getElementsByTagName("html")[0].ownerDocument.createElementNS("http://www.w3.org/2000/svg","svg").dataset},isJQueryObject:function(e){return e instanceof jQuery},getElement:function(e){return e[0]},getJQueryElement:function(e){return $(e)},extend:function(e,t,a){if(void 0===a)return t;if(null===a||"object"!=typeof a)return a;var o=a.constructor;switch(o){case RegExp:t=new o(a);break;case Date:t=new o(a.getTime());break;default:void 0===t&&(t=new o)}for(var i in a)a.hasOwnProperty(i)&&(t[i]=e?Util.extend(e,t[i],a[i]):a[i]);return t}}}(),Element.prototype.data=function(e,t){return void 0!==t?$(this).data(e,t):$(this).data(e)},Element.prototype.removeData=function(e){return $(this).removeData(e)},Element.prototype.remove=function(){return $(this).remove()},Util.isDatasetSupportedForSvg()?(Element.prototype.setDataset=function(e,t){this.dataset[e]=JSON.stringify(t)},Element.prototype.getDataset=function(e){if(e){var t=this.dataset[e];return t?JSON.parse(t):t}var a={};for(var o in this.dataset)a[o]=JSON.parse(this.dataset[o]);return a},Element.prototype.removeDataset=function(e){if(e)return delete this.dataset[e];for(var t in this.dataset)delete this.dataset[t];return!0}):(Element.prototype.setDataset=function(e,t){this.setAttribute("data-"+e,JSON.stringify(t))},Element.prototype.getDataset=function(e){if(e){var t=this.getAttribute("data-"+e);return t?JSON.parse(t):t}for(var a={},o=/^data-/,i=[].filter.call(this.attributes,function(e){return o.test(e.name)}),r=0,s=i.length;r<s;r++){var n=i[r];a[n.slice(5)]=JSON.parse(this.getAttribute(n))}return a},Element.prototype.removeDataset=function(e){if(e)return this.removeAttribute("data-"+e);for(var t=/^data-/,a=[].filter.call(this.attributes,function(e){return t.test(e.name)}),o=0,i=a.length;o<i;o++)this.removeAttribute(a[o]);return!0}),Node.prototype.clone=function(e,t){return $(this).clone(e,t)},NodeList.prototype.remove=HTMLCollection.prototype.remove=function(){return $(this).remove()},Node.prototype.insertAfter=function(e){var t=this;return e.parentNode.insertBefore(t,e.nextSibling)};var DOMUtil;!function(){"use strict";DOMUtil={getElementById:function(e){return document.getElementById(e)},select:function(e,t){return"#"===e[0]&&(e="[id='"+e.substring(1)+"']"),t.querySelector(e)},selectAll:function(e,t){return t.querySelectorAll(e)},create:function(e,t){var a=document.createElement(e);return"object"==typeof t&&this.set(a,t),a},set:function(e,t){for(var a in t)e.setAttribute(a,t[a]);return e},selectByAttribute:function(e,t,a){var o="["+e+"='"+t+"']";return a.querySelector(o)},children:function(e,t){var a;if("#"===e[0])a=DOMUtil.select(e,t);else{var o=t.children;if("."===e[0])a=[].filter.call(o,function(t){var a=e.slice(1,e.length);return DOMUtil.hasClass(t,a)});else{var i=e.toLowerCase();a=[].filter.call(o,function(e){return e.tagName.toLowerCase()===i})}}return a},addClass:function(e,t){e.className+=" "+t},hasClass:function(e,t){return e.classList.contains(t)}}}(),function(){"use strict";Util.extend(!0,DOMUtil,{emptyBox:function(e){e.removeData(),e.innerHTML=null}})}();var PathGenerator;!function(e){(PathGenerator=function(e){this.init(e)}).prototype={pathArray:void 0,pathNumber:void 0,init:function(e){e?this.pathutil=DrawingPathUtil:VectorUtil.supportsSvg()?this.pathutil=SVGPathUtil:this.pathutil=VMLPathUtil},getCustomPathPoints:function(t,a,o,i){this.pathArray=[[]],this.pathNumber=0;var r=VectorUtil.getViewBoxDimensions(a,o);a=r[0],o=r[1];var s=this,n=t.pathList;return e.each(n,function(t,r){var n=r;0!=t&&s.createNewPath();var d=n.width?n.width:1,p=n.height?n.height:1,l=e.extend(!0,[],n.path);l=s.rectifySameCoordinates(l);var h,c;e.each(l,function(t,r){var n=l[t];c=l[t+1];var f=n.type.split("_"),u="";e.each(f,function(e,t){var a=t.toLowerCase();0!=e&&(a=VectorUtil.capitalise(a)),u+=a});var m=n[u];s.scalePointElement(n,d,a,p,o);var g=void 0!=i?i:s.getRadius(n);s.isSupportRadius(n,g,c)?s.createRadiusArc(l,n,h,c,d,a,p,o,g,m):s[u].call(s,m,n,h),h=n})}),this.pathArray},rectifySameCoordinates:function(e){for(var t,a,o=[],i=0;i<e.length;i++)if((t=e[i])&&t.type===ShapeConstants.PathType.M&&(a=t),i){var r=o[o.length-1],s=this.getEndPoint(r),n=this.getEndPoint(t);if(t&&t.c){var d=this.getEndPoint(a);0==(!s||!d||zoho.math.length(s.x,s.y,d.x,d.y))&&r.type==ShapeConstants.PathType.L&&o.pop()}0!=(!s||!n||zoho.math.length(s.x,s.y,n.x,n.y))&&o.push(t)}else o.push(t);return o},isSupportRadius:function(e,t,a){var o=!1;if(t){var i=a&&a.type?a.type:void 0,r=e.type,s={selected:[ShapeConstants.PathType.M,ShapeConstants.PathType.L],next:[ShapeConstants.PathType.C,ShapeConstants.PathType.L,ShapeConstants.PathType.QC]};o=s.selected.indexOf(r)>-1&&s.next.indexOf(i)>-1}return o},createRadiusArc:function(t,a,o,i,r,s,n,d,p,l){var h=e.extend(!0,{},a),c=e.extend(!0,{},o),f=e.extend(!0,{},i),u=this,m=h.type,g=m.toLowerCase();if(m===ShapeConstants.PathType.M){var S=u.getPreviousCpoint(t);c=e.extend(!0,{},S),u.scalePointElement(c,r,s,n,d)}f.c&&(f=e.extend(!0,{},t[0])),u.scalePointElement(f,r,s,n,d);var x=u.getEndPoint(c),v=u.getEndPoint(h),y=f.qc?f.qc[0]:u.getEndPoint(f),E=u.getMaxRadius(x,v,y,p);if(p=Math.min(p,E)){var C=u.getArcPoints(x,v,y,p),O=C.start,b=C.end;if((m===ShapeConstants.PathType.L||m===ShapeConstants.PathType.M)&&(u[g].call(u,O),u.addEllipseCurve(p,p,x.x,x.y,b.x,b.y,!C.clockwise),i.type==ShapeConstants.PathType.QC)){var T=f.qc,w=new QuadraticBezier(v,T[0],T[1]).splitAtPoint(b)[1];i.qc[0].x=w.points[1].x/s*r,i.qc[0].y=w.points[1].y/d*n}}else u[g].call(u,l)},getPreviousCpoint:function(e,t){for(var a=t=void 0===t?e.length-1:t;a>=0;a--){var o=e[a];if(!o.c)return o}},getPreviousControl:function(e){var t=e[e.type.toLowerCase()];if(t&&t.length)return t[t.length-2]},scalePointElement:function(t,a,o,i,r){var s=t[t.type.toLowerCase()];return s&&(s.length?e.each(s,function(e,t){t.x=t.x/a*o,t.y=t.y/i*r}):(s.x=s.x/a*o,s.y=s.y/i*r)),t},getEndPoint:function(e){var t=e[e.type.toLowerCase()];if(t)return t.length?t[t.length-1]:t},getRadius:function(e){var t=this.getEndPoint(e);return t&&t.radius?t.radius:0},getCustomPath:function(t,a,o){var i=this.getCustomPathPoints(t,a,o),r={};r.path=this.convertToPath(i);var s=e.extend(!0,[],r.path);r.path=s.concat(r.path);var n=VectorUtil.getViewBoxDimensions(a,o);return this.setConnectorAndTextBox(ShapeConstants.PresetShapeGeometry.RECT,n[0],n[1],r),this.convertTextBoxAndConnector(r),r[Shape.handle]=void 0,r[Shape.modifier]=void 0,r},getPath:function(e,t,a,o,i,r,s){var n=this.getPathPoints(e,o,t,a,r,s);if(i){var d=this.presetToCustomGeom(n.path,t,a,i),p=this.getCustomPath(d,t,a);n.path=p.path}else{n.path=this.convertToPath(n.path),this.convertTextBoxAndConnector(n);var l=n.path,h=l.length;l[h]=l[h-1]}return n.radius=i||0,n},presetToCustomGeom:function(t,a,o,i){var r=CompoundPath.create(t);r.toCubicBeziers();var s=[];return e.each(r.pathList,function(t,r){var n=r.getPathObject();e.each(n,function(e,t){var a=t,o=a[a.type.toLowerCase()];o&&(o.length?o[o.length-1].radius=i:o.radius=i)}),s.push({path:n,width:a,height:o})}),{pathList:s}},getPathPoints:function(t,a,o,i,r,s){this.pathArray=[[]],this.pathNumber=0,a&&a.length||(a=e.Preset[t].modifiers);var n={},d=zoho.string.removeSpace(e.Preset[t].name),p=VectorUtil.getViewBoxDimensions(o,i);return this[d].call(this,a,p[0],p[1],n,r,s),n.path=this.pathArray,n[Shape.modifier]=a,n[Shape.handle]||(n[Shape.handle]=void 0),n},getEllipseCoordinates:function(e,t,a,o,i,r){i||(i=a),r||(r=o);var s=i+a*Math.cos(e),n=r+o*Math.sin(e);return void 0==typeof t?[s,n]:[s,n,i+a*Math.cos(t),r+o*Math.sin(t)]},convertToPath:function(e){for(var t=new Array,a=this,o=0;o<e.length;o++){for(var i=e[o],r="",s=0;s<i.length;s++)for(var n=i[s],d=0;d<n.length;d++){var p=n[d];r+=a.pathutil.getNumber(p),r+=" "}r.length>0&&t.push(r)}return t},convertTextBoxAndConnector:function(e){var t=e[Shape.textbox];t&&(e[Shape.textbox]=this.convertTextBox(t));var a=e[Shape.connector];a&&(e[Shape.connector]=this.convertConnectorPoints(a))},convertTextBox:function(t){return e.map(t,function(e,t){return Math.round(e)})},convertConnectorPoints:function(t){var a=[];return e.each(t,function(e,t){var o=t,i=[];i[0]=Math.round(o[0]),i[1]=Math.round(o[1]),i[2]=Math.round(o[2]),a[e]=i}),a},setTextBox:function(e,t,a,o){if(e==ShapeConstants.PresetShapeGeometry.OVAL){var i=zoho.math.toRadians(225),r=zoho.math.toRadians(45),s=this.getEllipseCoordinates(i,r,t,a);return o[Shape.textbox]=[s[0],s[1],s[2],s[3]],s}},setConnector:function(e,t,a,o){var i=.5*t,r=.5*a;e==ShapeConstants.PresetShapeGeometry.RECT&&(o[Shape.connector]=[[i,0,270],[0,r,180],[i,a,90],[t,r,0]])},setConnectorAndTextBox:function(e,t,a,o){var i=.5*t,r=.5*a;if(e==ShapeConstants.PresetShapeGeometry.OVAL){var s=this.setTextBox(e,i,r,o);o[Shape.connector]=[[i,0,270],[s[0],s[1],270],[0,r,180],[s[0],s[3],90],[i,a,90],[s[2],s[3],90],[t,r,0],[s[2],s[1],270]]}else e==ShapeConstants.PresetShapeGeometry.RECT&&(o[Shape.textbox]=[0,0,t,a],o[Shape.connector]=[[i,0,270],[0,r,180],[i,a,90],[t,r,0]])},Rect:function(e,t,a,o,i=0,r=0){t+=i,a+=r,this.move(i,r),this.addLine(t,r),this.moveLine(t,a,i,a,i,r),this.closePath(),o&&(o[Shape.textbox]=[i,r,t,a],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o),o.cornerRadius=[[0,0],[t,0],[t,a],[0,a]])},Audio:function(e,t,a,o){var i=.5*t,r=.5*a,s=i,n=r,d=i,p=t;o[Shape.textbox]=[0,0,t,a];var l=zoho.math.toRadians(0),h=zoho.math.toRadians(e[1]),c=this.isLargeArc(l,h),f=this.getEllipseCoordinates(l,h,s,n,s,n),u=zoho.math.toRadians(270),m=s+(f[0]-s)*Math.cos(u)-(f[1]-n)*Math.sin(u),g=n+(f[0]-s)*Math.sin(u)+(f[1]-n)*Math.cos(u),S=s+(f[2]-s)*Math.cos(u)-(f[3]-n)*Math.sin(u),x=n+(f[2]-s)*Math.sin(u)+(f[3]-n)*Math.cos(u),v=[s+34*p/100/2.1,n],y=[v[0]-.24*p,n-.14*p],E=[v[0]-.24*p,n+.14*p];if(this.move(0,n),this.addEllipse(i,r,s,n),this.closePath(),this.createNewPath(),0==e[0]&&(this.move(0,n),this.addEllipse(i,r,s,n),this.closePath()),1==e[0]&&(this.move(v[0],v[1]),this.addLine(y[0],y[1]),this.addLine(E[0],E[1]),this.addLine(v[0],v[1]),this.closePath()),2==e[0]){var C=23*d/100,O=15*d/100,b=10*d/100;this.move(s-O,n-C),this.addLine(s-O,n+C),this.moveLine(s-O+b,n+C,s-O+b,n-C),this.closePath(),this.move(s+O,n-C),this.addLine(s+O,n+C),this.moveLine(s+O-b,n+C,s+O-b,n-C),this.closePath()}if(this.createNewPath(),0==e[0]&&(this.move(0,0),this.closePath()),1!=e[0]&&2!=e[0]||(this.move(0,n),this.addEllipse(i,r,s,n),this.closePath()),this.createNewPath(),0==e[0]&&(this.move(v[0],v[1]),this.addLine(y[0],y[1]),this.addLine(E[0],E[1]),this.addLine(v[0],v[1]),this.closePath()),1!=e[0]&&2!=e[0]||(this.move(0,0),this.closePath()),this.createNewPath(),1==e[0]||2==e[0]?(this.move(m,g),this.addEllipseCurve(n,n,m,g,S,x,!1,c)):(this.move(0,0),this.closePath()),this.createNewPath(),1==e[0]||2==e[0]){var T=10*d/100,w=S,D=x;this.move(w-T,D),this.addEllipse(T,T,w,D),this.closePath()}else this.move(0,0),this.closePath();if(this.createNewPath(),1==e[0]||2==e[0]){var P=.2*p,L=d,I=[O=s-L/2,C=n+d/1.7-P/2],A=[O+L,C],N=[O+L,C+P],R=[O,C+P],B=[O+L,C+P/2],_=[O,C+P/2],M=this.getCoordinates(.15,A[0],A[1]);this.move(I[0]+M,I[1]),this.addLine(A[0]-M,I[1]),this.addXCurve(A[0]-M,I[1],B[0],B[1]),this.addYCurve(B[0],B[1],N[0]-M,N[1]),this.addLine(R[0]+M,R[1]),this.addXCurve(R[0]+M,R[1],_[0],_[1]),this.addYCurve(_[0],_[1],I[0]+M,I[1]),this.closePath(),o[Shape.textbox]=[0,C,t,C+P]}else this.move(0,0),this.closePath()},Oval:function(e,t,a,o){var i=.5*t,r=.5*a;this.move(0,r),this.addEllipse(i,r,i,r),this.closePath(),o&&this.setConnectorAndTextBox(ShapeConstants.PresetShapeGeometry.OVAL,t,a,o)},m:function(e){this.move(e.x,e.y)},l:function(e){this.addLine(e.x,e.y)},cc:function(e){this.addCubicCurve(e[0].x,e[0].y,e[1].x,e[1].y,e[2].x,e[2].y)},qc:function(e){this.addQuadraticBezier(e[0].x,e[0].y,e[1].x,e[1].y)},c:function(){this.closePath()},scc:function(e,t,a){if(e&&2==e.length){var o=this.findControlPoint(a);o&&this.addCubicCurve(o.x,o.y,e[0].x,e[0].y,e[1].x,e[1].y)}},sqc:function(e,t,a){if(e&&e.length){var o=this.findControlPoint(a);o&&(this.addQuadraticBezier(o.x,o.y,e[0].x,e[0].y),t.control=o)}},findControlPoint:function(t){var a;if(t){t=e.extend(!0,{},t);var o=this.getEndPoint(t);[ShapeConstants.PathType.CC,ShapeConstants.PathType.QC,ShapeConstants.PathType.SCC,ShapeConstants.PathType.SQC].indexOf(t.type)>-1?(prevControl=t.control?t.control:this.getPreviousControl(t),a=this.mirrorPoint(prevControl,o)):a={x:o.x,y:o.y}}return a},mirrorPoint:function(e,t){return zoho.math.getRotatedValue(180,e.x,e.y,t.x,t.y)},addCubicCurve:function(e,t,a,o,i,r){this.addPath(["C",e,t,a,o,i,r])},addQuadraticBezier:function(e,t,a,o){this.addPath(this.pathutil.getQuadBezier(e,t,a,o))},move:function(e,t){this.addPath(["M",e,t])},addLine:function(e,t){this.addPath(["L",e,t])},moveLine:function(){var e=Array.prototype.slice.call(arguments);e.splice(0,0,"L"),this.addPath(e)},closePath:function(){this.addPath(this.pathutil.getClosePath())},createNewPath:function(){this.pathArray.push(new Array),this.pathNumber++},addPath:function(e,t){t||(t=this.pathArray[this.pathNumber]),e||(e=[]);for(var a=new Array,o=0;o<e.length;o++){var i=e[o];a.push(i)}t.push(a)},addEllipse:function(e,t,a,o,i){this.addPath(this.pathutil.getEllipse(e,t,a,o,i))},RightArrow:function(e,t,a,o){var i=.5*(a-e[0]*a),r=this.getCoordinates(e[1],t,a,1,"x"),s=t-r,n=a-i,d=.5*a;this.drawArrow(0,s,t,0,i,n,a,d),o[Shape.handle]=[[0,i],[s,0]];var p=s+i*r/d;o[Shape.textbox]=[0,i,p,n],o[Shape.connector]=[[s,0,270],[0,d,180],[s,a,90],[t,d,0]]},drawArrow:function(e,t,a,o,i,r,s,n){this.move(t,i),this.addLine(t,o),this.moveLine(a,n,t,s,t,r,e,r,e,i),this.closePath()},getCoordinates:function(e,t,a,o,i){var r=Math.min(t,a),s=e*r;void 0===o&&(o=.5);var n=r*o;return"x"==i?n=t*o:"y"==i&&(n=a*o),s=zoho.math.maxLimit(s,n)},RoundRect:function(e,t,a,o){var i=this.getCoordinates(e[0],t,a),r=t-i,s=a-i;this.move(i,0),this.addLine(r,0),this.addXCurve(r,0,t,i),this.addLine(t,s),this.addYCurve(t,s,r,a),this.addLine(i,a),this.addXCurve(i,a,0,s),this.addLine(0,i),this.addYCurve(0,i,i,0),this.closePath(),o[Shape.handle]=[[i,0]],o.cornerRadius=[[0,0],[t,0],[t,a],[0,a]];var n=.293*i,d=t-n,p=a-n;o[Shape.textbox]=[n,n,d,p],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},addXCurve:function(e,t,a,o,i,r){var s=this.pathutil.getXCurve(e,t,a,o,i,r);void 0!==s&&this.addPath(s)},addYCurve:function(e,t,a,o,i,r){var s=this.pathutil.getYCurve(e,t,a,o,i,r);void 0!==s&&this.addPath(s)},Line:function(e,t,a,o){this.move(0,0),this.addLine(t,a),o[Shape.IsAconnector]=!0},Diamond:function(e,t,a,o){var i=.5*t,r=.5*a;if(this.move(i,0),this.addLine(t,r),this.moveLine(i,a,0,r),this.closePath(),o){var s=.25*t,n=.25*a,d=t-s,p=a-n;o[Shape.textbox]=[s,n,d,p],o[Shape.connector]=[[i,0,270],[0,r,180],[i,a,90],[t,r,0]]}},Bevel:function(e,t,a,o){var i=this.getCoordinates(e[0],t,a),r=t-i,s=a-i;this.move(i,i),this.addLine(r,i),this.moveLine(r,s,i,s),this.createNewPath(),this.move(0,0),this.addLine(i,i),this.moveLine(i,s,0,a),this.createNewPath(),this.move(0,0),this.addLine(t,0),this.moveLine(r,i,i,i),this.createNewPath(),this.move(t,0),this.addLine(t,a),this.moveLine(r,s,r,i),this.createNewPath(),this.move(t,a),this.addLine(0,a),this.moveLine(i,s,r,s),this.createNewPath(),this.move(0,0),this.addLine(0,a),this.moveLine(t,a,t,0),this.closePath(),this.move(i,i),this.addLine(i,s),this.moveLine(r,s,r,i),this.closePath(),this.move(0,0),this.addLine(i,i),this.move(0,a),this.addLine(i,s),this.move(t,a),this.addLine(r,s),this.move(t,0),this.addLine(r,i),o[Shape.handle]=[[i,0]];var n=.5*t,d=.5*a;o[Shape.textbox]=[i,i,r,s],o[Shape.connector]=[[t,d,0],[r,d,0],[n,a,90],[n,s,90],[0,d,180],[i,d,180],[n,0,270],[n,i,270]]},RectangularCallout:function(e,t,a,o){var i=.5*t,r=.5*a,s=e[0]*t,n=e[1]*a,d=i+s,p=r+n,l=t?s*a/t:0,h=Math.abs(n)-Math.abs(l),c=t*zoho.math.ifElse(s,7,2)/12,f=t*zoho.math.ifElse(s,10,5)/12,u=a*zoho.math.ifElse(n,7,2)/12,m=a*zoho.math.ifElse(n,10,5)/12,g=zoho.math.ifElse(s,0,d),S=zoho.math.ifElse(h,0,g),x=zoho.math.ifElse(n,c,d),v=zoho.math.ifElse(h,x,c),y=zoho.math.ifElse(s,d,t),E=zoho.math.ifElse(h,t,y),C=zoho.math.ifElse(n,d,c),O=zoho.math.ifElse(h,C,c),b=zoho.math.ifElse(s,u,p),T=zoho.math.ifElse(h,u,b),w=zoho.math.ifElse(n,0,p),D=zoho.math.ifElse(h,w,0),P=zoho.math.ifElse(s,p,u),L=zoho.math.ifElse(h,u,P),I=zoho.math.ifElse(n,p,a),A=zoho.math.ifElse(h,I,a);this.move(0,0),this.addLine(c,0),this.moveLine(v,D,f,0,t,0,t,u,E,L,t,m,t,a,f,a,O,A,c,a,0,a,0,m,S,T,0,u),this.closePath(),o[Shape.handle]=[[d,p]],o[Shape.textbox]=[0,0,t,a],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o),o[Shape.connector].push([d,p,90])},RoundedRectangularCallout:function(e,t,a,o){var i=.5*t,r=.5*a,s=e[0]*t,n=e[1]*a,d=i+s,p=r+n,l=t?s*a/t:0,h=Math.abs(n)-Math.abs(l),c=t*zoho.math.ifElse(s,7,2)/12,f=t*zoho.math.ifElse(s,10,5)/12,u=a*zoho.math.ifElse(n,7,2)/12,m=a*zoho.math.ifElse(n,10,5)/12,g=zoho.math.ifElse(s,0,d),S=zoho.math.ifElse(h,0,g),x=zoho.math.ifElse(n,c,d),v=zoho.math.ifElse(h,x,c),y=zoho.math.ifElse(s,d,t),E=zoho.math.ifElse(h,t,y),C=zoho.math.ifElse(n,d,c),O=zoho.math.ifElse(h,C,c),b=zoho.math.ifElse(s,u,p),T=zoho.math.ifElse(h,u,b),w=zoho.math.ifElse(n,0,p),D=zoho.math.ifElse(h,w,0),P=zoho.math.ifElse(s,p,u),L=zoho.math.ifElse(h,u,P),I=zoho.math.ifElse(n,p,a),A=zoho.math.ifElse(h,I,a),N=this.getCoordinates(.1667,t,a),R=t-N,B=a-N;this.move(0,N),this.addYCurve(0,N,N,0),this.addLine(c,0),this.moveLine(v,D,f,0,R,0),this.addXCurve(R,0,t,N),this.addLine(t,u),this.moveLine(E,L,t,m,t,B),this.addYCurve(t,B,R,a),this.addLine(f,a),this.moveLine(O,A,c,a,N,a),this.addXCurve(N,a,0,B),this.addLine(0,m),this.moveLine(S,T,0,u),this.closePath(),o[Shape.handle]=[[d,p]];var _=.293*N,M=t-_,U=a-_;o[Shape.textbox]=[_,_,M,U],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o),o[Shape.connector].push([d,p,90])},OvalCallout:function(e,t,a,o){var i=.5*t,r=.5*a,s=e[0]*t,n=e[1]*a,d=i+s,p=r+n,l=s*a,h=n*t,c=Math.atan2(h,l),f=zoho.math.toRadians(11),u=c+f,m=c-f,g=this.getEllipseCoordinates(u,m,i,r);this.move(d,p),this.addLine(g[0],g[1]),this.addEllipseCurve(i,r,g[0],g[1],g[2],g[3],!1,!0),this.closePath(),o[Shape.handle]=[[d,p]],this.setConnectorAndTextBox(ShapeConstants.PresetShapeGeometry.OVAL,t,a,o),o[Shape.connector].push([d,p,c])},addEllipseCurve:function(e,t,a,o,i,r,s,n,d,p,l){this.addPath(this.pathutil.getEllipseCurve(e,t,a,o,i,r,s,n,d,p)),l&&this.addPath(this.pathutil.getNoFill())},modifier:{QuadArrow:function(e,t,a){return this.computeArrowValues(e,t,a)},LeftRightUpArrow:function(e,t,a){return this.computeArrowValues(e,t,a)},BentArrow:function(e,t,a){var o=Math.min(t,a),i=this.getCoordinates(e[1],t,a),r=this.getCoordinates(e[0],t,a,2*e[1]);0==Shape.selectedHandle&&(e[0]=r/o);var s=i-.5*r,n=this.getCoordinates(e[2],t,a),d=t-n,p=a-s,l=Math.min(p,d),h=this.getCoordinates(e[3],t,a,o?l/o:0);return 3==Shape.selectedHandle&&e[3],[r,i,n,h]},UTurnArrow:function(e,t,a){var o=Math.min(t,a),i=this.getCoordinates(e[1],t,a),r=this.getCoordinates(e[0],t,a,2*e[1]);0==Shape.selectedHandle&&(e[0]=r/o);var s=e[4]*a;s=zoho.math.minLimit(s,r+e[2]*o);var n=this.getCoordinates(e[2],t,a,a?(s-r)/a:0,"y"),d=.5*(t-(i-.5*r)),p=s-n;p<d&&(d=p);var l=this.getCoordinates(e[3],t,a,t?d/t:0,"x");return 3==Shape.selectedHandle&&(e[3]=l/o),[r,i,n,l,s]},LeftUpArrow:function(e,t,a){var o=Math.min(t,a),i=this.getCoordinates(e[1],t,a),r=this.getCoordinates(e[0],t,a,2*e[1]);0==Shape.selectedHandle&&(e[0]=r/o);var s=o-2*i,n=this.getCoordinates(e[2],t,a,a?s/a:0,"y");return 2==Shape.selectedHandle&&(e[2]=n/o),[r,i,n]},BentUpArrow:function(e,t,a){var o=Math.min(t,a),i=this.getCoordinates(e[1],t,a),r=this.getCoordinates(e[0],t,a,2*e[1]);return 0==Shape.selectedHandle&&(e[0]=r/o),[r,i,this.getCoordinates(e[2],t,a)]},CurvedRightArrow:function(e,t,a){return this.computeCurvedArrowValues(e,t,a)},CurvedLeftArrow:function(e,t,a){return this.computeCurvedArrowValues(e,t,a)},CurvedUpArrow:function(e,t,a){return this.computeCurvedArrowValues(e,t,a,!0)},CurvedDownArrow:function(e,t,a){return this.computeCurvedArrowValues(e,t,a,!0)},RightArrowCallout:function(e,t,a){return this.computeArrowCalloutValues(e,t,a)},DownArrowCallout:function(e,t,a){return this.computeArrowCalloutValues(e,t,a,!0)},LeftArrowCallout:function(e,t,a){return this.computeArrowCalloutValues(e,t,a,!1,!0)},UpArrowCallout:function(e,t,a){return this.computeArrowCalloutValues(e,t,a,!0,!0)},LeftRightArrowCallout:function(e,t,a){return this.computeArrowCalloutValues(e,t,a,!1,!0,!0)},QuadArrowCallout:function(e,t,a){var o=this.computeArrowValues(e,t,a),i=Math.min(t,a),r=e[3]*i;return r=zoho.math.limit(r,2*o[1],i-2*o[2]),3==Shape.selectedHandle&&(e[3]=r/i),r*=.5,o[3]=r,o},Divide:function(e,t,a){var o=.25*(.7349+-1*e[0]),i=a?.36745*t/a:0,r=Math.min(o,i),s=zoho.math.limit(e[2],.01,r);2==Shape.selectedHandle&&(e[2]=s);var n=.7349+-4*s-e[0],d=zoho.math.limit(e[1],0,n);return 1==Shape.selectedHandle&&(e[1]=d),[e[0],d,s]},Equal:function(e,t,a){var o=e[0]*a,i=e[1]*a,r=a-2*o;return i=zoho.math.maxLimit(i,r),1==Shape.selectedHandle&&(e[1]=i/a),i*=.5,[o,i]},NotEqual:function(e,t,a){var o=e[0]*a,i=e[2]*a,r=a-2*o;return i=zoho.math.maxLimit(i,r),2==Shape.selectedHandle&&(e[2]=i/a),i*=.5,[o,i]},CropFrame:function(e,t,a){}},getMarkerPath:function(e,t,a,o,i){this.pathArray=[[]],this.pathNumber=0;var r=.5*(a=parseFloat(a)+i),s=.5*o,n=a-1,d=o-1;return this.marker[e][t.toLowerCase()].call(this,r,s,n,d,i,a),this.convertToPath(this.pathArray)},marker:{tailend:{open:function(e,t,a,o,i){a-=i,Shape.pathGenerator.marker.open(a,1,e,t,1,o)},block:function(e,t,a,o){this.marker.tailend.open(e,t,a,o,0),this.marker.block()},classic:function(e,t,a,o,i,r){this.marker.tailend.open(e,t,a,o,0),this.marker.classic(.4*r,t)},diamond:function(e,t,a,o){this.marker.diamond(e,t,a,o)}},headend:{open:function(e,t,a,o,i){var r=1+i;Shape.pathGenerator.marker.open(r,1,e,t,a,o)},block:function(e,t,a,o){this.marker.headend.open(e,t,a,o,0),this.marker.block()},classic:function(e,t,a,o,i,r){this.marker.headend.open(e,t,a,o,0),this.marker.classic(.6*r,t)},diamond:function(e,t,a,o){this.marker.diamond(e,t,a,o)}},open:function(e,t,a,o,i,r){Shape.pathGenerator.move(i,t),Shape.pathGenerator.addLine(e,o),Shape.pathGenerator.moveLine(i,r)},block:function(){Shape.pathGenerator.closePath()},classic:function(e,t){Shape.pathGenerator.moveLine(e,t),Shape.pathGenerator.closePath()},diamond:function(e,t,a,o){Shape.pathGenerator.move(a,t),Shape.pathGenerator.addLine(e,1),Shape.pathGenerator.moveLine(1,t),Shape.pathGenerator.moveLine(e,o),Shape.pathGenerator.closePath()}},getArcPoints:function(e,t,a,o){if(e&&t&&a){var i=Geometry.util.isClockwise([e,t,a]);if(!i){C=e;e=a,a=C}var r=Math.atan2(t.y-e.y,t.x-e.x),s=Math.atan2(a.y-t.y,a.x-t.x),n={dx:-1*Math.sin(r)*o,dy:Math.cos(r)*o},d={dx:-1*Math.sin(s)*o,dy:Math.cos(s)*o},p=e.x+n.dx,l=e.y+n.dy,h=t.x+n.dx,c=t.y+n.dy,f=t.x+d.dx,u=t.y+d.dy,m=a.x+d.dx,g=a.y+d.dy,S={x:((p*c-l*h)*(f-m)-(p-h)*(f*g-u*m))/((p-h)*(u-g)-(l-c)*(f-m)),y:((p*c-l*h)*(u-g)-(l-c)*(f*g-u*m))/((p-h)*(u-g)-(l-c)*(f-m))},x=r-Math.PI/2,v=s-Math.PI/2,y={x:S.x+Math.cos(x)*o,y:S.y+Math.sin(x)*o},E={x:S.x+Math.cos(v)*o,y:S.y+Math.sin(v)*o};if(!i){var C=y;y=E,E=C}return{start:y,end:E,clockwise:i}}},getMaxRadius(e,t,a,o){if(e&&t&&a){var i=zoho.math.length(e.x,e.y,t.x,t.y),r=zoho.math.length(t.x,t.y,a.x,a.y),s=Math.min(i,r),n=0;if(s){var d="start";r===s&&(d="end");var p=this.getArcPoints(e,t,a,1);n=s/zoho.math.length(p[d].x,p[d].y,t.x,t.y),(e.radius||a.radius)&&(n/=2)}return n}},getPathString(t){for(var a=t.props.transform.pos,o=t.props.transform.dim.width,i=t.props.transform.dim.height,r=t.props.geom.preset,s=Shape.pathGenerator.getPathPoints(r.type,r.modifiers,o,i),n=Shape.pathGenerator.presetToCustomGeom(s.path,o,i,0),d=n.pathList[0].path,p=0;p<d.length;p++){var l=d[p].type,h=d[p][l.toLowerCase()];if(h.length)for(var c=0;c<h.length;c++){var f=h[c];f.x+=a.left,f.y+=a.top}else e.isEmptyObject(d[p])||(h.x+=a.left,h.y+=a.top)}return Shape.pathGenerator.getCustomPath(n,o,i).path[0]}}}(jQuery),function(e){PathGenerator.prototype=e.extend(!0,PathGenerator.prototype,{getX:function(e,t,a){return e*t/a},getY:function(e,t,a){return e*a/t},getRectCoordinates:function(e,t,a){var o=this.getCoordinates(e[0],t,a);return void 0===e[1]?o:[o,this.getCoordinates(e[1],t,a)]},isLargeArc:function(e,t){var a=!0,o=Math.abs(t-e);return e<t?o<Math.PI&&(a=!1):o>Math.PI&&(a=!1),a},checkBraceMax:function(e,t,a){var o,i=e[1]*a,r=a-i;o=r<i?a?.5*r/a:0:a?.5*i/a:0;var s=this.getCoordinates(e[0],t,a,o,"y"),n=Math.min(t,a);return 0!=s&&0!=n&&(e[0]=s/n),[i,s]},drawBracket:function(e,t,a,o,i,r){this.move(e,a),this.addXCurve(e,a,t,o),this.addLine(t,i),this.addYCurve(t,i,e,r)},drawBrace:function(e,t,a,o,i,r,s,n,d,p){this.move(e,o),this.addXCurve(e,o,t,i),this.addLine(t,r),this.addXCurve(t,r,a,p,!0),this.addYCurve(a,p,t,s,!0),this.addLine(t,n),this.addYCurve(t,n,e,d)},drawVerticalArrow:function(e,t,a,o,i,r,s,n){this.move(i,t),this.addLine(i,a),this.moveLine(r,a,r,t,s,t,n,e,o,t),this.closePath()},computeArrowValues:function(e,t,a){var o=Math.min(t,a),i=this.getCoordinates(e[1],t,a),r=this.getCoordinates(e[0],t,a,2*e[1]);0==Shape.selectedHandle&&(e[0]=r/o);var s=this.getCoordinates(e[2],t,a,.5-e[1]);return 2==Shape.selectedHandle&&(e[2]=s/o),[i,.5*r,s]},computeArrowCalloutValues:function(e,t,a,o,i,r){var s,n,d=Math.min(t,a);o?(s="y",n=a):(s="x",n=t);var p=this.getCoordinates(e[2],t,a,1,s),l=e[3]*n,h=n-p;r&&(h=n-2*p),l=zoho.math.maxLimit(l,h),3==Shape.selectedHandle&&(e[3]=l/n);var c;i?(c=p,l=n-l):c=n-p;var f;f=o?"x":"y";var u=this.getCoordinates(e[1],t,a,.5,f),m=this.getCoordinates(e[0],t,a,2*e[1]);0==Shape.selectedHandle&&(e[0]=m/d),m*=.5;var g;return[l,c,(g=o?.5*t:.5*a)-u,g-m,g+m,g+u]},computeCurvedArrowValues:function(e,t,a,o){var i=.5*a;o&&(i=.5*t);var r=Math.min(t,a),s="y";o&&(s="x");var n=this.getCoordinates(e[1],t,a,.5,s);1==Shape.selectedHandle&&(e[1]=n/r);var d=this.getCoordinates(e[0],t,a,e[1]);0==Shape.selectedHandle&&(e[0]=d/r);var p=i-.25*(d+n),l=2*p,h=l*l-d*d,c=Math.sqrt(h),f=l?c*t/l:0;o&&(f=l?c*a/l:0);var u=t?f/t:0;o&&(u=a?f/a:0);var m="x";o&&(m="y");var g=this.getCoordinates(e[2],t,a,u,m);return 2==Shape.selectedHandle&&(e[2]=g/r),[d,n,g,p,f]},computeEllipticCoords:function(e,t,a,o,i,r){i=zoho.math.toRadians(i),r=zoho.math.toRadians(r);var s=a-e*Math.cos(i),n=o-t*Math.sin(i),d=i+r;return d%=360,[s+e*Math.cos(d),n+t*Math.sin(d)]},SnipSingleRect:function(e,t,a,o){var i=this.getRectCoordinates(e,t,a),r=t-i,s=i;this.move(0,0),this.addLine(r,0),this.moveLine(t,s,t,a,0,a),this.closePath(),o[Shape.handle]=[[r,0]];var n=.5*i,d=.5*(r+t);o[Shape.textbox]=[0,n,d,a],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},SnipSamesideRect:function(e,t,a,o){var i=this.getRectCoordinates(e,t,a),r=t-i[0],s=i[0],n=i[1],d=t-r,p=t-n,l=a-n;this.move(d,0),this.addLine(r,0),this.moveLine(t,s,t,l,p,a,n,a,0,l,0,s),this.closePath(),o[Shape.handle]=[[r,0],[n,a]];var h=s-n,c=.5*zoho.math.ifElse(h,s,n),f=t-c,u=.5*s,m=.5*(l+a);o[Shape.textbox]=[c,u,f,m],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},SnipDiagonalRect:function(e,t,a,o){var i=this.getRectCoordinates(e,t,a),r=t-i[0],s=i[0],n=i[1],d=t-n,p=a-n,l=a-s;this.move(r,0),this.addLine(t,s),this.moveLine(t,p,d,a,s,a,0,l,0,n,n,0),this.closePath(),o[Shape.handle]=[[r,0],[n,0]];var h=n-s,c=.5*zoho.math.ifElse(h,n,s),f=t-c,u=a-c;o[Shape.textbox]=[c,c,f,u],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},SnipRoundSingleRect:function(e,t,a,o){var i=this.getRectCoordinates(e,t,a),r=t-i[0],s=i[0],n=i[1];this.move(r,0),this.addLine(t,s),this.moveLine(t,a,0,a,0,n),this.addYCurve(0,n,n,0),this.closePath(),o[Shape.handle]=[[r,0],[n,0]];var d=.293*n,p=.5*(r+t);o[Shape.textbox]=[d,d,p,a],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},RoundSingleRect:function(e,t,a,o){var i=this.getRectCoordinates(e,t,a),r=t-i,s=i;this.move(0,0),this.addLine(r,0),this.addXCurve(r,0,t,s),this.addLine(t,a),this.moveLine(0,a),this.closePath(),o[Shape.handle]=[[r,0]];var n=t-.293*i;o[Shape.textbox]=[0,0,n,a],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},RoundSamesideRect:function(e,t,a,o){var i=this.getRectCoordinates(e,t,a),r=t-i[0],s=i[0],n=i[1],d=t-r,p=t-n,l=a-n;this.move(d,0),this.addLine(r,0),this.addXCurve(r,0,t,s),this.addLine(t,l),this.addYCurve(t,l,p,a),this.addLine(n,a),this.addXCurve(n,a,0,l),this.addLine(0,s),this.addYCurve(0,s,d,0),this.closePath(),o[Shape.handle]=[[r,0],[n,a]];var h=s-n,c=.293*s,f=.293*n,u=zoho.math.ifElse(h,c,f),m=c,g=t-u,S=a-f;o[Shape.textbox]=[u,m,g,S],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},RoundDiagonalRect:function(e,t,a,o){var i=this.getRectCoordinates(e,t,a),r=t-i[0],s=i[0],n=i[1],d=t-n,p=a-n,l=a-s;this.move(n,0),this.addLine(r,0),this.addXCurve(r,0,t,s),this.addLine(t,p),this.addYCurve(t,p,d,a),this.addLine(s,a),this.addXCurve(s,a,0,l),this.addLine(0,n),this.addYCurve(0,n,n,0),this.closePath(),o[Shape.handle]=[[r,0],[n,0]];var h=.293*n,c=.293*s,f=h-c,u=zoho.math.ifElse(f,h,c),m=t-u,g=a-u;o[Shape.textbox]=[u,u,m,g],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},IsoscelesTriangle:function(e,t,a,o){var i=e[0]*t;this.move(i,0),this.addLine(t,a),this.moveLine(0,a),this.closePath(),o[Shape.handle]=[[i,0]],o.cornerRadius=[[r,0]];var r=.5*t,s=.5*a,n=.5*i,d=n+r;o[Shape.textbox]=[n,s,d,a],o[Shape.connector]=[[i,0,270],[n,s,180],[0,a,90],[i,a,90],[t,a,90],[d,s,0]]},RightTriangle:function(e,t,a,o){this.move(0,0),this.addLine(t,a),this.moveLine(0,a),this.closePath();var i=.5*t,r=.5*a,s=t*(1/12),n=a*(7/12),d=t*(7/12),p=a*(11/12);o[Shape.textbox]=[s,n,d,p],o[Shape.connector]=[[0,0,270],[0,r,180],[0,a,90],[i,a,90],[t,a,90],[i,r,0]]},Parallelogram:function(e,t,a,o){var i=e[0],r=this.getCoordinates(i,t,a,1,"x"),s=t-r;this.move(r,0),this.addLine(t,0),this.moveLine(s,a,0,a),this.closePath(),o[Shape.handle]=[[r,0]];var n=(1+i*t/t*5)/12,d=n*t,p=n*a,l=t-d,h=a-p,c=.5*t,f=.5*a,u=a*(c/r),m=zoho.math.limit(u,0,a),g=a-m,S=.5*s,x=t-S,v=.5*r,y=t-v;o[Shape.textbox]=[d,p,l,h],o[Shape.connector]=[[c,g,270],[x,0,270],[y,f,0],[S,a,90],[c,m,90],[v,f,180]]},Trapezoid:function(e,t,a,o){var i=e[0],r=this.getCoordinates(i,t,a,.5,"x");if(0==Shape.selectedHandleNumber){var s=Math.min(t,a);modifier[0][0]=r/s}var n=t-r;this.move(r,0),this.addLine(n,0),this.moveLine(t,a,0,a),this.closePath(),o[Shape.handle]=[[r,0]];var d=.5*t,p=i*t/(d=0===d?1:d),l=1*t/3*p,h=1*a/3*p,c=t-l,f=.5*t,u=.5*a,m=.5*r,g=t-m;o[Shape.textbox]=[l,h,c,a],o[Shape.connector]=[[f,0,270],[m,u,180],[f,a,90],[g,u,0]]},Pentagon:function(e,t,a,o){var i=.5*t,r=1.05*i,s=1.1*(.5*a),n=zoho.math.toRadians(18),d=zoho.math.toRadians(306),p=r*Math.cos(n),l=r*Math.cos(d),h=i-p,c=i-l,f=i+l,u=i+p,m=s-s*Math.sin(n),g=s-s*Math.sin(d),S=m*l/p;this.move(h,m),this.addLine(i,0),this.moveLine(u,m,f,g,c,g),this.closePath(),o[Shape.textbox]=[c,S,f,g],o[Shape.connector]=[[i,0,270],[h,m,180],[c,g,90],[i,a,90],[f,g,90],[u,m,0]]},Hexagon:function(e,t,a,o){var i=e[0],r=this.getCoordinates(i,t,a,.5,"x");if(0==Shape.selectedHandleNumber){var s=Math.min(t,a);modifier[0][0]=r/s}var n=t-r,d=.5*a;this.move(r,0),this.addLine(n,0),this.moveLine(t,d,n,a,r,a,0,d),this.closePath(),o[Shape.handle]=[[r,0]];var p=-1*(.5*t)*.5,l=i*t,h=l+p,c=zoho.math.ifElse(h,4,2),f=zoho.math.ifElse(h,3,2),u=(c+(l+zoho.math.ifElse(h,p,0))/(0===p?1:p)*f/-1)/24,m=t*u,g=a*u,S=t-m,x=a-g;o[Shape.textbox]=[m,g,S,x],o[Shape.connector]=[[t,d,0],[n,a,90],[r,a,90],[0,d,180],[r,0,270],[n,0,270]]},Heptagon:function(e,t,a,o){var i=.5*t,r=13328/21600*a,s=4278/21600*a,n=2139/21600*t,d=19460/21600*t,p=.7225*t,l=5993/21600*t;this.move(0,r),this.addLine(n,s),this.moveLine(i,0,d,s,t,r,p,a,l,a),this.closePath();var h=a-s;o[Shape.textbox]=[n,s,d,h],o[Shape.connector]=[[d,s,0],[t,r,0],[p,a,90],[l,a,90],[0,r,180],[n,s,180],[i,0,270]]},Octagon:function(e,t,a,o){var i=this.getCoordinates(e[0],t,a),r=i,s=t-r,n=a-r;this.move(r,0),this.addLine(s,0),this.moveLine(t,r,t,n,s,a,r,a,0,n,0,r),this.closePath(),o[Shape.handle]=[[r,0]];var d=.5*i,p=t-d,l=a-d;o[Shape.textbox]=[d,d,p,l],o[Shape.connector]=[[t,r,0],[t,n,0],[s,a,90],[r,a,90],[0,n,180],[0,r,180],[r,0,270],[s,0,270]]},Decagon:function(e,t,a,o){var i=.5*a,r=.5*t,s=1.05146*i,n=zoho.math.toRadians(36),d=zoho.math.toRadians(72),p=r*Math.cos(n),l=r*Math.cos(d),h=r-p,c=r-l,f=r+l,u=r+p,m=s*Math.sin(d),g=s*Math.sin(n),S=i-m,x=i-g,v=i+g,y=i+m;this.move(0,i),this.addLine(h,x),this.moveLine(c,S,f,S,u,x,t,i,u,v,f,y,c,y,h,v),this.closePath(),o[Shape.textbox]=[h,x,u,v],o[Shape.connector]=[[u,x,0],[t,i,0],[u,v,0],[f,y,90],[c,y,90],[h,v,180],[0,i,180],[h,x,180],[c,S,270],[f,S,270]]},Dodecagon:function(e,t,a,o){var i=.134*t,r=.366*t,s=.634*t,n=.866*t,d=.134*a,p=.366*a,l=.634*a,h=.866*a;this.move(0,p),this.addLine(i,d),this.moveLine(r,0,s,0,n,d,t,p,t,l,n,h,s,a,r,a,i,h,0,l),this.closePath(),o[Shape.textbox]=[i,d,n,h],o[Shape.connector]=[[n,d,0],[t,p,0],[t,l,0],[n,h,0],[s,a,90],[r,a,90],[i,h,180],[0,l,180],[0,p,180],[i,d,180],[r,0,270],[s,0,270]]},Pie:function(e,t,a,o){var i=e[0],r=e[1],s=.5*t,n=.5*a,d=this.getEllipseCoordinates(i,r,s,n),p=d[0],l=d[1],h=d[2],c=d[3];this.addFiller(s,n),this.move(s,n),this.addLine(p,l);var f=this.isLargeArc(i,r);this.addEllipseCurve(s,n,p,l,h,c,!1,f),this.closePath(),o[Shape.handle]=[[p,l],[h,c]],this.setConnectorAndTextBox(ShapeConstants.PresetShapeGeometry.OVAL,t,a,o)},Chord:function(e,t,a,o){var i=e[0],r=e[1],s=.5*t,n=.5*a,d=(f=this.getEllipseCoordinates(i,r,s,n))[0],p=f[1],l=f[2],h=f[3];this.addFiller(d,p);var c=this.isLargeArc(i,r);this.addEllipseCurve(s,n,d,p,l,h,!1,c),this.closePath(),o[Shape.handle]=[[d,p],[l,h]];var f=this.setTextBox(ShapeConstants.PresetShapeGeometry.OVAL,s,n,o),u=.5*(d+l),m=.5*(p+h),g=r-i,S=g+360,x=i+.5*zoho.math.ifElse(g,g,S)-180;o[Shape.connector]=[[d,p,i],[l,h,r],[u,m,x]]},Teardrop:function(e,t,a,o){v=zoho.math.minLimit(e[0],.5);v-=.5;var i=(v*=2)*t,r=v*a,s=.5*t,n=.5*a,d=Math.sqrt(2),p=d*s,l=d*n,h=t?p*i/t:0,c=a?l*r/a:0,f=zoho.math.toRadians(45),u=s+h*Math.cos(f),m=n-c*Math.sin(f),g=.5*(s+u),S=.5*(n+m);this.move(t,n),this.addEllipseCurve(s,n,t,n,s,0,!1,!0);var x=zoho.math.toCubicControlPoints(s,0,g,0,u,m);this.addCubicCurve(x[0],x[1],x[2],x[3],u,m),x=zoho.math.toCubicControlPoints(u,m,t,S,t,n),this.addCubicCurve(x[0],x[1],x[2],x[3],t,n),this.closePath(),o[Shape.handle]=[[u,0]];var v=this.setTextBox(ShapeConstants.PresetShapeGeometry.OVAL,s,n,o);o[Shape.connector]=[[t,n,0],[v[2],v[3],90],[s,a,90],[v[0],v[3],90],[0,n,180],[v[0],v[1],270],[s,0,270],[u,m,270]]},Frame:function(e,t,a,o){var i=this.getCoordinates(e[0],t,a),r=t-i,s=a-i;this.move(0,0),this.addLine(t,0),this.moveLine(t,a,0,a),this.closePath(),this.move(r,s),this.addLine(r,i),this.moveLine(i,i,i,s),this.closePath(),o[Shape.handle]=[[i,0]],o[Shape.textbox]=[i,i,r,s],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},updateModifiers:function(e,t,a,o,i){for(var r in t){s=t[r];e[r]=s/o}for(var r in a){var s=a[r];e[r]=s/i}},getValues:function(e){return{sx:Math.min(e.x1,e.x2),sy:Math.min(e.y1,e.y2),lx:Math.max(e.x1,e.x2),ly:Math.max(e.y1,e.y2)}},CropFrame:function(t,a,o,i){var r,s,n,d=t.innerShape,p=t[0]*a,l=t[1]*o,h=t[4]*a,c=t[5]*o,f=t[2]*a,u=t[3]*o,m=t[6]*a,g=t[7]*o,S=t[8]*a,x=t[9]*o,v=t[10]*o,y=t[11]*a,E=t[12]*o,C=t[13]*a,O={x1:p,y1:l,x2:h,y2:c};if(0!=Shape.selectedHandle&&2!=Shape.selectedHandle||(f=.5*(p+h),u=.5*(l+c),m=y=h,g=E=l,S=C=p,x=v=c,x6=x8=f,y7=y9=u,s={2:f,6:m,8:S,11:y,13:C},n={3:u,7:g,9:x,10:v,12:E}),3!=Shape.selectedHandle&&4!=Shape.selectedHandle||(f=.5*(m+S),u=.5*(g+x),p=C=S,l=E=g,h=y=m,c=v=x,x6=x8=f,y7=y9=u,s={0:p,2:f,4:h,11:y,13:C},n={1:l,3:u,5:c,10:v,12:E}),5==Shape.selectedHandle&&(h=y=m,c=x=v,f=.5*(m+(S=C=p)),u=.5*(g+x),y7=y9=u,s={2:f,4:h,8:S,11:y,13:C},n={3:u,5:c,9:x}),6==Shape.selectedHandle&&(h=m=y,c=v=x,f=.5*(m+S),u=.5*((g=E=l)+x),x6=x8=f,s={2:f,4:h,6:m},n={3:u,5:c,7:g,10:v,12:E}),7==Shape.selectedHandle&&(p=C=S,l=g=E,m=y=h,y7=y9=u,s={2:f=.5*(m+S),0:p,6:m,11:y,13:C},n={3:u=.5*(g+x),1:l,7:g}),8==Shape.selectedHandle&&(p=S=C,l=E=g,x=v=c,x6=x8=f,s={2:f=.5*(m+S),0:p,8:S},n={3:u=.5*(g+x),1:l,9:x,10:v,12:E}),1==Shape.selectedHandle){var b=.5*Math.abs(p-h),T=.5*Math.abs(l-c),w=(f=zoho.math.limit(f,b,a-b))-b,D=(u=zoho.math.limit(u,T,o-T))-T,P=f+b,L=u+T;p<h?(p=w,h=P):(p=P,h=w),l<c?(l=D,c=L):(l=L,c=D),S<m?(S=w,m=P):(S=P,m=w),x<g?(x=D,g=L):(x=L,g=D),v<E?(v=D,E=L):(v=L,E=D),y<C?(y=w,C=P):(y=P,C=w),s={0:p,2:f,4:h,6:m,8:S,11:y,13:C},n={1:l,3:u,5:c,7:g,9:x,10:v,12:E}}(s||n)&&this.updateModifiers(t,s,n,a,o);var I=void 0;if(d){var A=Math.abs(o-(t[12]+(1-t[10]))*o),N=Math.abs(a-(t[13]+(1-t[11]))*a),R=this.getPath(d.geom.preset.type,N,A,d.geom.preset.modifiers);I=(R=e.extend(!0,{},R)).croppath,innerPathArray=e.extend(!0,[],this.pathArray),this.clearPathArray()}if(this.move(0,0),this.addLine(a,0),this.moveLine(a,o,0,o,0,0),1!=Shape.selectedHandle){O={x1:p,y1:l,x2:h,y2:c};var w=(r=this.getValues(O)).sx,D=r.sy,P=r.lx,L=r.ly}e.each(innerPathArray,function(t,a){var o=a;e.each(o,function(t,a){var o=a,i=o[0];"m"==(i=i.toLowerCase())||"l"==i||"c"==i||"q"==i?e.each(o,function(e,t){e&&void 0!==t&&(o[e]+=e%2?w:D)}):"a"==i&&e.each(o,function(e,t){"string"==typeof t&&"a"==t.toLowerCase()&&void 0!==o[e+7]&&(o[e+6]+=w,o[e+7]+=D)})})}),void 0===I&&(I=[innerPathArray.length-1]);var B=this;e.each(I,function(t,a){var o=a;e.merge(B.pathArray[B.pathArray.length-1],innerPathArray[o])}),i[Shape.handle]=[[p,l,"nwcrop"],[f,u,"cropframe"],[h,c,"secrop"],[m,g,"necrop"],[S,x,"swcrop"],[f,v,"scrop"],[y,u,"ecrop"],[f,E,"ncrop"],[C,u,"wcrop"]]},HalfFrame:function(e,t,a,o){var i=e[0],r=e[1],s=Math.min(t,a),n=s?1*t/s:0,d=s*zoho.math.limit(r,0,n)/1,p=a-(t?a*d/t:0),l=s?1*p/s:0,h=zoho.math.limit(i,0,l);0==Shape.selectedHandle&&(e[0]=h);var c=s*h/1,f=t-(a?c*t/a:0),u=a-(t?d*a/t:0),m=.5*d,g=.5*(u+a),S=.5*(f+t),x=.5*c,v=.5*a,y=.5*t;this.move(0,0),this.addLine(t,0),this.moveLine(f,c,d,c,d,u,0,a),this.closePath(),o[Shape.handle]=[[0,c],[d,0]],o[Shape.textbox]=[0,0,t,a],o[Shape.connector]=[[S,x,0],[m,g,90],[0,v,180],[y,0,270]]},Lshape:function(e,t,a,o){var i=a-this.getCoordinates(e[0],t,a,1,"y"),r=this.getCoordinates(e[1],t,a,1,"x");this.move(r,0),this.addLine(r,i),this.moveLine(t,i,t,a,0,a,0,0),this.closePath(),o[Shape.handle]=[[0,i],[r,0]];var s=.5*r,n=.5*(i+a),d=.5*t,p=.5*a,l=t-a,h=zoho.math.ifElse(l,i,0),c=zoho.math.ifElse(l,t,r);o[Shape.textbox]=[0,h,c,a],o[Shape.connector]=[[t,n,0],[d,a,90],[0,p,180],[s,0,270]]},DiagonalStripe:function(e,t,a,o){var i=e[0],r=i*a,s=i*t;this.move(0,r),this.addLine(s,0),this.moveLine(t,0,0,a),this.closePath(),o[Shape.handle]=[[0,r]];var n=.5*s,d=.5*(s+t),p=.5*r,l=.5*(r+a),h=.5*t,c=.5*a;o[Shape.textbox]=[0,0,d,l],o[Shape.connector]=[[h,c,0],[0,l,180],[n,p,180],[d,0,270]]},Cross:function(e,t,a,o){var i=this.getCoordinates(e[0],t,a),r=t-i,s=a-i;this.move(i,0),this.addLine(r,0),this.moveLine(r,i,t,i,t,s,r,s,r,a,i,a,i,s,0,s,0,i,i,i),this.closePath(),o[Shape.handle]=[[i,0]];var n=t-a,d=zoho.math.ifElse(n,0,i),p=zoho.math.ifElse(n,t,r),l=zoho.math.ifElse(n,i,0),h=zoho.math.ifElse(n,s,a);o[Shape.textbox]=[d,l,p,h],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},Plaque:function(e,t,a,o){var i=this.getCoordinates(e[0],t,a),r=t-i,s=a-i;this.move(i,0),this.addLine(r,0),this.addXCurve(r,0,t,i,!0),this.addLine(t,s),this.addYCurve(t,s,r,a,!0),this.addLine(i,a),this.addXCurve(i,a,0,s,!0),this.addLine(0,i),this.addYCurve(0,i,i,0,!0),this.closePath(),o[Shape.handle]=[[i,0]];var n=.707*i,d=t-n,p=a-n;o[Shape.textbox]=[n,n,d,p],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},Can:function(e,t,a,o){var i=this.getCoordinates(e[0],t,a,.5,"y");if(0==Shape.selectedHandleNumber){var r=Math.min(t,a);e[0]=i/r}var s=.5*i,n=s+s,d=a-s,p=.5*t;this.move(0,s),this.addLine(0,d),this.addXEllipseCurve(p,s,0,t,d,!0),this.addLine(t,s),this.addXEllipseCurve(p,s,t,0,s),this.closePath(),this.createNewPath(),this.move(0,s),this.addXEllipseCurve(p,s,0,t,s),this.addXEllipseCurve(p,s,t,0,s),this.closePath(),this.createNewPath(),this.move(0,s),this.addXEllipseCurve(p,s,0,t,s),this.addXEllipseCurve(p,s,t,0,s),this.addLine(0,d),this.addXEllipseCurve(p,s,0,t,d,!0),this.addLine(t,s),o[Shape.handle]=[[p,n]];var p=.5*t,l=.5*a;o[Shape.textbox]=[0,n,t,d],o[Shape.connector]=[[p,n,270],[p,0,270],[0,l,180],[p,a,90],[t,l,0]]},Can1:function(e,t,a,o){var i=this.getCoordinates(e[0],t,a,.5,"x"),r=this.getCoordinates(e[1],t,a,.5,"y");if(0==Shape.selectedHandleNumber){var s=Math.min(t,a);e[0]=r/s}var n=.5*r,d=n+n,p=a-n,l=(c=.5*t)-i,h=c+i;this.move(l,n),this.addLine(0,p),this.addXEllipseCurve(c,n,0,t,p,!0),this.addLine(h,n),this.addXEllipseCurve(c,n,t,l,n),this.createNewPath(),this.move(l,n),this.addXEllipseCurve(c,n,l,h,n),this.addXEllipseCurve(c,n,h,l,n),this.createNewPath(),this.move(l,n),this.addXEllipseCurve(c,n,0,h,n),this.addXEllipseCurve(c,n,h,l,n),this.addLine(0,p),this.addXEllipseCurve(c,n,0,t,p,!0),this.addLine(h,n),o[Shape.handle]=[[h,0],[c,d]];var c=.5*t,f=.5*a;o[Shape.textbox]=[0,d,t,p],o[Shape.connector]=[[c,d,270],[c,0,270],[0,f,180],[c,a,90],[t,f,0]]},Cube:function(e,t,a,o){var i=this.getCoordinates(e[0],t,a,1,"x"),r=t-i,s=a-i;this.move(0,i),this.addLine(0,a),this.moveLine(r,a,r,i),this.createNewPath(),this.move(0,i),this.addLine(i,0),this.moveLine(t,0,r,i),this.createNewPath(),this.move(r,a),this.addLine(r,i),this.moveLine(t,0,t,s),this.createNewPath(),this.move(0,a),this.addLine(0,i),this.moveLine(i,0,t,0,t,s,r,a),this.closePath(),this.move(0,i),this.addLine(r,i),this.move(r,i),this.addLine(r,a),this.move(r,i),this.addLine(t,0),o[Shape.handle]=[[0,i]];var n=.5*r,d=.5*s,p=.5*(i+t),l=.5*(i+a);o[Shape.textbox]=[0,i,r,a],o[Shape.connector]=[[p,0,270],[n,i,270],[0,l,180],[n,a,90],[r,l,0],[t,d,0]]},Cube1:function(e,t,a,o){var i=this.getCoordinates(1-e[0],t,a,1,"x"),r=t-i,s=a-i;this.move(t,0),this.addLine(r,0),this.moveLine(r,s,a,r),this.createNewPath(),this.move(0,a),this.addLine(0,i),this.moveLine(r,0,r,s),this.createNewPath(),this.move(0,a),this.addLine(i,a),this.moveLine(t,r,r,s),this.createNewPath(),this.move(0,a),this.addLine(0,i),this.moveLine(r,0,t,0,t,s,i,a),this.closePath(),this.move(r,s),this.addLine(r,0),this.move(r,s),this.addLine(0,a),this.move(r,s),this.addLine(t,s),o[Shape.handle]=[[r,0]];var n=.5*r,d=.5*s,p=.5*(i+t),l=.5*(i+a);o[Shape.textbox]=[0,i,r,a],o[Shape.connector]=[[p,0,270],[n,i,270],[0,l,180],[n,a,90],[r,l,0],[t,d,0]]},Tablecell:function(e,t,a,o){this.move(0,0),this.addLine(t,0),this.moveLine(t,a,0,a,0,0),this.closePath(),this.createNewPath(),this.move(0,0),this.addLine(t,0),this.createNewPath(),this.move(t,0),this.addLine(t,a),this.createNewPath(),this.move(t,a),this.addLine(0,a),this.createNewPath(),this.move(0,a),this.addLine(0,0),this.createNewPath(),this.move(0,0),this.addLine(t,0),this.moveLine(t,a,0,a,0,0),this.closePath(),o&&(o[Shape.textbox]=[0,0,t,a],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o))},Donut:function(e,t,a,o){var i=this.getCoordinates(e[0],t,a),r=n=.5*t,s=d=.5*a;this.move(0,s),this.addEllipse(n,d,r,s),this.closePath(),this.move(i,s);var n=r-i,d=s-i;this.addEllipse(n,d,r,s,!0),this.closePath(),o[Shape.handle]=[[i,s]],this.setConnectorAndTextBox(ShapeConstants.PresetShapeGeometry.OVAL,t,a,o)},NoSymbol:function(e,t,a,o){var i=this.getCoordinates(e[0],t,a,.33,"x");if(0==Shape.selectedHandleNumber){var r=Math.min(t,a);e[0]=i/r}var s=.5*t,n=.5*a,d=zoho.math.toRadians(45),p=Math.cos(d),l=Math.sin(d),h=s-i,c=i/2,f=Math.sqrt(h*h-c*c),u=p*(-1*c)+l*(-1*f)+s,m=p*(-1*c)+l*f+s,g=p*c+l*f+s,S=p*c+l*(-1*f)+s,x=this.getY(i,t,a),v=n-x,y=x/2,E=Math.sqrt(v*v-y*y),C=-1*(l*(-1*y)-p*(-1*E))+n,O=-1*(l*(-1*y)-p*E)+n,b=-1*(l*y-p*E)+n,T=-1*(l*y-p*(-1*E))+n;this.move(0,n),this.addEllipse(s,n,s,n),this.closePath();var w=s-i,D=n-x;this.move(u,C),this.addEllipseCurve(w,D,u,C,m,O,!0,!1,s-w,n-D),this.closePath(),this.move(g,b),this.addEllipseCurve(w,D,g,b,S,T,!0,!1,s-w,n-D),this.closePath(),o[Shape.handle]=[[i,n]],this.setConnectorAndTextBox(ShapeConstants.PresetShapeGeometry.OVAL,t,a,o)},BlockArc:function(e,t,a,o){var i=e[0],r=e[1],s=this.getCoordinates(e[2],t,a,.5,"x"),n=midX=.5*t,d=midY=.5*a;if(0===i&&0===r)this.move(0,midX);else if(0===i&&r===2*Math.PI)this.move(0,midY),this.addEllipse(n,d,midX,midY),this.move(s,midY),n=midX-s,d=midY-s,this.addEllipse(n,d,midX,midY);else{n=midX=.5*t,d=midY=.5*a;var p=this.getEllipseCoordinates(i,r,n,d),l=p[0],h=p[1],c=p[2],f=p[3],u=this.isLargeArc(i,r);this.addFiller(l,h),this.addEllipseCurve(n,d,l,h,c,f,!1,u),n=Math.abs(midX-s),d=Math.abs(midY-s);var m=(B=this.getEllipseCoordinates(i,r,n,d,midX,midY))[0],g=B[1],S=B[2],x=B[3];this.addLine(S,x),this.addEllipseCurve(n,d,S,x,m,g,!0,u,midX-n,midY-d),this.closePath()}o[Shape.handle]=[[l,h],[S,x]];var v=zoho.math.toRadians(360),y=r-i,E=y+v,C=zoho.math.ifElse(y,y,E),O=C-(v-i),b=l>S?l:S,T=c>m?c:m,w=b>T?b:T,D=zoho.math.ifElse(O,t,w),P=zoho.math.toRadians(90)-i,L=zoho.math.toRadians(450)-i,I=C-zoho.math.ifElse(P,P,L),A=h>x?h:x,N=f>g?f:g,R=A>N?A:N,B=zoho.math.ifElse(I,a,R),_=zoho.math.toRadians(180)-i,M=zoho.math.toRadians(540)-i,U=C-zoho.math.ifElse(_,_,M),k=l<S?l:S,G=c<m?c:m,F=k<G?k:G,W=zoho.math.ifElse(U,0,F),H=zoho.math.toRadians(270)-i,V=zoho.math.toRadians(630)-i,j=C-zoho.math.ifElse(H,H,V),z=h<x?h:x,X=f<g?f:g,$=z<X?z:X,Y=zoho.math.ifElse(j,0,$),K=.5*(l+m),Z=.5*(h+g),J=.5*(c+S),Q=.5*(f+x),q=zoho.math.toDegrees(i)-90,ee=zoho.math.toDegrees(r)+90,te=.5*(q+ee);o[Shape.textbox]=[W,Y,D,B],o[Shape.connector]=[[K,Z,q],[J,Q,ee],[midX,midY,te]]},FoldedCorner:function(e,t,a,o){var i=this.getCoordinates(e[0],t,a),r=t-i,s=r+.2*i,n=a-i,d=n+.2*i;this.move(0,0),this.addLine(t,0),this.moveLine(t,n,r,a,0,a),this.createNewPath(),this.move(r,a),this.addLine(s,d),this.moveLine(t,n),this.createNewPath(),this.move(r,a),this.addLine(s,d),this.moveLine(t,n,r,a,0,a,0,0,t,0,t,n),o[Shape.handle]=[[r,a]],o[Shape.textbox]=[0,0,t,n],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},Smiley:function(e,t,a,o){var i=.2289*t,r=.2877*t,s=.608*t,n=.77*t,d=.35*a,p=.764*a,l=e[0]*a,h=p-l,c=p+l,f=c+2*l,u=.052*t,m=.052*a,g=midx=.5*t,S=midy=.5*a;this.move(0,midy),this.addEllipse(g,S,midx,midy),this.closePath(),this.createNewPath(),this.move(0,midy),this.addEllipse(midx,midy,midx,midy),this.closePath(),this.createNewPath(),this.move(r,d),this.addEllipse(u,m,r+u,d),this.closePath(),this.move(s,d),this.addEllipse(u,m,s+u,d),this.closePath(),this.createNewPath(),this.move(i,h);var x=zoho.math.toCubicControlPoints(i,h,midx,f,n,h);this.addCubicCurve(x[0],x[1],x[2],x[3],n,h),o[Shape.handle]=[[midx,c]],this.setConnectorAndTextBox(ShapeConstants.PresetShapeGeometry.OVAL,t,a,o)},Heart:function(e,t,a,o){var i=49*t/48,r=9*t/48,s=.5*t,n=s-i,d=s-r,p=s+r,l=s+i,h=-1*a/3,c=a/4;this.move(s,c),this.addCubicCurve(p,h,l,c,s,a),this.moveCurve(n,c,d,h,s,c),this.closePath();var f=t*(1/6),u=t*(5/6),m=a*(2/3);o[Shape.textbox]=[f,c,u,m],o[Shape.connector]=[[s,c,270],[s,a,90]]},LightningBolt:function(e,t,a,o){var i=.3922*t,r=.5954*t,s=.2814*a,n=.5115*t,d=.3146*a,p=.7674*t,l=.5558*a,h=.6836*t,c=.5961*a,f=.4635*t,u=.6905*a,m=.5658*t,g=.6475*a,S=.2325*t,x=.4493*a,v=.3519*t,y=.388*a,E=.18009*a;this.move(i,0),this.addLine(r,s),this.moveLine(n,d,p,l,h,c,t,a,f,u,m,g,S,x,v,y,0,E),this.closePath();var C=t/21600,O=a/21600,b=8757*C,T=7437*O,w=13917*C,D=14277*O;o[Shape.textbox]=[b,T,w,D],o[Shape.connector]=[[i,0,270],[0,E,270],[f,u,180],[S,x,180],[t,a,90],[r,s,0],[p,l,0]]},Sun:function(e,t,a,o){var i=e[0]*t,r=.5*t,s=.5*a,n=r-i,d=this.getY(n,t,a),p=.75*(r-.9238*n),l=.75*(r-.3826*n),h=.75*(s-.9328*d),c=.75*(s-.3826*d),f=.03662*t,u=p+f,m=l+f,g=.03662*a,S=h+g,x=c+g,v=l+.125*t,y=c+.125*a,E=t-p,C=a-h,O=t-u,b=a-S,T=t-m,w=a-x,D=t-v,P=a-y,L=.853*t,I=.1464*a,A=.1464*t,N=.853*a;this.move(t,s),this.addLine(E,P),this.moveLine(E,y),this.closePath(),this.move(L,I),this.addLine(O,x),this.moveLine(T,S),this.closePath(),this.move(r,0),this.addLine(D,h),this.moveLine(v,h),this.closePath(),this.move(A,I),this.addLine(m,S),this.moveLine(u,x),this.closePath(),this.move(0,s),this.addLine(p,y),this.moveLine(p,P),this.closePath(),this.move(A,N),this.addLine(u,w),this.moveLine(m,b),this.closePath(),this.move(r,a),this.addLine(v,C),this.moveLine(D,C),this.closePath(),this.move(L,N),this.addLine(T,b),this.moveLine(O,w),this.closePath(),this.move(i,s),this.addEllipse(n,d,r,s),this.closePath(),o[Shape.handle]=[[i,s]];var R=zoho.math.toRadians(225),B=zoho.math.toRadians(45),_=this.getEllipseCoordinates(R,B,n,d,r,s);o[Shape.textbox]=[_[0],_[1],_[2],_[3]],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},Moon:function(e,t,a,o){var i=VectorUtil.getHTMLDimension(t),r=e[0]*i,s=.5*a,n=i-r,d=n?r*r/n:0,p=2*(n?i*i/n:0)-d,l=p-r,h=.5*p-r,c=i?Math.abs(h*s/i):0,f=VectorUtil.getViewBoxDimensions(r),u=VectorUtil.getViewBoxDimensions(l),m=.5*Math.abs(u-f);this.move(t,0),this.addYEllipseCurve(t,s,0,a,t,!0),this.addYEllipseCurve(m,c,a,0,t,!1,!1,f,s-c),o[Shape.handle]=[[f,s]];var g=Math.min(t,a),S=.3*this.getCoordinates(e[0],t,a),x=g?S*t/g:0,v=g-x,y=g*g-v*v,E=Math.sqrt(y),C=g?E*s/g:0,O=s-C,b=s+C;o[Shape.textbox]=[x,O,f,b],o[Shape.connector]=[[t,0,270],[0,s,180],[t,a,90],[f,s,0]]},Cloud:function(e,t,a,o){var i=t/(n=21600),r=a/n;this.move(1950*i,7185*r),this.addEllipseCurve(3376.5*i,4595*r,1950*i,7185*r,7005*i,2580*r,!1,!1,1912*i,1972*r),this.addEllipseCurve(2666.5*i,3633.5*r,7005*i,2580*r,11250*i,1665*r,!1,!1,6692*i,650*r),this.addEllipseCurve(2182.5*i,2972.5*r,11250*i,1665*r,14910*i,1170*r,!1,!1,10992*i,0*r),this.addEllipseCurve(2428.5*i,3297.5*r,14910*i,1170*r,19140*i,2715*r,!1,!1,14330*i,0*r),this.addEllipseCurve(2666.5*i,3636.5*r,19140*i,2715*r,20895*i,7665*r,!1,!1,15772*i,2592*r),this.addEllipseCurve(3387.5*i,4610*r,20895*i,7665*r,18690*i,15045*r,!1,!1,14822*i,5862*r),this.addEllipseCurve(2893.5*i,3933.5*r,18690*i,15045*r,14280*i,18330*r,!1,!1,12910*i,11080*r),this.addEllipseCurve(3376*i,4607.5*r,14280*i,18330*r,8235*i,19545*r,!1,!1,7660*i,12382*r),this.addEllipseCurve(3860*i,5271.5*r,8235*i,19545*r,2910*i,17640*r,!1,!1,2387*i,9757*r),this.addEllipseCurve(2180*i,2959*r,2910*i,17640*r,1080*i,12690*r,!1,!1,475*i,11732*r),this.addEllipseCurve(2172.5*i,2972.5*r,1080*i,12690*r,1950*i,7185*r,!1,!1,0*i,7165*r),this.closePath(),this.createNewPath(),this.move(2340*i,13080*r),this.addEllipseCurve(2172.5*i,2972.5*r,2340*i,13080*r,1080*i,12690*r,!1,!1,0*i,7165*r),this.move(3465*i,17445*r),this.addEllipseCurve(2180*i,2959*r,3465*i,17445*r,2910*i,17640*r,!1,!1,475*i,11732*r),this.move(8235*i,19545*r),this.addEllipseCurve(3376*i,4607.5*r,8235*i,19545*r,7905*i,18675*r,!1,!1,7660*i,12382*r),this.move(14400*i,17370*r),this.addEllipseCurve(3376*i,4607.5*r,14400*i,17370*r,14280*i,18330*r,!1,!1,7660*i,12382*r),this.move(17070*i,11475*r),this.addEllipseCurve(2892.5*i,3933.5*r,17070*i,11475*r,18690*i,15045*r,!1,!1,12910*i,11080*r),this.move(20895*i,7665*r),this.addEllipseCurve(2666.5*i,3636.5*r,20895*i,7665*r,20175*i,9015*r,!1,!1,15772*i,2592*r),this.move(19140*i,2715*r),this.addEllipseCurve(2428.5*i,3297.5*r,19140*i,2715*r,19200*i,3345*r,!1,!1,14330*i,0*r),this.move(14550*i,1980*r),this.addEllipseCurve(2428.5*i,3297.5*r,14550*i,1980*r,14910*i,1170*r,!1,!1,14330*i,0*r),this.move(11040*i,2340*r),this.addEllipseCurve(2182.5*i,2972.5*r,11040*i,2340*r,11250*i,1665*r,!1,!1,10992*i,0*r),this.move(7005*i,2580*r),this.addEllipseCurve(3376.5*i,4595*r,7005*i,2580*r,7650*i,3270*r,!1,!1,1912*i,1972*r),this.move(2070*i,7890*r),this.addEllipseCurve(3376.5*i,4595*r,2070*i,7890*r,1950*i,7185*r,!1,!1,1912*i,1972*r);var s=2977*i,n=3262*r,d=17087*i,p=17337*r,l=67*i,h=21577*r,c=21582*i,f=1235*r,u=.5*t,m=.5*a;o[Shape.textbox]=[s,n,d,p],o[Shape.connector]=[[c,m,0],[u,h,90],[l,m,180],[u,f,270]],o.croppath=[0]},Arc:function(e,t,a,o){var i=e[0],r=e[1],s=.5*t,n=.5*a,d=this.getEllipseCoordinates(i,r,s,n),p=d[0],l=d[1],h=d[2],c=d[3];this.addFiller(p,l);var f=this.isLargeArc(i,r);this.addEllipseCurve(s,n,p,l,h,c,!1,f),o[Shape.handle]=[[p,l],[h,c]];var u=zoho.math.toRadians(360),m=r-i,g=m+u,S=zoho.math.ifElse(m,m,g),x=S-(u-i),v=p>h?p:h,y=zoho.math.ifElse(x,t,v),E=zoho.math.toRadians(90)-i,C=zoho.math.toRadians(450)-i,O=S-zoho.math.ifElse(E,E,C),b=l>c?l:c,T=zoho.math.ifElse(O,a,b),w=zoho.math.toRadians(180)-i,D=zoho.math.toRadians(540)-i,P=S-zoho.math.ifElse(w,w,D),L=p<h?p:h,I=zoho.math.ifElse(P,0,L),A=zoho.math.toRadians(270)-i,N=zoho.math.toRadians(630)-i,R=S-zoho.math.ifElse(A,A,N),B=l<c?l:c,_=zoho.math.ifElse(R,0,B),M=zoho.math.toDegrees(i)-90,U=zoho.math.toDegrees(r)+90,k=.5*(M+U),G=.5*t,F=.5*a;o[Shape.textbox]=[I,_,y,T],o[Shape.connector]=[[p,l,M],[G,F,k],[h,c,U]]},DoubleBracket:function(e,t,a,o){var i=this.getCoordinates(e[0],t,a),r=t-i,s=a-i;this.drawBracket(r,t,0,i,s,a),this.drawBracket(i,0,a,s,i,0),o[Shape.handle]=[[0,i]];var n=.293*i,d=t-n,p=a-n;o[Shape.textbox]=[n,n,d,p],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},DoubleBrace:function(e,t,a,o){var i=this.getCoordinates(e[0],t,a,.25),r=.5*a,s=2*i,n=r-i,d=r+i,p=a-i,l=t-s,h=t-i;this.drawBrace(l,h,t,0,i,n,d,p,a,r),this.drawBrace(s,i,0,a,p,d,n,i,0,r),o[Shape.handle]=[[0,i]];var c=.293*i,f=i+c,u=t-f,m=a-c;o[Shape.textbox]=[f,c,u,m],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},LeftBracket:function(e,t,a,o){var i=this.getCoordinates(e[0],t,a,.5,"y");if(0==Shape.selectedHandleNumber){var r=Math.min(t,a);e[0]=i/r}var s=a-i;this.drawBracket(t,0,a,s,i,0),o[Shape.handle]=[[0,i]];var n=zoho.math.toRadians(45),d=t*Math.cos(n),p=i*Math.sin(n),l=t-d,h=i-p,c=a+p-i,f=.5*a;o[Shape.textbox]=[l,h,t,c],o[Shape.connector]=[[t,0,90],[0,f,180],[t,a,270]]},RightBracket:function(e,t,a,o){var i=this.getCoordinates(e[0],t,a,.5,"y");if(0==Shape.selectedHandleNumber){var r=Math.min(t,a);e[0]=i/r}var s=a-i;this.drawBracket(0,t,0,i,s,a),o[Shape.handle]=[[t,i]];var n=zoho.math.toRadians(45),d=t*Math.cos(n),p=i*Math.sin(n),l=i-p,h=a+p-i,c=.5*a;o[Shape.textbox]=[0,l,d,h],o[Shape.connector]=[[0,0,90],[0,a,270],[t,c,180]]},LeftBrace:function(e,t,a,o){var i=.5*t,r=this.checkBraceMax(e,t,a),s=r[0],n=r[1],d=s-n,p=s+n,l=a-n;this.drawBrace(t,i,0,a,l,p,d,n,0,s),o[Shape.handle]=[[i,n],[0,s]];var i=.5*t,h=zoho.math.toRadians(45),c=i*Math.cos(h),f=n*Math.sin(h),u=t-c,m=n-f,g=a+f-n;o[Shape.textbox]=[u,m,t,g],o[Shape.connector]=[[t,0,90],[0,s,180],[t,a,270]]},RightBrace:function(e,t,a,o){var i=.5*t,r=this.checkBraceMax(e,t,a),s=r[0],n=r[1],d=s-n,p=s+n,l=a-n;this.drawBrace(0,i,t,0,n,d,p,l,a,s),o[Shape.handle]=[[i,n],[t,s]];var i=.5*t,h=zoho.math.toRadians(45),c=i*Math.cos(h),f=n*Math.sin(h),u=n-f,m=a+f-n;o[Shape.textbox]=[0,u,c,m],o[Shape.connector]=[[0,0,90],[t,s,180],[0,a,270]]},Clock:function(e,t,a,o){var i=midY=.5*a,r=midX=.5*t;this.move(0,midY),this.addEllipse(r,i,midX,midY),this.closePath();var s=.03*r,n=.03*i;this.move(midX-s,midY),this.addEllipse(s,n,midX,midY,!0),this.closePath();for(var d=.96*r,p=.96*i,l=30;l<361;){l%90==0?(rx3=.84*r,ry3=.84*i):(rx3=.9*r,ry3=.9*i);var h=zoho.math.toRadians(l),c=this.getEllipseCoordinates(h,void 0,d,p,midX,midY),f=this.getEllipseCoordinates(h,void 0,rx3,ry3,midX,midY);this.move(c[0],c[1]),this.addLine(f[0],f[1]),l+=30}var u=e[0],m=e[1],g=.75*r,S=.75*i,x=.6*r,v=.6*i,y=this.getEllipseCoordinates(u,void 0,g,S,midX,midY),E=this.getEllipseCoordinates(m,void 0,x,v,midX,midY);this.move(y[0],y[1]),this.addLine(midX,midY),this.move(E[0],E[1]),this.addLine(midX,midY),o[Shape.handle]=[[y[0],y[1]],[E[0],E[1]]];var u=zoho.math.toRadians(225),m=zoho.math.toRadians(45),c=this.getEllipseCoordinates(u,m,rx3,ry3,midX,midY);o[Shape.textbox]=[c[0],c[1],c[2],c[3]],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},ActionPrevious:function(e,t,a,o){var i=.5*t,r=.5*a,s=this.getCoordinates(3/8,t,a),n=i-s,d=i+s,p=r-s,l=r+s;this.move(0,0),this.addLine(t,0),this.moveLine(t,a,0,a),this.closePath(),this.move(n,r),this.addLine(n,r),this.moveLine(d,p,d,l),this.closePath(),this.createNewPath(),this.move(n,r),this.addLine(n,r),this.moveLine(d,p,d,l),this.closePath(),this.createNewPath(),this.move(n,r),this.addLine(n,r),this.moveLine(d,p,d,l),this.closePath(),this.createNewPath(),this.move(0,0),this.addLine(t,0),this.moveLine(t,a,0,a),this.closePath(),this.setConnectorAndTextBox(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},ActionNext:function(e,t,a,o){var i=.5*t,r=.5*a,s=this.getCoordinates(3/8,t,a),n=i+s,d=i-s,p=r+s,l=r-s;this.move(0,0),this.addLine(t,0),this.moveLine(t,a,0,a),this.closePath(),this.move(n,r),this.addLine(n,r),this.moveLine(d,p,d,l),this.closePath(),this.createNewPath(),this.move(n,r),this.addLine(n,r),this.moveLine(d,p,d,l),this.closePath(),this.createNewPath(),this.move(n,r),this.addLine(n,r),this.moveLine(d,p,d,l),this.closePath(),this.createNewPath(),this.move(0,0),this.addLine(t,0),this.moveLine(t,a,0,a),this.closePath(),this.setConnectorAndTextBox(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},ActionBegin:function(e,t,a,o){var i=.5*t,r=.5*a,s=this.getCoordinates(3/8,t,a),n=r-s,d=r+s,p=i-s,l=i+s,h=this.getCoordinates(.75,t,a,1),c=p+h*(1/8),f=p+.25*h;this.move(0,0),this.addLine(t,0),this.moveLine(t,a,0,a),this.closePath(),this.move(f,r),this.addLine(l,n),this.moveLine(l,n,l,d),this.closePath(),this.move(c,n),this.addLine(c,n),this.moveLine(p,n,p,d,c,d),this.closePath(),this.createNewPath(),this.move(f,r),this.addLine(l,n),this.moveLine(l,n,l,d),this.closePath(),this.move(c,n),this.addLine(c,n),this.moveLine(p,n,p,d,c,d),this.closePath(),this.createNewPath(),this.move(f,r),this.addLine(l,n),this.moveLine(l,n,l,d),this.closePath(),this.move(c,n),this.addLine(c,n),this.moveLine(p,n,p,d,c,d),this.closePath(),this.createNewPath(),this.move(0,0),this.addLine(t,0),this.moveLine(t,a,0,a),this.closePath(),this.setConnectorAndTextBox(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},ActionEnd:function(e,t,a,o){var i=.5*t,r=.5*a,s=this.getCoordinates(3/8,t,a),n=r-s,d=r+s,p=i-s,l=i+s,h=this.getCoordinates(.75,t,a,1),c=p+.75*h,f=p+h*(7/8);this.move(0,0),this.addLine(t,0),this.moveLine(t,a,0,a),this.closePath(),this.move(c,r),this.addLine(c,r),this.moveLine(p,n,p,d),this.closePath(),this.move(f,n),this.addLine(f,n),this.moveLine(l,n,l,d,f,d),this.closePath(),this.createNewPath(),this.move(c,r),this.addLine(c,r),this.moveLine(p,n,p,d),this.closePath(),this.move(f,n),this.addLine(f,n),this.moveLine(l,n,l,d,f,d),this.closePath(),this.createNewPath(),this.move(c,r),this.addLine(c,r),this.moveLine(p,n,p,d),this.closePath(),this.move(f,n),this.addLine(f,n),this.moveLine(l,n,l,d,f,d),this.closePath(),this.createNewPath(),this.move(0,0),this.addLine(t,0),this.moveLine(t,a,0,a),this.closePath(),this.setConnectorAndTextBox(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},ActionHome:function(e,t,a,o){var i=.5*t,r=.5*a,s=this.getCoordinates(3/8,t,a),n=r-s,d=r+s,p=i-s,l=i+s,h=this.getCoordinates(.75,t,a,1),c=n+h*(1/16),f=n+h*(3/16),u=n+h*(5/16),m=n+.75*h,g=p+h*(1/8),S=p+h*(7/16),x=p+h*(9/16),v=p+.6875*h,y=p+.8125*h,E=p+h*(7/8);this.move(0,0),this.addLine(t,0),this.moveLine(t,a,0,a),this.closePath(),this.move(i,n),this.addLine(i,n),this.moveLine(p,r,g,r,g,d,E,d,E,r,l,r,y,u,y,c,v,c,v,f),this.closePath(),this.createNewPath(),this.move(g,r),this.addLine(g,d),this.moveLine(S,d,S,m,x,m,x,d,E,d,E,r),this.closePath(),this.move(v,c),this.addLine(y,c),this.moveLine(y,u,v,f),this.closePath(),this.createNewPath(),this.move(i,n),this.addLine(p,r),this.moveLine(l,r),this.closePath(),this.move(S,d),this.addLine(S,m),this.moveLine(x,m,x,d),this.closePath(),this.createNewPath(),this.move(i,n),this.addLine(i,n),this.moveLine(p,r,g,r,g,d,E,d,E,r,l,r,y,u,y,c,v,c,v,f),this.closePath(),this.move(g,r),this.addLine(g,d),this.moveLine(S,d,S,m,x,m,x,d,E,d,E,r),this.closePath(),this.move(v,c),this.addLine(y,c),this.moveLine(y,u,v,f),this.closePath(),this.move(i,n),this.addLine(p,r),this.moveLine(l,r),this.closePath(),this.move(S,d),this.addLine(S,m),this.moveLine(x,m,x,d),this.closePath(),this.createNewPath(),this.move(0,0),this.addLine(t,0),this.moveLine(t,a,0,a),this.closePath(),this.setConnectorAndTextBox(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},ActionMovie:function(e,t,a,o){var i=.5*t,r=.5*a,s=this.getCoordinates(3/8,t,a),n=r-s,d=i-s,p=i+s,l=this.getCoordinates(.75,t,a,1),h=d+l*(1455/21600),c=d+l*(1905/21600),f=d+l*(2325/21600),u=d+l*(16155/21600),m=d+.7875*l,g=d+l*(19335/21600),S=d+l*(19725/21600),x=d+l*(20595/21600),v=n+l*(5280/21600),y=n+l*(5730/21600),E=n+l*(6630/21600),C=n+l*(7492/21600),O=n+l*(9067/21600),b=n+l*(9555/21600),T=n+l*(13342/21600),w=n+.675*l,D=n+l*(15592/21600);this.move(0,0),this.addLine(t,0),this.moveLine(t,a,0,a),this.closePath(),this.move(d,v),this.addLine(d,b),this.moveLine(d,b,h,b,c,O,f,O,f,D,m,D,m,T,g,T),this.moveLine(x,w,p,w,p,w,p,E,x,E,S,C,m,C,m,E,u,y,c,y,h,v),this.createNewPath(),this.move(d,v),this.addLine(d,b),this.moveLine(d,b,h,b,c,O,f,O,f,D,m,D,m,T,g,T),this.moveLine(x,w,p,w,p,w,p,E,x,E,S,C,m,C,m,E,u,y,c,y,h,v),this.closePath(),this.createNewPath(),this.move(0,0),this.addLine(t,0),this.moveLine(t,a,0,a),this.closePath(),this.move(d,v),this.addLine(d,b),this.moveLine(d,b,h,b,c,O,f,O,f,D,m,D,m,T,g,T),this.moveLine(x,w,p,w,p,w,p,E,x,E,S,C,m,C,m,E,u,y,c,y,h,v),this.closePath(),this.createNewPath(),this.move(0,0),this.addLine(t,0),this.moveLine(t,a,0,a),this.setConnectorAndTextBox(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},ActionSound:function(e,t,a,o){var i=.5*t,r=.5*a,s=this.getCoordinates(3/8,t,a),n=r-s,d=r+s,p=i-s,l=i+s,h=this.getCoordinates(.75,t,a,1),c=h*(5/16),f=n+h*(1/8),u=n+c,m=n+.6875*h,g=n+h*(7/8),S=p+c,x=p+h*(5/8),v=p+.75*h;this.move(0,0),this.addLine(t,0),this.moveLine(t,a,0,a),this.closePath(),this.move(p,u),this.addLine(p,m),this.moveLine(S,m,x,d,x,n,S,u),this.createNewPath(),this.move(p,u),this.addLine(p,m),this.moveLine(S,m,x,d,x,n,S,u),this.closePath(),this.createNewPath(),this.move(p,u),this.addLine(p,m),this.moveLine(S,m,x,d,x,n,S,u),this.move(p,u),this.addLine(S,u),this.moveLine(x,n,x,d,S,m,p,m),this.closePath(),this.move(v,u),this.addLine(l,f),this.move(v,r),this.moveLine(l,r),this.move(v,m),this.moveLine(l,g),this.closePath(),this.createNewPath(),this.move(0,0),this.addLine(t,0),this.moveLine(t,a,0,a),this.closePath(),this.setConnectorAndTextBox(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},ActionCustom:function(e,t,a,o){this.Rect(e,t,a,o)},ActionDocument:function(e,t,a,o){var i=.5*t,r=.5*a,s=this.getCoordinates(3/8,t,a),n=r-s,d=r+s,p=this.getCoordinates(9/32,t,a),l=i-p,h=i+p,c=this.getCoordinates(3/16,t,a),f=h-c,u=n+c;this.move(0,0),this.addLine(t,0),this.moveLine(t,a,0,a),this.closePath(),this.move(l,n),this.addLine(f,n),this.moveLine(h,u,h,d,l,d),this.closePath(),this.createNewPath(),this.move(l,n),this.addLine(f,n),this.moveLine(h,u,h,d,l,d),this.closePath(),this.move(f,n),this.addLine(f,u),this.moveLine(h,u,f,n),this.closePath(),this.createNewPath(),this.move(f,n),this.addLine(f,u),this.moveLine(h,u),this.closePath(),this.createNewPath(),this.move(l,n),this.addLine(f,n),this.moveLine(h,u,h,d,l,d),this.closePath(),this.move(f,n),this.addLine(f,u),this.moveLine(h,u),this.closePath(),this.createNewPath(),this.move(0,0),this.addLine(t,0),this.moveLine(t,a,0,a),this.closePath(),this.setConnectorAndTextBox(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},ActionInformation:function(e,t,a,o){var i=.5*t,r=.5*a,s=this.getCoordinates(3/8,t,a),n=r-s,d=i-s,p=this.getCoordinates(.75,t,a,1),l=p*(5/16),h=n+p*(1/32),c=n+l,f=n+p*(3/8),u=n+.8125*p,m=n+p*(7/8),g=d+l,S=d+p*(13/32),x=d+p*(19/32),v=d+.6875*p,y=p*(3/32),E=i-y;this.move(0,0),this.addLine(t,0),this.moveLine(t,a,0,a),this.closePath(),this.move(d,r),this.addEllipse(s,s,i,r),this.createNewPath(),this.move(d,r),this.addEllipse(s,s,i,r),this.move(E,h+y),this.addEllipse(y,y,i,h+y),this.move(g,c),this.addLine(g,f),this.moveLine(S,f,S,u,g,u,g,m,v,m,v,u,x,u,x,c),this.closePath(),this.createNewPath(),this.move(E,h+y),this.addEllipse(y,y,i,h+y),this.move(g,c),this.addLine(g,f),this.moveLine(S,f,S,u,g,u,g,m,v,m,v,u,x,u,x,c),this.closePath(),this.createNewPath(),this.move(0,0),this.addLine(t,0),this.moveLine(t,a,0,a),this.closePath(),this.move(d,r),this.addEllipse(s,s,i,r),this.move(E,h+y),this.addEllipse(y,y,i,h+y),this.move(g,c),this.addLine(g,f),this.moveLine(S,f,S,u,g,u,g,m,v,m,v,u,x,u,x,c),this.closePath(),this.createNewPath(),this.move(0,0),this.addLine(t,0),this.moveLine(t,a,0,a),this.closePath(),this.setConnectorAndTextBox(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},ActionHelp:function(e,t,a,o){var i=.5*t,r=.5*a,s=this.getCoordinates(3/8,t,a),n=r-s,d=i-s,p=this.getCoordinates(.75,t,a,1),l=p*(1/7),h=p*(3/14),c=p*(2/7),f=n+c,u=n+p*(17/28),m=n+.75*p,g=n+p*(11/14),S=d+h,x=d+p*(3/7),v=d+p*(4/7),y=p*(1/14),E=p*(3/28),C=E+g,O=i-E,b=g+E,T=this.computeEllipticCoords(c,c,S,f,180,180),w=this.computeEllipticCoords(l,h,T[0],T[1],0,90),D=this.computeEllipticCoords(y,E,w[0],w[1],270,270),P=this.computeEllipticCoords(l,h,x,u,180,90),L=this.computeEllipticCoords(y,E,P[0],P[1],90,270),I=this.computeEllipticCoords(l,l,L[0],L[1],0,180);this.move(0,0),this.addLine(t,0),this.moveLine(t,a,0,a),this.closePath(),this.move(S,f),this.addXEllipseCurve(c,c,S,T[0],f),this.addYCurve(T[0],T[1],w[0],w[1]),this.addYCurve(w[0],w[1],D[0],D[1],!0),this.move(v,u),this.addLine(v,m),this.moveLine(x,m,x,u),this.addYCurve(x,u,P[0],P[1]),this.addYCurve(P[0],P[1],L[0],L[1],!0),this.addXEllipseCurve(l,l,L[0],I[0],L[1],!0),this.addLine(S,f),this.move(O,b),this.addEllipse(E,E,i,C),this.createNewPath(),this.move(S,f),this.addXEllipseCurve(c,c,S,T[0],f),this.addYCurve(T[0],T[1],w[0],w[1]),this.addYCurve(w[0],w[1],D[0],D[1],!0),this.move(v,u),this.addLine(v,m),this.moveLine(x,m,x,u),this.addYCurve(x,u,P[0],P[1]),this.addYCurve(P[0],P[1],L[0],L[1],!0),this.addXEllipseCurve(l,l,L[0],I[0],L[1],!0),this.addLine(S,f),this.move(O,b),this.addEllipse(E,E,i,C),this.createNewPath(),this.move(S,f),this.addXEllipseCurve(c,c,S,T[0],f),this.addYCurve(T[0],T[1],w[0],w[1]),this.addYCurve(w[0],w[1],D[0],D[1],!0),this.move(v,u),this.addLine(v,m),this.moveLine(x,m,x,u),this.addYCurve(x,u,P[0],P[1]),this.addYCurve(P[0],P[1],L[0],L[1],!0),this.addXEllipseCurve(l,l,L[0],I[0],L[1],!0),this.addLine(S,f),this.move(O,b),this.addEllipse(E,E,i,C),this.createNewPath(),this.move(0,0),this.addLine(t,0),this.moveLine(t,a,0,a),this.closePath(),this.setConnectorAndTextBox(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},ActionReturn:function(e,t,a,o){var i=.5*t,r=.5*a,s=this.getCoordinates(3/8,t,a),n=r-s,d=r+s,p=i-s,l=i+s,h=this.getCoordinates(.75,t,a,1),c=.75*h,f=h*(5/8),u=h*(3/8),m=.25*h,g=n+c,S=n+f,x=n+m,v=p+h*(7/8),y=p+c,E=p+f,C=p+u,O=p+m,b=h*(1/8),T=this.computeEllipticCoords(b,b,E,S,0,90),w=this.computeEllipticCoords(b,b,C,g,90,90),D=this.computeEllipticCoords(u,u,p,S,180,270),P=this.computeEllipticCoords(u,u,i,d,90,270);this.move(0,0),this.addLine(t,0),this.moveLine(t,a,0,a),this.closePath(),this.move(l,x),this.addLine(y,n),this.moveLine(i,x,E,x,E,S),this.addYCurve(E,S,T[0],T[1]),this.addLine(C,g),this.addXCurve(C,g,w[0],w[1]),this.addLine(O,x),this.moveLine(p,x,p,S),this.addXCurve(p,S,D[0],D[1],!0),this.addLine(i,d),this.addYCurve(i,d,P[0],P[1],!0),this.addLine(v,x),this.moveLine(l,x),this.createNewPath(),this.move(l,x),this.addLine(y,n),this.moveLine(i,x,E,x,E,S),this.addYCurve(E,S,T[0],T[1]),this.addLine(C,g),this.addXCurve(C,g,w[0],w[1]),this.addLine(O,x),this.moveLine(p,x,p,S),this.addXCurve(p,S,D[0],D[1],!0),this.addLine(i,d),this.addYCurve(i,d,P[0],P[1],!0),this.addLine(v,x),this.moveLine(l,x),this.createNewPath(),this.move(0,0),this.addLine(t,0),this.moveLine(t,a,0,a),this.closePath(),this.move(l,x),this.addLine(y,n),this.moveLine(i,x,E,x,E,S),this.addYCurve(E,S,T[0],T[1]),this.addLine(C,g),this.addXCurve(C,g,w[0],w[1]),this.addLine(O,x),this.moveLine(p,x,p,S),this.addXCurve(p,S,D[0],D[1],!0),this.addLine(i,d),this.addYCurve(i,d,P[0],P[1],!0),this.addLine(v,x),this.moveLine(l,x),this.closePath(),this.createNewPath(),this.move(0,0),this.addLine(t,0),this.moveLine(t,a,0,a),this.closePath(),this.setConnectorAndTextBox(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},LeftArrow:function(e,t,a,o){var i=.5*(a-e[0]*a),r=this.getCoordinates(e[1],t,a,1,"x"),s=a-i,n=.5*a;this.drawArrow(t,r,0,a,s,i,0,n),o[Shape.handle]=[[t,i],[r,0]];var d=r-i*r/n;o[Shape.textbox]=[d,i,t,s],o[Shape.connector]=[[r,0,270],[0,n,180],[r,a,90],[t,n,0]]},UpArrow:function(e,t,a,o){var i=.5*(t-e[0]*t),r=this.getCoordinates(e[1],t,a,1,"y"),s=t-i,n=.5*t;this.drawVerticalArrow(0,r,a,0,i,s,t,n),o[Shape.handle]=[[i,a],[0,r]];var d=r-i*r/n;o[Shape.textbox]=[i,d,s,a],o[Shape.connector]=[[n,0,270],[0,r,180],[n,a,90],[t,r,0]]},DownArrow:function(e,t,a,o){var i=.5*(t-e[0]*t),r=this.getCoordinates(e[1],t,a,1,"y"),s=a-r,n=t-i,d=.5*t;this.drawVerticalArrow(a,s,0,t,n,i,0,d),o[Shape.handle]=[[i,0],[0,s]];var p=s+i*r/a;o[Shape.textbox]=[i,0,n,p],o[Shape.connector]=[[d,0,270],[0,s,180],[d,a,90],[t,s,0]]},LeftRightArrow:function(e,t,a,o){var i=.5*(a-e[0]*a),r=this.getCoordinates(e[1],t,a,.5,"x"),s=t-r,n=a-i,d=.5*a;this.move(s,i),this.addLine(s,0),this.moveLine(t,d,s,a,s,n,r,n,r,a,0,d,r,0,r,i),this.closePath(),o[Shape.handle]=[[s,i],[r,0]];var p=i*r/d,l=r-p,h=s+p,c=.5*t;o[Shape.textbox]=[l,i,h,n],o[Shape.connector]=[[t,d,0],[s,a,90],[c,n,90],[r,a,90],[0,d,180],[r,0,270],[s,0,270],[c,i,270]]},UpDownArrow:function(e,t,a,o){var i=.5*(t-e[0]*t),r=this.getCoordinates(e[1],t,a,.5,"y"),s=a-r,n=t-i,d=.5*t;this.move(i,r),this.addLine(i,s),this.moveLine(0,s,d,a,t,s,n,s,n,r,t,r,d,0,0,r),this.closePath(),o[Shape.handle]=[[i,s],[0,r]];var p=i*r/d,l=r-p,h=s+p,c=.5*a;o[Shape.textbox]=[i,l,n,h],o[Shape.connector]=[[d,0,270],[0,s,180],[i,c,180],[0,r,180],[d,a,90],[t,s,0],[n,c,0],[t,r,0]]},QuadArrow:function(e,t,a,o){var i=.5*t,r=.5*a,s=this.modifier.QuadArrow.call(this,e,t,a),n=i-s[0],d=i-s[1],p=i+s[1],l=i+s[0],h=r-s[0],c=r-s[1],f=r+s[1],u=r+s[0],m=s[2],g=t-m,S=a-m;this.move(n,m),this.addLine(i,0),this.moveLine(l,m,p,m,p,c,g,c,g,h,t,r),this.moveLine(g,u,g,f,p,f,p,S,l,S,i,a),this.moveLine(n,S,d,S,d,f,m,f,m,u,0,r),this.moveLine(m,h,m,c,d,c,d,m),this.closePath(),o[Shape.handle]=[[d,m],[n,0],[t,m]];var x=s[1]*s[2]/s[0],v=t-x;o[Shape.textbox]=[x,c,v,f],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},LeftRightUpArrow:function(e,t,a,o){var i=.5*t,r=this.modifier.LeftRightUpArrow.call(this,e,t,a),s=i-r[0],n=i-r[1],d=i+r[1],p=i+r[0],l=a-r[0],h=l+r[1],c=a-2*r[0],f=l-r[1],u=r[2],m=t-u;this.move(s,u),this.addLine(i,0),this.moveLine(p,u,d,u,d,f,m,f,m,c,t,l),this.moveLine(m,a,m,h,u,h,u,a,0,l),this.moveLine(u,c,u,f,n,f,n,u),this.closePath(),o[Shape.handle]=[[n,u],[s,0],[t,u]];var g=r[1]*u/r[0],S=t-g;o[Shape.textbox]=[g,f,S,h],o[Shape.connector]=[[i,0,270],[0,l,180],[i,h,90],[t,l,0]]},BentArrow:function(e,t,a,o){var i=this.modifier.BentArrow.call(this,e,t,a),r=i[0],s=i[1],n=i[2],d=i[3],p=s-.5*r,l=.5*r,h=d-r,c=Math.max(h,0),f=r+c,u=t-n,m=p+r,g=m+p,S=p+d;this.move(0,a),this.addLine(0,S),this.addYCurve(0,S,S-p,p),this.addLine(u,p),this.moveLine(u,0,t,s,u,g,u,m,f,m),this.addYCurve(f,m,f-c,m+c,!0),this.addLine(r,a),this.closePath(),o[Shape.textbox]=[0,0,t,a],o[Shape.handle]=[[r,a],[t,g],[u,0],[d,0]],o[Shape.connector]=[[u,0,270],[u,g,90],[l,a,90],[t,s,0]]},UTurnArrow:function(e,t,a,o){var i=this.modifier.UTurnArrow.call(this,e,t,a),r=i[0],s=i[1],n=i[2],d=i[3],p=i[4],l=p-n,h=.5*(2*s-r),c=t-h,f=c-d,u=t-s,m=u-s,g=m+h;this.move(0,a),this.addLine(0,d),this.addYCurve(0,d,d,0),this.addLine(f,0),this.addXCurve(f,0,c,d),this.addLine(c,l),this.moveLine(t,l,u,p,m,l,g,l),d>r?(this.moveLine(g,d),this.addXCurve(g,d,f,r,!0),this.addLine(d,r),this.addYCurve(d,r,r,d,!0),this.addLine(r,a)):this.moveLine(g,r,r,r,r,a),this.closePath(),o[Shape.handle]=[[r,a],[m,a],[m,l],[d,0],[t,p]];var S=.5*r,x=.5*(r+g);o[Shape.textbox]=[0,0,t,a],o[Shape.connector]=[[t,l,0],[u,p,90],[m,l,90],[S,a,90],[x,0,270]]},LeftUpArrow:function(e,t,a,o){var i=this.modifier.LeftUpArrow.call(this,e,t,a),r=i[0],s=i[1],n=i[2],d=s,p=t-d,l=t-2*s,h=n,c=s-(r*=.5),f=t-c,u=a-c,m=n,g=a-d,S=a-2*s,x=S+c,v=l+c;this.move(l,h),this.addLine(p,0),this.moveLine(t,h,f,h,f,u,m,u,m,a,0,g,m,S,m,x,v,x,v,h),this.closePath();var y=.5*(h+u),E=.5*(f+m);o[Shape.handle]=[[v,h],[l,0],[t,n]],o[Shape.connector]=[[p,0,270],[t,n,0],[f,y,0],[E,u,90],[n,a,90],[0,g,180],[m,S,270],[v,h,180]],o[Shape.textbox]=[0,x,p,u]},BentUpArrow:function(e,t,a,o){var i=this.modifier.BentUpArrow.call(this,e,t,a),r=i[0],s=i[1],n=i[2],d=2*s,p=.5*(d-r),l=a-r,h=t-d,c=h+p,f=h+s,u=t-p;this.move(0,l),this.addLine(0,a),this.moveLine(u,a,u,n,t,n,f,0,h,n,c,n,c,l),this.closePath(),o[Shape.handle]=[[0,l],[h,0],[t,n]];var m=.5*(n+a),g=.5*u,S=.5*(l+a);o[Shape.connector]=[[t,n,0],[u,m,0],[g,a,90],[0,S,180],[h,n,180],[f,0,270]],o[Shape.textbox]=[0,l,u,a]},CurvedRightArrow:function(e,t,a,o){var i=this.modifier.CurvedRightArrow.call(this,e,t,a),r=i[0],s=i[1],n=i[2],d=i[3],p=i[4],l=d+r,h=t*t-n*n,c=Math.sqrt(h),f=t?c*d/t:0,u=d+f,m=l+f,g=.5*(s-r),S=u-g,x=m+g,v=a-.5*s,y=t-n,E=.5*(d+l),C=t-p,O=l-d;this.move(0,d),this.addEllipseCurve(t,d,0,d,y,u,!0),this.addLine(y,S),this.moveLine(t,v,y,x,y,m),this.addEllipseCurve(t,d,y,m,0,l,!1,!1,0,O),this.closePath(),this.createNewPath(),this.move(t,r),this.addEllipseCurve(t,d,t,r,C,E,!0,!1,0,O),this.addEllipseCurve(t,d,C,E,t,0),this.closePath(),this.createNewPath(),this.move(0,d),this.addEllipseCurve(t,d,0,d,y,u,!0),this.addLine(y,S),this.moveLine(t,v,y,x,y,m),this.addEllipseCurve(t,d,y,m,0,l,!1,!1,0,O),this.addLine(0,d),this.addEllipseCurve(t,d,0,d,t,0),this.addLine(t,r),this.addEllipseCurve(t,d,t,r,C,E,!0,!1,0,O),o[Shape.handle]=[[y,u],[t,S],[y,a]];var b=.5*r;o[Shape.textbox]=[0,0,t,a],o[Shape.connector]=[[0,E,180],[y,a,90],[t,v,0],[y,S,0],[t,b,0]]},CurvedLeftArrow:function(e,t,a,o){var i=this.modifier.CurvedLeftArrow.call(this,e,t,a),r=i[0],s=i[1],n=i[2],d=i[3],p=i[4],l=d+r,h=t*t-n*n,c=Math.sqrt(h),f=t?c*d/t:0,u=d+f,m=l+f,g=.5*(s-r),S=u-g,x=m+g,v=a-.5*s,y=n,E=.5*(d+l),C=0-t;this.move(0,v),this.addLine(y,S),this.moveLine(y,u),this.addEllipseCurve(t,d,y,u,p,E,!0,!1,C),this.addEllipseCurve(t,d,p,E,y,m,!1,!1,C,r),this.addLine(y,x),this.closePath(),this.createNewPath(),this.move(t,l),this.addEllipseCurve(t,d,t,l,0,r,!0,!1,C,r),this.addLine(0,0),this.addEllipseCurve(t,d,0,0,t,d,!1,!1,C),this.closePath(),this.createNewPath(),this.move(t,l),this.addEllipseCurve(t,d,t,l,0,r,!0,!1,C,r),this.addLine(0,0),this.addEllipseCurve(t,d,0,0,t,d,!1,!1,C),this.addLine(t,l),this.addEllipseCurve(t,d,t,l,y,m,!1,!1,C,r),this.addLine(y,x),this.moveLine(0,v,y,S,y,u),this.addEllipseCurve(t,d,y,u,p,E,!0,!1,C),o[Shape.handle]=[[y,u],[0,S],[y,a]];var O=.5*r;o[Shape.textbox]=[0,0,t,a];o[Shape.connector]=[[0,O,180],[y,S,180],[0,v,120],[y,x,90],[t,E,0]]},CurvedUpArrow:function(e,t,a,o){var i=this.modifier.CurvedUpArrow.call(this,e,t,a),r=i[0],s=i[1],n=i[2],d=i[3],p=i[4],l=d+r,h=a*a-n*n,c=Math.sqrt(h),f=a?c*d/a:0,u=d+f,m=l+f,g=.5*(s-r),S=u-g,x=m+g,v=t-.5*s,y=n,E=.5*(d+l),C=0-a;this.move(v,0),this.addLine(x,y),this.moveLine(m,y),this.addEllipseCurve(d,a,m,y,E,p,!1,!1,r,C),this.addEllipseCurve(d,a,E,p,u,y,!0,!1,0,C),this.addLine(S,y),this.closePath(),this.createNewPath(),this.move(d,a),this.addEllipseCurve(d,a,d,a,0,0,!1,!1,0,C),this.addLine(r,0),this.addEllipseCurve(d,a,r,0,l,a,!0,!1,r,C),this.closePath(),this.createNewPath(),this.move(E,p),this.addEllipseCurve(d,a,E,p,u,y,!0,!1,0,C),this.addLine(S,y),this.moveLine(v,0,x,y,m,y),this.addEllipseCurve(d,a,m,y,l,a,!1,!1,r,C),this.addLine(d,a),this.addEllipseCurve(d,a,d,a,0,0,!1,!1,0,C),this.addLine(r,0),this.addEllipseCurve(d,a,r,0,l,a,!0,!1,r,C),o[Shape.handle]=[[u,y],[S,0],[t,y]];var O=.5*r;o[Shape.textbox]=[0,0,t,a],o[Shape.connector]=[[v,0,270],[S,y,270],[O,0,270],[E,a,90],[x,y,0]]},CurvedDownArrow:function(e,t,a,o){var i=this.modifier.CurvedUpArrow.call(this,e,t,a),r=i[0],s=i[1],n=i[2],d=i[3],p=i[4],l=d+r,h=a*a-n*n,c=Math.sqrt(h),f=a?c*d/a:0,u=d+f,m=l+f,g=.5*(s-r),S=u-g,x=m+g,v=t-.5*s,y=a-n,E=a-p,C=.5*(d+l);this.move(v,a),this.addLine(S,y),this.moveLine(u,y),this.addEllipseCurve(d,a,u,y,d,0,!0),this.addLine(l,0),this.addEllipseCurve(d,a,l,0,m,y,!1,!1,r),this.addLine(x,y),this.closePath(),this.createNewPath(),this.move(0,a),this.addEllipseCurve(d,a,0,a,C,E),this.addEllipseCurve(d,a,C,E,r,a,!0,!1,r),this.closePath(),this.createNewPath(),this.move(C,E),this.addEllipseCurve(d,a,C,E,r,a,!0,!1,r),this.addLine(0,a),this.addEllipseCurve(d,a,0,a,d,0),this.addLine(l,0),this.addEllipseCurve(d,a,l,0,m,y,!1,!1,r),this.addLine(x,y),this.moveLine(v,a,S,y,u,y),this.addEllipseCurve(d,a,u,y,d,0,!0),o[Shape.handle]=[[u,y],[S,a],[t,y]];var O=.5*r;o[Shape.textbox]=[0,0,t,a],o[Shape.connector]=[[C,0,270],[O,a,90],[S,y,90],[v,a,90],[x,y,0]]},StripedRightArrow:function(e,t,a,o){var i=this.getCoordinates(e[1],t,a,.84375,"x"),r=t-i,s=.5*(a-e[0]*a),n=this.getCoordinates(1/32,t,a),d=this.getCoordinates(1/16,t,a),p=this.getCoordinates(1/8,t,a),l=this.getCoordinates(5/32,t,a),h=.5*a,c=a-s;this.move(r,s),this.addLine(r,0),this.moveLine(t,h,r,a,r,c,l,c,l,s),this.closePath(),this.move(0,s),this.addLine(n,s),this.moveLine(n,c,0,c),this.closePath(),this.move(d,s),this.addLine(p,s),this.moveLine(p,c,d,c),this.closePath(),o[Shape.handle]=[[0,s],[r,0]];var f=t-(h-s)*i/h;o[Shape.textbox]=[l,s,f,c],o[Shape.connector]=[[r,0,270],[0,h,180],[r,a,90],[t,h,0]]},NotchedRightArrow:function(e,t,a,o){var i=.5*a,r=this.getCoordinates(e[1],t,a,1,"x"),s=.5*(e[0]*a),n=a-s,d=t-r,p=i?r-s/i*r:r;this.move(d,s),this.addLine(d,0),this.moveLine(t,i,d,a,d,n,0,n,p,i,0,s),this.closePath(),o[Shape.handle]=[[t,s],[d,0]];var l=i-s,h=i?l*r/i:0,c=t-h;o[Shape.textbox]=[h,s,c,n],o[Shape.connector]=[[d,0,270],[p,i,180],[d,a,90],[t,i,0]]},PentagonArrow:function(e,t,a,o){var i=t-this.getCoordinates(e[0],t,a,1,"x"),r=.5*a;this.move(i,0),this.addLine(t,r),this.moveLine(i,a,0,a,0,0),this.closePath(),o[Shape.handle]=[[i,0]];var s=.5*(i+t),n=.5*i;o[Shape.textbox]=[0,0,s,a],o[Shape.connector]=[[n,0,270],[0,r,180],[n,a,90],[t,r,0]]},Chevron:function(e,t,a,o){var i=this.getCoordinates(e[0],t,a,1,"x"),r=t-i,s=.5*a;this.move(r,0),this.addLine(t,s),this.moveLine(r,a,0,a,i,s,0,0),this.closePath(),o[Shape.handle]=[[r,0]];var n=r-i,d=zoho.math.ifElse(n,i,0),p=zoho.math.ifElse(n,r,t),l=.5*r;o[Shape.textbox]=[d,0,p,a],o[Shape.connector]=[[l,0,270],[i,s,180],[l,a,90],[t,s,0]]},RightArrowCallout:function(e,t,a,o){var i=this.modifier.RightArrowCallout.call(this,e,t,a),r=i[0],s=i[1],n=i[2],d=i[3],p=i[4],l=i[5],h=.5*a;this.move(r,a),this.addLine(r,p),this.moveLine(s,p,s,l,t,h,s,n,s,d,r,d,r,0,0,0,0,a),this.closePath(),o[Shape.handle]=[[s,d],[t,n],[s,0],[r,a]];var c=.5*r;o[Shape.textbox]=[0,0,r,a],o[Shape.connector]=[[c,0,270],[0,h,180],[c,a,90],[t,h,0]]},DownArrowCallout:function(e,t,a,o){var i=this.modifier.DownArrowCallout.call(this,e,t,a),r=i[0],s=i[1],n=i[2],d=i[3],p=i[4],l=i[5],h=.5*t;this.move(0,r),this.addLine(d,r),this.moveLine(d,s,n,s,h,a,l,s,p,s,p,r,t,r,t,0,0,0),this.closePath(),o[Shape.handle]=[[d,s],[n,a],[t,s],[0,r]];var c=.5*r;o[Shape.textbox]=[0,0,t,r],o[Shape.connector]=[[h,0,270],[0,c,180],[h,a,90],[t,c,0]]},LeftArrowCallout:function(e,t,a,o){var i=this.modifier.LeftArrowCallout.call(this,e,t,a),r=i[0],s=i[1],n=i[2],d=i[3],p=i[4],l=i[5],h=.5*a;this.move(r,a),this.addLine(r,p),this.moveLine(s,p,s,l,0,h,s,n,s,d,r,d,r,0,t,0,t,a),this.closePath(),o[Shape.handle]=[[s,d],[0,n],[s,0],[r,a]];var c=.5*(r+t);o[Shape.textbox]=[r,0,t,a],o[Shape.connector]=[[c,0,270],[0,h,180],[c,a,90],[t,h,0]]},UpArrowCallout:function(e,t,a,o){var i=this.modifier.UpArrowCallout.call(this,e,t,a),r=i[0],s=i[1],n=i[2],d=i[3],p=i[4],l=i[5],h=.5*t;this.move(0,r),this.addLine(d,r),this.moveLine(d,s,n,s,h,0,l,s,p,s,p,s,p,r,t,r,t,a,0,a),this.closePath(),o[Shape.handle]=[[d,s],[n,0],[t,s],[0,r]],o[Shape.textbox]=[0,r,t,a],o[Shape.connector]=[[h,0,270],[0,r,180],[h,a,90],[t,r,0]]},LeftRightArrowCallout:function(e,t,a,o){var i=this.modifier.LeftRightArrowCallout.call(this,e,t,a),r=.5*i[0],s=i[1],n=i[2],d=i[3],p=i[4],l=i[5],h=t-r,c=t-s,f=.5*a;this.move(r,a),this.addLine(r,p),this.moveLine(s,p,s,l,0,f,s,n,s,d,r,d,r,0,h,0,h,d,c,d,c,n,t,f,c,l,c,p,h,p,h,a),this.closePath(),o[Shape.handle]=[[s,d],[0,n],[s,0],[r,a]],o[Shape.textbox]=[r,0,h,a],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},QuadArrowCallout:function(e,t,a,o){var i=.5*t,r=.5*a,s=this.modifier.QuadArrowCallout.call(this,e,t,a),n=i-s[0],d=i-s[1],p=i+s[1],l=i+s[0],h=r-s[0],c=r-s[1],f=r+s[1],u=r+s[0],m=s[2],g=t-m,S=a-m,x=i-s[3],v=i+s[3],y=r-s[3],E=r+s[3];this.move(n,m),this.addLine(i,0),this.moveLine(l,m,p,m,p,y,v,y,v,c,g,c,g,h,t,r),this.moveLine(g,u,g,f,v,f,v,E,p,E,p,S,l,S,i,a),this.moveLine(n,S,d,S,d,E,x,E,x,f,m,f,m,u,0,r),this.moveLine(m,h,m,c,x,c,x,y,d,y,d,m),this.closePath(),o[Shape.handle]=[[d,m],[n,0],[t,m],[0,y]],o[Shape.textbox]=[x,y,v,E],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},CircularArrow:function(e,t,a,o){var i=e[0],r=e[1],s=e[2],n=e[3],d=e[4];i=.25-i;var p=(s+r)%6.2831846;if(s>=r);else 6.2831846-(r-s);var l=(s+r)%6.2831846,h=(l+3.1415923)%6.2831846,c=zoho.math.maxLimit(t,a),f=.5*t,u=.5*a;if(d<i/2)var m=.5*t,g=.5*a;else var m=.5*t-c*d+c*i/2,g=.5*a-c*d+c*i/2;var S=this.getEllipseCoordinates(n,s,m,g,f,u),x=S[0],v=S[1],y=S[2],E=S[3],C=this.isLargeArc(n,s);this.addFiller(x,v),this.addEllipseCurve(m,g,x,v,y,E,!1,C);var O,b;d<i/2?(O=.5*t-2*c*d,b=.5*a-2*c*d):(O=.5*t-c*d-c*i/2,b=.5*a-c*d-c*i/2);var T=(se=this.getEllipseCoordinates(n,s,O,b,f,u))[0],w=se[1],D=se[2],P=se[3];m=.5*t-c*d,g=.5*a-c*d;var L=this.getEllipseCoordinates(n,p,m,g,f,u),I=L[2],A=L[3],N=this.getEllipseCoordinates(n,s,m,g,f,u),R=N[2],B=N[3];m=d*c,g=d*c;var _=this.getEllipseCoordinates(h,l,m,g,R,B),M=_[0],U=_[1],k=_[2],G=_[3];m=i*c/2,g=i*c/2;var F=this.getEllipseCoordinates(h,l,m,g,R,B),W=F[0],H=F[1],V=F[2],j=F[3];if(d<i/2)var m=.5*t,g=.5*a;else var m=.5*t-c*d+c*i/2,g=.5*a-c*d+c*i/2;C=!1;d>=i/2&&(this.addEllipseCurve(m,g,y,E,V,j,!1,C),this.addLine(k,G)),this.addLine(I,A),d<i/2&&this.addLine(M,U),d>=i/2&&(this.addLine(M,U),this.addLine(W,H),this.addLine(D,P));C=this.isLargeArc(n,s);this.addEllipseCurve(O,b,D,P,T,w,!0,C),this.closePath(),o[Shape.handle]=[[V,j],[I,A],[x,v],[M,U]];var z=zoho.math.toRadians(360),X=s-n,$=X+z,Y=zoho.math.ifElse(X,X,$),K=Y-(z-n),Z=x>D?x:D,J=y>T?y:T,Q=Z>J?Z:J,q=zoho.math.ifElse(K,t,Q),ee=zoho.math.toRadians(90)-n,te=zoho.math.toRadians(450)-n,ae=Y-zoho.math.ifElse(ee,ee,te),oe=v>P?v:P,ie=E>w?E:w,re=oe>ie?oe:ie,se=zoho.math.ifElse(ae,a,re),ne=zoho.math.toRadians(180)-n,de=zoho.math.toRadians(540)-n,pe=Y-zoho.math.ifElse(ne,ne,de),le=x<D?x:D,he=y<T?y:T,ce=le<he?le:he,fe=zoho.math.ifElse(pe,0,ce),ue=zoho.math.toRadians(270)-n,me=zoho.math.toRadians(630)-n,ge=Y-zoho.math.ifElse(ue,ue,me),Se=v<P?v:P,xe=E<w?E:w,ve=Se<xe?Se:xe,ye=zoho.math.ifElse(ge,0,ve),I=.5*(x+T),A=.5*(v+w),R=.5*(y+D),B=.5*(E+P),Ee=zoho.math.toDegrees(n)-90,Ce=zoho.math.toDegrees(s)+90,Oe=.5*(Ee+Ce);o[Shape.textbox]=[fe,ye,q,se],o[Shape.connector]=[[I,A,Ee],[R,B,Ce],[f,u,Oe]]},Plus:function(e,t,a,o){var i=.5*t,r=.5*a,s=e[0],n=.7349*t*.5,d=.7349*a*.5,p=this.getCoordinates(s,t,a,.7349),l=i-(p*=.5),h=i+p,c=r-p,f=r+p,u=i-n,m=i+n,g=r-d,S=r+d;this.move(l,g),this.addLine(h,g),this.moveLine(h,c,m,c,m,f,h,f,h,S,l,S,l,f,u,f,u,c,l,c),this.closePath(),o[Shape.handle]=[[0,c]],o[Shape.textbox]=[u,c,m,f],o[Shape.connector]=[[m,r,0],[i,S,90],[u,r,180],[i,g,270]]},Minus:function(e,t,a,o){var i=.5*a,r=.5*t,s=e[0]*a,n=.36745*t,d=r-n,p=r+n,l=i-(s*=.5),h=i+s;this.move(d,l),this.addLine(p,l),this.moveLine(p,h,d,h),this.closePath(),o[Shape.handle]=[[0,l]],o[Shape.textbox]=[d,l,p,h],o[Shape.connector]=[[p,i,0],[r,h,90],[d,i,180],[r,l,270]]},Multiply:function(e,t,a,o){var i=.5*t,r=.5*a,s=this.getCoordinates(e[0],t,a,.51965),n=Math.atan2(a,t),d=Math.sin(n),p=Math.cos(n),l=Math.tan(n),h=Math.sqrt(Math.pow(t,2)+Math.pow(a,2)),c=h-.51965*h,f=p*(c/2),u=d*(c/2),m=d*(s/2),g=p*(s/2),S=f-m,x=u+g,v=f+m,y=u-g,E=(i-v)*l+y,C=t-v,O=t-S,b=(r-x)/l,T=O-b,w=S+b,D=a-x,P=a-y,L=a-E;this.move(S,x),this.addLine(v,y),this.moveLine(i,E,C,y,O,x,T,r,O,D,C,P,i,L,v,P,S,D,w,r),this.closePath(),o[Shape.handle]=[[0,s]];var I=.5*(O+C),A=.5*(D+P),N=.5*(v+S),R=.5*(x+y);o[Shape.textbox]=[S,y,O,P],o[Shape.connector]=[[N,R,180],[I,R,270],[I,A,0],[N,A,90]]},Divide:function(e,t,a,o){var i=this.modifier.Divide.call(this,e,t,a),r=i[0]*a*.5,s=i[1]*a,n=i[2]*a,d=.36745*t,p=.5*t,l=.5*a,h=l-r,c=l+r,f=h-(i=s+n),u=f-n,m=a-u,g=p-d,S=p+d,x=p-n;this.move(p-n,u),this.addEllipse(n,n,p,u),this.closePath(),this.move(p-n,m),this.addEllipse(n,n,p,m),this.closePath(),this.move(g,h),this.addLine(S,h),this.moveLine(S,c,g,c),this.closePath(),o[Shape.handle]=[[0,h],[t,f],[x,0]],o[Shape.connector]=[[S,l,0],[p,m,90],[g,l,180],[p,u,270]],o[Shape.textbox]=[g,h,S,c]},Equal:function(e,t,a,o){var i=.5*t,r=.5*a,s=this.modifier.Equal.call(this,e,t,a),n=s[0],d=s[1],p=.36745*t,l=i-p,h=i+p,c=r-d,f=r+d,u=c-n,m=f+n;this.move(l,u),this.addLine(h,u),this.moveLine(h,c,l,c),this.closePath(),this.move(l,f),this.addLine(h,f),this.moveLine(h,m,l,m),this.closePath(),o[Shape.handle]=[[0,u],[t,c]];var g=.5*(u+c),S=.5*(f+m);o[Shape.textbox]=[l,u,h,m],o[Shape.connector]=[[h,g,0],[h,S,0],[i,m,90],[l,g,180],[l,S,180],[i,u,270]]},NotEqual:function(e,t,a,o){var i=.5*t,r=.5*a,s=this.modifier.NotEqual.call(this,e,t,a),n=s[0],d=s[1],p=.36745*t,l=i-p,h=i+p,c=r-d,f=r+d,u=c-n,m=f+n,g=e[1],S=g-zoho.math.toRadians(90),x=r*Math.tan(S),v=Math.sqrt(Math.pow(x,2)+Math.pow(r,2)),y=r?v*n/r:0,E=i+x-.5*y,C=E-(r?x*u/r:0),O=E-(r?x*c/r:0),b=E-(r?x*f/r:0),T=E-(r?x*m/r:0),w=E+y,D=C+y,P=O+y,L=b+y,I=T+y,A=v?n*r/v:0,N=E+A,R=w-A,B=S>0?N:w,_=S>0?E:R,M=v?n*x/v:0,U=0-M,k=S>0?M:0,G=S>0?0:U,F=t-B,W=t-_,H=a-k,V=a-G;this.move(l,u),this.addLine(C,u),this.moveLine(_,G,B,k,D,u,h,u,h,c,P,c,L,f,h,f,h,m,I,m,W,V,F,H,T,m,l,m,l,f,b,f,O,c,l,c),this.closePath();var j=i+(90-zoho.math.toDegrees(g))/80*D;o[Shape.handle]=[[0,u],[j,a],[t,c]];var z=.5*(f+m),X=.5*(u+c),$=.5*(_+B),Y=.5*(G+k),K=.5*(W+F),Z=.5*(V+H);o[Shape.textbox]=[l,u,h,m],o[Shape.connector]=[[h,z,0],[h,X,0],[K,Z,90],[l,z,180],[l,X,180],[$,Y,270]]},Process:function(e,t,a,o){this.Rect(e,t,a,o)},AlternateProcess:function(e,t,a,o){this.RoundRect([1/6],t,a,{});var i=.293*this.getCoordinates(1/6,t,a),r=t-i,s=a-i;o[Shape.textbox]=[i,i,r,s],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},Decision:function(e,t,a,o){this.Diamond(e,t,a,o)},Data:function(e,t,a,o){var i=.2*t,r=.8*t;this.move(i,0),this.addLine(t,0),this.moveLine(r,a,0,a),this.closePath();var s=.9*t,n=.4*t,d=.1*t,p=.6*t,l=.5*a,h=.5*t;o[Shape.textbox]=[i,0,r,a],o[Shape.connector]=[[h,0,270],[p,0,270],[d,l,180],[n,a,90],[h,a,90],[s,l,0]]},PredefinedProcess:function(e,t,a,o){this.Rect(e,t,a),this.closePath();var i=1/8*t,r=t-i;this.move(i,0),this.addLine(i,a),this.move(r,0),this.addLine(r,a),this.closePath(),o[Shape.textbox]=[i,0,r,a],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},InternalStorage:function(e,t,a,o){this.Rect(e,t,a),this.closePath();var i=1/8*t,r=1/8*a;this.move(i,0),this.addLine(i,a),this.move(0,r),this.addLine(t,r),this.closePath(),o[Shape.textbox]=[i,r,t,a],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},FlowchartDocument:function(e,t,a,o){var i=.5*t,r=.802*a;this.move(0,0),this.addLine(t,0),this.moveLine(t,r),this.addCubicCurve(i,r,i,1.1075*a,0,.934*a),this.closePath();var s=.933*a,n=.5*a;o[Shape.textbox]=[0,0,t,r],o[Shape.connector]=[[i,0,270],[0,n,180],[i,s,90],[t,n,0]]},MultiDocument:function(e,t,a,o){var i=9298/21600*t,r=18595/21600*t,s=1532/21600*t,n=2e4/21600*t,d=19298/21600*t,p=2972/21600*t,l=20800/21600*t,h=20782/21600*a,c=23542/21600*a,f=18022/21600*a,u=3675/21600*a,m=1815/21600*a,g=16252/21600*a,S=16352/21600*a,x=14392/21600*a,v=14467/21600*a;this.move(0,h),this.addCubicCurve(i,c,i,f,r,f),this.addLine(r,u),this.moveLine(0,u),this.closePath(),this.move(s,u),this.addLine(s,m),this.moveLine(n,m,n,g),this.addCubicCurve(d,g,r,S,r,S),this.addLine(r,u),this.closePath(),this.move(p,m),this.addLine(p,0),this.moveLine(t,0,t,x),this.addCubicCurve(l,x,n,v,n,v),this.addLine(n,m),this.closePath(),this.createNewPath(),this.move(0,h),this.addCubicCurve(i,c,i,f,r,f),this.addLine(r,u),this.moveLine(0,u),this.closePath(),this.move(s,u),this.addLine(s,m),this.moveLine(n,m,n,g),this.addCubicCurve(d,g,r,S,r,S),this.move(p,m),this.addLine(p,0),this.moveLine(t,0,t,x),this.addCubicCurve(l,x,n,v,n,v);var y=12286/21600*a,E=.5*a;o[Shape.textbox]=[0,u,r,h],o[Shape.connector]=[[y,0,270],[0,E,180],[i,h,90],[t,E,0]]},Terminator:function(e,t,a,o){var i=3475/21600*t,r=18125/21600*t,s=.5*a;this.move(i,0),this.addLine(r,0),this.addYEllipseCurve(i,s,0,a,r),this.addLine(i,a),this.addYEllipseCurve(i,s,a,0,i),this.closePath();var n=1018/21600*t,d=20582/21600*t,p=3163/21600*a,l=18437/21600*a;o[Shape.textbox]=[n,p,d,l],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},Preparation:function(e,t,a,o){var i=.2*t,r=t-i,s=.5*a;this.move(i,0),this.addLine(r,0),this.moveLine(t,s,r,a,i,a,0,s),this.closePath(),o[Shape.textbox]=[i,0,r,a],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},ManualInput:function(e,t,a,o){var i=.2*a;this.move(0,i),this.addLine(t,0),this.moveLine(t,a,0,a),this.closePath();var r=.1*a,s=.5*t,n=.5*a;o[Shape.textbox]=[0,i,t,a],o[Shape.connector]=[[s,r,270],[0,n,180],[s,a,90],[t,n,0]]},ManualOperation:function(e,t,a,o){var i=.2*t,r=t-i;this.move(0,0),this.addLine(i,a),this.moveLine(r,a,t,0),this.closePath();var s=.1*t,n=.9*t,d=.5*a,p=.5*t;o[Shape.textbox]=[i,0,r,a],o[Shape.connector]=[[p,0,270],[s,d,180],[p,a,90],[n,d,0]]},FlowchartConnector:function(e,t,a,o){this.Oval(e,t,a,o)},OffpageConnector:function(e,t,a,o){var i=.8*a,r=.5*t;this.move(0,0),this.addLine(0,i),this.moveLine(r,a,t,i,t,0),this.closePath(),o[Shape.textbox]=[0,0,t,i],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},PunchedCard:function(e,t,a,o){var i=.2*t,r=.2*a;this.move(i,0),this.addLine(0,r),this.moveLine(0,a,t,a,t,0),this.closePath(),o[Shape.textbox]=[0,r,t,a],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},PunchedTape:function(e,t,a,o){var i=.1*a,r=a-i,s=.5*t,n=.5*a,d=.25*t;this.move(0,i),this.addXEllipseCurve(d,i,0,s,i,!0),this.addXEllipseCurve(d,i,s,t,i),this.addLine(t,r),this.addXEllipseCurve(d,i,t,s,r,!0),this.addXEllipseCurve(d,i,s,0,r),this.closePath();var p=.2*a,l=a-p;o[Shape.textbox]=[0,p,t,l],o[Shape.connector]=[[s,i,270],[0,n,180],[s,r,90],[t,n,0]]},SummingJunction:function(e,t,a,o){this.Oval(e,t,a,o);var i=.5*t,r=.5*a,s=zoho.math.toRadians(225),n=zoho.math.toRadians(45),d=this.getEllipseCoordinates(s,n,i,r);this.move(d[0],d[1]),this.addLine(d[2],d[3]),this.move(d[2],d[1]),this.addLine(d[0],d[3])},Or:function(e,t,a,o){this.Oval(e,t,a,o);var i=.5*t,r=.5*a;this.move(i,0),this.addLine(i,a),this.move(0,r),this.addLine(t,r)},Collate:function(e,t,a,o){this.move(0,0),this.addLine(t,0),this.moveLine(0,a,t,a),this.closePath();var i=.75*t,r=.75*a,s=.25*t,n=.25*a,d=.5*t,p=.5*a;o[Shape.textbox]=[s,n,i,r],o[Shape.connector]=[[d,0,270],[d,p,270],[d,a,90]]},Sort:function(e,t,a,o){this.Diamond(e,t,a),this.closePath();var i=.5*a;this.move(0,i),this.addLine(t,i);var r=.75*t,s=.75*a,n=.25*t,d=.25*a;o[Shape.textbox]=[n,d,r,s],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},Extract:function(e,t,a,o){this.IsoscelesTriangle([[.5]],t,a,{});var i=.25*t,r=.75*t,s=.5*a,n=.5*t;o[Shape.textbox]=[i,s,r,a],o[Shape.connector]=[[n,0,270],[i,s,180],[n,a,90],[r,s,0]]},Merge:function(e,t,a,o){var i=.5*t;this.move(0,0),this.addLine(i,a),this.moveLine(t,0),this.closePath();var r=.25*t,s=.75*t,n=.5*a;o[Shape.textbox]=[r,0,s,n],o[Shape.connector]=[[i,0,270],[r,n,180],[i,a,90],[s,n,0]]},StoredData:function(e,t,a,o){var i=1/6*t,r=.5*a;this.move(i,0),this.addYEllipseCurve(i,r,0,a,i,!0),this.addLine(t,a),this.addYEllipseCurve(i,r,a,0,t),this.closePath();var s=t-i,n=.5*t,d=.5*a;o[Shape.textbox]=[i,0,s,a],o[Shape.connector]=[[n,0,270],[0,d,180],[n,a,90],[s,d,0]]},Delay:function(e,t,a,o){var i=.5*t,r=.5*a;this.move(0,0),this.addLine(i,0),this.addYEllipseCurve(i,r,0,a,i),this.addLine(0,a),this.closePath();var s=zoho.math.toRadians(225),n=zoho.math.toRadians(45),d=this.getEllipseCoordinates(s,n,i,r);o[Shape.textbox]=[0,d[1],d[2],d[3]],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},SequentialAccessStorage:function(e,t,a,o){var i=.5*t,r=.5*a,s=this.getEllipseCoordinates(zoho.math.toRadians(45),void 0,i,r);this.move(i,a),this.addEllipseCurve(i,r,i,a,s[0],s[1],!1,!0),this.addLine(t,s[1]),this.moveLine(t,a),this.closePath(),this.setTextBox(ShapeConstants.PresetShapeGeometry.OVAL,i,r,o),this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},MagneticDisk:function(e,t,a,o){var i=1/6*a,r=a-i,s=.5*t;this.move(0,i),this.addXEllipseCurve(s,i,0,t,i),this.addXEllipseCurve(s,i,t,0,i),this.closePath(),this.addLine(0,r),this.addXEllipseCurve(s,i,0,t,r,!0),this.addLine(t,i),this.addXEllipseCurve(s,i,t,0,i),this.closePath();var n=1/3*a,d=5/6*a,p=.5*t;o[Shape.textbox]=[0,n,t,d],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o),o[Shape.connector].push([p,n,270])},DirectAccessStorage:function(e,t,a,o){var i=5/6*t,r=t-i,s=.5*a;this.move(i,0),this.addYEllipseCurve(r,s,0,a,i),this.addYEllipseCurve(r,s,a,0,i),this.closePath(),this.addLine(r,0),this.addYEllipseCurve(r,s,0,a,r,!0),this.addLine(i,a),this.addYEllipseCurve(r,s,a,0,i),this.closePath();var n=2/3*t,d=.5*a;o[Shape.textbox]=[r,0,n,a],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o),o[Shape.connector].push([n,d,270])},Display:function(e,t,a,o){var i=1/6*t,r=t-i,s=.5*a;this.move(0,s),this.addLine(i,0),this.moveLine(r,0),this.addYEllipseCurve(i,s,0,a,r),this.addLine(i,a),this.closePath(),o[Shape.textbox]=[i,0,r,a],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},Explosion1:function(e,t,a,o){var i=.5*t,r=t/21600,s=a/21600,n=4627*r,d=6320*s,p=16702*r,l=13937*s,h=13290*s,c=8485*r,f=8615*s,u=14522*r;this.move(i,5800*s),this.addLine(u,0),this.moveLine(14155*r,5325*s,18380*r,4457*s,p,7315*s,21097*r,8137*s),this.moveLine(17607*r,10475*s,t,h,16837*r,12942*s,18145*r,18095*s),this.moveLine(14020*r,14457*s,13247*r,19737*s,10532*r,14935*s),this.moveLine(c,a,7715*r,15627*s,4762*r,17617*s,5667*r,l),this.moveLine(135*r,14587*s,3722*r,11775*s,0,f,n,7617*s),this.moveLine(370*r,2295*s,7312*r,d,8352*r,2295*s),this.closePath(),o[Shape.textbox]=[n,d,p,l],o[Shape.connector]=[[u,0,270],[0,f,180],[c,a,90],[t,h,0]]},Explosion2:function(e,t,a,o){var i=t/21600,r=a/21600,s=5372*i,n=6382*r,d=14640*i,p=15935*r,l=9722*i,h=1887*r,c=12877*r,f=11612*i,u=18842*r,m=6645*r;this.move(11462*i,4342*r),this.addLine(14790*i,0),this.moveLine(14525*i,5777*r,18007*i,3172*r,16380*i,6532*r,t,m,16985*i,9402*r),this.moveLine(18270*i,11290*r,16380*i,12310*r,18877*i,15632*r,d,14350*r,14942*i,17370*r),this.moveLine(12180*i,p,f,u,9872*i,17370*r,8700*i,19712*r,7527*i,18125*r),this.moveLine(4917*i,a,4805*i,18240*r,1285*i,17825*r,3330*i,15370*r,0,c,3935*i,11592*r),this.moveLine(1172*i,8270*r,s,7817*r,4502*i,3625*r,8550*i,n,l,h),this.closePath(),o[Shape.textbox]=[s,n,d,p],o[Shape.connector]=[[l,h,270],[0,c,180],[f,u,90],[t,m,0]]},FourPointStar:function(e,t,a,o){var i=e[0],r=.5*t,s=.5*a,n=t*i,d=a*i,p=zoho.math.toRadians(45),l=n*Math.cos(p),h=d*Math.sin(p),c=r-l,f=r+l,u=s-h,m=s+h;this.move(0,s),this.addLine(c,u),this.moveLine(r,0,f,u,t,s,f,m,r,a,c,m),this.closePath();var g=s-d;o[Shape.handle]=[[r,g]],o[Shape.textbox]=[c,u,f,m],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},FivePointStar:function(e,t,a,o){var i=.5*t,r=.5*a,s=e[0],n=1.05146*i,d=zoho.math.toRadians(18),p=zoho.math.toRadians(306),l=n*Math.cos(d),h=n*Math.cos(p),c=i-l,f=i-h,u=i+h,m=i+l,g=r-r*Math.sin(d),S=r-r*Math.sin(p),x=n*s*2,v=r*s*2,y=zoho.math.toRadians(342),E=zoho.math.toRadians(54),C=x*Math.cos(y),O=x*Math.cos(E),b=i-C,T=i-O,w=i+O,D=i+C,P=r-v*Math.sin(E),L=r-v*Math.sin(y),I=r+v,A=r-v;this.move(c,g),this.addLine(T,P),this.moveLine(i,0,w,P,m,g,D,L,u,S,i,I,f,S,b,L),this.closePath(),o[Shape.handle]=[[i,A]],o.cornerRadius=[[i,0]],o[Shape.textbox]=[b,P,D,I],o[Shape.connector]=[[i,0,270],[c,g,180],[f,S,90],[u,S,90],[m,g,0]]},SixPointStar:function(e,t,a,o){var i=e[0],r=.5*t,s=.5*a,n=zoho.math.toRadians(30),d=r*Math.cos(n),p=r-d,l=r+d,h=.25*a,c=s+h,f=t*i,u=a*i,m=.5*f,g=r-f,S=r-m,x=r+m,v=r+f,y=zoho.math.toRadians(60),E=u*Math.sin(y),C=s-E,O=s+E,b=s-u;this.move(p,h),this.addLine(S,C),this.moveLine(r,0,x,C,l,h,v,s,l,c,x,O,r,a,S,O,p,c,g,s),this.closePath(),o[Shape.handle]=[[r,b]],o[Shape.textbox]=[g,C,v,O],o[Shape.connector]=[[l,h,0],[l,c,0],[r,a,90],[p,c,180],[p,h,180],[r,0,270]]},SevenPointStar:function(e,t,a,o){var i=e[0],r=.5*t,s=.5*a,n=.97493*r,d=.78183*r,p=.43388*r,l=r-n,h=r-d,c=r-p,f=r+p,u=r+d,m=r+n,g=s-.62349*s,S=s+.22252*s,x=s+.90097*s,v=t*i,y=a*i,E=.97493*v,C=.78183*v,O=.43388*v,b=r-E,T=r-C,w=r-O,D=r+O,P=r+C,L=r+E,I=s-.90097*y,A=s-.22252*y,N=s+.62349*y,R=s+y,B=s-y;this.move(l,S),this.addLine(b,A),this.moveLine(h,g,w,I,r,0,D,I,u,g,L,A,m,S,P,N,f,x),this.moveLine(r,R,c,x,T,N),this.closePath(),o[Shape.handle]=[[r,B]],o[Shape.textbox]=[T,I,P,N],o[Shape.connector]=[[u,g,0],[m,S,0],[f,x,90],[c,x,90],[l,S,180],[h,g,180],[r,0,270]]},EightPointStar:function(e,t,a,o){var i=e[0],r=.5*t,s=.5*a,n=zoho.math.toRadians(45),d=r*Math.cos(n),p=r-d,l=r+d,h=s*Math.sin(n),c=s-h,f=s+h,u=t*i,m=a*i,g=.92388*u,S=.38268*u,x=.92388*m,v=.38268*m,y=r-g,E=r-S,C=r+S,O=r+g,b=s-x,T=s-v,w=s+v,D=s+x,P=s-m;this.move(0,s),this.addLine(y,T),this.moveLine(p,c,E,b,r,0),this.moveLine(C,b,l,c,O,T,t,s),this.moveLine(O,w,l,f,C,D,r,a),this.moveLine(E,D,p,f,y,w),this.closePath(),o[Shape.handle]=[[r,P]],o[Shape.textbox]=[y,b,O,D],o[Shape.connector]=[[t,s,0],[l,f,90],[r,a,90],[p,f,90],[0,s,180],[p,c,270],[r,0,270],[l,c,270]]},TenPointStar:function(e,t,a,o){var i=e[0],r=.5*t,s=.5*a,n=.95106*r,d=.58779*r,p=r-n,l=r-d,h=r+d,c=r+n,f=.80902*s,u=.30902*s,m=s-f,g=s-u,S=s+u,x=s+f,v=t*i,y=a*i,E=.80902*v,C=.30902*v,O=.95106*y,b=.58779*y,T=r-v,w=r-E,D=r-C,P=r+C,L=r+E,I=r+v,A=s-O,N=s-b,R=s+b,B=s+O,_=s-y;this.move(p,g),this.addLine(w,N),this.moveLine(l,m,D,A,r,0,P,A,h,m,L,N,c,g,I,s),this.moveLine(c,S,L,R,h,x,P,B,r,a,D,B,l,x,w,R,p,S,T,s),this.closePath(),o[Shape.handle]=[[r,_]],o[Shape.textbox]=[w,N,L,R],o[Shape.connector]=[[c,g,0],[c,S,0],[h,x,90],[r,a,90],[l,x,90],[p,S,180],[p,g,180],[l,m,270],[r,0,270],[h,m,270]]},TwelvePointStar:function(e,t,a,o){var i=e[0],r=.5*t,s=.5*a,n=zoho.math.toRadians(30),d=zoho.math.toRadians(60),p=r*Math.cos(n),l=s*Math.sin(d),h=r-p,c=.75*t,f=r+p,u=s-l,m=.75*a,g=s+l,S=t*i,x=a*i,v=zoho.math.toRadians(15),y=zoho.math.toRadians(45),E=zoho.math.toRadians(75),C=S*Math.cos(v),O=S*Math.cos(y),b=S*Math.cos(E),T=x*Math.sin(E),w=x*Math.sin(y),D=x*Math.sin(v),P=r-C,L=r-O,I=r-b,A=r+b,N=r+O,R=r+C,B=s-T,_=s-w,M=s-D,U=s+D,k=s+w,G=s+T,F=s-x,W=.25*a,H=.25*t;this.move(0,s),this.addLine(P,M),this.moveLine(h,W,L,_,H,u,I,B,r,0,A,B,c,u,N,_,f,W,R,M,t,s),this.moveLine(R,U,f,m,N,k,c,g,A,G,r,a,I,G,H,g,L,k,h,m,P,U),this.closePath(),o[Shape.handle]=[[r,F]],o[Shape.textbox]=[L,_,N,k],o[Shape.connector]=[[f,W,0],[t,s,0],[f,m,0],[c,g,90],[r,a,90],[H,g,90],[h,m,180],[0,s,180],[h,W,180],[H,u,270],[r,0,270],[c,u,270]]},SixteenPointStar:function(e,t,a,o){var i=e[0],r=.5*t,s=.5*a,n=.92388*r,d=.70711*r,p=.38268*r,l=.92388*s,h=.70711*s,c=.38268*s,f=r-n,u=r-d,m=r-p,g=r+p,S=r+d,x=r+n,v=s-l,y=s-h,E=s-c,C=s+c,O=s+h,b=s+l,T=t*i,w=a*i,D=.98079*T,P=.83147*T,L=.55557*T,I=.19509*T,A=.98079*w,N=.83147*w,R=.55557*w,B=.19509*w,_=r-D,M=r-P,U=r-L,k=r-I,G=r+I,F=r+L,W=r+P,H=r+D,V=s-A,j=s-N,z=s-R,X=s-B,$=s+B,Y=s+R,K=s+N,Z=s+A,J=s-w;this.move(0,s),this.addLine(_,X),this.moveLine(f,E,M,z,u,y,U,j,m,v,k,V,r,0),this.moveLine(G,V,g,v,F,j,S,y,W,z,x,E,H,X,t,s),this.moveLine(H,$,x,C,W,Y,S,O,F,K,g,b,G,Z,r,a),this.moveLine(k,Z,m,b,U,K,u,O,M,Y,f,C,_,$),this.closePath(),o[Shape.handle]=[[r,J]];var Q=zoho.math.toRadians(45),q=T*Math.cos(Q),ee=w*Math.sin(Q),te=r-q,ae=s-ee,oe=r+q,ie=s+ee;o[Shape.textbox]=[te,ae,oe,ie],o[Shape.connector]=[[S,y,0],[x,E,0],[t,s,0],[x,C,0],[S,O,0],[g,b,90],[r,a,90],[m,b,90],[u,O,180],[f,C,180],[0,s,180],[f,E,180],[u,y,180],[m,v,270],[r,0,270],[g,v,270]]},TwentyFourPointStar:function(e,t,a,o){var i=e[0],r=.5*t,s=.5*a,n=zoho.math.toRadians(15),d=zoho.math.toRadians(30),p=zoho.math.toRadians(45),l=zoho.math.toRadians(75),h=zoho.math.toRadians(60),c=r*Math.cos(n),f=r*Math.cos(d),u=r*Math.cos(p),m=.25*t,g=r*Math.cos(l),S=s*Math.sin(l),x=s*Math.sin(h),v=s*Math.sin(p),y=.25*a,E=s*Math.sin(n),C=r-c,O=r-f,b=r-u,T=r-m,w=r-g,D=r+g,P=r+m,L=r+u,I=r+f,A=r+c,N=s-S,R=s-x,B=s-v,_=s-y,M=s-E,U=s+E,k=s+y,G=s+v,F=s+x,W=s+S,H=t*i,V=a*i,j=.99144*H,z=.92388*H,X=.79335*H,$=.60876*H,Y=.38268*H,K=.13053*H,Z=.99144*V,J=.92388*V,Q=.79335*V,q=.60876*V,ee=.38268*V,te=.13053*V,ae=r-j,oe=r-z,ie=r-X,re=r-$,se=r-Y,ne=r-K,de=r+K,pe=r+Y,le=r+$,he=r+X,ce=r+z,fe=r+j,ue=s-Z,me=s-J,ge=s-Q,Se=s-q,xe=s-ee,ve=s-te,ye=s+te,Ee=s+ee,Ce=s+q,Oe=s+Q,be=s+J,Te=s+Z,we=s-V;this.move(0,s),this.addLine(ae,ve),this.moveLine(C,M,oe,xe,O,_,ie,Se,b,B,re,ge,T,R,se,me,w,N,ne,ue,r,0),this.moveLine(de,ue,D,N,pe,me,P,R,le,ge,L,B,he,Se,I,_,ce,xe,A,M,fe,ve,t,s),this.moveLine(fe,ye,A,U,ce,Ee,I,k,he,Ce,L,G,le,Oe,P,F,pe,be,D,W,de,Te,r,a),this.moveLine(ne,Te,w,W,se,be,T,F,re,Oe,b,G,ie,Ce,O,k,oe,Ee,C,U,ae,ye),this.closePath(),o[Shape.handle]=[[r,we]];var De=zoho.math.toRadians(45),Pe=H*Math.cos(De),Le=V*Math.sin(De),Ie=r-Pe,Ae=s-Le,Ne=r+Pe,Re=s+Le;o[Shape.textbox]=[Ie,Ae,Ne,Re],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},ThirtyTwoPointStar:function(e,t,a,o){var i=e[0],r=.5*t,s=.5*a,n=zoho.math.toRadians(45),d=.98079*r,p=.92388*r,l=.83147*r,h=r*Math.cos(n),c=.55557*r,f=.38268*r,u=.19509*r,m=.98079*s,g=.92388*s,S=.83147*s,x=s*Math.sin(n),v=.55557*s,y=.38268*s,E=.19509*s,C=r-d,O=r-p,b=r-l,T=r-h,w=r-c,D=r-f,P=r-u,L=r+u,I=r+f,A=r+c,N=r+h,R=r+l,B=r+p,_=r+d,M=s-m,U=s-g,k=s-S,G=s-x,F=s-v,W=s-y,H=s-E,V=s+E,j=s+y,z=s+v,X=s+x,$=s+S,Y=s+g,K=s+m,Z=t*i,J=a*i,Q=.99518*Z,q=.95694*Z,ee=.88192*Z,te=.77301*Z,ae=.63439*Z,oe=.4714*Z,ie=.29028*Z,re=.09802*Z,se=.99518*J,ne=.95694*J,de=.88192*J,pe=.77301*J,le=.63439*J,he=.4714*J,ce=.29028*J,fe=.09802*J,ue=r-Q,me=r-q,ge=r-ee,Se=r-te,xe=r-ae,ve=r-oe,ye=r-ie,Ee=r-re,Ce=r+re,Oe=r+ie,be=r+oe,Te=r+ae,we=r+te,De=r+ee,Pe=r+q,Le=r+Q,Ie=s-se,Ae=s-ne,Ne=s-de,Re=s-pe,Be=s-le,_e=s-he,Me=s-ce,Ue=s-fe,ke=s+fe,Ge=s+ce,Fe=s+he,We=s+le,He=s+pe,Ve=s+de,je=s+ne,ze=s+se,Xe=s-J;this.move(0,s),this.addLine(ue,Ue),this.moveLine(C,H,me,Me,O,W,ge,_e,b,F,Se,Be,T,G,xe,Re,w,k),this.moveLine(ve,Ne,D,U,ye,Ae,P,M,Ee,Ie,r,0,Ce,Ie,L,M,Oe,Ae),this.moveLine(I,U,be,Ne,A,k,Te,Re,N,G,we,Be,R,F,De,_e,B,W,Pe,Me),this.moveLine(_,H,Le,Ue,t,s,Le,ke,_,V,Pe,Ge,B,j,De,Fe,R,z,we,We),this.moveLine(N,X,Te,He,A,$,be,Ve,I,Y,Oe,je,L,K,Ce,ze,r,a),this.moveLine(Ee,ze,P,K,ye,je,D,Y,ve,Ve,w,$,xe,He,T,X,Se,We,b,z),this.moveLine(ge,Fe,O,j,me,Ge,C,V,ue,ke),this.closePath(),o[Shape.handle]=[[r,Xe]];var $e=zoho.math.toRadians(45),Ye=Z*Math.cos($e),Ke=J*Math.sin($e),Ze=r-Ye,Je=s-Ke,Qe=r+Ye,qe=s+Ke;o[Shape.textbox]=[Ze,Je,Qe,qe],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},UpRibbon:function(e,t,a,o){var i=e[0],r=.5*t,s=t*(1/8),n=t-s,d=t*(.5*e[1]),p=r-d,l=r+d,h=t*(1/32),c=p+h,f=l-h,u=p+s,m=l-s,g=u-h,S=m+h,x=a*i,v=a-.5*x,y=a-x,E=x,C=.5*(E+a),O=.25*x,b=a-O,T=v-O;this.move(0,a),this.addLine(g,a),this.addYEllipseCurve(h,O,a,v,g,!0),this.addLine(c,v),this.addYEllipseCurve(h,O,v,y,c),this.addLine(f,y),this.addYEllipseCurve(h,O,y,v,f),this.addLine(S,v),this.addYEllipseCurve(h,O,v,a,S,!0),this.addLine(t,a),this.moveLine(n,C,t,E,l,E,l,O),this.addXCurve(l,O,l-h,0,!0),this.addLine(c,0),this.addYCurve(c,0,c-h,O,!0),this.addLine(p,E),this.moveLine(0,E,s,C),this.createNewPath(),this.move(u,b),this.addXCurve(u,b,u-h,v,!0),this.addLine(c,v),this.addYEllipseCurve(h,O,v,y,c),this.addLine(u,y),this.move(m,b),this.addYCurve(m,b,m+h,v),this.addLine(f,v),this.addYEllipseCurve(h,O,v,y,f,!0),this.addLine(m,y),this.createNewPath(),this.move(0,a),this.addLine(g,a),this.addYEllipseCurve(h,O,a,v,g,!0),this.addLine(c,v),this.addYEllipseCurve(h,O,v,y,c),this.addLine(f,y),this.addYEllipseCurve(h,O,y,v,f),this.addLine(S,v),this.addYEllipseCurve(h,O,v,a,S,!0),this.addLine(t,a),this.moveLine(n,C,t,E,l,E,l,O),this.addXCurve(l,O,l-h,0,!0),this.addLine(c,0),this.addYCurve(c,0,c-h,O,!0),this.addLine(p,E),this.moveLine(0,E,s,C),this.closePath(),this.move(u,b),this.addLine(u,y),this.move(m,b),this.addLine(m,y),this.move(p,T),this.addLine(p,E),this.move(l,E),this.addLine(l,T),o[Shape.handle]=[[r,y],[p,a]],o[Shape.textbox]=[p,0,l,y],o[Shape.connector]=[[r,0,270],[s,C,180],[r,y,90],[n,C,0]]},DownRibbon:function(e,t,a,o){var i=e[0],r=.5*t,s=t*(1/8),n=t-s,d=t*(.5*e[1]),p=r-d,l=r+d,h=t*(1/32),c=p+h,f=l-h,u=p+s,m=l-s,g=u-h,S=m+h,x=a*i,v=.5*x,y=a-x,E=.5*y,C=.25*x,O=a-C,b=x-C;this.move(0,0),this.addLine(g,0),this.addYEllipseCurve(h,C,0,v,g),this.addLine(c,v),this.addYEllipseCurve(h,C,v,x,c,!0),this.addLine(f,x),this.addYEllipseCurve(h,C,x,v,f,!0),this.addLine(S,v),this.addYEllipseCurve(h,C,v,0,S),this.addLine(t,0),this.moveLine(n,E,t,y,l,y,l,O),this.addYCurve(l,O,l-h,a),this.addLine(c,a),this.addXCurve(c,a,c-h,O),this.addLine(p,y),this.moveLine(0,y,s,E),this.createNewPath(),this.move(u,C),this.addYCurve(u,C,u-h,v),this.addLine(c,v),this.addYEllipseCurve(h,C,v,x,c,!0),this.addLine(u,x),this.move(m,C),this.addXCurve(m,C,m+h,v,!0),this.addLine(f,v),this.addYEllipseCurve(h,C,v,x,f),this.addLine(m,x),this.createNewPath(),this.move(0,0),this.addLine(g,0),this.addYEllipseCurve(h,C,0,v,g),this.addLine(c,v),this.addYEllipseCurve(h,C,v,x,c,!0),this.addLine(f,x),this.addYEllipseCurve(h,C,x,v,f,!0),this.addLine(S,v),this.addYEllipseCurve(h,C,v,0,S),this.addLine(t,0),this.moveLine(n,E,t,y,l,y,l,O),this.addYCurve(l,O,l-h,a),this.addLine(c,a),this.addXCurve(c,a,c-h,O),this.addLine(p,y),this.moveLine(0,y,s,E),this.closePath(),this.move(u,C),this.addLine(u,x),this.move(m,C),this.addLine(m,x),this.move(p,y),this.addLine(p,b),this.move(l,b),this.addLine(l,y),o[Shape.handle]=[[r,x],[p,0]],o[Shape.textbox]=[p,x,l,a],o[Shape.connector]=[[r,x,270],[s,E,180],[r,a,90],[n,E,0]]},CurvedUpRibbon:function(e,t,a,o){var i=e[0]*a,r=e[1]*t*.5,s=e[2]*a,n=.5*t,d=t*(1/8),p=i-.5*(1-e[0])*a,l=p;p<0&&(l=0),s=zoho.math.limit(s,l,i),2==Shape.selectedHandle&&(e[2]=s/a);var h=n-r,c=h+d,f=t-c,u=t-h,m=t-d,g=t?4*s/t:0,S=g*(c-(t?c*c/t:0)),x=a-S,v=.5*c,y=a-g*v,E=t-v,C=i-s,O=g*(h-(t?h*h/t:0)),b=O+C,T=a-b,w=s+C-b+s+C,D=a-w,P=a-i,L=a-(s*(7/8)+P)/2,I=a-(O+P),A=a-(b+P),N=.5*h,R=a-(g*N+P),B=t-N,_=a-(w+P),M=S+C,U=a-M,k=a-(M?i*i/M:0);this.move(0,a);G=zoho.math.toCubicControlPoints(0,a,v,y,c,x);this.addCubicCurve(G[0],G[1],G[2],G[3],c,x),this.addLine(h,T),G=zoho.math.toCubicControlPoints(h,T,n,D,u,T),this.addCubicCurve(G[0],G[1],G[2],G[3],u,T),this.addLine(f,x),G=zoho.math.toCubicControlPoints(f,x,E,y,t,a),this.addCubicCurve(G[0],G[1],G[2],G[3],t,a),this.addLine(m,L),this.moveLine(t,i),G=zoho.math.toCubicControlPoints(t,i,B,R,u,I),this.addCubicCurve(G[0],G[1],G[2],G[3],u,I),this.addLine(u,A),G=zoho.math.toCubicControlPoints(u,A,n,_,h,A),this.addCubicCurve(G[0],G[1],G[2],G[3],h,A),this.addLine(h,I),G=zoho.math.toCubicControlPoints(h,I,N,R,0,i),this.addCubicCurve(G[0],G[1],G[2],G[3],0,i),this.addLine(d,L),this.createNewPath(),this.move(c,U),this.addLine(c,x),this.moveLine(h,T),G=zoho.math.toCubicControlPoints(h,T,n,D,u,T),this.addCubicCurve(G[0],G[1],G[2],G[3],u,T),this.addLine(f,x),this.moveLine(f,U),G=zoho.math.toCubicControlPoints(f,U,n,k,c,U),this.addCubicCurve(G[0],G[1],G[2],G[3],c,U),this.closePath(),this.createNewPath(),this.move(0,a);var G=zoho.math.toCubicControlPoints(0,a,v,y,c,x);this.addCubicCurve(G[0],G[1],G[2],G[3],c,x),this.addLine(h,T),G=zoho.math.toCubicControlPoints(h,T,n,D,u,T),this.addCubicCurve(G[0],G[1],G[2],G[3],u,T),this.addLine(f,x),G=zoho.math.toCubicControlPoints(f,x,E,y,t,a),this.addCubicCurve(G[0],G[1],G[2],G[3],t,a),this.addLine(m,L),this.moveLine(t,i),G=zoho.math.toCubicControlPoints(t,i,B,R,u,I),this.addCubicCurve(G[0],G[1],G[2],G[3],u,I),this.addLine(u,A),G=zoho.math.toCubicControlPoints(u,A,n,_,h,A),this.addCubicCurve(G[0],G[1],G[2],G[3],h,A),this.addLine(h,I),G=zoho.math.toCubicControlPoints(h,I,N,R,0,i),this.addCubicCurve(G[0],G[1],G[2],G[3],0,i),this.addLine(d,L),this.closePath(),this.move(c,U),this.addLine(c,x),this.move(f,x),this.addLine(f,U),this.move(h,T),this.addLine(h,I),this.move(u,I),this.addLine(u,T),o[Shape.handle]=[[n,P],[h,0],[0,s]],o[Shape.textbox]=[h,A,u,P],o[Shape.connector]=[[n,0,270],[d,L,180],[n,P,90],[m,L,0]]},CurvedDownRibbon:function(e,t,a,o){var i=e[0]*a,r=e[1]*t*.5,s=e[2]*a,n=.5*t,d=t*(1/8),p=i-.5*(1-e[0])*a,l=p;p<0&&(l=0),s=zoho.math.limit(s,l,i),2==Shape.selectedHandle&&(e[2]=s/a);var h=n-r,c=h+d,f=t-c,u=t-h,m=t-d,g=t?4*s/t:0,S=t?c*c/t:0,x=g*(c-S),v=.5*c,y=g*v,E=t-v,C=i-s,O=g*(h-(t?h*h/t:0)),b=O+C,T=s+C-b+s+C,w=a-i,D=(s*(7/8)+w)/2,P=O+w,L=b+w,I=.5*h,A=g*I+w,N=t-I,R=T+w,B=x+C,_=B?i*i/B:0,M=a-s;this.move(0,0);U=zoho.math.toCubicControlPoints(0,0,v,y,c,x);this.addCubicCurve(U[0],U[1],U[2],U[3],c,x),this.addLine(h,b),U=zoho.math.toCubicControlPoints(h,b,n,T,u,b),this.addCubicCurve(U[0],U[1],U[2],U[3],u,b),this.addLine(f,x),U=zoho.math.toCubicControlPoints(f,x,E,y,t,0),this.addCubicCurve(U[0],U[1],U[2],U[3],t,0),this.addLine(m,D),this.moveLine(t,w),U=zoho.math.toCubicControlPoints(t,w,N,A,u,P),this.addCubicCurve(U[0],U[1],U[2],U[3],u,P),this.addLine(u,L),U=zoho.math.toCubicControlPoints(u,L,n,R,h,L),this.addCubicCurve(U[0],U[1],U[2],U[3],h,L),this.addLine(h,P),U=zoho.math.toCubicControlPoints(h,P,I,A,0,w),this.addCubicCurve(U[0],U[1],U[2],U[3],0,w),this.addLine(d,D),this.createNewPath(),this.move(c,B),this.addLine(c,x),this.moveLine(h,b),U=zoho.math.toCubicControlPoints(h,b,n,T,u,b),this.addCubicCurve(U[0],U[1],U[2],U[3],u,b),this.addLine(f,x),this.moveLine(f,B),U=zoho.math.toCubicControlPoints(f,B,n,_,c,B),this.addCubicCurve(U[0],U[1],U[2],U[3],c,B),this.closePath(),this.createNewPath(),this.move(0,0);var U=zoho.math.toCubicControlPoints(0,0,v,y,c,x);this.addCubicCurve(U[0],U[1],U[2],U[3],c,x),this.addLine(h,b),U=zoho.math.toCubicControlPoints(h,b,n,T,u,b),this.addCubicCurve(U[0],U[1],U[2],U[3],u,b),this.addLine(f,x),U=zoho.math.toCubicControlPoints(f,x,E,y,t,0),this.addCubicCurve(U[0],U[1],U[2],U[3],t,0),this.addLine(m,D),this.moveLine(t,w),U=zoho.math.toCubicControlPoints(t,w,N,A,u,P),this.addCubicCurve(U[0],U[1],U[2],U[3],u,P),this.addLine(u,L),U=zoho.math.toCubicControlPoints(u,L,n,R,h,L),this.addCubicCurve(U[0],U[1],U[2],U[3],h,L),this.addLine(h,P),U=zoho.math.toCubicControlPoints(h,P,I,A,0,w),this.addCubicCurve(U[0],U[1],U[2],U[3],0,w),this.addLine(d,D),this.closePath(),this.move(c,B),this.addLine(c,x),this.move(f,x),this.addLine(f,B),this.move(h,b),this.addLine(h,P),this.move(u,P),this.addLine(u,b),o[Shape.handle]=[[n,i],[h,a],[0,M]],o[Shape.textbox]=[h,S,u,L],o[Shape.connector]=[[n,S,270],[d,D,180],[n,a,90],[m,D,0]]},VerticalScroll:function(e,t,a,o){var i=this.getCoordinates(e[0],t,a),r=.5*i,s=.25*i,n=i+r,d=i+i,p=t-i,l=t-r,h=p-r,c=a-i,f=a-r;this.move(r,a),this.addYCurve(r,a,i,a-r,!0),this.addLine(r,f),this.addYEllipseCurve(s,s,f,c,r,!0),this.addLine(i,c),this.moveLine(i,r),this.addYCurve(i,r,n,0),this.addLine(l,0),this.addYEllipseCurve(r,r,0,i,l),this.addLine(p,i),this.moveLine(p,f),this.addYCurve(p,f,h,a),this.closePath(),this.createNewPath(),this.move(d,r),this.addYCurve(d,r,d-r,i),this.addYEllipseCurve(s,s,i,r,d-r),this.closePath(),this.move(i,f),this.addEllipseCurve(r,r,i,f,i-r,f-r,!1,!0,0,f-r),this.addYEllipseCurve(s,s,f-r,f,i-r),this.closePath(),this.createNewPath(),this.move(i,c),this.addLine(i,r),this.addYCurve(i,r,n,0),this.addLine(l,0),this.addYEllipseCurve(r,r,0,i,l),this.addLine(p,i),this.moveLine(p,f),this.addYCurve(p,f,h,a),this.addLine(r,a),this.addYEllipseCurve(r,r,a,c,r),this.closePath(),this.move(n,0),this.addYEllipseCurve(r,r,0,i,n),this.addYEllipseCurve(s,s,i,r,n),this.addLine(d,r),this.move(p,i),this.addLine(n,i),this.move(r,c),this.addYEllipseCurve(s,s,c,c+r,r),this.addLine(i,f),this.move(r,a),this.addYCurve(r,a,i,a-r,!0),this.addLine(i,c),o[Shape.handle]=[[0,i]];var u=.5*t,m=.5*a;o[Shape.textbox]=[i,i,p,f],o[Shape.connector]=[[u,0,270],[i,m,0],[u,a,90],[p,m,180]]},HorizontalScroll:function(e,t,a,o){var i=this.getCoordinates(e[0],t,a),r=.5*i,s=.25*i,n=i+r,d=i+i,p=a-i,l=a-r,h=p-r,c=t-i,f=t-r;this.move(t,r),this.addYCurve(t,r,f,i),this.addLine(f,r),this.addXEllipseCurve(s,s,f,c,r),this.addLine(c,i),this.moveLine(r,i),this.addYCurve(r,i,0,n,!0),this.addLine(0,l),this.addXEllipseCurve(r,r,0,i,l,!0),this.addLine(i,p),this.moveLine(f,p),this.addYCurve(f,p,t,h,!0),this.closePath(),this.createNewPath(),this.move(r,d),this.addYCurve(r,d,i,d-r,!0),this.addXEllipseCurve(s,s,i,r,d-r,!0),this.closePath(),this.move(f,i),this.addEllipseCurve(r,r,f,i,f-r,r,!0,!0,f-r),this.addXEllipseCurve(s,s,f-r,f,r,!0),this.closePath(),this.createNewPath(),this.move(0,n),this.addYCurve(0,n,r,i),this.addLine(c,i),this.moveLine(c,r),this.addXEllipseCurve(r,r,c,t,r),this.addLine(t,h),this.addYCurve(t,h,f,h+r),this.addLine(i,p),this.moveLine(i,l),this.addXEllipseCurve(r,r,i,0,l),this.closePath(),this.move(c,i),this.addLine(f,i),this.addYCurve(f,i,t,r,!0),this.move(f,i),this.addLine(f,r),this.addXEllipseCurve(s,s,f,f-r,r),this.move(r,d),this.addLine(r,n),this.addXEllipseCurve(s,s,r,i,n),this.addXEllipseCurve(r,r,i,0,n),this.move(i,n),this.addLine(i,p),o[Shape.handle]=[[i,0]];var u=.5*t,m=.5*a;o[Shape.textbox]=[i,i,f,p],o[Shape.connector]=[[u,i,90],[0,m,180],[u,p,270],[t,m,0]]},Wave:function(e,t,a,o){var i=e[0]*a,r=10*i/3,s=i-r,n=i+r,d=a-i,p=d-r,l=d+r,h=.5*t,c=e[1]*t,f=2*c,u=Math.abs(c),m=zoho.math.ifElse(f,0,f),g=0-m,S=zoho.math.ifElse(f,f,0),x=t-S,v=(m+x)/3,y=g+v,E=.5*(y+x),C=S,O=t+m,b=C+v,T=.5*(b+O),w=t-u,D=h+c;this.move(g,i),this.addCubicCurve(y,s,E,n,x,i),this.addLine(O,d),this.addCubicCurve(T,l,b,p,C,d),this.closePath(),o[Shape.handle]=[[0,i],[D,a]];var P=h-c,L=g>C?g:C,I=x<O?x:O,A=2*i,N=a-A,R=.5*a;o[Shape.textbox]=[L,A,I,N],o[Shape.connector]=[[P,i,90],[u,R,180],[D,d,270],[w,R,0]]},DoubleWave:function(e,t,a,o){var i=a*e[0],r=i*(10/3),s=i-r,n=i+r,d=a-i,p=d-r,l=d+r,h=.5*t,c=e[1]*t,f=2*c,u=Math.abs(c),m=zoho.math.ifElse(f,0,f),g=0-m,S=zoho.math.ifElse(f,f,0),x=t-S,v=(m+x)/6,y=g+v,E=(m+x)/3,C=g+E,O=(g+x)/2,b=O+v,T=(b+x)/2,w=S,D=t+m,P=w+v,L=w+E,I=(w+D)/2,A=I+v,N=(A+D)/2,R=t-u,B=h+c;this.move(g,i),this.addCubicCurve(y,s,C,n,O,i),this.addCubicCurve(b,s,T,n,x,i),this.addLine(D,d),this.addCubicCurve(N,l,A,p,I,d),this.addCubicCurve(L,l,P,p,w,d),this.closePath(),o[Shape.handle]=[[0,i],[B,a]];var _=g>w?g:w,M=x<D?x:D,U=2*i,k=a-U,G=.5*a;o[Shape.textbox]=[_,U,M,k],o[Shape.connector]=[[I,i,90],[u,G,180],[O,d,270],[R,G,0]]},CloudCallout:function(e,t,a,o){this.Cloud(e,t,a,o);var i=.5*t,r=.5*a,s=t*e[0],n=a*e[1],d=i+s,p=r+n,l=zoho.math.cosTan(r,s,n),h=zoho.math.sinTan(i,s,n),c=i+zoho.math.cosTan(i,l,h)-d,f=r+zoho.math.sinTan(r,l,h)-p,u=Math.sqrt(Math.pow(c,2)+Math.pow(f,2)),m=1*(u-this.getCoordinates(6600/21600,t,a))/3,g=this.getCoordinates(1800/21600,t,a),S=m+g,x=(u?S*c/u:0)+d,v=(u?S*f/u:0)+p,y=this.getCoordinates(4800/21600,t,a)+2*m,E=(u?y*c/u:0)+d,C=(u?y*f/u:0)+p,O=this.getCoordinates(1200/21600,t,a),b=this.getCoordinates(600/21600,t,a),T=d+b,w=x+O,D=E+g;this.createNewPath(),this.move(T-b,p),this.addEllipse(b,b,T,p),this.endClosePath(),this.move(w-O,v),this.addEllipse(O,O,w,v),this.endClosePath(),this.move(D-g,C),this.addEllipse(g,g,D,C),this.endClosePath(),o[Shape.handle]=[[T,p]],o.croppath=[0,2]},computeCallout:function(e,t,a,o,i,r){this.Rect(e,t,a,o);var s=t*e[1],n=a*e[0],d=t*e[3],p=a*e[2],l=[[s,n],[d,p]];if(this.createNewPath(),this.move(s,n),this.addLine(d,p),2==i||3==i){var h=t*e[5],c=a*e[4];this.moveLine(h,c),l.push([h,c])}if(3==i){var f=t*e[7],u=a*e[6];this.moveLine(f,u),l.push([f,u])}r&&(this.move(s,0),this.addLine(s,a)),o[Shape.handle]=l},Callout1:function(e,t,a,o){this.computeCallout(e,t,a,o,1)},Callout2:function(e,t,a,o){this.computeCallout(e,t,a,o,2)},Callout3:function(e,t,a,o){this.computeCallout(e,t,a,o,3)},AccentCallout1:function(e,t,a,o){this.computeCallout(e,t,a,o,1,!0)},AccentCallout2:function(e,t,a,o){this.computeCallout(e,t,a,o,2,!0)},AccentCallout3:function(e,t,a,o){this.computeCallout(e,t,a,o,3,!0)},BorderCallout1:function(e,t,a,o){this.computeCallout(e,t,a,o,1)},BorderCallout2:function(e,t,a,o){this.computeCallout(e,t,a,o,2)},BorderCallout3:function(e,t,a,o){this.computeCallout(e,t,a,o,3)},AccentBorderCallout1:function(e,t,a,o){this.computeCallout(e,t,a,o,1,!0)},AccentBorderCallout2:function(e,t,a,o){this.computeCallout(e,t,a,o,2,!0)},AccentBorderCallout3:function(e,t,a,o){this.computeCallout(e,t,a,o,3,!0)},zeroCheck:function(t,a,o){var i=a,r=o;return a<1&&(e.each(t,function(e,o){var i=o;e%2==0&&(i*=a,t[e]=i)}),i=1),o<1&&(e.each(t,function(e,a){var i=a;e%2!=0&&(i*=o,t[e]=i)}),r=1),{width:i,height:r,modifiers:t}},ElbowConnector2:function(e,t,a,o){this.move(0,0),this.addLine(t,0),this.moveLine(t,a),o[Shape.IsAconnector]=!0},ElbowConnector3:function(t,a,o,i){var r=e.extend(!0,{},t),s=this.zeroCheck(r,a,o),n=s.width,d=(r=s.modifiers)[0]*n;this.move(0,0),this.addLine(d,0),this.moveLine(d,o,a,o);var p=.5*o;i[Shape.handle]=[[d,p]],i[Shape.IsAconnector]=!0},ElbowConnector4:function(t,a,o,i){var r=e.extend(!0,{},t),s=this.zeroCheck(r,a,o),n=s.width,d=s.height,p=(r=s.modifiers)[0]*n,l=r[1]*d;this.move(0,0),this.addLine(p,0),this.moveLine(p,l,a,l,a,o);var h=.5*l,c=.5*(p+a);i[Shape.handle]=[[p,h],[c,l]],i[Shape.IsAconnector]=!0},ElbowConnector5:function(t,a,o,i){var r=e.extend(!0,{},t),s=this.zeroCheck(r,a,o),n=s.width,d=s.height,p=(r=s.modifiers)[0]*n,l=r[1]*d,h=r[2]*n,c=.5*(p+h),f=.5*l,u=.5*(o+l);this.move(0,0),this.addLine(p,0),this.moveLine(p,l,h,l,h,o,a,o),i[Shape.handle]=[[p,f],[c,l],[h,u]],i[Shape.IsAconnector]=!0},CurvedConnector2:function(e,t,a,o){var i=.5*t,r=.5*a;this.move(0,0),this.addCubicCurve(i,0,t,r,t,a),o[Shape.IsAconnector]=!0},CurvedConnector3:function(t,a,o,i){var r=e.extend(!0,{},t),s=this.zeroCheck(r,a,o),n=s.width,d=(r=s.modifiers)[0]*n,p=.5*d,l=.5*(d+a),h=.5*o,c=.25*o,f=.75*o;this.move(0,0),this.addCubicCurve(p,0,d,c,d,h),this.moveCurve(d,f,l,o,a,o),i[Shape.handle]=[[d,h]],i[Shape.IsAconnector]=!0},CurvedConnector4:function(t,a,o,i){var r=e.extend(!0,{},t),s=this.zeroCheck(r,a,o),n=s.width,d=s.height,p=(r=s.modifiers)[0]*n,l=.5*p,h=.5*(a+p),c=.5*(p+h),f=.5*(h+a),u=r[1]*d,m=.5*u,g=.5*m,S=.5*(m+u),x=.5*(o+u);this.move(0,0),this.addCubicCurve(l,0,p,g,p,m),this.moveCurve(p,S,c,u,h,u,f,u,a,x,a,o),i[Shape.handle]=[[p,m],[h,u]],i[Shape.IsAconnector]=!0},CurvedConnector5:function(t,a,o,i){var r=e.extend(!0,{},t),s=this.zeroCheck(r,a,o),n=s.width,d=s.height,p=(r=s.modifiers)[0]*n,l=r[2]*n,h=.5*(p+l),c=.5*p,f=.5*(p+h),u=.5*(l+h),m=.5*(l+a),g=r[1]*d,S=.5*g,x=.5*S,v=.5*(S+g),y=.5*(o+g),E=.5*(y+g),C=.5*(y+o);this.move(0,0),this.addCubicCurve(c,0,p,x,p,S),this.moveCurve(p,v,f,g,h,g,u,g,l,E,l,y,l,C,m,o,a,o),i[Shape.handle]=[[p,S],[h,g],[l,y]],i[Shape.IsAconnector]=!0},SingleArrow:function(e,t,a,o){this.move(0,0),this.addLine(t,a),o[Shape.IsAconnector]=!0},DoubleArrow:function(e,t,a,o){this.move(0,0),this.addLine(t,a),o[Shape.IsAconnector]=!0},ElbowArrowConnector:function(e,t,a,o){this.ElbowConnector3(e,t,a,o)},ElbowDoubleArrowConnector:function(e,t,a,o){this.ElbowConnector3(e,t,a,o)},CurvedArrowConnector:function(e,t,a,o){this.CurvedConnector3(e,t,a,o)},CurvedDoubleArrowConnector:function(e,t,a,o){this.CurvedConnector3(e,t,a,o)},Grid:function(e,t,a,o){var i=.5*t,r=.5*a,s=t>a?t:a,n=e[0]*s,d=e[1],p=.002*s,l=n/d;this.DrawGridLine(i,a,n,p,l),this.DrawGridLine(r,t,n,p,l,!0,d)},DrawGridLine:function(t,a,o,i,r,s,n){var d=0,p=this;do{var l=t-d*o,h=t+d*o,c=l==h?[l]:[l,h];if(l<=0)break;e.each(c,function(t,o){var d=.5*a,l=-1;do{l++;var h=.5*i;internal=[d,a-d],e.each(internal,function(e,t){s?l%n!=0&&(p.move(t-h,o),p.addLine(t+h,o)):(p.move(o,t-h),p.addLine(o,t+h))}),d+=r}while(d<a)}),d++}while(l>0)},LockSymbol:function(e,t,a,o){this.SummingJunction(e,t,a,o)},CircleQuote:function(e,t,a,o){var i=.5*t,r=.5*a,s=.4*t,n=.4*a,d=zoho.math.maxLimit(t,a),p=this.getEllipseCoordinates(7*Math.PI/6,Math.PI/6,s,n,i,r),l=p[0],h=p[1],c=p[2],f=p[3],u=this.getEllipseCoordinates(23*Math.PI/18,Math.PI/12,s,n,i,r),m=this.getEllipseCoordinates(5*Math.PI/18,13*Math.PI/12,s,n,i,r);this.move(u[0],u[1]),this.addEllipseCurve(s,n,u[0],u[1],u[2],u[3],!1,!1),this.move(m[0],m[1]),this.addEllipseCurve(s,n,m[0],m[1],m[2],m[3],!1,!1),this.createNewPath(),this.move(l-.06*d,h),this.addEllipseCurve(.05*d,.05*d,l-.06*d,h,l-.01*d,h-.0375*d,!1,!1),this.addLine(l-.01*d,h-.01875*d),this.addEllipseCurve(.025*d,.025*d*1.5,l-.01*d,h-.01875*d,l-.0375*d,h,!0,!1),this.addLine(l-.01*d,h),this.moveLine(l-.01*d,h+.0375*d,l-.06*d,h+.0375*d),this.closePath(),this.move(l+.01*d,h),this.addEllipseCurve(.05*d,.05*d,l+.01*d,h,l+.06*d,h-.0375*d,!1,!1),this.addLine(l+.06*d,h-.01875*d),this.addEllipseCurve(.025*d,.025*d*1.5,l+.06*d,h-.01875*d,l+.0375*d,h,!0,!1),this.addLine(l+.06*d,h),this.moveLine(l+.06*d,h+.0375*d,l+.01*d,h+.0375*d),this.closePath(),this.move(c-.01*d,f),this.addEllipseCurve(.05*d,.05*d,c-.01*d,f,c-.06*d,f+.0375*d,!1,!1),this.addLine(c-.06*d,f+.01875*d),this.addEllipseCurve(.025*d,.025*d*1.5,c-.06*d,f+.01875*d,c-.035*d,f,!0,!1),this.addLine(c-.06*d,f),this.moveLine(c-.06*d,f-.0375*d,c-.01*d,f-.0375*d),this.closePath(),this.move(c+.06*d,f),this.addEllipseCurve(.05*d,.05*d,c+.06*d,f,c+.01*d,f+.0375*d,!1,!1),this.addLine(c+.01*d,f+.01875*d),this.addEllipseCurve(.025*d,.025*d*1.5,c+.01*d,f+.01875*d,c+.035*d,f,!0,!1),this.addLine(c+.01*d,f),this.moveLine(c+.01*d,f-.0375*d,c+.06*d,f-.0375*d),this.closePath(),this.createNewPath(),this.move(i-s,r),this.addEllipse(s,n,i,r),this.move(l-.12*d,h),this.addEllipseCurve(.1*d,.1*d,l-.12*d,h,l-.02*d,h-.075*d,!1,!1),this.addLine(l-.02*d,h-.0375*d),this.addEllipseCurve(.05*d,.05*d*1.5,l-.02*d,h-.0375*d,l-.07*d,h,!0,!1),this.addLine(l-.02*d,h),this.moveLine(l-.02*d,h+.075*d,l-.12*d,h+.075*d),this.closePath(),this.move(l+.02*d,h),this.addEllipseCurve(.1*d,.1*d,l+.02*d,h,l+.12*d,h-.075*d,!1,!1),this.addLine(l+.12*d,h-.0375*d),this.addEllipseCurve(.05*d,.05*d*1.5,l+.12*d,h-.0375*d,l+.07*d,h,!0,!1),this.addLine(l+.12*d,h),this.moveLine(l+.12*d,h+.075*d,l+.02*d,h+.075*d),this.closePath(),this.move(c-.02*d,f),this.addEllipseCurve(.1*d,.1*d,c-.02*d,f,c-.12*d,f+.075*d,!1,!1),this.addLine(c-.12*d,f+.0375*d),this.addEllipseCurve(.05*d,.05*d*1.5,c-.12*d,f+.0375*d,c-.07*d,f,!0,!1),this.addLine(c-.12*d,f),this.moveLine(c-.12*d,f-.075*d,c-.02*d,f-.075*d),this.closePath(),this.move(c+.12*d,f),this.addEllipseCurve(.1*d,.1*d,c+.12*d,f,c+.02*d,f+.075*d,!1,!1),this.addLine(c+.02*d,f+.0375*d),this.addEllipseCurve(.05*d,.05*d*1.5,c+.02*d,f+.0375*d,c+.07*d,f,!0,!1),this.addLine(c+.02*d,f),this.moveLine(c+.02*d,f-.075*d,c+.12*d,f-.075*d),this.closePath(),o&&(o[Shape.textbox]=[l+.12*d,h+.075*d,c-.12*d,f-.075*d],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o))},RectQuote:function(e,t,a,o){var i=this.getCoordinates(.16,t,a),r=t-i,s=a-i,n=zoho.math.maxLimit(t,a);midX=.12*n,this.move(midX-.12*n,.075*n),this.addEllipseCurve(.1*n,.1*n,midX-.12*n,.075*n,midX-.02*n,0,!1,!1),this.addLine(midX-.02*n,.0375*n),this.addEllipseCurve(.05*n,.05*n*1.5,midX-.02*n,.0375*n,midX-.07*n,.075*n,!0,!1),this.addLine(midX-.02*n,.075*n),this.moveLine(midX-.02*n,.15*n,midX-.12*n,.15*n),this.closePath(),this.move(midX+.02*n,.075*n),this.addEllipseCurve(.1*n,.1*n,midX+.02*n,.075*n,midX+.12*n,0,!1,!1),this.addLine(midX+.12*n,.0375*n),this.addEllipseCurve(.05*n,.05*n*1.5,midX+.12*n,.0375*n,midX+.07*n,.075*n,!0,!1),this.addLine(midX+.12*n,.075*n),this.moveLine(midX+.12*n,.15*n,midX+.02*n,.15*n),this.closePath(),midX=t-midX,this.move(midX-.02*n,a-.075*n),this.addEllipseCurve(.1*n,.1*n,midX-.02*n,a-.075*n,midX-.12*n,a,!1,!1),this.addLine(midX-.12*n,a-.0375*n),this.addEllipseCurve(.05*n,.05*n*1.5,midX-.12*n,a-.0375*n,midX-.07*n,a-.075*n,!0,!1),this.addLine(midX-.12*n,a-.075*n),this.moveLine(midX-.12*n,a-.15*n,midX-.02*n,a-.15*n),this.closePath(),this.move(midX+.12*n,a-.075*n),this.addEllipseCurve(.1*n,.1*n,midX+.12*n,a-.075*n,midX+.02*n,a,!1,!1),this.addLine(midX+.02*n,a-.0375*n),this.addEllipseCurve(.05*n,.05*n*1.5,midX+.02*n,a-.0375*n,midX+.07*n,a-.075*n,!0,!1),this.addLine(midX+.02*n,a-.075*n),this.moveLine(midX+.02*n,a-.15*n,midX+.12*n,a-.15*n),this.closePath(),this.createNewPath(),this.move(.4*n,0),this.addLine(r,0),this.addXCurve(r,0,t,i),this.addLine(t,a-.3*n),this.move(t-.4*n,a),this.addLine(i,a),this.addXCurve(i,a,0,s),this.addLine(0,.3*n),this.createNewPath(),this.move(i,0),this.addLine(r,0),this.addXCurve(r,0,t,i),this.addLine(t,s),this.addYCurve(t,s,r,a),this.addLine(i,a),this.addXCurve(i,a,0,s),this.addLine(0,i),this.addYCurve(0,i,i,0),o&&(o[Shape.textbox]=[.25*n,.16*n,t-.25*n,a-.15*n],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o))},BorderQuote:function(e,t,a,o){var i=1-e[0],r=zoho.math.maxLimit(t,a);midX=i*t,midX-.12*r<0&&(midX=.12*r),midX+.12*r>t&&(midX=t-.12*r),this.move(0,.17*r),midX-.14*r>0&&this.addLine(midX-.14*r,.17*r),this.move(t,.17*r),midX+.14*r<t&&this.addLine(midX+.14*r,.17*r),midX=t-midX,this.move(0,a-.17*r),midX-.14*r>0&&this.addLine(midX-.14*r,a-.17*r),this.move(t,a-.17*r),midX+.14*r<t&&this.addLine(midX+.14*r,a-.17*r),this.createNewPath(),midX=i*t,midX-.12*r<0&&(midX=.12*r),midX+.12*r>t&&(midX=t-.12*r),this.move(midX-.12*r,.15*r),this.addEllipseCurve(.1*r,.1*r,midX-.12*r,.15*r,midX-.02*r,.075*r,!1,!1),this.addLine(midX-.02*r,.075*r*1.5),this.addEllipseCurve(.05*r,.05*r*1.5,midX-.02*r,.075*r*1.5,midX-.07*r,.15*r,!0,!1),this.addLine(midX-.02*r,.15*r),this.moveLine(midX-.02*r,.225*r,midX-.12*r,.225*r),this.closePath(),this.move(midX+.02*r,.15*r),this.addEllipseCurve(.1*r,.1*r,midX+.02*r,.15*r,midX+.12*r,.075*r,!1,!1),this.addLine(midX+.12*r,.075*r*1.5),this.addEllipseCurve(.05*r,.05*r*1.5,midX+.12*r,.075*r*1.5,midX+.07*r,.15*r,!0,!1),this.addLine(midX+.12*r,.15*r),this.moveLine(midX+.12*r,.225*r,midX+.02*r,.225*r),this.closePath(),midX=t-midX,this.move(midX-.02*r,a-.15*r),this.addEllipseCurve(.1*r,.1*r,midX-.02*r,a-.15*r,midX-.12*r,a-.075*r,!1,!1),this.addLine(midX-.12*r,a-.075*r*1.5),this.addEllipseCurve(.05*r,.05*r*1.5,midX-.12*r,a-.075*r*1.5,midX-.07*r,a-.15*r,!0,!1),this.addLine(midX-.12*r,a-.15*r),this.moveLine(midX-.12*r,a-.225*r,midX-.02*r,a-.225*r),this.closePath(),this.move(midX+.12*r,a-.15*r),this.addEllipseCurve(.1*r,.1*r,midX+.12*r,a-.15*r,midX+.02*r,a-.075*r,!1,!1),this.addLine(midX+.02*r,a-.075*r*1.5),this.addEllipseCurve(.05*r,.05*r*1.5,midX+.02*r,a-.075*r*1.5,midX+.07*r,a-.15*r,!0,!1),this.addLine(midX+.02*r,a-.15*r),this.moveLine(midX+.02*r,a-.225*r,midX+.12*r,a-.225*r),this.closePath(),this.createNewPath(),this.move(0,.17*r),this.addLine(t,.17*r),this.moveLine(t,a-.17*r,0,a-.17*r,0,.17*r),this.closePath(),midX=i*t,midX-.12*r<0&&(midX=.12*r),midX+.12*r>t&&(midX=t-.12*r),this.move(0,.17*r),midX-.14*r>0&&this.addLine(midX-.14*r,.17*r),this.move(t,.17*r),midX+.14*r<t&&this.addLine(midX+.14*r,.17*r),midX=t-midX,this.move(0,a-.17*r),midX-.14*r>0&&this.addLine(midX-.14*r,a-.17*r),this.move(t,a-.17*r),midX+.14*r<t&&this.addLine(midX+.14*r,a-.17*r),midX=i*t,midX-.12*r<0&&(midX=.12*r),midX+.12*r>t&&(midX=t-.12*r),this.move(midX-.12*r,.15*r),this.addEllipseCurve(.1*r,.1*r,midX-.12*r,.15*r,midX-.02*r,.075*r,!1,!1),this.addLine(midX-.02*r,.075*r*1.5),this.addEllipseCurve(.05*r,.05*r*1.5,midX-.02*r,.075*r*1.5,midX-.07*r,.15*r,!0,!1),this.addLine(midX-.02*r,.15*r),this.moveLine(midX-.02*r,.225*r,midX-.12*r,.225*r),this.closePath(),this.move(midX+.02*r,.15*r),this.addEllipseCurve(.1*r,.1*r,midX+.02*r,.15*r,midX+.12*r,.075*r,!1,!1),this.addLine(midX+.12*r,.075*r*1.5),this.addEllipseCurve(.05*r,.05*r*1.5,midX+.12*r,.075*r*1.5,midX+.07*r,.15*r,!0,!1),this.addLine(midX+.12*r,.15*r),this.moveLine(midX+.12*r,.225*r,midX+.02*r,.225*r),this.closePath(),midX=t-midX,this.move(midX-.02*r,a-.15*r),this.addEllipseCurve(.1*r,.1*r,midX-.02*r,a-.15*r,midX-.12*r,a-.075*r,!1,!1),this.addLine(midX-.12*r,a-.075*r*1.5),this.addEllipseCurve(.05*r,.05*r*1.5,midX-.12*r,a-.075*r*1.5,midX-.07*r,a-.15*r,!0,!1),this.addLine(midX-.12*r,a-.15*r),this.moveLine(midX-.12*r,a-.225*r,midX-.02*r,a-.225*r),this.closePath(),this.move(midX+.12*r,a-.15*r),this.addEllipseCurve(.1*r,.1*r,midX+.12*r,a-.15*r,midX+.02*r,a-.075*r,!1,!1),this.addLine(midX+.02*r,a-.075*r*1.5),this.addEllipseCurve(.05*r,.05*r*1.5,midX+.02*r,a-.075*r*1.5,midX+.07*r,a-.15*r,!0,!1),this.addLine(midX+.02*r,a-.15*r),this.moveLine(midX+.02*r,a-.225*r,midX+.12*r,a-.225*r),this.closePath(),midX=t-midX,o[Shape.handle]=[[midX,0]],o&&(o[Shape.textbox]=[0,.225*r,t,a-.225*r],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o))},TwoEdgedFrame:function(e,t,a,o){var i=1-e[0],r=1-e[1];this.move(0,0),this.addLine(t,0),this.moveLine(t,a,0,a,0,0),this.closePath(),this.createNewPath(),this.move(0,0),this.addLine(i*t,0),this.move(0,0),this.addLine(0,r*a),this.move(t,a),this.addLine(t,a-r*a),this.move(t,a),this.addLine(t-i*t,a),this.createNewPath(),this.move(0,0),this.addLine(t,0),this.moveLine(t,a,0,a,0,0),this.closePath(),o[Shape.handle]=[[i*t,0],[t,(1-r)*a]],o[Shape.textbox]=[0,0,t,a],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},FourEdgedFrame:function(e,t,a,o){var i=.5-e[0],r=zoho.math.maxLimit(t,a);this.move(0,0),this.addLine(t,0),this.moveLine(t,a,0,a,0,0),this.closePath(),this.createNewPath(),this.move(i*r,0),this.addLine(0,0),this.moveLine(0,i*r),this.move(t-i*r,0),this.addLine(t,0),this.moveLine(t,i*r),this.move(t,a-i*r),this.addLine(t,a),this.moveLine(t-i*r,a),this.move(0,a-i*r),this.addLine(0,a),this.moveLine(i*r,a),this.createNewPath(),this.move(0,0),this.addLine(t,0),this.moveLine(t,a,0,a,0,0),this.closePath(),o[Shape.handle]=[[i*r,0]],o[Shape.textbox]=[0,0,t,a],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},TopBanner:function(e,t,a,o){var i=.8*a,r=.5*t,s=.2*t,n=.05*zoho.math.maxLimit(t,a);this.move(s,0),this.addLine(s,a),this.moveLine(r,i,t-s,a,t-s,0),this.closePath(),this.createNewPath(),this.move(0,n),this.addLine(t,n),this.createNewPath(),this.move(s,0),this.addLine(s,a),this.moveLine(r,i,t-s,a,t-s,0),this.closePath(),this.move(0,n),this.addLine(t,n),o[Shape.textbox]=[s,n,t-s,i],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},LeftBanner:function(e,t,a,o){var i=t-this.getCoordinates(.5,t,a,1,"x"),r=t-i,s=r+.1*zoho.math.maxLimit(t,a),n=.8*a;this.move(t,0),this.addLine(i,n/2),this.moveLine(t,n,0,n,0,0),this.closePath(),this.createNewPath(),this.move(0,n),this.addLine(r,n),this.moveLine(s,a),this.closePath(),this.createNewPath(),this.move(t,0),this.addLine(i,n/2),this.moveLine(t,n,0,n,0,0),this.closePath(),this.move(0,n),this.addLine(r,n),this.moveLine(s,a),this.closePath(),o[Shape.textbox]=[0,0,i,n],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},SquareOnCircleBoard:function(e,t,a,o){var i=this.getCoordinates(.1,t,a),r=this.getCoordinates(.5,t,a),s=t-i,n=.3*a,d=.7*a,p=.5*t,l=.5*a,h=Math.sqrt(r*r-(n-l)*(n-l))+p,c=2*p-h;this.move(c,n),this.addEllipseCurve(r,r,c,n,h,n,!1,!1),this.move(c,d),this.addEllipseCurve(r,r,c,d,h,d,!0,!1),this.createNewPath(),this.move(i,n),this.addLine(s,n),this.addXCurve(s,n,t,n+i),this.addLine(t,d-i),this.addYCurve(t,d-i,s,d),this.addLine(i,d),this.addXCurve(i,d,0,d-i),this.addLine(0,n+i),this.addYCurve(0,n+i,i,n),this.createNewPath(),this.move(c,n),this.addEllipseCurve(r,r,c,n,h,n,!1,!1),this.move(c,d),this.addEllipseCurve(r,r,c,d,h,d,!0,!1),this.move(i,n),this.addLine(s,n),this.addXCurve(s,n,t,n+i),this.addLine(t,d-i),this.addYCurve(t,d-i,s,d),this.addLine(i,d),this.addXCurve(i,d,0,d-i),this.addLine(0,n+i),this.addYCurve(0,n+i,i,n),o&&(o[Shape.textbox]=[0,n,t,d],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o))},RhombusOnBowBoard:function(e,t,a,o){var i=.5*t,r=.5*a,s=this.getCoordinates(.16,t,a),n=this.getCoordinates(.4,t,a),d=this.getEllipseCoordinates(5*Math.PI/4,7*Math.PI/4,s,s,i,r-(n-s)),p=d[0],l=d[1],h=d[2],c=d[3];this.addFiller(p,l),this.addEllipseCurve(s,s,p,l,h,c,!1,!1);var f=this.getEllipseCoordinates(7*Math.PI/4,Math.PI/4,s,s,i+(n-s),r);x3=f[0],y3=f[1];var u=(x3+h)/2,m=(y3+c)/2;x4=f[2],y4=f[3],this.addLine(x3,y3),this.addEllipseCurve(s,s,x3,y3,x4,y4,!1,!1);var g=this.getEllipseCoordinates(Math.PI/4,3*Math.PI/4,s,s,i,r+n-s);x5=g[0],y5=g[1];var S=(x5+x4)/2,x=(y5+y4)/2;x6=g[2],y6=g[3],this.addLine(x5,y5),this.addEllipseCurve(s,s,x5,y5,x6,y6,!1,!1);var v=this.getEllipseCoordinates(3*Math.PI/4,5*Math.PI/4,s,s,i-(n-s),r);x7=v[0],y7=v[1];var y=(x7+x6)/2,E=(y7+y6)/2;x8=v[2],y8=v[3],this.addLine(x7,y7),this.addEllipseCurve(s,s,x7,y7,x8,y8,!1,!1),this.closePath();var C=(p+x8)/2,O=(l+y8)/2;this.createNewPath(),this.move(u,m),this.addLine(t,m),t-s>i+n?this.moveLine(t-s,r):this.moveLine(i+n,r),this.moveLine(t,x,S,x),this.addLine(x4,y4),this.addEllipseCurve(s,s,x4,y4,x3,y3,!0,!1),this.closePath(),this.move(C,O),this.addLine(0,O),s<i-n?this.moveLine(s,r):this.moveLine(i-n,r),this.moveLine(0,E,y,E),this.addLine(x7,y7),this.addEllipseCurve(s,s,x7,y7,x8,y8,!1,!1),this.closePath(),this.createNewPath(),this.addFiller(p,l),this.addEllipseCurve(s,s,p,l,h,c,!1,!1),this.addLine(u,m),this.moveLine(t,m),t-s>i+n?this.moveLine(t-s,r):this.moveLine(i+n,r),this.moveLine(t,x,S,x,x5,y5),this.addEllipseCurve(s,s,x5,y5,x6,y6,!1,!1),this.addLine(y,E),this.moveLine(0,E),s<i-n?this.moveLine(s,r):this.moveLine(i-n,r),this.moveLine(0,O,C,O,p,l),o[Shape.textbox]=[C,O,S,x],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},TwinComet:function(e,t,a,o){var i=.5*a,r=zoho.math.maxLimit(t,a),s=.25-e[0],n=s*t+.05*r;r>50&&(r=50),this.move(0,i),this.addLine(s*t,i-.05*r),this.addEllipseCurve(.05*r,.05*r,s*t,i-.05*r,s*t,i+.05*r,!1,!0),this.addLine(0,i),this.move(t,i),this.addLine(t-s*t,i-.05*r),this.addEllipseCurve(.05*r,.05*r,t-s*t,i-.05*r,t-s*t,i+.05*r,!0,!0),this.addLine(t,i),o[Shape.handle]=[[s*t+.05*r,i]],o[Shape.textbox]=[n,0,t-n,a],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},DottedSign:function(e,t,a,o){var i=this.getCoordinates(.16,t,a),r=t-i,s=a-i,n=this.getCoordinates(.16,.6*t,.6*a);this.move(i,0),this.addLine(r,0),this.addXCurve(r,0,t,i),this.addLine(t,s),this.addYCurve(t,s,r,a),this.addLine(i,a),this.addXCurve(i,a,0,s),this.addLine(0,i),this.addYCurve(0,i,i,0),this.createNewPath(),this.move(i-n,i),this.addEllipseCurve(n,n,i-n,i,i,i-n,!1,!1),this.addLine(t-i,i-n),this.addEllipseCurve(n,n,t-i,i-n,t-i+n,i,!1,!1),this.addLine(t-i+n,a-i),this.addEllipseCurve(n,n,t-i+n,a-i,t-i,a-i+n,!1,!1),this.addLine(i,a-i+n),this.addEllipseCurve(n,n,i,a-i+n,i-n,a-i,!1,!1),this.closePath(),this.createNewPath(),this.move(i,0),this.addLine(r,0),this.addXCurve(r,0,t,i),this.addLine(t,s),this.addYCurve(t,s,r,a),this.addLine(i,a),this.addXCurve(i,a,0,s),this.addLine(0,i),this.addYCurve(0,i,i,0),o[Shape.textbox]=[i-n,i-n,t-i+n,a-i+n],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},ModRect:function(e,t,a,o){mMaxX=e[0]*t,mMaxY=a-e[1]*a,this.move(0,a),this.addLine(mMaxX,a),this.moveLine(mMaxX,mMaxY,0,mMaxY),this.closePath(),o&&(o[Shape.textbox]=[0,0,t,a],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o))},ModCan:function(e,t,a,o){var i=.5*(.25*t),r=a-i,s=a-i-e[0]*(a-2*i),n=.5*t;this.move(0,s),this.addLine(0,r),this.addXEllipseCurve(n,i,0,t,r,!0),this.addLine(t,s),this.addXEllipseCurve(n,i,t,0,s),this.createNewPath(),this.move(0,s),this.addXEllipseCurve(n,i,0,t,s),this.addXEllipseCurve(n,i,t,0,s),this.createNewPath(),this.move(0,s),this.addXEllipseCurve(n,i,0,t,s),this.addXEllipseCurve(n,i,t,0,s),this.addLine(0,r),this.addXEllipseCurve(n,i,0,t,r,!0),this.addLine(t,s),o[Shape.textbox]=[0,0,t,a],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},ModParallelogram:function(e,t,a,o){var i=e[0]*t*.5,r=t-i,s=.5*t-i;this.move(r,0),this.addLine(t,0),this.moveLine(.5*t,a,s,a),this.closePath(),o[Shape.textbox]=[0,0,t,a],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},Man:function(e,t,a,o){this.addPath(this.pathForSize(["M","73","19","C",73,24.6,69,30.1,64,30.1,"S",55,24.6,55,19,"S",59,8.9,64,8.9,"S","73","13.4","73","19","z","M","96.3","59.3","L","78","27","L",78,27,"L",78,27,"L",73.3,27,"C",71.1,30,67.7,32,64,32,"S",56.9,30,54.7,27,"L",50,27,"L",50,27,"L","31.8","59.3","C",30.6,61.8,31.7,64.8,34.2,65.89999999999999,"C",36.7,67.1,39.7,65.99999999999999,40.800000000000004,63.49999999999999,"L","49","49.4","L","48","73","L",80,73,"L",79,49.3,"L",87.2,63.5,"C",88.4,66,91.3,67.1,93.8,65.9,"C","96.4","64.8","97.4","61.8","96.3","59.3","z","M","57","119","L","57","119","C",59.8,119,62,116.8,62,114,"L",63,75,"L",51,75,"L",52,114,"C","52","116.8","54.2","119","57","119","z","M","71","119","L","71","119","C",73.8,119,76,116.8,76,114,"L",77,75,"L",65,75,"L",66,114,"C","66","116.8","68.2","119","71","119","z"],t,a,128,128)),o[Shape.textbox]=[0,0,t,a],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},Woman:function(e,t,a,o){this.addPath(this.pathForSize(["M","72","20.6","C",72,25.6,68.4,30.5,64,30.5,"S",56,25.6,56,20.6,"S",59.6,11.600000000000001,64,11.600000000000001,"S","72","15.6","72","20.6","z","M","94.8","53.9","L","76","27.1","L",76,27.1,"L",76,27,"L",72.3,27,"C",70.1,30,67.7,32,64,32,"S",57.9,30,55.7,27,"L",52,27,"L",52,27,"L","33.7","54.3","C",32.1,56.5,32.6,59.699999999999996,34.800000000000004,61.3,"C",37.00000000000001,62.9,40.2,62.4,41.800000000000004,60.199999999999996,"L","52","46.4","L",52,51,"L","40","80","L",88,80,"L","76","51","L",76,45.9,"L",86.8,59.9,"C",88.5,62.1,91.6,62.5,93.8,60.9,"C","96","59.2","96.4","56.1","94.8","53.9","z","M","57","116","L","57","116","C",59.8,116,62,113.8,62,111,"L",63,82,"L",51,82,"L",52,111,"C","52","113.8","54.2","116","57","116","z","M","71","116","L","71","116","C",73.8,116,76,113.8,76,111,"L",77,82,"L",65,82,"L",66,111,"C","66","113.8","68.2","116","71","116","z"],t,a,128,128)),o[Shape.textbox]=[0,0,t,a],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},MeterNeedle:function(e,t,a,o){var i=.5*a,r=.5*t,s=e[0],n=s-Math.PI/2,d=s+Math.PI/2,p=.5*t,l=.5*a,h=.05*p,c=.05*l,f=this.getEllipseCoordinates(s,void 0,p,l,r,i),u=this.getEllipseCoordinates(n,d,h,c,r,i);this.move(f[0],f[1]),this.addLine(u[2],u[3]),this.addEllipseCurve(h,c,u[2],u[3],u[0],u[1],!1),this.closePath(),o[Shape.textbox]=[0,0,t,a],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},ClockNeedle:function(t,a,o,i){modifiersInRadians=e.extend(!0,[],t);for(var r=0;r<modifiersInRadians.length;r++)modifiersInRadians[r]=zoho.math.toRadians(modifiersInRadians[r]);var s=midY=.5*o,n=midX=.5*a,d=modifiersInRadians[0],p=d-Math.PI/2,l=d+Math.PI/2,h=modifiersInRadians[1],c=h-Math.PI/2,f=h+Math.PI/2,u=modifiersInRadians[2],m=modifiersInRadians[0]+Math.PI,g=d-Math.PI/2,S=d+Math.PI/2,x=modifiersInRadians[1]+Math.PI,v=h-Math.PI/2,y=h+Math.PI/2,E=modifiersInRadians[2]+Math.PI,C=u-Math.PI/2,O=u+Math.PI/2,b=.9*n,T=.9*s,w=.5*n,D=.5*s,P=.006*n,L=.006*s,I=.2*n,A=.2*s,N=.95*n,R=.95*s,B=this.getEllipseCoordinates(d,void 0,b,T,midX,midY),_=this.getEllipseCoordinates(h,void 0,w,D,midX,midY),M=this.getEllipseCoordinates(u,void 0,N,R,midX,midY),U=this.getEllipseCoordinates(p,l,P,L,B[0],B[1]),k=this.getEllipseCoordinates(c,f,P,L,_[0],_[1]),G=this.getEllipseCoordinates(m,void 0,I,A,midX,midY),F=this.getEllipseCoordinates(x,void 0,I,A,midX,midY),W=this.getEllipseCoordinates(E,void 0,I,A,midX,midY),H=this.getEllipseCoordinates(g,S,P,L,G[0],G[1]),V=(this.getEllipseCoordinates(g,S,P,L,midX,midY),this.getEllipseCoordinates(v,y,P,L,F[0],F[1])),j=(this.getEllipseCoordinates(v,y,P,L,midX,midY),this.getEllipseCoordinates(C,O,P,L,W[0],W[1]));this.getEllipseCoordinates(C,O,P,L,midX,midY);this.move(U[0],U[1]),this.addLine(U[2],U[3]),this.moveLine(H[2],H[3],H[0],H[1]),this.closePath(),this.createNewPath(),this.move(k[0],k[1]),this.addLine(k[2],k[3]),this.moveLine(V[2],V[3],V[0],V[1]),this.closePath(),this.createNewPath(),this.move(M[0],M[1]),this.addLine(j[0],j[1]),this.moveLine(j[2],j[3]),this.closePath(),this.createNewPath(),this.move(U[0],U[1]),this.addLine(U[2],U[3]),this.moveLine(H[2],H[3],H[0],H[1]),this.closePath(),this.move(k[0],k[1]),this.addLine(k[2],k[3]),this.moveLine(V[2],V[3],V[0],V[1]),this.closePath(),this.move(M[0],M[1]),this.addLine(j[0],j[1]),this.moveLine(j[2],j[3]),this.closePath(),i[Shape.textbox]=[.7*a,.3*o,.8*a,.4*o],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,a,o,i)},TimerScale:function(e,t,a,o){if(e)for(var i=rx=.5*t,r=ry=.5*a,s=.9*rx,n=.9*ry,d=.8*rx,p=.8*ry,l=Math.floor(zoho.math.toDegrees(e[0])),h=Math.floor(zoho.math.toDegrees(e[1]));l<=h;){var c=zoho.math.toRadians(l),f=this.getEllipseCoordinates(c,void 0,rx,ry,i,r);if(l%30==0)u=this.getEllipseCoordinates(c,void 0,d,p,i,r);else var u=this.getEllipseCoordinates(c,void 0,s,n,i,r);this.move(f[0],f[1]),this.addLine(u[0],u[1]),l+=6}else for(l=0;l<=100;)l%10==0?(this.move(0,l/100*a),this.addLine(t,l/100*a)):(this.move(0,l/100*a),this.addLine(.75*t,l/100*a)),l+=5;o[Shape.textbox]=[0,0,t,a],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},HorizontalSlider:function(e,t,a,o){var i=t*e[1],r=a,s=t-i/2-i/2,n=midX=.5*i,d=midY=.5*r,p=e[0]*s;this.move(p,midY),this.addEllipse(n,d,p+midX,midY),o[Shape.textbox]=[p,0,p+i,a],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},VerticalSlider:function(e,t,a,o){var i=t,r=.1*a,s=a,n=(1-e[0])*s,d=.5*i,p=n,l=d,h=r/2,c=zoho.math.toRadians(45),f=l*Math.cos(c),u=h*Math.sin(c),m=d+f,g=p-u,S=d+f,x=p+u;this.move(S,x),this.addEllipseCurve(l,h,S,x,m,g,!1,!0);var v=zoho.math.toCubicControlPoints(m,g,m+f/2,g+u/2,m+f,g+u);this.addCubicCurve(v[0],v[1],v[2],v[3],m+f,g+u),v=zoho.math.toCubicControlPoints(m+f,g+u,m+f/2,x-u/2,S,x),this.addCubicCurve(v[0],v[1],v[2],v[3],S,x),this.closePath(),o[Shape.textbox]=[0,n-r/2,i,n+r/2],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},EllipseFiller:function(e,t,a,o){var i=.3*t,r=.03*a,s=a*(1-e[0]),n=.5*t,d=n,p=s-.5*r,l=n+i,h=s,c=n,f=s+.5*r;this.move(d,p),this.addLine(l,h),this.moveLine(c,f),this.closePath();var u=.3*t;o[Shape.textbox]=[0,p,u,f],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},CircleFiller:function(e,t,a,o){var i=e[0],r=Math.PI*(1-i)+(0==i?-1e-5:1==i?1e-5:0),s=Math.PI*(1+i)+(0==i?1e-5:1==i?-1e-5:0),n=.5*t,d=.5*a,p=this.getEllipseCoordinates(r,s,n,d),l=p[0],h=p[1],c=p[2],f=p[3];this.addFiller(l,h),this.move(l,h),this.addLine(l,h);var u=this.isLargeArc(r,s);this.addEllipseCurve(n,d,l,h,c,f,!1,u),this.closePath(),o[Shape.handle]=[[l,h],[c,f]],this.setConnectorAndTextBox(ShapeConstants.PresetShapeGeometry.OVAL,t,a,o)},ModRoundRect:function(e,t,a,o){var i=t,r=a,s=e[1]?e[1]:0,n=s+((e[2]?e[2]:1)-s)*e[0],d=5*(n>.1?.1:n),p=Math.PI*(1-d),l=Math.PI*(1+d),h=.1*i,c=.5*r,f=.1*i,u=.5*r,m=this.getEllipseCoordinates(p,l,h,c,f,u),g=m[0],S=m[1],x=m[2],v=m[3];if(this.move(g,S),this.addLine(g,S),this.addEllipseCurve(h,c,g,S,x,v,!1,!1),n>.1){var y=n>=.9?.9*i:n*i;this.addLine(y,0)}n>.9?(h=.1*i*(d=10*(n-.9)),c=.5*r,g=.9*i,S=0,x=.9*i,v=r,this.addEllipseCurve(h,c,g,S,x,v,!1,!0)):n>.1&&this.addLine(y,r),this.closePath(),o[Shape.textbox]=[0,0,t,a],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},VerticalMeter:function(e,t,a,o){for(var i=0;i<=100;)i%10==0?(this.move(0,i/100*a),this.addLine(t,i/100*a)):(this.move(0,i/100*a),this.addLine(.75*t,i/100*a)),i+=5;o[Shape.textbox]=[0,0,t,a],this.setConnector(ShapeConstants.PresetShapeGeometry.RECT,t,a,o)},pathForSize:function(e,t,a,o,i){for(var r=0;r<e.length;r++)if("M"==e[r])e[r+1]=e[r+1]*t/o,e[r+2]=e[r+2]*a/i,r+=2;else if("C"==e[r]){for(j=1;j<=6;j++)j%2==0?e[r+j]=e[r+j]*a/i:j%2!=0&&(e[r+j]=e[r+j]*t/o);r+=6}else if("S"==e[r]){for(j=1;j<=4;j++)j%2==0?e[r+j]=e[r+j]*a/i:j%2!=0&&(e[r+j]=e[r+j]*t/o);r+=4}else if("A"==e[r]){for(j=1;j<=6;j++)j%2==0?e[r+j]=e[r+j]*a/i:j%2!=0&&(e[r+j]=e[r+j]*t/o);r+=6}else"L"==e[r]&&(e[r+1]=e[r+1]*t/o,e[r+2]=e[r+2]*a/i,r+=2);return e},moveCurve:function(){var e=Array.prototype.slice.call(arguments);e.splice(0,0,"C"),this.addPath(e)},addFiller:function(e,t){this.addPath(this.pathutil.getFiller(e,t))},addXEllipseCurve:function(e,t,a,o,i,r,s){this.addPath(this.pathutil.getXEllipseCurve(e,t,a,o,i,r,s))},addYEllipseCurve:function(e,t,a,o,i,r,s,n,d){this.addPath(this.pathutil.getYEllipseCurve(e,t,a,o,i,r,s,n,d))},endPath:function(){this.addPath(this.pathutil.getEndPath())},endClosePath:function(){this.addPath(this.pathutil.getEndClosePath())},clearPathArray:function(){this.pathArray=[[]],this.pathNumber=0},getPathList:function(t){var a=t.trim().split(/(?=[LMCAz])/),o=new Array,i=this;return e.each(a,function(t,a){var r=a.trim(),s=i.getPathArray(r);if(e.isArray(s))return s.map(function(e){o.push(e)}),!0;var n=i.getPathArray(r.trim());o.push(n)}),{pathList:[{path:o}]}},getPathArray:function(e){var t=e.split(/ /),a=t[0],o=t.slice(1).map(function(e){return parseFloat(e)});return"M"==a?this.getMove(o):"L"==a?this.getAllLines(o):"C"==a?this.getCubicCurve(o):"A"==a?this.getArcCurve(o):"z"==a?this.getClosePath():void 0},getAllLines:function(e){for(var t=[],a=0;a<e.length;a+=2)t.push(this.getLine([e[a],e[a+1]]));return t},getMove:function(e){return{type:"M",m:{x:e[0],y:e[1]}}},getLine:function(e){return{type:"L",l:{x:e[0],y:e[1]}}},getCubicCurve:function(e){return{type:"CC",cc:[{x:e[0],y:e[1]},{x:e[2],y:e[3]},{x:e[4],y:e[5]}]}},getArcCurve:function(e){return{type:"A",a:[{x:e[0],y:e[1]},{antiClockwiseRotate:e[2],largeArc:e[3],sweepAngle:e[4]},{x:e[5],y:e[6]}]}},getClosePath:function(){return{type:"C",c:!0}}})}(jQuery);var VectorUtil;!function(e){VectorUtil={attr:function(e,t,a,o){var i=void 0===o?null:o;e.setAttributeNS(i,t,a)},getViewBoxDimensions:function(e,t){var a=e*Shape.viewboxConstant/Shape.boxConstant;return void 0===t?a:[a,t*Shape.viewboxConstant/Shape.boxConstant]},getHTMLDimension:function(e){return e*Shape.boxConstant/Shape.viewboxConstant},set:function(t,a,o,i){if(o)this.attr(t,a,o,i);else{var r=this;e.each(a,function(e,a){r.attr(t,e,a,i)})}},get:function(t,a,o){if("string"==typeof a)return this.getAttr(t,a,o);var i=this,r=[];return e.each(a,function(e,a){r[a]=i.getAttr(t,a,o)}),r},getAttr:function(e,t,a){var o=void 0===a?null:a;return e.getAttributeNS(o,t)},getPathList:function(t){var a,o=t.props.geom;return(a=o.type==ShapeConstants.ShapeGeometryType.PRESET?e.Preset[o.preset.type]?e.Preset[o.preset.type].pathList:void 0:o.custom.pathList)||(a=this.getDefaultPathList()),a=this.getSelectorPathList(t,a)},getSelectorPathList:function(t,a){if(!t.isStaticShape&&!t.noSelector)if(t.type!=ShapeConstants.ShapeNodeType.SHAPE&&t.type!=ShapeConstants.ShapeNodeType.CONNECTOR||!t.props.geom.preset){if(t.props.geom.custom){var o=a;a=e.extend(!0,[],a);i={fill:{fill:"NONE"},stroke:{type:"SELECTOR",fill:"SELECTOR"}};e.each(o,function(e,t){a.push(i)})}}else{var i={fill:{fill:"NONE"},stroke:{type:"SELECTOR",fill:"SELECTOR"}};(a=e.extend(!0,[],a))[a.length]=i}return a},getDefaultPathList:function(){return[{fill:"NORMAL",stroke:{type:"SOLID"}}]},positionShape:function(e,t,a,o){var i=.5*t[0],r=.5*t[1],s=0,n=0;1==o?(s=t[0],n=t[1]):2==o?s=t[0]:3==o&&(n=t[1]);var d=zoho.math.getRotatedValue(e,s,n,i,r),p=a.x+(s-d.x),l=a.y+(n-d.y);return 1==o?(p-=t[0],l-=t[1]):2==o?p-=t[0]:3==o&&(l-=t[1]),{left:p,top:l}},getMidPoints:function(e,t){var a=e.x,o=e.y;return{x:(a+t.x)/2,y:(o+t.y)/2}},capitalise:function(e){return e.substr(0,1).toUpperCase()+e.substr(1)},getMinAndMax:function(t){var a=t[0].x,o=t[0].x,i=t[0].y,r=t[0].y;return e.each(t,function(e,t){t.x>o&&(o=t.x),t.y>r&&(r=t.y),t.x<a&&(a=t.x),t.y<i&&(i=t.y)}),{small:{x:a,y:i},big:{x:o,y:r}}},supportsSvg:function(){return!!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Shape","1.0")||!!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")},supportsColumn:function(){var e=document.body.style;return void 0!==e.MozColumnCount||void 0!==e.WebkitColumnCount},getRGBString:function(e){var t;if(void 0!==e.colorModelRep&&e.colorModelRep===ShapeConstants.ColorModelRepresentation.HSB){var a=VectorUtil.convertHSBFloatToHSL(e.hsb);t=VectorUtil.convertHSLToString(a)}else t="string"!=typeof e.rgb?VectorUtil.convertRGBToString(e.rgb):e.rgb;return t},convertHSBFloatToRGB:function(e){var t=VectorUtil.convertHSBFloatToHSBObject(e);return zoho.color.HSVToRGB([t.hue,t.saturation,t.brightness])},convertHSBFloatToHSBObject:function(e){var t={};return t.hue=360*e.hue,t.saturation=100*e.saturation,t.brightness=100*e.brightness,t},convertHSBFloatToHSL:function(e){var t=VectorUtil,a=t.convertHSBFloatToRGB(e),o=zoho.color.toHSL(a);return t.convertHSLFloatToHSLPercentage(o)},convertHSLFloatToHSLPercentage:function(e){return[360*e[0],100*e[1],100*e[2]]},convertHSBToHSBFloat:function(e){return[e[0]/360,e[1]/100,e[2]/100]},convertHSLToString:function(e){return"hsl("+e[0]+","+e[1]+"%,"+e[2]+"%)"},convertRGBToString:function(e){return"rgb("+e[0]+","+e[1]+","+e[2]+")"},convertRGBStringToArray:function(e){var t=e.split("(");return t=t[1].split(")"),t=t[0].split(","),t[0]=parseInt(t[0]),t[1]=parseInt(t[1]),t[2]=parseInt(t[2]),t},convertRGBToHSBObject:function(e){var t=zoho.color.RGBToHSV(e),a=VectorUtil.convertHSBToHSBFloat(t);return{hue:a[0],saturation:a[1],brightness:a[2]}},isCalloutShape:function(e){var t=e.props.geom.type,a=[ShapeConstants.PresetShapeGeometry.CALLOUT,ShapeConstants.PresetShapeGeometry.RECTANGULAR_CALLOUT,ShapeConstants.PresetShapeGeometry.OVAL_CALLOUT,ShapeConstants.PresetShapeGeometry.ROUNDED_RECTANGULAR_CALLOUT,ShapeConstants.PresetShapeGeometry.CLOUD_CALLOUT],o=!1;if(t==ShapeConstants.ShapeGeometryType.PRESET){t=t.toLowerCase();for(var i=0;i<a.length;i++){var r=a[i];if(e.props.geom[t].type==r){o=!0;break}}}return o},getShapeDimension:function(t){var a=VectorUtil.getViewBoxDimensions(t.props.transform.dim.width,t.props.transform.dim.height);if(t.props.geom?VectorUtil.isCalloutShape(t):void 0){var o=e.extend(!0,[],t.props.geom.preset.modifiers);o[0]=o[0]*a[0]+.5*a[0],o[1]=o[1]*a[1]+.5*a[1],o[0]<0?a[0]+=-o[0]:o[0]>a[0]&&(a[0]=o[0]),o[1]<0?a[1]+=-o[1]:o[1]>a[1]&&(a[1]=o[1])}return a},setScale:function(t,a,o,i){var r=this;o=o||"0% 0%";var s=i||"scale("+a+")";e.each(e(t),function(t,i){e(i)[0]instanceof SVGElement?Shape.creator.set(i,{transform:"scale("+a+", "+a+")"}):r.transform(e(i),o,s)})},XOR:function(e,t){return(e||t)&&!(e&&t)},getImageURL:function(e){return 0===e.indexOf("blob")?e:(e=e.split("//"),e=e[1]?e[1]:e[0],e=e.split("/"),e=e[e.length-1])},loadImage:function(e,t){var a=new Image;a.onload=function(){t&&t()},a.onerror=function(){t&&t()},a.src=e},getImageDim:function(t,a,o){var i=VectorUtil,r=Math.uuid(),s=/(>|<)/;(void 0==t||t&&t.match(s))&&(t="");var n=e("<img id="+r+' style="display:none;">');e(n).attr("src",t),Shape.loadImageDiv.append(n),n.one("load",function(){var s,n=o&&o.getOnlyImageStatus;if(o&&(o.imageLoaded=!0),!n){var d=e(this);s={width:d.width(),height:d.height()},o&&o.box&&(o.box.data("origImageDim",s),s.origImageDim=!0),a&&(a(s,o,this),o&&void 0==o.retries&&o.box&&e(o.box).find("image").trigger("image_dim_updated_on_rendering",{url:t}))}setTimeout(function(){i.removeImageEle(r)},100)}).each(function(){if(this.complete){var t=e(this);setTimeout(function(){t.trigger("load")},10)}}).one("error",function(){a&&a({width:0,height:0},o,this)})},removeImageEle:function(t){e("#"+t,Shape.loadImageDiv).remove()},isWingDingsSupported:function(){var t=!1,a=e("<div style = 'position:absolute;left:-500px;top:-500px;z-index:10000;'></div>"),o=e("<span style = 'font-size:18px;font-family:Wingdings;'></span>");a.append(o);o.html("&#97;&#97;&#97;&#97;"),e(document.body).append(a);var i=a.width();return t=i>=78&&i<=82,a.remove(),t},isTextRotateSupported:function(){var t=e("<div style='position:absolute;left:-1000px;top:-100px'></div>");e(document.body).append(t);var a=this.transform(t,"50% 50%","rotate(45deg) scale(0.7) translate(0px,0px)");return t.remove(),a},rotateElement:function(e,t,a,o){if(e.length){if("object"==typeof o){var i=Shape.getAngle(o),r=o.dim,s=.5*r.width,n=.5*r.height;d=(p=s-t.left)+"px "+(l=n-t.top)+"px"}else var i=o||0,d=" 50% 50% ",p=.5*t.width,l=.5*t.height;var h=" rotate("+i+"deg) scale("+a+") translate("+p*(1-a)/a*-1+"px,"+l*(1-a)/a*-1+"px)";this.transform(e,d,h)}},transform:function(t,a,o){var i=!1,r=t[0];if(r){var s=r.style;return void 0!==s.MozTransform?(t.css({MozTransformOrigin:a,MozTransform:o}),i=!0):void 0!==s.WebkitTransform?(t.css({WebkitTransformOrigin:a,WebkitTransform:o}),i=!0):void 0!==s["-ms-transform"]?(e.each(t,function(e,t){t.style["-ms-transform-origin"]=a,t.style["-ms-transform"]=o}),i=!0):void 0!==s.transform&&(t.css({"transform-origin":a,transform:o}),i=!0),i}},selectAllText:function(e){if(document.body.createTextRange)(a=document.body.createTextRange()).moveToElementText(e[0]),a.select();else if(window.getSelection){var t=window.getSelection(),a=document.createRange();a.selectNodeContents(e[0]),t.removeAllRanges(),t.addRange(a)}},getAngle:function(e,t){var a=e.x*t.x+e.y+t.y,o=Math.sqrt(e.x*e.x+e.y*e.y)*Math.sqrt(t.x*t.x+t.y*t.y),i=Math.acos(a/o);return e.x*t.y-e.y*t.x<0&&(i=-i),zoho.math.toDegrees(i)},matrixMultiplication:function(e,t){var a=e[0],o=e[1],i=t[0],r=t[1];return{x:a[0]*i+a[1]*r,y:o[0]*i+o[1]*r}},getPathString:function(t){var a="";return e(t).each(function(t,o){var i=o.type.toLowerCase();"c"===i?1==o[i]&&(a+="z"):(a+="cc"==i?"C":"qc"==i?"Q":"ea"==i?"A":o.type,e(o[i]).each(function(e,t){a+=t.x+","+t.y+" "}))}),a},getRelativePath:function(t,a){var o,i;return e.each(t,function(t,r){e.each(r,function(t,r){"type"!==t&&(r.length?e.each(r,function(e,t){o=VectorUtil.matrix.set.translate(a,t.x,t.y)[0][2],i=VectorUtil.matrix.set.translate(a,t.x,t.y)[1][2],t.x=o,t.y=i}):r&&(o=VectorUtil.matrix.set.translate(a,r.x,r.y)[0][2],i=VectorUtil.matrix.set.translate(a,r.x,r.y)[1][2],r.x=o,r.y=i))})}),t},reSizePath:function(t,a,o,i,r){e.each(t,function(t,s){e.each(s,function(t,s){"type"!==t&&(s.length?e.each(s,function(e,t){t.x=t.x/a*i,t.y=t.y/o*r}):s&&(s.x=s.x/a*i,s.y=s.y/o*r))})})},matrix:{get:{translate:function(e){return[[1,0,e.x],[0,1,e.y],[0,0,1]]},scale:function(e){return[[e.sw,0,0],[0,e.sh,0],[0,0,1]]},rotate:function(e){var t=VectorUtil.matrix.get.rotateOrigin(e.cx,e.cy),a=VectorUtil.matrix.get.rotateAngle(e.angle),o=VectorUtil.matrix.get.rotateOriginInv(e.cx,e.cy),i=VectorUtil.matrix.multiply(t,a);return VectorUtil.matrix.multiply(i,o)},rotateAngle:function(e){var t=zoho.math.toRadians(e);return[[Math.cos(t),-Math.sin(t),0],[Math.sin(t),Math.cos(t),0],[0,0,1]]},rotateOrigin:function(e,t){return[[1,0,e],[0,1,t],[0,0,1]]},rotateOriginInv:function(e,t){return[[1,0,-e],[0,1,-t],[0,0,1]]},martixToArray:function(e){return[[e.a,e.b,e.d],[e.c,e.c,e.e],[0,0,1]]},matrixStr:function(e){if(e)return this._transMatrix=e,"matrix("+e[0][0].toFixed(4)+","+e[1][0].toFixed(4)+","+e[0][1].toFixed(4)+","+e[1][1].toFixed(4)+","+e[0][2].toFixed(4)+","+e[1][2].toFixed(4)+")"},initMatrix:function(){return[[1,0,0],[0,1,0],[0,0,1]]}},set:{translate:function(e,t,a){var o=VectorUtil.matrix.get.translate({x:t,y:a});return e=VectorUtil.matrix.multiply(e,o)},scale:function(e,t,a,o,i){null==a&&(a=t);var r=VectorUtil.matrix.get.translate({x:o,y:i}),s=VectorUtil.matrix.get.scale({sw:t,sh:a});s=VectorUtil.matrix.multiply(r,s);var n=VectorUtil.matrix.get.translate({x:-o,y:-i});return s=VectorUtil.matrix.multiply(s,n),e=VectorUtil.matrix.multiply(e,s)},rotate:function(e,t,a,o){var i=VectorUtil.matrix.get.rotate({angle:t,cx:a,cy:o});return e=VectorUtil.matrix.multiply(e,i)}},multiply:function(e,t){var a,o=e.length,i=e[0].length,r=t.length,s=t[r-1].length;if(i==r){a=[];for(var n=0;n<o;n++){a[n]=[];for(var d=0;d<s;d++){for(var p=0,l=0;l<i;l++)p+=e[n][l]*t[l][d];a[n][d]=p}}}return a}},distOfPointFromLine:function(e,t,a,o,i,r){return Math.abs((o-t)*i-(a-e)*r+a*t-o*e)/Math.sqrt(Math.pow(o-t,2)+Math.pow(a-e,2))},getURLObj:function(t){var a=ShapeConstants.ProtocolScheme.HTTPS,o=ShapeConstants.ProtocolScheme.HTTP,i=ShapeConstants.ProtocolScheme.NO_SCHEME,r=0===t.indexOf(a.toLowerCase()+":")?a:0===t.indexOf(o.toLowerCase()+":")?o:i,s=e("<a>").prop("href",r===i?a.toLowerCase()+"://"+t:t).prop("hostname"),n=s;s=s.split(".").join("_");n=t.slice(t.indexOf(n)+n.length);return{scheme:r,domain:{main:ShapeConstants.AllowedDomains.CUSTOM,parent:s},path:n}},isBlobUrl:function(e){var t=!1;return 0!==e.indexOf("data:image")&&0!==e.indexOf("blob")||(t=!0),t},getUrlScheme:function(e){var t=ShapeConstants.ProtocolScheme.HTTPS,a=ShapeConstants.ProtocolScheme.NO_SCHEME,o="";return e.scheme!==a||this.isBlobUrl(e.path)?e.scheme!==a&&(o=e.scheme.toLowerCase()+"://"):o=t.toLowerCase()+"://",o},getURLFromObj:function(e){var t=e.domain.parent.toLowerCase().split("_").join("."),a=(ShapeConstants.ProtocolScheme.HTTPS,ShapeConstants.ProtocolScheme.NO_SCHEME,this.getUrlScheme(e)),o=/(>|<)/;return e.path&&e.path.match(o)&&delete e.path,a+=t+e.path},setDigitsAfterDecimalPoint:function(e,t){return t=void 0==t?6:t,parseFloat(e.toFixed(t))},getPropArr:function(e){var t=[],a=e.split(".");for(i=0;i<a.length;i++){var o=a[i];-1!=o.indexOf("arr:")&&(o=o.split(":")[1]),t.push(o)}return t},hasDataObj:function(e,t,a,o){if(a<t.length-2){if(!e[t[a]])return;VectorUtil.hasDataObj(e[t[a]],t,++a,o)}else{if(!e[t[a]])return;o.val=e[t[a]]}},getDataForPropStr:function(e,t){var a={},o=VectorUtil.getPropArr(t);return VectorUtil.hasDataObj(e,o,0,a),a.val},getCornerPoints:function(e,t,a,o){if(a=a||0,o)i=o.cx,r=o.cy;else var i=e.left+.5*t.width,r=e.top+.5*t.height;var s=e.left+t.width,n=e.top+t.height;return{c1:zoho.math.getRotatedValue(a,e.left,e.top,i,r),c2:zoho.math.getRotatedValue(a,s,e.top,i,r),c3:zoho.math.getRotatedValue(a,e.left,n,i,r),c4:zoho.math.getRotatedValue(a,s,n,i,r)}},getTransformValues:function(e,t){t=t||0;var a=VectorUtil.getMinAndMax(e),o=[{x:a.small.x-t,y:a.small.y-t},{x:a.big.x+t,y:a.big.y+t}],i=Math.min(o[0].x,o[1].x),r=Math.max(o[0].x,o[1].x),s=Math.min(o[0].y,o[1].y),n=r-i,d=Math.max(o[0].y,o[1].y)-s,p=i,l=s;return{top:l,right:n,bottom:l+d,left:p,width:n,height:d,buffer:t}},groupShape:{modulateRotatedOffset:function(e,t,a){var o={x:1,y:1},i=0,r=0,s=0,n=0,d=e&&e.x?e.x:0,p=e&&e.y?e.y:0;if(360==a?a=0:a<0&&(a=360-a),a>=0&&a<90||a>=180&&a<270){i=(t.c2.y-t.c1.y)/(t.c2.x-t.c1.x)*(d-t.c1.x)+t.c1.y;d<(n=(t.c3.x-t.c1.x)/(t.c3.y-t.c1.y)*(p-t.c1.y)+t.c1.x)&&p<i?o=a>=0&&a<90?{x:-1,y:-1}:{x:1,y:1}:d>n&&p<i?o=a>=0&&a<90?{x:1,y:-1}:{x:-1,y:1}:d<n&&p>i?o=a>=0&&a<90?{x:-1,y:1}:{x:1,y:-1}:d>=n&&p>=i&&(o=a>=0&&a<90?{x:1,y:1}:{x:-1,y:-1})}else if(a>=90&&a<180||a>=270&&a<360){var s=(t.c2.x-t.c1.x)/(t.c2.y-t.c1.y)*(p-t.c1.y)+t.c1.x,r=(t.c3.y-t.c1.y)/(t.c3.x-t.c1.x)*(d-t.c1.x)+t.c1.y;d<s&&p<r?o=a>=90&&a<180?{x:-1,y:1}:{x:1,y:-1}:d>s&&p<r?o=a>=90&&a<180?{x:-1,y:-1}:{x:1,y:1}:d<s&&p>r?o=a>=90&&a<180?{x:1,y:1}:{x:-1,y:-1}:d>=s&&p>=r&&(o=a>=90&&a<180?{x:1,y:-1}:{x:-1,y:1})}return o}}}}(jQuery),function(e){var t={CURVED_LEFT_ARROW:{name:"Curved Left Arrow",modifiers:[.25,.5,.25],handles:[{values:[{num:0,modifier:{type:"Y",origin:"END",multiplier:2},ssDependent:!0,min:{val:0}}]},{values:[{num:1,modifier:{type:"Y",origin:"END"},ssDependent:!0,min:{val:0}}]},{values:[{num:2,modifier:{type:"X"},ssDependent:!0,min:{val:0}}]}],pathList:[{fill:{fill:"NORMAL"},stroke:{fill:"NONE"}},{fill:{fill:"NORMAL",tweaks:{hsl:{luminance:[{mode:"MODIFY",value:.8}]}}},stroke:{fill:"NONE"}},{fill:{fill:"NONE"}}]},FOUR_EDGED_FRAME:{name:"Four Edged Frame",modifiers:[.25],handles:[{values:[{num:0,modifier:{type:"X",origin:"END",multiplier:1},ssDependent:!1,max:{val:.5},min:{val:0}}]}],pathList:[{fill:{fill:"NORMAL",tweaks:{tint:0}},stroke:{fill:"NONE"}},{fill:{fill:"NONE"},stroke:{fill:"NORMAL"}},{fill:{fill:"NONE"},stroke:{fill:"NONE"}}]},ELBOW_CONNECTOR5:{name:"Elbow Connector5",modifiers:[.5,.5,.5],handles:[{values:[{num:0,modifier:{type:"X"},ssDependent:!1}]},{values:[{num:1,modifier:{type:"Y"},ssDependent:!1}]},{values:[{num:2,modifier:{type:"X"},ssDependent:!1}]}],pathList:[{fill:{fill:"NONE"}}]},TIMER_SCALE:{name:"Timer Scale"},SNIP_SINGLE_RECT:{name:"Snip Single Rect",modifiers:[.16],handles:[{values:[{num:0,modifier:{type:"X",origin:"END"},ssDependent:!0,max:{val:.5},min:{val:0}}]}]},WOMAN:{name:"Woman"},ELLIPSE_FILLER:{name:"Ellipse Filler"},BEVEL:{name:"Bevel",modifiers:[.125],handles:[{values:[{num:0,modifier:{type:"X"},ssDependent:!0,max:{val:.5},min:{val:0}}]}],pathList:[{fill:{fill:"NORMAL"},stroke:{fill:"NONE"}},{fill:{fill:"NORMAL",tweaks:{hsl:{luminance:[{mode:"MODIFY",value:.6},{mode:"OFFSET",value:.4}]}}},stroke:{fill:"NONE"}},{fill:{fill:"NORMAL",tweaks:{hsl:{luminance:[{mode:"MODIFY",value:.8},{mode:"OFFSET",value:.2}]}}},stroke:{fill:"NONE"}},{fill:{fill:"NORMAL",tweaks:{hsl:{luminance:[{mode:"MODIFY",value:.6}]}}},stroke:{fill:"NONE"}},{fill:{fill:"NORMAL",tweaks:{hsl:{luminance:[{mode:"MODIFY",value:.8}]}}},stroke:{fill:"NONE"}},{fill:{fill:"NONE"}}]},DOUBLE_BRACKET:{name:"Double Bracket",modifiers:[.16],handles:[{values:[{num:0,modifier:{type:"Y"},ssDependent:!0,max:{val:.5},min:{val:0}}]}]},TEARDROP:{name:"Teardrop",modifiers:[1],handles:[{values:[{num:0,modifier:{type:"X"},ssDependent:!1,max:{val:1},min:{val:.5}}]}]},CURVED_CONNECTOR5:{name:"Curved Connector5",modifiers:[.5,.5,.5],handles:[{values:[{num:0,modifier:{type:"X"},ssDependent:!1}]},{values:[{num:1,modifier:{type:"Y"},ssDependent:!1}]},{values:[{num:2,modifier:{type:"X"},ssDependent:!1}]}],pathList:[{fill:{fill:"NONE"}}]},BENT_ARROW:{name:"Bent Arrow",modifiers:[.25,.25,.25,.4375],handles:[{values:[{num:0,modifier:{type:"X"},ssDependent:!0,min:{val:0}}]},{values:[{num:1,modifier:{type:"Y",multiplier:.5},ssDependent:!0,max:{val:.5},min:{val:0}}]},{values:[{num:2,modifier:{type:"X",origin:"END"},ssDependent:!0,max:{val:.5},min:{val:0}}]},{values:[{num:3,modifier:{type:"X"},ssDependent:!0,min:{val:0}}]}]},CUBE:{name:"Cube",modifiers:[.25],handles:[{values:[{num:0,modifier:{type:"Y"},ssDependent:!0,max:{val:1},min:{val:0}}]}],pathList:[{fill:{fill:"NORMAL"},stroke:{fill:"NONE"}},{fill:{fill:"NORMAL",tweaks:{hsl:{luminance:[{mode:"MODIFY",value:.8},{mode:"OFFSET",value:.2}]}}},stroke:{fill:"NONE"}},{fill:{fill:"NORMAL",tweaks:{hsl:{luminance:[{mode:"MODIFY",value:.8}]}}},stroke:{fill:"NONE"}},{fill:{fill:"NONE"}}]},NO_SYMBOL:{name:"No Symbol",modifiers:[.15],handles:[{values:[{num:0,modifier:{type:"X"},ssDependent:!0,max:{val:.5},min:{val:0}}]}]},RIGHT_ARROW_CALLOUT:{name:"Right Arrow Callout",modifiers:[.25,.25,.25,.64997],handles:[{values:[{num:0,modifier:{type:"Y",origin:"END",multiplier:2},ssDependent:!0,min:{val:0}}]},{values:[{num:1,modifier:{type:"Y",origin:"END"},ssDependent:!0,max:{val:.5,compute:!0},min:{val:0}}]},{values:[{num:2,modifier:{type:"X",origin:"END"},ssDependent:!0,max:{val:1,compute:!0},min:{val:0}}]},{values:[{num:3,modifier:{type:"X"},ssDependent:!1,min:{val:0}}]}]},SNIP_DIAGONAL_RECT:{name:"Snip Diagonal Rect",modifiers:[.16,0],handles:[{values:[{num:0,modifier:{type:"X",origin:"END"},ssDependent:!0,max:{val:.5},min:{val:0}}]},{values:[{num:1,modifier:{type:"X"},ssDependent:!0,max:{val:.5},min:{val:0}}]}]},ROUNDED_RECTANGULAR_CALLOUT:{name:"Rounded Rectangular Callout",modifiers:[-.208,.625],handles:[{values:[{num:0,modifier:{type:"X"},ssDependent:!1},{num:1,modifier:{type:"Y"},ssDependent:!1}]}]},RHOMBUS_ON_BOW_BOARD:{name:"Rhombus On Bow Board",pathList:[{fill:{fill:"NORMAL",tweaks:{tint:0}},stroke:{fill:"NORMAL",tweaks:{}}},{fill:{fill:"NORMAL"},stroke:{fill:"NONE"}},{fill:{fill:"NONE"},stroke:{fill:"NONE"}}]},ACTION_SOUND:{name:"Action Sound",pathList:[{fill:{fill:"NORMAL"},stroke:{fill:"NONE"}},{fill:{fill:"NORMAL",tweaks:{hsl:{luminance:[{mode:"MODIFY",value:.6}]}}},stroke:{fill:"NONE"}},{fill:{fill:"NONE"},stroke:{fill:"NORMAL"}},{fill:{fill:"NONE"},stroke:{fill:"NORMAL"}}]},MOD_ROUND_RECT:{name:"Mod Round Rect"},MINUS:{name:"Minus",modifiers:[.2352],handles:[{values:[{num:0,modifier:{type:"Y",origin:"END",multiplier:2},ssDependent:!1,max:{val:.7349},min:{val:0}}]}]},CURVED_RIGHT_ARROW:{name:"Curved Right Arrow",modifiers:[.25,.5,.25],handles:[{values:[{num:0,modifier:{type:"Y",origin:"END",multiplier:2},ssDependent:!0,min:{val:0}}]},{values:[{num:1,modifier:{type:"Y",origin:"END"},ssDependent:!0,min:{val:0}}]},{values:[{num:2,modifier:{type:"X",origin:"END"},ssDependent:!0,min:{val:0}}]}],pathList:[{fill:{fill:"NORMAL"},stroke:{fill:"NONE"}},{fill:{fill:"NORMAL",tweaks:{hsl:{luminance:[{mode:"MODIFY",value:.8}]}}},stroke:{fill:"NONE"}},{fill:{fill:"NONE"}}]},UP_ARROW_CALLOUT:{name:"Up Arrow Callout",modifiers:[.25,.25,.25,.64997],handles:[{values:[{num:0,modifier:{type:"X",origin:"END",multiplier:2},ssDependent:!0,min:{val:0}}]},{values:[{num:1,modifier:{type:"X",origin:"END"},ssDependent:!0,max:{val:.5,compute:!0},min:{val:0}}]},{values:[{num:2,modifier:{type:"Y"},ssDependent:!0,max:{val:1,compute:!0},min:{val:0}}]},{values:[{num:3,modifier:{type:"Y",origin:"END"},ssDependent:!1,min:{val:0}}]}]},TWO_EDGED_FRAME:{name:"Two Edged Frame",modifiers:[.5,.5],handles:[{values:[{num:0,modifier:{type:"X",origin:"END",multiplier:1},ssDependent:!1,max:{val:1},min:{val:0}}]},{values:[{num:1,modifier:{type:"Y"},ssDependent:!1,max:{val:1},min:{val:0}}]}],pathList:[{fill:{fill:"NORMAL",tweaks:{tint:0}},stroke:{fill:"NONE"}},{fill:{fill:"NONE"},stroke:{fill:"NORMAL"}},{fill:{fill:"NONE"},stroke:{fill:"NONE"}}]},TWENTY_FOUR_POINT_STAR:{name:"Twenty Four Point Star",modifiers:[.375],handles:[{values:[{num:0,modifier:{type:"Y",origin:"END"},ssDependent:!1,max:{val:.5},min:{val:0}}]}]},DODECAGON:{name:"Dodecagon"},U_TURN_ARROW:{name:"U Turn Arrow",modifiers:[.25,.25,.25,.4375,.75],handles:[{values:[{num:0,modifier:{type:"X"},ssDependent:!0,min:{val:0}}]},{values:[{num:1,modifier:{type:"X",origin:"END",multiplier:.5},ssDependent:!0,max:{val:.25},min:{val:0}}]},{values:[{num:2,modifier:{type:"Y",origin:"END"},ssDependent:!0,min:{val:0}}]},{values:[{num:3,modifier:{type:"X"},ssDependent:!0,min:{val:0}}]},{values:[{num:4,modifier:{type:"Y"},ssDependent:!1,max:{val:1},min:{val:0}}]}]},CROP_FRAME:{name:"CropFrame",modifiers:[.2,.2,.5,.5,.8,.8,.8,.2,.2,.8,.8,.8,.2,.2],handles:[{values:[{num:0,modifier:{type:"X"},ssDependent:!1,max:{val:1},min:{val:0}},{num:1,modifier:{type:"Y"},ssDependent:!1,max:{val:1},min:{val:0}}]},{values:[{num:2,modifier:{type:"X"},ssDependent:!1},{num:3,modifier:{type:"Y"},ssDependent:!1}]},{values:[{num:4,modifier:{type:"X"},ssDependent:!1,max:{val:1},min:{val:0}},{num:5,modifier:{type:"Y"},ssDependent:!1,max:{val:1},min:{val:0}}]},{values:[{num:6,modifier:{type:"X"},ssDependent:!1,max:{val:1},min:{val:0}},{num:7,modifier:{type:"Y"},ssDependent:!1,max:{val:1},min:{val:0}}]},{values:[{num:8,modifier:{type:"X"},ssDependent:!1,max:{val:1},min:{val:0}},{num:9,modifier:{type:"Y"},ssDependent:!1,max:{val:1},min:{val:0}}]},{values:[{num:10,modifier:{type:"Y"},ssDependent:!1,max:{val:1},min:{val:0}}]},{values:[{num:11,modifier:{type:"X"},ssDependent:!1,max:{val:1},min:{val:0}}]},{values:[{num:12,modifier:{type:"Y"},ssDependent:!1,max:{val:1},min:{val:0}}]},{values:[{num:13,modifier:{type:"X"},ssDependent:!1,max:{val:1},min:{val:0}}]}]},CURVED_CONNECTOR2:{name:"Curved Connector2",pathList:[{fill:{fill:"NONE"}}]},MANUAL_OPERATION:{name:"Manual Operation"},MAN:{name:"Man"},CAN:{name:"Can",modifiers:[.25],handles:[{values:[{num:0,modifier:{type:"Y"},ssDependent:!0,max:{val:.5,compute:!0},min:{val:0}}]}],pathList:[{fill:{fill:"NORMAL"},stroke:{fill:"NONE"}},{fill:{fill:"NORMAL",tweaks:{hsl:{luminance:[{mode:"MODIFY",value:.6},{mode:"OFFSET",value:.4}]}}},stroke:{fill:"NONE"}},{fill:{fill:"NONE"}}]},COLLATE:{name:"Collate"},SORT:{name:"Sort"},HEART:{name:"Heart"},ELBOW_CONNECTOR4:{name:"Elbow Connector4",modifiers:[.5,.5],handles:[{values:[{num:0,modifier:{type:"X"},ssDependent:!1}]},{values:[{num:1,modifier:{type:"Y"},ssDependent:!1}]}],pathList:[{fill:{fill:"NONE"}}]},ACTION_PREVIOUS:{name:"Action Previous",pathList:[{fill:{fill:"NORMAL"},stroke:{fill:"NONE"}},{fill:{fill:"NORMAL",tweaks:{hsl:{luminance:[{mode:"MODIFY",value:.6}]}}},stroke:{fill:"NONE"}},{fill:{fill:"NONE"},stroke:{fill:"NORMAL"}},{fill:{fill:"NONE"},stroke:{fill:"NORMAL"}}]},EIGHT_POINT_STAR:{name:"Eight Point Star",modifiers:[.375],handles:[{values:[{num:0,modifier:{type:"Y",origin:"END"},ssDependent:!1,max:{val:.5},min:{val:0}}]}]},PREPARATION:{name:"Preparation"},CURVED_DOWN_RIBBON:{name:"Curved Down Ribbon",modifiers:[.25,.5,.125],handles:[{values:[{num:0,modifier:{type:"Y"},ssDependent:!1,max:{val:1},min:{val:0}}]},{values:[{num:1,modifier:{type:"X",origin:"END",multiplier:2},ssDependent:!1,max:{val:.75},min:{val:.25}}]},{values:[{num:0,modifier:{type:"Y",origin:"END"},ssDependent:!1}]}],pathList:[{fill:{fill:"NORMAL"},stroke:{fill:"NONE"}},{fill:{fill:"NORMAL",tweaks:{hsl:{luminance:[{mode:"MODIFY",value:.8}]}}},stroke:{fill:"NONE"}},{fill:{fill:"NONE"}}]},BORDER_CALLOUT1:{name:"Border Callout1",modifiers:[.187,-.083,1.125,-.383],handles:[{values:[{num:1,modifier:{type:"X"},ssDependent:!1},{num:0,modifier:{type:"Y"},ssDependent:!1}]},{values:[{num:3,modifier:{type:"X"},ssDependent:!1},{num:2,modifier:{type:"Y"},ssDependent:!1}]}],pathList:[{fill:{fill:"NORMAL"}},{fill:{fill:"NONE"},stroke:{fill:"NORMAL"}}]},ELBOW_CONNECTOR3:{name:"Elbow Connector3",modifiers:[.5],handles:[{values:[{num:0,modifier:{type:"X"},ssDependent:!1}]}],pathList:[{fill:{fill:"NONE"}}]},DOTTED_SIGN:{name:"Dotted Sign",pathList:[{fill:{fill:"NORMAL"},stroke:{fill:"NONE"}},{fill:{fill:"NONE"},stroke:{fill:"NORMAL"}},{fill:{fill:"NONE"},stroke:{fill:"NONE"}}]},ARC:{name:"Arc",modifiers:[4.712389,0],handles:[{values:[{num:0,modifier:{type:"ANGLE"}}]},{values:[{num:1,modifier:{type:"ANGLE"}}]}]},FLOWCHART_DOCUMENT:{name:"Flowchart Document"},SIXTEEN_POINT_STAR:{name:"Sixteen Point Star",modifiers:[.375],handles:[{values:[{num:0,modifier:{type:"Y",origin:"END"},ssDependent:!1,max:{val:.5},min:{val:0}}]}]},ISOSCELES_TRIANGLE:{name:"Isosceles Triangle",modifiers:[.5],handles:[{values:[{num:0,modifier:{type:"X"},ssDependent:!1,max:{val:1},min:{val:0}}]}]},PENTAGON_ARROW:{name:"Pentagon Arrow",modifiers:[.5],handles:[{values:[{num:0,modifier:{type:"X",origin:"END"},ssDependent:!0,max:{val:1,compute:!0},min:{val:0}}]}]},DISPLAY:{name:"Display"},LEFT_UP_ARROW:{name:"Left Up Arrow",modifiers:[.25,.25,.25],handles:[{values:[{num:0,modifier:{type:"X",origin:"END",multiplier:2},ssDependent:!0,min:{val:0}}]},{values:[{num:1,modifier:{type:"X",origin:"END",multiplier:.5},ssDependent:!0,max:{val:.5},min:{val:0}}]},{values:[{num:2,modifier:{type:"Y"},ssDependent:!0,min:{val:0}}]}]},BORDER_CALLOUT2:{name:"Border Callout2",modifiers:[.187,-.083,.187,-.166,1.125,-.466],handles:[{values:[{num:1,modifier:{type:"X"},ssDependent:!1},{num:0,modifier:{type:"Y"},ssDependent:!1}]},{values:[{num:3,modifier:{type:"X"},ssDependent:!1},{num:2,modifier:{type:"Y"},ssDependent:!1}]},{values:[{num:5,modifier:{type:"X"},ssDependent:!1},{num:4,modifier:{type:"Y"},ssDependent:!1}]}],pathList:[{fill:{fill:"NORMAL"}},{fill:{fill:"NONE"},stroke:{fill:"NORMAL"}}]},BENT_UP_ARROW:{name:"Bent Up Arrow",modifiers:[.25,.25,.25],handles:[{values:[{num:0,modifier:{type:"Y",origin:"END"},ssDependent:!0,max:{val:.5},min:{val:0}}]},{values:[{num:1,modifier:{type:"X",origin:"END",multiplier:.5},ssDependent:!0,max:{val:.5},min:{val:0}}]},{values:[{num:2,modifier:{type:"Y"},ssDependent:!0,max:{val:.5},min:{val:0}}]}]},CIRCULAR_ARROW:{name:"Circular Arrow"},PARALLELOGRAM:{name:"Parallelogram",modifiers:[.25],handles:[{values:[{num:0,modifier:{type:"X"},ssDependent:!0,max:{val:1,compute:!0},min:{val:0}}]}]},LEFT_BRACKET:{name:"Left Bracket",modifiers:[.0833],handles:[{values:[{num:0,modifier:{type:"Y"},ssDependent:!0,max:{val:.5,compute:!0},min:{val:0}}]}]},SMILEY:{name:"Smiley",modifiers:[.04653],handles:[{values:[{num:0,modifier:{type:"Y"},ssDependent:!1,max:{val:.04653},min:{val:-.04653}}]}],pathList:[{fill:{fill:"NORMAL"},stroke:{fill:"NONE"}},{fill:{fill:"NONE"}},{fill:{fill:"NORMAL",tweaks:{hsl:{luminance:[{mode:"MODIFY",value:.8}]}}}},{fill:{fill:"NONE"}}]},LEFT_ARROW_CALLOUT:{name:"Left Arrow Callout",modifiers:[.25,.25,.25,.64997],handles:[{values:[{num:0,modifier:{type:"Y",origin:"END",multiplier:2},ssDependent:!0,min:{val:0}}]},{values:[{num:1,modifier:{type:"Y",origin:"END"},ssDependent:!0,max:{val:.5,compute:!0},min:{val:0}}]},{values:[{num:2,modifier:{type:"X"},ssDependent:!0,max:{val:1,compute:!0},min:{val:0}}]},{values:[{num:3,modifier:{type:"X",origin:"END"},ssDependent:!1,min:{val:0}}]}]},SQUARE_ON_CIRCLE_BOARD:{name:"Square On Circle Board",pathList:[{fill:{fill:"NONE"},stroke:{fill:"NORMAL"}},{fill:{fill:"NORMAL"},stroke:{fill:"NONE"}},{fill:{fill:"NONE"},stroke:{fill:"NONE"}}]},ACCENT_CALLOUT3:{name:"Accent Callout3",modifiers:[.187,-.083,.187,-.166,1,-.166,1.129,-.083],handles:[{values:[{num:1,modifier:{type:"X"},ssDependent:!1},{num:0,modifier:{type:"Y"},ssDependent:!1}]},{values:[{num:3,modifier:{type:"X"},ssDependent:!1},{num:2,modifier:{type:"Y"},ssDependent:!1}]},{values:[{num:5,modifier:{type:"X"},ssDependent:!1},{num:4,modifier:{type:"Y"},ssDependent:!1}]},{values:[{num:7,modifier:{type:"X"},ssDependent:!1},{num:6,modifier:{type:"Y"},ssDependent:!1}]}],pathList:[{fill:{fill:"NORMAL"},stroke:{fill:"NONE"}},{fill:{fill:"NONE"},stroke:{fill:"NORMAL"}}]},LEFT_BRACE:{name:"Left Brace",modifiers:[.0833,.5],handles:[{values:[{num:0,modifier:{type:"Y"},ssDependent:!0,min:{val:0}}]},{values:[{num:1,modifier:{type:"Y"},ssDependent:!1,max:{val:1},min:{val:0}}]}]},QUAD_ARROW_CALLOUT:{name:"Quad Arrow Callout",modifiers:[.18515,.18515,.18515,.48123],handles:[{values:[{num:0,modifier:{type:"X",origin:"END",multiplier:2},ssDependent:!0,min:{val:0}}]},{values:[{num:1,modifier:{type:"X",origin:"END"},ssDependent:!0,max:{val:.5},min:{val:0}}]},{values:[{num:2,modifier:{type:"Y"},ssDependent:!0,min:{val:0}}]},{values:[{num:3,modifier:{type:"Y",origin:"END"},ssDependent:!0}]}]},MOON:{name:"Moon",modifiers:[.5],handles:[{values:[{num:0,modifier:{type:"X"},ssDependent:!1,max:{val:.875},min:{val:0}}]}]},ACTION_END:{name:"Action End",pathList:[{fill:{fill:"NORMAL"},stroke:{fill:"NONE"}},{fill:{fill:"NORMAL",tweaks:{hsl:{luminance:[{mode:"MODIFY",value:.6}]}}},stroke:{fill:"NONE"}},{fill:{fill:"NONE"},stroke:{fill:"NORMAL"}},{fill:{fill:"NONE"},stroke:{fill:"NORMAL"}}]},ACTION_DOCUMENT:{name:"Action Document",pathList:[{fill:{fill:"NORMAL"},stroke:{fill:"NONE"}},{fill:{fill:"NORMAL",tweaks:{hsl:{luminance:[{mode:"MODIFY",value:.6}]}}},stroke:{fill:"NONE"}},{fill:{fill:"NORMAL",tweaks:{hsl:{luminance:[{mode:"MODIFY",value:.8}]}}},stroke:{fill:"NONE"}},{fill:{fill:"NONE"},stroke:{fill:"NORMAL"}},{fill:{fill:"NONE"},stroke:{fill:"NORMAL"}}]},PREDEFINED_PROCESS:{name:"Predefined Process"},FLOWCHART_CONNECTOR:{name:"Flowchart Connector"},ACTION_HELP:{name:"Action Help",pathList:[{fill:{fill:"NORMAL"},stroke:{fill:"NONE"}},{fill:{fill:"NORMAL",tweaks:{hsl:{luminance:[{mode:"MODIFY",value:.6}]}}},stroke:{fill:"NONE"}},{fill:{fill:"NONE"},stroke:{fill:"NORMAL"}},{fill:{fill:"NONE"},stroke:{fill:"NORMAL"}}]},INTERNAL_STORAGE:{name:"Internal Storage"},BORDER_CALLOUT3:{name:"Border Callout3",modifiers:[.187,-.083,.187,-.166,1,-.166,1.129,-.083],handles:[{values:[{num:1,modifier:{type:"X"},ssDependent:!1},{num:0,modifier:{type:"Y"},ssDependent:!1}]},{values:[{num:3,modifier:{type:"X"},ssDependent:!1},{num:2,modifier:{type:"Y"},ssDependent:!1}]},{values:[{num:5,modifier:{type:"X"},ssDependent:!1},{num:4,modifier:{type:"Y"},ssDependent:!1}]},{values:[{num:7,modifier:{type:"X"},ssDependent:!1},{num:6,modifier:{type:"Y"},ssDependent:!1}]}],pathList:[{fill:{fill:"NORMAL"}},{fill:{fill:"NONE"},stroke:{fill:"NORMAL"}}]},CHEVRON:{name:"Chevron",modifiers:[.5],handles:[{values:[{num:0,modifier:{type:"X",origin:"END"},ssDependent:!0,max:{val:1,compute:!0},min:{val:0}}]}]},HORIZONTAL_SLIDER:{name:"Horizontal Slider"},ROUND_SINGLE_RECT:{name:"Round Single Rect",modifiers:[.16],handles:[{values:[{num:0,modifier:{type:"X",origin:"END"},ssDependent:!0,max:{val:.5},min:{val:0}}]}]},ACTION_BEGIN:{name:"Action Begin",pathList:[{fill:{fill:"NORMAL"},stroke:{fill:"NONE"}},{fill:{fill:"NORMAL",tweaks:{hsl:{luminance:[{mode:"MODIFY",value:.6}]}}},stroke:{fill:"NONE"}},{fill:{fill:"NONE"},stroke:{fill:"NORMAL"}},{fill:{fill:"NONE"},stroke:{fill:"NORMAL"}}]},DIVIDE:{name:"Divide",modifiers:[.2352,.0588,.1176],handles:[{values:[{num:0,modifier:{type:"Y",origin:"END",multiplier:2},ssDependent:!1,max:{val:.36745},min:{val:.01}}]},{values:[{num:1,modifier:{type:"Y",origin:"END"},ssDependent:!1,min:{val:0}}]},{values:[{num:2,modifier:{type:"X",origin:"END"},ssDependent:!1,min:{val:.01}}]}]},ACCENT_BORDER_CALLOUT1:{name:"Accent Border Callout1",modifiers:[.187,-.083,1.125,-.383],handles:[{values:[{num:1,modifier:{type:"X"},ssDependent:!1},{num:0,modifier:{type:"Y"},ssDependent:!1}]},{values:[{num:3,modifier:{type:"X"},ssDependent:!1},{num:2,modifier:{type:"Y"},ssDependent:!1}]}],pathList:[{fill:{fill:"NORMAL"}},{fill:{fill:"NONE"},stroke:{fill:"NORMAL"}}]},UP_DOWN_ARROW:{name:"Up Down Arrow",modifiers:[.5,.5],handles:[{values:[{num:0,modifier:{type:"X",origin:"END",multiplier:2},ssDependent:!1,max:{val:1},min:{val:0}}]},{values:[{num:1,modifier:{type:"Y"},ssDependent:!0,max:{val:.5,compute:!0},min:{val:0}}]}]},FIVE_POINT_STAR:{name:"Five Point Star",modifiers:[.19098],handles:[{values:[{num:0,modifier:{type:"Y",origin:"END"},ssDependent:!1,max:{val:.5},min:{val:0}}]}]},OCTAGON:{name:"Octagon",modifiers:[.3],handles:[{values:[{num:0,modifier:{type:"X"},ssDependent:!0,max:{val:.5},min:{val:0}}]}]},SNIP_SAMESIDE_RECT:{name:"Snip Sameside Rect",modifiers:[.16,0],handles:[{values:[{num:0,modifier:{type:"X",origin:"END"},ssDependent:!0,max:{val:.5},min:{val:0}}]},{values:[{num:1,modifier:{type:"X"},ssDependent:!0,max:{val:.5},min:{val:0}}]}]},ROUND_DIAGONAL_RECT:{name:"Round Diagonal Rect",modifiers:[0,.16],handles:[{values:[{num:0,modifier:{type:"X",origin:"END"},ssDependent:!0,max:{val:.5},min:{val:0}}]},{values:[{num:1,modifier:{type:"X"},ssDependent:!0,max:{val:.5},min:{val:0}}]}]},DOWN_RIBBON:{name:"Down Ribbon",modifiers:[.1667,.5],handles:[{values:[{num:0,modifier:{type:"Y"},ssDependent:!1,max:{val:.333},min:{val:0}}]},{values:[{num:1,modifier:{type:"X",origin:"END",multiplier:2},ssDependent:!1,max:{val:.75},min:{val:.25}}]}],pathList:[{fill:{fill:"NORMAL"},stroke:{fill:"NONE"}},{fill:{fill:"NORMAL",tweaks:{hsl:{luminance:[{mode:"MODIFY",value:.8}]}}},stroke:{fill:"NONE"}},{fill:{fill:"NONE"}}]},SEVEN_POINT_STAR:{name:"Seven Point Star",modifiers:[.34601],handles:[{values:[{num:0,modifier:{type:"Y",origin:"END"},ssDependent:!1,max:{val:.5},min:{val:0}}]}]},LEFT_RIGHT_ARROW_CALLOUT:{name:"Left Right Arrow Callout",modifiers:[.25,.25,.25,.48123],handles:[{values:[{num:0,modifier:{type:"Y",origin:"END",multiplier:2},ssDependent:!0,min:{val:0}}]},{values:[{num:1,modifier:{type:"Y",origin:"END"},ssDependent:!0,max:{val:.5,compute:!0},min:{val:0}}]},{values:[{num:2,modifier:{type:"X"},ssDependent:!0,max:{val:.5,compute:!0},min:{val:0}}]},{values:[{num:3,modifier:{type:"X",origin:"END",multiplier:2},ssDependent:!1,min:{val:0}}]}]},MULTIPLY:{name:"Multiply",modifiers:[.2352],handles:[{values:[{num:0,modifier:{type:"Y"},ssDependent:!0,max:{val:.51965},min:{val:0}}]}]},CLOUD_CALLOUT:{name:"Cloud Callout",modifiers:[-.208,.625],handles:[{values:[{num:0,modifier:{type:"X"},ssDependent:!1},{num:1,modifier:{type:"Y"},ssDependent:!1}]}],pathList:[{fill:{fill:"NORMAL"}},{fill:{fill:"NONE"}},{fill:{fill:"NORMAL"}}]},ALTERNATE_PROCESS:{name:"Alternate Process"},RECTANGULAR_CALLOUT:{name:"Rectangular Callout",modifiers:[-.208,.625],handles:[{values:[{num:0,modifier:{type:"X"},ssDependent:!1},{num:1,modifier:{type:"Y"},ssDependent:!1}]}]},OFFPAGE_CONNECTOR:{name:"Offpage Connector"},MOD_PARALLELOGRAM:{name:"Mod Parallelogram"},RECT_QUOTE:{name:"Rect Quote",pathList:[{fill:{fill:"NORMAL"},stroke:{fill:"NONE"}},{fill:{fill:"NONE"},stroke:{fill:"NORMAL",tweaks:{shade:.3,tint:.3}}},{fill:{fill:"NONE"},stroke:{fill:"NONE"}}]},LEFT_ARROW:{name:"Left Arrow",modifiers:[.5,.5],handles:[{values:[{num:0,modifier:{type:"Y",origin:"END",multiplier:2},ssDependent:!1,max:{val:1},min:{val:0}}]},{values:[{num:1,modifier:{type:"X"},ssDependent:!0,max:{val:1,compute:!0},min:{val:0}}]}]},WAVE:{name:"Wave",modifiers:[.125,0],handles:[{values:[{num:0,modifier:{type:"Y"},ssDependent:!1,max:{val:.2},min:{val:0}}]},{values:[{num:1,modifier:{type:"X"},ssDependent:!1,max:{val:.1},min:{val:-.1}}]}]},FOUR_POINT_STAR:{name:"Four Point Star",modifiers:[.125],handles:[{values:[{num:0,modifier:{type:"Y",origin:"END"},ssDependent:!1,max:{val:.5},min:{val:0}}]}]},ACCENT_CALLOUT1:{name:"Accent Callout1",modifiers:[.187,-.083,1.125,-.383],handles:[{values:[{num:1,modifier:{type:"X"},ssDependent:!1},{num:0,modifier:{type:"Y"},ssDependent:!1}]},{values:[{num:3,modifier:{type:"X"},ssDependent:!1},{num:2,modifier:{type:"Y"},ssDependent:!1}]}],pathList:[{fill:{fill:"NORMAL"},stroke:{fill:"NONE"}},{fill:{fill:"NONE"},stroke:{fill:"NORMAL"}}]},DIRECT_ACCESS_STORAGE:{name:"Direct Access Storage"},ACCENT_BORDER_CALLOUT3:{name:"Accent Callout3",modifiers:[.187,-.083,.187,-.166,1,-.166,1.129,-.083],handles:[{values:[{num:1,modifier:{type:"X"},ssDependent:!1},{num:0,modifier:{type:"Y"},ssDependent:!1}]},{values:[{num:3,modifier:{type:"X"},ssDependent:!1},{num:2,modifier:{type:"Y"},ssDependent:!1}]},{values:[{num:5,modifier:{type:"X"},ssDependent:!1},{num:4,modifier:{type:"Y"},ssDependent:!1}]},{values:[{num:7,modifier:{type:"X"},ssDependent:!1},{num:6,modifier:{type:"Y"},ssDependent:!1}]}],pathList:[{fill:{fill:"NORMAL"}},{fill:{fill:"NONE"},stroke:{fill:"NORMAL"}}]},TWIN_COMET:{name:"Twin Comet",modifiers:[0],handles:[{values:[{num:0,modifier:{type:"X",origin:"END",multiplier:1},ssDependent:!1,max:{val:.25},min:{val:0}}]}]},OVAL_CALLOUT:{name:"Oval Callout",modifiers:[-.208,.625],handles:[{values:[{num:0,modifier:{type:"X"},ssDependent:!1},{num:1,modifier:{type:"Y"},ssDependent:!1}]}]},CIRCLE_FILLER:{name:"Circle Filler"},PENTAGON:{name:"Pentagon"},DIAMOND:{name:"Diamond"},TERMINATOR:{name:"Terminator"},SIX_POINT_STAR:{name:"Six Point Star",modifiers:[.28868],handles:[{values:[{num:0,modifier:{type:"Y",origin:"END"},ssDependent:!1,max:{val:.5},min:{val:0}}]}]},ELBOW_CONNECTOR2:{name:"Elbow Connector2",pathList:[{fill:{fill:"NONE"}}]},ACCENT_CALLOUT2:{name:"Accent Callout2",modifiers:[.187,-.083,.187,-.166,1.125,-.466],handles:[{values:[{num:1,modifier:{type:"X"},ssDependent:!1},{num:0,modifier:{type:"Y"},ssDependent:!1}]},{values:[{num:3,modifier:{type:"X"},ssDependent:!1},{num:2,modifier:{type:"Y"},ssDependent:!1}]},{values:[{num:5,modifier:{type:"X"},ssDependent:!1},{num:4,modifier:{type:"Y"},ssDependent:!1}]}],pathList:[{fill:{fill:"NORMAL"},stroke:{fill:"NONE"}},{fill:{fill:"NONE"},stroke:{fill:"NORMAL"}}]},PIE:{name:"Pie",modifiers:[0,4.712389],handles:[{values:[{num:0,modifier:{type:"ANGLE"}}]},{values:[{num:1,modifier:{type:"ANGLE"}}]}]},EXPLOSION2:{name:"Explosion2"},DOUBLE_WAVE:{name:"Double Wave",modifiers:[.0625,0],handles:[{values:[{num:0,modifier:{type:"Y"},ssDependent:!1,max:{val:.125},min:{val:0}}]},{values:[{num:1,modifier:{type:"X"},ssDependent:!1,max:{val:.1},min:{val:-.1}}]}]},CALLOUT1:{name:"Callout1",modifiers:[.187,-.083,1.125,-.383],handles:[{values:[{num:1,modifier:{type:"X"},ssDependent:!1},{num:0,modifier:{type:"Y"},ssDependent:!1}]},{values:[{num:3,modifier:{type:"X"},ssDependent:!1},{num:2,modifier:{type:"Y"},ssDependent:!1}]}],pathList:[{fill:{fill:"NORMAL"},stroke:{fill:"NONE"}},{fill:{fill:"NONE"},stroke:{fill:"NORMAL"}}]},LSHAPE:{name:"Lshape",modifiers:[.5,.5],handles:[{values:[{num:0,modifier:{type:"Y",origin:"END"},ssDependent:!0,max:{val:1,compute:!0},min:{val:0}}]},{values:[{num:1,modifier:{type:"X"},ssDependent:!0,max:{val:1,compute:!0},min:{val:0}}]}]},ACTION_RETURN:{name:"Action Return",pathList:[{fill:{fill:"NORMAL"},stroke:{fill:"NONE"}},{fill:{fill:"NORMAL",tweaks:{hsl:{luminance:[{mode:"MODIFY",value:.6}]}}},stroke:{fill:"NONE"}},{fill:{fill:"NONE"},stroke:{fill:"NORMAL"}},{fill:{fill:"NONE"},stroke:{fill:"NORMAL"}}]},GRID:{name:"Grid",modifiers:[.1,6]},ACTION_MOVIE:{name:"Action Movie",pathList:[{fill:{fill:"NORMAL"},stroke:{fill:"NONE"}},{fill:{fill:"NORMAL",tweaks:{hsl:{luminance:[{mode:"MODIFY",value:.6}]}}},stroke:{fill:"NONE"}},{fill:{fill:"NONE"},stroke:{fill:"NORMAL"}},{fill:{fill:"NONE"},stroke:{fill:"NORMAL"}}]},AUDIO:{name:"Audio",modifiers:[0,0],pathList:[{fill:{fill:"NORMAL",tweaks:{tint:0}},stroke:{fill:"NONE"}},{fill:{fill:"NORMAL"},stroke:{fill:"NONE"}},{fill:{fill:"NONE"},stroke:{fill:"NORMAL",tweaks:{shade:.2,tint:.5}}},{fill:{fill:"NORMAL",tweaks:{tint:0}},stroke:{fill:"NONE"}},{fill:{fill:"NONE"},stroke:{fill:"NORMAL"}},{fill:{fill:"NORMAL"},stroke:{fill:"NONE"}},{fill:{fill:"NORMAL",tweaks:{shade:.2,tint:.5}},stroke:{fill:"NONE"}}]},DONUT:{name:"Donut",modifiers:[.25],handles:[{values:[{num:0,modifier:{type:"X"},ssDependent:!0,max:{val:.5},min:{val:0}}]}]},SEQUENTIAL_ACCESS_STORAGE:{name:"Sequential Access Storage"},CURVED_DOWN_ARROW:{name:"Curved Down Arrow",modifiers:[.25,.5,.25],handles:[{values:[{num:0,modifier:{type:"X",origin:"END",multiplier:2},ssDependent:!0,min:{val:0}}]},{values:[{num:1,modifier:{type:"X",origin:"END"},ssDependent:!0,min:{val:0}}]},{values:[{num:2,modifier:{type:"Y",origin:"END"},ssDependent:!0,min:{val:0}}]}],pathList:[{fill:{fill:"NORMAL"},stroke:{fill:"NONE"}},{fill:{fill:"NORMAL",tweaks:{hsl:{luminance:[{mode:"MODIFY",value:.8}]}}},stroke:{fill:"NONE"}},{fill:{fill:"NONE"}}]},MERGE:{name:"Merge"},DOWN_ARROW_CALLOUT:{name:"Down Arrow Callout",modifiers:[.25,.25,.25,.64997],handles:[{values:[{num:0,modifier:{type:"X",origin:"END",multiplier:2},ssDependent:!0,min:{val:0}}]},{values:[{num:1,modifier:{type:"X",origin:"END"},ssDependent:!0,max:{val:.5,compute:!0},min:{val:0}}]},{values:[{num:2,modifier:{type:"Y",origin:"END"},ssDependent:!0,max:{val:1,compute:!0},min:{val:0}}]},{values:[{num:3,modifier:{type:"Y"},ssDependent:!1,min:{val:0}}]}]},OVAL:{name:"Oval"},CURVED_CONNECTOR4:{name:"Curved Connector4",modifiers:[.5,.5],handles:[{values:[{num:0,modifier:{type:"X"},ssDependent:!1}]},{values:[{num:1,modifier:{type:"Y"},ssDependent:!1}]}],pathList:[{fill:{fill:"NONE"}}]},SUMMING_JUNCTION:{name:"Summing Junction"},CIRCLE_QUOTE:{name:"Circle Quote",pathList:[{fill:{fill:"NONE"},stroke:{fill:"NORMAL",tweaks:{shade:.3,tint:.3}}},{fill:{fill:"NORMAL"},stroke:{fill:"NONE"}},{fill:{fill:"NONE"},stroke:{fill:"NONE"}}]},NOT_EQUAL:{name:"Not Equal",modifiers:[.2352,1.9198622,.1176],handles:[{values:[{num:0,modifier:{type:"Y",origin:"END"},ssDependent:!1,max:{val:.5},min:{val:0}}]},{values:[{num:1,modifier:{type:"ANGLE"},ssDependent:!1,max:{val:1.9198622},min:{val:1.2217305}}]},{values:[{num:2,modifier:{type:"Y",origin:"END",multiplier:2},ssDependent:!1,min:{val:0}}]}]},EXTRACT:{name:"Extract"},TEN_POINT_STAR:{name:"Ten Point Star",modifiers:[.42533],handles:[{values:[{num:0,modifier:{type:"Y",origin:"END"},ssDependent:!1,max:{val:.5},min:{val:0}}]}]},BLOCK_ARC:{name:"Block Arc",modifiers:[3.1415927,0,.25],handles:[{values:[{num:0,modifier:{type:"ANGLE"}}]},{values:[{num:1,modifier:{type:"ANGLE"}},{num:2,modifier:{type:"RADIUS"}}]}]},ACCENT_BORDER_CALLOUT2:{name:"Accent Border Callout2",modifiers:[.187,-.083,.187,-.166,1.125,-.466],handles:[{values:[{num:1,modifier:{type:"X"},ssDependent:!1},{num:0,modifier:{type:"Y"},ssDependent:!1}]},{values:[{num:3,modifier:{type:"X"},ssDependent:!1},{num:2,modifier:{type:"Y"},ssDependent:!1}]},{values:[{num:5,modifier:{type:"X"},ssDependent:!1},{num:4,modifier:{type:"Y"},ssDependent:!1}]}],pathList:[{fill:{fill:"NORMAL"}},{fill:{fill:"NONE"},stroke:{fill:"NORMAL"}}]},CLOCK:{name:"Clock",modifiers:[5.7595863,3.6651914],handles:[{values:[{num:0,modifier:{type:"ANGLE"}}]},{values:[{num:1,modifier:{type:"ANGLE"}}]}]},RIGHT_TRIANGLE:{name:"Right Triangle"},MULTI_DOCUMENT:{name:"Multi Document",pathList:[{fill:{fill:"NORMAL"},stroke:{fill:"NONE"}},{fill:{fill:"NONE"},stroke:{fill:"NORMAL"}}]},ACTION_NEXT:{name:"Action Next",pathList:[{fill:{fill:"NORMAL"},stroke:{fill:"NONE"}},{fill:{fill:"NORMAL",tweaks:{hsl:{luminance:[{mode:"MODIFY",value:.6}]}}},stroke:{fill:"NONE"}},{fill:{fill:"NONE"},stroke:{fill:"NORMAL"}},{fill:{fill:"NONE"},stroke:{fill:"NORMAL"}}]},PUNCHED_CARD:{name:"Punched Card"},HALF_FRAME:{name:"Half Frame",modifiers:[.33,.33],handles:[{values:[{num:0,modifier:{type:"Y"},ssDependent:!0}]},{values:[{num:1,modifier:{type:"X"},ssDependent:!0,max:{val:1,compute:!0},min:{val:0}}]}]},LEFT_RIGHT_UP_ARROW:{name:"Left Right Up Arrow",modifiers:[.25,.25,.25],handles:[{values:[{num:0,modifier:{type:"X",origin:"END",multiplier:2},ssDependent:!0,min:{val:0}}]},{values:[{num:1,modifier:{type:"X",origin:"END"},ssDependent:!0,max:{val:.5},min:{val:0}}]},{values:[{num:2,modifier:{type:"Y"},ssDependent:!0,min:{val:0}}]}]},ACTION_HOME:{name:"Action Home",pathList:[{fill:{fill:"NORMAL"},stroke:{fill:"NONE"}},{fill:{fill:"NORMAL",tweaks:{hsl:{luminance:[{mode:"MODIFY",value:.6}]}}},stroke:{fill:"NONE"}},{fill:{fill:"NORMAL",tweaks:{hsl:{luminance:[{mode:"MODIFY",value:.8}]}}},stroke:{fill:"NONE"}},{fill:{fill:"NONE"},stroke:{fill:"NORMAL"}},{fill:{fill:"NONE"},stroke:{fill:"NORMAL"}}]},METER_NEEDLE:{name:"Meter Needle"},MOD_CAN:{name:"Mod Can",pathList:[{fill:{fill:"NORMAL"},stroke:{fill:"NONE"}},{fill:{fill:"NORMAL",tweaks:{hsl:{luminance:[{mode:"MODIFY",value:.6},{mode:"OFFSET",value:.4}]}}},stroke:{fill:"NONE"}},{fill:{fill:"NONE"}}]},PUNCHED_TAPE:{name:"Punched Tape"},VERTICAL_SLIDER:{name:"Vertical Slider"},DIAGONAL_STRIPE:{name:"Diagonal Stripe",modifiers:[.5],handles:[{values:[{num:0,modifier:{type:"Y"},ssDependent:!1,max:{val:1},min:{val:0}}]}]},DOWN_ARROW:{name:"Down Arrow",modifiers:[.5,.5],handles:[{values:[{num:0,modifier:{type:"X",origin:"END",multiplier:2},ssDependent:!1,max:{val:1},min:{val:0}}]},{values:[{num:1,modifier:{type:"Y",origin:"END"},ssDependent:!0,max:{val:1,compute:!0},min:{val:0}}]}]},LEFT_BANNER:{name:"Left Banner",pathList:[{fill:{fill:"NORMAL"},stroke:{fill:"NONE"}},{fill:{fill:"NORMAL",tweaks:{shade:.8}},stroke:{fill:"NONE"}},{fill:{fill:"NONE"},stroke:{fill:"NONE"}}]},PLUS:{name:"Plus",modifiers:[.2352],handles:[{values:[{num:0,modifier:{type:"Y",origin:"END",multiplier:2},ssDependent:!0,max:{val:.7349},min:{val:0}}]}]},CLOCK_NEEDLE:{name:"Clock Needle",pathList:[{fill:{fill:"NORMAL",tweaks:{shade:0,tint:1}},stroke:{fill:"NONE"}},{fill:{fill:"NORMAL"},stroke:{fill:"NONE"}},{fill:{fill:"NORMAL"},stroke:{fill:"NONE"}},{fill:{fill:"NONE"}}]},DOUBLE_BRACE:{name:"Double Brace",modifiers:[.083],handles:[{values:[{num:0,modifier:{type:"Y"},ssDependent:!0,max:{val:.25},min:{val:0}}]}]},MAGNETIC_DISK:{name:"Magnetic Disk"},NOTCHED_RIGHT_ARROW:{name:"Notched Right Arrow",modifiers:[.5,.5],handles:[{values:[{num:0,modifier:{type:"Y",multiplier:2},ssDependent:!1,max:{val:1},min:{val:0}}]},{values:[{num:1,modifier:{type:"X",origin:"END"},ssDependent:!0,max:{val:1,compute:!0},min:{val:0}}]}]},CALLOUT3:{name:"Callout3",modifiers:[.187,-.083,.187,-.166,1,-.166,1.129,-.083],handles:[{values:[{num:1,modifier:{type:"X"},ssDependent:!1},{num:0,modifier:{type:"Y"},ssDependent:!1}]},{values:[{num:3,modifier:{type:"X"},ssDependent:!1},{num:2,modifier:{type:"Y"},ssDependent:!1}]},{values:[{num:5,modifier:{type:"X"},ssDependent:!1},{num:4,modifier:{type:"Y"},ssDependent:!1}]},{values:[{num:7,modifier:{type:"X"},ssDependent:!1},{num:6,modifier:{type:"Y"},ssDependent:!1}]}],pathList:[{fill:{fill:"NORMAL"},stroke:{fill:"NONE"}},{fill:{fill:"NONE"},stroke:{fill:"NORMAL"}}]},TRAPEZOID:{name:"Trapezoid",modifiers:[.2],handles:[{values:[{num:0,modifier:{type:"X"},ssDependent:!0,max:{val:.5,compute:!0},min:{val:0}}]}]},HORIZONTAL_SCROLL:{name:"Horizontal Scroll",modifiers:[.125],handles:[{values:[{num:0,modifier:{type:"X"},ssDependent:!0,max:{val:.25},min:{val:0}}]}],pathList:[{fill:{fill:"NORMAL"},stroke:{fill:"NONE"}},{fill:{fill:"NORMAL",tweaks:{hsl:{luminance:[{mode:"MODIFY",value:.8}]}}},stroke:{fill:"NONE"}},{fill:{fill:"NONE"}}]},STRIPED_RIGHT_ARROW:{name:"Striped Right Arrow",modifiers:[.5,.5],handles:[{values:[{num:0,modifier:{type:"Y",origin:"END",multiplier:2},ssDependent:!1,max:{val:1},min:{val:0}}]},{values:[{num:1,modifier:{type:"X",origin:"END"},ssDependent:!0,max:{val:.84375,compute:!0},min:{val:0}}]}]},PROCESS:{name:"Process"},DATA:{name:"Data"},DECISION:{name:"Decision"},LEFT_RIGHT_ARROW:{name:"Left Right Arrow",modifiers:[.5,.5],handles:[{values:[{num:0,modifier:{type:"Y",origin:"END",multiplier:2},ssDependent:!1,max:{val:1},min:{val:0}}]},{values:[{num:1,modifier:{type:"X"},ssDependent:!0,max:{val:.5,compute:!0},min:{val:0}}]}]},UP_RIBBON:{name:"Up Ribbon",modifiers:[.1667,.5],handles:[{values:[{num:0,modifier:{type:"Y",origin:"END"},ssDependent:!1,max:{val:.333},min:{val:0}}]},{values:[{num:1,modifier:{type:"X",origin:"END",multiplier:2},ssDependent:!1,max:{val:.75},min:{val:.25}}]}],pathList:[{fill:{fill:"NORMAL"},stroke:{fill:"NONE"}},{fill:{fill:"NORMAL",tweaks:{hsl:{luminance:[{mode:"MODIFY",value:.8}]}}},stroke:{fill:"NONE"}},{fill:{fill:"NONE"}}]},LIGHTNING_BOLT:{name:"Lightning Bolt"},TOP_BANNER:{name:"Top Banner",pathList:[{fill:{fill:"NORMAL"},stroke:{fill:"NONE"}},{fill:{fill:"NONE"},stroke:{fill:"NORMAL"}},{fill:{fill:"NONE"},stroke:{fill:"NONE"}}]},TABLECELL:{name:"Tablecell",modifiers:[.25],pathList:[{fill:{fill:"NORMAL"},stroke:{fill:"NONE"}},{fill:{fill:"NONE"},stroke:{fill:"NORMAL"}},{fill:{fill:"NONE"},stroke:{fill:"NORMAL"}},{fill:{fill:"NONE"},stroke:{fill:"NORMAL"}},{fill:{fill:"NONE"},stroke:{fill:"NORMAL"}}]},RIGHT_ARROW:{name:"Right Arrow",modifiers:[.5,.5],handles:[{values:[{num:0,modifier:{type:"Y",origin:"END",multiplier:2},ssDependent:!1,max:{val:1},min:{val:0}}]},{values:[{num:1,modifier:{type:"X",origin:"END"},ssDependent:!0,max:{val:1,compute:!0},min:{val:0}}]}]},DELAY:{name:"Delay"},QUAD_ARROW:{name:"Quad Arrow",modifiers:[.225,.225,.225],handles:[{values:[{num:0,modifier:{type:"X",origin:"END",multiplier:2},ssDependent:!0,min:{val:0}}]},{values:[{num:1,modifier:{type:"X",origin:"END"},ssDependent:!0,max:{val:.5},min:{val:0}}]},{values:[{num:2,modifier:{type:"Y"},ssDependent:!0,min:{val:0}}]}]},ROUND_SAMESIDE_RECT:{name:"Round Sameside Rect",modifiers:[.16,0],handles:[{values:[{num:0,modifier:{type:"X",origin:"END"},ssDependent:!0,max:{val:.5},min:{val:0}}]},{values:[{num:1,modifier:{type:"X"},ssDependent:!0,max:{val:.5},min:{val:0}}]}]},CROSS:{name:"Cross",modifiers:[.25],handles:[{values:[{num:0,modifier:{type:"X"},ssDependent:!0,max:{val:.5},min:{val:0}}]}]},CURVED_UP_RIBBON:{name:"Curved Up Ribbon",modifiers:[.25,.5,.125],handles:[{values:[{num:0,modifier:{type:"Y",origin:"END"},ssDependent:!1,max:{val:1},min:{val:0}}]},{values:[{num:1,modifier:{type:"X",origin:"END",multiplier:2},ssDependent:!1,max:{val:.75},min:{val:.25}}]},{values:[{num:0,modifier:{type:"Y"},ssDependent:!1}]}],pathList:[{fill:{fill:"NORMAL"},stroke:{fill:"NONE"}},{fill:{fill:"NORMAL",tweaks:{hsl:{luminance:[{mode:"MODIFY",value:.8}]}}},stroke:{fill:"NONE"}},{fill:{fill:"NONE"}}]},CURVED_CONNECTOR3:{name:"Curved Connector3",modifiers:[.5],handles:[{values:[{num:0,modifier:{type:"X"},ssDependent:!1}]}],pathList:[{fill:{fill:"NONE"}}]},DECAGON:{name:"Decagon"},TWELVE_POINT_STAR:{name:"Twelve Point Star",modifiers:[.375],handles:[{values:[{num:0,modifier:{type:"Y",origin:"END"},ssDependent:!1,max:{val:.5},min:{val:0}}]}]},VERTICAL_SCROLL:{name:"Vertical Scroll",modifiers:[.125],handles:[{values:[{num:0,modifier:{type:"Y"},ssDependent:!0,max:{val:.25},min:{val:0}}]}],pathList:[{fill:{fill:"NORMAL"},stroke:{fill:"NONE"}},{fill:{fill:"NORMAL",tweaks:{hsl:{luminance:[{mode:"MODIFY",value:.8}]}}},stroke:{fill:"NONE"}},{fill:{fill:"NONE"}}]},ROUND_RECT:{name:"Round Rect",modifiers:[.16],handles:[{values:[{num:0,modifier:{type:"X"},ssDependent:!0,max:{val:.5},min:{val:0}}]}]},HEPTAGON:{name:"Heptagon"},LOCK_SYMBOL:{name:"Lock Symbol"},CURVED_UP_ARROW:{name:"Curved Up Arrow",modifiers:[.25,.5,.25],handles:[{values:[{num:0,modifier:{type:"X",origin:"END",multiplier:2},ssDependent:!0,min:{val:0}}]},{values:[{num:1,modifier:{type:"X",origin:"END"},ssDependent:!0,min:{val:0}}]},{values:[{num:2,modifier:{type:"Y"},ssDependent:!0,min:{val:0}}]}],pathList:[{fill:{fill:"NORMAL"},stroke:{fill:"NONE"}},{fill:{fill:"NORMAL",tweaks:{hsl:{luminance:[{mode:"MODIFY",value:.8}]}}},stroke:{fill:"NONE"}},{fill:{fill:"NONE"}}]},EQUAL:{name:"Equal",modifiers:[.2352,.1176],handles:[{values:[{num:0,modifier:{type:"Y",origin:"END"},ssDependent:!1,max:{val:.36745},min:{val:0}}]},{values:[{num:1,modifier:{type:"Y",origin:"END",multiplier:2},ssDependent:!1,min:{val:0}}]}]},MANUAL_INPUT:{name:"Manual Input"},MOD_RECT:{name:"Mod Rect"},RIGHT_BRACKET:{name:"Right Bracket",modifiers:[.0833],handles:[{values:[{num:0,modifier:{type:"Y"},ssDependent:!0,max:{val:.5,compute:!0},min:{val:0}}]}]},CHORD:{name:"Chord",modifiers:[.7853982,4.712389],handles:[{values:[{num:0,modifier:{type:"ANGLE"}}]},{values:[{num:1,modifier:{type:"ANGLE"}}]}]},STORED_DATA:{name:"Stored Data"},THIRTY_TWO_POINT_STAR:{name:"Thirty Two Point Star",modifiers:[.375],handles:[{values:[{num:0,modifier:{type:"Y",origin:"END"},ssDependent:!1,max:{val:.5},min:{val:0}}]}]},SNIP_ROUND_SINGLE_RECT:{name:"Snip Round Single Rect",modifiers:[.16,.16],handles:[{values:[{num:0,modifier:{type:"X",origin:"END"},ssDependent:!0,max:{val:.5},min:{val:0}}]},{values:[{num:1,modifier:{type:"X"},ssDependent:!0,max:{val:.5},min:{val:0}}]}]},FOLDED_CORNER:{name:"Folded Corner",modifiers:[.16],handles:[{values:[{num:0,modifier:{type:"X",origin:"END"},ssDependent:!0,max:{val:.5},min:{val:0}}]}],pathList:[{fill:{fill:"NORMAL"},stroke:{fill:"NONE"}},{fill:{fill:"NORMAL",tweaks:{hsl:{luminance:[{mode:"MODIFY",value:.8}]}}},stroke:{fill:"NONE"}},{fill:{fill:"NONE"}}]},RECT:{name:"Rect"},FRAME:{name:"Frame",modifiers:[.125],handles:[{values:[{num:0,modifier:{type:"X"},ssDependent:!0,max:{val:.5},min:{val:0}}]}]},SUN:{name:"Sun",modifiers:[.25],handles:[{values:[{num:0,modifier:{type:"X"},ssDependent:!1,max:{val:.46875},min:{val:.125}}]}]},UP_ARROW:{name:"Up Arrow",modifiers:[.5,.5],handles:[{values:[{num:0,modifier:{type:"X",origin:"END",multiplier:2},ssDependent:!1,max:{val:1},min:{val:0}}]},{values:[{num:1,modifier:{type:"Y"},ssDependent:!0,max:{val:1,compute:!0},min:{val:0}}]}]},CLOUD:{name:"Cloud",pathList:[{fill:{fill:"NORMAL"}},{fill:{fill:"NONE"}}]},LINE:{name:"Line",pathList:[{fill:{fill:"NONE"}}]},PLAQUE:{name:"Plaque",modifiers:[.16],handles:[{values:[{num:0,modifier:{type:"X"},ssDependent:!0,max:{val:.5},min:{val:0}}]}]},RIGHT_BRACE:{name:"Right Brace",modifiers:[.0833,.5],handles:[{values:[{num:0,modifier:{type:"Y"},ssDependent:!0,min:{val:0}}]},{values:[{num:1,modifier:{type:"Y"},ssDependent:!1,max:{val:1},min:{val:0}}]}]},EXPLOSION1:{name:"Explosion1"},BORDER_QUOTE:{name:"Border Quote",modifiers:[.5],handles:[{values:[{num:0,modifier:{type:"X",origin:"END",multiplier:1},ssDependent:!1,max:{val:1},min:{val:0}}]}],pathList:[{fill:{fill:"NONE"},stroke:{fill:"NORMAL"}},{fill:{fill:"NORMAL"},stroke:{fill:"NONE"}},{fill:{fill:"NONE"},stroke:{fill:"NONE"}}]},CALLOUT2:{name:"Callout2",modifiers:[.187,-.083,.187,-.166,1.125,-.466],handles:[{values:[{num:1,modifier:{type:"X"},ssDependent:!1},{num:0,modifier:{type:"Y"},ssDependent:!1}]},{values:[{num:3,modifier:{type:"X"},ssDependent:!1},{num:2,modifier:{type:"Y"},ssDependent:!1}]},{values:[{num:5,modifier:{type:"X"},ssDependent:!1},{num:4,modifier:{type:"Y"},ssDependent:!1}]}],pathList:[{fill:{fill:"NORMAL"},stroke:{fill:"NONE"}},{fill:{fill:"NONE"},stroke:{fill:"NORMAL"}}]},OR:{name:"Or"},ACTION_CUSTOM:{name:"Action Custom"},HEXAGON:{name:"Hexagon",modifiers:[.25],handles:[{values:[{num:0,modifier:{type:"X"},ssDependent:!0,max:{val:.5,compute:!0},min:{val:0}}]}]},ACTION_INFORMATION:{name:"Action Information",pathList:[{fill:{fill:"NORMAL"},stroke:{fill:"NONE"}},{fill:{fill:"NORMAL",tweaks:{hsl:{luminance:[{mode:"MODIFY",value:.6}]}}},stroke:{fill:"NONE"}},{fill:{fill:"NORMAL",tweaks:{hsl:{luminance:[{mode:"MODIFY",value:.6},{mode:"OFFSET",value:.4}]}}},stroke:{fill:"NONE"}},{fill:{fill:"NONE"},stroke:{fill:"NORMAL"}},{fill:{fill:"NONE"},stroke:{fill:"NORMAL"}}]}};jQuery.Preset=t}();var Shape;!function(e){jQuery.fn.reverse=[].reverse,Shape={iOSDevice:-1!=navigator.userAgent.indexOf("iPad")||-1!=navigator.userAgent.indexOf("iPhone"),touchDevice:-1!=navigator.userAgent.indexOf("iPad")||-1!=navigator.userAgent.indexOf("iPhone")||-1!=navigator.userAgent.indexOf("Android"),isSafari:-1!==navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome"),isEdge:navigator.userAgent.indexOf("Edge")>-1,iOSSVGImageFillSupport:!1,shapeClass:"shape_box",pathId:"path",shapeId:"shapegroup",rotationalGroup:"_rotategroup",rotationalGroupClass:"rotategroup",reflectionShapeId:"reflectionshapegroup",reflectionTextId:"reflectiontextgroup",shadowFilterId:"shadowfilter",blurFilterId:"blurfilter",highlightFilter:"highlightFilter",imageFilterId:"imagefilter",viewboxConstant:1e3,boxConstant:1e3,strokeWidth:2,smartShapeClass:"smartshape",parentType:"parentType",renderPlace:"renderPlace",parentId:"parentId",grandParentId:"grandParentId",groupedShapeClass:"grouped",combinedObjectClass:"combined",combiningObjectClass:"combine",textbox:"tbox",connector:"connector",handle:"handles",modifier:"modifiers",IsAconnector:"IsAconnector",isWingDingsSupported:void 0,isTextRotateSupported:void 0,isPointerEventSupported:void 0,selectorStrokeWidth:10,placeHolderIconId:"placeholderIcon",iconCapsuleId:"iconCapsule",webkit:-1!=navigator.userAgent.indexOf("Chrome"),placeHolderTwitterIconId:"placeholderTwitterIcon",placeHolderImageIconId:"placeholderImageIcon",placeHolderMediaIconId:"placeholderMediaIcon",placeHolderTableIconId:"placeholderTableIcon",placeHolderChartIconId:"placeholderChartIcon",embedPreviewIconId:"embedPreviewIcon",embedPreviewButtonId:"embedPreviewButton",iconCapsuleEditIcon:"iconCapsuleEditIcon",editIconId:"editIcon",editIconTextId:"editIconText",ccImageIcon:"ccImageIcon",multipleFillId:"fills",multipleStrokeId:"strokes",error:function(){if(Shape.testing&&window.console){var e=console;e.log(arguments),e.trace()}},log:function(){Shape.testing&&window.console&&console.log(arguments)},supportsCSSTransformOnSVG:function(){return-1==navigator.userAgent.indexOf("MSIE")&&-1==navigator.userAgent.indexOf("Edge")},supportsPointerEvent:function(){var t=e("<div id='pointerEvent' style = 'position:absolute;left:0px;top:0px;width:50px;height:50px;z-index:10000000;'></div>"),a=e("<div id='pointerEvent' style = 'position:absolute;left:0px;top:0px;width:50px;height:50px;z-index:100000001;pointer-events:none;background-color:yellow;'></div>");e(document.body).append(a);var o={nvOProps:{nvDProps:{id:"dummy"},nvODProps:{locks:{noMove:!0,noSelect:!0}}},props:{geom:{preset:{type:"RECT"},type:"PRESET"},fill:{solid:{color:{rgb:{0:192,1:80,2:77}}},type:"SOLID"},stroke:{fill:{solid:{color:{rgb:{0:192,1:80,2:77}}},type:"SOLID"},jointype:"ROUND",width:20},transform:{dim:{height:30,width:30},pos:{left:0,top:0,zindex:1},rotate:0}},type:"SHAPE"};Shape.create.draw(o,t),e(document.body).append(t);var i=!0,r=document.elementFromPoint(36,36);return VectorUtil.supportsSvg()?r&&-1==r.nodeName.indexOf("path")&&(i=!1):i=!1,t.remove(),a.remove(),i},getTextBodyEditorData:function(t){var a={};if(t&&t.length){var o=t.find("#"+Shape.textBody.textContainer);if(o&&o.length&&!e.isEmptyObject(o.data())){a.textContainer=e.extend(!0,{},o.data()),a.textContainer.from&&a.textContainer.from.element&&(delete a.textContainer.from.element.line,delete a.textContainer.from.element.word,delete a.textContainer.from.element.para),a.textContainer.to&&a.textContainer.to.element&&(delete a.textContainer.to.element.line,delete a.textContainer.to.element.word,delete a.textContainer.to.element.para),a.paras=[];for(var i=o.find("."+Shape.textBody.paraId),r=0;r<i.length;r++){var s=e(i[r]),n=e.extend(!0,{},s.data());if(!e.isEmptyObject(n)){n.lines=[];for(var d=s.find("."+Shape.textBody.lineId),p=0;p<d.length;p++){var l=e(d[p]),h=e.extend(!0,{},l.data());if(!e.isEmptyObject(h)){h.words=[];for(var c=l.find("."+Shape.textBody.wordId),f=0;f<c.length;f++){var u=e(c[f]),m=e.extend(!0,{},u.data());if(!e.isEmptyObject(m)){m.subWords=[];for(var g=u.find("#"+Shape.textBody.subwordId),S=0;S<g.length;S++){var x=e(g[S]),v=e.extend(!0,{},x.data());e.isEmptyObject(v)||m.subWords.push(v)}h.words.push(m)}}n.lines.push(h)}}a.paras.push(n)}}}}return a},init:function(t){VectorUtil.supportsSvg()?(this.creator=SVGCreator,this.fillElement=SVGFill,this.strokeElement=SVGStroke,void 0!==SVGImage&&(this.imageElement=SVGImage),void 0!==SVGEffects&&(this.effects=SVGEffects)):(document.namespaces.add("v","urn:schemas-microsoft-com:vml"),document.createStyleSheet().addRule("v\\:*","behavior: url(#default#VML);"),this.creator=VMLCreator,this.fillElement=VMLFill,this.strokeElement=VMLStroke,this.imageElement=VMLImage,this.effects=VMLEffects),this.pathGenerator=new PathGenerator,this.touchDevice&&(this.selectorStrokeWidth=20);var a=e(document.body),o=e("<div></div>");o.css("display","table"),a.append(o),this.displaySupport={},this.displaySupport.table="table"==o.css("display"),o.css("display","table-cell"),this.displaySupport.tableCell="table-cell"==o.css("display"),o.remove(),Shape.testing=window.testsetup,Shape.isCorpUser=window.isCorpUser,Shape.svgRoughWork=e(Shape.creator.createGroup(a)),Shape.roughWork=e("<div id = 'roughWork' style='position:absolute;left:-1000px;top:-1000px'></div>"),a.append(Shape.roughWork),Shape.canvasArea=e('<canvas id="myCanvas" width="300" height="150">'),(-1!==navigator.userAgent.indexOf("Edge")||-1!==navigator.userAgent.indexOf("Trident"))&&Shape.roughWork.append(Shape.canvasArea);var i=e('<div id="clonetextbox" class = "prewrap" style="position:absolute;left:-10000px;top:-10000px;"></div>');a.append(i),Shape.cloneDiv=i;var r=e("<div id=loadimage>");a.append(r),Shape.loadImageDiv=r,Shape.iOSSVGImageFillSupport=Shape.iOSDevice?!/OS [1-5](_[\d])+ like Mac OS X/i.test(navigator.userAgent):void 0,Shape.isCSSTransformSupportOnSVG=Shape.supportsCSSTransformOnSVG(),Shape.isTextRotateSupported=VectorUtil.isTextRotateSupported(),Shape.isWingDingsSupported=VectorUtil.isWingDingsSupported(),Shape.isPointerEventSupported=Shape.supportsPointerEvent(),Shape.isSupportUseElement=Shape.supportUseElement(),Shape.textBody.fontUnit=t&&t.fontUnit?t.fontUnit:"pt"},getShapeDefaultData:function(t){for(var a=t?t.split("."):[],o=e.ShapeDefault,i=0;i<a.length&&(o=o[a[i]]);i++);return e.isArray(o)?e.extend(!0,[],o):e.isPlainObject(o)?e.extend(!0,{},o):o},createDiv:function(){return e("<div></div>")},createSpan:function(){return e("<span></span>")},supportUseElement:function(){var t=e(SVGCreator.SvgString),a=SVGCreator.createGroup(t);Shape.creator.setTransform(a,SVGCreator.ScaleConstant,{sw:"-1",sh:"-1"});var o=a.getAttribute("transform"),i=o.substring(o.indexOf("scale")),r=i.substring(i.indexOf("(")+1,i.indexOf(")")).split(" "),s=[1*r[0],1*r[1]],n=SVGCreator.getTransform(a,3);return s[0]==n.sw&&s[1]==n.sh},outerBBox:function(t,a,o){var i=t.props.transform,r=o?0:Shape.getAngle(i),s=Shape.getCornerPoints(i.pos,i.dim,r),n=(a||e("#"+t.nvOProps.nvDProps.id)).data("handles"),d=[];e.each(s,function(e,t){d.push({x:t.x,y:t.y})});var p=[];if(n&&e.each(n,function(e,t){xval=i&&i.fliph?i.dim.width-t[0]:t[0],yval=i&&i.flipv?i.dim.height-t[1]:t[1],hval=zoho.math.getRotatedValue(r,xval,yval,.5*i.dim.width,.5*i.dim.height);var a={x:hval.x+i.pos.left,y:hval.y+i.pos.top};p.push(a),d.push(a)}),t.props.effects&&!o){var l=t.props.effects,h=l.shadow?l.shadow.distance:l.reflection?l.reflection.distance:void 0,c=h&&h.angle?h.angle:0,f=h&&h.radius?h.radius:0;if(t.props.effects.shadow&&t.props.effects.shadow.type!=ShapeConstants.ShadowType.INNER){var u=zoho.math.toRadians(c),m=f*Math.cos(u),g=f*Math.sin(u),S=Shape.getCornerPoints({left:m+i.pos.left,top:g+i.pos.top},i.dim,r);e.each(S,function(e,t){d.push({x:t.x,y:t.y})}),n&&e.each(p,function(e,t){d.push({x:m+t.x,y:g+t.y})})}if(!e.isEmptyObject(t.props.effects.reflection)){var x=[Shape.shapeId,Shape.reflectionShapeId];e.each(x,function(e,a){var o=t.props.effects.reflection.pos,i=VectorUtil.getMinAndMax(d),r=(i.big.y-i.small.y)*o.end+f,s=i.big;d.push({x:s.x,y:s.y+r})})}}var v=Shape.getMarkerDim(t),y=VectorUtil.getMinAndMax(d),E=t.props.stroke&&t.props.stroke.width?t.props.stroke.width:0,C=.5*E+v*E;return[{x:y.small.x-C,y:y.small.y-C},{x:y.big.x+C,y:y.big.y+C}]},getCornerPoints:function(e,t,a,o){if(a=a||0,o)i=o.cx,r=o.cy;else var i=e.left+.5*t.width,r=e.top+.5*t.height;var s=e.left+t.width,n=e.top+t.height;return{c1:zoho.math.getRotatedValue(a,e.left,e.top,i,r),c2:zoho.math.getRotatedValue(a,s,e.top,i,r),c3:zoho.math.getRotatedValue(a,e.left,n,i,r),c4:zoho.math.getRotatedValue(a,s,n,i,r)}},getAngle:function(e){return void 0!==e.rotAngle?e.rotAngle:e.rotate||0},getMarkerDim:function(t){if(!t.props.stroke)return 0;var a,o,i=t.props.stroke.headend,r=t.props.stroke.tailend,s=0,n=0;return i&&(n=e.Stroke.marker[0][i.width],s=e.Stroke.marker[0][i.height]),r&&(a=e.Stroke.marker[0][r.width],s=s>(o=e.Stroke.marker[0][r.height])?s:o,n=n>a?n:a),marker=s>n?s:n,marker},getShapeObject:function(e,t){if(t[t.type.toLowerCase()].nvOProps.nvDProps.id===e)return t},getShape:function(e,t){if(t.nvOProps.nvDProps.id===e)return t},updateShapeData:function(e,t,a=t.props,o=!1){e.setData(a,t,o)},_set:function(e,t,a,o){e._set(t,a,o)},erase:function(t){var a=t.children("."+Shape.shapeClass);e.each(a,function(t,a){var o=(a=e(a)).data();o&&o.erasable&&a.remove()})},create:{draw:function(t,a,o){var i=t.type,r=Shape.create.getBBoxContainer(t,a,o);o=r.box;var s=r.pathContainer,n=r.defs,d=r.isBoxExist;return o.data("shapeType",i),t.editData?o.data("editData",!0):o.data("editData",!1),Shape.create.addPath(t,o,s,n,"shape"),Shape.props.transform.set(t,a,o),Shape.props.blend.set(t,a,o),i&&i.toUpperCase()==ShapeConstants.ShapeNodeType.PICTURE&&Shape.picture.set(t,a,o),Shape.props[t.props.fills?"fills":"fill"].set(t,a,o),Shape.props[t.props.strokes?"strokes":"stroke"].set(t,a,o),t.props.alpha&&Shape.props.alpha.set(t,a,o),t.props.blur&&Shape.props.blur.set(t,a,o),Shape.textBody.set(t,a,o),Shape.props.effects.set(t,a,o),d||t.doNotAppendToCont||e(a).append(o),t.nvOProps&&Shape.nvOProps.nvODProps.set(t,a,o),t.renderPlace&&(o.data(Shape.parentType,t.renderPlace),o.data(Shape.renderPlace,t.renderPlace)),Shape.create.placeHolder&&Shape.create.placeHolder.icon.set(t,a,e(o)),Shape.create.editData&&Shape.create.editData.icon.set(t,a,e(o)),Shape.create.previewData&&Shape.create.previewData.icon.set(t,a,e(o)),o.data("shape_rendered",!0),1==t.erasable&&o.data("erasable",!0),t.nvOProps.nvDProps.hidden&&o.hide(),1==t.applyClip&&Shape.props.applyClip(t,a,o),e(o)},updateAndDraw:function(e,t,a){return Shape.create.draw(e,t,a)},getBBoxContainer:function(t,a,o){var i,r=!0,s=!1,n=Shape.shapeClass,d=t.nvOProps.nvDProps.id;if(t.className&&(n=n+" "+t.className),o&&o.length&&e.emptyBox(o),o)s="g"===e(o)[0].tagName;else if(0===(o=a.find("#"+d)).length?(r=!1,(s="g"===e(a)[0].tagName.toLowerCase())?(o=e(Shape.creator.createGroup(a)),Shape.creator.set(o,{id:d,class:n})):(o=e("<div style= 'position:absolute;'></div>")).attr({id:d,box_id:d})):(s="g"===e(o)[0].tagName,e.emptyBox(o),o.attr("class","")),o.addClass(n),!s){var p=Shape.creator.getDefaultRoot();Shape.creator.set(p,{id:"root",class:"base_root"})}var l;if(l=s?Shape.creator.createDefinitions(o):Shape.creator.createDefinitions(p)){var h=e(Shape.creator.createGroup(o[0])),c=Math.uuid();if(e(o).attr("rotategroupId",c),Shape.creator.set(h[0],{id:c,class:Shape.rotationalGroupClass}),s)e(o).append(l),o.append(h);else{var f=e("<span id='svgcontainer' style='display:block;'>");f.append(p),o.append(f),e(p).append(l),e(p).append(h)}}var u=e(Shape.creator.createGroup(o[0]));return s?(i=u[0],Shape.creator.set(u[0],{id:Shape.shapeId,class:Shape.shapeId+" group"}),h.append(u),o.data("groupId",Shape.shapeId)):u?(i=u[0],Shape.creator.set(u[0],{id:Shape.shapeId,class:Shape.shapeId+" group"}),h.append(u),o.data("groupId",Shape.shapeId)):(i=p,Shape.creator.set(i,{class:Shape.shapeId+" group"}),o.data("groupId","root")),{box:o,pathContainer:i,defs:l,isBoxExist:r,isSvgContainer:s}},addPath:function(t,a,o,i,r){var s=VectorUtil.getPathList(t),n=new Array,d=Shape;e.each(s,function(r,s){var p=Shape.pathId+r,l=Shape.props.stroke.selector(a,s),h=Shape.pathId;if(l)h=Shape.pathId+" selector";else if(r&&!e.isEmptyObject(t.TableCellBorders)){var c=t.TableCellBorders[r-1]?t.TableCellBorders[r-1].clsName:"";h=Shape.pathId+" "+c}n.push(p);var f=d.creator.createPath(a);d.creator.set(f,{id:p,class:h}),e(o).append(f),i||a.append(e(o))})},removePath:function(t,a){var o=e("."+Shape.pathId,a);if(o.length&&o.remove(),t.props.fills){var i=e("#"+Shape.multipleFillId,a);i.length&&i.empty()}if(t.props.strokes){var r=e("#"+Shape.multipleStrokeId,a);r.length&&r.empty()}}},getRotationalContainer:function(e){var t=e.attr("rotategroupId");return e.find("#"+t)},box:function(e,t){return Util.isJQueryObject(t)?t.find("#"+e.nvOProps.nvDProps.id):DOMUtil.select("#"+e.nvOProps.nvDProps.id,t)},nvOProps:{nvProps:{set:function(e,t){},get:function(e,t){return e}},nvDProps:{set:function(e,t){var a=e.nvOProps.nvDProps.hidden,o=Shape.box(e,t);o&&(a?o.hide():o.show())},click:{set:function(e,t){}}},nvODProps:{set:function(e,t,a){Shape.nvOProps.nvODProps.locks.set(e,t,a)},locks:{set:function(e,t,a){a=a||Shape.box(e,t);var o=e.nvOProps.nvODProps;e.editData?a.data("editData",!0):a.data("editData",!1),(o&&o.locks?o.locks:{}).noModify?a.data("lock",!0):a.data("lock",!1)},dependency:function(e,t,a){a=a||Shape.box(e,t),!(!e.nvOProps.nvODProps.locks||!e.nvOProps.nvODProps.locks.noModify)&&e.nvOProps.nvODProps.locks.noModify?(Shape.create.placeHolder&&Shape.create.placeHolder.icon.remove(e,t,a),Shape.create.editData&&Shape.create.editData.icon.remove(e,t,a)):(Shape.create.placeHolder&&Shape.create.placeHolder.icon.set(e,t,a),Shape.create.editData&&Shape.create.editData.icon.set(e,t,a),Shape.create.previewData&&Shape.create.previewData.icon.set(e,t,a))},remove:function(e,t,a){(a=a||Shape.box(e,t)).data("lock",!1),e.editData?a.data("editData",!0):a.data("editData",!1)}}},remove:function(e){}},props:{applyClip:function(t,a,o){if(clipObj=t.clip?t.clip:void 0,clipObj){var i=Shape.creator.createElement(o,"clipPath"),r={},s={};r.id=clipObj.id?clipObj.id+Math.uuid():Math.uuid(),Shape.creator.set(i,r);var n=Shape.creator.createElement(i,"rect");clipObj.pathEleId&&(s.id="rect_"+r.id),void 0!=clipObj.left&&(s.x=clipObj.left),void 0!=clipObj.top&&(s.y=clipObj.top),void 0!=clipObj.width&&(s.width=clipObj.width),void 0!=clipObj.height&&(s.height=clipObj.height),Shape.creator.set(n,s),e.ChartUtil.ChartClipUtil.balanceTranslation(clipObj,n),e(i).append(n),e(o).append(i),Shape.creator.set(e(o.find(".rotategroup")),{"clip-path":"url(#"+r.id+")"})}},set:function(e,t,a){Shape.props.geom.set(e,t,a),Shape.props.transform.set(e,t,a),e.props.blend&&Shape.props.blend.set(e,t,a),Shape.props[e.props.fills?"fills":"fill"].set(e,t,a),Shape.props[e.props.strokes?"strokes":"stroke"].set(e,t,a),e.props.alpha&&Shape.props.alpha.set(e,t,a),e.props.blur&&Shape.props.blur.set(e,t,a),e.props.effects?Shape.props.effects.set(e,t,a):Shape.props.effects.remove(e,t,a)},dependency:function(e,t,a){e.type===ShapeConstants.ShapeNodeType.PICTURE&&Shape.picture.set(e,t,a),e.textBody&&Shape.textBody.textBodyDimensionChange(e,t,a)},remove:function(e,t){var a=Shape.box(e,t);a.length&&(e.props&&!e.props.effects&&Shape.props.effects.remove(e,t,a),Shape.props.set(e,t,a))},animData:{set:function(e,t){},remove:function(e,t){}},anim:{set:function(e,t){},remove:function(e,t){}},blend:{set:function(e,t,a){a=a||Shape.box(e,t);var o=e.props.blend;if(o){var i="mix-blend-mode :"+Shape.props.fill.blend.map[o];Shape.creator.set(a[0],{style:i})}}},transform:{set:function(e,t,a,o){if((a=a||Shape.box(e,t)).length){var i=e.props.transform,r=Shape.props.transform;for(var s in i)"object"==typeof i[s]&&void 0!==r[s]&&r[s].set.call(r,e,t,a,o);r.setAttr(i,a,o,e)}},dependency:function(e,t,a,o){if((a=a||Shape.box(e,t)).length){var i=e.props.effects;i&&(Shape.props.effects[i.shadows?"shadows":"shadow"].set(e,t,a),Shape.props.effects.reflection.set(e,t,a)),e.props.fill&&e.props.fill.type!==ShapeConstants.FillType.SOLID&&e.props.fill.type!==ShapeConstants.FillType.NONE&&e.props.fill.type!==ShapeConstants.FillType.PATTERN&&(Shape.props.fill.set(e,t,a),Shape.props.fill.dependency(e,t,a)),e.props.fills&&Shape.props.fills.set(e,t,a),e.type===ShapeConstants.ShapeNodeType.PICTURE&&Shape.pictureProps.fill(e,t,a),e.type===ShapeConstants.ShapeNodeType.CONNECTOR&&Shape.creator.marker(e,t,a),e.textBody&&!o&&Shape.textBody.textBodyDimensionChange(e,t,a),Shape.create.placeHolder&&Shape.create.placeHolder.icon.set(e,t,a),Shape.create.editData&&Shape.create.editData.icon.set(e,t,a),Shape.create.previewData&&Shape.create.previewData.icon.set(e,t,a)}},setAttr:function(e,t,a){this.rotate(e,t,a),this.flip(e,t,a)},rotate:function(t,a,o){t.rotAngle=Shape.getAngle(t);var i=a.attr("rotategroupId"),r=e(a).find("#"+i);Shape.creator.rotateShape(Shape.getAngle(t),e(r),t.dim)},rotateText:function(e,t){if(Shape.isTextRotateSupported){var a=e.data(Shape.textbox);if(a){var o=Shape.textBody.updateDimension(a,t);Shape.creator.rotateTextElement(e,o,t)}}},flip:function(t,a,o){var i="none";t.fliph&&!t.flipv?i="x":!t.fliph&&t.flipv?i="y":t.fliph&&t.flipv&&(i="both");var r=Shape.creator.pathContainer(a,o);r.length&&Shape.creator.flipShape(e(r),i,t.dim,Shape.getAngle(t))},origin:{set:function(e,t,a,o){},dependency:function(e,t,a){Shape.props.transform.set(e,t,a)}},pos:{set:function(t,a,o,i){if(void 0===o&&(o=Shape.box(t,a)),o.length){var r=t.props.transform.pos;"g"===e(o)[0].tagName?Shape.creator.posShape(e(o)[0],r):(void 0!==r.zindex&&o.css({"z-index":r.zindex}),o.css({left:r.left,top:r.top}))}}},dim:{set:function(t,a,o,i){if((o=o||Shape.box(t,a)).length){var r=t.props.transform.dim;if("g"===e(o)[0].tagName)Shape.props.geom._set(t,a,o);else{var s=Shape.creator.getRoot(o,i);s&&s.length&&(Shape.creator.setRoot(s,r.width,r.height,a,t),Shape.creator.setShapeDimension(o,r.width,r.height),Shape.props.geom._set(t,a,o))}}},dependency:function(t,a,o){if((o=o||Shape.box(t,a)).length){var i=!!a&&e(a).data("setMatrix");Shape.props.transform.setAttr(t.props.transform,o,void 0,t,i),Shape.props.transform.dependency(t,a,o)}}}},geom:{set:function(e,t,a){if((a=a||Shape.box(e,t)).length){var o=a.find("#defs");o=o.length?o:void 0,Shape.create.removePath(e,a);var i=Shape.creator.pathContainer(a);i&&i.length&&Shape.create.addPath(e,a,i,o)}},_set:function(e,t,a){a=a||Shape.box(e,t),this[e.props.geom.type.toLowerCase()].set.call(this,e,t,a)},dependency:function(e,t,a){a||(a=Shape.box(e,t)),Shape.props.transform.set(e,t,a);var o=e.type;o&&o.toUpperCase()==ShapeConstants.ShapeNodeType.PICTURE?Shape.picture.set(e,t,a):Shape.props[e.props.fills?"fills":"fill"].set(e,t,a),Shape.props[e.props.strokes?"strokes":"stroke"].set(e,t,a),Shape.props.effects.set(e,t,a),e.textBody&&Shape.textBody.textBodyDimensionChange(e,t,a)},preset:{set:function(e,t,a){a=a||Shape.box(e,t);var o=Shape.props.geom.preset._set(e);Shape.props.geom.setPath(e,t,a,o)},_set:function(t){var a=t.props.geom.preset,o=a.modifiers&&a.modifiers.length?a.modifiers:e.Preset[a.type].modifiers,i=t.props.transform.dim,r=a.cornerRadius?a.cornerRadius:0;return Shape.pathGenerator.getPath(a.type,i.width,i.height,o,r)},remove:function(e,t,a){Shape.props.geom.preset.set(e,t,a)},dependency:function(e,t,a){!e.props.fill||e.props.fill.type!=ShapeConstants.FillType.GRADIENT&&e.props.fill.type!=ShapeConstants.FillType.PICT?e.type&&e.type.toUpperCase()==ShapeConstants.ShapeNodeType.PICTURE&&Shape.picture.set(e,t,a):Shape.props.fill.set(e,t,a),e.textBody&&Shape.textBody.textBodyDimensionChange(e,t,a)},smartModifiers:{set:function(e,t){},remove:function(e,t){}}},custom:{set:function(e,t,a){a=a||Shape.box(e,t);var o=e.props.transform.dim,i=Shape.pathGenerator.getCustomPath(e.props.geom.custom,o.width,o.height);Shape.props.geom.setPath(e,t,a,i)},remove:function(e,t,a){},dependency:function(e,t,a){e.textBody&&Shape.textBody.textBodyDimensionChange(e,t,a)},pathList:{set:function(e,t,a){a=a||Shape.box(e,t);var o=e.props.transform.dim,i=Shape.pathGenerator.getCustomPath(e.props.geom.custom,o.width,o.height),r=DOMUtil.selectAll("#defs",a);r=r.length?r:void 0,Shape.create.removePath(e,a);var s=Shape.creator.pathContainer(a);Shape.create.addPath(e,a,s,r),Shape.props.geom.setPath(e,t,a,i)},remove:function(){},dependency:function(e,t,a){var o=e.type;o&&o.toUpperCase()==ShapeConstants.ShapeNodeType.PICTURE?Shape.picture.set(e,t,a):Shape.props[e.props.fills?"fills":"fill"].set(e,t,a),Shape.props[e.props.strokes?"strokes":"stroke"].set(e,t,a),e.textBody&&Shape.textBody.textBodyDimensionChange(e,t,a)}}},setPath:function(t,a,o,i){for(var r=Shape.creator.getGroup(o),s=0;s<i.path.length;s++){var n=i.path[s],d=r.children("#"+Shape.pathId+s);d.length&&Shape.creator.setPath(d[0],n)}t.props.fills&&this.setFillsPath(t,a,o,r,i),t.props.strokes&&this.setStrokesPath(t,a,o,r,i);var p=e("#"+o.data(Shape.creator.clipId),a).find("path");p&&p.length&&Shape.creator.setPath(p,i.path[1]),delete i.path;for(var l in i)o.removeData(l),value=i[l],"undefined"!=typeof value&&o.data(l,value);Shape.textBody.setDimension(t,a,o)},setFillsPath:function(e,t,a,o,i){var r=o.children("#"+Shape.multipleFillId);if(r)for(var s=r.children(),n=s.length,d=0;d<n;d++)for(var p=s[d],l=i.path.length,h=0;h<l;h++){var c=i.path[h],f=DOMUtil.select("#"+Shape.pathId+h,p);f&&Shape.creator.setPath(f,c)}},setStrokesPath:function(e,t,a,o,i){var r=o.children("#"+Shape.multipleStrokeId);if(r)for(var s=r.children(),n=s.length,d=0;d<n;d++){var p=s[d],l=i.path.length;for(j=0;j<l;j++){var h=i.path[j],c=DOMUtil.select("#"+Shape.pathId+j,p);c&&(Shape.creator.setPath(c,h),SVGStroke.position(void 0,c,c,void 0,e,a,d))}}}},blur:{get:function(e){return e},remove:function(t,a,o){o=o||Shape.box(t,a),Shape.creator.removeBlurFilter(o,o),e(o).removeData(Shape.blurFilterId)},preset:{set:function(e,t,a){},remove:function(e,t,a){}},set:function(t,a,o){o=o||Shape.box(t,a);var i=t.props,r=i?i.blur:void 0,s=Shape.props.blur,n=e(o);if(r){var d,p=DOMUtil.select(".rotategroup",o[0]),l=e(n).data(Shape.blurFilterId);if(l){l=e(n).data(Shape.blurFilterId),d=o.find("#filter_"+l);for(var h=0;h<p.length;h++)e(p[h]).attr("filter","url(#filter_"+l+")")}else l!==Shape.blurFilterId&&(l=Math.uuid(),e(n).data(Shape.blurFilterId,l),d=Shape.creator.createFilterElement(o,Shape.blurFilterId),Shape.creator.set(d,{id:"filter_"+l})),Shape.creator.createBlurElement(o,l).classList="blurClass_",e(p).attr("filter","url(#filter_"+l+")");t.type!=ShapeConstants.ShapeNodeType.GROUPSHAPE&&Shape.props.transform.set(t,a,o,Shape.shapeId),s.radius(t,a,o,n)}else s.remove(t,a,o)},radius:function(t,a,o){o=o?e(o):Shape.box(t,a);var i=t.props.blur.type,r=t.props.blur[i.toLowerCase()].radius,s=o.data(Shape.blurFilterId),n=o.find("#filter_"+s);Shape.creator.setGaussianConvolution(n,r,"")}},alpha:{get:function(e){return e},set:function(e,t,a){void 0===a&&(a=Shape.box(e,t)),Shape.creator.set(a,{opacity:1-e.props.alpha})}}},picture:{set:function(e,t,a,o){a=a||Shape.box(e,t),a=Util.getJQueryElement(a);var i=Shape.imageElement.set(e,a,o);Shape.imageElement.crop(e,a,o,i),Shape.imageElement.pictureProps(e,a,o)}},pictureProps:{set:function(e,t,a,o){a=a||Shape.box(e,t),Shape.imageElement.pictureProps(e,a,o)},dependency:function(e,t,a){a=a||Shape.box(e,t),Shape.props.effects.set(e,t,a)},luminance:{set:function(e,t,a){a=a||Shape.box(e,t),Shape.pictureProps.set(e,t,a)},dependency:function(e,t,a){Shape.pictureProps.dependency(e,t,a)}},colorMode:{set:function(e,t,a){a=a||Shape.box(e,t),Shape.pictureProps.set(e,t,a)},dependency:function(e,t,a){Shape.pictureProps.dependency(e,t,a)}},colorChange:{set:function(e,t,a){a=a||Shape.box(e,t),Shape.pictureProps.set(e,t,a)},dependency:function(e,t,a){Shape.pictureProps.dependency(e,t,a)}},getContrast:function(e){return e<0?e+=1:(e*=10,e+=1),e},fill:function(e,t,a){var o=e.url;if(o){var i={url:o};Shape.imageElement.fill(e,a,i)}else Shape.picture.set(e,t,a)},alpha:{set:function(e,t,a,o){a=a||Shape.box(e,t),Shape.imageElement.alpha(e,a,o)},dependency:function(e,t,a){Shape.pictureProps.dependency(e,t,a)}},remove:function(e,t,a){a=a||Shape.box(e,t),Shape.picture.set(e,t,a)}},crop:{set:function(e,t,a,o){a=a||Shape.box(e,t),Shape.imageElement.crop(e,a,o)},dependency:function(e,t,a){a=a||Shape.box(e,t),Shape.props.effects.set(e,t,a)}},value:{get:function(e,t){return e},set:function(e,t){Shape.picture.set(e,t)}},converter:{convert:function(e,t,a){this[e]&&this[e].call(this,t,a,e)},solid:function(e,t){void 0!==e.color.colorModelRep&&e.color.colorModelRep===ShapeConstants.ColorModelRepresentation.HSB||(e.color.rgb=zoho.color.tweak(e.color.rgb,t),e.color.rgb=VectorUtil.convertRGBToString(e.color.rgb))},pattern:function(t,a,o){o=o.toUpperCase();for(var i,r=e.extend(!0,[],t.foreground),s=t.foreground[0].fill,n=["pct60","pct70","pct75","pct80","pct90","trellis"],d=t.preset,p=0;p<n.length;p++)if(d===n[p]){i=!0;break}if(i&&(t.reverse=i),t.reverse){for(var l=e.extend(!0,{},t.background),p=0;p<r.length;p++)r[p].fill=l;t.foreground=r,t.background.solid=s.solid}else{for(p=0;p<r.length;p++)r[p].fill=s;t.foreground=r}},gradient:function(e,t){for(var a=0;a<e.stops.length;a++){var o=e.stops[a];void 0!==o.color.colorModelRep&&o.color.colorModelRep===ShapeConstants.ColorModelRepresentation.HSB||(o.color.rgb=zoho.color.tweak(o.color.rgb,t),o.color.rgb=VectorUtil.convertRGBToString(o.color.rgb))}e.type!==ShapeConstants.GradientFillType.LINEAR||e.rotate?e.type!==ShapeConstants.GradientFillType.RADIAL||e.radial?e.type!==ShapeConstants.GradientFillType.ANGULAR||e.angular||(e.angular=Shape.getShapeDefaultData("fill.GRADIENT.ANGULAR.angular")):e.radial=Shape.getShapeDefaultData("fill.GRADIENT.RADIAL.radial"):e.rotate=Shape.getShapeDefaultData("fill.GRADIENT.LINEAR.rotate")}}}}(jQuery),function(e){var t={type:void 0,map:{EVEN_ODD:"evenodd",NO_RULE:"evenodd",NON_ZERO:"nonzero"},defaultColor:{tweaks:{alpha:1},rgb:"rgb(255, 255, 255)"},set:function(t,a,o,i){if((t.type!=ShapeConstants.ShapeNodeType.PICTURE||!e.isEmptyObject(i))&&(o||(o=Shape.box(t,a)),Util.isJQueryObject(o)&&(o=Util.getElement(o)),Util.isJQueryObject(a)&&(a=Util.getElement(a)),o&&a)){var r=i&&i.fillData?i.fillData:t.props.fill;r||(r={type:ShapeConstants.FillType.NONE}),r.rule||(r.rule=ShapeConstants.FillRule.EVEN_ODD);var s=r.type.toLowerCase();Shape.props.fill[s].set.call(Shape.props.fill,t,a,o,i)}},dependency:function(e,t,a){if(a||(a=Shape.box(e,t)),a&&0!==a.length){var o=e.props.effects;o&&(Shape.props.effects[o.shadows?"shadows":"shadow"].set(e,t,a),Shape.props.effects.reflection.set(e,t,a)),Shape.create.editData&&Shape.create.editData.icon.set(e,t,a),Shape.create.previewData&&Shape.create.previewData.icon.set(e,t,a)}},_setfill:function(e,t,a,o){var i=o&&o.fillData?o.fillData:e.props.fill,r=o&&o.name?o.name:"fill",s=i,n=o&&o.pathId?o.pathId:void 0,d=i.type.toLowerCase();i=i[d];var p,l=Shape.props.fill,h="",c=o&&o.pathList?o.pathList:VectorUtil.getPathList(e);if(o&&"reflection"===o.type){h=o.type;var f=o.groupId?o.groupId:Shape.reflectionShapeId;p=DOMUtil.selectAll("#"+f,a)}else{var u=a.querySelector(".rotategroup");p=Shape.creator.pathContainer(u,n)}r||(r="fill");for(var m=o&&o.index,g=0;g<p.length;g++)for(var S=p[g],x=0;x<c.length;x++){var v=c[x],y=DOMUtil.select("#"+Shape.pathId+x,S);if(y){var E=Util.extend(!0,{},i);"stroke"===r&&v.stroke&&"SELECTOR"!==v.stroke.fill&&"NONE"!==v.stroke.fill&&"TABLECELL"===e.props.geom.preset.type&&(v.stroke={},v.stroke.fill="CUSTOM",v.stroke.data=Util.extend(!0,{},e.TableCellBorders[x-1]));var C={};if(v=v[r]){if("NONE"===v.fill){l.type="none",l.none._none.call(l,y,{none:"none"},r+"Element",y,a);continue}if("SELECTOR"===v.fill){l.type="solid",l.solid._solid.call(l,y,{color:l.defaultColor},r+"Element",y,a);continue}if("CUSTOM"===v.fill){var O={color:{tweaks:{alpha:0},rgb:"rgb(255, 255, 255)"}};!Util.isEmptyObject(v.data)&&v.data.fill&&v.data.fill.type===ShapeConstants.FillType.SOLID&&v.data.fill.solid?(O.color=v.data.fill.solid.color,Shape.converter.convert(d,O,C),l.type="solid",l.solid._solid.call(l,y,O,r+"Element",y,a)):(O={none:"none"},l.type="none",l.none._none.call(l,y,O,r+"Element",y,a));continue}v.tweaks&&!h.length&&(C=v.tweaks)}Shape.converter.convert(d,E,C);for(var b in s)if("object"!=typeof s[b]){var T=Shape.fillElement[b];T&&T(y,s,a)}l.type=d;var w="_"+d;l[d][w].call(l,y,E,r+"Element",y,a,e,m)}}},blend:{map:{NORMAL:"normal",MULTIPLY:"multiply",SCREEN:"screen",OVERLAY:"overlay",DARKEN:"darken",LIGHTEN:"lighten",COLOR_DODGE:"color-dodge",HARD_LIGHT:"hard-light",SOFT_LIGHT:"soft-light",DIFFERENCE:"difference",EXCLUSION:"exclusion",HUE:"hue",SATURATION:"saturation",COLOR:"color",LUMINOSITY:"luminosity",COLOR_BURN:"color-burn"}},grp:{set:function(){},_grp:function(){}},solid:{set:function(e,t,a,o,i){a||(a=Shape.box(e,t)),Util.isJQueryObject(a)&&(a=Util.getElement(a)),Util.isJQueryObject(t)&&(t=Util.getElement(t));o&&o.fillData?o.fillData:e.props.fill;Shape.props.fill._setfill(e,t,a,o,i)},_solid:function(e,t,a,o,i,r,s){var n=Shape,d=n.creator[a](e);t=Util.extend(!0,{color:{tweaks:{alpha:0}}},t);for(var p in t.color){var l=Shape[a][n.props.fill.type][p];l&&l.call(Shape[a],d,t.color[p],e,o,i,r,s,t.color)}}},none:{set:function(e,t,a,o){a||(a=Shape.box(e,t)),Util.isJQueryObject(a)&&(a=Util.getElement(a)),Util.isJQueryObject(t)&&(t=Util.getElement(t));var i={};i.fillData={type:ShapeConstants.FillType.NONE},o=Util.extend(!0,o,i),Shape.props.fill._setfill(e,t,a,o)},_none:function(e,t,a,o,i,r){var s=Shape,n=s.creator[a](Util.getJQueryElement(e));n=Util.getElement(n),s[a].none.call(s[a],n,e,o,i,r)}},gradient:{set:function(e,t,a,o){a||(a=Shape.box(e,t)),Util.isJQueryObject(a)&&(a=Util.getElement(a)),Util.isJQueryObject(t)&&(t=Util.getElement(t));o&&o.fillData?o.fillData:e.props.fill;Shape.props.fill._setfill(e,t,a,o)},dependency:function(e,t,a){a=a||Shape.box(e,t),e.props.effects&&(e.props.effects.shadow&&Shape.props.effects.shadow.color.set(e,t,a),Shape.props.effects.reflection.set(e,t,a))},_gradient:function(e,t,a,o,i,r,s){var n=Shape,d=t.type.toLowerCase();"radial"!==d&&"angular"!==d&&(d="linear");var p=e.getDataset(n.creator.fillId);p&&(DOMUtil.select("#"+p,i).remove(),e.removeDataset(n.creator.fillId));var l=n.creator[a](e,Util.getJQueryElement(i),n.props.fill.type,d),h=n[a][n.props.fill.type];if(void 0!==t.rotate){let i=h.rotate;i.call(n[a],l,t.rotate,e,o,r.props,d,s)}if(t.type)if(t.type==ShapeConstants.GradientFillType.RADIAL){let i=t.radial;i&&i.fillToRect||(i=t);let p=h.radial;p.call(n[a],l,i,e,o,r.props,d,s)}else if(t.type==ShapeConstants.GradientFillType.LINEAR&&t.linear){let i=h.linear;i.call(n[a],l,t.linear,e,o,r.props,d,s)}else if(t.type==ShapeConstants.GradientFillType.ANGULAR){val={offset:t.offset};let p=h.angular;p.call(n[a],l,val,e,o,r.props,d,s,i,r,t)}t.stops&&(val=n.props.fill.gradient.sortStopArr(Util.extend(!0,[],t.stops)),h.stops.call(n[a],l,val,e,o,r.props,d,s))},sortStopArr:function(e){for(var t=[],a={},o=[],i=0;i<e.length;i++){var r=e[i];a[r.position]=r,o[o.length]=r.position}zoho.array.sort(o);for(var s=0;s<o.length;s++)t[t.length]=a[o[s]];return t}},pattern:{set:function(e,t,a,o){o&&o.fillData?o.fillData:e.props.fill;a||(a=Shape.box(e,t)),Util.isJQueryObject(a)&&(a=Util.getElement(a)),Util.isJQueryObject(t)&&(t=Util.getElement(t)),Shape.props.fill._setfill(e,t,a,o)},dependency:function(e,t,a){a=a||Shape.box(e,t),e.props.effects&&(e.props.effects.shadow&&Shape.props.effects.shadow.color.set(e,t,a),Shape.props.effects.reflection.set(e,t,a))},_pattern:function(e,t,a,o,i,r){var s=Shape,n=e.getDataset(s.creator.fillId);n&&(DOMUtil.select("#"+n,i).remove(),e.removeDataset(s.creator.fillId));var d=s.creator.fillElement(e,Util.getJQueryElement(i),"pattern","pattern");t=Util.extend(!0,{},t);for(var p=["distance","rotate","background","foreground","tweaks"],l=0;l<p.length;l++){var h=s[a][s.props.fill.type][p[l]];if(h){var c=t[p[l]];"background"==p[l]&&(c.dim=t.distance),h.call(s[a],d,c,e,o,r.props,Util.getJQueryElement(i))}}}},pict:{set:function(e,t,a,o){var i=Shape,r=o&&o.fillData?o.fillData:e.props.fill;if(a||(a=Shape.box(e,t),a=Util.getElement(a)),Util.isJQueryObject(a)&&(a=Util.getElement(a)),Util.isJQueryObject(t)&&(t=Util.getElement(t)),r.pict&&r.pict.value){var s,n={data:e,container:t,box:a,object:o};"USERDEFINED"===r.pict.value.type&&(s=r.pict.value.dim),s?(a.data().origImageDim=s,s.origImageDim=!0,i.props.fill.pict._set(s,n)):(i.props.fill.pict._set({width:0,height:0,origImageDim:!1},n),VectorUtil.getImageDim(r.pict.value.url,i.props.fill.pict._set,n))}},dependency:function(e,t,a){a=a||Shape.box(e,t),Shape.props.effects.set(e,t,a)},_set:function(e,t){var a=t.object&&t.object.fillData?t.object.fillData:t.data.props.fill;a.pict.value.width=e.width,a.pict.value.height=e.height,a.pict.value.origImageDim=e.origImageDim,Shape.props.fill._setfill(t.data,t.container,t.box,t.object)},remove:function(e,t,a){Shape.props.fill.pict.set(e,t,a)},_pict:function(e,t,a,o,i,r,s){var n=Shape,d=n.creator.fillElement(e,Util.getJQueryElement(i),"pattern","pattern");t=Util.extend(!0,{props:{alpha:0}},t);for(var p in t){var l=t[p];if("type"!==p){var h=n[a][n.props.fill.type][p];h&&h.call(n[a],d,l,e,o,r.props,Util.getJQueryElement(i),s)}else n.props.fill.pict._setPictureType(d,l,t,a,e,r,s)}},_setPictureType:function(e,t,a,o,i,r,s){var n=Shape,d=t.type.toLowerCase(),p=t[d];p=n.props.fill.pict["_"+d+"Object"].call(n,p,a,r,s),n[o][n.props.fill.type][d].call(n[o],e,p,i,r.props,r.containerDim)},_frameObject:function(e,t,a){var o=Util.extend(!0,{left:0,right:0,top:0,bottom:0},e);return this.props.fill.pict.updateFrameObj(a,o),o},_tileObject:function(e,t,a,o){var i=Util.extend(!0,{offsetX:0,offsetY:0,scale:{x:1,y:1}},e),r=t.value.width?t.value.width:0,s=t.value.height?t.value.height:0,n=VectorUtil.getViewBoxDimensions(r,s);return i.scale.x=n[0]*i.scale.x,i.scale.y=n[1]*i.scale.y,i},updateFrameObj:function(e,t){if(!VectorUtil.isCalloutShape(e))return t;var a=Util.extend(!0,[],e.props.geom.preset.modifiers),o=parseFloat(a[0]),i=parseFloat(a[1]),r=1-(Math.abs(o)+.5),s=1-(Math.abs(i)+.5);return o<-.5?t.left=t.left+r:o>.5&&(t.right=t.right+r),i<-.5?t.top=t.top+s:i>.5&&(t.bottom=t.bottom+s),t}}},a={get:function(e,t,a){return e.index=t,e.elementIndex=a,e},add:function(e,t,a){if(a||(a=Shape.box(e,t)),Util.isJQueryObject(a)&&(a=Util.getElement(a)),Util.isJQueryObject(t)&&(t=Util.getElement(t)),a&&t&&e.props.fills){var o=e.index;if(void 0!==o){var i=e.props.fills[o];Shape.props.fills.addFill(e,t,a,i,o,!0)}}},set:function(t,a,o){if(o||(o=Shape.box(t,a)),Util.isJQueryObject(o)&&(o=Util.getElement(o)),Util.isJQueryObject(a)&&(a=Util.getElement(a)),o&&a){var i=t.props.fills;if(i){var r={fillData:{type:"NONE"}};Shape.props.fill.set(t,a,o,r),e.each(i,function(e,i){var r=i;Shape.props.fills.addFill(t,a,o,r,e)})}}},remove:function(e,t,a){if(a||(a=Shape.box(e,t)),Util.isJQueryObject(a)&&(a=Util.getElement(a)),Util.isJQueryObject(t)&&(t=Util.getElement(t)),a&&t&&e.props.fills){var o=e.elementIndex>-1?e.elementIndex:e.index;if(void 0!==o){var i=e.props.fills[o];Shape.props.fills.deleteFill(e,t,a,i,o)}}},getObject:function(e,t,a){return{fillData:e,pathId:"fill"+t,pathList:a,index:t}},rule:{remove(){}},none:{set:function(e,t,a){var o=e.index;Shape.props.fill.none.set(e,t,a,Shape.props.fills.getObject(e.props.fills[o],o),o)}},solid:{set:function(e,t,a){var o=e.index;Shape.props.fill.solid.set(e,t,a,Shape.props.fills.getObject(e.props.fills[o],o),o)}},gradient:{set:function(e,t,a){var o=e.index;Shape.props.fill.gradient.set(e,t,a,Shape.props.fills.getObject(e.props.fills[o],o),o)}},deleteFill:function(t,a,o,i,r){var s=DOMUtil.selectAll("#"+Shape.multipleFillId,o),n=DOMUtil.selectByAttribute("index",r,s[0]),d=(n=e(n)).find("path")[0].getAttribute("fill");if(-1!==d.indexOf("url(")){var p=d.substring(d.indexOf("(")+1,d.indexOf(")")),l=Shape.creator.getDefinitions(e(o));e(l).find(p).remove()}n.remove(),Shape.props.fills.resetIndex(s,r)},addFill:function(t,a,o,i,r,s){var n=Shape.props.fills,d=Shape.creator.getGroup(o)[0],p=e(d).children("#"+Shape.multipleFillId);p.length||(p=n.createMultipleFillContainer(t,a,o,d));var l=VectorUtil.getPathList(t);n.createFillGroup(t,a,o,p,l,r,s);var h=n.getObject(i,r,l);Shape.props.fill.set(t,a,o,h)},createMultipleFillContainer:function(t,a,o,i){var r=Shape.creator.createElement(i,"g");Shape.creator.set(r,{id:Shape.multipleFillId}),r=e(r);var s=e("#image",i);return s.length?e(r).insertAfter(s):e(i).prepend(r),r},createFillGroup:function(e,t,a,o,i,r,s){var n=DOMUtil.selectByAttribute("index",r,o[0]);if(s||!n){n=Shape.creator.createElement(o,"g"),Shape.creator.set(n,{id:"fill"+r,index:r});var d=DOMUtil.selectByAttribute("index",r-1,o[0]);d?(n.insertAfter(d),Shape.props.fills.resetIndex(o,r)):0===r?(o.prepend(n),Shape.props.fills.resetIndex(o,r)):o.append(n),Shape.props.fills.constructPathElements(e,t,a,n,i,Shape.multipleFillId)}},constructPathElements:function(t,a,o,i,r,s,n){e(o).attr("rotategroupId");for(var d=0;d<r.length;d++){var p=r[d];if(!Shape.props.stroke.selector(void 0,p)){var l=e(o).find("#"+Shape.pathId+d).attr("d"),h=Shape.pathId+d,c=Shape.creator.createPath(i),f=Util.extend(!0,{d:l,id:h},n);Shape.creator.set(c,f),e(i).append(c)}}},resetIndex:function(t,a){for(var o=e(t).children(),i=a;i<o.length;i++){var r=o[i];Shape.creator.set(r,{index:i,id:"fill"+i})}}};Shape.props.fill=Util.extend(!0,{},t),Shape.props.fills=Util.extend(!0,{},a)}(jQuery),function(e){var t={defaultStroke:{type:ShapeConstants.StrokeType.SOLID,width:1,fill:{type:ShapeConstants.FillType.SOLID,solid:{color:{rgb:[166,166,166]}}},captype:ShapeConstants.CapType.FLAT},set:function(e,t,a,o){if(a||(a=Shape.box(e,t)),Util.isJQueryObject(a)&&(a=Util.getElement(a)),Util.isJQueryObject(t)&&(t=Util.getElement(t)),a&&t){var i=e.placeHolder&&(e.placeHolder.image&&e.placeHolder.image.render||e.placeHolder.chart&&e.placeHolder.chart.render);(e.props.stroke&&e.editable&&e.placeHolder&&e.textBody&&1===e.textBody.paras.length&&!e.textBody.paras[0].portions[0].t||e.editable&&i)&&(e.props.stroke.fill&&e.props.stroke.fill.type!==ShapeConstants.FillType.NONE||((o={data:Util.extend(!0,{},this.defaultStroke)}).data.type=ShapeConstants.StrokeType.SQUARE_DOT)),e.props.stroke||e.props.strokes||(e.props.stroke={});var r=o&&o.data?o.data:e.props.stroke,s=o&&o.index;r.jointype||(r.jointype=ShapeConstants.JoinType.ROUND),r.position||(r.position=ShapeConstants.StrokePosition.CENTER),r.width=r.width?r.width:0;var n=this;for(var d in r)r[d]&&n[d]&&"function"==typeof n[d].set&&n[d].set.call(n,e,t,a,o,s);this.setAttr(e,a,r,o)}},dependency:function(e,t,a){if(a||(a=Shape.box(e,t)),a&&0!==a.length){var o=e.props.effects;o&&(Shape.props.effects[o.shadows?"shadows":"shadow"].set(e,t,a),Shape.props.effects.reflection.set(e,t,a))}},tailend:{set:function(e,t,a,o,i){e.pdfVariables&&e.pdfVariables.noArrows||(a||(a=Shape.box(e,t)),Util.isJQueryObject(a)&&(a=Util.getElement(a)),Shape.props.stroke.marker(e,a,"tailend",o,i))}},headend:{set:function(e,t,a,o,i){e.pdfVariables&&e.pdfVariables.noArrows||(a||(a=Shape.box(e,t)),Util.isJQueryObject(a)&&(a=Util.getElement(a)),Shape.props.stroke.marker(e,a,"headend",o,i))}},marker:function(e,t,a,o,i){var r=e.props.strokes?e.props.strokes[i]:e.props.stroke;if(e.type===ShapeConstants.ShapeNodeType.CONNECTOR&&r.fill&&(!r.fill||r.fill.type!==ShapeConstants.FillType.NONE)){Util.isJQueryObject(t)&&(t=Util.getElement(t));var s=o&&o.pathId?o.pathId:void 0,n=Shape.creator.pathContainer(t,s);n=n[0];var d=r[a];if(d)for(var p=VectorUtil.getPathList(e),l=0;l<p.length;l++){var h=DOMUtil.select("#"+Shape.pathId+l,n);h&&Shape.strokeElement[a](d,h,r.width,e,t,i)}}},setAttr:function(t,a,o,i){var r=i&&i.pathList?i.pathList:VectorUtil.getPathList(t);i&&"text"===i.type&&(i.type,r=VectorUtil.getDefaultPathList());var s=i&&i.pathId?i.pathId:void 0,n=Shape.creator.pathContainer(a,s);if(i&&"reflection"===i.type){i.type;var d=i.groupId?i.groupId:Shape.reflectionShapeId;n=DOMUtil.select("#"+d,a)}for(var p=t.selectorStrokeWidth?t.selectorStrokeWidth:Shape.selectorStrokeWidth,l=i&&i.index,h=0;h<n.length;h++)for(var c=n[h],f=0;f<r.length;f++){var u=r[f],m=Shape.props.stroke.selector(a,u),g=DOMUtil.select("#"+Shape.pathId+f,c);if(g){u.stroke&&"SELECTOR"!==u.stroke.fill&&"NONE"!==u.stroke.fill&&"TABLECELL"===t.props.geom.preset.type&&((o=t.TableCellBorders[f-1])||((o=Util.extend(!0,{},Shape.props.stroke.defaultStroke)).width=0,o.fill.type="NONE",delete o.fill.solid));var S=Shape.creator.strokeElement(g),x=o;if(m){x=Util.extend(!0,{},o);var v=this.getSelectorWidth(o,t,a);x.width=v+p,x.type=ShapeConstants.StrokeType.SOLID,x.nonscale=!0}if(!u.stroke||"NONE"!==u.stroke.fill)for(var y in x){var E=x[y];if(void 0!==E&&E.constructor!==Object&&Shape.strokeElement[y]){var C=Shape.strokeElement[y].call(Shape.strokeElement,E,g,g,o.width,t,a,l,m);e.isEmptyObject(C)||Shape.creator.set(S,C)}}}}},getSelectorWidth(e,t,a){if(t.props.stroke)return e.width;for(var o=0,i=t.props.strokes,r=0,s=0,n=0;n<i.length;n++){var d=i[n];d.fill&&!0===d.fill.hidden||(r=d.position===ShapeConstants.StrokePosition.CENTER&&d.width>r?d.width:r,s=d.position===ShapeConstants.StrokePosition.OUTSIDE&&d.width>s?d.width:s)}return 0!=s&&s>r/2?o=2*s:0!=r&&(o=r),o},updateSelector(t,a,o){if(!t.props.stroke)for(var i=VectorUtil.getPathList(t),r=i.length,s=0;s<r;s++)if(Shape.props.stroke.selector(a,i[s])){var n=DOMUtil.select("#"+Shape.pathId+s,a);if(!n)continue;o=o||Shape.props.stroke.getSelectorWidth(void 0,t,a);var d=t.selectorStrokeWidth?t.selectorStrokeWidth:Shape.selectorStrokeWidth,p=Shape.creator.strokeElement(n),l=o+d,h=Shape.strokeElement.width(l);e.isEmptyObject(h)||Shape.creator.set(p,h)}},fill:{set:function(e,t,a,o){a||(a=Shape.box(e,t)),Util.isJQueryObject(a)&&(a=Util.getElement(a));var i=o&&o.type?o.type:e.type,r=(o&&o.data?o.data:e.props.stroke).fill;r||(r={type:"NONE"}),o||(o={});var s={fillData:r,name:"stroke",type:i};o=Util.extend(!0,o,s),Shape.props.fill.set(e,t,a,o),Shape.props.stroke.updateSelector(e,a)},dependency:function(e,t,a){a||(a=Shape.box(e,t)),a&&0!==a.length&&(e.type===ShapeConstants.ShapeNodeType.CONNECTOR&&(e.props.stroke&&e.props.stroke.tailend&&Shape.props.stroke.tailend.set(e,t,a),e.props.stroke&&e.props.stroke.headend&&Shape.props.stroke.headend.set(e,t,a)),Shape.props.stroke.dependency(e,t,a))}},selector:function(e,t){return!(!t.stroke||"SELECTOR"!==t.stroke.type)}},a={get:function(e,t,a){return e.index=t,e.elementIndex=a,e},add:function(e,t,a){if(a||(a=Shape.box(e,t)),Util.isJQueryObject(a)&&(a=Util.getElement(a)),Util.isJQueryObject(t)&&(t=Util.getElement(t)),a&&t&&e.props.strokes){var o=e.index;if(void 0!==o){var i=e.props.strokes[o];Shape.props.strokes.addStroke(e,t,a,i,o,!0)}}},set:function(t,a,o){if(o||(o=Shape.box(t,a)),Util.isJQueryObject(o)&&(o=Util.getElement(o)),Util.isJQueryObject(a)&&(a=Util.getElement(a)),o&&a){var i=t.props.strokes;i&&e.each(i,function(e,i){Shape.props.strokes.addStroke(t,a,o,i,e)})}},remove:function(e,t,a){if(a||(a=Shape.box(e,t)),Util.isJQueryObject(a)&&(a=Util.getElement(a)),Util.isJQueryObject(t)&&(t=Util.getElement(t)),a&&t&&e.props.strokes){var o=e.elementIndex>-1?e.elementIndex:e.index;void 0!==o&&Shape.props.strokes.deleteStroke(e,t,a,o)}},width:{set:function(e,t,a){a||(a=Shape.box(e,t)),Util.isJQueryObject(a)&&(a=Util.getElement(a));var o=e.index,i=e.props.strokes[o],r=Shape.props.strokes.getObject(i,o);Shape.props.stroke.setAttr(e,a,i,r)}},position:{set:function(e,t,a){a||(a=Shape.box(e,t)),Util.isJQueryObject(a)&&(a=Util.getElement(a));var o=e.index,i=e.props.strokes[o],r=Shape.props.strokes.getObject(i,o);Shape.props.stroke.setAttr(e,a,i,r)}},fill:{set:function(e,t,a){var o=e.index,i=e.props.strokes[o],r=Shape.props.strokes.getObject(i,o);Shape.props.stroke.fill.set(e,t,a,r)},type:{set:function(){}}},dashPattern:{set:function(e,t,a){a||(a=Shape.box(e,t)),Util.isJQueryObject(a)&&(a=Util.getElement(a));var o=e.index,i=e.props.strokes[o],r=Shape.props.strokes.getObject(i,o);Shape.props.stroke.setAttr(e,a,i,r)},remove:function(){}},type:{set:function(e,t,a){a||(a=Shape.box(e,t)),Util.isJQueryObject(a)&&(a=Util.getElement(a));var o=e.index,i=e.props.strokes[o],r=Shape.props.strokes.getObject(i,o);Shape.props.stroke.setAttr(e,a,i,r)}},deleteStroke:function(t,a,o,i){var r=e(o).find("#"+Shape.multipleStrokeId),s=DOMUtil.selectByAttribute("index",i,r[0]),n=(s=e(s)).find("path")[0].getAttribute("stroke");if(-1!==n.indexOf("url(")){var d=n.substring(n.indexOf("(")+1,n.indexOf(")")),p=Shape.creator.getDefinitions(e(o));e(p).find(d).remove()}s.remove(),Shape.props.strokes.resetIndex(r,i)},getObject:function(e,t,a){return{data:e,pathId:"stroke"+t,pathList:a,index:t}},addStroke:function(t,a,o,i,r,s){var n=Shape.props.strokes,d=Shape.creator.getGroup(o)[0],p=e(d).children("#"+Shape.multipleStrokeId);p.length||(p=n.createMultipleStrokeContainer(t,a,o,d));var l=VectorUtil.getPathList(t);n.createStrokeGroup(t,a,o,p,l,r,s);var h=n.getObject(i,r,l);Shape.props.stroke.set(t,a,o,h)},createMultipleStrokeContainer:function(t,a,o,i){var r=Shape.creator.createElement(i,"g");Shape.creator.set(r,{id:Shape.multipleStrokeId}),r=e(r);var s=e(i).children("#"+Shape.multipleFillId);if(s.length)r.insertAfter(s);else{var n=e("#image",i);n.length?e(r).insertAfter(n):e(i).prepend(r)}return r},createStrokeGroup:function(e,t,a,o,i,r,s){var n=DOMUtil.selectByAttribute("index",r,o[0]);if(s||!n){n=Shape.creator.createElement(o,"g"),Shape.creator.set(n,{id:"stroke"+r,index:r});var d=DOMUtil.selectByAttribute("index",r-1,o[0]);d?(n.insertAfter(d),Shape.props.strokes.resetIndex(o,r)):0===r?(o.prepend(n),Shape.props.strokes.resetIndex(o,r)):o.append(n),Shape.props.fills.constructPathElements(e,t,a,n,i,Shape.multipleStrokeId,{fill:"none"})}},resetIndex:function(e,t){for(var a=e.children(""),o=t;o<a.length;o++){var i=a[o];Shape.creator.set(i,{index:o,id:"stroke"+o})}},dependency:function(e,t,a){e.props.stroke||(a||(a=Shape.box(e,t)),Util.isJQueryObject(a)&&(a=Util.getElement(a)),Shape.props.stroke.updateSelector(e,a))}};Shape.props.stroke=Util.extend(!0,{},t),Shape.props.strokes=Util.extend(!0,{},a)}(jQuery),function(e){var t={set:function(e,t,a,o){var i=this.getEffectsData(e,o);i&&(a=a||Shape.box(e,t),Shape.props.effects[i.shadows?"shadows":"shadow"].set(e,t,a,void 0,void 0,o),e.pdfVariables&&e.pdfVariables.noReflection||Shape.props.effects.reflection.set(e,t,a,o))},getEffectsData:function(t,a){var o;return o=a?t.textBody&&t.textBody.props.textStyle&&t.textBody.props.textStyle.props.effects&&t.textBody.props.textStyle.props.effects?t.textBody.props.textStyle.props.effects:void 0:t.props.effects,e.isEmptyObject(o)&&(o=void 0),o},remove:function(e,t,a){Shape.props.effects.shadow.remove(e,t,a),Shape.props.effects.reflection.remove(e,t,a)},setPath:function(t,a,o,i){var r,s=t.props.geom,n=s.type,d=t.props.transform.dim;if(n===ShapeConstants.ShapeGeometryType.PRESET){var p=s.preset.modifiers;r=Shape.pathGenerator.getPath(s.preset.type,d.width,d.height,p)}else r=Shape.pathGenerator.getCustomPath(s.custom,d.width,d.height);e.each(r.path,function(t,a){var o=e(i).find("#"+Shape.pathId+t);o.length&&Shape.creator.setPath(o[0],a)})},shadows:{get:function(e,t){return e.index=t,e},add:function(e,t,a){if(e.props.effects&&e.props.effects.shadows){var o=e.index;if(void 0!==o){var i=e.props.effects.shadows[o];Shape.props.effects.shadows.addShadow(e,t,a,i,o,!0)}}},set:function(e,t,a){var o=e.props.effects&&e.props.effects.shadows;if(o)for(var i,r=o.length,s=0;s<r;s++){var n=e.props.effects.shadows[s];i=Shape.props.effects.shadows.addShadow(e,t,a,n,s,!1,i)}},remove:function(e,t,a){var o=e.props.effects&&e.props.effects.shadows;if(o){var i=e.index;if(void 0!==i){var r=o[i];Shape.props.effects.shadows.deleteShadow(e,t,a,r,i)}}},shadow:{set:function(e,t,a){var o=Shape.props.effects.shadows.getObject(e,e.index);Shape.props.effects.shadow.set(e,t,a,o)}},distance:{set:function(e,t,a){var o=Shape.props.effects.shadows.getObject(e,e.index);Shape.props.effects.shadow.distance.set(e,t,a,o)}},color:{set:function(e,t,a){var o=Shape.props.effects.shadows.getObject(e,e.index);Shape.props.effects.shadow.color.set(e,t,a,o)}},blur:{set:function(e,t,a){var o=Shape.props.effects.shadows.getObject(e,e.index);Shape.props.effects.shadow.blur.set(e,t,a,o)}},getObject:function(e,t){return t=void 0!==t?t:0,{shadow:e.props.effects.shadows[t],index:t}},addShadow:function(e,t,a,o,i,r,s){var n=Shape.props.effects.shadows.getObject(e,i);return n.prevNode=s,Shape.props.effects.shadow.set(e,t,a,n,r)},deleteShadow:function(e,t,a,o,i){a=a||Shape.box(e,t),Shape.creator.deleteShadowFilters(a,i)}},shadow:{remove:function(e,t,a,o){a=a||Shape.box(e,t);var i=o||a;Shape.creator.removeShadowFilter(i)},preset:{set:function(e,t,a){},remove:function(e,t,a){}},set:function(t,a,o,i,r,s){o=o||Shape.box(t,a);var n=Shape.props.effects.getEffectsData(t,s),d=i&&i.shadow?i.shadow:n?n.shadow:void 0,p=i&&i.index,l=Shape.props.effects.shadow,h=s||o;if(h=e(h),d){var c,f,u=d.hidden;p=void 0!==p?p:0;var m=h.data("shadowType"+p),g=s?DOMUtil.select("."+Shape.textBody.columnId,h[0]):DOMUtil.select("#"+Shape.shapeId,h[0]),S=i&&i.prevNode;return(f=h.data(Shape.shadowFilterId))?(c=o.find("#filter_"+f),n.shadows?Shape.props.effects.shadows.deleteShadow(t,a,h,d,p):c.empty()):(f=Math.uuid(),c=Shape.creator.createFilterElement(h,Shape.shadowFilterId),Shape.creator.set(c,{id:"filter_"+f}),h.data(Shape.shadowFilterId,f)),S=Shape.creator.shadowFilter.create(t,d.type.toLowerCase(),e(c),p,u,S),e(g).attr("filter","url(#filter_"+f+")"),h.data("shadowType"+p,d.type),e.each(d,function(e,r){l[e]&&l[e].set.call(l,t,a,o,i,s)}),o.data("shape_rendered")&&l.visibility(u,h,p,m),S}l.remove(t,a,o,s)},visibility:function(t,a,o,i){var r=a.data(Shape.shadowFilterId),s=e("#filter_"+r,a).find("feMerge"),n=s.find(".shadow_"+o);t?n.remove():t||n.length||("INNER"===i?Shape.creator.createShadowFilter.createInnerfeMergeNode(s,o):Shape.creator.createShadowFilter.createOuterfeMergeNode(s,o))},distance:{_getTranslate:function(e,t,a,o){var i=t&&t.shadow?t.shadow:a.shadow,r=i.type,s=i.distance,n=s.angle?s.angle:0,d=s.radius?s.radius:0;d=VectorUtil.getViewBoxDimensions(d);var p=n-Shape.getAngle(e);p<0&&(p=360+p),n=p%360;var l=zoho.math.toRadians(n),h=i&&i.skew&&i.skew.xAngle?i.skew.xAngle:Math.round(d*Math.cos(l)),c=i&&i.skew&&i.skew.yAngle?i.skew.yAngle:Math.round(d*Math.sin(l));return r===ShapeConstants.ShadowType.OUTER&&(h=e&&e.fliph?-h:h,c=e&&e.flipv?-c:c),r!==ShapeConstants.ShadowType.INNER||o||(h=-h,c=-c),{x:h,y:c}},set:function(t,a,o,i,r){var s=i&&i.index?i.index:0,n=Shape.props.effects.getEffectsData(t,r);if(i&&i.shadow?i.shadow:n?n.shadow:void 0){o||(o=Shape.box(t,a));var d=r||o,p=Shape.props.effects.shadow.distance._getTranslate(t.props.transform,i,n,t.shadowFromTopLeft),l=e(d).data(Shape.shadowFilterId),h=d.find("#filter_"+l);Shape.creator.setTransformPosition(h,p,s)}}},color:{set:function(t,a,o,i,r){var s=i&&i.index?i.index:0,n=Shape.props.effects.getEffectsData(t,r),d=i&&i.shadow?i.shadow:n?n.shadow:void 0;if(d){o||(o=Shape.box(t,a));var p=r||o,l=d.color,h=e(p).data(Shape.shadowFilterId),c=p.find("#filter_"+h);Shape.props.effects.shadow.color.transparency(c,l,s),t.isInnerShape&&Shape.props.effects.shadow.blur.set(t,a,o,i,r)}},transparency:function(e,t,a){var o=t.tweaks?1-t.tweaks.alpha:1;Shape.creator.setShadowColor(e,t,o,a)}},blur:{set:function(e,t,a,o,i){a||(a=Shape.box(e,t)),Shape.props.effects.shadow.blur.radius(e,t,a,o,i)},radius:function(t,a,o,i,r){var s=i&&i.index?i.index:0,n=Shape.props.effects.getEffectsData(t,r);if(n){var d=i&&i.shadow?i.shadow:n?n.shadow:void 0;if(d){o||(o=Shape.box(t,a));var p=r||o,l=d.blur&&d.blur.radius?d.blur.radius:0,h=Math.round(.2*(l||1)),c=e(p).data(Shape.shadowFilterId),f=p.find("#filter_"+c);Shape.creator.setGaussianConvolution(f,h,s)}}}}},reflection:{remove:function(e,t,a,o){a=a||Shape.box(e,t),(o?a.children(".textReflection"):a.children(".reflectiongroup")).remove()},preset:{remove:function(e,t,a){}},set:function(t,a,o,i){o=o||Shape.box(t,a);var r,s=Shape.props.effects.reflection,n=Shape.props.effects.getEffectsData(t,i);if(n&&(n.groupReflection?(r=n.groupReflection,!0):r=n.reflection),s.remove(t,a,o,i),!r||e.isEmptyObject(r))return!1;s.applyProperty(t,a,o,void 0,void 0,i)},getElement:function(e,t,a,o,i){var r=i||o,s=r.data(e+"Id");return s&&s.length?r.find("#"+e):Shape.props.effects.reflection.createUseElement(t,a,o,i)},createUseElement:function(t,a,o,i){var r=Shape.creator.createGroup(o[0]);Shape.creator.set(r,{id:Shape.reflectionShapeId,class:"reflectiongroup group"});var s=Shape.creator.createUse(o),n=i?i.data("textId"):o.attr("rotategroupId");return Shape.creator.set(e(s)[0],"xlink:href","#"+n,Shape.creator.Xlink),Shape.creator.set(s,{id:Shape.reflectionShapeId+"use"}),i&&Shape.creator.set(r,{class:"textReflection group"}),e(r).append(s),"g"===e(o)[0].tagName.toLowerCase()?e(o).append(r):e(o).find("#root").append(r),e(s)},createElement:function(t,a,o,i){var r=Shape.getRotationalContainer(o),s=Shape.props.effects.reflection.createGroup(t,a,o,e(r),i,"reflectiongroup"),n={},d=o.find("#defs");d=d.length?d:void 0,Shape.create.addPath(t,o,s,d,"reflection"),Shape.props.effects.setPath(t,a,o,s);var p=t.type;return n.pathId=Shape.reflectionShapeId,n.type="reflection",n.groupId=Shape.reflectionShapeId,Shape.props.transform.set(t,a,o,Shape.reflectionShapeId),p&&p.toUpperCase()==ShapeConstants.ShapeNodeType.PICTURE?Shape.picture.set(t,a,o,n):Shape.props.fill.set(t,a,o,n),Shape.props.stroke.set(t,a,o,n),o.data(i+"Id",i),e(s)},createGroup:function(t,a,o,i,r,s){var n=Shape.creator.createGroup(o[0]);n||(n=Shape.creator.getDefaultRoot()),Shape.creator.set(n,{id:r,class:s+" group"});var d=t.props.transform.dim,p=o.find("#defs");return(p=p.length?p:void 0)||Shape.creator.setRoot(n,d.width,d.height,a,t),e(n).insertBefore(i),n},getStrokeData:function(e,t){return t?e.textBody&&e.textBody.props.textStyle&&e.textBody.props.textStyle.props.stroke?e.textBody.props.textStyle.props.stroke:void 0:e.props.stroke},applyProperty:function(t,a,o,i,r,s){var n=Shape.props.effects.reflection,d=Shape.props.effects.getEffectsData(t,s),p=d?d.reflection:void 0;if(p){(r={}).alpha=p.alpha.st,r.distance=p.distance.radius;var l=n.getStrokeData(t,s),h=l&&l.width?l.width:0;if(r.strokeWidth=h,r.angle=90,r.size=p.pos.end,r.mask=p.pos.mask,r.group=s?e(DOMUtil.select("."+Shape.textBody.columnId,s[0])):Shape.creator.pathContainer(o),Util.isJQueryObject(o)&&o.length||o){r.reflectionGroup=Shape.props.effects.reflection.getElement(Shape.reflectionShapeId,t,a,o,s),r.textGroup=s||!1;var c=["alpha","position","distance"];e.each(c,function(e,i){Shape.effects.reflection[i].call(this,t,a,o,r)})}}}},blur:{remove:function(t,a,o,i){o=o||Shape.box(t,a),Shape.creator.removeBlurFilter(o,o),e(o).removeData(Shape.blurFilterId)},preset:{set:function(e,t,a){},remove:function(e,t,a){}},set:function(t,a,o,i){o=o||Shape.box(t,a);var r=t.props,s=r?r.blur:void 0,n=Shape.props.effects.blur,d=e(o);if(s){var p,l=DOMUtil.select(".rotategroup",o[0]),h=e(d).data(Shape.blurFilterId);if(h){h=e(d).data(Shape.blurFilterId),p=o.find("#filter_"+h);for(var c=0;c<l.length;c++)e(l[c]).attr("filter","url(#filter_"+h+")")}else h!==Shape.blurFilterId&&(h=Math.uuid(),e(d).data(Shape.blurFilterId,h),p=Shape.creator.createFilterElement(o,Shape.blurFilterId),Shape.creator.set(p,{id:"filter_"+h})),Shape.creator.createBlurElement(o,h).classList="blurClass_",e(l).attr("filter","url(#filter_"+h+"})");t.type!=ShapeConstants.ShapeNodeType.GROUPSHAPE&&Shape.props.transform.set(t,a,o,Shape.shapeId),n.radius(t,a,o,d)}else n.remove(t,a,o)},radius:function(t,a,o,i){o=o?e(o):Shape.box(t,a);var r=t.props.blur.type,s=t.props.blur[r.toLowerCase()].radius,n=o.data(Shape.blurFilterId),d=o.find("#filter_"+n);Shape.creator.setGaussianConvolution(d,s,"")}}};Shape.props.effects=e.extend(!0,{},t)}(jQuery);var SVGEffects;!function(e){SVGEffects={shadow:{position:function(t,a,o,i,r){r=r||Shape.shapeId;var s=Shape.creator.getTransform(e("#"+r,i)[0],SVGCreator.TranslateConstant);parseInt(s.x),parseInt(a[0]),parseInt(s.y),parseInt(a[1])}},reflection:{maskId:"maskId",textmaskId:"textmaskId",alpha:function(e,t,a,o){var i=o.alpha;o.reflectionGroup.css({opacity:i})},distance:function(t,a,o,i){var r=SVGEffects.reflection._getReflectionData(t,i,a,o),s=r.o.angle+" "+r.o.cx+" "+r.o.cy,n=r.translate.x+" "+r.translate.y,d=r.flip.sw+" "+r.flip.sh;e(r.reflectionGroup[0]).attr({transform:"rotate("+s+") translate("+n+") scale("+d+")"})},_getReflectionData:function(e,t,a,o){var i=0,r=0,s=t.reflectionGroup,n=(t.angle,VectorUtil.getShapeDimension(e));if(t.textGroup){var d={props:{transform:e.textBody.props.transform}};n=VectorUtil.getShapeDimension(d)}var p=VectorUtil.getViewBoxDimensions(t.distance);p+=VectorUtil.getViewBoxDimensions(t.strokeWidth)/2;var l,h=Shape.getAngle(e.props.transform);l=t.textGroup?h?360-h:0:h;var c=[zoho.math.getRotatedValue(l,0,0,n[0]/2,n[1]/2),zoho.math.getRotatedValue(l,n[0],0,n[0]/2,n[1]/2),zoho.math.getRotatedValue(l,0,n[1],n[0]/2,n[1]/2),zoho.math.getRotatedValue(l,n[0],n[1],n[0]/2,n[1]/2)],f=SVGEffects.reflection._getDimension(c),u=f[0].y-f[1].y,m=f[0].y;r=t.textGroup?2*m+2*(e.textBody.props.valign+e.textBody.props.textContainerDim.top/2)+p:2*m+p,i=e.textBody&&e.textBody.props&&e.textBody.props.offset?e.textBody.props.offset.left:0,translate={x:i,y:r},flip={sw:"1",sh:"-1"},l=t.textGroup?l:0;var g=Shape.creator.getCenter(e.props.transform.dim);return t.textGroup&&(g=Shape.creator.getCenter(e.textBody.props.transform.dim)),g.cy=g.cy+u,g.angle=l,{reflectionGroup:s,translate:translate,o:g,flip:flip}},applyMaskElement:function(e,t){var a=t,o=Shape.creator.maskElement(a,e,"mask","mask"),i=Shape.creator.get(o,"id");return e.data(this.maskId,i),Shape.creator.set(t,{mask:"url(#"+i+")"}),o},_getDimension:function(e){var t=VectorUtil.getMinAndMax(e);return[t.big,t.small]},position:function(t,a,o,i){var r=i.reflectionGroup,s=i.size,n=i.angle,d=i.textGroup?i.textGroup:o,p=SVGEffects.reflection.applyMaskElement(d,r),l=e.extend(!0,{},t);l.props.fill&&l.props.fill.gradient?delete l.props.fill.gradient.stops:(l.props.fill={},l.props.fill.gradient={});var h=(n-(t.props.transform?Shape.getAngle(t.props.transform):0)+360)%360;l.props.fill.gradient={rotate:h,stops:[{color:{rgb:[255,255,255],tweaks:{alpha:1},type:"CUSTOM"},position:1-s},{color:{rgb:[255,255,255],type:"CUSTOM"},position:.95}]};var c={left:0,right:0,top:0,bottom:0},f=t.props.effects&&t.props.effects.groupReflection?t.props.effects.groupReflection.offset:c;t.props.offset=f,i.textGroup&&(t.textBody.props.offset=e.extend(c,t.textBody.props.offset));var u=l.props.fill.gradient,m=Shape,g={},S=e(p).children(),x=Shape.creator.fillElement(e(S),d,"gradient","linear"),v=VectorUtil.getViewBoxDimensions(t.containerDim.width),y=VectorUtil.getViewBoxDimensions(t.containerDim.height),E=VectorUtil.getViewBoxDimensions(v,y),C=-1*v,O=-1*y,b=E[0]+2*v,T=E[1]+2*y,w=VectorUtil.getHTMLDimension(C),D=VectorUtil.getHTMLDimension(O);Shape.creator.set(e(S),{width:b,height:T,x:w,y:D}),Shape.creator.set(e(p),{width:b,height:T,x:w,y:D}),m.converter.convert("gradient",l.props.fill.gradient,g),e.each(u,function(e,a){var o=Shape.fillElement.gradient[e];if(o){var r=i.textGroup?t.textBody.props:t.props;r.isFromReflection=!0,r.isText=!!i.textGroup||void 0,o.call(m.fillElement,x,a,S,S,r,"linear")}})},scale:function(e,t){},blur:function(e,t){}},blur:{}}}(jQuery),function(e){var t={getFontMetrics:function(e,t){Shape.textBody.fontMetricsMap[e]={},t=t||String.fromCharCode(32);var a=Shape.textBody.getFontSpaceSize(e,t);Shape.textBody.fontMetricsMap[e].space={},Shape.textBody.fontMetricsMap[e].space[t]=a},getFontSpaceSize:function(t,a){var o=e("<span style='font-size:100px;letter-spacing:normal !important;'></span>");o.text(a),t+=", 'Arial'",o.css("font-family",t),Shape.cloneDiv.append(o);var i=o.width();return o.remove(),i/100},sumOfArray:function(e,t){var a=0,o=0,i=0,r=0,s="",n="",d="";if(t&&t<0)return{height:o,sum:a,totalHeight:i,totalWidth:r,spellCheckId:n,commentBGId:s,textBGId:d};for(var p=e.length,l=0;l<p&&!(l>t);l++){var h=e[l],c=h[Shape.textBody.commentBGId],f=h[Shape.textBody.textBGId],u=h[Shape.textBody.spellCheckId];s=c||s,n=u||n,d=f||d,o=o>h[Shape.textBody.height]?o:h[Shape.textBody.height],i+=h[Shape.textBody.height]+(h.before?h.before:0)+(h.after?h.after:0),r+=h[Shape.textBody.width],a+=h[Shape.textBody.indexId]}return{height:o,sum:a,totalHeight:i,totalWidth:r,spellCheckId:n,commentBGId:s,textBGId:d}},textContainer:"textcontainer",tbox:"textbox",innerbox:"innerbox",bullet:"bullet",bulletSpanContent:"bulletSpanContent",paraId:"para",lineContainerId:"linecontainer",lineCanisterId:"linecanister",spellCheckGroupId:"spellcheckgroup",commentsGroupId:"commentsgroup",linePathId:"linepath",textPathId:"textpath",wordId:"word",wordContentId:"wordContent",spaceId:"space",subwordId:"subwords",underline:"underline",fill:"fill",lineId:"line",lineObjectId:"lineObject",subportionId:"subportion",subWordEditorData:"subWordEditorData",columnId:"text_column",dimensionId:"dimension",portionprops:{bold:{"font-weight":"bold"},italic:{"font-style":"italic"}},hyphenText:e("<span>&#8209;</span>").text(),zeroWidthSpaceText:e("<span>&#8203;</span>").text(),editorData:"editorData",height:"height",width:"width",wordType:"wordType",spaceWidth:"spaceWidth",space:"space",baseline:"baseline",indexId:"chIndex",elementIndexId:"elementIndex",spellCheckId:"spellCheckId",commentBGId:"commentBGId",textBGId:"textBGId",brokenData:"brokenData",LineBreakId:"linebreak",portions:"portions",portion:"portion",afterSpaceWidth:"afterSpaceWidth",lineSpacingRatio:.8,UnderlineAspectRatio:.08,baselineRatio:.25,maxUnderlineHeight:35,lang:{EAST_ASIAN:"EAST_ASIAN",OTHER:"OTHER"},fontMetricsMap:{Roboto:{ascent:1.4,descent:.36,height:1.76,space:{" ":.25}},"Arial Black":{ascent:1.47,descent:.41,height:1.88,space:{" ":.34}},Alegreya:{ascent:1.2,descent:.33,height:1.53,space:{" ":.21}},Arial:{ascent:1.21,descent:.28,height:1.49,space:{" ":.28}},"Arial Narrow":{ascent:1.25,descent:.28,height:1.53,space:{" ":.23}},Arvo:{ascent:1.2,descent:.33,height:1.53,space:{" ":.22}},Bentham:{ascent:1.2,descent:.33,height:1.53,space:{" ":.2}},"Book Antiqua":{ascent:1.23,descent:.38,height:1.61,space:{" ":.25}},"Bree Serif":{ascent:1.2,descent:.33,height:1.53,space:{" ":.2}},Cabin:{ascent:1.2,descent:.33,height:1.53,space:{" ":.23}},"Cabin Sketch":{ascent:1.2,descent:.33,height:1.53,space:{" ":.25}},Calibri:{ascent:1.27,descent:.36,height:1.63,space:{" ":.23}},Cambria:{ascent:1.27,descent:.3,height:1.57,space:{" ":.23}},ChunkFive:{ascent:1.2,descent:.33,height:1.53,space:{" ":.25}},Colaborate:{ascent:1.2,descent:.33,height:1.53,space:{" ":.26}},"Comic Sans MS":{ascent:1.47,descent:.39,height:1.86,space:{" ":.3}},"Courier New":{ascent:1.11,descent:.4,height:1.51,space:{" ":.6}},"Crimson Text":{ascent:1.2,descent:.33,height:1.53,space:{" ":.25}},"Droid Sans":{ascent:1.2,descent:.33,height:1.53,space:{" ":.26}},"Droid Serif":{ascent:1.2,descent:.33,height:1.53,space:{" ":.26}},Georgia:{ascent:1.22,descent:.29,height:1.51,space:{" ":.25}},Impact:{ascent:1.35,descent:.28,height:1.63,space:{" ":.18}},"Latin Modern Roman":{ascent:1.2,descent:.33,height:1.53,space:{" ":.25}},"League Gothic":{ascent:1.2,descent:.33,height:1.53,space:{" ":.16}},"Lucida Console":{ascent:1.05,descent:.28,height:1.33,space:{" ":.61}},"MS Gothic":{ascent:1.15,descent:.19,height:1.34,space:{" ":.5}},"MS Mincho":{ascent:1.15,descent:.19,height:1.34,space:{" ":.5}},"MS PGothic":{ascent:1.15,descent:.19,height:1.34,space:{" ":.31}},"MS PMincho":{ascent:1.15,descent:.19,height:1.34,space:{" ":.31}},Metrophobic:{ascent:1.2,descent:.33,height:1.53,space:{" ":.32}},"OSP DIN":{ascent:1.2,descent:.33,height:1.53,space:{" ":.19}},"Old Standard TT":{ascent:1.2,descent:.33,height:1.53,space:{" ":.28}},"Open Sans":{ascent:1.43,descent:.39,height:1.82,space:{" ":.26}},Oswald:{ascent:1.2,descent:.33,height:1.53,space:{" ":.21}},"Otama ep":{ascent:1.2,descent:.33,height:1.53,space:{" ":.24}},Oxygen:{ascent:1.2,descent:.33,height:1.53,space:{" ":.22}},Pacifico:{ascent:1.2,descent:.33,height:1.53,space:{" ":.27}},Raleway:{ascent:1.2,descent:.33,height:1.53,space:{" ":.26}},Rokkitt:{ascent:1.2,descent:.33,height:1.53,space:{" ":.21}},"Source Sans Pro":{ascent:1.2,descent:.33,height:1.53,space:{" ":.21}},Tahoma:{ascent:1.33,descent:.28,height:1.61,space:{" ":.32}},"Times New Roman":{ascent:1.19,descent:.29,height:1.48,space:{" ":.25}},"Titillium Web":{ascent:1.2,descent:.33,height:1.53,space:{" ":.22}},"Trebuchet MS":{ascent:1.25,descent:.3,height:1.55,space:{" ":.31}},Ubuntu:{ascent:1.2,descent:.33,height:1.53,space:{" ":.24}},Unna:{ascent:1.2,descent:.33,height:1.53,space:{" ":.22}},Verdana:{ascent:1.34,descent:.28,height:1.62,space:{" ":.36}},Quicksand:{ascent:1.2,descent:.33,height:1.53,space:{" ":.25}},"TeX Gyre Heros":{ascent:1.2,descent:.33,height:1.53,space:{" ":.25}},"TeX Gyre Heros Condensed":{ascent:1.2,descent:.33,height:1.53,space:{" ":.23}}},textHeightMap:{},set:function(t,a,o){(o=o||Shape.box(t,a)).length&&!e.isEmptyObject(t.textBody)&&(t.type==ShapeConstants.ShapeNodeType.PICTURE&&t.nvOProps.nvProps&&t.nvOProps.nvProps.embed||t.type!==ShapeConstants.ShapeNodeType.PICTURE)&&Shape.textBody.renderTextBody(t,o)&&(t.textBody&&t.textBody.isPlainText&&Shape.textBody.isPlainTextEligible(t)?this.plainText_set(t,a,o):this._set(t,a,o))},_set:function(t,a,o){(o=o||Shape.box(t,a)).data("fontList",{});var i=this._createContainer(t,a,o);t.textBody.id=Shape.textBody.textContainer,t.textBody.element=i,t.textBody.element.empty(),t.textBody.element.data(Shape.textBody.editorData,[]),Shape.textBody.removeEffectsData(t.textBody.element);var r=Shape.creator.createDefinitions(t.textBody.element);e(t.textBody.element).append(r),Shape.textBody.setProps(t,a,o),t.textBoxClip&&Shape.textBody.textBoxClip.create(o)},plainText_set:function(t,a,o){var i=this._createContainer(t,a,o);t.textBody.id=Shape.textBody.textContainer,t.textBody.element=i,t.textBody.element.empty();var r=t.textBody.paras[0].portions,s=Shape.creator.createElement(o,"text");const n=t.textBody.plainTextAlign;let d="LEFT"===n?"start":"RIGHT"===n?"end":"middle";Shape.creator.set(s,{style:"text-anchor:"+d+";alignment-baseline:middle;"});var p=0;if(t.props&&t.props.transform){var l=r[0];if(l.t){var h=new RegExp(Shape.textBody.paras.portions.t.words.splitter.join("|"),"gi");if(l.t=l.t.replace(h," "),s.textContent=l.t,l.props){var c={},f=l.props.size;p+=Math.round(Shape.textBody.paras.portions.t.words.getHeight(f)*Shape.textBody.lineSpacingRatio*1e3)/1e3,c.y=p;let e=0;if(t.props.transform.dim){const a=t.props.transform.dim.width;a&&(e="LEFT"===n?0:"RIGHT"===n?a:.5*a)}c.x=e,c["font-size"]=f+"pt",l.props.fontweight?c["font-weight"]=Shape.getShapeDefaultData("FontWeight."+l.props.fontweight):c["font-weight"]=l.props.bold?"bold":"",c["font-style"]=l.props.italic?"italic":"";var u=l.props.font;if(u&&u.fontFamily){var m=u.fontFamily.name;m="'"+m+"'",m+=", 'Arial'",c["font-family"]=m}var g=l.props&&l.props.fill&&l.props.fill.type&&"NONE"!==l.props.fill.type?l.props.fill[l.props.fill.type.toLowerCase()].color:void 0;g&&(g.rgb&&(c.fill=VectorUtil.convertRGBToString(l.props.fill.solid.color.rgb)),g.tweaks&&g.tweaks.alpha&&(c["fill-opacity"]=g.tweaks.alpha)),s.data("style",c),Shape.creator.set(s,c)}e(s).addClass("plain-text")}}i.append(s)},isPlainTextEligible:function(e){var t=!1;if(e.textBody&&e.textBody.paras&&1===e.textBody.paras.length&&e.textBody.paras[0].portions&&1===e.textBody.paras[0].portions.length){t=!0;var a=e.textBody.paras[0].portions[0].t;if(a){var o=new RegExp("["+Shape.textBody.paras.portions.t.words.splitter.join("|")+"]{2,}");a.match(o)&&(t=!1)}}return t},renderTextBody:function(t,a){var o=t.placeHolder&&t.placeHolder.text,i=t.isTextEditing||o||!Shape.textBody.isEmptyTextBody(t);return i||(i=!!e(a).data()&&e(a).data().isTextBodyRendered),i},isEmptyTextBody:function(t){var a=this,o=!1;return t.textBody&&t.textBody.paras&&e.each(t.textBody.paras,function(e,t){var i=!(!t||!t.animationDatas);if((o=!a.isEmptyPortions(t))||i)return o=!0,!1}),!o},isEmptyPortions:function(t){var a=!0;return t&&e.each(t.portions,function(e,t){if(t.t&&t.t.length||void 0!=t.type||void 0!=t.field)return a=!1,!1}),a},removeEffectsData:function(e){e.removeData("maskId"),e.removeData("shadowfilter"),e.removeData("shadowType0"),e.removeData("textId")},element:function(t,a,o){if(!(o=o||Shape.box(t,a)).data("isTextBodyRendered")){var i=e.extend(!0,{},t);i.isTextEditing=!0,i.textBody&&i.textBody.paras&&i.textBody.paras.length&&i.textBody.paras[0].portions&&i.textBody.paras[0].portions.length&&(i.textBody.paras.splice(1),i.textBody.paras[0].portions.splice(1),i.textBody.paras[0].portions[0].t="",delete i.textBody.paras[0].portions[0].type),Shape.textBody.set(i,a,o)}},dependency:function(e,t,a){a=a||Shape.box(e,t),Shape.create.placeHolder&&Shape.create.placeHolder.icon.set(e,t,a),Shape.create.editData&&Shape.create.editData.icon.set(e,t,a),Shape.create.previewData&&Shape.create.previewData.icon.set(e,t,a)},setProps:function(e,t,a){var o=Shape.textBody.props.set(e,t,a);e.textBody.innerBox=o;var i=e.textBody.paras,r=void 0;if(i)for(var s=i.length,n=0;n<s;n++){var d=i[n];Shape.textBody.paras.get(e,n),d.listNum=Shape.textBody.paras.style.listStyle.getBulletNumber(e.textBody.paras,n),r=Shape.textBody.paras.set(e,t,a,d,r)}Shape.textBody.props.valign.set(e,t,a),Shape.textBody.props.textStyle.props.effects.set(e,t,a)},_createContainer:function(e,t,a){var o=Shape.textBody.textContainer,i=this._setContainer(e,a,o);return Shape.textBody.setDimension(e,t,a),i},_setContainer:function(t,a,o){var i=t.textBody.element?t.textBody.element:a.find("#"+o);return i.length||(i=Shape.creator.createGroup(a[0]),Shape.getRotationalContainer(a)[0].appendChild(i),(i=e(i)).attr({id:o}),t.textBody.element=i,a.data("isTextBodyRendered",!0)),i},index:{set:function(t,a,o,i){var r=a.data(Shape.textBody.editorData);e.isEmptyObject(o)&&Shape.error("Value Set in ",a.attr("class"),"value",o,"index",i),r.splice(i,0,o)},get:function(e,t,a){return t.data(Shape.textBody.editorData)[a]},update:function(t,a,o,i){var r=a.data(Shape.textBody.editorData);(void 0===r[i]||e.isEmptyObject(r[i])||e.isEmptyObject(o))&&Shape.error("Value Update in ",a.attr("class"),"value",o,"index",i,"indexArray[index]",r[i]);var s=r[i],n=[Shape.textBody.wordType,Shape.textBody.spellCheckId,Shape.textBody.commentBGId,Shape.textBody.textBGId,Shape.textBody.brokenData,Shape.textBody.underline,Shape.textBody.space,Shape.textBody.subWordEditorData,Shape.textBody.fill,Shape.textBody.baseline,Shape.textBody.portions];e.each(o,function(t,a){t===Shape.textBody.elementIndexId&&Shape.error("how elementIndexId came in index updation.."),-1!==e.inArray(t,n)?s[t]=a:s[t]+=a})},remove:function(e,t,a){t.data(Shape.textBody.editorData).splice(a,1)}},textBoxClip:{create:function(e){var t=e.find(".rotategroup"),a=t.find("path").attr("d"),o=Shape.creator.clip.createClipPath(e,a);Shape.creator.clip.create(e,e,[o],"masking");var i=e.data(Shape.creator.clipId);Shape.creator.set(t,{"clip-path":"url(#"+i+")"})},remove:function(e){e[0].querySelector(".rotategroup").removeAttribute("clip-path")}},getEditorDataObject:function(t){var a={};return a[Shape.textBody.indexId]=t.chIndex,a[Shape.textBody.width]=Math.round(1e3*t.width)/1e3,a[Shape.textBody.height]=Math.round(1e3*t.height)/1e3,void 0!==t.spaceWidth&&(a[Shape.textBody.spaceWidth]=t.spaceWidth),!!t.wordType&&(a[Shape.textBody.wordType]=t.wordType),!(!t.brokenData||!t.brokenData.before&&!t.brokenData.after)&&(a[Shape.textBody.brokenData]=e.extend(!0,{},t.brokenData)),!!t.elementIndexId&&(a[Shape.textBody.elementIndexId]=t.elementIndexId),!!t.commentBGId&&(a[Shape.textBody.commentBGId]=t.commentBGId),t.portions&&(a[Shape.textBody.portions]=t.portions),t.subWordEditorData&&(a[Shape.textBody.subWordEditorData]=t.subWordEditorData),t.underline&&(a[Shape.textBody.underline]=t.underline),t.space&&(a[Shape.textBody.space]=t.space),t.fill&&(a[Shape.textBody.fill]=t.fill),t.baseline&&(a[Shape.textBody.baseline]=t.baseline),a},removeSubEditorData:function(e,t,a,o){t.data(Shape.textBody.editorData)[a].subWordEditorData.splice(o,1)},getMaxValue:function(t){for(var a=t.data(Shape.textBody.editorData),o=0,i=0,r=void 0,s="",n="",d=a.length,p=0;p<d;p++){var l=a[p],o=l[Shape.textBody.height],h=l[Shape.textBody.commentBGId],c=l[Shape.textBody.textBGId],f=l[Shape.textBody.brokenData];i=i<o?o:i,s=h||s,n=c||n,r=r||(f&&(f.before||f.after)?e.extend(!0,{},f):void 0)}return{height:i,commentBGId:s,textBGId:n,brokenData:r}},getLineHeight:function(e,t){return e.line&&("percent"===e.line.type?t*=e.line.value:"absolute"===e.line.type&&(t=e.line.value)),t},setDimension:function(t,a,o){if(t.textBody){var i=(o=o||Shape.box(t,a)).data(Shape.textbox);if(i){var r=this.updateDimension(i,t.props.transform),s=t.textBody.element?t.textBody.element:o.find("#"+Shape.textBody.textContainer);return s.length&&(Shape.creator.set(e(s)[0],{transform:"translate("+r.left+", "+r.top+")"}),s.data({translate_x:r.left,translate_y:r.top})),r}}},textBodyDimensionChange:function(t,a,o,i){if(o=o||Shape.box(t,a),e(o).length&&e(o).data().isTextBodyRendered){t.textBody.element=t.textBody.element?t.textBody.element:o.find("#"+Shape.textBody.textContainer);var r=t.textBody.element;if(r.length){var s=!0,n=r.data("dim"),d=this.setDimension(t,a,o);r.data("dim",{width:d.width,height:d.height}),n&&n.width===d.width&&(s=!1),this.props.column.updateDimension(t,a,o,d,r),(s||i)&&this.wrapShape(t,a,o),Shape.textBody.props.valign.set(t,a,o)}}},wrapShape:function(e,t,a){for(var o=e.textBody.paras.length,i=0;i<o;i++){e.textBody.paras.num=i;var r=Shape.textBody.paras.getPara(a,i,e);r&&r.length&&(e.textBody.paras.element=r,Shape.textBody.paras.wrapPara(e,t,a),Shape.textBody.paras.style.spacing.line.set(e,t,a))}},updateDimension:function(e,t){var a=t.dim.width,o=t.dim.height,i=t.fliph,r=t.flipv;return{left:i?a-e[2]:e[0],top:r?o-e[3]:e[1],width:e[2]-e[0],height:e[3]-e[1]}},getTextContainer:function(e,t){return t.find("#"+Shape.textBody.textContainer)},getParentTextContainer:function(e){return e.parent().parent().parent().parent()},getRenderedTextContainerHeight:function(t,a,o){return t.textBody.props.inset=e.extend(!0,{left:9.6,right:9.6,top:4.8,bottom:4.8},t.textBody.props.inset),void 0===o&&(o=Shape.textBody.paras.getTotalParaHeight(t,void 0,a)),o+t.textBody.props.inset.top+t.textBody.props.inset.bottom},getPortionIndex:function(e){var t;if(e[0].id===Shape.textBody.subwordId)t=(a=e.data()).portion;else{e[0].id!==Shape.textBody.wordContentId&&e[0].id!==Shape.textBody.spaceId||(e=e.parent());var a=e.data(),o=a.portions;t=o.start===o.end?o.start:a.hasSubword?a.space[0].portion:o.start}var i=e.closest(".para"),r=i.closest("#"+Shape.textBody.textContainer);return{portionIndex:t,paraIndex:this.getIndexNo(i,r)}},getIndexNo:function(e,t){for(var a=e.data(),o=t.data(Shape.textBody.editorData),i=-1,r=0,s=o.length;r<s;r++)if(a.DOMIndexId===o[r][Shape.textBody.elementIndexId]){i=r;break}return i},listStyles:{add:function(e,t,a){Shape.textBody.listStyles.setPara(e,t,a,["setStyle","setPortionProps"])},set:function(e,t,a){Shape.textBody.listStyles.setPara(e,t,a,["setStyle"])},get:function(e,t){if(e.oldValue&&e.oldValue.level)e.textBody.paras.level=e.oldValue.level;else{var a=e.textBody.listStyles;e.textBody.unmerged&&(a=e.textBody.unmerged.listStyles),e.textBody.paras.level=a[t].level}return e},setPara:function(e,t,a,o){var i=e.textBody.paras;if(i)for(var r=i.level,s=i.length,n=0;n<s;n++){var d=i[n];if(d.style.level===r){Shape.textBody.paras.get(e,n),Shape.textBody.paras.element(e,t,a);for(var p=0;p<o.length;p++){var l=o[p];Shape.textBody.listStyles[l].call(Shape.textBody.listStyles,e,t,a,d)}}}},setStyle:function(e,t,a){Shape.textBody.paras.style.set(e,t,a)},setPortionProps:function(e,t,a,o){var i=o.portions;if(i)for(var r=i.length,s=0;s<r;s++)Shape.textBody.paras.portions.get(e,s),Shape.textBody.paras.portions.element(e,t,a),Shape.textBody.paras.portions.props.set(e,t,a),Shape.textBody.paras.portions.dependency(e,t,a)},defPrProps:{set:function(e,t,a){Shape.textBody.listStyles.setPara(e,t,a,["setPortionProps"])}}},props:{_element:function(e){return e.find("#"+Shape.textBody.tbox)},innerBox:function(e){return e.find("#"+Shape.textBody.innerbox)},textStyle:{set:function(e,t,a){e.textBody.props.textStyle&&Shape.textBody.props.textStyle.props.set(e,t,a)},remove:function(e,t,a){Shape.textBody.props.textStyle.props.remove(e,t,a)},underlineChange:function(t,a,o){Shape.textBody.paras.element(t,a,o);for(var i=t.textBody.paras,r=0;r<i.length;r++){var s=Shape.textBody.paras.getPara(o,r,t);t.textBody.paras.element=s;for(var n=s.find("."+Shape.textBody.lineId),d=0;d<n.length;d++){for(var p=e(n[d]),l=p.data("editorData"),h=0;h<l.length;h++)if("EOP"!==l[h].wordType){var c=l[h].subWordEditorData;if(c.length)for(var f=0;f<c.length;f++)delete c[f].fill;else delete l[h].fill;var u=l[h].space;for(m=0;m<u.length;m++)delete u[m].fill}Shape.textBody.paras.portions.props.drawUnderline(t,a,o,p)}}},props:{set:function(t,a,o){t.textBody.props.textStyle.props&&e.each(t.textBody.props.textStyle.props,function(e,i){Shape.textBody.props.textStyle.props[e].set(t,a,o)})},remove:function(e,t,a){(a=a||Shape.box(e,t))&&0!==a.length&&(Shape.textBody.props.textStyle.props.fill.remove(e,t,a),Shape.textBody.props.textStyle.props.stroke.remove(e,t,a),Shape.textBody.props.textStyle.props.effects.remove(e,t,a))},fill:{set:function(e,t,a){if(a||(a=Shape.box(e,t)),Util.isJQueryObject(a)&&(a=Util.getElement(a)),Util.isJQueryObject(t)&&(t=Util.getElement(t)),a&&t){var o=e.textBody.props.textStyle.props.fill;o||(o={type:ShapeConstants.FillType.NONE});var i=o.type.toLowerCase();Shape.textBody.props.textStyle.props.fill[i].set.call(Shape.textBody.props.textStyle.props.fill,e,t,a)}},remove:function(t,a,o){if(o||(o=Shape.box(t,a)),Util.isJQueryObject(o)&&(o=Util.getElement(o)),Util.isJQueryObject(a)&&(a=Util.getElement(a)),o&&a){var i=Shape.textBody.columnId+0+"_"+e(o).attr("textColumnID"),r=DOMUtil.select("#"+i,o);Shape.creator.updateFillId(o,r),e(r).removeAttr("fill"),e(r).removeAttr("fill-opacity")}},dependency:function(t,a,o){(o=o||Shape.box(t,a))&&0!==o.length&&Shape.textBody.props.textStyle.underlineChange(t,a,e(o))},_setFill:function(t,a,o,i){var r=i&&i.fillData?i.fillData:t.textBody.props.textStyle.props.fill,s=i&&i.name?i.name:"fill",n=(i&&i.pathId&&i.pathId,r.type.toLowerCase());r=r[n];var d=Shape.textBody.props.textStyle.props.fill,p="_"+n,l=Util.extend(!0,{},r);Shape.converter.convert(n,l);var h=Shape.textBody.columnId+0+"_"+e(o).attr("textColumnID"),c=DOMUtil.select("#"+h,o),f=t.textBody.element?t.textBody.element:e(o).find("#"+Shape.textBody.textContainer);d[n][p].call(d,c,l,s+"Element",c,f[0],t),Shape.textBody.props.textStyle.props.fill.dependency(t,a,o)},solid:{set:function(e,t,a,o,i){a||(a=Shape.box(e,t)),Util.isJQueryObject(a)&&(a=Util.getElement(a)),Util.isJQueryObject(t)&&(t=Util.getElement(t));o&&o.fillData?o.fillData:e.textBody.props.textStyle.props.fill;Shape.textBody.props.textStyle.props.fill._setFill(e,t,a,o,i)},_solid:function(e,t,a,o,i,r,s){var n=Shape.creator[a](e);t=Util.extend(!0,{color:{tweaks:{alpha:0}}},t);for(var d in t.color){var p=Shape[a].solid[d];p&&p.call(Shape[a],n,t.color[d],e,o,i,r,s,t.color)}}},none:{set:function(e,t,a,o){a||(a=Shape.box(e,t)),Util.isJQueryObject(a)&&(a=Util.getElement(a)),Util.isJQueryObject(t)&&(t=Util.getElement(t));var i={};i.fillData={type:ShapeConstants.FillType.NONE},o=Util.extend(!0,o,i),Shape.textBody.props.textStyle.props.fill._setFill(e,t,a,o)},_none:function(e,t,a,o,i,r){var s=Shape,n=s.creator[a](Util.getJQueryElement(e));n=Util.getElement(n),s[a].none.call(s[a],n,e,o,i,r)}},pattern:{set:function(e,t,a,o){o&&o.fillData?o.fillData:e.props.fill;a||(a=Shape.box(e,t)),Util.isJQueryObject(a)&&(a=Util.getElement(a)),Util.isJQueryObject(t)&&(t=Util.getElement(t)),Shape.textBody.props.textStyle.props.fill._setFill(e,t,a,o)},_pattern:function(e,t,a,o,i,r){var s=Shape,n=e.getDataset(s.creator.fillId);n&&(DOMUtil.select("#"+n,i).remove(),e.removeDataset(s.creator.fillId));var d=s.creator.fillElement(e,Util.getJQueryElement(i),"pattern","pattern");t=Util.extend(!0,{},t);for(var p=["distance","rotate","background","foreground","tweaks"],l=0;l<p.length;l++){var h=s[a].pattern[p[l]];if(h){var c=t[p[l]];"background"==p[l]&&(c.dim=t.distance),h.call(s[a],d,c,e,o,r.props,Util.getJQueryElement(i))}}}}},effects:{set:function(e,t,a){if(e.textBody&&e.textBody.props.textStyle&&e.textBody.props.textStyle.props&&e.textBody.props.textStyle.props.effects){a=a||Shape.box(e,t);var o=this.getTextContainerForEffects(e,a);this.shadow.set(e,t,a,o),this.reflection.set(e,t,a,o)}},getTextContainerForEffects:function(e,t){return e.textBody.element?e.textBody.element:t.find("#"+Shape.textBody.textContainer)},remove:function(e,t,a){a=a||Shape.box(e,t);var o=this.getTextContainerForEffects(e,a);this.shadow.remove(e,t,a,o),this.reflection.remove(e,t,a,o)},createDataforEffects:function(e,t,a,o){e.tableData&&(e.containerDim=e.tableData.containerDim);var i=Shape.textBody.getTextContainerHeight(e);e.textBody.props.valign=o.data("valignTop"),e.textBody.props.textContainerDim=i,e.textBody.props.transform.dim.height=Shape.textBody.getRenderedTextContainerHeight(e,o)+Shape.textBody.paras.portions.props.getLastLineBaseline(e,t,a),e.textBody.props.offset={left:i.left,top:o.data("valignTop")-e.textBody.props.inset.top}},reflection:{set:function(t,a,o,i){if(t.textBody&&t.textBody.props.textStyle&&t.textBody.props.textStyle.props&&t.textBody.props.textStyle.props.effects&&t.textBody.props.textStyle.props.effects.reflection){o=o||Shape.box(t,a),i=i||Shape.textBody.props.textStyle.props.effects.getTextContainerForEffects(t,o);var r=e.extend(!0,{},t);r.textBody.props.transform=e.extend(!0,{},t.props.transform),Shape.textBody.props.textStyle.props.effects.createDataforEffects(r,a,o,i),Shape.props.effects.reflection.set(r,a,o,i)}},remove:function(e,t,a,o){a=a||Shape.box(e,t),o=o||Shape.textBody.props.textStyle.props.effects.getTextContainerForEffects(e,a),Shape.props.effects.reflection.remove(e,t,a,o)}},shadow:{set:function(e,t,a,o){e.textBody&&e.textBody.props.textStyle&&e.textBody.props.textStyle.props&&e.textBody.props.textStyle.props.effects&&e.textBody.props.textStyle.props.effects.shadow&&(a=a||Shape.box(e,t),o=o||Shape.textBody.props.textStyle.props.effects.getTextContainerForEffects(e,a),Shape.props.effects.shadow.set(e,t,a,void 0,void 0,o))},remove:function(e,t,a,o){a=a||Shape.box(e,t),o=o||Shape.textBody.props.textStyle.props.effects.getTextContainerForEffects(e,a),Shape.props.effects.shadow.remove(e,t,a,o)}}},stroke:{set:function(t,a,o){o=o||Shape.box(t,a);var i=t.textBody.element?t.textBody.element:o.find("#"+Shape.textBody.textContainer),r=e(e("."+Shape.textBody.columnId,i)[0]),s={};Shape.textBody.props.textStyle.props.stroke.getStrokeObject(t,r,s),e.isEmptyObject(s)||Shape.creator.set(r[0],s),Shape.textBody.props.textStyle.props.stroke.dependency(t,a,o)},remove:function(t,a,o){o=o||Shape.box(t,a);var i=t.textBody.element?t.textBody.element:o.find("#"+Shape.textBody.textContainer),r=e(e("."+Shape.textBody.columnId,i)[0]),s={};s.stroke=ShapeConstants.FillType.NONE,Shape.creator.set(r[0],s)},getStrokeObject:function(t,a,o){o=o||{};var i=e.extend(!0,{},t.textBody.props.textStyle.props.stroke);if(i.jointype||(i.jointype=ShapeConstants.JoinType.ROUND),i.width=i.width?i.width:0,e.each(i,function(r,s){if("object"!=typeof s&&Shape.strokeElement[r]){var n=Shape.strokeElement[r].call(Shape.strokeElement,s,a,a,i.width,t);e.extend(!0,o,n)}}),i.fill)if(i.fill.type===ShapeConstants.FillType.NONE)o.stroke=ShapeConstants.FillType.NONE;else{var r=i.fill.solid.color;r&&r.rgb&&(o.stroke=VectorUtil.getRGBString(r)),o["stroke-opacity"]=1;var s=r.tweaks;s&&s.alpha&&(o["stroke-opacity"]=1-s.alpha)}},dependency:function(t,a,o){(o=o||Shape.box(t,a))&&0!==o.length&&Shape.textBody.props.textStyle.underlineChange(t,a,e(o))}}}},set:function(t,a,o){o=o||Shape.box(t,a),t.textBody.element=t.textBody.element?t.textBody.element:o.find("#"+Shape.textBody.textContainer);var i=t.textBody.element;Shape.textBody.props.column.set(t,a,o);var r=e(e("."+Shape.textBody.columnId,i)[0]);if(!(s=r.find("#"+Shape.textBody.tbox)).length){var s=Shape.creator.createGroup(o[0]);s=e(s),Shape.creator.set(s[0],{id:Shape.textBody.tbox}),r.append(s)}if(!(n=i.find("#"+Shape.textBody.innerbox)).length){var n=Shape.creator.createGroup(o[0]);n=e(n),Shape.creator.set(n[0],{id:Shape.textBody.innerbox}),s.append(n),n.data("paras",[])}for(var d=Shape.textBody.props,p=["column","inset","autoFit","valign","textStyle"],l=0;l<p.length;l++){var h=p[l];d[h]&&"column"!==h&&"autoFit"!==h&&(d[h].set?d[h].set:d[h]).call(d,t,a,o)}return n},remove:function(e,t,a){Shape.textBody.props.textStyle.remove(e,t,a)},inset:{set:function(e,t,a){a=a||Shape.box(e,t);var o=e.textBody.props,i=Shape.textBody.getTextContainer(e,a),r=Shape.textBody.props.innerBox(i),s=o.inset.left?o.inset.left:0,n=o.inset.top?o.inset.top:0;Shape.creator.set(r[0],{transform:"translate("+s+", "+n+")"}),r.data("translate_x",s),r.data("translate_y",n)},dependency:function(t,a,o){Shape.textBody.textBodyDimensionChange(t,a,o,!0),e(a).trigger("line_modified",{box:o,data:t,container:a})}},valign:{set:function(t,a,o){var i=0;o=o||Shape.box(t,a),(!t.textBody.props||t.textBody.props&&!t.textBody.props.valign)&&(t.textBody.props=e.extend(!0,t.textBody.props,{valign:ShapeConstants.VerticalAlignType.TOP})),t.textBody.props.inset=e.extend(!0,{left:9.6,right:9.6,top:4.8,bottom:4.8},t.textBody.props.inset),t.textBody.props.column=e.extend(!0,{num:1,gap:0},t.textBody.props.column);var r=t.textBody.props.valign,s=Shape.textBody.getTextContainer(t,o),n=Shape.textBody.props._element(s),d=s.data(Shape.textBody.editorData).length,p=o.data(Shape.textbox);if(p){var l=t.textBody.props.inset.top,h=t.textBody.props.inset.bottom,c=Shape.textBody.updateDimension(p,t.props.transform).height,f=Shape.textBody.paras.getTotalParaHeight(t,d,s);if(r===ShapeConstants.VerticalAlignType.TOP)i=l+h>c?(c-(l+h))/2:i;else if(r===ShapeConstants.VerticalAlignType.MIDDLE)i=(c-f)/2+(l-h)/2-l;else if(r===ShapeConstants.VerticalAlignType.BOTTOM){if(l+h>c)u=(l-h-c)/2;else var u=-1*h;i=u+c-f-l}}Shape.creator.set(n[0],{transform:"rotate(0) translate( 0,"+i+") scale(1,1)"}),s.data("valignTop",i),o.data("shape_rendered")&&Shape.textBody.props.textStyle.props.effects.set(t,a,o)}},column:{set:function(t,a,o){o=o||Shape.box(t,a),t.textBody.props=e.extend(!0,{column:{}},t.textBody.props);var i=Shape.textBody.getTextContainer(t,o),r=o.data(Shape.textbox);if(r){var s=Shape.textBody.updateDimension(r,t.props.transform);this.updateDimension(t,a,o,s,i)}},updateDimension:function(t,a,o,i,r){(!t.textBody.props||t.textBody.props&&!t.textBody.props.valign)&&(t.textBody.props=e.extend(!0,t.textBody.props,{valign:ShapeConstants.VerticalAlignType.TOP})),t.textBody.props.inset=e.extend(!0,{left:9.6,right:9.6,top:4.8,bottom:4.8},t.textBody.props.inset),t.textBody.props.column={num:1,gap:0};for(var s=t.textBody.props.inset,n=t.textBody.props.column,d=Math.floor(i.width-(s.left+s.right)-(n.num-1)*n.gap),p=Math.floor(i.height),l=d/n.num,h=0,c=[],f=Shape.textBody.paras.portions.t,u=0;u<n.num;u++){var m=e(o).attr("textColumnID"),g=o.find("#"+Shape.textBody.columnId+u+"_"+m);if(g.length){var S=g.data("width"),x=g.find("."+Shape.textBody.paraId);e.each(x,function(t,a){a=e(a);var o=e(a.children()[0]);c[t]=o.find("."+Shape.textBody.lineId),c[t].paraDiv=a,c[t].lineContainer=o,e.each(c[t],function(t,a){f.line.remainingWidth.decrease(e(a),S)})})}else{g=Shape.creator.createGroup(o[0]);m=Math.uuid();e(o).attr("textColumnID",m),Shape.creator.set(g,{id:Shape.textBody.columnId+u+"_"+m,class:Shape.textBody.columnId}),r[0].appendChild(g),e(r).data("textId",Shape.textBody.columnId+u+"_"+m),g=e(g)}var v={position:"absolute",top:0,width:Math.abs(i.width/n.num)};if(v.height=p+"px",v.left=h,u&&(v["margin-left"]=n.gap,h+=n.gap),h+=l,Shape.creator.set(g[0],{transform:"translate("+v.left+","+v.top+")"}),g.data("translate_x",v.left),g.data("translate_y",v.top),g.data("remainingHeight",i.height),g.data("width",l),c.length){S=g.data("width");e.each(c,function(i,r){e.each(r,function(s,n){n=e(n),t.textBody.paras.num=i,t.textBody.paras.element=r.paraDiv,f.line.totalWidth.set(t,a,o,n,r.paraDiv),f.line.remainingWidth.increase(e(n),S)})})}}},element:function(e,t,a){}},dependency:function(e,t,a){Shape.textBody.props.autoFit&&Shape.textBody.props.autoFit.set(e,t,a)}},paras:{wrapPara:function(t,a,o){var i=t.textBody.paras.element,r=i.find("."+Shape.textBody.lineId),s=Shape.textBody.paras.portions.t;e.each(r,function(r,n){s.line.setLineWidth(t,a,o,e(n),i,r)});var n={data:t,container:a,box:o};e.each(r,function(t,a){(a=e(a)).parent().parent().parent("."+Shape.textBody.paraId).length&&s.breakLine(n,e(a))}),s.words.updateRemainingWords(n)},createPara:function(t,a,o){var i=Shape.textBody.paraId,r=Shape.creator.createGroup(o[0]),s=Math.uuid(5);Shape.creator.set(r,{id:i,class:i}),(r=e(r)).data(Shape.textBody.editorData,[]),r.data("DOMIndexId",s);var n={chIndex:0,width:0,height:0};n.elementIndexId=s;var d=Shape.textBody.getEditorDataObject(n);return Shape.textBody.index.set(t,t.textBody.element,d,a),r},lineContainer:{create:function(t,a,o){var i=Shape.textBody.lineContainerId,r=Shape.creator.createGroup(o[0]);return r=e(r),Shape.creator.set(r[0],{id:i}),r}},set:function(t,a,o,i,r){var s=this,n=t.textBody.paras.num;o=o||Shape.box(t,a),i=i||t.textBody.paras[n],t.textBody.paras.fromPara=!0;var d=s.createPara(t,n,o);if((r=r||Shape.textBody.paras.getPara(o,n-1,t))&&r.length)d.insertAfter(r);else{var p=Shape.textBody.getTextContainer(t,o),l=t.textBody.innerBox?t.textBody.innerBox:Shape.textBody.props.innerBox(p);e(l).prepend(d)}t.textBody.paras.element=d,t.textBody.paras.prevWord=void 0;var h=d.data();h.changeStatus=!0,h.bulletSplitter=0,h.bulletWidth=0,h.bulletLeft=0,h.indent=i.style.indent?i.style.indent:0,h.margin=i.style.margin&&i.style.margin.left?i.style.margin.left:0;var c=s.lineContainer.create(t,a,o);d.append(c);var f=Shape.textBody.paras.portions.t.line.create(t,a,o),u=f.line,m=s.getEOPSpan(t,a,o,i),g=m.data();f.line.append(m);var S={chIndex:1,width:g.wordWidth,height:g.wordHeight};S.spaceWidth=0,S.wordType=g.type,S.elementIndexId=g.DOMIndexId;var x=Shape.textBody.getEditorDataObject(S);Shape.textBody.paras.portions.t.words.index.set(t,u,x,0);this.style.set(t,a,o,!0);var v,y=i.portions;if(y)for(var E=y.length,C=0;C<E;C++)Shape.textBody.paras.portions.get(t,C),v=Shape.textBody.paras.portions.set(t,a,o,v);var O=Shape.textBody.paras.portions.t;t.textBody.paras.fromPara=!1,t.textBody.paras.prevWord=void 0;for(var b=d.data(Shape.textBody.editorData),T=0,w=c.find("."+Shape.textBody.lineId);T<b.length;T++){var D=e(w[T]),P=O.line.getLinePathValues(t,D);O.line.lineCanister.update(t,P.eleObj,P.dataObj),O.words.updateCommentBG({data:t,container:a,box:o},D),Shape.textBody.paras.portions.props.drawUnderline(t,a,o,D)}Shape.textBody.props.valign.set(t,a,o),Shape.textBody.paras.portions.t.updateRemainingParas({data:t,container:a,box:o});var L={data:t,box:o,container:a},I=h[Shape.textBody.editorData].length-1,A=O.words.getFirstLineLeft(L,void 0,I,n),N=O.line.getLine(d,I);return A+=O.words.getWordTransform(N),O.words.setWordTranslate(m[0],{x:A,y:0}),o.data("shape_rendered")&&(t.line_modified=!0),d},getEOPSpan:function(e,t,a,o){if(!(r=e.textBody.paras.element.find(".eop")).length){var i={type:"EOP",portion:o.portions[0],portionNum:0},r=Shape.textBody.paras.portions.t.words.set(i,{data:e,container:t,box:a});Shape.creator.set(r[0],{id:"dummyword"}),r.addClass("eop"),r.data("length",1)}return r},setEopHeight:function(e,t,a,o){e.text(Shape.textBody.zeroWidthSpaceText);var i=Shape.textBody.paras.portions.t,r=t.data,s=i.line.getParentLine(e),o=o||r.textBody.paras[a].portions.length-1,n=r.textBody.paras.element.data(Shape.textBody.editorData),d=i.line.getLineIndex(s),p=n[d][Shape.textBody.height],l=i.words.getFontSize(r,a,o),h=i.words.getHeight(l,Shape.textBody.fontUnit),c=i.words.getWordIndex(e,s),f=e.data("wordHeight");e.data("wordHeight",h);var u={chIndex:0,width:0,height:h-f},m=Shape.textBody.getEditorDataObject(u);i.words.index.update(r,s,m,c);var g=n[d][Shape.textBody.height],S=Math.abs(g-p)>.1;if(S){var x=i.line.getLinePathValues(r,s);i.line.lineCanister.update(r,x.eleObj,x.dataObj),S&&i.line.updateRemainingLines(t,s)}},getEopHeight:function(e,t,a){var a=a||e.textBody.paras[t].portions.length-1,o=Shape.textBody.paras.portions.t.words.getFont(e,t,a).fontStr;return Shape.textBody.paras.portions.t.words.canvasDim(o,"|").width},getParaIndex:function(e){return e.index()},getNextPara:function(e){return e.next()},get:function(e,t){return e.textBody.paras.num=t,e},getTotalParaHeight:function(e,t,a){var o=(a=a||e.textBody.element)?a.data(Shape.textBody.editorData):[],i=0;if(o&&o.length){var r=0;for(t=void 0===t?a.data(Shape.textBody.editorData).length:t,r=0;r<t;r++){var s=o[r];i+=s.height+(s.before?s.before:0)+(s.after?s.after:0)}}return i},element:function(e,t,a){var a=a||Shape.box(e,t),o=Shape.textBody.paras.getPara(a,e.textBody.paras.num,e);e.textBody.paras.element=o},remove:function(e,t,a){if(0!==(a=a||Shape.box(e,t)).length){var o=e.textBody.paras.num,i=e.textBody.paras.element,r=e.textBody.element?e.textBody.element:Shape.textBody.getTextContainer(e,a);Shape.textBody.index.remove(e,r,o);var s=Shape.textBody.paras.getNextPara(i);i.remove(),Shape.textBody.paras.portions.t.updateRemainingParas({data:e,container:t,box:a},s,o),a.data("shape_rendered")&&(e.line_modified=!0)}},getParentPara:function(e){return e.parent().parent().parent()},getPara:function(e,t,a){if(t>=0){var o=Shape.textBody.getTextContainer(a,e);return a.textBody.element=o,o.find(".para").eq(t)}},dependency:function(e,t,a){Shape.textBody.paras.portions.t.updateRemainingParas({data:e,container:t,box:a}),Shape.textBody.paras.style.listStyle.reorderListNum(e,t,a),Shape.textBody.props.textStyle.props.effects.set(e,t,a),e.line_modified&&!e.editorOperate&&(t.trigger("line_modified",{box:a,data:e,container:t}),e.line_modified=!1)},animationDatas:{set:function(){},get:function(e){return e}},commentIds:{set:function(){},get:function(e){return e}},style:{set:function(t,a,o,i){var r=t.textBody.paras.num;o=o||Shape.box(t,a);var s=t.textBody.paras.element,n=t.textBody.paras[r].style,d=this;if(n.listStyle=n.listStyle?n.listStyle:{bullet:{type:ShapeConstants.BulletType.NONE}},Shape.textBody.paras.style.listStyle.set(t,a,o),e.each(n,function(e,i){var r=d[e];r&&r!=d.listStyle&&(r=r.set?r.set:r).call(d,t,a,o)}),Shape.textBody.paras.style.setParaTranslate(t,s,r),!i)for(var p=t.textBody.paras[r].portions.length,l=0;l<p;l++)t.textBody.paras[r].portions.num=l,Shape.textBody.paras.portions.element(t,a),Shape.textBody.paras.portions.props.set(t,a,o),Shape.textBody.paras.portions.props.dependency(t,a,o)},halign:{set:function(e,t,a){var o=e.textBody.paras.num;e.textBody.paras.element,e.textBody.paras[o].style.halign.toLowerCase()}},indent:{set:function(e,t,a){(a=a||Shape.box(e,t)).data("shape_rendered")&&Shape.textBody.paras.style.listStyle.setBulletPosition(e,t,a)}},spacing:{propNames:["line","before","after"],set:function(t,a,o){var i=t.textBody.paras.num,r=t.textBody.paras.element,s=t.textBody.paras[i].style.spacing,n=t.textBody.paras.fromPara,d=Shape.textBody.paras.style.spacing;e.each(d.propNames,function(e,i){s[i]&&d[i].set.call(d,t,a,o)}),Shape.textBody.paras.style.setParaTranslate(t,r,i),n||Shape.textBody.paras.portions.t.updateRemainingParas({data:t,container:a,box:o})},line:{set:function(e,t,a){a=a||Shape.box(e,t),Shape.textBody.paras.style.spacing.setValue(e,t,a,"line")},getValue:function(e,t,a){var o=a.textBody.props;return o&&o.autoFit&&"NORMAL"===o.autoFit.type&&o.autoFit.normal.lineSpaceScale&&"percent"===t&&(e-=1-o.autoFit.normal.lineSpaceScale),{type:t,value:e}},dependency:function(e,t,a){var o=e.textBody.paras.element,i=Shape.textBody.paras.style.listStyle.getBullet(o);if(i){var r=e.textBody.paras[e.textBody.paras.num].style;Shape.textBody.paras.style.spacing.setLineSpace(r,i,e)}}},updateLineSpace:function(t,a,o,i){var r=Shape.textBody.paras.portions.t,s=t.textBody.paras.element,n=s.find("."+Shape.textBody.lineId),d=t.textBody.paras.element.data(Shape.textBody.editorData),p=t.textBody.paras.fromPara;e.each(n,function(a,o){if(o=e(o),"percent"===i.type)var n=o.data(Shape.textBody.editorData),l=Shape.textBody.sumOfArray(n).height*i.value;else l=i.value;var h={chIndex:0,width:0,height:l-d[a][Shape.textBody.height]},c=Shape.textBody.getEditorDataObject(h);if(r.line.index.update(t,s,c,a),!p){var f=r.line.getLinePathValues(t,o);r.line.lineCanister.update(t,f.eleObj,f.dataObj)}})},updateLineContainer:function(t,a,o){var i=Shape.textBody.paras.portions.t,r=t.textBody.paras.element,s=e(r.children("#"+Shape.textBody.lineContainerId));if("before"===o)Shape.creator.set(s[0],{transform:"translate( 0, "+a+")"});else{var n=r.data(Shape.textBody.editorData).length-1;i.line.getLine(r,n);Shape.log("after spacing====")}},setValue:function(e,t,a,o){var i=e.textBody.paras.num,r=e.textBody.paras[i].style.spacing[o],s=e.textBody.element,n=e.textBody.paras.element,d=s.data(Shape.textBody.editorData)[i],p=r.type.toLowerCase(),l=r[p];if("line"===o){h=Shape.textBody.paras.style.spacing.line.getValue(l,p,e);d.line=h,this.updateLineSpace(e,t,a,h)}else if("before"===o){var h=d.line,c=(f=n.data(Shape.textBody.editorData))[0][Shape.textBody.height];l=Shape.textBody.paras.style.spacing.before.getValue(e,l,p,h,c),d[o]=l,this.updateLineContainer(e,l,o)}else if("after"===o){var h=d.line,f=n.data(Shape.textBody.editorData),c=f[f.length-1][Shape.textBody.height];l=Shape.textBody.paras.style.spacing.after.getValue(e,l,p,h,c),d[o]=l,this.updateLineContainer(e,l,o)}},before:{set:function(e,t,a){e.textBody.paras.num&&Shape.textBody.paras.style.spacing.setValue(e,t,a,"before")},checkAndSet:function(e,t,a){var o=e.textBody.paras.num,i=e.textBody.paras[o].style.spacing;i&&i.before&&i.before.type===ShapeConstants.SpacingValueType.PERCENT&&Shape.textBody.paras.style.spacing.before.set(e,t,a)},getValue:function(e,t,a,o,i){if("percent"===a){var r=e.textBody.props,s=o.value;r&&r.autoFit&&"NORMAL"===r.autoFit.type&&r.autoFit.normal.lineSpaceScale&&"percent"===o.type&&(i/=s+=1-r.autoFit.normal.lineSpaceScale),t*=i}else"absolute"!==a&&Shape.log("error in calculating before/after spacing");return t}},after:{set:function(e,t,a){e.textBody.paras.num!==e.textBody.paras.length-1&&Shape.textBody.paras.style.spacing.setValue(e,t,a,"after")},checkAndSet:function(e,t,a){var o=e.textBody.paras.num,i=e.textBody.paras[o].style.spacing;i&&i.after&&i.after.type===ShapeConstants.SpacingValueType.PERCENT&&Shape.textBody.paras.style.spacing.after.set(e,t,a)},getValue:function(e,t,a,o,i){return Shape.textBody.paras.style.spacing.before.getValue(e,t,a,o,i)}},setLineSpace:function(e,t,a){var o=e.spacing.line;if(o){return}}},setParaTranslate:function(e,t,a){var o=Shape.textBody.paras,i=t.data(),a=void 0!==a?a:o.getParaIndex(t),r=i.margin?i.margin:0,s=Shape.textBody.paras.getTotalParaHeight(e,a);Shape.creator.set(t[0],{transform:"rotate(0) translate("+r+","+s+") scale(1,1)"})},margin:{set:function(e,t,a){var o=e.textBody.paras.num,i=e.textBody.paras.element;a=a||Shape.box(e,t);var r=e.textBody.paras[o].style.margin,s=r&&r.left?r.left:0;i.data();i.data("margin",s)},dependency:function(e,t,a){var o=e.textBody.paras.num;e.textBody.paras[o].style.listStyle&&Shape.textBody.paras.style.listStyle.setBulletPosition(e,t,a)}},listStyle:{maxBulletSize:4,set:function(e,t,a){var o=e.textBody.paras.num;a=a||Shape.box(e,t);var i=e.textBody.paras.element,r=e.textBody.paras[o].style.listStyle;if(r){r.bullet||(r.bullet={type:ShapeConstants.BulletType.NONE});var s=Shape.textBody.paras;if(!(n=s.style.listStyle.getBullet(i)).length){var n=s.style.listStyle.createBullet(a);s.portions.t.line.getLine(i,0).prepend(n)}var d=s.style.listStyle;d.bullet.set(e,t,a,n),d.setListStyleProps(e,t,a,n)}},setListStyleProps:function(e,t,a,o){(o=o||Shape.textBody.paras.style.listStyle.getBullet(e.textBody.paras.element)).length&&(this._setListStyleProps(e,o),this.setBulletPosition(e,t,a,o))},_setListStyleProps:function(t,a){var o=t.textBody.paras[t.textBody.paras.num],i=e.extend(!0,{},o.style.listStyle),r=e.extend(!0,{},o.portions[0]);if(i.size=i.size?i.size:1,i.size=i.size>Shape.textBody.paras.style.listStyle.maxBulletSize?Shape.textBody.paras.style.listStyle.maxBulletSize:i.size,i.color=i.color?i.color:r.props.fill.solid.color,i.bullet&&i.bullet.type==ShapeConstants.BulletType.PICTURE){var s=Shape.textBody.paras.style.listStyle.bullet.picture.getPictureBulletSize(t,a),n=a.find("#picture_bullet_rect");e(n).length&&Shape.creator.set(n,{width:s.width,height:s.height,y:-s.height}),a.data("size",s.width)}else{var d=i.size*r.props.size;Shape.textBody.paras.portions.props.size(a,d,t),a.data("size",d+Shape.textBody.fontUnit)}var p=a.children("#"+Shape.textBody.bulletSpanContent);Shape.textBody.paras.style.spacing.setLineSpace(o.style,a,t);var l={};if(l.fill=VectorUtil.getRGBString(i.color),!e.isEmptyObject(i.font)){var h=i.font.fontFamily.name;!Shape.isWingDingsSupported&&"wingdings"===h.toLowerCase()&&t.pdfVariables&&t.pdfVariables.customFont?(l["font-family"]=t.pdfVariables.customFont,a.data("fontName",t.pdfVariables.customFont)):(l["font-family"]=h,a.data("fontName",h))}Shape.creator.set(p[0],l)},setBulletPosition:function(e,t,a,o){var i=e.textBody.paras.num,r=e.textBody.paras.element;if(r.length){var s=r.find("."+Shape.textBody.lineId).first(),n=Shape.textBody.paras.portions.t;a=a||Shape.box(e,t),o=o||Shape.textBody.paras.style.listStyle.getBullet(r);var d=e.textBody.paras[i].style;d.margin||(d.margin={left:0});var p,l=d.indent?d.indent:0,h=0;if(d.listStyle.bullet||(d.listStyle.bullet={type:ShapeConstants.BulletType.NONE}),(p=d.listStyle.bullet.type)!==ShapeConstants.BulletType.NONE){var c=o.data(),f="",u="";c.size&&(f+=c.size),c.fontName&&(f+='"'+c.fontName+'" '),c.text&&(u=c.text);var m;h=(m=p===ShapeConstants.BulletType.PICTURE?Shape.textBody.paras.style.listStyle.bullet.picture.getPictureBulletSize(e,o):Shape.textBody.paras.portions.t.words.canvasDim(f,u))?m.width:0}var g=this.getBulletSplitterLeft(d,h),S=g.pos,x=g.split,v={bulletLeft:S,bulletWidth:h,indent:l,bulletSplitter:x=x>0?x:0};r.data(v),n.line.setLineWidth(e,t,a,s,r,0)}},getBulletSplitterLeft:function(e,t){var a=e.indent?e.indent:0,o=0,i=0;if(a<0){var r=e.margin&&e.margin.left?e.margin.left:0,s=-1*a;s<=r?(i=a,o=s-t):(i=-1*r,o=s-t),o=t>0?o:0}else o=a>t?a-t:0;return{split:o,pos:i}},bullet:{enabled:"enabled",disabled:"disabled",semiEnabled:"semi-enabled",set:function(e,t,a,o){var i=Shape.textBody.paras.style.listStyle.bullet,r=e.textBody.paras.num,s=e.textBody.paras.element,n=e.textBody.paras[r],d=n.style.listStyle.bullet,p=d.type.toLowerCase(),l=n.portions[0],h=l.t,c=(f=l.type)&&"linebreak"===f.toLowerCase();d.status=d.status?d.status:h&&h.length||c?i.enabled:i.disabled,a=a||Shape.box(e,t),o=o||Shape.textBody.paras.style.listStyle.getBullet(s),i[p].set.call(this,e,t,a,o);var f=d.type;Shape.textBody.paras.style.listStyle.setBulletPosition(e,t,a,o)},status:{set:function(e,t,a,o){var i=Shape.textBody.paras.style.listStyle.bullet,r=e.textBody.paras.num,s=e.textBody.paras[r].style.listStyle.bullet.status,n=e.textBody.paras.element;o=o||Shape.textBody.paras.style.listStyle.getBullet(n),s===i.semiEnabled?o.removeClass("bullet-disabled").addClass("bullet-semi"):s===i.disabled?o.removeClass("bullet-semi").addClass("bullet-disabled"):o.removeClass("bullet-disabled bullet-semi")}},picture:{set:function(t,a,o,i){var r=t.textBody.paras.element,s=Shape.textBody.paras.style.listStyle.bullet.picture;Shape.textBody.paras.style.listStyle.bullet.removeBulletImage(r),i=i||Shape.textBody.paras.style.listStyle.getBullet(r);var n="videobutton-embedmessage";t.nvOProps.nvProps&&t.nvOProps.nvProps.embed?(t.nvOProps.nvProps.embed.twitter&&(n="live"===t.nvOProps.nvProps.embed.twitter.type.toLowerCase()?"ui-icon-twitter-live-embedded":"ui-icon-twitter-marked-embedded"),e(r).css({"background-color":"black","pointer-events":"none"}),i.removeClass("bullet-disabled bullet-semi bullet").addClass(n)):(s._set(t,i,a),Shape.textBody.paras.style.listStyle.bullet.status.set(t,a,o,i))},_set:function(t,a,o){var i=t.textBody.paras.num,r=t.textBody.paras[i].style;if(r.listStyle.bullet.picture){var s=r.listStyle.bullet.picture.value,n=s.url,d=s.type===ShapeConstants.PictureType.USERDEFINED,p=s.id,l=function(e){bx=Shape.box(t,o),bx.length&&(t.textBody.paras.num=i,Shape.textBody.element(t,o,bx),Shape.textBody.paras.element(t,o,bx),t.textBody.paras.element&&t.textBody.paras.element.length&&(Shape.textBody.paras.style.set(t,o,bx),Shape.textBody.paras.style.dependency(t,o,bx)))},h=Shape.textBody.paras.style.listStyle.bullet.picture.setPictureBulletSize(t,a,l);SVGFill.pict.href(h,n,void 0,d,p);var c=e(a).data();c&&c.origImageDim?s.origImageDim=!0:s.origImageDim=!1,SVGFill.pict.setImageCustomAttr(h,s),a.children("#"+Shape.textBody.bulletSpanContent).text(Shape.textBody.zeroWidthSpaceText)}},setPictureBulletSize:function(t,a,o){var i=Shape.textBody.paras.style.listStyle.bullet.picture.getPictureBulletSize(t,a,o),r=i.height,s=i.width,n=e("#picture_bullet_rect",a);return n.length||(n=Shape.creator.getImageElement(a)),e(a).append(n),Shape.creator.set(n,{y:-r,id:"picture_bullet_rect"}),Shape.creator.set(n,{width:s,height:r}),a.data("size",s),n},getPictureBulletSize:function(t,a,o){var i=t.textBody.paras.num,r=t.textBody.paras[i].style;if(r&&r.listStyle&&r.listStyle.bullet&&r.listStyle.bullet.type==ShapeConstants.BulletType.PICTURE){var s=r.listStyle.bullet.picture.value,n=s.dim;if(!n){var d=e(a).data();n=d&&d.origImageDim?d.origImageDim:void 0}var p=r.listStyle.size?r.listStyle.size:1,l=Shape.textBody.paras.portions.t.words.getFontSize(t,i,0),h={width:p*l,height:p*l};if(e.isEmptyObject(n)){var c={box:a};VectorUtil.getImageDim(s.url,o,c)}else{var f=l/n.height;h={width:p*(n.width*f),height:p*(n.height*f)}}return h}},dependency:function(e,t,a){Shape.textBody.paras.style.listStyle.reorderListNum(e,t,a)}},character:{set:function(e,t,a,o){var i=e.textBody.paras.element;Shape.textBody.paras.style.listStyle.bullet.removeBulletImage(i);var r=Shape.textBody.paras.style.listStyle.bullet.character;o=o||Shape.textBody.paras.style.listStyle.getBullet(i),r._set(e,o),Shape.textBody.paras.style.listStyle.bullet.status.set(e,t,a,o)},_set:function(t,a){var o=t.textBody.paras.num,i=t.textBody.paras[o].style;if(i.listStyle.bullet.character){var r=i.listStyle.bullet.character.ch;if(!Shape.isWingDingsSupported){var s=t.textBody.paras[o].style.listStyle.font;if(s){var n=s.fontFamily.name;if("wingdings"===n.toLowerCase()){var d=e.uniCode.font[n.toLowerCase()][r];r=d||"128083"}}}var p="&#"+r+";",l=e("<span id ='dummySpan'></span>");l.html(p);var h=l.text();a.children("#"+Shape.textBody.bulletSpanContent).text(h),a.data("text",h),l.remove()}},dependency:function(e,t,a){Shape.textBody.paras.style.listStyle.reorderListNum(e,t,a)}},number:{set:function(e,t,a,o){var i=e.textBody.paras.element;Shape.textBody.paras.style.listStyle.bullet.removeBulletImage(i);var r=Shape.textBody.paras.style.listStyle.bullet.number;o=o||Shape.textBody.paras.style.listStyle.getBullet(i),r._set(e,o),Shape.textBody.paras.style.listStyle.bullet.status.set(e,t,a,o)},_set:function(t,a){var o=t.textBody.paras.num,i=t.textBody.paras[o].style;if(i.listStyle.bullet.number){var r=t.textBody.paras[o].listNum;if(r=r||Shape.textBody.paras.style.listStyle.getBulletNumber(t.textBody.paras,o)){var s=i.listStyle.bullet.number,n=e.NumericConversion.convert(s,r),d=e("<span id ='dummySpan'></span>");d.html(n);var p=d.text();a.children("#"+Shape.textBody.bulletSpanContent).text(p),a.data("text",p),d.remove()}}},dependency:function(e,t,a){Shape.textBody.paras.style.listStyle.reorderListNum(e,t,a)}},none:{set:function(e,t,a,o){e.textBody.paras.num;var i=(o=o||Shape.textBody.paras.style.listStyle.getBullet(paraDiv)).children("#"+Shape.textBody.bulletSpanContent);i.empty(),o.children("#picture_bullet_rect").remove(),i.text(Shape.textBody.zeroWidthSpaceText)},dependency:function(e,t,a){Shape.textBody.paras.style.listStyle.reorderListNum(e,t,a)}},removeBulletImage:function(t){e(t).length&&e(t).find("#picture_bullet_rect").remove()},dependency:function(e,t,a){Shape.textBody.paras.style.listStyle.reorderListNum(e,t,a)}},createBullet:function(t){var a=Shape.creator.createGroup(t[0]);a=e(a);var o=Shape.creator.createText(t[0]);return Shape.creator.set(a[0],{class:Shape.textBody.bullet,id:Shape.textBody.bullet}),Shape.creator.set(o,{class:Shape.textBody.bulletSpanContent,id:Shape.textBody.bulletSpanContent}),a.prepend(o),a},getBullet:function(e){return e.find("#bullet")},getBulletNumber:function(e,t){var a=e[t].style,o=a.level,i=a.listStyle;return!!(i&&i.bullet&&i.bullet.number)&&(t=this.getParaListNum(e,o,t))},getParaListNum:function(e,t,a){var o=a,i=e[a],r=i.style?i.style:void 0,s=r&&r.listStyle.bullet?r.listStyle.bullet:{},n=s.number?s.number.type:void 0,d=s.number?s.number.startat:0,p=s.type?s.type:ShapeConstants.BulletType.NONE;d=d?parseInt(d):d;for(var l=a?1:d||1,h=0;o;){var c=(s=(r=(i=e[o-1]).style?i.style:void 0)&&r.listStyle&&r.listStyle.bullet?r.listStyle.bullet:{}).number?s.number.type:void 0,f=s.number?s.number.startat:0,u=s.type?s.type:ShapeConstants.BulletType.NONE,m=i.portions[0].t,g=m&&m.length;if(pLevel=i?i.style.level:0,pLevel===t){if(p!==u){l=d||l;break}if(d){if(f!==d){l=d||l;break}h++}if((!g&&u!==ShapeConstants.BulletType.NONE||n!==c)&&l--,u!==ShapeConstants.BulletType.NUMBER)break;l++}else if(pLevel<t&&u===ShapeConstants.BulletType.NUMBER){l=d||l;break}o--}return l=h?h+d:l},reorderListNum:function(e,t,a){a=a||Shape.box(e,t);for(var o=e.textBody.paras.num,i=e.textBody.paras,r=e.textBody.paras.element,s=o;s<i.length;s++){var n=i[s];if((n.style&&n.style.listStyle&&n.style.listStyle.bullet?n.style.listStyle.bullet.type:void 0)===ShapeConstants.BulletType.NUMBER){n.listNum=Shape.textBody.paras.style.listStyle.getBulletNumber(i,s),e.textBody.paras.num=s,e.textBody.paras.element=Shape.textBody.paras.getPara(a,s,e);var d=i[s].portions[0].t||i[s].portions[0].type===ShapeConstants.PortionType.LINEBREAK;i[s].style.listStyle.bullet.status=i[s].style.listStyle.bullet.status?i[s].style.listStyle.bullet.status:d?void 0:Shape.textBody.paras.style.listStyle.bullet.disabled,Shape.textBody.paras.style.listStyle.bullet.number.set(e,t,a),Shape.textBody.paras.style.listStyle.setBulletPosition(e,t,a)}}e.textBody.paras.num=o,e.textBody.paras.element=r}},dependency:function(e,t,a){a=a||Shape.box(e,t),Shape.textBody.paras.style.listStyle.reorderListNum(e,t,a),Shape.textBody.paras.wrapPara(e,t,a),Shape.textBody.props.textStyle.props.effects.set(e,t,a),e.line_modified&&!e.editorOperate&&(t.trigger("line_modified",{box:a,data:e,container:t}),e.line_modified=!1)}},portions:{set:function(e,t,a){if((a=a||Shape.box(e,t))&&0!==a.length){var o=e.textBody.paras,i=o.num,r=o[i].portions.num;o[i].portions[r];o.fromPara||this.updatePortionNum(e,t,a,r,!0),Shape.textBody.paras.portions.t.set(e,t,a,!0)}},updateLinePortionNum:function(t,a,o){var i=Shape.textBody.paras.portions.t,r=a.data();o||(o=a.find("."+Shape.textBody.wordId).first()).length&&(r.portions.start+=t);for(var s=o?o.data("subword")?i.words.getParentWord(o):o:void 0,n=r.editorData;o.length;)if(o.data("subword")){var d=o.data();if(d.portion+=t,nextword=i.subword.getNextSubword(o),!nextword.length){var p=(s=i.words.getParentWord(o)).data("space"),l=void 0;e.each(p,function(e,a){a.portion+=t,l=a.portion}),s.data("portions").end=void 0!==l?l:d.portion,nextword=i.words.getNextWord(s)}var h=i.subword.getParentWord(o),c=i.words.getWordIndex(h,a),f=i.subword.getSubWordIndex(o,h);n[c][Shape.textBody.subWordEditorData][f].portion=d.portion,n[c][Shape.textBody.space]=p||h.data("space"),n[c][Shape.textBody.portions]=h.data("portions"),o=nextword}else{var u=i.words.getWordIndex(o,a);if(o.data("hasSubword")){var m=o.find("."+Shape.textBody.subwordId);o.data("portions").start+=t;for(var g=0;g<m.length;g++){var S=e(m[g]),f=i.subword.getSubWordIndex(S,o);n[u][Shape.textBody.subWordEditorData][f].portion=S.data("portion")}o=m.first()}else{portions=o.data("portions"),portions.start+=t,portions.end+=t,n[u].portions=o.data("portions");p=o.data("space");n[u].space=p,e.each(p,function(e,a){a.portion+=t}),s=o,o=i.words.getNextWord(o)}}if(s&&s.length){var x=s.data();r.portions.end=x.portions.end}},updatePortionNum:function(t,a,o,i,r){var s=t.textBody.paras,n=s.num,i=s[n].portions.num;i=r?i:i+1;var d=s.element,p=this.getPortion(d,i),l=r?1:-1,h=Shape.textBody.paras.portions.t;if(p.length){var c=p[0],f=c.spaceObj.length&&"before"===c.spaceObj[0].at||!c.portion.length&&c.spaceObj.length&&"after"===c.spaceObj[0].at,u=c.line.data(),m=u.editorData;if(f){var g=c.spaceObj[0],S=g.word;e.each(S.data("space"),function(e,a){if(e>=g.index.start){a.portion+=l;var o=Shape.textBody.paras.portions.t.words.getSpaceProps(t,n,a.portion);a.fill=o.fill,a.baseline=o.baseline}});var x=S.data(),v=x.portions.end;x.space.length&&(S.data("portions").end=x.space[x.space.length-1].portion);var y=h.words.getWordIndex(S,c.line);m[y].portions.end=S.data("portions").end,m[y].space=S.data("space"),u.portions.end=u.portions.end===v?x.portions.end:u.portions.end,S=S.next().not(".eop").not(".underlinewrapper")}else S=c.portion.first();if(c.line.data("portions").start===i&&(c.line.data("portions").start+=l),S.data("subword")){var E=Shape.textBody.paras.portions.t.words.getParentWord(S);E.data("portions").start===i&&(E.data("portions").start+=l)}S.length&&this.updateLinePortionNum(l,c.line,S);for(var C=Shape.textBody.paras.portions.t.line.next(c.line);C.length;)this.updateLinePortionNum(l,C),C=Shape.textBody.paras.portions.t.line.next(C)}},test:function(e,t,a){Shape.testing=!0;var o=ZSShowEditor.getSelectedShapes()[0],i=o.data,r=o.box,s=currentEditor.config.get.shapeContainer();i.textBody.paras.num=e,Shape.textBody.paras.element(i,s,r),i.textBody.paras[e].portions.num=t,Shape.textBody.paras.portions.element(i,s,r),i.textBody.paras[e].portions[t].t=a,Shape.textBody.paras.portions.t.set(i,s,r),Shape.textBody._test(i,r),Shape.testing=!1},dependency:function(e,t,a){0!==(a=a||Shape.box(e,t)).length&&(Shape.textBody.paras.portions.props.dependency(e,t,a),Shape.textBody.props.textStyle.props.effects.set(e,t,a),e.line_modified&&!e.editorOperate&&(t.trigger("line_modified",{box:a,data:e,container:t}),e.line_modified=!1))},get:function(e,t){return e.textBody.paras[e.textBody.paras.num].portions.num=t,e},element:function(e,t){var a=e.textBody.paras.num,o=e.textBody.paras[a].portions.num,i=e.textBody.paras.element,r=Shape.textBody.paras.portions.getPortion(i,o);e.textBody.paras[a].portions.element=r},remove:function(e,t,a){if(0!==(a=a||Shape.box(e,t)).length){var o=e.textBody.paras,i=o[o.num].portions.num,r=o[o.num].portions.element.length,s=Shape.textBody.paras.portions.t;if(r)var n=o[o.num].portions.element[0].line,d=Shape.textBody.paras.portions.t.line.prev(n);if(this._remove(e,t,a),r){this.updatePortionNum(e,t,a,i,!1),n=n.closest(".para").length?n:d;p={data:e,box:a,container:t};Shape.textBody.paras.portions.t.breakLine(p,n),s.words.updateRemainingWords(p)}if(i>=o[o.num].portions.length-1){var p={data:e,container:t,box:a},l=Shape.textBody.paras.getEOPSpan(e,t,a,e.textBody.paras[o.num]);Shape.textBody.paras.setEopHeight(l,p,o.num)}}},_remove:function(t,a,o){var i=t.textBody.paras.num,r=t.textBody.paras[i].portions.num,s={data:t,container:a,box:o},n=t.textBody.paras[i].portions.element,d=this.getAdjacentWords(n),p=d.next;if(p&&"SPACE"===p.type&&p.index>0)for(var l=p.word.data(),h=p.index-1;h>=0;h--)l.space[h].portion===r&&p.index--;n&&e.each(n,function(t,a){var t,o=a.portion,i=a.line;for(t=o.length-1;t>=0;t--){var n=e(o[t]);(n.data("subword")?Shape.textBody.paras.portions.t.subword:Shape.textBody.paras.portions.t.words).removePortion(s,n,r,i)}var d=a.spaceObj;d&&e.each(d,function(e,t){Shape.textBody.paras.portions.t.words.removeSpace(s,t,i)})}),this.combineWords(s,d)},convertSubwordToWord:function(e,t,a,o,i){t.length||Shape.error("No subword to be converted to word");t.first();var r,s,n=a.data(),d=n.space;"prev"===i?n.broken&&n.broken.before&&(r=n.broken.before):"next"===i&&n.broken&&n.broken.after&&(s=n.broken.after);var p=Shape.textBody.paras.portions.t.words.createWordFromSubwords(e,t,d),l=p.data();return r?l.broken={before:r}:s&&(l.broken={after:s}),Shape.textBody.paras.portions.t.words.insertnewWordAfter(e,a,p,o),Shape.textBody.paras.portions.t.words.remove(e,a,o),p},combineWords:function(e,t,a){var o=Shape.textBody.paras.portions.t,i=t.prev,r=t.next;if(!r.word||!r.word.length){if(!i.word||!i.word.length)return;var s=i.word.data();if(s.subword||s.hasSubword){var n=s.subword?o.words.getParentWord(i.word):i.word,d=o.line.getParentLine(n);return void((v=o.subword.getSubwords(n)).length<2&&this.convertSubwordToWord(e,v,n,d,"prev"))}}if(!i.word||!i.word.length){if(!r.word||!r.word.length)return;var p=r.word.data();if(p.subword||p.hasSubword){var n=p.subword?o.words.getParentWord(r.word):r.word,l=o.line.getParentLine(n);return void((v=o.subword.getSubwords(n)).length<2&&this.convertSubwordToWord(e,v,n,l,"next"))}}if(r.word&&r.word.length&&i.word&&i.word.length&&"EOP"!==r.word.data("type")){var h="NORMAL"===i.type&&i.word.data("lang")===Shape.textBody.lang.EAST_ASIAN,c="FIELD"===i.type;if((h||c)&&"SPACE"!==r.type){var f=r.word.data("subword")?o.words.getParentWord(r.word):r.word,u=f.data();return u.hasSubword&&(v=o.subword.getSubwords(f)).length<2&&(f=this.convertSubwordToWord(e,v,f,l,"next")),void((u=f.data()).broken&&u.broken.before&&delete u.broken.before)}var m="NORMAL"===r.type&&r.word.data("lang")===Shape.textBody.lang.EAST_ASIAN,g="FIELD"===r.type;if(m||g){var S=i.word.data("subword")?o.words.getParentWord(i.word):i.word,x=S.data();if(x.hasSubword){var v=o.subword.getSubwords(S);v.length<2&&(S=this.convertSubwordToWord(e,v,S,d,"prev"))}(x=S.data()).broken&&x.broken.after&&delete x.broken.after}else t.prevline=d,t.nextline=l,this._combineWords(e,t,a)}},_combineWords:function(t,a,o){var i=Shape.textBody.paras.portions.t,r=a.prev,s=a.next,n=a.prevline,d=a.nextline;if(n=n||i.line.getParentLine(r.word),d=d||i.line.getParentLine(s.word),"NORMAL"===r.type)if((p=(I=r.word).data()).subword){var p=(I=r.word).data(),l=i.words.getParentWord(I),h=i.subword.getSubWordIndex(I,l),c=l.find("."+Shape.textBody.subwordId).length,f=s.word.data(),u=l.data();if(u.broken&&u.broken.after&&(C=u.broken.before),"NORMAL"===s.type)if(f.subword){var m=i.words.getParentWord(s.word),g=e.extend(!0,{},m.data()),S=i.subword.getSubWordIndex(s.word,m);if(l[0]===m[0]);else{0!=S&&Shape.error("Prev and Next words are SUBWORDS- SO subwordIndex cannot be other than 0");D=e();if(o)if(h===c-1){var x=p.text,v=f.text;L=x+v,i.subword.updateText(t,{text:L,subword:I,index:h},l,n),D=i.subword.getSubwords(m,{from:S+1})}else Shape.error("prev word.. It should be the last subword.. ");else D=i.subword.getSubwords(m,{from:S});P=e.extend(!0,[],g.space);l=i.subword.insertSubWordInWord(t,D,l,h+1),i.words.addSpaceAfterWord(t,l,P),i.words.remove(t,m)}if(g.broken&&g.broken.after){var y=l.data();y.broken=e.extend(!0,y.broken,{after:g.broken.after}),i.connectBrokenWords(l,n,t)}}else if(h===c-1){g=e.extend(!0,{},f);l.data().space.length&&Shape.error("som problem , there shouldnt be any space");P=e.extend(!0,[],f.space);if(o)L=(x=p.text)+(v=g.text),i.subword.updateText(t,{text:L,subword:I,index:h},l,n),i.words.updateSpaceAfter(t,P,l,n);else{var E=i.subword.createSubWordsFromWordData(f,s.word,t);l=i.subword.insertSubWordInWord(t,E,l,c),i.words.addSpaceAfterWord(t,l,P)}i.words.remove(t,s.word,d),g.broken&&g.broken.after&&((y=l.data()).broken=e.extend(!0,y.broken,{after:g.broken.after}),i.connectBrokenWords(l,n,t))}else Shape.error("some problem",r,s);else if("SPACE"===s.type){h!==c-1&&Shape.error("prevWord is a SUBWORD and nextWord is a space, so the prevWordIndex should be the last subwordIndex",r,s),o&&l[0]===s.word[0]&&Shape.error("It shouldn't come here.. same parent word.. ");P=e.extend(!0,[],f.space);l[0]!==s.word[0]?(i.words.addSpaceAfterWord(t,l,P),i.words.remove(t,s.word)):1===c&&(l=this.convertSubwordToWord(t,I,l,n,"prev")),(u=l.data()).broken&&u.broken.after&&delete u.broken.after}else"LINEBREAK"!==s.type&&"FIELD"!==s.type||((D=i.subword.getSubwords(l)).length<2&&(l=this.convertSubwordToWord(t,D,l,n,"prev")),(u=l.data()).broken&&u.broken.after&&delete u.broken.after);C&&((u=l.data()).broken=e.extend(!0,u.broken,{before:C}))}else{var C;p.broken&&p.broken.before&&(C=p.broken.before);var f=s.word.data(),O=s.word;if(p.space.length){if("NORMAL"===s.type){if(f.subword){b=i.words.getParentWord(O);(D=i.subword.getSubwords(b)).length<2&&(O=this.convertSubwordToWord(t,D,b,d,"next"))}}else if("SPACE"===s.type)if(f.text&&f.text.length)Shape.error("THe next word should not be having text in it, But it has",f);else{P=f.space;i.words.addSpaceAfterWord(t,I,P),i.words.remove(t,s.word)}(f=(O=O.data("subword")?i.words.getParentWord(O):O).data()).broken&&f.broken.before&&delete f.broken.before}else{if("NORMAL"===s.type){if(I.find("."+Shape.textBody.subwordId).length&&Shape.error("prevWord has subword..."),f.subword){var b=i.words.getParentWord(O),T=i.subword.getSubWordIndex(O,b);g=e.extend(!0,{},b.data());var w=I.find("."+Shape.textBody.subwordId).length;if(w=w||1,o){L=(x=p.text)+(v=f.text);i.words.updateText(t,{text:L,word:I},n),T+=1,w+=1}var D=i.subword.getSubwords(b,{from:T}),P=b.data("space");I=i.subword.insertSubWordInWord(t,D,I,w),i.words.addSpaceAfterWord(t,I,e.extend(!0,[],P)),i.words.remove(t,b)}else{P=e.extend(!0,[],f.space);if(g=e.extend(!0,{},f),o){var L=(x=p.text)+(v=g.text);i.words.updateText(t,{text:L,word:I},n),i.words.updateSpaceAfter(t,P,I,n)}else{D=i.subword.createSubWordsFromWordData(f,O,t);w=(w=I.find("."+Shape.textBody.subwordId).length)||1,I=i.subword.insertSubWordInWord(t,D,I,w),i.words.addSpaceAfterWord(t,I,P)}i.words.remove(t,O)}g.broken&&g.broken.after&&((p=I.data()).broken=e.extend(!0,p.broken,{after:g.broken.after}),i.connectBrokenWords(I,n,t))}else if("SPACE"===s.type){P=f.space;i.words.addSpaceAfterWord(t,I,P),i.words.remove(t,O),p.broken&&p.broken.after&&delete p.broken.after}else"LINEBREAK"!==s.type&&"FIELD"!==s.type||p.broken&&p.broken.after&&delete I.broken.after;p=I.data(),C&&(p.broken={before:C})}}else if("SPACE"===r.type){var I=r.word,A=r.index;A>r.word.data("space").length-1&&Shape.error("some problem",r,s);f=s.word.data();if("NORMAL"===s.type)if(-1===A){var N=i.subword.getSubwords(r.word).length,R=s.word;f.subword&&(R=i.words.getParentWord(s.word));var g=R.data(),D=i.subword.createSubWordsFromWordData(g,R,t);if(N)Shape.error("prevWord : SPACE, nextWord : WORD/SUBWORD - Code flow,Shouldn't be here. If the prev word has subwords, adjacentwords() should have been returned with the previous subword");else{I=i.subword.insertSubWordInWord(t,D,I,1),i.words.addSpaceAfterWord(t,I,g.space),g.broken&&g.broken.after&&((p=I.data()).broken=e.extend(!0,p.broken,{after:g.broken.after})),i.words.remove(t,R,d)}}else{O=s.word;if(f.subword){var O=i.words.getParentWord(s.word),B=i.line.getParentLine(O);(D=i.subword.getSubwords(O)).length<2&&(O=this.convertSubwordToWord(t,D,O,B,"next"))}(f=O.data()).broken&&f.broken.before&&delete f.broken.before}else if("SPACE"===s.type){O=s.word;if(o&&I[0]===O[0]&&Shape.error("It shouldn't come here.. prev and next pointing the same word.. "),I[0]!==O[0]){P=f.space;i.words.addSpaceAfterWord(t,I,P),i.words.remove(t,s.word,d)}}else if("LINEBREAK"===s.type||"FIELD"===s.type);}else if("LINEBREAK"===r.type){if("NORMAL"===s.type){if((f=(O=s.word).data()).subword){O=i.words.getParentWord(s.word);B=i.line.getParentLine(O);(D=i.subword.getSubwords(O)).length<2&&(O=this.convertSubwordToWord(t,D,O,B,"next"))}(f=O.data()).broken&&f.broken.before&&delete f.broken.before}}else if("FIELD"===r.type&&"SPACE"===s.type){var p=(I=r.word).data(),P=(f=(O=s.word).data()).space;i.words.addSpaceAfterWord(t,I,P),i.words.remove(t,O),p.broken&&p.broken.after&&delete p.broken.after}},getAdjacentWords:function(t){var a=Shape.textBody.paras.portions.t,o={},i={};if(!t.length)return{prev:o,next:i};var r=t[0],s=t[t.length-1];if(r.spaceObj.length&&"before"===r.spaceObj[0].at||!r.portion.length&&r.spaceObj.length&&"after"===r.spaceObj[0].at){var n=(h=r.spaceObj[0]).word;o=h.index.start>0?{type:"SPACE",word:n,index:h.index.start-1}:(f=n.find("."+Shape.textBody.subwordId)).length?{type:"NORMAL",word:f.last()}:{type:"SPACE",word:n,index:-1}}else{var d=r.portion.first();if(d.data("subword")){var p=a.subword.getPrevSubword(d);if(p.length)o={type:"NORMAL",word:p};else{m=a.words.getParentWord(d);if((p=a.words.getPrevWord(m)).length){var l=p.data();o=l.text&&l.text.length||l[Shape.textBody.editorData].length?{type:v="FIELD"===l.type?l.type:"NORMAL",word:p}:{type:"SPACE",word:p,index:l.space.length-1}}}}else(p=a.words.getPrevWord(d)).length&&(o=(l=p.data()).text&&l.text.length||l[Shape.textBody.editorData].length?{type:v="FIELD"===l.type?l.type:"NORMAL",word:p}:{type:"SPACE",word:p,index:l.space.length-1})}if(s.spaceObj.length&&"after"===s.spaceObj[s.spaceObj.length-1].at){var h=s.spaceObj[s.spaceObj.length-1],c=(n=h.word).data();if(h.index.end===c.space.length-1){if(x=a.words.getNextWord(n))if(x.data("hasSubword")){var f=x.find("."+Shape.textBody.subwordId);i={type:"NORMAL",word:f.first()}}else i={type:v="LINEBREAK"===x.data("type")||"FIELD"===x.data("type")?x.data("type"):"NORMAL",word:x}}else i={type:"SPACE",word:n,index:h.index.end+1}}else{var u=s.portion.last();if(u.data("subword"))if((n=a.subword.getNextSubword(u)).length)i={type:"NORMAL",word:n};else{var m=a.words.getParentWord(u),g=u.data("portion"),S=m.data("space");if(e.each(S,function(e,t){if(t.portion!=g)return E=e,!1}),void 0!==E)i={type:"SPACE",word:m,index:E};else{var x=a.words.getNextWord(m);if(x.length){var v="LINEBREAK"===x.data("type")||"FIELD"===x.data("type")?x.data("type"):"NORMAL";i={type:v,word:x}}}}else{var y=u.data("portions");if(y&&y.start!==y.end){var E,S=u.data("space");e.each(S,function(e,t){if(t.portion!=g)return E=e,!1}),void 0!==E?i={type:"SPACE",word:u,index:E}:Shape.error("some problem")}else(x=a.words.getNextWord(u)).length&&(i={type:v="LINEBREAK"===x.data("type")||"FIELD"===x.data("type")?x.data("type"):"NORMAL",word:x})}}if(!o.word||!o.word.length){var C=a.line.prev(e(r.line));C.length&&(o.word=a.line.getWordsInLine(C).last(),o.type=o.word.data("type"))}if(!i.word||!i.word.length){var O=Shape.textBody.paras.portions.t.line.next(e(s.line));O.length&&(i.word=a.line.getWordsInLine(O).first(),i.type=i.word.data("type"))}return{prev:o,next:i}},getPortionLength:function(e){return e.t?e.t.length:e.type&&"linebreak"===e.type.toLowerCase()?1:0},field:{set:function(e,t,a){Shape.textBody.paras.portions.t.set(e,t,a)},remove:function(){}},type:{set:function(){},remove:function(){}},t:{dependency:function(t,a,o){if((o=o||Shape.box(t,a))&&0!==o.length){var i=t.textBody.paras.num,r=t.textBody.paras[i],s=r.portions.num;if(!s){var n=r.style.listStyle;if(n){e.isEmptyObject(n.bullet)&&(n.bullet={type:ShapeConstants.BulletType.NONE});var d=n.bullet,p=r.portions[s],l=p.t,h=t.textBody.paras.element,c=!(l&&l.length);if(c&&h.data("changeStatus",!0),h.data("changeStatus")){var f=p.type,u=f&&"linebreak"===f.toLowerCase(),m=Shape.textBody.paras.style.listStyle.bullet;d.status=!c||u?m.enabled:m.disabled,Shape.textBody.paras.style.listStyle.bullet.status.set(t,a,o),Shape.textBody.paras.style.listStyle.reorderListNum(t,a,o),h.data("changeStatus",c)}}}Shape.textBody.props.textStyle.props.effects.set(t,a,o),t.line_modified&&!t.editorOperate&&(a.trigger("line_modified",{box:o,data:t,container:a}),t.line_modified=!1)}},getWord:function(t,a){var o,i,r,s,n=0,d=!1,p=Shape.textBody.paras.portions.t,l=!1;if(e.each(t,function(h,c){if(c.spaceObj[0]&&("before"===c.spaceObj[0].at||1===c.spaceObj.length&&!c.portion.length&&"after"===c.spaceObj[0].at)&&(n+=c.spaceObj[0].index.end-c.spaceObj[0].index.start+1)>a)return o=c.spaceObj[0].word,r=a+c.spaceObj[0].index.start,d=!0,l=!0,i=c.line,!1;if(c.portion.length&&!d)for(var f=c.portion.first(),u=0;f.length;){var m=f.data("subword"),g=m?Shape.textBody.paras.portions.t.words.length(f):Shape.textBody.paras.portions.t.words.lengthIncludingSpace(f);if((n+=g)>a){d=!0;break}if(m&&0===f.next().not("#"+Shape.textBody.spaceId).length){for(var S=p.words.getParentWord(f),x=0;c.spaceObj[x];){var v=c.spaceObj[x];if(v.word[0]===S[0]&&(n+=v.word.data("space").length,f=S,n>a)){d=!0;break}x++}if(d)break}u++,f=e(c.portion[u])}if(h!==t.length-1||d||c.spaceObj&&c.spaceObj[c.spaceObj.length]&&"after"===c.spaceObj[c.spaceObj.length-1].at&&(n+=v.word.data("space").length)>a&&(f=c.spaceObj[0].word,d=!0),d){var y=n-a;return s=(f.data("subword")?Shape.textBody.paras.portions.t.words.length(f):Shape.textBody.paras.portions.t.words.lengthIncludingSpace(f))-y,o=f,i=c.line,r=s-Shape.textBody.paras.portions.t.words.length(f),r=r>=0?r:void 0,!1}}),o)return"SPACE"===o.data("type")&&-1==s?{lineDiv:i}:{word:o,index:s,spaceIndex:r,lineDiv:i}},addText:function(e,t,a,o,i){var r=e.textBody.paras.num,s=Shape.textBody.paras.portions.t,n=e.textBody.paras[r].portions.element,d=this.getWord(n,i-1),p={data:e,container:t,box:a};if(d){var l,h=this.getWordList(p,o,e.textBody.paras[r].portions.num);if(void 0!==d.spaceIndex){var c="SPACE";l=d.spaceIndex}else void 0!==d.index&&(c=d.word.data("type")?d.word.data("type"):"NORMAL",l=d.index);var f={word:d.word,index:l,type:c,lineDiv:d.lineDiv};f.word&&f.word.length&&s.words.getWordIndex(d.word,d.lineDiv);var u={words:h.reverse(),prevWord:f,shapeObj:p};this.placeWordsInline(u),s.words.updateRemainingWords(p)}Shape.textBody.paras.portions.element(e,t,a)},removeText:function(t,a,o,i,r,s,n){var d,p,l,h,c=Shape.textBody.paras.portions.t,f={data:t,container:a,box:o},u=this.getRemovalWords(r,s-1,n-1),m=void 0;if(u.length){var g,S,x=!1,v=t.textBody.paras.element;e.each(u,function(t,a){var o=e();if(a.prev||a.next){var i,r,s=e(),n=e(),u=e(),v="",y=[],E=a.prev,C=a.next;if(E&&C){d=E.word,p=E.line,h=C.word,l=C.line,o=p;var O=d.data(),b=h.data(),T=!1,w=!1;if(void 0!==E.spaceIndex){var D=(_=e.extend(!0,[],O.space)).splice(C.spaceIndex+1),P=_.splice(0,E.spaceIndex);if(y=e.merge(P,D),s=d,0===y.length)if(O.hasSubword||O.text&&O.text.length){c.words.updateSpaceAfter(f,y,s,o);A=c.words.getNextWordOrSubwordInPara(h,l);h=A.word,l=h.length?A.line:l,O.hasSubword&&(d=c.subword.getSubwords(d,d.data(Shape.textBody.editorData).length-1))}else c.words.remove(f,d,p),d=e(),h=e();else w=!0,h=e(),l=e()}else{(i=O.subword)&&(u=c.words.getParentWord(d),r=c.subword.getSubWordIndex(d)),T=!0;var L="",I="";if(L=(M=O.text?O.text:"").substring(0,E.index),void 0!==C.spaceIndex?(w=!0,s=h,y=(_=e.extend(!0,[],b.space)).splice(C.spaceIndex+1)):I=b.text.substring(C.index+1),v=L+I,n=d,0===v.length||w&&0===y.length){if(T=!1,0===v.length&&(w&&0===y.length||i&&0===u.data("space").length||!i&&0===O.space.length))if(i){w&&(c.words.updateSpaceAfter(f,y,s,o),w=!1);A=c.words.getNextWordOrSubwordInPara(h,l);c.subword.removePortion(f,d,O.portion,p),d=c.subword.getSubwords(u,r-1),h=A.word,l=h.length?A.line:l}else{w=!1,m=O.broken?O.broken.before:void 0;var A=c.words.getPrevWordOrSubwordInPara(d,p),N=c.words.getNextWordOrSubwordInPara(h,l);c.words.remove(f,d,p),d=A.word,h=N.word,p=d.length?A.line:p,l=h.length?N.line:l}else if(0===v.length)if(w&&(c.words.updateSpaceAfter(f,y,s,o),h=s,w=!1),i)c.subword.removePortion(f,d,O.portion,p),r?(d=c.subword.getSubwords(u,r-1),h=e()):(d=e(),h=c.subword.getSubwords(u,r));else{c.words.updateText(f,{text:v,word:n},o);A=c.words.getPrevWordOrSubwordInPara(d,p);d=A.word,p=d.length?A.line:p}else if(w&&0===y.length){i?c.subword.updateText(f,{text:v,subword:n,index:r},u,o):c.words.updateText(f,{text:v,word:n},o),c.words.updateSpaceAfter(f,y,s,o),w=!1;A=c.words.getNextWordOrSubwordInPara(h,l);h=A.word,l=h.length?A.line:l}}else h=e()}}else if(E)if(d=E.word,o=p=E.line,i=(O=d.data()).subword,w=!0,s=d,g=c.line.getLineIndex(p),i&&(u=c.words.getParentWord(d),r=c.subword.getSubWordIndex(d),s=u),void 0!==E.spaceIndex)0===(y=(_=e.extend(!0,[],O.space)).splice(0,E.spaceIndex)).length&&(c.words.updateSpaceAfter(f,y,s,o),w=!1,O.hasSubword&&(d=c.subword.getSubwords(d,O[Shape.textBody.editorData].length-1)));else if(v=(M=O.text?O.text:"").substring(0,E.index),n=d,y=[],w=!1,0===v.length)if(T=!1,i)c.subword.removePortion(f,d,O.portion,p),d=c.subword.getSubwords(u,r-1),c.words.updateSpaceAfter(f,y,s,o);else{m=O.broken?O.broken.before:void 0;A=c.words.getPrevWordOrSubwordInPara(d,p);c.words.remove(f,d,p),d=A.word,p=d.length?A.line:p,w=!1}else i?c.subword.updateText(f,{text:v,subword:n,index:r},u,o):c.words.updateText(f,{text:v,word:n},o),c.words.updateSpaceAfter(f,y,s,o);else if(C){h=C.word,o=l=C.line,T=!0,v="",i=(b=h.data()).subword,S=c.line.getLineIndex(l);var R={};if(m&&(R={broken:{before:m}}),i){u=c.words.getParentWord(h),r=c.subword.getSubWordIndex(h);var B=u.data();B=e.extend(!0,B,R)}else b=e.extend(!0,b,R);if(n=h,void 0!==C.spaceIndex){w=!0;var _=e.extend(!0,[],b.space);if(y=_.splice(C.spaceIndex+1),s=h,0===y.length){A=c.words.getNextWordOrSubwordInPara(h,l);if(c.words.remove(f,h,l,void 0,x),(h=A.word).length&&m){U=b=h.data();b.subword&&(U=(k=c.words.getParentWord(h)).data()),b=e.extend(!0,U,R)}l=h.length?A.line:l,w=!1,T=!1}}else{var M=b.text?b.text:"";if(0===(v=M.substring(C.index+1)).length)if(T=!1,i){A=c.subword.getNextSubword(h);c.subword.removePortion(f,h,b.portion,l),h=A}else if(0===b.space.length){A=c.words.getNextWordOrSubwordInPara(h,l);if(c.words.remove(f,h,l,void 0,x),(h=A.word).length&&m){var U=b=h.data();if(b.subword){var k=c.words.getParentWord(h);U=k.data()}b=e.extend(!0,U,R)}l=h.length?A.line:l}else c.words.updateText(f,{text:v,word:n},o)}}T&&(i?c.subword.updateText(f,{text:v,subword:n,index:r},u,o):c.words.updateText(f,{text:v,word:n},o)),w&&c.words.updateSpaceAfter(f,y,s,o)}else m=a.word.data().broken?a.word.data().broken.before:void 0,x=!0,g=void 0===g?c.line.getLineIndex(a.line):g,S=c.line.getLineIndex(a.line),c.words.remove(f,a.word,a.line,void 0,x)});for(var y=g;y<=S;y++){var E=c.line.getLine(v,y);if(!E.length)break;if(c.line.detectEmptyLineAndDelete(f,E).isLineRemoved)S--,y--;else{var C=Shape.textBody.paras.portions.t.line.getWordsInLine(E),O=C.not(".eop").first(),b=C.not(".eop").last(),T=O.data(),w=b.data(),D=E.data();T&&(D.portions.start=T.portions.start),w&&(D.portions.end=w.portions.end),c.words.updateCommentBG(f,E);var P=c.line.getLinePathValues(t,E);c.line.lineCanister.update(t,P.eleObj,P.dataObj)}}var L={prevWord:d,prevline:p,nextWord:h,nextline:l},I=this.getAdjcentWordObject(L,f);Shape.textBody.paras.portions.combineWords(f,I,I.samePortion),c.updateWordObject(f,l),c.breakLine(f,p),c.words.updateRemainingWords(f),Shape.textBody.paras.portions.element(t,a,o)}},getAdjcentWordObject:function(e,t){Shape.textBody.paras.portions.t;var a=e.prevWord,o=e.nextWord,i={},r={},s=this;if(a.length){var n=(a=s.checkSubwordToWord(a,t,!0)).data();if(n.subword)i={type:"NORMAL",word:a};else if(n.text&&n.text.length||!n.space||!n.space.length){p="LINEBREAK"===n.type||"FIELD"===n.type?n.type:"NORMAL";n.text=n.text?n.text:"",i={type:p,word:a}}else i={type:"SPACE",word:a,index:n.space.length-1}}if(o.length){var d=(o=s.checkSubwordToWord(o,t)).data();if(d.subword)r={type:"NORMAL",word:o};else if(d.text&&d.text.length||!d.space||!d.space.length){var p="LINEBREAK"===d.type||"FIELD"===d.type?d.type:"NORMAL";d.text=d.text?d.text:"",r={type:p,word:o}}else r={type:"SPACE",word:o,index:0}}var l=!0;return i.word&&r.word&&(l=(i.word.data("subword")?i.word.data("portion"):i.word.data("portions").end)===(r.word.data("subword")?r.word.data("portion"):r.word.data("portions").start)),{prev:i,next:r,samePortion:l}},checkSubwordToWord:function(e,t,a){var o=e,i=Shape.textBody.paras.portions;if(e&&e.length){var r=a?"prev":"next",s=e.data();if(s.subword||s.hasSubword){var n=s.subword?i.t.words.getParentWord(e):e,d=i.t.line.getParentLine(n),p=i.t.subword.getSubwords(n);p.length<2&&(o=i.convertSubwordToWord(t,p,n,d,r))}}return o},_checkLastSubword:function(e,t,a,o){var i=!1;return t&&0===e.next().not("#"+Shape.textBody.spaceId).length&&(a+=(e=Shape.textBody.paras.portions.t.words.getParentWord(e)).data("space").length)>o&&(i=!0),{count:a,wordSpan:e,broke:i}},getRemovalWords:function(t,a,o){var i,r,s,n,d=0,p=!1,l=!1,h=!1,c=Shape.textBody.paras.portions.t;a=a<0?0:a;for(var f=this,u=[],m=t.length,g=0;g<m;){var S=t[g],x=S.spaceObj[0]&&("before"===S.spaceObj[0].at||1===S.spaceObj.length&&!S.portion.length&&"after"===S.spaceObj[0].at);if(r=S.line,x){d+=S.spaceObj[0].index.end-S.spaceObj[0].index.start+1;var v={},y={};i=S.spaceObj[0].word,d>a&&!l&&(p=!0,v={prev:{word:i,index:n,spaceIndex:s=a+S.spaceObj[0].index.start,line:r}},l=!0),d>o&&l&&(y={next:{word:i,index:n,spaceIndex:s=o+S.spaceObj[0].index.start,line:r}},h=!0);var E=e.extend(!0,{},v,y);if(e.isEmptyObject(E)||u.push(E),h)break}if(S.portion.length)for(var C=S.portion.first(),O=0;C.length;){var b={},T=C.data("subword"),w=T?Shape.textBody.paras.portions.t.words.length(C):Shape.textBody.paras.portions.t.words.lengthIncludingSpace(C);if(d+=w,l?d>o?h=!0:l&&(b={word:C,line:r},u.push(b)):d>a&&(p=!0),p||(d=(D=f._checkLastSubword(C,T,d,a)).count,(p=D.broke)&&(C=D.wordSpan)),p&&!l){P=d-a;n=(C.data("subword")?Shape.textBody.paras.portions.t.words.length(C):Shape.textBody.paras.portions.t.words.lengthIncludingSpace(C))-P,r=S.line;var y={},v={prev:{word:i=C,index:n,spaceIndex:s=(s=n-Shape.textBody.paras.portions.t.words.length(C))>=0?s:void 0,line:r}};if(d>o&&(h=!0),!h&&C.data("subword")){var D=f._checkLastSubword(C,!0,d,o);h=D.broke,d=D.count,C=D.wordSpan}h&&(P=d-o,y={next:{word:i=C,index:n=(C.data("subword")?Shape.textBody.paras.portions.t.words.length(C):Shape.textBody.paras.portions.t.words.lengthIncludingSpace(C))-P,spaceIndex:s=(s=n-Shape.textBody.paras.portions.t.words.length(C))>=0?s:void 0,line:r}}),l=!0,b=e.extend(!0,{},v,y),u.push(b)}else if(h){n=w-(P=d-o),r=S.line,i=C,void 0!==(s=(s=n-Shape.textBody.paras.portions.t.words.length(C))>=0?s:void 0)&&T&&(i=c.words.getParentWord(C));y={next:{word:i,index:n,spaceIndex:s,line:r}};b=e.extend(!0,{},b,y),u.push(b)}if(h)break;O++,C=e(S.portion[O])}if(g===m-1&&!h&&S.spaceObj&&S.spaceObj[S.spaceObj.length]&&"after"===S.spaceObj[S.spaceObj.length-1].at){d+=space.word.data("space").length,r=S.line;b={};if(C=S.spaceObj[0].word,d>a&&!l){P=d-a;b={prev:{word:i=C,index:n=(C.data("subword")?Shape.textBody.paras.portions.t.words.length(C):Shape.textBody.paras.portions.t.words.lengthIncludingSpace(C))-P,spaceIndex:s=(s=n-Shape.textBody.paras.portions.t.words.length(C))>=0?s:void 0,line:r}},p=!0,l=!0}y={};if(p&&d>o){var P=d-o;y={next:{word:C,index:n=(C.data("subword")?Shape.textBody.paras.portions.t.words.length(C):Shape.textBody.paras.portions.t.words.lengthIncludingSpace(C))-P,spaceIndex:s=(s=n-Shape.textBody.paras.portions.t.words.length(C))>=0?s:void 0,line:r}},h=!0;break}b=e.extend(!0,{},b,y),e.isEmptyObject(b)||u.push(b)}if(h)break;g++}return u},set:function(t,a,o,i,r){if((o=o||Shape.box(t,a))&&0!==o.length){this.count=0;var s=t.textBody.paras,n=s.num,d=s.element,p=s[n].portions.num,l=t.textBody.paras.fromPara,h=Shape.textBody.paras.portions.t;if(!(p>s[n].portions.length-1)){var c=h.getWordObjectToRender(t,a,o,r);i||Shape.textBody.paras.portions._remove(t,a,o);var f=h.getPrevWord(t,d,p),u={data:t,container:a,box:o},m={words:c.reverse(),prevWord:f,shapeObj:u};if(t.doNotUpdateLine=!0,t.isFromPortion=!0,t.lineUpdateObject={},h.updateWordObject(u,f.lineDiv,f.word),this.placeWordsInline(m),t.doNotUpdateLine&&!l){for(var g=d.data(Shape.textBody.editorData),S=u.wordObj?u.wordObj.line.start:0,x=t.lineUpdateObject.line?h.line.getLineIndex(t.lineUpdateObject.line):g.length-1,v=d.find("."+Shape.textBody.lineId),y=S;y<=x;y++){var E=e(v[y]),C=h.line.getLinePathValues(t,E);h.line.lineCanister.update(t,C.eleObj,C.dataObj),h.words.updateCommentBG({data:t,container:a,box:o},E),0===y&&Shape.textBody.paras.style.spacing.before.checkAndSet(t,a,o)}t.lineUpdateObject.updateRemainingLines&&h.line.updateRemainingLines(u,e(v[x]))}t.doNotUpdateLine=!1,t.isFromPortion=!1,o.data("shape_rendered")&&(!l&&h.words.updateRemainingWords(u),Shape.textBody.paras.portions.element(t,a,o))}}},getPrevWord:function(t,a,o,i){var r=Shape.textBody.paras.portions.t;if(t.textBody.paras.prevWord)return t.textBody.paras.prevWord;if(!(i=Shape.textBody.paras.portions.getPortion(a,o-1)).length)return o&&Shape.error("-----",o),{lineDiv:r.line.getLine(a,0)};var s,n=i[i.length-1],d=n.portion,p=n.spaceObj;if(p.length&&p[p.length-1]&&"after"===p[p.length-1].at)s={type:"SPACE",word:(l=p[p.length-1]).word,index:l.index.end};else if(p.length&&p[p.length-1]&&!d.length){var l=p[p.length-1];s={type:"SPACE",word:l.word,index:l.index.end}}else{var h;if(d&&d.length){var c=(h=d.last()).data(),f="LINEBREAK"===c.type||"FIELD"===c.type?c.type:"NORMAL";if(c.portions&&c.portions.end>o-1){var u=c.space,m=-1;e.each(u,function(e,t){if(t.portion>o-1)return!1;m=e}),s={type:"SPACE",word:h,index:m}}else s={type:f,word:h}}}var g=n.line;return g.length||(g=r.line.getLine(a,0)),s.lineDiv=g,s},updateRemainingParas:function(e,t,a){var o=e.data,i=Shape.textBody.paras,r=o.textBody.paras.element;for(t=t||i.getNextPara(r),a=void 0!==a?a:o.textBody.paras.num+1;t.length;)i.style.setParaTranslate(o,t,a),t=i.getNextPara(t),a++;Shape.textBody.props.valign.set(o,e.container,e.box)},getWordList:function(e,t,a,o){var i=[],r={};t&&t.length?Shape.textBody.paras.portions.t.words.split(t,r,o):r.next={content:"",type:"word"};for(var s;r.next;){var n=r.next;if("word"===n.type)s={type:"NORMAL",text:n.content,portionNum:a,space:[],lang:n.lang},i.push(s);else{var d=0,p="",l="",h="",c="";if(e){var f=Shape.textBody.paras.portions.t.words.getSpaceProps(e.data,e.data.textBody.paras.num,a,n.content);d=f.spaceWidth,p=f.commentBGId,l=(l=f.underline===ShapeConstants.LineType.SINGLE?"underline":"").length?l:"none",h=f.fill,c=f.baseline}var u={afterSpaceWidth:d,portion:a,content:n.content,commentBGId:p,underline:l,fill:h,baseline:c};s?(s.space||(s.space=[]),s.space.push(u)):((s={type:"SPACE",portionNum:a,space:[]}).space.push(u),i.push(s))}r=n}return i},getWordObjectToRender:function(e,t,a,o){var i,r=e.textBody.paras,s=r.num,n=r[s].portions.num,d=r[s].portions[n],p={data:e,container:t,bx:a};return void 0!==d.type?i=[{type:d.type,portionNum:n,portion:d,text:d.t?d.t:void 0,space:[]}]:(o=void 0!==o?o:d.t?d.t:s||n||!e.placeHolder||e.placeHolder.doNotUpdate||1!==e.textBody.paras.length||1!==e.textBody.paras[0].portions.length?"":e.placeHolder.text,i=this.getWordList(p,o,n)),i},placeWordsInline:function(t,a){var o=t.shapeObj,i=t.prevWord,r=t.prevWord.lineDiv,s=t.words,n=Shape.textBody.paras.portions.t;if(s&&s.length){var d,p=s.pop();if("SPACE"===i.type&&(g=i.word.data("space"))&&i.index===g.length-1&&(i.index=void 0,i.type="NORMAL"),"NORMAL"===i.type&&i.word.length)if("word"===((de=i.word).data("subword")?"subWord":"word")){var l=de.data();if(l.space||Shape.error("prevWord",i,p,s,r),-1===i.index||l.lang!==Shape.textBody.lang.EAST_ASIAN||"NORMAL"!==p.type||l.space.length||(i.index=void 0),void 0!==i.index)if("NORMAL"===p.type||"SPACE"===p.type){E=l.length;if(i.index>E)Shape.error("prevIndex---"+i.index+"---Leng--"+E);else{var h,c,f=(C=l.text).substring(0,i.index+1),u=C.substring(i.index+1);if(-1==i.index&&"SPACE"===p.type&&(c=n.words.getPrevWord(de),h=e(c).data()?e(c).data().type:void 0),p.lang===Shape.textBody.lang.EAST_ASIAN||l.lang===Shape.textBody.lang.EAST_ASIAN&&"SPACE"!==p.type){n.removeBreakWord_AfterData(o,de,r);var m=p.space.length,g=e.extend(!0,[],l.space),S=n.words.set(p,o);if(u.length){var x=n.words.set({text:u,lang:l.lang,type:"NORMAL",portionNum:l.portions.start},o);O=e.merge(e.extend(!0,e(),S),x),n.words.insertnewWordAfter(o,de,O),n.words.updateSpaceAfter(o,g,x,r)}else{O=S;be=e.extend(!0,[],p.space);g=e.merge(g,be),n.words.insertnewWordAfter(o,de,O),n.words.updateSpaceAfter(o,g,O,r)}f.length?(n.words.updateText(o,{text:f,word:de},r),n.words.updateSpaceAfter(o,[],de,r)):n.words.remove(o,de,r),d={type:"SPACE",word:S,index:p.space.length-1}}else if("FIELD"===h)n.words.addSpaceAfterWord(o,c,p.space,r),d={type:"SPACE",word:c,index:p.space.length-1};else{var v="";if(p.text?v=p.text:p.lang=l.lang,p.space.length){p.text=f+v;O=n.words.set(p,o);if(n.words.insertnewWordBefore(o,de,O,r),l.broken&&l.broken.before&&((Pe=O.data()).broken={before:l.broken.before},delete l.broken.before),u.length)n.words.updateText(o,{text:u,word:de},r),d={type:"WORD",word:O};else{m=p.space.length;n.words.addSpaceAfterWord(o,O,e.extend(!0,[],de.data("space")),r),l.broken&&l.broken.after&&(pe=(we=n.words.getNextWordInPara(de,r,o).word).data())&&pe.broken&&delete pe.broken.before,n.words.remove(o,de),d={type:"SPACE",word:O,index:m-1}}}else{var y=f+v+u;n.words.updateText(o,{text:y,word:de},r),d={type:"WORD",word:de,index:f.length+v.length-1}}}}}else if("LINEBREAK"===p.type||"FIELD"===p.type){var E=l.length;if(i.index>E)Shape.error("prevIndex---"+i.index+"---Leng--"+E);else{var C=l.text,f=C.substring(0,i.index+1),u=C.substring(i.index+1);n.words.updateText(o,{text:f,word:de},r);var O=n.words.set(p,o),b=n.words.set({text:u,lang:l.lang,type:"NORMAL",portionNum:l.portions.start},o),T=e.merge(e.extend(!0,e(),O),b);if(l.broken&&l.broken.after){L=l.broken.after;delete l.broken.after,b.data().broken={after:L}}n.words.insertnewWordAfter(o,de,T,r),d={type:"WORD",word:O}}}else Shape.error("Wrong type",p.type);else if(l.space.length)if("NORMAL"===p.type){we=(Te=n.words.getNextWordInPara(de,r,o)).word;if(p.space.length||!we.length||p.lang===Shape.textBody.lang.EAST_ASIAN||we.length&&we.data("lang")===Shape.textBody.lang.EAST_ASIAN){O=n.words.set(p,o);n.words.insertnewWordAfter(o,de,O,r),{word:O,index:A},d={type:"WORD",word:O}}else if("LINEBREAK"===(Ae=we.data()).type||"FIELD"===Ae.type||"FIELD"===p.type){O=n.words.set(p,o);n.words.insertnewWordAfter(o,de,O),{word:O,index:A},d={type:"WORD",word:O}}else if(p.portionNum===Ae.portions.start){if(Ae.hasSubword){var w=n.subword.getSubwords(we,0),D=p.text+w.data("text");n.subword.updateText(o,{text:D,subword:w,index:0},we,Te.line),d={type:"SUBWORD",word:w,index:p.text.length-1}}else{D=p.text+Ae.text;n.words.updateText(o,{text:D,word:we},Te.line),d={type:"WORD",word:we,index:p.text.length-1}}r=Te.line}else{var P=n.subword.set(p,o),L=(pe=we.data()).broken&&!pe.hasSubword?pe.broken.after:void 0,I=n.subword.insertSubWordInWord(o,e.extend(!0,{},P),we,0);L&&I.data("broken",{after:L}),r=Te.line,d={type:"SUBWORD",word:P}}}else if("LINEBREAK"===p.type||"FIELD"===p.type)var O=n.words.set(p,o),A=n.words.insertnewWordAfter(o,de,O);else p.space||Shape.error("BUG...!!!!"),n.words.addSpaceAfterWord(o,de,p.space,r),de,d={type:"WORD",word:de};else if("NORMAL"===p.type)if(p.lang===Shape.textBody.lang.EAST_ASIAN){O=n.words.set(p,o);n.removeBreakWord_AfterData(o,de,r),n.words.insertnewWordAfter(o,de,O,r),d={type:"WORD",word:O}}else if(l.lang===Shape.textBody.lang.EAST_ASIAN)if((pe=(we=(Te=n.words.getNextWordInPara(de,r,o)).word).data())&&"NORMAL"===pe.type&&pe.lang!==Shape.textBody.lang.EAST_ASIAN&&!p.space.length)if(pe.portions.start!==p.portionNum){var N=n.subword.set(p,o),L=pe.broken&&pe.broken.after?pe.broken.after:void 0,I=n.subword.insertSubWordInWord(o,N,we,0);L&&((he=I.data()).broken={after:L}),d={type:"SUBWORD",word:N}}else if(pe.hasSubword){var w=n.subword.getSubwords(we,0),D=p.text+w.data("text");n.subword.updateText(o,{text:D,subword:w,index:0},we,Te.line),s.length&&(d={type:"SUBWORD",word:w,index:p.text.length-1})}else{D=p.text+pe.text;n.words.updateText(o,{text:D,word:we},Te.line),s.length&&(d={type:"WORD",word:we,index:p.text.length-1})}else if(pe&&"SPACE"===pe.type){var g=e.extend(!0,[],pe.space),m=p.space.length;e.merge(p.space,g);O=n.words.set(p,o);n.words.insertnewWordAfter(o,de,O),n.words.remove(o,we),d=g.length?{type:"SPACE",word:O,index:m-1}:{type:"WORD",word:O}}else{O=n.words.set(p,o);n.words.insertnewWordAfter(o,de,O,r),d={type:"WORD",word:O}}else{var N=n.subword.set(p,o),R=(A=l[Shape.textBody.editorData].length)&&l.broken&&l.broken.before?l.broken.before:void 0;A=A||1,i.word=n.subword.insertSubWordInWord(o,N,de,A),de=i.word,n.words.addSpaceAfterWord(o,de,p.space,r),l=de.data(),R&&(l.broken={before:R}),d={type:"WORD",word:de}}else if("LINEBREAK"===p.type||"FIELD"===p.type){O=n.words.set(p,o);n.removeBreakWord_AfterData(o,de,r);A=n.words.insertnewWordAfter(o,de,O,r);d={type:p.type,word:O}}else n.words.addSpaceAfterWord(o,de,p.space,r),d={type:"WORD",word:de},n.removeBreakWord_AfterData(o,de,r)}else{var B=n.words.getParentWord(de);B[0]||Shape.error("Some problem with the previous word");var _=n.subword.getSubWordIndex(de),A=i.index,M=B.find("."+Shape.textBody.subwordId);if("LINEBREAK"===p.type||"FIELD"===p.type){if(void 0===i.index)if(_===M.length-1){var U=B.data();if(U.space.length)if("FIELD"===p.type){k=e.extend(!0,[],U.space);e.merge(p.space,k);O=n.words.set(p,o);n.words.updateSpaceAfter(o,[],B,r),n.words.insertnewWordAfter(o,B,O),d={type:p.type,word:O}}else{var k=e.extend(!0,[],U.space);n.words.updateSpaceAfter(o,[],B,r);var O=n.words.set(p,o),G=n.words.set({type:"SPACE",lang:"OTHER",space:k,portionNum:k[0].portion},o),s=e.merge(e.extend(!0,{},O),G);n.words.insertnewWordAfter(o,B,s),d={type:p.type,word:O}}else{O=n.words.set(p,o);n.removeBreakWord_AfterData(o,B,r),n.words.insertnewWordAfter(o,B,O),d={type:p.type,word:O}}}else{var O=n.words.set(p,o),F=n.subword.getSubwords(B,{till:_}),W=n.subword.getSubwords(B,{from:_+1}),H=n.words.createWordFromSubwords(o,F),V=n.words.createWordFromSubwords(o,W,B.data("space"));n.splitBrokenWord(B,H,V);J=e.merge(H,O);J=e.merge(J,V);A=n.words.insertnewWordAfter(o,B,J);n.words.remove(o,B,r),H,d={type:p.type,word:O}}}else if(void 0!==i.index){var N=de,j=de.data();if(p.lang===Shape.textBody.lang.EAST_ASIAN){var z=e.extend(!0,[],B.data("space")),X=n.subword.getSubwords(B,{till:_-1}),$=n.subword.getSubwords(B,{from:_+1}),Y=j.text.substring(0,i.index+1),K=n.subword.set({text:Y,type:"NORMAL",portionNum:j.portion,fontData:{font:j.font,textCase:j.textCase}},o);if(X=e.merge(X,K),Q=j.text.substring(i.index+1)){q=n.subword.set({text:Q,type:"NORMAL",portionNum:j.portion,fontData:{font:j.font,textCase:j.textCase}},o);$=e.merge(q,$)}if($.length){var H=n.words.createWordFromSubwords(o,X,[]),V=n.words.createWordFromSubwords(o,$,z),Z=n.words.set(p,o);n.splitBrokenWord(B,H,V),d={type:"WORD",word:Z};J=e.merge(H,e.extend(!0,e(),Z));J=e.merge(J,V)}else{m=p.space.length;e.merge(p.space,z);var Z=n.words.set(p,o),H=n.words.createWordFromSubwords(o,X,[]),J=e.merge(e.extend(!0,e(),H),Z);d=z.length?{type:"SPACE",word:Z,index:m-1}:{type:"WORD",word:Z},(te=B.data()).broken&&(te.broken.before&&((ae=H.data()).broken={before:te.broken.before}),te.broken.after&&(oe=(Te=n.words.getNextWordInPara(B,r,o)).word.data())&&oe.broken&&oe.broken.before&&delete oe.broken.before)}n.words.insertnewWordAfter(o,B,J),n.words.remove(o,B,r)}else if("NORMAL"!==p.type||p.space.length){if(p.space.length){var m=p.space.length,z=e.extend(!0,[],B.data("space")),X=n.subword.getSubwords(B,{till:_-1}),$=n.subword.getSubwords(B,{from:_+1}),Y=j.text.substring(0,i.index+1);Y=p.text?Y+p.text:Y;K=n.subword.set({text:Y,type:"NORMAL",portionNum:j.portion,fontData:{font:j.font,textCase:j.textCase}},o);X=e.merge(X,K);var Q=j.text.substring(i.index+1);if(Q){var q=n.subword.set({text:Q,type:"NORMAL",portionNum:j.portion,fontData:{font:j.font,textCase:j.textCase}},o);$=e.merge(q,$)}if($.length){var H=n.words.createWordFromSubwords(o,X,p.space),V=n.words.createWordFromSubwords(o,$,z);n.splitBrokenWord(B,H,V),d={type:"WORD",word:H};J=e.merge(e.extend(!0,e(),H),V)}else{var m=p.space.length,ee=e.merge(p.space,z),J=n.words.createWordFromSubwords(o,X,ee);d=z.length?{type:"SPACE",word:J,index:m-1}:{type:"WORD",word:J};var te=B.data();if(te.broken){if(te.broken.before){var ae=J.data();ae.broken={before:te.broken.before}}if(te.broken.after){var oe=(Te=n.words.getNextWordInPara(B,r,o)).word.data();oe&&oe.broken&&oe.broken.before&&delete oe.broken.before}}}n.words.insertnewWordAfter(o,B,J),n.words.remove(o,B,r)}}else{D=(D=j.text).substring(0,i.index+1)+p.text+D.substring(i.index+1);var ie=n.subword.getSubWordIndex(N,B);n.subword.updateText(o,{text:D,subword:N,index:ie},B,r),d={type:"NORMAL",word:de,index:i.index+p.text.length}}}else if(_===M.length-1)if(p.lang===Shape.textBody.lang.EAST_ASIAN){m=p.space.length;(g=e.extend(!0,[],B.data().space))&&g.length&&(p.space=e.extend(!0,p.space,g),n.words.updateSpaceAfter(o,[],B,r));O=n.words.set(p,o);n.words.insertnewWordAfter(o,B,O,r),d=g.length?{type:"SPACE",word:O,index:m-1}:{type:"WORD",word:O}}else{var re=B.data();if(m=p.space.length)if(re.space.length){if(p.text){N=n.subword.set(p,o);B=n.subword.insertSubWordInWord(o,N,B,_+1)}n.words.addSpaceAfterWord(o,B,p.space,r,!0),d={type:"SPACE",word:B,index:m-1}}else{if(n.removeBreakWord_AfterData(o,B,r),p.text){N=n.subword.set(p,o);B=n.subword.insertSubWordInWord(o,N,B,_+1)}n.words.addSpaceAfterWord(o,B,p.space,r),d={type:"WORD",word:B}}else if(p.text){N=n.subword.set(p,o);B=n.subword.insertSubWordInWord(o,N,B,_+1),d={type:"SUBWORD",word:N}}}else if(p.lang===Shape.textBody.lang.EAST_ASIAN){var F=n.subword.getSubwords(B,{till:_}),W=n.subword.getSubwords(B,{from:_+1}),H=n.words.createWordFromSubwords(o,F,[]),O=n.words.set(p,o),V=n.words.createWordFromSubwords(o,W,B.data("space"));n.splitBrokenWord(B,H,V);J=e.merge(H,e.extend(!0,e(),O));J=e.merge(J,V),n.words.insertnewWordAfter(o,B,J),n.words.remove(o,B,r),H,d={type:"WORD",word:O}}else if(p.space.length){g=e.extend(!0,[],B.data("space"));"SPACE"!==p.type&&(N=n.subword.set(p,o));var F=n.subword.getSubwords(B,{till:_}),se=N?e.merge(F,N):F,W=n.subword.getSubwords(B,{from:_+1}),H=n.words.createWordFromSubwords(o,se,p.space),ne=e.extend(!0,{},H),V=n.words.createWordFromSubwords(o,W,g),J=e.merge(H,V);n.splitBrokenWord(B,H,V),n.words.insertnewWordAfter(o,B,J),n.words.remove(o,B,r),H,d={type:"WORD",word:ne}}else{N=n.subword.set(p,o);n.subword.insertSubWordInWord(o,N,B,_+1),d={type:"SUBWORD",word:N}}}else if("LINEBREAK"===i.type)if(!(we=(Te=n.words.getNextWordInPara(i.word,r,o)).word).length||p.lang===Shape.textBody.lang.EAST_ASIAN||we.length&&we.data("lang")===Shape.textBody.lang.EAST_ASIAN){var de=i.word,O=n.words.set(p,o),A=n.words.insertnewWordAfter(o,de,O);d={type:"WORD",word:O}}else{le=(pe=we.data()).type;if("NORMAL"===p.type){if(p.space.length&&"SPACE"!==pe.type){var de=i.word,O=n.words.set(p,o),A=n.words.insertnewWordAfter(o,de,O);d={type:"WORD",word:O}}else if("NORMAL"===le)if(pe.portions.start!==p.portionNum){var N=n.subword.set(p,o),L=pe.broken&&pe.broken.after?pe.broken.after:void 0,I=n.subword.insertSubWordInWord(o,N,we,0);L&&((he=I.data()).broken={after:L}),d={type:"SUBWORD",word:N}}else if(Shape.log("case[25, 26]: pW: LB, cW: word without space, nW: word/SW with portion start as that of current word"),pe.hasSubword){ce=(w=n.subword.getSubwords(we,{till:0})).data();n.subword.updateText(o,{text:p.text+ce.text,subword:w,index:0},we),d={type:"SUBWORD",word:w,index:p.text.length-1}}else n.words.updateText(o,{text:p.text+pe.text,word:we}),d={type:"WORD",word:we,index:p.text.length-1};else if("SPACE"===le)if(p.portionNum!==pe.portions.start){var m=p.space.length,g=e.extend(!0,[],pe.space);e.merge(p.space,g);O=n.words.set(p,o);n.words.insertnewWordAfter(o,we,O),n.words.remove(o,we),d={type:"SPACE",word:O,index:m-1}}else n.words.updateText(o,{text:p.text,word:we}),d={type:"WORD",word:we,index:p.space.length-1};else if("LINEBREAK"===le||"FIELD"===le){var de=i.word,O=n.words.set(p,o),A=n.words.insertnewWordAfter(o,de,O);d={type:"WORD",word:O}}}else if("SPACE"===p.type)if("NORMAL"===le||"LINEBREAK"===le||"FIELD"===le){var de=i.word,O=n.words.set(p,o),A=n.words.insertnewWordAfter(o,de,O);d={type:"WORD",word:O}}else"SPACE"===le&&(n.words.addSpaceAfterWord(o,we,e.extend(!0,[],p.space),Te.line,!0),d={type:"SPACE",word:we,index:p.space.length-1});else if("LINEBREAK"===p.type){var O=n.words.set(p,o),A=n.words.insertnewWordAfter(o,i.word,O);d={type:"WORD",word:O}}else if("FIELD"===p.type)if("SPACE"===le){var m=p.space.length,g=e.extend(!0,[],pe.space);e.merge(p.space,g);O=n.words.set(p,o);n.words.insertnewWordAfter(o,we,O),n.words.remove(o,we),d={type:"SPACE",word:O,index:m-1}}else{var O=n.words.set(p,o),A=n.words.insertnewWordAfter(o,i.word,O);d={type:"WORD",word:O}}}else if("FIELD"===i.type)if(!(we=(Te=n.words.getNextWordInPara(i.word,r,o)).word).length||p.lang===Shape.textBody.lang.EAST_ASIAN||we.length&&we.data("lang")===Shape.textBody.lang.EAST_ASIAN){de=i.word;if("SPACE"===p.type)n.words.addSpaceAfterWord(o,de,p.space,r),d={type:"SPACE",word:de,index:p.space.length-1};else{var O=n.words.set(p,o),A=n.words.insertnewWordAfter(o,de,O);d={type:"WORD",word:O}}}else{var pe=we.data(),le=pe.type;if("NORMAL"===p.type){if(p.space.length){var de=i.word,O=n.words.set(p,o),A=n.words.insertnewWordAfter(o,de,O);d={type:"WORD",word:O}}else if("NORMAL"===le)if(pe.portions.start!==p.portionNum){var N=n.subword.set(p,o),L=pe.broken&&pe.broken.after?pe.broken.after:void 0,I=n.subword.insertSubWordInWord(o,N,we,0);if(L){var he=I.data();he.broken={after:L}}d={type:"SUBWORD",word:N}}else if(Shape.log("case[25, 26]: pW: LB, cW: word without space, nW: word/SW with portion start as that of current word"),pe.hasSubword){var ce=(w=n.subword.getSubwords(we,{till:0})).data();n.subword.updateText(o,{text:p.text+ce.text,subword:w,index:0},we),d={type:"SUBWORD",word:w,index:p.text.length-1}}else n.words.updateText(o,{text:p.text+pe.text,word:we}),d={type:"WORD",word:we,index:p.text.length-1};else if("LINEBREAK"===le||"FIELD"===le){var de=i.word,O=n.words.set(p,o),A=n.words.insertnewWordAfter(o,de,O);d={type:"WORD",word:O}}}else if("SPACE"===p.type){de=i.word;n.words.addSpaceAfterWord(o,de,p.space,r),d={type:"SPACE",word:de,index:p.space.length-1}}else if("LINEBREAK"===p.type||"FIELD"===p.type){var O=n.words.set(p,o),A=n.words.insertnewWordAfter(o,i.word,O);d={type:"WORD",word:O}}}else if("SPACE"===i.type){var fe=i.word,A=i.index;if("NORMAL"===p.type)if((Ce=fe.data()).space.length===A+1);else{var ue=fe.data();if(-1===A)if(p.lang===Shape.textBody.lang.EAST_ASIAN||Ce.lang===Shape.textBody.lang.EAST_ASIAN||"FIELD"===ue.type){var g=e.extend(!0,[],ue.space),m=p.space.length;e.merge(p.space,g);O=n.words.set(p,o);n.words.updateSpaceAfter(o,[],fe,r),n.words.insertnewWordAfter(o,fe,O,r),d=g.length?{type:"SPACE",word:O,index:m-1}:{type:"WORD",word:O}}else{var N=n.subword.set(p,o),me=p.space.length;A=(A=ue[Shape.textBody.editorData].length)||1,fe=n.subword.insertSubWordInWord(o,N,fe,A),n.words.addSpaceAfterWord(o,fe,p.space,r,!0),d=ue.space.length?{type:"SPACE",index:me-1,word:fe}:{type:"WORD",word:fe}}else{ue.space.length<1&&Shape.error("Multiple space case but the word has only one space");var ge=Ce.space.slice(0,A+1),Se=Ce.space.slice(A+1,Ce.space.length);n.words.updateSpaceAfter(o,ge,fe,r);A=p.space.length-1;e.merge(p.space,Se);O=n.words.set(p,o);n.words.insertnewWordAfter(o,fe,O,r),d={type:"SPACE",word:O,index:A}}}else if("LINEBREAK"===p.type){var ge=(Ce=fe.data()).space.slice(0,A+1),Se=Ce.space.slice(A+1,Ce.space.length);n.words.updateSpaceAfter(o,ge,fe,r);var xe=n.words.set(p,o),ve=e.extend(!0,{},xe);if(Se.length){var ye={type:"SPACE",lang:"OTHER",space:Se,portionNum:Se[0].portion},Ee=n.words.set(ye,o),ve=e.merge(ve,Ee);n.words.insertnewWordAfter(o,fe,ve,r),n.words.updateSpaceAfter(o,Se,Ee,r)}else n.words.insertnewWordAfter(o,fe,ve,r);d={type:p.type,word:xe}}else if("FIELD"===p.type){var Ce=fe.data();if(-1===A){g=e.extend(!0,[],Ce.space);e.merge(p.space,g);O=n.words.set(p,o);n.words.updateSpaceAfter(o,[],fe,r),n.words.insertnewWordAfter(o,fe,O,r),d=g.length?{type:"SPACE",word:O,index:g.length-1}:{type:"WORD",word:O}}else{var ge=Ce.space.slice(0,A+1),Se=Ce.space.slice(A+1,Ce.space.length);n.words.updateSpaceAfter(o,ge,fe,r);var Oe=n.words.set(p,o);Se.length?(n.words.insertnewWordAfter(o,fe,Oe,r),n.words.updateSpaceAfter(o,Se,Oe,r),d={type:"SPACE",word:Oe,index:Se.length-1}):(n.words.insertnewWordAfter(o,fe,Oe,r),d={type:p.type,word:Oe})}}else{var ge=(Ce=fe.data()).space.slice(0,A+1),Se=Ce.space.slice(A+1,Ce.space.length),be=p.space,A=ge.length+be.length-1;e.merge(be,Se),e.merge(ge,be),n.words.updateSpaceAfter(o,ge,fe,r),d={type:"SPACE",word:fe,index:A}}}else{var Te=n.words.getNextWordInPara(void 0,r,o),we=Te.word,De=Te.line;if("NORMAL"===p.type)if(!we.length||p.lang===Shape.textBody.lang.EAST_ASIAN||we.length&&we.data("lang")===Shape.textBody.lang.EAST_ASIAN){O=n.words.set(p,o);n.words.prependNewWord(o,O,r),d={type:"WORD",word:O}}else if("SPACE"===(Ae=we.data()).type){var A=p.space.length-1,g=e.extend(!0,[],Ae.space);e.merge(p.space,g);O=n.words.set(p,o);n.words.prependNewWord(o,O,r),n.words.remove(o,we,De),d={type:"SPACE",word:O,index:A}}else if(p.space&&p.space.length||"LINEBREAK"===Ae.type||"FIELD"===Ae.type){O=n.words.set(p,o);n.words.prependNewWord(o,O,r),d={type:"WORD",word:O}}else{var N=n.subword.set(p,o),g=e.extend(!0,[],we.data("space")),M=n.subword.createSubWordsFromWordData(we.data(),we,o);M=e.merge(e.extend(!0,{},N),M);O=n.words.createWordFromSubwords(o,M,g);if(Ae.broken){var Pe=O.data();Pe.broken=e.extend(!0,{},Ae.broken)}n.words.prependNewWord(o,O,r),n.words.remove(o,we),d={type:"SUBWORD",word:N}}else if("LINEBREAK"===p.type||"FIELD"===p.type){var Le=n.line.getWordsInLine(r).first().not(".eop"),Ie=Le.data(),O=n.words.set(p,o);!Le.length||Ie.text&&Ie.text.length||Ie[Shape.textBody.editorData].length||Ie.space.length||"NORMAL"!==Ie.type?n.words.prependNewWord(o,O,r):(n.words.insertnewWordAfter(o,Le,O,r),n.words.remove(o,Le)),d={type:p.type,word:O}}else if(we&&we.length){var Ae=we.data();if("SPACE"===Ae.type){m=p.space.length-1;n.words.addSpaceAfterWord(o,we,p.space,De,!0),d={type:"SPACE",word:we,index:m}}else{O=n.words.set(p,o);n.words.prependNewWord(o,O,r),d={type:"WORD",word:O}}}else{O=n.words.set(p,o);n.words.prependNewWord(o,O,r),O,d={type:"WORD",word:O}}}}if(this.count1=0,this.breakLine(o,r,d),d){var Ne=o.data.textBody.paras,Re=Ne.num,Be=Ne[Re].portions.length;if(Ne[Re].portions.num<Be){d.word&&d.word.length||Shape.error("SOME PROBLEM---- CHECK THE ADDED WORD IS EMPTY",d);var _e={};"WORD"===d.type||"SUBWORD"===d.type?(_e.type="NORMAL",_e.index=d.index,d.word.data("broken")?(_e.word=d.word,_e.lineDiv=n.line.getParentLine(d.word)):_e.word=d.word):"LINEBREAK"===d.type||"FIELD"===d.type?(_e.type=d.type,_e.word=d.word):(_e.type="SPACE",_e.word=d.word,_e.index=d.index),t.prevWord=_e,_e.lineDiv||(t.prevWord.lineDiv=n.line.getParentLine(_e.word)),this.count++}t.words.length?this.placeWordsInline(t):!!o.data.doNotUpdate&&(o.data.lineUpdateObject.line=t.prevWord.lineDiv)}},printLineWords:function(t){e.each(t.children(),function(t,a){a=e(a),Shape.log("----------\x3e>>",a.text(),a.data("type"),a.data())})},updateWordObject:function(e,t,a){if(!e.data.textBody.paras.fromPara&&t.length&&t.data(Shape.textBody.editorData)){var o=Shape.textBody.paras.portions.t,i=o.line.getLineIndex(t),r=0;a&&a.length&&(a.data("subword")&&(a=o.words.getParentWord(a)),r=o.words.getWordIndex(a,t));var s=t.data(Shape.textBody.editorData),n=e.wordObj;if(r<0);if(n)n.line.start=i<n.line.start?i:n.line.start,n.line.end=i>n.line.end?i:n.line.end,n.word.end=s.length-1;else{var d={line:{start:i,end:i},word:{start:r,end:s.length-1}};e.wordObj=d}}},breakLine:function(e,t,a,o){var i=e.data.textBody.paras.element,r=e.data.textBody.props&&"NONE"===e.data.textBody.props.wrap;if(i&&i.length){var s=Shape.textBody.paras.portions.t,n=e.box.data("shape_rendered");if(r)n&&s.updateWordObject(e,t);else{var d=i.data(Shape.textBody.editorData).length;if(a=a||{},n){var p=t;do{if(t=p,(p=s.line.prev(t)).length){var l=p.data(),h=t.data(Shape.textBody.editorData),c=0,f=!1;h.length&&(c=h[0][Shape.textBody.width]-h[0][Shape.textBody.spaceWidth],f="EOP"===h[0][Shape.textBody.wordType]);var u=p.data(Shape.textBody.editorData),m=u.length;if("LINEBREAK"===(m?u[m-1][Shape.textBody.wordType]:void 0))break}}while(p.length&&(l.remainingWidth-c>-1||!m||f));s.updateWordObject(e,t)}this._breakLine(e,t,a,o),d!==i.data(Shape.textBody.editorData).length&&e.box.data("shape_rendered")&&(e.data.line_modified=!0)}}},_breakLine:function(e,t,a,o,i){if(o||(o=1),++o>200)Shape.log("looping..");else if(t&&t.length){var r=t.data(),s=r.remainingWidth,n=Shape.textBody.paras.portions.t;if(isNaN(r.remainingWidth))Shape.error();else{var d=r[Shape.textBody.editorData],p=d.length,l=p?d[p-1]:{};if(e.box.data("shape_rendered")&&l&&l[Shape.textBody.brokenData]&&l[Shape.textBody.brokenData].after){b=n.line.getWordsInLine(t).last();this.connectBrokenWords(b,t,e),s=r.remainingWidth,l=(p=(d=r[Shape.textBody.editorData]).length)?d[p-1]:{}}"EOP"===l[Shape.textBody.wordType]&&(l=p>1?d[p-2]:{});var h,c=l[Shape.textBody.spaceWidth]?l[Shape.textBody.spaceWidth]:0,f=l[Shape.textBody.wordType];if(-1!==this.isWordsPresentAfterLinebreak(d)){var u=n.line.getWordsInLine(t),m=this.getWordsAfterLinebreak(u);if(!m.length)return void Shape.log("getWordsAfterLinebreak line data issue");h={words:m}}if(s<0||h){if(s+c<0||h){var g=(h=h||this.getExtraWords(t)).words;if(g.not(".eop").length||1===g.length&&"EOP"===g.data("type")&&"LINEBREAK"===f){O=(O=n.line.next(t)).length?O:n.line.create(e.data,e.container,e.box,e.data.textBody.paras.element).line;if(g.length===p)this.breakWord(e,h,t,O,a,o);else{n.words.removeWordDataFromLine(e,g,t),n.words.prependNewWord(e,g,O);var s=t.data("remainingWidth"),S=t.data(Shape.textBody.editorData),x=S.length,v=x?S[x-1]:{};"EOP"===v[Shape.textBody.wordType]&&(v=x>1?S[x-2]:{}),(s+=v[Shape.textBody.spaceWidth]?v[Shape.textBody.spaceWidth]:0)<-1?this._breakLine(e,t,a,o):(n.updateWordObject(e,O),this._breakLine(e,O,a,o))}}else{O=n.line.next(t);n.updateWordObject(e,O),this._breakLine(e,O,a,o)}}else if((O=n.line.next(t)).length){var y=n.line.getWordsInLine(O),E=n.line.getFirstWordFromLine(O,y),C=[];"EOP"!==E.data("type")&&"LINEBREAK"!==E.data("type")||C.push({line:O,words:E}),this._breakLineShrinkCase(e,t,a,o,C,O)}}else if(e.box.data("shape_rendered")){i&&n.words.updateCommentBG(e,t);var O=n.line.next(t);if("LINEBREAK"===f)return void(O.length&&(n.updateWordObject(e,O),this._breakLine(e,O,a,o)));C=[];if(l&&l[Shape.textBody.brokenData]&&l[Shape.textBody.brokenData].after){var b=n.line.getLastWord(void 0,t);n.connectBrokenWords(b,t,e)}var T=this.getNecessaryWords(e,t,s,C,a,o);T=!(0!==C.length||!T),this._breakLineShrinkCase(e,t,a,o,C,O),T&&(O=n.line.next(t)).length&&(n.updateWordObject(e,O),this._breakLine(e,O,a,o))}}}},getNecessaryWords:function(t,a,o,i,r,s){var n=Shape.textBody.paras.portions.t,d=n.line.next(a),p=!1;if(d.length){var l=n.line.getWordsInLine(d),h=n.line.getFirstWordFromLine(d,l),c=h.data();if(c&&c.broken&&c.broken.after&&(n.connectBrokenWords(h,d,t),p=!0,n.updateWordObject(t,d),l=n.line.getWordsInLine(d),c=(h=n.line.getFirstWordFromLine(d,l)).data()),"EOP"===h.data("type")&&"LINEBREAK"===n.line.getLastWord(void 0,a).data("type"))return;var f=!1,u=h.length?n.words.width(h):0;if(o-u>-1){var m=e();e.each(l,function(t,a){a=e(a);var i=n.words.width(a),r=n.words.getTotalSpaceWidth(a);if((o-=i)<=-1&&"NORMAL"===a.data("type"))return f=!0,!1;r=n.words.getTotalSpaceWidth(a);return o-=r,m=e.merge(m,a),"LINEBREAK"===a.data("type")?(f=!0,!1):void 0}),i.push({line:d,words:m}),f||(p=this.getNecessaryWords(t,d,o,i,r,s))}else!p&&0===i.length&&d.data("remainingWidth")<-1&&(p=!0)}return p},_breakLineShrinkCase:function(t,a,o,i,r,s){var n=Shape.textBody.paras.portions.t;if(r.length){var d=e(),p=!1;e.each(r,function(a,o){o.words.length&&(n.words.removeWordDataFromLine(t,o.words,o.line),d=e.merge(d,o.words))}),d.length&&(n.words.appendNewWord(t,d,a),p=!0),(h=n.line.detectEmptyLineAndDelete(t,s)).isLineRemoved&&(s=h.nextLine),n.updateWordObject(t,s),this._breakLine(t,s,o,i,p)}for(var l=n.line.next(a);l.length;){var h=n.line.detectEmptyLineAndDelete(t,l);if(!h)break;l=n.line.next(l)}},combineTwoWords:function(t,a,o){var i=Shape.textBody.paras.portions.t,r=o.data("broken"),s=r?r.after:void 0,n=i.line.getParentLine(a),d=e.extend(!0,[],o.data("space"));if(a.data("hasSubword")){var p=a.find("."+Shape.textBody.subwordId),l=p.last();if(o.data("hasSubword")){h=o.find("."+Shape.textBody.subwordId).first();if(l.data("portion")===h.data("portion")){m=(f=l.data("text"))+(u=h.data("text"));l.data("actualText",m),i.subword.updateText(t,{text:m,subword:l,index:p.length-1},a,n);c=i.subword.getSubwords(o,{from:1});a=i.subword.insertSubWordInWord(t,c,a,p.length)}else{c=i.subword.getSubwords(o);a=i.subword.insertSubWordInWord(t,c,a,p.length)}}else if(l.data("portion")===o.data("portions").start){m=(f=l.data("text"))+(u=o.data("text"));l.data("actualText",m),i.subword.updateText(t,{text:m,subword:l,index:p.length-1},a,n)}else{g=i.subword.createSubWordsFromWordData(o.data(),o,t);a=i.subword.insertSubWordInWord(t,g,a,p.length)}}else if(o.data("hasSubword")){var h=o.find("."+Shape.textBody.subwordId).first();if(a.data("portions").start===h.data("portion")){m=(f=a.data("text"))+(u=h.data("text"));i.words.updateText(t,{text:m,word:a},n);c=i.subword.getSubwords(o,{from:1});a=i.subword.insertSubWordInWord(t,c,a,1)}else{var c=i.subword.getSubwords(o);a=i.subword.insertSubWordInWord(t,c,a,1)}}else if(a.data("portions").start===o.data("portions").start){var f=a.data("text"),u=o.data("text"),m=f+u;a.data("actualText",m),i.words.updateText(t,{text:m,word:a},n)}else{var g=i.subword.createSubWordsFromWordData(o.data(),o,t);a=i.subword.insertSubWordInWord(t,g,a,1)}if(i.words.updateSpaceAfter(t,d,a,n),i.words.remove(t,o),s){var S=a.data();S.broken=S.broken?S.broken:{},S.broken.after=s}return a},connectBrokenWords:function(t,a,o){var i=Shape.textBody.paras.portions.t,r=t.data("broken"),s=r?r.after:void 0,n=i.words.getNextWordInPara(t,a,o),d=n.word;if(d.length)for(var p=d.data();p.broken&&p.broken.before&&p.broken.before===s;){t=this.combineTwoWords(o,t,d),a=i.line.getParentLine(t);var l=t.data();if(s=l.broken?l.broken.after:void 0,n=i.words.getNextWordInPara(t,a,o),!(d=n.word).length)break;p=d.data()}var h=t.data();h.broken=e.extend(!0,h.broken,{after:!1});var c=i.words.getWordIndex(t,a),f=a.data(Shape.textBody.editorData)[c][Shape.textBody.brokenData];return f=e.extend(!0,f,{after:!1}),t},splitBrokenWord:function(e,t,a){var o=e.data();o.broken&&(o.broken.before&&(t.data().broken={before:o.broken.before}),o.broken.after&&(a.data().broken={after:o.broken.after}))},removeBreakWord_AfterData:function(e,t,a){var o=t.data();if(o.broken&&o.broken.after){var i=Shape.textBody.paras.portions.t;delete o.broken.after,this._removeBrokenDataFromLine(t,a,"after");var r=i.words.getNextWordInPara(t,a,e),s=r.word,n=s.data();n&&n.broken&&(this._removeBrokenDataFromLine(s,r.line,"before"),delete n.broken.before)}},_removeBrokenDataFromLine:function(e,t,a){var o=Shape.textBody.paras.portions.t.words.getWordIndex(e,t);delete t.data(Shape.textBody.editorData)[o][Shape.textBody.brokenData][a]},breakWord:function(t,a,o,i,r,s){var n=o.data().remainingWidth,d=Shape.textBody.paras.portions.t,p=a.words.filter(".eop"),l=e(a.words.not(".eop")[0]);a.words.splice(0,1),l=this.connectBrokenWords(l,o,t);var n=o.data("remainingWidth"),h=e.extend(!0,[],a.words);e.each(h,function(t,a){a=e(a),n+=d.words.widthIncludingSpace(a)});var c=this.getBrokenWord(t,l,n,o);c&&c.length||h.not(".eop").length?(h.length&&d.words.removeWordDataFromLine(t,h,o),a.words.filter(".eop").length||e.merge(a.words,p),c=e.merge(c,a.words),d.words.prependNewWord(t,c,i),l.filter(r.word).length&&(r.word=e(c.not(".eop")[0]),r.type="WORD",delete r.index),this.breakLine(t,i,r,s)):d.line.detectEmptyLineAndDelete(t,i)},splitWord:function(e,t,a,o){var i,r=Shape.textBody.paras.portions.t,s="",n="";for(t+=1,i=e.length;i>=0&&(o||i)&&(s=e.substring(0,i),!(r.words._beforeCanvasDim(s,a.textCase,a.font).width<t));i--);return o||(i=i||1),n=e.substring(i),{text1:s,text2:n}},getBrokenWord:function(t,a,o,i){var r=Shape.textBody.paras.portions.t,s=t.data,n=a.data();if(n[Shape.textBody.editorData].length){var d,p=e.extend(!0,[],a.data("space")),l=r.subword.getSubwords(a),h=0,c=0,f=0,u=i.data("totalWidth");e.each(l,function(t,a){if(a=e(a),c=r.subword.width(a),h+=c,d=a,f=t,h>u+1)return!1}),o=u-(h-=c);var m=d.data(),g=m.text,S=s.textBody.paras.num,x=m.portion,v=m.spellCheckId,y=m.underline,E=this.splitWord(g,o,m,!!f),C=E.text1,O=E.text2;if(C.length){r.subword.updateText(t,{text:C,subword:d,index:f},a,i);var b=e();O.length&&(b=r.subword.clone({text:O,portionNum:x},d,s)).data("actualText",g),d.data("actualText",g),b.data("actualText",g),v&&b.data("spellCheckId",v),y&&b.data("underline",y);var l=r.subword.getSubwords(a,{from:f+1}),T=e.merge(b,l),w=r.subword.getSubwords(a,{till:f})}else var w=r.subword.getSubwords(a,{till:f-1}),T=r.subword.getSubwords(a,{from:f});if(T.length){var D=r.words.createWordFromSubwords(t,T,p),P=r.words.createWordFromSubwords(t,w),L=Math.uuid(),I=e.extend(!0,{},a.data("broken"));return P.data("broken",e.extend(!0,I,{after:L})),r.words.insertnewWordBefore(t,a,P,i),r.words.remove(t,a),r.words.addSpellCheckSpan(P),r.words.addSpellCheckSpan(D),D.data("broken",{before:L}),D}return e()}f=r.words.getWordIndex(a);o+=r.words.widthIncludingSpace(a);var g=n.text?n.text:"",S=s.textBody.paras.num,A=s.textBody.paras[S].portions[n.portions.start],C=(E=this.splitWord(g,o,n)).text1,O=E.text2,L=Math.uuid(),I=e.extend(!0,{},a.data("broken"));a.data("broken",e.extend(!0,I,{after:L})),a.data("actualText",g),r.words.updateText(t,{text:C,word:a,index:f},i);p=e.extend(!0,[],n.space);if(O.length){var N=n.portions.start,R=n.portions.end;r.words.updateSpaceAfter(t,[],a,i);var B=n.type?n.type:"NORMAL",_=r.words.clone({text:O,type:B,portionStart:N,portionEnd:R,portion:A,space:p},a,s),I=e.extend(!0,{},_.data("broken"));return _.data("broken",e.extend(!0,I,{before:L})),_.data("actualText",g),n.spellCheckId&&(_.data("spellCheckId",Math.uuid()),r.words.addSpellCheckSpan(a),r.words.addSpellCheckSpan(_)),n.underline&&_.data("underline",n.underline),n.commentBGId&&(_.data("commentBGId",n.commentBGId),_.data("isComment",n.isComment)),_}return e()},isWordsPresentAfterLinebreak:function(e){for(var t=-1,a=e.length,o=0;o<a;o++)if("LINEBREAK"===e[o][Shape.textBody.wordType]&&o<a-1){t=o;break}return t},getWordsAfterLinebreak:function(t){var a=e(),o=!1;return e.each(t,function(t,i){i=e(i),o?a=e.merge(a,i):o="LINEBREAK"===i.data("type")}),a},getExtraWords:function(t){var a=Shape.textBody.paras.portions.t,o=t.data().remainingWidth,i=a.line.getWordsInLine(t),r=e(),i=i.reverse(),s=e();return e.each(i,function(t,i){if(i=e(i),0!==t||"LINEBREAK"!==i.data("type")){var n=a.words.getTotalSpaceWidth(i);if((o+=n)>-1)return!1;s.length&&(r=e.merge(r,s),s=e()),r=e.merge(r,i),o+=a.words.width(i)}else s=e.extend(!0,e(),i)}),r=r.reverse(),{words:r}},createLineBreak:function(){return e("<span id = "+Shape.textBody.LineBreakId+"></span>")},subword:{id:"subwords",index:{set:function(t,a,o,i,r,s){if(Shape.textBody.index.set(t,a,o,i),!s){var n=Shape.textBody.paras.portions.t.words,d=e.extend(!0,{},o),p=n.getWordIndex(a);r||(r=Shape.textBody.paras.portions.t.line.getParentLine(a));var l=Shape.textBody.index.get(t,a,p)[Shape.textBody.height],h=d[Shape.textBody.height],c=0;h>l&&(c=h-l),d[Shape.textBody.height]=c,delete d[Shape.textBody.elementIndexId],n.index.update(t,r,d,p)}},get:function(e,t,a){return Shape.textBody.index.get(e,t,a)},update:function(e,t,a,o,i){Shape.textBody.index.update(e,t,a,o);var r=Shape.textBody.paras.portions.t.words,s=r.getWordIndex(t);r.index.update(e,i,a,s)},remove:function(e,t,a,o){var i=Shape.textBody.paras.portions.t.words,r=Shape.textBody.index.get(e,t,a);Shape.textBody.index.remove(e,t,a);var s=i.getWordIndex(t,o);Shape.textBody.removeSubEditorData(e,o,s,a);var n=-1*r[Shape.textBody.indexId],d=-1*r[Shape.textBody.width],p=r[Shape.textBody.height],l=Shape.textBody.getMaxValue(t),h=0;p>l.height&&(h=l.height-p);var c={chIndex:n,width:d,height:h};c.commentBGId=l.commentBGId,c.textBGId=l.textBGId,c.brokenData=l.brokenData;var f=Shape.textBody.getEditorDataObject(c),u=i.getWordIndex(t);i.index.update(e,o,f,u)}},getParentWord:function(e){return e.closest("."+Shape.textBody.wordId)},getPrevSubword:function(e){return e.prev()},getNextSubword:function(e){return e.next().not("."+Shape.textBody.spaceId)},width:function(e){return e.data("wordWidth")},length:function(e){return e.data("text").length},setDim:function(e,t,a){Shape.textBody.paras.portions.t.words.setDim(e,t,a)},clone:function(t,a,o){var i=a.data(),r=a.clone(),s=r.data(),n=Shape.textBody.paras.portions.t;return s.text=t.text,s.length=t.text.length,s.style=e.extend(!0,{},i.style),s.portion=t.portionNum,s.subword=!0,this.setDim(r,o,{font:i.font,textCase:i.textCase}),n.words.setTextContents(r,s.text,"subword"),r},updateText:function(e,t,a,o){var i=e.data,r=Shape.textBody.paras.portions.t,s=t.subword,n=s.data(),d=i.textBody.paras.fromPara;o||(o=r.line.getParentLine(a));var p=this.length(s),l=this.width(s);if(t.text=t.text?t.text:"",n.text=t.text,n.length=t.text.length,n.font){var h={font:n.font,textCase:n.textCase};this.setDim(s,i,h)}else this.setDim(s,i);r.words.setTextContents(s,n.text,"subword");var c=r.subword.width(s)-l,f=a.data();f.wordWidth=f.wordWidth+c;var u=this.length(s)-p,m=t.index;a.data("length",a.data("length")+u),f.errorword&&Shape.textBody.paras.portions.t.words.addSpellCheckSpan(a);var g=o.data(),S=Shape.textBody.paras.portions.t.words.getWordIndex(a,o),x=g.editorData[S].subWordEditorData;x[m].width+=c;var v={chIndex:u,width:c,height:0,subWordEditorData:x},y=Shape.textBody.getEditorDataObject(v);if(this.index.update(i,a,y,m,o),(g=o.data()).remainingWidth-=c,e.box.data("shape_rendered")&&!d){var E=r.line.getLinePathValues(i,o);r.line.lineCanister.update(i,E.eleObj,E.dataObj);var C=r.words.getWordIndex(a,o);r.words.updateCommentBG(e,o,C)}},getSubWordIndex:function(e,t){if(!t);return e.parent().children().index(e)},getSubwordTransform:function(e,t){for(var a=0,o=void 0!==e?e:t.length-1,i=0;i<=o;i++)a+=t[i][Shape.textBody.width];return a},removePortion:function(e,t,a,o){this._remove(t,e.data,o,e)},_remove:function(e,t,a,o){var i=Shape.textBody.paras.portions.t,r=i.words.getParentWord(e);a||(a=Shape.textBody.paras.portions.t.line.getParentLine(r));var s=e.data(),n=e.data("text").length,d=s.wordHeight,p=s.wordWidth,l=this.getSubWordIndex(e,r);this.index.remove(t,r,l,a);var h=r.data(),c=a.data(),f=c[Shape.textBody.editorData];h.length-=n,s.spellCheckId&&Shape.textBody.paras.portions.t.words.removeSpellCheckSpan(e),h.wordWidth=h.wordWidth-s.wordWidth,e.remove();var u=!1,m=!1,g=i.words.getWordIndex(r);if(s.portion===h.portions.start&&(u=c.portions.start===h.portions.start&&0===g,h.portions.start+=1),s.portion===h.portions.end&&!h.space.length){var S="EOP"===f[f.length-1].wordType?f.length-2:f.length-1;S=S<0?0:S,m=c.portions.end===h.portions.end&&g===S,h.portions.end-=1}c.portions.start=u?h.portions.start:c.portions.start,c.portions.end=m?h.portions.end:c.portions.end,c.remainingWidth+=p;var x=!1;if(h.wordHeight<d&&(x=!0),o.box.data("shape_rendered")){var v=i.line.getLinePathValues(t,a);i.line.lineCanister.update(t,v.eleObj,v.dataObj),x?(0===v.dataObj.lineIndex&&Shape.textBody.paras.style.spacing.before.checkAndSet(o.data,o.container,o.box),i.line.updateRemainingLines(o,a)):i.words.updateCommentBG(o,a,g)}},set:function(e,t,a){if(!e.portion){var o=t.data.textBody.paras.num;e.portion=t.data.textBody.paras[o].portions[e.portionNum]}return this._set(e.text,{fontData:e.fontData,portion:e.portion,portionNum:e.portionNum,shapeObj:t},a)},_set:function(t,a,o){o&&o.length||(o=Shape.creator.createTSpan(a.shapeObj.box[0]),(o=e(o)).attr({class:Shape.textBody.subwordId,id:Shape.textBody.subwordId}));var i=Shape.textBody.paras.portions.t,r=t.length;o.data("length",r),o.data("subword",!0);var s=a.portionNum;o.data("portion",s),o.data("text",t);var n=a.shapeObj.data,d=n.textBody.paras.num,p=n.textBody.paras[d].portions[s];return Shape.textBody.paras.portions.t.subword.setDim(o,n,a.fontData),i.words.setTextContents(o,t,"subword"),Shape.creator.set(o[0],{y:0}),Shape.textBody.paras.portions.props.setPropsForWord(o,p,a.shapeObj,s),o},getSubwords:function(t,a){if("number"==typeof a)return e(t.find("."+Shape.textBody.subwordId)[a]);var o=t.find("."+Shape.textBody.subwordId);if(!a)return o;var i=a.from?a.from:0,r=void 0!==a.till?a.till:o.length-1;o.length<i&&Shape.error("some problem word",t,"start",i,"end",r,"last",o.length-1);var s=e();return e.each(o,function(t,a){a=e(a),t>=i&t<=r&&(s=e.merge(s,a))}),s},insertSubWordInWord:function(t,a,o,i){var r=t.data,s=Shape.textBody.paras.portions.t,n=s.line.getParentLine(o),d=o.data(),p=(n.data(),r.textBody.paras.element),l=s.line.getLineIndex(n);if(d[Shape.textBody.editorData].length){var h=s.words.getWordIndex(o);s.words.removeWordDataFromLine(t,o,n),o.find("."+Shape.textBody.subwordId).length||Shape.error("some problem");l=s.line.getLineIndex(n);p.data()[Shape.textBody.editorData][l][Shape.textBody.height];var c,f,u=this.getSubwords(o,i);if(u&&u.length){if(!i){var m=a.first();s.subword.getPrevSubword(m).length||(c=s.words.getParentWord(m)).length&&(f=c.data()).broken&&((d=o.data()).broken=e.extend(!0,d.broken,{before:f.broken.before}))}a.insertBefore(u)}else{var g=a.last();s.subword.getNextSubword(g).length||(c=s.words.getParentWord(g)).length&&(f=c.data()).broken&&((d=o.data()).broken=e.extend(!0,d.broken,{after:f.broken.after})),o.children("#"+Shape.textBody.wordContentId).append(a)}var S=this,x=!1;e.each(a,function(t,a){var s=(a=e(a)).data();s.spellCheckId&&Shape.log("ma i here===");var p={chIndex:a.data("length"),width:s.wordWidth,height:s.wordHeight};p.commentBGId=s.commentBGId,p.textBGId=s.textBGId;var l=Shape.textBody.getEditorDataObject(p);S.index.set(r,o,l,i,n,!0),d.length+=a.data("length"),x=x||s.errorword,d.portions.start=d.portions.start>s.portion?s.portion:d.portions.start,d.portions.end=d.portions.end<s.portion?s.portion:d.portions.end,i++}),d.errorword=d.errorword?d.errorword:x,s.words.setDim(o,t.data),s.words.updateLineData(t,o,n,h)}else{o.find("."+Shape.textBody.subwordId).length&&Shape.error("some problem"),d.wordHeight;var v=s.subword.createSubWordsFromWordData(d,o,t);v=i?e.merge(v,a):e.merge(a,v);var y=s.words.createWordFromSubwords(t,v,d.space);y.data().broken=e.extend(!0,{},d.broken),s.words.insertnewWordBefore(t,o,y,n),s.words.remove(t,o),o=y}return Shape.textBody.paras.portions.t.words.addSpellCheckSpan(o),o},createSubWordsFromWordData:function(t,a,o){var i=a.find("."+Shape.textBody.subwordId);if(i.length)i=a.clone(!0).find("."+Shape.textBody.subwordId);else if((t=a.data()).text){var r=Shape.textBody.paras.portions.t,s=e(Shape.creator.createTSpan(o.box[0]));Shape.creator.set(s[0],{class:Shape.textBody.subwordId,id:Shape.textBody.subwordId,y:0});var n=Shape.textBody.paras.portions.props.setShadowUrl(t,s,o.box);Shape.creator.set(s[0],t.style);var d=s.data();d.text=t.text,d.style=e.extend(!0,{},t.style),d.shadowfilter=n,d.portion=t.portions.start,d.length=d.text.length,d.subword=!0,t.subPortion&&(d.baseline=t.baseline,d.subPortion=t.subPortion),t.underline&&(d.underline=t.underline),this.setDim(s,o.data,{font:t.font,textCase:t.textCase}),r.words.setTextContents(s,t.text,"subword"),i=e.merge(i,s),d.spellCheckId=t.spellCheckId,d.commentBGId=t.commentBGId}else Shape.error("check Why..???",t,a);return i},get:function(t,a){var o;return e.each(t.find("."+this.id),function(t,i){if((i=e(i)).data("portion").num===a)return o=i,!1}),o}},words:{id:"word",wordContentId:"wordContent",KATAKANA_CHARCODE_START:12448,KATAKANA_CHARCODE_END:12543,KATAKANA_PHONETIC_EXTENSIONS_START:12784,KATAKANA_PHONETIC_EXTENSIONS_END:12799,KANA_SUPPLEMENT_START:110592,KANA_SUPPLEMENT_END:110847,KATAKANA_HALF_FULL_WIDTH_FORMS_START:65280,KATAKANA_HALF_FULL_WIDTH_FORMS_END:65519,HIRAGANA_START:12352,HIRAGANA_END:12447,CJK_UNIFIED_IDEOGRAPHS_START:19968,CJK_UNIFIED_IDEOGRAPHS_END:40908,CJK_UNIFIED_IDEOGRAPHS_EXTENSION_A_START:13312,CJK_UNIFIED_IDEOGRAPHS_EXTENSION_A_END:19893,CJK_UNIFIED_IDEOGRAPHS_EXTENSION_B_START:131072,CJK_UNIFIED_IDEOGRAPHS_EXTENSION_B_END:173782,CJK_UNIFIED_IDEOGRAPHS_EXTENSION_C_START:173824,CJK_UNIFIED_IDEOGRAPHS_EXTENSION_C_END:177972,CJK_UNIFIED_IDEOGRAPHS_EXTENSION_D_START:177984,CJK_UNIFIED_IDEOGRAPHS_EXTENSION_D_END:178205,CJK_COMPATIBILITY_IDEOGRAPHS_START:63744,CJK_COMPATIBILITY_IDEOGRAPHS_END:64255,CJK_KANGXI_RADICALS_START:12032,CJK_KANGXI_RADICALS_END:12255,CJK_SYMBOLS_PUNCTUATION_START:12288,CJK_SYMBOLS_PUNCTUATION_END:12351,CJK_COMPATIBILITY_START:13056,CJK_COMPATIBILITY_END:13311,CJK_COMPATIBILITY_FORMS_START:65072,CJK_COMPATIBILITY_FORMS_END:65103,CJK_VERTICAL_FORMS_START:65040,CJK_VERTICAL_FORMS_END:65055,CJK_ENCLOSED_LETTERS_MONTHS_START:12800,CJK_ENCLOSED_LETTERS_MONTHS_END:13055,ENCLOSED_IDEOGRAPHIC_SUPPLEMENT_START:127488,ENCLOSED_IDEOGRAPHIC_SUPPLEMENT_END:127743,BOPOMOFO_START:12544,BOPOMOFO_END:12591,BOPOMOFO_EXTENDED_START:12704,BOPOMOFO_EXTENDED_END:12735,KANBUN_START:12688,KANBUN_END:12703,MIAO_START:93952,MIAO_END:94111,YI_SYLLABLES_START:40960,YI_SYLLABLES_END:42127,YI_RADICALS_START:42128,YI_RADICALS_END:42191,CJK_RADICALS_SUPPLEMENT_START:11904,CJK_RADICALS_SUPPLEMENT_END:12031,CJK_STROKES_START:12736,CJK_STROKES_END:12783,IDEOGRAPHIC_DESCRIPTION_CHARACTERS_START:12272,IDEOGRAPHIC_DESCRIPTION_CHARACTERS_END:12287,HANGUL_JAMO_START:4352,HANGUL_JAMO_END:4607,HANGUL_JAMO_EXTENDED_A_START:43360,HANGUL_JAMO_EXTENDED_A_END:43391,HANGUL_JAMO_EXTENDED_B_START:55216,HANGUL_JAMO_EXTENDED_B_END:55295,HANGUL_COMPATIBILITY_JAMO_START:12592,HANGUL_COMPATIBILITY_JAMO_END:12687,HANGUL_HALF_FULL_WIDTH_FORMS_START:65280,HANGUL_HALF_FULL_WIDTH_FORMS_END:65519,HANGUL_SYLLABLES_START:44032,HANGUL_SYLLABLES_END:55215,eastAsianRange:function(e){var t=e.charCodeAt(0);return t>=this.KATAKANA_CHARCODE_START&&t<=this.KATAKANA_CHARCODE_END||t>=this.KATAKANA_PHONETIC_EXTENSIONS_START&&t<=this.KATAKANA_PHONETIC_EXTENSIONS_END||t>=this.KANA_SUPPLEMENT_START&&t<=this.KANA_SUPPLEMENT_END||t>=this.KATAKANA_HALF_FULL_WIDTH_FORMS_START&&t<=this.KATAKANA_HALF_FULL_WIDTH_FORMS_END||t>=this.HIRAGANA_START&&t<=this.HIRAGANA_END||t>=this.CJK_UNIFIED_IDEOGRAPHS_START&&t<=this.CJK_UNIFIED_IDEOGRAPHS_END||t>=this.CJK_UNIFIED_IDEOGRAPHS_EXTENSION_A_START&&t<=this.CJK_UNIFIED_IDEOGRAPHS_EXTENSION_A_END||t>=this.CJK_UNIFIED_IDEOGRAPHS_EXTENSION_B_START&&t<=this.CJK_UNIFIED_IDEOGRAPHS_EXTENSION_B_END||t>=this.CJK_UNIFIED_IDEOGRAPHS_EXTENSION_C_START&&t<=this.CJK_UNIFIED_IDEOGRAPHS_EXTENSION_C_END||t>=this.CJK_UNIFIED_IDEOGRAPHS_EXTENSION_D_START&&t<=this.CJK_UNIFIED_IDEOGRAPHS_EXTENSION_D_END||t>=this.CJK_COMPATIBILITY_IDEOGRAPHS_START&&t<=this.CJK_COMPATIBILITY_IDEOGRAPHS_END||t>=this.CJK_KANGXI_RADICALS_START&&t<=this.CJK_KANGXI_RADICALS_END||t>=this.CJK_SYMBOLS_PUNCTUATION_START&&t<=this.CJK_SYMBOLS_PUNCTUATION_END||t>=this.CJK_COMPATIBILITY_START&&t<=this.CJK_COMPATIBILITY_END||t>=this.CJK_COMPATIBILITY_FORMS_START&&t<=this.CJK_COMPATIBILITY_FORMS_END||t>=this.CJK_VERTICAL_FORMS_START&&t<=this.CJK_VERTICAL_FORMS_END||t>=this.CJK_ENCLOSED_LETTERS_MONTHS_START&&t<=this.CJK_ENCLOSED_LETTERS_MONTHS_END||t>=this.ENCLOSED_IDEOGRAPHIC_SUPPLEMENT_START&&t<=this.ENCLOSED_IDEOGRAPHIC_SUPPLEMENT_END||t>=this.BOPOMOFO_START&&t<=this.BOPOMOFO_END||t>=this.BOPOMOFO_EXTENDED_START&&t<=this.BOPOMOFO_EXTENDED_END||t>=this.KANBUN_START&&t<=this.KANBUN_END||t>=this.MIAO_START&&t<=this.MIAO_END||t>=this.YI_SYLLABLES_START&&t<=this.YI_SYLLABLES_END||t>=this.YI_RADICALS_START&&t<=this.YI_RADICALS_END||t>=this.CJK_RADICALS_SUPPLEMENT_START&&t<=this.CJK_RADICALS_SUPPLEMENT_END||t>=this.CJK_STROKES_START&&t<=this.CJK_STROKES_END||t>=this.IDEOGRAPHIC_DESCRIPTION_CHARACTERS_START&&t<=this.IDEOGRAPHIC_DESCRIPTION_CHARACTERS_END||t>=this.HANGUL_JAMO_START&&t<=this.HANGUL_JAMO_END||t>=this.HANGUL_JAMO_EXTENDED_A_START&&t<=this.HANGUL_JAMO_EXTENDED_A_END||t>=this.HANGUL_JAMO_EXTENDED_B_START&&t<=this.HANGUL_JAMO_EXTENDED_B_END||t>=this.HANGUL_COMPATIBILITY_JAMO_START&&t<=this.HANGUL_COMPATIBILITY_JAMO_END||t>=this.HANGUL_SYLLABLES_START&&t<=this.HANGUL_SYLLABLES_END},splitter:[" ","","","","","","","","","","","","","","","",""],splitterSpecialChars:["!","@","#","$","%","^","&","*","(",")","+","=","-","[","]","\\",";",",",".","/","{","}","|",'"',":","<",">","?"],splitterChar:function(t,a){var o=!1,i=[];return e.merge(i,this.splitter),a&&e.merge(i,this.splitterSpecialChars),e.each(i,function(e,a){if(-1!==t.indexOf(a))return o=!0,!1}),o},split:function(t,a,o){var i=t.split(""),r="",s=this,n=!1;if(e.each(i,function(e,i){if(s.splitterChar(i,o)){if(r.length){p={content:r,type:"word",lang:Shape.textBody.lang.OTHER};a.next=p,a=a.next}var d={content:i,type:"splitter"};return a.next=d,t=t.substring(e+1),r="",n=!0,!1}if(s.eastAsianRange(i)){if(r.length){var p={content:r,type:"word",lang:Shape.textBody.lang.OTHER};a.next=p,a=a.next}r=i,t=t.substring(e+1);var l={content:r,type:"word",lang:Shape.textBody.lang.EAST_ASIAN};return a.next=l,r="",n=!0,!1}r+=i}),r.length){var d={content:r,type:"word",lang:Shape.textBody.lang.OTHER};a.next=d}else a.next&&this.split(t,a.next,o)},updateLineData:function(t,a,o,i){var r=t.data,s=t.container,n=t.box;if(o.length){var d=Shape.textBody.paras.portions.t,p=r.textBody.paras.element.data(),l=o.data(),h=a.not(".eop").first().data(),c=a.not(".eop").last().data();h&&(l.portions.start=l.portions.start>h.portions.start?h.portions.start:l.portions.start),c&&(l.portions.end=l.portions.end<c.portions.end?c.portions.end:l.portions.end);var f=d.line.getLineIndex(o),u=p[Shape.textBody.editorData][f][Shape.textBody.height],m=this;e.each(a,function(t,a){a=e(a),l.remainingWidth-=m.widthIncludingSpace(a)});var g=[];e.each(a,function(t,a){var s=(a=e(a)).data(),n=m.getTotalSpaceWidth(a),p=[];if(s.space)for(var l=e.extend(!0,[],s.space),t=0;t<l.length;t++)p.push({afterSpaceWidth:l[t].afterSpaceWidth,fill:l[t].fill,underline:l[t].underline,baseline:l[t].baseline,portion:l[t].portion});var h,c,f,u=[];if(s.hasSubword){var S=Shape.textBody.sumOfArray(s[Shape.textBody.editorData]),x=S.sum+s.space.length,v=S.height,y=S.totalWidth+n,E=S.spellCheckId,C=S.commentBGId,O=S.textBGId;u=e.extend(!0,[],s[Shape.textBody.editorData]);var b=d.subword.getSubwords(a);e.each(b,function(e,t){var a=t.data("underline"),o=t.data("baseline");o&&(u[e].baseline=o),u[e].underline=a,u[e].fill=t.data("style").fill,u[e].portion=t.data("portion"),delete u[e].chIndex})}else{var x=m.lengthIncludingSpace(a),v=s.wordHeight,y=s.wordWidth+n,E=s.spellCheckId,C=s.commentBGId,O=s.textBGId;f=s.baseline,h=s.underline,c=s.style.fill}var T={chIndex:x,width:y,height:v};T.spaceWidth=n,T.wordType=s.type,T.spellCheckId=E,T.commentBGId=C,T.textBGId=O,T.elementIndexId=s.DOMIndexId,T.brokenData=s.broken,T.portions=e.extend(!0,{},s.portions),T.underline=h,f&&(T.baseline=f),T.fill=c,T.space=p,T.subWordEditorData=u,g.push(T.commentBGId);var w=Shape.textBody.getEditorDataObject(T);d.words.index.set(r,o,w,i),i++});var S=!1;if(p[Shape.textBody.editorData][f][Shape.textBody.height]>u&&(S=!0,!!r.doNotUpdateLine&&(r.lineUpdateObject.updateRemainingLines=!0)),n.data("shape_rendered")&&!r.doNotUpdateLine){var x=d.line.getLinePathValues(r,o);d.line.lineCanister.update(r,x.eleObj,x.dataObj),S?(0===x.dataObj.lineIndex&&Shape.textBody.paras.style.spacing.before.checkAndSet(r,s,n),d.line.updateRemainingLines(t,o)):d.words.updateCommentBG(t,o,i)}if(r.editable){for(var v=0;v<g.length;v++)if(g[v]){var y=e(a[v]);Shape.textBody.paras.portions.t.words.addCommentBG(t,y,o)}n.trigger("word_added",{words:a})}}else Shape.error("No line to be updated",r,a,o,i)},insertnewWordBefore:function(t,a,o,i){if(!i)var i=Shape.textBody.paras.portions.t.line.getParentLine(a);var r=this,s=this.getWordIndex(a,i),n=r.getFirstLineLeft(t,i)+this.getWordTransform(i,s-1);return e.each(o,function(t,o){r.setWordTranslate(o,{x:n,y:0}),o=e(o),n+=r.widthIncludingSpace(o),o.insertBefore(a)}),this.updateLineData(t,o,i,s),s},insertnewWordAfter:function(t,a,o,i){var r=this;i||(i=Shape.textBody.paras.portions.t.line.getParentLine(a)).length||(i=t.data.textBody.paras.element.find("."+Shape.textBody.lineId).first());var s=r.getWordIndex(a,i),n=r.getFirstLineLeft(t,i);n+=this.getWordTransform(i,s),e.each(o,function(t,o){r.setWordTranslate(o,{x:n,y:0}),(o=e(o)).insertAfter(a),a=o,n+=r.widthIncludingSpace(o)}),r.updateLineData(t,o,i,s+1)},appendNewWord:function(e,t,a){var o=Shape.textBody.paras.portions.t.line.getLastWord(void 0,a);o.length?this.insertnewWordAfter(e,o,t,a):this.prependNewWord(e,t,a)},prependNewWord:function(t,a,o){var i,r=this,s=Shape.textBody.paras.portions.t.line.getLineIndex(o),n=r.getFirstLineLeft(t,o,s);0===s&&(i=Shape.textBody.paras.style.listStyle.getBullet(o)),e.each(a,function(t,a){r.setWordTranslate(a,{x:n,y:0}),a=e(a),0!==t||i&&i.length?a.insertAfter(i):o.prepend(a),i=a,n+=r.widthIncludingSpace(a)}),r.updateLineData(t,a,o,0)},getFirstLineLeft:function(e,t,a,o){var i=Shape.textBody.paras.portions.t,r=0;if(0===(a=void 0===a?i.line.getLineIndex(t):a)){if(Shape.testing&&void 0!==o)s=e.box.find(".para").eq(o);else var s=e.data.textBody.paras.element;var n=s.data();r=(n.bulletSplitter?n.bulletSplitter:0)+(n.bulletWidth?n.bulletWidth:0)}return r},setWordTranslate:function(t,a){if(Shape.creator.set(t,{transform:"translate("+a.x+", "+a.y+")"}),Shape.testing){var o={x:a.x,y:a.y};e(t).data("translate",o)}},updateRemainingWords:function(t){var a=this,o=Shape.textBody.paras.portions.t,i=t.wordObj,r=Shape.textBody.paras.portions.props;if(i){for(var s,n,d=i.line.start,p=i.line.end,l=t.data.textBody.paras.element,h=d;h<=p;h++){var c=o.line.getLine(l,h);if(!c.length)break;var f=o.line.getWordsInLine(c);s=h===d?i.word.start:0,n=c.data(Shape.textBody.editorData).length-1;var u=a.getFirstLineLeft(t,c,h);u+=a.getWordTransform(c,s-1);for(var m=s;m<=n;m++){var g=f[m];a.setWordTranslate(g,{x:u,y:0}),u+=a.widthIncludingSpace(e(g)),Shape.textBody.paras.portions.t.words.addCommentBG(t,e(g),c)}r.drawUnderline(t.data,t.container,t.box,c)}delete t.wordObj}else;},getPrevWord:function(e){return e.prev("."+Shape.textBody.wordId)},getNextWord:function(t,a){var o=e();return"EOP"===(o=t?t.next():Shape.textBody.paras.portions.t.line.getWordsInLine(a).first()).data("type")||"underlinewrapper"===o.data("type")?e():o},getNextWordInPara:function(t,a,o){var i=!!o&&o.box;if(i&&!i.data("shape_rendered"))return{word:e(),line:a};for(var r=Shape.textBody.paras.portions.t,s=r.words.getNextWord(t,a),n=a;!s.length&&a.length;){n=r.line.next(a);s=r.line.getWordsInLine(n).first().not(".eop"),a=n}return{word:s,line:n}},getPrevWordInPara:function(e,t){for(var a=Shape.textBody.paras.portions.t,o=a.words.getPrevWord(e,t),i=t;!o.length&&t.length;){i=a.line.prev(t);o=a.line.getWordsInLine(i).last().not(".eop"),t=i}return{word:o,line:i}},getPrevWordOrSubwordInPara:function(e,t){var a=this.getPrevWordInPara(e,t),o=a.word;if(o.length){var i=o.data();i.hasSubword&&!i.space.length&&(o=Shape.textBody.paras.portions.t.subword.getSubwords(o,i[Shape.textBody.editorData].length-1))}return{word:o,line:a.line}},getNextWordOrSubwordInPara:function(e,t){var a=this.getNextWordInPara(e,t),o=a.word;return o.length&&o.data("hasSubword")&&(o=Shape.textBody.paras.portions.t.subword.getSubwords(o,0)),{word:o,line:a.line}},getParentWord:function(e){return e.closest("."+Shape.textBody.wordId)},removeSpace:function(t,a,o){var i=Shape.textBody.paras.portions.t,r=a.index,s=a.word,n=s.data();if(!e.isEmptyObject(n)){var d=n.space;o||(o=i.line.getParentLine(s));var p=this.getTotalSpaceWidth(s),l=n.portions.end,h=r.end-r.start+1;d.splice(r.start,h);var c=p-this.getTotalSpaceWidth(s);this.updateSpaceDataInWordAndLine(t,s,o,l,h,c,!0)}},updateSpaceDataInWordAndLine:function(t,a,o,i,r,s,n){var d=t.data,p=d.textBody.paras.fromPara,l=a.data(),h=Shape.textBody.paras.portions.t,c=l.space;if(o||(o=Shape.textBody.paras.portions.t.line.getParentLine(a)),c.length)l.portions.end=c[c.length-1].portion;else if(l.hasSubword){var f=a.find("."+Shape.textBody.subwordId).last();l.portions.end=f.data("portion")}else l.portions.end=l.portions.start;var u=this.getWordIndex(a,o),m=o.data();if(m.editorData[u].portions.end=l.portions.end,n&&(l.text&&l.text.length||l.hasSubword||!c.length||("SPACE"!==l.type&&Shape.error("Not a Space"),l.portions.start=l.space[0].portion),(m.portions.start>l.portions.start||!a.prev().hasClass(Shape.textBody.wordId))&&(m.portions.start=l.portions.start)),m.portions.end=m.portions.end===i?l.portions.end:m.portions.end,m.remainingWidth+=s,r){var g={chIndex:-1*r,width:-1*s,height:0};if(g.spaceWidth=-1*s,g.wordType=l.type,g.commentBGId=l.commentBGId,(c=e.extend(!0,[],l.space)).length)for(var S=0;S<c.length;S++)delete c[S].commentBGId,delete c[S].content;g.space=c;var x=Shape.textBody.getEditorDataObject(g);this.index.update(d,o,x,u)}if(t.box.data("shape_rendered")){if(!p){var v=h.line.getLinePathValues(d,o);h.line.lineCanister.update(d,v.eleObj,v.dataObj),h.words.updateCommentBG(t,o,u)}}else h.words.addCommentBG(t,a,o)},updateSpaceAfter:function(e,t,a,o){var i=a.data(),r=i.space.length,s=t.length,n=i.portions.end,d=this.getTotalSpaceWidth(a);i.space=t;var p=r-s,l=d-this.getTotalSpaceWidth(a);this.updateSpaceDataInWordAndLine(e,a,o,n,p,l)},addSpaceAfterWord:function(e,t,a,o,i){var r=t.data(),s=r.space.length,n=r.portions.end,d=this.getTotalSpaceWidth(t);this._addSpace(t,a,i);var p=s-r.space.length,l=d-this.getTotalSpaceWidth(t);this.updateSpaceDataInWordAndLine(e,t,o,n,p,l,i)},_addSpace:function(t,a,o,i){var r=t.data();r.space=i?a:o?e.merge(a,r.space):e.merge(r.space,a),r.space.length&&(r.portions.end=r.space[r.space.length-1].portion)},getWordTransform:function(e,t){for(var a=e.data(Shape.textBody.editorData),o=0,i=void 0!==t?t:a.length-1,r=0;r<=i;r++)o+=a[r][Shape.textBody.width];return o},getWordIndex:function(e,t){if(!t)var t=Shape.textBody.paras.portions.t.line.getParentLine(e);return Shape.textBody.getIndexNo(e,t)},length:function(e){var t=e.data(),a=t.type;if("LINEBREAK"===a||"EOP"===a||"FIELD"===a)return 1;var o=t.text;return o?o.length:0},lengthIncludingSpace:function(e){return this.length(e)+e.data("space").length},getSpaceDimension:function(t){var a=0;return e.each(t,function(e,t){a+=t.afterSpaceWidth}),a},getTotalSpaceWidth:function(e){var t=e.data(),a=0;return t.space&&t.space.length&&(a=this.getSpaceDimension(t.space)),a},widthIncludingSpace:function(e){var t=this.width(e)+this.getTotalSpaceWidth(e);return isNaN(t)&&Shape.error(t,e,e.data()),t},width:function(e){var t=e.data("wordWidth");return isNaN(t)&&Shape.error(t,e,e.data()),t},index:{set:function(t,a,o,i){var r=Shape.textBody.paras.portions.t.line;Shape.textBody.index.set(t,a,o,i);var s=e.extend(!0,{},o),n=r.getLineIndex(a),d=t.textBody.paras.element,p=Shape.textBody.index.get(t,d,n)[Shape.textBody.height],l=r.getModifiedLineHeight(t,o[Shape.textBody.height]),h=0;l>p&&(h=l-p),s[Shape.textBody.height]=h,delete s[Shape.textBody.wordType],delete s[Shape.textBody.spaceWidth],delete s[Shape.textBody.elementIndexId],delete s[Shape.textBody.brokenData],delete s[Shape.textBody.underline],delete s[Shape.textBody.subWordEditorData],delete s[Shape.textBody.portions],delete s[Shape.textBody.space],delete s[Shape.textBody.fill],r.index.update(t,d,s,n)},get:function(e,t,a){return Shape.textBody.index.get(e,t,a)},update:function(t,a,o,i){Shape.textBody.index.update(t,a,o,i);var r=Shape.textBody.paras.portions.t.line,s=r.getLineIndex(a),n=e.extend(!0,{},o),d=t.textBody.paras.element,p=Shape.textBody.index.get(t,d,s)[Shape.textBody.height],l=Shape.textBody.getMaxValue(a),h=r.getModifiedLineHeight(t,l.height),c=0;Math.abs(h-p)>.1&&(c=h-p),n[Shape.textBody.height]=c,delete n[Shape.textBody.wordType],delete n[Shape.textBody.spaceWidth],delete n[Shape.textBody.brokenData],delete n[Shape.textBody.space],r.index.update(t,d,n,s)},remove:function(e,t,a){var o=Shape.textBody.paras.portions.t.line,i=Shape.textBody.index.get(e,t,a),r=-1*i[Shape.textBody.indexId],s=-1*i[Shape.textBody.width],n=o.getLineIndex(t),d=e.textBody.paras.element,p=Shape.textBody.index.get(e,d,n),l=p[Shape.textBody.height],h=0;Shape.textBody.index.remove(e,t,a);var c=Shape.textBody.getMaxValue(t),f=o.getModifiedLineHeight(e,c.height);Math.abs(f-l)>.1&&(h=f-l);var u={chIndex:r,width:s,height:h};u.commentBGId=c.commentBGId,p=Shape.textBody.getEditorDataObject(u),o.index.update(e,d,p,n)}},updateText:function(e,t,a){var o=e.data,i=o.textBody.paras.fromPara,r=t.word,s=r.data(),n=Shape.textBody.paras.portions.t;a||(a=n.line.getParentLine(r));var d=this.lengthIncludingSpace(r),p=this.widthIncludingSpace(r),l=s.wordHeight,h=n.words.getTotalSpaceWidth(r);if(t.text=t.text?t.text:"",r.data("text",t.text),r.data("length",t.text.length),!s.text&&s.space.length){var c=s.space;s.portions.start=c[0].portion,s.type="SPACE"}s.font?this.setDim(r,o,{font:s.font,textCase:s.textCase}):this.setDim(r,o),n.words.setTextContents(r,t.text);var f=this.lengthIncludingSpace(r)-d,u=this.widthIncludingSpace(r)-p,m=s.wordHeight-l,g=n.words.getTotalSpaceWidth(r);if(t.index||(t.index=n.words.getWordIndex(r,a)),"FIELD"===s.type){var S=a.data(Shape.textBody.editorData)[t.index],x=S?S[Shape.textBody.indexId]:void 0;s.text===s.actualText?f=1-x:s.broken&&s.broken.after&&(f=-x)}var v={chIndex:f,width:u,height:m};v.spaceWidth=g-h,v.wordType=s.type,v.brokenData=s.broken;var y=Shape.textBody.getEditorDataObject(v);this.index.update(o,a,y,t.index),s.text.length&&(s.type||(s.type="NORMAL")),s.spellCheckId&&Shape.textBody.paras.portions.t.words.addSpellCheckSpan(r),s.commentBGId&&n.words.addCommentBG(e,r,a);var E=o.textBody.paras.num;o.textBody.paras[E].portions.num;if(a.data().remainingWidth-=u,e.box.data("shape_rendered")&&!i){var C=n.line.getLinePathValues(o,a);n.line.lineCanister.update(o,C.eleObj,C.dataObj),n.words.addCommentBG(e,r,a)}},removePortion:function(e,t,a,o){var i=t.data();if(i.portions.start===i.portions.end&&i.portions.start===a)this.remove(e,t,o);else{var r=Shape.textBody.paras.portions.t;o||(o=r.line.getParentLine(t)),r.words.updateText(e,{text:"",word:t},o),i.type="SPACE",i.wordWidth=0}},remove:function(e,t,a,o,i){var r=Shape.textBody.paras.portions.t;a||(a=Shape.textBody.paras.portions.t.line.getParentLine(t)),this.removeWordDataFromLine(e,t,a,o,i);var s=t.data();Shape.textBody.paras.portions.props.removeTextShadowFilter(s,e.box),t.remove(),i||(r.words.updateCommentBG(e,a,o),r.line.detectEmptyLineAndDelete(e,a))},removeWordDataFromLine:function(t,a,o,i,r){var s=t.data,n=Shape.textBody.paras.portions.t;o||(o=Shape.textBody.paras.portions.t.line.getParentLine(a));var d=s.textBody.paras.element,p=d.data(),l=o.data();a||Shape.error("some problem no word");var h=n.line.getLineIndex(o);i=void 0!==i?i:this.getWordIndex(a.last(),o);for(var c=p[Shape.textBody.editorData][h][Shape.textBody.height],f=a.length-1;f>=0;f--){this.index.remove(s,o,i),i--;var u=e(a[f]);l.remainingWidth+=this.widthIncludingSpace(u)}var m=a.not(".eop").first(),g=a.not(".eop").last(),S=m.data(),x=g.data();if(S||x){var v;if(S&&l.portions.start===S.portions.start){var y=(v=Shape.textBody.paras.portions.t.line.getWordsInLine(o).not(a)).not(".eop").first().data();y&&(l.portions.start=y.portions.start)}if(x&&l.portions.end===x.portions.end){var E=(v=v||Shape.textBody.paras.portions.t.line.getWordsInLine(o).not(a)).not(".eop").last().data();E&&(l.portions.end=E.portions.end)}}var C=!1;if((p=d.data())[Shape.textBody.editorData][h][Shape.textBody.height]>c&&(C=!0),t.box.data("shape_rendered")){if(!r){var O=n.line.getLinePathValues(s,o);n.line.lineCanister.update(s,O.eleObj,O.dataObj)}C&&(0===h&&Shape.textBody.paras.style.spacing.before.checkAndSet(s,t.container,t.box),n.line.updateRemainingLines(t,o))}},set:function(e,t,a,o){return this._set(e.text,{lang:e.lang,type:e.type,portionNum:e.portionNum,space:e.space,shapeObj:t},a,o)},checkTextCase:function(e,t){if(t=t||"",e===ShapeConstants.FontVariant.ALLCAPS)t=t.toUpperCase();else if(e===ShapeConstants.FontVariant.SMALLCAPS)t=t.toLowerCase();else if(e===ShapeConstants.FontVariant.CAPITALIZE){var a=t.substring(0,1).toUpperCase();t=a+=t.substring(1,t.length).toLowerCase()}return t},setTextContents:function(e,t,a){var o=e.data("textCase");t=this.checkTextCase(o,t),"subword"===a?e[0].textContent=t:e.find("#"+Shape.textBody.wordContentId)[0].textContent=t},_createDummyWord:function(t,a,o,i){var r=this,s=r.id,n=r.wordContentId;if(!a){var d=Math.uuid(5),a=Shape.creator.createGroup(o[0]),p=Shape.creator.createText(o[0]);(p=e(p)).attr({class:n,id:n}),(a=e(a)).attr({class:s,id:s}),a.data("DOMIndexId",d),a.append(p)}var l=a.data();return l.length=0,"LINEBREAK"!==t&&"FIELD"!==t||(a.addClass(t),l.length=1,"LINEBREAK"===t&&r.setTextContents(a,Shape.textBody.zeroWidthSpaceText)),a.data("portions",{start:-1,end:-1}),a.data("space",[]),a.data(Shape.textBody.editorData,[]),a.data("type",t),a},_set:function(e,t,a){a||(a=this._createDummyWord(t.type,void 0,t.shapeObj.box));var o=a.data();if(e=e||""){var i=e.length;o.text=e,o.length=i,o.lang=t.lang}o.portions.start=t.portionNum,o.portions.end=t.portionNum,"FIELD"===t.type&&(o.length=1),this.setDim(a,t.shapeObj.data),this.setTextContents(a,e),t.space&&this._addSpace(a,t.space,void 0,!0);var r=t.shapeObj.data,s=r.textBody.paras.num,n=r.textBody.paras[s].portions[t.portionNum];return n&&n.props&&(Shape.textBody.paras.portions.props.setPropsForWord(a,n,t.shapeObj,t.portionNum),Shape.textBody.paras.portions.props.setPropsForSpace(a,t.shapeObj)),o.text&&o.text.length&&"FIELD"!==t.type&&(o.type="NORMAL"),a},clone:function(t,a,o){var i=a.data(),r=a.clone(),s=r.data();return s[Shape.textBody.editorData]=[],s.DOMIndexId=Math.uuid(5),s.text=t.text,r.children(".spellcheckspan").remove(),s.space=t.space,s.lang=i.lang,s.length=t.text.length,s.type=t.type,s.style=e.extend(!0,{},i.style),s.portions={start:t.portionStart,end:t.portionEnd},this.setDim(r,o,{font:i.font,textCase:i.textCase}),this.setTextContents(r,s.text),r},createWordFromSubwords:function(t,a,o){var i=0,r=!1;if(a.length>1){var s=(h=this._createDummyWord("NORMAL",void 0,t.box)).data(),n=a.first(),d=a.last(),p=h.children("#"+Shape.textBody.wordContentId);e.each(a,function(t,a){var o=(a=e(a)).data();i+=o.text.length;var n={chIndex:o.length,width:o.wordWidth,height:o.wordHeight};n.commentBGId=o.commentBGId;var d=Shape.textBody.getEditorDataObject(n);s[Shape.textBody.editorData].push(d),o.spellCheckId&&(r=!0)}),p.prepend(a),n.data("portion")>d.data("portion")&&Shape.error("some problem first",n.data("portion"),"last",d.data("portion"),e.extend(!0,{},t.data.textBody.paras[t.data.textBody.paras.num]),t.data.textBody.paras.num),s.portions.start=n.data("portion"),s.portions.end=o&&o.length?o[o.length-1].portion:d.data("portion"),h.data("hasSubword",!0),this.setDim(h,t.data)}else if(a.length){var l=e.extend(!0,{},a.data()),h=this._createDummyWord("NORMAL",void 0,t.box),p=h.children("#"+Shape.textBody.wordContentId),c=l.portion,f=Shape.textBody.paras.portions.props.setShadowUrl(l,h,t.box);l.shadowfilter=f,Shape.creator.set(h,l.style),(s=h.data()).font=l.font,s.text=l.text,s.style=l.style,s.textCase=l.textCase,s.wordWidth=l.wordWidth,s.spellCheckId=l.spellCheckId,s.commentBGId=l.commentBGId,s.underline=l.underline,s.underlineId=l.underlineId,l.spellCheckId&&(r=!0),0===(i=l.length)&&o&&o.length&&h.data("type","SPACE"),l.subPortion&&(s.subPortion=l.subPortion,s.baseline=l.baseline),s.portions.start=c,s.portions.end=c,s[Shape.textBody.editorData]=[],this.setDim(h,t.data,{font:l.font,textCase:l.textCase}),this.setTextContents(h,s.text)}else Shape.error("cannot create a word without a subword");return s.length=i,o&&this._addSpace(h,o),s.errorword=r,r&&Shape.textBody.paras.portions.t.words.addSpellCheckSpan(h),h},generateSpellCheckPath:function(e){var t=0,a=[{type:"M",m:{x:0,y:2}}],o=[{type:"M",m:{x:0,y:2.5}}],i=0;for(t=2;t<e;t+=2){var r={type:"L",l:{x:t,y:i}},s={type:"L",l:{x:t,y:i+.5}};i=2===i?0:2,a.push(r),o.push(s)}var n={pathList:[{height:i=2,width:e,path:a}]},d={pathList:[{height:i,width:e,path:o}]};return{white:Shape.pathGenerator.getCustomPath(n,e,i).path[0],red:Shape.pathGenerator.getCustomPath(d,e,i).path[0]}},getWordPosition:function(e,t,a){if(!t)var t=Shape.textBody.paras.portions.t.line.getParentLine(word);var o=t.data(Shape.textBody.editorData),i=0,r=0;for(a=void 0===a?o.length:a,r=0;r<a;r++)i+=o[r].width;return i},updateCommentBG:function(t,a,o){var i,r=Shape.textBody.paras.portions.t,s=a.data(Shape.textBody.editorData);o=o||0;for(var n=s.length;o<n;o++)if(s[o][Shape.textBody.commentBGId]){i=i||r.line.getWordsInLine(a);var d=e(i[o]);this.addCommentBG(t,d,a)}},updateSpellLines:function(t,a,o,i){var r=Shape.textBody.paras.portions.t,s=a.data(Shape.textBody.editorData);for(i=i||r.line.getWordsInLine(a),o=o||0;o<s.length;o++){var n=e(i[o]);n.data("errorword")&&this.addSpellCheckSpan(n)}},_addSpellCheckSpan:function(t,a){for(var o=a.length,i=0;i<o;i++){var r,s,n=a[i],d=n.id,p=t.find("#"+d),l=n.width,h=n.left,c=this.generateSpellCheckPath(l);p.length?(s=p.find(".spellcheck-white-line"),r=p.find(".spellcheck-red-line")):(p=Shape.creator.createGroup(t[0]),Shape.creator.set(p,{id:d,class:"spellcheckspan"}),r=Shape.creator.createPath(t),s=Shape.creator.createPath(t),Shape.creator.set(s,{class:"spellcheck-white-line"}),Shape.creator.set(r,{class:"spellcheck-red-line"}),p.appendChild(s),p.appendChild(r),p=e(p),t.prepend(p)),e.SpellCheck&&!e.SpellCheck.showSpellCheckFeature&&p.hide(),Shape.creator.set(p[0],{transform:"translate("+h+", 1 )"}),Shape.creator.setPath(r,c.red,!0),Shape.creator.setPath(s,c.white,!0)}},addSpellCheckSpan:function(t){var a=t.data(),o=this,i=Shape.textBody.paras.portions.t,r=!1;if(a&&a.hasSubword){var s=i.subword.getSubwords(t),n=0,d=[];e.each(s,function(t,a){var o=(a=e(a)).data(),i=o.wordWidth;if(o.spellCheckId){r=!0;var s=o.spellCheckId;d.push({left:n+1,width:i+1,id:s})}n+=i}),o._addSpellCheckSpan(t,d),a.errorword=r}else if(a&&a.spellCheckId){r=!0;var p=a.spellCheckId;o._addSpellCheckSpan(t,[{left:0,width:a.wordWidth,id:p}]),a.errorword=r}},removeSpellCheckSpan:function(e){var t=e.data(),a=t.spellCheckId;a&&(e=t.subword?Shape.textBody.paras.portions.t.words.getParentWord(e):e,t.spellCheckId=!1,e.find("#"+a).remove())},addUserFieldBG:function(e,t){},addTagFieldBG:function(e){},addCommentBG:function(t,a,o){var i=a.data(),r=this,s=Shape.textBody.paras.portions.t,n=!1,d=[];if(a.children(".commentbg").remove(),i&&i.hasSubword){var p=s.subword.getSubwords(a),l=0;e.each(p,function(t,a){var o=(a=e(a)).data(),i=o.wordWidth;if(o.commentBGId){n=!0;var r=o.commentBGId;d.push({left:l,width:i,class:r})}l+=i})}else if(i&&i.commentBGId){n=!0;u=i.commentBGId;d.push({left:0,width:i.wordWidth,class:u})}if(i&&i.space&&i.space.length)for(var h=i.space,l=i.wordWidth,c=0;c<h.length;c++){var f=h[c];if(f.commentBGId){n=!0;var u=f.commentBGId;d.push({left:l,width:f.afterSpaceWidth,class:u})}l+=f.afterSpaceWidth}i.isComment=n;for(var m=0;m<d.length;m++)r._addCommentBG(t,a,d[m],o)},_addCommentBG:function(t,a,o,i){var r=t.box,s=o.width,n=o.left,d="commentbg "+o.class,p=Shape.textBody.paras.portions.t;i=i||p.line.getParentLine(a);var l=t.data.textBody.paras.element,h=e(),c=p.line.getLineIndex(i),f=l.data(Shape.textBody.editorData)[c][Shape.textBody.height],u=f*Shape.textBody.lineSpacingRatio*-1;h=e(Shape.creator.createRectangle(r,0,0,0,0,0)),Shape.creator.set(h[0],{class:d}),Shape.testing&&(h.data("width",s),h.data("left",n),h.attr("commentbgclass",d)),h.hide();var m={x:n,y:u,width:s,height:f};Shape.creator.set(h[0],m),a.prepend(h)},removeCommentBG:function(t){var a=t.data(),o=a.commentBGId;a.commentBGId=!1,a.isComment=!1;var i=a.subword?t.parent():t;if(o&&!e.isEmptyObject(i.data())){Shape.textBody.paras.portions.t;var r=i.find("."+o);Shape.testing&&t.removeAttr("commentbgclass"),r.remove()}},_beforeCanvasDim:function(e,t,a){a=a||"",t=t||"",e=this.checkTextCase(t,e);var o=this.canvasDim(a,e);return o.text=e,o.font=a,o.textCase=t,o},canvasDim:function(e,t){var a=Shape.canvasArea[0].getContext("2d");a.font=e;var o=a.measureText(t);return{width:Math.round(1e3*o.width)/1e3}},getFont:function(e,t,a){var o=e.textBody.paras[t].portions[a].props,i="";o.italic&&(i+="italic "),o.fontweight?i+=Shape.getShapeDefaultData("FontWeight."+o.fontweight)+" ":o.bold&&(i+="bold ");var r=this.getFontSize(e,t,a);return i+=r+Shape.textBody.fontUnit+" ",i+="'"+o.font.fontFamily.name+"', 'Arial'",{fontStr:i,fontSize:r}},getFontSize:function(e,t,a){var o=e.textBody.paras[t].portions[a].props,i=Shape.textBody.paras.portions.props.getSize(e,t,a);return i=o.baseline?i*Shape.textBody.paras.portions.props.subPortionRatio:i},getHeight:function(e,t){var a=t&&"pt"===t?1.333:1;return Math.round(1.2*e*a*1e3)/1e3},getDim:function(e,t,a,o){var i={width:0,text:e||""},r=0;if(e){var s=Shape.textBody.paras.portions.t.words,n="",d="",p=t.textBody.paras[a].portions[o];if(p&&p.props){var l=p.props,h=s.getFont(t,a,o);d=h.fontStr,n=l.cap,r=s.getHeight(h.fontSize,Shape.textBody.fontUnit)}i=s._beforeCanvasDim(e,n,d)}return i.height=r,i},setDim:function(t,a,o){var i=t.data(),r=Shape.textBody.paras.portions.t,s=t.data("type");if("EOP"===s||"LINEBREAK"===s){var n=(m=a.textBody.paras)[g=m.num],d="EOP"===s?n.portions.length-1:i.portions?i.portions.start:i.portion,p=0;if((S=n.portions[d])&&S.props){x=r.words.getFontSize(a,g,d);p=this.getHeight(x,Shape.textBody.fontUnit)}return t.data("wordWidth",0),void t.data("wordHeight",p)}var l={},h=t.data("hasSubword"),c=0,p=0;if(h){var f=t.find("."+Shape.textBody.subwordId);e.each(f,function(t,a){var o=(a=e(a)).data(),i=o.wordWidth;void 0===i&&Shape.error("no subword dim"),p=o.wordHeight>p?o.wordHeight:p,c+=i}),l.height=p,l.width=c}else{var u=t.data("text");if(u=u||("SPACE"===s?Shape.textBody.zeroWidthSpaceText:""),l={width:c,height:p},u){var m=a.textBody.paras,g=m.num,d=i.portions?i.portions.start:i.portion;if(o){l=r.words._beforeCanvasDim(u,o.textCase,o.font);var S=m[g].portions[d],x=i.style&&i.style["font-size"]?parseFloat(i.style["font-size"].split("pt")[0]):void 0;isNaN(x)&&S&&S.props&&(x=r.words.getFontSize(a,g,d)),p=this.getHeight(x,Shape.textBody.fontUnit),l.height=p}else{d=i.portions?i.portions.start:i.portion;l=r.words.getDim(u,a,g,d)}c=l.width}}t.data("wordWidth",l.width),t.data("wordHeight",l.height),h||(t.data("font",l.font),t.data("textCase",l.textCase))},getSpaceProps:function(e,t,a,o){var t=e.textBody.paras.num,i=e.textBody.paras[t].portions[a];if(!i)return{spaceWidth:0,commentBGId:""};var r,s=i.props.size,n=i.props.font.fontFamily.name,d=Shape.textBody.fontMetricsMap[n];d?d.space[o]||(r=Shape.textBody.getFontSpaceSize(n,o),Shape.textBody.fontMetricsMap[n].space[o]=r):d=Shape.textBody.getFontMetrics(n,o),r=1.333*Shape.textBody.fontMetricsMap[n].space[o],s=Shape.textBody.paras.portions.props.autoFitManipulation(s,e),r=Math.round(r*s*1e3)/1e3;var p=Shape.textBody.paras.portions.props._checkUnderLine(e,i);if(p.baseline)var l=s*p.baseline*-1;var h=!!(i&&i.props&&i.props.commentIds&&i.props.commentIds.length)&&i.props.commentIds.join(" "),c=i&&p&&p.underline?p.underline:"none",f=i&&p&&p.fill&&p.fill.type!==ShapeConstants.FillType.GRP&&p.fill.solid?VectorUtil.getRGBString(p.fill.solid.color):void 0;return l=i&&p&&p.baseline?l:0,{spaceWidth:r,commentBGId:h,underline:c,fill:f,baseline:l}}},line:{lineId:"line",index:{set:function(t,a,o,i){Shape.textBody.index.set(t,a,o,i);var r=e.extend(!0,{},o);delete r[Shape.textBody.elementIndexId],Shape.textBody.index.update(t,t.textBody.element,r,t.textBody.paras.num)},get:function(e,t,a){return Shape.textBody.index.get(e,t,a)},update:function(e,t,a,o){Shape.textBody.index.update(e,t,a,o),Shape.textBody.index.update(e,e.textBody.element,a,e.textBody.paras.num)},remove:function(e,t,a){var o=Shape.textBody.index.get(e,t,a);Shape.textBody.index.remove(e,t,a);var i=-1*o[Shape.textBody.indexId],r=-1*o[Shape.textBody.width],s=e.textBody.element,n=-1*o[Shape.textBody.height],d=e.textBody.paras.num,p=(Shape.textBody.paras.portions.t,Shape.textBody.getMaxValue(t)),l={chIndex:i,width:r,height:n};l.commentBGId=p.commentBGId;var h=Shape.textBody.getEditorDataObject(l);Shape.textBody.index.update(e,s,h,d)}},detectEmptyLineAndDelete:function(e,t){var a,o=Shape.textBody.paras.portions.t,i=!1;if(t.length&&!t.data(Shape.textBody.editorData).length&&!o.line.isFirstLine(t)){var r=o.line.getLineIndex(t);o.line.remove(e,t),i=!0;var s=e.data.textBody.paras.element;a=o.line.getLine(s,r-1),o.line.updateRemainingLines(e,a)}return{isLineRemoved:i,nextLine:a}},isFirstLine:function(t,a){var o=this.getLineCanisterFromLine(t);return!0===e(o).is(":first-child")},remove:function(e,t,a){a=a||e.data.textBody.paras.element,this.removeData(e,t,a),this.getLineCanisterFromLine(t).remove(),e.box.data("shape_rendered")&&(e.data.line_modified=!0)},removeData:function(t,a,o){o.data();for(var i=a.length-1;i>=0;i--){var r=e(a[i]),s=this.getLineIndex(r);this.index.remove(t.data,o,s)}},getParentLine:function(t){return t?t.closest("."+Shape.textBody.lineId):e()},getParentTextPath:function(t){return t?t.closest("."+Shape.textBody.textPathId):e()},getWordsInLine:function(e){return e.find("."+Shape.textBody.wordId)},getFirstWordFromLine:function(e,t){return t||(t=this.getWordsInLine(e)),t.first()},getLastWord:function(t,a){t||(t=this.getWordsInLine(a));var o=t.last();return"EOP"===o.data("type")&&(o=e(t[t.length-2])),o},getModifiedLineHeight:function(e,t){var a=e.textBody.element.data(Shape.textBody.editorData)[e.textBody.paras.num];return a.line&&t&&("percent"===a.line.type?t*=a.line.value:"absolute"===a.line.type&&(t=a.line.value)),t},totalWidth:{set:function(e,t,a,o,i){i=i||o.parent().parent(),o.data("totalWidth",Shape.textBody.paras.portions.t.line.getLineWidth(e,t,a,o,i))}},remainingWidth:{increase:function(e,t){var a=t;"object"==typeof t&&(a=Shape.textBody.paras.portions.t.words.width(t)),e.data().remainingWidth+=a},decrease:function(e,t){var a=t;"object"==typeof t&&(a=Shape.textBody.paras.portions.t.words.width(t)),e.data().remainingWidth-=a},set:function(e,t){e.data().remainingWidth=t},get:function(e){return e.data("remainingWidth")}},getLineIndex:function(e){return e.parent().index()},next:function(e){return e.parent().next("#"+Shape.textBody.lineCanisterId).find("."+Shape.textBody.lineId)},prev:function(e){return e.parent().prev("#"+Shape.textBody.lineCanisterId).find("."+Shape.textBody.lineId)},get:function(t,a,o,i){o=o||Shape.box(t,a);var r=t.textBody.paras.num,s=t.textBody.paras.element,n=t.textBody.paras[r].portions.num,d=s.find("."+Shape.textBody.lineId),p=void 0,l=n-1;return l>=0?e.each(d,function(t,a){var o=e(a).data("portions");if(l>=o.start&&l<=o.end)return p=e(a),!0}):d.length&&(p=e(d[0])),p||(p=this.create(t,a,o,d.length)),p},getLine:function(e,t){return this.getLineCanister(e,t).find("."+Shape.textBody.lineId)},getLineContainer:function(t){return e(t.children()[1])},getLineCanister:function(t,a){var o=t.children("#"+Shape.textBody.lineContainerId);return e(o.children("#"+Shape.textBody.lineCanisterId).get(a))},getLinePath:function(e,t){return this.getLineCanister(e,t).children("#"+Shape.textBody.linePathId)},getTextPath:function(e,t){var a=this.getLine(e,t);return this.getTextPathFromLine(a)},getLineCanisterFromLine:function(e){return e.parent()},getLinePathFromLine:function(e){return e.siblings("#"+Shape.textBody.linePathId)},getTextPathFromLine:function(t){return e(t.children("#"+Shape.textBody.textPathId))},getSpellCheckGroupFromLine:function(e){return e.siblings("#"+Shape.textBody.spellCheckGroupId)},lineCanister:{create:function(t,a,o){var i=Shape.textBody.lineCanisterId,r=Shape.creator.createGroup(o[0]);r=e(r),Shape.creator.set(r[0],{class:i,id:i});var s=Shape.textBody.paras.portions.t.line.lineCanister.createLinePath(r,o);return{lineCanister:r,line:Shape.textBody.paras.portions.t.line.lineCanister.createLine(r,o),linePath:s}},createLinePath:function(t,a){var o=e(Shape.creator.createRectangle(a,0,0,0,0,0));return Shape.creator.set(o[0],{class:Shape.textBody.linePathId,id:Shape.textBody.linePathId,stroke:"none"}),t.append(o),o},createLine:function(t,a){var o=Shape.textBody.lineId,i=Math.uuid(5),r=Shape.creator.createGroup(a[0]);return r=e(r),Shape.creator.set(r[0],{class:o,id:o}),r.data("DOMIndexId",i),t.append(r),r},update:function(e,t,a){if(a.linePath){var o=(s=e.textBody.paras.element).data(Shape.textBody.editorData)[a.lineIndex],i=t.linePath,r=a.linePath;o[Shape.textBody.linePathId]=r,Shape.creator.set(i[0],r)}if(a.textPath){var s=e.textBody.paras.element,o=s.data(Shape.textBody.editorData)[a.lineIndex],n=t.textPath,d=a.textPath;o[Shape.textBody.textPathId]=d,Shape.creator.set(n[0],{transform:"translate("+d.left+", "+d.top+" )"})}}},create:function(t,a,o){o=o||Shape.box(t,a);var i=t.textBody.paras.num,r=t.textBody.paras.element,s=r.data(Shape.textBody.editorData).length,n=Shape.textBody.paras.portions.t,d=e(r.children("#"+Shape.textBody.lineContainerId)),p=t.textBody.paras.fromPara;if(0!==s&&t.textBody.paras.length-1!==i){var l=n.line.getLine(r,s-1);if(!p){var h=n.line.getLinePathValues(t,l,!0,!0);n.line.lineCanister.update(t,h.eleObj,h.dataObj)}}var c=Shape.textBody.paras.portions.t.line.lineCanister.create(t,a,o),f=c.lineCanister,u=c.line,m={chIndex:0,width:0,height:0};m.elementIndexId=u.data("DOMIndexId");var g=Shape.textBody.getEditorDataObject(m);return this.index.set(t,r,g,s),d.append(f),u.data("portions",{start:1e4,end:-1}),u.data(Shape.textBody.editorData,[]),Shape.textBody.paras.portions.t.line.setLineWidth(t,a,o,u,r,s),c},setLineWidth:function(e,t,a,o,i,r){var s=this.getLineWidth(e,t,a,o,i,r),n=o.data();if(void 0!==s){if(void 0===n.remainingWidth)n.remainingWidth=s;else{var d=s-n.totalWidth;n.remainingWidth+=d}n.totalWidth=s,n.totalHeight=0}return s},getLineWidth:function(e,t,a,o,i,r){e.textBody.paras.num;var s=Shape.textBody.paras.portions.t,n=i.data(),d={indent:n.indent,margin:{left:n.margin}},p=0;if(a.data(Shape.textbox)){var l=e.textBody.element.find("."+Shape.textBody.columnId).data("width"),h=d.margin&&d.margin.left?d.margin.left:0;p=l-h}if(0===(r=void 0===r?s.line.getLineIndex(o):r)){var c=n.bulletWidth,f={lineWidth:p,paraStyle:d,bulletWidth:c=c||0,paraMargin:h};p=this.getFirstLineWidth(f)}return p},getFirstLineWidth:function(e){var t=e.lineWidth,a=e.paraStyle,o=e.bulletWidth,i=e.paraMargin,r=a.indent?a.indent:0;if(r<0){var s=-1*r,n=Shape.textBody.paras.style.listStyle.getBulletSplitterLeft(a,o),d=n.split,p=n.pos;o>0?s<i?p<0&&d<0&&(t+=o<i?-1*(o+p):d):t-=p<0&&d>=0?s-i:o-i:t+=s<i?s:i}else r>=0&&(t=o<r?t-r:t-o);return t},getLinePathLeft:function(e,t,a,o,i){var r=0,s=o[Shape.textBody.editorData],n=s.length,d=n?s[n-1]:{};"EOP"===d[Shape.textBody.wordType]&&(d=n>1?s[n-2]:{});var p=d[Shape.textBody.spaceWidth]?d[Shape.textBody.spaceWidth]:0;return e&&e.halign&&("CENTER"===e.halign?r=(t-a+p-i)/2:"RIGHT"===e.halign&&(r=t-a+p-i)),r},getLinePathValues:function(e,t,a,o){var i=Shape.textBody.paras.portions.t,r=Shape.textBody.paras.portions.t.line.getLineIndex(t),s=e.textBody.paras.num,n=e.textBody.paras.element.data(),d=n[Shape.textBody.editorData],p=e.textBody.element.data(Shape.textBody.editorData),l=t.data(),h=l.totalWidth,c=l.remainingWidth<0?-1*l.remainingWidth:0,f=0,u=0,m=0;0===r&&(f=0!==s&&p[s].before?p[s].before:0,m=n.bulletLeft,h=h+n.bulletSplitter+n.bulletWidth),o||r!==d.length-1||s===e.textBody.paras.length-1||(u=p[s].after?p[s].after:0);for(var g=h-(l.remainingWidth<0?0:l.remainingWidth),S=e.textBody.paras[s].style,x=this.getLinePathLeft(S,h,g,l,c),v=0,y=0;y<r;y++)v+=d[y][Shape.textBody.height];var E=d[y][Shape.textBody.height],C=Shape.textBody.sumOfArray(n[Shape.textBody.editorData],r-1).totalHeight-f;g+=c;var O=g=Math.round(1e3*g)/1e3,b=v+E-C+u;b=Math.round(1e3*b)/1e3,C=Math.round(1e3*C)/1e3;var T=v+E*Shape.textBody.lineSpacingRatio;T=Math.round(1e3*T)/1e3;var w=O,D=Math.round(1e3*(m+x))/1e3,P=D,L={},I={linePath:i.line.getLinePathFromLine(t)};if(L={linePath:{x:D,y:C,width:O,height:b}},L.lineIndex=r,a)return{eleObj:I,dataObj:L};L.textPath={width:w,left:P,top:T};var A=t;return I.textPath=A,I.spellCheck=i.line.getSpellCheckGroupFromLine(t),{eleObj:I,dataObj:L}},updateRemainingLines:function(e,t){var a=e.data,o=Shape.textBody.paras.portions.t;o.words.updateCommentBG(e,t);for(var i=o.line.next(t);i.length;){var r=o.line.getLinePathValues(a,i);o.line.lineCanister.update(a,r.eleObj,r.dataObj),o.words.updateCommentBG(e,t),i=o.line.next(i)}Shape.textBody.paras.style.spacing.after.checkAndSet(a,e.container,e.box),o.updateRemainingParas(e)}}},props:{subPortionRatio:.63,resetPropsForPortionForAnim:function(t,a,o,i,r){if(o&&o.length&&!(o&&o.length&&e.isEmptyObject(o.data()))||(o=Shape.box(t,a)).length){var s=e.extend(!0,{},t);s.textBody.paras.num=i;var n=Shape.textBody.paras.getPara(o,i,s);s.textBody.paras.element=n,s.textBody.paras[i].portions.num=r,Shape.textBody.paras.portions.element(s,a,o),Shape.textBody.paras.portions.props.set(s,a,o)}},resetPropsForPortion:function(t,a,o,i,r){if(o&&o.length&&!(o&&o.length&&e.isEmptyObject(o.data()))||(o=Shape.box(t,a)).length){var s=e.extend(!0,{},t);Shape.textBody.set(s,a,o),o.trigger("props_reset",{paraNum:i,portionNum:r})}},stroke:{get:function(t,a,o){var i=e.extend(!0,{},t.props.stroke);if(i.jointype||(i.jointype=ShapeConstants.JoinType.ROUND),i.width=i.width?i.width:0,e.each(i,function(r,s){if("object"!=typeof s&&Shape.strokeElement[r]){var n=Shape.strokeElement[r].call(Shape.strokeElement,s,a,a,i.width,t);e.extend(!0,o,n)}}),i.fill&&i.fill.solid){var r=i.fill.solid.color;r&&r.rgb&&(o.stroke=VectorUtil.getRGBString(r)),o["stroke-opacity"]=1;var s=r.tweaks;s&&s.alpha&&(o["stroke-opacity"]=1-s.alpha)}}},_checkUnderLine:function(t,a){var o;if(a&&a.props){var i=e.extend(!0,{},a);if(a.props.click&&"NONE"!==a.props.click.type){var r=a.props.click.props?a.props.click.props:t.textBody.linkProps;e.extend(!0,i.props,r)}else if(a.type===ShapeConstants.PortionType.FIELD&&a.field.type===ShapeConstants.FieldType.DATAFIELD){var s=a.field.props?a.field.props:{};e.extend(!0,i.props,s)}o=i.props}return o},_checkEOPLineBreak:function(e,t){var a=t.data();return!(e.t||"EOP"!=a.type&&"LINEBREAK"!=a.type)},removeTextShadowFilter:function(t,a){var o=t?t.shadowfilter:void 0;o&&e(a).find("defs").find("#filter_"+o).remove()},setShadowUrl:function(t,a,o){var i,r=t?t.shadowfilter:void 0;if(r&&"EOP"!=t.type&&"LINEBREAK"!=t.type){var s=e(o).find("defs"),n=s.find("#filter_"+r);if(n&&0!=n.length){var d=n.clone(!0,!0);i=Math.uuid(),Shape.creator.set(d[0],{id:"filter_"+i}),n.remove(),s.append(d);var p="url(#filter_"+i+")";Shape.creator.set(a[0],{filter:p})}}return i},setPropsForWord:function(t,a,o,i,r){var s=o.data,n=o.container,d=o.box,p=t;if(a&&a.props){var l=this._checkEOPLineBreak(a,t),h={};!l&&a.props.stroke&&a.props.stroke.fill&&"NONE"!=a.props.stroke.fill.type&&this.stroke.get(a,t,h);var c=this._checkUnderLine(s,a);if(!l&&a.props.effects&&a.props.effects.shadow);h["font-style"]=c.italic?"italic":"",c.fontweight?h["font-weight"]=Shape.getShapeDefaultData("FontWeight."+c.fontweight):h["font-weight"]=c.bold?"bold":"";var f=c.font,u=f.fontFamily.name;if(u="'"+u+"'",u+=", 'Arial'",f.symbol&&(u=u+", '"+f.symbol.name+"'"),c.font.loader){g=o.data.textBody.paras.num;c.font.loader({fontName:f.fontFamily.name,portionSpan:p,shapeObj:o,paraNum:g,portionNum:i})}h["font-family"]=u,c&&c.fill.grp&&c.fill.type===ShapeConstants.FillType.GRP?t.removeAttr("fill"):(h.fill=VectorUtil.getRGBString(c.fill.solid.color),delete a.props.fill.grp),p.data("style",h),Shape.creator.set(p[0],h);var m=0;"FIELD"===a.type&&("USER"===a.field.type?p.addClass("userbg"):a.field.type===ShapeConstants.FieldType.DATAFIELD?p.addClass("userdatafield"):a.field.type===ShapeConstants.FieldType.EMOJI&&p.addClass("emojifield")),"LINEBREAK"===p.data("type")&&"FIELD"===p.data("type")||(void 0!==c.baseline?(m=c.baseline,this.baseline(s,n,d,p,c)):r&&this.removeBaseLine(s,n,d,p,c));var g=o.data.textBody.paras.num;if(this.size(p,c.size,s,m),this.setTextDecoration(s,n,d,p,c),s.editable&&e.SpellCheck&&e.SpellCheck.processSpellCheck&&(!(!c.chk||!c.chk.state||"ERROR"!==c.chk.state)?this.setSpellCheckSpan(p,!0):d.data("shape_rendered")&&Shape.textBody.paras.portions.t.words.removeSpellCheckSpan(p)),s.editable){var S=!(!c.commentIds||!c.commentIds.length)&&c.commentIds;S?this.setCommentBG(p,S.join(" ")):d.data("shape_rendered")&&Shape.textBody.paras.portions.t.words.removeCommentBG(p)}}},setPropsForWord_HTML:function(e,t,a,o,i){var r=a.data,s=a.container,n=a.box,d=e;if(t&&t.props){var p=this._checkUnderLine(r,t),l={};p.italic?l["font-style"]="italic":l["font-style"]="",p.cap?l["text-transform"]=Shape.getShapeDefaultData("FontVariants."+p.cap):i&&(l["text-transform"]=""),p.fontweight?l["font-weight"]=Shape.getShapeDefaultData("FontWeight."+p.fontweight):p.bold?l["font-weight"]="bold":l["font-weight"]="";var h=p.font,c=h.fontFamily.name;if("TeX Gyre Heros"===c&&(c+=", Arial"),p.font.loader){var f=a.data.textBody.paras.num;p.font.loader({fontName:h.fontFamily.name,portionSpan:d,shapeObj:a,paraNum:f,portionNum:o})&&(l["font-family"]=c)}else l["font-family"]=c;l.color=VectorUtil.getRGBString(p.fill.solid.color),d.data("style",l),d.css(l),d.css("font-size",p.size+Shape.textBody.fontUnit),"LINEBREAK"===d.data("type")&&"FIELD"===d.data("type")||(p&&void 0!==p.baseline?this.baseline(r,s,n,d,p):i&&this.removeBaseLine(r,s,n,d,p)),this.setTextDecoration(r,s,n,d,p)}},setPropsForSpace:function(t,a){var o=t.data(),i=o.space;if(i&&i.length){var r;e.each(i,function(e,t){var o=t.portion,i=t.content,s=Shape.textBody.paras.portions.t.words.getSpaceProps(a.data,a.data.textBody.paras.num,o,i),n=s.underline===ShapeConstants.LineType.SINGLE?"underline":"";t.underline=n.length?n:"none",t.afterSpaceWidth=s.spaceWidth,t.commentBGId=!!s.commentBGId&&s.commentBGId,t.baseline=s.baseline,r=r||t.commentBGId,t.fill=s.fill}),r&&(o.commentBGId=o.commentBGId?o.commentBGId:r)}},set:function(t,a,o){var i=Shape.textBody.paras.portions;o=o||Shape.box(t,a);var r=t.textBody.paras.num,s=t.textBody.paras[r].portions.num,n=t.textBody.paras[r].portions[s],d=t.textBody.paras[r].portions.element,p={data:t,container:a,box:o},l=[],h=i.props;e.each(d,function(r,d){var c=d.portion,f=d.line,u=f.data(),m=e(),g=Shape.textBody.getMaxValue(f),S=g.height;e.each(c,function(a,o){var r=(o=e(o)).data();if(r.subword)var d=r.wordWidth,l=i.t.words.getParentWord(o),c=l.data("wordHeight");else{l=o,e.merge(m,o);d=i.t.words.widthIncludingSpace(o)}var g=r.wordHeight,S=r.textCase;h.setPropsForWord(o,n,p,s,!0),i.t.words.setDim(o,p.data);var x,v,y,E,C=S!==(r=o.data()).textCase,O=[],b=r.wordHeight;if(r.subword){!!C&&i.t.words.setTextContents(o,r.text,"subword");var T=i.t.subword.getSubWordIndex(o,l),w=r.wordWidth;l.data("wordWidth",l.data("wordWidth")+(w-d)),x=w-d,v=b-g;var D=i.t.words.getWordIndex(l,f);(O=u.editorData[D].subWordEditorData)[T].underline=r.underline,O[T].fill=r.style.fill,O[T].width=r.wordWidth;var P={chIndex:0,width:x,height:v},L=Shape.textBody.getEditorDataObject(P);Shape.textBody.index.update(t,l,L,T);var I=Shape.textBody.getMaxValue(l);l.data("wordHeight",I.height),v=I.height-c}else{!!C&&i.t.words.setTextContents(o,r.text);w=i.t.words.widthIncludingSpace(o);v=b-g,y=r.underline,E=r.style.fill}x=w-d,u.remainingWidth-=x;var A=i.t.words.getWordIndex(l,f),P={chIndex:0,width:x,height:v,underline:y,subWordEditorData:O,fill:E},L=Shape.textBody.getEditorDataObject(P);i.t.words.index.update(t,f,L,A)});var x=d.spaceObj;if(e.each(x,function(t,a){e.merge(m,a.word)}),e.unique(m),e.each(m,function(a,o){var r=(o=e(o)).data(),s=r.wordHeight,n=i.t.words.widthIncludingSpace(o);h.setPropsForSpace(o,p);var d=i.t.words.widthIncludingSpace(o),l=o.data("wordHeight"),c=i.t.words.getWordIndex(o,f),m=d-n,g=l-s;u.remainingWidth-=m;var S={chIndex:0,width:m,height:g,space:o.data("space")};S.spaceWidth=m;var x=[];if(r.space)for(var v=e.extend(!0,[],r.space),y=0;y<v.length;y++)x.push({afterSpaceWidth:v[y].afterSpaceWidth,fill:v[y].fill,underline:v[y].underline,baseline:v[y].baseline,portion:v[y].portion});S.space=x;var E=Shape.textBody.getEditorDataObject(S);i.t.words.index.update(t,f,E,c)}),p.box.data("shape_rendered")){var v=i.t.line.getLinePathValues(t,f);i.t.line.lineCanister.update(t,v.eleObj,v.dataObj);var y=(g=Shape.textBody.getMaxValue(f)).height!==S;y&&0===v.dataObj.lineIndex&&Shape.textBody.paras.style.spacing.before.checkAndSet(t,a,o),l.push(y)}}),p.box.data("shape_rendered")&&e.each(d,function(e,t){var a=t.line;if(l[e])return i.t.line.updateRemainingLines(p,a),!1}),e.each(d,function(t,a){e.isEmptyObject(a.line.data())||(i.t.breakLine(p,a.line),i.t.words.updateRemainingWords(p))})},getLastLineBaseline:function(t,a,o){var i=0,r=(t.textBody.element?t.textBody.element:o.find("#"+Shape.textBody.textContainer)).find("."+Shape.textBody.lineId);if(!r.length)return i;for(var s=e(r[r.length-1]).find("."+Shape.textBody.wordId),n=0;n<s.length;n++){var d=e(s[n]),p=e.extend(!0,{},d.data());if(p.hasSubword)for(var l=d.find("#"+Shape.textBody.subwordId),h=0;h<l.length;h++){var c=e(l[h]),f=e.extend(!0,{},c.data());i=i>=0&&i<f.baseline?f.baseline:i}else i=i>=0&&i<p.baseline?p.baseline:i}return i},drawUnderline:function(t,a,o,i){this.removeUnderline(i);var r=Shape.textBody.paras.portions.t,s=i.data().editorData,n={data:t,container:a,box:o},d=r.words.getFirstLineLeft(n,i),p=[],l=this.getMaxHeight(i.data()),h=Math.round(.03*l);h=h>2?h:2,l=l>4?l:4;for(var c,f,u,m=0,g=0,S=0,x=0;x<s.length;x++){if(s[x].subWordEditorData&&s[x].subWordEditorData.length)for(var v=s[x].subWordEditorData,y=0;y<v.length;y++)"underline"===v[y].underline?(c=c||0===c?c:d+r.words.getWordTransform(i,x-1)+r.subword.getSubwordTransform(y-1,v),x?y?v[y].portion===v[y-1].portion?m+=v[y].width:((c||0===c)&&m&&(S=g||l,p.push({left:c,width:m,fill:D,height:S}),g&&(g=0)),v[y].baseline>0&&(g=(g=(s[x].height+v[y].baseline)*Shape.textBody.baselineRatio)<Shape.textBody.maxUnderlineHeight?g:Shape.textBody.maxUnderlineHeight),c=d+r.words.getWordTransform(i,x-1)+r.subword.getSubwordTransform(y-1,v),m=v[y].width,D=v[y].fill):v[y].portion===u?(m+=v[y].width,D=v[y].fill):((c||0===c)&&m&&(S=g||l,p.push({left:c,width:m,fill:D,height:S})),g&&(g=0),v[y].baseline>0&&(g=(g=.25*(s[x].height+v[y].baseline))<Shape.textBody.maxUnderlineHeight?g:Shape.textBody.maxUnderlineHeight),c=d+r.words.getWordTransform(i,x-1)+r.subword.getSubwordTransform(y-1,v),m=v[y].width,D=v[y].fill):y?v[y].portion===v[y-1].portion?m+=v[y].width:((c||0===c)&&m&&(S=g||l,p.push({left:c,width:m,fill:D,height:S})),g&&(g=0),c=d+r.words.getWordTransform(i,x-1)+r.subword.getSubwordTransform(y-1,v),m=v[y].width,D=v[y].fill,v[y].baseline>0&&(g=(g=(s[x].height+v[y].baseline)*Shape.textBody.baselineRatio)<Shape.textBody.maxUnderlineHeight?g:Shape.textBody.maxUnderlineHeight)):(m+=v[y].width,D=v[y].fill,v[y].baseline>0&&(g=(g=(s[x].height+v[y].baseline)*Shape.textBody.baselineRatio)<Shape.textBody.maxUnderlineHeight?g:Shape.textBody.maxUnderlineHeight))):(c||0===c)&&m&&(S=g||l,p.push({left:c,width:m,height:S,fill:D}),m=0,c=void 0,g&&(g=0)),f=v[y].portion,y!==v.length-1||!c&&0!==c||!m||x!==s.length-1||"EOP"!==s[x].wordType&&!e.isEmptyObject(s[x].space)||(S=g||l,p.push({left:c,height:S,width:m,fill:D}),g&&(g=0));else"EOP"!==s[x].wordType&&("underline"===s[x].underline&&(c=c||0===c?c:d+r.words.getWordTransform(i,x-1),x?s[x].portions.start===u?m+=s[x].width-s[x].spaceWidth:((c||0===c)&&m&&(S=g||l,p.push({left:c,height:S,width:m,fill:D}),g&&(g=0)),s[x].baseline>0&&(g=(g=(s[x].height+s[x].baseline)*Shape.textBody.baselineRatio)<Shape.textBody.maxUnderlineHeight?g:Shape.textBody.maxUnderlineHeight),c=d+r.words.getWordTransform(i,x-1),m=s[x].width-s[x].spaceWidth,D=s[x].fill):(m+=s[x].width-s[x].spaceWidth,D=s[x].fill,s[x].baseline>0&&(g=(g=(s[x].height+s[x].baseline)*Shape.textBody.baselineRatio)<Shape.textBody.maxUnderlineHeight?g:Shape.textBody.maxUnderlineHeight))),f=s[x].portions.start),x!=s.length-1||!e.isEmptyObject(s[x].space)&&"EOP"!==s[x].wordType||(c||0===c)&&m&&(S=g||l,p.push({left:c,height:S,width:m,fill:D}),g&&(g=0));var E=s[x].spaceWidth?s[x].space:void 0;if(E)for(var C=0;C<E.length;C++)"underline"===E[C].underline?C?E[C].portion===E[C-1].portion?m+=E[C].afterSpaceWidth:((c||0===c)&&m&&(S=g||l,p.push({left:c,height:S,width:m,fill:D})),g&&(g=0),c=d+r.words.getWordTransform(i,x-1)+s[x].width-s[x].spaceWidth+this.getSpaceTransform(E,C),m=E[C].afterSpaceWidth,D=E[C].fill,E[C].baseline&&(g=(g=(s[x].height+E[C].baseline)*Shape.textBody.baselineRatio)<Shape.textBody.maxUnderlineHeight?g:Shape.textBody.maxUnderlineHeight)):f===E[C].portion?m+=E[C].afterSpaceWidth:((c||0===c)&&m&&(S=g||l,p.push({left:c,height:S,fill:D,width:m}),g&&(g=0)),c=d+r.words.getWordTransform(i,x-1)+s[x].width-s[x].spaceWidth+this.getSpaceTransform(E,C),m=E[C].afterSpaceWidth,D=E[C].fill,E[C].baseline>0&&(g=(g=.25*(s[x].height+E[C].baseline))<Shape.textBody.maxUnderlineHeight?g:Shape.textBody.maxUnderlineHeight)):(c||0===c)&&m&&(S=g||l,p.push({left:c,width:m,fill:D,height:S}),m=0,c=void 0,g=0),C==E.length-1&&(u=E[C].portion,x===s.length-1&&(c||0===c)&&m&&(S=g||l,p.push({left:c,width:m,fill:D,height:S}),g&&(g=0)))}if(p.length){var O=Shape.creator.createGroup(i[0]);Shape.creator.set(O,{class:"underlinewrapper"}),O.data("type","underlinewrapper"),i.append(O);for(var b=0;b<p.length;b++){var T=Shape.creator.createGroup(O);Shape.creator.set(T,{class:"underline"});var w=Shape.creator.createLine(i);Shape.creator.set(w,{class:"underline_path",id:"path"+i.data("DOMIndexId")}),T.appendChild(w),O.appendChild(T),T.data("type","underline"),this.generateUnderlinePath(p[b].left,Math.round(p[b].height),p[b].width,w),Shape.creator.set(w,"stroke-width",h),Shape.creator.set(w,"stroke-dasharray","none");var D=this.checkPortionFill(t,p[b].fill);Shape.creator.set(w,"stroke",D)}}},removeUnderline:function(e){e.find(".underlinewrapper").remove()},checkPortionFill:function(e,t){return t||(t=e.textBody.props.textStyle&&e.textBody.props.textStyle.props&&e.textBody.props.textStyle.props.stroke&&e.textBody.props.textStyle.props.stroke.fill.type!==ShapeConstants.FillType.NONE?VectorUtil.getRGBString(e.textBody.props.textStyle.props.stroke.fill.solid.color):e.textBody.props.textStyle&&e.textBody.props.textStyle.props&&e.textBody.props.textStyle.props.fill&&e.textBody.props.textStyle.props.fill.type!==ShapeConstants.FillType.NONE?e.textBody.props.textStyle.props.fill.type===ShapeConstants.FillType.PATTERN?VectorUtil.getRGBString(e.textBody.props.textStyle.props.fill.pattern.foreground[0].fill.solid.color):VectorUtil.getRGBString(e.textBody.props.textStyle.props.fill.solid.color):VectorUtil.convertRGBToString([0,0,0])),t},getMaxHeight:function(e){for(var t=e.editorData,a=0,o=0;o<t.length;o++)a<t[o][Shape.textBody.height]&&"EOP"!==t[o].wordType&&(a=t[o][Shape.textBody.height]);return a*Shape.textBody.UnderlineAspectRatio},getSpaceTransform:function(e,t){var a=0;if(!e.length)return a;for(var o=void 0!==t?t:e.length-1,i=0;i<o;i++)a+=e[i].afterSpaceWidth;return a},generateUnderlinePath:function(e,t,a,o){var i={x1:e,x2:e+a,y1:t,y2:t};Shape.creator.setLine(o,i)},removeBaseLine:function(e,t,a,o,i,r){if(a.data("shape_rendered")){var s=o.data();s.style=s.style?s.style:{};if(s.style.y=0,s.subPortion=!1,"EOP"!==s.type){var n="g"===o[0].tagName?o.find("#"+Shape.textBody.wordContentId):o;Shape.creator.set(n[0],{y:0})}r||(r=Shape.textBody.paras.portions.t.line.getParentLine(o));var d=Shape.textBody.paras.portions.t,p=r.data("editorData");if(s.baseline&&s.baseline>0)if(s.subword){var l=Shape.textBody.paras.portions.t.words.getParentWord(o),h=d.words.getWordIndex(l,r),c=d.subword.getSubWordIndex(o,l);p[h][Shape.textBody.subWordEditorData][c].baseline=0}else p[d.words.getWordIndex(o,r)].baseline=0;s.baseline=0}},baseline:function(e,t,a,o,i,r){var s=this;if(0!==i.baseline){var n=o.data();(n=n||{}).style=n.style?n.style:{};var d=this.autoFitManipulation(i.size,e)*i.baseline*-1;if("EOP"!==n.type){var p="g"===o[0].tagName?o.find("#"+Shape.textBody.wordContentId):o;Shape.creator.set(p[0],{y:d})}n.style.y=d,n.baseline=d,n.subPortion=!0,r||(r=Shape.textBody.paras.portions.t.line.getParentLine(o));var l=Shape.textBody.paras.portions.t,h=r.data("editorData");if("underline"===n.underline&&d>0)if(n.subword){var c=Shape.textBody.paras.portions.t.words.getParentWord(o),f=l.words.getWordIndex(c,r),u=l.subword.getSubWordIndex(o,c);h[f][Shape.textBody.subWordEditorData][u].baseline=d}else h[l.words.getWordIndex(o,r)].baseline=d}else s.removeBaseLine(e,t,a,o,i)},dependency:function(e,t,a){if((a=a||Shape.box(e,t))&&0!==a.length){var o=e.textBody.paras.num,i=e.textBody.paras[o].portions,r=i.num;if(0===i.num&&e.textBody.paras[o].style.listStyle&&Shape.textBody.paras.style.listStyle.setListStyleProps(e,t,a),r>=i.length-1){var s=Shape.textBody.paras.getEOPSpan(e,t,a,e.textBody.paras[o]),n={data:e,container:t,box:a};Shape.textBody.paras.setEopHeight(s,n,o)}a.data("shape_rendered")&&(e.line_modified=!0),e.line_modified&&!e.editorOperate&&(t.trigger("line_modified",{box:a,data:e,container:t}),e.line_modified=!1)}},autoFitManipulation:function(e,t){var a=t.textBody.props;return a&&a.autoFit&&"NORMAL"===a.autoFit.type&&a.autoFit.normal.fontScale&&(e*=a.autoFit.normal.fontScale),e},_size:function(e,t){e.css("font-size",t+"pt")},getSize:function(e,t,a){t=void 0!==t?t:e.textBody.paras.num,a=void 0!==a?a:e.textBody.paras[t].portions.num;var o=e.textBody.paras[t].portions[a].props.size;return o=this.autoFitManipulation(o,e)},size:function(e,t,a,o){t=t?this.autoFitManipulation(t,a):this.getSize(a),o&&(t*=Shape.textBody.paras.portions.props.subPortionRatio);var i=e.data();(i=i||{}).style=i.style?i.style:{},i.style["font-size"]=t+Shape.textBody.fontUnit,Shape.creator.set(e[0],{"font-size":t+Shape.textBody.fontUnit})},setTextDecoration:function(e,t,a,o,i,r){var s=i.underline===ShapeConstants.LineType.SINGLE?"underline":"",n=o.data();n=n||{};var d=s.length?s:"none";n.underline=d;var p=i.strike===ShapeConstants.LineType.SINGLE?"line-through":"",l=p.length?p:"none";n.style=n.style?n.style:{},n.style["text-decoration"]=l,Shape.creator.set(o[0],{"text-decoration":l})},setTagBG:function(t,a){var o=t.data(),i=o.wordHeight*Shape.textBody.lineSpacingRatio*-1,r=e(Shape.creator.createRectangle(t,0,i,o.wordWidth,o.wordHeight,0));r.attr({class:a+"bg"}),t.prepend(r)},setSpellCheckSpan:function(e){var t=e.data();!t.subword&&"EOP"!==t.type&&t.wordWidth?(t.spellCheckId=t.spellCheckId?t.spellCheckId:Math.uuid(),Shape.textBody.paras.portions.t.words.addSpellCheckSpan(e)):t.subword&&t.wordWidth&&(t.spellCheckId=t.spellCheckId?t.spellCheckId:Math.uuid(),e=Shape.textBody.paras.portions.t.words.getParentWord(e),Shape.textBody.paras.portions.t.words.addSpellCheckSpan(e))},setCommentBG:function(e,t){var a=e.data();!a.subword&&"EOP"!==a.type&&a.wordWidth?a.commentBGId=t:a.subword&&a.wordWidth&&(a.commentBGId=t)}},getPortion:function(t,a){if(a<0)return[];for(var o=t.find("."+Shape.textBody.lineId),i=e(),r=0;r<o.length;r++){var s=e(o[r]),n=s.data();if(!n.portions||void 0===n.portions.start)return[];var d=n.portions.start,p=n.portions.end;a>=d&&a<=p&&(i=e.merge(i,s))}var l=[];e.each(i,function(t,a){l.push({line:e(a),words:e(a).find("."+Shape.textBody.wordId)})});var h=[];return e.each(l,function(t,o){var i=o.words,r={line:o.line};if(r.portion=e(),r.spaceObj=[],e.each(i,function(t,o){var i=(o=e(o)).data(),s=i.portions.start,n=i.portions.end;if(a>=s&&a<=n){if("EOP"===o.data("type"))return!0;if(s===n)r.portion=e.merge(r.portion,o),r.spaceObj.length&&"before"!==r.spaceObj[r.spaceObj.length-1].at&&(r.spaceObj[r.spaceObj.length-1].at="inbetween");else{var d=o.find("."+Shape.textBody.subwordId);d.length?e.each(d,function(t,o){var o=e(o);a===o.data("portion")&&(r.portion=e.merge(r.portion,o),r.spaceObj.length&&"before"!==r.spaceObj[r.spaceObj.length-1].at&&(r.spaceObj[r.spaceObj.length-1].at="inbetween"))}):a===s&&(r.portion=e.merge(r.portion,o),r.spaceObj.length&&"before"!==r.spaceObj[r.spaceObj.length-1].at&&(r.spaceObj[r.spaceObj.length-1].at="inbetween"));var p=o.data("space");if(p.length){var l,h,c=!1;if(e.each(p,function(e,t){if(t.portion===a)c||(l=e,c=!0),h=e;else if(t.portion>a)return!1}),void 0!==l){var f=e(r.portion).length||r.spaceObj.length?"after":"before";r.spaceObj.push({type:"SPACE",word:o,index:{start:l,end:void 0!==h?h:p.length-1},at:f})}}}}}),r.portion.length||1==r.spaceObj.length&&(r.spaceObj[0].at="after"),!r.portion.length&&!r.spaceObj.length)return!1;h.push(r)}),h.num=a,h}}}};Shape.textBody=Util.extend(!0,{},t)}(jQuery),function(e){var t={calculateTextSize:function(t){t.textBody.props.inset=e.extend(!0,{left:9.6,right:9.6,top:4.8,bottom:4.8},t.textBody.props.inset),t.textBody.props.column=e.extend(!0,{num:1,gap:0},t.textBody.props.column);var a,o=t.textBody.props.inset,i=t.textBody.props.column,r=Shape.textBody.getTextContainerHeight(t),s=Math.floor(r.width-(o.left+o.right)-(i.num-1)*i.gap),n=[],d=t.textBody.props.inset.top+t.textBody.props.inset.bottom,p=o.left+o.right,l=0,h=!1;e.each(t.textBody.paras,function(o,i){t.textBody.paras.num=o;var r=[],d={words:[]},p=i.style,c=p.margin&&p.margin.left?p.margin.left:0,f=Shape.textBody.getBulletWidth(t);paraWidth=s-c;var u={lineWidth:paraWidth,paraStyle:p,bulletWidth:f,paraMargin:c},m=Shape.textBody.paras.portions.t.line.getFirstLineWidth(u),g=s-m,S=!1,x=!1,v=m;e.each(i.portions,function(n,p){i.portions.num=n;for(var f,u,m=Shape.textBody.paras.portions.t.getWordObjectToRender(t),y=m.length,E=0;E<y&&E<2e4;E++){var C=m[E];if("LINEBREAK"===C.type){x=!0;O=Shape.textBody.zeroWidthSpaceText;u={width:(f=Shape.textBody.paras.portions.t.words.getDim(O,t,o,n)).width,height:f.height,spaceWidth:0,lang:C.lang,portionNum:n,type:C.type},d.words.push(u)}else{var O="SPACE"===C.type?Shape.textBody.zeroWidthSpaceText:C.text?C.text.trim():"";if(f=Shape.textBody.paras.portions.t.words.getDim(O,t,o,n),O=f.text,"SPACE"===C.type){S=!0;A=Shape.textBody.paras.portions.t.words.getSpaceDimension(C.space);v-=A,d.words.length?(N=d.words[d.words.length-1]).spaceWidth+=A:(u={width:f.width,height:f.height,spaceWidth:A,lang:C.lang,portionNum:n,type:C.type},d.words.push(u))}else if(v<=-1&&d.words.length){x=!0;b=e.extend(!0,{},C);m.splice(E+1,0,b),y=m.length}else if(v-f.width<=-1){var b=e.extend(!0,{},C);x=!0;var T=d.words.length?d.words[d.words.length-1]:void 0;if(S){var w=T;if(w.lang!==Shape.textBody.lang.EAST_ASIAN&&0===w.spaceWidth){w=d.words.pop(),v+=w.width;var D={paraProp:r,lineProp:d,remainingWidth:v,width:l,totalWidth:g},P=Shape.textBody.resetLineProp(D);l=P.width,m.splice(E+1,0,b),y=m.length,g=c,v=s-c,x=!1,S=!1,(d={words:[]}).words.push(w),v-=w.width}else m.splice(E+1,0,b),y=m.length}else if(d.words.length&&(C.lang===Shape.textBody.lang.EAST_ASIAN||"FIELD"===T.type&&T.portionNum!==n))m.splice(E+1,0,b),y=m.length;else{var L=!1;1===d.words.length&&(d.words[0].subwords&&d.words[0].subwords.length||d.words[0].portionNum!==n)&&(L=!0);var I=Shape.textBody.paras.portions.t.splitWord(O,v,{textCase:f.textCase,font:f.font},L);if(I.text1.length)if(f=Shape.textBody.paras.portions.t.words.getDim(I.text1,t,o,n),v-=f.width,d.words.length)if(1===d.words.length){if((N=d.words[0]).subwords&&N.subwords.length){R={width:f.width,height:f.height,spaceWidth:0,lang:C.lang,portionNum:n};N.subwords.push(R)}else if(N.portionNum!==n){R=e.extend(!0,{},N);N.subwords=[],N.subwords.push(R),R={width:f.width,height:f.height,spaceWidth:0,lang:C.lang,portionNum:n},N.subwords.push(R)}else Shape.log("1.How is it possible",N.portionNum,n),h=!0,a="same portionNum";N.width+=f.width,N.height=f.height>N.height?f.height:N.height}else h=!0,Shape.log("2.How is it possible"),a="there are more than one word with wordAdded as false";else u={width:f.width,height:f.height,spaceWidth:0,lang:C.lang,portionNum:n,type:C.type},d.words.push(u);if(I.text2.length)b.text=I.text2,m.splice(E+1,0,b),y=m.length;else{A=Shape.textBody.paras.portions.t.words.getSpaceDimension(C.space);v-=A,d.words.length?d.words[d.words.length-1].spaceWidth+=A:(Shape.log("3.How is it possible"),a="there is no second part in the brokenwords but now words in the line .. ")}}}else{var A=C.space?Shape.textBody.paras.portions.t.words.getSpaceDimension(C.space):0;if(v-=f.width,v-=A,d.words.length){var N=d.words[d.words.length-1];if(N.spaceWidth>0||N.lang===Shape.textBody.lang.EAST_ASIAN||C.lang===Shape.textBody.lang.EAST_ASIAN||"FIELD"===N.type||"FIELD"===C.type)u={width:f.width,height:f.height,spaceWidth:A,lang:C.lang,portionNum:n,type:C.type},d.words.push(u);else{if(N.subwords&&N.subwords.length){R={width:f.width,height:f.height,spaceWidth:0,lang:C.lang,portionNum:n};N.subwords.push(R)}else if(N.portionNum!==n){var R=e.extend(!0,{},N);N.subwords=[],N.subwords.push(R),R={width:f.width,height:f.height,spaceWidth:0,lang:C.lang,portionNum:n},N.subwords.push(R)}else Shape.log("4.How is it possible",N.portionNum,n),h=!0;N.spaceWidth=A,N.width+=f.width,N.height=f.height>N.height?f.height:N.height}}else u={width:f.width,height:f.height,spaceWidth:A,lang:C.lang,portionNum:n,type:C.type},d.words.push(u);(A>0||C.lang===Shape.textBody.lang.EAST_ASIAN)&&(S=!0)}}if(x){var D={paraProp:r,lineProp:d,remainingWidth:v,width:l,totalWidth:g},P=Shape.textBody.resetLineProp(D);l=P.width,g=c,v=s-c,d={words:[]},x=!1,S=!1}}});var y=Shape.textBody.zeroWidthSpaceText,E=Shape.textBody.paras.portions.t.words.getDim(y,t,o,i.portions.length-1),C={width:0,height:E.height?E.height:0,spaceWidth:0,lang:"EOP",portionNum:0};if(0===d.words.length&&r.length){var O=r[r.length-1].words;O.length&&"LINEBREAK"===O[O.length-1].type||(d=r.pop(),v=d.remainingWidth)}d.words.push(C);var b={paraProp:r,lineProp:d,remainingWidth:v,width:l,totalWidth:g},T=Shape.textBody.resetLineProp(b);l=T.width,n.push(r)});var c=this.applyStyleProps(n,t);return c.totalHeight=Math.round(1e3*(c.totalHeight+d))/1e3,c.totalWidth=Math.round(1e3*(l+p))/1e3,c.errorInCalculation=h,c.reason=a,c},applyStyleProps:function(t,a){var o=0;return e.each(t,function(i,r){var s=a.textBody.paras[i],n=s.style.spacing.line,d=n.type.toLowerCase(),p=n[d],l=Shape.textBody.paras.style.spacing.line.getValue(p,d,a),h=l.value,c=s.style.spacing.before,f=s.style.spacing.after;e.each(r,function(e,s){var n=afterVal=0;if(s.height){if(s.height="percent"===d?h*s.height:h,i&&!e&&c){p=c.type.toLowerCase();n=Shape.textBody.paras.style.spacing.before.getValue(a,c[p],p,l,s.height)}if(e===r.length-1&&i!==t.length-1&&f){var p=f.type.toLowerCase();afterVal=Shape.textBody.paras.style.spacing.after.getValue(a,f[p],p,l,s.height)}o+=Math.round(1e3*(s.height+n+afterVal))/1e3}})}),{totalHeight:o,textBody:t}},getBulletWidth:function(t){var a=0,o=t.textBody.paras[t.textBody.paras.num].style.listStyle;if(o&&o.bullet&&o.bullet.type!==ShapeConstants.BulletType.NONE){var i=Shape.textBody.paras.style.listStyle,r=i.createBullet(Shape.svgRoughWork);i._setListStyleProps(t,r),i.bullet[o.bullet.type.toLowerCase()]._set.call(this,t,r,e());var s=r.data(),n="",d="";s.size&&(n+=s.size),s.fontName&&(n+='"'+s.fontName+'" '),s.text&&(d=s.text);a=(o.bullet.type===ShapeConstants.BulletType.PICTURE?Shape.textBody.paras.style.listStyle.bullet.picture.getPictureBulletSize(t,r):Shape.textBody.paras.portions.t.words.canvasDim(n,d)).width,r.remove()}return a},getTextContainerHeight:function(e){if(e.props.geom.type===ShapeConstants.ShapeGeometryType.CUSTOM){var t=e.props.transform.dim;return{left:0,top:0,width:Math.round(t.width),height:Math.round(t.height)}}var a=Shape.props.geom.preset._set(e).tbox;return{left:a[0],top:a[1],width:a[2]-a[0],height:a[3]-a[1]}},resetLineProp:function(t){var a=t.remainingWidth,o=t.lineProp,i=t.width,r=t.totalWidth,s=t.paraProp;o.remainingWidth=a;var n=Shape.textBody.getMaxDimensions(o);return r+=n.totalWidth,i=r>i?r:i,o.height=n.maxHeight,s.push(e.extend(!0,{},o)),{paraProp:s,width:i}},getMaxDimensions:function(t){var a=0,o=0;return e.each(t.words,function(e,t){a+=t.width+t.spaceWidth,o=t.height>o?t.height:o}),{totalWidth:a,maxHeight:o}},calculateIndividualWordsSize:function(e){for(var t=this.calculateTextSize(e),a=t.totalHeight,o=0,i=t.textBody,r=0;r<i.length;r++)for(var s=i[r],n=0;n<s.length;n++)for(var d=s[n].words,p=0;p<d.length;p++){var l=d[p];"EOP"!==l.type&&(o+=l.width+l.spaceWidth)}return{totalWidth:o,totalHeight:a}}};e.extend(!0,Shape.textBody,t)}(jQuery);var SVGPathUtil;jQuery,SVGPathUtil={arcCurve:"A",getEndPathString:function(){return"z"},getEndPath:function(){return[this.getEndPathString()]},getClosePath:function(){return this.getEndPath()},getEndClosePath:function(){return this.getEndPath()},getNoFill:function(){return""},getNumber:function(e){return e},getQuadBezier:function(e,t,a,o){return["Q",e,t,a,o]},getXCurve:function(e,t,a,o,i,r){var s=Math.abs(a-e),n=Math.abs(o-t);if(0!==s||0!==n)return this.getArcCurve(s,n,a,o,i,r)},getYCurve:function(e,t,a,o,i,r){return this.getXCurve(e,t,a,o,i,r)},getFiller:function(e,t){return["M",e,t]},getEllipse:function(e,t,a,o,i){var r=a+e,s=this.getArcCurve(e,t,r,o,i,!0);return r=a-e,s.concat(this.getArcCurve(e,t,r,o,i,!0))},getEllipseCurve:function(e,t,a,o,i,r,s,n){return this.getArcCurve(e,t,i,r,s,n)},getXEllipseCurve:function(e,t,a,o,i,r,s){return this.getEllipseCurve(e,t,a,i,o,i,r,s)},getYEllipseCurve:function(e,t,a,o,i,r,s){return this.getEllipseCurve(e,t,i,a,i,o,r,s)},getArcCurve:function(e,t,a,o,i,r){var s=[0,0,1];return i&&(s[2]=0),r&&(s[1]=1),[this.arcCurve,e,t,s[0],s[1],s[2],a,o]}};var SVGCreator;!function(e){SVGCreator={SvgString:'<svg overflow="auto" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"   preserveAspectRatio="none" style="position: absolute; top: 0pt; left: 0pt;letter-spacing:normal !important;"></svg>',SvgNamespace:"http://www.w3.org/2000/svg",RotationConstant:4,ScaleConstant:3,TranslateConstant:2,DefaultConstant:1,TextLineSpacing:1.2,Xlink:"http://www.w3.org/1999/xlink",fillId:"fillId",markerId:"markerId",maskId:"maskId",clipId:"clipId",textmaskId:"textmaskId",init:function(){},getDefaultRoot:function(e){e||(e=SVGCreator.SvgString);var t=(new DOMParser).parseFromString(e,"text/xml");return this.adoptNode(t.documentElement)},adoptNode:function(e){return document.adoptNode(e)},setRoot:function(t,a,o,i,r){var s,n,d,p,l,h,c,f=void 0;if(r.isStaticShape){var u=e.extend(!0,{},r.props),m=u.transform,g=m.pos,S=m.dim;if(u.stroke){var x=u.stroke.width;x&&(g.left=g.left-x/2,g.top=g.top-x/2,S.width=S.width+x,S.height=S.height+x,r.viewBoxScaling&&(S.width=S.width*r.viewBoxScaling,S.height=S.height*r.viewBoxScaling))}s=VectorUtil.getViewBoxDimensions(g.left,g.top),d=(n=VectorUtil.getViewBoxDimensions(S.width,S.height))[0]+s[0],p=n[1]+s[1],l=S.width+g.left,h=S.height+g.top,c=-g.left,f=-g.top}else if(r.fitModeData)s=[-(c=r.fitModeData.left),-(f=r.fitModeData.top)],d=l=r.fitModeData.width,p=h=r.fitModeData.height;else{var v=void 0,y=void 0;r.containerDim?(v=r.containerDim.width,y=r.containerDim.height):(v=i.width(),y=i.height()),s=VectorUtil.getViewBoxDimensions(v,y),d=(n=VectorUtil.getViewBoxDimensions(a,o))[0]+2*s[0],p=n[1]+2*s[1],l=VectorUtil.getHTMLDimension(d),h=VectorUtil.getHTMLDimension(p),c=-v,f=-y}var E={version:1.1,viewBox:-s[0]+", "+-s[1]+", "+d+","+p,width:l,height:h,"z-index":0};t.nodeType||(t=t[0]),this.set(t,E),t.style.left=c+"px",t.style.top=f+"px"},getRoot:function(e,t){return e.find("#root")},createParentGroup:function(e){var t=this.createElement(e,"g");return t.setAttribute("transform","rotate(0) translate(0 0) scale(1 1) "),t},createUse:function(e){return this.createElement(e,"use")},createGroup:function(e){var t=this.createElement(e,"g");return t.setAttribute("transform","rotate(0) translate(0 0) scale(1 1) "),t},createRect:function(e){return this.createElement(e,"rect")},createTitle:function(e){return this.createElement(e,"title")},getAvailableGroups:function(t){return e("g",t)},createPath:function(e){return this.createElement(e,"path")},createLine:function(e){return this.createElement(e,"line")},createText:function(e){return this.createElement(e,"text")},createTSpan:function(e){return this.createElement(e,"tspan")},createAnchor:function(e){return this.createElement(e,"a")},setLine:function(e,t){this.set(e,t)},setPath:function(e,t){e.nodeType||(e=e[0]),this.set(e,"d",t),this.set(e,"fill-rule","evenodd")},setFill:function(e,t,a){if("none"!=t){var o={fill:t,"fill-opacity":a};this.set(e,o)}else this.set(e,{fill:"none"})},setShapeDimension:function(e,t,a){},setStroke:function(e,t,a){var o={stroke:t};"none"!=t&&(o["stroke-width"]=a,o["stroke-linejoin"]="miter",o["stroke-linecap"]="square"),this.set(e,o)},createTextPath:function(e){return this.createElement(e,"textPath")},createRectangle:function(e,t,a,o,i,r){e||(e=Shape.selectedShapeBox[0][0]);var s=this.createElement(e,"rect"),n={x:t,y:a,width:o+=r=VectorUtil.getViewBoxDimensions(r),height:i+=r};return this.set(s,n),s},createCircle:function(e,t,a,o,i){e||(e=Shape.selectedShapeBox[0][0]);var r=this.createElement(e,"circle");i&&(t+=i=VectorUtil.getViewBoxDimensions(i),a+=i);var s={cx:t,cy:a,r:o};return this.set(r,s),r},setRectangle:function(e,t,a,o,i){var r={};void 0!==t&&(r.x=t),void 0!==a&&(r.y=a),void 0!==o&&(r.width=o),void 0!==i&&(r.height=i),this.set(e,r)},getRect:function(e,t){return this.get(e,t)},createElement:function(e,t){return e.nodeType||(e=e[0]),e.ownerDocument.createElementNS(SVGCreator.SvgNamespace,t)},get:function(e,t,a){return e.nodeType||(e=e[0]),VectorUtil.get(e,t,a)},set:function(e,t,a,o){e.nodeType||(e=e[0]),VectorUtil.set(e,t,a,o)},setXlink:function(e,t,a){this.set(e,t,a,SVGCreator.Xlink)},getRotationAngle:function(e){return e||(e=Shape.selectedShape),e.nodeType||(e=e[0]),this.getTransform(e,SVGCreator.RotationConstant)},getTransform:function(e,t){for(var a=e.transform.baseVal,o=a.numberOfItems,i=void 0,r=0;r<o;++r){var s=a.getItem(r);if(s.type==t){i=s;break}}if(!i)return null;if(t==SVGCreator.RotationConstant)return i.angle;if(t==SVGCreator.ScaleConstant)return(n={}).sw=i.matrix.a,n.sh=i.matrix.d,n;if(t==SVGCreator.TranslateConstant){var n={};return n.x=i.matrix.e,n.y=i.matrix.f,n}},rotateShape:function(e,t,a){if(t.length>0){t=t[0];var o=this.getCenter(a);o.angle=e,this.setTransform(t,SVGCreator.RotationConstant,o)}},posShape:function(e,t){var a={x:t.left,y:t.top};this.setTransform(e,SVGCreator.TranslateConstant,a)},flipShape:function(t,a,o,i){var t=t?t[0]:e("#reflectionshapegroup",bx)[0];i||this.rotateShape(0,t,o);var r,s,n=VectorUtil.getViewBoxDimensions(o.width,o.height);"x"==a?(s={sw:"-1",sh:"1"},r={x:n[0],y:0}):"y"==a?(s={sw:"1",sh:"-1"},r={x:0,y:n[1]}):"both"==a?(s={sw:"-1",sh:"-1"},r={x:n[0],y:n[1]}):(s={sw:"1",sh:"1"},r={x:0,y:0});var d=e(t).attr("transform"),p=d.substring(d.indexOf("rotate"),d.indexOf(")")+1);e(t).attr({transform:p+" translate("+r.x+" "+r.y+") scale("+s.sw+" "+s.sh+")"})},rotateTextElement:function(t,a,o){t||(t=Shape.selectedShapeBox[0]);var i=e("#textcontainer",t),r=e.extend(!0,{},a);i&&VectorUtil.rotateElement(i,r,1,o)},rotateElement:function(e,t){e.css({MozTransform:"rotate("+t+"deg)"})},setViewBox:function(e,t,a,o,i,r,s,n,d){e.nodeType||(e=e[0]);var p={viewBox:t+", "+a+", "+o+","+i,width:n,height:d};this.set(e,p),e.style.left=r+"px",e.style.top=s+"px"},getCenter:function(e){var t=VectorUtil.getViewBoxDimensions(e.width,e.height);return{cx:.5*t[0],cy:.5*t[1]}},getTransformObject:function(e,t,a,o){if(t==SVGCreator.RotationConstant){var i=this.getCenter(o);return i.angle=a,i}},getDimension:function(e){e.nodeType||(e=e[0]);var t=e.getBBox();return{width:parseFloat(t.width),height:parseFloat(t.height)}},convertTransformMatrixToText:function(e){return"matrix("+[e.a,e.b,e.c,e.d,e.e,e.f].join(" ")+")"},matrix:{set:{translate:function(e,t,a){var o=VectorUtil.matrix.get.translate(e);if(a){var i=t.transform.baseVal[0].matrix;m2=VectorUtil.matrix.get.martixToArray(i),o=VectorUtil.matrix.multiply(m2,o)}SVGCreator.matrix.set.matrixTransform(t,o)},scale:function(e,t,a){var o=VectorUtil.matrix.get.translate(e);if(a){var i=t.transform.baseVal[0].matrix;m2=VectorUtil.matrix.get.martixToArray(i),o=VectorUtil.matrix.multiply(m2,o)}SVGCreator.matrix.set.matrixTransform(t,o)},rotate:function(e,t,a){var o=VectorUtil.matrix.get.rotateOrigin(e.cx,e.cy),i=VectorUtil.matrix.get.rotate(e.angle),r=VectorUtil.matrix.get.rotateOriginInv(e.cx,e.cy),s=VectorUtil.matrix.multiply(o,i),n=VectorUtil.matrix.multiply(s,r);if(a){var d=t.transform.baseVal[0].matrix;m5=VectorUtil.matrix.get.martixToArray(d),n=VectorUtil.matrix.multiply(m5,n)}SVGCreator.matrix.set.matrixTransform(t,d)},matrixTransform:function(e,t){var a=VectorUtil.matrix.get.matrixStr(t);SVGCreator.set(e,{transform:a})},initMatrix:function(e){SVGCreator.set(e,{transform:"matrix(1, 0, 0, 1, 0, 0)"})},transform:function(t,a){var o=VectorUtil.matrix.get.initMatrix();e.each(a,function(e,t){var a=VectorUtil.matrix.get[e](t);o=VectorUtil.matrix.multiply(o,a)}),SVGCreator.matrix.set.matrixTransform(t,o)}},get:{matrixTransform:function(t,a){var o=void 0;if(t.getAttribute("transform").indexOf("matrix")>-1){var i=e(t).data("transformMatrix");i&&(a==SVGCreator.TranslateConstant?o=i.translate:a==SVGCreator.ScaleConstant?o=i.scale:a==SVGCreator.RotationConstant&&(o=i.rotate))}return o}}},setTransform:function(t,a,o,i){for(var r=t.transform.baseVal,s=r.numberOfItems,n=void 0,d=0;d<s;++d){var p=r.getItem(d);if(p.type==a){n=p;break}}var l=!1;if(!n||i){var h=t.ownerSVGElement;n=h?h.createSVGTransform():e(SVGCreator.SvgString)[0].createSVGTransform(),l=!0}if(a==SVGCreator.RotationConstant){var c=o.angle;if(void 0!==o.cx&&void 0!==o.cy){if(180===c){var f=window.navigator.appVersion.match(/Chrome\/(\d+)\./);f&&40===parseInt(f[1],10)&&(c=179.99)}n.setRotate(c,o.cx,o.cy)}}if(a==SVGCreator.ScaleConstant&&n.setScale(o.sw,o.sh),a==SVGCreator.TranslateConstant&&n.setTranslate(o.x,o.y),l&&r.appendItem(n),Shape.isEdge){var u=this.getTransform(t,SVGCreator.TranslateConstant),m=this.getTransform(t,SVGCreator.ScaleConstant),g=e(t).attr("transform"),S=g.indexOf("rotate")>-1?g.substring(g.indexOf("rotate"),g.indexOf(")")+1):void 0;S=S||"rotate(0)";var x=u?" translate("+u.x+" "+u.y+")":" translate(0 0)",v=m?" scale("+m.sw+" "+m.sh+")":" scale(1 1) ";e(t).attr({transform:S+" "+x+" "+v})}},changeShapeDimension:function(e,t,a,o,i){var r={};r.width=a[0],r.height=a[1];var s=e.find("#"+Shape.shapeId);this.rotateShape(t,s,r),this.flipShape(s,i,r,t)},getGroup:function(t){return e("#"+Shape.shapeId,t)},getDefinitions:function(e){if("g"===e[0].tagName)t=e.children("#defs");else var t=e.find("#defs");return t.length>0?t[0]:this.createDefinitions(e)},createDefinitions:function(e){var t=this.createElement(e,"defs");return this.set(t,{id:"defs"}),t},getElement:function(t,a,o,i,r,s){return o=VectorUtil.capitalise(o),r&&(e.isObject(r)&&(r=r[i]),r&&-1!=r.indexOf(i))?e("#"+r,e(t))[0]:this["create"+o].call(this,t,a,i,s)},createMarker:function(e,t,a){var o={},i=this.getDefinitions(Util.getJQueryElement(e)),r=this.createElement(i,"marker"),s="marker_"+a+"_"+Math.uuid();return this.set(r,{id:s,markerUnits:"strokeWidth",orient:"auto",preserveAspectRatio:"none"}),o["headend"==a?"marker-start":"marker-end"]="url(#"+s+")",this.set(t,o),t.setDataset(this.markerId+"_"+a,s),i.appendChild(r),r},createGradient:function(t,a,o,i){var r=this.getDefinitions(t),s=this.createElement(r,o+"Gradient");"radial"!==o&&"angular"!=o&&(o="linear");var n=o+"_"+Math.uuid();this.set(s,{id:n,class:"gradient",gradientUnits:"userSpaceOnUse"}),e(r).append(s);var d={};d[i]="url(#"+n+")",this.set(a,d);var p=e(a).data("pathId");if(p){var l=e("#"+p,t);this.set(l,{"fill-rule":"nonzero"}),this.set(l,{"fill-rule":"evenodd"})}return this.updateFillId(t,a,n),s},getStopElement:function(t,a){var o=e(t).children("#"+a);return o.length>0?o[0]:(o=this.createStop(t),this.set(o,{id:a,class:"stop"}),o)},createStop:function(t){var a=this.createElement(t,"stop");return e(t).append(a),a},removeStops:function(e,t){for(var a=t.length-1,o=gradeElment.childeNodes.length-1;o>a;o--)(DOMUtil.select(".stop:nth-child("+o+")"),e).remove()},createPattern:function(t,a,o){var i=this.getDefinitions(t),r=this.createElement(i,o),s="pattern_"+Math.uuid();this.set(r,{id:s,class:"pattern",patternUnits:"userSpaceOnUse"}),e(i).append(r),this.set(a,{fill:"url(#"+s+")"});var n=e(a).data("pathId");if(n){var d=e("#"+n,t);this.set(d,{"fill-rule":"nonzero"}),this.set(d,{"fill-rule":"evenodd"})}return this.updateFillId(t,a,s),r},getImageElement:function(t){var a=e("#image",t);return a.length>0?a[0]:this.createImage(t)},setBGpath:function(t,a,o){var i=this.createPath(o),r=a.solid.color,s=r.rgb,n={"fill-opacity":1};r&&r.tweaks&&r.tweaks.alpha&&(n["fill-opacity"]=1-r.tweaks.alpha),this.set(i,n),s="rgb("+s+")";var d=Math.max(a.dim.left,a.dim.top),p=Shape.pathGenerator.getPath("RECT",d,d);this.setPath(i,p.path[0]),this.set(i,"fill",s),this.set(i,"id","bgPath"),e(t).append(i),delete a.dim},setPathEle:function(t,a,o,i){var r=this.createPath(o);this.set(r,"id","path"+i);var s=a.geom.type.toLowerCase(),n={};"preset"===s?n=Shape.pathGenerator.getPath(a.geom[s].type,a.dim.width,a.dim.height,a.geom.preset.modifiers):"custom"===s&&(n=Shape.pathGenerator.getCustomPath(a.geom[s],a.dim.width,a.dim.height)),this.setPath(r,n.path[0]);var d="rgb("+a.fill.solid.color.rgb+")";if(a.stroke){this.set(r,"stroke",d),this.set(r,"stroke-width",a.stroke.width);var p=Shape.strokeElement.type.call(Shape.strokeElement,a.stroke.type,r,r,a.stroke.width);this.set(r,p)}else this.set(r,"fill",d);e(t).append(r)},createImage:function(t){var a=this.createElement(t,"image");return this.set(a,{preserveAspectRatio:"none",id:"image",x:0,y:0}),e(t).append(a),a},updateFillId:function(t,a,o){var i=a.getDataset(this.fillId);i&&e("#"+i,t).remove(),o?a.setDataset(this.fillId,o):a.removeDataset(this.fillId)},deleteFillElement:function(t,a){var o=a.getDataset(this.fillId);e("#"+o,t).remove()},removeElementByClass:function(t,a){e.each(a,function(a,o){var i=e(o,t);e.each(i,function(a,o){e(i,t).remove()})})},fillElement:function(e,t,a,o){if(!a)return e;var i=(e=Util.isJQueryObject(e)?Util.getElement(e):e).getDataset(this.fillId);return this.getElement(t,e,a,o,i,"fill")},markerElement:function(e,t,a){var a=a||e.closest("."+Shape.shapeClass),o=e.getDataset(this.markerId+"_"+t);return this.getElement(a,e,"marker",t,o)},maskElement:function(e,t,a,o,i){if(!a)return e;var r=i?t.data(this.textmaskId):t.data(this.maskId);return this.getElement(t,e,a,o,r)},strokeElement:function(e,t,a,o){if(!a)return e;var i=(e=Util.isJQueryObject(e)?Util.getElement(e):e).getDataset(this.fillId);return this.getElement(t,e,a,o,i,"stroke")},getTextElement:function(e,t){if((o=e.find("#textpath0"))[0])o=o[0];else{var a=e.data(Shape.textbox),o=this.createText(e),i=a[0]+.5*a[2];this.set(o,{width:a[2],height:a[3],x:i,id:"textpath0",class:"textbox"})}return o},marker:function(e,t,a){e.props.stroke&&e.props.stroke.tailend?Shape.props.stroke.tailend.set(e,t,a):e.props.stroke&&e.props.stroke.headend&&Shape.props.stroke.headend.set(e,t,a)},pathContainer:function(t,a){return a=a||Shape.shapeId,Util.isJQueryObject(t)&&t.length?e("#"+a,t):!Util.isJQueryObject(t)&&t?e("#"+a,t):e()},createShapeElement:function(e){this.get(e,"id");return this.createElement(e,"use")},createTemplate:function(e){return this.createElement(e,"path")},getTemplate:function(t,a){var o=e(t).attr("id").split("path")[1],i=e(a).data("pathIds")[o];return e("#"+i,a)},path:{getDistance:function(e,t){var a=e.x-t.x,o=e.y-t.y,i=a*a+o*o;return Math.sqrt(i)},multiply:function(e,t){return{x:e.x*t.x,y:e.y*t.y}},divide:function(e,t){return{x:e.x/t.x,y:e.y/t.y}},dot:function(e,t){return e.x*t.x+e.y*t.y},add:function(e,t){return{x:e.x+t.x,y:e.y+t.y}},subtract:function(e,t){return{x:e.x-t.x,y:e.y-t.y}},getLength:function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},normalize:function(e,t){var a=this;void 0===t&&(t=1);var o=a.getLength(e),i=0!==o?t/o:0;return{x:e.x*i,y:e.y*i}},simplify:function(){var e=this,t=[],a=this.points,o=a.length,i=this.segments=o>0?[{_handleIn:{x:0,y:0},_handleOut:{x:0,y:0},_point:a[0]}]:[];if(o>1){var r=e.subtract(a[1],a[0]),s=e.normalize(r),n=e.subtract(a[o-2],a[o-1]),d=e.normalize(n);this.fitCubic(0,o-1,s,d),t=this.getPathObj(i)}return t},getPathObj:function(t){var a=this,o=[];e(t).each(function(e,a){0==e?(o[e]=[],o[e].push(a._handleOut),o[e].push(a._handleIn),o[e].push(a._point)):(o[e].push(a._handleIn),o[e].push(a._point)),e!=t.length-1&&(o[e+1]=[],o[e+1].push(a._handleOut))});var i=[];return e(o).each(function(e,t){if(0==e){var r={m:{x:o[e][2].x,y:o[e][2].y},type:ShapeConstants.PathType[ShapeConstants.PathType.M]};i.push(r)}else{var s=a.add(o[e][0],o[e-1][2]),n=a.add(o[e][1],o[e][2]),d=o[e][2],p={cc:[{x:s.x,y:s.y},{x:n.x,y:n.y},{x:d.x,y:d.y}],type:ShapeConstants.PathType[ShapeConstants.PathType.CC]};i.push(p)}}),i},fitCubic:function(e,t,a,o){var i=this;if(t-e!=1){for(var r,s=i.chordLengthParameterize(e,t),n=Math.max(this.error,this.error*this.error),d=!0,p=0;p<=4;p++){var l=i.generateBezier(e,t,s,a,o),h=i.findMaxError(e,t,l,s);if(h.error<this.error&&d)return void i.addCurve(l);if(r=h.index,h.error>=n)break;d=i.reparameterize(e,t,s,l),n=h.error}var c=i.subtract(this.points[r-1],this.points[r]),f=i.subtract(this.points[r],this.points[r+1]),u=i.add(c,f),m=i.divide(u,{x:2,y:2}),g=i.normalize(m);i.fitCubic(e,r,a,g),i.fitCubic(r,t,{x:-g.x,y:-g.y},o)}else{var S=this.points[e],x=this.points[t],v=i.getDistance(S,x)/3;i.addCurve([S,i.add(S,i.normalize(a,v)),i.add(x,i.normalize(o,v)),x])}},addCurve:function(e){var t=this;this.segments[this.segments.length-1]._handleOut=t.subtract(e[1],e[0]),this.segments.push({_point:e[3],_handleIn:t.subtract(e[2],e[3]),_handleOut:{x:0,y:0}})},generateBezier:function(e,t,a,o,i){for(var r=this,s=this.points[e],n=this.points[t],d=[[0,0],[0,0]],p=[0,0],l=0,h=t-e+1;l<h;l++){var c=a[l],f=1-c,u=3*c*f,m=f*f*f,g=u*f,S=u*c,x=c*c*c,v=r.normalize(o,g),y=r.normalize(i,S),E=r.multiply(s,{x:m+g,y:m+g}),C=r.subtract(this.points[e+l],E),O=r.multiply(n,{x:S+x,y:S+x}),b=r.subtract(C,O);d[0][0]+=r.dot(v,v),d[0][1]+=r.dot(v,y),d[1][0]=d[0][1],d[1][1]+=r.dot(y,y),p[0]+=r.dot(v,b),p[1]+=r.dot(y,b)}var T,w,D=d[0][0]*d[1][1]-d[1][0]*d[0][1];if(Math.abs(D)>1e-12){var P=d[0][0]*p[1]-d[1][0]*p[0];T=(p[0]*d[1][1]-p[1]*d[0][1])/D,w=P/D}else{var L=d[0][0]+d[0][1],I=d[1][0]+d[1][1];T=w=Math.abs(L)>1e-12?p[0]/L:Math.abs(I)>1e-12?p[1]/I:0}var A=r.getDistance(n,s),N=1e-12*A;if(T<N||w<N)T=w=A/3;else{var R=r.subtract(n,s),B=r.normalize(o,T),_=r.normalize(i,w);r.dot(B,R)-r.dot(_,R)>A*A&&(T=w=A/3,B=_=null)}return[s,r.add(s,B||r.normalize(o,T)),r.add(n,_||r.normalize(i,w)),n]},reparameterize:function(e,t,a,o){for(var i=this,r=e;r<=t;r++)a[r-e]=i.findRoot(o,this.points[r],a[r-e]);for(var r=1,s=a.length;r<s;r++)if(a[r]<=a[r-1])return!1;return!0},findRoot:function(e,t,a){for(var o=this,i=[],r=[],s=0;s<=2;s++){var n=o.subtract(e[s+1],e[s]);i[s]=o.multiply(n,{x:3,y:3})}for(s=0;s<=1;s++){var d=o.subtract(i[s+1],i[s]);r[s]=o.multiply(d,{x:2,y:2})}var p=o.evaluate(3,e,a),l=o.evaluate(2,i,a),h=o.evaluate(1,r,a),c=o.subtract(p,t),f=o.dot(l,l)+o.dot(c,h);return Math.abs(f)<1e-6?a:a-o.dot(c,l)/f},evaluate:function(e,t,a){for(var o=this,i=t.slice(),r=1;r<=e;r++)for(var s=0;s<=e-r;s++){var n=o.multiply(i[s],{x:1-a,y:1-a}),d=o.multiply(i[s+1],{x:a,y:a});i[s]=o.add(n,d)}return i[0]},chordLengthParameterize:function(e,t){for(var a=this,o=[0],i=e+1;i<=t;i++)o[i-e]=o[i-e-1]+a.getDistance(this.points[i],this.points[i-1]);for(var i=1,r=t-e;i<=r;i++)o[i]/=o[r];return o},findMaxError:function(e,t,a,o){for(var i=this,r=Math.floor((t-e+1)/2),s=0,n=e+1;n<t;n++){var d=i.evaluate(3,a,o[n-e]),p=i.subtract(d,this.points[n]),l=p.x*p.x+p.y*p.y;l>=s&&(s=l,r=n)}return{error:s,index:r}}}}}(jQuery),function(e){var t={getFilterElement:function(e,t){this.getDefinitions(e);var a=e.data(t),o=e.find("#filter_"+a);return o.length||(o=this.createFilterElement(e,t)),o},createFilterElement:function(t,a,o){var i=this.getDefinitions(t),r=t.data(a),s=Shape.creator.createElement(i,"filter");return o?Shape.creator.set(s,{id:"filter_"+r,filterUnits:"userSpaceOnUse",width:o.width,height:o.height}):Shape.creator.set(s,{id:"filter_"+r,filterUnits:"userSpaceOnUse",x:"-30%",y:"-30%",width:"140%",height:"140%"}),e(i).append(s),s},createMask:function(t,a,o,i){var r=this.getDefinitions(t),s=this.createElement(r,"mask"),n=o+"_"+Math.uuid();this.set(s,{id:n,maskUnits:"userSpaceOnUse",x:0,y:0,width:"100%",height:"100%"}),e(r).append(s);var d="textmask"===o?t.data(this.textmaskId):t.data(this.maskId);d&&i&&e("#"+d,t).remove(),void 0!=i&&0==e(r).parent().length&&e(t).append(r);var p=Shape.creator.createElement(s,"rect");return Shape.creator.set(p,{id:"reflection",x:0,y:0,width:"100%",height:"100%"}),e(s).append(p),s},clip:{create:function(t,a,o,i,r){r||(r="evenodd");var s,n=Shape.creator,d=e(a).data(n.clipId),p=n.getDefinitions(t);if(void 0!==d)s=e(p).find("#"+d)[0];else{s=n.createElement(p,"clipPath");var l=i+"_"+Math.uuid();n.set(s,{id:l,clipPathUnits:"userSpaceOnUse",x:0,y:0,width:"100%",height:"100%"}),e(p).append(s),e(a).data(n.clipId,l)}return o&&o.length&&(e(s).find("path").remove(),e.each(o,function(t,a){e(a).attr({id:"clip","clip-rule":r}),e(s).append(a)})),s},remove:function(t,a,o){e("#"+o,t).remove(),delete e(a).data()[Shape.creator.clipId]},createClipPath:function(e,t){var a=Shape.creator.createElement(e,"path");return Shape.creator.setPath(a,t),a}},setGaussianConvolution:function(t,a,o){var i=e(".blurClass_"+(o=void 0!==o?o:0),t);this.set(i,{stdDeviation:a})},setTransformPosition:function(t,a,o){var i=e(".shadowPosition_"+(o=o||0),t);this.set(i,{dx:a.x,dy:a.y})},setShadowColor:function(t,a,o,i){var r=e(".shadowColor_"+(i=i||0),t),s=this.getColorMatrixValue(a,o);this.set(r,s)},getColorMatrixValue:function(e,t){var a=e.rgb;if(void 0!==e.colorModelRep&&e.colorModelRep===ShapeConstants.ColorModelRepresentation.HSB){e.colorModelRep.toLowerCase();a=VectorUtil.convertHSBFloatToRGB(e.hsb)}var o=t;return{values:"0 0 0 0 "+Math.round(a[0]/255*10)/10+" 0 0 0 0 "+Math.round(a[1]/255*10)/10+" 0 0 0 0 "+Math.round(a[2]/255*10)/10+" 0 0 0 "+o+" 0"}},shadowFilter:{create:function(e,t,a,o,i,r){void 0===o&&(o=0);var s=this.createMergeNode(a);return this[t](e,a,s,o,i,r)},inner:function(e,t,a,o,i,r){var s,n,d=Shape.creator;e.shadowFromSourceAlpha?(n="alphaOut_"+o,s=d.createElement(t,"feColorMatrix"),d.set(s,{in:"SourceAlpha",result:n,type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 255 0",class:"shadow_"+o})):n="SourceGraphic";var p=d.createElement(t,"feComposite");d.set(p,{in2:n,operator:"arithmetic",k2:"-1",k3:"1",class:"compositeClass_"+o+" shadow_"+o});var l=d.createElement(t,"feColorMatrix");d.set(l,{result:"finalOut_"+o,type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0",class:"shadowColor_"+o+" endClass_"+o+" shadow_"+o,"color-interpolation-filters":"sRGB"}),d.shadowFilter.addNodes(t,a,o,s,l,p,r);return i||this.createInnerfeMergeNode(a,o),l},createInnerfeMergeNode:function(t,a){var o=SVGCreator,i=o.createElement(t,"feMergeNode");o.set(i,{in:"finalOut_"+a,class:"inner shadow_"+a});for(var r=e(t).find(".sourceGraphicNode"),s=r.nextAll(),n=s.length-1;n>=0;n--){var d=s[n];if(d.getAttribute("in").split("_")[1]<a){r=e(d);break}}r.after(i)},outer:function(e,t,a,o,i,r){var s,n,d=Shape.creator;e.shadowFromSourceAlpha&&(n="alphaOut_"+o,s=d.createElement(t,"feColorMatrix"),d.set(s,{in:"SourceAlpha",result:n,type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 255 0",class:"shadow_"+o}));var p=d.createElement(t,"feColorMatrix");d.set(p,{result:"finalOut_"+o,type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0",class:"shadowColor_"+o+" endClass_"+o+" shadow_"+o,"color-interpolation-filters":"sRGB"});var l;return e.shadowFromSourceAlpha&&(l=d.createElement(t,"feComposite"),d.set(l,{in2:n,operator:"out",class:"shadow_"+o})),d.shadowFilter.addNodes(t,a,o,s,p,l,r),i||this.createOuterfeMergeNode(a,o),p},createOuterfeMergeNode:function(t,a){var o=SVGCreator,i=o.createElement(t,"feMergeNode");o.set(i,{in:"finalOut_"+a,class:"outer shadow_"+a});for(var r=e(t).find(".sourceGraphicNode"),s=r.prevAll(),n=s.length,d=0;d<n;d++){var p=s[d];if(p.getAttribute("in").split("_")[1]>a){r=e(p);break}}r.before(i)},createMergeNode:function(t){var a=Shape.creator,o=t.find("feMerge");if(!o.length){o=a.createElement(t,"feMerge"),t.append(o);var i=a.createElement(o,"feMergeNode");a.set(i,{in:"SourceGraphic",class:"sourceGraphicNode"}),e(o).append(i)}return o},addNodes:function(e,t,a,o,i,r,s){var n=Shape.creator,d=n.createElement(e,"feOffset");n.set(d,{result:"offOut_"+a,dx:"0",dy:"0",class:"shadowPosition_"+a+" shadow_"+a});var p=n.createElement(e,"feGaussianBlur");n.set(p,{stdDeviation:"0",class:"blurClass_"+a+" shadow_"+a});var l=[o,d,p,r,i];n.shadowFilter.appendNodes(e,t,a,l,s)},appendNodes:function(e,t,a,o,i){var r=Shape.creator;if(0===a)r.resetShadowFilterIndex(e,a,1),e.prepend(o);else{var s=i||e.find(".endClass_"+(a-1));s.length?(r.resetShadowFilterIndex(e,a,1),s.after(o)):t.before(o)}}},deleteShadowFilters:function(t,a){a=a||0;var o=SVGCreator,i=t.data(Shape.shadowFilterId),r=e("#filter_"+i,t);r.find(".shadow_"+a).remove(),o.resetShadowFilterIndex(r,a+1,-1)},resetShadowFilterIndex:function(e,t,a){var o=e.find(".shadow_"+t)[0];this.updateFilterNumberFrom(o,t,a);var i=e.find("feMerge").children()[0];this.updateFilterNumberFrom(i,t,a)},updateFilterNumberFrom:function(t,a,o){for(t=e(t);t.length;){this.updateFilterIndex(t,"in","_",a,o),this.updateFilterIndex(t,"in2","_",a,o),this.updateFilterIndex(t,"result","_",a,o),this.updateFilterIndex(t,"class","_",a,o),t=t.next()}},updateFilterIndex:function(e,t,a,o,i){var r=Shape.creator.get(e,t);if(r){for(var s=[],n=r.split(" "),d=0;d<n.length;d++){var p=n[d].split(a);if(void 0!==p[1]){var l=parseInt(p[1]);l>=o&&(p[1]=l+1*i,s.push(p.join(a)))}}if("feMergeNode"!==e[0].nodeName||"outer"!==n[0]&&"inner"!==n[0]||0!=s.length&&s.unshift(n[0]),s.length){var h=s.join(" "),c={};c[t]=h,Shape.creator.set(e,c)}}},createBlurElement:function(t,a){var o=e("#filter_"+a,t[0]),i=this.createElement(o,"feGaussianBlur");return this.set(i,{class:"shadowblurfilter",id:"feBlur_"+a,in:"SourceGraphic"}),e(o).append(i),i},createHighlightFilter:function(e){var t=Shape.creator.createFilterElement(e,Shape.highlightFilter,{width:"10000%",height:"10000%"});Shape.creator.set(t,{id:"filter_"+e.data(Shape.highlightFilter),x:"-5000%",y:"-5000%"}),this._createFilterElement(t,"feFlood",{result:"flood","flood-color":"#fd9538","flood-opacity":"1"}),this._createFilterElement(t,"feComposite",{in:"flood",result:"mask",in2:"SourceGraphic",operator:"in"}),this._createFilterElement(t,"feMorphology",{in:"mask",result:"dilated",operator:"dilate",radius:"2"}),this._createFilterElement(t,"feGaussianBlur",{in:"dilated",result:"blurred",stdDeviation:"5"});var a=this._createFilterElement(t,"feMerge");return this._createFilterElement(t,"feMergeNode",{in:"blurred"},a),this._createFilterElement(t,"feMergeNode",{in:"SourceGraphic"},a),t},_createFilterElement:function(t,a,o,i){var r=this.createElement(t,a);return this.set(r,o),i?e(i).append(r):e(t).append(r),r},createImageFilterElement:function(t){var a=t.data(Shape.imageFilterId),o=e("#filter_"+a,t[0]);this._createFilterElement(o,"feColorMatrix",{in:"SourceGraphic",class:"imageRecolorIn",result:"gray",type:"matrix","color-interpolation-filters":"sRGB",values:"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 1 0"}),this._createFilterElement(o,"feColorMatrix",{in:"gray",class:"imageRecolorOut",result:"result_recolor",type:"matrix","color-interpolation-filters":"sRGB",values:"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 1 0"})},createFilter_Bilevel:function(t){var a=t.data(Shape.imageFilterId),o=e("#filter_"+a,t[0]);this.createElement(o,"feColorMatrix");this._createFilterElement(o,"feColorMatrix",{in:"SourceGraphic",class:"bilevelIn",result:"bright",type:"matrix",values:"0.299 0.587 0.114 0 0 0.299 0.587 0.114 0 0 0.299 0.587 0.114 0 0 0 0 0 1 0 "});var i=this._createFilterElement(o,"feComponentTransfer",{in:"bright",class:"imageRecolorOut","color-interpolation-filters":"sRGB",result:"result_recolor"});this._createFilterElement(o,"feFuncR",{class:"bilevelFunction",type:"discrete"},i),this._createFilterElement(o,"feFuncG",{class:"bilevelFunction",type:"discrete"},i),this._createFilterElement(o,"feFuncB",{class:"bilevelFunction",type:"discrete"},i)},createFilter_brightness:function(t,a,o){var i=e(t).find("#"+o+"lum");return e(i).remove(),this._createFilterElement(t,"feColorMatrix",{id:o+"lum",class:"brightnessFilter",result:"brightnessOut",type:"matrix","color-interpolation-filters":"sRGB",values:"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 1 0"})},setLuminance:function(e){if(1===e)str={values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 1 0"};else if(e<0){a=1+e;str={values:a+" 0 0 0 0  0 "+a+" 0 0 0  0 0 "+a+" 0 0  0 0 0 1 0"}}else{var t=100*e,a=1.81739*Math.pow(10,-21)*Math.pow(t,13)-1.08005*Math.pow(10,-18)*Math.pow(t,12)+2.89312*Math.pow(10,-16)*Math.pow(t,11)-4.61016*Math.pow(10,-14)*Math.pow(t,10)+4.85753*Math.pow(10,-12)*Math.pow(t,9)-3.55736*Math.pow(10,-10)*Math.pow(t,8)+1.85191*Math.pow(10,-8)*Math.pow(t,7)-6.88383*Math.pow(10,-7)*Math.pow(t,6)+180646e-10*Math.pow(t,5)-324773e-9*Math.pow(t,4)+.0037737*Math.pow(t,3)-.0250879*Math.pow(t,2)+.0820697*t+1;str={values:a+" 0 0 0 0  0 "+a+" 0 0 0  0 0 "+a+" 0 0  0 0 0 1 0"}}return str},createFilter_hue:function(t,a,o){var i=e(t).find("#"+o+"hue");return e(i).remove(),this._createFilterElement(t,"feColorMatrix",{id:o+"hue",class:"hueFilter",result:"hueOut",type:"hueRotate",values:0})},createFilter_saturate:function(t,a,o){var i=e(t).find("#"+o+"sat");return e(i).remove(),this._createFilterElement(t,"feColorMatrix",{id:o+"sat",class:"saturateFilter",result:"saturateOut",type:"saturate",values:1})},createFilter_contrast:function(e,t){var a=this._createFilterElement(e,"feComponentTransfer",{in:t,"color-interpolation-filters":"sRGB",result:"contrastOut"});this._createFilterElement(e,"feFuncR",{class:"colorFunction",type:"table"},a),this._createFilterElement(e,"feFuncG",{class:"colorFunction",type:"table"},a),this._createFilterElement(e,"feFuncB",{class:"colorFunction",type:"table"},a)},removeFilterEffects:function(t){e(t).empty()},_removeFilter:function(t,a,o){var i=a.data(o);if(void 0!=i){for(var r=e("#filter_"+i,a[0]),s=0;s<t.length;s++){var n=e('[filter="url(#filter_'+i+')"]',t[s]);for(j=0;j<n.length;j++)e(n[j]).removeAttr("filter")}r.remove()}},removeShadowFilter:function(t){var a=e(t);this._removeFilter(a,t,Shape.shadowFilterId),t.removeData("shadowType0"),t.removeData(Shape.shadowFilterId)},removeImageFilter:function(t){var a=e(t);this._removeFilter(a,t,Shape.imageFilterId),t.data("imageFilterCreated",!1)},setBlurDeviation:function(e,t){this.set(e,{stdDeviation:t})},removeBlurFilter:function(t){var a=e(t);this._removeFilter(a,t,Shape.blurFilterId)},setFilterWithUserAgent:function(e,t){},setFilter:function(t,a){if(t.length){var o=e(t).find(".path").not(".selector");e.each(o,function(e,t){Shape.creator.set(t,{filter:"url(#filter_"+a+")"})})}}};e.extend(!0,SVGCreator,t)}(jQuery);var SVGFill;SVGFill={solid:{rgb:function(e,t,a,o,i,r,s,n){void 0!==n.colorModelRep&&n.colorModelRep===ShapeConstants.ColorModelRepresentation.HSB||(SVGCreator.updateFillId(i,a),SVGCreator.set(a,{fill:t}))},hsb:function(e,t,a,o,i){var r={hsb:t,colorModelRep:ShapeConstants.ColorModelRepresentation.HSB},s=VectorUtil.getRGBString(r);SVGCreator.set(a,{fill:s})},tweaks:function(e,t,a,o){var i={"fill-opacity":1};t.alpha||(t.alpha=0),i["fill-opacity"]=1-t.alpha,SVGCreator.set(a,i)}},none:function(e,t,a,o){SVGCreator.updateFillId(o,e),SVGCreator.set(e,{fill:"none"})},transparent:function(e,t,a,o){SVGCreator.updateFillId(o,e),SVGCreator.set(e,{fill:"transparent"})},blend:function(e,t){var a=t.blend;if(a){var o="mix-blend-mode :"+Shape.props.fill.blend.map[a];SVGCreator.set(e,{style:o})}},rule:function(e,t){SVGCreator.set(e,{"fill-rule":Shape.props.fill.map[t.rule]})},hidden:function(e,t){t.hidden?$(e).hide():$(e).show()}};var SVGImage;!function(e){SVGImage={set:function(t,a,o){var i=o&&o.groupId?o.groupId:Shape.shapeId,r=e("#"+i,a),s=t.value.url,n=t.value.type===ShapeConstants.PictureType.USERDEFINED,d=t.value.id,p=t.props,l=SVGImage.getPictureTransform(t,a),h=e(r).children("path"),c=SVGFill.pict.image(t,a,h,s,p,r,l,void 0,n,d);return t.value.dim?a.data().origImageDim=t.value.dim:VectorUtil.getImageDim(s,void 0,{box:a}),c},alpha:function(t,a,o,i){var r=i&&i.alpha?i.alpha:t.pictureProps&&t.pictureProps.alpha?t.pictureProps.alpha:0,s=o&&o.groupId?o.groupId:Shape.shapeId,n=e("#"+s,a);e.each(n,function(t,a){var o=e(a).find("image");e.each(o,function(e,t){SVGCreator.set(t,{opacity:1-r})})})},setAlpha:function(e,t,a,o){SVGCreator.set(o,{"fill-opacity":1-t})},crop:function(t,a,o,i){var r=t.props;if(r&&r.geom&&(r.geom.type===ShapeConstants.ShapeGeometryType.CUSTOM||r.geom.type===ShapeConstants.ShapeGeometryType.PRESET&&r.geom.preset.type!==ShapeConstants.PresetShapeGeometry.RECT)||Shape.isSafari&&t.type==ShapeConstants.ShapeNodeType.PICTURE&&!e.isEmptyObject(t.pictureProps)&&!t.crop)t.crop=e.extend(!0,{left:0,top:0,bottom:0,right:0},t.crop);else if(e.isEmptyObject(t.crop))return void this.removeClip(a);var s=SVGImage.getPictureTransform(t,a),n=e(a).find("#shapegroup").find("path").clone(),d=Shape.creator.clip.create(a,a,n,"cropping"),p=e(d).attr("id");i||(i=e("#image",a)),i.length&&(Shape.isEdge&&i.css("pointer-events","none"),i.attr("clip-path","url(#"+p+")"),e.each(i,function(t,a){SVGFill.pict.transform(e(a),void 0,s)}))},removeClip:function(t){var a=e(t).data(Shape.creator.clipId);a&&(e(t).find("#"+a).remove(),e(t).removeData(Shape.creator.clipId),e("#image",t).removeAttr("clip-path"))},getPictureTransform:function(t,a){var o=t.props.transform.dim,i={pos:{left:0,top:0},dim:o};if(t.crop&&!e.isEmptyObject(t.crop)){var r=e.extend(!0,{left:0,top:0,bottom:0,right:0},t.crop),s=o.width,n=o.height,d=Math.round(s/(1-(r.left+r.right))),p=Math.round(n/(1-(r.top+r.bottom)));i={pos:{left:-r.left*d,top:-r.top*p},dim:{width:d,height:p}}}return i},getCanvasElement:function(){var t=e("<CANVAS>");return t.attr({id:"myCanvas_"+Math.uuid()}),t.css({position:"absolute",left:"-3000px",top:"-3000px",width:"300px",height:"150px"}),e(document.body).append(t),t[0]},removeCanvasElement:function(t){e(t).remove()},getUrl:function(e){return e.toDataURL()},setImage:function(e,t,a){return t.putImageData(e,0,0,0,0,e.width,e.height),SVGImage.getUrl(a)},getImageURL:function(e,t,a,o,i,r,s){this.pictureProps({props:a,value:{url:t}},i,void 0,e,o,void 0,r,s)},isEmptyPictureProps:function(t){if((t=e.extend(!0,{},t))&&void 0!==t.alpha&&delete t.alpha,!t||e.isEmptyObject(t))return!0;if(!e.isEmptyObject(t)){if(t.colorMode&&"NONE"!==t.colorMode.mode)return!1;if(t.luminance&&0===t.luminance.brightness&&0===t.luminance.contrast)return!0}return!1},pictureProps:function(e,t,a,o,i,r,s,n){var d=a&&a.groupId?a.groupId:Shape.shapeId;if(o=o||e.pictureProps,SVGImage.alpha(e,t,a,o),SVGImage.isEmptyPictureProps(o))Shape.creator.removeImageFilter(t);else{var p=e.imageData?e.imageData.url:e.value.serverUrl?e.value.serverUrl:e.value.url,l={data:e,box:t,pictureProps:o,callback:i,groupId:d,container:r,object:a,imageId:s,isUserDefinedImage:n};o&&o.colorChange?VectorUtil.getImageDim(p,this._pictureProps,l):o&&this._pictureProps(void 0,l)}},_pictureProps:function(t,a,o){var i=SVGImage,r=i.getCanvasElement(),s=a.data,n=a.pictureProps,d=i.modifyProps(o,r,s,n,a);if(s.imageData&&delete s.imageData,a.box){d&&(SVGImage.updateImageData(s,a.box,{url:d},a.groupId),e(document).trigger("SVG_pictureprops_modified",s));var p=s.props.effects;p&&(p.shadow&&Shape.props.effects.shadow.set(s,a.container,a.box),p.shadows&&Shape.props.effects.shadows.set(s,a.container,a.box))}else d&&a.callback.fn.call(Shape.fillElement,d,a.callback.ele)},modifyProps:function(t,a,o,i,r){var s,n=i||o.pictureProps,d=n.colorMode,p=r.box;if(t&&(o.colorChange||n.colorChange)){var l=o.props.transform.dim,h=l.width,c=l.height,f=this;a.width=h,a.height=c,a.width=0==a.width?1:a.width,a.height=0==a.height?1:a.height;var u=a.getContext("2d");u.drawImage(t,0,0,h,c);var m,g=u.getImageData(0,0,a.width,a.height),S=g.data,x=[];if(o.colorChange){var v=o.pictureProps.colorChange.posx,y=o.pictureProps.colorChange.posy;m=u.getImageData(v,y,1,1)}for(var E=0,C=S.length;E<C;E+=4){var O=S[E],b=S[E+1],T=S[E+2];if(n.colorChange){if(o.colorChange)w=m.data;else var w=n.colorChange.from.rgb;if(O>=w[0]-16&&O<=w[0]+16&&b>=w[1]-16&&b<=w[1]+16&&T>=w[2]-16&&T<=w[2]+16){var D=f.colorChange.call(f,S,E,n,x);S[E]=D[0],S[E+1]=D[1],S[E+2]=D[2],S[E+3]=D[3]}}}if(s=this.setImage(g,u,a),o.colorChange){for(var P=[],L=w.length,I=0;I<L-1;I++)P[I]=w[I];p.data("shape_rendered")&&p.trigger("modifyPictureData",{boxData:o,props:n,data:P})}var A={url:s};o.storeCanvas&&(o.url=A)}this.removeCanvasElement(a);var N=e();if(d)if(d.mode===ShapeConstants.Mode.NONE)Shape.creator.removeImageFilter(p);else{var R=d.mode.toLowerCase();if(N=Shape.imageElement._createImageFilter(p,o,N),d.mode==ShapeConstants.Mode.BILEVEL){Shape.creator.createFilter_Bilevel(p);var B=.5;d[R]&&(B=d[R]),Shape.imageElement.setBilevel(N,B)}else if(Shape.creator.createImageFilterElement(p),d.mode==ShapeConstants.Mode.DUOTONE){var _=d[R],M=_[0].rgb,U=_[1].rgb;Shape.imageElement.setDuotone(N,M,U)}else if(d.mode==ShapeConstants.Mode.GRAYSCALE)Shape.imageElement.setGrayScale(N);else if(d.mode==ShapeConstants.Mode.SEPIA){var M=[0,0,0],k=[217,195,165],G={hsl:{saturation:[{mode:"MODIFY",value:1.8}]},tint:.5},U=zoho.color.tweak(k,G);Shape.imageElement.setDuotone(N,M,U)}}var F=n.luminance;if(F&&(F.brightness||F.contrast)){N=Shape.imageElement._createImageFilter(p,o,N);var W=F.brightness?F.brightness:0,H=F.contrast?F.contrast:0;Shape.imageElement.setLuminance(N,W,H,p)}return s},_createImageFilter:function(t,a,o){var i,r,s=null!==t.data("imageFilterCreated")&&t.data("imageFilterCreated"),n=(Shape.creator.getDefinitions(t),e("#image",t));if(s){i=t.data(Shape.imageFilterId),r=e("#filter_"+i,t[0]),o.length||Shape.creator.removeFilterEffects(r);for(p=0;p<n.length;p++)e(n[p]).attr("filter","url(#filter_"+t.data(Shape.imageFilterId)+")")}else{var d=Math.uuid();t.data(Shape.imageFilterId,d),t.data("imageFilterCreated",!0),a.isStaticShape?Shape.creator.createFilterElement(t,Shape.imageFilterId,{width:"120%",height:"120%"}):Shape.creator.createFilterElement(t,Shape.imageFilterId);for(var p=0;p<n.length;p++)e(n[p]).attr("filter","url(#filter_"+d+")");r=e("#filter_"+(i=d),t[0])}return r},setBilevel:function(t,a){var o=e(".bilevelFunction",t),i={tableValues:"0 0 1 1"};.75===a?i={tableValues:"0 0 0 1"}:.25===a&&(i={tableValues:"0 1 1 1"}),e.each(o,function(t,a){Shape.creator.set(e(a),i)})},setGrayScale:function(t){var a=e(".imageRecolorIn",t),o={values:"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 1 0"};Shape.creator.set(a,o);var i=e(".imageRecolorOut",t),r={values:"0.33 0.33 0.33 0 0  0.33 0.33 0.33 0 0  0.33 0.33 0.33 0 0  0 0 0 1 0"};Shape.creator.set(i,r)},setLuminance:function(t,a,o,i){var r;r=e(".imageRecolorOut",t).length?"result_recolor":"SourceGraphic";var s;if(0!==a){Shape.creator.createFilter_brightness(t,r),r="brightnessOut";var n;if(s=e(".brightnessFilter",t),1===a)n={values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 1 0"};else if(a<0)n={values:(u=1+a)+" 0 0 0 0  0 "+u+" 0 0 0  0 0 "+u+" 0 0  0 0 0 1 0"};else{var d=100*a;n={values:(u=1.81739*Math.pow(10,-21)*Math.pow(d,13)-1.08005*Math.pow(10,-18)*Math.pow(d,12)+2.89312*Math.pow(10,-16)*Math.pow(d,11)-4.61016*Math.pow(10,-14)*Math.pow(d,10)+4.85753*Math.pow(10,-12)*Math.pow(d,9)-3.55736*Math.pow(10,-10)*Math.pow(d,8)+1.85191*Math.pow(10,-8)*Math.pow(d,7)-6.88383*Math.pow(10,-7)*Math.pow(d,6)+180646e-10*Math.pow(d,5)-324773e-9*Math.pow(d,4)+.0037737*Math.pow(d,3)-.0250879*Math.pow(d,2)+.0820697*d+1)+" 0 0 0 0  0 "+u+" 0 0 0  0 0 "+u+" 0 0  0 0 0 1 0"}}Shape.creator.set(s,n)}if(0!==o){Shape.creator.createFilter_contrast(t,r);var p;if(o>=0){for(var l=.01/(1-o),h=100-(m=.5*o*100),c=new Array,f=0;f<=100;f+=1)if(f<=m)c.push(0);else if(f>=h)c.push(1);else{var u=((f-m)*l).toFixed(2);c.push(u)}p=c.join(" ")}else{var m=.5*(o*=-1);(c=new Array).push(m),c.push(.5),c.push(1-m),p=c.join(" ")}var g=e(".colorFunction",t);e.each(g,function(e,t){t.setAttribute("tableValues",p)})}},setDuotone:function(t,a,o,i){var r=e(".imageRecolorIn",t),s={values:"0.33 0.33 0.33 0 0  0.33 0.33 0.33 0 0  0.33 0.33 0.33 0 0  0 0 0 1 0"};Shape.creator.set(r,s);var n=e(".imageRecolorOut",t),d=Shape.imageElement.getDuotone(a,o,i);Shape.creator.set(n,d)},getDuotone:function(e,t,a){a=a||1;var o=Math.round(100*(t[0]/255-e[0]/255))/100,i=Math.round(100*(t[1]/255-e[1]/255))/100,r=Math.round(100*(t[2]/255-e[2]/255))/100;return{values:o+" 0 0 0 "+Math.round(e[0]/255*100)/100+"  0 "+i+" 0 0 "+Math.round(e[1]/255*100)/100+"  0 0 "+r+" 0 "+Math.round(e[2]/255*100)/100+"  0 0 0 "+a+" 0"}},none:function(e,t){return[e[t],e[t+1],e[t+2]]},colorChange:function(e,t,a){return e[t+3]=0,[e[t],e[t+1],e[t+2],e[t+3]]},fill:function(t,a,o,i){var r=o&&o.url?o.url:t.value.url;t.storeCanvas&&(r=t.url?t.url.url:r);var s=e("#"+(i=i||"shapegroup"),a);e.each(s,function(o,i){var s=e("path",i);e.each(s,function(o,s){s=e(s),SVGFill.pict.image(t,a,s,r,t.props,i)})})},updateImageData:function(t,a,o,i){var r=o&&o.url?o.url:t.value.url;t.storeCanvas&&(r=t.url?t.url.url:r);var s;if(t.type===ShapeConstants.ShapeNodeType.PICTURE)s=e(a).find("#shapegroup").find("image");else{var n=e(".pattern",a);s=e("#image",n).not(".placeholderIconImage")}s.length&&e.each(s,function(e,t){SVGFill.pict.href(t,r,!0)})}}}(jQuery);var SVGStroke;!function(e){SVGStroke={type:function(t,a,o,i){var r=e.Stroke.type[0][t].split(","),s="";return s=r=r.map(function(e){var t=e*i;return t=VectorUtil.getViewBoxDimensions(t)}),t==ShapeConstants.StrokeType.SOLID&&(s="none"),{"stroke-dasharray":s}},captype:function(t){var a=e.Stroke.captype[t];return"FLAT"==a&&(a="BUTT"),{"stroke-linecap":a}},jointype:function(e){return{"stroke-linejoin":e}},nonscale:function(e,t,a,o,i,r,s){Shape.creator.set(t,{"vector-effect":"non-scaling-stroke"})},width:function(e){return{"stroke-width":e=VectorUtil.getViewBoxDimensions(e)}},position:function(t,a,o,i,r,s,n,d){if(!d){var p=r.props.strokes?r.props.strokes[n]:r.props.stroke,l=p.position?p.position:ShapeConstants.StrokePosition.CENTER,h=e(a).data(Shape.creator.clipId);if(l===ShapeConstants.StrokePosition.CENTER)void 0!==h&&Shape.creator.clip.remove(s,a,h);else{var c=a.getAttribute("d"),f=i||p.width;if(l===ShapeConstants.StrokePosition.OUTSIDE){var u=r.props.transform.dim,m=u.width,g=u.height,S=Shape.pathGenerator.getPath("RECT",m+7*f,g+7*f,[0],void 0,-4*f,-4*f);S.path[0]=S.path[0].replace("z",""),c=S.path[0]+c}var x;h?(x=e(s).find("#"+h).find("path")[0],Shape.creator.setPath(x,c)):(x=Shape.creator.clip.createClipPath(s,c),h=Shape.creator.clip.create(e(s),a,[x],"stroke").id,a.style.clipPath="url(#"+h+")"),Shape.creator.set(a,{"stroke-width":2*f})}}},solid:{rgb:function(e,t,a,o,i,r,s,n){if(void 0===n.colorModelRep||n.colorModelRep!==ShapeConstants.ColorModelRepresentation.HSB){var d={stroke:t};Shape.creator.set(e,d),r&&r.type==ShapeConstants.ShapeNodeType.CONNECTOR&&this.marker.colour(e,d,i,r,s)}},hsb:function(e,t,a,o,i,r,s){var n={hsb:t,colorModelRep:ShapeConstants.ColorModelRepresentation.HSB},d={stroke:VectorUtil.getRGBString(n)};Shape.creator.set(e,d),r&&r.type==ShapeConstants.ShapeNodeType.CONNECTOR&&this.marker.colour(e,d,i,r,s)},tweaks:function(e,t,a,o,i,r){var s={"stroke-opacity":1};t.alpha&&(s["stroke-opacity"]=1-t.alpha),r&&r.type==ShapeConstants.ShapeNodeType.CONNECTOR?Shape.creator.set(o,{opacity:s["stroke-opacity"]}):Shape.creator.set(o,s)}},none:function(e,t,a,o){var i={stroke:"none"};Shape.creator.set(e,i),o&&o.type==ShapeConstants.ShapeNodeType.CONNECTOR&&this.marker.colour(e,i,a,o)},headend:function(e,t,a,o,i,r){var s=Shape.creator.get(t,"class");if(!s||-1===s.indexOf("selector")){var n,d,p,l=o.props.geom.type;"CUSTOM"==l?(d=o.props.geom.custom,n="CUSTOM"):p=o.props.geom.preset.modifiers;var h=o.props.geom[l.toLowerCase()].type,c=o.props,f=c.strokes?c.strokes[r]:c.stroke,u=f.fill.solid.color,m=VectorUtil.getRGBString(u),g=VectorUtil.getViewBoxDimensions(f.width),S={dim:[c.transform.dim.width,c.transform.dim.height],captype:f.captype,tailend:f.tailend,headend:e,path:t,color:m,modifier:p,shapeType:h,strokeWidth:g,custom:d,geom:n};this.marker.changeMarker("headend",e,t,S,i)}},tailend:function(e,t,a,o,i,r){var s=Shape.creator.get(t,"class");if(!s||-1===s.indexOf("selector")){var n,d,p,l=o.props.geom.type;"CUSTOM"==l?(d=o.props.geom.custom,n="CUSTOM"):p=o.props.geom.preset.modifiers;var h=o.props.geom[l.toLowerCase()].type,c=o.props,f=c.strokes?c.strokes[r]:c.stroke,u=f.fill.solid.color,m=VectorUtil.getRGBString(u),g=VectorUtil.getViewBoxDimensions(f.width),S={dim:[c.transform.dim.width,c.transform.dim.height],captype:f.captype,tailend:e,headend:f.headend,path:t,color:m,modifier:p,shapeType:h,strokeWidth:g,custom:d,geom:n};this.marker.changeMarker("tailend",e,t,S,i)}},dashPattern:function(e,t,a,o,i,r,s){if(e&&e.length)return{"stroke-dasharray":e}},marker:{tailend:{id:"marker-end"},headend:{id:"marker-start"},M:{dividend:2,name:"M"},L:{dividend:2,name:"L"},C:{dividend:6,name:"C"},colour:function(e,t,a,o,i){var r=Shape.creator.get(e,"class");if(!r||-1===r.indexOf("selector")){var s=Util.extend(!0,{},t),n={headend:e.getDataset(Shape.creator.markerId+"_headend"),tailend:e.getDataset(Shape.creator.markerId+"_tailend")},d=o.props.strokes?o.props.strokes[i]:o.props.stroke;if(n)for(var p in n){var l=n[p];if(d[p]&l){var h=DOMUtil.select("#"+l,a);e=DOMUtil.selectAll("path",h);var c=d[p].type;c!=ShapeConstants.MarkerType.OPEN&&(t={fill:s.stroke}),c==ShapeConstants.MarkerType.OVAL&&(e=DOMUtil.selectAll("ellipse",h)),e.length&&Shape.creator.set(e,t)}}}},createMarkerPath:function(e){var t=Shape.creator.createElement(e,"path");return Shape.creator.set(Util.getJQueryElement(t),{id:"path",stroke:"none"}),e.appendChild(t),t},changeMarker:function(t,a,o,i,r){var s=a.type,n=Shape.creator.markerElement(o,t,r);if(n){if(s!=ShapeConstants.MarkerType.NONE){var d=e.Stroke.marker[0][a.width],p=e.Stroke.marker[0][a.height],l=s!=ShapeConstants.MarkerType.OPEN?0:this.getMiterLength(p,d),h=DOMUtil.selectAll("path",n);if(s!=ShapeConstants.MarkerType.OVAL){(u=DOMUtil.selectAll("ellipse",n)).length&&u.remove(),0==h.length&&(h=this.createMarkerPath(n));var c=Shape.pathGenerator.getMarkerPath(t,s,p,d,l),f=s!=ShapeConstants.MarkerType.OPEN?{d:c,fill:i.color,stroke:"none"}:{d:c,stroke:i.color,fill:"none","stroke-linecap":"round","stroke-miterlimit":50};Shape.creator.set(Util.getJQueryElement(h),f)}else{var u=Shape.creator.createElement(n,"ellipse");n.appendChild(u),h.remove(),Shape.creator.set(u,{cx:.5*p,cy:.5*d,rx:.5*(p-2),ry:.5*(d-2),fill:i.color,stroke:"none"})}}else n.remove();this.changeLinePath(o,i)}},getMiterLength:function(e,t){var a=Math.atan2(.5*(t-2),e-2);return 1/(2*Math.sin(a))},changeLinePath:function(t,a){var o=a.dim,i={};if("CUSTOM"!=a.geom)i=Shape.pathGenerator.getPathPoints(a.shapeType,a.modifier,o[0],o[1]);else{i.path=[];var r=Shape.pathGenerator.getCustomPathPoints(a.custom,o[0],o[1]);val1=r[0],i.path.push(val1)}var s={m1:"headend",m2:"tailend"},n=this;for(var d in s){var p=s[d],l=a[p]?a[p].type:ShapeConstants.MarkerType.NONE,h=Shape.pathGenerator.convertToPath(i.path);if(l==ShapeConstants.MarkerType.NONE)Shape.creator.set(t,{d:h}),t.removeAttribute(n[p].id),t.removeDataset(Shape.creator.markerId+"_"+p);else{var c=e.Stroke.marker[0][a[p].width],f=e.Stroke.marker[0][a[p].height],u=a.strokeWidth;n.getChangedPoints(f,c,i,u,p,t,l,a)}}},lineStart:function(e,t,a,o){for(var i=0;i<=e;i++)for(var r=1;r<a[i].length&&(r!=t||i!=e);r+=2)a[i][r]=o.x,a[i][r+1]=o.y;return a},lineEnd:function(e,t,a,o){for(var i=!1,r=a.length-1;r>=0;r--){for(var s=a[r].length-2;s>0;s-=2){if(s==t&&r==e){i=!0,a.length-1<2&&(a[r][s]=o.x,a[r][s+1]=o.y);break}a[r][s]=o.x,a[r][s+1]=o.y}if(i)break}return a},curveStart:function(e,t,a,o){return a[e][1]=o.x,a[e][2]=o.y,a[0][1]=o.x,a[0][2]=o.y,a},curveEnd:function(e,t,a,o){return a[e][a[e].length-2]=o.x,a[e][a[e].length-1]=o.y,a[e][a[e].length-4]=o.x,a[e][a[e].length-3]=o.y,a},changePath:function(e,t){var a=e.markEle,o=t.reduction,i=e.marker;if(a){var r,s,n,d,p=1==i,l=t.d,h=l.path[0],c=0,f=p?h.length-1:0,u=p?h[f][h[f].length-2]:h[f][1],m=p?h[f][h[f].length-1]:h[f][2];do{var g=this[h[f][0]].dividend,S=h[f].length,x=void 0!=s?s:p?h[f][S-2]:h[f][1],v=void 0!=n?n:p?h[f][S-1]:h[f][2],y=p?S-2:1;do{var E=h[f];if(s=E[y],n=E[y+1],"M"==E[0])g=this[h[f+1][0]].dividend;else if("L"==E[0]){if(p&&y-2<0&&h.length<3){P=h[f-1].length;s=p?h[f-1][P-2]:h[f+1][1],n=p?h[f-1][P-1]:h[f+1][2]}var C=zoho.math.length(x,v,s,n),O=Math.sqrt(Math.pow(o,2)-Math.pow(c,2));if((c+=C)>o){r=zoho.math.getPointAtDistance({start:{x:x,y:v},end:{x:s,y:n}},O),h=-1==i?this.lineStart(f,y,h,r):this.lineEnd(f,y,h,r);break}}else if("C"==E[0]){var b=p?E[y-4]:E[y],T=p?E[y-3]:E[y+1],w=p?E[y-2]:E[y+2],D=p?E[y-1]:E[y+3];if(s=p?E[y+1]:E[y+4],n=p?E[y]:E[y+5],p&&y-6<0){var P=h[f-1].length;s=h[f-1][P-2],n=h[f-1][P-1]}var L=p?1:0,I=p?zoho.math.bezierPoint(s,w,b,x,L):zoho.math.bezierPoint(x,b,w,s,L),A=p?zoho.math.bezierPoint(n,D,T,v,L):zoho.math.bezierPoint(v,T,D,n,L);do{var N=p?zoho.math.bezierPoint(s,w,b,x,L):zoho.math.bezierPoint(x,b,w,s,L),R=p?zoho.math.bezierPoint(n,D,T,v,L):zoho.math.bezierPoint(v,T,D,n,L);if((c+=C=zoho.math.length(I,A,N,R))>o){var B=c-o;r=zoho.math.getPointAtDistance({start:{x:N,y:R},end:{x:I,y:A}},B),h=-1==i?this.curveStart(f,y,h,r):this.curveEnd(f,y,h,r),L=.1;var _,M;p?(_=zoho.math.bezierPoint(r.x,r.x,E[y-4],E[y-2],L),M=zoho.math.bezierPoint(r.y,r.y,E[y-3],E[y-1],L)):(_=zoho.math.bezierPoint(r.x,r.x,E[y+2],E[y+4],L),M=zoho.math.bezierPoint(r.y,r.y,E[y+3],E[y+5],L)),d=Math.atan2(r.x-_,r.y-M);break}I=N,A=R,L-=.1*i;var U=p?L>0:L<1}while(U)}if(y-=g*i,x=s,v=n,r)break;var k=p?y>0:y<S}while(k);if(f-=1*i,r)break;var G=p?f>=0:f<h.length}while(G);if(c<=o&&(r={x:0,y:0}),void 0===d){var F=u-r.x,W=m-r.y;d=Math.atan2(F,W)}return d=-1*(zoho.math.toDegrees(d)-90),-1==i&&(d-=180),d<0&&(d=360+d),Shape.creator.set(a,{orient:d}),l}},getReducedValue:function(e,t,a,o,i,r,s){var n,d,p=.5*t;e=parseFloat(e)+s;var l=o.toLowerCase(),h=this[l].getX(r,a,e,s,i);return n=this[l].reduction(a,e,s,i),d={X:h,Y:p},{reduction:n,refernce:d}},block:{getX:function(e,t,a,o){return"tailend"==e?1.3:a-.3-2+1},reduction:function(e,t,a){return e*(t-2-.3)}},open:{getX:function(e,t,a,o){return"tailend"==e?a-(o+1):o+1},reduction:function(e,t,a){return e*a}},classic:{getX:function(e,t,a,o,i){return i!=ShapeConstants.CapType.FLAT?"tailend"==e?.5*a-.5:.5*a+.5:.5*a},reduction:function(e,t,a,o){if(o!=ShapeConstants.CapType.FLAT)i=e*(.5*(t-2)-.5);else var i=.5*e*(t-2);return i}},diamond:{getX:function(e,t,a,o){return"tailend"==e?.5*a-1:.5*a+1},reduction:function(e,t,a){return e}},oval:{getX:function(e,t,a,o){return"tailend"==e?.5*a-1:.5*a+1},reduction:function(e,t,a){return e}},getChangedPoints:function(e,t,a,o,i,r,s,n){var d={w:e,h:t,type:s},p={};p.d=a;var l=s!=ShapeConstants.MarkerType.OPEN?0:this.getMiterLength(e,t),h=this.getReducedValue(e,t,o,s,n.captype,i,l);p.reduction=h.reduction;var c=h.refernce;p.path=r;var f=Shape.creator.markerElement(r,i);f&&(Shape.creator.set(f,{refX:c.X,refY:c.Y,markerWidth:e+l,markerHeight:t}),d.markEle=f,d.marker="tailend"==i?1:-1,this.changePath(d,p));var u=Shape.pathGenerator.convertToPath(p.d.path);Shape.creator.set(r,{d:u})}}}}(jQuery),function(){var e={gradient:{stops:function(e,t,a,o){this.solid.tweaks.call(this,a,{alpha:0},a,o);for(var i=0;i<t.length;i++){var r=t[i],s=SVGCreator.getStopElement(e,i),n=r.color,d=VectorUtil.getRGBString(n);SVGCreator.set(s,{"stop-color":d,offset:r.position});var p=r.color.tweaks&&r.color.tweaks.alpha?r.color.tweaks.alpha:0;SVGCreator.set(s,{"stop-opacity":1-p})}var l=DOMUtil.selectAll("*",e);t.length<l.length&&SVGCreator.removeStops(e,t)},rotate:function(e,t,a,o,i,r,s){s=s||0;var n=this.gradient["_"+r];n&&n.rotate&&n.rotate(e,t,i,s)},linear:function(e,t,a,o,i,r,s){var n=i.transform.dim;if(i.fills&&i.fills[s].gradient){var d=i.fills[s].gradient.linear,p=d.start,l=d.end,h=n.width*p.left,c=n.height*p.top,f=n.width*l.left,u=n.height*l.top;SVGCreator.set(e,{x1:h,y1:c,x2:f,y2:u})}},_linear:{rotate:function(e,t,a,o){var i;if(!(a.fills&&a.fills[o].gradient&&(i=a.fills[o].gradient).linear)){a.fill&&a.fill.gradient&&(i=a.fill.gradient);var r=this.calculateGradientRotation(i,t,a,o);SVGCreator.set(e,{x1:r.x1,y1:r.y1,x2:r.x2,y2:r.y2,gradientTransform:"rotate("+r.rotate+","+r.cx1+","+r.cy1+")translate("+r.transh+" "+r.transv+") scale("+r.scaleh+" "+r.scalev+")rotate("+r.angle+","+r.cx+","+r.cy+")"})}},calculateGradientRotation(e,t,a,o){var i=a.transform.dim,r={left:0,right:0,top:0,bottom:0};e&&e.offset&&(r=e.offset),a.offset&&a.isFromReflection&&(r=a.offset);var s,n=VectorUtil.getViewBoxDimensions(i.width,i.height),d=n,p=(-1*(r.left+r.right)+1)*n[0],l=(-1*(r.top+r.bottom)+1)*n[1],h=r.left*n[0]*-1,c=r.top*n[1]*-1,f=.5*(n=[p,l])[0]-h,u=.5*n[1]-c,m=0,g=0,S=0,x=0,v=n[0],y=n[1];v>y?t>=0&&t<=45||t>315&&t<=360?(m=0,g=v,S=x=s=Math.abs(u/45*(t-360))):t>45&&t<=135?(m=0,g=0,S=-(s=Math.abs((f-u)/45*(t-90))),x=y+s,t-=90):t>135&&t<=225?(m=0,g=v,S=x=s=Math.abs(f/45*(t-180))):t>225&&t<=315&&(m=g=0,S=y+(s=Math.abs((f-u)/45*(t-270))),x=-s,t-=270):t>=0&&t<=45?(m=-(s=Math.abs(t*((f-u)/45))),g=v+s,S=x=0):t>315&&t<=360?(m=-(s=Math.abs((f-u)/45*(t-360))),g=v+s,S=x=0):90===t?(m=0,S=0,g=0,x=y,t=0):t>45&&t<=135?(m=v+(s=Math.abs(f/45*(t-90))),g=-s,S=0,x=0,t-=180):t>135&&t<=225?(m=-(s=Math.abs(f/45*(t-180))),g=v+s,S=x=0,t-=360):t>225&&t<=315&&(m=-(s=Math.abs((t-270)*(f-u)/45)),g=v+s,S=x=0),m-=h,S-=c,g-=h,x-=c;var E=r.rotate?r.rotate:0,C=.5*d[0],O=.5*d[1],b=a.transform.fliph,T=a.transform.flipv,w=1,D=1,P=0,L=0;return r.isGroupshape&&(r.fliph&&(b=!b),r.flipv&&(T=!T),(b&&!T||!b&&T)&&(E=-E)),w=r.isGroupshape&&b?-1:1,D=r.isGroupshape&&T?-1:1,P=r.isGroupshape&&b?d[0]:0,L=r.isGroupshape&&T?d[1]:0,a.offset&&a.isFromReflection&&(m=g=0,S=a.isText&&a.offset.top?a.offset.top:0,x=a.isText&&a.offset.top?i.height+a.offset.top:i.height,t=P=L=0,w=D=1),{x1:m,x2:g,y1:S,y2:x,rotate:E,cx1:C,cy1:O,cx:f,cy:u,transh:P,transv:L,scaleh:w,scalev:D,angle:t}}},angular:function(e,t,a,o,r,s,n,d,p){var l=Shape.outerBBox(p,d,!0),h=!1,c="userSpaceOnUse",f=!(!t.offset||!t.offset.isGroupshape)&&t.offset.isGroupshape,u={left:.5,top:.5},m={left:.5,top:.5},g=f?u:m,S=f?t.offset:void 0,x={dim:{},pos:{}};g.left=1-g.left,g.top=1-g.top;var v=0,y=0;if(v=g.left-.5,y=g.top-.5,"CUSTOM"!==r.geom.type)if("RECTANGULAR_CALLOUT"==r.geom.preset.type||"ROUNDED_RECTANGULAR_CALLOUT"==r.geom.preset.type||"OVAL_CALLOUT"==r.geom.preset.type||"CLOUD_CALLOUT"==r.geom.preset.type)h=!0;else if(void 0!=r.geom.preset&&void 0!=r.geom.preset.modifiers)for(var E=0;E<r.geom.preset.modifiers.length;E++)(r.geom.preset.modifiers[E]>.5||r.geom.preset.modifiers[E]<-.5)&&(h=!0);f&&(x.dim={width:-1*(S.left+S.right)*r.transform.dim.width+r.transform.dim.width,height:-1*(S.top+S.bottom)*r.transform.dim.height+r.transform.dim.height},x.pos={left:S.left*r.transform.dim.width*-1,top:S.top*r.transform.dim.height*-1});var C={};h?h&&(C={width:f?x.dim.width:Math.abs(l[1].x-l[0].x),height:f?x.dim.height:Math.abs(l[1].y-l[0].y)},c="objectBoundingBox"):C=f?x.dim:r.transform.dim;var O,b,T=2*Math.sqrt(Math.pow(C.width,2)+Math.pow(C.height,2));Shape.canvasArea[0].width=Shape.canvasArea[0].height=T,O=b=Shape.canvasArea[0].height/2;r&&r.transform&&Shape.getAngle(r.transform);var w=r.fill.gradient.rotate,D=r.fill.gradient.stops,P=new Array;for(D.sort(function(e,t){return e.position-t.position}),P.push(D[0]),P[0].position=0,i=0;i<D.length;i++)P.push(D[i]);P.push(D[D.length-1]),P[P.length-1].position=1;for(var L=new Array,I=62.5;I<125;I++)L.push({x:Math.floor(Shape.canvasArea[0].width),y:Math.floor(Shape.canvasArea[0].height*I/125)});for(I=125;I>0;I--)L.push({x:Math.floor(Shape.canvasArea[0].width*I/125),y:Math.floor(Shape.canvasArea[0].height)});for(I=125;I>=0;I--)L.push({x:0,y:Math.floor(Shape.canvasArea[0].height*I/125)});for(I=1;I<125;I++)L.push({x:Math.floor(Shape.canvasArea[0].width*I/125),y:0});for(I=0;I<125;I++)L.push({x:Math.floor(Shape.canvasArea[0].width),y:Math.floor(Shape.canvasArea[0].height*I/125)});var A=Shape.canvasArea[0].getContext("2d");A.translate(T/2,T/2),A.rotate((w+180)*(Math.PI/180)),A.translate(-T/2,-T/2);document.createElementNS(SVGCreator.SvgNamespace,"image");for(I=1;I<P.length-1;I++){P[I];var N=Math.ceil(500*P[I-1].position),R=Math.ceil(500*P[I].position),B=Math.ceil(500*P[I+1].position),_=255/Math.ceil(R-N),M=255/Math.ceil(B-R);U=255;for(k=R;k<B+1;k++)A.beginPath(),A.moveTo(.5*T+C.width*v,.5*T+C.height*y),A.lineTo(2*O-L[k].x,2*b-L[k].y),A.lineTo(2*O-L[k+1].x,2*b-L[k+1].y),A.closePath(),void 0!==P[I].color.tweaks&&void 0!==P[I].color.tweaks.alpha?(A.fillStyle="rgba("+P[I].color.rgb[0]+","+P[I].color.rgb[1]+","+P[I].color.rgb[2]+","+U/255*(1-P[I].color.tweaks.alpha)+")",A.shadowColor="rgba("+P[I].color.rgb[0]+","+P[I].color.rgb[1]+","+P[I].color.rgb[2]+","+U/255*(1-P[I].color.tweaks.alpha)+")"):(A.fillStyle="rgba("+P[I].color.rgb[0]+","+P[I].color.rgb[1]+","+P[I].color.rgb[2]+","+U/255+")",A.shadowColor="rgba("+P[I].color.rgb[0]+","+P[I].color.rgb[1]+","+P[I].color.rgb[2]+","+U/255+")"),A.fill(),A.translate(.4,.4),A.fill(),A.translate(-.8,-.8),A.fill(),A.translate(.4,.4),A.save(),A.restore(),U-=M;1;for(var U=0,k=R-1;k>N;k--)A.beginPath(),A.moveTo(.5*T+C.width*v,.5*T+C.height*y),A.lineTo(2*O-L[k].x,2*b-L[k].y),A.lineTo(2*O-L[k+1].x,2*b-L[k+1].y),A.closePath(),void 0!==P[I].color.tweaks&&void 0!==P[I].color.tweaks.alpha?(A.fillStyle="rgba("+P[I].color.rgb[0]+","+P[I].color.rgb[1]+","+P[I].color.rgb[2]+","+(1-U/255)*(1-P[I].color.tweaks.alpha)+")",A.shadowColor="rgba("+P[I].color.rgb[0]+","+P[I].color.rgb[1]+","+P[I].color.rgb[2]+","+(1-U/255)*(1-P[I].color.tweaks.alpha)+")"):(A.fillStyle="rgba("+P[I].color.rgb[0]+","+P[I].color.rgb[1]+","+P[I].color.rgb[2]+","+(1-U/255)+")",A.shadowColor="rgba("+P[I].color.rgb[0]+","+P[I].color.rgb[1]+","+P[I].color.rgb[2]+","+(1-U/255)+")"),A.fill(),A.translate(.4,.4),A.fill(),A.translate(-.8,-.8),A.fill(),A.translate(.4,.4),A.save(),A.restore(),U+=_;1,A.restore()}var G=A.getImageData(Math.ceil(O-C.width/2),Math.ceil(b-C.height/2),Math.ceil(O+C.width/2),Math.ceil(b+C.height/2)),F=document.createElement("canvas");if(h){F.height=2*Math.ceil(C.height),F.width=2*Math.ceil(C.width),F.getContext("2d").putImageData(G,0,0,0,0,2*Math.ceil(C.width),2*Math.ceil(C.height));W={dim:{width:2*Math.ceil(C.width),height:2*Math.ceil(C.height)},pos:{top:r.transform.pos.top,left:r.transform.pos.left}}}else{F.height=Math.ceil(C.height),F.width=Math.ceil(C.width),F.getContext("2d").putImageData(G,0,0,0,0,Math.ceil(C.width),Math.ceil(C.height));var W={dim:{width:Math.ceil(C.width),height:Math.ceil(C.height)},pos:{top:r.transform.pos.top,left:r.transform.pos.left},transh:f&&r.transform.fliph?r.transform.dim.width:0,transv:f&&r.transform.flipv?r.transform.dim.height:0,scaleh:f&&r.transform.fliph?-1:1,scalev:f&&r.transform.flipv?-1:1,rotate:0}}f&&(W.pos.left=x.pos.left,W.pos.top=x.pos.top,W.rotate=t.offset.rotate?t.offset.rotate:-1*r.transform.rotate,W.rtcx=.5*r.transform.dim.width,W.rtcy=.5*r.transform.dim.height),img_dataURL=F.toDataURL("image/png"),this.pict.image(p,$(d),a,img_dataURL,r,o.parentNode,W,c,void 0,void 0,f)},radial:function(e,t,a,o,i,r){var s=SVGFill.gradient.getRadialCoordinates(t,i);SVGCreator.set(e,{cx:s.cx,cy:s.cy,r:s.radius,gradientTransform:"rotate("+s.rotate+","+s.rx+","+s.ry+")translate("+s.transh+" "+s.transv+")scale("+s.scale.scaleh+" "+s.scale.scalev+")"})},getRadialCoordinates(e,t){var a,o,i,r={left:.5,right:0,top:.5,bottom:0},s=0,n=0,d=e.fillToRect?e.fillToRect:r,p=d.rotate?d.rotate:0,l=t.transform.fliph,h=t.transform.flipv,c=SVGFill.gradient;if(e.radial&&!e.radial.fillToRect)return this.radialRenderingWithLinearPoint(e,t,l,h);if(e.offset){i=[(-1*(e.offset.left+e.offset.right)+1)*t.transform.dim.width,(-1*(e.offset.top+e.offset.bottom)+1)*t.transform.dim.height];var f=c.getScaleValue(i[0],i[1],t.transform);a=i[0]*d.left/f.scaleh,o=i[1]*d.top/f.scalev,s=l?(1-e.offset.left)*t.transform.dim.width:e.offset.left*t.transform.dim.width,n=h?(1-e.offset.top)*t.transform.dim.height:e.offset.top*t.transform.dim.height,p=e.offset.rotate,(l&&!h||!l&&h)&&(p=360-p),f.scaleh*=l?-1:1,f.scalev*=h?-1:1}else void 0==d.left&&void 0!=d.right&&(d.left=1-d.right),void 0==d.top&&void 0!=d.bottom&&(d.top=1-d.bottom),i=VectorUtil.getViewBoxDimensions(t.transform.dim.width,t.transform.dim.height),f=c.getScaleValue(i[0],i[1]),a=d.left*t.transform.dim.width/f.scaleh,o=d.top*t.transform.dim.height/f.scalev;return{cx:a,cy:o,transh:s,transv:n,rotate:p,radius:Math.sqrt(Math.pow(.5*i[0]/f.scaleh,2)+Math.pow(.5*i[1]/f.scalev,2)),scale:f,rx:.5*t.transform.dim.width,ry:.5*t.transform.dim.height}},getScaleValue:function(e,t,a){var o=1,i=1;return e>t?(o=e/t,i=1):t>e&&(o=1,i=t/e),{scaleh:o,scalev:i}},radialRenderingWithLinearPoint:function(e,t,a,o){var i,r=e.linear.start,s=e.linear.end,n=e.radial.cornerOffset?e.radial.cornerOffset.left:1,d=r.left,p=r.top,l=s.left,h=s.top,c=n,f=d*t.transform.dim.width+t.transform.pos.left,u=p*t.transform.dim.height+t.transform.pos.top,m=l*t.transform.dim.width+t.transform.pos.left,g=h*t.transform.dim.height+t.transform.pos.top;a&&o?i=Math.atan2(g-u,m-f):a&&!o?i=Math.atan2(g-u,m-f):!a&&o?i=Math.atan2(u-g,f-m):a||o||(i=Math.atan2(g-u,m-f));var S=Geometry.util.toDegrees(i)-90;rx=r.left*t.transform.dim.width,ry=r.top*t.transform.dim.height,cx=r.left*t.transform.dim.width/c,cy=r.top*t.transform.dim.height/1;var x={left:.5,top:0},v={left:.5,top:1},y=Math.sqrt(Math.pow((v.left-x.left)*t.transform.dim.width*c,2)+Math.pow((v.top-x.top)*t.transform.dim.height*1,2));return{cx:cx,cy:cy,transh:0,transv:0,rotate:S,radius:y,scale:{scaleh:c,scalev:1},rx:rx,ry:ry}}},pict:{value:function(e,t,a,o,i){var r=SVGCreator.getImageElement(e);SVGFill.pict.setImageCustomAttr(r,t);var s=t.type===ShapeConstants.PictureType.USERDEFINED;this.pict.href(r,t.url,void 0,s,t.id,t.fallbackurl)},props:function(e,t,a,o,i,r,s){var n;n=i.fills&&i.fills[s]?i.fills[s].pict.value:i.fill.pict.value;var d=SVGCreator.getImageElement(e),p=n.serverUrl?n.serverUrl:n.url;SVGFill.pict.setImageCustomAttr(d,n,p);var l=n.type===ShapeConstants.PictureType.USERDEFINED;SVGImage.getImageURL(t,p,i,{ele:d,fn:this.pict._props},r,n.id,l),void 0!==t.alpha&&SVGImage.setAlpha(void 0,t.alpha,void 0,a)},_props:function(e,t){this.pict.href(t,e)},frame:function(e,t,a,o,i){var r=SVGCreator.getImageElement(e),s=VectorUtil.getViewBoxDimensions(o.transform.dim.width,o.transform.dim.height),n=!0;o.fill&&o.fill.pict&&!$.isEmptyObject(o.fill.pict.props)&&$.each(o.fill.pict.props,function(e,t){if("alpha"!=e)return n=!1,!1});var d=[n&&i&&i.width?2*i.width:s[0],n&&i&&i.height?2*i.height:s[1]],p=s[0]/d[0],l=s[1]/d[1],h=d[0]*(1-(t.left+t.right)),c=d[1]*(1-(t.top+t.bottom)),f=t.left*d[0],u=t.top*d[1],m=o.transform.fliph,g=o.transform.flipv,S=p,x=l,v=0,y=0,E=t.rotate?t.rotate:0;t.isGroupshape&&(t.fliph&&(m=!m),t.flipv&&(g=!g),S=m?-1:1,x=g?-1:1,v=m?d[0]:0,y=g?d[1]:0,(m&&!g||!m&&g)&&(E=-E));var C=(h>d[0]?h:d[0])+Math.abs(f),O=(c>d[1]?c:d[1])+Math.abs(u);SVGCreator.set(e,{width:C,height:O,x:f,y:u,patternTransform:"rotate("+E+","+.5*d[0]+","+.5*d[1]+")translate("+v+" "+y+")scale("+S+" "+x+")"}),SVGCreator.set(r,{width:h,height:c})},tile:function(e,t,a,o,i){var r=VectorUtil.getViewBoxDimensions(o.transform.dim.width,o.transform.dim.height),s=t.left?t.left:0,n=t.top?t.top:0,d=s*r[0]+t.offsetX,p=n*r[1]+t.offsetY,l=t.rotate?t.rotate:0,h=o.transform.fliph,c=o.transform.flipv,f=1,u=1,m=0,g=0;t.isGroupshape&&(t.fliph&&(h=!h),t.flipv&&(c=!c),f=h?-1:1,u=c?-1:1,m=h?r[0]:0,g=c?r[1]:0,(h&&!c||!h&&c)&&(l=-l));var S=SVGCreator.getImageElement(e);SVGCreator.set(e,{x:VectorUtil.getViewBoxDimensions(d),y:VectorUtil.getViewBoxDimensions(p),width:t.scale.x,height:t.scale.y,patternTransform:"rotate("+l+","+.5*r[0]+","+.5*r[1]+")translate("+m+" "+g+")scale("+f+" "+u+")"}),SVGCreator.set(S,{width:t.scale.x,height:t.scale.y})},image:function(e,t,a,o,i,r,s,n,d,p,l){s=s||{pos:{left:0,top:0},dim:i.transform.dim};var h,c;if(e&&e.type===ShapeConstants.ShapeNodeType.PICTURE||Shape.iOSDevice&&!Shape.iOSSVGImageFillSupport){(c=$("#image",r)).length>0?c=c[0]:(c=SVGCreator.createImage(r),$(r).prepend(c)),SVGFill.pict.setImageCustomAttr(c,{type:d?ShapeConstants.PictureType.USERDEFINED:void 0,url:o,id:p});var f=e.value&&e.value.fallbackurl?e.value.fallbackurl:void 0;this.href(c,o,void 0,d,p,f);for(var u=0,m=(a=$(a)).length;u<m;u++){var g=e.pdfVariables?{fill:"none"}:{fill:"transparent"};SVGCreator.set(a[u],g)}}else{var S=$(r).children();$.each(S,function(e,t){if("image"==t.nodeName)return t.remove(),!1}),h=SVGCreator.fillElement(a,t,"pattern","pattern"),c=SVGCreator.getImageElement(h),SVGFill.pict.setImageCustomAttr(c,{type:d?ShapeConstants.PictureType.USERDEFINED:void 0,url:o,id:p}),this.href(c,o,void 0,d,p)}return this.transform(c,h,s,n,l),$(c)},href:function(e,t,a,o,i,r){var s=/(>|<)/;(void 0==t||t&&t.match(s))&&(t=""),SVGFill.pict.setImageCustomAttr(e,{type:o?ShapeConstants.PictureType.USERDEFINED:void 0,url:t,id:i});var n=this;e.setAttributeNS(SVGCreator.Xlink,"href",t);var d={retries:0,srcUrl:t,imageEle:e,isUserDefinedImage:o,imageId:i,fallbackurl:r};VectorUtil.getImageDim(t,n.triggerImageDownload,d)},setImageCustomAttr:function(e,t,a){var o=/(>|<)/;t&&t.type===ShapeConstants.PictureType.USERDEFINED&&t.id&&$(e).attr("imageuniqueid",t.id),a&&!a.match(o)?$(e).attr("imageurl",a):t&&t.url&&!t.url.match(o)&&$(e).attr("imageurl",t.url),t&&void 0!=t.origImageDim&&$(e).attr("origimagedim",t.origImageDim)},triggerImageDownload:function(e,t){if(t.srcUrl){if(!t.imageLoaded)return void SVGFill.pict.retryFn(e,t);$(document).trigger("HRimageDownloaded",{dim:e,param:t})}else{var a={errorDelta:{imageId:t.imageId,errorFrom:"IMAGE_URL_EMPTY"},exception:"IMAGE_URL_EMPTY",type:24};$(document).trigger("image_loading_failed",a)}},retryFn:function(e,t){var a=SVGFill.pict;if(t.retries=t.retries+1,t&&t.retries<4){var o=1e3*Math.pow(2,t.retries);setTimeout(function(){if(t.srcUrl&&0==t.srcUrl.indexOf("blob"))t.imageEle&&t.imageId&&$(document).trigger("blob_image_failed",{params:t});else if(t.imageEle&&t.srcUrl){var e=location.protocol+"//showimages";if(t.srcUrl&&0==t.srcUrl.indexOf(e)){var o=new URL(t.srcUrl);!o.host||-1==o.host.indexOf("zohopublic")&&-1==o.host.indexOf("zohoexternal")?t.srcUrl=t.srcUrl.replace("showimages","show"):(o.host=location.host,t.srcUrl=o.href)}else if(t.srcUrl&&0==t.srcUrl.indexOf(location.protocol+"//download")){var i=new URLSearchParams(t.srcUrl).get("x-cli-msg"),r=JSON.parse(i.replace(/'/g,'"')),s=r.rid,n=r.imgId,d=new URL(t.srcUrl).host.replace("download","showimages");t.srcUrl=location.protocol+"//"+d+"/show/image?rid="+s+"&id="+n+"&a_t=IMAGE_VIEW"}else t.fallbackurl&&(t.srcUrl=t.fallbackurl);t.imageEle.setAttributeNS(SVGCreator.Xlink,"href",t.srcUrl),VectorUtil.getImageDim(t.srcUrl,a.triggerImageDownload,t)}},o)}else{var i={errorDelta:{failedImageUrl:t.srcUrl,imageId:t.imageId,errorFrom:"IMAGELOADING"},exception:"IMAGE_LOADING_FAILED",type:19};$(document).trigger("image_loading_failed",i)}},transform:function(e,t,a,o,i){var r=a.pos,s=a.dim;s=VectorUtil.getViewBoxDimensions(s.width,s.height),t&&!o?SVGCreator.set(t,{x:0,y:0,width:s[0],height:s[1]}):o&&("userSpaceOnUse"==o?SVGCreator.set(t,{patternUnits:o,width:"100%",height:"100%"}):"objectBoundingBox"==o&&SVGCreator.set(t,{patternUnits:o,width:1,height:1})),e&&!o?SVGCreator.set(e,{x:r.left,y:r.top,width:s[0],height:s[1]}):o&&(i?SVGCreator.set(e,{x:-1*a.pos.left,y:-1*a.pos.top,width:s[0],height:s[1]}):SVGCreator.set(e,{x:0,y:0,width:s[0],height:s[1]}),SVGCreator.setTransform(e,2,{x:a.transh?a.transh:0,y:a.transv?a.transv:0}),SVGCreator.setTransform(e,3,{sw:a.scaleh?a.scaleh:1,sh:a.scalev?a.scalev:1}),SVGCreator.setTransform(e,4,{cx:i?a.rtcx:.5*s[0],cy:i?a.rtcy:.5*s[1],angle:a.rotate?a.rotate:0}))}},pattern:{distance:function(e,t){SVGCreator.set(e,{x:0,y:0,width:t.left,height:t.top})},rotate:function(e,t){SVGCreator.set(e,{patternTransform:"rotate("+t+")"})},background:function(e,t,a,o,i,r){SVGCreator.setBGpath(e,t,r)},foreground:function(e,t,a){for(var o=0;o<t.length;o++)SVGCreator.setPathEle(e,t[o],a,o)},tweaks:function(e,t,a){var o={"fill-opacity":1};SVGCreator.set(a,o)}}};Util.extend(!0,SVGFill,e),Util.extend(!0,SVGStroke,e)}();var ShapeConfig;jQuery,ShapeConfig={container:void 0,drawcontainer:void 0,textEditAfterSelect:!0,stopAutofitAfterResize:!1,smartGrid:{SGplaneOriented:!0,SGallDistances:!1,SGplanespl:!1,SGshowallGuides:!1,SGcenterwithsides:!1,ShowSGdistance:!1,showExternalShapes:!0},init(){},allowMouseEvent(){},focusDrawContainer(){},isContainerLockedFromEditing:()=>!1,allowMultipleShapeSelection(e,t){},resizeEmbedRestriction:(e,t)=>e,checkGroupShapeLockStatus(e,t){},get:{label:e=>ShapeConfig.constants._i18nMap[e],translate:()=>({x:0,y:0}),overlay:()=>!1,shapes:{all(e){},hidden(e){},fromRange(){},visible(e){}},mergeShape(e){},mergeTransformShape(e){},shape(e){},connector(e){},parentContainerDim(e,t){var a=e.config.container;return{width:a.width(),height:a.height()}},groupselect:()=>Shape.getShapeDefaultData("groupselect"),offset:e=>e.config.container.offset(),scale:()=>1,shapeContainer(){},shapeContainerId(){},shapeContainerDim:(e,t)=>({width:e.config.container.width(),height:e.config.container.height()}),boxOffset:(e,t)=>({left:0,top:0}),bboxContainer(){},spotBBoxContainer(){},selectionContainer(){},breakBoxContainer(){},cursor:(e,t,a)=>e.config.cursorTypes.DEFAULT,boundedContainerDim(){},shapeDatainVisbleRange(){},getAllShapeData(){},viewPropsData:()=>({display:{showSmartGuides:!0}}),modifiers(e){},keyDownObj(e,t){var a,o;return e.altKey||e.shiftKey?!e.shiftKey&&e.altKey?(a=t?1:15,o="rotate"):!e.altKey&&e.shiftKey&&(a=t?.01:.09,o="resize"):(a=t?2:4,o="move"),{constant:a,ele:o}},portionResize:()=>!1,isSupportedShape:()=>!0},setShapeDimensions:e=>e,listenText:{for:[],stop(){},cancel(){},enter(){},up(){},down(){}},events:{key:{down:function(e,t){return!1},onEnterKey:function(){},onEscKey:function(){}},move(e,t){t()},mouse:{down:function(){},drag:function(){},up:function(){},doubleclick:function(){},rightclick:function(){}}},loadFiles:{smartguide:!1,comments:!1,align:!1,utils:!1,crop:!1,pictureProps:!1,shapeObjectEditor:!1,transform:!1,shapeEvent:!1,table:!1,chart:!1,bbox:!1,textAutofit:!1,connectorEvent:!1,penEvent:!1,shapeRecognition:!1,noclone:!1,overlay:!1,rotateOrigin:!1,downloadPathKit:!1},isSupported:{text:!0,shapeEdit:!0,selection:!0,cloneEditing:!1,connectorPoints:!0,grids_guides:!0,rotatebbox:!1,spellcheck:!1,parentBBox:!1,pxSupport:!1,bunchSelect:!1,multiSelect:!1,shapeAction:!0,textAction:!0,modifiers:!0,capitalize:{autoCapitalize:!1,smartUnCapitalize:!1},isSupportTypeText:!0,textInsertPosChange:!1,shapeSelectOnDrag:!1,pathBreak:!1,editPoint:!1,groupshape:!0,duplicate:!1,draw:!0,overlay:!1,erase:!1,connector:!1,cornerRadius:!1,pentool:!1,combineObject:!1,moveBBoxesOnShapeEdit:!1},cursorTypes:{DEFAULTMOVE:"move",CROSSHAIR:"crosshair",DEFAULT:"default",TEXT:"text",HELP:"help",POINTER:"pointer",MOVE:"url(styles/images/move.cur) 9 9, move",ROTATE:"url(styles/images/rotate1.cur) 9 9, crosshair",ROTATE2:"crosshair",HANDLE:"url(styles/images/handle.cur), crosshair",NOTALLOWED:"not-allowed",ERASER:"url(styles/images/eraser.cur) 9 9, move",ROWRESIZE:"row-resize",COLRESIZE:"col-resize"},drawOnMouseDown:{preset:!1,custom:!0},canApplyOverlay:function(){},canApplyBBoxOverlay:function(e){},shapeInfo:function(e,t,a){},constants:{_i18nMap:{left:"Left",top:"Top",width:"Width",height:"Height",rotate:"Rotate",cannoteditgroupshape:"Cannot Edit Group Shape",cannoteditnoselect:"Cannot Edit Locked Shape"},shapedim:{width:50,height:50},overlaystroke_color:{rgb:[74,144,226]}},preset:{down:function(){return!1}},mouse:{down(){},textEditingStarted(e){},doubleClick(){},up(){},rightClick(){}},stopDraw(e,t){},handleConnectorSelection(e,t){},externalShapes:{},stopMoveOnEditmode:e=>!1};class ZSShapeEvent{constructor(e){this.container=e.container,this.editor=e,this.selector=e.selector,this.draw=e.draw,this.crop=e.crop,this.overlay=e.overlay,this.clone=e.clone,this.noclone=e.noclone,this.smartguide=e.smartguide,this.editPoint=e.editPoint,this.cornerRadius=e.cornerRadius,this.pathBreak=e.pathBreak,this.comments=e.comments,this.pictureProps=e.pictureProps,this.bunchSelect=!!e.selector&&e.selector.bunchSelect,this.commonTextEditor=e.commonTextEditor,e.config.loadFiles.transform&&(this.resize=e.transform.resize,this.rotate=e.transform.rotate,this.origin=e.transform.origin,this.handle=e.transform.handle,this.move=e.transform.move),e.config.isSupported.duplicate&&(this.duplicate=new ZSDuplicate(e)),e.config.isSupported.text&&(this.textEvent=new ZSTextEvent(e)),e.config.loadFiles.connectorEvent&&(this.connectorEvent=new ZSConnectorEvent(e)),e.config.loadFiles.penEvent&&(this.penEvent=new ZSPenEvent(e)),this.enableKey=!0,this.leftKey=37,this.rightKey=39,this.upKey=38,this.downKey=40,this.delKey=46,this.backSpaceKey=8,this.escKey=27,this.enterKey=13,this.tabKey=9,this.shapeInfo=void 0,this.mouseIn=void 0,this.cursorType=void 0,this.eventData=void 0,this.isMouseDown=!1,this.flipFromTo=void 0,this.externalShapeObjects=["ph","grid","guide_vertical1","guide_horizontal1","path_for_anim"],this.EVENTS={MOUSEDOWN:"mousedown",MOUSEMOVE:"mousemove",MOUSEUP:"mouseup"},this.duplicateId="duplicate_",this.init()}setCustomCursor(e){this.editor.config.cursorTypes.DEFAULT=e,this.setCursorType(e)}removeCustomCursor(){this.editor.config.cursorTypes.DEFAULT="default",this.setCursorType("default")}enableKeyEvent(e){this.enableKey=e}checkIfShapeBBoxes(e,t){let a,o=this.editor.idContains;if(t){let t=o.corner;for(let o of t)if(-1!==e.indexOf(o))return a="rotate"}return-1!==e.indexOf(o.cornerRadius)?a=o.cornerRadius:-1!==e.indexOf(o.editPoint)?a=o.editPoint:-1!==e.indexOf(o.handle)?a=o.handle:-1!==e.indexOf(o.rotate)?a=o.rotate:-1!==e.indexOf(o.origin)?a=o.origin:-1!==e.indexOf(o.bbox)?a="resize":-1==e.indexOf("border")&&-1===e.indexOf("overlay")||(a="move"),a}setShapeTarget(e,t,a){let o=this.editor;a=a||ZSEventHandler.getTarget(e),t=t||o.config.get.shapeContainerId(a);let i=a.closest("#"+t);i=i.closest(o.config.container).length?i:$();let r=a.closest("."+Shape.shapeClass).attr("id");if(e.isChart=!(!r||-1===r.indexOf("chart")),i.length){let t=a.closest("."+Shape.shapeClass,i),r=a.closest("."+Shape.textBody.paraId,t),s=a.closest("."+Shape.textBody.wordId,r);if(t.length){let a=t.attr("id"),i=e.ctrlKey||e.metaKey;this.checkIfShapeBBoxes(a,i)&&(a=ZSBBoxUtil.getShapeId(a),t=$("#"+a,o.config.get.shapeContainer()))}if(e.shape=t.length?t:void 0,e.para=r.length?r:void 0,e.portion=s.length?s:void 0,e.targetType=e.portion?"portion":e.para?"para":e.shape?"shape":void 0,!e.targetType&&this.commonTextEditor){let t=a.closest("#"+this.commonTextEditor.textEditor.textEditingDivId),i=t.attr("id");i&&i===this.textEditor.textEditingDivId&&(e.targetType="para",e.para=o.defaults.text.to.element.para,e.shape=this.selector?o.getSelectedShapes()[0].box:void 0),e.selectedShapes=o.getSelectedShapes()}e.para&&(e.paraNum=this.indexNo(e.para,"para"))}}indexNo(e,t){let a=e.parent();return(t?a.children("."+t):a.children()).index(e)}destroy(){let e=this.editor;this.draw.clear();let t=e.config.drawcontainer;e.config.isSupported.text&&this.textEvent.destroy(),this.shapeInfo&&this.shapeInfo.remove(),t.unbind(".Shape")}init(){this.createToolTipInfo(),this.editor.config.isSupported.text&&this.textEvent.init(),this.editor.defaults=$.extend(!0,{},ShapeEditorData.defaults),this.editor.config.init(),this.initContainer(),$(document).trigger("shapeevent_initialized",{editor:this.editor})}isCombinedInnerShape(e){if("path"===e.target.tagName){let t=this.editor.getSelectedShapes(),a=e.target,o=(a.getAttribute("id"),e.pageX),i=e.pageY,r=a.closest(".shape_box");if(!r||!r.classList.contains("combined"))return;for(let a=0;a<t.length;a++){let r=t[a].data,s=t[a].box,n=r.props.transform.pos,d=r.props.transform.dim,p=s.data(Shape.parentType),l=this.editor.config.get.scale(),h=this.editor.config.get.offset(this.editor,s);if(e.data&&e.data.isInnerShape){let t,a=r.type===ShapeConstants.ShapeNodeType.COMBINEDOBJECT;if(a&&(CombinedObject.updateShapeData(Grouping.props,r,r.props,!0),t=r.combinedNodes),t&&t.length>1)for(let a=0;a<t.length;a++){let r=t[a],s=r.props.transform.pos,n=r.props.transform.dim,d=document.getElementById(r.nvOProps.nvDProps.id),p=d.querySelector("#path1");this.isInside(s,n,h,l,o,i)&&(e.target=p)}}else if(p===ShapeConstants.ShapeNodeType.COMBINEDOBJECT&&r.isInnerShape&&this.isInside(n,d,h,l,o,i)){let t=document.getElementById(r.nvOProps.nvDProps.id),a=t.querySelector("#path1");e.target=a}}}}isInside(e,t,a,o,i,r){let s=e.left*o+a.left,n=s+t.width*o,d=e.top*o+a.top,p=d+t.height*o;if(s<=i&&n>=i&&d<=r&&p>=r)return!0}initContainer(){let e=this,t=e.editor,a=e.pathBreak,o=e.selector,i=e.textEvent,r=e.commonTextEditor,s=(e.textEditor,t.config.drawcontainer),n=t.config.isSupported.text,d=t.config.isSupported.shapeEdit;n&&i.initContainer(),s[0].onselectstart=function(){return!1},s.attr("tabIndex",-1),Shape.touchDevice||(s.on("pinchzoom_start",function(e,a){t.config.get.bboxContainer().css("display","none")}),s.on("pinchzoom_end",function(e,o){t.config.get.bboxContainer().css("display","block");let i=o.scale;a&&(a.isBreaking()?a.containerScaled(i):t.containerScaled(i)),t.containerMoved(i)}));let p,l;s.on("touchend",function(t){let a=(new Date).getTime(),o=a-($(this).data("previousTouch")||a+1);if(clearTimeout(p),clearTimeout(l),l=void 0,t.clientX=t.originalEvent.changedTouches[0].pageX,t.clientY=t.originalEvent.changedTouches[0].pageY,o<500&&o>0){e.setShapeTarget(t);let a=t.word?t.word:t.para?t.para:t.shape?t.shape:void 0;a&&"bgshape"!==a.attr("id")&&(s.trigger("doubletap",{ev:t,target:a}),t.preventDefault())}else $(this).data("previousTouch",a),p=setTimeout(function(e){s.trigger("ztouchend",e),clearTimeout(p)},500,[t]);$(this).data("previousTouch",a)}),s.on("doubletap",function(t,a){e.doubleClick(t,a)}),s.on("dblclick.Shape",function(t,a){e.doubleClick(t,a)}),s.on("swipeleft",function(){t.getSelectedShapes()||e.isDrawReady()||s.trigger("Shape_swipeleft")}),s.on("swiperight",function(){t.getSelectedShapes()||e.isDrawReady()||s.trigger("Shape_swiperight")});let h,c=0;s.on("click",function(t){let a=ZSEventHandler.getTarget(t),o=a.attr("id");e.placeHolderAction(t,o,void 0,a)}),s.on(e.EVENTS.MOUSEDOWN+".Shape",function(s,p){if(t.config.isContainerLockedFromEditing())return!1;c++,p&&p.tripleClick?s.tripleClick=!0:1===c?h=setTimeout(function(){c=0},500):3===c&&(s.tripleClick=!0,clearTimeout(h),c=0),e.isCombinedInnerShape(s);let l=ZSEventHandler.getTarget(s);e.setShapeTarget(s);let f=Shape.creator.get(l,"class"),u=l.closest(".shape_box"),m=l.closest("g").attr("id"),g=u.attr("id")||"",S=l.attr("id"),x=u.closest("."+Shape.shapeClass),v=t.config.mouse.down(s,l);e.isMouseDown=!0;let y=void 0!==v&&v,E=!!x.data("lock"),C=x.hasClass("grouped")||x.hasClass("combined"),O=t.config.isSupported.draw,b=t.config.isSupported.erase,T=t.config.isSupported.selection;s.data||(s.data={}),!E&&t.getSelectedShapes().length&&t.focusEditor();let w=t.config.get.shapeContainerId(l),D=l.closest("#"+w);if(s.targetId=S,x.hasClass("zs_preview_shape"))e.isMouseDown=!1;else if(y||e.crop&&e.crop.isCropFrame(x)||e.isTableSwapAction(x,l,f,S,s)||e.stopMouseDown(s,g,x,u))e.isMouseDown=!1;else if(u.data("shapeId")&&"chart_title"===u.data("shapeId"))e.isMouseDown=!1;else{if(b&&t.defaults.erase.ready)1!==s.which&&0!==s.which||e.editor.erase.shape(l);else if(O&&e.isDrawReady()){if(t.config.stopDraw(s,l))return;1!==s.which&&0!==s.which||e.drawDown(s,u)}else if(t.config.allowMouseEvent()||D.length)if(i.composeIMEtext(),n&&i.isSameShapeEditable(s,u,m)){s.data.paraTarget=!0;let e=o.getShapesOfZero();i.selectText(e.data,s,l,e.box)}else{let p=s.ctrlKey||s.metaKey||s.shiftKey,h=!1;if(d?h=S===w||!D.length||!e.editor.config.get.isSupportedShape(u,s):O||t.config.isSupported.shapeEdit?d||n||(h=!0):h=!1,e.isPathAnim(g,u)&&e.pathAnimDown(s,g,x,u))return void(e.isMouseDown=!1);if(g.indexOf("highlight")>-1&&(g=$(u).data("shapeId"),l=u=$("#"+g,t.config.container),e.comments&&e.comments.highlight.remove()),t.config.isSupported.pathBreak&&a.isBreaking()){let e=a.mouseDown(x,t);if(e)return}if(-1!==$.inArray(g,e.externalShapeObjects))e.externalShapeAction(s,g,u);else if(h){if(!T)return void(e.isMouseDown=!1);if(1===s.which||0===s.which){let a;T&&((a=Shape.getShapeDefaultData("groupselect")).props.stroke.nonscale=!0),e.draw?e.draw.preset.down(s,a):e.selector&&e.editor.unSelectShapes(),l&&"ui-comment-callout"!=l.attr("class")&&t.config.container.trigger("unselectNotifications",{target:l})}}else if(d||n){let a=t.config.get.overlay(s)&&-1!==g.indexOf("overlay"),h=s.ctrlKey||s.metaKey,c=e.checkIfShapeBBoxes(g,h);if(d&&(c||a)){g=u.data("shapeId");let i=o.check(g),d=!!(g&&g.indexOf("path_for_anim")>-1),l=g&&"bunchSelect"===g;if(!(i||d||l||u.hasClass("handle"))){let i=o&&t.getSelectedShapes()[0]?t.getSelectedShapes()[0].data:void 0;i&&i.isInnerShape&&!a&&t.selector.unSelectShapes([t.getSelectedShapes()[0].data.nvOProps.nvDProps.id]);let r=$("#"+g,t.config.container),n=i&&i.type===ShapeConstants.ShapeNodeType.COMBINEDOBJECT,d=e.editPoint&&e.editPoint.editShapes[g]&&r.data("isCombineShape");n&&d||(e.select(s,r),ZSTriggers.triggerEvent("shape_selected",void 0,void 0,t))}let h=o.getShapesOfZero();h&&h.data&&(h.data.isTable||h.data.type===ShapeConstants.ShapeNodeType.GRAPHICFRAME)?t.config.container.trigger("clear_table"):n&&!E&&r.isEditable()&&r.textEditor.clear(),u.data("shapeId",g);let f=!(!i||!p);s.data.unSelectShape=f,c&&e.editor.config.isSupported.shapeAction&&e.editor[c].down.call(e[c],s,u)}else{let a,o=!1,r=u=l.closest("."+Shape.shapeClass),h=u.hasClass("cell"),c="chart_dataTable"==u.closest(".graphicframe").attr("id"),f=u.data("lock");if(u.length&&u.attr("id")&&-1!=u.attr("id").indexOf("innerEleBBox")){let e=u.data("chartId"),a=u.data("shapeId");u=t.config.container.find("#"+e).find("#"+a)}let m=!!(u.length&&-1!==u.attr("id").indexOf("chart")||c),x=t.getSelectedShapes();if(h&&p||x[0]&&x[0].data&&t.checkLockStatus(x[0],"Modify")&&p||f&&p)return void(e.isMouseDown=!1);let v,y=t.config.textEditAfterSelect?i.textTarget(s,S):void 0;if(m)u=u.closest("."+GraphicFrame.className),c&&(u=u.closest("#chart_plotArea"));else if(S&&(-1!==S.indexOf(Shape.pathId)||-1!==S.indexOf("image"))||y||E||h){if(u.length&&u.data().parentId){let e=ZSShapeObjectEditor.getGrandParentBox(D,u);u=e.grandParentBox}}else u.length&&u.data().parentId&&(v=!0);if(!u.length)return void(e.isMouseDown=!1);g=u.attr("id");let O,b;if(!m&&x[0]&&x[0].parentIds&&x[0].parentIds.length){let e=x[0].parentIds,t=e[e.length-1];t===g?(g=(u=r).attr("id"),O=!0):b=!0}let T=!1;T=!m&&t.selector.check(g,!0);let w=t.config.textEditAfterSelect,P=!0;if(w){let e=x.length?x[0].data.nvOProps.nvDProps.id:void 0;P=e?e===g:P}let L=(T||O)&&(p||o),I=b&&p;if((!m&&3!==s.which&&C&&T||O)&&(s.isInnerShape=!0,s.isInnerShapeSelected=O),w&&C&&s.isInnerShape&&!s.isInnerShapeSelected&&(P=!1),n&&!E)if(h){let t=e.findSideOfTableCell(s,l,r);if($.isEmptyObject(t))o=!0;else{if($(u).hasClass("chartTable"))return void(e.isMouseDown=!1);t.left?s.tableLine={colline:!0,cellBox:r,isLeftLine:!0}:t.right?s.tableLine={colline:!0,cellBox:r,isLeftLine:!1}:t.top?s.tableLine={rowline:!0,cellBox:r,isTopLine:!0}:t.bottom&&(s.tableLine={rowline:!0,cellBox:r,isTopLine:!1})}}else!Shape.touchDevice&&$("#"+Shape.textBody.textContainer,u).length&&(o=i.edit(s,S),w&&(o=!!P&&o));let A=["chart_title"];if(!T)if(g=r.attr("id"),m){o=!1,v=t.selector.selectInnerChartElement(g);let a=e.editor.selector.selectChart(r,v);if(0===A.indexOf(g)&&e.editChartText(r,u,s,l),!a)return void(e.isMouseDown=!1)}else{if(v=!(!u.length||!u.data().parentId),!(a=e.select(s,u,v)))return void(e.isMouseDown=!1);ZSTriggers.triggerEvent("shape_selected",o?["textEdit"]:void 0,void 0,t)}if(!o||E||t.getSelectedShapes().length>1&&p)t.config.isSupported.shapeAction&&(e.pictureProps&&e.pictureProps.setTransparentColor?e.pictureProps.transparentColor(s):d&&(s.data.unSelectShape=L,s.data.unSelectInnerShape=I,t.transform&&t.transform.move.down(s,u)));else if(a=a||T.shape.data,t.getSelectedShapes().length>1&&t.selectShapes([{box:u,data:a}],!0,"wait"),h&&t.tableEditor)a=a.isTable?a.tableData:a,t.tableEditor.select.editTableCell(r,u,a,s,l);else{let o=a.nvOProps.nvProps&&a.nvOProps.nvProps.embed,r=a.obj&&a.obj.chart;o||r||!P||(i.selectText(a,s,l,u),w&&(e.setCursorType(e.cursorType),e.cursorType=t.config.cursorTypes.TEXT))}}}}else{}l.closest("embed")||s.preventDefault()}}),Shape.isPointerEventSupported?(s.on("mouseover.Shape",function(t,a){e.mouseOp(t,a),e.mouseIn=!0}),s.on("mouseout.Shape",function(t,a){e.mouseOut(t,a),e.mouseIn=!1})):s.on("mousemove.Shape",function(t,a){e.mouseOp(t,a)}),s.on("contextmenu.Shape",function(t,a){e.contextMenu(t,a)}),s.on("focus.Shape",function(e){s.trigger("editorFocused",{id:s.attr("id")}),t.editorOnFocus(),e.stopPropagation()}),this.editor.IMESupport||s.on("blur.Shape",function(e){t.editorOnBlur()}),window.InputEvent?s.on("input.Shape",function(e){n&&i.keyPress(e)}):s.on("keypress.Shape",function(e){n&&i.keyPress(e)}),s.on("keyup.Shape",a=>{18===a.which&&void 0!==e.eventData&&(a.data=e.eventData,t.config.isSupported.cloneEditing?e.clone.create(a,!0):e.noclone.create(a,!0),a.stopPropagation(),a.preventDefault())}),s.on("keydown.Shape",function(a){let r,s=a.keyCode?a.keyCode:a.charCode,p=t.config.isContainerLockedFromEditing();if(18===a.which&&void 0!==e.eventData)a.data=e.eventData,e.duplicate.create(a,!0),r=!0;else if(!t.defaults.editing||27!==s&&13!==s){if(e.enableKey&&(t.getSelectedShapes().length||e.isExternalShape())){let l,h,c=s===e.delKey||s===e.backSpaceKey;if(n&&!p){i.IMEKeyDown(a,s);let n=o.getShapesOfZero(),d=n&&n.data&&n.data.isTable,p=n&&n.data.type===ShapeConstants.ShapeNodeType.GRAPHICFRAME&&n.data.obj.type===ShapeConstants.GraphicObjectType.TABLE;if((l=i.editing())&&i.keyDown(a,s),d){if(s===e.escKey)t.config.container.trigger("clear_table");else if(s===e.tabKey){let e=a.shiftKey?"prev":"next";t.tableEditor.editNextCell(e,t),r=!0}}else if(p){let o=e.selector?t.getSelectedShapes()[0]:void 0,i=o?o.table.cells:[];h=t.tableEditor&&i.length;let d=o?o.table.rowIndex:void 0,p=o?o.table.cellIndex:void 0;if(h){let o=s===e.leftKey||s===e.rightKey||s===e.upKey||s===e.downKey;o?(t.config.container.trigger("key_navigation",[a,n]),r=!0):s===e.escKey?(t.config.container.trigger("clear_table"),r=!0):c&&(t.config.container.trigger("clear_cells_textbody"),r=!0)}else c&&!l&&(void 0!==d?(t.config.container.trigger("remove_table_row"),r=h=!0):void 0!==p&&(t.config.container.trigger("remove_table_col"),r=h=!0))}}if(!d||l||h||(r=e.keyDown(a,s)),c){let t=e.editPoint;t&&t.editingMode?r=e.editPoint.removeVertex():t&&a.altKey&&e.editPoint.hideShowUnselectedVertex(!0)}}}else r=e.keyDown(a,s);a.metaKey&&a.altKey&&53===s&&e.editPoint&&t.config.container.trigger("initialize_pentool"),r&&(a.stopPropagation(),a.stopImmediatePropagation(),a.preventDefault())})}mouseOut(e){let t=this.editor;if(t.defaults.editing||(this.cursorType=t.config.cursorTypes.DEFAULT,this.setCursorType(this.cursorType)),t.config.get.overlay(e)&&this.overlay.remove(e),t.config.ShowSGdistance){let e=this.selector?t.getSelectedShapes():void 0;e.length&&this.smartguide.removeguides()}t.config.isSupported.pathBreak&&this.pathBreak.isBreaking()&&this.pathBreak.mouseOut()}contextMenu(e){let t=ZSEventHandler.getTarget(e);this.editor.config.mouse.rightClick(e,t)}stop(e){this.editor.isEditorOnFocus()&&(e.stopPropagation(),e.preventDefault())}mouseOp(e){let t,a=this.editor,o=a.config.isContainerLockedFromEditing(),i=ZSEventHandler.getTarget(e),r=a.config,s=r.isSupported,n=s.draw,d=s.connector,p=s.pathBreak,l=r.cursorTypes,h=l.DEFAULT,c=i.closest("."+Shape.shapeClass),f=c.attr("id"),u=a.config.get.shapeContainer();if(a.config.get.overlay(e,c)&&f){let e=ZSShapeObjectEditor.getGrandParentId(c),t=void 0!==e?e:f;this.overlay.add(t)}if(f&&a.config.ShowSGdistance&&e.altKey){let t=a.getSelectedShapes();if(1===t.length){let o=a.config.get.shapeDatainVisbleRange(c.data(Shape.parentId)?c.data(Shape.parentId):f),i=a.config.get.shapeDatainVisbleRange(t[0].data.nvOProps.nvDProps.id);$.isEmptyObject(o)||!i||$.isEmptyObject(i)||this.smartguide.showDistances(o,i,e.data)}}if(f&&c.data().editData){let e=a.config.get.shape(f),t=c.hasClass("showing");e&&!o&&!t&&Shape.create.editData&&Shape.create.editData.icon.show(e,u,c)}else if(f&&-1!==f.indexOf("chart")||c.hasClass("graphicframe")){let e=i.closest("use").length?i.closest("use"):i.closest("g");for(;e.data(Shape.parentId);)e=e.parent();let t,r,s=e.attr("id");void 0!==s&&(t=a.config.get.shape(s),e=u.find("#"+s),r=c.hasClass("showing")),t&&!o&&!r&&Shape.create.editData&&Shape.create.editData.icon.show(t,u,e)}else Shape.create.editData&&Shape.create.editData.icon.clear(a,u);if(Shape.create.editData&&Shape.create.editData.icon.updateccIcon(u,c,f),!o){let o=i.closest("#"+a.config.get.shapeContainerId(i)),r=c.data("lock");n&&(t=this.isDrawReady())&&!r?a.config.stopDraw(e,i)||(h=a.defaults.draw.cursor?a.defaults.draw.cursor:l.CROSSHAIR,d&&t.shapeType===ShapeConstants.ShapeNodeType.CONNECTOR&&this.connectorEvent.mouseMove(e,f,c)):p&&this.pathBreak.isBreaking()?(this.pathBreak.mouseOver(c),h=l.SCISSOR):o.length?h=this.getCursorType(e,i,c,f):a.editPoint&&a.editPoint.editingMode&&(h=(r=c.data("lock"))?a.config.cursorTypes.NOTALLOWED:a.config.cursorTypes.CROSSHAIR),this.editPoint&&f&&0===f.indexOf(this.editPoint.elementIds.border)&&this.editPoint.borderDown(e,c)}this.setCursorType(h),this.cursorType=h}getCursorType(e,t,a,o){let i=this.editor,r=i.config,s=r.isSupported,n=r.cursorTypes,d=n.DEFAULT,p=s.text,l=a.data("lock");if(s.erase&&i.erase.ready&&(d=n.ERASER),!r.get.isSupportedShape(a,e))return r.get.cursor(i,a,o);if(i.defaults.editing)return this.cursorType;if(this.externalShapeObjects.includes(o))return this.externalShapeCursor(o);if(o&&-1!==o.indexOf("chart")){if("chart_title"===o&&p)return i.config.cursorTypes.TEXT;{let e=i.getSelectedShapes()[0];if(!e)return i.config.cursorTypes.DEFAULTMOVE;if(!(e.data.type===ShapeConstants.ShapeNodeType.GRAPHICFRAME&&e.data.obj.type===ShapeConstants.GraphicObjectType.CHART))return i.config.cursorTypes.DEFAULTMOVE;{let t=e.data.nvOProps.nvDProps.id;if(t===a.closest(".graphicframe").attr("id")){var h=-1!==o.indexOf("legend"),c=-1!==o.indexOf("bgShape");return h||c?i.config.cursorTypes.DEFAULTMOVE:i.config.cursorTypes.DEFAULT}}}}let f=a.data("lock"),u=a.data("shapeId");if(f||(f=ZSShapeObjectEditor.isGrandParentShapeLocked(i.container,a)),void 0===u&&(u=o),f){let e=!!this.selector&&this.selector.check(u,!0);return e&&(d=n.NOTALLOWED),d}{let r,p=s.shapeEdit,h=s.text,c=s.connector;if(p||h||c){if(p||c){let s=this.selector.check(this.selector.groupSelectId);if(s)return d;let p=t.attr("id");if(void 0!==p&&-1!==p.indexOf(Shape.pathId)){let s=this.selector.check(u),h=i.idContains;if(s){let e=$(a).hasClass("bbox")?$(a).data():{},t="lock"===e.bboxType;if(this.pictureProps&&this.pictureProps.setTransparentColor)d=n.POINTER;else if(-1!==o.indexOf(h.editPoint))d=n.CROSSHAIR;else if(-1!==o.indexOf(h.rotate))d=t?i.config.cursorTypes.NOTALLOWED:n.ROTATE;else if(-1!==o.indexOf(h.border))d=n.DEFAULTMOVE;else if(-1!==o.indexOf(h.handle))d=-1!==o.indexOf("crop")&&-1!==o.indexOf("handle1")?n.DEFAULTMOVE:n.HANDLE;else if(-1!==o.indexOf("box")){o.indexOf("crop")&&(o=o.split("crop")[0]);let e=o.split("_")[0];c&&e.indexOf("connected")&&(e=e.split("connected")[0]);let t=s.shape.data,a=0;t.props&&t.props.transform&&(a=Shape.getAngle(t.props.transform)),d=ZSBBoxUtil.cursor(e,a)}else d=-1!==o.indexOf(h.animPathVertex)?i.config.cursorTypes.POINTER:n.DEFAULTMOVE}else if(-1!==u.indexOf("bunchSelect")){if(a.hasClass("bboxbunchSelectnormal")){let e=o.split("_")[0],t=Shape.getAngle(this.selector.bunchSelect.shapes[0].data.props.transform);d=ZSBBoxUtil.cursor(e,t)}}else if(-1!==u.indexOf("handle"))d=-1!==u.indexOf("crop")&&-1!==u.indexOf("handle1")?l?i.config.cursorTypes.NOTALLOWED:i.config.cursorTypes.DEFAULTMOVE:l?i.config.cursorTypes.NOTALLOWED:i.config.cursorTypes.HANDLE;else if(-1!==o.indexOf("box")){o.indexOf("crop")&&(o=o.split("crop")[0]);let e=o.split("_")[0];c&&e.indexOf("connected")&&(e=e.split("connected")[0]);let t=this.editor.getSelectedShapes()[0].data,a=0;t.props&&t.props.transform&&(a=Shape.getAngle(t.props.transform)),d=ZSBBoxUtil.cursor(e,a)}else if($(a).closest("#inner_bgshape").length||-1===p.indexOf(Shape.pathId)){if(-1!==u.indexOf("path_for_anim")){let e=o.split("_")[0];d=ZSBBoxUtil.cursor(e,0)}}else d=n.DEFAULTMOVE;if(r=this.findSideOfTableCell(e,t,a),!Util.isEmptyObject(r)){let e=i.getSelectedShapes()[0],t=e&&e.data&&e.data.isChartTable;d=t?i.config.cursorTypes.DEFAULT:r.left||r.right?i.config.cursorTypes.COLRESIZE:i.config.cursorTypes.ROWRESIZE}}}let s=i.config.textEditAfterSelect;if(s){let e=i.getSelectedShapes(),t=e.length?e[0].data.nvOProps.nvDProps.id:void 0;h=!!this.textEvent.editing()&&t===o}if(h){let o=t.closest("use").length?t.closest("use"):t.closest("g"),i=o.attr("id"),s=t.closest("rect");(this.textEvent.textTarget(e,i,s)||a.hasClass("cell")&&r&&Util.isEmptyObject(r)||this.textEvent.isSameShapeEditable(e))&&(d=n.TEXT)}}}return d}refreshCursorType(e){let t=ZSEventHandler.getTarget(e),a=t.closest("."+Shape.shapeClass),o=a.attr("id")||"",i=this.getCursorType(e,t,a,o);this.setCursorType(i)}setCursorType(e){var t=this.cursorClassName(e);if(t){var a=$(this.editor.container).data("cursorClass");this.container.removeClass(a),this.container.addClass(t),$(this.editor.container).data("cursorClass",t)}else this.container.css({cursor:e})}cursorClassName(e){var t,a=this.editor.config.CursorClass;if(!$.isEmptyObject(a))for(var o=this.editor.config.cursorTypes,i=Object.keys(o),r=0;r<i.length;r++){var s=i[r];e==o[s]&&(t=a[s])}return t}createToolTipInfo(){let e=$("<div id = 'shapeinfo' style='z-index:10000;'></div>");e.css({position:"absolute",left:-1e3,top:-1e3}),$(document.body).append(e),this.shapeInfo=e}select(e,t,a,o){let i=(e.ctrlKey||e.metaKey||e.shiftKey)&&!a,r=this.editor,s=this.selector,n=r.getSelectedShapes();if(!i||t.hasClass("graphicframe")||n[0]&&n[0].data.type===ShapeConstants.ShapeNodeType.GRAPHICFRAME){let t=!(!e.portion&&!e.para);r.clear("wait",t)}if(!r.config.get.isSupportedShape(t,e))return;if(r.config.allowMultipleShapeSelection(t,n))return;let d=s.init(t,o,a),p=r.getSelectedShapes()[d];return d>0&&this.textEvent.editing()&&r.clearTextEditor(),r.config.isSupported.shapeEdit||this.commonTextEditor.textEditor.edit({data:p.data,box:t}),p.data}keyDown(e,t){let a,o=this,i=o.editor,r=o.selector,s=o.draw,n=o.editPoint,d=e.ctrlKey||e.metaKey;if(t===o.leftKey||t===o.rightKey||t===o.upKey||t===o.downKey){let r=i.config.isContainerLockedFromEditing(),s=!r;if(s&&i.config.isSupported.shapeAction){let a=!!n&&n.isVertexSelected(),r={};!(r=a?{constant:1,ele:o.editor.idContains.editPoint}:i.config.get.keyDownObj(e,d)).ele||i.crop&&i.defaults.crop.cropBox||i.transform.keyEvent(t,r.constant,r.ele)}(e.altKey&&o.editor.isMac?e.metaKey:e.ctrlKey)||(a=!0)}else if(t===o.escKey){i.pictureProps&&(i.pictureProps.setTransparentColor=!1);let t=!!n&&n.editingMode;if(t){let e=n.isVertexSelected();e?n.handleEscKey():(n.remove(),r.bbox.create(),ZSTriggers.triggerEvent("escape_drawing",void 0,void 0,i))}else i.defaults.editing?i.defaults.draw.genre===ShapeConstants.ShapeGeometryType.PRESET||i.defaults.draw.genre===ShapeConstants.ShapeGeometryType.CUSTOM?s.handleEscKey(e):(void 0!==this.eventData&&void 0!==this.eventData.duplicateshape&&0!==this.eventData.duplicateshape.length?(e.data=this.eventData,i.transform.eventUp(e),r.clear()):i.config.isSupported.cloneEditing&&o.clone.remove(e),ZSTriggers.triggerEvent("escape_drawing",void 0,void 0,i)):i.crop&&i.defaults.crop.cropBox?(i.crop.refresh(),i.crop.cropImage()):(i.getSelectedShapes().length&&i.config.events.key.onEscKey(),s&&s.clear());a=!0}else t===o.enterKey&&i.config.isSupported.shapeAction?(i.defaults.editing?s.handleEnterKey():i.crop&&i.defaults.crop.cropBox?this.crop.cropImage():i.getSelectedShapes().length&&i.config.events.key.onEnterKey(),a=!0):e.metaKey&&e.altKey&&69===t&&n&&!n.isMultiStrokeShape()&&(n.create(),a=!0);return a}isDrawReady(){let e=!1,t=this.editor,a=t.defaults.draw.genre;if(a){let o=t.defaults.draw[a.toLowerCase()].shapeType;e={genre:a,shapeType:o}}return e}drawDown(e,t){this.draw.down(e,t)}stopMouseDown(e,t,a,o){let i,r,s=this.editor,n=a.data("shapeId")?a.data("shapeId"):t;return s.selector&&s.selector.bunchSelect&&(r=s.selector.bunchSelect.shapes),(r&&r.length||-1!==t.indexOf("bunchSelect"))&&s.config.isSupported.shapeAction&&(i=this.bunchSelect.down(e,t,a,o,n)),this.crop&&s.defaults.crop&&s.defaults.crop.cropBox&&(i=this.crop.isCropAction(e,t,a,o,n)),this.pictureProps&&this.pictureProps.setTransparentColor&&a.attr("id")!==s.getSelectedShapes()[0].data.nvOProps.nvDProps.id&&(this.pictureProps.setTransparentColor=!1),i}isPathAnim(e,t){let a=t.data(Shape.parentType);return e.indexOf("path_for_anim")>-1||t.data("shapeId")&&t.data("shapeId").indexOf("path_for_anim")>-1||a===ShapeConstants.ShapeNodeType.GROUPSHAPE&&t.data(Shape.parentId).indexOf("path_for_anim")>-1}pathAnimDown(e,t,a,o){let i,r=this.editor,s=a.data(Shape.parentId),n=s||(a.data("shapeId")?a.data("shapeId"):t);if(s&&(a=$("#"+n,r.config.container)),-1!=t.indexOf("editPoint"))return i;if($(a).hasClass("path_for_anim")){let r=$(a).data();r&&"RESIZE"==r.mode&&this.modifyPathAnim(e,t,a,o),$(this.container).trigger("enable_path_anim_editing",r),i=!0}else if(-1!==n.indexOf("path_for_anim_vertex")){let t=$(a).data();$(this.container).trigger("create_editPoint_pathanim",t);let o,r=t.editShapeId,s=this.editPoint,n=s.getCurrentShape(r),d=n.elements,p=d.vertex[0];$(a).hasClass("start_vertex_for_path")?o=$(p[0]):$(a).hasClass("end_vertex_for_path")&&(o=$(p[p.length-1])),s.unselectHandle(r,void 0,"all"),o&&o.length&&s.select(r,{},o),s.down.call(s,e,o),i=!0}else if(-1!==n.indexOf("path_for_anim_clone_shape")||-1!==n.indexOf("path_for_anim")){if(-1!==n.indexOf("path_for_anim_clone_shape")){let e,t=this.editPoint,o=t.getCurrentShape(n),i=o.elements,r=i.vertex[0];$(a).hasClass("start_shape_for_path")?e=$(r[0]):$(a).hasClass("end_shape_for_path")&&(e=$(r[r.length-1])),t.unselectHandle(n,void 0,"all"),e&&e.length&&(t.select(n,{},e),e.removeClass("selectedbbox"),t.showHideControlBox(n,!1))}this.modifyPathAnim(e,t,a,o),i=!0}return i}modifyPathAnim(e,t,a,o){let i=this.editor,r={};r=a.hasClass("bbox")?{box:e.shape,data:e.shape.data("shapeData")}:{box:a,data:a.data("shapeData")};let s=$.extend(!0,{},r.data);s.noClone=!1;let n=i.config.get.scale();s.scale=n,r.box.data("shapeData",s);let d=[{box:r.box,data:s,connector:[]}],p=this.checkIfShapeBBoxes(t);p?i[p].down.call(i[p],e,o,d):i.move.down(e,void 0,d)}isTableSwapAction(e,t,a,o,i){let r=t?$(t).closest(".ui-table-move"):void 0;if(r&&r.length){let t=$(r).attr("id");return this.editor.tableEditor.swap.down(i,e,t),!0}}placeHolderAction(e,t,a,o){o="editIcon"===t?o.closest(".placeholdereditbutton"):o;let i=t===Shape.placeHolderImageIconId||t===Shape.placeHolderMediaIconId||t===Shape.placeHolderTableIconId||t===Shape.placeHolderChartIconId||t===Shape.placeHolderTwitterIconId,r=o.hasClass("placeHolderUseIcon");if("placeholderIcon"===t||i||"editIcon"===t||r){let t=o.data("handler");t&&setTimeout(function(){t.call(this,e)},10)}return!1}externalShapeAction(e,t,a){if(-1!==t.indexOf("guide")){let t=a.data(),o=$.extend(!0,{},t.shapeData);o.noClone=!0;let i=[{box:a,data:o,connector:[]}];i.axis=a.data("axis"),this.editor.move.down(e,void 0,i)}}externalShapeCursor(e){let t=this.editor.config.cursorTypes.DEFAULT;return-1!==e.indexOf("guide")&&(-1!==e.indexOf("horizontal")?t="s-resize":-1!==e.indexOf("vertical")&&(t="e-resize")),t}findSideOfTableCell(e,t,a){let o=a.length?a.data("tbox"):void 0,i=Shape.creator.get(t,"class"),r={};if(i&&-1!==i.indexOf("selector")&&o&&$(a).hasClass("cell")){let a=this.editor.config.get.scale(),i=$(t).offset(),s=e.pageX-i.left,n=e.pageY-i.top,d=$(t).attr("stroke-width")||1,p=o[0]*a,l=o[1]*a,h=o[2]*a,c=o[3]*a;VectorUtil.distOfPointFromLine(p,l,p,c,s,n)<d?r.left=!0:VectorUtil.distOfPointFromLine(h,c,h,l,s,n)<d?r.right=!0:VectorUtil.distOfPointFromLine(p,l,h,l,s,n)<d?r.top=!0:VectorUtil.distOfPointFromLine(p,c,h,c,s,n)<d&&(r.bottom=!0)}return r}editChartText(e,t,a,o){let i=this.commonTextEditor.textEditor;i.textselect.clear(),i.clearTextObject(void 0,{diff_text:!0}),this.textEvent.selectText(void 0,a,o,e)}doubleClick(e,t){let a=this.editor,o=a.config.isSupported.text,i=a.config.isContainerLockedFromEditing();if(o&&!i){let o=t&&t.target?t.target:ZSEventHandler.getTarget(e),i=o.closest("."+Shape.shapeClass),r=this.selector.getShapesOfZero(),s=r||this.editor.container.find("#"+$(i).data("shapeId")).data("shapeData"),n=(i.length&&$(i).attr("id"),this.commonTextEditor),d=n.textEditor;if(this.editPoint&&this.editPoint.editingMode)this.editPoint.doubleClick(e,i);else if(s&&i.length&&!i.data("lock"))if(!o.closest("#"+Shape.textBody.textContainer).length||!s||s.data.nvOProps.nvProps&&s.data.nvOProps.nvProps.embed)a.config.mouse.doubleClick(s);else{let t=this.textEvent._checkEmptyText(e);if(t&&Shape.touchDevice)d.textSelect.placeCursor(s);else{let t=this.editor.commonTextEditor.textEditor;if(!t._isEditable())return;this.textEvent.setTextTarget(e);let o=e.targetObj;if(o&&o.word&&o.word.length){let o=s.box,i=t.textselect;i.init(o),n.textComposer.init(s.data);let r=i.getTargetIndex(e),d=i.getTargetElementFromIndex(r.index);a.defaults.text.flipFromTo=!1;let p=i.getCurrentStartEnd(d),l=p.word.start,h=p.word.end;t.textnavigation.move(l,h,!0)}}}}}tripleClick(e,t){$(this.editor.getDrawContainer()).trigger(this.EVENTS.MOUSEDOWN+".Shape",[{tripleClick:!0}])}isExternalShape(){let e=this.editPoint;if(e)for(let t in e.editShapes){let a=e.editShapes[t],o=a.elements;if(o.selectedBox&&o.selectedBox.length){let e=$(o.selectedBox).data("shapeId");if(e&&e.indexOf("path_for_anim")>-1)return!0}}return!1}isDatafieldSetToRow(e){let t=e.table.rowIndex;var a=e.data.obj.type;if(a===ShapeConstants.GraphicObjectType.TABLE){var o=e.data.obj[a.toLowerCase()].row;if(o[t].datafieldId&&""!==o[t].datafieldId)return!0}return!1}isEmptyCellData(e){let t=e.data.textBody.paras,a=!0;return $.each(t,function(e,t){let o=t.portions;$.each(o,function(e,t){if(t.t&&t.t.length&&!t.isDataFieldApplied||t.type==ShapeConstants.PortionType.FIELD&&t.field)return a=!1,!1})}),a}}class ZSConnectorEvent{constructor(e){this.editor=e}mouseMove(e,t,a){let o=!0,i=this.editor;if(i.config.isSupported.connectorPoints)if(e.data||(e.data={}),t){for(let e in this.editor.idContains)if(-1!=t.indexOf(e)){o=!1;break}if(0===a.length&&(o=!1),e.data.targetId!=t)if(e.data.targetId=t,o){if(-1==t.indexOf("connect")&&-1==t.indexOf("box")&&-1==t.indexOf("border"))i.connector.removeConnectorPoints(),i.connector.showConnectorPoints(a);else if(-1!=t.indexOf("connected")&&-1!=t.indexOf("box")&&-1==t.indexOf("border")){let e=t.split("_")[0].split("connected")[1];a=$("#"+e,i.config.container.element),i.connector.removeConnectorPoints(),i.connector.showConnectorPoints(a)}}else i.connector.removeConnectorPoints()}else i.connector.removeConnectorPoints()}}class ZSTextEvent{constructor(e){this.editor=e,this.selector=e.selector,this.commonTextEditor=e.commonTextEditor,this.textEditor=e.commonTextEditor.textEditor,this.textArea=void 0,this.isCopying=void 0}IMEinitContainer(){let e=this;e.IME_textElementInit(),e.IME_bindEvents()}IMEdestroy(){let e=this.editor.defaults.text.IME;e.contentEditable&&e.contentEditable.length&&e.contentEditable.remove()}IME_textElementInit(){let e=this.editor,t=e.defaults.text.IME,a=$('<span id="texteditable" contenteditable=true autocapitalize="none" style="letter-spacing:normal !important;"></span>'),o=$('<div id = "scaleSpan"></div>'),i=$('<div id = "textContainerSpan"></div>');t.contentEditable=a,i.append(a),o.append(i),e.config.drawcontainer.append(o),this.textEditor.IMEHandler.initContainer()}IME_bindEvents(){let e=this,t=this.editor,a=t.defaults.text.IME;e.IME_textElementBind(),a.contentEditable.bind("cursorPositioned.Text",function(a,o){let i=t.defaults.text.IME;if(t.defaults.text.IME.editing){if(0==i.contentEditable.closest("body").length){let a=i.contentEditable.text();e._textElementInit(),e.IME_textElementBind(),e.textEditor.textactions.addText(a),e.textEditor.focusEditor(),i.contentEditable.html("<span>"+t.defaults.text.IME.defaultText+"</span>")}e.textEditor.focusEditor()}})}IME_textElementBind(){let e=this.editor,t=e.defaults.text.IME,a=(e.config.container,this);t.contentEditable.bind("focus.Text",function(t){e.defaults.text.IME.contentEditable.trigger("textFocused",{id:e.defaults.text.IME.contentEditable.attr("id")}),e.commonTextEditor.textEditor.editorOnFocus(),t.stopPropagation()}),t.contentEditable.bind("blur.Text",function(t){e.commonTextEditor.textEditor.editorOnBlur()}),this.editor.isIE||t.contentEditable.bind("compositionstart.Text",function(t,a){e.commonTextEditor.textEditor.IMEHandler.compositionStart()}),t.contentEditable.bind("compositionend.Text",function(t){a.editor.defaults.text.composing||(e.shapeEvent.textEvent.IMEsetPosition(),e.commonTextEditor.textEditor.IMEHandler.compositionEnd())}),t.contentEditable.bind("DOMCharacterDataModified.Text",function(e){a.IMEsetPosition()})}IMEsetPosition(){let e=this.editor;if(e.defaults.text.IME.editing){e.commonTextEditor.textEditor.IMEHandler.shape;let t=e.defaults.text.editor.IMEHandler.shape,a=e.defaults.text.IME.contentEditable,o=parseFloat(a.css("text-indent"));isNaN(o)&&(o=0);let i=a.width()-o;Shape.creator.set(t.dummySpan[0],{dx:i}),e.commonTextEditor.textEditor.IMEHandler.shapeSetPosition(i)}}isCompositionEventSupported(){}destroy(){this.editor.IMESupport&&this.IMEdestroy()}init(){this.initClipBoard()}initContainer(){let e=this,t=e.editor;t.defaults.text,e.isCompositionEventSupported();this.editor.IMESupport&&e.IMEinitContainer();t.config.container.bind("props_reset",function(a,o){e.editing()&&e.textEditor.textcursor.refresh(t.defaults.text.from,t.defaults.text.to)})}getTextContent(e){let t=this.textArea,a=t.val();t.val(""),a&&(a=a.replace(/(\r\n|\n|\r|\t|\v)/gm," "),self.textEditor.textactions.addText(a)),setTimeout(function(){self.textEditor.focusEditor()},100)}pasteTextContent(){let e=this.textArea;e.val(""),e.focus()}copyTextContent(){let e=this;e.isCopying=!0;let t=e.textArea,a=e.textEditor.selectedText();a&&(t.val(a),t.select(),setTimeout(function(){e.textEditor.focusEditor()},100)),e.isCopying=!1}initClipBoard(){let e=this,t=e.commonTextEditor,a=document.body;t.textArea=$('<textarea name="textclipboard"  style="position:absolute;left:-100px;top:-100px;z-index:-100;font-size:11px;" cols="" rows="" id="textclipboard"> Copy Paste Text Content </textarea>'),t.textAreaSystemClipboard=$('<textarea name="textsystemclipboard"  style="position:absolute;left:-100px;top:-100px;z-index:-100;font-size:11px;" cols="" rows=""> Copy Paste Text Content </textarea>');let o=t.textArea;$(a).append(o),$(a).append(t.textAreaSystemClipboard),null!==document.documentElement.onpropertychange&&"object"==typeof document.documentElement.onpropertychange&&$.support.animation?o[0].onpropertychange=function(t){e.isCopying||e.getTextContent(t)}:o.bind("input.Text",function(t){e.getTextContent(t)})}editing(){return!isNaN(this.editor.defaults.text.from.num.para)}edit(e,t,a){let o=!1,i=e.ctrlKey||e.metaKey||e.shiftKey;if(!t){a||(a=ZSEventHandler.getTarget(e));let o=a.closest("."+Shape.textBody.wordId);if(o.length){let e=a.closest("."+Shape.textBody.subwordId,o);t=e.length?Shape.textBody.subwordId:Shape.textBody.wordId}}return!this.editing()&&i||(o=t===Shape.textBody.textPathId||t===Shape.textBody.linePathId||t===Shape.textBody.wordContentId||t===Shape.textBody.wordId||t===Shape.textBody.subwordId||t===Shape.textBody.subportionId||t===Shape.textBody.bulletSpanContent||t===Shape.textBody.bullet),o}textTarget(e,t,a){if(!t){let a=ZSEventHandler.getTarget(e);t=a.attr("id")}let o=a&&a.length&&a.attr("id")?a.attr("id"):"";return t&&(-1!==t.indexOf("para")||-1!==t.indexOf(Shape.textBody.lineCanisterId)||-1!==t.indexOf(Shape.textBody.wordId)||-1!==o.indexOf("textEditingDiv"))}isSameShapeEditable(e,t,a){let o,i=ZSEventHandler.getTarget(e);if(t=t&&t.length?t:i.closest("#"+this.textEditor.textEditingDivId),void 0!==this.editor.defaults.text.from.num.para){let e=this.selector.getShapesOfZero(),i=t.attr("id");if(!(o=i==this.textEditor.textEditingDivId)){let i=t.closest("."+Shape.shapeClass);if(i.length&&a&&-1===a.indexOf("shape")){let t=i.attr("id");o=t==e.data.nvOProps.nvDProps.id}}}return o}keyPress(e){if("keypress"===e.type||!e.originalEvent.isComposing&&"insertText"===e.originalEvent.inputType){let a=this.editor,o=this.selector.getShapesOfZero(),i=a.config.isContainerLockedFromEditing();var t=o&&!$.isEmptyObject(o.chart)&&"title"!==o.chart.type;let r=a.checkLockStatus(o,"Modify"),s=this.editor.isMac&&(e.ctrlKey||e.metaKey)||!this.editor.isMac&&(e.metaKey||e.ctrlKey&&!e.altKey);if(a.shapeEvent.enableKey&&!s&&!r&&!i&&a.config.isSupported.textAction&&!t&&1===a.getSelectedShapes().length){let t="keypress"===e.type?e.which&&e.which>31:e.originalEvent.data;if(t){let t=o.data.type,i=o.data.isChartTable;if(t!==ShapeConstants.ShapeNodeType.GRAPHICFRAME||o.data.obj.type!==ShapeConstants.GraphicObjectType.TABLE||i){if(t===ShapeConstants.ShapeNodeType.GROUPSHAPE||t===ShapeConstants.ShapeNodeType.GRAPHICFRAME)return}else a.config.container.trigger("onbefore_textinsert",[o]),o=this.selector.getShapesOfZero();let r=o.data.nvOProps.nvODProps,s=a.config.isSupported.isSupportTypeText;if(o.data.type===ShapeConstants.ShapeNodeType.SHAPE&&(s||r&&r.textbox)){this.commonTextEditor.isEditable(o.data.nvOProps.nvDProps.id)||this.textEditor.edit(o);let t="keypress"===e.type?String.fromCharCode(e.which):e.originalEvent.data;this.textEditor.textactions.addText(t),e.preventDefault()}}}}}IMEKeyDown(e,t){let a=this.editor,o=a.getSelectedShapes()[0],i=a.config.isContainerLockedFromEditing(),r=a.checkLockStatus(o,"Modify");!this.editor.isIE||r||i||(229==t?o&&this.editor.isIE&&this.editor.IMESupport&&(a.defaults.text.IME.editing||this.textEditor.IMEHandler.compositionstart()):a.defaults.text.IME.editing&&(a.defaults.text.composing||a.commonTextEditor.textEditor.IMEHandler.compositionEnd()))}keyDown(e,t){let a=this.editor;e.ctrlKey||e.metaKey;if(!a.defaults.text.IME.editing){let o=this.commonTextEditor.operationKeys[t],i=!o||o.action,r=!1;if(o&&(r=!(!a.config.isSupported.textAction&&i))&&o.eventKeys&&o.eventKeys.mandatory){let t=a.isMac?o.eventKeys.mac:o.eventKeys.other;$.each(t,function(t,a){r=r&&e[t]===a})}if(r){let t,a=o.eventKeys,i=o.m,r=this.textEditor;t=r;let s=i.length-1;$.each(i,function(e,a){t=t[a],s!=e&&(r=r[a])}),t.call(r,e,a),e.stopPropagation(),e.preventDefault()}}}_checkEmptyText(e,t){let a=this.selector.getShapesOfZero();t||(t=a.data);let o=t.textBody&&t.textBody.paras&&1==t.textBody.paras.length&&1==t.textBody.paras[0].portions.length&&!t.textBody.paras[0].portions[0].t&&!a.data.textBody.paras[0].portions[0].type;if(o&&!this.editing()){let o=this.editor.config.get.shapeContainer(),i=a.box,r={paraNum:0,portionNum:0};t.placeHolder&&(t.placeHolder.doNotUpdate=!0);let s=ZSEventHandler.getTarget(e),n=s.closest(".para"),d=$($("."+Shape.textBody.lineId,n)[0]);this.textEditor.setText(t,o,r,i),e.data={atStart:!0,element:{line:d,para:n}}}return o}selectText(e,t,a,o){this._checkEmptyText(t,e)?(a||(a=ZSEventHandler.getTarget(t)),this.textEditor.textselect.down(t,a,o)):(this.setTextTarget(t),this.textEditor.textselect.down(t,a,o))}setTextTarget(e){let t,a,o=ZSEventHandler.getTarget(e),i=this.selector.getShapesOfZero(),r=$(),s=$(),n=$(),d=$(),p=$(),l=($(),$());i&&(t=$("#"+Shape.textBody.textContainer,i.box),a=i.data.nvOProps.nvDProps.id),(l=(p=o.closest("."+Shape.textBody.paraId,t)).closest("."+Shape.shapeClass)).attr("id")===a?(d=o.closest("#"+Shape.textBody.lineCanisterId,p),n=o.closest("."+Shape.textBody.lineId,d),s=o.closest("."+Shape.textBody.wordId,n),r=o.closest("."+Shape.textBody.subwordId,s)):p=$();let h={para:p,lineCanister:d,line:n,word:s,subword:r};e.targetObj=h}composeIMEtext(){let e=this.editor.defaults.text.IME;this.editor.IMESupport&&e.IME_TIMER&&!e.editing&&(clearTimeout(e.IME_TIMER),e.IME_TIMER=!1,this.textEditor.IMEHandler.shapeFinalize())}}class ZSEventHandler{static getTarget(e){var t;return t=e.target.correspondingElement?$("#"+e.target.correspondingElement.id):e.target,$(t)}static getTargetWithElement(e,t,a){if((e=$(e)[0]).correspondingElement)i=$("#"+e.correspondingElement.id);else{for(var o=[],i=e;"svg"===i.nodeName;)o.push(i),$(i).css("display","none"),"path"===(i=document.elementFromPoint(t,a)).nodeName&&!0;$.each(o,function(e,t){$(t).css("display","block")})}return $(i)}}class ZSShapeEditor{constructor(e,t){this.container=e,this.config=$.extend(!0,$.extend(!0,{},ShapeConfig),t);let a=this;this.rad180=3.14159,this.degree360=360,this.zeroAngle=0,this.rotateGuide=!1,this.objectmove=void 0,this.idContains={handle:"handle",rotate:"rotate",origin:"origin",clone:"clone",bbox:"box",crop:"crop",bgshape:"bgshape",border:"border",editPoint:"editPoint",cornerRadius:"cornerRadius",animPathVertex:"path_for_anim_vertex",corner:["nwbox","nebox","sebox","swbox"]},this.isMac=-1!==navigator.userAgent.indexOf("Macintosh"),this.isIE=-1!==navigator.userAgent.indexOf("MSIE")||-1!==navigator.userAgent.indexOf("Trident"),this.isSafari=-1!==navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome"),this.IMESupport=!0,this.cropped="cropped",this.textEditing="textEditing",this.shapeSelected="shapeSelected",this.transparent="transparent",this.eventData=void 0,this.config.isSupported.selection&&(this.selector=new ZSSelector(a)),this.config.loadFiles.smartguide&&(this.smartguide=new ZSSmartguide(a)),this.config.isSupported.text&&(this.commonTextEditor=new ZSCommonTextEditor(a)),this.config.isSupported.draw&&(this.draw=new ZSShapeDrawing(a)),this.config.isSupported.cloneEditing&&(this.clone=new ZSClone(a)),this.config.loadFiles.noclone&&(this.noclone=new ZSNoClone(a)),this.config.loadFiles.overlay&&(this.overlay=new ZSOverlay(a)),this.config.isSupported.erase&&(this.erase=new ZSErase(a)),this.config.isSupported.connector&&(this.connector=new ZSConnector(a)),this.config.isSupported.editPoint&&(this.editPoint=new ZSEditPoints(a)),this.config.isSupported.cornerRadius&&(this.cornerRadius=new ZSCornerRadius(a)),this.config.loadFiles.comments&&(this.comments=new ZSComments(a)),this.config.loadFiles.align&&(this.align=new ZSAlign(a)),this.config.loadFiles.utils&&(this.utils=new ZSEditorUtils(a)),this.config.isSupported.pathBreak&&(this.pathBreak=new ZSPathBreak(a)),this.config.loadFiles.crop&&(this.crop=new ZSCrop(a)),this.config.loadFiles.pictureProps&&(this.pictureProps=new ZSPictureProps(a)),this.config.loadFiles.shapeObjectEditor&&(this.shapeObjectEditor=new ZSShapeObjectEditor(a)),this.config.loadFiles.transform&&(this.transform=new ZSShapeEditorTransform(a),this.resize=this.transform.resize,this.rotate=this.transform.rotate,this.origin=this.transform.origin,this.move=this.transform.move,this.handle=this.transform.handle),this.config.loadFiles.shapeEvent&&(this.shapeEvent=new ZSShapeEvent(a)),this.config.loadFiles.table&&(this.tableEditor=new ZSTableEditor(a)),this.config.loadFiles.chart&&(this.chartEditor=new ZSChartEditor(a)),$(e).data("editor",this)}getShapeContainer(e){return this.config.get.shapeContainer(e)}getBboxContainer(){return this.config.get.bboxContainer()}getDrawContainer(){return this.config.drawcontainer}remove(e){let t=this.getShapeContainer(),a=$("#"+e,t);$(a).remove(),this.selector.removeBBox()}clear(e,t){e=e||"all";let a=this.config.isSupported;this.crop&&this.defaults.crop.cropBox&&(this.crop.removeCropFrame(),this.defaults.crop.cropBox=!1),this.editPoint&&this.editPoint.remove(),this.selector&&(this.selector.removeBBox(),this.selector.clear(e,void 0,t)),a.draw&&this.draw.clear(),a.erase&&this.erase.clear(),this.pictureProps&&this.pictureProps.pictureProps&&(this.pictureProps.pictureProps.setTransparentColor=!1),this.config.container.trigger("shapeeditor_cleared")}triggerData(e,t,a=!1){let o=[];return t=a?{pos:$.extend(!0,{},t.pos)}:$.extend(!0,{},t),o.push({id:e.nvOProps.nvDProps.id,data:{action:"modify",data:{props:{transform:t}}}}),e.type===ShapeConstants.ShapeNodeType.CONNECTOR&&e.nvOProps.nvODProps&&(delete e.nvOProps.nvODProps,o.push({id:e.nvOProps.nvDProps.id,data:{action:"removeData",data:["nvOProps.nvODProps"]}})),o}getSelectedShapes(){return this.selector?this.selector.updateShapes.getShapes():[]}getSelectedShapesById(e){return this.selector?this.selector.updateShapes.getSelectedShapesById(e):void 0}getEditableShapes(e,t,a,o){return this.selector?this.selector.getEditableShapes(e,t,a,o):[]}isEditorOnFocus(){var e=$(document.activeElement),t=this.getDrawContainer().attr("id");return!!e.closest("#"+t).length}selectShapes(e,t,a,o,i){this.selector.selectShapes(e,t,a,o,i)}unSelectShapes(e,t,a){this.selector.unSelectShapes(e,t,a)}getCursorIndex(){this.commonTextEditor.textEditor.textcursor.getIndex()}updateShapeData(e){this.selector.updateShapeData(e)}selectAll(){this.selector.selectAll()}clearEventData(){this.eventData=void 0}refreshEditor(e,t){let a,o,i=this.getEditorState(),r=this.getShapeContainer(),s=[];if(i){if(s=this.getSelectedShapes(),e){if(s[0].chart.type&&"chartArea"!==s[0].chart.type)return void this.chartEditor.updateSelectedShapes(e);if(e=e.isTable&&e.tableData?e.tableData:e.groupshape?e.groupshape:e,a=e.nvOProps.nvDProps.id,(o=this.selector.check(a))&&!o.grpShape?(s=[this.getSelectedShapes()[o.index]],this.selector.update(s[0],e),e.type===ShapeConstants.ShapeNodeType.GRAPHICFRAME&&"TABLE"===e.obj.type&&(i=i===this.textEditing?this.shapeSelected:i,t.clearTable&&r.trigger("clear_table"))):o&&o.grpShape?(s=[this.getSelectedShapes()[o.index[0]]],this.selector.update(s[0],e,a)):i!==this.cropped&&(s=[]),e.type===ShapeConstants.ShapeNodeType.CONNECTOR&&o&&!o.grpShape){let t=$("#"+a,this.getShapeContainer());this.connector.updateConnector(e,t)}}let d,p=this.getSelectedShapes();if(!(p&&p[0]&&p[0].parentIds&&p[0].parentIds.length)||e&&e.nvOProps||(d=!0),!d&&(t&&t.NoCursorModify||this.config.isSupported.text&&i===this.textEditing&&this.commonTextEditor.refresh(o),!t||!t.NoSelection)){if(this.selector.removeBBox(a),p&&p[0]&&p[0].parentIds.length&&(d=!0),!e&&i!==this.cropped)for(var n=0;n<s.length;n++)this.selector.update(s[n]),this.refreshShape(s[n],i);if(s&&s[0]&&s[0].parentIds.length){let e=s[0].parentIds[s[0].parentIds.length-1],t=this.config.get.shape(e),a=$("#"+e,this.config.container);this.selector.bbox.create({data:t,box:a},!0)}}if(d){let t=this.getSelectedShapes()[0].parentIds[this.getSelectedShapes()[0].parentIds.length-1],a=$("#"+t,r);e=e||this.config.get.shape(t);let o=this.getSelectedShapes()[0].data.nvOProps.nvDProps.id;this.selector.unSelectShapes([o]),this.selectShapes([{box:a,data:e}])}this.config.container.trigger("selectedShape_modified")}}refreshShape(e,t){if($.isEmptyObject(e))return;let a,o=this.config.container,i=e.data,r=(i=i.groupshape?i.groupshape:i).nvOProps.nvDProps.id;switch(t){case this.cropped:this.defaults.crop.cropBox&&this.crop.removeCropFrame();break;case this.textEditing:this.config.isSupported.text&&this.commonTextEditor.refresh();break;case this.shapeSelected:if(!Shape.touchDevice){if(a=$("#"+r,o),i.type===ShapeConstants.ShapeNodeType.GRAPHICFRAME)if("TABLE"===i.obj.type)ZSTable.updateTableDimensionData(i,a);else{}this.config.isSupported.shapeEdit&&(this.editPoint&&this.editPoint.editingMode?i.type===ShapeConstants.ShapeNodeType.SHAPE?this.editPoint.create(i):(this.editPoint.remove(),this.selector.bbox.create({data:i,box:a})):this.selector.bbox.create({data:i,box:a}))}break;case this.transparent:!Shape.touchDevice&&this.config.isSupported.shapeEdit&&(a=$("#"+r,o),this.selector.bbox.create({data:i,box:a}),this.shapeEvent.setCursorType(this.config.cursorTypes.POINTER))}}getEditorState(){let e=void 0;return this.crop&&this.defaults.crop.cropBox?e=this.cropped:this.config.isSupported.text&&!isNaN(this.defaults.text.from.num.para)?e=this.textEditing:this.pictureProps&&this.pictureProps.setTransparentColor?e=this.transparent:this.getSelectedShapes().length>0&&(e=this.shapeSelected),e}focusEditor(){let e=!!this.config.container.data("lock");this.config.isSupported.text&&this.IMESupport&&this.shapeEvent.textEvent.editing()&&!e?this.commonTextEditor.textEditor.focusEditor():this.focusShape()}focusShape(){let e=!!this.config.container.data("lock");this.config.isSupported.text&&this.IMESupport?e||this.commonTextEditor.textEditor.focusEditor():this.config.focusDrawContainer(),this.config.container.trigger("focused")}editorOnBlur(){this.config.isSupported.text&&this.commonTextEditor.textEditor.editorOnBlur()}editorOnFocus(){this.config.isSupported.text&&this.commonTextEditor.textEditor.editorOnFocus()}noSelect(e,t){this.selector.bbox.create({data:t}),this.showNotify(e,t)}showNotify(e,t){let a;t.type===ShapeConstants.ShapeNodeType.GROUPSHAPE?a=this.config.get.label("cannotedit"+t.type.toLowerCase()):t.nvOProps.nvODProps&&t.nvOProps.nvODProps.locks&&t.nvOProps.nvODProps.locks.noSelect&&(a=this.config.get.label("cannoteditnoselect"));let o=$("<div class='ui-status-wrapper'><div id = 'shapeNotify' class = 'ui-state-info ui-corner-all ui-znotifier'><span class = 'ui-znotifier-message'>"+a+"</span></div></div>");o.css({position:"absolute",left:e.pageX+30+"px",top:e.pageY-30+"px","z-index":1e4}),$(document.body).append(o),setTimeout(function(){o.fadeOut(1500,function(){o.remove(),this.selector.removeBBox(t.nvOProps.nvDProps.id)})},500)}scaleContainer(e){this.pathBreak&&this.pathBreak.isBreaking()?this.pathBreak.containerScaled(e):this.containerScaled(e),this.containerMoved(e),this.container.trigger("containerscaled",{scale:e})}containerScaled(e){let t=this.config.get.bboxContainer(),a=$(".bbox",t),o=this.config.isSupported,i=this.getSelectedShapes();if(i.length&&o.shapeEdit){let t=this.selector.bunchSelect?this.selector.bunchSelect.shapes:[];if(t&&t.length){let a=t[0];return a.data.scale=e,this.selector.removeBBox(),void this.selector.bbox.create({data:a.data})}for(let t of i)if(t.data.scale=e,a.length&&(this.selector.updateBBox(t.data,t.box,!1),t.parentIds&&t.parentIds.length)){let e=t.parentIds[t.parentIds.length-1],a=this.config.get.shape(e),o=Shape.box(a,this.getShapeContainer());a.type==ShapeConstants.ShapeNodeType.GROUPSHAPE&&this.selector.updateBBox(a,o,!1)}this.editPoint&&this.editPoint.editingMode?this.editPoint.continueEditing():a.length||this.selector.bbox.create(i)}}containerMoved(){this.config.isSupported.text&&this.commonTextEditor.containerMoved(),this.focusEditor()}getModifyingBox(e,t){let a=e.type?e.type.toLowerCase():void 0;void 0!==e[a]&&(e=e[a]);let o=e.nvOProps.nvDProps.id,i=this.getShapeContainer(t),r=$("#"+this.shapeEvent.duplicateId+o,i);if(0===r.length&&(this.config.isSupported.cloneEditing&&(o=this.clone.options.cloneid+o),r=$("#"+o,i)),r.data("modifying")&&0!==r.length)return r}checkLockStatus(e,t){let a=$.isArray(t)?t:[t],o=!1;for(let i=0;i<a.length;i++)if(t="no"+a[i],!$.isEmptyObject(e)){let a=e.data?e.data:e,i=!!a&&a.nvOProps,r=!(!i||!i.nvODProps)&&i.nvODProps;if(o=!!(r&&r.locks&&r.locks[t])&&{locks:r.locks})break}return o}setModifyingData(e,t,a){let o,i=e.data.element,r=t.props.transform;i===this.transform.move?o=Util.extend(!0,{},r.pos):i===this.transform.resize?(o=Util.extend(!0,{},r.pos),Util.extend(!0,o,r.dim),o.rotAngle=Shape.getAngle(r),o.flipv=r.flipv,o.fliph=r.fliph):i===this.transform.rotate&&((o=Util.extend(this.transform,{},r.pos)).rotAngle=Shape.getAngle(r)),a.data(i.modData,o)}getModifyingShapes(e){return void 0!==e.data.duplicateshapes&&0!==e.data.duplicateshapes.length?e.data.duplicateshapes:this.config.isSupported.cloneEditing?e.data.cloneshape:e.data.nocloneshape}isCropingAShape(){return this.getSelectedShapes().length&&-1!==this.getSelectedShapes()[0].box.attr("id").indexOf("crop")}isTextSelected(){return this.commonTextEditor.textEditor.textselect.isSelected()}textComposerInit(e){this.commonTextEditor.textComposer.init(e)}clearTextEditor(e,t,a){this.config.isSupported.text&&this.commonTextEditor.textEditor.clear(e,t,a)}isTextEditable(e){return this.commonTextEditor.isEditable(e)}isTextEditing(){return this.shapeEvent.textEvent.editing()}isContainerLockedFromEditing(){return this.config.isContainerLockedFromEditing()}getShapesOfZero(){return this.selector.getShapesOfZero()}getTextIndex(e,t){return e=void 0!==e?e:0,t=void 0!==t?t:0,this.defaults.text.composer.position[e][t]-1}setDefaultTextIndices(e,t){let a=this.getFromTo();a.from.num.index=isNaN(e)?a.from.num.index:e,a.to.num.index=isNaN(t)?a.to.num.index:t}getFromTo(){return this.commonTextEditor.textEditor._getFromTo()}isCropBox(){return this.defaults.crop.cropBox}getDefaultText(){return this.defaults.text}getDefaultDrawData(){return this.defaults.draw}isEditingState(){return this.defaults.editing}getDefaultTextEditor(){return this.defaults.text.editor}selectChart(e,t,a,o,i=!1){this.selector.selectChart(e,t,a,o,!1)}getTableSelection(){let e=this.getSelectedShapes()[0];return e&&e.table?e.table:{}}getChartSelection(){let e=this.getSelectedShapes()[0];return e&&e.chart?e.chart:{}}getCloneIndex(e,t){var a=0;return $.each(e,function(e,o){if(o.data.nvOProps.nvDProps.id===t)return a=e,!1}),a}removeBBox(e){this.selector.bbox.remove(e)}getBoundingDimById(e){if(e.length<1)return;let t=[];for(let a of e)t.push({data:this.config.get.shape(a)});return this.getBoundingDimensions(t)}getBoundingDimensions(e){if((e=e||this.getSelectedShapes()).length<1)return;let t=this.getOuterCP(e),a={};if(t.length>1){let e=VectorUtil.getMinAndMax(t),o={},i={};o.left=e.small.x,o.top=e.small.y,i.width=e.big.x-e.small.x,i.height=e.big.y-e.small.y,a.dim=i,a.pos=o}return a}getOuterCP(e){let t=[];for(let a of e){a=a.data?a.data:a;let e=Shape.outerBBox(a);if(a.type===ShapeConstants.ShapeNodeType.GROUPSHAPE){ShapeObject.updateShapeData(Grouping.props.transform,a,void 0,!0);let t=this.getOuterCP(a.shapes);e=t&&t.length?e.concat(t):e}t=e&&e.length?t.concat(e):t}return t}}class ZSConnector{constructor(e){this.editor=e,this.connector="connector",this.connectedBBox="connected",this.connectorData="connectorPoint",this.ELBOW="Elbow",this.CURVED="Curved",this.LINE="Line",this.defaultPos={0:{x:!0,y:!0},90:{x:!1,y:!0},180:{x:!1,y:!1},270:{x:!0,y:!1}},this.conGenre={Elbow:{parallel:{type1:ShapeConstants.PresetShapeGeometry.ELBOW_CONNECTOR3,type2:ShapeConstants.PresetShapeGeometry.ELBOW_CONNECTOR5},perpendicular:{type1:ShapeConstants.PresetShapeGeometry.ELBOW_CONNECTOR2,type2:ShapeConstants.PresetShapeGeometry.ELBOW_CONNECTOR4},default:ShapeConstants.PresetShapeGeometry.ELBOW_CONNECTOR3},Curved:{parallel:{type1:ShapeConstants.PresetShapeGeometry.CURVED_CONNECTOR3,type2:ShapeConstants.PresetShapeGeometry.CURVED_CONNECTOR5},perpendicular:{type1:ShapeConstants.PresetShapeGeometry.CURVED_CONNECTOR2,type2:ShapeConstants.PresetShapeGeometry.CURVED_CONNECTOR4},default:ShapeConstants.PresetShapeGeometry.CURVED_CONNECTOR3},Line:{default:ShapeConstants.PresetShapeGeometry.LINE}},this.oppositeAngle={270:90,90:270,180:0,0:180},this.otherEnd={start:"end",end:"start"}}getShapeData(e,t){let a,o=this.editor.config.get.shape(e);if($("#"+e,this.editor.getShapeContainer()).data(Shape.parentId)&&o)a=t?this.editor.shapeObjectEditor.EDITORS.GROUPSHAPE.mData(o,t):this.editor.shapeObjectEditor.EDITORS.GROUPSHAPE.modifydata(o);else{let t=this.editor.getSelectedShapes();for(let o=0;o<t.length;o++)if(e==t[o].data.nvOProps.nvDProps.id){a=t[o].data;break}}return a||(a=this.editor.config.get.shape(e)),a}removeConnectorPoints(){$("."+this.connector).remove()}showConnectorPoints(e){let t=e.data()[Shape.connector];if(t){let a=e.attr("id"),o=this.getShapeData(a);if(o){let a=ZSBBoxUtil.getBBoxData(this.connector,o);a.selectorStrokeWidth=18;let i=a.props.transform,r=o.props.transform.pos;a.type=ShapeConstants.ShapeNodeType.SHAPE,a.className=this.connector+" "+Shape.shapeClass,a.props.geom.preset.modifiers=[.3];let s=this,n=this.editor,d=n.config.get.scale(),p=Shape.getAngle(o.props.transform),l=n.config.get.boxOffset();for(let n in t){let h=t[n];a.nvOProps.nvDProps.id=this.connector+n;let c=s.rotatedValue(h,o);i.pos.left=(r.left+c.x)*d-.5*i.dim.width,i.pos.top=(r.top+c.y)*d-.5*i.dim.height,i.pos.left+=l.left,i.pos.top+=l.top,i.rotAngle=p;let f=Shape.create.draw(a,s.editor.config.container);f.data(s.connectorData,{point:h,box:e,shapeData:o})}}}}_get(e,t,a,o){let i=this,r=this.editor.config.get.shape(a),s=r.nvOProps.nvODProps,n=e.data(Shape.connector),d=t.nvOProps.nvDProps.id;if("clonebox"==d.split("_")[0]&&(d=d.split("_")[1]),s&&s.start&&s.start.id==d){let e=i.getData(r,t,n[s.start.index]);e.pos="start",o.push(e)}if(s&&s.end&&s.end.id==d){let e=i.getData(r,t,n[s.end.index]);e.pos="end",o.push(e)}return o}getInnerShapeData(e,t,a,o){let i=this;for(let r in t.shapes){let s=t.shapes[r];if(s.type==ShapeConstants.ShapeNodeType.GROUPSHAPE)s=s.groupshape?s.groupshape:s,i.getInnerShapeData(e,s,a,o);else{let e=$("#"+s.nvOProps.nvDProps.id,i.editor.getShapeContainer());i._get(e,s,a,o)}}}get(e,t){let a=[],o=this.editor.config.get.shapes.all(ShapeConstants.ShapeNodeType.CONNECTOR),i=this;for(let r in o){let s=o[r];t.type==ShapeConstants.ShapeNodeType.GROUPSHAPE?i.getInnerShapeData(e,t,s,a):i._get(e,t,s,a)}return a}getData(e,t,a){let o={id:t.nvOProps.nvDProps.id},i={data:e,box:$("#"+e.nvOProps.nvDProps.id,this.editor.config.container),shapeId:o.id};t.props.transform.pos;return i}reactToTarget(e){for(let t in this.editor.idContains){let a=this.editor.idContains[t];if(e&&-1!=e.indexOf(a))return!1}return!0}refreshConnectorPoints(e,t){if(-1==e.indexOf(this.connectedBBox)&&-1==e.indexOf(this.connector)&&-1==e.indexOf("box")&&-1==e.indexOf("border"))this.removeConnectorPoints(),this.showConnectorPoints(t);else if(-1!=e.indexOf(this.connectedBBox)&&-1!=e.indexOf("box")&&-1==e.indexOf("border")){let e=t.shapeData.nvOProps.nvDProps.id,t=$("#"+e,this.editor.getShapeContainer());this.removeConnectorPoints(),this.showConnectorPoints(t)}}dragConnector(e,t,a,o,i){this.editor.getShapeContainer();let r=ZSEventHandler.getTarget(e).closest("."+Shape.shapeClass),s=r.attr("id"),n=this.reactToTarget(s);if(!this.editor.config.handleConnectorSelection(e,t)){let t=this.editor.config.isSupported.connectorPoints;t&&e.data.targetId!=s&&(e.data.targetId=s,n&&s?this.refreshConnectorPoints(s,r):this.removeConnectorPoints())}let d=this.editor.getSelectedShapes(),p=e.data.flip?e.data.flip:d[a].data.props.transform,l=this.terminal(o,p),h=this.coordinates(e,e.data.targetId,l),c=d[a].data.props.transform,f=d[a].data.nvOProps.nvODProps;return this.change(e,t,l,o,c,h,f,i,e.data.moveTo)}getConnectorAngle(e,t){let a;return t=t<0?t+360:t,a=t>this.editor.resize.degree44&&t<this.editor.resize.degree135?e+90:t>this.editor.resize.degree134&&t<this.editor.resize.degree225?e+180:t>this.editor.resize.degree224&&t<this.editor.resize.degree315?e+270:e,a%=360}getBBox(e){let t=void 0,a=void 0;return e.fliph||e.flipv?e.fliph&&!e.flipv?(t="nebox",a="swbox"):!e.fliph&&e.flipv?(t="swbox",a="nebox"):e.fliph&&e.flipv&&(t="sebox",a="nwbox"):(t="nwbox",a="sebox"),{start:t,end:a}}terminal(e,t){let a=this.getBBox(t);return e==a.start?"start":e==a.end?"end":void 0}curvedOrElbow(e){return e==ShapeConstants.PresetShapeGeometry.ELBOW_CONNECTOR2||e==ShapeConstants.PresetShapeGeometry.ELBOW_CONNECTOR3||e==ShapeConstants.PresetShapeGeometry.ELBOW_CONNECTOR4||e==ShapeConstants.PresetShapeGeometry.ELBOW_CONNECTOR5?this.ELBOW:e==ShapeConstants.PresetShapeGeometry.CURVED_CONNECTOR2||e==ShapeConstants.PresetShapeGeometry.CURVED_CONNECTOR3||e==ShapeConstants.PresetShapeGeometry.CURVED_CONNECTOR4||e==ShapeConstants.PresetShapeGeometry.CURVED_CONNECTOR5?this.CURVED:this.LINE}rotatedValue(e,t){let a=t.props.transform,o=.5*a.dim.width,i=.5*a.dim.height,r=Shape.getAngle(a),s=VectorUtil.getHTMLDimension(e[0]),n=VectorUtil.getHTMLDimension(e[1]);s=a.fliph?a.dim.width-s:s,n=a.flipv?a.dim.height-n:n;let d=zoho.math.getRotatedValue(r,s,n,o,i);return d.angle=this.getConnectorAngle(0,e[2]),d.angle=a.fliph&&(0==d.angle||180==d.angle)?this.oppositeAngle[d.angle]:d.angle,d.angle=a.flipv&&(90==d.angle||270==d.angle)?this.oppositeAngle[d.angle]:d.angle,d.angle=this.getConnectorAngle(d.angle,r),d}coordinates(e,t,a){let o;if(t&&-1!=t.indexOf(this.connector)){let e=$("#"+t,this.editor.config.container),i=e.data(this.connectorData),r=i.point,s=i.box,n=s.attr("id"),d=this.getShapeData(n),p=d.props.transform.pos,l=this.rotatedValue(r,d),h={};h[a]={id:n,index:parseInt(t.split(this.connector)[1])},o={coord:{x:l.x+p.left,y:l.y+p.top},angle:l.angle,boxData:d,connectorData:h,cpoints:r}}else o={coord:{x:e.data.position.x,y:e.data.position.y}};return o}update(e){let t=0,a=0,o=0,i=0;if(e.boxData){t=VectorUtil.getHTMLDimension(e.cpoints[0]),a=VectorUtil.getHTMLDimension(e.cpoints[1]),o=e.boxData.props.transform.dim.width,i=e.boxData.props.transform.dim.height;let r=Shape.getAngle(e.boxData.props.transform);if(r>45&&r<135||r>225&&r<315){let e=o;o=i,i=e,e=t,t=a,a=e}}e.bx=t,e.by=a,e.dim={width:o,height:i}}getFlipVal(e,t,a){let o,i;return 90==a||270==a?(o=this.XOR(t,this.defaultPos[a].y),i=this.XOR(e,this.defaultPos[a].x)):(o=this.XOR(e,this.defaultPos[a].x),i=this.XOR(t,this.defaultPos[a].y)),{flipx:o,flipy:i}}changeFlipVal(e,t,a,o,i){let r,s=o.fliph,n=o.flipv,d=e>=0,p=t>=0,l=this.getFlipVal(d,p,i),h=l.flipx,c=l.flipy,f=this.XOR(h,s),u=this.XOR(c,n);return f||u?f&&!u?r=this.editor.resize.bbox[a].flipx:!f&&u?r=this.editor.resize.bbox[a].flipy:f&&u&&(r=this.editor.resize.bbox[a].flipxy):r=a,{isNeg:this.editor.resize.bbox[r].isNeg,fliph:h,flipv:c}}changeDimension(e,t,a){if(90==e||270==e){let e=t;t=a,a=e}return{w:t,h:a}}getConnectorData(e,t,a,o,i,r,s){let n,d,p,l,h,c,f,u=this.otherEnd[t];if(i&&i[u]){let t,a=o[u].id,i=this.editor.selector.check(a);if(e&&i){let o="clonebox_"+(a="clonebox_"+a);i.grpShape&&(o="clonebox_"+i.shape.data.nvOProps.nvDProps.id);var m=this.editor.getCloneIndex(e.data.cloneshape,o);if(t=e.data.cloneshape[m].box,(n=e.data.cloneshape[m].data).type==ShapeConstants.ShapeNodeType.GROUPSHAPE){let e=ShapeObject.getShape(a,n),o=$.extend(!0,{},e);n=this.editor.shapeObjectEditor.EDITORS.GROUPSHAPE.mData(o,n),t=ShapeObject.box(n,this.editor.config.container)}}else t=$("#"+a,this.editor.config.container),n=this.getShapeData(a);let r=t.data(Shape.connector);f=$.extend(!0,[],r[o[u].index]),void 0!==s&&(f[0]+=s.x,f[1]+=s.y);let h=this.rotatedValue(f,n),c=this.editor.config.get.boxOffset(t),g=n.props.transform.pos;p=h.x+g.left+c.left,l=h.y+g.top+c.top,d=h.angle}else f=[0,0,d="start"==t?0:e&&e.data.angle?e.data.angle:180],p=r.x,l=r.y;a.cpoints?(h=a.angle,c=a.cpoints):c=[0,0,h="start"==t?e&&e.data.angle?e.data.angle:180:d];let g={};return g[u]={x:p,y:l,angle:d,boxData:n,cpoints:f},g[t]={x:a.coord.x,y:a.coord.y,angle:h,boxData:a.boxData,cpoints:c},g.anchor={x:g[u].x,y:g[u].y},g}change(e,t,a,o,i,r,s,n,d){this.editor.defaults.connector.ck=40;let p,l=t.data,h=this.curvedOrElbow(l.props.geom.preset.type),c=this.getConnectorData(e,a,r,l.nvOProps.nvODProps,s,n,d),f=c.start,u=c.end;n=c.anchor,f.angle=this.getConnectorAngle(0,f.angle),u.angle=this.getConnectorAngle(0,u.angle),p=f.angle;let m=Math.abs(f.angle-u.angle);m=this.getConnectorAngle(0,m),this.update(f),this.update(u);let g=void 0!==s&&void 0!==s[this.otherEnd[a]]&&void 0!==s[this.otherEnd[a]].id||void 0!==r.connectorData,S=this.connectorType(f,u,m,h,g),x=S.connector,v=S.objectAvoidance,y=u.x-f.x,E=u.y-f.y,C=this.changeFlipVal(y,E,o,i,p),O=C.fliph,b=C.flipv;l.isNeg=C.isNeg;let T=this.changeDimension(p,y,E),w={width:y=Math.abs(T.w),height:E=Math.abs(T.h),fliph:O,flipv:b},D=g?this.getModifiers(x,w,m,p,f,u,v):[.5];l.props.geom.preset.type=x,l.props.geom.preset.modifiers=D;let P={width:y,height:E,rotAngle:p,rotate:p,fliph:O,flipv:b,geom:l.props.geom,anchor:n};return r.connectorData?P.connectorData=r.connectorData:(P.connectorData={},P.connectorData[a]={}),P}internalDistance(e){if(!e.boxData)return 0;let t,a=e.boxData.props.transform,o=e.cpoints[2],i=a.dim;return 0==o?t=i.width-VectorUtil.getHTMLDimension(e.cpoints[0]):90==o?t=i.height-VectorUtil.getHTMLDimension(e.cpoints[1]):180==o?t=VectorUtil.getHTMLDimension(e.cpoints[0]):270==o&&(t=VectorUtil.getHTMLDimension(e.cpoints[1])),Math.abs(t)}threeWayModifier(e,t,a){let o=Math.abs(t.angle-a.angle);o=0===o?180:o;t.angle;let i=0;if(o){let o=this.internalDistance(a),r=this.internalDistance(t),s=.5*(e.width-(r+o));i=(r+s)/e.width}else{let o=this.editor.defaults.connector;if(e.fliph){let a=this.internalDistance(t);i=-1*(o.ck+a)/e.width}else{let t=this.internalDistance(a);i=(o.ck+t)/e.width+1}}return[i]}fourWayModifier(e,t,a){let o,i,r,s,n,d=this.editor.defaults.connector,p=(Math.abs(t.angle-a.angle),t.angle),l=-1*d.ck/e.width,h=1+d.ck/e.height,c=a.x>=t.x,f=a.y>=t.y;return t.condition&&(o=this.internalDistance(a),i=this.internalDistance(t),h=1+(o+d.ck)/e.height,90==p||270==p?(r=f?a.by:a.dim.height-a.by,n=(s=f?t.dim.height-t.by:t.by)+r,l=e.width-n>0?(s+.5*(e.width-n))/e.width:1+(i+d.ck+(a.dim.height-r))/e.width):(n=(s=i)+(r=c?a.bx:a.dim.width-a.bx),l=e.width-n>0?(s+.5*(e.width-n))/e.width:1+(i+d.ck+(a.dim.width-r))/e.width)),a.condition&&(o=this.internalDistance(a),l=-1*((i=this.internalDistance(t))+d.ck)/e.width,90==p||270==p?(n=(s=c?t.dim.width-t.bx:t.bx)+(r=c?a.bx:a.dim.width-a.bx),h=e.height-n>0?(s+.5*(e.height-n))/e.height:-1*(o+d.ck+t.dim.width-s)/e.height):(n=(s=f?t.dim.height-t.by:t.by)+(r=f?a.by:a.dim.height-a.by),h=e.height-n>0?(s+.5*(e.height-n))/e.height:-1*(o+d.ck+t.dim.height-s)/e.height)),t.condition||a.condition||(o=this.internalDistance(a),i=this.internalDistance(t),h=1+(o+d.ck)/e.height,90==p||270==p?(r=f?a.by:a.dim.height-a.by,n=(s=c?t.bx:t.dim.width-t.bx)+r,l=e.width-n<0?-1*(Math.abs(e.width-r)+i+d.ck)/e.width:-1*(d.ck+i)/e.width):(r=c?a.bx:a.dim.width-a.bx,n=(s=f?t.by:t.dim.height-t.by)+r,l=e.width-n<0?-1*(Math.abs(e.width-r)+i+d.ck)/e.width:-1*(d.ck+i)/e.width)),[l,h]}fiveWayModifier(e,t,a,o){let i=this.editor.defaults.connector,r=(Math.abs(t.angle-a.angle),t.angle),s=this.internalDistance(t),n=this.internalDistance(a),d=(s+i.ck)/e.width,p=0,l=0;if(o){let o=a.x>t.x,h=a.y>t.y;t.condition&&(p=1+(n+i.ck)/e.width,90==r||270==r?(diff=o?a.bx:a.dim.width-a.bx,l=-1*(Math.abs(e.height-diff)+i.ck)/e.height,d=.5*(e.width-a.dim.height)/e.width):(diff=h?a.by:a.dim.height-a.by,l=-1*(Math.abs(e.height-diff)+i.ck)/e.height,d=.5*(e.width-a.dim.width)/e.width)),a.condition&&(d=-1*(s+i.ck)/e.width,90==r||270==r?(diff=o?t.bx:t.dim.width-t.bx,l=-1*(Math.abs(t.dim.width-diff)+i.ck)/e.height,p=(t.dim.height+.5*(e.width-t.dim.height))/e.width):(diff=h?t.by:t.dim.height-t.by,l=-1*(Math.abs(t.dim.height-diff)+i.ck)/e.height,p=(t.dim.width+.5*(e.width-t.dim.width))/e.width))}else{d=e.fliph?-1*d:d+1,p=(n+i.ck)/e.width+1;let o,s,h=a.x>t.x,c=a.y>t.y;90==r||270==r?(o=h?t.dim.width-t.bx:t.bx,s=h?a.bx:a.dim.width-a.bx,l=e.height-(o+s)>0?(o+.5*(e.height-(o+s)))/e.height:1+(i.ck+(a.dim.width-s))/e.height):(o=c?t.dim.height-t.by:t.by,s=c?a.by:a.dim.height-a.by,l=e.height-(o+s)>0?(o+.5*(e.height-(o+s)))/e.height:1+(i.ck+a.dim.height-s)/e.height)}return[d,l,p]}getModifiers(e,t,a,o,i,r,s){let n;return t&&(t.width=t.width||1,t.height=t.height||1),e==ShapeConstants.PresetShapeGeometry.ELBOW_CONNECTOR3||e==ShapeConstants.PresetShapeGeometry.CURVED_CONNECTOR3?n=this.threeWayModifier(t,i,r):e==ShapeConstants.PresetShapeGeometry.ELBOW_CONNECTOR4||e==ShapeConstants.PresetShapeGeometry.CURVED_CONNECTOR4?n=this.fourWayModifier(t,i,r):e!=ShapeConstants.PresetShapeGeometry.ELBOW_CONNECTOR5&&e!=ShapeConstants.PresetShapeGeometry.CURVED_CONNECTOR5||(n=this.fiveWayModifier(t,i,r,s)),n}objectAvoidance3To5(e,t,a){let o,i=e.angle;if(a=0===a?180:a,e.boxData&&t.boxData&&!a){let a=e.boxData.props.transform.pos.left,r=e.boxData.props.transform.pos.top,s=t.boxData.props.transform.pos.left,n=t.boxData.props.transform.pos.top;90==i||270==i?(e.x>s&&e.x<s+t.dim.width||t.x>a&&t.x<a+e.dim.width)&&(o=!0):(t.y>r&&t.y<r+e.dim.height||e.y>n&&e.y<n+t.dim.height)&&(o=!0)}return o}connectorType(e,t,a,o,i){let r,s,n,d,p=this.lineMeet(e,t),l=this.lineMeet(t,e);return 0==a||180==a?(r="parallel",s=this.objectAvoidance3To5(e,t,a),n=!p&&!l||s?"type2":"type1"):90!=a&&270!=a||(r="perpendicular",n=p&&l?"type1":"type2"),d=o==this.LINE?this.conGenre[o].default:this.conGenre[o][r][n],i||(d=this.conGenre[o].default,s=!1),e.condition=p,t.condition=l,{connector:d,objectAvoidance:s}}lineMeet(e,t){let a,o=e.angle;return 0==o?a=e.x<t.x:90==o?a=e.y<t.y:180==o?a=e.x>t.x:270==o&&(a=e.y>t.y),a}XOR(e,t){return(e||t)&&!(e&&t)}connectShapes(e,t){let a=this,o=this.editor.getSelectedShapes();e||(e=o[0]),t||(t="Elbow");let i=e.data.nvOProps.nvDProps.id;for(let r in o){let s=o[r];if(i!=s.data.nvOProps.nvDProps.id){let o=a.isConnected(s.connector,e.connector);if(o)a.reRoute(o.box,o.data);else{o=a.add(s,e,t);let i=$.extend(!0,{},o);o.pos="start",i.pos="end",s.connector.push(o),e.connector.push(i)}}}}isConnected(e,t){let a;for(let o in e){let i=e[o];for(let e in t){let o=t[e];if(i&&o&&i.data.nvOProps.nvDProps.id==o.data.nvOProps.nvDProps.id){a=i;break}}}return a}disConnect(){let e=this.editor.getSelectedShapes(),t=[];for(let a in e){let o=e[a],i=o.conector;for(let e in i){let a=i[e],o=a.data,r=o.nvOProps.nvDProps.id;t.push({id:r,data:{action:"removeData",data:["nvOProps.nvODProps"]}})}}return t}reRoute(e,t){let a=this.shortestPath(e,t);this.editor.config.container.trigger("modified",{shapeData:a,appData:{action:"Editor",refreshUI:!0}})}reRouteConnector(e,t){this.reRoute(e,t),this.editor.selector.updateBBox(t,e)}changeType(e){let t=this.editor.getSelectedShapes(),a=[];for(let o=0;o<t.length;o++){let i=t[o].box,r=t[o].data,s=r.nvOProps.nvODProps;if(s&&s.start&&s.end){let t=s.start,o=s.end,n=$("#"+t.id,this.editor.config.container),d=$("#"+o.id,this.editor.config.container),p=t.index,l=o.index,h=this.getShapeData(t.id),c=this.getShapeData(o.id),f=n.data(Shape.connector),u=d.data(Shape.connector),m=this.editor.config.get.boxOffset(n),g=this.editor.config.get.boxOffset(d),S=this.route(i,r,h,c,f[p],u[l],m,g,e);a.push(S[0]),this.editor.selector.updateBBox(r,i)}}this.editor.container.trigger("modified",{shapeData:a,appData:{action:"Editor",refreshUI:!0}})}shortestPathFromStartPoint(e,t,a){let o=t.nvOProps.nvODProps,i=o.start,r=o.end,s=$("#"+i.id,this.editor.config.container),n=$("#"+r.id,this.editor.config.container),d=i.index,p=r.index,l=this.getShapeData(i.id),h=this.getShapeData(r.id);a||(a={x:0,y:0});let c={};if(h.type===ShapeConstants.ShapeNodeType.GROUPSHAPE){let e=h.props.transform,t=e.dim.width,a=e.dim.height,o=h.props.geom.type,i=h.props.geom[o.toLowerCase()].type;Shape.pathGenerator.setConnector(i,t,a,c)}let f,u=l.props.transform.pos,m=h.props.transform.pos,g=s.data(Shape.connector),S=c.connector?c.connector:n.data(Shape.connector),x=this.editor.config.get.boxOffset(s),v=this.editor.config.get.boxOffset(n),y=this.curvedOrElbow(t.props.geom.preset.type),E=$.extend(!0,[],g[d]);E[0]+=a.x,E[1]+=a.y;let C=this.rotatedValue(E,l);C.x=C.x+u.left+x.left,C.y=C.y+u.top+x.top,p=0;for(let e in S){let t=S[e],a=this.rotatedValue(t,h);a.x=a.x+m.left+v.left,a.y=a.y+m.top+v.top;let o=zoho.math.length(C.x,C.y,a.x,a.y);f||(f=o),o<f&&(f=o,p=e)}let O=S[p];return t.nvOProps.nvODProps.end.index=p,this.route(e,t,l,h,E,O,x,v,y)}add(e,t,a){let o=this.conGenre[a].default,i={shapeObjType:ShapeConstants.ShapeNodeType.CONNECTOR,shapeGeoType:"PRESET",action:o},r=this.editor.config.get.connector(i);r.type=ShapeConstants.ShapeNodeType.CONNECTOR,r.shapeGeoType="PRESET",r.shapeType=o,r.nvOProps.nvDProps.id=Math.uuid(),r.props.geom={preset:{type:o},type:"PRESET"},r.nvOProps.nvODProps={start:{id:e.data.nvOProps.nvDProps.id},end:{id:t.data.nvOProps.nvDProps.id}};let s=Shape.create.draw(r,this.editor.getShapeContainer());return this.shortestPath(s,r),ZSTriggers.triggerEvent("shape_created",r,s,this.editor),{box:s,data:r}}del(e,t){let a=[];if(e.connector&&t.connector)for(let o in e.connector){let i=e.connector[o];for(let e in t.connector){let o=t.connector[e];i.data.nvOProps.nvDProps.id==o.data.nvOProps.nvDProps.id&&a.push(i)}}if(a.length)for(let e in a){let t=a[e];t.box.remove()}}route(e,t,a,o,i,r,s,n,d){let p=this.rotatedValue(i,a),l=this.rotatedValue(r,o),h=a.props.transform.pos,c=o.props.transform.pos;p.x=p.x+h.left+s.left,p.y=p.y+h.top+s.top,l.x=l.x+c.left+n.left,l.y=l.y+c.top+n.top,p.cpoints=i,l.cpoints=r,p.boxData=a,l.boxData=o,this.update(p),this.update(l);let f=Math.abs(p.angle-l.angle),u=this.connectorType(p,l,f,d,!0).connector,m=l.x-p.x,g=l.y-p.y,S=m>=0,x=g>=0;m=m?Math.abs(m):1,g=g?Math.abs(g):1;let v=this.changeDimension(p.angle,m,g),y=this.getFlipVal(S,x,p.angle),E={width:v.w,height:v.h,fliph:y.flipx,flipv:y.flipy},C=this.getModifiers(u,E,f,p.angle,p,l),O=this.editor.config.get.modifiers(t);if(O&&O.length){let e=t.nvOProps.nvODProps.end.index;e%2!=0&&(u=ShapeConstants.PresetShapeGeometry.CURVED_CONNECTOR3)}let b;y.flipx||y.flipy?y.flipx&&!y.flipy?b=2:y.flipx&&y.flipy?b=1:!y.flipx&&y.flipy&&(b=3):b=0;let T=VectorUtil.positionShape(p.angle,[v.w,v.h],p,b),w=t.props.transform;w.rotAngle=p.angle,w.rotate=p.angle,w.dim={width:v.w,height:v.h},w.pos.left=T.left,w.pos.top=T.top,w.fliph=y.flipx,w.flipv=y.flipy,t.props.geom.preset.type=u,t.props.geom.preset.modifiers=C,Shape.props.geom._set(t,this.editor.config.container,e),Shape.props.geom.dependency(t,this.editor.config.container,e),Shape.props.transform.set(t,this.editor.config.container,e),Shape.creator.marker(t,this.editor.config.container,e);let D={};D.props={},D.props.transform=w,D.props.geom=t.props.geom,D.nvOProps={nvODProps:{start:{index:t.nvOProps.nvODProps.start.index},end:{index:t.nvOProps.nvODProps.end.index}}};let P=[];return P.push({id:t.nvOProps.nvDProps.id,data:{action:"modify",data:$.extend(!0,{},D)}}),P}shortestPath(e,t){let a=this;if(t.type==ShapeConstants.ShapeNodeType.CONNECTOR){let o=t.nvOProps.nvODProps;if(o){let i=o.start,r=o.end;if(i&&r){let o,s,n,d=$("#"+i.id,this.editor.config.container),p=$("#"+r.id,this.editor.config.container),l=this.editor.config.get.boxOffset(d),h=this.editor.config.get.boxOffset(p),c=this.getShapeData(i.id),f=this.getShapeData(r.id),u=c.props.transform.pos,m=f.props.transform.pos,g=a.curvedOrElbow(t.props.geom.preset.type),S=d.data(Shape.connector),x=p.data(Shape.connector);for(let e in S){let t=S[e];for(let i in x){let r=x[i],d=a.rotatedValue(t,c),p=a.rotatedValue(r,f);d.x=d.x+u.left+l.left,d.y=d.y+u.top+l.top,p.x=p.x+m.left+h.left,p.y=p.y+m.top+h.top;let g=zoho.math.length(d.x,d.y,p.x,p.y);o||(o=g),g<o&&(o=g,s=e,n=i)}}return t.nvOProps.nvODProps.start.index=s,t.nvOProps.nvODProps.end.index=n,this.route(e,t,c,f,S[s],x[n],l,h,g)}}}}_editingDependency(e,t,a,o,i,r){if(!t)return!0;let s;for(let e in t.connector){let n,d,p=t.connector[e];if(t.data.type==ShapeConstants.ShapeNodeType.GROUPSHAPE){n=ShapeObject.getShape(p.shapeId,t.data);let e=$.extend(!0,{},n);d=this.editor.shapeObjectEditor.EDITORS.GROUPSHAPE.mData(e,t.data),s=t.data}else d=t.data;let l,h=ShapeObject.box(d,this.editor.getShapeContainer(t.box)),c={box:h,data:d,gsData:s};if(a)l=c.box.data();else{let e=c.data,t=e.props.transform.dim,a=e.props.geom.preset;if(a){let e=a.modifiers&&a.modifiers.length?a.modifiers:$.Preset[a.type].modifiers;l=Shape.pathGenerator.getPath(a.type,t.width,t.height,e)}else l=Shape.pathGenerator.getCustomPath(e.props.geom.custom,t.width,t.height)}let f=this.editor.getSelectedShapes(),u=t.data.nvOProps.nvDProps.id.replace("clonebox_",""),m=this.editor.selector.check(u),g=f[m.index].connector[e],S=this.getBBox(g.data.props.transform),x=p.pos,v=S[x],y=g.data.nvOProps.nvODProps,E=y[x].index,C=l[Shape.connector][E],O=this.rotatedValue(C,c.data),b=this.editor.config.get.boxOffset(h),T=c.data.props.transform.pos,w={coord:{x:O.x+T.left+b.left,y:O.y+T.top+b.top},angle:O.angle,boxData:c.data,cpoints:C,connectorData:g.data.nvOProps.nvODProps},D=g.data.props.transform,P=Shape.getAngle(D),L=Shape.getCornerPoints(D.pos,D.dim,P),I=L[this.editor.resize.bbox[v].anchor],A=this.change(o,p,x,S[x],D,w,g.data.nvOProps.nvODProps,I),N=VectorUtil.positionShape(Shape.getAngle(A),[A.width,A.height],A.anchor,p.data.isNeg);A.left=N.left,A.top=N.top;let R=this.editor.config.get.modifiers(p.data);R&&R.length&&(A.geom.preset.modifiers=R);let B=this.editor.resize.refresh(p.data,p.box,A);$.merge(i,B),o&&p.box.data(this.editor.resize.modData,A),r.push({id:p.data.nvOProps.nvDProps.id,data:p.data})}}searchShape(e,t,a,o,i,r){let s=this;r.data.nvOProps.nvDProps;e=e.groupshape?e.groupshape:e;for(let n in e.shapes){let d=e.shapes[n];d.type==ShapeConstants.ShapeNodeType.GROUPSHAPE?s.searchShape(d,t,a,o,i,r):s._editingDependency(n,s1,t,a,o,i)}}editingDependency(e,t,a){let o=this,i=[],r=[];for(let s in e){let n=e[s];o._editingDependency(s,n,t,a,i,r)}let s=this.editor.getSelectedShapes();for(let e in s){let t=s[e];for(let e in r){let a=r[e];a.id==t.data.nvOProps.nvDProps.id&&$.extend(!0,t.data,a.data)}}return i}isBBoxConnected(e){return-1!=e.indexOf(this.connectedBBox)}updateBBoxId(e,t){if(e.type==ShapeConstants.ShapeNodeType.CONNECTOR){let a,o=e.nvOProps.nvODProps,i="",r="",s="",n=this.getBBox(e.props.transform);if(o&&o.start&&o.start.id&&t==n.start&&(a=ZSBBoxUtil.getBBoxData(this.connector,e),i=this.connectedBBox,r=this.connectedBBox+Math.uuid(),s=o.start.id),o&&o.end&&o.end.id&&t==n.end&&(a=ZSBBoxUtil.getBBoxData(this.connector,e),i=this.connectedBBox,r=this.connectedBBox+Math.uuid(),s=o.end.id),a)return{bboxData:a,cname:i,idName:r,connectedTo:s}}}drawupdateData(e,t){if(this.editor.defaults.draw.preset.shapeType==ShapeConstants.ShapeNodeType.CONNECTOR){let a=ZSEventHandler.getTarget(e),o=a.closest("."+Shape.shapeClass),i=o.attr("id");if(i&&-1!=i.indexOf(this.connector)){t.nvOProps.nvODProps={};let e=t.nvOProps.nvODProps,a=o.data(this.connectorData),r=parseInt(i.split(this.connector)[1]);i=a.shapeData.nvOProps.nvDProps.id,e.start={id:i,index:r};let s=a.shapeData,n=this.rotatedValue(a.point,s);t.props.transform.rotAngle=n.angle,t.props.transform.rotate=n.angle;let d=ZSBBoxUtil.getBBoxData(this.connector,t),p=d.props.transform.dim,l=s.props.transform.pos.left+n.x+.5*p.width,h=s.props.transform.pos.top+n.y+.5*p.height;t.props.transform.pos.left=l,t.props.transform.pos.top=h}}}updateConnector(e){let t=e.nvOProps.nvODProps;if(t){if(t.start){let a=this.editor.selector.check(t.start.id);if(a){let t=a.grpShape?a.index[0]:a.index,o=this.editor.getSelectedShapes()[t].connector;this.insertConnectorData(e,o,"start")}}if(t.end){let a=this.editor.selector.check(t.end.id);if(a){let t=a.grpShape?a.index[0]:a.index,o=this.editor.getSelectedShapes()[t].connector;this.insertConnectorData(e,o,"end")}}}}insertConnectorData(e,t,a){let o=!0;for(let a in t){let i=t[a];if(i.data.nvOProps.nvDProps.id===e.nvOProps.nvDProps.id){o=!1;break}}if(o){let o=$("#"+e.nvOProps.nvDProps.id,this.editor.container),i={data:e,box:o,pos:a};t.push(i)}}}class ZSErase{constructor(e){this.editor=e}clear(){this.editor.defaults.erase.ready=!1}all(e){var t=(e||this.editor.config.get.shapeContainer()).children("."+Shape.shapeClass);$.each(t,function(e,t){var a=(t=$(t)).data();a&&a.erasable&&t.remove()}),e||(this.editor.config.container.trigger("erase_all"),this.editor.config.container.trigger("Erased_all_drawing"))}set(){this.editor.defaults.erase.ready=!0}shape(e){var t=e.closest("."+Shape.shapeClass);if(t.length){var a=t.data();if(a&&a.erasable){var o=t.attr("id");setTimeout(function(){t.remove()},50),this.editor.container.trigger("shape_deleted",{id:o})}}}}class ZSTriggers{constructor(){}static triggerEvent(e,t,a,o){"shape_selected"!==e&&"shape_unselected"!==e||!o.config.isSupported.shapeEdit?"shape_created"===e&&o.config.isSupported.draw?$(a).length?$(a).trigger(e,t):o.config.container.trigger(e,t):"escape_drawing"===e?o.config.container.trigger(e):"shape_creation_halted"===e&&o.config.container.trigger(e):(o.config.isSupported.overlay&&o.overlay.remove(),o.config.container.trigger(e,t)),o.editPoint&&o.editPoint.triggerEvent(e,t,a,o)}}class ZSCustomDrawing{constructor(e){this.editor=e,this.selector=e.selector,this.freeform="FREEFORM",this.scribble="SCRIBBLE",this.pen="PEN",this.penTool="PENTOOL",this.curve="CURVE",this.joinOffset=5,this.pathPoints=[],this.arrangedCtrl=void 0,this.prefix={down:"down_",move:"move_"},this.editor.config.isSupported.pentool&&(this.pentool=new ZSPentool(e)),this.editor.config.loadFiles.shapeRecognition&&(this.shapeRecognition=new ZSShapeRecognition(e))}setCustomData(e,t){this.clear();let a=this.editor.defaults.draw;a.genre=e,a.custom.shapeType=t,a.preset.shapeType=void 0}down(e,t,a){this.editor.shapeEvent.isMouseDown=!0;var o=this;let i=o.editor,r=o.selector,s=i.defaults.draw.custom,n=s.shapeType,d=n.toLowerCase(),p=i.config.get.offset(i),l=i.config.get.scale();i.defaults.draw.externalShape||i.editPoint&&i.editPoint.editingMode||!r||r.clear("wait"),t.props.effects&&(s.effects=$.extend(!0,{},t.props.effects),delete t.props.effects),s.bind&&s.tempObj&&s.tempObj.shape?t=s.tempObj.shape.data:o.initiateTransform(t,l),t.nvOProps.nvDProps.name=n,delete t.textBody;let h=(e.pageX-p.left)/l,c=(e.pageY-p.top)/l,f={x:h,y:c};o.initiatePoint(h,c);let u=t.props.geom.custom.pathList,m=o[o.prefix.down+d];if(m)m.call(this,e,t,a,u,f,p,l);else{if(u.length){let e=s.pointTo||{l:f,type:ShapeConstants.PathType.L};o.appendPoint(u,e),s.pointTo=void 0,s.moveTo=void 0}else o.appendPath(u,f,t);o.dimension(f),i.defaults.editing||o.bindEvent(t,p,l,n),i.defaults.editing=!0}}down_pentool(e,t,a,o,i,r,s){this.pentool&&this.pentool.down_pentool(e,t,a,o,i,r,s)}initiateTransform(e,t){let a=this.editor.config.container,o=a.height()/t,i=a.width()/t;e.props.transform.dim={height:o,width:i},e.props.transform.pos.left=0,e.props.transform.pos.top=0,e.props.fills?e.props.fills=[]:e.props.fill&&(e.props.fill.type=ShapeConstants.FillType.NONE),e.props.geom.custom.pathList=[]}initiatePoint(e,t){let a=this,o=this.editor.defaults.draw.custom;o.bind=void 0,a.pathPoints||(a.pathPoints=[]),a.pathPoints.push({x:e,y:t}),o.tempObj||(o.tempObj={sx:e,sy:t,bx:e,by:t,recal:!1,shape:void 0}),o.prePoints[2]&&(o.prePoints[0]=o.prePoints[2]),o.prePoints[1]={x:e,y:t}}appendPath(e,t,a){let o=a.props.transform.dim,i=[{m:{x:t.x,y:t.y},type:ShapeConstants.PathType.M}];e.push({path:i,height:o.height,width:o.width})}appendPoint(e,t){e[e.length-1].path.push($.extend(!0,{},t))}prependPoint(e,t){e[e.length-1].path.splice(0,0,t)}move(e){let t=e.data.editor,a=t.draw.custom,o=t.defaults.draw.custom,i=t.config.get.scale(),r=t.config.get.offset(t);e.data.x=(e.pageX-r.left)/i,e.data.y=(e.pageY-r.top)/i;let s=o.shapeType.toLowerCase(),n=a[a.prefix.move+s].call(a,e);a.createTempPath(e,n),e.data.bx?(Shape.props.geom.set(e.data.shapedata,e.data.shapeContainer,e.data.bx),Shape.props.geom.dependency(e.data.shapedata,e.data.shapeContainer,e.data.bx)):(e.data.bx=Shape.create.draw(e.data.shapedata,e.data.shapeContainer),o.tempObj.shape={bx:e.data.bx,data:e.data.shapedata}),t.defaults.draw.shape=e.data.bx}createTempPath(e,t){let a=this.editor.defaults.draw.custom;a.shapeType.toLowerCase();if(a.tempObj.tempData){let t=a.tempObj.tempData.props;t.transform.pos=$.extend(!0,{},e.data.shapedata.props.transform.pos)}else a.tempObj.tempData=$.extend(!0,{},e.data.shapedata),a.tempObj.tempData.nvOProps.nvDProps.id+=a.shapeType;let o=a.tempObj.tempData.props.geom.custom.pathList;o[o.length-1].path;if(o[o.length-1].path=[],t&&t.startPoint)a.moveTo=t.startPoint;else{let t=e.data.shapedata.props.geom.custom.pathList,o=t[t.length-1].path,i=o[o.length-1],r=i[i.type.toLowerCase()];r=r.length?r[r.length-1]:r,a.moveTo={m:{x:r.x,y:r.y},type:ShapeConstants.PathType.M}}t&&t.endPoint?a.pointTo=t.endPoint:a.pointTo={l:{x:e.data.x-e.data.shapedata.props.transform.pos.left,y:e.data.y-e.data.shapedata.props.transform.pos.top},type:ShapeConstants.PathType.L},o[o.length-1].path[0]=a.moveTo,o[o.length-1].path[1]=a.pointTo,a.tempObj.tempBox?(Shape.props.geom.set(a.tempObj.tempData,e.data.shapeContainer,a.tempObj.tempBox),Shape.props.geom.dependency(a.tempObj.tempData,e.data.shapeContainer,a.tempObj.tempBox)):a.tempObj.tempBox=Shape.create.draw(a.tempObj.tempData,e.data.shapeContainer)}move_freeform(e){return this.editor.defaults.draw.custom.bind?{endPoint:{l:{x:e.data.x,y:e.data.y},type:ShapeConstants.PathType.L}}:this.move_scribblepen(e)}move_scribble(e){return this.move_scribblepen(e)}move_pen(e){return this.move_scribblepen(e)}move_pentool(e){if(this.pentool)return this.pentool.move_pentool(e)}move_scribblepen(e){let t=e.data.cubic?e.data.cubic:[],a=e.data.shapedata.props.geom.custom.pathList,o=a[a.length-1].path,i={x:e.data.x,y:e.data.y},r={l:i,type:ShapeConstants.PathType.L};return o.push(r),t.push(i),this.dimension(i),t>2&&(r={cc:t,type:ShapeConstants.PathType.CC},e.data.cubic=[],o.splice(o.length-3,3),o.push(r)),this.pathPoints.push({x:e.data.x,y:e.data.y}),{endPoint:r}}move_curve(e){let t,a=this.editor.defaults.draw.custom,o=e.data.shapedata.props.geom.custom.pathList,i=o[o.length-1].path,r=e.data.cubic?e.data.cubic:[],s=this,n=ShapeConstants.PathType.L,d=ShapeConstants.PathType.CC,p=i[i.length-1],l=p.type,h=a.prePoints,c=[],f=[];if(1===i.length)t={l:{x:e.data.x,y:e.data.y},type:n};else if(2===i.length){l===n?(f=[i[0].m,i[1].l,{x:e.data.x,y:e.data.y}],a.prePoints=[i[1].l,{x:e.data.x,y:e.data.y}]):(l=d)&&(f=[i[0].m,h[0],{x:e.data.x,y:e.data.y}],a.prePoints[1]={x:e.data.x,y:e.data.y});let t=s.controlPoints(f),o=f[0].x+.5*(t.c1.x-f[0].x),r=f[0].y+.5*(t.c1.y-f[0].y),u=f[2].x+.5*(t.c2.x-f[2].x),m=f[2].y+.5*(t.c2.y-f[2].y);if(l===n){let e={cc:[{x:o,y:r},{x:t.c1.x,y:t.c1.y},{x:f[1].x,y:f[1].y}],type:d};i.pop(),i.push(e)}else p.cc[1]={x:t.c1.x,y:t.c1.y};c=[[o,r,t.c1.x,t.c1.y,f[1].x,f[1].y],[t.c2.x,t.c2.y,u,m,f[2].x,f[2].y]]}else{f=[h[0],h[1],{x:e.data.x,y:e.data.y}];let t=s.controlPoints(f);a.prePoints[2]=t.c2,p.cc&&(p.cc[1]={x:t.c1.x,y:t.c1.y}),c=[[t.c2.x,t.c2.y,.5*(t.c2.x+e.data.x),.5*(t.c2.y+e.data.y),e.data.x,e.data.y]]}for(let e of c)(r=[]).push({x:e[0],y:e[1]}),r.push({x:e[2],y:e[3]}),r.push({x:e[4],y:e[5]}),t={cc:r,type:d};return{endPoint:t}}dimension(e){let t=this.editor.defaults.draw.custom.tempObj,a=e.x,o=e.y;t.sx=a<t.sx?a:t.sx,t.bx=a>t.bx?a:t.bx,t.sy=o<t.sy?o:t.sy,t.by=o>t.by?o:t.by}controlPoints(e){let t=zoho.math.midPoint(e[0],e[1]),a=zoho.math.midPoint(e[1],e[2]),o=zoho.math.midPoint(t,a),i=zoho.math.getDiff(o,t,.5),r=zoho.math.getDiff(o,a,.5),s=zoho.math.getDiff(e[1],i),n=zoho.math.getDiff(e[1],r);return{c1:{x:s.x,y:s.y},c2:{x:n.x,y:n.y}}}stopCurveShape(e){let t=this,a=t.editor,o=t.selector,i=!0,r=a.defaults.draw.custom;t.unbind();let s=r.tempObj?r.tempObj.shape:void 0,n=r.tempObj?r.tempObj.tempBox:void 0;if(s){let e=s.data,a=s.bx;if(r.tempObj.recal||(i=t.reCalculate(e,a)),i&&r.shapeType!==t.pen){let o=t.joinPath(e);t.updateFillForClosedPath(e,a,o)}}t.clearTempData();let d=a.defaults.draw.externalShape,p=r.shapeType;if(t.clearDrawData(),i&&s){let i=s.data.props;if(a.defaults.draw.recognition&&p===t.scribble){let a=ShapeRecognition.recognize(t.pathPoints,i.transform.pos,i.transform.dim);if(a.isRecognized){let o=t.RecognizeShape(i,a,e);$.extend(!0,s.data.props,o),a.type===ShapeConstants.PresetShapeGeometry.LINE?(delete s.data.props.geom.custom,delete s.data.textBody,delete s.data.nvOProps.nvDProps.name,delete s.data.props.stroke.fill.solid.color.tweaks,delete s.data.themeRef.strokeRef.color.tweaks,s.data.themeRef.fontRef.color.type=ShapeConstants.ShapeGeometryType.CUSTOM,s.data.type=ShapeConstants.ShapeNodeType.CONNECTOR):(Shape.props.transform.set(s.data,e.data.shapeContainer,s.bx),Shape.props.fill.solid.set(s.data,e.data.shapeContainer,s.bx))}}Shape.props.geom._set(s.data,e.data.shapeContainer,s.bx),Shape.props.geom.dependency(s.data,e.data.shapeContainer,s.bx),d||o&&a.selectShapes([{box:s.bx,data:s.data}]),ZSTriggers.triggerEvent("shape_created",s.data,s.bx,a)}else!i&&s?s.bx.remove():s||ZSTriggers.triggerEvent("shape_creation_halted",void 0,void 0,a);n&&n.remove(),r.bind=!1,t.pathPoints=[],a.container.trigger("drawmode_cleared")}stop(e){let t=e.data.editor;t.shapeEvent.isMouseDown=!1;let a=t.defaults.draw.custom,o=t.draw.custom,i=301,r=void 0,s=new Date;if(e.data.lastCall&&(i=s-e.data.lastCall),e.data.lastOffset){let t=e.data.lastOffset.x,a=e.data.lastOffset.y,o=e.pageX,i=e.pageY;Math.abs(t-o)<=9&&Math.abs(a-i)<=9&&(r=!0)}e.data.lastOffset={},e.data.lastOffset.x=e.pageX,e.data.lastOffset.y=e.pageY,e.data.lastCall=s;let n=i<300&&r;a.shapeType.toUpperCase()===o.penTool?t.draw.custom.pentool.up_pentool(e):e.data.unbind||n?o.stopCurveShape(e):a.bind=!0}RecognizeShape(e,t,a){let o={dim:t.newDimension},i={preset:{type:t.type}},r=ShapeConstants.FillType.NONE,s=["solid","gradient","pattern","pict"];for(let t of s)if(e.fill[t]){r=t.toUpperCase();break}return t.rotation&&(o.rotAngle=Math.round(t.rotation),o.rotate=o.rotAngle),delete e.geom.custom,e.geom.type=ShapeConstants.ShapeGeometryType.PRESET,e.fill.type=r,$.extend(!0,e.transform,o),$.extend(!0,e.geom,i),e}clear(){this.clearTempData(),this.clearDrawData(),this.unbind()}clearTempData(){let e=this.editor,t=e.defaults.draw.custom,a=t.tempObj?t.tempObj.tempBox:void 0;a&&a.remove(),t.tempObj=void 0,e.defaults.editing=!1,this.arrangedCtrl=void 0}clearDrawData(){let e=this.editor,t=e.defaults.draw.custom;t.shapeType=void 0,t.bind=void 0,t.pointTo=void 0,t.moveTo=void 0,e.shapeEvent.cursorType&&!e.shapeEvent.isDrawReady()&&e.shapeEvent.setCursorType(e.config.cursorTypes.DEFAULT),e.defaults.draw.genre=void 0}unbind(){$(document).unbind(this.editor.shapeEvent.EVENTS.MOUSEMOVE+".Shape",this.move),$(document).unbind(this.editor.shapeEvent.EVENTS.MOUSEUP+".Shape",this.stop),this.editor.clearEventData()}bindEvent(e,t,a,o){let i=this.editor,r=i.defaults.draw.custom,s=r.tempObj&&r.tempObj.shape?r.tempObj.shape.bx:void 0,n=i.config.get.shapeContainer(s),d={shapedata:e,offset:t,bx:s,cubic:[],shapeContainer:n,scaleFactor:a,editor:i},p={shapeContainer:n,unbind:o===this.scribble,editor:i};$(document).bind(i.shapeEvent.EVENTS.MOUSEMOVE+".Shape",d,this.move),$(document).bind(i.shapeEvent.EVENTS.MOUSEUP+".Shape",p,this.stop)}reCalculate(e,t,a){let o=this,i=o.editor,r=i.defaults.draw.custom,s=!0;(a=a||r.tempObj).recal=!0;let n=a.bx-a.sx?a.bx-a.sx:1,d=a.by-a.sy?a.by-a.sy:1,p=e.props.geom.custom.pathList;if(r.shapeType==o.scribble&&(SVGCreator.path.points=o.pathPoints,SVGCreator.path.error=10,p[p.length-1].path=SVGCreator.path.simplify()),e.props.transform.dim={height:d,width:n},e.props.transform.pos.left=a.sx,e.props.transform.pos.top=a.sy,o.recalculatePathPoints(p,a.sx,a.sy,n,d),!i.config.drawOnMouseDown.custom&&1===p.length&&1===p.length)if(1===p[0].path.length)t.remove(),s=!1;else if(p[0].path.length<4){let e=p[0].path;if(e[0].m&&e[1].l){let a=Math.abs(e[0].m.x-e[1].l.x),o=Math.abs(e[0].m.y-e[1].l.y);a<4&&o<4&&(t.remove(),s=!1)}}return 1===p[0].path.length&&(s=!1),s&&Shape.props.transform.set(e,i.config.get.shapeContainer(t),t),s}recalculatePathPoints(e,t,a,o,i){for(let r of e){for(let e of r.path)for(let o in e)if("type"!==o){let i=e[o];if(i.length)for(let e of i)e.x=e.x-t,e.y=e.y-a;else isNaN(i.x)||isNaN(i.y)||(i.x=i.x-t,i.y=i.y-a)}r.height=i,r.width=o}}joinPath(e){let t=e.nvOProps.nvDProps.name,a=e.props.geom.custom.pathList,o=this.joinOffset,i=!1;for(let e of a){let a,r=e.path,s=r[0],n=r[r.length-1],d=s.m;if($.each(n,function(e,t){"type"!==e&&(a=t[t.length-1]?t[t.length-1]:t)}),i=Math.abs(d.x-a.x)<=o&&Math.abs(d.y-a.y)<=o){if(r.length>1){if(t===this.curve){let e,t=r[1];n.cc?e=n[n.type.toLowerCase()][0]:(r.pop(),e=n[n.type.toLowerCase()]);let a=[e,d,t.cc[0]],o=this.controlPoints(a);r[1].cc[0]=o.c2,r[r.length-1].cc[1]=o.c1,r[r.length-1].cc[2]=d}a.x=d.x,a.y=d.y}let e={c:!0,type:ShapeConstants.PathType.C};r.push(e)}}return i}updateFillForClosedPath(e,t,a){let o,i=this.editor,r=i.defaults.draw.custom,s=i.config.get.shapeContainer(t);e.props.fills?o=e.props.fills[0]:e.props.fill&&(o=e.props.fill),void 0!==o&&a?o.solid?o.type=ShapeConstants.FillType.SOLID:o.gradient?o.type=ShapeConstants.FillType.GRADIENT:o.pict?o.type=ShapeConstants.FillType.PICT:o.type=ShapeConstants.FillType.NONE:o={type:ShapeConstants.FillType.NONE},r.effects&&(e.props.effects=$.extend(!0,{},r.effects),r.effects=void 0),e.props.fills?(e.index=0,Shape.props.fills.set(e,s,t)):(Shape.props.fill.set(e,s,t),Shape.props.fill.dependency(e,s,t))}}class ZSShapeDrawing{constructor(e){this.editor=e,this.selector=e.selector,this.preset=new ZSPresetDrawing(e),this.custom=new ZSCustomDrawing(e)}setDrawingMode(e,t,a,o){let i=this.editor.defaults.draw;i.genre=e,i.externalShape=o,i.cursor=t||this.editor.config.cursorTypes.CROSSHAIR,this.editor.shapeEvent.setCursorType(i.cursor),this.editor.container.trigger("drawmode_initialized")}clear(){let e=this,t=e.editor,a=t.defaults.draw,o=a.custom&&a.custom.tempObj&&$.isEmptyObject(a.custom.tempObj),i=t.defaults.editing&&o?$.extend(!0,{},a.custom.tempObj):void 0;if(a.genre&&e[a.genre.toLowerCase()].clear(),a.genre=void 0,a.shape=void 0,a.cursor=void 0,a.externalShape=void 0,e.custom.pathPoints=[],i&&!$.isEmptyObject(i)){let a=i.shape;a.data.props.fill.type=ShapeConstants.FillType.NONE,e.custom.reCalculate(a.data,a.bx,i),ZSTriggers.triggerEvent("shape_created",a.data,a.bx,t)}t.container.trigger("drawmode_cleared")}down(e,t){let a=this.editor,o=a.config.get.shape();if(a.defaults.draw.genre===ShapeConstants.ShapeGeometryType.PRESET){if(a.defaults.draw.preset.placeHolderType){o.nvOProps.nvProps={placeHolder:{type:a.defaults.draw.preset.placeHolderType}};let e=$.extend(!1,{},o.props.fill);if(e.type===ShapeConstants.FillType.GRADIENT){let t=e[e.type.toLowerCase()];for(let e of t.stops)e.color.tweaks={alpha:.6}}else e.type===ShapeConstants.FillType.SOLID&&(e[e.type.toLowerCase()].color.tweaks={alpha:.6})}this.preset.down(e,o)}else a.defaults.draw.genre===ShapeConstants.ShapeGeometryType.CUSTOM&&this.custom.down(e,o,t);e.stopPropagation()}handleEscKey(e){let t=this.editor;t.defaults.draw.genre===ShapeConstants.ShapeGeometryType.PRESET?this.escapeDrawing():t.defaults.draw.custom.shapeType===this.custom.pentool?(ZSTriggers.triggerEvent("escape_drawing",void 0,void 0,t),this.clear(),this.selector.clear()):(e.data={unbind:!0,editor:t},this.custom.stop(e)),ZSTriggers.triggerEvent("escape_drawing",void 0,void 0,t)}handleEnterKey(e){let t=this.editor.editPoint;if(this.editor.defaults.draw.genre===ShapeConstants.ShapeGeometryType.CUSTOM)if(this.custom.shapeType===this.custom.SCRIBBLE)this.escapeDrawing();else if(this.custom.shapeType===this.custom.pentool)for(let e in t.editShapes)t.savePathData(e);else e.data={unbind:!0,editor:this.editor},this.custom.stop(e)}escapeDrawing(){let e=this.editor;e.defaults.editing=!1,this.clear(),$(document).unbind(e.shapeEvent.EVENTS.MOUSEMOVE+".Shape",this.editor.transform.move),$(document).unbind(e.shapeEvent.EVENTS.MOUSEUP+".Shape",this.editor.transform.up),e.clearEventData()}}class ZSClone{constructor(e){this.editor=e,this.selector=e.selector,this.options={cloneid:"clonebox_",strokeOpacity:.6,fillOpacity:.4,pictureOpacity:.6,stroke:{type:ShapeConstants.StrokeType.SOLID,width:2,fill:{type:ShapeConstants.FillType.SOLID,solid:{color:{rgb:[64,64,64]}}},captype:ShapeConstants.CapType.FLAT},fill:{type:ShapeConstants.StrokeType.SOLID,solid:{color:{rgb:[200,200,200]}}}}}create(e,t=!1){let a=this.selector,o=this.editor;if(void 0!==e.data.cloneshape&&e.data.cloneshape.length>0)return;let i=e.data.externalShapes,r=a.bunchSelect?a.bunchSelect.shapes:[];if(o.isCropingAShape()){let t=[];e.data.cloneshape=[{box:o.getSelectedShapes()[0].box,data:o.getSelectedShapes()[0].data,connector:t}]}else if(i&&i.length&&i[0].box&&i[0].box.hasClass("swapTable"))e.data.cloneshape=[],e.data.cloneshape[0]=$.extend(!0,{},e.data.externalShapes[0]);else if(r&&r.length){let t=r[0];e.data.cloneshape=[{box:t.box,data:t.data,connector:[]}]}else if(e.data.externalShapes)e.data.cloneshape=$.extend(!0,{},e.data.externalShapes);else{e.data.cloneshape=[];let a=this,i=void 0!==e.data.duplicateshapes&&0!==e.data.duplicateshapes.length?a.acquireShapesFromDuplicate(e):o.getSelectedShapes();for(let r of i){let i=o.checkLockStatus(r,["Modify","Move"]);if(i)return!0;r.data.type===ShapeConstants.ShapeNodeType.GRAPHICFRAME&&r.data.obj.type===ShapeConstants.GraphicObjectType.TABLE&&ZSTable.updateTableDimensionData(r.data,r.box);let n=$.extend(!0,{},r.data);if(n.type==ShapeConstants.ShapeNodeType.GRAPHICFRAME)if($.isEmptyObject(e.data.tableLine)){let e=Shape.getShapeDefaultData("bgshape");if(r.chart&&"legend"===r.chart.type){var s=r.chart[r.chart.type];this.selector.updateShapes.updateChartElementsPos(n,s,r.chart.type),n=$.extend(!0,{},s[0].data)}e.nvOProps.nvDProps.id=n.nvOProps.nvDProps.id,e.props.transform.pos=n.props.transform.pos,e.props.transform.dim=n.props.transform.dim,e.props.stroke=$.extend(!0,{},a.options.stroke),e.type=ShapeConstants.ShapeNodeType.SHAPE,n=e}else{let t=Shape.getShapeDefaultData("connector");t.nvOProps.nvDProps.id=n.nvOProps.nvDProps.id,t.props.geom={preset:{type:ShapeConstants.PresetShapeGeometry.LINE},type:ShapeConstants.ShapeGeometryType.PRESET},t.props.transform.pos=n.props.transform.pos,t.props.transform.dim=n.props.transform.dim,t.props.stroke=$.extend(!0,{},a.options.stroke),t.props.stroke.type=ShapeConstants.StrokeType.DASH,t.type=ShapeConstants.ShapeNodeType.CONNECTOR;let i,s=e.data.tableLine,d=s.cellBox,p=d.parent(),l=o.tableEditor.setCellAndRowIndex(d,p,r.box),h=l.rowIndex,c=l.cellIndex,f={};if(s.rowline){i=0===h&&s.isTopLine,s.isTopLine&&h&&(h-=1,r.table.rowIndex=h,p=ZSTable.row.getRowBox(r.box,h)),t.props.transform.dim.height=1,f.height=ZSTable.row.height.getRowHeight(p);let e=i?0:p.data("top")+f.height;t.props.transform.pos.top=t.props.transform.pos.top+e}else{i=0===c&&s.isLeftLine,s.isLeftLine&&c&&(c-=1,r.table.cellIndex=c),t.props.transform.dim.width=1,f.width=ZSTable.grid.col.getColWidth(r.data,c);let e=i?0:ZSTable.row.cell.getCellLeft(r.data,c)+f.width;t.props.transform.pos.left=t.props.transform.pos.left+e,c<r.data.obj.table.grid.col.length-1&&(f.nextColWidth=ZSTable.grid.col.getColWidth(r.data,c+1))}e.data.tableLine.pos=$.extend(!0,{},t.props.transform.pos),e.data.tableLine.dim=f,e.data.tableLine.bool=i,n=t}if(n.editData=!1,n.previewData=!1,n.ccData=!1,n.type===ShapeConstants.ShapeNodeType.CONNECTOR){let e=!1,t=n.nvOProps.nvODProps,a=n.nvOProps.nvDProps.id;if(t){for(let t of o.getSelectedShapes()){let o=t.connector;for(let t of o)if(a===t.data.nvOProps.nvDProps.id){e=!0;break}if(e)break}if(e)continue}}let d=[],p=o.getShapeContainer(r.box);n.nvOProps.nvDProps.id=this.options.cloneid+n.nvOProps.nvDProps.id,n.type===ShapeConstants.ShapeNodeType.GROUPSHAPE?this.modifygroupShapeData(n):n.type===ShapeConstants.ShapeNodeType.COMBINEDOBJECT?this.modifycombinedObjectData(n):this.modifydata(n,r.parentIds);let l;Shape.isPointerEventSupported?(l=ShapeObject.create.updateAndDraw(n,p),$(l).find("path").css("pointer-events","none")):(n.type===ShapeConstants.ShapeNodeType.CONNECTOR&&(n.props.transform.pos.zindex=0),l=ShapeObject.create.updateAndDraw(n,p)),n.type===ShapeConstants.ShapeNodeType.PICTURE&&$("g",l).css("opacity",this.options.pictureOpacity),l.data("modifying",!0),t&&this.editor.setModifyingData(e,n,l),o.config.isSupported.connector&&$.each(r.connector,function(e,t){let i=$.extend(!0,{},t.data),r=$("#"+i.nvOProps.nvDProps.id),s=a.options.cloneid+t.shapeId;i.nvOProps.nvDProps.id=a.options.cloneid+i.nvOProps.nvDProps.id;let n=o.getShapeContainer(r);{a.modifydata(i);let e=Shape.create.draw(i,n);Shape.isPointerEventSupported&&$("g",e).css("pointer-event","none"),e.data("dependent",!0),e.data("modifying",!0);let o={data:i,box:e,shapeId:s,pos:t.pos,point:t.point};d.push(o)}}),e.data.cloneshape.push({data:n,box:l,connector:d})}}}acquireShapesFromDuplicate(e){let t=[];if(void 0===e.data.duplicateshapes||0===e.data.duplicateshapes.length)return t;for(let a of e.data.duplicateshapes){let e=a.data.nvOProps.nvDProps.id;e=e.split(this.editor.shapeEvent.duplicateId)[1];let o=this.editor.getSelectedShapesById(e);if(void 0!==o){let e=$.extend(!0,{},o);e.data.props.transform.pos=Util.extend(!0,{},a.data.props.transform.pos),t.push(e),a.box.remove()}}return delete e.data.duplicateshapes,t}modifygroupShapeData(e,t){let a=this;if(a.modifydata(e),e.shapes)for(let t of e.shapes)t.nvOProps.nvDProps.id=a.options.cloneid+t.nvOProps.nvDProps.id,t.type===ShapeConstants.ShapeNodeType.GROUPSHAPE?a.modifygroupShapeData(t):t.type===ShapeConstants.ShapeNodeType.COMBINEDOBJECT?a.modufycombinedObjectData(t):a.modifydata(t);void 0!==e.mask&&(e.mask.nvOProps.nvDProps.id=a.options.cloneid+e.mask.nvOProps.nvDProps.id,a.modifydata(e.mask))}modifycombinedObjectData(e,t){let a=this;if(a.modifydata(e),e.combinedNodes)for(let t of e.combinedNodes)t.nvOProps.nvDProps.id=a.options.cloneid+t.nvOProps.nvDProps.id,a.modifydata(t)}modifydata(e,t){if(e.storeCanvas=!0,delete e.props.effects,delete e.textBody,delete e.placeHolder,e.props.stroke||e.props.strokes){let t=e.props.stroke?e.props.stroke:e.props.strokes[e.props.strokes.length-1];t.fill&&t.fill.type!==ShapeConstants.FillType.NONE&&this.modifyfill(t.fill,this.options.strokeOpacity),e.props.stroke?(e.props.stroke="NONE"==e.props.stroke.type?$.extend(!0,{},this.options.stroke):e.props.stroke,e.props.stroke=e.props.stroke.fill&&"NONE"==e.props.stroke.fill.type?$.extend(!0,{},this.options.stroke):e.props.stroke):e.props.strokes=[t]}if(e.props.fill||e.props.fills){let a=void 0!==e.props.fill?e.props.fill:e.props.fills[e.props.fills.length-1];if(a.type!==ShapeConstants.FillType.NONE){if(a.type===ShapeConstants.FillType.GRP&&t&&t.length){let o=e.nvOProps.nvDProps.id,i=o.replace(this.options.cloneid,""),r=t[t.length-1],s=this.editor.config.get.shape(r);GroupShape.updateShapeData(Grouping.props,s);let n=GroupShape.getShape(i,s);$.extend(!0,a,n.props.fill)}this.modifyfill(a,this.options.fillOpacity),e.props.fill?e.props.fill=a:e.props.fills=[a]}}}modifyfill(e,t){if(e){let a=this;if(e.type===ShapeConstants.FillType.SOLID)this.modifycolor(e.solid.color,t);else if(e.type===ShapeConstants.FillType.GRADIENT)for(let o of e.gradient.stops)a.modifycolor(o.color,t);else if(e.type===ShapeConstants.FillType.PICT)e.pict.transparency=this.options.fillOpacity;else if(e.type===ShapeConstants.FillType.PATTERN){this.modifycolor(e.pattern.background.solid.color,t);let a=e.pattern.foreground;for(let e=0;e<a.length;e++)this.modifycolor(a[e].fill.solid.color,t)}}}modifycolor(e,t){e&&e.tweaks?(e.tweaks.alpha=e.tweaks.alpha?e.tweaks.alpha:0,e.tweaks.alpha=1-(1-e.tweaks.alpha)*t):e.tweaks={alpha:1-t}}check(e,t){let a=!1;return $.each(e,function(e,o){if(!o)return!0;$.each(o.connector,function(e,o){if(o.data&&o.data.nvOProps.nvDProps.id===t)return a=!0,!1})}),a}get(e,t){e=e.groupshape?e.groupshape:e;let a="#"+this.options.cloneid+e.nvOProps.nvDProps.id;return $(a,this.editor.getShapeContainer(t))}remove(e){let t=$("#groupselect",this.editor.getshapeContainer());if(t.length)this.editor.unSelectShapes(),t.remove();else for(let e of this.editor.getSelectedShapes()){let t=this.get(e.data,e.box);t.remove();for(let a of e.connector)(t=this.get(a.data,a.box)).length>0&&t.remove()}let a=this.editor.shapeEvent;$(document).unbind(a.EVENTS.MOUSEMOVE+".Shape",this.editor.transform.eventMove),$(document).unbind(a.EVENTS.MOUSEUP+".Shape",this.editor.transform.eventUp),this.editor.defaults.editing=!1,a.refreshCursorType(e),this.editor.config.isSupported.connector&&this.editor.connector.removeConnectorPoints(),this.editor.clearEventData()}removeClone(e){for(let t of e)if(t.type===ShapeConstants.ShapeNodeType.GROUPSHAPE)t=t.groupshape?t.groupshape:t,this.removeClone(t.shapes);else{let e=this.get(t);e.length>0&&e.remove()}}}class ZSNoClone{constructor(e){this.editor=e,this.selector=e.selector}create(e,t=!1){if(void 0!==e.data.nocloneshape&&e.data.nocloneshape.length>0)return;let a=this.selector.bunchSelect,o=void 0!==e.data.duplicateshapes&&0!==e.data.duplicateshapes.length;if(this.editor.isCropingAShape())e.data.nocloneshape=[{box:this.selector.updateShapes.getShapes()[0].box,data:this.selector.updateShapes.getShapes()[0].data,connector:[]}];else if(!o&&a&&a.shapes.length){let t=a.shapes[0];e.data.nocloneshape=[{box:t.box,data:t.data,connector:[]}]}else{let i;if(e.data.nocloneshape=[],o)i=this.acquireShapesFromDuplicate(e);else{if(e.data.externalShapes)return void(e.data.nocloneshape=Util.extend(!0,{},e.data.externalShapes));i=this.selector.updateShapes.getShapes()}if(a&&a.shapes.length){let t=a.shapes[0];return void(e.data.nocloneshape=[{box:t.box,data:t.data,connector:[]}])}for(let a of i){let o=this.editor.checkLockStatus(a,"Modify");if(o)return!0;let i,r=$.extend(!0,{},a.data),s=[];if(r.type===ShapeConstants.ShapeNodeType.GRAPHICFRAME){}else if(r.type===ShapeConstants.ShapeNodeType.CONNECTOR){let e=!1,t=r.nvOProps.nvODProps,o=r.nvOProps.nvDProps.id;if(t){for(let t of this.selector.updateShapes.getShapes()){let a=t.connector;for(let t of a)if(o===t.data.nvOProps.nvDProps.id){e=!0;break}}if(e)continue}a.box.data("modifying",!0),i=a.box}else a.box.data("modifying",!0),i=a.box;if(t&&this.editor.setModifyingData(e,r,i),this.editor.config.isSupported.connector)for(let e of a.connector){connBox.data("dependent",!0);let t=$.extend(!0,{},e.data);e.box.data("modifying",!0);let a={data:t,box:e.box,shapeId:e.shapeId,pos:e.pos,point:e.point};s.push(a)}e.data.nocloneshape.push({data:r,box:i,connector:s})}}}acquireShapesFromDuplicate(e){let t=[];if(void 0===e.data.duplicateshapes||0===e.data.duplicateshapes.length)return t;for(let a of e.data.duplicateshapes){let o=a.data.nvOProps.nvDProps.id;o=o.split(this.editor.shapeEvent.duplicate.duplicateId)[1];let i=this.editor.getSelectedShapesById(o);if(void 0!==i){let r=$.extend(!0,{},i);r.data.props.transform.pos=Util.extend(!0,{},a.data.props.transform.pos),r.data.nvOProps.nvDProps.id=o,r.box=i.box,t.push(r),a.box.remove();let s=this.editor.config.get.shapeContainer(r.box);ShapeObject.props.transform.pos.set(r.data,s,r.box);for(let e of i.connector)ShapeObject.props.trasform.pos.set(e.data,s,e.box);this.selector.bbox.move(r.data,r.box,e.data.moveHandle)}}delete e.data.duplicateshapes;let a=this.selector.bunchSelect;if(a&&a.shapes.length){let e=this.selector.multiselect.getGroupShapeData(t);a.shapes[0].data=$.extend(!0,{},e),a.shapes[0].groupShape=$.extend(!0,{},e)}return t}}class ZSHandle{constructor(e){this.editor=e}down(e,t){let a=this.editor.getSelectedShapes()[0],o=a.data,i=t.data().handledata;Shape.selectedHandle=i;let r=o.props.geom.preset,s=r.type,n=$.Preset[s].handles[i].values,d=o.props.transform,p=d.dim,l=.5*p.width,h=.5*p.height,c=Shape.getAngle(d),f=r.modifiers&&r.modifiers.length?r.modifiers:$.Preset[s].modifiers;f=$.extend(!0,[],f);let u=this.editor.config.get.offset(this.editor),m=d.pos,g={left:u.left+m.left,top:u.top+m.top},S=this.editor.config.get.scale(),x=[],v=[],y=[],E=[],C=[],O=[];e.pageX=u.left+(e.pageX-u.left)/S,e.pageY=u.top+(e.pageY-u.top)/S;let b=d.fliph,T=d.flipv;$.each(n,function(t,o){let r={},n={},d=0,u=0,m=p.width,S=p.height,w=a.box.data(Shape.handle)[i],D=VectorUtil.getHTMLDimension(w[0]),P=VectorUtil.getHTMLDimension(w[1]),L=o.modifier;if("X"===L.type||"Y"===L.type){let e=L.origin;if("X"===L.type){d=m=b?p.width-D:D;let t="END"===e&&!b||"END"!==e&&b;t&&(u=S,S=0)}else{u=S=T?p.height-P:P;let t="END"!==e&&!T||"END"===e&&T;t&&(d=m,m=0)}}else{let e=p.width,t=0,a=0,o=0;m=0,b&&(d=m=p.width,u=p.height,S=0),T&&(t=o=p.height,a=p.width,e=0),r=zoho.math.getRotatedValue(c,e,t,l,h),n=zoho.math.getRotatedValue(c,a,o,l,h)}let I=zoho.string.removeSpace($.Preset[s].name);if(Shape.pathGenerator.modifier[I]){let e=VectorUtil.getViewBoxDimensions(p.width,p.height);Shape.pathGenerator.modifier[I].call(Shape.pathGenerator,f,e[0],e[1])}let A=zoho.math.getRotatedValue(c,d,u,l,h),N=zoho.math.getRotatedValue(c,m,S,l,h),R=e.pageX-g.left,B=e.pageY-g.top,_=zoho.math.distanceOf(A,N,R,B);O.push(_),x.push(A),v.push(N),y.push(r),E.push(n),C.push(f[o.num])}),this.editor.transform.eventBind(this,{offset:g,p1:x,p2:v,p3:y,p4:E,number:i,modifiers:f,point:C,diff:O,containerOffset:u,scaleFactor:S},!0)}get(e){e.data.modifiers=this.getModifier(e)}move(e,t,a){this.refresh(a.data,a.box,e.data.modifiers)}set(e,t,a){return Shape.selectedHandle=void 0,this.refresh(e,a,t.data(Shape.modifier))}refresh(e,t,a){let o=[],i=e.nvOProps.nvODProps&&e.nvOProps.nvODProps.locks?e.nvOProps.nvODProps.locks:void 0;if(!i||!i.noHandles&&!i.noModify){e.props.geom.preset.modifiers=a;let i=this.editor.getShapeContainer(t);Shape.props.geom._set(e,i,t),Shape.props.geom.dependency(e,i,t),t.hasClass("crop")&&this.editor.selector.updateBBox(e,t,!0),o.push({id:e.nvOProps.nvDProps.id,data:{action:"modify",data:{props:{geom:{preset:{modifiers:a,type:e.props.geom.preset.type},type:e.props.geom.type}}}}})}return o}getModifier(e){let t=this.editor.getSelectedShapes()[0].data,a=t.props.geom.preset.type,o=e.data.modifiers;if(o){let i=$.Preset[a].handles[e.data.number].values,r=t.props.transform.dim,s=e.data.offset,n=e.data.scaleFactor,d=e.data.containerOffset;e.pageX=d.left+(e.pageX-d.left)/n,e.pageY=d.top+(e.pageY-d.top)/n;let p=e.pageX-s.left,l=e.pageY-s.top;$.each(i,function(t,a){let i,s=e.data.p1[t],n=e.data.p2[t],d=a.modifier,h=zoho.math.distanceOf(s,n,p,l),c=Math.min(r.width,r.height);if("ANGLE"===d.type||"RADIUS"===d.type){let a=zoho.math.distanceOf(e.data.p3[t],e.data.p4[t],p,l),o=.5*r.width,s=.5*r.height,n=zoho.math.getAngle(h,a,o,s);if("RADIUS"===d.type){let e=zoho.math.length(o,s,p,l),t=Shape.pathGenerator.getEllipseCoordinates(n,void 0,o,s,o,s),a=zoho.math.length(o,s,t[0],t[1]);i=a-(e=zoho.math.limit(e,0,a)),i/=c}else i=n}else{h-=e.data.diff[t];let o=c;"X"!==d.type||a.ssDependent?"Y"!==d.type||a.ssDependent||(o=r.height):o=r.width,i=h/o,d.multiplier&&(i*=d.multiplier),i+=e.data.point[t]}if(a.max){let e=a.max,t=e.val;e.compute&&("X"===d.type&&a.ssDependent?t*=r.width/c:"Y"===d.type&&a.ssDependent&&(t*=r.height/c)),i=zoho.math.maxLimit(i,t)}if(a.min){let e=a.min,t=e.val;e.compute&&("X"===d.type&&a.ssDependent?t*=r.width/c:"Y"===d.type&&a.ssDependent&&(t*=r.height/c)),i=zoho.math.minLimit(i,t)}o[a.num]=i})}return o}}class ZSPresetDrawing{constructor(e){this.editor=e,this.selector=e.selector,this.commonTextEditor=e.commonTextEditor}clear(){let e=this.editor.defaults.draw;e.preset.placeHolderType=void 0,e.preset.shapeType=void 0,e.shape=void 0,this.editor.shapeEvent.cursorType&&!this.editor.editing&&this.editor.shapeEvent.setCursorType(this.editor.config.cursorTypes.DEFAULT)}setPresetData(e){this.clear();let t=this.editor;t.defaults.draw.preset.shapeType=e,t.clearTextEditor()}setPlaceHolderData(e){this.editor.defaults.draw.preset.placeHolderType=e}down(e,t){let a=this,o=a.editor,i=a.selector,r=t.nvOProps.nvDProps.id===i.groupSelectId?"all":"wait";if(o.editPoint&&o.editPoint.editingMode?(o.selector.init(),$.each(o.editPoint.editShapes,function(e,t){o.editPoint.unselectHandle(e,void 0,"all")})):(i.clear(r),i.removeBBox()),o.comments&&o.comments.remove(),!o.config.preset.down(e,t)&&t&&3!==e.which){let a=o.config.get.offset(o),i=o.config.get.scale(),r=(e.pageX-a.left)/i,s=(e.pageY-a.top)/i;o.config.isSupported.textInsertPosChange&&t.nvOProps.nvODProps&&t.nvOProps.nvODProps.textbox&&(s-=10),t.props.transform.pos.left=r,t.props.transform.pos.top=s,e.data.createShape={data:t,bbox:"sebox"},o.config.isSupported.connector&&o.connector.drawupdateData(e,t),o.transform.resize.down(e)}}create(e){let t=this.editor;if(void 0!==t.getModifyingShapes(e))return;let a,o=e.data.createShape.data,i=$.extend(!0,{},o);o.nvOProps.nvODProps&&o.nvOProps.nvODProps.textbox&&o.props.stroke.fill.type===ShapeConstants.FillType.NONE&&$.extend(!0,i.props.stroke,Shape.props.stroke.defaultStroke);let r=t.config.get.shapeContainer();i.type;Shape.isPointerEventSupported?(a=ShapeObject.create.updateAndDraw(i,r),$("g",a).css("pointer-events","none")):(o.type===ShapeConstants.ShapeNodeType.CONNECTOR&&(o.zindex=o.props.transform.zindex,o.props.transform.zindex=0),a=ShapeObject.create.updateAndDraw(i,r)),this.selector.init(a,o,void 0,void 0,!0);let s={box:a,data:$.extend(!0,{},o),connector:[]};t.defaults.draw.shape=a,t.config.isSupported.cloneEditing?e.data.cloneshape=[s]:e.data.nocloneshape=[s],t.defaults.draw.shape=a}up(e){let t,a=this,o=a.editor,i=a.selector,r=e.data.element,s=o.config.get.shapeContainer(),n=e.data.createShape.data.nvOProps.nvDProps.id,d=$("#"+n,s),p=n===i.groupSelectId;if(d.length>0){let e=o.getSelectedShapes();if(e.length&&(d=o.getSelectedShapes()[0].box,t=o.getSelectedShapes()[0].data,r.set.call(r,t,d,d)),p){if(o.config.isSupported.shapeSelectOnDrag)i.unSelectShapes([i.groupSelectId],void 0,!0);else if(o.config.isSupported.shapeEdit){let e=t.props.transform.pos,a=o.config.get.scale();s.attr("id");e.left*=a,e.top*=a;let r=t.props.transform.dim;if(r.width*=a,r.height*=a,o.unSelectShapes(),o.editPoint&&o.editPoint.editingMode)o.editPoint.selectVertices(e,r);else{let t=o.config.get.getAllShapeData();t&&t.length&&i.groupselectShapes(e,r,t)}}d.remove()}}else if(!p&&o.config.drawOnMouseDown.preset&&o.defaults.draw.genre){t=e.data.createShape.data;let a=Shape.create.draw(t,s);o.selectShapes([{box:a,data:t}],void 0,void 0,!0)}if(!p&&o.defaults.draw.genre)Shape.isPointerEventSupported?$("g",d).css("pointer-events","auto"):(t.props.transform.zindex=t.zindex?t.zindex:t.props.transform.zindex,Shape.props.transform.set(t,s,d)),o.config.isSupported.shapeEdit&&i.bbox&&i.bbox.create({data:t,box:d}),o.draw.clear(),!0===o.isResize&&(o.isResize=void 0),ZSTriggers.triggerEvent("shape_created",t,d,o),o.getSelectedShapes().length&&ZSTriggers.triggerEvent("shape_selected",void 0,void 0,o),o.config.isSupported.text&&t.nvOProps.nvODProps&&t.nvOProps.nvODProps.textbox&&(this.commonTextEditor.textEditor.edit(o.getSelectedShapes()[0]),this.commonTextEditor.textEditor.withdrawEditing(o));else{if(o.editPoint&&o.editPoint.editingMode){let e=o.editPoint.editShapes;for(let t in e){let a=e[t].editing,r=$("#"+a.actualData.nvOProps.nvDProps.id,o.container);i.init(r,void 0,r.data(Shape.parentId),void 0,!0)}}else o.getSelectedShapes().length&&ZSTriggers.triggerEvent("shape_selected",void 0,void 0,o);$(d).trigger("groupselect",t)}if(o.editPoint&&o.editPoint.editingMode){let e=o.editPoint.editShapes,t=!1;for(let a in e){let o=e[a].elements;if(o.selectedBox.length){t=!0;break}}if(!t)for(let t in e){let a=e[t].editing;this.selector.unSelectShapes([a.actualData.nvOProps.nvDProps.id])}}}}class ZSShapeMove{constructor(e){this.modData="pos",this.editor=e,this.selector=e.selector,this.smartguide=e.smartguide}down(e,t,a){let o,i,r=this.editor,s=r.getSelectedShapes(),n=!(!e.data||!e.data.unSelectShape)&&e.data.unSelectShape,d=a||s,p=!(!e.data||!e.data.unSelectInnerShape)&&e.data.unSelectInnerShape;if(this.editor.config.stopMoveOnEditmode(this.editor.editPoint))return;let l={tableLine:e.tableLine,isInnerShape:e.isInnerShape,isInnerShapeSelected:e.isInnerShapeSelected,cursorposition:[e.pageX,e.pageY],unSelectShape:n,externalShapes:a,unSelectInnerShape:p};if(r.eventData=l,!d.length)return;let h=d[0].data;if(!a){let e=t.attr("id"),a=-1!==e.indexOf("border"),i=-1!==e.indexOf("origin");(a||i)&&(e=ZSBBoxUtil.getShapeId(e)),o=(o=this.selector.check(e))||(t.data("isChart")?this.selector.check(e,!0):void 0),l.isRotateOrigin=i}if(l.scaleFactor=h.scale?h.scale:1,s&&s.length){let e=s[0].data.nvOProps.nvDProps.id;(r.config.smartGrid.SGallDistances||r.config.smartGrid.SGplanespl)&&(i=this.smartguide.setshapedistances(l,e))}l.currentShape=o,l.shapedistances=i,r.transform.eventBind(this,l)}get(e){let t=e.data.cursorposition;e.data.x=e.pageX-t[0],e.data.y=e.pageY-t[1],e.data.x/=e.data.scaleFactor,e.data.y/=e.data.scaleFactor}move(e,t,a){let o,i=this.editor,r=i.config.get.slideSize(),s=(r.width,r.height,e.altKey);e.data.unSelectShape&&(e.data.unSelectShape=!1);let n;if(e.altKey||void 0===e.data.externalShapes){let e=a.data.nvOProps.nvDProps.id.replace("clonebox_",""),o=i.selector.check(e);n=o?i.getSelectedShapes()[o.index].data:i.getSelectedShapes()[t].data}else n=e.data.externalShapes[t].data;let d=e.data.currentShape&&e.data.currentShape.shape&&e.data.currentShape.shape.chart?e.data.currentShape.shape.chart[e.data.currentShape.shape.chart.type]:void 0,p=e.data.tableLine&&e.data.tableLine.pos?e.data.tableLine.pos:n.props.transform.pos;p=d?d[0].data.props.transform.pos:p,n=d?d[0].data:n,d&&(o=!0);let l=n.movingAxis,h="x"===l?0:e.data.y,c="y"===l?0:e.data.x;e.shiftKey&&(Math.abs(c)<Math.abs(h)?c=0:h=0);let f={left:c+p.left,top:h+p.top};if(this.smartguide&&(Math.abs(f.top-p.top)>=this.smartguide.smartGuideProximity||Math.abs(f.left-p.left)>=this.smartguide.smartGuideProximity)&&(i.defaults.showSmartGuides=!0),e.data.prevdata||(e.data.prevdata={x:e.data.x,y:e.data.y}),(Math.abs(e.data.prevdata.x-e.data.x)>10||Math.abs(e.data.prevdata.y-e.data.y)>5)&&(o=!0,this.smartguide&&(this.smartguide.removeguides(),this.smartguide.removePosGuides())),e.data.prevdata.x=e.data.x,e.data.prevdata.y=e.data.y,!e.data.externalShapes&&i.defaults.showSmartGuides&&!o){let o=this.smartguide,r=e.data.currentShape;if(r&&r.cloneIndex===t){let t=f.left,r=f.top;e.data.smartDistance||(o.smartguides.hordistances=void 0,o.smartguides.verdistances=void 0),e.data.smartGuideChange=o.set(f,a.data,e.data),i.config.smartGrid.SGplaneOriented||i.config.smartGrid.SGplanespl?(e.data.currentshapediff=o.setplanecurshapedifferences(e.data,a.data,f,s),e.data.shapedistances=i.config.smartGrid.SGplaneOriented?o.setplaneshapedistances(e.data,a.data,f):e.data.shapedistances):i.config.smartGrid.SGallDistances&&(e.data.currentshapediff=o.setcurshapedifferences(e.data,a.data,f)),(i.config.smartGrid.SGplaneOriented||i.config.smartGrid.SGallDistances||i.config.smartGrid.SGplanespl)&&(e.data.smartDistance=o.calculatedistances(e.data,f)),e.data.smartGuideChange&&(e.data.snapDiff_left=f.left-t,e.data.snapDiff_top=f.top-r),e.data.smartDistance&&!e.data.smartGuideChange&&(e.data.snapDiffDist_left=f.left-t,e.data.snapDiffDist_top=f.top-r)}else e.data.smartGuideChange&&(f.left=f.left+e.data.snapDiff_left,f.top=f.top+e.data.snapDiff_top),e.data.smartDistance&&!e.data.smartGuideChange&&(f.left=f.left+e.data.snapDiffDist_left,f.top=f.top+e.data.snapDiffDist_top)}let u;if(!$.isEmptyObject(e.data.tableLine)){let t=e.data.tableLine;t.rowline?(f.left=t.pos.left,u=!t.bool&&ZSTable.getDefaultTableHeight(n)>t.dim.height-(t.pos.top-f.top)):(f.top=t.pos.top,u=!t.bool&&(ZSTable.TableDefault.WIDTH>t.dim.width-(t.pos.left-f.left)||ZSTable.TableDefault.WIDTH>t.dim.nextColWidth-(f.left-t.pos.left)))}if(d&&"chartArea"!==d.type){var m=$.extend(!0,{},d[0].data).props.transform,g=e.data.currentShape.shape.data.props.transform;f.left>g.pos.left&&f.left<g.pos.left+g.dim.width-m.dim.width||(f.left<g.pos.left?f.left=g.pos.left:f.left>g.pos.left+g.dim.width-m.dim.width&&(f.left=g.pos.left+g.dim.width-m.dim.width)),f.top>g.pos.top&&f.top<g.pos.top+g.dim.height-m.dim.height||(f.top<g.pos.top?f.top=g.pos.top:f.top>g.pos.top+g.dim.height-m.dim.height&&(f.top=g.pos.top+g.dim.height-m.dim.height))}if(!u){let t=e.data.currentShape?e.data.currentShape:void 0;!e.data.boundedContainerDim&&t&&(e.data.boundedContainerDim=i.config.get.boundedContainerDim(t.shape.data));let o=e.data.boundedContainerDim;if(!$.isEmptyObject(o)){let e=a.data.props.transform.dim,t=o.width-e.width,i=o.height-e.height;f.left=f.left<0?0:f.left>t?t:f.left,f.top=f.top<0?0:f.top>i?i:f.top}i.config.isSupported.pxSupport&&(f.left=Math.round(f.left),f.top=Math.round(f.top)),this.refresh(a.data,a.box,f),a.box.data(this.modData,f)}!e.altKey&&e.data.externalShapes&&e.data.externalShapes[t].box.data("shapeData",a.data),i.config.isSupported.hideBBoxesOnShapeMove&&i.selector.bbox.hide()}set(e,t,a){let o=t.data(this.modData);return o.top=Util.roundOff(o.top),o.left=Util.roundOff(o.left),this.refresh(e,a,o)}refresh(e,t,a){let o=[],i=e.nvOProps.nvODProps&&e.nvOProps.nvODProps.locks?e.nvOProps.nvODProps.locks:void 0;if(i&&(i.noMove||i.noModify))return o;let r=e.range,s=e.movingAxis;"x"===s&&(a.left=a.left<r.left.from?r.left.from:a.left,a.left=a.left>r.left.to?r.left.to:a.left),"y"===s&&(a.top=a.top<r.top.from?r.top.from:a.top,a.top=a.top>r.top.to?r.top.to:a.top);let n=!1;return e.type==ShapeConstants.ShapeNodeType.GRAPHICFRAME&&(n=!0),e.props.transform.pos.left=a.left,e.props.transform.pos.top=a.top,o=this.editor.shapeObjectEditor.move_refresh(e,t,a,n)}updateInfo(e,t){let a=[];if(t){let o=this.editor,i=e.data,r=t?o.config.get.scale():1,s=i.props.transform.pos,n=e.data.movingAxis,d=o.config.get.label("left"),p=o.config.get.label("top");if(n){if("x"===n){let e=Math.round((s.left-i.range.left.from)/r);a.push(d+" : "+e+"px")}else if("y"===n){let e=Math.round((s.top-i.range.top.from)/r);a.push(p+" : "+e+"px")}}else a.push(d+" : "+Math.round(s.left/r)+"px"),a.push(p+" : "+Math.round(s.top/r)+"px")}return a}keyEvent(e,t){let a=e.data.props.transform.pos,o=this.editor.config.isContainerLockedFromEditing();return this.editor.checkLockStatus(e,"Modify")||o||(a.left=a.left+t[0],a.top=a.top+t[1]),this.refresh(e.data,e.box,a)}}class ZSShapeResize{constructor(e){this.modData="transform",this.editor=e,this.selector=e.selector,this.draw=e.draw,this.smartguide=e.smartguide,this.connector=e.connector,this.editPoint=e.editPoint,this.tangentialAnchorMap={ebox:{quadrant1:{angle0:{x:-1,y:-1},angle1:{x:1,y:-1}},quadrant2:{angle0:{x:1,y:1},angle1:{x:1,y:-1}},quadrant3:{angle0:{x:1,y:-1},angle1:{x:1,y:-1}},quadrant4:{angle0:{x:1,y:1},angle1:{x:1,y:-1}}},sbox:{quadrant1:{angle0:{x:-1,y:-1},angle1:{x:-1,y:-1}},quadrant2:{angle0:{x:1,y:-1},angle1:{x:-1,y:-1}},quadrant3:{angle0:{x:-1,y:-1},angle1:{x:-1,y:-1}},quadrant4:{angle0:{x:1,y:-1},angle1:{x:-1,y:-1}}},wbox:{quadrant1:{angle0:{x:-1,y:-1},angle1:{x:1,y:-1}},quadrant2:{angle0:{x:1,y:1},angle1:{x:1,y:-1}},quadrant3:{angle0:{x:1,y:-1},angle1:{x:1,y:-1}},quadrant4:{angle0:{x:1,y:1},angle1:{x:1,y:-1}}},nbox:{quadrant1:{angle0:{x:-1,y:-1},angle1:{x:-1,y:-1}},quadrant2:{angle0:{x:1,y:-1},angle1:{x:-1,y:-1}},quadrant3:{angle0:{x:-1,y:-1},angle1:{x:-1,y:-1}},quadrant4:{angle0:{x:1,y:-1},angle1:{x:-1,y:-1}}}},this.bbox={nbox:{p3:"c1",p4:"c2",anchor:"c3",signX:0,signY:-1,constant:"x",isNeg:3,flipy:"sbox"},sbox:{p3:"c3",p4:"c4",anchor:"c1",signX:0,signY:1,constant:"x",isNeg:0,flipy:"nbox"},ebox:{p1:"c2",p2:"c4",anchor:"c1",signX:1,signY:0,constant:"y",isNeg:0,flipx:"wbox"},wbox:{p1:"c1",p2:"c3",anchor:"c2",signX:-1,signY:0,constant:"y",isNeg:2,flipx:"ebox"},nebox:{p1:"c2",p2:"c4",p3:"c1",p4:"c2",anchor:"c3",signX:1,signY:-1,isNeg:3,flipx:"nwbox",flipy:"sebox",flipxy:"swbox"},nwbox:{p1:"c1",p2:"c3",p3:"c1",p4:"c2",anchor:"c4",signX:-1,signY:-1,isNeg:1,flipx:"nebox",flipy:"swbox",flipxy:"sebox"},sebox:{p1:"c2",p2:"c4",p3:"c3",p4:"c4",anchor:"c1",signX:1,signY:1,isNeg:0,flipx:"swbox",flipy:"nebox",flipxy:"nwbox"},"se-resizerbox":{p1:"c2",p2:"c4",p3:"c3",p4:"c4",anchor:"c1",signX:1,signY:1,isNeg:0,flipx:"swbox",flipy:"nebox",flipxy:"nwbox"},"sw-resizerbox":{p1:"c1",p2:"c3",p3:"c3",p4:"c4",anchor:"c2",signX:-1,signY:1,isNeg:2,flipx:"sebox",flipy:"nwbox",flipxy:"nebox"},"ne-resizerbox":{p1:"c2",p2:"c4",p3:"c1",p4:"c2",anchor:"c3",signX:1,signY:-1,isNeg:3,flipx:"nwbox",flipy:"sebox",flipxy:"swbox"},swbox:{p1:"c1",p2:"c3",p3:"c3",p4:"c4",anchor:"c2",signX:-1,signY:1,isNeg:2,flipx:"sebox",flipy:"nwbox",flipxy:"nebox"}},this.degree44=44,this.degree45=45,this.degree134=134,this.degree224=224,this.degree314=314,this.degree135=135,this.degree225=225,this.degree315=315}getTangentialAnchor(e,t,a,o,i){let r={};if("nbox"===t||"ebox"===t||"sbox"===t||"wbox"===t){let s=zoho.math.toRadians,n=this.getQuadrant(e),d=this.tangentialAnchorMap[t][n.quadrant][n.angleVal].x,p=this.tangentialAnchorMap[t][n.quadrant][n.angleVal].y;"ebox"===t||"wbox"===t?(r.x=a.x-d*(Math.sin(s(e))*(i/2)),r.y=a.y-p*(Math.cos(s(e))*(i/2))):"sbox"!==t&&"nbox"!==t||(r.x=a.x-d*(Math.cos(s(e))*(o/2)),r.y=a.y-p*(Math.sin(s(e))*(o/2)))}else r=a;return r}getQuadrant(e){let t,a;return(e%=360)%90?(t="quadrant"+Math.ceil(e/90),a="angle1"):(t="quadrant"+(Math.ceil(e/90)+1),a="angle0"),{quadrant:t,angleVal:a}}down(e,t,a,o){if(t&&t.data("lock"))return;let i,r,s,n,d,p,l=this.editor;if(l.origin){let e=l.origin.rotationHandleBox;if(e)return}e.data.createShape?(r=(n=e.data.createShape).data,i=n.bbox,s=[{data:r}],d={shape:{data:r},index:0}):(i=t.attr("id").split("_")[0].split("connect")[0],d=this.selector.check(t.data("shapeId")),a?(s=a,r=(p=a[0].box).data("shapeData")):(s=l.getSelectedShapes(),r=d.shape.data,p=d.shape.box));let h,c=!(!e.data.drawMethod||!e.data.drawMethod.doNotResize),f=$.extend(!0,{},r.props.transform),u=Shape.getAngle(f),m=Shape.getCornerPoints(f.pos,f.dim,u),g=this.bbox,S=m[g[i].p1],x=m[g[i].p2],v=m[g[i].p3],y=m[g[i].p4],E=g[i].signX,C=g[i].signY,O=[],b=[];if(!o){let e=a?a[0].box:d.shape.box;o=l.config.get.offset(l),h=l.config.get.boxOffset(e)}for(let e=0,t=s.length;e<t;e++){let t=s[e],a=t.data.props.transform,o=Shape.getAngle(a),r=a.dim;b[e]=this.getDirectionBox(i,u-o);let n=Shape.getCornerPoints(a.pos,r,o);O[e]=n[g[b[e]].anchor]}let T=l.config.get.scale(),w=e.data.moveTo;l.transform.eventBind(this,{doNotResize:c,angle:u,p1:S,p2:x,p3:v,p4:y,signX:E,signY:C,anchor:O,offset:o,boxOffset:h,scaleFactor:T,createShape:n,externalShapes:a,moveTo:w,currentShape:d,selectedShape:[],bbox:b,constant:g[i].constant,dim:f.dim})}get(e){e.data.createShape&&this.draw.preset.create(e);let t=(e.pageX-e.data.offset.left)/e.data.scaleFactor,a=(e.pageY-e.data.offset.top)/e.data.scaleFactor;t-=e.data.boxOffset.left,a-=e.data.boxOffset.top,e.data.position={x:t,y:a},e.data.x="x"!==e.data.constant&&e.data.dim.width?zoho.math.distanceOf(e.data.p1,e.data.p2,t,a)/e.data.dim.width:0,e.data.y="y"!==e.data.constant&&e.data.dim.height?zoho.math.distanceOf(e.data.p3,e.data.p4,t,a,!0)/e.data.dim.height:0}move(e,t,a){let o=this.editor;a.data.flipx=!!a.data.flipx,a.data.flipy=!!a.data.flipy;let i=o.getSelectedShapes(),r=t;if(i&&i.length&&(o.config.smartGrid.SGallDistances||o.config.smartGrid.SGplanespl)){let t=i[0].data.nvOProps.nvDProps.id;e.data.shapedistances=this.smartguide.setshapedistances(e.data,t)}let s,n=a.data.props.transform,d=Shape.getAngle(n);if(e.data.externalShapes)s=e.data.externalShapes[t].data;else if(i.length){let e=a.data.nvOProps.nvDProps.id.replace("clonebox_",""),t=o.selector.check(e);t&&(s=i[r=t.index].data)}if(!s)return!1;let p=s.props.transform.dim,l=s.props.transform.pos,h=e.data.bbox[r],c=e.data.angle-d,f=this.smartguide,u=e.data.currentShape;this.showSmartGuides&&e.data.smartGuideChange&&(u&&t===u.cloneIndex||(e.data.x=e.data.smartGuide_event_x,e.data.y=e.data.smartGuide_event_y));let m=e.data.x,g=e.data.y;if(m*=e.data.signX,g*=e.data.signY,(c=Math.abs(c))>this.degree44&&c<this.degree135||c>this.degree225&&c<this.degree315){let e=g;g=m,m=e}let S=p.width+p.width*m,x=p.height+p.height*g,v=S<0?-1:1,y=x<0?-1:1,E=$.extend(!0,{},e.data.anchor[r]),C={};e.data.createShape&&e.data.createShape.data.type!==ShapeConstants.ShapeNodeType.CONNECTOR?(S<0&&(E.x=(e.pageX-e.data.offset.left)/e.data.scaleFactor,C.x=!0),x<0&&(E.y=(e.pageY-e.data.offset.top)/e.data.scaleFactor,C.y=!0)):(S<0&&!a.data.flipx&&(n.fliph=!n.fliph,a.data.flipx=!0),S>0&&a.data.flipx&&(n.fliph=!n.fliph,a.data.flipx=!1),x<0&&!a.data.flipy&&(n.flipv=!n.flipv,a.data.flipy=!0),x>0&&a.data.flipy&&(n.flipv=!n.flipv,a.data.flipy=!1));let O,b=h;a.data.flipx&&!a.data.flipy?(b=this.bbox[h].flipx,O=this.bbox[this.bbox[h].flipx].isNeg):!a.data.flipx&&a.data.flipy?(b=this.bbox[h].flipy,O=this.bbox[this.bbox[h].flipy].isNeg):a.data.flipx&&a.data.flipy?(b=this.bbox[h].flipxy,O=this.bbox[this.bbox[h].flipxy].isNeg):O=this.bbox[h].isNeg;let T={width:S=Math.abs(S),height:x=Math.abs(x),fliph:n.fliph,flipv:n.flipv},w=!1;if(o.config.isSupported.connector&&a.data.type===ShapeConstants.ShapeNodeType.CONNECTOR&&1===o.getSelectedShapes().length){let o=this.connector.dragConnector(e,a,t,h,E);E=o&&o.anchor?o.anchor:E,d=o&&void 0!==o.rotAngle?o.rotAngle:d,O=void 0!==a.data.isNeg?a.data.isNeg:O,S=o&&o.width?o.width:S,x=o&&o.height?o.height:x,w=o&&o.connectorData&&(o.connectorData.start&&o.connectorData.start.id||o.connectorData.end&&o.connectorData.end.id),T=$.extend(!0,T,o)}let D,P=s.nvOProps.nvODProps?s.nvOProps.nvODProps.locks:void 0,L=P&&P.noAspectChange;e.data.createShape&&"groupselect"===e.data.createShape.data.nvOProps.nvDProps.id||(D=e.shiftKey?!L:L);let I=!1;if(!w&&D){let t,i;if(a.data.type===ShapeConstants.ShapeNodeType.CONNECTOR)Math.abs(x)>Math.abs(S)?(t=0,i=x):(i=0,t=S);else{let a=p.height?p.width/p.height:1,o="ebox"===h||"wbox"===h,r="nbox"===h||"sbox"===h,s=!(o||r);(I=!!o||!!s&&S>x*a)?(i=S/a,t=S):(t=x*a,i=x),e.data.createShape&&(C.x&&(E.x=l.left-t),C.y&&(E.y=l.top-i))}var A=o.config.resizeEmbedRestriction({width:t,height:i},a.data);S=A.width,x=A.height,T.width=A.width,T.height=A.height}let N=p.width-S,R=p.height-x,B=$.extend(!0,{},E);D&&(B=this.getTangentialAnchor(d,h,E,N,R));let _=VectorUtil.positionShape(d,[S,x],B,O);T.left=_.left,T.top=_.top;let M=e.data.createShape;if("groupselect"===(M&&M.data.nvOProps.nvDProps.id)&&S>2&&x>2){let t={minLeft:_.left,minTop:_.top,maxLeft:_.left+S,maxTop:_.top+x};this.selectionOnDrag(e,t)}let U=e.data.currentShape?e.data.currentShape:void 0;!e.data.boundedContainerDim&&U&&(e.data.boundedContainerDim=o.config.get.boundedContainerDim(U.shape.data));let k=e.data.boundedContainerDim;if(!$.isEmptyObject(k)){let e,t;T.left<0?(e=T.left+T.width,T.left=0):e=k.width-T.left,T.top<0?(t=T.top+T.height,T.top=0):t=k.height-T.top,T.width=T.width<e?T.width:e,T.height=T.height<t?T.height:t}a.box.data(this.modData,T),o.isResize=!0;let G=o.config.get.modifiers(a.data);if(G&&(T.geom.preset.modifiers=G),f&&(Math.abs(N)>=f.smartGuideProximity||Math.abs(R)>=f.smartGuideProximity)&&(o.showSmartGuides=!0),a.data.type!==ShapeConstants.ShapeNodeType.CONNECTOR&&o.showSmartGuides&&u&&u.cloneIndex===t&&"groupselect"!=a.data.nvOProps.nvDProps.id&&!a.data.cropBox&&(e.data.smartGuideChange=f.set(T,a.data,e.data,E,O,b,D,p),o.config.smartGrid.SGplaneOriented?(e.data.currentshapediff=f.setplanecurshapedifferences(e.data,a.data,T),e.data.shapedistances=f.setplaneshapedistances(e.data,a.data,T)):o.config.smartGrid.SGplanespl?e.data.currentshapediff=f.setplanecurshapedifferences(e.data,a.data,T):e.data.currentshapediff=f.setcurshapedifferences(e.data,a.data,T),(o.config.smartGrid.SGplaneOriented||o.config.smartGrid.SGallDistances||o.config.smartGrid.SGplanespl)&&(e.data.smartDistance=f.calculatedistances(e.data,T,E,O,b,D,p)),e.data.smartGuideChange)){let t=e.data.x<0?-1:1,a=e.data.y<0?-1:1;D?I?(e.data.smartGuide_event_x=Math.abs(T.width*v/p.width-1)*t,e.data.smartGuide_event_y=e.data.y):(e.data.smartGuide_event_x=e.data.x,e.data.smartGuide_event_y=Math.abs(T.height*y/p.height-1)*a):(e.data.smartGuide_event_x=Math.abs(T.width*v/p.width-1)*t,e.data.smartGuide_event_y=Math.abs(T.height*y/p.height-1)*a)}let F=Util.extend(!0,{},a.data.props.transform);!d&&o.config.isSupported.pxSupport&&"groupselect"!==a.box.attr("id")&&(T.left=Math.round(T.left),T.top=Math.round(T.top),T.width=Math.round(T.width),T.height=Math.round(T.height)),this.refresh(a.data,a.box,T);let W,H=a.data.type;if(void 0!==H&&(W=o.config.externalShapes[H.toLowerCase()]),void 0!==W&&void 0!==W.resize&&"function"==typeof W.resize.refresh&&W.resize.refresh(a.data,F),e.data.externalShapes){let i=a.data.nvOProps.nvDProps.id;if(-1!==i.indexOf("cropImage")){let e=o.defaults.crop,t=e.instance.actualImage;t&&!$.isEmptyObject(t)&&(t.data.props.transform.fliph=void 0!=T.fliph&&T.fliph,t.data.props.transform.flipv=void 0!=T.flipv&&T.flipv)}e.data.externalShapes[t].box.data("shapeData",a.data)}}selectionOnDrag(e,t){let a=this,o=a.editor;if(o.config.isSupported.shapeSelectOnDrag)if(a.editPoint&&a.editPoint.editingMode){let e={left:t.minLeft,top:t.minTop},i={width:t.maxLeft-t.minLeft,height:t.maxTop-t.minTop},r=o.config.get.scale();e.left*=r,e.top*=r,i.width*=r,i.height*=r,$.each(a.editPoint.editShapes,function(e,t){a.editPoint.unselectHandle(e,void 0,"all")}),a.editPoint.selectVertices(e,i)}else{let a=o.config.getShapesFromRange(t),i=e.data.selectedShapeIds?e.data.selectedShapeIds:[],r=[],s=[];for(let e=0;e<a.length;e++){let t=a[e],o=t.shapeObject,n=o.type.toLowerCase(),d=o[n].nvOProps;if(d.nvODProps&&d.nvODProps.locks&&d.nvODProps.locks.noModify)continue;let p=t.id,l=$.inArray(p,i);-1===l?s.push(p):i.splice(l,1),r.push(p)}e.data.selectedShapeIds=r,0!==i.length&&this.selector.unSelectShapes(i),0!==s.length&&this.selector.selectShapes(s)}}set(e,t,a){let o=t.data(this.modData);o.top=Util.roundOff(o.top),o.left=Util.roundOff(o.left),o.width=Util.roundOff(o.width),o.height=Util.roundOff(o.height);let i,r=$.extend(!0,{},e.props.transform),s=this.refresh(e,a,o),n=this.editor,d=e.type;return void 0!==d&&(i=n.config.externalShapes[d.toLowerCase()]),void 0!==i&&void 0!==i.resize&&"function"==typeof i.resize.refresh&&i.resize.refresh(e,r),s}refresh(e,t,a,o,i){let r=[],s=e.nvOProps.nvODProps&&e.nvOProps.nvODProps.locks?e.nvOProps.nvODProps.locks:void 0;if(s&&(s.noResize||s.noModify))return r;let n=e.props.transform,d=n.dim,p=n.pos,l=Shape.getAngle(n);if(o&&0!==l){let e=Shape.getCornerPoints(p,d,l),t=e.c1,o=VectorUtil.positionShape(l,[a.width,a.height],t);a.left=o.left,a.top=o.top}return d.width=a.width,d.height=a.height,p.left=a.left,p.top=a.top,void 0!==a.fliph&&(n.fliph=a.fliph),void 0!==a.flipv&&(n.flipv=a.flipv),void 0!==a.geom&&(e.props.geom=a.geom),void 0!==a.rotate&&(n.rotAngle=a.rotate,n.rotate=n.rotAngle),r=this.editor.shapeObjectEditor.resize_refresh(e,t,a,i)}updateInfo(e){let t=this.editor,a=[],o=t.checkLockStatus(e,"Modify"),i=t.config.isContainerLockedFromEditing();if(!o&&!i){let o=e.data,i=o.props.transform.dim,r=t.config.get.label("width"),s=t.config.get.label("height");a.push(r+" : "+Math.round(i.width)+"px"),a.push(s+" : "+Math.round(i.height)+"px")}return a}keyEvent(e,t){let a=e.data.props.transform.dim,o=e.data.props.transform.pos,i=a.width,r=a.height,s=o.left,n=o.top,d=this.editor.config.get.portionResize();d?(i=a.width+t[0],r=a.height+t[1]):(i=a.width+t[0]*a.width,r=a.height+-1*t[1]*a.height);let p=e.data.nvOProps.nvODProps?e.data.nvOProps.nvODProps.locks:void 0;if(p&&p.noAspectChange){let e=a.height?a.width/a.height:1;t[0]?r=i/e:i=r*e}d||(s=o.left-.5*(i-a.width),n=o.top-.5*(r-a.height));let l={width:i,height:r,left:s,top:n};return this.refresh(e.data,e.box,l)}getDirectionBox(e,t){if(e.indexOf("resizerbox")>-1)return e;let a=["nwbox","nbox","nebox","ebox","sebox","sbox","swbox","wbox"],o=-1;t<0&&(o=1),t=Math.abs(t);let i;return $.each(a,function(t,a){a===e&&(i=t)}),t>this.degree44&&t<this.degree135?i-=2*o:t>this.degree134&&t<this.degree225?i-=4*o:t>this.degree224&&t<this.degree315&&(i-=6*o),i<0&&(i=8+i),i%=8,a[i]}}class ZSShapeRotate{constructor(e){this.editor=e,this.selector=e.selector,this.modData="angle",this.degree45=45,this.degree90=90,this.degree135=135,this.degree180=180,this.degree225=225,this.degree270=270,this.degree315=315,this.rotateGuide=!1}down(e,t,a){if(t&&t.data("lock"))return;let o,i,r,s=t[0].id.split("_")[0].split("connect")[0],n=this.editor;if(a)i=a[0].data.props.transform;else{let e=t.data("shapeId");o=r=this.selector.check(e),i=r.shape.data.props.transform}let d=r&&r.shape.box,p={left:0,top:0};d&&(p=n.config.get.boxOffset(d));let l=i.dim,h=Shape.getAngle(i),c=$.extend(!0,{},i.pos);c.left+=p.left,c.top+=p.top;let f=i.origin,u={};if(s){t="g"===t[0].tagName.toLocaleLowerCase()?t:t.find("g");let e=Shape.creator.getTransform(t[0],Shape.creator.TranslateConstant);u.cx=e.x,u.cy=e.y}let m=[.5*l.width,.5*l.height],g=[c.left+m[0],c.top+m[1]],S=ZSBBoxUtil.getReferenceArray(l,f,c);f=S||f.xPos!==ShapeConstants.XPosition.CUSTOM_X||f.yPos!==ShapeConstants.YPosition.CUSTOM_Y?[(f=zoho.math.getRotatedValue(h,S.cx,S.cy,g[0],g[1])).x,f.y]:[f.customX,f.customY];let x=n.config.get.scale(),v=n.config.get.offset(n);n.transform.eventBind(this,{currentShape:o,origin:f,offset:v,bbox:s,rotateHandle:u,scaleFactor:x,externalShapes:a,initAngle:h})}get(e){let t=e.data.offset,a=(e.data.bbox,e.pageX-t.left),o=e.pageY-t.top,i=e.data.scaleFactor;o/=i;let r,s=(a/=i)-e.data.origin[0],n=o-e.data.origin[1];if(e.data.rotateHandle){let t=e.data.rotateHandle.cx,a=e.data.rotateHandle.cy,o=t-e.data.origin[0],i=a-e.data.origin[1],s=Math.atan2(o,i);r=180-zoho.math.toDegrees(s)}let d=Math.atan2(s,n);if(d=zoho.math.toDegrees(d),d=180-d,d=Math.round(d),this.rotateGuide){let e=d%45;d=e>40?d+(45-e):e<5?d-e:d}e.data.angle=d-e.data.initAngle}move(e,t,a){let o;if(e.data.externalShapes)o=e.data.externalShapes[t].data;else{let e=a.data.nvOProps.nvDProps.id.replace("clonebox_",""),i=this.editor.selector.check(e);o=i?this.editor.getSelectedShapes()[i.index].data:this.editor.getSelectedShapes()[t].data}let i=o.props,r=(Shape.getAngle(i.transform)+e.data.angle)%this.editor.degree360,s=["0","90","180","270"];for(let t=0;t<s.length;t++)if(this.editor.smartguide&&this.editor.smartguide._isWithinRange(s[t],r,3)&&!e.altKey){r=s[t];break}this.refresh(a.data,a.box,r),a.box.data(this.modData,r),e.data.externalShapes&&e.data.externalShapes[t].box.data("shapeData",a.data)}set(e,t,a){let o=t.data(this.modData);return this.refresh(e,a,o)}refresh(e,t,a){let o=[],i=e.nvOProps.nvODProps&&e.nvOProps.nvODProps.locks?e.nvOProps.nvODProps.locks:void 0;if(i&&(i.noRotation||i.noModify))return o;let r=Shape.getAngle(e.props.transform);a=Math.round(a),e.props.transform.rotAngle=a,this.transformOnRotate(e,r);let s=e.props.transform.pos,n={rotate:a,left:s.left,top:s.top};return o=this.editor.shapeObjectEditor.rotate_refresh(e,t,n)}transformOnRotate(e,t,a=Shape.getAngle(e.props.transform)){let o=a,i=e.props.transform.origin;var r=0;this.editor.origin&&(this.editor.origin.isRotateMode=!0,r=this.editor.origin.originSize/e.scale),void 0===i&&(i={xPos:ShapeConstants.XPosition.CENTER,yPos:ShapeConstants.YPosition.MIDDLE});let s=e.props.transform.pos,n=e.props.transform.dim,d={};if(i.xPos!==ShapeConstants.XPosition.CUSTOM_X&&i.yPos!==ShapeConstants.YPosition.CUSTOM_Y?d=ZSBBoxUtil.getReferenceArray(n,i,s):(d.cx=i.customX+r,d.cy=i.customY+r),0===t){let t=zoho.math.getRotatedValue(o,s.left,s.top,d.cx,d.cy),a=zoho.math.getRotatedValue(o,s.left+n.width,s.top+n.height,d.cx,d.cy),r=VectorUtil.getMidPoints(t,a),p=zoho.math.getRotatedValue(-o,t.x,t.y,r.x,r.y);i.xPos==ShapeConstants.XPosition.CENTER&&i.yPos===ShapeConstants.YPosition.MIDDLE||(e.props.transform.pos.left=p.x,e.props.transform.pos.top=p.y)}else{let a,r,p=ZSBBoxUtil.getReferenceArray(n,{xPos:ShapeConstants.XPosition.CENTER,yPos:ShapeConstants.YPosition.MIDDLE},s),l=zoho.math.getRotatedValue(t,s.left,s.top,p.cx,p.cy);if(i.xPos!==ShapeConstants.XPosition.CUSTOM_X&&i.yPos!==ShapeConstants.YPosition.CUSTOM_Y){d=zoho.math.getRotatedValue(t,d.cx,d.cy,p.cx,p.cy);let e=zoho.math.getRotatedValue(-t,l.x,l.y,d.x,d.y);a=zoho.math.getRotatedValue(o,e.x,e.y,d.x,d.y);let i={x:e.x+n.width,y:e.y+n.height};r=zoho.math.getRotatedValue(o,i.x,i.y,d.x,d.y)}else{let e=zoho.math.getRotatedValue(-t,l.x,l.y,d.cx,d.cy);a=zoho.math.getRotatedValue(o,e.x,e.y,d.cx,d.cy);let i={x:e.x+n.width,y:e.y+n.height};r=zoho.math.getRotatedValue(o,i.x,i.y,d.cx,d.cy)}let h=VectorUtil.getMidPoints(a,r),c=zoho.math.getRotatedValue(-o,a.x,a.y,h.x,h.y);i.xPos===ShapeConstants.XPosition.CENTER&&i.yPos===ShapeConstants.YPosition.MIDDLE||(e.props.transform.pos.left=c.x,e.props.transform.pos.top=c.y)}a&&(e.props.transform.rotAngle=a)}updateInfo(e){let t=[],a=this.editor,o=a.config.isContainerLockedFromEditing();if(!a.checkLockStatus(e,"Modify")&&!o){let o=a.config.get.label("rotate"),i=Shape.getAngle(e.data.props.transform);t.push(o+" : "+i+"&#176;")}return t}keyEvent(e,t,a){if(a){let a=Shape.getAngle(e.data.props.transform);return a=a||0,a+=t[0],a=a<0?360-Math.abs(a):a%360,this.refresh(e.data,e.box,a)}}originDown(e,t,a,o){let i,r=this.editor,s=t.attr("id").split("_")[0].split("connect")[0],n=t.data().shapeId,d=this.selector.check(n),p=(a||r.getSelectedShapes(),(a?a[0].box.data("shapeData"):d.shape.data).props.transform);if(!o){let e=a?a[0].box:d.shape.box;o=r.config.get.offset(r),i=r.config.get.boxOffset(e)}let l=r.config.get.scale(),h=ZSEventHandler.getTarget(e).closest("."+Shape.shapeClass);r.transform.eventBind(this,{offset:o,boxOffset:i,scaleFactor:l,externalShapes:a,shapeBox:h,bbox:s,doNotResize:!1,isRotateOrigin:!0,currentShape:d,dim:p.dim})}}class ZSShapeEditorTransform{constructor(e){this.editor=e,this.selector=e.selector,this.clone=e.clone,this.noclone=e.noclone,this.editPoint=e.editPoint,this.smartguide=e.smartguide,this.connector=e.connector,this.draw=e.draw,this.commonTextEditor=e.commonTextEditor,this.textEditor=e.commonTextEditor?e.commonTextEditor.textEditor:void 0,this.bunchSelect=e.bunchSelect,this.resize=new ZSShapeResize(e),this.rotate=new ZSShapeRotate(e),this.move=new ZSShapeMove(e),this.handle=new ZSHandle(e),e.config.loadFiles.rotateOrigin&&(this.origin=new ZSShapeOrigin(e)),this.isResize=void 0}eventBind(e,t,a){this.editor.shapeEvent.isMouseDown=!0,this.editor.defaults.editing=!0,t.element=e,t.editor=this.editor,t.doNotResize||$(document).on(this.editor.shapeEvent.EVENTS.MOUSEMOVE+".Shape",t,this.eventMove),t.moveHandle=a,$(document).on(this.editor.shapeEvent.EVENTS.MOUSEUP+".Shape",t,this.eventUp),t.externalShapes&&t.externalShapes.method&&t.externalShapes.method.down&&t.externalShapes.method.down.call(this)}eventMove(e){let t=e.data.editor,a=!!e.data.modifiers,o=!!e.data.cornerRadius,i=t.config.isSupported.cloneEditing;if(e.data.isRotateOrigin){e.data.isMoved=!0;let a=$(e.data.shapeBox).data(),o=a?a.shapeId:void 0;return void t.editPoint.movePointBBox(o,e,e.data.shapeBox)}e.data.createShape||e.data.isEditPoint||(e.altKey&&!t.isCropingAShape()&&e.data.element===t.move?t.config.isSupported.duplicate&&t.shapeEvent.duplicate.create(e,!0):i?t.clone.create(e):t.noclone.create(e)),e.data.isInnerShape=!1;let r=e.data.element;"string"==typeof t.shapeEvent.cursorType&&t.shapeEvent.setCursorType(t.shapeEvent.cursorType),r.get.call(r,e);let s=e.data.currentShape,n=e.data.externalShapes&&e.data.externalShapes.length,d=t.getModifyingShapes(e)||[],p=0;if(s||n){if(s&&s.shape){let e=s.shape.data.nvOProps.nvDProps.id;i&&(e="clonebox_"+e),s.cloneIndex=t.getCloneIndex(d,e),p=s.cloneIndex}let a=d[p];if(a){const o=()=>{if(r.move.call(r,e,p,a),e.data.cloneshape)for(var o=0;o<e.data.cloneshape.length;o++)!e.data.cloneshape[o]||s&&o===p||r.move.call(r,e,o,e.data.cloneshape[o]);e.data.externalShapes&&e.data.externalShapes.method&&e.data.externalShapes.method.move&&e.data.externalShapes.method.move.call(r,e);let i=t.editPoint&&t.editPoint.editingMode;t.config.isSupported.moveBBoxesOnShapeEdit&&!i&&t.selector.updateBBox(a.data,a.box,e.data.moveHandle)};t.config.events.move(e,o)}}if(d)for(let n=0,l=d.length;n<l;n++){let l=d[n];!l||s&&n===p||!(e.altKey||a||o)||(r.move.call(r,e,n,l),i||t.selector.updateBBox(l.data,l.box,e.data.moveHandle))}t.transform.dependency(d,!0,e);let l,h=!1;if(s)l=d[p];else if(e.data.externalShapes){let a=e.data.externalShapes[0].box;l=d[0],h=!0,(a.hasClass("path_for_anim")||a.hasClass("cloned_shape_path"))&&t.config.container.trigger("externalShape_modified",{data:[{data:$.extend(!0,{},{shapeData:l.data}),id:l.data.nvOProps.nvDProps.id}],actionType:"MOVE"})}else if(e.data.isEditPoint){let a=ZSEventHandler.getTarget(e),o=a.closest("."+Shape.shapeClass);t.editPoint.move(e,o)}let c=l?l.data.nvOProps.nvDProps.id:void 0;if(c&&"groupselect"!==c&&!e.data.createShape&&t.config.container.trigger("shape_Updation",{object:[l]}),c&&"groupselect"!==c&&"bunchSelect"!==c&&!l.data.noEventShapeInfo&&t.getSelectedShapes().length&&!e.altKey){let a=r.updateInfo.call(r,l,h),o=e.data.constants?e.data.constants:{x:0,y:0};t.transform.shapeInfo({left:e.pageX-o.x+15,top:e.pageY-o.y+15},a)}e.preventDefault()}eventUp(e){let t=e.data.editor,a=t.selector,o=t.shapeEvent;t.config.mouse.up(e),t.shapeEvent.isCombinedInnerShape(e);let i,r=t.config.get.shapeContainer(),s=ZSEventHandler.getTarget(e).closest("."+Shape.shapeClass),n=(e.altKey,e.data.isInnerShape),d=void 0!==e.data.externalShapes,p=t.config.isSupported.cloneEditing;o.isMouseDown=!1;let l=t.getSelectedShapes()[0],h=!!l&&l.data.nvOProps,c=!!h&&(!!h.nvODProps&&h.nvODProps.silhouette);if(n&&!e.data.unSelectShape&&3!==e.which&&!s.data("lock")&&(s.hasClass("grouped")||s.hasClass("combine"))&&!c){let i=s.attr("id");a.check(i,!0)||(o.select(e,s,!0),ZSTriggers.triggerEvent("shape_selected",void 0,void 0,t))}if(e.data.unSelectInnerShape&&t.config.isSupported.parentBBox){let e=t.getSelectedShapes()[0];i=e.data.nvOProps.nvDProps.id,a.unSelectShapes([i]),i=e.parentIds[e.parentIds.length-1];let o=$("#"+i,r),s=t.config.get.shape(i);t.selectShapes([{box:o,data:s}]),a.removeBBox(i)}if(e.data.unSelectShape){let o=s;if(s.data(Shape.parentType)===ShapeConstants.ShapeNodeType.GROUPSHAPE)for(;s.data(Shape.parentType)===ShapeConstants.ShapeNodeType.GROUPSHAPE;)s=$("#"+s.data(Shape.parentId),r);if(e.data.isInnerShapeSelected){i=o.attr("id"),a.unSelectShapes([i]);let e=s.attr("id"),r=t.config.get.shape(e);r&&(t.selectShapes([{box:s,data:r}]),ZSTriggers.triggerEvent("shape_selected",void 0,void 0,t))}else i=s.data("shapeId")?s.data("shapeId"):s.attr("id"),a.unSelectShapes([i])}let f=e.data.element;if($(document).unbind(o.EVENTS.MOUSEMOVE+".Shape",t.transform.eventMove),$(document).unbind(o.EVENTS.MOUSEUP+".Shape",t.transform.eventUp),t.smartguide&&(t.smartguide.removeguides(),t.smartguide.removePosGuides()),t.defaults.showSmartGuides=!1,e.data.createShape)t.draw.preset.up(e);else if($.isEmptyObject(e.data.tableLine))if(e.data.isEditPoint)t.editPoint.up(e);else{let o,i=[],r=[],s=[];o=!e.altKey&&d?e.data.externalShapes:e.data.isEditPoint?[]:t.getSelectedShapes();for(let a of o){let o;if(a.data.type===ShapeConstants.ShapeNodeType.GRAPHICFRAME&&a.data.obj.type===ShapeConstants.GraphicObjectType.CHART){let e=t.selector.getShapesOfZero();o=t.getModifyingBox(e.data,e.box),a=e}else o=t.getModifyingBox(a.data,a.box);if(void 0!==o)if(o.data("duplicating")){let o=t.shapeEvent.duplicate.getShape(e,a.data.nvOProps.nvDProps.id);if(void 0!==o){let e=o.data;e.nvOProps.nvDProps.id=e.nvOProps.nvDProps.id.split("_")[1],s.push(e),o.box.remove()}}else{let e=o.data("dependent"),r=e?t.resize:f;o.removeData("dependent"),o.removeData("modifying");let s=r.set.call(r,a.data,o,a.box);r.modData&&o.removeData(r.modData),p&&(o.remove(),a.data.type===ShapeConstants.ShapeNodeType.GROUPSHAPE&&t.clone.removeClone(a.data.shapes)),-1===a.box.attr("id").indexOf("crop")&&(i=$.merge(i,s))}else if(e.data.externalShapes){let e=a.box.data(f.key),t=a.data.nvOProps.nvDProps.id;r=$.merge(r,[{data:e,id:t}])}else a.box.data("shapeData",a.data)}if(0!==s.length&&t.config.container.trigger("shapes_duplicated",{duplicates:s}),i.length){let o=a.getEditableShapes(t.getSelectedShapes(),!0);for(let r of o){for(let e of r.connector){let a=t.getModifyingBox(e.data,e.box);if(void 0!==a){let o=t.transform.resize.set(e.data,a,e.box);i=$.merge(i,o),p?a.remove():a.removeData("modifying")}}if(!e.data.externalShapes){let a=t.config.stopAutofitAfterResize&&i.length&&i[0].data.data&&i[0].data.data.props&&i[0].data.data.props.transform||!t.config.stopAutofitAfterResize&&!t.isResize,o=t.commonTextEditor.textAutofit&&!a?t.commonTextEditor.textAutofit.createAutoFitShapeData(r,!0):[];for(let t=0;t<o.length;t++)i.push(o[t].shapeData),r.data.textBody&&r.data.textBody.props&&r.data.textBody.props.autoFit&&r.data.textBody.props.autoFit.type===ShapeConstants.AutoFitType.SHAPE&&(e.data.moveHandle=!1)}(p||t.editPoint&&t.editPoint.editingMode)&&a.updateBBox(r.data,r.box,e.data.moveHandle)}t.config.container.trigger("modified",{shapeData:i,appData:{action:"Editor",refreshUI:!0}})}t.isResize=void 0,r.length&&t.config.container.trigger("externalShape_modified",{data:r,actionType:"UP"})}else{let a=t.getSelectedShapes()[0],o=a.data,i=a.box,r=t.clone.get(o,i);if(r.length>0){let a=r.data(t.move.modData);!a||"chartTableContainer"==t.container[0].id&&(e.data.tableLine.isTopLine&&0==e.data.tableLine.pos.top||e.data.tableLine.isLeftLine&&0==e.data.tableLine.pos.left)||t.tableEditor.events.up(o,i,a,e.data.tableLine),r.remove()}t.tableEditor.select.clear()}t.transform.shapeInfo(),t.defaults.editing=!1,t.shapeEvent.isDrawReady()||t.shapeEvent.refreshCursorType(e),t.config.isSupported.connector&&t.connector.removeConnectorPoints(),e.data.externalShapes&&e.data.externalShapes.method&&e.data.externalShapes.method.up&&e.data.externalShapes.method.up.call(this,t,e),t.getSelectedShapes().length&&t.focusEditor(),$.FloatingMenu&&$.FloatingMenu.picture.set(),$.SmartShapesEditor&&$.SmartShapesEditor.updateUI(),t.config.isSupported.hideBBoxesOnShapeMove&&setTimeout(function(){t.selector.bbox.show()},600),t.config.container.trigger("shape_mouseup_called"),t.clearEventData()}shapeInfo(e,t){let a=this.editor.shapeEvent.shapeInfo;if(e&&t&&t.length){let o=this.editor.config.isSupported.shapeSelectOnDrag;if(o)this.editor.config.shapeInfo(e,t,a);else{for(let e=0,o=t.length;e<o;e++){let o=t[e],i=$(`#info${e}`,a);i.length||(i=$(`<div id = "info${e}"></div>`),a.append(i)),i.html(o)}a.css(e)}}else a.html(""),a.css({left:-1e3,top:-1e3})}dependency(e,t,a){let o=[];if(this.editor.config.isSupported.connector){let i=this.connector.editingDependency(e,t,a);$.merge(o,i)}return o}keyEvent(e,t,a){let o=[],i=this.editor.getSelectedShapes();for(let r of i){let i,s,n=this.editor.checkLockStatus(r,"Modify"),d=r.data,p=d.nvOProps.nvDProps.id;if(d.type===ShapeConstants.ShapeNodeType.GRAPHICFRAME&&d.obj.type===ShapeConstants.GraphicObjectType.CHART&&(i=!0,s="chartArea"!==r.chart.type),("rotate"===a||"resize"===a)&&(i||s)||"move"===a&&s)return;let l;if(!n){let i;switch(e){case this.editor.shapeEvent.leftKey:i=[-1*t,0],l=!0;break;case this.editor.shapeEvent.rightKey:i=[t,0],l=!0;break;case this.editor.shapeEvent.upKey:i=[0,-1*t],l=!1;break;case this.editor.shapeEvent.downKey:i=[0,t],l=!1}let s=this[a],n=s?s.keyEvent.call(s,r,i,l,p):void 0;o=n&&n.length?$.merge(o,n):void 0}}o&&o.length&&this.getDependentDataAndTriggerEvent(o,!0)}getDependentDataAndTriggerEvent(e,t){let a=this,o=a.dependency(a.editor.getSelectedShapes(),!0);for(let e of o){let t=a.selector.check(e.id);t&&($.extend(!0,t.shape.data,e.data.data),t.shape.data.props.geom.preset.modifiers=$.extend(!0,[],e.data.data.props.geom.preset.modifiers))}e=$.merge(e,o);let i=a.commonTextEditor.textAutoFit?a.commonTextEditor.textAutoFit.getAutoFitData(!0):[];$.merge(e,i),a.editor.config.isSupported.hideBBoxesOnShapeMove&&a.editor.selector.bbox.hide(),t?(a.editor.shapeEvent.keyEventId&&clearTimeout(a.editor.shapeEvent.keyEventId),a.editor.shapeEvent.keyEventId=setTimeout(function(){a.editor.selector.bbox.show(),a.triggerModifyEvent(e)},600)):a.triggerModifyEvent(e)}triggerModifyEvent(e){let t=this.editor;if(this.bunchSelect&&this.bunchSelect.length)t.config.container.trigger("keyevent_triggered");else for(let e of t.getSelectedShapes())this.selector.updateBBox(e.data,e.box,!t.getSelectedShapes().length);e.length&&t.config.container.trigger("modified",{shapeData:e,appData:{refreshUI:!0,action:"Editor"}})}transform(e,t){let a=this.selector.getEditableShapes(this.editor.getSelectedShapes(),!0),o=[];for(let i of a){let a=i.data,r=i.box,s={},n=a.props.transform;if("rotate"===t){let t=Shape.getAngle(a.props.transform);t=t||0;let o=parseInt(e)+t;o>360&&(o%=360),a.props.transform.rotAngle=o,s.rotAngle=o}else if("flip"===t){let t=Shape.getAngle(a.props.transform);"x"===e&&(n.fliph=!n.fliph,s.fliph=n.fliph),"y"===e&&(n.flipv=!n.flipv,s.flipv=n.flipv),!t||"x"!==e&&"y"!==e||(a.props.transform.rotAngle=360-t,s.rotAngle=360-t)}let d=this.editor.shapeObjectEditor.resize_refresh(a,r,s);for(let e of d)o.push(e);this.selector.updateBBox(a,r)}o.length&&this.editor.config.container.trigger("modified",{shapeData:o,appData:{action:"Editor"}})}}class ZSBbox{constructor(e){this.editor=e,this.options=ZSBbox.getOptions(),this.cloneBBoxes={},this.bboxId="BBOX_",this.bboxClass="BBOXES"}static getOptions(){return{rhandle:20,handledata:"handledata",handleName:"handle",bboxDim:8,handleDim:9,strokeWidth:1,minWidth:27,minHeight:27}}hide(){this.editor.config.get.bboxContainer().hide()}show(){this.editor.config.get.bboxContainer().show()}getBBoxType(e){let t="normal";if(e){let a=this.editor.checkLockStatus({data:e},"Modify");t=a?"lock":"normal"}return t}getConnectorData(e,t){return this.editor.connector.updateBBoxId(e,t)}getBBoxByType(e,t,a){return this.editor.config.get.bboxContainer().children("#"+this.bboxId+e).children(".bbox"+e+a).filter("."+t)}createChartInnerBBox(e,t){let a=e.props.transform.pos.left,o=e.props.transform.pos.top,i=e.props.transform.dim.width,r=e.props.transform.dim.height;this.editor.config.get.bboxContainer().children().filter(".chart_innerbbox").remove();let s=[[a,o],[a+i,o],[a+i,o+r],[a,o+r]];for(let e=0;e<s.length;e++){let a=$.extend(!0,{},$.BBoxConstant.editPointnew.shape);a.nvOProps.nvDProps.id=Math.uuid();let o=a.props.transform.dim.width;a.props.transform.pos.left=s[e][0]-o/2,a.props.transform.pos.top=s[e][1]-o/2,a.className=a.className?a.className+" bbox chart_innerbbox":"bbox chart_innerbbox";let i=Shape.create.draw(a,$(t));i.data("shapeId","chart_title")}}getBBoxes(e){let t=this,a=$.extend(!0,{},$.BBoxConstant.value),o=e.nvOProps.nvDProps.id,i=e.nvOProps.nvODProps?e.nvOProps.nvODProps.locks:void 0;return i&&(i.noRotation&&$.extend(a,{rotate:"lock"}),i.noResize&&$.extend(a,{nbox:"lock",sbox:"lock",ebox:"lock",wbox:"lock",nebox:"lock",nwbox:"lock",sebox:"lock",swbox:"lock"}),i.noSelect&&$.extend(a,{nbox:"none",sbox:"none",ebox:"none",wbox:"none",nebox:"none",nwbox:"none",sebox:"none",swbox:"none",rotate:"none",li:"none",border:"lock_border"}),i.noModify&&$.extend(a,{rotate:"lock",nbox:"lock",sbox:"lock",ebox:"lock",wbox:"lock",nebox:"lock",nwbox:"lock",sebox:"lock",swbox:"lock"})),this.editor.config.isSupported.rotatebbox||delete a.rotate,-1!==o.indexOf("crop")&&(-1!==o.indexOf("cropFrame")&&$.extend(a,{nbox:"cropcenter",sbox:"cropcenter",ebox:"cropmiddle",wbox:"cropmiddle",nebox:"cropcorner",nwbox:"cropcorner",sebox:"cropcorner",swbox:"cropcorner"}),delete a.rotate,delete a.border,delete a.li),e.type===ShapeConstants.ShapeNodeType.GRAPHICFRAME?e.obj.type===ShapeConstants.GraphicObjectType.TABLE?a={borderframe:"borderframe","se-resizerbox":"resizerbox","sw-resizerbox":"resizerbox","ne-resizerbox":"resizerbox"}:e.obj.type===ShapeConstants.GraphicObjectType.CHART&&(delete a.rotate,delete a.li,delete a.borderframe,delete a.resizerbox):(delete a.borderframe,delete a.resizerbox),t.pushObjToArray(a)}pushObjToArray(e){let t=[],a=e[$.BBoxConstant.value.border]?{border:$.BBoxConstant.value.border}:void 0,o=e[$.BBoxConstant.value.borderframe]?{borderframe:$.BBoxConstant.value.borderframe}:void 0;a&&t.push(a),o&&t.push(o);for(let a in e){let o=e[a],i={};i[a]=o,o!==$.BBoxConstant.value.border&&o!==$.BBoxConstant.value.borderframe&&t.push(i)}return t}getClassName(e){return"border"!==e&&"li"!==e?e+" "+Shape.shapeClass+" scalable":e+" "+Shape.shapeClass}getHandle(e,t){let a,o=this.editor.checkLockStatus(e,"Modify");1!==t.length||o||(a=1),a||this.remove("handle"),e.data.isHandle=a}appendToFragment(e,t){t instanceof $?e.appendChild(t[0]):e.appendChild(t)}createDefaultBBox(){let e=this.editor.getShapeContainer(),t=$.extend(!0,{},$.BBoxConstant.value),a=this,o={};for(let i in t){let r=t[i],s=ZSBBoxUtil.getBBoxData(r,o);if(s){s.doNotAppendToCont=!0;let t=Shape.create.draw(s,e);a.cloneBBoxes[i]=t}}}create(e,t){let a=this;$.isEmptyObject(a.cloneBBoxes)&&a.createDefaultBBox();let o=a.editor.getSelectedShapes(),i=e?$.isArray(e)?e:[e]:o,r=document.createDocumentFragment(),s=a.editor.config.get.bboxContainer(),n=[];for(let e in i){let d=i[e];if(d){let e=d.data,i=d.box,p=a.bboxId+e.nvOProps.nvDProps.id,l=s.children("#"+p)[0];l||("g"===s[0].tagName.toLowerCase()?((l=SVGCreator.createGroup(s[0])).setAttribute("id",a.bboxId+e.nvOProps.nvDProps.id),l.setAttribute("class",a.bboxClass)):((l=document.createElement("div")).id=a.bboxId+e.nvOProps.nvDProps.id,l.classList.add(a.bboxClass))),a.getHandle(d,o),e.isSmartInnerShape?a._createOverlay(e,i,e.isHandle,l):Shape.touchDevice?n.push({data:e,box:i}):a._create(e,i,e.isHandle,l,t),r.appendChild(l)}}i.length&&(Shape.touchDevice||s[0].appendChild(r),$(a.editor.config.drawcontainer).trigger("bboxcreated",n))}_createOverlay(e,t,a,o){this.editor.overlay.add(e.nvOProps.nvDProps.id,!0,o)}_create(e,t,a,o,i){let r=this,s=r.editor,n=-1!==e.nvOProps.nvDProps.id.indexOf("cropFrame"),d=e.type===ShapeConstants.ShapeNodeType.GRAPHICFRAME&&e.obj.type===ShapeConstants.GraphicObjectType.TABLE;if(e.isChart)this.createChartInnerBBox(e,o);else{let t=this.getBBoxes(e);for(let a in t){let d=t[a],p=Object.keys(d)[0],l=d[p],h=p,c=r.getClassName(p),f=ZSBBoxUtil.getBBoxData(l,e);if(f){let t="",a=!1,d=-1!==l.search("lock")?"lock":"normal";n&&r.transformCropBox(f,p,e),s.config.isSupported.connector&&((t=r.getConnectorData(e,p))&&(f=t.bboxData,c=c+" "+t.cname,h=p+t.idName),d=(a=s.connector.isBBoxConnected(c))?"connected":d),r.update(f,e,h,c,void 0,d);let u=$(o).children("."+p);if(!u.length||i){f.doNotAppendToCont=!0,r.groupShapeParentFill(f,l,i),r.cloneBBoxes[p]&&!a?(u=$(r.cloneBBoxes[p]).clone(!0,!0),$(u).addClass(f.className),u.attr("id",f.nvOProps.nvDProps.id),"g"!==o.tagName.toLowerCase()?Shape.props.transform.set(f,this.editor.config.container,u):Shape.props.transform.set(f,$(o),u),(i||"lock"==d||n||e.type==ShapeConstants.ShapeNodeType.GROUPSHAPE)&&(Shape.props.fill.set(f,o,u),Shape.props.stroke.set(f,o,u))):u=Shape.create.draw(f,$(o));let h=ZSBBoxUtil.isHideSelector(e);r.appendToFragment(o,u),ZSBBoxUtil.updateBBoxData(s,u,t,e,d),r.showVisibleBBox(p,e,u),r.hideSelectorPath(u,h),u.data("bboxData",f)}else r._move(e,u,$(o),p,c,d)}}}if(a=!e.isInnerShape&&a,t&&a&&s.config.isSupported.modifiers){let a;if(t.data("lock")||(a=t.data(Shape.handle)),a)for(let t in a){let i,n,d=a[t],p=r.getHandleName(e),l=$(o).find("#handle"+t);if(l.length){i=l.data("bboxData");let a=r.options.handleName+t,p=r.options.handleName+" "+Shape.shapeClass;r.update(i,e,a,p,void 0,r.options.handleName),l.attr("id",i.nvOProps.nvDProps.id),l.attr("class",i.className),ZSBBoxUtil.position(s,i,e,r.options.handleName,d),Shape.props.transform.set(i,o,l),Shape.props.stroke.set(i,o,l),n=ZSBBoxUtil.isHideSelector(e),r.showVisibleBBox(t,e,l),r.hideSelectorPath(l,n)}else i=ZSBBoxUtil.getBBoxData(p,e),r.update(i,e,r.options.handleName+t,r.options.handleName,d,r.options.handleName),i.editable=!0,i.type=ShapeConstants.ShapeNodeType.SHAPE,i.doNotAppendToCont=!0,l=Shape.create.draw(i,$(o)),r.appendToFragment(o,l),l.addClass("scalable"),"lock"===p&&l.data("lock",!0),l.data("bboxData",i),n=ZSBBoxUtil.isHideSelector(e);l.data(r.options.handledata,t),r.showHideBox(l,n)}}n?s.config.container.trigger("cropbox_created"):d&&s.config.container.trigger("tablebbox_created",{data:e})}hideSelectorPath(e,t){t?$(".selector",e).css({display:"none"}):$(".selector",e).css({display:"block"})}move(e,t,a){let o=this.editor;var i=e.nvOProps.nvDProps.id;if(e.type===ShapeConstants.ShapeNodeType.CONNECTOR?(this.remove(i),this.create({data:e,box:t})):this._bboxmove(e,t,a),o.editPoint&&o.editPoint.editingMode){var r=o.editPoint.editShapeIds();e.type===ShapeConstants.ShapeNodeType.SHAPE&&r.indexOf(i)>-1?o.editPoint.create(e):(o.editPoint.remove(),this.create({data:e,box:t}))}e.type===ShapeConstants.ShapeNodeType.GRAPHICFRAME&&e.obj.type===ShapeConstants.GraphicObjectType.TABLE&&this.editor.container.trigger("tablebbox_moved",{data:e})}transformCropBox(e,t,a){let o={nwbox:{flip:{fliph:!1,flipv:!0},dim:{width:10,height:10}},sebox:{flip:{fliph:!0,flipv:!1},dim:{width:10,height:10}},nebox:{flip:{fliph:!0,flipv:!0},dim:{width:10,height:10}},swbox:{flip:{flipv:!1,flipv:!1},dim:{width:10,height:10}},sbox:{dim:{width:15,height:5}},nbox:{dim:{width:15,height:5}},ebox:{dim:{width:5,height:15}},wbox:{dim:{width:5,height:15}},cropframe:{flip:{fliph:!1,flipv:!1}}},i=t?o[t]:void 0;i&&(i.dim&&(e.props.transform.dim.width=i.dim.width/a.scale,e.props.transform.dim.height=i.dim.height/a.scale),i.flip&&(e.props.transform.fliph=i.flip.fliph,e.props.transform.flipv=i.flip.flipv))}groupShapeParentFill(e,t,a){a&&("corner"==t||"other"==t?(e.props.geom={type:"PRESET",preset:{type:"RECT"}},e.props.fill={type:"SOLID",solid:{color:{type:"CUSTOM",rgb:[248,248,248]}}},e.props.stroke={type:"SOLID",width:1,jointype:"MITER",fill:{type:"SOLID",solid:{color:{type:"CUSTOM",rgb:[221,221,221]}}}}):"border"==t&&(e.props.stroke={type:ShapeConstants.StrokeType.SOLID,width:2,jointype:"ROUND",fill:{type:"SOLID",solid:{color:{type:"CUSTOM",rgb:[233,233,233]}}},captype:"FLAT"}))}update(e,t,a,o,i,r){if(ZSBBoxUtil.position(this.editor,e,t,a,i),!!(t&&t.nvOProps&&t.nvOProps.nvProps&&t.nvOProps.nvProps.embed)&&"rotate"==a)r="lock";else{let e=this.editor.checkLockStatus({data:t},"Modify");r=t&&e?"lock":"normal"}e.clsName="bbox"+t.nvOProps.nvDProps.id+r,e.className="bbox "+o+" "+e.clsName,-1!==a.indexOf("handle")?e.nvOProps.nvDProps.id=a:e.nvOProps.nvDProps.id=a+"_"+Math.uuid(),t.fitModeData&&"border"===a&&(e.fitModeData=$.extend(!0,{},t.fitModeData))}_move(e,t,a,o,i,r){let s=this,n=t.data().bboxData,d=ZSBBoxUtil.isHideSelector(e);s.update(n,e,o,i,void 0,r),ZSBBoxUtil.updateBBoxData(s.editor,t,void 0,e,r),t.attr({id:n.nvOProps.nvDProps.id,class:n.className}),s.showVisibleBBox(o,e,t),s.hideSelectorPath(t,d),Shape.props.transform.set(n,a,t)}getHandleName(e){let t=this.options.handleName;return e.nvOProps.nvODProps&&e.nvOProps.nvODProps.locks&&e.nvOProps.nvODProps.locks.noHandles&&(t="lock"),t}showVisibleBBox(e,t,a){let o=this,i={nbox:!0,nebox:!0,ebox:!0,sebox:!0,sbox:!0,swbox:!0,wbox:!0,nwbox:!0,rotate:!0,li:!0,"se-resizerbox":!0,"sw-resizerbox":!0,"ne-resizerbox":!0,borderframe:!0,border:!0},r=t.props.transform.dim;if(r.width*t.scale<o.options.minWidth&&(i.nbox=!1,i.sbox=!1,i.li=!1,i.rotate=!1),r.height*t.scale<o.options.minHeight&&(i.ebox=!1,i.wbox=!1),t.type===ShapeConstants.ShapeNodeType.CONNECTOR){let e,a;t.props.transform&&(e=t.props.transform.fliph,a=t.props.transform.flipv),(i=e&&a?{nbox:!1,nebox:!1,ebox:!1,sebox:!0,sbox:!1,swbox:!1,wbox:!1,nwbox:!0}:e||a?{nbox:!1,nebox:!0,ebox:!1,sebox:!1,sbox:!1,swbox:!0,wbox:!1,nwbox:!1}:{nbox:!1,nebox:!1,ebox:!1,sebox:!0,sbox:!1,swbox:!1,wbox:!1,nwbox:!0}).li=!1,i.rotate=!1,i.border=!1}i[e]?ZSBBoxUtil.changeAppearance(a,"visible"):ZSBBoxUtil.changeAppearance(a,"hide")}_bboxmove(e,t,a){let o=this,i=o.editor,r=o.getBBoxes(e),s=!!t.hasClass("crop Frame"),n=ZSBBoxUtil.getId(e),d=o.getBBoxType(e),p=i.config.get.bboxContainer();if(!a)for(let t in r){let a=r[t];a=a[t=Object.keys(a)[0]];let l=$.BBoxConstant[a];if(l){let r=ZSBBoxUtil.getBBoxData(a,e);if(s&&o.transformCropBox(r,t,e),ZSBBoxUtil.position(i,r,e,t),s&&("li"===t||"rotate"===t||"border"===t))continue;let h=ZSBBoxUtil.isHideSelector(e);d="lock"==a?"lock":d,l=o.getBBoxByType(n,t,d),o.showVisibleBBox(t,e,l),o.hideSelectorPath(l,h),"g"!==p[0].tagName.toLowerCase()?Shape.props.transform.set(r,this.editor.config.container,l):Shape.props.transform.set(r,p,l)}}if(t&&1===i.getSelectedShapes().length){let a;if(t.data("lock")||(a=t.data(Shape.handle)),a)for(let t in a){let r=a[t],s=p.find("#handle"+t);if(s.length>0){let a=o.getHandleName(e),n=ZSBBoxUtil.getBBoxData(a,e);ZSBBoxUtil.position(i,n,e,o.options.handleName,r),Shape.props.transform.set(n,p,s),Shape.props.stroke.set(n,p,s),s.data(o.options.handledata,t);let d=ZSBBoxUtil.isHideSelector(e);o.showHideBox(s,d)}}}}remove(e){let t=this.editor,a=t.config.get.bboxContainer();if(e)if(e===this.options.handleName)$("."+this.options.handleName,a).remove();else{let t=$("."+this.bboxId+e,a);$("#"+this.bboxId+e,a).remove(),t.length&&t.remove()}else t.editPoint&&t.editPoint.editingMode?a.children("."+this.bboxClass).remove():a.empty();t.cornerRadius&&t.cornerRadius.remove()}showHideBox(e,t){ZSBBoxUtil.changeAppearance(e,t?"hide":"visible")}innerBboxcreate(e,t,a){for(var o=0;o<e.length;o++){e[o].box;let i=e[o].data.props.geom.preset?e[o].data.props.geom.preset.type:"CUSTOM",r="rect"===(i=i.split("_").join("").toLowerCase())||"oval"===i;if($.ChartUtil.NullCheck.isSelectedShapeNotNull(e[o])){let s=this["getCornerPoints"+i](e[o].data);this.innerBboxDraw(e[o].data,t,s,r,a)}}}innerBboxDraw(e,t,a,o,i){let r=this;var s,n,d,p,l,h=r.editor.config.get.bboxContainer(),c=e.nvOProps.nvDProps.id;let f=SVGCreator.createGroup(h[0]);f.setAttribute("id",r.bboxId+e.nvOProps.nvDProps.id);let u=r.bboxClass+" "+r.bboxId+i.nvOProps.nvDProps.id;f.setAttribute("class",u);for(var m=0;m<a.length;m++)(s=(s=$.extend(!0,{},$.BBoxConstant.editPointnew)).shape).nvOProps.nvDProps.id="innerEleBBox_"+Math.uuid(),n=s.props.transform.dim.width,d=s.props.transform.dim.width,s.props.transform.pos.left=a[m][0]-n/2,s.props.transform.pos.top=a[m][1]-d/2,o||this.editor.selector.updateShapes._updateChartElementsPos(i,t,s),p=Shape.create.draw(s,$(f)),l=i.nvOProps.nvDProps.id,p.addClass("bbox chart_innerbbox bbox"+c+"normal"),p.data({shapeId:c,chartId:l});h.append(f)}getCornerPointsrect(e){let t=e.props.transform.pos,a=e.props.transform.dim;return[[t.left,t.top],[t.left+a.width,t.top],[t.left+a.width,t.top+a.height],[t.left,t.top+a.height]]}getCornerPointsoval(e){let t=e.props.transform.pos,a=e.props.transform.dim;return[[t.left,t.top],[t.left+a.width,t.top],[t.left+a.width,t.top+a.height],[t.left,t.top+a.height]]}getCornerPointspie(e){let t=e.point,a=[t.xc,t.yc],o=PathGenerator.prototype.getEllipseCoordinates(t.radian1,t.radian2,t.diameter/2,t.diameter/2,t.xc,t.yc);return[a,o.splice(0,2),o]}getCornerPointscustom(e){let t=e.props.geom.custom.pathList[0].path,a=[];for(let e=0;e<t.length;e++)if("M"===t[e].type||"L"===t[e].type){let o=t[e][t[e].type.toLowerCase()];a.push([o.x,o.y])}else if("CC"===t[e].type){let o=t[e][t[e].type.toLowerCase()][2];a.push([o.x,o.y])}return a}getCornerPointsblockarc(e){let t=e.point,a=PathGenerator.prototype.getEllipseCoordinates(t.radian1,t.radian2,t.diameter/2,t.diameter/2,t.xc,t.yc),o=a.splice(0,2),i=PathGenerator.prototype.getEllipseCoordinates(t.radian1,t.radian2,t.diameter*(.5-t.widthRatio),t.diameter*(.5-t.widthRatio),t.xc,t.yc);return[o,a,i,i.splice(0,2)]}}class ZSBBoxUtil{static getShapeId(e){if("object"==typeof e)return e.data("shapeId");{let t=(e=$("#"+e)).data("shapeId");return t}}static changeAppearance(e,t){let a={hide:function(e){e.css({visibility:"hidden"}),$("path",e).css({"pointer-events":"none"})},visible:function(e){e.css({visibility:"visible"}),$("path",e).css({"pointer-events":"visiblePainted"})}};a[t]&&a[t].call(this,e)}static getBBoxData(e,t){let a=$.BBoxConstant[e];if(a){let o=ZSBbox.getOptions(),i=$.extend(!0,{},a[a.type.toLowerCase()]);return"lock_border"===e&&(i.props.stroke.width=3),t.fitModeData&&"border"===e?i.fitModeData=$.extend(!0,{},t.fitModeData):t.fitModeData&&(i.fitModeData={left:-1*(o.bboxDim+o.minWidth),top:-1*(o.bboxDim+o.minHeight),width:o.minWidth+o.minWidth,height:o.minHeight+o.minHeight}),i.editable=!0,i.value?(-1!==e.indexOf("resizerbox")&&ZSBBoxUtil.updateResizerUrl(i),i.type=ShapeConstants.ShapeNodeType.PICTURE):(i.type=ShapeConstants.ShapeNodeType.SHAPE,i.selectorStrokeWidth=14),i.noSelector="borderframe"===e||void 0,i}}static updateResizerUrl(e){e.value.url=cssPath+"styles/images/resizer.png"}static updateBBoxData(e,t,a,o,i){t.data("shapeId",ZSBBoxUtil.getId(o)),a&&"connected"===i&&t.data("connectedTo",a.connectedTo),t.data("lock",ZSBBoxUtil.getLockData(e,o)),t.data("bboxType",i),t.data("lock")&&t.data("lockerDetails",o.nvOProps.nvODProps.locks.lockers)}static getId(e){return e.nvOProps.nvDProps.id}static getLockData(e,t){return e.checkLockStatus({data:t},"Modify")}static position(e,t,a,o,i,r){let s,n=a.props.transform,d=n.dim,p=n.pos,l=n?Shape.getAngle(n):0,h=a.scale?a.scale:1;s=a.props.transform.origin?a.props.transform.origin:{xPos:"CENTER",yPos:"MIDDLE"};let c=a.nvOProps.nvDProps.id;d=$.extend(!0,{},d),p=$.extend(!0,{},p);let f=.5*d.width,u=.5*d.height,m=p.left+f,g=p.top+u,S=m,x=g,v=!1,y=ZSBbox.getOptions();if(i){let e=VectorUtil.getViewBoxDimensions(d.width,d.height);e[0]=0==e[0]?.001:e[0],e[1]=0==e[1]?.001:e[1];let t=i[0],a=i[1];n&&n.fliph&&(t=e[0]-t),n&&n.flipv&&(a=e[1]-a);let o=t/e[0],r=a/e[1];Number.isNaN(o)&&(o=0),Number.isNaN(r)&&(r=0),S=p.left+o*d.width,x=p.top+r*d.height}else if(-1!==o.indexOf("ebox")?S=p.left+d.width:-1!==o.indexOf("wbox")&&(S=p.left),-1!==o.indexOf("nbox")||-1!==o.indexOf("nebox")||-1!==o.indexOf("nwbox"))x=p.top;else if(-1!==o.indexOf("sbox")||-1!==o.indexOf("sebox")||-1!==o.indexOf("swbox"))x=p.top+d.height;else if(-1!==o.indexOf("resizerbox"))"se-resizerbox"===o?(S=p.left+d.width+3,x=p.top+d.height+3):"sw-resizerbox"===o?(S=p.left-3,x=p.top+d.height+3):"ne-resizerbox"===o&&(S=p.left+d.width+3,x=p.top-3);else if("rotate"===o)x=p.top-y.rhandle/h;else if("origin"===o)if("CUSTOM_X"!=s.xPos&&"CUSTOM_Y"!=s.yPos){let t=ZSBBoxUtil.getReferenceArray(d,s,p);S=t.cx-e.origin.originSize/h,x=t.cy-e.origin.originSize/h}else S=s.customX,x=s.customY,v=!0;else"li"===o?(S=p.left+f,x=p.top-y.rhandle/h+y.bboxDim/h):t.isBorder||-1===o.indexOf("editPoint")||(S=n.fliph?n.dim.width+p.left-t.props.transform.pos.left:p.left+t.props.transform.pos.left,x=n.flipv?n.dim.height+p.top-t.props.transform.pos.top:p.top+t.props.transform.pos.top);let E=zoho.math.getRotatedValue(l,S,x,m,g);v&&(E.x=S,E.y=x);let C=t.props.transform.dim;if("border"===o||"borderframe"===o)ZSBBoxUtil.borderSize(t,a);else if("li"===o)t.props.transform.dim.height=y.rhandle/h;else if(-1!==o.indexOf("resizerbox"))t.props.transform.dim.height=10,t.props.transform.dim.width=10;else if(!t.isBorder){r=r||y.bboxDim,-1!==o.indexOf("handle")&&(r=y.handleDim);let e=-1!==a.nvOProps.nvDProps.id.indexOf("cropFrame");e||(C.width=r/h,C.height=r/h)}if(!t.isBorder){let e="border"===o||"borderframe"===o;t.props.transform.pos.left=e?p.left:E.x-.5*C.width,t.props.transform.pos.top=e?p.top:E.y-.5*C.height}"sw-resizerbox"===o?l=90:"ne-resizerbox"===o&&(l=270);let O=e.config.get.boxOffset(void 0,c);return v||(t.props.transform.pos.left+=O.left,t.props.transform.pos.top+=O.top),t.props.transform.rotAngle=l,-1!=t.nvOProps.nvDProps.id.indexOf("borderframe")&&ZSBBoxUtil.updateFrameData(t),E}static borderSize(e,t){let a=$.extend(!0,{},t.props.transform.dim);e.props.transform.dim=a}static updateFrameData(e){let t=[];e.props.geom.preset.modifiers=t,e.props.stroke.jointype=ShapeConstants.JoinType.BEVEL;let a=e.props.transform;a.dim.width=a.dim.width+16+2,a.dim.height=a.dim.height+16+2,a.pos.left=a.pos.left-8-1,a.pos.top=a.pos.top-8-1;let o=a.dim.width,i=a.dim.height,r=8/(o>i?i:o);t.push(r)}static cursor(e,t){let a;(t+={nbox:0,nebox:45,ebox:90,sebox:135,sbox:180,swbox:225,wbox:270,nwbox:325,"se-resizerbox":135,"sw-resizerbox":225,"ne-resizerbox":45}[e])>=360&&(t%=360);let o=["n-resize","ne-resize","e-resize","se-resize","s-resize","sw-resize","w-resize","nw-resize"];return t>=337.5&&t<=360||t>=0&&t<=22.5?a=o[0]:t>=22.6&&t<=67.5?a=o[1]:t>=67.6&&t<=112.5?a=o[2]:t>=112.6&&t<=157.5?a=o[3]:t>=157.6&&t<=202.5?a=o[4]:t>=202.6&&t<=247.5?a=o[5]:t>=247.6&&t<=292.5?a=o[6]:t>=292.6&&t<=337.5&&(a=o[7]),a}static isHideSelector(e){let t=e.props.transform.dim,a=ZSBbox.getOptions(),o=e.scale||1;return(o*t.width<a.minWidth||o*t.height<a.minHeight)&&e.type!==ShapeConstants.ShapeNodeType.CONNECTOR}static getReferenceArray(e,t,a){var o,i=VectorUtil.getViewBoxDimensions(e.width,e.height),r=0,s=0;if(a)var r=a.left,s=a.top;if(t)switch(t.yPos){case"TOP":switch(t.xPos){case"LEFT":o=0;break;case"CENTER":o=1;break;case"RIGHT":o=2}break;case"MIDDLE":switch(t.xPos){case"LEFT":o=3;break;case"CENTER":o=4;break;case"RIGHT":o=5}break;case"BOTTOM":switch(t.xPos){case"LEFT":o=6;break;case"CENTER":o=7;break;case"RIGHT":o=8}}else o=4;switch(o){case 0:return{cx:r,cy:s};case 1:return{cx:r+.5*i[0],cy:s};case 2:return{cx:r+i[0],cy:s};case 3:return{cx:r,cy:s+.5*i[1]};case 4:return{cx:r+.5*i[0],cy:s+.5*i[1]};case 5:return{cx:r+i[0],cy:s+.5*i[1]};case 6:return{cx:r,cy:s+i[1]};case 7:return{cx:r+.5*i[0],cy:s+i[1]};case 8:return{cx:r+i[0],cy:s+i[1]}}}}class ZSSelector{constructor(e){this.editor=e,this.updateShapes=new ZSSelectorUpdate,e.config.loadFiles.bbox&&(this.bbox=new ZSBbox(e)),e.config.isSupported.bunchSelect&&(this.bunchSelect=new ZSBunchSelect(e)),e.config.isSupported.multiSelect&&(this.multiSelect=new ZSMultiSelect(e)),this.groupSelectId="groupselect"}selectShapes(e,t,a,o,i){this.bbox,this.editor;if(e){let r=this.editor;r.focusEditor(),t&&r.clear(a);let s=r.config.container;for(let t of e){let e,a,i;"string"==typeof t?a=t:(i=t.data?t.data:void 0,e=t.box,a=i?i.nvOProps.nvDProps.id:e.attr("id")),i=i||r.config.get.shape(a);let n=!1;if((e=e||$("#"+a,s)).length&&e.data(Shape.parentId)&&(n=!0),i){let t=i.type.toLowerCase();void 0!==i[t]&&(i=i[t]);let r=this.check(a,n);r&&(n?i=this.update(this.updateShapes.getShapes()[0],i):i.type===ShapeConstants.ShapeNodeType.GRAPHICFRAME&&i.obj.type===ShapeConstants.GraphicObjectType.TABLE&&ZSTable.updateTableDimensionData(i,e)),this.init(e,i,n,void 0,o)}}let n=this.updateShapes.getShapes();!i&&n.length&&ZSTriggers.triggerEvent("shape_selected",a,void 0,r)}}selectAll(){let e=this.editor;e.focusEditor(),this.init(),this.clear("wait");let t=e.getShapeContainer(),a=e.config.get.shapes.visible();for(let o of a){let i=e.config.get.shape(o);if(i.type===ShapeConstants.ShapeNodeType.GRAPHICFRAME&&a.length>1)continue;let r=$("#"+o,t);this.init(r,i,void 0,void 0,!0)}e.getSelectedShapes().length&&(this.bbox&&this.bbox.create(),ZSTriggers.triggerEvent("shape_selected",void 0,void 0,e))}unSelectShapes(e,t,a){let o=this.editor;if(e&&e.length){let i=[];for(let a of e){this.bbox&&this.bbox.remove(a);let e=this.updateShapes.getShapes()[0];if(e&&e.parentIds&&-1!==e.parentIds.indexOf(a))a=e.data.nvOProps.nvDProps.id,this.bbox&&this.bbox.remove(a);else if(e&&e.parentIds&&e.parentIds.length&&e.data.nvOProps.nvDProps.id==a){let t=e.parentIds[e.parentIds.length-1];this.bbox.remove(t)}e&&e.data.type===ShapeConstants.ShapeNodeType.GRAPHICFRAME&&e.data.obj.type===ShapeConstants.GraphicObjectType.TABLE&&this.editor.container.trigger("clear_table_menus");let o=this._remove(a);void 0===typeof t&&(t=[{action:"continue",data:unSelectedShapes}]),o&&i.push(o[0])}!a&&i.length&&ZSTriggers.triggerEvent("shape_unselected",{shapes:i,criteria:t},void 0,o),o.config.isSupported.text&&o.commonTextEditor.textEditor.clear({remove:!0})}else this.init(),!a&&t&&ZSTriggers.triggerEvent("shape_unselected",t,void 0,o)}init(e,t,a,o,i=!1){this.editor.container;let r=this.editor;if(!e){if(this.updateShapes.getShapes().length){if(r.config.isSupported.text){let e={diff_text:o,diff_shape:!0};r.commonTextEditor.textEditor.clear(void 0,r,e)}this.updateShapes.clearShapes(),!i&&this.bbox&&this.bbox.remove()}return}let s=e.attr("id"),n=[];if(!this.check(s,a)){if(t||(t=r.config.get.shape(s)),a){let a=ZSShapeObjectEditor.getGrandParentBox(r.config.container,e);if(r.config.isSupported.parentBBox&&t.type===ShapeConstants.ShapeNodeType.GROUPSHAPE&&a.grandParentId)e=a.grandParentBox,t=r.config.get.shape(a.grandParentId);else{n=a.parentIds;let o=r.shapeObjectEditor.getEditor(ShapeConstants.ShapeNodeType.GROUPSHAPE),i=o.updateInnerShapeData(s,n);$.extend(!0,t.props,i.props),t.isSmartInnerShape=i.isSmartInnerShape,t.paraSelect=i.paraSelect,t.doNotEdit=i.doNotEdit,t.isInnerShape=!0,t.isCombineShape=e.data("isCombineShape")}}t&&t.type===ShapeConstants.ShapeNodeType.GROUPSHAPE&&(t=t.groupshape?t.groupshape:t);let o={cells:[]},d={};t&&t.type===ShapeConstants.ShapeNodeType.GRAPHICFRAME&&(t.obj.type===ShapeConstants.GraphicObjectType.TABLE?(ZSTable.updateTableDimensionData(t,e),t.scale=r.config.get.scale(),o.selectionType=ShapeConstants.GraphicObjectType.TABLE):t.obj.type===ShapeConstants.GraphicObjectType.CHART&&(d.type="chartArea"));let p=r.config.isSupported.connector?r.connector.get(e,t):[];if(this.updateShapes.setShapes({box:e,data:t,connector:p,parentIds:n,table:o,chart:d}),!i&&r.config.isSupported.shapeEdit&&this.bbox){if(n.length){let e=n[n.length-1],t=r.config.get.shape(e),a=$("#"+e,r.config.container);this.bbox.create({data:t,box:a},!0)}this.bbox.create({data:t,box:e});let a=this.updateShapes.getShapes();a.length>1&&this.bbox.remove("handle")}}return this.updateShapes.getShapes().length-1}check(e,t){let a=!1,o=this.updateShapes.getShapes();for(var i=0;i<o.length;i++){let r=o[i];if(r.data.type!==ShapeConstants.ShapeNodeType.GROUPSHAPE||t){if(r.data.type===ShapeConstants.ShapeNodeType.COMBINEDOBJECT){let t=[i];if(a=this.checkCombinedObject(i,e,r,t))break}else if(0==i&&r.data.type===ShapeConstants.ShapeNodeType.GRAPHICFRAME){let s=this.getShapesOfZero();if(s.data.nvOProps.nvDProps.id===e){(a={shape:s,index:i}).innerGraphic=!0;break}if(t&&r.data.nvOProps.nvDProps.id===e&&r.data.obj.type===ShapeConstants.GraphicObjectType.CHART){a={shape:o[i],index:i};break}if(!t&&r.data.obj.type===ShapeConstants.GraphicObjectType.TABLE&&r.data.nvOProps.nvDProps.id===e){a={shape:o[i],index:i};break}}else if(r.data.nvOProps.nvDProps.id===e){a={shape:o[i],index:i};break}}else{let t=[i];if(a=this.checkGroupshape(i,e,r,t))break}}return a}checkGroupshape(e,t,a,o){let i=this,r=!1;if(a.data&&(a=a.data),a.type===ShapeConstants.ShapeNodeType.GROUPSHAPE)if(a.nvOProps.nvDProps.id===t)r={shape:this.updateShapes.getShapes()[e],index:o,grpShape:!0};else for(let s=0,n=a.shapes.length;s<n;s++){let n=a.shapes[s];if(n=n.groupshape?n.groupshape:n,o.push(s),n.type===ShapeConstants.ShapeNodeType.GROUPSHAPE){if(r=i.checkGroupshape(e,t,n,o))break;o.splice(-1,1)}else if(n.type===ShapeConstants.ShapeNodeType.COMBINEDOBJECT){if(r=i.checkCombinedObject(s,t,n,o))break;o.splice(-1,1)}else{if(n.nvOProps.nvDProps.id===t){r={shape:this.updateShapes.getShapes()[e],index:o,grpShape:!0};break}o.splice(-1,1)}}return r}checkCombinedObject(e,t,a,o){let i=!1;if(a.data&&(a=a.data),a.type===ShapeConstants.ShapeNodeType.COMBINEDOBJECT)if(a.nvOProps.nvDProps.id===t)i={shape:this.updateShapes.getShapes()[e],index:o,cmbObject:!0};else if(a.combinedNodes)for(let e=0,r=a.combinedNodes.length;e<r;e++){let r=a.combinedNodes[e];if(r.combinedobject&&(r=r.combinedobject),r.nvOProps.nvDProps.id===t){o.push(e),i={shape:this.editor.getSelectedShapes(),index:o,cmbObject:!0};break}}return i}getEditableShapes(e,t,a,o){let i=[];for(let t of e){let e=this.editor.checkLockStatus(t,"Modify");e||i.push(t)}if((e=t?i:this.updateShapes.getShapes())&&e.length&&(o&&e.forEach(function(t,a){if((t=t.data).nvOProps.nvProps&&t.nvOProps.nvProps.placeHolder){let o=t.textBody&&1==t.textBody.paras.length&&1==t.textBody.paras[0].portions.length&&!t.textBody.paras[0].portions[0].t&&!t.textBody.paras[0].portions[0].type;o&&e.splice(a,1)}}),a&&"GRAPHICFRAME"===e[0].data.type)){let t=this.getShapesOfZero();(e=[])[0]=t}return e}getShapesOfZero(){let e=this.updateShapes.getShapes()[0];if(e&&e.data.type==ShapeConstants.ShapeNodeType.GRAPHICFRAME)if(e.data.obj.type===ShapeConstants.GraphicObjectType.TABLE){let t,a,o=e.box;if(this.editor.tableEditor&&(t=this.editor.tableEditor.getRowIndex(),a=this.editor.tableEditor.getCellIndex()),void 0!==t&&void 0!==a){let i=ZSTable.row.getRowBox(o,t);if(i){let r=ZSTable.row.cell.getCellBox(i,a),s=ZSTable.row.cell.getCellAsShape(e.data,o,i,!0,t,a);s.isTable=!0,s.tableData=e.data;let n={};s.scale=e.data.scale,n.data=s,n.box=r,e=n}}}else if(e.data.obj.type===ShapeConstants.GraphicObjectType.CHART&&void 0!==e.chart[e.chart.type]){var t={};t.data=e.chart[e.chart.type][0].data,t.box=e.chart[e.chart.type][0].box,t.chart={type:e.chart.type},e=t}return e}clear(e,t,a){let o=this.editor,i=o.config.get.shapeContainer(),r=this.updateShapes.getShapes();if(r.length){let s=o.defaults.text.editor;1===r.length&&s.IMEHandler.shape.dummySpan&&s.IMEHandler.shape.dummySpan.length&&o.defaults.text.IME.contentEditable.text().length&&o.commonTextEditor.textEditor.IMEHandler.shapeFinalize(),this._clear(e,r,t,a),"GRAPHICFRAME"===r[0].data.type&&"TABLE"===r[0].data.obj.type&&(o.config.container.trigger("clear_table"),o.config.container.trigger("clear_table_menus")),Shape.create.editData&&Shape.create.editData.icon.clear(o,i,!0)}}_clear(e,t,a,o){this.init(void 0,void 0,void 0,void 0,o),ZSTriggers.triggerEvent("shape_unselected",[{action:e,shapes:t,animNumSelect:a}],void 0,this.editor)}update(e,t,a){if(!$.isEmptyObject(e)){let o=e.data.nvOProps.nvDProps.id;if(t=t||this.editor.config.get.shape(o),t=t.groupshape?t.groupshape:t,e.parentIds&&e.parentIds.length&&!t.isChart){let a=this.editor.shapeObjectEditor.getEditor(ShapeConstants.ShapeNodeType.GROUPSHAPE);(t=a.updateInnerShapeData(o,e.parentIds)).isInnerShape=!0}let i=$("#"+o,this.editor.config.container);t.type===ShapeConstants.ShapeNodeType.GRAPHICFRAME&&"TABLE"===t.obj.type&&(ZSTable.updateTableDimensionData(t,i),this.editor.container.trigger("clear_table")),e.box=i,a&&a!==o?this.updateGrpShape(e.data,a,t):e.data=t}return t}updateShapeData(e){if(e){let t=e.nvOProps.nvDProps.id,a=this.updateShapes.getShapes();for(let o of a)t===o.data.nvOProps.nvDProps.id&&(o.data=e)}}getInnerShapeData(e,t){let a=editor.config.get.shape(t),o=$.extend(!0,{},a);return ShapeObject.updateShapeData(GroupShape.props,o,void 0,!0),ShapeObject.getShape(e,o)}updateBBox(e,t,a){this.bbox&&this.bbox.move(e,t,a)}removeBBox(e){this.bbox&&this.bbox.remove(e)}createExternalBbox(e){this.bbox&&this.bbox.create(e)}updateGrpShape(e,t,a){e=e.groupshape?e.groupshape:e;for(let o in e.shapes){let i=e.shapes[o];if(i.nvOProps.nvDProps.id===t){let t=$.extend(!0,{},e.shapes[o].props.transform);e.shapes[o]=a,e.shapes[o].props.transform=t;break}i.type===ShapeConstants.ShapeNodeType.GROUPSHAPE&&this.updateGrpShape(i,t,a)}}_remove(e){let t=this.check(e);if(t.grpShape&&$.isArray(t.index)&&(t.index.length>1?t=void 0:t.index=t.index[0]),t){this.editor.config.isSupported.text&&this.editor.commonTextEditor.textEditor.clear({remove:!0});let e=this.updateShapes.getShapes(),a=e.splice(t.index,1);return a}}groupselectShapes(e,t,a){let o=this,i=o.editor,r=i.getShapeContainer();a||(a=i.config.get.getAllShapeData());let s,n=e.left+t.width,d=e.top+t.height;for(let t of a){let a=t.type.toLowerCase(),p=t[a];if(p.nvOProps.nvDProps.hidden)s=!1;else{let t,a=p.props;if(a&&a.transform&&a.transform.dim&&a.transform.pos)t=p.props.transform;else{let e=$.extend(!0,{},p);i.config.get.mergeTransformShape(e),t=e.props.transform}let o=i.config.get.scale(),r=Shape.getAngle(t),l=Shape.getCornerPoints(t.pos,t.dim,r);$.each(l,function(t,a){var i=a.x*o,r=a.y*o;if(!(i>e.left&&r>e.top&&i<n&&r<d))return s=!1,!1;s=!0})}if(s){let e=p.nvOProps.nvDProps.id;p=i.config.get.shape(e);let t=r.children("#"+e);p.type!==ShapeConstants.ShapeNodeType.GRAPHICFRAME&&o.init(t,p)}}}selectInnerChartElement(e){let t=["chart_title"];if(e&&0===t.indexOf(e))return!0;let a=this.editor.getSelectedShapes()[0];if(!a)return!1;{let e=a.data,t="GRAPHICFRAME"===e.type&&"CHART"===e.obj.type;if(t)return!0}}selectChart(e,t,a,o,i=!1){let r;if(-1!=e.attr("id").indexOf("innerEleBBox")){let t=e.data("chartId"),a=e.data("shapeId");e=this.editor.container.find("#"+t).find("#"+a)}i?this.editor.selector.init(void 0,void 0,void 0,void 0,!0):this.editor.clear("wait");let s=e.closest("."+GraphicFrame.className);"chart_dataTable"==s.attr("id")&&s.closest(".show").hasClass("graphicframe")&&(s=s.closest(".show")),r=r||s.attr("id"),a=a||this.editor.config.get.shape(r),o=o||e.attr("id");let n=$.ChartUtil.getChartType(a);var d=this.updateShapes.getSelectedChartElement(o,s,a,n),p=t?d.type:"chartArea";"title"!==p&&Chart.obj._get(a);var l={};if(l.type=p,t&&"chartArea"!=p){var h=this.updateShapes.getElementData(a,s,n,d);h.length?("title"===l.type?i||this.bbox.create({data:h[0].data,box:h[0].box}):(this.updateShapes.updateChartElementsPos(a,h,p),i||this.bbox.innerBboxcreate(h,p,a)),l[l.type]=h,void 0!==d.index&&(l.index=d.index),void 0!==d.seriesIndex&&(l.seriesIndex=d.seriesIndex)):l.type="chartArea"}i||this.bbox.create({data:a,box:s});let c="chartArea"===p;return this.updateShapes.setShapes({box:s,connector:[],data:a,parentIds:[],chart:l,table:{cells:[]}}),t?this.editor.container.trigger("chartInnerElementSelected",{isChartAreaSelected:c}):ZSTriggers.triggerEvent("shape_selected",void 0,void 0,this.editor),!t||"chartArea"==p||"legend"==p}}class ZSSelectorUpdate{constructor(e){this.shapes=[]}getShapes(){return this.shapes}setShapes(e){this.shapes.push(e)}clearShapes(){this.shapes=[]}getSelectedShapesById(e){let t,a=this.shapes;for(let o=0;o<a.length;o++)if(a[o].data.nvOProps.nvDProps.id===e){t=a[o];break}return t}getSelectedChartElement(e,t,a,o){let i,r,s=t.data("selectedChartElement");if(s&&(-1!=s.indexOf("Series")||-1!=s.indexOf("DataPoint")||-1!=s.indexOf("Marker"))){let e=s.split("_");r=parseInt(e[1])-1}if("chart_Legend_BgShape"===e||-1!=e.indexOf("chart_legend"))i={type:"legend"};else if("chart_plotAreaBgShape"===e)i={type:"plotArea"};else if("chart_title"===e)i={type:"title"};else if("bar"===o)if(-1!=e.indexOf("chart_Series")&&-1===e.indexOf("DataLabel")){let t=this.getSeriesIndexbar(e);i={type:"Series",index:t}}else i={type:"chartArea"};else if("pie"===o||"doughnut"===o)if(-1!=e.indexOf("chart_Category")&&-1===e.indexOf("DataLabel")){let t=this.getCategoryIndexpie(e);i={type:"DataPoint",index:t,seriesIndex:1}}else i={type:"chartArea"};else if("reppie"===o)if(Chart.obj.plotArea.chart.reppie.getReppieSplitValues(a),-1!=e.indexOf("chart_Category")&&-1===e.indexOf("DataLabel")){let t=this.getCategoryIndexreppie(e,a);i={type:"DataPoint",index:t,seriesIndex:1}}else i={type:"chartArea"};else if("area"===o)if(-1!=e.indexOf("chart_Series")&&-1===e.indexOf("DataLabel")){let t=this.getSeriesIndexarea(e);i={type:"Series",index:t}}else i={type:"chartArea"};else if("bubble"===o)if(-1!=e.indexOf("chart_series")&&-1===e.indexOf("DataLabel")){let t=this.getSeriesIndexbubble(e);i={type:"Series",index:t}}else i={type:"chartArea"};else if("line"===o||"scatter"===o)if(-1!=e.indexOf("marker")){let t=this.getSeriesIndexline(e);i={type:"Markers",index:t}}else if(-1!=e.indexOf("chart_Series")&&-1===e.indexOf("DataLabel")){let t=this.getSeriesIndexline1(e);i={type:"Series",index:t}}else i={type:"chartArea"};return i}getElementData(e,t,a,o){a=a||$.ChartUtil.getChartType(e);let i=o.type,r=[],s={};if("chartArea"===i)s.data=Chart.props.getData(e),s.data.selectedChartElement=i,s.box=$("#chart_bgShape",t),r.push(s);else if("plotArea"===i)Chart.obj._get(e),s.data=Chart.obj.plotArea.props.getData(e),s.data.selectedChartElement=i,s.box=$("#chart_plotAreaBgShape",t),r.push(s);else if("title"===i){let a=Chart.obj.title.getTitleShapeData(e);a.props.transform.pos.top=a.props.transform.pos.top+e.props.transform.pos.top,a.props.transform.pos.left=a.props.transform.pos.left+e.props.transform.pos.left,a.isExternalShape=!0,s.box=$("#chart_title",t),a||(i="chartArea",a=e,s.box=t),s.data=a,r.push(s)}else if("legend"===i){let a=e.obj.chart.obj.legend.exists;if(a){let a=Chart.box("chart_legend",t);s.data=Chart.obj.legend.props.getData(e,a),s.box=a,r.push(s)}}else if(-1!=i.indexOf("Marker_")){let o=i.split("_"),n=parseInt(o[1])-1,d=parseInt(o[2])-1;s.data=Chart.obj.plotArea.chart[a].details.series.marker.props.getData(e,n,d),$.ChartUtil.NullCheck.isObjAvai(s.data)&&(s.data.selectedChartElement=i);let p=$.ChartUtil.getId[a].markerCatId(n,d),l=$(p,t);$.ChartUtil.NullCheck.isSelectedNotNullbox(l)&&(s.box=l,r.push(s))}else if("Markers"===i){let n=parseInt(o.index),d=$.ChartUtil.getCategoryLength(e,a,n);for(let o=0;o<d;o++){(s={}).data=Chart.obj.plotArea.chart[a].details.series.marker.props.getData(e,n,o),s.data.selectedChartElement=i;let d=$.ChartUtil.getId[a].markerCatId(n,o),p=$(d,t);$.ChartUtil.NullCheck.isSelectedNotNullbox(p)&&(s.box=p,r.push(s))}}else if("Series"===i){let n=o.index,d=$.ChartUtil.getCategoryLength(e,a,n);if("line"!==a&&"scatter"!==a||(d-=1),d)for(let o=0;o<d;o++){s={},a=$.ChartUtil.confirmChartType(e,a),s.data=Chart.obj.plotArea.chart[a].details.series.details.props.getData(e,n,o),$.ChartUtil.NullCheck.isObjAvai(s.data)&&(s.data.selectedChartElement=i);let d=$.ChartUtil.getId[a].catId(n,o),p=$(d,t);$.ChartUtil.NullCheck.isSelectedNotNullbox(p)&&(s.box=p,r.push(s))}else{(s={}).data=Chart.obj.plotArea.chart[a].details.series.details.props.getData(e,n);let o=$.ChartUtil.getId[a].serId(n),i=$(o,t);s.box=i,r.push(s)}}else if("DataPoint"===i){i.split("_");let n=o.seriesIndex-1,d=o.index;s.data=Chart.obj.plotArea.chart[a].details.series.details.props.getData(e,n,d),s.data.selectedChartElement=i;let p=$.ChartUtil.getId[a].catId(n,d,e),l=$(p,t);$.ChartUtil.NullCheck.isSelectedNotNullbox(l)&&(s.box=l,r.push(s))}return r}updateChartElementsPos(e,t,a){for(let o=0;o<t.length;o++){t[o].box;let i=t[o].data;this._updateChartElementsPos(e,a,i)}}_updateChartElementsPos(e,t,a){Chart.obj._get(e);let o=e.props.transform.pos,i={left:e.obj.chart.obj.plotArea.layout.left.val,top:e.obj.chart.obj.plotArea.layout.top.val},r=e.obj.chart.obj.plotArea.props.transform.pos,s={left:"legend"==t?e.obj.chart.obj.legend.transform.pos.left:e.obj.chart.obj.legend.layout.left.val,top:"legend"==t?e.obj.chart.obj.legend.transform.pos.top:e.obj.chart.obj.legend.layout.top.val},n={left:e.obj.chart.obj.title.layout.left.val,top:e.obj.chart.obj.title.layout.top.val};switch(t){case"chartArea":a.props.transform.pos=o;break;case"plotArea":a.props.transform.pos={left:e.props.transform.pos.left+i.left+r.left,top:e.props.transform.pos.top+i.top+r.top};break;case"legend":a.props.transform.pos={left:e.props.transform.pos.left+s.left,top:e.props.transform.pos.top+s.top};break;case"title":a.props.transform.pos={left:e.props.transform.pos.left+n.left,top:e.props.transform.pos.top+n.top};break;default:a.props.transform.pos={left:e.props.transform.pos.left+i.left+r.left+a.props.transform.pos.left,top:e.props.transform.pos.top+i.top+r.top+a.props.transform.pos.top}}}getSeriesIndexbar(e){let t=e.split("_");return parseInt(t[2])}getSeriesIndexarea(e){let t=e.split("-");return parseInt(t[1].slice(4))}getSeriesIndexbubble(e){let t=e.split("-");return parseInt(t[1])}getSeriesIndexline(e){let t=e.split("_");return parseInt(t[2])}getSeriesIndexline1(e){let t=e.split("_")[1].split("-");return parseInt(t[0].slice(6))}getCategoryIndexpie(e){let t=e.split("_");return parseInt(t[2]-50)}getCategoryIndexreppie(e,t){let a=e.split("_"),o=parseInt(a[2]),i=o>=50?2:1,r=o>=50?o-50:o;r=2===i?r+1:r;let s=1===i?r-1:r,n=t.obj.chart.obj.plotArea.chart[0].reppie.second.indexTracker,d=0;if(-1!=s){let e=0;for(let t=0;t<n.length;t++)if(n[t]===i&&d++,d===r){e=t;break}return e}{let e=$.ChartUtil.getCategoryLength(t,chartType);return e-1}}}class ZSEditorUtils{constructor(e){this.editor=e}bboxchangeAppearance(e){let t=this.editor.config.get.bboxContainer().children();for(let a of Array.from(t))ZSBBoxUtil.changeAppearance($(a),e)}modifiedPosAndDim(e,t){let a={},o=Shape.getAngle(t);if(o){let i,r,s,n,d=[],p=t.pos.left+t.dim.width/2,l=t.pos.top+t.dim.height/2;for(let t=0,a=e.length;t<a;t++)d[t]=zoho.math.getRotatedValue(-o,e[t].x,e[t].y,p,l);i=VectorUtil.getMinAndMax(d),a.width=i.big.x-i.small.x,a.height=i.big.y-i.small.y,r=a.left+a.width/2,s=a.top+a.height/2,n=zoho.math.getRotatedValue(o,r,s,p,l),d=[];for(let t=0,a=e.length;t<a;t++)d[t]=zoho.math.getRotatedValue(-o,e[t].x,e[t].y,n.x,n.y);i=VectorUtil.getMinAndMax(d),a.left=i.small.x,a.top=i.small.y}else{let t=VectorUtil.getMinAndMax(e);a.left=t.small.x,a.top=t.small.y,a.width=t.big.x-t.small.x,a.height=t.big.y-t.small.y}return a}static flipSetData(e,t){t.fliph&&e.fliph(t.dim.width),t.flipv&&e.flipv(t.dim.height)}static rotateSetData(e,t){let a=t.dim;t.pos;e.rotate(Shape.getAngle(t),new Point(a.width/2,a.height/2))}static posSetData(e,t){let a=t.pos;e.transform(a.left,a.top)}static createMergedShapePath(e){let t=e.type.toLowerCase(),a=void 0!==e[t]?e[t]:e,o=a.props.transform,i=ZSEditorUtils.createCompoundPath(a);return i.toCubicBeziers(),ZSEditorUtils.flipSetData(i,o),ZSEditorUtils.rotateSetData(i,o),ZSEditorUtils.posSetData(i,o),i}static createCompoundPath(e,t=!1){let a,o=e.props.geom,i=e.props.transform.dim;if(o.type===ShapeConstants.ShapeGeometryType.PRESET){let e=o.preset,r=e.modifiers&&e.modifiers.length?e.modifiers:$.Preset[e.type].modifiers,s=Shape.pathGenerator.getPathPoints(e.type,r,i.width,i.height);if(t){let t=Shape.pathGenerator.presetToCustomGeom(s.path,i.width,i.height,e.cornerRadius);a=Shape.pathGenerator.getCustomPathPoints(t,i.width,i.height)}else a=s.path}else a=Shape.pathGenerator.getCustomPathPoints(o.custom,i.width,i.height);return CompoundPath.create(a)}static getTransformFromPoints(e){let t={pos:{left:0,top:0},dim:{width:0,height:0},rotAngle:0,origin:{xPos:ShapeConstants.XPosition.CENTER,yPos:ShapeConstants.YPosition.MIDDLE}};if(0!==e.length){let a=VectorUtil.getMinAndMax(e);t.pos={left:a.small.x,top:a.small.y},t.dim={width:a.big.x-a.small.x,height:a.big.y-a.small.y}}return t}static getCornerPointsForPathLists(e){let t=[];if(0===e.length)return t;for(let a of e)for(let e of a.pathElements)t.push(e.getBoundingCorners());return ZSEditorUtils.flatArrayValues(t)}static flatArrayValues(e=[]){let t=[];for(let a=0;a<e.length;a++){let o=e[a];o instanceof Array?t.push(...o):t.push(o)}return t}getTransformValue(e){if(0===e.length)return;let t,a,o,i;for(let r of e)for(let e of r.pathElements){let r=e.getBoundingCorners();for(let e of r)t=!Number.isNaN(t)&&t<e.x?t:e.x,a=!Number.isNaN(a)&&a<e.y?a:e.y,o=!Number.isNaN(o)&&o>e.x?o:e.x,i=!Number.isNaN(i)&&i>e.y?i:e.y}return{minX:t,minY:a,maxX:o,maxY:i}}static applyNewPositionInPath(e,t,a){let o=a.left-t.left,i=a.top-t.top;for(let t of e){let e=t.type,a=t[e.toLowerCase()];if(e===ShapeConstants.PathType.M||e===ShapeConstants.PathType.L)a.x+=o,a.y+=i;else if(e===ShapeConstants.PathType.CC||e===ShapeConstants.PathType.QC)for(let e of a)e.x+=o,e.y+=i;else if(e===ShapeConstants.PathType.C)continue}return e}}class ZSSmartguide{constructor(e){this.editor=e,this.smartGuideProximity=8,this.removeArrowClass=12,this.scrollDiffLeft=0,this.scrollDiffTop=0,this.v_Div=void 0,this.h_Div=void 0,this.smartguides={SmartGuideDistance:$("<div>").attr("id","smartDistance").addClass("SmartGuideDistance"),smartguide_H1:$("<span>").attr("id","hsmartguide1").addClass("smartGuideDist smartGuideHorizontal").css("visibility","hidden"),vcurelement:$("<span>").addClass("smartDistanceIndicator smartGuideVertical ").css("visibility","hidden").attr("id","smartshapevguide01"),curvelement:$("<span>").addClass("smartDistanceIndicator smartGuideVertical").css("visibility","hidden").attr("id","vsmartcurrentshape"),smartguide_H2:$("<span>").attr("id","hsmartguide2").addClass("smartGuideDist smartGuideHorizontal").css("visibility","hidden"),vcurelement1:$("<span>").addClass("smartDistanceIndicator smartGuideVertical").css("visibility","hidden").attr("id","smartshapevguide02"),curvelement1:$("<span>").addClass("smartDistanceIndicator smartGuideVertical ").css("visibility","hidden").attr("id","vsmartcurrentshape01"),smartguide_V1:$("<span>").attr("id","vsmartguide1").addClass("smartGuideDist smartGuideVertical ").css("visibility","hidden"),hcurelement:$("<span>").addClass("smartDistanceIndicator smartGuideHorizontal ").css("visibility","hidden").attr("id","smartshapehguide01"),curhelement:$("<span>").addClass("smartDistanceIndicator smartGuideHorizontal ").css("visibility","hidden").attr("id","hsmartcurrentshape"),smartguide_V2:$("<span>").attr("id","vsmartguide2").addClass("smartGuideDist smartGuideVertical ").css("visibility","hidden"),hcurelement1:$("<span>").addClass("smartDistanceIndicator smartGuideHorizontal ").css("visibility","hidden").attr("id","smartshapehguide02"),curhelement1:$("<span>").addClass("smartDistanceIndicator smartGuideHorizontal ").css("visibility","hidden").attr("id","hsmartcurrentshape01"),oldPosleft:void 0,oldPostop:void 0,hordistances:void 0,verdistances:void 0,vertical1:$("<span>").attr("id","vsmartguide1").addClass("smartGuide smartGuideVertical smartAllguides").css("visibility","hidden"),vertical2:$("<span>").attr("id","vsmartguide2").addClass("smartGuide smartGuideVertical smartAllguides").css("visibility","hidden"),horizontal1:$("<span>").attr("id","hsmartguide1").addClass("smartGuide smartGuideHorizontal smartAllguides").css("visibility","hidden"),horizontal2:$("<span>").attr("id","hsmartguide2").addClass("smartGuide smartGuideHorizontal smartAllguides").css("visibility","hidden")},this.guideMapping={nbox:{0:!1,1:!0,2:!0,3:!1,4:!1,5:!0,6:!0,7:!1},sbox:{0:!1,1:!0,2:!0,3:!1,4:!1,5:!0,6:!0,7:!1},ebox:{0:!0,1:!1,2:!1,3:!0,4:!0,5:!1,6:!1,7:!0},wbox:{0:!0,1:!1,2:!1,3:!0,4:!0,5:!1,6:!1,7:!0},nwbox:{0:!1,1:!1,2:!0,3:!0,4:!1,5:!1,6:!0,7:!0},sebox:{0:!1,1:!1,2:!0,3:!0,4:!1,5:!1,6:!0,7:!0},nebox:{0:!0,1:!0,2:!1,3:!1,4:!0,5:!0,6:!1,7:!1},swbox:{0:!0,1:!0,2:!1,3:!1,4:!0,5:!0,6:!1,7:!1},"se-resizerbox":{0:!1,1:!1,2:!0,3:!0,4:!1,5:!1,6:!0,7:!0},"sw-resizerbox":{0:!0,1:!0,2:!1,3:!1,4:!0,5:!0,6:!1,7:!1},"ne-resizerbox":{0:!0,1:!0,2:!1,3:!1,4:!0,5:!0,6:!1,7:!1}},this.allowSmartGuide={horizontal:{nbox:{quadrant1:{angle0:{0:!1,1:!0,2:!0,3:!1,4:!1}},quadrant2:{angle0:{0:!1,1:!1,2:!1,3:!1,4:!1}},quadrant3:{angle0:{0:!1,1:!1,2:!1,3:!0,4:!0}},quadrant4:{angle0:{0:!1,1:!1,2:!1,3:!1,4:!1}}},ebox:{quadrant1:{angle0:{0:!1,1:!1,2:!1,3:!1,4:!1}},quadrant2:{angle0:{0:!1,1:!1,2:!1,3:!0,4:!0}},quadrant3:{angle0:{0:!1,1:!1,2:!1,3:!1,4:!1}},quadrant4:{angle0:{0:!1,1:!0,2:!0,3:!1,4:!1}}},sbox:{quadrant1:{angle0:{0:!1,1:!1,2:!1,3:!0,4:!0}},quadrant2:{angle0:{0:!1,1:!1,2:!1,3:!1,4:!1}},quadrant3:{angle0:{0:!1,1:!0,2:!0,3:!1,4:!1}},quadrant4:{angle0:{0:!1,1:!1,2:!1,3:!1,4:!1}}},wbox:{quadrant1:{angle0:{0:!1,1:!1,2:!1,3:!1,4:!1}},quadrant2:{angle0:{0:!1,1:!0,2:!0,3:!1,4:!1}},quadrant3:{angle0:{0:!1,1:!1,2:!1,3:!1,4:!1}},quadrant4:{angle0:{0:!1,1:!1,2:!1,3:!0,4:!0}}}},vertical:{nbox:{quadrant1:{angle0:{0:!1,1:!1,2:!1,3:!1,4:!1}},quadrant2:{angle0:{0:!1,1:!1,2:!1,3:!0,4:!0}},quadrant3:{angle0:{0:!1,1:!1,2:!1,3:!1,4:!1}},quadrant4:{angle0:{0:!1,1:!0,2:!0,3:!1,4:!1}}},ebox:{quadrant1:{angle0:{0:!1,1:!1,2:!1,3:!0,4:!0}},quadrant2:{angle0:{0:!1,1:!1,2:!1,3:!1,4:!1}},quadrant3:{angle0:{0:!1,1:!0,2:!0,3:!1,4:!1}},quadrant4:{angle0:{0:!1,1:!1,2:!1,3:!1,4:!1}}},sbox:{quadrant1:{angle0:{0:!1,1:!1,2:!1,3:!1,4:!1}},quadrant2:{angle0:{0:!1,1:!0,2:!0,3:!1,4:!1}},quadrant3:{angle0:{0:!1,1:!1,2:!1,3:!1,4:!1}},quadrant4:{angle0:{0:!1,1:!1,2:!1,3:!0,4:!0}}},wbox:{quadrant1:{angle0:{0:!1,1:!0,2:!0,3:!1,4:!1}},quadrant2:{angle0:{0:!1,1:!1,2:!1,3:!1,4:!1}},quadrant3:{angle0:{0:!1,1:!1,2:!1,3:!0,4:!0}},quadrant4:{angle0:{0:!1,1:!1,2:!1,3:!1,4:!1}}}}}}_isWithinRange(e,t,a){return e>=t-a&&e<=t+a}removeguides(){this.smartguides.SmartGuideDistance.empty(),$(".smartAllguides").remove(),this.smartguides.hordistances=void 0,this.smartguides.verdistances=void 0}removePosGuides(){$(this.v_Div).length&&this.v_Div.css("visibility","hidden").removeClass("smartGuideSlide"),$(this.h_Div).length&&this.h_Div.css("visibility","hidden").removeClass("smartGuideSlide")}_setCondition(e,t,a,o,i,r,s){let n=e.current_value,d=e.shape_value,p=void 0,l=!1,h=this,c=h.smartGuideProximity,f=e.modifiedAngle;return a&&f%90!=0&&(c=.75),h._isWithinRange(n,d,c)&&((p=n-d)||0===p)&&(a&&!s?(p*=e.modifiedDiff,l=h._getResize(p,o,f,i,r,t)):l=p),l}setCondition(e,t,a,o,i,r,s,n,d){let p=void 0,l=!1;this.smartGuideProximity;if(this._isWithinRange(e,t,8))if(p=e-t,o){p*=d;let e=this._getResize(p,i,n,r,s,a);e&&(l=p)}else l=p;return l}_getResize(e,t,a,o,i,r){let s=!1,n=void 0,d=void 0;if(o){let o=this._setAspect(e,t,a,i);o.dw?(this.smartguides.VResize?n=r.width:(n=r.width+o.dw,this.smartguides.VResize=!0),n>=0&&(s=!0,a%90==0&&(r.width=n,r.height=r.width/i))):o.dh&&(d=r.height+o.dh)>=0&&(s=!0,a%90==0&&(r.height=d,r.width=r.height*i))}else{let o=this._setNoAspect(e,t,a);o.dw?(n=r.width+o.dw)>=0&&(s=!0,a%90==0&&(r.width=n)):o.dh&&(d=r.height+o.dh)>=0&&(s=!0,a%90==0&&(r.height=d))}return s}_setAspect(e,t,a,o){let i=zoho.math.toRadians,r=void 0,s=void 0;if(a>=0&&a<=90)if("ebox"==t&&0!=a)r=e/Math.cos(i(90-a))*o;else if("wbox"==t)if(90==a)s=e;else{let t=Math.atan(o);r=Math.sin(t)*e/Math.sin(i(a)+t)}else if("sbox"!=t&&"sebox"!=t||0==a){if("nwbox"==t&&90!=a)r=e/Math.cos(i(a));else if("swbox"==t){let t=Math.atan(o);r=Math.sin(t)*e/Math.sin(i(a)+t)}}else s=e/Math.cos(i(90-a));else if(a>90&&a<=180){if("ebox"==t){let t=Math.atan(o);r=Math.sin(t)*e/Math.sin(i(180-a)+t)}else if("wbox"==t&&180!=a)s=e/Math.cos(i(a-90));else if("nbox"==t||"nebox"==t)r=e/Math.cos(i(180-a));else if("sbox"==t){let t=Math.atan(o);s=Math.cos(t)*e/Math.sin(t+i(180-a))}else if("swbox"==t&&180!=a)s=e/Math.cos(i(90-a));else if("sebox"==t){let t=Math.atan(o);r=Math.sin(t)*e/Math.sin(t+i(180-a))}}else if(a>180&&a<=270)if("ebox"!=t&&"sbox"!=t&&"sebox"!=t||270==a)if("nbox"==t){let t=Math.atan(o);s=Math.cos(t)*e/Math.sin(t+i(a-180))}else if(270!=a||"nebox"!=t&&"nwbox"!=t)if("nebox"==t){let t=Math.atan(o);s=Math.cos(t)*e/Math.sin(t+i(a-180))}else"nwbox"==t&&(s=e/Math.cos(i(270-a)));else s=e;else r=e/Math.cos(i(a-180));else if(a>270&&a<360)if("ebox"==t||"wbox"==t||"swbox"==t)r=e/Math.cos(i(360-a));else if("nbox"==t||"sbox"==t||"nebox"==t)s=e/Math.cos(i(a-270));else if("nwbox"==t){let t=Math.atan(o);r=Math.sin(t)*e/Math.sin(t+i(360-a))}return{dw:r,dh:s}}_setNoAspect(e,t,a){let o,i,r=zoho.math.toRadians;return"ebox"==t||"wbox"==t?a>=0&&a<90&&"ebox"!=t?o=e/Math.cos(r(a)):a>90&&a<180&&"wbox"!=t?o=e/Math.cos(r(180-a)):a>=180&&a<270&&"wbox"!=t?o=-e/Math.cos(r(a)):a>270&&a<360&&"ebox"!=t&&(o=e/Math.cos(r(360-a))):"nbox"==t||"sbox"==t?a>0&&a<90&&"nbox"!=t?i=e/Math.cos(r(90-a)):a>=90&&a<180&&"nbox"!=t?i=e/Math.cos(r(90-a)):a>180&&a<270&&"sbox"!=t?i=e/Math.cos(r(270-a)):a>=270&&a<360&&"sbox"!=t&&(i=e/Math.cos(r(a-270))):a>=0&&a<=90?"nwbox"==t&&90!=a||"swbox"==t&&a<=45?o=e/Math.cos(r(a)):("sebox"==t&&0!=a||"swbox"==t&&a>45)&&(i=e/Math.cos(r(90-a))):a>90&&a<=180?"nebox"==t&&90!=a||"sebox"==t&&a>135?o=e/Math.cos(r(180-a)):("swbox"==t&&180!=a||"sebox"==t&&a<=135)&&(i=e/Math.cos(r(90-a))):a>180&&a<=270?"sebox"==t&&270!=a||"nebox"==t&&a<=225?o=e/Math.cos(r(a-180)):("nwbox"==t&&180!=a||"nebox"==t&&a>225)&&(i=e/Math.cos(r(270-a))):a>270&&a<=360&&("swbox"==t&&270!=a||"nwbox"==t&&a>315?o=e/Math.cos(r(360-a)):("nwbox"==t&&a<=315||"nebox"==t&&360!=a)&&(i=e/Math.cos(r(a-270)))),{dw:o,dh:i}}getAllowSmartGuide(e,t,a,o,i,r){let s=!0;if(e&&t&&a%90==0&&("nbox"==o||"wbox"==o||"ebox"==o||"sbox"==o)){let e=this.editor.resize.getQuadrant(a);s=this.allowSmartGuide[r][o][e.quadrant][e.angleVal][i]}return s}removeCloneData(e,t){if(e.length)for(let a=0;a<e.length;a++){let o=e[a].type.toLowerCase(),i=0===e[a][o].nvOProps.nvDProps.id.indexOf(t);!!i&&e.splice(a,1)}}getCornerPointsShapes(e,t,a){let o={},i=this,r=e.scaleFactor,s=this.editor.config,n=s.container,d=t||s.get.getAllShapeData(!0,!0);if(e.isEditPointMode){d=[];let e=this.editor.editPoint.getAllShapeData();for(let t=0,a=e.length;t<a;t++){let a=e[t];-1!==a[a.type.toLowerCase()].nvOProps.nvDProps.id.indexOf("editPoint")&&d.push(a)}}let p=n.height()/r,l=n.width()/r,h={height:p,width:l},c=0;if(s.isSupported.grids_guides){let e=s.get.viewPropsData(),t=e.display;if(t.showGuides&&$.each(e.guides,function(e,t){"HORIZONTAL"==t.orient?o[c++]={cp:Shape.getCornerPoints({left:0,top:t.pos},{width:0,height:0},0),center:!1,showGuides:!1,type:"guide",isExternalShape:!0}:"VERTICAL"==t.orient&&(o[c++]={cp:Shape.getCornerPoints({left:t.pos,top:0},{width:0,height:0},0),center:!1,showGuides:!1,type:"guide",isExternalShape:!0})}),t.showSmartGuides&&(s.smartGrid.showExternalShapes&&(o[c++]={cp:Shape.getCornerPoints({left:0,top:0},h,0),center:!0,showGuides:!0,type:"slide",isExternalShape:!0}),$.isEmptyObject(d)||$.each(d,function(e,t){let a,r=t.type,n=s.smartGrid.showExternalShapes?s.smartGrid.showExternalShapes:t.isExternalShape,d=t[r.toLowerCase()],p=d.nvOProps.nvDProps.id,l=$.extend(!0,{},d);if(d.props&&d.props.transform?a=l.props.transform:(s.get.mergeTransformShape(l),a=l.props?l.props.transform:l.transform),a&&!a.dim&&r===ShapeConstants.ShapeNodeType.GRAPHICFRAME&&d.obj.type===ShapeConstants.GraphicObjectType.TABLE&&(a.dim=i.editor.tableEditor.getDimOfTable(d)),!$.isEmptyObject(a)){let e=Shape.getAngle(a);o[p]={cp:Shape.getCornerPoints(a.pos,a.dim,e),center:!0,showGuides:!0,type:"object",id:p,isExternalShape:n},t.parentId&&(o[p].parentId=t.parentId)}})),t.showGrids){let t=e.grids.space,a=l/2,i=p/2,r=a,s=i;for(let e=0;r>t;e++)r=a-e*t,o[c++]={cp:Shape.getCornerPoints({left:r,top:0},{width:0,height:0},0),center:!1,showGuides:!0,type:"grid",isExternalShape:!0},0!=e&&(o[c++]={cp:Shape.getCornerPoints({left:a+e*t,top:0},{width:0,height:0},0),center:!1,showGuides:!0,type:"grid",isExternalShape:!0});for(let e=0;s>t;e++)s=i-e*t,o[c++]={cp:Shape.getCornerPoints({left:0,top:s},{width:0,height:0},0),center:!1,showGuides:!0,type:"grid",isExternalShape:!0},0!=e&&(o[c++]={cp:Shape.getCornerPoints({left:0,top:i+e*t},{width:0,height:0},0),center:!1,showGuides:!0,type:"grid",isExternalShape:!0})}}$(i.v_Div).length||(i.v_Div=$("<div>").attr("id","vsmartguide").addClass("smartGuide smartGuideVertical")),$(i.h_Div).length||(i.h_Div=$("<div>").attr("id","hsmartguide").addClass("smartGuide smartGuideHorizontal")),n.append(i.v_Div),n.append(i.h_Div),e.slideTransform=h,e.cornerPoints=o}getCurrentValues(e,t,a){let o=Math.min(e.c1.x,e.c2.x,e.c3.x,e.c4.x),i=Math.max(e.c1.x,e.c2.x,e.c3.x,e.c4.x),r=Math.min(e.c1.y,e.c2.y,e.c3.y,e.c4.y),s=Math.max(e.c1.y,e.c2.y,e.c3.y,e.c4.y),n=.5*(o+i),d=.5*(r+s);return{H_val:{id:a,0:{current_value:n,shape_value:void 0,modifiedDiff:1,modifiedAngle:t},1:{current_value:o,shape_value:void 0,modifiedDiff:1,modifiedAngle:t},2:{current_value:o,shape_value:void 0,modifiedDiff:1,modifiedAngle:t},3:{current_value:i,shape_value:void 0,modifiedDiff:-1,modifiedAngle:(t+180)%360},4:{current_value:i,shape_value:void 0,modifiedDiff:-1,modifiedAngle:(t+180)%360},5:{current_value:n,shape_value:void 0,modifiedDiff:1,modifiedAngle:t},6:{current_value:n,shape_value:void 0,modifiedDiff:1,modifiedAngle:t},7:{current_value:o,shape_value:void 0,modifiedDiff:1,modifiedAngle:t},8:{current_value:i,shape_value:void 0,modifiedDiff:1,modifiedAngle:t}},V_val:{id:a,0:{current_value:d,shape_value:void 0,modifiedDiff:1,modifiedAngle:t},1:{current_value:r,shape_value:void 0,modifiedDiff:1,modifiedAngle:(t+270)%360},2:{current_value:r,shape_value:void 0,modifiedDiff:1,modifiedAngle:(t+270)%360},3:{current_value:s,shape_value:void 0,modifiedDiff:-1,modifiedAngle:(t+90)%360},4:{current_value:s,shape_value:void 0,modifiedDiff:-1,modifiedAngle:(t+90)%360},5:{current_value:d,shape_value:void 0,modifiedDiff:1,modifiedAngle:t},6:{current_value:d,shape_value:void 0,modifiedDiff:1,modifiedAngle:t},7:{current_value:r,shape_value:void 0,modifiedDiff:1,modifiedAngle:t},8:{current_value:s,shape_value:void 0,modifiedDiff:1,modifiedAngle:t}}}}setcurshapedifferences(e,t,a){e.cornerPoints||this.getCornerPointsShapes(e,!0);let o=e.cornerPoints,i=t.nvOProps.nvDProps.id.split("_");i=i[1]?i[1]:i[0];let r=void 0,s=void 0,n=void 0,d={},p=t.props?t.props.transform:void 0;p||(this.editor.config.get.mergeTransformShape(t),p=t.props.transform);let l=Shape.getAngle(p),h=void 0;a.width&&a.height?(d=Shape.getCornerPoints(a,{width:a.width,height:a.height},l),r=!0,s=p.dim.width,n=p.dim.height,h=p.dim.width/p.dim.height):d=Shape.getCornerPoints(a,p.dim,l);let c=Math.min(d.c1.x,d.c2.x,d.c3.x,d.c4.x),f=Math.max(d.c1.x,d.c2.x,d.c3.x,d.c4.x),u=Math.min(d.c1.y,d.c2.y,d.c3.y,d.c4.y),m=Math.max(d.c1.y,d.c2.y,d.c3.y,d.c4.y),g=(c+f)/2,S=(u+m)/2,x=[],v=[],y=[],E=[],C=[];return $.each(o,function(e,t){let a=t.cp.c1,o=t.cp.c2,r=t.cp.c3,s=t.cp.c4,n=t.id,d=Math.min(a.x,o.x,r.x,s.x),p=Math.max(a.x,o.x,r.x,s.x),l=Math.min(a.y,o.y,r.y,s.y),h=Math.max(a.y,o.y,r.y,s.y),C=(d+p)/2,O=(l+h)/2;Math.sqrt(Math.pow(C-g,2)+Math.pow(O-S,2));n!=i&&(c>d&&f<p?(c-d>15&&x.push({distance:c-d,id:n,reverse:!0}),p-f>15&&v.push({distance:p-f,id:n,reverse:!0})):c>p&&f>p?c-p>15&&x.push({distance:c-p,id:n}):f<d&&c<d&&d-f>15&&v.push({distance:d-f,id:n}),u>l&&m<h?(u-l>15&&y.push({distance:u-l,id:n,reverse:!0}),h-m>15&&E.push({distance:h-m,id:n,reverse:!0})):u>h&&m>h?u-h>15&&y.push({distance:u-h,id:n}):m<l&&u<l&&l-m>15&&E.push({distance:l-m,id:n}))}),x.sort(function(e,t){return parseFloat(e.distance)-parseFloat(t.distance)}),v.sort(function(e,t){return parseFloat(e.distance)-parseFloat(t.distance)}),y.sort(function(e,t){return parseFloat(e.distance)-parseFloat(t.distance)}),E.sort(function(e,t){return parseFloat(e.distance)-parseFloat(t.distance)}),C[i]={left:x,right:v,top:y,bottom:E},C.push({min:c,max:f,tmin:u,tmax:m,id:i,ratio:h,isResize:r,height:n,width:s,currentangle:l}),C}setplanecurshapedifferences(e,t,a){let o=this,i=t.nvOProps.nvDProps.id.split("_");i=i[1]?i[1]:i[0],e.cornerPoints||o.getCornerPointsShapes(e,!0);let r,s,n,d=e.cornerPoints,p={},l=t.props?t.props.transform:void 0;l||(this.editor.config.get.mergeTransformShape(t),l=t.props.transform);let h,c=Shape.getAngle(l),f=void 0,u=t.parentOffset,m={};u&&0!==u.left&&0!==u.top&&(m.left=a.left+u.left,m.top=a.top+u.top,h=!0),a.width&&a.height?(p=Shape.getCornerPoints(h?m:a,{width:a.width,height:a.height},c),r=!0,s=l.dim.width,n=l.dim.height,f=l.dim.width/l.dim.height):p=Shape.getCornerPoints(h?m:a,l.dim,c);let g=Math.min(p.c1.x,p.c2.x,p.c3.x,p.c4.x),S=Math.max(p.c1.x,p.c2.x,p.c3.x,p.c4.x),x=Math.min(p.c1.y,p.c2.y,p.c3.y,p.c4.y),v=Math.max(p.c1.y,p.c2.y,p.c3.y,p.c4.y),y=[],E=[],C=[],O=[],b=[];for(let e in d){let a=d[e].cp.c1,o=d[e].cp.c2,r=d[e].cp.c3,s=d[e].cp.c4,n=d[e].id,p=Math.min(a.x,o.x,r.x,s.x),l=Math.max(a.x,o.x,r.x,s.x),c=Math.min(a.y,o.y,r.y,s.y),f=Math.max(a.y,o.y,r.y,s.y);!h&&!d[e].isExternalShape||h&&d[e].isExternalShape||(h&&!d[e].isExternalShape&&t.parentId&&d[e].parentId&&t.parentId!==d[e].parentId||n!=i&&"object"===d[e].type&&(x<=f&&v>=c&&(g>=p&&S<=l?(g-p>0&&y.push({distance:g-p,id:n,reverse:!0}),l-S>0&&E.push({distance:l-S,id:n,reverse:!0})):g>=l&&S>=l?y.push({distance:g-l,id:n}):S<=p&&g<=p&&E.push({distance:p-S,id:n})),g<=l&&S>=p&&(x>=c&&v<=f?(x-c>0&&C.push({distance:x-c,id:n,reverse:!0}),f-v>0&&O.push({distance:f-v,id:n,reverse:!0})):x>=f&&v>=f?C.push({distance:x-f,id:n}):v<=c&&x<=c&&O.push({distance:c-v,id:n}))))}return y.sort(function(e,t){return parseFloat(e.distance)-parseFloat(t.distance)}),E.sort(function(e,t){return parseFloat(e.distance)-parseFloat(t.distance)}),C.sort(function(e,t){return parseFloat(e.distance)-parseFloat(t.distance)}),O.sort(function(e,t){return parseFloat(e.distance)-parseFloat(t.distance)}),b[i]={left:y,right:E,top:C,bottom:O},b.value={min:g,max:S,tmin:x,tmax:v,id:i,ratio:f,isResize:r,height:n,width:s,currentangle:c},b}setshapedistances(e,t){let a=[],o=[],i=[];e.cornerPoints||this.getCornerPointsShapes(e,void 0,t);let r=e.cornerPoints,s=$("#"+t),n=this.editor.config.get.boxOffset(s);n&&0===n.left&&0===n.top&&(e.externalShape=!0);let d=this;for(let a in r){let s=r[a].cp.c1,n=r[a].cp.c2,p=r[a].cp.c3,l=r[a].cp.c4,h=r[a].id,c=void 0,f=Math.min(s.x,n.x,p.x,l.x),u=Math.max(s.x,n.x,p.x,l.x),m=Math.min(s.y,n.y,p.y,l.y),g=Math.max(s.y,n.y,p.y,l.y);if((e.externalShape&&!r[a].isExternalShape||!e.externalShape&&r[a].isExternalShape)&&(c=!0),h!=t&&!c&&"object"===r[a].type)for(let s in r){let n=r[s].cp.c1,p=r[s].cp.c2,l=r[s].cp.c3,c=r[s].cp.c4,S=r[s].id,x=void 0,v=Math.min(n.x,p.x,l.x,c.x),y=Math.max(n.x,p.x,l.x,c.x),E=Math.min(n.y,p.y,l.y,c.y),C=Math.max(n.y,p.y,l.y,c.y);(e.externalShape&&!r[s].isExternalShape||!e.externalShape&&r[s].isExternalShape)&&(x=!0),a==s||S==t||x||"object"!==r[a].type||(d.editor.config.smartGrid.SGplanespl&&(E<=g&&C>=m&&(v>f&&y<u?(o.push({distance:v-f,id1:S,id2:h,drawforward:!0,removeArrowClass:v-f<=d.removeArrowClass||void 0}),o.push({distance:u-y,id1:S,id2:h,reverse:!0,removeArrowClass:u-y<=d.removeArrowClass||void 0})):v>u&&o.push({distance:v-u,id1:S,id2:h,removeArrowClass:v-u<=d.removeArrowClass||void 0})),v<=u&&y>=f&&(E>m&&C<g?(i.push({distance:E-m,id1:S,id2:h,drawforward:!0,removeArrowClass:E-m<=d.removeArrowClass||void 0}),i.push({distance:g-C,id1:S,id2:h,reverse:!0,removeArrowClass:g-C<=d.removeArrowClass||void 0})):E>g&&i.push({distance:E-g,id1:S,id2:h,removeArrowClass:E-g<=d.removeArrowClass||void 0}))),d.editor.config.smartGrid.SGallDistances&&(v>f&&y<u?(v-f>=15&&o.push({distance:v-f,id1:S,id2:h,drawforward:!0}),u-y>=15&&o.push({distance:u-y,id1:S,id2:h,reverse:!0})):v>f&&y>u&&v<u&&E<g&&C>m?v-f>=15&&o.push({distance:v-f,id1:S,id2:h}):y>f&&y<u&&v<f&&E<=g&&C>=m?u-y>=15&&o.push({distance:u-y,id1:S,id2:h,reverse:!0}):v>u&&v-u>=15&&o.push({distance:v-u,id1:S,id2:h}),E>m&&C<g?(E-m>=15&&i.push({distance:E-m,id1:S,id2:h,drawforward:!0}),g-C>=15&&i.push({distance:g-C,id1:S,id2:h,reverse:!0})):E>m&&C>g&&E<g&&v<u&&y>f?E-m>=15&&i.push({distance:E-m,id1:S,id2:h}):C>m&&C<g&&E<m&&v<u&&y>f?g-C>=15&&i.push({distance:g-C,id1:S,id2:h,reverse:!0}):E>g&&E-g>=15&&i.push({distance:E-g,id1:S,id2:h})))}}return o.sort(function(e,t){return parseFloat(e.distance)-parseFloat(t.distance)}),i.sort(function(e,t){return parseFloat(e.distance)-parseFloat(t.distance)}),a={left:o,top:i}}setplaneshapedistances(e,t,a){let o=[],i=[],r=[],s=this,n=t.nvOProps.nvDProps.id.split("_");n=n[1]?n[1]:n[0];let d,p=t.parentOffset,l={};p&&0!==p.left&&0!==p.top&&(d=!0,l.left=a.left+p.left,l.top=a.top+p.top);let h=Shape.getCornerPoints(d?l:a,t.props.transform.dim,Shape.getAngle(t.props.transform)),c=Math.min(h.c1.x,h.c2.x,h.c3.x,h.c4.x),f=Math.max(h.c1.x,h.c2.x,h.c3.x,h.c4.x),u=Math.min(h.c1.y,h.c2.y,h.c3.y,h.c4.y),m=Math.max(h.c1.y,h.c2.y,h.c3.y,h.c4.y),g=e.cornerPoints;for(let e in g){let t=g[e].cp.c1,a=g[e].cp.c2,o=g[e].cp.c3,p=g[e].cp.c4,l=g[e].id,h=Math.min(t.x,a.x,o.x,p.x),S=Math.max(t.x,a.x,o.x,p.x),x=Math.min(t.y,a.y,o.y,p.y),v=Math.max(t.y,a.y,o.y,p.y);if(!(!d&&!g[e].isExternalShape||d&&g[e].isExternalShape)&&(l!=n&&"object"===g[e].type))for(let t in g){let a=g[t].cp.c1,o=g[t].cp.c2,p=g[t].cp.c3,y=g[t].cp.c4,E=g[t].id,C=Math.min(a.x,o.x,p.x,y.x),O=Math.max(a.x,o.x,p.x,y.x),b=Math.min(a.y,o.y,p.y,y.y),T=Math.max(a.y,o.y,p.y,y.y);if(!(!d&&!g[t].isExternalShape||d&&g[t].isExternalShape)&&(t!=e&&E!=n&&"object"===g[t].type)){if(b<=v&&T>=x&&u<=T&&m>=b&&u<=v&&m>=x)if(C>h&&O<S&&b<=v&&T>=x){let e={distance:C-h,id1:E,id2:l,drawforward:!0,removeArrowClass:C-h<=s.removeArrowClass||void 0};i.push(e);let t={distance:S-O,id1:E,id2:l,reverse:!0,removeArrowClass:S-O<=s.removeArrowClass||void 0};i.push(t)}else if(C>S){let e={distance:C-S,id1:E,id2:l,removeArrowClass:C-S<=s.removeArrowClass||void 0};i.push(e)}if(C<=S&&O>=h&&c<=O&&f>=C&&c<=S&&f>=h)if(b>x&&T<v&&C<=S&&O>=h){let e={distance:b-x,id1:E,id2:l,drawforward:!0,removeArrowClass:b-x<=s.removeArrowClass||void 0};r.push(e);let t={distance:v-T,id1:E,id2:l,reverse:!0,removeArrowClass:v-T<=s.removeArrowClass||void 0};r.push(t)}else if(b>v){let e={distance:b-v,id1:E,id2:l,removeArrowClass:b-v<=s.removeArrowClass||void 0};r.push(e)}}}}return i.sort(function(e,t){return parseFloat(e.distance)-parseFloat(t.distance)}),r.sort(function(e,t){return parseFloat(e.distance)-parseFloat(t.distance)}),o={left:i,top:r}}showDistances(e,t,a){let o={},i=[],r=[],s=[],n=[],d=this.editor.config,p=d.get.translate(),l=p.x,h=p.y,c=d.get.scale();if(this.removeguides(),a=a||{},a.scaleFactor=c,!a.cornerPoints){let o=[];o.push(e,t),this.getCornerPointsShapes(a,o)}o=a.cornerPoints;let f=this;for(let e in o){let t=o[e].cp.c1,a=o[e].cp.c2,d=o[e].cp.c3,p=o[e].cp.c4,l=Math.min(t.x,a.x,d.x,p.x),h=Math.max(t.x,a.x,d.x,p.x),c=Math.min(t.y,a.y,d.y,p.y),f=Math.max(t.y,a.y,d.y,p.y);for(let t in o)if(e!=t){let e=o[t].cp.c1,a=o[t].cp.c2,d=o[t].cp.c3,p=o[t].cp.c4,u=Math.min(e.x,a.x,d.x,p.x),m=Math.max(e.x,a.x,d.x,p.x),g=Math.min(e.y,a.y,d.y,p.y),S=Math.max(e.y,a.y,d.y,p.y);u>=l&&u<=h&&m>=l&&m<=h&&g>=c&&g<=f&&S>=c&&S<=f?(i.push({distance:parseInt(u-l),top:(g+S)/2,left:l},{distance:parseInt(h-m),top:(g+S)/2,left:m}),r.push({distance:parseInt(g-c),left:(u+m)/2,top:c},{distance:parseInt(f-S),left:(u+m)/2,top:S})):m<l&&u<l&&(i.push({distance:parseInt(l-m),top:(g+S)/2,left:m}),c>=(S+g)/2?s.push({top:(g+S)/2,left:l,height:f-(g+S)/2},{top:g,left:m,height:S-g}):s.push({top:c,left:l,height:(g+S)/2-c},{top:g,left:m,height:S-g}),s.push({top:c,left:l,height:f-c},{top:g,left:m,height:S-g})),S<c&&g<c&&(r.push({distance:parseInt(c-S),left:(u+m)/2,top:S}),l>=(m+u)/2?n.push({left:(u+m)/2,top:c,width:h-(u+m)/2},{left:u,top:S,width:m-u}):n.push({left:l,top:c,width:(u+m)/2-l},{left:u,top:S,width:m-u}),n.push({left:l,top:c,width:h-l},{left:u,top:S,width:m-u}))}}for(let e=0;e<i.length;e++){let t=$("<span>").attr("id","leftdistance"+e).addClass("showDistanceHorizontal");t.css({top:i[e].top*c+h,left:i[e].left*c+l,width:i[e].distance*c,visibility:"visible"});let a=$("<span>").attr("id","showdistance"+e).addClass("ShowDist");a.css({top:(i[e].top-15)*c+h,left:l+c*(i[e].left+i[e].distance/2-5),visibility:"visibile"}).text(i[e].distance),f.smartguides.SmartGuideDistance.append(t).append(a)}for(let e=0;e<r.length;e++){let t=$("<span>").attr("id","topdistance"+e).addClass("showDistanceVertical");t.css({top:r[e].top*c+h,left:r[e].left*c+l,height:r[e].distance*c,visibility:"visible"});let a=$("<span>").attr("id","showdistance"+e).addClass("ShowDist");a.css({top:h+c*(r[e].top+r[e].distance/2-5),left:(r[e].left+10)*c+l,visibility:"visibile"}).text(r[e].distance),f.smartguides.SmartGuideDistance.append(t).append(a)}for(let e=0;e<s.length;e++){let t=$("<span>").attr("id","vdistanceindicatoe"+e).addClass("smartDistanceIndicator smartGuideVertical");t.css({visibility:"visible",left:s[e].left*c+l,top:s[e].top*c+h,height:s[e].height*c}),f.smartguides.SmartGuideDistance.append(t)}for(let e=0;e<n.length;e++){let t=$("<span>").attr("id","hdistanceindicator"+e).addClass("smartDistanceIndicator smartGuideHorizontal");t.css({visibility:"visible",left:n[e].left*c+l,top:n[e].top*c+h,width:n[e].width*c}),f.smartguides.SmartGuideDistance.append(t)}f.editor.config.container.append(f.smartguides.SmartGuideDistance)}calculatedistances(e,t,a,o,i,r,s){let n=this,d=e.currentshapediff,p=d.value.id,l=d[p].left,h=d[p].right,c=d[p].top,f=d[p].bottom,u=d.value.min,m=d.value.max,g=d.value.tmin,S=d.value.tmax,x=d.value.ratio,v=d.value.isResize,y=d.value.width,E=d.value.height;n.smartguides.oldPosleft=void 0,n.smartguides.oldPostop=void 0;let C,O,b=e.scaleFactor,T=e.shapedistances.left,w=e.shapedistances.top,D=!1,P=!1,L=!1,I=!1,A=!1,N=!1,R=!1,B=void 0,_=void 0;n.removeguides();let M,U;v?M=0!==(U=d.value.currentangle)&&90!==U&&180!==U&&270!==U:(y=e.currentShape.shape.data.props.transform.dim.width,E=e.currentShape.shape.data.props.transform.dim.height);let k=this.editor.config,G=this.editor.resize,F=e.cornerPoints,W=[],H=[],V=[],j=l.length,z=h.length;for(let e=0;e<j;e++){let d;for(let p=0;p<z;p++){let c,f=F[l[e].id].cp,u=F[h[p].id].cp,m=Math.min(f.c1.x,f.c2.x,f.c3.x,f.c4.x),y=Math.max(f.c1.x,f.c2.x,f.c3.x,f.c4.x),E=Math.min(f.c1.y,f.c2.y,f.c3.y,f.c4.y),C=(Math.max(f.c1.y,f.c2.y,f.c3.y,f.c4.y),Math.min(u.c1.x,u.c2.x,u.c3.x,u.c4.x)),O=Math.max(u.c1.x,u.c2.x,u.c3.x,u.c4.x),T=Math.min(u.c1.y,u.c2.y,u.c3.y,u.c4.y),w=Math.max(u.c1.y,u.c2.y,u.c3.y,u.c4.y);if(c=v?n._isWithinRange(l[e].distance,h[p].distance,1):n._isWithinRange(l[e].distance,h[p].distance,6)){let c=n.setCondition(l[e].distance,h[p].distance,t,v,i,r,x,U,1);if(v){let e=t.left,n=$.extend(!0,{},a);if(r){let e=s.width-t.width,o=s.height-t.height;n=G.getTangentialAnchor(U,i,a,e,o)}let p=VectorUtil.positionShape(U,[t.width,t.height],n,o);t.left=p.left,t.top=p.top,Math.abs(e-t.left)>.5&&this.v_Div.css({visibility:"hidden"}),d=!0}else if(n.smartguides.oldPosleft)t.left=n.smartguides.oldPosleft;else{let e=t.left;t.left=t.left-c/2,n.smartguides.oldPosleft=t.left,Math.abs(t.left-e)>.5&&this.v_Div.css({visibility:"hidden"})}let f=$("<span>").attr("id","movingleftdistance").addClass("ShowDist").css("visibility","hidden"),u=$("<span>").attr("id","movingrightdistance").addClass("ShowDist").css("visibility","hidden");n.smartguides.hordistances||(n.smartguides.hordistances={dist1:l[e].distance,dist2:h[p].distance}),(Math.abs(n.smartguides.hordistances.dist1-(l[e].distance-c/2))>=1||Math.abs(n.smartguides.hordistances.dist2-(h[p].distance-c/2))>=1)&&(n.smartguides.hordistances={dist1:l[e].distance-c/2,dist2:h[p].distance+c/2}),(l[e].distance<=n.removeArrowClass||h[p].distance<=n.removeArrowClass)&&(l[e].removeArrowClass=!0,h[p].removeArrowClass=!0),l[e].reverse?(H.push({element:n.smartguides.vcurelement,left:(m+n.smartguides.hordistances.dist1)*b,top:g*b,height:(S-g+5)*b}),W.push({element:n.smartguides.smartguide_H1,top:(S+5)*b,left:m*b,width:n.smartguides.hordistances.dist1*b,removeArrowClass:l[e].removeArrowClass}),V.push({element:f,top:(S-10)*b,left:(m+n.smartguides.hordistances.dist1/2-5)*b,text:parseInt(n.smartguides.hordistances.dist1)}),S>E?H.push({element:n.smartguides.curvelement,left:m*b,top:E*b,height:(S-E)*b}):H.push({element:n.smartguides.curvelement,left:m*b,top:(S+5)*b,height:(E-S)*b})):(W.push({element:n.smartguides.smartguide_H1,top:(S+5)*b,left:y*b,width:n.smartguides.hordistances.dist1*b,removeArrowClass:l[e].removeArrowClass}),H.push({element:n.smartguides.vcurelement,left:(y+n.smartguides.hordistances.dist1)*b,top:g*b,height:(S-g+5)*b}),V.push({element:f,top:(S-10)*b,left:(y+n.smartguides.hordistances.dist1/2-5)*b,text:parseInt(n.smartguides.hordistances.dist1)}),S>E?H.push({element:n.smartguides.curvelement,left:y*b,top:E*b,height:(S-E+5)*b}):H.push({element:n.smartguides.curvelement,left:y*b,top:(S+5)*b,height:(E-S+5)*b})),h[p].reverse?(W.push({element:n.smartguides.smartguide_H2,top:(S+5)*b,left:(O-n.smartguides.hordistances.dist2)*b,width:n.smartguides.hordistances.dist2*b,removeArrowClass:l[e].removeArrowClass}),H.push({element:n.smartguides.vcurelement1,left:(O-n.smartguides.hordistances.dist2)*b,top:g*b,height:(S-g+5)*b}),V.push({element:u,top:(S-10)*b,left:(O-n.smartguides.hordistances.dist1/2-5)*b,text:parseInt(n.smartguides.hordistances.dist1)}),S>T?H.push({element:n.smartguides.curvelement1,left:O*b,top:T*b,height:(S-T)*b}):H.push({element:n.smartguides.curvelement1,left:O*b,top:(S+5)*b,height:(T-S+5)*b})):(W.push({element:n.smartguides.smartguide_H2,top:(S+5)*b,left:(C-n.smartguides.hordistances.dist2)*b,width:n.smartguides.hordistances.dist2*b,removeArrowClass:l[e].removeArrowClass}),H.push({element:n.smartguides.vcurelement1,left:(C-n.smartguides.hordistances.dist2)*b,top:g*b,height:(S-g+5)*b}),V.push({element:u,top:(S-10)*b,left:(C-n.smartguides.hordistances.dist1/2-5)*b,text:parseInt(n.smartguides.hordistances.dist1)}),S>T?H.push({element:n.smartguides.curvelement1,left:C*b,top:T*b,height:(S-T+5)*b}):H.push({element:n.smartguides.curvelement1,left:C*b,top:(S+5)*b,height:(w-S+5)*b})),D=n.smartguides.hordistances.dist1}else n.smartguides.oldPosleft=void 0,n.smartguides.hordistances=void 0;if(D)break}if(D){R=!0;break}}let X=c.length,Y=f.length;for(let e=0;e<X;e++){let d;for(let p=0;p<Y;p++){let l,h=F[c[e].id].cp,g=F[f[p].id].cp,S=Math.min(h.c1.x,h.c2.x,h.c3.x,h.c4.x),y=(Math.max(h.c1.x,h.c2.x,h.c3.x,h.c4.x),Math.min(h.c1.y,h.c2.y,h.c3.y,h.c4.y)),E=Math.max(h.c1.y,h.c2.y,h.c3.y,h.c4.y),C=Math.min(g.c1.x,g.c2.x,g.c3.x,g.c4.x),O=(Math.max(g.c1.x,g.c2.x,g.c3.x,g.c4.x),Math.min(g.c1.y,g.c2.y,g.c3.y,g.c4.y)),T=Math.max(g.c1.y,g.c2.y,g.c3.y,g.c4.y);if(l=v?n._isWithinRange(c[e].distance,f[p].distance,1):n._isWithinRange(c[e].distance,f[p].distance,6)){let l=n.setCondition(c[e].distance,f[p].distance,t,v,i,r,x,U,1);if(v){let e=$.extend(!0,{},a);if(r){let o=s.width-t.width,r=s.height-t.height;e=G.getTangentialAnchor(U,i,a,o,r)}let n=VectorUtil.positionShape(U,[t.width,t.height],e,o);t.left=n.left,t.top=n.top,d=!0}else if(n.smartguides.oldPostop)t.top=n.smartguides.oldPostop;else{let e=t.top;t.top=t.top-l/2,n.smartguides.oldPostop=t.top,Math.abs(t.top-e)>.5&&this.h_Div.css({visibility:"hidden"})}n.smartguides.verdistances||(n.smartguides.verdistances={dist1:c[e].distance,dist2:f[p].distance}),Math.abs(n.smartguides.verdistances.dist1-(c[e].distance-l/2))>=1&&Math.abs(n.smartguides.verdistances.dist2-(f[p].distance-l/2))>=1&&(n.smartguides.verdistances={dist1:c[e].distance-l/2,dist2:f[p].distance+l/2}),(c[e].distance<=n.removeArrowClass||f[p].distance<=n.removeArrowClass)&&(c[e].removeArrowClass=!0,f[p].removeArrowClass=!0);let h=$("<span>").attr("id","movingtopdistance").addClass("ShowDist").css("visibility","hidden"),g=$("<span>").attr("id","movingbottomdistance").addClass("ShowDist").css("visibility","hidden");c[e].reverse?(H.push({element:n.smartguides.smartguide_V1,left:(m-5)*b,top:y*b,height:n.smartguides.verdistances.dist1*b,removeArrowClass:f[p].removeArrowClass}),W.push({element:n.smartguides.hcurelement,left:u*b,top:(y+n.smartguides.verdistances.dist1)*b,width:(m-u+5)*b}),V.push({element:h,left:(m+5)*b,top:(y-5+n.smartguides.verdistances.dist1/2)*b,text:parseInt(n.smartguides.verdistances.dist1)}),m>S?W.push({element:n.smartguides.curhelement,top:y*b,left:S*b,width:(m-S+5)*b}):W.push({element:n.smartguides.curhelement,top:y*b,left:m*b,width:(S-m-5)*b})):(H.push({element:n.smartguides.smartguide_V1,left:(m-5)*b,top:E*b,height:n.smartguides.verdistances.dist1*b,removeArrowClass:f[p].removeArrowClass}),V.push({element:h,left:(m+5)*b,top:(E+n.smartguides.verdistances.dist1/2-5)*b,text:parseInt(n.smartguides.verdistances.dist1)}),W.push({element:n.smartguides.hcurelement,left:u*b,top:(E+n.smartguides.verdistances.dist1)*b,width:(m-u+5)*b}),m>S?W.push({element:n.smartguides.curhelement,top:E*b,left:S*b,width:(m-S+5)*b}):W.push({element:n.smartguides.curhelement,top:E*b,left:m*b,width:(S-m-5)*b})),f[p].reverse?(H.push({element:n.smartguides.smartguide_V2,left:(m-5)*b,top:(T-n.smartguides.verdistances.dist2)*b,height:n.smartguides.verdistances.dist2*b,removeArrowClass:f[p].removeArrowClass}),V.push({element:g,left:(m+5)*b,top:(T-5-n.smartguides.verdistances.dist1/2)*b,text:parseInt(n.smartguides.verdistances.dist1)}),W.push({element:n.smartguides.hcurelement1,top:(T-n.smartguides.verdistances.dist2)*b,left:u*b,width:(m-u-5)*b}),m>C?W.push({element:n.smartguides.curhelement1,top:T*b,left:C*b,width:(m-C-5)*b}):W.push({element:n.smartguides.curhelement1,top:T*b,left:m*b,width:(C-m-5)*b})):(H.push({element:n.smartguides.smartguide_V2,left:(m-5)*b,top:(O-n.smartguides.verdistances.dist2)*b,height:n.smartguides.verdistances.dist2*b,removeArrowClass:f[p].removeArrowClass}),W.push({element:n.smartguides.hcurelement1,top:(O-n.smartguides.verdistances.dist2)*b,left:u*b,width:(m-u-5)*b}),V.push({element:g,left:(m+5)*b,top:(O-5-n.smartguides.verdistances.dist1/2)*b,text:parseInt(n.smartguides.verdistances.dist1)}),m>C?W.push({element:n.smartguides.curhelement1,top:O*b,left:C*b,width:(m-C-5)*b}):W.push({element:n.smartguides.curhelement1,top:O*b,left:m*b,width:(C-m-5)*b})),P=n.smartguides.verdistances.dist1}else n.smartguides.oldPostop=void 0,n.smartguides.verdistances=void 0;if(P)break}if(P){R=!0;break}}let K=T.length;for(let e=0;e<j;e++){let d=void 0,p=!0,h=!1,c=void 0;for(let f=0;f<K;f++){let y,E=F[l[e].id].cp,C=F[T[f].id1].cp,w=F[T[f].id2].cp,P=void 0,I=Math.min(C.c1.x,C.c2.x,C.c3.x,C.c4.x),A=Math.max(C.c1.x,C.c2.x,C.c3.x,C.c4.x),N=Math.min(C.c1.y,C.c2.y,C.c3.y,C.c4.y),R=Math.max(C.c1.y,C.c2.y,C.c3.y,C.c4.y),_=(N+R)/2,j=Math.min(w.c1.x,w.c2.x,w.c3.x,w.c4.x),z=Math.max(w.c1.x,w.c2.x,w.c3.x,w.c4.x),X=Math.min(w.c1.y,w.c2.y,w.c3.y,w.c4.y),Y=Math.max(w.c1.y,w.c2.y,w.c3.y,w.c4.y),K=(X+Y)/2;if(P=T[f].reverse||T[f].drawforward?_:K<_?(Y+K)/2:K>_?(X+K)/2:K,y=l[e].reverse?Math.min(E.c1.x,E.c2.x,E.c3.x,E.c4.x):Math.max(E.c1.x,E.c2.x,E.c3.x,E.c4.x),(g<=R&&S>=N||g<=Y&&S>=X)&&(I>y&&I<u||A>y&&A<u||z>y&&z<u||j>y&&j<u)){}let Z,J;if(k.smartGrid.SGplaneOriented&&(I>u&&I<m||z>u&&z<m)&&(J=!0),!J&&(Z=v&&M?n._isWithinRange(l[e].distance,T[f].distance,2):n._isWithinRange(l[e].distance,T[f].distance,6))){if(!d&&!D){let p=n.setCondition(l[e].distance,T[f].distance,t,v,i,r,x,U,1);if(v){let e=t.left,n=$.extend(!0,{},a);if(r){let e=s.width-t.width,o=s.height-t.height;n=G.getTangentialAnchor(U,i,a,e,o)}let p=VectorUtil.positionShape(U,[t.width,t.height],n,o);t.left=p.left,t.top=p.top,Math.abs(e-t.left)>.5&&this.v_Div.css({visibility:"hidden"}),d=!0}else{let e=t.left;t.left=t.left-p,Math.abs(e-t.left)>.5&&this.v_Div.css({visibility:"hidden"}),d=!0}B=p}if(!D){let t=Math.min(E.c1.y,E.c2.y,E.c3.y,E.c4.y);Math.max(S,Math.max(E.c1.y,E.c2.y,E.c3.y,E.c4.y));if(!h){let a=$("<span>").attr("id","movingleftdistance").addClass("ShowDist").css("visibility","hidden");T[f].removeArrowClass&&(l[e].removeArrowClass=!0),l[e].reverse?(W.push({element:n.smartguides.smartguide_H1,top:(S+5)*b,left:Math.min(E.c1.x,E.c2.x,E.c3.x,E.c4.x)*b,width:T[f].distance*b,removeArrowClass:l[e].removeArrowClass}),H.push({element:n.smartguides.vcurelement,left:(Math.min(E.c1.x,E.c2.x,E.c3.x,E.c4.x)+T[f].distance)*b,top:g*b,height:(S+5-g)*b}),V.push({element:a,top:(S-10)*b,left:(Math.min(E.c1.x,E.c2.x,E.c3.x,E.c4.x)+T[f].distance/2-5)*b,text:parseInt(T[f].distance)}),S>t?H.push({element:n.smartguides.curvelement,left:Math.min(E.c1.x,E.c2.x,E.c3.x,E.c4.x)*b,top:t*b,height:(S-t+10)*b}):H.push({element:n.smartguides.curvelement,left:Math.min(E.c1.x,E.c2.x,E.c3.x,E.c4.x)*b,top:(S+10)*b,height:(t-S+10)*b}),h=!0):(W.push({element:n.smartguides.smartguide_H1,top:(S+5)*b,left:Math.max(E.c1.x,E.c2.x,E.c3.x,E.c4.x)*b,width:T[f].distance*b,removeArrowClass:l[e].removeArrowClass}),V.push({element:a,top:(S-10)*b,left:(Math.max(E.c1.x,E.c2.x,E.c3.x,E.c4.x)+T[f].distance/2-5)*b,text:parseInt(T[f].distance)}),H.push({element:n.smartguides.vcurelement,left:(Math.max(E.c1.x,E.c2.x,E.c3.x,E.c4.x)+T[f].distance)*b,top:g*b,height:(S+10-g)*b}),S>t?H.push({element:n.smartguides.curvelement,left:Math.max(E.c1.x,E.c2.x,E.c3.x,E.c4.x)*b,top:t*b,height:(S-t+10)*b}):H.push({element:n.smartguides.curvelement,left:Math.max(E.c1.x,E.c2.x,E.c3.x,E.c4.x)*b,top:(S+10)*b,height:(Math.max(E.c1.y,E.c2.y,E.c3.y,E.c4.y)-S+10)*b}),h=!0),c=T[f].distance*b}}let u;if(D&&(n._isWithinRange(D,T[f].distance,6)||(p=!1),Math.abs(T[f].distance*b-D*b)>.5&&(u=!0)),p){Math.abs(T[f].distance*b-c)>.5&&(u=!0);let t=$("<span>").attr("id","hsmartguide"+f).addClass("smartGuideDist smartGuideHorizontal").css("visibility","hidden"),a=$("<span>").addClass("smartDistanceIndicator smartGuideVertical").css("visibility","hidden").attr("id","smartshapevguide"+e),o=$("<span>").addClass("ShowDist").css("visibility","hidden").attr("id","showdistanceleft"+e);u||(T[f].reverse?(W.push({element:t,top:P*b,left:A*b,width:T[f].distance*b,removeArrowClass:T[f].removeArrowClass}),V.push({element:o,top:(P-15)*b,left:(A+T[f].distance/2-5)*b,text:parseInt(T[f].distance)}),H.push({element:a,left:A*b,top:N*b,height:(R-N)*b}),O=$("<span>").addClass("smartDistanceIndicator smartGuideVertical ").css("visibility","hidden").attr("id","smartshapevguide"+e),P>Y?H.push({element:O,left:z*b,top:X*b,height:(P-X)*b}):P<X?H.push({element:O,left:z*b,top:P*b,height:(Y-P)*b}):H.push({element:O,left:z*b,top:X*b,height:(Y-X)*b})):(W.push({element:t,top:P*b,left:(I-T[f].distance)*b,width:T[f].distance*b,removeArrowClass:T[f].removeArrowClass}),V.push({element:o,top:(P-15)*b,left:(I-T[f].distance/2-5)*b,text:parseInt(T[f].distance)}),T[f].drawforward?(H.push({element:a,left:I*b,top:N*b,height:(R-N)*b}),O=$("<span>").addClass("smartDistanceIndicator smartGuideVertical ").css("visibility","hidden").attr("id","smartshapevguide"+e),P>Y?H.push({element:O,left:j*b,top:X*b,height:(P-X)*b}):P<X?H.push({element:O,left:j*b,top:P*b,height:(Y-P)*b}):H.push({element:O,left:j*b,top:X*b,height:(Y-X)*b})):(H.push({element:a,left:z*b,top:X*b,height:(Y-X)*b}),O=$("<span>").addClass("smartDistanceIndicator smartGuideVertical").css("visibility","hidden").attr("id","smartshapevguide"+e),P>R?H.push({element:O,left:I*b,top:N*b,height:(P-N)*b}):P<N?H.push({element:O,left:I*b,top:P*b,height:(R-P)*b}):H.push({element:O,left:I*b,top:N*b,height:(R-N)*b}))),L=!0)}}}if(L){R=!0;break}}if(!D)for(let e=0;e<z;e++){let d=void 0,p=void 0,l=void 0;for(let c=0;c<K;c++){let f=F[h[e].id].cp,y=F[T[c].id1].cp,E=F[T[c].id2].cp,C=void 0,w=Math.min(y.c1.x,y.c2.x,y.c3.x,y.c4.x),D=Math.max(y.c1.x,y.c2.x,y.c3.x,y.c4.x),P=Math.min(y.c1.y,y.c2.y,y.c3.y,y.c4.y),A=Math.max(y.c1.y,y.c2.y,y.c3.y,y.c4.y),N=(P+A)/2,R=Math.min(E.c1.x,E.c2.x,E.c3.x,E.c4.x),_=Math.max(E.c1.x,E.c2.x,E.c3.x,E.c4.x),j=Math.min(E.c1.y,E.c2.y,E.c3.y,E.c4.y),z=Math.max(E.c1.y,E.c2.y,E.c3.y,E.c4.y),X=(j+z)/2;C=T[c].reverse||T[c].drawforward?N:X<N?(z+X)/2:X>N?(j+X)/2:X;let Y,K,Z;if(Y=h[e].reverse?Math.max(f.c1.x,f.c2.x,f.c3.x,f.c4.x):Math.min(f.c1.x,f.c2.x,f.c3.x,f.c4.x),k.smartGrid.SGplaneOriented&&((w>u&&w<m||_>u&&_<m)&&(K=!0),(w>m&&w<Y||D>m&&D<Y||_>m&&_<Y)&&(K=!0)),!K&&(Z=v&&M?n._isWithinRange(h[e].distance,T[c].distance,2):L&&!v?n._isWithinRange(h[e].distance,T[c].distance,3):n._isWithinRange(h[e].distance,T[c].distance,6))){if((!L||v)&&!d){let p=n.setCondition(h[e].distance,T[c].distance,t,v,i,r,x,(U+180)%360,1);if(v){t.left;let e=$.extend(!0,{},a);if(r){let o=s.width-t.width,r=s.height-t.height;e=G.getTangentialAnchor(U,i,a,o,r)}let n=VectorUtil.positionShape(U,[t.width,t.height],e,o);t.left=n.left,t.top=n.top,d=!0}else{let e=t.left;t.left=t.left+p,Math.abs(e-t.left)>.5&&this.v_Div.css({visibility:"hidden"}),d=!0}}Math.max(S,Math.max(f.c1.y,f.c2.y,f.c3.y,f.c4.y));if(!p){T[c].removeArrowClass&&(h[e].removeArrowClass=!0);let t=$("<span>").attr("id","movingrightdistance").addClass("ShowDist").css("visibility","hidden");if(h[e].reverse){let a=Math.min(f.c1.y,f.c2.y,f.c3.y,f.c4.y);L&&!v?(W.push({element:n.smartguides.smartguide_H2,top:(S+5)*b,left:(Math.max(f.c1.x,f.c2.x,f.c3.x,f.c4.x)-h[e].distance-B)*b,width:(h[e].distance+B)*b,removeArrowClass:h[e].removeArrowClass}),H.push({element:n.smartguides.vcurelement1,left:(Math.max(f.c1.x,f.c2.x,f.c3.x,f.c4.x)-h[e].distance-B)*b,top:g*b,height:(S-g+10)*b}),V.push({element:t,top:(S-10)*b,left:(Math.max(f.c1.x,f.c2.x,f.c3.x,f.c4.x)-T[c].distance/2-5)*b,text:parseInt(T[c].distance)})):(H.push({element:n.smartguides.vcurelement1,left:(Math.max(f.c1.x,f.c2.x,f.c3.x,f.c4.x)-T[c].distance)*b,top:g*b,height:(S-g+10)*b}),W.push({element:n.smartguides.smartguide_H2,top:(S+5)*b,left:(Math.max(f.c1.x,f.c2.x,f.c3.x,f.c4.x)-T[c].distance)*b,width:T[c].distance*b,removeArrowClass:h[e].removeArrowClass}),V.push({element:t,top:(S-10)*b,left:(Math.max(f.c1.x,f.c2.x,f.c3.x,f.c4.x)-T[c].distance/2-5)*b,text:parseInt(T[c].distance)})),S>a?H.push({element:n.smartguides.curvelement1,left:Math.max(f.c1.x,f.c2.x,f.c3.x,f.c4.x)*b,top:a*b,height:(S-a+10)*b}):H.push({element:n.smartguides.curvelement1,left:Math.max(f.c1.x,f.c2.x,f.c3.x,f.c4.x)*b,top:(S+10)*b,height:(a-S+10)*b}),p=!0}else{L&&!v?(W.push({element:n.smartguides.smartguide_H2,top:(S+5)*b,left:(Math.min(f.c1.x,f.c2.x,f.c3.x,f.c4.x)-h[e].distance-B)*b,width:(h[e].distance+B)*b,removeArrowClass:h[e].removeArrowClass}),H.push({element:n.smartguides.vcurelement1,left:(Math.min(f.c1.x,f.c2.x,f.c3.x,f.c4.x)-h[e].distance-B)*b,top:g*b,height:(S-g+10)*b}),V.push({element:t,top:(S-10)*b,left:(Math.min(f.c1.x,f.c2.x,f.c3.x,f.c4.x)-T[c].distance/2-5)*b,text:parseInt(T[c].distance)})):(W.push({element:n.smartguides.smartguide_H2,top:(S+5)*b,left:(Math.min(f.c1.x,f.c2.x,f.c3.x,f.c4.x)-T[c].distance)*b,width:T[c].distance*b,removeArrowClass:h[e].removeArrowClass}),H.push({element:n.smartguides.vcurelement1,left:(Math.min(f.c1.x,f.c2.x,f.c3.x,f.c4.x)-T[c].distance)*b,top:g*b,height:(S-g+10)*b}),V.push({element:t,top:(S-10)*b,left:(Math.min(f.c1.x,f.c2.x,f.c3.x,f.c4.x)-T[c].distance/2-5)*b,text:parseInt(T[c].distance)}));let a=Math.min(f.c1.y,f.c2.y,f.c3.y,f.c4.y);S>a?H.push({element:n.smartguides.curvelement1,left:Math.min(f.c1.x,f.c2.x,f.c3.x,f.c4.x)*b,top:a*b,height:(S-a+10)*b}):H.push({element:n.smartguides.curvelement1,left:Math.min(f.c1.x,f.c2.x,f.c3.x,f.c4.x)*b,top:(S+10)*b,height:(Math.max(f.c1.y,f.c2.y,f.c3.y,f.c4.y)-S+10)*b}),p=!0}l=T[c].distance*b}let u;if(Math.abs(T[c].distance*b-l)>.5&&(u=!0),!u){let t=$("<span>").addClass("smartGuideDist smartGuideHorizontal").css("visibility","hidden").attr("id","hsmartguideright"+c),a=$("<span>").addClass("smartDistanceIndicator smartGuideVertical").css("visibility","hidden").attr("id","smartshapevguide"+e),o=$("<span>").addClass("ShowDist").css("visibility","hidden").attr("id","showdistanceright"+e);T[c].reverse?(W.push({element:t,top:C*b,left:D*b,width:T[c].distance*b,removeArrowClass:T[c].removeArrowClass}),H.push({element:a,left:D*b,top:P*b,height:(A-P)*b}),O=$("<span>").addClass("smartDistanceIndicator smartGuideVertical").css("visibility","hidden").attr("id","smartshapevguide"+e),V.push({element:o,top:(C-15)*b,left:(D+T[c].distance/2-5)*b,text:parseInt(T[c].distance)}),C>z?H.push({element:O,left:_*b,top:j*b,height:(C-j)*b}):C<j?H.push({element:O,left:_*b,top:C*b,height:(z-C)*b}):H.push({element:O,left:_*b,top:j*b,height:(z-j)*b})):(W.push({element:t,top:C*b,left:(w-T[c].distance)*b,width:T[c].distance*b,removeArrowClass:T[c].removeArrowClass}),V.push({element:o,top:(C-15)*b,left:(w-T[c].distance/2-5)*b,text:parseInt(T[c].distance)}),T[c].drawforward?(H.push({element:a,left:w*b,top:P*b,height:(A-P)*b}),O=$("<span>").addClass("smartDistanceIndicator smartGuideVertical").css("visibility","hidden").attr("id","smartshapevguide"+e),C>z?H.push({element:O,left:R*b,top:j*b,height:(C-j)*b}):C<j?H.push({element:O,left:R*b,top:C*b,height:(z-C)*b}):H.push({element:O,left:R*b,top:j*b,height:(z-j)*b})):(H.push({element:a,left:_*b,top:j*b,height:(z-j)*b}),O=$("<span>").addClass("smartDistanceIndicator smartGuideVertical").css("visibility","hidden").attr("id","smartshapevguide"+e),C>A?H.push({element:O,left:w*b,top:P*b,height:(C-P)*b}):C<P?H.push({element:O,left:w*b,top:C*b,height:(A-C)*b}):H.push({element:O,left:w*b,top:P*b,height:(A-P)*b}))),I=!0}}}if(I){R=!0;break}}let Z=w.length;for(let e=0;e<X;e++){let d=void 0,p=!0,l=!1,h=void 0;for(let f=0;f<Z;f++){let y,E=F[c[e].id].cp,O=F[w[f].id1].cp,T=F[w[f].id2].cp,D=Math.min(O.c1.x,O.c2.x,O.c3.x,O.c4.x),L=Math.max(O.c1.x,O.c2.x,O.c3.x,O.c4.x),I=Math.min(O.c1.y,O.c2.y,O.c3.y,O.c4.y),N=Math.max(O.c1.y,O.c2.y,O.c3.y,O.c4.y),R=(D+L)/2,B=Math.min(T.c1.x,T.c2.x,T.c3.x,T.c4.x),j=Math.max(T.c1.x,T.c2.x,T.c3.x,T.c4.x),z=Math.min(T.c1.y,T.c2.y,T.c3.y,T.c4.y),X=Math.max(T.c1.y,T.c2.y,T.c3.y,T.c4.y),Y=(B+j)/2;y=w[f].reverse||w[f].drawforward?R:Y<R?(j+Y)/2:Y>R?(B+Y)/2:Y;let K,Z;if(Z=c[e].reverse?Math.min(E.c1.y,E.c2.y,E.c3.y,E.c4.y):Math.max(E.c1.y,E.c2.y,E.c3.y,E.c4.y),k.smartGrid.SGplaneOriented){if(I>g&&I<S||X>g&&X<S){}if(I>Z&&I<g||N>Z&&N<g||X>Z&&X<g||z>Z&&z<g){}}if(K=v&&M?n._isWithinRange(c[e].distance,w[f].distance,2):n._isWithinRange(c[e].distance,w[f].distance,6)){if((!P||v)&&!d){let p=n.setCondition(c[e].distance,w[f].distance,t,v,i,r,x,(U+270)%360,1);if(v){let e=$.extend(!0,{},a);if(r){let o=s.width-t.width,r=s.height-t.height;e=G.getTangentialAnchor(U,i,a,o,r)}let n=VectorUtil.positionShape(U,[t.width,t.height],e,o);t.left=n.left,t.top=n.top,d=!0}else{let e=t.top;t.top=Math.round(t.top-p),Math.abs(t.top-e)>.5&&(this.h_Div.css({visibility:"hidden"}),k.smartGrid.SGshowallGuides&&(n.smartguides.horizontal1.css({visibility:"hidden"}),n.smartguides.horizontal2.css({visibility:"hidden"}))),d=!0}_=p}Math.max(m,Math.max(E.c1.x,E.c2.x,E.c3.x,E.c4.x));let g=Math.min(E.c1.x,E.c2.x,E.c3.x,E.c4.x);if(!P&&!l){w[f].removeArrowClass&&(c[e].removeArrowClass=!0);let t=$("<span>").attr("id","movingtopdistance").addClass("ShowDist").css("visibility","hidden");c[e].reverse?(W.push({element:n.smartguides.hcurelement,left:u*b,top:(Math.min(E.c1.y,E.c2.y,E.c3.y,E.c4.y)+w[f].distance)*b,width:(m-u+10)*b}),H.push({element:n.smartguides.smartguide_V1,left:(m-5)*b,top:Math.min(E.c1.y,E.c2.y,E.c3.y,E.c4.y)*b,height:w[f].distance*b,removeArrowClass:c[e].removeArrowClass}),V.push({element:t,left:(m+5)*b,top:(Math.min(E.c1.y,E.c2.y,E.c3.y,E.c4.y)+w[f].distance/2-5)*b,text:parseInt(w[f].distance)}),m>g?W.push({element:n.smartguides.curhelement,top:Math.min(E.c1.y,E.c2.y,E.c3.y,E.c4.y)*b,left:g*b,width:(m-g+10)*b}):W.push({element:n.smartguides.curhelement,top:Math.min(E.c1.y,E.c2.y,E.c3.y,E.c4.y)*b,left:m*b,width:(g-m-5)*b}),l=!0):(W.push({element:n.smartguides.hcurelement,left:u*b,top:(Math.max(E.c1.y,E.c2.y,E.c3.y,E.c4.y)+w[f].distance)*b,width:(m-u+10)*b}),H.push({element:n.smartguides.smartguide_V1,left:(m-5)*b,top:Math.max(E.c1.y,E.c2.y,E.c3.y,E.c4.y)*b,height:w[f].distance*b,removeArrowClass:c[e].removeArrowClass}),V.push({element:t,left:(m+5)*b,top:(Math.max(E.c1.y,E.c2.y,E.c3.y,E.c4.y)+w[f].distance/2-5)*b,text:parseInt(w[f].distance)}),m>g?W.push({element:n.smartguides.curhelement,top:Math.max(E.c1.y,E.c2.y,E.c3.y,E.c4.y)*b,left:g*b,width:(m-g+10)*b}):W.push({element:n.smartguides.curhelement,top:Math.max(E.c1.y,E.c2.y,E.c3.y,E.c4.y)*b,left:m*b,width:(g-m)*b}),l=!0),h=w[f].distance*b}let S;if(P&&(n._isWithinRange(P,w[f].distance,6)||(p=!1),Math.abs(w[f].distance*b-P*b)>.5&&(S=!0)),p&&(Math.abs(w[f].distance*b-h)>.5&&(S=!0),!S)){let t=$("<span>").addClass("smartGuideDist smartGuideVertical").css("visibility","hidden").attr("id","vsmartguide"+f),a=$("<span>").addClass("smartDistanceIndicator smartGuideHorizontal ").css("visibility","hidden").attr("id","smartshapehguide"+e);C=$("<span>").addClass("smartDistanceIndicator smartGuideHorizontal ").css("visibility","hidden").attr("id","hsmartshapeguide"+e);let o=$("<span>").addClass("ShowDist").css("visibility","hidden").attr("id","showdistancetop"+e);w[f].reverse?(H.push({element:t,left:y*b,top:N*b,height:w[f].distance*b,removeArrowClass:w[f].removeArrowClass}),V.push({element:o,top:(N+w[f].distance/2-5)*b,left:(y+5)*b,text:parseInt(w[f].distance)}),W.push({element:a,top:N*b,left:D*b,width:(L-D)*b}),y>j?W.push({element:C,top:X*b,left:B*b,width:(y-B)*b}):y<B?W.push({element:C,top:X*b,left:y*b,width:(j-y)*b}):W.push({element:C,top:X*b,left:B*b,width:(j-B)*b})):(H.push({element:t,top:(I-w[f].distance)*b,left:y*b,height:w[f].distance*b,removeArrowClass:w[f].removeArrowClass}),V.push({element:o,top:(I-w[f].distance/2-5)*b,left:(y+5)*b,text:parseInt(w[f].distance)}),w[f].drawforward?(W.push({element:a,left:D*b,top:I*b,width:(L-D)*b}),y>j?W.push({element:C,left:B*b,top:z*b,width:(y-B)*b}):y<B?W.push({element:C,left:y*b,top:z*b,width:(j-y)*b}):W.push({element:C,left:B*b,top:z*b,width:(j-B)*b})):(W.push({element:a,left:B*b,top:X*b,width:(j-B)*b}),y>L?W.push({element:C,left:D*b,top:I*b,width:(y-D)*b}):y<D?W.push({element:C,left:y*b,top:I*b,width:(L-y)*b}):W.push({element:C,left:D*b,top:I*b,width:(L-D)*b}))),A=!0}}}if(A){R=!0;break}}if(!P)for(let e=0;e<Y;e++){let d=void 0,p=void 0,l=void 0;for(let h=0;h<Z;h++){let c,y=F[f[e].id].cp,E=F[w[h].id1].cp,C=F[w[h].id2].cp,O=Math.min(E.c1.x,E.c2.x,E.c3.x,E.c4.x),T=Math.max(E.c1.x,E.c2.x,E.c3.x,E.c4.x),D=Math.min(E.c1.y,E.c2.y,E.c3.y,E.c4.y),P=Math.max(E.c1.y,E.c2.y,E.c3.y,E.c4.y),L=(O+T)/2,I=Math.min(C.c1.x,C.c2.x,C.c3.x,C.c4.x),R=Math.max(C.c1.x,C.c2.x,C.c3.x,C.c4.x),B=Math.min(C.c1.y,C.c2.y,C.c3.y,C.c4.y),j=Math.max(C.c1.y,C.c2.y,C.c3.y,C.c4.y),z=(I+R)/2;c=w[h].reverse||w[h].drawforward?L:z<L?(R+z)/2:z>L?(I+z)/2:z;let X,Y,K;if(X=f[e].reverse?Math.max(y.c1.y,y.c2.y,y.c3.y,y.c4.y):Math.min(y.c1.y,y.c2.y,y.c3.y,y.c4.y),k.smartGrid.SGplaneOriented&&((D>g&&D<S||j>g&&j<S)&&(K=!0),(g>B&&g<D||S<X&&X>j)&&(K=!0)),!K&&(Y=v&&M?n._isWithinRange(f[e].distance,w[h].distance,2):A&&!v?n._isWithinRange(f[e].distance,w[h].distance,3):n._isWithinRange(f[e].distance,w[h].distance,6))){if((!A||v)&&!d){let p=n.setCondition(f[e].distance,w[h].distance,t,v,i,r,x,(U+90)%360,1);if(v){let e=$.extend(!0,{},a);if(r){let o=s.width-t.width,r=s.height-t.height;e=G.getTangentialAnchor(U,i,a,o,r)}let n=VectorUtil.positionShape(U,[t.width,t.height],e,o);t.left=n.left,t.top=n.top,d=!0}else{let e=t.top;t.top=t.top+p,Math.abs(t.top-e)>.5&&(this.h_Div.css({visibility:"hidden"}),k.smartGrid.SGshowallGuides&&(n.smartguides.horizontal1.css({visibility:"hidden"}),n.smartguides.horizontal2.css({visibility:"hidden"}))),d=!0}}Math.max(m,Math.max(y.c1.x,y.c2.x,y.c3.x,y.c4.x));let g=Math.min(y.c1.x,y.c2.x,y.c3.x,y.c4.x);if(!p){w[h].removeArrowClass&&(f[e].removeArrowClass=!0);let t=$("<span>").attr("id","movingbottomdistance").addClass("ShowDist").css("visibility","hidden");f[e].reverse?(A&&!v?(W.push({element:n.smartguides.hcurelement1,top:(Math.max(y.c1.y,y.c2.y,y.c3.y,y.c4.y)-f[e].distance-_)*b,left:u*b,width:(m-u-5)*b}),H.push({element:n.smartguides.smartguide_V2,left:(m-5)*b,top:(Math.max(y.c1.y,y.c2.y,y.c3.y,y.c4.y)-f[e].distance-_)*b,height:(f[e].distance+_)*b,removeArrowClass:f[e].removeArrowClass}),V.push({element:t,left:(m+5)*b,top:(Math.max(y.c1.y,y.c2.y,y.c3.y,y.c4.y)-w[h].distance/2-5)*b,text:parseInt(w[h].distance)})):(W.push({element:n.smartguides.hcurelement1,top:(Math.max(y.c1.y,y.c2.y,y.c3.y,y.c4.y)-w[h].distance)*b,left:u*b,width:(m-u-5)*b}),H.push({element:n.smartguides.smartguide_V2,left:(m-5)*b,top:(Math.max(y.c1.y,y.c2.y,y.c3.y,y.c4.y)-w[h].distance)*b,height:w[h].distance*b,removeArrowClass:f[e].removeArrowClass}),V.push({element:t,left:(m+5)*b,top:(Math.max(y.c1.y,y.c2.y,y.c3.y,y.c4.y)-w[h].distance/2-5)*b,text:parseInt(w[h].distance)})),m>g?W.push({element:n.smartguides.curhelement1,top:Math.max(y.c1.y,y.c2.y,y.c3.y,y.c4.y)*b,left:g*b,width:(m-g-5)*b}):W.push({element:n.smartguides.curhelement1,top:Math.max(y.c1.y,y.c2.y,y.c3.y,y.c4.y)*b,left:m*b,width:(g-m-5)*b}),p=!0):(A&&!v?(W.push({element:n.smartguides.hcurelement1,top:(Math.min(y.c1.y,y.c2.y,y.c3.y,y.c4.y)-f[e].distance-_)*b,left:u*b,width:(m-u-5)*b}),H.push({element:n.smartguides.smartguide_V2,left:(m-5)*b,top:(Math.min(y.c1.y,y.c2.y,y.c3.y,y.c4.y)-f[e].distance-_)*b,height:(f[e].distance+_)*b,removeArrowClass:f[e].removeArrowClass}),V.push({element:t,left:(m+5)*b,top:(Math.min(y.c1.y,y.c2.y,y.c3.y,y.c4.y)-w[h].distance/2-5)*b,text:parseInt(w[h].distance)})):(W.push({element:n.smartguides.hcurelement1,top:(Math.min(y.c1.y,y.c2.y,y.c3.y,y.c4.y)-w[h].distance)*b,left:u*b,width:(m-u-5)*b}),H.push({element:n.smartguides.smartguide_V2,left:(m-5)*b,top:(Math.min(y.c1.y,y.c2.y,y.c3.y,y.c4.y)-w[h].distance)*b,height:w[h].distance*b,removeArrowClass:f[e].removeArrowClass}),V.push({element:t,left:(m+5)*b,top:(Math.min(y.c1.y,y.c2.y,y.c3.y,y.c4.y)-w[h].distance/2-5)*b,text:parseInt(w[h].distance)})),m>g?W.push({element:n.smartguides.curhelement1,top:Math.min(y.c1.y,y.c2.y,y.c3.y,y.c4.y)*b,left:g*b,width:(m-g-5)*b}):W.push({element:n.smartguides.curhelement1,top:Math.min(y.c1.y,y.c2.y,y.c3.y,y.c4.y)*b,left:m*b,width:(g-m-5)*b}),p=!0),l=w[h].distance*b}let S,E=$("<span>").addClass("smartGuideDist smartGuideVertical").css("visibility","hidden").attr("id","vsmartguide"+h),C=$("<span>").addClass("smartDistanceIndicator smartGuideHorizontal ").css("visibility","hidden").attr("id","smartshapehguide"+e),L=$("<span>").addClass("smartDistanceIndicator smartGuideHorizontal").css("visibility","hidden").attr("id","hsmartshapeguide"+e),M=$("<span>").addClass("ShowDist").css("visibility","hidden").attr("id","showdistancebottom"+e);Math.abs(w[h].distance*b-l)>.5&&(S=!0),S||(w[h].reverse?(H.push({element:E,left:c*b,top:P*b,height:w[h].distance*b,removeArrowClass:w[h].removeArrowClass}),W.push({element:C,top:P*b,left:O*b,width:(T-O)*b}),V.push({element:M,top:(P+w[h].distance/2-5)*b,left:(c+5)*b,text:parseInt(w[h].distance)}),c>R?W.push({element:L,top:j*b,left:I*b,width:(c-I)*b}):c<I?W.push({element:L,top:j*b,left:c*b,width:(R-c)*b}):W.push({element:L,top:j*b,left:I*b,width:(R-I)*b})):(H.push({element:E,top:(D-w[h].distance)*b,left:c*b,height:w[h].distance*b,removeArrowClass:w[h].removeArrowClass}),V.push({element:M,top:(D-w[h].distance/2-5)*b,left:(c+5)*b,text:parseInt(w[h].distance)}),w[h].drawforward?(W.push({element:C,left:O*b,top:D*b,width:(T-O)*b}),c>R?W.push({element:L,left:I*b,top:B*b,width:(c-I)*b}):c<I?W.push({element:L,left:c*b,top:B*b,width:(R-c)*b}):W.push({element:L,left:I*b,top:B*b,width:(R-I)*b})):(W.push({element:C,left:I*b,top:j*b,width:(R-I)*b}),c>T?W.push({element:L,left:O*b,top:D*b,width:(c-O)*b}):c<O?W.push({element:L,left:c*b,top:D*b,width:(T-c)*b}):W.push({element:L,left:O*b,top:D*b,width:(T-O)*b}))),N=!0)}}if(N){R=!0;break}}let J=W.length;for(let e=0;e<J;e++){let t=W[e].element;W[e].removeArrowClass?t.addClass("SmartguideSmalldist"):t.removeClass("SmartguideSmalldist"),t.css({visibility:"visible",left:W[e].left+n.scrollDiffLeft,top:W[e].top+n.scrollDiffTop,width:W[e].width}),n.smartguides.SmartGuideDistance.append(t)}let Q=H.length;for(let e=0;e<Q;e++){let t=H[e].element;H[e].removeArrowClass?t.addClass("SmartguideSmalldist"):t.removeClass("SmartguideSmalldist"),t.css({visibility:"visible",left:H[e].left+n.scrollDiffLeft,top:H[e].top+n.scrollDiffTop,height:H[e].height}),n.smartguides.SmartGuideDistance.append(t)}if(k.ShowSGdistance)for(let e=0;e<V.length;e++){let t=V[e].element;t.css({visibility:"visible",left:V[e].left+n.scrollDiffLeft,top:V[e].top+n.scrollDiffTop}),t.text(V[e].text),n.smartguides.SmartGuideDistance.append(t)}return k.container.append(n.smartguides.SmartGuideDistance),R}set(e,t,a,o,i,r,s,n){let d=!1,p=this,l=this.editor.config,h=a.scaleFactor,c=l.get.translate();p.scrollDiffLeft=c.x,p.scrollDiffTop=c.y;let f=a.isEditPointMode;if(t){let c=t.nvOProps.nvDProps.id,u=this.editor.resize;a.cornerPoints||p.getCornerPointsShapes(a,void 0,c);let m=a.cornerPoints,g=a.slideTransform;if(!$.isEmptyObject(m)){let a=!1,c=t.props?t.props.transform:void 0,S=t.nvOProps.nvDProps.id.split("_");S=S[1]?S[1]:S[0],c||(l.get.mergeTransformShape(t),c=t.props.transform);let x,v=t.parentOffset,y={};v&&0!==v.left&&0!==v.top&&(x=!0,y.left=e.left+v.left,y.top=e.top+v.top);let E,C,O=Shape.getAngle(c);e.width&&e.height?(E=Shape.getCornerPoints(x?y:e,{width:e.width,height:e.height},O),a=!0,C=c.dim.width/c.dim.height):E=Shape.getCornerPoints(x?y:e,c.dim,O);let b=p.getCurrentValues(E,O,S),T=b.H_val,w=b.V_val,D=T[1].current_value,P=T[3].current_value,L=w[1].current_value,I=w[3].current_value,A=parseInt(O/45),N=!0;r&&(N=p.guideMapping[r][A]);let R,B,_=!1,M=!1,U=g.height,k=g.width,G=k,F=U,W=0,H=0,V=0,j=0,z=!1,X=!1,Y=!1,K=!1,Z=!1,J=!1,Q=void 0,q=void 0,ee=0,te=void 0,ae=void 0,oe=0,ie=void 0,re=void 0,se=void 0,ne=void 0;if(l.smartGrid.SGshowallGuides){p.smartguides.vertical1.css({visibility:"hidden"}),p.smartguides.vertical2.css({visibility:"hidden"}),p.smartguides.horizontal1.css({visibility:"hidden"}),p.smartguides.horizontal2.css({visibility:"hidden"})}this.v_Div.css({visibility:"hidden"}),this.h_Div.css({visibility:"hidden"}),$.each(m,function(t,d){let c=d.cp.c1,m=d.cp.c2,g=d.cp.c3,S=d.cp.c4,v=Math.min(c.x,m.x,g.x,S.x),b=Math.max(c.x,m.x,g.x,S.x),A=Math.min(c.y,m.y,g.y,S.y),U=Math.max(c.y,m.y,g.y,S.y),k=.5*(v+b),de=.5*(A+U),pe=d.center,le=d.isExternalShape;if(!(x&&le||!x&&!le)){if(T[0].shape_value=k,T[1].shape_value=v,T[2].shape_value=b,T[3].shape_value=v,T[4].shape_value=b,l.SGcenterwithsides&&(T[5].shape_value=v,T[6].shape_value=b,T[7].shape_value=k,T[8].shape_value=k,w[5].shape_value=A,w[6].shape_value=U,w[7].shape_value=de,w[8].shape_value=de),w[0].shape_value=de,w[1].shape_value=A,w[2].shape_value=U,w[3].shape_value=A,w[4].shape_value=U,N?($.each(T,function(t,h){if((0!=t||!a)&&(0!=t||pe)){let c=p.getAllowSmartGuide(a,s,O,r,t,"vertical");if(c&&(M=p._setCondition(h,e,a,r,s,C,se))){if(a){let t=$.extend(!0,{},o);if(s){let a=n.width-e.width,i=n.height-e.height;t=u.getTangentialAnchor(O,r,o,a,i)}let a=VectorUtil.positionShape(O,[e.width,e.height],t,i);re||(e.left=a.left,e.top=a.top,se=!0,re=!0,X=!0)}else re||(e.left=e.left-M,re=!0),M=!0,X=!0;W=h.shape_value,q||0===q||(q=W),"slide"!=d.type||0!=t&&!l.SGcenterwithsides?"grid"==d.type?F=I-(V=L)+10:Math.abs(q-W)<3?(Z=!1,V=Math.min(L,A),(Q||0===Q)&&Q<V?V=Q:Q=V,F=Math.max(I,U),ee&&0!==ee||(ee=F),F>=ee?(ee=F,F-=V):F=ee-V):(M=!1,R=F):Z=!0,0==t&&l.smartGrid.SGshowallGuides&&(vcheck=!0),z=d.showGuides,M||(F=R,W=q,V=Q,X=!0)}}if(0==t&&(M||f))return!1}),$.each(w,function(t,h){if((0!=t||!a)&&(0!=t||pe)){let c=p.getAllowSmartGuide(a,s,O,r,t,"horizontal");if(c&&(_=p._setCondition(h,e,a,r,s,C,ne))){if(a){let t=$.extend(!0,{},o);if(s){let a=n.width-e.width,i=n.height-e.height;t=u.getTangentialAnchor(O,r,o,a,i)}if(!ie){let a=VectorUtil.positionShape(O,[e.width,e.height],t,i);e.left=a.left,e.top=a.top,_=!0,Y=!0,ne=!0,ie=!0}}else ie||(e.top=e.top-_,ie=!0),_=!0,Y=!0;j=h.shape_value,ae||0===ae||(ae=j),"slide"==d.type&&0==t?J=!0:"grid"==d.type?G=P-(H=D)+10:Math.abs(ae-j)<3?(J=!1,H=Math.min(D,v),te&&te<H?H=te:te=H,G=Math.max(P,b),oe&&0!==oe||(oe=G),G>=oe?(oe=G,G-=H):G=oe-H):(_=!1,B=G),0==t&&l.smartGrid.SGshowallGuides&&(hcheck=!0),K=d.showGuides,_||(G=B,H=te,j=ae,Y=!0)}}if(0==t&&(_||f))return!1})):($.each(T,function(t,h){if((0!=t||!a)&&(0!=t||pe)){let c=p.getAllowSmartGuide(a,s,O,r,t,"vertical");if(c&&(M=p._setCondition(h,e,a,r,s,C,se))){if(a){let t=$.extend(!0,{},o);if(s){let a=n.width-e.width,i=n.height-e.height;t=u.getTangentialAnchor(O,r,o,a,i)}let a=VectorUtil.positionShape(O,[e.width,e.height],t,i);if(!re){e.left=a.left,e.top=a.top,se=!0,E=Shape.getCornerPoints(x?y:e,{width:e.width,height:e.height},O),L=Math.min(E.c1.y,E.c2.y,E.c3.y,E.c4.y),I=Math.max(E.c1.y,E.c2.y,E.c3.y,E.c4.y);let t=.5*(L+I);w[0].current_value=t,w[1].current_value=L,w[2].current_value=L,w[3].current_value=I,w[4].current_value=I,re=!0,X=!0}}else re||(e.left=e.left-M,re=!0),M=!0,X=!0;W=h.shape_value,q||(q=W),"slide"!=d.type||0!=t&&!l.SGcenterwithsides?"grid"==d.type?(V=L,F=I):Math.abs(q-W)<3?(Z=!1,V=Math.min(L,A),(Q||0===Q)&&Q<V?V=Q:Q=V,F=Math.max(I,U),ee&&0!==ee||(ee=F),F>=ee?(ee=F,F-=V):F=ee-V):(M=!1,R=F):Z=!0,0==t&&l.smartGrid.SGshowallGuides&&(vcheck=!0),z=d.showGuides,M||(F=R,W=q,V=Q,X=!0)}}if(0==t&&(M||f))return!1}),$.each(w,function(t,h){if((0!=t||!a)&&(0!=t||pe)){let c=p.getAllowSmartGuide(a,s,O,r,t,"horizontal");if(c&&(_=p._setCondition(h,e,a,r,s,C,ne))){if(a){let t=$.extend(!0,{},o);if(s){let a=n.width-e.width,i=n.height-e.height;t=u.getTangentialAnchor(O,r,o,a,i)}if(!ie){let a=VectorUtil.positionShape(O,[e.width,e.height],t,i);e.left=a.left,e.top=a.top,E=Shape.getCornerPoints(x?{left:y.left,top:y.top}:{left:e.left,top:e.top},{width:e.width,height:e.height},O),D=Math.min(E.c1.x,E.c2.x,E.c3.x,E.c4.x),P=Math.max(E.c1.x,E.c2.x,E.c3.x,E.c4.x),_=!0,Y=!0,ne=!0,ie=!0}}else ie||(e.top=e.top-_,ie=!0),_=!0,Y=!0;j=h.shape_value,ae||(ae=j),"slide"==d.type&&0==t?J=!0:"grid"==d.type?(H=D,G=P):Math.abs(ae-j)<3?(J=!1,H=Math.min(D,v),te&&te<H?H=te:te=H,G=Math.max(P,b),oe&&0!==oe||(oe=G),G>=oe?(oe=G,G-=H):G=oe-H):(_=!1,B=G),0==t&&l.smartGrid.SGshowallGuides&&(hcheck=!0),K=d.showGuides,_||(G=B,H=te,j=ae,Y=!0)}}if(0==t&&(_||f))return!1})),(X||M)&&z&&(p.v_Div.css({visibility:"visible",top:(V-10)*h+p.scrollDiffTop,left:W*h+p.scrollDiffLeft,height:(F+20)*h}),Z?p.v_Div.addClass("smartGuideSlide"):p.v_Div.removeClass("smartGuideSlide"),l.smartGrid.SGshowallGuides&&vcheck&&vchange&&p._setCondition(T[1],e)&&p._setCondition(T[4],e)&&vchange)){let e=Math.min(w[1].shape_value,w[1].current_value),t=Math.max(w[4].shape_value,w[4].current_value),a=t-e;Pheight||(Pheight=a),Ptop||(Ptop=e),Ptop<e&&(a=F,e=Ptop),a>=Pheight&&(Pheight=a,Ptop=e,p.smartguides.vertical1.css({visibility:"visible",left:T[1].shape_value*h+p.scrollDiffLeft,top:(e-10)*h+p.scrollDiffTop,height:(a+20)*h}).appendTo(slidecontainer),p.smartguides.vertical2.css({visibility:"visible",left:T[4].shape_value*h+p.scrollDiffLeft,top:(e-10)*h+p.scrollDiffTop,height:(a+20)*h}).appendTo(slidecontainer))}if((_||Y)&&K&&(p.h_Div.css({visibility:"visible",top:j*h+p.scrollDiffTop,left:(H-10)*h+p.scrollDiffLeft,width:(G+20)*h}),J?p.h_Div.addClass("smartGuideSlide"):p.h_Div.removeClass("smartGuideSlide"),l.smartGrid.SGshowallGuides&&hcheck&&hchange&&p._setCondition(w[1],e)&&p._setCondition(w[4],e)&&hchange)){let e=Math.min(T[1].shape_value,T[1].current_value),t=Math.max(T[4].shape_value,T[4].current_value),a=t-e;Pwidth||(Pwidth=a),Pleft||(Pleft=e),Pleft<e&&(a=G,e=Pleft),a>=Pwidth&&(Pwidth=a,Pleft=e,p.smartguides.horizontal1.css({visibility:"visible",top:w[1].shape_value*h+p.scrollDiffTop,left:(e-10)*h+p.scrollDiffLeft,width:(a+20)*h}).appendTo(slidecontainer),p.smartguides.horizontal2.css({visibility:"visible",top:w[4].shape_value*h+p.scrollDiffTop,left:(e-10)*h+p.scrollDiffLeft,width:(a+20)*h}).appendTo(slidecontainer))}}}),d=!!(_||M||X||Y)}}return d}}class ZSCommonTextEditor{constructor(e){this.editor=e,this.textArea=void 0,this.textAreaSystemClipboard=void 0,this.operationKeys={39:{m:["textnavigation","right"],eventKeys:{mac:{altKey:"word",metaKey:"line",shiftKey:"select"},other:{ctrlKey:"word",shiftKey:"select"}}},37:{m:["textnavigation","left"],eventKeys:{mac:{altKey:"word",metaKey:"line",shiftKey:"select"},other:{ctrlKey:"word",shiftKey:"select"}}},40:{m:["textnavigation","down"],eventKeys:{mac:{altKey:"para",metaKey:"para",shiftKey:"select"},other:{ctrlKey:"para",shiftKey:"select"}}},38:{m:["textnavigation","up"],eventKeys:{mac:{altKey:"para",metaKey:"para",shiftKey:"select"},other:{ctrlKey:"para",shiftKey:"select"}}},35:{m:["textnavigation","end"],eventKeys:{mac:{shiftKey:"select",metaKey:"text"},other:{shiftKey:"select",ctrlKey:"text"}}},36:{m:["textnavigation","home"],eventKeys:{mac:{shiftKey:"select",metaKey:"text"},other:{shiftKey:"select",ctrlKey:"text"}}},27:{m:["clear"]},65:{m:["textselect","all"],eventKeys:{mandatory:!0,mac:{metaKey:!0},other:{ctrlKey:!0,altKey:!1}}},8:{m:["textactions","backspace"],eventKeys:{mac:{altKey:"word",ctrlKey:"word"},other:{altKey:"word",ctrlKey:"word"}},action:!0},46:{m:["textactions","del"],eventKeys:{mac:{altKey:"word",ctrlKey:"word"},other:{altKey:"word",ctrlKey:"word"}},action:!0},13:{m:["textactions","enter"],action:!0}};let t=this;e.config.loadFiles.textAutofit&&(this.textAutofit=new ZSTextAutoFit(t)),this.textComposer=new ZSTextComposer(t),this.textEditor=new ZSTextEditor(t),e.config.isSupported.spellcheck&&(this.spellCheck=new ZSSpellCheck(t))}containerMoved(e){let t=this.editor;if(t.getSelectedShapes().length){let e=this.editor.selector.getShapesOfZero();if(this.isEditable(e.data.nvOProps.nvDProps.id)){let a=t.defaults.text;t.getShapeContainer();a.shapeContainer=t.config.container,a.shapeContainerOffset=t.config.get.offset(t),a.boxOffset=t.config.get.boxOffset(e.box),a.containerOffset={left:e.data.props.transform.pos.left+a.textContainer.data("translate_x"),top:e.data.props.transform.pos.top+a.textContainer.data("translate_y")}}}}addCommentBG(e){let t=e.data,a=e.shapeId,o=t.textBody.paras,i=this.textComposer.getPosition(o),r=o.length,s=this.editor.getShapeContainer().find("#"+a).find("#"+Shape.textBody.textContainer),n=s.find("#"+Shape.textBody.commentsGroupId);for(let e=0;e<r;e++){let a=o[e],r=a.portions.length;for(let o=0;o<r;o++){let r=a.portions[o],d=r.props;if(d&&d.commentIds&&d.commentIds.length){let a=d.commentIds,p=void 0!==r.type?1:r.t?r.t.length:0,l={para:e,portion:o,ch:0},h={para:e,portion:o,ch:p},c=this.textComposer.getIndex(l,i),f=this.textComposer.getIndex(h,i),u={textContainer:s,data:t,position:i},m=this.textEditor.textselect.select(c-1,f-1,void 0,void 0,void 0,void 0,u);for(let e=0;e<a.length;e++){let t=a[e],o={commentBGData:m,commentId:t,textContainer:s,commentsGroup:n};this._addCommentBG(o)}}}}}_addCommentBG(e){let t=e.textContainer,a=e.commentBGData,o=e.commentId,i=e.commentsGroup;$.each(a,function(e,a){let r=i.children(".comment_"+o);$.each(a,function(a,s){let n=i.find("#comment_"+o+e+a);if(n&&n.length){Shape.creator.setRectangle(n[0],s.left,s.top,s.width,s.height);let e=$.inArray(n[0],r);r.splice(e,1)}else n=Shape.creator.createRectangle(t,s.left,s.top,s.width,s.height,0),(n=$(n)).attr({class:"comment_"+o,id:"comment_"+o+e+a}),n.addClass("commentbg"),i.prepend(n)}),r.remove()})}removeCommentBG(e){let t=e.textContainer,a=e.commentId,o=t.find("#"+Shape.textBody.commentsGroupId);if(o.length){let e=o.children(".comment_"+a);e.remove()}}getObject(){let e,t=this.textEditor,a=t.textselect.isSelected(),o=t._getFromTo(),i=o.to,r=a?t.textselect.getTargetElementFromIndex(o.from.num.index+1):o.from,s=r.num.para,n=i.num.para,d=i.num.portion,p=i.num.ch;if(-1==r.num.ch&&i.num.ch==r.num.ch&&r.num.para==i.num.para&&a&&(e=!0,n=s=r.num.para?r.num.para-1:r.num.para),!e&&a&&-1==i.num.ch){let e=this.editor.selector.getShapesOfZero().data;n=i.num.para?i.num.para-1:i.num.para;let t=e.textBody.paras[n];d=t.portions.length-1;let a=t.portions[d];p=void 0!==a.type?-1:a.t?a.t.length-1:-1}return{from:{para:s,portion:r.num.portion,ch:r.num.ch},to:{para:n,portion:d,ch:p},EOPSelected:e}}isEditable(e){let t=this.editor.defaults.text,a=!1;if(e){let o=this.editor.selector.getShapesOfZero();o&&(a=e==o.data.nvOProps.nvDProps.id&&!isNaN(t.from.num.para))}else a=!isNaN(t.from.num.para);return a}refresh(e){let t=this.editor.defaults.text,a=$.extend(!0,{},t.from),o=$.extend(!0,{},t.to),i=this.textEditor;if(!e){i.clear();let e=this.editor.getSelectedShapes()[0];i.selector.init(e.box,e.data),this.textComposer.init(e.data)}this.editor.commonTextEditor.textEditor.textcursor.refresh(a,o)}}class ZSTextAutoFit{constructor(e){this.editor=e.editor,this.autoFitTimer=void 0,this.mapping=[{lineSpaceScale:1,fontScale:1},{lineSpaceScale:.9,fontScale:1},{lineSpaceScale:.9,fontScale:.925},{lineSpaceScale:.8,fontScale:.925},{lineSpaceScale:.8,fontScale:.85},{lineSpaceScale:.8,fontScale:.775},{lineSpaceScale:.8,fontScale:.7},{lineSpaceScale:.8,fontScale:.625},{lineSpaceScale:.8,fontScale:.55},{lineSpaceScale:.8,fontScale:.475},{lineSpaceScale:.8,fontScale:.4},{lineSpaceScale:.8,fontScale:.325},{lineSpaceScale:.8,fontScale:.25}],this.bindEvents()}bindEvents(){let e=this;this.editor.container.bind("font_change",function(t,a){let o=[],i={data:a.data,box:a.box};e.checkForAutoFit(a.data,o,i,!0),o.length&&(e.convertAppdata(o),e.editor.commonTextEditor.textEditor.textmodulateData.triggerEvent(o))})}getTextBox(e){let t=zoho.math.toRadians(225),a=zoho.math.toRadians(45);return 2*(e/(Math.sin(a)-Math.sin(t)))}_Oval(e){return this.getTextBox(e)}_OvalCallout(e){return this.getTextBox(e)}_Pie(e){return this.getTextBox(e)}_Chord(e){return this.getTextBox(e)}_Teardrop(e){return this.getTextBox(e)}_Donut(e){return this.getTextBox(e)}_NoSymbol(e){return this.getTextBox(e)}_Smiley(e){return this.getTextBox(e)}_SequentialAccessStorage(e){return this.getTextBox(e)}_SixteenPointStar(e,t){let a=t.props.geom.preset,o=a.modifiers&&a.modifiers.length?a.modifiers:$.Preset.SIXTEEN_POINT_STAR.modifiers,i=Math.sin(zoho.math.toRadians(45));return e/(2*o[0]*i)}_SquareOnCircleBoard(e){return e/.4}checkForAutoFit(e,t,a,o){let i=e.textBody;if(i.props.autoFit&&i.props.autoFit.type===ShapeConstants.AutoFitType.SHAPE&&e.type!==ShapeConstants.ShapeNodeType.GRAPHICFRAME&&!e.isTable){let e=this.createAutoFitShapeData(a);$.merge(t,e)}else this.triggerAutoFitData(o,a)}triggerAutoFitData(e,t){let a=this;clearTimeout(this.autoFitTimer),this.autoFitTimer=void 0,e?a._triggerAutoFitData(t):this.autoFitTimer=setTimeout(function(){this.autoFitTimer=void 0,a._triggerAutoFitData(t)},450)}convertAppdata(e){$.each(e,function(e,t){t.appData.action="Editor_autofit"})}_triggerAutoFitData(e){clearTimeout(this.autoFitTimer),this.autoFitTimer=void 0;let t=this.createAutoFitShapeData(e,void 0,void 0,void 0,!0),a=this;t&&t.length&&(a.convertAppdata(t),this.editor.config.container.trigger("text_modified",{textData:t}))}findScaleIndex(e){let t=0,a=this.mapping.length;for(let o=0;o<a;o++){let a=this.mapping[o];if(a.fontScale<=e.fontScale&&a.lineSpaceScale<=e.lineSpaceScale){t=o;break}}return t}getAutoFitValue(e){(new Date).getTime();let t,a=Shape.textBody.getTextContainerHeight(e).height,o=Shape.textBody.calculateTextSize(e).totalHeight,i=$.extend(!0,{},e.textBody.props.autoFit.normal);i=$.extend(!0,{lineSpaceScale:1,fontScale:1},i);let r=this.findScaleIndex(i);return o-a>=1&&(i.lineSpaceScale>.8||i.fontScale>.25)?t=this.getLowerScaleValue(r,e,a):a-o>=1&&(i.lineSpaceScale<1||i.fontScale<1)&&(t=this.getUpperScaleValue(r,e,a)),t}getUpperScaleValue(e,t,a){let o=$.extend(!0,{},t),i=this.mapping,r=e;for(let t=e;t>=0;t--){let e=i[t];o.textBody.props.autoFit.normal=e;let s=Shape.textBody.calculateTextSize(o),n=s.totalHeight;if(n>=a)break;r=t}return e!==r?$.extend(!0,{},i[r]):void 0}getLowerScaleValue(e,t,a){let o=$.extend(!0,{},t),i=this.mapping,r=e;for(let t=e;t<i.length;t++){let e=i[t];o.textBody.props.autoFit.normal=e;let s=Shape.textBody.calculateTextSize(o),n=s.totalHeight;if(r=t,n<=a)break}return e!==r?$.extend(!0,{},i[r]):void 0}getShapeFitValue(e,t){let a,o=$.extend(!0,{},e.props),i=Shape.textBody.getTextContainerHeight(e),r=i.height,s=e.props.transform;if(s&&s.dim&&s.pos){let n=s.dim,d=s.pos,p=e.textBody.props&&e.textBody.props.valign?e.textBody.props.valign:ShapeConstants.VerticalAlignType.TOP;t||(t=Shape.textBody.calculateTextSize(e).totalHeight);let l=t-r;if(Math.abs(l)>=1){a={},"undefined"!==s.fliph&&(a.fliph=s.fliph),"undefined"!==s.flipv&&(a.flipv=s.flipv),Shape.getAngle(s)&&(a.rotAngle=Shape.getAngle(s),a.rotate=a.rotAngle),a.width=n.width,a.left=d.left;let h=n.height-r,c=h/r,f=c*t;if(h>1){let s="_"+zoho.string.removeSpace($.Preset[e.props.geom.preset.type].name);if($.isFunction(this[s]))t=this[s](t,e);else if(t+f<=a.width){let e,a,s={props:o},n=3;do{a=t+f,s.props.transform.dim.height=a,r=(i=Shape.textBody.getTextContainerHeight(s)).height,h=s.props.transform.dim.height-r,e=Math.abs(h-f)>1,f=(c=h/r)*t,n--}while(e&&n>0);t=a}else t+=h;l=t-n.height}if(a.height=t,p===ShapeConstants.VerticalAlignType.TOP)a.top=d.top;else if(p===ShapeConstants.VerticalAlignType.MIDDLE){let e=l/2;a.top=d.top-e}else p===ShapeConstants.VerticalAlignType.BOTTOM&&(a.top=d.top-l)}}return a}getAutoFitData(e,t){let a=[],o=this,i=this.editor.getShapeContainer();return $.each(this.editor.getSelectedShapes(),function(r,s){let n=s.data,d=n.textBody;if(d&&d.props&&n.type!==ShapeConstants.ShapeNodeType.GRAPHICFRAME&&n.type!==ShapeConstants.ShapeNodeType.CONNECTOR&&!n.isTable){let r;if(t){let e=n.nvOProps.nvDProps.id;if(t.textBody.props.autoFit.type===ShapeConstants.AutoFitType.NORMAL)d&&d.props&&d.props.autoFit&&delete d.props.autoFit,t.textBody.props.autoFit.normal={fontScale:1,lineSpaceScale:1},$.extend(!0,n,t),r={lineSpaceScale:1,fontScale:1};else if(t.textBody.props.autoFit.type===ShapeConstants.AutoFitType.SHAPE){if(d&&d.props&&d.props.autoFit&&d.props.autoFit.type===ShapeConstants.AutoFitType.NORMAL){let t=d.props.autoFit.normal;1===t.lineSpaceScale&&1===t.fontScale||(d.props.autoFit.normal={lineSpaceScale:1,fontScale:1},Shape.textBody.props.autoFit.set(n,i,s.box),s.box.trigger("props_reset"));let o={action:"removeData",data:["textBody.props.autoFit"]};a.push({id:e,data:o}),delete d.props.autoFit}let o={action:"modify",data:t};a.push({id:e,data:o}),$.extend(!0,n,t)}else if(t.textBody.props.autoFit.type===ShapeConstants.AutoFitType.NONE){if(d&&d.props&&d.props.autoFit&&d.props.autoFit.type===ShapeConstants.AutoFitType.NORMAL){let t=d.props.autoFit.normal;1===t.lineSpaceScale&&1===t.fontScale||(d.props.autoFit.normal={lineSpaceScale:1,fontScale:1},Shape.textBody.props.autoFit.set(n,i,s.box),s.box.trigger("props_reset"));let o={action:"removeData",data:["textBody.props.autoFit"]};a.push({id:e,data:o}),delete d.props.autoFit}let o={action:"modify",data:t};a.push({id:e,data:o}),$.extend(!0,n,t)}}let p=o.createAutoFitShapeData(s,e,r);for(let e=0;e<p.length;e++)a.push(p[e].shapeData)}}),a}createAutoFitShapeData(e,t,a,o,i){let r=[],s=(e=e||this.editor.selector.getShapesOfZero()).data,n=s.textBody,d=s.nvOProps.nvProps&&s.nvOProps.nvProps.placeHolder&&(void 0===s.slideType||"SLIDE"!==s.slideType);if(i=i||d,n&&n.props&&s.type!==ShapeConstants.ShapeNodeType.GRAPHICFRAME&&s.type!==ShapeConstants.ShapeNodeType.CONNECTOR&&!s.isTable)if(n.props.autoFit&&n.props.autoFit.type===ShapeConstants.AutoFitType.NORMAL){let t,n=this.getAutoFitValue(s);if(n=n||a){if(i)t={autoFit:{type:ShapeConstants.AutoFitType.NORMAL,normal:n}};else{let a=this.editor.getShapeContainer(),i=e.box&&e.box.length?e.box:Shape.box(s,a);o?(t={autoFit:{type:ShapeConstants.AutoFitType.NONE}},s.textBody.props.autoFit={type:ShapeConstants.AutoFitType.NONE}):(s.textBody.props.autoFit.normal=$.extend(!0,{},n),t={autoFit:{type:ShapeConstants.AutoFitType.NORMAL,normal:n}}),Shape.textBody.props.autoFit.set(s,a,i),i.trigger("props_reset")}let a=s.nvOProps.nvDProps.id,d={action:"modify",data:{textBody:{props:t}}},p={shapeData:{id:a,data:d},appData:{action:"Editor",reorderOp:!1,immediateOp:!0,refreshUI:o}};r.push(p)}}else if(n.props.autoFit&&n.props.autoFit.type===ShapeConstants.AutoFitType.SHAPE){let a=this.getShapeFitValue(s);if(a){let o=this.editor.isTextEditable();o&&s.placeHolder&&(s.placeHolder.image&&(s.placeHolder.image.render=!1),s.placeHolder.media&&(s.placeHolder.media.render=!1),s.placeHolder.chart&&(s.placeHolder.chart.render=!1),s.placeHolder.table&&(s.placeHolder.table.render=!1));let i=this.editor.getShapeContainer(),n=e.box&&e.box.length?e.box:Shape.box(s,i),d=this.editor.transform.resize.refresh(s,n,a);if(d.length){$.each(d,function(e,t){let a={shapeData:t,appData:{action:"Editor",reorderOp:!1,immediateOp:!0}};r.push(a)});let t=this.editor.transform.dependency([e],!0);t&&t.length&&$.each(t,function(e,t){let a={shapeData:t,appData:{action:"Editor"}};r.push(a)})}t||this.editor.selector.updateBBox(s,n)}}return r}}class ZSTextComposer{constructor(e){this.editor=e.editor,this.insert="insert",this.update="update",this.del="delete",this.merge="merge"}init(e){let t=e.textBody.paras;this.editor.defaults.text.composer.position=this.getPosition(t)}getPosition(e){let t=[],a=0;return $.each(e,function(e,o){let i=[];a++,i.push(a),$.each(o.portions,function(e,t){let o=void 0!==t.type?1:t.t?t.t.length:0;a+=o,i.push(a)}),t.push(i)}),t}compose(e,t,a){let o=this.editor.defaults.text;o.composing=!0,!a&&o.IME.editing&&e.si<=o.from.index&&e.ei>=o.to.index&&o.IME.contentEditable.blur(),t=t||this.editor.selector.getShapesOfZero();let i=this;e.ut&&(e.ut=e.ut.toLowerCase());let r,s,n,d=[{insert:[],delete:[]},{update:[],insert:[],delete:[]},{update:[],merge:[],insert:[],delete:[]}],p=e.doNotExtendProps;if(p&&e.at==i.insert){let t=JSON.parse(e.value.value);r=t.t,delete t.t,"para"===e.ut?(r="\n",s=t.style):s=t.props}let l=i.getObject(e.si),h=!1,c=!1;if(e.at==i.insert){let a=p?"\n"===r:"\n"===e.value.value;if(!a&&l.ch<=0){let a,o=!0,i=t.data.textBody.paras[l.para];i&&(a=i.portions[l.portion-1]);let s=!1,n=!1;if(l.portion?(s=!0,l.portion--):-1==l.ch?(l.para--,l.portion=t.data.textBody.paras[l.para].portions.length-1,n=!0):o=!1,o){let e=t.data.textBody.paras[l.para].portions[l.portion];l.ch=void 0!==e.type?0:e.t?e.t.length:0}let d=t.data.textBody.paras[l.para],f=d.portions[l.portion],u=d.portions[l.portion+1],m=f.type;if(void 0!==m)if(u){let a=u.type,o=void 0!==a;if(o||-1!==e.value.value.indexOf("\u2028")||p)h=!0,s||0!==l.portion||0!==l.ch||(c=!0);else if(s||l.portion||0!=l.ch){l.portion+=1;t.data.textBody.paras[l.para].portions[l.portion];l.ch=0}else h=!0,c=!0}else h=!0,!s&&n||0!==l.portion||0!==l.ch||(c=!0);else!s&&0===l.ch&&0===l.portion&&(-1!==e.value.value.indexOf("\u2028")||p&&"\n"!==r)&&(c=!0)}n=l}else if(n=i.getObject(e.ei),e.ut&&"para"==e.ut||e.at!=i.update){if((!e.ut||"para"!=e.ut)&&e.at==i.del){let e=i.getLastIndex();if(-1==n.ch&&n.index==e){n.para--,n.portion=t.data.textBody.paras[n.para].portions.length-1;let e=t.data.textBody.paras[n.para].portions[n.portion];n.index-=1,n.ch=void 0!==e.type?-1:e.t?e.t.length-1:-1}if(-1==l.ch&&l.index==e){l.para--,l.portion=t.data.textBody.paras[l.para].portions.length-1;let e=t.data.textBody.paras[l.para].portions[n.portion];l.index-=1,l.ch=void 0!==e.type?-1:e.t?e.t.length-1:-1}}}else{if(-1==l.ch){let a=l.para-1,o=t.data.textBody.paras[a],r=o.portions;1!=r.length||r[0].t||i.createObject(i.update,"portion",[a,0],{props:e.value.value,deleteData:e.value.deleteData},d),l.ch=0}if(-1==n.ch){n.para--;let a=t.data.textBody.paras[n.para].portions;n.portion=a.length-1;let o=t.data.textBody.paras[n.para].portions[n.portion];1!=a.length||a[0].t||l.index==n.index||i.createObject(i.update,"portion",[n.para,0],{props:e.value.value,deleteData:e.value.deleteData},d),n.ch=void 0!==o.type?-1:o.t?o.t.length-1:-1}}if(e.at==i.del&&0==l.portion&&0==n.portion&&-1==l.ch&&-1==n.ch&&l.para==n.para){let e=t.data.textBody.paras[l.para].portions[0],a=e.type,o=e.t;(o&&o.length||void 0!==a)&&i.createObject(i.merge,"para",[l.para],{para:l.para-1},d),i.createObject(i.del,"para",[l.para],{},d),n.para=-1}let f=1e4*l.para+l.portion,u=1e4*n.para+n.portion,m=t.data.textBody.paras;if(e.at==i.insert&&l.para==m.length&&("\n"===e.value.value||p&&"\n"===r)){let e=l.para-1,t=m[e].portions.length,a={portion:t,replace:p};p&&(a.style=s),i.createObject(i.insert,"para",[e],a,d),n.para=-1}$.each(m,function(t,a){if(t>n.para)return!1;if(t>=l.para&&t<=n.para){if(e.ut&&"para"==e.ut&&e.at==i.update)return e.value.value.animationDatas?i.createObject(i.update,"para",[t],{animationDatas:e.value.value.animationDatas,deleteData:e.value.deleteData},d):i.createObject(i.update,"para",[t],{style:e.value.value,deleteData:e.value.deleteData},d),!0;if(e.at==i.del){if(t==l.para&&0==l.portion&&-1==l.ch&&t!=n.para)return i.createObject(i.del,"para",[t],{},d),!0;if(t>l.para&&t<n.para)return i.createObject(i.del,"para",[t],{},d),!0}let o=a.portions;o.length;$.each(o,function(a,o){let g=void 0===o.type&&o.t?o.t:"",S=g?g.length-1:0,x=1e4*t+a;if(x>u)return!1;if(e.at==i.insert&&x==f){let n;n=p&&r?r:e.value.value;let f=g.substring(0,l.ch),u=g.substring(l.ch);if("\n"==n||-1!==n.indexOf("\u2028")||p){let h,S=a,x=t,v=!1;if(-1!=l.ch||l.portion)if(0==l.ch){let o,l=n.substr(0,2);if("\u2028"===n||"@\u2028"===l||"$\u2028"===l||":\u2028"===l||p&&"\u2028"===r){if("@\u2028"===l){let t=n.split("\u2028");o={replace:e.value.replace,type:"FIELD",t:t[1],field:{type:ShapeConstants.FieldType.USER,user:{zuid:t[2]}}}}else if("$\u2028"===l){let t=n.split("\u2028");o={replace:e.value.replace,type:"FIELD",t:t[2]?t[2]:"",field:{type:ShapeConstants.FieldType.DATAFIELD,datafieldId:t[1]},emptyFieldText:e.emptyFieldText}}else if(":\u2028"===l){let t=n.split("\u2028");o={replace:e.value.replace,type:"FIELD",t:t[1],field:{type:ShapeConstants.FieldType.EMOJI,emoji:{unicode:t[1]}}}}else o={replace:p||e.value.replace,type:"LINEBREAK"},p&&(o.props=s);let r=c?a:a+1;i.createObject(i.insert,"portion",[t,r,a],o,d),v=!0}else if(p&&"\n"!==r){o={replace:!0,t:r,props:s};let e=c?a:a+1;i.createObject(i.insert,"portion",[t,e,a],o,d),v=!0}}else{i.createObject(i.del,"text",[t,a],{t:f,start:l.ch+1,end:g.length},d);let c=n.substr(0,2);if("\u2028"===n||"@\u2028"===c||"$\u2028"===c||":\u2028"===c||p&&"\u2028"===r){let o;if("@\u2028"===c){let t=n.split("\u2028");o={replace:e.value.replace,type:"FIELD",t:t[1],field:{type:ShapeConstants.FieldType.USER,user:{zuid:t[2]}}}}else if("$\u2028"===c){let t=n.split("\u2028");o={replace:e.value.replace,type:"FIELD",t:t[2]?t[2]:"",field:{type:ShapeConstants.FieldType.DATAFIELD,datafieldId:t[1]},emptyFieldText:e.emptyFieldText}}else if(":\u2028"===c){let t=n.split("\u2028");o={replace:e.value.replace,type:"FIELD",t:t[1],field:{type:ShapeConstants.FieldType.EMOJI,emoji:{unicode:t[1]}}}}else o={replace:p||e.value.replace,type:"LINEBREAK"},p&&(o.props=s);v=!0,i.createObject(i.insert,"portion",[t,a+1,a],o,d)}else if(p&&"\n"!==r){let e={replace:!0,t:r,props:s};i.createObject(i.insert,"portion",[t,a+1,a],e,d),v=!0}u.length&&(S=a+1,"\n"===n||p&&"\n"===r?(h=$.extend(!0,{},o)).t=u:i.createObject(i.insert,"portion",[t,a+1,a],{replace:e.value.replace,t:u},d))}else S=t?m[x=t-1].portions.length:0;if(!v){let e={portion:S,newPortion:h,replace:p};p&&(e.style=s),i.createObject(i.insert,"para",[x],e,d)}}else{let o="";if(o=l.ch==S+1?g+e.value.value:f+e.value.value+u,h){let o=c?a:a+1;i.createObject(i.insert,"portion",[t,o,a],{replace:e.value.replace,t:e.value.value},d)}else i.createObject(i.insert,"text",[t,a],{t:o,addedText:e.value.value,start:l.ch},d)}return!1}let v=x>f&&x<u;if(v||(x==f&&x==u?v=l.ch<=0&&n.ch==S:(v=x==f?l.ch<=0:v,v=x==u?n.ch==S:v)),v)e.at==i.update?i.createObject(i.update,"portion",[t,a],{props:e.value.value,deleteData:e.value.deleteData},d):e.at==i.del&&i.createObject(i.del,"portion",[t,a],{},d);else if(g){let o=g.substring(0,l.ch),r=n.ch+1,s=g.substring(r);x==f&&x==u&&0!=l.ch&&n.ch!=S?e.at==i.update?(i.createObject(i.del,"text",[t,a],{t:o,start:l.ch+1,end:g.length},d),i.createObject(i.insert,"portion",[t,a+1,a],{replace:e.value.replace,props:e.value.value,t:g.substring(l.ch,r)},d),i.createObject(i.insert,"portion",[t,a+1,a],{t:s},d)):e.at==i.del&&i.createObject(i.del,"text",[t,a],{t:o+s,start:l.ch+1,end:r},d):x==f&&0!=l.ch?(i.createObject(i.del,"text",[t,a],{t:o,start:l.ch+1,end:g.length},d),e.at==i.update&&i.createObject(i.insert,"portion",[t,a+1,a],{replace:e.value.replace,props:e.value.value,t:g.substring(l.ch)},d)):x==u&&(i.createObject(i.del,"text",[t,a],{t:s,start:0,end:r},d),e.at==i.update&&i.createObject(i.insert,"portion",[t,a,a],{replace:e.value.replace,props:e.value.value,t:g.substring(0,r)},d))}if(x==u&&e.at==i.del&&(l.para!=n.para||l.para==n.para&&-1==l.ch)){let e=l.para;0==l.portion&&-1==l.ch&&(e=l.para-1),i.createObject(i.merge,"para",[t],{para:e},d),i.createObject(i.del,"para",[t],{},d)}})}}),a&&i.triggerCollabObject(e,d,t),i.operate(d,t,e),o.composing=!1}triggerCollabObject(e,t,a){let o=a.data,i=this,r=t[1],s=t[2],n=[],d=[];if(s.insert.length){let t=s.insert[0].num.para,a=$.extend(!0,{},o.textBody.paras[t]),i=a.animationDatas;if(i){let t=i.length,a=[];for(let e=0;e<t;e++)a[a.length]=i[e].id,n[n.length]=Math.uuid();e.value.prevParaIds=a}}let p=s.delete;if(p.length&&$.each(p,function(e,t){let a=o.textBody.paras[t.num.para],r=a.animationDatas;if(r)for(let e=0;e<r.length;e++)n[n.length]=r[e].id;let s=a.portions;$.each(s,function(e,a){let r=a.props&&a.props.commentIds?a.props.commentIds:[],s={type:"para",paraIndex:t.num.para},n=i._checkForComment(o,r,s);for(let e=0;e<n.length;e++)-1===$.inArray(n[e],d)&&d.push(n[e])})}),s.update.length){let t=s.update[0];if(t.actionData&&t.actionData.style&&void 0!==t.actionData.style.level){let a=$.extend(!0,{},o.textBody.paras[t.num.para]),i=a.animationDatas;if(i)for(let e=0;e<i.length;e++)n[n.length]=i[e].id;e.value.paraLevel=t.actionData.style.level}}let l=r.delete;l.length&&$.each(l,function(e,t){let a=o.textBody.paras[t.num.para].portions[t.num.portion],r=a.props&&a.props.commentIds?a.props.commentIds:[],s={type:"portion",paraIndex:t.num.para,portionIndex:t.num.portion},n=i._checkForComment(o,r,s);for(let e=0;e<n.length;e++)-1===$.inArray(n[e],d)&&d.push(n[e]);r.length&&(a.props.commentIds=[])}),n.length&&(e.value||(e.value={}),e.value.ids=n),d.length&&(e.value||(e.value={}),e.value.commentIds=d)}_checkForComment(e,t,a){let o=[];for(let i=0;i<t.length;i++){let r=t[i],s=!0,n=e.textBody.paras,d=a.type,p=a.paraIndex,l=void 0!==a.portionIndex?a.portionIndex:-1;for(let e=0;e<n.length;e++){if("para"===d&&e===p)continue;let t=n[e].portions?n[e].portions:[];for(let e=0;e<t.length;e++){if("portion"===d&&e===l)continue;let a=t[e].props&&t[e].props.commentIds?t[e].props.commentIds:[];if(a.length&&-1!==$.inArray(r,a)){s=!1;break}}if(!s)break}s&&o.push(r)}return o}createObject(e,t,a,o,i){let r={num:{},actionData:{}};r.num.para=a[0],r.num.portion=void 0!==a[1]?a[1]:-1,r.num.portionData=void 0!==a[2]?a[2]:-1,r.actionData=o;let s=0;return s="portion"==t?1:"para"==t?2:s,e==this.update?i[s][this.update].push(r):i[s][e].splice(0,0,r),r}operate(e,t,a){let o=this.editor.getShapeContainer(),i=t.data,r=this;i.textBody.id=Shape.textBody.textContainer;let s=[i];Shape.textBody.element(i,o,t.box),$.each(s,function(i,s){s.editorOperate=!0,$.each(e,function(e,i){$.each(i,function(i,n){$.each(n,function(n,d){let p=d.actionData,l=void 0!==p.para?p.para:d.num.para;s.textBody.paras.num=l,Shape.textBody.paras.element(s,o,t.box);let h;if(2==e&&i==r.insert&&p.replace){let e=p.style.level?p.style.level:1;h=r.getListStyle(s.textBody.listStyles,e)}else h=r.getListStyle(s.textBody.listStyles,s.textBody.paras[l].style.level);if(2==e)if(i==r.del)Shape.textBody.paras.remove(s,o,t.box),r.sync(s,s.textBody.paras,l),Shape.textBody.paras.dependency(s,o,t.box);else if(i==r.insert){let e,i=a.value?a.value.ids:void 0,n=s.textBody.paras[l],d=p.portion;if(p.replace?((e={unmerged:{}}).unmerged.style=$.extend(!0,{},p.style),e.style=$.extend(!0,{},h,p.style)):(e=$.extend(!0,{},n)).style=$.extend(!0,{},h,n.unmerged.style),e.portions=[],i&&!p.replace){let t=e.animationDatas;if(t)for(let a=0;a<t.length;a++){let o=t[a],r=i[a];r?o.id=r:e.animationDatas.splice(a,1)}}else delete e.animationDatas;delete e.animData;let c=n.portions.length,f=c;for(;c>d;){let a=n.portions[d];a=$.extend(!0,{},a),p.newPortion||f!==c||r.deletePortionProps(a,!0),r.sync(s,e.portions,e.portions.length,a),n.portions.num=d,Shape.textBody.paras.portions.element(s,o,t.box),1==c?(n.portions[0].t=void 0,n.portions[0].type=void 0,n.portions[0].field=void 0,s.placeHolder&&(s.placeHolder.doNotUpdate=!0),n.portions[0].props=$.extend(!0,{},e.portions[0].props),Shape.textBody.paras.portions.t.set(s,o,t.box),Shape.textBody.paras.portions.t.dependency(s,o,t.box),Shape.textBody.paras.portions.props.set(s,o,t.box)):(Shape.textBody.paras.portions.remove(s,o,t.box),r.sync(s,n.portions,d),Shape.textBody.paras.portions.dependency(s,o,t.box)),c--}if(p.newPortion&&(e.portions.splice(0,0,p.newPortion),r.deletePortionProps(e.portions[0],!0)),!e.portions.length){let t=$.extend(!0,{},n.portions[n.portions.length-1]);t.t=void 0,t.type=void 0,t.field=void 0,e.portions.push(t),r.deletePortionProps(t,!0)}let u=l+1;r.sync(s,s.textBody.paras,u,e),s.textBody.paras.num=u,Shape.textBody.paras.set(s,o,t.box),Shape.textBody.paras.dependency(s,o,t.box)}else if(i==r.merge){let e=s.textBody.paras[d.num.para],a=s.textBody.paras[l],i=a.portions.length;1!=a.portions.length||a.portions[0].t||void 0!==a.portions[0].type||(a.portions=[],i=0),$.each(e.portions,function(n,d){d=$.extend(!0,{},d),a.portions.num=i+n;let p=a.portions;e.style.level!=a.style.level&&(d.props=$.extend(!0,{},h.defPrProps,d.unmerged.props));let c=d.t;if(!(c&&c.length||0==a.portions.num||void 0!==d.type))return!0;r.sync(s,p,p.length,d),a.portions.num?(Shape.textBody.paras.portions.set(s,o,t.box),Shape.textBody.paras.portions.dependency(s,o,t.box)):(s.textBody.paras[l].portions.num=0,Shape.textBody.paras.portions.element(s,o,t.box),Shape.textBody.paras.portions.t.set(s,o,t.box),Shape.textBody.paras.portions.t.dependency(s,o,t.box),Shape.textBody.paras.portions.props.set(s,o,t.box),Shape.textBody.paras.portions.props.dependency(s,o,t.box))})}else{let e=s.textBody.paras[d.num.para];if(p.deleteData){let t=e.style,a=e.unmerged.style;r.updateParaStyle(t,a,h,p.deleteData,p)}if(p.animationDatas)e.animationDatas=p.animationDatas;else if(p.style){if(p.style.level){let t,a=r.getListStyle(s.textBody.listStyles,p.style.level),o=s.textBody.paras,i=d.num.para;for(let e=i;e>=0;e--)if(p.style.level===o[e].style.level){t=o[e].style;break}if(!t)for(let e=i+1;e<o.length;e++)if(p.style.level===o[e].style.level){t=o[e].style;break}e.style=t?$.extend(!0,{},t,e.unmerged.style):$.extend(!0,{},a,e.unmerged.style),e.unmerged.style&&e.unmerged.style.listStyle&&delete e.unmerged.style.listStyle,e.style.listStyle&&(e.style.listStyle=$.extend(!0,{},t?t.listStyle:a.listStyle)),$.each(e.portions,function(e,t){t.props=$.extend(!0,{},a.defPrProps,t.unmerged.props)})}if($.extend(!0,e.style,p.style),$.extend(!0,e.unmerged.style,p.style),e.style.listStyle&&e.style.listStyle.bullet)if(e.style.listStyle.bullet.type===ShapeConstants.BulletType.NONE)e.style.listStyle.bullet.status=Shape.textBody.paras.style.listStyle.bullet.disabled;else{let t=1==s.textBody.paras.length&&1==s.textBody.paras[0].portions.length&&!s.textBody.paras[0].portions[0].t&&!s.textBody.paras[0].portions[0].type;e.style.listStyle.bullet.status=t?Shape.textBody.paras.style.listStyle.bullet.semiEnabled:Shape.textBody.paras.style.listStyle.bullet.enabled}Shape.textBody.paras.style.set(s,o,t.box),Shape.textBody.paras.style.dependency(s,o,t.box)}}else{let a=d.num.portion,n=s.textBody.paras[l];n.portions.num=a;let p,u=n.portions[a],m=d.actionData;if(m.props&&(p=$.extend(!0,{},m.props)),i==r.update)m.deleteData&&$.each(m.deleteData,function(e,t){if("click"===t&&(delete u.props[t],t="fill"),"object"==typeof h.defPrProps[t])u.props[t]=$.extend(!0,{},h.defPrProps[t]),u.unmerged.props[t]=$.extend(!0,{},h.defPrProps[t]);else{let a="commentIds"==e?[]:h.defPrProps[t],o="commentIds"==e?"commentIds":t;u.props[o]=a,u.unmerged.props[o]=a}}),$.extend(!0,u.props,p),$.extend(!0,u.unmerged.props,p),Shape.textBody.paras.portions.element(s,o,t.box),Shape.textBody.paras.portions.props.set(s,o,t.box),Shape.textBody.paras.portions.props.dependency(s,o,t.box);else if(i==r.insert)if(e){if(m.replace){n.style.level;(u={unmerged:{}}).unmerged.props=p;var c=s.textBody.cellTextStyle,f={};c&&(c.size&&(f.size=c.size),c.bold&&(f.bold=!0,f.fontweight=ShapeConstants.FontWeight.BOLD)),u.props=$.extend(!0,{},s.textBody.paras[l].style.defPrProps,f),$.extend(!0,u.props,p)}else u=$.extend(!0,{},s.textBody.paras[l].portions[d.num.portionData]),$.extend(!0,u.props,p),$.extend(!0,u.unmerged.props,p);if(u.t=m.t,u.type=m.type,void 0!==u.type?(u.field=m.field,r.deletePortionProps(u),r.addPortionProps(u,m)):delete u.field,1==s.textBody.paras[l].portions.length){let e=s.textBody.paras[l].portions[0];e.t&&""!==e.t||void 0!==e.type||(Shape.textBody.paras.portions.element(s,o,t.box),Shape.textBody.paras.portions.remove(s,o,t.box),r.sync(s,s.textBody.paras[l].portions,a))}r.sync(s,s.textBody.paras[l].portions,a,u),Shape.textBody.paras.portions.set(s,o,t.box),Shape.textBody.paras.portions.dependency(s,o,t.box)}else{Shape.textBody.paras.portions.element(s,o,t.box);s.textBody.paras[l].portions.element;if(u.t&&""!==u.t)u.t=m.t,Shape.textBody.paras.portions.t.addText(s,o,t.box,m.addedText,m.start),Shape.textBody.paras.portions.t.dependency(s,o,t.box);else{u.t=m.t;const e=!!u.type&&u.type===ShapeConstants.PortionType.FIELD;e&&(u.type=void 0),e&&(u.field=void 0),Shape.textBody.paras.portions.t.set(s,o,t.box),Shape.textBody.paras.portions.t.dependency(s,o,t.box)}}else if(i==r.del)if(Shape.textBody.paras.portions.element(s,o,t.box),e)1==s.textBody.paras[l].portions.length?(u.t=void 0,u.type=void 0,u.field=void 0,s.placeHolder&&1==s.textBody.paras.length&&(s.placeHolder.doNotUpdate=!0),Shape.textBody.paras.portions.t.set(s,o,t.box),Shape.textBody.paras.portions.t.dependency(s,o,t.box)):(Shape.textBody.paras.portions.remove(s,o,t.box),r.sync(s,s.textBody.paras[l].portions,a),Shape.textBody.paras.portions.dependency(s,o,t.box));else{let e=s.textBody.paras[l].portions.element;if(u.t=m.t,u.t&&""!==u.t)Shape.textBody.paras.portions.t.removeText(s,o,t.box,u,e,m.start,m.end),Shape.textBody.paras.portions.t.dependency(s,o,t.box);else{const e=!!u.type&&u.type===ShapeConstants.PortionType.FIELD;e&&(u.type=void 0),e&&(u.field=void 0),Shape.textBody.paras.portions.t.set(s,o,t.box),Shape.textBody.paras.portions.t.dependency(s,o,t.box)}}}})})}),s.line_modified&&(o.trigger("line_modified",{box:t.box,data:s,container:o}),s.line_modified=!1)}),t.data=i,r.init(t.data),Shape.testing}deletePortionProps(e,t){const a=[];e.t&&e.t.length||(a.push("baseline"),a.push("click")),t&&a.push("commentIds"),$.each(a,function(t,a){e.unmerged.props[a]&&(delete e.unmerged.props[a],delete e.props[a])})}addPortionProps(e,t){if(e&&"FIELD"===e.type&&e.field.type===ShapeConstants.FieldType.DATAFIELD&&t&&t.emptyFieldText){let t={type:"SOLID",solid:{color:{type:"CUSTOM",rgb:[0,128,0]}}};e.field.props={fill:$.extend(!0,{},t)}}}updateParaStyle(e,t,a,o,i){let r=this;$.each(o,function(o,s){if("level"==s&&(i.style.level=1),"object"==typeof s)t[o]&&a&&r.updateParaStyle(e[o],t[o],a[o],s,i);else if(a){let i="object"==typeof a[o]?$.extend(!0,{},a[o]):a[o];e[o]=i,t[o]=i}else e[o]=void 0,t[o]=void 0})}sync(e,t,a,o){o?t.splice(a,0,o):t.splice(a,1)}getIndex(e,t){let a=this.editor.defaults.text.composer;return(t?t[e.para]:a.position[e.para])[e.portion]+e.ch}getLastIndex(e){return(e=e||this.editor.defaults.text.composer.position)[e.length-1][e[e.length-1].length-1]}getObject(e,t){let a={para:-1,portion:-1,ch:-1},o=this.editor.defaults.text.composer;return e?(t=t||o.position,$.each(t,function(t,o){let i=o[0]-1,r=o[o.length-1];if(e>=i&&e<=r)return e==r?(a.para=t+1,a.portion=0):(a.para=t,$.each(o,function(t,i){let r=o[t+1];if(e>=i&&e<=r)return e==r?(a.portion=t+1,a.ch=0):(a.portion=t,a.ch=e-i),!1})),!1}),a.index=e,a):(a.para=0,a.portion=0,a.index=0,a)}getListStyle(e,t){let a=void 0;return e?($.each(e,function(e,o){if(o.level==t)return a=o,!1}),$.extend(!0,{},a)):{}}}class ZSTextEditor{constructor(e){this.editor=e.editor,this.textEditingDivId="textEditingDiv",this.mainTextEdit=e,this.textcursor=new ZSTextCursor(e),this.textnavigation=new ZSTextNavigation(e),this.textselect=new ZSTextSelect(e),this.textmodulateData=new ZSTextModulateData(e),this.textactions=new ZSTextActions(e),this.IMEHandler=new ZSIMEHandler(e),this.charsForCapitalize=[".","?","!"]}listening(){return this.editor.defaults.text.listening}setListener(e){this.editor.defaults.text.listening=e}removeListener(){this.editor.defaults.text.listening=void 0}clear(e,t,a){if(!this.editor.shapeEvent.textEvent.editing(t))return;t=t||this.editor,this.mainTextEdit.textAutofit&&this.mainTextEdit.textAutofit.autoFitTimer&&this.mainTextEdit.textAutofit.triggerAutoFitData(!0);let o=this,i=t.defaults.text;if(!this.listening()||!t.config.listenText.cancel()){if(this.removeListener(),t.config.container.trigger("text_clear"),i.IME.editing&&t.config.focusDrawContainer(),i.from.element.word&&(!e||!e.remove)&&o._isEditable()){let e=i.from.num.index,t=o.textselect.getTargetElementFromIndex(e,void 0,void 0,void 0,void 0,this.editor);if(t){let i=o.textselect.getCurrentStartEnd(t,void 0,void 0);e===i.word.end&&0!==i.spaceLength&&e+1<this.mainTextEdit.textComposer.getLastIndex()&&(t=o.textselect.getTargetElementFromIndex(e+1,void 0,void 0,void 0,void 0,this.editor)),o.textnavigation.triggerCursorTransit(void 0,void 0,{wordObj:t},void 0,void 0,a)}}i.editor.property=void 0,i.editor.unCapitalize=void 0,o.withdrawEditing(),o.textselect.clear(),o.clearTextObject(a),o.clearTextEditingDiv()}}clearTextEditingDiv(){let e=this.editor.defaults.text;e.editor.textEditingDiv&&e.editor.textEditingDiv.remove()}clearCopiedContent(e){(this.editor.isSafari||e)&&this.editor.defaults.text.IME.contentEditable.text("")}setCopiedContent(e){if(this.editor.isSafari){let e=this.selectedText(),t=this.editor.defaults.text.IME.contentEditable;e=e||"",t.text(e),VectorUtil.selectAllText(t)}}_getFromTo(){let e,t=this.editor.defaults.text;return e=t.from.num.index<=t.to.num.index?{from:t.from,to:t.to}:{from:t.to,to:t.from}}getSelectedPortionProperty(){let e=[],t=this,a=t._getFromTo(),o=a.from,i=a.to;if(this.editor.isTextEditable()){o.num.index!==i.num.index&&-1!==o.num.ch&&(o=t.textselect.getTargetElementFromIndex(o.num.index+1));let a=this.editor.selector.getShapesOfZero().data,r=o.num.para,s=o.num.portion;for(;r<=i.num.para;r++){s=r==o.num.para?s:0;let t=r==i.num.para?i.num.portion:a.textBody.paras[r].portions.length-1;for(;s<=t;s++){const t=$.extend(!0,{},a.textBody.paras[r].portions[s].props);t.fill&&t.fill.type===ShapeConstants.FillType.GRP&&a.textBody.props.textStyle&&(t.textStyle=a.textBody.props.textStyle),e.push(t)}}}return e}clearTextObject(e){let t=this.editor,a=t.defaults.text;a.bx=void 0,a.current=void 0,a.offset=void 0,a.clonebox=void 0,a.flipFromTo=void 0,a.isLineEnd=void 0,a.textContainer=void 0,a.composer.position=[],a.from={num:{para:void 0,portion:void 0,ch:void 0,index:void 0,pos:void 0},element:{para:void 0,line:void 0,word:void 0,subword:void 0,charCount:void 0},pos:{para:void 0,line:void 0,word:void 0,subword:void 0},cursorPosLeft:void 0,height:void 0},a.to={num:{para:void 0,portion:void 0,ch:void 0,index:void 0,pos:void 0},element:{para:void 0,line:void 0,word:void 0,subword:void 0,charCount:void 0},pos:{para:void 0,line:void 0,word:void 0,subword:void 0},cursorPosLeft:void 0,height:void 0};let o=e&&(e.diff_text||e.diff_shape)?["wait"]:void 0;t.container.trigger("text_unselected",o)}init(e){let t=this.editor.defaults.text,a=this.editor.selector.getShapesOfZero(),o=this.editor.getShapeContainer().find("#"+e);t.textContainer=o.find("#"+Shape.textBody.textContainer);let i=this.editor.config.container;t.shapeContainer=i,t.shapeContainerOffset=i.offset(),t.boxOffset=this.editor.config.get.boxOffset(o),t.containerOffset={left:a.data.props.transform.pos.left+t.textContainer.data("translate_x"),top:a.data.props.transform.pos.top+t.textContainer.data("translate_y")}}checkIfFirstPortionAndGetProps(e,t,a){let o=this.mainTextEdit.textComposer.getObject(e+1,a);if(0===o.ch)return this.getPortionProps(o,t)}getPortionProps(e,t){let a=t.textBody,o=$.extend(!0,{},a.paras[e.para].portions[e.portion]),i=o.unmerged?o.unmerged.props:o.props;return i&&i.chk&&delete i.chk.state,i}withdrawEditing(e){let t=(e=e||this.editor).getSelectedShapes()[0];if(t&&t.data.type!==ShapeConstants.ShapeNodeType.GRAPHICFRAME){let a=t.data;if(this.bulletcheck(),(a.placeHolder||a.nvOProps.nvODProps&&a.nvOProps.nvODProps.textbox)&&t.data.textBody){let o=e.getShapeContainer();if(1!=a.textBody.paras.length||1!=a.textBody.paras[0].portions.length||a.textBody.paras[0].portions[0].t||a.textBody.paras[0].portions[0].type)t.data.placeHolder&&(t.data.placeHolder.image&&(t.data.placeHolder.image.render=!1),t.data.placeHolder.media&&(t.data.placeHolder.media.render=!1),t.data.placeHolder.table&&(t.data.placeHolder.table.render=!1),t.data.placeHolder.chart&&(t.data.placeHolder.chart.render=!1),t.data.placeHolder.twitter&&(t.data.placeHolder.twitter.render=!1),t.data.placeHolder.video&&(t.data.placeHolder.video.render=!1));else{let e=t.data.placeHolder?t.data.placeHolder.text:void 0,a={text:e,paraNum:0,portionNum:0};t.data.placeHolder&&(t.data.placeHolder.image&&(t.data.placeHolder.image.render=!0),t.data.placeHolder.media&&(t.data.placeHolder.media.render=!0),t.data.placeHolder.table&&(t.data.placeHolder.table.render=!0),t.data.placeHolder.chart&&(t.data.placeHolder.chart.render=!0),t.data.placeHolder.twitter&&(t.data.placeHolder.twitter.render=!0),t.data.placeHolder.video&&(t.data.placeHolder.video.render=!0)),this.setText(t.data,o,a,t.box)}void 0!==t.data.props&&void 0!==t.data.props.strokes?Shape.props.strokes.set(t.data,o,t.box):Shape.props.stroke.set(t.data,o,t.box)}$(document.activeElement).closest(e.config.drawcontainer).length&&e.focusShape()}}border(e,t,a){Shape.props.stroke.set(e,t,a)}setText(e,t,a,o){let i=$.extend(!0,{},e);i.textBody.paras.num=a.paraNum,i.textBody.paras[a.paraNum].portions.num=a.portionNum,i.textBody.paras[a.paraNum].portions[a.portionNum].t=a.text,t=t?$(t):this.editor.getShapeContainer();let r=[Shape.textBody.textContainer];a.text=a.text?a.text:"",e.nvOProps.nvProps&&e.nvOProps.nvProps.placeHolder&&!a.text.length&&o.trigger("placeholder_text_removed",{shape:e}),$.each(r,function(e,r){i.textBody.id=r,Shape.textBody.paras.element(i,t,o),Shape.textBody.paras.portions.element(i,t,o),Shape.textBody.paras.portions.t.set(i,t,o,void 0,a.text),!a.doNotSetBullet&&i.textBody.paras[a.paraNum].style.listStyle&&i.textBody.paras[a.paraNum].style.listStyle.bullet&&(i.textBody.paras[0].style.listStyle.bullet.status=Shape.textBody.paras.style.listStyle.bullet.enabled,Shape.textBody.paras.style.listStyle.bullet.set(i,t,o))}),Shape.create.placeHolder&&(a.text?Shape.create.placeHolder.icon.set(e,t,o):Shape.create.placeHolder.icon.remove(e,t,o))}getOffset(e,t,a,o){let i={},r=0,s=0;i={left:r,top:s};let n=this.editor,d=Shape.textBody.paras,p=e[0].getAttribute("id"),l=o||n.defaults.text.textContainer,h=l.data(Shape.textBody.editorData),c=Shape.textBody.props.innerBox(l),f=p===Shape.textBody.subwordId?e:[],u=p===Shape.textBody.wordId||"dummyword"===p?e:e.closest("#"+Shape.textBody.wordId),m=p===Shape.textBody.lineId?e:u.closest("#"+Shape.textBody.lineId),g=p===Shape.textBody.paraId?e:m.closest("#"+Shape.textBody.paraId);if(s=l.data("valignTop"),s+=c.data("translate_y"),g.length){let e=g.data(),t=e[Shape.textBody.editorData],a=d.getParaIndex(g),o=Shape.textBody.sumOfArray(h,a-1);if(s+=o.totalHeight,s+=h[a].before?h[a].before:0,r=(e.margin?e.margin:0)+c.data("translate_x"),m.length){let a=d.portions.t.line.getLineIndex(m);if(r+=Math.round(t[a][Shape.textBody.textPathId].left),r+=0===a?e.bulletSplitter+e.bulletWidth:0,o=Shape.textBody.sumOfArray(t,a-1),s+=o.totalHeight,u.length){let e=d.portions.t.words.getWordIndex(u);if(r+=Shape.textBody.sumOfArray(m.data(Shape.textBody.editorData),e-1).totalWidth,f.length){let e=d.portions.t.subword.getSubWordIndex(f,u);r+=Shape.textBody.sumOfArray(u.data(Shape.textBody.editorData),e-1).totalWidth}}}}return i={left:r,top:s}}addBackGroundDiv(e,t,a){let o=this.editor.defaults.text.editor,i=this,r=a.find("#"+i.textEditingDivId);r.length||(r=Shape.creator.createRectangle(a,0,0,0,0,0),(r=$(r)).attr({id:i.textEditingDivId}),o.textEditingDiv=r,r.insertAfter(a.find("#"+Shape.shapeId)));let s=e.props.transform,n={position:"absolute",width:s.dim.width,height:s.dim.height,left:0,top:0};Shape.creator.setRectangle(r[0],n.left,n.top,n.width,n.height)}bulletchangeStatus(e,t,a){let o=this;if(e.num.index===t.num.index&&-1===e.num.ch){let t=e.num.para;o._bulletchangeStatus(t,a)}}_bulletchangeStatus(e,t){let a=this.editor.selector.getShapesOfZero(),o=a.data,i=this.editor.defaults.text.composer.position[e];if(!i)return;let r=o.textBody.paras[e].style.listStyle;if(r&&r.bullet&&r.bullet.type!==ShapeConstants.BulletType.NONE){let s=i[0]===i[i.length-1],n=s?t?"disabled":"semi-enabled":"enabled";r.bullet.status=n,this.bulletsetStatus(o,a.box,e)}}bulletsetStatus(e,t,a){let o=this.editor.defaults.text;e.textBody.id=Shape.textBody.textContainer,e.textBody.paras.num=a,e.textBody.paras.element=Shape.textBody.paras.getPara(t,a,e),Shape.textBody.paras.style.listStyle.bullet.status.set(e,o.shapeContainer,t)}bulletcheck(e){e||(e=this.editor.defaults.text);let t=e.from.num,a=(e.to.num,this.editor.selector.getShapesOfZero());if(a){let e=a.data,o=t.para?e.textBody.paras[t.para]:void 0;if(o){let i=o.portions,r=i[0];1!=i.length||r.t||r.type&&"linebreak"==r.type.toLowerCase()||r.type&&"field"==r.type.toLowerCase()||this.textselect.isSelected()||e.textBody.paras[t.para].style.listStyle&&e.textBody.paras[t.para].style.listStyle.bullet.type!=ShapeConstants.BulletType.NONE&&(e.textBody.paras[t.para].style.listStyle.bullet.status="disabled",this.bulletsetStatus(e,a.box,t.para))}}}_isEditable(e){let t=!0;return(e=e||this.editor.selector.getShapesOfZero())&&!e.data.doNotEdit||(t=!1),t}_isSelectPara(e){return!(!(e=e||this.editor.selector.getShapesOfZero())||!e.data.paraSelect)}selectedText(e,t,a,o,i,r){let s;if("range"===t){s={};let t=this.mainTextEdit.textComposer;s.from={num:t.getObject(e.from,o)},s.to={num:t.getObject(e.to,o)}}else if("object"===t)s=e;else if(!e){if(!this.textselect.isSelected())return;s=this._getFromTo()}let n=s.from,d=s.to;i=i||this.editor.selector.getShapesOfZero().data;let p=n.num.para,l=n.num.portion,h="";for(;p<=d.num.para;p++){l=p==n.num.para?l:0;let e=p==d.num.para?d.num.portion:i.textBody.paras[p].portions.length-1;for(;l<=e;l++){let e=p==n.num.para&&l==n.num.portion,t=p==d.num.para&&l==d.num.portion,a=i.textBody.paras[p].portions[l],o="";const s=!!a&&a.type===ShapeConstants.PortionType.FIELD,c=r&&s;if(a&&(o=void 0!==a.type?c?$.shapeUtil.getAssociatedDataStrForTextField(a):" ":a.t?a.t:""),e&&t)return o.substring(n.num.ch+1,d.num.ch+1);e?s||(o=o.substring(n.num.ch+1)):t&&(s||(o=o.substring(0,d.num.ch+1))),h+=o}p!=d.num.para&&(h+=a?"\n":" ")}return h}mouseup(){}focusEditor(){this.editor.IMESupport?this.IMEHandler.focusEditor():this.editor.focusShape()}editorOnBlur(){this.editor.defaults.text.editor.cursor.cursorAppearence[0]="hidden"}editorOnFocus(){let e=this.editor.defaults.text;e.editor.cursor.cursorAppearence[0]=e.IME.editing?"hidden":"visible"}edit(e,t){let a=e.box,o=e.data,i=this,r=this.mainTextEdit.textComposer;if(!i._isEditable(e))return;let s=this.editor.getShapeContainer();if(!o.textBody){let e=[];e.push({});let t=[];t.push({portions:e});let a={paras:t};o.textBody=a}if(a.data("isTextBodyRendered")){let t=o.textBody&&o.textBody.paras&&1==o.textBody.paras.length&&1==o.textBody.paras[0].portions.length&&!o.textBody.paras[0].portions[0].t&&!e.data.textBody.paras[0].portions[0].type;if(t&&o.nvOProps.nvProps&&o.nvOProps.nvProps.placeHolder){let e={paraNum:0,portionNum:0};i.setText(o,s,e,a)}}else o.isTextEditing=!0,Shape.textBody.set(o,s,a),o.isTextEditing=!1;r.init(o),i.textselect.init(a),i.bulletcheck();let n,d;"object"==typeof t?(n=t.fromIndex,d=t.toIndex):t&&(n=0,d=r.getLastIndex()),void 0!==n&&void 0!==d||(n=d=r.getLastIndex()-1),i.textnavigation.move(n,d,void 0,void 0,void 0,void 0,void 0,void 0,!0),i.focusEditor(),Shape.create.placeHolder&&Shape.create.placeHolder.icon.remove(o,s,a),a.trigger("text_editing",{data:o,text_Editable:!0})}_changeProperty(e,t,a,o,i,r){return r=r||this.mainTextEdit.textComposer.update,this.textmodulateData.editorCompose(r,t,a,e,o,i)}changeProperty(e,t){let a=this.checkPropertyAppliedInSpace(e),o=this.mainTextEdit.textComposer;if(t)return a;a&&(this.editor.config.container.trigger("property_before_change"),this.textmodulateData.editorCompose(o.update,a.si,a.ei,e,void 0,void 0,!0),this.textnavigation.move(a.fromIndex,a.toIndex,void 0,void 0,void 0,void 0,void 0,void 0,!0))}checkPropertyAppliedInSpace(e){let t=this.editor.defaults.text.editor,a=this.editor.defaults.text.composer,o=this._getFromTo(),i=o.from,r=o.to,s=i.num.index,n=r.num.index;if(s==n){let a=this._getNextCharData(i),o=!0;if(a.from&&a.to&&(-1!==i.num.ch||-1!==r.num.ch)){o=!1;let e=this.selectedText({from:a.from,to:a.to},"object");if(" "!=e&&e.length){let t=a.to,r=this.textselect.getTargetElementFromIndex(a.to.num.index+1);!r||r&&i.num.para!==r.num.para?o=!0:e=this.selectedText({from:t,to:r},"object")}" "!==e&&0!==e.length||(o=!0)}if(o)return t.property?$.extend(!0,t.property,e.value):t.property=e.value,void this.editor.config.container.trigger("Property_Applied_In_Space",{props:e.value});{let e=this.textselect.getCurrentStartEnd(i,void 0,!0);s=e.word.start,n=e.word.end}}let d,p;if(d=s+1,(p=n)==d){let e=i.num.para,t=a.position[e];if(t[t.length-1]==p){let t=this.editor.selector.getShapesOfZero(),a=t.data,o=a.textBody.paras[e],i=o.portions;if(1!=i.length||i[0].t)return}}else{let e=r.num;-1===e.ch&&e.lastIndex&&(p++,n++)}return{si:d,ei:p,fromIndex:s,toIndex:n}}changeStyle(e){let t=this.editor.defaults.text,a=[],o=this.mainTextEdit.textComposer,i=this.textmodulateData,r=this.mainTextEdit.textAutofit,s=this.editor.isTextEditable();s&&1===e.length&&this.editor.config.container.trigger("property_before_change"),$.each(e,function(e,t){let s=t.shape,n=t.textArrayObj;if(!n.length)return!1;$.each(n,function(e,t){o.compose(t,s,!0)});let d=i.getTextObject(n),p=i.getShapeObject(d,s.data,"Editor"),l=[],h=s.data;s.box;if(h.line_modified,!0){let e=r?r.createAutoFitShapeData():[];$.merge(l,e),delete h.line_modified}t&&l.push(p),$.merge(a,l)}),i.triggerEvent(a),s&&1===e.length&&this.mainTextEdit.textEditor.textnavigation.move(t.from.num.index,t.to.num.index,void 0,void 0,void 0,void 0,void 0,void 0,!0)}_getNextCharData(e){let t,a,o,i=e.num.index;return-1!==e.num.ch?(t=i-1,a=this.textselect.getTargetElementFromIndex(t),o=$.extend(!0,{},e)):(t=i+1,a=$.extend(!0,{},e),o=this.textselect.getTargetElementFromIndex(t)),{from:a,to:o}}sendDelta(e,t,a,o){var i=this,r=i.textmodulateData.getTextObject(e),s=i.textmodulateData.getShapeObject(r,a,"Editor");s.appData=$.extend(!0,s.appData,o),s&&t.push(s),i.textmodulateData.triggerEvent(t)}getAutofitSpellcheckDelta(e,t,a,o){var i=a.data;if(this.editor.commonTextEditor.textAutofit&&this.editor.commonTextEditor.textAutofit.checkForAutoFit(i,t),delete i.line_modified,this.editor.config.isSupported.spellcheck){let t=[];t=this.editor.commonTextEditor.spellCheck.checkSpelling(a.box,o.fromIndex,o.toIndex),$.merge(e,t)}}revertCapitalize(e,t){var a=this,o=[],i=[],r=t.data,s=e.num.index,n=a.textselect.getTargetElementFromIndex(s-1);let d=a.textselect.getCurrentStartEnd(n,void 0,!0);var p={start:d.word.start,end:d.word.start+1};o=a.autoCapitalize(p,r,!0);var l={fromIndex:s-1,toIndex:s};a.getAutofitSpellcheckDelta(o,i,t,l);var h={immediateOp:!0,doCapitalize:!0};a.sendDelta(o,i,r,h),a.textnavigation.move(s,s,void 0,void 0,void 0,void 0,void 0,void 0,void 0,!0)}checkForCapitalize(e,t,a){var o=e.element.word.data(),i=!1;if("NORMAL"===o.type&&(a||e.element.charCount===o.length)){var r=this.editor.commonTextEditor.textComposer.getObject(t.word.start+1),s=this.editor.selector.getShapesOfZero().data.textBody.paras[r.para].portions[r.portion].props;if(s&&s.cap&&"NONE"!==s.cap)return i;var n=this,d=n.selectedText({from:t.word.start,to:t.word.end},"range"),p=d.substr(0,1);if(p.toUpperCase()===p)return i;if(n.textselect._checkDiacriticnext({targetText:d,offsetIndex:1}).indexChange)return i;var l=Shape.textBody.paras.portions.t,h=l.words.getPrevWordInPara(t.wordElement.start,t.lineElement.start);if(0===h.word.length)i=!0;else{var c=h.word.data();if("LINEBREAK"===c.type||"SPACE"===c.type)i=!0;else if("NORMAL"===c.type&&c.space&&c.space.length){var f="";if(c.hasSubword){var u=l.subword.getSubwords(h.word,c[Shape.textBody.editorData].length-1).data("text");f=u.charAt(u.length-1)}else f=c.text.charAt(c.text.length-1);-1!==n.charsForCapitalize.indexOf(f)&&(i=!0)}}}return i}autoCapitalize(e,t,a){var o=this.editor.commonTextEditor,i=[],r=e.start,s=e.end,n=this.getFirstChar({wordStartIndex:r+1,wordEndIndex:s},t,a);i.push(this.textmodulateData.compose(o.textComposer.insert,s+1,s+1,{value:n}));var d=this.textactions.remove(r,s);return d&&i.push(d),i}getFirstChar(e,t,a){let o,i=this.editor.commonTextEditor.textComposer.getObject(e.wordStartIndex),r=i.portion,s=i.ch,n=t.textBody.paras[i.para].portions[r];return o=a?n.t.substring(s,s+1).toLowerCase():n.t.substring(s,s+1).toUpperCase()}}class ZSTextActions{constructor(e){this.editor=e.editor,this.textAutofit=e.textAutofit,this.textComposer=e.textComposer}addText(e){let t=this.editor.commonTextEditor.textEditor;if(e){let n=this.editor.defaults.text,d=this.editor.selector.getShapesOfZero(),p=d.data;d.box;if(!t._isEditable(d))return;var a=t._getFromTo(),o=a.from,i=a.to,r=o.num.index,s=i.num.index;if(isNaN(r)||isNaN(s))return;let l=[],h=[],c=!1,f=t.listening();f&&f.si>=r&&(f.si=f.si+e.length),-1!=$.inArray(e,this.editor.config.listenText.for)&&t.setListener({for:e,si:r,ei:r});let u;if(r!==s){(u=t.checkIfFirstPortionAndGetProps(r,p))&&u.commentIds&&delete u.commentIds;let e=this.remove(r,s);e&&l.push(e),c=!0}l.push(t.textmodulateData.compose(this.textComposer.insert,r+1,r+1,{value:e})),n.editor.property&&(c&&t.textnavigation.move(r,r,!0,void 0,void 0,void 0,void 0,void 0,void 0,!0),this.editor.config.container.trigger("property_before_change"),l.push(t.textmodulateData.compose(this.textComposer.update,r+1,r+1,{value:$.extend(!0,{},n.editor.property)})),n.editor.property=void 0),n.editor.langproperty&&(l.push(t.textmodulateData.compose(this.textComposer.update,r+1,r+1,{value:$.extend(!0,{},n.editor.langproperty)})),n.editor.langproperty=void 0);let m=r+e.length;if(u&&!$.isEmptyObject(u)){let e=t.textmodulateData.compose(this.textComposer.update,r+1,m,{value:u});e&&l.push(e)}let g,S=!1;if(this.editor.config.isSupported.capitalize.autoCapitalize&&" "===e){let e=t.textselect.getTargetElementFromIndex(m);g=t.textselect.getCurrentStartEnd(e,void 0,!0),S=t.checkForCapitalize(e,g)}if(S){t.sendDelta(l,h,p),l=[],h=[];let e={start:g.word.start,end:g.word.start+1};l=t.autoCapitalize(e,p)}let x={fromIndex:r,toIndex:m};t.getAutofitSpellcheckDelta(l,h,d,x);let v={immediateOp:S,placeCursorAtWordEnd:S};t.sendDelta(l,h,p,v),t.textnavigation.move(m,m,!0,void 0,void 0,void 0,void 0,void 0,void 0,!0),this.editor.config.isSupported.capitalize.smartUnCapitalize&&S&&(n.editor.unCapitalize=!0)}}replaceText(e,t,a,o){let i=[],r=this.editor.commonTextEditor.textEditor,s=this.textComposer.getPosition(o.textBody.paras),n=r.checkIfFirstPortionAndGetProps(e,o,s);n&&n.commentIds&&delete n.commentIds;let d;if(e+1<=t&&(d=r.textmodulateData.getComposeObj(this.textComposer.del,e+1,t,void 0,s,o)),d&&i.push(d),a&&a.length){(d=r.textmodulateData.getComposeObj(this.textComposer.insert,e+1,e+1,{value:a},s))&&i.push(d);let t=e+a.length;n&&!$.isEmptyObject(n)&&(d=r.textmodulateData.getComposeObj(this.textComposer.update,e+1,t,{value:n},s))&&i.push(d)}return i}backspace(e,t){let a,o=this.editor.commonTextEditor.textEditor;e&&t&&(a=o.textnavigation.horizontalNavigation(e,t).word);let i,r,s=this.editor.defaults.text,n=o._getFromTo(),d=n.from,p=n.to;a&&d.num.index===p.num.index?(i=o.textselect.getPrevWord(s.to),r=d.num.index):(i=d.num.index,r=p.num.index);let l=this.editor.selector.getShapesOfZero(),h=l.data,c=l.box;if(o._isEditable(l)){if(s.editor.unCapitalize)return o.revertCapitalize(d,l),void(s.editor.unCapitalize=void 0);if(i==r&&-1==d.num.ch&&0==d.num.portion&&h.textBody.paras[d.num.para].style.listStyle&&h.textBody.paras[d.num.para].style.listStyle.bullet.type!=ShapeConstants.BulletType.NONE)h.textBody.paras[d.num.para].style.listStyle.bullet.type=ShapeConstants.BulletType.NONE,h.textBody.paras.num=d.num.para,$.TextModifier&&$.TextModifier.update(this.editor,{listStyle:{bullet:{type:ShapeConstants.BulletType.NONE}}},"para","liststyle"),o.textnavigation.move(i,i);else{if(i===r){let e=d.element;if(e.word&&!e.word.hasClass("FIELD")){let t=e.subword&&e.subword.data().text?e.subword.data().text:e.word.data().text?e.word.data().text:"",a={targetText:t,offsetIndex:e.charCount,substr:t},r=o.textselect._checkDiacriticprev(a);i=i+r.indexChange-1}}let e=i===r?i>0:i>=0;if(e){let e=[],t=this.remove(i,r,"backspace"),a=i===r?i-1:i;if(t){this.textAutofit&&this.textAutofit.checkForAutoFit(h,e),delete h.line_modified;let i=[t];if(this.editor.config.isSupported.spellcheck){let e=[];e=this.editor.commonTextEditor.spellCheck.checkSpelling(c,a),$.merge(i,e)}let r=o.textmodulateData.getTextObject(i),s=o.textmodulateData.getShapeObject(r,h,"Editor");s&&e.push(s),o.textmodulateData.triggerEvent(e)}o.textnavigation.move(a,a,void 0,void 0,void 0,void 0,void 0,void 0,void 0,!0)}}this.editor.config.container.trigger("spell_after")}}del(e,t){let a=this.editor.commonTextEditor.textEditor,o=a.textnavigation.horizontalNavigation(e,t).word,i=this.editor.selector.getShapesOfZero(),r=i.data,s=i.box;if(!a._isEditable(i))return;let n,d=this.editor.defaults.text,p=a._getFromTo(),l=[],h=p.from,c=p.to,f=h.num.index;n=o?a.textselect.getNextWord(d.to):c.num.index;let u=this.textComposer.getLastIndex();if(f+1<u||f===u-1&&n!==f&&0!==f){if(f===n){let e=a.textselect.getTargetElementFromIndex(n+1);n=e.num.index}let e=this.remove(f,n,"delete");if(e){this.textAutofit&&this.textAutofit.checkForAutoFit(r,l),delete r.line_modified,f=(f=n===u?f-1:f)<0?0:f;let t=[e];if(this.editor.config.isSupported.spellcheck){let e=[];e=this.editor.commonTextEditor.spellCheck.checkSpelling(s,f),$.merge(t,e)}let o=a.textmodulateData.getTextObject(t),i=a.textmodulateData.getShapeObject(o,r,"Editor");i&&l.push(i),a.textmodulateData.triggerEvent(l)}a.textnavigation.move(f,f,void 0,void 0,void 0,void 0,void 0,void 0,void 0,!0)}else f===u-1&&n===f&&c.num.lastIndex&&a.textnavigation.move(f,f);this.editor.config.container.trigger("spell_after")}remove(e,t,a){let o=this.editor.commonTextEditor.textEditor,i=o.listening();i&&i.si>=e&&i.si<=t&&(this.editor.config.listenText.cancel(),o.removeListener());let r;if(e==t){let t="backspace"==a?e:e+1;r=o.textmodulateData.compose(this.textComposer.del,t,t)}else o.textselect.clear(),e+1!=this.textComposer.getLastIndex()&&(r=o.textmodulateData.compose(this.textComposer.del,e+1,t));return r}addField(e,t,a,o){let i;if(t&&"user"===t.type)i="@\u2028@"+t.obj.displayName+" \u2028"+t.obj.userId;else if(t&&"DATAFIELD"===t.type)i="$\u2028"+t.datafieldId+"\u2028"+t.t;else if("EMOJI"===t.type)i=":\u2028"+t.emoji;else{}this.enter(e,i,a,o)}enter(e,t,a,o){let i=this.editor.commonTextEditor.textEditor,r=this.editor.selector.getShapesOfZero(),s=r.data;r.box;if(!i._isEditable(r))return;let n=i.listening();if(n&&this.editor.config.listenText.enter(n))return void i.removeListener();i.removeListener();let d=i._getFromTo(),p=d.from.num.index,l=d.to.num.index,h=[],c=this.textComposer.getLastIndex(),f=!1;p==c-1&&l===c-1&&d.to.num.lastIndex&&(f=!0);let u=!1,m=!1;if(p!=l){let e=this.remove(p,l);e&&(h.push(e),m=!0)}if(!f){p++;let n,d=[],l={value:n=void 0!==t?t:e.shiftKey?"\u2028":"\n"};void 0!==o&&(l.emptyFieldText=o),h.push(i.textmodulateData.compose(this.textComposer.insert,p,p,l));let c;if(this.editor.config.isSupported.capitalize.autoCapitalize){let e=i.textselect.getTargetElementFromIndex(p-1);c=i.textselect.getCurrentStartEnd(e,void 0,!0),u=i.checkForCapitalize(e,c,!0)}var g={};if(m&&(g.handleOp={type:"break"}),u){i.sendDelta(h,d,s,g),h=[],d=[],g={};let e={start:c.word.start,end:c.word.start+1};h=i.autoCapitalize(e,s)}let f={fromIndex:p-1,toIndex:p};i.getAutofitSpellcheckDelta(h,d,r,f),g.immediateOp=u,g.placeCursorAtWordEnd=u,a&&(g.doc=a),i.sendDelta(h,d,s,g)}i.textnavigation.move(p,p,void 0,void 0,void 0,void 0,void 0,void 0,void 0,!0),this.editor.config.container.trigger("spell_after"),this.editor.config.isSupported.capitalize.smartUnCapitalize&&u&&(this.editor.defaults.text.editor.unCapitalize=!0)}tab(e){let t=this.editor.defaults.text,a=this.editor.selector.getShapesOfZero();a.data;this.editor.commonTextEditor.textEditor._isEditable(a)&&-1!=t.from.ch&&e.preventDefault()}}class ZSTextCursor{constructor(e){this.editor=e.editor,this.blinkTime=600,this.cursorElement=void 0}set(e){let t=this.editor.defaults.text.editor.cursor,a=this;a.show(e),"visible"==t.cursorAppearence[0]?a.show(e):a.hide(e),t.blinkId&&clearTimeout(t.blinkId),t.blinkId=setTimeout(function(){a.blink(e)},a.blinkTime)}show(e){(e=e||this.cursorElement).css({visibility:"visible"})}hide(e){(e=e||this.cursorElement).css({visibility:"hidden"})}blink(e){let t=this.editor.defaults.text.editor.cursor,a=this;e.css("visibility")==t.cursorAppearence[0]?"visible"==t.cursorAppearence[1]?a.show(e):a.hide(e):"visible"==t.cursorAppearence[0]?a.show(e):a.hide(e),t.blinkId=setTimeout(function(){a.blink(e)},a.blinkTime)}getIndex(){let e=this.editor.commonTextEditor.textEditor._getFromTo();return{si:e.from.num.index,ei:e.to.num.index,at:"update"}}remove(e){let t=this.editor.defaults.text.editor.cursor,a=this;clearTimeout(t.blinkId),t.blinkId=void 0,e&&a.show(e)}position(e){this.editor.commonTextEditor.textEditor.textnavigation.move(e.si,e.ei,void 0,void 0,void 0,void 0,void 0,void 0,void 0,!0)}refresh(e,t){if(void 0!==e.num.index&&void 0!==t.num.index){var a=this.editor.commonTextEditor.textEditor;a.textselect.select(e.num.index,t.num.index),a.textnavigation.checkCursorTransit(!0)}}}class ZSIMEHandler{constructor(e){this.editor=e.editor,this.mainTextEdit=e}focusEditor(){let e=this.editor.defaults.text.IME.contentEditable;Shape.touchDevice||e.focus()}select(){let e=this.editor.defaults.text.IME.contentEditable;VectorUtil.selectAllText(e)}initContainer(e,t){let a=this.editor.defaults.text;t=t||"",a.IME.contentEditable.text(t)}initIMEEditableSpan(e){let t=e.parent(),a=t.parent();e.removeAttr("style"),t.removeAttr("style"),a.removeAttr("style")}shapeinit(){let e=this.editor.selector.getShapesOfZero(),t=e.box,a=this.editor.commonTextEditor.textEditor,o=this.editor.defaults.text,i=o.editor,r=$.extend(!0,{},e.data),s=a._getFromTo().from,n=s.num.para,d=s.pos.line,p=s.num.portion,l=s.element.para,h=s.element.line,c=s.element,f=c.word,u=c.subword?c.subword:c.word,m=c.charCount,g=this.editor.defaults.text.IME.contentEditable;g.removeAttr("style");u.data("type");let S=$(Shape.creator.createTSpan(t[0]));S.attr("id","tempcEspan").text(Shape.textBody.zeroWidthSpaceText);let x={data:r,container:this.editor.getShapeContainer(),box:t};r.textBody.paras.num=n;let v=r.textBody.paras[n].portions[p];Shape.textBody.paras.portions.props.setPropsForWord_HTML(g,v,x,p);let y=u.data(),E=f.data("length"),C=0;if(m>E-1){let e=f.data("space"),t=m-(E-1),a=(e.length,0);for(let o=0;o<t;o++)a+=e[o].afterSpaceWidth;let o=S.clone();o.attr({class:"breakUpWord",id:"breakUpWord1"}),f.append(o),S.insertAfter(o),C=a+f.data("wordWidth"),S.data("updateSpace",!0)}else{let e=y.subword,t=u.data(),a=e?u:u.children("."+Shape.textBody.wordContentId);if(a.empty(),e){let e=Shape.textBody.paras.portions.t.subword.getSubWordIndex(u,f),t=f.data(Shape.textBody.editorData),a=0;for(let o=0;o<e;o++)a+=t[o][Shape.textBody.indexId];m-=a}let o=t.text?t.text:"",i=m+1;"FIELD"===t.type&&i&&(i=m+o.length);let r=o.substring(0,i),s=o.substring(i),n=S.clone();if(n.attr({class:"breakUpWord",id:"breakUpWord1"}),n.text(r),n.data("text",r),a.append(n),s.length>0){let e=S.clone();e.attr({class:"breakUpWord",id:"breakUpWord2"}),e.text(s),e.data("text",s),a.append(e)}S.insertAfter(n),C=Shape.textBody.paras.portions.t.words._beforeCanvasDim(r,y.textCase,y.font).width}let O=$(t).find(".cursorBlink");this.editor.commonTextEditor.textEditor.textcursor.hide(O);let b=$.extend(!0,{},l.data(Shape.textBody.editorData)[d]),T=h.data(),w=r.textBody.paras[n].style;S.data("transform",{paraStyle:w,totalLineWidth:T.totalWidth,totalWordsWidth:b[Shape.textBody.textPathId].width,widthToBeAdded:C,top:b[Shape.textBody.textPathId].top,translate_x:o.textContainer.data("translate_x"),translate_y:o.textContainer.data("translate_y")}),i.IMEHandler.shape.dummySpan=S,Shape.creator.set(S[0],{dx:g.width()}),g.focus(),this.shapedummySpan_init(r,t),this.initContainer()}shapedummySpan_init(e,t){let a=this.editor.defaults.text,o=e.props.transform,i=(a.editor.IMEHandler.shape.dummySpan,a.IME.contentEditable),r=this.editor.config.get.scale(),s=i.parent(),n=s.parent();VectorUtil.setScale(n,r);let d=this.editor.config.container[0].offsetLeft,p=this.editor.config.container[0].offsetTop,l=o.pos.top;"div"===t[0].tagName.toLowerCase()&&(l=t.offset().top-p-this.editor.config.container.offset().top);let h={left:o.pos.left*r+d,top:l*r+p},c={width:o.dim.width,height:o.dim.height};s.css(c),n.css(h);let f=" rotate("+Shape.getAngle(o)+"deg) scale(1) translate(0px, 0px)";VectorUtil.transform(s,"50% 50%",f),this.shapeSetPosition()}shapeSetPosition(e){let t=this.editor.defaults.text,a=t.IME.contentEditable,o=t.editor.IMEHandler.shape.dummySpan,i=Shape.textBody.paras.portions.t,r=this.editor.selector.getShapesOfZero(),s=(r.box,this.editor.commonTextEditor.textEditor),n=($.extend(!0,{},r.data),s._getFromTo()),d=n.from.element.line,p=d.data(),l=(p.remainingWidth<0&&p.remainingWidth,i.line.getTextPathFromLine(d),o.parent());e=e||0;let h=s.getOffset(l),c=o.data("transform");h.left=h.left+c.widthToBeAdded+c.translate_x,h.top=h.top+c.translate_y,a.css({top:h.top-2+"px",left:"0px","text-indent":h.left+"px"});let f={data:r.data,container:this.editor.getShapeContainer(),box:r.box};f.data.textBody.paras.element=n.from.element.para;let u=n.from.element.line,m=n.from.element.word,g=i.line.getWordsInLine(u),S=i.line.getLineIndex(u),x=i.words,v=i.words.getWordIndex(m,u),y=d.data(Shape.textBody.editorData).length-1,E=x.getFirstLineLeft(f,u,S);E+=x.getWordTransform(u,v-1);for(let t=v;t<=y;t++){let a=g[t];x.setWordTranslate(a,{x:E,y:0}),e=t===v?e:0,E=E+x.widthIncludingSpace($(a))+e}}shapeFinalize(e){let t=this.editor.defaults.text.editor.IMEHandler,a=this.editor.commonTextEditor.textEditor,o=this;if(this.editor.getSelectedShapes().length&&a._isEditable()){let i=this.editor.defaults.text.IME.contentEditable,r=t.shape.dummySpan,s=e||i.text(),n=!1;if(o.initIMEEditableSpan(i),r)n=r.data("updateSpace"),r.remove(),t.shape.dummySpan=void 0;else{if(!s||1!==s.length||-1===s.indexOf(""))return;n=!0}let d=a._getFromTo(),p=d.from.element.subword?d.from.element.subword:d.from.element.word,l=p.data(),h=!1;l.subword&&(h=!0);let c=p.find(".breakUpWord"),f="";if($.each(c,function(e,t){let a=(t=$(t)).data();f+=a.text?a.text:""}),c.remove(),n){if(!l.hasSubword){p.children("."+Shape.textBody.wordContentId)}}else if(h)p.empty().text(f);else{let e=p.children("."+Shape.textBody.wordContentId);e.empty().text(f)}s&&a.textactions.addText(s),a.focusEditor()}o.initContainer()}compositionStart(){let e=this.editor.defaults.text.IME,t=this.editor.commonTextEditor.textEditor,a=this.editor.config.isContainerLockedFromEditing(),o=[];if(this.editor.getSelectedShapes().length){let e=this.editor.getShapesOfZero(),o=this.editor.checkLockStatus(e,"Modify");if(e.data.type===ShapeConstants.ShapeNodeType.PICTURE||o||a||!t._isEditable(e))return;this.mainTextEdit.isEditable(e.data.nvOProps.nvDProps.id)||t.edit(e)}e.editing?this.clearTimeoutAndCompose():this.select();let i=this.editor.selector.getShapesOfZero();if(i){i.box;let a=$.extend(!0,{},i.data),r=t._getFromTo();if(r.from.num.index!=r.to.num.index){let e=[];e.push(t.textactions.remove(r.from.num.index,r.to.num.index));let i=t.textmodulateData.getTextObject(e),s=t.textmodulateData.getShapeObject(i,a,"Editor");s&&o.push(s),t.textmodulateData.triggerEvent(o),t.textcursor.refresh(r.from,r.from),t.clearCopiedContent()}e.editing=!0;let s=e.contentEditable,n=s.text();n.length,this.shapeinit()}}clearTimeoutAndCompose(){this.editor.defaults.text.IME.editing=!1,this.editor.shapeEvent.textEvent.composeIMEtext()}compositionEnd(e){let t=this.editor.defaults.text.IME,a=this;t.IME_TIMER=setTimeout(function(){t.editing=!1,a.editor.shapeEvent.textEvent.composeIMEtext()},2)}}class ZSTextModulateData{constructor(e){this.editor=e.editor,this.textComposer=e.textComposer,this.textAutofit=e.textAutofit}editorCompose(e,t,a,o,i,r,s){let n=[];if(i=i||"Editor",n.push(this.compose(e,t,a,o,r)),!o.doNotTrigger){let e=this.getTextObject(n),d=(r=r||this.editor.selector.getShapesOfZero()).data,p=this.getShapeObject(e,d,i,void 0,o.doc,s),l=[];if(d.line_modified,!0){let e=this.textComposer.getLastIndex(),i=!(!o.value||!o.value.size||1!==t||a!==e-1),r=this.textAutofit?this.textAutofit.createAutoFitShapeData(void 0,void 0,void 0,i):[];$.merge(l,r),delete d.line_modified}p&&l.push(p),this.triggerEvent(l)}return n}compose(e,t,a,o,i){let r;i?r=this.textComposer.getPosition(i.data.textBody.paras):i=this.editor.selector.getShapesOfZero();let s=this.getComposeObj(e,t,a,o,r,i.data);return o&&o.doNotRender||this.textComposer.compose(s,i,!0),s}getComposeObj(e,t,a,o,i,r){let s={at:e,si:t,ei:a},n=this.editor.defaults.text.composer;if(i=i||n.position,o&&(s.value=o.value?{value:o.value}:{},s.ut=o.ut?o.ut:void 0,s.doNotExtendProps=o.doNotExtendProps?o.doNotExtendProps:void 0,s.unmerged=o.unmerged?o.unmerged:void 0,s.value.deleteData=o.deleteData?o.deleteData:void 0,s.emptyFieldText=o.emptyFieldText?o.emptyFieldText:void 0),e===this.textComposer.del){let e=this.editor.commonTextEditor.textEditor.selectedText({from:t-1,to:a},"range",!0,i,r,!0);s.value={oldValue:e}}return s}getTextObject(e){let t=[],a=this;return $.each(e,function(e,o){let i=$.extend(!0,{},o);if(i.at=i.at.toUpperCase(),i.unmerged){if(i.doNotExtendProps&&"INSERT"===i.at){let e=JSON.parse(i.value.value);"para"===i.ut?e.style=$.extend(!0,{},i.unmerged.value):e.props=$.extend(!0,{},i.unmerged.value),i.value.value=JSON.stringify(e)}else i.value={value:$.extend(!0,{},i.unmerged.value)};i.unmerged.deleteData&&(i.value.deleteData=i.unmerged.deleteData),delete i.unmerged}i.value&&(ZSTextModulateData.removeUnwantedProps(i.value.value),a.stringifyContent(i.value,"value"),a.stringifyContent(i.value,"deleteData")),i.ut=i.ut?i.ut.toUpperCase():void 0,t.push(i)}),t}static removeUnwantedProps(e){e&&e.click&&e.click.props&&delete e.click.props,e&&e.font&&e.font.loader&&delete e.font.loader}stringifyContent(e,t){e&&e[t]&&("object"==typeof e[t]&&(e[t]=JSON.stringify(e[t])),e[t]=e[t])}getShapeObject(e,t,a,o,i,r){let s=this.editor.getSelectedShapes()[0];if((t.isTable||t.isChart)&&(o=t.nvOProps.nvDProps.id,t=s.data),!t.doNotSaveText){let n=t.nvOProps.nvDProps.id,d={shapeData:{id:t.isChart?s.parentIds[0]:n,texts:e},appData:{action:a,immediateOp:r}};return o&&(d.shapeData.cellId=o),i&&(d.appData.doc=i),d}}triggerEvent(e){e.length&&this.editor.config.container.trigger("text_modified",{textData:e})}}class ZSTextNavigation{constructor(e){this.editor=e.editor,this.textComposer=e.textComposer}horizontalNavigation(e,t){let a=this.editor.isMac?t.mac:t.other,o={line:!1,word:!1,select:!1};return $.each(a,function(t,a){o[a]=o[a]?o[a]:e[t]}),o}right(e,t){let a=this.horizontalNavigation(e,t);a.line?this._end(a.select):this._right(a.select,a.word)}_right(e,t){let a,o=this.editor.defaults.text,i=this.editor.selector.getShapesOfZero(),r=(i.data,this.editor.getSelectedShapes()[0].data),s=this.editor.commonTextEditor.textEditor;if(!s._isEditable(i))return;let n,d,p=this.textComposer.getLastIndex();if(s.textselect.isSelected()&&!e)n=d=Math.max(o.from.num.index,o.to.num.index);else if(n=o.from.num.index,a=o.to.num.index,t)d=s.textselect.getNextWord(o.to),e||(n=d);else{let t=o.to.num.index;e?d=t<p?t+1:p:n=d=t<p-1?t+1:p-1}r.obj&&"TABLE"===r.obj.type?this.editor.tableEditor.navigation.selectRight(r,n,d,a,p,e):this.move(n,d,void 0,void 0,void 0,void 0,void 0,!0)}left(e,t){let a=this.horizontalNavigation(e,t);a.line?this._home(a.select):this._left(a.select,a.word)}_left(e,t){let a=this.editor.defaults.text,o=this.editor.getSelectedShapes()[0].data,i=this.editor.selector.getShapesOfZero(),r=(i.data,this.editor.commonTextEditor.textEditor);if(!r._isEditable(i))return;let s,n,d;if(r.textselect.isSelected()&&!e)s=n=Math.min(a.from.num.index,a.to.num.index);else{if(s=a.from.num.index,d=a.to.num.index,t)n=r.textselect.getPrevWord(a.to);else{let e=a.to.num.index;n=e<1?0:e-1}s=e?s:n}o.obj&&"TABLE"===o.obj.type?this.editor.tableEditor.navigation.selectLeft(o,s,n,d,e):this.move(s,n,void 0,void 0,void 0,!e,!0,!0)}verticalNavigation(e,t){let a=this.editor.isMac?t.mac:t.other,o={line:!1,select:!1};return $.each(a,function(t,a){o[a]=o[a]?o[a]:e[t]}),o}up(e,t){if(this.editor.commonTextEditor.textEditor.listening()&&this.editor.config.listenText.down())return;let a=this.verticalNavigation(e,t);this._up(a.select,a.para)}_up(e,t){let a,o,i,r=this.editor.defaults.text,s=this.editor.getSelectedShapes()[0].data,n=this.editor.selector.getShapesOfZero(),d=(n.data,this.editor.commonTextEditor.textEditor);if(d._isEditable(n)){let n=!1;a=r.from.num.index;let p=r.to.num.index;if(t){let t=d.textselect.getPreviousParaForUp(r.to);o=t.index,e||(a=o)}else{o=r.to.num.index;let t={select:e,doNotSkip:!1,methodName:"getCurrentLineForUp"},s=this._getCurrentLine(t);s.toIndex===o&&(t.doNotSkip=!0,s=this._getCurrentLine(t)),a=void 0!==s.fromIndex?s.fromIndex:a,o=s.toIndex,i=s.stopCursorWrap,n=s.isLineEnd}s.obj&&"TABLE"===s.obj.type?this.editor.tableEditor.navigation.selectUp(s,a,o,i,n,p,t,e):this.move(a,o,i,n,!0,void 0,void 0,!0)}else this._swapParaValues(-1,e)}_getCurrentLine(e){let t,a,o,i,r=this.editor.defaults.text,s=this.editor.commonTextEditor.textEditor,n=e.select,d=e.doNotSkip,p=e.methodName,l=s.textselect[p](r.to,n,d);if(void 0===l.index){let e=s.textselect.getIndexFromPosition(l.pos,r.to.cursorPosLeft,void 0,n,l.isKeyEvent);i=e.index,n||(t=i,a=e.stopCursorWrap,o=e.isLineEnd)}else i=l.index;return{fromIndex:t,toIndex:i,stopCursorWrap:a,isLineEnd:o}}down(e,t){if(this.editor.commonTextEditor.textEditor.listening()&&this.editor.config.listenText.down())return;let a=this.verticalNavigation(e,t);this._down(a.select,a.para)}_down(e,t){let a,o,i,r=this.editor.defaults.text,s=this.editor.getSelectedShapes()[0].data,n=this.editor.selector.getShapesOfZero(),d=(n.data,this.editor.commonTextEditor.textEditor);if(d._isEditable(n)){let n=!1;a=r.from.num.index;let p=r.to.num.index;if(t){let t=d.textselect.getPreviousParaForDown(r.to);o=t.index,e||(a=o)}else{o=r.to.num.index;let t={select:e,doNotSkip:!1,methodName:"getCurrentLineForDown"},s=this._getCurrentLine(t);s.toIndex===o&&(t.doNotSkip=!0,s=this._getCurrentLine(t)),a=void 0!==s.fromIndex?s.fromIndex:a,o=s.toIndex,i=s.stopCursorWrap,n=s.isLineEnd}s.obj&&"TABLE"===s.obj.type?this.editor.tableEditor.navigation.selectDown(s,a,o,i,n,p,t,e):this.move(a,o,i,n,!0,void 0,void 0,!0)}else this._swapParaValues(1,e)}home(e,t){let a=this.editor.isMac?t.mac:t.other,o={text:!1,select:!1};$.each(a,function(t,a){o[a]=o[a]?o[a]:e[t]}),this._home(o.select,o.text)}_home(e,t){let a=this.editor.defaults.text,o=this.editor.commonTextEditor.textEditor;if(t)this.startOftext();else{let t,i,r,s=a.from,n=a.to,d=s.num.index,p=n.num.index,l=!1;d<p?e?(r=n,l=!0):r=s:r=n;let h=o.textselect.getLineStart(r,l);i=h.index,t=e?s.num.index:i,this.move(t,i,!1,!1,void 0,!e,!0,!0)}}end(e,t){let a=this.editor.isMac?t.mac:t.other,o={text:!1,select:!1};$.each(a,function(t,a){o[a]=o[a]?o[a]:e[t]}),this._end(o.select,o.text)}_end(e,t){let a=this.editor.defaults.text,o=this.editor.commonTextEditor.textEditor;if(t){this.endOftext()}else{let t,i,r,s=a.from,n=a.to,d=s.num.index,p=n.num.index,l=!1;d>p?e?(r=n,l=!0):r=s:r=n;let h=o.textselect.getLineEnd(r,l);i=h.index,t=e?s.num.index:i,this.move(t,i,h.stopCursorWrap&&!0,h.isLineEnd&&!0,void 0,void 0,void 0,!0)}}_spellCheckSameIndex(e,t){let a=this.editor.commonTextEditor.textEditor.textselect,o=!1,i=t.num.index,r=a.getTargetElementFromIndex(i),s=r.element.word,n=r.element.charCount,d=e.element.word,p=e.num.index,l=e.element.charCount,h=a._getTotalSubwordText(s).length,c=s.data("space")?s.data("space").length:0,f=a._getTotalSubwordText(d).length,u=a.getCurrentStartEnd(e),m=u.word.start,g=u.word.end;if(s[0]!==d[0]){let t=s.data(),u=d.data(),g=r.pos.line!==e.pos.line&&t.broken&&u.broken&&(t.broken.after&&t.broken.after===u.broken.before||t.broken.before&&t.broken.before===u.broken.after)&&!(l>f-1);if("LINEBREAK"!==t.type&&"FIELD"!==t.type&&(0!==c&&i===m||p===i-n-1&&0===n)||g)o=!1;else if("LINEBREAK"===t.type&&"FIELD"===t.type&&(i>p||p-i>1)||h<h+c){let e=a.getTargetElementFromIndex(i+1);o={wordObj:e}}else o={wordObj:r}}else if(i===g&&n>l&&n>h-1){let e=a.getTargetElementFromIndex(i+1);o={wordObj:e}}else n==h-1&&l>h-1&&(o={wordObj:r});return o}checkCursorTransit(e,t,a,o,i,r){let s=this.editor.defaults.text.editor,n=this.editor.commonTextEditor.textEditor;s.unCapitalize=void 0;let d=!1,p=!1,l=!1,h=!1;if(e)d=!0,p=!0,s.property=void 0;else if(t.num.para!==a.num.para||t.num.para!==o.num.para||a.num.para!==i.num.para?(d=!0,p=!0,s.property=void 0):(t.num.portion!==a.num.portion||t.num.portion!==o.num.portion||a.num.portion!==i.num.portion||s.property)&&(p=!0,s.property=void 0),t.pos.para===o.pos.para&&a.pos.para===i.pos.para&&t.pos.line===o.pos.line&&a.pos.line===i.pos.line||(h=!0),!r&&$.SpellCheck&&$.SpellCheck.processSpellCheck&&n._isEditable())if(t.num.index===a.num.index)l=this._spellCheckSameIndex(a,i);else{let e=o.num.index,t=o,a=n.textselect.getCurrentStartEnd(t);e===a.word.end&&0!==a.spaceLength&&e+1<this.textComposer.getLastIndex()&&(t=n.textselect.getTargetElementFromIndex(e+1)),l={wordObj:t}}else l=!1;if(h){let e=this.editor.commonTextEditor.textEditor.getOffset(t.element.word),o=this.editor.commonTextEditor.textEditor.getOffset(a.element.word);h={from:e,to:o}}l&&l.wordObj&&("LINEBREAK"!==l.wordObj.element.word.data("type")&&"FIELD"!==l.wordObj.element.word.data("type")||(l=!1)),this.triggerCursorTransit(d,p,l,void 0,h)}move(e,t,a,o,i,r,s,n,d,p){let l=this.editor.defaults.text,h=this.editor.commonTextEditor.textEditor,c=h.listening();if(c&&c.si<e&&e===t){let t=h.selectedText({from:c.si+1,to:e},"range");c.ei=e,c.text=t,this.editor.selector.getShapesOfZero().box.trigger("textListener",c)}let f=$.extend(!0,{},l.from),u=$.extend(!0,{},l.to),m=void 0;if(m=n&&f.num.index===e?$.extend(!0,{},f):h.textselect.getTargetElementFromIndex(e,void 0,void 0,r)){if(this.preMove(l.from,l.to),l.from.num=m.num,l.from.element=m.element,l.from.pos=m.pos,e===t){let e=$.extend(!0,{},l.to);l.to=$.extend(!0,{},l.from),i&&(l.to.cursorPosLeft=e.cursorPosLeft)}else{let e=void 0;if(!(e=n&&u.num.index===t?$.extend(!0,{},u):h.textselect.getTargetElementFromIndex(t,void 0,void 0,s)))return;l.to.num=e.num,l.to.element=e.element,l.to.pos=e.pos}f.num.index!==u.num.index&&e===t&&h.clearCopiedContent(),this.checkCursorTransit(d,l.from,l.to,f,u,p),h.textselect.select(void 0,void 0,a,o,f,i)}}preMove(e,t){let a=this.editor.commonTextEditor.textEditor;a.textselect.isSelected()||void 0===e.num.para||a.bulletchangeStatus(e,t,!0)}triggerCursorTransit(e,t,a,o,i,r){let s=this.editor;if((e||t)&&s.config.container.trigger("cursor_transit",[{type:"acrossPortions"}]),e&&s.config.container.trigger("cursor_transit",[{type:"acrossParas"}]),a){let e=[{type:"spellCheckWord",wordObj:a.wordObj}];r&&$.extend(!0,e,r),s.config.container.trigger("cursor_transit",e)}i&&s.config.container.trigger("cursor_transit",[{type:"acrossLines",lineObj:i}]),o&&void 0!==s.tableEditor&&s.tableEditor.navigation.navigate(o)}startOftext(){this.move(0,0)}startofword(){let e=this.editor,t=e.defaults.text.from.num.index,a=(e.defaults.text.to.num.index,this.editor.commonTextEditor.textEditor.textselect),o=a.getTargetElementFromIndex(t);return a.getCurrentStartEnd(o).word.start}endOftext(){let e=this.textComposer.getLastIndex();this.move(e-1,e-1)}endOfword(){let e=this.editor,t=e.defaults.text.from.num.index,a=(e.defaults.text.to.num.index,this.editor.commonTextEditor.textEditor.textselect),o=a.getTargetElementFromIndex(t);return a.getCurrentStartEnd(o).word.end}_swapParaValues(e,t){let a,o,i=this.editor.defaults.text,r=i.from.num.para,s=i.to.num.para;t?(o=s+e,a=r):o=a=e<0?Math.min(r,s)+e:Math.max(r,s)+e,this.selectPara(a,o)}selectPara(e,t){let a=this.editor.selector.getShapesOfZero().data;if(a.textBody.paras[e]&&a.textBody.paras[t]){let a=this.editor.defaults.text,o=Math.min(e,t),i=Math.max(e,t),r=e>t,s=a.textContainer.data(Shape.textBody.editorData),n=0,d=0;for(let e=0,t=o;e<t;e++)n+=s[e][Shape.textBody.indexId];d=n;for(let e=o,t=i;e<=t;e++)d+=s[e][Shape.textBody.indexId];return d-=1,r&&(n+=d,n-=d=n-d),this.move(n,d),!0}}swapSelect(){return"from"===this.editor.defaults.text.current?"to":"from"}wordStart(e){return this.startOfword(e)}wordEnd(e){return this.endOfword(e)}}class ZSTextSelect{constructor(e){this.editor=e.editor,this.selector=this.editor.selector,this.textComposer=e.textComposer,this.canSetFill=Shape.isCorpUser||Shape.testing,this.defaultCursorWidth=this.canSetFill?1.2:2,this.eventsBound=!1,this.range={diacritic:{start:768,end:879},highSurrogate:{start:55296,end:56319},lowSurrogate:{start:56320,end:57343}}}init(e){let t=this.editor.defaults.text,a=this.selector.getShapesOfZero(),o=this.editor.commonTextEditor.textEditor;o.clearCopiedContent(!0),t.textContainer=e.find("#"+Shape.textBody.textContainer);let i=this.editor.config.container;t.shapeContainer=i,t.shapeContainerOffset=i.offset(),t.boxOffset=this.editor.config.get.boxOffset(a.box),t.containerOffset={left:a.data.props.transform.pos.left+t.textContainer.data("translate_x"),top:a.data.props.transform.pos.top+t.textContainer.data("translate_y")},this.editor.config.setShapeDimensions(a),o.addBackGroundDiv(a.data,e.parent(),e),a.box.trigger("text_selected"),this.eventsBound||(this.editor.config.container.on("Property_Applied_In_Space",(e,t)=>{this.updateCursorWithPortionProps(t.props)}),this.eventsBound=!0)}isSelected(){let e=this.editor.defaults.text;return!this.isSameChar(e.from,e.to)}isSameChar(e,t){return e.num.index===t.num.index}createDiv(e,t,a){let o=this.editor.defaults.text,i=this.selector.getShapesOfZero().box,r=o.textContainer,s=o.from.num.index===o.to.num.index,n=this.editor.commonTextEditor.textEditor.textcursor;t=s&&t,o.isLineEnd=t;let d=r.children(".selectedArea");$.each(e,function(e,t){$.each(t,function(t,a){let o=r.find("#selection"+e+t);if(o&&o.length){Shape.creator.setRectangle(o[0],a.left,a.top,a.width,a.height);let e=$.inArray(o[0],d);d.splice(e,1)}else o=Shape.creator.createRectangle(i,a.left,a.top,a.width,a.height,0),(o=$(o)).attr({class:"selectedArea",id:"selection"+e+t}),r.prepend(o)})}),d.remove();let p=r.children(".selectedArea");o.editor.cursor.cursorElement=p,!s||a?(this.resetCursorPortionProps(),p.addClass("cursorSelection").removeClass("cursorBlink"),n.remove($(p))):(this.updateCursorWithPortionProps(),p.removeClass("cursorSelection").addClass("cursorBlink"),n.set($(p)))}updateCursorWithPortionProps(e){let t=this.editor.defaults.text.editor.cursor.cursorElement;const a=this.editor.commonTextEditor.textEditor;this.canSetFill=Shape.isCorpUser||Shape.testing;let o;if(o=e||(o=a.getSelectedPortionProperty())[o.length-1],this.canSetFill&&o.fill){let e,a,i;if(o.fill.type===ShapeConstants.FillType.GRP){const t=o.textStyle.props;e=t.fill,t.stroke&&t.stroke.fill&&(i=this.getSolidFillColor(t.stroke.fill))}else e=o.fill;if(a=this.getSolidFillColor(e),e.type===ShapeConstants.FillType.PATTERN){const t=e.pattern;if(!i&&t.foreground){const e=t.foreground[0];e.fill&&(i=this.getSolidFillColor(e.fill))}t.background&&(a=this.getSolidFillColor(t.background))}a&&i?(this.canSetFill=!1,t.css("fill",a),t.css("stroke",i),t.removeClass("noStroke"),t.addClass("fullOpacity")):a||i?(t.css("fill",a||i),t.addClass("noStroke"),t.addClass("fullOpacity")):(this.canSetFill=!1,t.css("fill","rgb(0, 0, 0)"),t.css("stroke",""),t.removeClass("fullOpacity"),t.removeClass("noStroke"))}if(this.defaultCursorWidth=this.canSetFill?1.2:2,o.fontweight===ShapeConstants.FontWeight.THIN||o.fontweight===ShapeConstants.FontWeight.EXTRA_LIGHT||o.fontweight===ShapeConstants.FontWeight.LIGHT||o.fontweight===ShapeConstants.FontWeight.NORMAL||o.fontweight===ShapeConstants.FontWeight.MEDIUM)t.attr({width:this.defaultCursorWidth});else if(o.fontweight===ShapeConstants.FontWeight.HEAVY||o.fontweight===ShapeConstants.FontWeight.BLACK){const e=this.canSetFill?1.8:2;t.attr({width:this.defaultCursorWidth+e});const a=parseFloat(t.attr("x"));t.attr({x:a-e/2})}else if(o.bold||o.fontweight===ShapeConstants.FontWeight.DEMI_BOLD||o.fontweight===ShapeConstants.FontWeight.BOLD){t.attr({width:this.defaultCursorWidth+1});const e=parseFloat(t.attr("x"));t.attr({x:e-.5})}if(o.italic){const e={left:parseFloat(t.attr("x")),top:parseFloat(t.attr("y"))},a={height:parseFloat(t.attr("height")),width:parseFloat(t.attr("width"))},o=Geometry.util.getOrigin(e,a);t.attr("transform",`rotate(12 ${o.x} ${o.y})`)}else void 0===o.italic||o.italic||t.attr("transform","")}getSolidFillColor(e){return e.type===ShapeConstants.FillType.SOLID&&VectorUtil.convertRGBToString(e.solid.color.rgb)}resetCursorPortionProps(){const e=this.editor.defaults.text.editor.cursor.cursorElement;e.css("fill",""),e.css("stroke",""),e.removeClass("noStroke"),e.removeClass("fullOpacity"),e.attr("transform","")}placeCursor(e){e||(e=this.selector.getShapesOfZero());let t=e.box;this.init(t,e.data),this.textComposer.init(e.data);let a=this.textComposer.getLastIndex()-1;this.select(a,a)}_getLineEnd(){let e=this.editor.defaults.text;return!(e.from.num.index!==e.to.num.index||!e.isLineEnd)}getCurrentLineForDown(e,t,a){let o=this.editor.defaults.text,i=e.pos.para,r=e.pos.line,s=e.cursorPosLeft,n=e.num.index,d=r,p=i,l=o.textContainer.data(Shape.textBody.editorData),h=$(o.textContainer.find("."+Shape.textBody.paraId)[i]).data(Shape.textBody.editorData),c=0,f=!1;for(let e=0;e<i;e++)c+=l[e][Shape.textBody.indexId];for(let e=0;e<=r;e++)c+=h[e][Shape.textBody.indexId];if(n!==c||this._getLineEnd()||(r+=1,f=!a),!f&&r+1<h.length?(d=r+1,p=i,f=!0):!f&&i+1<l.length?(p=i+1,d=0,f=!0):d=r,!f&&t){let e=this.textComposer.getLastIndex();return{index:e}}return{pos:{para:p,line:d},left:s,isKeyEvent:!0}}getCurrentLineForUp(e,t,a){let o,i,r=this.editor.defaults.text,s=e.pos.para,n=e.pos.line,d=e.num.index,p=n,l=s,h=$(r.textContainer.find("."+Shape.textBody.paraId)[s]),c=r.textContainer.data(Shape.textBody.editorData),f=h.data(Shape.textBody.editorData),u=0,m=!1,g=e.num.ch,S=e.cursorPosLeft,x=!1;for(let e=0;e<s;e++)u+=c[e][Shape.textBody.indexId];for(let e=0;e<=n;e++)u+=f[e][Shape.textBody.indexId];let v=this._getLineEnd();if(-1===g||d!==u||v||a||(m=!0,o=!0,i=!0),m){let e={para:s,line:n};return{pos:e,left:S,isKeyEvent:!0,notALineEnd:o,cursorWrap:i}}if(n)p=n-1,l=s,x=!0;else if(s){l=s-1;let e=$(r.textContainer.find("."+Shape.textBody.paraId)[l]);p=e.data(Shape.textBody.editorData).length-1,x=!0}return!x&&t?{index:0}:{pos:{para:l,line:p},left:S,isKeyEvent:!0,notALineEnd:o,cursorWrap:i}}getLineStart(e,t){let a=this.editor.defaults.text,o=e.num.index,i=(a.from.num.index,a.to.num.index,o);if(0!==o){let r=0,s=a.textContainer,n=Shape.textBody.editorData,d=e.pos.para,p=e.pos.line,l=e.element.para,h=e.element.line,c=s.data(n),f=l.data(n),u=h.data(n),m=a.composer.position[d];m[m.length-1],this.textComposer.getLastIndex();for(let e=0;e<d;e++)r+=c[e][Shape.textBody.indexId];for(let e=0;e<p;e++)r+=f[e][Shape.textBody.indexId];let g=0;for(let e=0,t=u.length;e<t;e++)g+=u[e][Shape.textBody.indexId];r+g!==o||this._getLineEnd()||t||(r=o),i=r}return{index:i}}getLineEnd(e,t){let a=this.editor.defaults.text,o=this.textComposer.getLastIndex(),i=e.num.index,r=a.from.num.index===a.to.num.index,s=i,n=!0;if(i!==o-1){let d=0,p=a.textContainer,l=Shape.textBody.editorData,h=e.pos.para,c=e.pos.line,f=e.element.para,u=e.element.line,m=p.data(l),g=f.data(l),S=u.data(l),x=a.composer.position[h],v=x[x.length-1];for(let e=0;e<h;e++)d+=m[e][Shape.textBody.indexId];for(let e=0;e<c;e++)d+=g[e][Shape.textBody.indexId];for(let e=0,t=S.length;e<t;e++)d+=S[e][Shape.textBody.indexId];d!==i||!t&&!r||this._getLineEnd()||(d+=g[c+1][Shape.textBody.indexId]),(s=d===o?d-1:d)===v&&s--;let y=this.textComposer.getObject(s),E=this.selector.getShapesOfZero().data;E.textBody.paras[y.para].portions[y.portion].type===ShapeConstants.PortionType.LINEBREAK&&(s--,n=!1)}return{index:s,stopCursorWrap:n,isLineEnd:n}}getPreviousParaForUp(e){let t=this.editor.defaults.text,a=e.pos.para,o=e.num.index,i=t.textContainer.data(Shape.textBody.editorData),r=0;return $.each(i,function(e,t){if(r+=t[Shape.textBody.indexId],a=e,r>o-1)return r-=t,!1}),{para:a,index:r}}getPreviousParaForDown(e){let t=this.editor.defaults.text,a=e.pos.para,o=e.num.index,i=t.textContainer.data(Shape.textBody.editorData),r=0,s=this.textComposer.getLastIndex();return $.each(i,function(e,t){if(r+=t[Shape.textBody.indexId],a=e,r>o+1)return!1}),r=r===s?r-1:r,{para:a,index:r}}getIndexForWord(e,t){let a=Shape.textBody.paras.portions.t;e.data("subword")&&(e=a.words.getParentWord(e));let o=a.line.getParentLine(e),i=o.closest("."+Shape.textBody.paraId),r=i.closest("#"+Shape.textBody.textContainer),s=Shape.textBody.getIndexNo(e,o),n=Shape.textBody.getIndexNo(o,i),d={pos:{para:Shape.textBody.getIndexNo(i,r),line:n,word:s},element:{para:i,line:o,word:e}};return this.getCurrentStartEnd(d,r,t)}getCurrentStartEnd(e,t,a,o,i){let r=(o||this.editor).defaults.text,s=e.pos.para,n=e.pos.line,d=e.pos.line,p=e.pos.word,l=e.pos.word,h=this.textComposer.getLastIndex(i),c=0,f=0,u=0,m=0,g=e.element.para,S=e.element.line,x=e.element.word,v=x,y=x,E=S,C=S,O=(t=t&&t.length?t:r.textContainer).data(Shape.textBody.editorData),b=g.data(Shape.textBody.editorData),T=S.data(Shape.textBody.editorData),w=[],D=[];w.push(T),D.push({start:p,end:l});let P=x.data("broken");if(P){let e=Shape.textBody.paras.portions.t,t=P.before,a=x,o=S;for(;t;){let i=e.words.getPrevWordInPara(a,o),r=!1;(a=i.word).length&&(o=i.line,n=e.line.getLineIndex(o),T=o.data(Shape.textBody.editorData),w.splice(0,0,T),p=Shape.textBody.getIndexNo(a,o),D.push({start:p,end:0}),r=a.data("broken"),v=a,E=o),t=!(!r||!r.before)}for(t=P.after;t;){let a=e.words.getNextWordInPara(x,S),o=!1;a.word.length&&(x=a.word,S=a.line,d=e.line.getLineIndex(S),T=S.data(Shape.textBody.editorData),w.push(T),l=Shape.textBody.getIndexNo(x,S),D.push({start:0,end:l}),o=x.data("broken"),y=x,C=S),t=!(!o||!o.after)}}$.each(O,function(e,t){if(c+=t[Shape.textBody.indexId],e>=s)return c-=t[Shape.textBody.indexId],!1}),f=c,$.each(b,function(e,t){e<n&&(f+=t[Shape.textBody.indexId])}),m=u=f,$.each(w,function(e,t){let a=D[e].start,o=D[e].end;$.each(t,function(e,t){e<a?(u+=t[Shape.textBody.indexId],m=u):e<=o&&(m+=t[Shape.textBody.indexId])})}),m=m>=h?h-1:m;let L=x.data("space").length;return a&&(m-=L),{word:{start:u,end:m},spaceLength:L,wordElement:{start:v,end:y},lineElement:{start:E,end:C}}}getNextWord(e){let t=this.editor.defaults.text,a=this.getCurrentStartEnd(e),o=e.num.index,i=o,r=this.textComposer.getLastIndex()-1;if(i!==r&&(i=a.word.end)===o&&i!==r){let a,o=e.pos.para,s=e.pos.line,n=e.pos.word,d=e.element.para,p=e.element.line,l=t.textContainer.data(Shape.textBody.editorData),h=d.data(Shape.textBody.editorData),c=p.data(Shape.textBody.editorData);do{if(a=!1,n+1<=c.length-1)n++;else if(s+1<=h.length-1)s++,c=(p=$(d.find("."+Shape.textBody.lineId)[s])).data(Shape.textBody.editorData),n=0;else{if(!(o+1<=l.length-1))break;o++,h=(d=$(t.textContainer.find("."+Shape.textBody.paraId)[o])).data(Shape.textBody.editorData),s=0,c=(p=$(d.find("."+Shape.textBody.lineId)[s])).data(Shape.textBody.editorData),n=0}i+=c[n][Shape.textBody.indexId];let e=$(p.find("."+Shape.textBody.wordId)[n]);"SPACE"!==e.data().type&&(a=!0)}while(!a&&i!==r)}return i}getPrevWord(e){let t=this.editor.defaults.text,a=this.getCurrentStartEnd(e),o=e.num.index;if(0!==o){o=a.word.start;let i=e.num.ch;if(-1===i&&0!==o){let a=!1;do{let i=e.pos.word,r=e.pos.para,s=e.element.line,n=s.data(Shape.textBody.editorData);if(!(r-1>=0))break;{r--;let e=$(t.textContainer.find("."+Shape.textBody.paraId)[r]),a=e.data(Shape.textBody.editorData),o=a.length-1;i=(n=(s=$(e.find("."+Shape.textBody.lineId)[o])).data(Shape.textBody.editorData)).length-1}o-=n[i][Shape.textBody.indexId];let d=$(s.find("."+Shape.textBody.wordId)[i]);"SPACE"!==d.data().type&&(a=!0)}while(!a&&0!==o)}}return o}getTargetElementFromPosition(e,t){let a=this.editor.defaults.text,o=this.editor.commonTextEditor.textEditor,i=a.textContainer;t||(t=this.getDistanceFromTarget(e));let r=t.left,s=t.top,n=i.data(Shape.textBody.editorData),d=0;$.each(n,function(e,t){let a=$(i.find("."+Shape.textBody.paraId)[e]);if(o.getOffset(a).top>s)return d=0===e?0:e-1,!1;d=e});let p=$(i.find("."+Shape.textBody.paraId)[d]),l=p.data(Shape.textBody.editorData),h=0;return $.each(l,function(e,t){let a=$(p.find("."+Shape.textBody.lineId)[e]);if(o.getOffset(a).top>s)return h=0===e?0:e-1,!1;h=e}),{pos:{para:d,line:h},left:r}}_getTotalWordWidth(e,t){e||(e=t.data());let a=e.wordWidth;return e.space&&e.space.length&&$.each(e.space,function(e,t){a+=t.afterSpaceWidth}),a}getIndexFromPosition(e,t,a,o,i,r,s){let n=this.editor.defaults.text;if(a){let o=this.getTargetElementFromPosition(a);e=o.pos,t=o.left}let d=this.editor.commonTextEditor.textEditor,p=this,l=n.textContainer,h=0,c=e.para,f=e.line,u=l.data(Shape.textBody.editorData);$.each(u,function(e,t){e<c&&(h+=t[Shape.textBody.indexId])});let m=$(n.textContainer.find("."+Shape.textBody.paraId)[c]),g=m.data(Shape.textBody.editorData);$.each(g,function(e,t){e<f&&(h+=t[Shape.textBody.indexId])});let S=$(m.find("."+Shape.textBody.lineId)[f]),x=S.data(Shape.textBody.editorData),v=void 0,y=-1,E=!1,C=!1;if(x&&x.length){let e=S.find("."+Shape.textBody.wordId),a=d.getOffset($(e[0])).left;if(a>=t)return{index:h,stopCursorWrap:!1,isLineEnd:!1};$.each(e,function(e,o){let i=$(o).data();if((a+=p._getTotalWordWidth(i))>t)return a-=i.wordWidth,y=e,!1}),-1!==y&&y!==e.length-1||(E=!r,C=!s,y=e.length-1),$.each(x,function(e,t){e<y&&(h+=t[Shape.textBody.indexId])});let i=v=$(S.find("."+Shape.textBody.wordId).get(y)),n=!1,l=v.data();("LINEBREAK"===l.type||"EOP"===l.type&&0===y)&&(E=!1,C=!1);let f=l[Shape.textBody.editorData],u=-1;if(f&&f.length){let e=v.find("."+Shape.textBody.subwordId),a=d.getOffset($(e[0]),void 0,!0).left;$.each(e,function(e,o){if((a+=$(o).data("wordWidth"))>t)return a-=$(o).data("wordWidth"),u=e,!1}),-1===u&&(u=e.length-1),$.each(f,function(e,t){e<u&&(h+=t[Shape.textBody.indexId])}),i=$(v.find("."+Shape.textBody.subwordId).get(u)),n=!0}let m=d.getOffset(i,void 0,n).left,g={left:t-m},O=p.getCharIndex(g,i,v,c);h+=O.index;let b=this.textComposer.getLastIndex();return O.lastIndex&&h===b-1&&(h=o?b:h),{index:h,stopCursorWrap:E,isLineEnd:C}}return!1}updateElementDataForLineBreak(e,t,a){let o=e.element.para,i=e.pos.line,r=$(o.find("."+Shape.textBody.lineId)[i+1]),s=$(r.find("."+Shape.textBody.wordId)[0]),n=this.editor.commonTextEditor.textEditor.getOffset(s,void 0,void 0,a),d={left:n.left,top:n.top,height:s.data("wordHeight")};e.num.pos=d,t&&(e.pos.line=i+1)}getTargetElementFromIndex(e,t,a,o,i,r){let s,n,d=r||this.editor,p=d.defaults.text,l=this.textComposer;i?(s=i.textContainer,n=i.position):(s=p.textContainer,n=p.composer.position);let h=l.getObject(e,n),c=l.getLastIndex(n);if(e>c)return;if(e===c){let e=this.getTargetElementFromIndex(c-1,void 0,void 0,void 0,i,d);return e.num.lastIndex=!0,e}let f={},u=$(s.find("."+Shape.textBody.paraId)[h.para]);f.para=u;let m=s.data(Shape.textBody.editorData),g=0;$.each(m,function(e,t){if(e===h.para)return!1;g+=t[Shape.textBody.indexId]});let S=u.data(Shape.textBody.editorData),x=0,v=g;$.each(S,function(t,a){if((v+=a[Shape.textBody.indexId])>=e)return v-=a[Shape.textBody.indexId],x=t,!1});let y={para:h.para};y.line=x;let E=$(u.find("."+Shape.textBody.lineId)[x]);f.line=E;let C,O,b=E.data(Shape.textBody.editorData),T=0,w=v,D=!1,P=w,L=void 0,I=void 0;if(b&&b.length){$.each(b,function(t,a){if((w+=a[Shape.textBody.indexId])>=e)return w-=a[Shape.textBody.indexId],T=t,!1}),y.word=T;let t=$(E.find("."+Shape.textBody.wordId)[T]);f.word=t,C=t,D=!1,P=w,O=!1;let a=t.data(Shape.textBody.editorData);if(a&&a.length){O=!0;let o;if($.each(a,function(t,a){if((P+=a[Shape.textBody.indexId])>=e)return P-=a[Shape.textBody.indexId],o=t,O=!1,!1}),O){let e=$(t.find("."+Shape.textBody.subwordId)[a.length-1]);C=e,D=!0,P=w}else{y.subword=o,L=$(t.find("."+Shape.textBody.subwordId)[o+1]);let e=$(t.find("."+Shape.textBody.subwordId)[o]);C=e,f.subword=e,D=!0}}}else C=E.find("#dummyword"),y.word=0,Shape.log("dummyword==",g,v,w),D=!1,P=w;if(t)return y;I=this._checkSubPortion({paraNum:h.para,portionNum:h.portion,element:C,commentObj:i});let A=e-P;f.charCount=e-w-1;let N=this.editor.commonTextEditor.textEditor.getOffset(C,void 0,D,s,d),R=N.left;if(!a){if(!C||!C.data())return Shape.log("===issue: added for testing===="),Shape.log("subele",C,C&&C.data()?C.data():"nothiing no data"),void Shape.log("ind===",e,"wordIndex",T,"wordEle",wordEle,"lineIndex",x,"lineEle",E);let t,a,r=C.data().text?C.data().text:"",s=O?A-f.word.data().length+r.length:A,n=C.data("type"),d=0,p=!1;if("FIELD"===n&&(p=!0),p&&0!==s?(a=r.substr(0),t=s-1):(a=r.substring(0,s),t=s-a.length),t)$.each(f.word.data("space"),function(e,a){if(d+=a.afterSpaceWidth,0===--t)return!1});else{let e={targetText:r,offsetIndex:s,substr:a,nextSubword:L},t=0;if(!p)if(o){let a=this._checkDiacriticprev(e);if((t=a.indexChange)<0)return this.getTargetElementFromIndex(h.index+t,void 0,void 0,o,i)}else{let a=this._checkDiacriticnext(e);t=a.indexChange,h.index=h.index+t,h.ch=h.ch+t,f.charCount=f.charCount+t}}let l=this.getStringWidth(C,a,void 0,y.para,i);R=R+l+d}let B,_;if(I&&I.top)_=I.height,B=I.top;else{let e=f.para.data(Shape.textBody.editorData);_=e[y.line][Shape.textBody.height],B=N.top}if(!_){let e=f.para.data(Shape.textBody.editorData);_=e[y.line][Shape.textBody.height];let t=this.editor.commonTextEditor.textEditor.getOffset(f.line,void 0,void 0,s);B=t.top}let M={left:R,top:B,height:_};return h.pos=M,{num:h,element:f,pos:y}}_checkDiacriticnext(e){let t=this,a=e.targetText,o=e.offsetIndex,i=0,r=a.substring(o,a.length),s=r.length;if(s){let e=!1,n=!1,d=o?o-1:o,p=a.substr(d,1),l=p.charCodeAt(0);l>=t.range.highSurrogate.start&&l<=t.range.highSurrogate.end&&(e=!0);for(let a=0;a<s;a++){let o=r.substring(a,a+1),s=o.charCodeAt(0);if(e)s>=t.range.lowSurrogate.start&&s<=t.range.lowSurrogate.end?n=!0:Shape.error("== only highSurrogate value is present. there is NO lowSurrogate. "),e=!1;else if(!(s>=t.range.diacritic.start&&s<=t.range.diacritic.end))break;i=a+1}}return{indexChange:i}}_checkDiacriticprev(e){let t=this,a=e.targetText,o=e.offsetIndex,i=e.substr,r=e.nextSubword,s=0,n=!1,d=!1,p=a.substring(0,o+1);p.length===i.length&&r&&r.length&&(p+=r.data().text.substring(0,1));for(let e=p.length-1,a=1;e>=0;e--,a++){let o=p.substring(e,e+1),i=o.charCodeAt(0);if(i>=t.range.lowSurrogate.start&&i<=t.range.lowSurrogate.end?n=!0:n&&(i>=t.range.highSurrogate.start&&i<=t.range.highSurrogate.end?d=!0:Shape.error("== only lowSurrogate value is present. there is NO highSurrogate "),n=!1),!(i>=t.range.diacritic.start&&i<=t.range.diacritic.end||n))break;s=-a}return i=i.substring(0,i.length+s),{indexChange:s,substr:i}}_checkSubPortion(e){let t=e.paraNum,a=e.element,o=e.portionNum,i=e.commentObj?e.commentObj.textContainer:void 0,r=e.commentObj?e.commentObj.data:this.selector.getShapesOfZero().data,s=r.textBody.paras[t]?r.textBody.paras[t]:void 0,n=s?s.portions[o]:void 0,d=n?n.props:void 0,p=void 0;return d&&d.baseline&&(p=this._getSubPortionData(a,i)),p}_getSubPortionData(e,t,a){let o=void 0;if(e.data("subPortion")){a=a||e.closest("."+Shape.textBody.lineId),o=this.editor.commonTextEditor.textEditor.getOffset(e,void 0,!0,t);let i=e.data("wordHeight");o.top=(Shape.textBody.getMaxValue(a).height-i)*Shape.textBody.lineSpacingRatio+o.top+e.data("baseline"),o.height=i}return o}_getTotalSubwordText(e){let t="",a=e.data();if(a.hasSubword){let a=e.find("."+Shape.textBody.subwordId);$.each(a,function(e,a){let o=$(a).data();t+=o.text?o.text:""})}else t=a.text?a.text:"";return t}checkLastWord(e,t,a){let o=this.editor.defaults.text,i=e.pos.para,r=$.extend(!0,{},e),s=(a?a.position:o.composer.position)[i],n=e.num.index;if(n!==s[s.length-1]-1){let t=e.element.line,o=e.element.word,i=e.pos.word,s=o.data(),d=t.data(Shape.textBody.editorData),p=d&&i===d.length-1;if(p){let t=-1,i=s.space?s.space.length:0,d=e.element.subword?e.element.subword:e.element.word,p=d.data(),l=this._getTotalSubwordText(o),h=e.element.charCount;if("LINEBREAK"===p.type||(s.broken&&s.broken.after||!s.space||0===s.space.length)&&l.length===h+1?t=n+1:s.broken&&s.broken.after||h+1===l.length+i&&(t=n+1),t>-1){let e=this.getTargetElementFromIndex(t,void 0,!0,void 0,a);e&&(r=e)}}}else if(n==s[s.length-1]-1){let e=r.element.word,a=e.data();a&&"LINEBREAK"===a.type&&this.updateElementDataForLineBreak(r,t)}return r}_checkFlipFromTo(e,t,a,o){let i,r,s=this.editor.defaults.text;return e?(s.flipFromTo&&(e="from"===e?"to":"from"),t<=a?"from"===e?o>a?(r=o,i=a,s.flipFromTo=!s.flipFromTo):(i=o,r=a):o<t?(i=o,r=t,s.flipFromTo=!s.flipFromTo):(r=o,i=t):"from"===e?o<=t?(i=o,r=t):(r=o,i=t,s.flipFromTo=!s.flipFromTo):o<=a?(r=o,i=a):(i=o,r=a,s.flipFromTo=!s.flipFromTo)):(i=o,r=o,s.flipFromTo=!1),{fromIndex:i,toIndex:r}}_checkCursorType(e,t){return e===t?"cursor":"selection"}selectFromTablet(e,t,a){let o=this.editor.defaults.text,i=(this.editor.commonTextEditor.textEditor,{pageX:e,pageY:t}),r=this.getDistanceFromTarget(i),s=o.textContainer?o.textContainer.height():void 0,n=o.textContainer?o.textContainer.width():void 0;if(!s||!n||!a&&!r)return;let d=this.getTargetElementFromPosition(i,r),p=d.pos,l=d.left,h=o.from.num.index,c=o.to.num.index,f=this.getIndexFromPosition(p,l,void 0,a),u=f.index,m=this._checkFlipFromTo(a,h,c,u),g=m.fromIndex,S=m.toIndex,x=f.stopCursorWrap,v=x;this.editor.commonTextEditor.textEditor.textnavigation.move(g,S,x,v)}select(e,t,a,o,i,r,s){let n,d,p,l,h,c,f,u,m=this.editor.defaults.text,g=!1;s?(u=s.data,h=s.textContainer,c=s.position,f=this.textComposer.getLastIndex(c),g=!0):(u=this.selector.getShapesOfZero().data,h=m.textContainer,c=m.composer.position,f=this.textComposer.getLastIndex());let S=this.editor.commonTextEditor.textEditor;if(void 0===e)e=m.from.num.index,p=m.from;else{if(!(p=this.getTargetElementFromIndex(e,void 0,void 0,void 0,s)))return;e=p.num.index,m.from=g?m.from:p}if(void 0===t)t=m.to.num.index,l=m.to;else{if(!(l=this.getTargetElementFromIndex(t,void 0,void 0,void 0,s)))return;t=l.num.index,m.to=g?m.to:l}let x=e,v=t,y=!1;if(e>t){let a=e;e=t,t=a,n=$.extend(!0,{},l),d=$.extend(!0,{},p),y=!0}else n=$.extend(!0,{},p),d=$.extend(!0,{},l);let E=!1,C=!g&&(m.to.num.lastIndex&&-1===m.to.num.ch);if(e!==t||a||g){if(e!==t){let a=d.pos.para-1,o=d.element.word.data(),i=!(!o||"LINEBREAK"!==o.type);if(-1===a||t!==c[a][c[a].length-1]||C)i&&(E=!0);else if(i)this.updateElementDataForLineBreak(d,!0,h);else{let e=this.getTargetElementFromIndex(d.num.index-1,void 0,void 0,void 0,s),t=(d=$.extend(!0,{},e)).element.word.data(),a=!(!t||"LINEBREAK"!==t.type);a&&this.updateElementDataForLineBreak(d,!0,h)}e=(n=$.extend(!0,{},this.checkLastWord(n,!0,s))).num.index}}else{let a=d.element.word.data(),o=!(!a||"LINEBREAK"!==a.type);if(n=$.extend(!0,{},this.checkLastWord(n)),d=$.extend(!0,{},n),e=n.num.index,t=d.num.index,o&&m.to.num.lastIndex)return}r||g||(y?(m.from.cursorPosLeft=d.num.pos.left,m.to.cursorPosLeft=n.num.pos.left):(m.from.cursorPosLeft=n.num.pos.left,m.to.cursorPosLeft=d.num.pos.left));let O={},b=h.data(Shape.textBody.editorData),T=Shape.textBody.props.innerBox(h).data("translate_y"),w=n.pos.para,D=d.pos.para,P=n.pos.line,L=d.pos.line,I={},A=0,N=0;for(A=w;A<=D;A++){let a=$(h.find("."+Shape.textBody.paraId)[A]),o=a.data(Shape.textBody.editorData),i=o.length-1,r=A===w?n.pos.line:0,s=A===D?d.pos.line:i,p=Shape.textBody.sumOfArray(b,A-1),l=p.totalHeight+T+h.data("valignTop"),u=0,m=Shape.textBody.sumOfArray(o,r-1);0===r?u+=b[A].before?b[A].before:0:l+=b[A].before?b[A].before:0,s===i&&(u+=b[A].after?b[A].after:0),l+=m.totalHeight,O[A]={};let g=O[A];for(N=r;N<=s;N++){let r=$(a.find("."+Shape.textBody.lineId)[N]),s=$(r.find("."+Shape.textBody.wordId)[0]),p=$(r.find("."+Shape.textBody.wordId).get(-1)),m=S.getOffset(s,void 0,void 0,h),x=S.getOffset(p,void 0,void 0,h);u+=o[N][Shape.textBody.height],g[N]={left:0,width:0,top:l,height:u};let v=g[N];if(A===w&&N===P?(v.left=n.num.pos.left,v.width=x.left+this._getTotalWordWidth(void 0,p)-n.num.pos.left,I.start={left:v.left,top:v.top,width:0,height:v.height}):(v.left=m.left,v.width=x.left+this._getTotalWordWidth(void 0,p)-m.left),A===D&&N===L&&(v.width=w===D&&P===L?d.num.pos.left-n.num.pos.left:d.num.pos.left-m.left,I.end={left:v.left+v.width,top:v.top,width:0,height:v.height}),N!==i&&(A!==D||A===D&&N!==L)){let e=p.data();e&&"LINEBREAK"===e.type&&(v.width+=9,!(!I||!I.end)&&(I.end.left+=9))}else N===i&&e!==t&&t>=c[A][c[A].length-1]&&t!==f&&(v.width+=9,!(!I||!I.end)&&(I.end.left+=9));l+=u,u=0}}if(e===t&&(O[w][P].height=n.num.pos.height,O[w][P].top=n.num.pos.top),m.from.num.index===m.to.num.index){let e=O[w];e[P].width=this.defaultCursorWidth,I.start=$.extend(!0,{},e[P]),I.end=$.extend(!0,{},e[P])}let R=!1;if((C||E)&&(O[d.pos.para][d.pos.line].width+=9,I.end.left+=9,R=!0),g)return O;if(S.bulletchangeStatus(n,d),Shape.touchDevice){let e=this._checkCursorType(x,v),t={selectionData:O,dragPoints:I,type:e};this._triggerEventForTablet(t)}else this.createDiv(O,o,R),e!==t&&S.setCopiedContent();$(S.container).trigger("select_textobj_update")}_triggerEventForTablet(e){this.editor.container.trigger("cursorData",e)}count(e,t){let a,o=0;do{e=a=e.prev("."+t),o++}while(a.length);return o-1}getDistanceFromTarget(e,t){let a=this.editor.defaults.text,o=this.selector.getShapesOfZero();if(!o)return;let i=o.box,r=o.data,s=r.scale?r.scale:1,n=(e.pageX-a.shapeContainerOffset.left)/s,d=(e.pageY-a.shapeContainerOffset.top)/s;n-=a.boxOffset.left,d-=a.boxOffset.top;let p=Shape.getAngle(r.props.transform),l={left:n,top:d};if(p=p||0){let e=i.data(Shape.textbox),t=r.props.transform.dim,a=r.props.transform.pos,o=.5*t.width,s=.5*t.height,h=(Shape.textBody.updateDimension(e,r.props.transform),{x:a.left+o,y:a.top+s}),c=zoho.math.getRotatedValue(-1*p,n,d,h.x,h.y);l={left:n=c.x,top:d=c.y}}return l.left-=a.containerOffset.left,l.top-=a.containerOffset.top,t&&t.left?{left:l.left-t.left,top:l.top-t.top}:l}getStringWidth(e,t,a,o,i){let r=Shape.textBody.paras.portions.t;a||(a=e.clone(!0,!0)),a.data("text",t);let s=i?i.data:this.selector.getShapesOfZero().data;return s.textBody.paras.num=o,r.words.setDim(a,s),r.words.width(a)}getCharIndex(e,t,a,o){let i=t.data()&&t.data().text?t.data().text:"",r=t.clone(!0,!0),s=this.selector.getShapesOfZero().data,n=(s.scale&&s.scale,i.length),d=!0,p=a.data(),l=this,h=!1,c=0;var f=0;let u,m=t.data()?t.data(Shape.textBody.editorData):[];if(m&&m.length){let e=t.find("."+Shape.textBody.subwordId);$.each(m,function(t,a){c+=a[Shape.textBody.indexId];let o=$(e.get(t)).data();f+=o.wordWidth})}else if("FIELD"===p.type)h=!0,c++,f=p.wordWidth,p.wordWidth>e.left&&(d=!1);else for(let a=1;a<=n;a++){u=f;let s=i.substring(0,a);if(c=a,(f=l.getStringWidth(t,s,r,o))>e.left){d=!1;break}}let g=!1;d&&p&&p.space&&p.space.length?(u=f,$.each(p.space,function(t,a){if(f+=a.afterSpaceWidth,c++,f>e.left)return!1})):d&&(g=!0);let S=Math.abs(f-e.left),x=Math.abs(u-e.left),v=f;if(S>x&&(c--,v=u),!d&&!h){let e={targetText:i,offsetIndex:c},t=l._checkDiacriticnext(e),a=t.indexChange;c+=a}return r.remove(),{index:c,pos:v,height:void 0,lastIndex:g}}getTargetChar(e,t,a,o,i){let r=this.editor.defaults.text,s=this.editor.commonTextEditor.textEditor.getOffset(t,void 0,o);r.targetOffset=s;let n=this.getDistanceFromTarget(e,s),d=this.getCharIndex(n,t,a,i);return d.pos+=s.left,d.pos={left:d.pos,top:s.top,height:d.height},d.charOffset=n,d}addIndex(e,t){let a=0,o=e.data(Shape.textBody.editorData);for(let e=0;e<t;e++)a+=o[e][Shape.textBody.indexId];return a}getTargetIndex(e){let t=this.editor.defaults.text,a=e.targetObj,o=this.textComposer,i=t.textContainer,r=a.para,s=a.lineCanister,n=a.line,d=a.word,p=a.subword.length?a.subword:void 0,l=this.count(d,Shape.textBody.wordId),h=this.count(s,Shape.textBody.lineCanisterId),c=this.count(r,Shape.textBody.paraId),f=0;f+=this.addIndex(i,c),f+=this.addIndex(r,h),f+=this.addIndex(n,l);let u=!1,m=d,g=0;if(p){let e=this.count(p,Shape.textBody.subwordId,d);f+=g=this.addIndex(d,e),m=p,u=!0}let S=this.getTargetChar(e,m,d,u,c);if(0===S.index)return{index:f,newIndex:!0};g=g+S.index-1,f+=S.index;let x=o.getLastIndex();if(S.lastIndex&&f===x-1)return{index:x,newIndex:!0};let v=o.getObject(f),y=this._checkSubPortion({paraNum:v.para,portionNum:v.portion,element:m});if(y&&y.top)S.pos.height=y.height,S.pos.top=y.top;else if(!S.pos.height){let e=r.data(Shape.textBody.editorData);S.pos.height=e[h][Shape.textBody.height]}return S.pos.width=1,{index:f,indexPos:S,charCount:g,object:v}}down(e,t,a){let o=this.editor.defaults.text,i=this.editor.commonTextEditor.textEditor,r=this.textComposer,s=3===e.which,n=this.selector.getShapesOfZero().data,d=e.targetObj,p=e.shiftKey;if(o.current="to",o.editor.property=void 0,this.editor.container.trigger("text_editing",["text_Editable"]),r.init(n),this.init(a),i.bulletcheck(),s&&o.from.num.index!==o.to.num.index)return;let l;o.from.element.word&&(l=$.extend(!0,{},o.from));let h=!0,c=!1;if(!p||p&&void 0===o.from.num.index)if(e.data&&e.data.atStart){let e=this.getTargetElementFromIndex(0);if(!e)return;o.from.num=e.num,o.from.element=e.element,o.from.pos=e.pos}else if(d&&d.word&&d.word.length){let t=this.getTargetIndex(e);if(t.newIndex){let e=this.getTargetElementFromIndex(t.index);if(!e)return;o.from.num=e.num,o.from.element=e.element,o.from.pos=e.pos,h=!1}else{let e=t.index,a=this.getTargetElementFromIndex(e,!0);if(!a)return;let i=t.object,r=t.indexPos.pos;o.from.num.para=i.para,o.from.num.portion=i.portion,o.from.num.ch=i.ch,o.from.num.index=i.index,o.from.num.pos=r,o.from.element.para=d.para,o.from.element.line=d.line,o.from.element.word=d.word,o.from.element.subword=d.subword.length?d.subword:void 0,o.from.element.charCount=t.charCount,o.from.pos.para=a.para,o.from.pos.line=a.line,o.from.pos.word=a.word,o.from.pos.subword=a.subword?a.subword:void 0}}else{let t=this.getIndexFromPosition(void 0,void 0,e),a=this.getTargetElementFromIndex(t.index);if(!a)return;i.textnavigation.preMove(o.from,o.to),o.from.num=a.num,o.from.element=a.element,o.from.pos=a.pos,c=h=t.stopCursorWrap}if(l&&l.element.word[0]!==o.from.element.word[0]&&i._isEditable()){let e=i.textnavigation._spellCheckSameIndex(o.from,l);e&&i.textnavigation.triggerCursorTransit(void 0,void 0,{wordObj:e.wordObj})}o.textContainer.data("from",o.from),o.textContainer.removeData("to"),$(document).bind(this.editor.shapeEvent.EVENTS.MOUSEMOVE+".Shape",{editor:this.editor},this.move),$(document).bind(this.editor.shapeEvent.EVENTS.MOUSEUP+".Shape",{targetId:e.targetId,stopCursorWrap:h,isLineEnd:c,tripleClick:e.tripleClick,shiftKey:p,editor:this.editor},this.up)}move(e){let t=e.data.editor,a=t.defaults.text,o=(t.commonTextEditor.textEditor,t.shapeEvent),i=ZSEventHandler.getTarget(e),r=t.selector.getShapesOfZero().box;o.textEvent.setTextTarget(e);let s=e.targetObj,n=!1,d=t.selector.getShapesOfZero().data,p=i.closest("."+Shape.shapeClass);if(p.attr("id")!==d.nvOProps.nvDProps.id&&p.hasClass("cell")){let t={};t.start=r,t.end=p,e.data.event_out_of_shape=!0,p.trigger("event_out_of_shape",t)}else{if(e.data.event_out_of_shape){let a=t.getShapeContainer();a.find(".selectedArea").remove(),e.data.event_out_of_shape=!1}else void 0!==t.tableEditor&&t.tableEditor.clearSelectedArea();if(s&&s.word&&s.word.length){let o=t.commonTextEditor.textEditor.textselect.getTargetIndex(e);if(o.newIndex){let e=t.commonTextEditor.textEditor.textselect.getTargetElementFromIndex(o.index);if(!e)return;a.to.num=e.num,a.to.element=e.element,a.to.pos=e.pos}else{let e=o.index,i=t.commonTextEditor.textEditor.textselect.getTargetElementFromIndex(e,!0);if(!i)return;let r=o.object,n=o.indexPos.pos;a.to.num.para=r.para,a.to.num.portion=r.portion,a.to.num.ch=r.ch,a.to.num.index=r.index,a.to.num.pos=n,a.to.element.para=s.para,a.to.element.line=s.line,a.to.element.word=s.word,a.to.element.subword=s.subword.length?s.subword:void 0,a.to.element.charCount=o.charCount,a.to.pos.para=i.para,a.to.pos.line=i.line,a.to.pos.word=i.word,a.to.pos.subword=i.subword?i.subword:void 0}}else{let o=t.commonTextEditor.textEditor.textselect.getIndexFromPosition(void 0,void 0,e,!0),i=t.commonTextEditor.textEditor.textselect.getTargetElementFromIndex(o.index);if(!i)return;a.to.num=i.num,a.to.element=i.element,a.to.pos=i.pos,n=o.stopCursorWrap}a.textContainer.data("to",a.to),t.commonTextEditor.textEditor.textselect.select(void 0,void 0,!0,n)}}up(e){let t=e.data.editor,a=t.defaults.text,o=(a.from,e.data),i=t.config,r=o.isLineEnd,s=o.stopCursorWrap,n=t.commonTextEditor.textEditor.textselect;if(o.shiftKey){let t=n.getIndexFromPosition(void 0,void 0,e,!0),o=n.getTargetElementFromIndex(t.index);o&&(a.to.num=o.num,a.to.element=o.element,a.to.pos=o.pos,s=r=t.stopCursorWrap,a.textContainer.data("to",a.to))}if(a.textContainer.data("to")||(a.to=$.extend(!0,{},a.from)),t.commonTextEditor.textEditor._isSelectPara()||o.targetId===Shape.textBody.bullet||o.targetId===Shape.textBody.bulletSpanContent||o.tripleClick)t.commonTextEditor.textEditor.textnavigation.selectPara(a.from.num.para,a.to.num.para);else if(a.from.element.word.hasClass("userdatafield")&&o.targetId===Shape.textBody.wordContentId){let e=n.getCurrentStartEnd(a.from,void 0,!0),o=e.word.start,i=e.word.end;t.commonTextEditor.textEditor.textnavigation.move(o,i,!0)}else{let e=t.getSelectedShapes()[0],a=e?e.table.cells:[];t.tableEditor&&a.length?(t.tableEditor.select.setTableTextObject(),t.tableEditor.select.clear(),e.table.selectionType="CELL"):t.commonTextEditor.textEditor._isEditable()&&n.select(void 0,void 0,s,r)}t.focusEditor(),i.mouse.textEditingStarted(e);let d={from:t.commonTextEditor.textEditor.getOffset(a.from.element.word),to:t.commonTextEditor.textEditor.getOffset(a.to.element.word)};if(i.container.trigger("cursor_transit",[{type:"acrossPortions"}]),i.container.trigger("cursor_transit",[{type:"acrossParas"}]),i.container.trigger("cursor_transit",[{type:"acrossLines",lineObj:d}]),$(document).unbind(t.shapeEvent.EVENTS.MOUSEMOVE+".Shape",n.move),$(document).unbind(t.shapeEvent.EVENTS.MOUSEUP+".Shape",n.up),!t.commonTextEditor.textEditor._isEditable()){let e=t.defaults.text.from.num.index,a=t.defaults.text.to.num.index;e==a&&(t.selector.unSelectShapes([t.getSelectedShapes()[0].data.nvOProps.nvDProps.id]),t.clear())}}para(e,t){let a,o=this.editor.defaults.text;if(t=t||ZSEventHandler.getTarget(e).closest("#"+this.editor.commonTextEditor.textEditor.textEditingDivId),void 0!==o.from.num.para){let e=this.selector.getShapesOfZero(),o=t.attr("id");if(!(a=o==this.editor.commonTextEditor.textEditor.textEditingDivId)){let o=t.closest("."+Shape.shapeClass);if(o.length){let t=o.attr("id");a=t==e.data.nvOProps.nvDProps.id}}}return a}all(){let e=this.textComposer.getLastIndex();this.editor.commonTextEditor.textEditor.textnavigation.move(0,e,void 0,void 0,void 0,!0)}clear(){let e=this.editor.defaults.text.textContainer;this.editor.getSelectedShapes().length&&e&&e.length&&e.children(".selectedArea").remove(),this.editor.commonTextEditor.textEditor.textcursor.remove()}}class ZSShapeObjectEditor{constructor(e){this.editor=e,this.defaultEditorType=void 0,this.EDITORS={},this.init()}init(){let e=this,t=e.EDITORS,a=this.editor.config.isSupported;e.defaultEditorType=ShapeConstants.ShapeNodeType.SHAPE,t[ShapeConstants.ShapeNodeType.SHAPE]=new ZSShapeEditorObject(this.editor),a.groupshape&&(t[ShapeConstants.ShapeNodeType.GROUPSHAPE]=new ZSGroupShapeEditor(this.editor)),a.connector&&(t[ShapeConstants.ShapeNodeType.CONNECTOR]=new ZSConnectorObjectEditor(this.editor)),e.downloadPathKit(),a.combineObject&&(t[ShapeConstants.ShapeNodeType.COMBINEDOBJECT]=new ZSCombinedObjectEditor(this.editor)),(this.editor.config.loadFiles.table||this.editor.config.loadFiles.chart)&&(t[ShapeConstants.ShapeNodeType.GRAPHICFRAME]=new ZSGraphicFrameEditor(this.editor))}downloadPathKit(){if(this.editor.config.loadFiles.downloadPathKit&&!window.PathKit){let e=this.editor.config.get.showContextPath();PathKitInit({locateFile:t=>e+"wasm/pathkit.wasm"}).ready().then(e=>{window.PathKit=e})}}getEditor(e){let t=this.EDITORS[e];return void 0===t&&(t=this.getDefaultEditor()),t}getDefaultEditor(){let e=this;return e.EDITORS[e.defaultEditorType]}static getParentIds(e,t){let a=[];if(e.length&&e.data(Shape.parentType)){let t=ZSShapeObjectEditor.getParentsInfo(e);a=t.parentIds}return a}static getGrandParentId(e){let t;if(e.length&&e.data(Shape.parentType))if(e.data(Shape.grandParentId))t=e.data(Shape.grandParentId);else{let a=ZSShapeObjectEditor.getParentsInfo(e);t=a.grandParentId}return t}static getGrandParentBox(e,t){return ZSShapeObjectEditor.getParentsInfo(t)}static getParentsInfo(e,t=!1){let a,o=[];if(e.length)for(;e.data(Shape.parentId);){if(a=e.data(Shape.parentId),t)return a;o.push(a),e=e.closest(`#${a}`)}return t?a:{grandParentBox:e,grandParentId:a,parentIds:o}}static isGrandParentShapeLocked(e,t){let a=!1;if(void 0!==t.data(Shape.parentType)){let o=ZSShapeObjectEditor.getGrandParentBox(e,t);void 0!==o.box&&(a=!0===o.box.data("lock"))}return a}setDataUtil(e,t,a){let o=[];if(e.isInnerShape){let a=t.data("modifying"),i=e.props.fill&&e.props.fill.grp;a&&i&&ZSGroupShapeEditor.setInnerShapeData(e,t);let r=ZSShapeObjectEditor.getGrandParentId(t),s=this.editor.config.get.shape(r),n=this.innershapeSetData(e,t,s);for(let e of n)o.push(e);n=this.parentShape_refresh(e,t,s);for(let e of n)o.push(e)}else o.push({id:e.nvOProps.nvDProps.id,data:{action:"modify",data:a}}),e.type===ShapeConstants.ShapeNodeType.CONNECTOR&&e.nvOProps.nvODProps&&(delete e.nvOProps.nvODProps,o.push({id:e.nvOProps.nvDProps.id,data:{action:"removeData",data:["nvOProps.nvODProps"]}}));return o}resize_refresh(e,t,a){let o={props:{transform:{dim:{width:a.width,height:a.height},pos:{left:a.left,top:a.top},rotAngle:Shape.getAngle(e.props.transform),rotate:Shape.getAngle(e.props.transform)}}};void 0!==a.flipv&&(o.props.transform.flipv=a.flipv),void 0!==a.fliph&&(o.props.transform.fliph=a.fliph),void 0!==a.rotate&&(o.props.transform.rotAngle=Shape.getAngle(a),o.props.transform.rotate=o.props.transform.rotAngle),void 0!==a.geom&&(o.props.geom=a.geom);let i=[],r=this.editor.config.get.shapeContainer(t),s=t.data("modifying"),n=this.editor.config.isSupported.cloneEditing,d=this.getEditor(e.type);if(s&&n){d.resize_setBox(e,r,t);let a=e.isInnerShape&&e.props.fill&&e.props.fill.grp;if(a){let a=this.getEditor(ShapeConstants.ShapeNodeType.GROUPSHAPE);a.setInnerShapeData(e,t)}}else i=d.resize_setData(e,t,a,o),e.isInnerShape||d.resize_setBox(e,r,t);return i}move_refresh(e,t,a,o){let i={props:{transform:{pos:a}}},r=[],s=this.editor.config.get.shapeContainer(t),n=t.data("modifying"),d=this.editor.config.isSupported.cloneEditing,p=this.getEditor(e.type);if(o||(i.props.transform.dim=e.props.transform.dim,i.props.transform.rotAngle=Shape.getAngle(e.props.transform),i.props.transform.rotate=i.props.transform.rotAngle,i.props.transform.fliph=e.props.transform.fliph,i.props.transform.flipv=e.props.transform.flipv),n&&d){p.move_setBox(e,s,t);let a=e.isInnerShape&&e.props.fill&&e.props.fill.grp;if(a){let a=this.getEditor(ShapeConstants.ShapeNodeType.GROUPSHAPE);a.setInnerShapeData(e,t)}}else r=p.move_setData(e,t,a,i),e.isInnerShape||p.move_setBox(e,s,t);return r}rotate_refresh(e,t,a){let o={props:{transform:{rotAngle:Shape.getAngle(a),rotate:Shape.getAngle(a),pos:{left:a.left,top:a.top}}}},i=[],r=this.editor.config.get.shapeContainer(t),s=t.data("modifying"),n=this.editor.config.isSupported.cloneEditing,d=this.getEditor(e.type);if(s&&n){d.rotate_setBox(e,r,t);let a=e.isInnerShape&&e.props.fill&&e.props.fill.grp;if(a){let a=this.getEditor(ShapeConstants.ShapeNodeType.GROUPSHAPE);a.setInnerShapeData(e,t)}}else i=d.rotate_setData(e,t,a,o),e.isInnerShape||d.rotate_setBox(e,r,t);return i}innerShape_setData(e,t,a){let o=e.nvOProps.nvDProps.id;this.editor.clone&&(o=o.replace(this.editor.clone.options.cloneid,"")),a=Util.extend(!0,{},a),ShapeObject.updateShapeData(Grouping.props.transform,a,void 0,!0);let i=ShapeObject.getShape(o,a);Util.extend(!0,i.props.transform,e.props.transform),i.props.geom=e.props.geom;let r=t.data(Shape.parentId),s=ShapeObject.getShape(r,a);return Grouping.props.transform.originalData(s.props,i),i}innershapeSetData(e,t,a){let o=ShapeObject.getShape(e.nvOProps.nvDProps.id,a),i=this.innerShape_setData(e,t,a),r=[{id:e.nvOProps.nvDProps.id,data:{action:"modify",data:{props:{transform:Util.extend(!0,{},i.props.transform)}}}}];return i.props.geom&&(r[0].data.data.props.geom=Util.extend(!0,{},i.props.geom),o.props.geom=i.props.geom),o.props.transform=i.props.transform,r}_addInnerShapeObject(e,t,a,o,i){a=Util.extend(!0,{},a);let r=$.extend(!0,{},a),s=r;t!==a.nvOProps.nvDProps.id&&(ShapeObject.updateShapeData(Grouping.props.transform,r,void 0,!0),s=ShapeObject.getShape(t,r));let n;if((n=s.type===ShapeConstants.ShapeNodeType.COMBINEDOBJECT?s.combinedNodes:s.shapes).length>1&&0===o?o+=1:o===n.length&&(o-=1),a.type===ShapeConstants.ShapeNodeType.COMBINEDOBJECT){let t=n[o];e.rule=t.rule}let d=$(`#${e.nvOProps.nvDProps.id}`);if(d.data(Shape.parentType,s.type),d.data(Shape.parentId,s.nvOProps.nvDProps.id),e.nvOProps.nvDProps.id=Math.uuid(),Grouping.props.transform.originalData(r.props,s),a.type===ShapeConstants.ShapeNodeType.COMBINEDOBJECT&&i)for(let e=0;e<i.length;e++)n.push(i[e]);else n.push(e),Grouping.props.transform.originalData(r.props,e);let p=this.getEditor(s.type).parentShape_setData(e,void 0,s),l=this.parentShape_refresh(e,d,r);for(let e of l)p.push(e);return p}innershapeAddData(e,t,a,o,i){return{newShapeData:e,modifiedData:this._addInnerShapeObject(e,t,o,a,i)}}_removeInnerShapeObject(e,t,a,o){a=$.extend(!0,{},a);let i=$.extend(!0,{},a),r=i;e!==a.nvOProps.nvDProps.id&&(ShapeObject.updateShapeData(Grouping.props.transform,i,void 0,!0),r=ShapeObject.getShape(e,i));let s,n;for(let e=0;e<t.length;e++)if("object"!=typeof t[e]){s=t[e];let a=r.shapes.splice(s,1),d=$(`#${a[0].nvOProps.nvDProps.id}`),p=this.getEditor(r.type);n=p.parentShape_setData(a,void 0,r);for(let e of n)o.push(e);n=this.parentShape_refresh(a,d,i);for(let e of n)o.push(e)}else{let a=Object.keys(t[e])[0];s=t[e][a];for(let e=0;e<s.length;e++){let t=s[e],d=(r=ShapeObject.getShape(a,i)).shapes.splice(t,1),p=$(`#${d[0].nvOProps.nvDProps.id}`),l=this.getEditor(r.type);n=l.parentShape_setData(d,void 0,r);for(let e of n)o.push(e);n=this.parentShape_refresh(d,p,i);for(let e of n)o.push(e)}}return o}innershapeRemoveData(e,t,a,o){let i=[];if(zoho.array.sort(t),t.reverse(),"MASK"===o)i.push({id:e,data:{action:"removeData",data:["mask"]}});else for(let a=0;a<t.length;a++)if("object"!=typeof t[a])i.push({id:e,data:{action:"removeData",data:["shapes.arr:"+t[a]]}});else{let e=Object.keys(t[a])[0];index=t[a][e];for(let t=0;t<index.length;t++)i.push({id:e,data:{action:"removeData",data:["shapes.arr:"+index[t]]}})}return this._removeInnerShapeObject(e,t,a,i)}parentShape_refresh(e,t,a){let o=[],i=this.editor.config.get.shapeContainer(t),r=ZSShapeObjectEditor.getParentIds(t,i);for(let i of r){let r=ShapeObject.getShape(i,a),s=this.getEditor(r.type),n=s.parentShape_setData(e,t,r);for(let e of n)o.push(e)}let s=this.getEditor(a.type),n=i.find("#"+a.nvOProps.nvDProps.id);return s.parentShape_setBox(a,i,n),o}}class ZSShapeEditorObject{constructor(e){this.editor=e}resize_setData(e,t,a,o){return this.editor.shapeObjectEditor.setDataUtil(e,t,o)}resize_setBox(e,t,a){Shape.props.transform.set(e,t,a),Shape.props.transform.dependency(e,t,a)}move_setData(e,t,a,o){return this.editor.shapeObjectEditor.setDataUtil(e,t,o)}move_setBox(e,t,a){Shape.props.transform.pos.set(e,t,a)}rotate_setData(e,t,a,o){return this.editor.shapeObjectEditor.setDataUtil(e,t,o)}rotate_setBox(e,t,a){Shape.props.transform.set(e,t,a),Shape.props.transform.dependency(e,t,a)}}class ZSConnectorObjectEditor{constructor(e){this.editor=e}resize_setData(e,t,a,o){let i=[];if(e.isInnerShape){let a=ZSShapeObjectEditor.getGrandParentId(t),o=this.editor.config.get.shape(a),r=this.editor.shapeObjectEditor.innerShape_setData(e,t,o);for(let e of r)i.push(e);r=this.editor.shapeObjectEditor.parentShape_refresh(e,t,o);for(let e of r)i.push(e)}else{if(e.props.transform.rotAngle=Shape.getAngle(a),e.props.transform.rotate=Shape.getAngle(a),void 0!==a.geom&&(e.props.geom=a.geom),a.connectorData){e.nvOProps.nvODProps=e.nvOProps.nvODProps?e.nvOProps.nvODProps:{};let t=a.connectorData;t.start&&(t.start===e.nvOProps.nvODProps.start&&t.start.id===e.nvOProps.nvODProps.start.id||(t.start.id?(e.nvOProps.nvODProps.start=t.start,o.nvOProps={nvODProps:{start:{id:t.start.id,index:t.start.index}}}):e.nvOProps.nvODProps.start&&(delete e.nvOProps.nvODProps.start,i.push({id:e.nvOProps.nvDProps.id,data:{action:"removeData",data:["nvOProps.nvODProps.start"]}})))),t.end&&(t.end===e.nvOProps.nvODProps.end&&t.end.id===e.nvOProps.nvODProps.end.id||(t.end.id?(e.nvOProps.nvODProps.end=t.end,o.nvOProps={nvODProps:{end:{id:t.end.id,index:t.end.index}}}):e.nvOProps.nvODProps.end&&(delete e.nvOProps.nvODProps.end,i.push({id:e.nvOProps.nvDProps.id,data:{action:"removeData",data:["nvOProps.nvODProps.end"]}}))))}i.push({id:e.nvOProps.nvDProps.id,data:{action:"modify",data:o}})}return i}resize_setBox(e,t,a){Shape.props.geom._set(e,t,a),Shape.props.geom.dependency(e,t,a)}move_setData(e,t,a,o){return this.editor.shapeObjectEditor.EDITORS[ShapeConstants.ShapeNodeType.SHAPE].move_setData(e,t,a,o)}move_setBox(e,t,a){return this.editor.shapeObjectEditor.EDITORS[ShapeConstants.ShapeNodeType.SHAPE].move_setBox(e,t,a)}rotate_setData(e,t,a,o){return this.editor.shapeObjectEditor.EDITORS[ShapeConstants.ShapeNodeType.SHAPE].rotate_setData(e,t,a,o)}rotate_setBox(e,t,a){this.editor.shapeObjectEditor.EDITORS[ShapeConstants.ShapeNodeType.SHAPE].rotate_setBox(e,t,a)}}var ShapeEditorData;jQuery,ShapeEditorData={editorId:void 0,editing:!1,defaults:{showSmartGuides:!1,select:{shapes:[]},erase:{ready:void 0},draw:{genre:void 0,cursor:void 0,shape:void 0,preset:{shapeType:void 0,placeHolderType:void 0},custom:{shapeType:void 0,bind:void 0,tempObj:void 0,prePoints:[],ffPoints:void 0,point:void 0,effects:void 0}},crop:{cropBox:!1,instance:{cropFrame:void 0,cropImage:void 0,actualImage:void 0,alreadyCroppped:void 0,initialTransform:void 0}},connector:{ck:15},align:{type:"slide"},clear:function(e,t){var a=e.config.isSupported;e.defaults.crop.cropBox&&e.crop.removeCropFrame(),e.selector.bbox.remove();var o=e.getSelectedShapes();o.length&&(e.unSelectShapes(),ZSTriggers.triggerEvent("shape_unselected",{shapes:o},void 0,e),"GRAPHICFRAME"===o[0].data.type&&"TABLE"===o[0].data.obj.type&&e.config.container.trigger("clear_table")),a.draw&&e.draw.clear(),e.defaults.crop.cropBox=!1,e.pictureProps&&(e.pictureProps.setTransparentColor=!1),e.config.container.trigger("shapeeditor_cleared")},text:{bx:void 0,current:void 0,offset:void 0,contOffset:void 0,clonebox:void 0,flipFromTo:void 0,textContainer:void 0,isLineEnd:void 0,shapeContainer:void 0,shapeContainerOffset:void 0,containerOffset:void 0,composing:!1,from:{num:{para:void 0,portion:void 0,ch:void 0,index:void 0,pos:void 0},element:{para:void 0,line:void 0,word:void 0,subword:void 0,charCount:void 0},pos:{para:void 0,line:void 0,word:void 0,subword:void 0},cursorPosLeft:void 0,height:void 0},to:{num:{para:void 0,portion:void 0,ch:void 0,index:void 0,pos:void 0},element:{para:void 0,line:void 0,word:void 0,subword:void 0,charCount:void 0},pos:{para:void 0,line:void 0,word:void 0,subword:void 0},cursorPosLeft:void 0,height:void 0},IME:{contentEditable:void 0,defaultText:"&#8203",editing:void 0},composer:{position:[]},editor:{textEditingDiv:void 0,property:void 0,langproperty:void 0,cursor:{blinkId:void 0,cursorElement:void 0,prev:{from:void 0,to:void 0},desiredPos:{horizontal:void 0,vertical:void 0},containerOffset:void 0,cursorAppearence:["visible","hidden"]},IMEHandler:{shape:{dummySpan:void 0}}}}}};let ShapeObject;!function(e){"use strict";ShapeObject={groupingShapes:[ShapeConstants.ShapeNodeType.GROUPSHAPE,ShapeConstants.ShapeNodeType.COMBINEDOBJECT],RENDERERS:{},init(e){let t=this.RENDERERS;void 0!==Shape&&(t[ShapeConstants.ShapeNodeType.SHAPE]=Shape),void 0!==GroupShape&&(t[ShapeConstants.ShapeNodeType.GROUPSHAPE]=GroupShape),"undefined"!=typeof CombinedObject&&(t[ShapeConstants.ShapeNodeType.COMBINEDOBJECT]=CombinedObject),"undefined"!=typeof GraphicFrame&&(t[ShapeConstants.ShapeNodeType.GRAPHICFRAME]=GraphicFrame);for(let a in t){let o=t[a];"function"==typeof o.init&&o.init(e)}},getRenderer(e,t=!0){let a=this,o=a.RENDERERS[e];return t&&void 0===o&&(o=a.RENDERERS[ShapeConstants.ShapeNodeType.SHAPE]),o},getShapeObject(e,t){return this.getRenderer(t.type).getShapeObject(e,t)},getShape(e,t){return this.getRenderer(t.type).getShape(e,t)},updateShapeData(e,t,a,o){ShapeObject.getRenderer(t.type).updateShapeData(e,t,a,o)},updateInnerShapeData(e,t,a,o){Shape.updateShapeData(e,t,a,o),ShapeObject.groupingShapes.indexOf(t.type)>-1&&ShapeObject.updateShapeData(e,t,void 0,o)},box(e,t){let a=e.type?e.type.toLowerCase():void 0;return a&&void 0!==e[a]&&(e=e[a]),Shape.box(e,t)},isTextBox(e){let t=e.type.toLowerCase();return void 0!==e[t]&&(e=e[t]),void 0!==e.nvOProps&&void 0!==e.nvOProps.nvODProps&&e.nvOProps.nvODProps.textbox},_set(e,t,a){let o=ShapeObject.getRenderer(t.type),i=ShapeObject.box(t,a);o._set(e,t,a,i)},create:{updateAndDraw:(e,t)=>ShapeObject.getRenderer(e.type).create.updateAndDraw(e,t),draw:(e,t)=>ShapeObject.getRenderer(e.type).create.draw(e,t)},props:{set(e,t,a){let o=ShapeObject.getRenderer(e.type);o.props.set(e,t,a),"function"==typeof o.props.dependency&&o.props.dependency(e,t,a)},transform:{set(e,t,a){ShapeObject.getRenderer(e.type).props.transform.set(e,t,a)},dependency(e,t,a){ShapeObject.getRenderer(e.type).props.transform.dependency(e,t,a)},pos:{set(e,t,a){ShapeObject.getRenderer(e.type).props.transform.pos.set(e,t,a)}},dim:{set(e,t,a){ShapeObject.getRenderer(e.type).props.transform.dim.set(e,t,a)},dependency(e,t,a){ShapeObject.getRenderer(e.type).props.transform.dim.dependency(e,t,a)}}},fill:{set(e,t,a){ShapeObject.getRenderer(e.type).props.fill.set(e,t,a)}}}}}(jQuery),Math.uuid=function(){var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");return function(t,a){var o=e,i=[];if(a=a||o.length,t)for(s=0;s<t;s++)i[s]=o[0|Math.random()*a];else{var r;i[8]=i[13]=i[18]=i[23]="-",i[14]="4";for(var s=0;s<36;s++)i[s]||(r=0|16*Math.random(),i[s]=o[19==s?3&r|8:r])}return i.join("")}}(),Math.uuid2=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}).toUpperCase()};let Grouping;!function(e){"use strict";Grouping={props:{setData(e,t,a){let o=Grouping.props;for(let i in e)o[i]&&o[i].setData(e,t,a)},anim:{setData(){}},animData:{setData(){}},transform:{setData(e,t,a){let o,i=Grouping.props.transform;void 0!==t.type&&(o=t.type.toLowerCase()),void 0!==o&&t[o]&&(t=t[o]),i.dim.setData(e,t,a),i.pos.setData(e,t,a),a&&(i.flip.setData(e,t,a),i.rotate.setData(e,t,a))},originalData(e,t){let a,o=Grouping.props.transform;void 0!==t.type&&(a=t.type.toLowerCase()),void 0!==a&&t[a]&&(t=t[a]),o.rotate.originalData(e,t),o.flip.originalData(e,t),o.dim.originalData(e,t),o.pos.originalData(e,t)},pos:{setData(e,t,a){let o=e.transform,i=o.dim.width/o.chDim.width,r=o.dim.height/o.chDim.height,s=t.props.transform,n=Shape.getAngle(s);isNaN(i)&&(i=1),isNaN(r)&&(r=1);let d={x:0,y:0},p={x:0,y:0};if(n>44&&n<135||n>224&&n<315){let e=r,t=i,a=s.dim.width/e,o=s.dim.height/t,l=s.dim.width,h=s.dim.height,c=.5*l,f=.5*h;d=zoho.math.getRotatedValue(-1*n,0,0,c,f);let u=.5*a,m=.5*o;p=zoho.math.getRotatedValue(-1*n,0,0,u,m)}let l=a?o.pos.left:0,h=a?o.pos.top:0;s.pos.left=l+((s.pos.left+p.x-o.chPos.left)*i-d.x),s.pos.top=h+((s.pos.top+p.y-o.chPos.top)*r-d.y),s.pos.zindex=o.pos.zindex},originalData(e,t){let a=e.transform,o=a.chDim.width/a.dim.width,i=a.chDim.height/a.dim.height,r=t.props.transform,s=Shape.getAngle(r);isNaN(o)&&(o=1),isNaN(i)&&(i=1);let n={x:0,y:0},d={x:0,y:0};if(s>44&&s<135||s>224&&s<315){let e=i,t=o,a=r.dim.width/e,p=r.dim.height/t,l=r.dim.width,h=r.dim.height,c=.5*l,f=.5*h;n=zoho.math.getRotatedValue(-1*s,0,0,c,f);let u=.5*a,m=.5*p;d=zoho.math.getRotatedValue(-1*s,0,0,u,m)}let p=a.pos.left,l=a.pos.top;r.pos.left=a.chPos.left+((r.pos.left+d.x-p)*o-n.x),r.pos.top=a.chPos.top+((r.pos.top+d.y-l)*i-n.y),r.pos.zindex=a.pos.zindex}},dim:{setData(e,t){let a=e.transform,o=t.props.transform,i=a.dim.width/a.chDim.width,r=a.dim.height/a.chDim.height,s=Shape.getAngle(o);if(isNaN(i)&&(i=1),isNaN(r)&&(r=1),s>44&&s<135||s>224&&s<315){let e=i;i=r,r=e}o.dim.width=i*o.dim.width,o.dim.height=r*o.dim.height},originalData(e,t){let a=e.transform,o=t.props.transform,i=a.chDim.width/a.dim.width,r=a.chDim.height/a.dim.height,s=Shape.getAngle(o);if(isNaN(i)&&(i=1),isNaN(r)&&(r=1),s>44&&s<135||s>224&&s<315){let e=i;i=r,r=e}o.dim.width=i*o.dim.width,o.dim.height=r*o.dim.height}},flip:{setData(e,t,a){let o=e.transform,i=t.props.transform;if(o.fliph){let e=a?o.pos.left:0;i.pos.left=e+o.dim.width-(i.pos.left+i.dim.width-e),i.fliph=!i.fliph}if(o.flipv){let e=a?o.pos.top:0;i.pos.top=e+o.dim.height-(i.pos.top+i.dim.height-e),i.flipv=!i.flipv}},originalData(e,t){let a=e.transform,o=t.props.transform;if(a.fliph){let e=a.pos.left;o.pos.left=e+a.dim.width-(o.pos.left+o.dim.width-e),o.fliph=!o.fliph}if(a.flipv){let e=a.pos.top;o.pos.top=e+a.dim.height-(o.pos.top+o.dim.height-e),o.flipv=!o.flipv}}},rotate:{setData(e,t,a){let o=e.transform,i=t.props.transform,r=a?o.pos.left:0,s=a?o.pos.top:0,n=Shape.getAngle(o),d=r+.5*o.dim.width,p=s+.5*o.dim.height,l=zoho.math.getRotatedValue(n,i.pos.left,i.pos.top,d,p),h=zoho.math.getRotatedValue(n,0,0,.5*i.dim.width,.5*i.dim.height);i.pos.left=zoho.math.roundDecimal(l.x,4)-zoho.math.roundDecimal(h.x,4),i.pos.top=zoho.math.roundDecimal(l.y,4)-zoho.math.roundDecimal(h.y,4),i.rotAngle=Shape.getAngle(i),o.fliph&&!o.flipv||o.flipv&&!o.fliph?i.rotAngle=n-Shape.getAngle(i):i.rotAngle+=n,i.rotAngle%=360,i.rotate=i.rotAngle},originalData(e,t){let a=e.transform,o=t.props.transform,i=a.pos.left,r=a.pos.top,s=Shape.getAngle(a),n=i+.5*a.dim.width,d=r+.5*a.dim.height,p=zoho.math.getRotatedValue(-1*s,o.pos.left,o.pos.top,n,d),l=zoho.math.getRotatedValue(-1*s,0,0,.5*o.dim.width,.5*o.dim.height);o.pos.left=zoho.math.roundDecimal(p.x,4)-zoho.math.roundDecimal(l.x,4),o.pos.top=zoho.math.roundDecimal(p.y,4)-zoho.math.roundDecimal(l.y,4),o.rotAngle=Shape.getAngle(o),a.fliph&&!a.flipv||a.flipv&&!a.fliph?o.rotAngle=s-Shape.getAngle(o):o.rotAngle-=s,o.rotAngle%=360,o.rotate=o.rotAngle}}},fill:{setData(e,t,a){if(t&&t.type===ShapeConstants.ShapeNodeType.PICTURE)return;let o;void 0!==t.type&&(o=t.type.toLowerCase()),void 0!==o&&t[o]&&(t=t[o]),Grouping.props.fill[e.fill.type.toLowerCase()].setData(e,t,a)},setSilhouetteData(t,a,o,i){if(t.props.stroke&&t.props.stroke.fill&&"NONE"!==t.props.stroke.fill.type){let e;e=zoho.color.isDark(a.solid.color.rgb)?zoho.color.lighten(a.solid.color.rgb,.3):zoho.color.darken(a.solid.color.rgb,.3),t.props.stroke.fill.solid.color.rgb=e}if(!t.props.fill||t.props.fill.type!==ShapeConstants.FillType.SOLID)return;let r,s={};t.props.fill.solid&&t.props.fill.solid.color&&(r=t.props.fill.solid.color.tweaks),void 0!==r&&(void 0!==r.tint&&(s.tint=r.tint),void 0!==r.shade&&(s.shade=r.shade));let n=Util.extend(!0,{},a),d=e.extend(!0,{},n.solid.color.tweaks,s);Util.isEmptyObject(d)||(n.solid.color.tweaks=d),e.shapeUtil.mergeFill(n,o,i),t.props.fill=n},fillCalculation(e,t,a){let o,i,r=Util.extend(!0,{},e).fill,s=r.type.toUpperCase(),n=r[s.toLowerCase()];s===ShapeConstants.FillType.PICT?e.fill.pict&&(o=e.fill.pict.type[n.type.type.toLowerCase()]):s===ShapeConstants.FillType.GRADIENT&&(i=n.type.toLowerCase(),o=e.fill.gradient[i]?e.fill.gradient[i].offset:e.fill.gradient.offset);let d,p,l,h=0,c=0,f=0,u=0,m=e.transform.dim.width,g=e.transform.dim.height;o&&(s===ShapeConstants.FillType.PICT&&(o.left=Util.isNumeric(o.left)?o.left:0,o.right=Util.isNumeric(o.right)?o.right:0,o.top=Util.isNumeric(o.top)?o.top:0,o.bottom=Util.isNumeric(o.bottom)?o.bottom:0,o.offsetX=Util.isNumeric(o.offsetX)?o.offsetX:0,o.offsetY=Util.isNumeric(o.offsetY)?o.offsetY:0,o.scaleX=o.scale&&Util.isNumeric(o.scale.x)?o.scale.x:1,o.scaleY=o.scale&&Util.isNumeric(o.scale.y)?o.scale.y:1),h=-1*o.left*m,c=-1*o.right*m,f=-1*o.top*g,u=-1*o.bottom*g,d=o.fliph,p=o.flipv,l=Shape.getAngle(o));let S=e.transform,x=t.props.transform,v=Shape.getAngle(x),y=void 0!==l?l-v:-1*v,E=void 0!==l?l:0,C=.5*m,O=.5*g,b=t.props.transform.dim.width,T=t.props.transform.dim.height,w=zoho.math.getRotatedValue(-E,t.props.transform.pos.left,t.props.transform.pos.top,C,O),D=zoho.math.getRotatedValue(-E,0,0,.5*b,.5*T),P=zoho.math.roundDecimal(w.x,4)-zoho.math.roundDecimal(D.x,4),L=zoho.math.roundDecimal(w.y,4)-zoho.math.roundDecimal(D.y,4),I=parseFloat(P.toFixed(3)),A=parseFloat(L.toFixed(3)),N=e.transform.dim.width,R=e.transform.dim.height,B=t.props.transform.dim,_=N-B.width-I;_=parseFloat(_.toFixed(3));let M=R-B.height-A;M=parseFloat(M.toFixed(3));let U=0==B.width.toFixed(4)?1:B.width.toFixed(4),k=0==B.height.toFixed(4)?1:B.height.toFixed(4);d=void 0!==d?d:void 0!==S.fliph&&S.fliph,p=void 0!==p?p:void 0!==S.flipv&&S.flipv,s==ShapeConstants.FillType.GRADIENT&&(d=!1,p=!1);let G={left:-1*(I+h)/U,top:-1*(A+f)/k,right:-1*(_+c)/U,bottom:-1*(M+u)/k,rotate:y,scale:{x:1,y:1},fliph:!1,flipv:!1,isGroupshape:!0};if(s===ShapeConstants.FillType.PICT&&(G.offsetX=o?o.offsetX:0,G.offsetY=o?o.offsetY:0,G.scale.x=o?o.scaleX:1,G.scale.y=o?o.scaleY:1),t.type===ShapeConstants.ShapeNodeType.SHAPE&&d){let e=G.left;G.left=G.right,G.right=e,G.rotate=-G.rotate}if(t.type===ShapeConstants.ShapeNodeType.SHAPE&&p){let e=G.top;G.top=G.bottom,G.bottom=e,G.rotate=-G.rotate}s===ShapeConstants.FillType.PICT&&n?a?(delete n.type.tile,delete n.type.frame,delete n.value.serverUrl,delete n.value.dim):n.type[n.type.type.toLowerCase()]=G:s!==ShapeConstants.FillType.GRADIENT||a||(n[i]?n[i].offset=G:n.offset=G);let F=t.props.fill?t.props.fill:void 0;(F&&F.grp||!F)&&(t.props.fill=r,r&&(t.props.fill.grp=!(!F||!F.grp)))},grp:{setData(){}},solid:{setData(e,t){if(t.type===ShapeConstants.ShapeNodeType.PICTURE)return;let a=e.fill,o=t.props.fill?t.props.fill:void 0;t._silhouette?Grouping.props.fill.setSilhouetteData(t,a,t._themeInfo,t._themeRef):o&&o.grp&&(t.props.fill=a,a&&(t.props.fill.grp=!(!o||!o.grp)))}},pict:{setData(e,t,a){t.type!==ShapeConstants.ShapeNodeType.PICTURE&&Grouping.props.fill.fillCalculation(e,t,a)}},none:{setData(e,t){if(t.type===ShapeConstants.ShapeNodeType.PICTURE)return;let a=e.fill,o=t.props.fill?t.props.fill:void 0;o&&o.grp&&(t.props.fill=a,a&&(t.props.fill.grp=!(!o||!o.grp)))}},pattern:{setData(e,t,a){t.type!==ShapeConstants.ShapeNodeType.PICTURE&&Grouping.props.fill.fillCalculation(e,t,a)}},gradient:{setData(e,t,a){t.type!==ShapeConstants.ShapeNodeType.PICTURE&&Grouping.props.fill.fillCalculation(e,t,a)}}},effects:{setData(e,t,a){let o=Grouping.props.effects;o.shadow.setData(e,t,a),o.reflection.setData(e,t,a)},shadow:{setData(){}},reflection:{setData(){}}}}}}(jQuery);var GroupShape;!function(e){GroupShape={_set(e,t,a,o){t.groupshape&&(t=t.groupshape);let i=o||ShapeObject.box(t,a);e._grpSet(t,a,i),GroupShape._setInnerShapes(e,t,a)},_setInnerShapes(e,t,a){if(t.groupshape&&(t=t.groupshape),t.shapes)for(var o=0;o<t.shapes.length;o++){let i=t.shapes[o];ShapeObject._set(e,i,a)}if(t.mask&&t.type===ShapeConstants.ShapeNodeType.GROUPSHAPE){let o=ShapeObject.box(t.mask,a);t.mask.props.transform.pos.left=t.mask.props.transform.pos.top=0,ShapeObject._set(e,t.mask,a,o),t.mask.type!==ShapeConstants.ShapeNodeType.GROUPSHAPE&&t.mask.type!==ShapeConstants.ShapeNodeType.COMBINEDOBJECT||GroupShape.mask.updateClipPath(t.mask)}},create:{updateAndDraw:function(t,a){return t=e.extend(!0,{},t),GroupShape.props.setData(t),this.draw(t,a)},draw:function(t,a){t.grandParentId||(t.grandParentId=t.nvOProps.nvDProps.id),t.isSmartShape&&(void 0===t.className&&(t.className=""),t.className+=" "+Shape.smartShapeClass);let o=this.createGroupBox(t,a),i=document.createDocumentFragment(),r=t.nvOProps.nvDProps.id;if(o.data("shapeType",t.type),t.shapes)for(var s=0;s<t.shapes.length;s++){let e=t.shapes[s];e.grandParentId=t.grandParentId,void 0===e.className&&(e.className=""),e.className+=" "+Shape.groupedShapeClass;let a=ShapeObject.create.draw(e,o.find("#shapegroup"));void 0!==a&&(a.data(Shape.parentType,t.type),a.data(Shape.renderPlace,t.renderPlace),a.data(Shape.parentId,r),a.data(Shape.grandParentId,e.grandParentId),i.appendChild(a[0]))}if(void 0!==t.mask){let e=this.mask(t,a,o);i.prepend(e)}return i.hasChildNodes()&&e(`#${Shape.shapeId}`,o).append(i),t.doNotAppendToCont||a.append(o),t.props.alpha&&Shape.props.alpha.set(t,a,o),t.props.blur&&Shape.props.effects.blur.set(t,a,o),t.props.blend&&Shape.props.blend.set(t,a,o),t.nvOProps&&GroupShape.nvOProps.nvODProps.set(t,a,o),Shape.props.effects.set(t,a,o),GroupShape.props.transform.flip.set(t,a,o),GroupShape.props.transform.rotate.set(t,a,o),t.nvOProps.nvDProps.hidden&&o.hide(),o},createGroupBox:function(t,a){t=t.groupshape?t.groupshape:t;var o=Shape.create.getBBoxContainer(t,a),i=o.box,r=o.isSvgContainer,s=t.props.transform.pos;if(r)Shape.creator.posShape(e(i)[0],s);else{var n=t.props.transform.dim,d=Shape.creator.getRoot(i);Shape.creator.setRoot(d,n.width,n.height,a,t),i.css({left:t.props.transform.pos.left,top:t.props.transform.pos.top,position:"absolute"})}return i},mask:function(t,a,o){let i=t.mask;i.props;void 0===i.className&&(i.className=""),i.className+=" "+Shape.groupedShapeClass;let r=ShapeObject.create.draw(i,o);if(void 0!==r){r.data(Shape.parentType,t.type),r.data(Shape.renderPlace,t.renderPlace),r.data(Shape.parentId,t.nvOProps.nvDProps.id),r.data("mask",!0);var s=[];if(i.type===ShapeConstants.ShapeNodeType.GROUPSHAPE)for(var n=0;n<i.shapes.length;n++){var d=Shape.pathGenerator.getPathString(i.shapes[n]),p=Shape.creator.clip.createClipPath(r,d);s.push(p)}else{d=e(r).find("path").attr("d");s.push(Shape.creator.clip.createClipPath(o,d))}Shape.creator.clip.create(o,o,[s],"masking");let a=o.find(".rotategroup"),l=o.data(Shape.creator.clipId);return r.data(Shape.creator.clipId,l),Shape.creator.set(a,{"clip-path":"url(#"+l+")"}),r[0]}}},mask:{add(t,a){ShapeObject.updateInnerShapeData(Grouping.props,t.shapeObject,t.props,!1),t=e.extend(!0,{},t),GroupShape.props.setData(t);let o=e(`#${t.nvOProps.nvDProps.id}`),i=GroupShape.create.mask(t,a,o);o.find("#shapegroup")[0].prepend(i)},remove(t,a){let o=t.oldValue[t.oldValue.type.toLowerCase()].nvOProps.nvDProps.id,i=document.getElementById(o),r=e(`#${t.nvOProps.nvDProps.id}`);clipId=i.data("clipId"),r.removeData(Shape.creator.clipId),e(`#${clipId}`).remove(),e(i).remove()},set(e,t){},get(e,t){let a=e.mask;return e.shapeObject=a,e.shapeObjectIndex=t,e},shape:{get:e=>e.mask,preSet(e){},updateData(t){let a;t.parData&&(a=e.extend(!0,{},t.parData)),GroupShape.props.setData(a);let o=t.shapeObject.type.toLowerCase(),i=t.shapeObject[o]?t.shapeObject[o]:t.shapeObject,r=i.nvOProps.nvDProps.id,s=GroupShape.getShape(r,a);i.props=s.props,delete t.parData},set(e,t){},convert(e,t){}},updateClipPath:function(e){var t=document.getElementById(e.nvOProps.nvDProps.id),a=t.data("clipId"),o=document.getElementById(a);if(e.type===ShapeConstants.ShapeNodeType.GROUPSHAPE)for(var i=0;i<e.shapes.length;i++){var r=e.shapes[i],s=o.childNodes[i],n=Shape.pathGenerator.getPathString(r);Shape.creator.clip.createClipPath(t,n);Shape.creator.setPath(s,n)}else if(e.type===ShapeConstants.ShapeNodeType.COMBINEDOBJECT){var d=e.props.transform.dim,p=Shape.pathGenerator.getCustomPath(e.props.geom.custom,d.width,d.height);Shape.creator.setPath(o.childNodes[0],p.path[0])}}},shapes:{add:function(t,a){ShapeObject.updateInnerShapeData(Grouping.props,t.shapeObject,t.props,!1);let o=document.getElementById(t.nvOProps.nvDProps.id),i=o.querySelector(".shapegroup"),r=ShapeObject.create.draw(t.shapeObject,e(o));r.data(Shape.parentType,t.type),r.data(Shape.renderPlace,t.renderPlace),r.data(Shape.parentId,t.nvOProps.nvDProps.id);let s=0===t.shapeObjectIndex&&t.mask?t.shapeObjectIndex+1:t.shapeObjectIndex;i.insertBefore(r[0],i.children[s])},reorder:function(t,a){let o,i=t.shapeObject.nvOProps.nvDProps.id,r=t.nvOProps.nvDProps.id,s=t.ni,n=t.oi,d=e("#"+r).find(".group"),p=e("#"+i,a),l=e(p).closest(d),h=e(l[0].childNodes);s>n&&s++,(o=e(h.get(s))).length?e(p).insertBefore(o):l.append(p)},set:function(e,t){},get:function(e,t){var a=e.shapes;return e.shapeObject=a[t],e.shapeIndex=t,e.shapeObjectIndex=t,e},remove:function(t,a){let o=t.oldValue[t.oldValue.type.toLowerCase()].nvOProps.nvDProps.id;e(`#${o}`,a).remove()},combinedShape:{get:function(e){return void 0!==e.shapeObject?e.shapeObject:e},set:function(e,t){}},groupshape:{add:function(t,a){e.extend(!0,{},GroupShape.shapes.add)},get:function(t){this.updateData(t);var a;return a=e.Slide?e.Slide.shapes.groupshape.get(t):t.shapeObject,a.parData=e.extend(!0,{},t.parData?t.parData:a),a.oldValue=t.oldValue,a},updateData:function(t){var a=e.extend(!0,{},t.parData?t.parData:void 0);GroupShape.props.setData(a);var o=t.shapeObject.type.toLowerCase(),i=t.shapeObject[o]?t.shapeObject[o]:t.shapeObject,r=i.nvOProps.nvDProps.id,s=GroupShape.getChild(r,a);s&&s.props&&(i.props=s.props)},set:function(e,t){}},shape:{get:function(t){this.updateData(t);var a;return a=e.Slide?e.Slide.shapes.shape.get(t):t.shapeObject?t.shapeObject:t,a.parDataProps=e.extend(!0,{},t.props),a},updateData:function(t){var a=e.extend(!0,{},t.parData?t.parData:void 0);GroupShape.props.setData(a);var o=t.shapeObject.type.toLowerCase(),i=t.shapeObject[o]?t.shapeObject[o]:t.shapeObject,r=i.nvOProps.nvDProps.id,s=GroupShape.getChild(r,a);i.props=s.props,delete t.parData},set:function(e,t){},convert:function(t,a){e.Slide&&e.Slide.shapes.shape.convert(t,a)},value:{get:function(e,t){return e},set:function(e,t){Shape.picture.set(e,t)}}}},nvOProps:{nvDProps:{set(e,t){Shape.nvOProps.nvDProps.set(e,t)}},nvProps:{set:function(e,t){},get:function(e,t){return e}},nvODProps:{set:function(e,t,a){GroupShape.nvOProps.nvODProps.locks.set(e,t,a)},locks:{set:function(e,t,a){a=a||Shape.box(e,t);var o=e.nvOProps.nvODProps;if(o&&o.locks){var i=o.locks;i.noModify?a.data("groupshapelock",!0):a.data("groupshapelock",!1),this.updateInnerBoxes(e,a,i.noModify)}},updateInnerBoxes:function(e,t,a){var o=e.shapes;if(o)for(var i=0;i<o.length;i++){let e=o[i];if(e.type===ShapeConstants.ShapeNodeType.GROUPSHAPE)GroupShape.nvOProps.nvODProps.locks.updateInnerBoxes(e,t,a);else{let o=ShapeObject.box(e,t);o.data("lock",!!a)}}},remove:function(e,t,a){a=GroupShape.getBox(e,t),this.updateInnerBoxes(e,a,!1)}}}},props:{setData(e){GroupShape.updateShapeData(Grouping.props,e)},set:function(e,t){var a=GroupShape.props;a.setData(e,t),GroupShape._set(a,e,t)},_grpSet(e,t,a){let o=this;o.transform.pos._set(e,t,a),o.transform.flip._set(e,t,a),o.transform.rotate._set(e,t,a),o.effects._set(e,t,a)},_set:function(e,t,a){Shape.props.set(e,t,a),Shape.props.dependency(e,t,a)},remove:function(e,t){GroupShape.props.set(e,t)},blur:{get:function(e){return e},set:function(e,t,a=Shape.box(e,t)){Shape.props.effects.blur.set(e,t,a)}},alpha:{get:function(e){return e},set:function(e,t,a=Shape.box(e,t)){Shape.props.alpha.set(e,t,a)}},blend:{set:function(e,t,a){Shape.props.blend.set(e,t,a)}},anim:{set:function(e,t){},setData:function(e,t){},_grpSet:function(e,t){},_set:function(e,t){},remove:function(e,t){}},animData:{set:function(e,t){},setData:function(e,t){},_grpSet:function(e,t){},_set:function(e,t){},remove:function(e,t){}},animateThyself:{set:function(e,t){},_set:function(e,t){},setData:function(e,t){},_setData:function(e,t){},remove:function(e,t){}},transform:{preset:function(e,t,a){GroupShape.props.setData(e,t)},set:function(e,t,a,o){GroupShape._set(GroupShape.props.transform,e,t,a)},setData:function(e){GroupShape.updateShapeData(Grouping.props,e)},_set:function(e,t,a){Shape.props.transform.set(e,t,a),Shape.props.transform.dependency(e,t,a)},_grpSet:function(e,t,a){let o=this;a&&0===a.length||(o.pos._set(e,t,a),o.flip._set(e,t,a),o.rotate._set(e,t,a))},pos:{preset:function(e,t,a){GroupShape.props.setData(e,t)},set:function(e,t,a){this._grpSet(e,t)},_set:function(e,t,a){Shape.props.transform.pos.set(e,t,a)},_grpSet(e,t,a){this._set(e,t,a)},setData(e){GroupShape.updateShapeData(Grouping.props,e)}},dim:{preset:function(e,t,a){GroupShape.props.setData(e,t)},set:function(e,t){GroupShape._set(GroupShape.props,e,t)},_set:function(e,t,a){Shape.props.transform.dim.set(e,t,a),Shape.props.transform.dim.dependency(e,t,a)},dependency:function(t,a,o){if((o=o||Shape.box(t,a)).length){var i=!!a&&e(a).data("setMatrix");Shape.props.transform.setAttr(t.props.transform,o,void 0,t,i),GroupShape.props.transform.dependency(t,a,o)}},setData:function(e){GroupShape.updateShapeData(Grouping.props,e)}},flip:{set:function(e,t,a=Shape.box(e,t)){let o=(e.groupshape?e.groupshape:e).props.transform;Shape.props.transform.flip(o,a)},_grpSet:function(e,t,a){this._set(e,t,a)},_set:function(e,t,a){this.set(e,t,a)}},rotate:{set:function(e,t,a=Shape.box(e,t)){let o=(e.groupshape?e.groupshape:e).props.transform;Shape.props.transform.rotate(o,a)},_grpSet:function(e,t,a){this._set(e,t,a)},_set:function(e,t,a){this.set(e,t,a)}},dependency:function(e,t,a){(a=a||Shape.box(e,t)).length&&e.props.effects&&GroupShape.props.effects.set(e,t,a)}},fill:{preset:function(e,t,a){GroupShape.props.fill.setData(e,t)},set:function(e,t,a,o){GroupShape._set(GroupShape.props.fill,e,t)},setData(e){GroupShape.updateShapeData(Grouping.props,e)},_set:function(e,t,a){e.type!=ShapeConstants.ShapeNodeType.PICTURE&&(Shape.props.fill.set(e,t,a),Shape.props.fill.dependency(e,t,a))},_grpSet:function(e,t,a){},remove:function(e,t){GroupShape.props.fill.set(e,t)},grp:{set:function(){},setData:function(){},_set:function(){},_grpSet:function(){}},solid:{preset:function(e,t){GroupShape.props.fill.setData(e,t)},set:function(e,t){GroupShape._set(GroupShape.props.fill,e,t)},setData:function(e){GroupShape.updateShapeData(Grouping.props,e)},dependency:function(e,t,a){(e.nvOProps.nvODProps?e.nvOProps.nvODProps.silhouette:void 0)&&(GroupShape.props.fill.setData(e,t),this.setStroke(e,t))},setStroke:function(e,t){for(var a=0;a<e.shapes.length;a++){var o=e.shapes[a];if(o.type===ShapeConstants.ShapeNodeType.GROUPSHAPE)this.setStroke(o,t);else if(o.props.stroke&&o.props.stroke.fill&&"NONE"!==o.props.stroke.fill.type){var i=GroupShape.getBox(o,t);Shape.props.stroke.set(o,t,i)}}},_set:function(e,t,a){e.type!=ShapeConstants.ShapeNodeType.PICTURE&&Shape.props.fill.solid.set(e,t,a)},_grpSet:function(e,t,a){}},pict:{preset:function(e,t){GroupShape.props.fill.setData(e,t)},set:function(e,t){GroupShape._set(GroupShape.props.fill,e,t)},setData:function(e){GroupShape.updateShapeData(Grouping.props,e)},_set:function(e,t,a){e.type!=ShapeConstants.ShapeNodeType.PICTURE&&(Shape.props.fill.pict.set(e,t,a),Shape.props.fill.pict.dependency(e,t,a))},_grpSet:function(e,t,a){},remove:function(e,t){}},none:{preset:function(e,t){GroupShape.props.fill.setData(e,t)},set:function(e,t){GroupShape._set(GroupShape.props.fill,e,t)},setData:function(e){GroupShape.updateShapeData(Grouping.props,e)},_set:function(e,t,a){e.type!=ShapeConstants.ShapeNodeType.PICTURE&&Shape.props.fill.none.set(e,t,a)},_grpSet:function(e,t,a){}},pattern:{preset:function(e,t){GroupShape.props.fill.setData(e,t)},set:function(e,t){GroupShape._set(GroupShape.props.fill,e,t)},setData:function(e){GroupShape.updateShapeData(Grouping.props,e)},_set:function(e,t,a){e.type!=ShapeConstants.ShapeNodeType.PICTURE&&(Shape.props.fill.pattern.set(e,t,a),Shape.props.fill.pattern.dependency(e,t,a))},_grpSet(e,t,a){}},gradient:{preset:function(e,t){GroupShape.props.fill.setData(e,t)},set:function(e,t){GroupShape._set(GroupShape.props.fill,e,t)},setData:function(e){GroupShape.updateShapeData(Grouping.props,e)},_set:function(e,t,a){e.type!=ShapeConstants.ShapeNodeType.PICTURE&&(Shape.props.fill.gradient.set(e,t,a),Shape.props.fill.gradient.dependency(e,t,a))},_grpSet:function(e,t,a){}}},effects:{set:function(e,t,a){a=a||Shape.box(e,t),e.props.effects&&(GroupShape.props.effects.shadow.set(e,t,a),e.pdfVariables&&e.pdfVariables.noReflection||GroupShape.props.effects.reflection.set(e,t,a))},setData:function(e){GroupShape.props.effects.shadow.setData(e),GroupShape.props.effects.reflection.setData(e)},_grpSet:function(e,t,a){this._set(e,t,a)},_set:function(e,t,a){void 0!==e.props.effects&&(GroupShape.props.effects.shadow._set(e,t,a),GroupShape.props.effects.reflection._set(e,t,a))},remove:function(e,t,a=Shape.box(e,t)){GroupShape.props.effects.shadow.remove(e,t,a),GroupShape.props.effects.reflection.remove(e,t,a)},shadow:{set:function(e,t,a){let o=e.props.effects;void 0!==o.shadow&&Shape.props.effects.shadow.set(e,t,a),void 0!==o.shadows&&Shape.props.effects.shadows.set(e,t,a)},setData:function(e){},_grpSet:function(e,t,a){},_set:function(e,t,a){let o=e.props.effects;void 0!==o.shadow&&Shape.props.effects.shadow.set(e,t,a),void 0!==o.shadows&&Shape.props.effects.shadows.set(e,t,a)},remove:function(e,t,a){a=a||Shape.box(e,t),Shape.props.effects.shadow.remove(e,t,a)}},reflection:{set:function(e,t,a){Shape.props.effects.reflection.set(e,t,a)},setData:function(e){},_grpSet:function(e,t,a){},_set:function(e,t,a){Shape.props.effects.reflection.set(e,t,a)},remove:function(e,t,a){a=a||Shape.box(e,t),Shape.props.effects.reflection.remove(e,t,a)}}}},getShapeObject:function(e,t){let a=t[t.type.toLowerCase()];if(a.nvOProps.nvDProps.id===e)return t;if(void 0!==a.mask){let t=a.mask.type.toLowerCase();if(a.mask[t].nvOProps.nvDProps.id===e)return a.mask}let o=a.shapes;for(var i=0;i<o.length;i++){let t=o[i],a=ShapeObject.getShapeObject(e,t);if(void 0!==a)return a}},getShape:function(e,t){let a=t.shapes;if(t.nvOProps.nvDProps.id===e)return t;if(void 0!==t.mask&&t.mask.nvOProps.nvDProps.id===e)return t.mask;if(a)for(var o=0;o<a.length;o++){let t=a[o],i=ShapeObject.getShape(e,t);if(void 0!==i)return i}},getChild:function(e,t){for(var a=t&&t.shapes?t.shapes:[],o=0;o<a.length;o++){let t=a[o];var i=t.type;if((t=t[i.toLowerCase()]?t[i.toLowerCase()]:t).nvOProps.nvDProps.id===e)return t;if(i===ShapeConstants.ShapeNodeType.GROUPSHAPE){var r=GroupShape.getChild(e,t);if(r)return r}}},getShapeToGrandParentRoute:function(e,t){var a=[];return GroupShape.constructRoute(e,t,a),a.length?(a.push(t),a):a},constructRoute:function(t,a,o){if(a&&t){var i=!1,r=a&&a.groupshape?a.groupshape.shapes:a.shapes;return e.each(r,function(e,a){if("GROUPSHAPE"==a.type){if(i=GroupShape.constructRoute(t,a,o))return o.push(a),!0}else"SHAPE"==a.type&&(checkId=a.nvOProps?a.nvOProps.nvDProps.id:a.shape.nvOProps.nvDProps.id,checkId==t&&(i=!0))}),i}},getBox:function(t,a){var o=(t.groupshape?t.groupshape:t).nvOProps.nvDProps.id;return e("#"+o,a)},getGrandParentBox:function(t,a){var o,i=[],r=t;if(r.length&&r.data().parentId)for(;r.data().parentId;)o=r.data().parentId,i.push(o),r=e("#"+o,a);return{grandParentBox:r,grandParentId:o,parentIds:i}},updateShapeData:function(e,t,a,o){e||(e=GroupShape.props);var i,r,s=t.groupshape?t.groupshape:t,n=!1;if(s.nvOProps&&s.nvOProps.nvODProps&&(n=s.nvOProps.nvODProps?s.nvOProps.nvODProps.silhouette:void 0,i=s.themeInfo,r=s.themeRef),a||(a=s.props),void 0!==s.mask&&ShapeObject.updateInnerShapeData(e,s.mask,a,o),s.shapes)for(var d=0;d<s.shapes.length;d++){let t=s.shapes[d];n&&(t._silhouette=n,t._themeInfo=i,t._themeRef=r),ShapeObject.updateInnerShapeData(e,t,a,o),n&&(delete t._silhouette,delete t._themeInfo,delete t._themeRef)}}},e.extend(!0,GroupShape.shapes.shape,{props:Shape.props}),e.extend(!0,GroupShape.shapes,{picture:GroupShape.shapes.shape,connector:GroupShape.shapes.shape}),e.extend(!0,GroupShape.shapes.groupshape,GroupShape)}(jQuery);class ZSGroupShapeEditor{constructor(e){this.editor=e}resize_setData(e,t,a,o){return this.editor.shapeObjectEditor.setDataUtil(e,t,o)}resize_setBox(e,t,a){let o=$.extend(!0,{},e);GroupShape.props.transform.preset(o,t,a),GroupShape.props.transform.set(o,t,a),GroupShape.props.transform.dependency(o,t,a)}move_setData(e,t,a,o){return this.editor.shapeObjectEditor.setDataUtil(e,t,o)}move_setBox(e,t,a){let o=$.extend(!0,{},e);GroupShape.props.transform.preset(o,t,a),GroupShape.props.transform.pos.set(e,t,a)}rotate_setData(e,t,a,o){return this.editor.shapeObjectEditor.setDataUtil(e,t,o)}rotate_setBox(e,t,a){GroupShape.props.transform.pos.set(e,t,a),GroupShape.props.transform.rotate.set(e,t,a)}parentShape_setData(e,t,a){let o=[],i=[],r=Util.extend(!0,{},a.props.transform),s=a.mask;if(void 0!==s){s=Util.extend(!0,{},s),Grouping.props.transform.setData(a.props,s,!0);let e=s.props.transform,t=Shape.getCornerPoints(e.pos,e.dim,Shape.getAngle(e));i.push(t.c1,t.c2,t.c3,t.c4)}else if(a.shapes)for(let e of a.shapes){e=Util.extend(!0,{},e),Grouping.props.transform.setData(a.props,e,!0);let t=e.props.transform,o=Shape.getCornerPoints(t.pos,t.dim,Shape.getAngle(t));i.push(o.c1,o.c2,o.c3,o.c4)}return ZSGroupShapeEditor.updateChData(i,r),o.push({id:a.nvOProps.nvDProps.id,data:{action:"modify",data:{props:{transform:Util.extend(!0,{},r)}}}}),a.props.transform=r,o}parentShape_setBox(e,t,a=Shape.box(e,t)){let o=$.extend(!0,{},e);GroupShape.props.transform.preset(o,t,a),GroupShape.props.transform.set(o,t,a),GroupShape.props.transform.dependency(o,t,a),this.editor.editPoint&&this.editor.editPoint.editingMode||this.editor.selector.bbox.move(o,a)}setInnerShapeData(e,t){let a=this.editor,o=a.getShapeContainer(t),i=a.config.isSupported.cloneEditing,r=t,s=e.nvOProps.nvDProps.id;if(i&&(s=s.replace(this.editor.clone.options.cloneid,""),r=$("#"+s,o)),r.length&&r.data(Shape.parentType)===ShapeConstants.ShapeNodeType.GROUPSHAPE){let i=ZSShapeObjectEditor.getParentIds(r,o);if(i&&i.length){let n=i[i.length-1],d=a.config.get.shape(n),p=GroupShape.getShape(s,d),l=this.editor.shapeObjectEditor.innerShape_setData(e,r,d);Util.extend(!0,p.props.transform,l.props.transform),GroupShape.updateShapeData(Grouping.props,d),Util.extend(!0,e.props.fill,p.props.fill),ShapeObject.props.fill.set(e,o,t)}}}mData(e,t){let a,o,i;t=t.groupshape?t.groupshape:t;let r=ZSGroupShapeEditor.getParentShapeId(e);if(r)if(r==t.nvOProps.nvDProps.id)a=this.modifingData(e,t);else{o=ShapeObject.getShape(r,t);let s=$.extend(!0,{},o);i=this.mData(s,t),a=this.modifingData(e,i)}return a}modifydata(e){let t,a,o,i=this;if(o=i.editor.getShapeContainer(),(t=ShapeObject.box(e,o)).data(Shape.parentType)===ShapeConstants.ShapeNodeType.GROUPSHAPE){let o=t.data(Shape.parentId),r=i.editor.config.get.shape(o),s=i.modifydata(r,e);a=i.modifingData(e,s)}else a=e;return a}modifingData(e,t){t=t.groupshape?t.groupshape:t,e=e.groupshape?e.groupshape:e;let a=t.props;return Shape.updateShapeData(Grouping.props,e,a,!0),e}static getParentShapeId(e){let t,a;return t=e.nvOProps.nvDProps.id,a=$("#"+t),ZSShapeObjectEditor.getParentsInfo(a,!0)}static updateChData(e,t){let a=t.chDim,o=t.chPos,i=t.dim,r=t.pos,s=a.width/i.width,n=a.height/i.height,d=o.left-r.left,p=o.top-r.top,l=ZSGroupShapeEditor.getPosAndDim(e,t),h=l.left,c=l.top,f=l.width,u=l.height,m=l.dx,g=l.dy,S=h-t.pos.left,x=c-t.pos.top,v=f-t.dim.width,y=u-t.dim.height;t.dim.width=f,t.dim.height=u,t.chDim.width=f*s,t.chDim.height=u*n,t.pos.left=h-m,t.pos.top=c-g,t.chPos.left=h+d,t.chPos.top=c+p,t.fliph?(t.chPos.left-=S,t.chPos.left-=(v+S)*s):t.chPos.left-=S*(1-s),t.flipv?(t.chPos.top-=x,t.chPos.top-=(y+x)*n):t.chPos.top-=x*(1-n),t.dim.width=Util.roundOff(t.dim.width),t.dim.height=Util.roundOff(t.dim.height),t.chDim.width=Util.roundOff(t.chDim.width),t.chDim.height=Util.roundOff(t.chDim.height),t.pos.top=Util.roundOff(t.pos.top),t.pos.left=Util.roundOff(t.pos.left),t.chPos.top=Util.roundOff(t.chPos.top),t.chPos.left=Util.roundOff(t.chPos.left)}static getPosAndDim(e,t){if(0===e.length)return{width:t.dim.width,height:t.dim.height,left:t.pos.left,top:t.pos.top,dx:0,dy:0};let a={},o=Shape.getAngle(t);if(o){let i=Util.extend(!0,[],e),r=t.pos.left+.5*t.dim.width,s=t.pos.top+.5*t.dim.height;for(let t=0,a=e.length;t<a;t++)i[t]=zoho.math.getRotatedValue(-1*o,e[t].x,e[t].y,r,s);let n=VectorUtil.getMinAndMax(i);a.left=n.small.x,a.top=n.small.y,a.width=n.big.x-n.small.x,a.height=n.big.y-n.small.y;let d=a.width-t.dim.width,p=a.height-t.dim.height,l=a.left-t.pos.left,h=a.top-t.pos.top,c=r+d/2+l,f=s+p/2+h,u=zoho.math.getRotatedValue(o,c,f,r,s);i=[];for(let t=0,a=e.length;t<a;t++)i[t]=zoho.math.getRotatedValue(-1*o,e[t].x,e[t].y,u.x,u.y);let m=(n=VectorUtil.getMinAndMax(i)).small.x,g=n.small.y;a.dx=a.left-m,a.dy=a.top-g}else{let t=VectorUtil.getMinAndMax(e);a.left=t.small.x,a.top=t.small.y,a.width=t.big.x-t.small.x,a.height=t.big.y-t.small.y,a.dx=0,a.dy=0}return a}updateInnerShapeData(e,t){let a=t[t.length-1],o=this.editor.config.get.shape(a);return ShapeObject.updateShapeData(Grouping.props,o,void 0,!0),ShapeObject.getShape(e,o)}}!function(e){jQuery.extend({isObject:function(e){return"object"==typeof e},emptyBox:function(t){(t=e(t)).empty(),t.removeData()},getTimeElapsed:function(t){var a=Math.floor(t/1e3),o=Math.floor(a/60),i=Math.floor(a/3600),r=Math.floor(a/86400);return r>0?e.i18n("common","daysago",[r]):i>0?e.i18n("common","hoursago",[i]):o>0?e.i18n("common","minutesago",[o]):e.i18n("common","secondsago",[a])},getScrollWidth:function(){var t=e('<div style="width:100%;height:200px;" />'),a=e('<div style="position:absolute;top:0px;left:0px;visibility:hidden;width:200px;height:100px;overflow:hidden;" />');a.append(t),e(document.body).append(a);var o=t[0].offsetWidth;a.css({overflow:"scroll"});var i=t[0].offsetWidth;return o===i&&(i=a[0].clientWidth),a.remove(),o-i},replaceSplChar:function(e){return e&&(e=(e=e.replace(/</,"&lt")).replace(/>/,"&gt")),e},setPageTitle:function(e){document.title=this.getPageTitle(e)},getPageTitle:function(e){var t=this.unEscapeSingleQuote(e);return productName&&(t=t+" - "+productName),t},unEscapeString:function(e){return e&&(e=(e=(e=(e=(e=e.replace(/&amp;/g,"&")).replace(/&gt;/g,">")).replace(/&lt;/g,"<")).replace(/&#39;/g,"'")).replace(/&quot;/g,'"')),e},unEscapeSingleQuote:function(e){return e&&(e=e.replace(/&#39;/g,"'")),e},createObject:function(t){var a=void 0;if(t){var o=this,i=[];e.each(t,function(e,t){if(!a)return a={},a[t]={},i[i.length]=t,!0;o.getObject(a,i)[t]={},i[i.length]=t})}else a={};return a},getObject:function(t,a){var o=t;return e.each(a,function(e,t){if(!(o=o[t]))return!1}),o},setObj:function(t,a,o){var i=this.getObject(t,a);return e.extend(!0,i,o)},appendVendorPrefix:function(t,a){var o=document.createElement("div"),i=["Moz","Webkit","ms","O"];if(t in o.style)return t;var r=t;-1!=(t=t.replace(/^[a-z]/,function(e){return e.toUpperCase()})).indexOf("-")&&(t=t.replace(/-.{1}/g,function(e){return e.replace(/-/g,"").toUpperCase()}));var s=void 0;return e.each(i,function(a,i){var n=i+t;if(n in o.style)return t=n,s="-"+i.toLowerCase()+"-"+r,e.support[r]=t,!1}),o=null,a?s:t},isCSSPropsSupports:function(t){var a=document.createElement("div"),o=["Moz","Webkit","ms","O"],i=!1;return t in a.style?i=!0:(t=t.replace(/^[a-z]/,function(e){return e.toUpperCase()}),e.each(o,function(e,o){if(o+t in a.style)return i=!0,!1})),a=null,i},TAG_NAMES:{select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"},isEventSupported:function(e){var t=document.createElement(this.TAG_NAMES[e]||"div"),a=(e="on"+e)in t;return a||(t.setAttribute(e,"return;"),a="function"==typeof t[e]),t=null,a},isTouchDevice:function(){return this.isEventSupported("touchmove")}})}(jQuery);/*!
 * Chart.js v3.4.1
 * https://www.chartjs.org
 * (c) 2021 Chart.js Contributors
 * Released under the MIT License
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Chart=e()}(this,(function(){"use strict";const t="undefined"==typeof window?function(t){return t()}:window.requestAnimationFrame;function e(e,i,n){const o=n||(t=>Array.prototype.slice.call(t));let s=!1,a=[];return function(...n){a=o(n),s||(s=!0,t.call(window,(()=>{s=!1,e.apply(i,a)})))}}function i(t,e){let i;return function(){return e?(clearTimeout(i),i=setTimeout(t,e)):t(),e}}const n=t=>"start"===t?"left":"end"===t?"right":"center",o=(t,e,i)=>"start"===t?e:"end"===t?i:(e+i)/2,s=(t,e,i,n)=>t===(n?"left":"right")?i:"center"===t?(e+i)/2:e;var a=new class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,n){const o=e.listeners[n],s=e.duration;o.forEach((n=>n({chart:t,initial:e.initial,numSteps:s,currentStep:Math.min(i-e.start,s)})))}_refresh(){const e=this;e._request||(e._running=!0,e._request=t.call(window,(()=>{e._update(),e._request=null,e._running&&e._refresh()})))}_update(t=Date.now()){const e=this;let i=0;e._charts.forEach(((n,o)=>{if(!n.running||!n.items.length)return;const s=n.items;let a,r=s.length-1,l=!1;for(;r>=0;--r)a=s[r],a._active?(a._total>n.duration&&(n.duration=a._total),a.tick(t),l=!0):(s[r]=s[s.length-1],s.pop());l&&(o.draw(),e._notify(o,n,t,"progress")),s.length||(n.running=!1,e._notify(o,n,t,"complete"),n.initial=!1),i+=s.length})),e._lastDate=t,0===i&&(e._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){e&&e.length&&this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce(((t,e)=>Math.max(t,e._duration)),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!!(e&&e.running&&e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let n=i.length-1;for(;n>=0;--n)i[n].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}};
/*!
 * @kurkle/color v0.1.9
 * https://github.com/kurkle/color#readme
 * (c) 2020 Jukka Kurkela
 * Released under the MIT License
 */const r={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},l="0123456789ABCDEF",c=t=>l[15&t],h=t=>l[(240&t)>>4]+l[15&t],d=t=>(240&t)>>4==(15&t);function u(t){var e=function(t){return d(t.r)&&d(t.g)&&d(t.b)&&d(t.a)}(t)?c:h;return t?"#"+e(t.r)+e(t.g)+e(t.b)+(t.a<255?e(t.a):""):t}function f(t){return t+.5|0}const g=(t,e,i)=>Math.max(Math.min(t,i),e);function p(t){return g(f(2.55*t),0,255)}function m(t){return g(f(255*t),0,255)}function x(t){return g(f(t/2.55)/100,0,1)}function b(t){return g(f(100*t),0,100)}const _=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const y=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function v(t,e,i){const n=e*Math.min(i,1-i),o=(e,o=(e+t/30)%12)=>i-n*Math.max(Math.min(o-3,9-o,1),-1);return[o(0),o(8),o(4)]}function w(t,e,i){const n=(n,o=(n+t/60)%6)=>i-i*e*Math.max(Math.min(o,4-o,1),0);return[n(5),n(3),n(1)]}function M(t,e,i){const n=v(t,1,.5);let o;for(e+i>1&&(o=1/(e+i),e*=o,i*=o),o=0;o<3;o++)n[o]*=1-e-i,n[o]+=e;return n}function k(t){const e=t.r/255,i=t.g/255,n=t.b/255,o=Math.max(e,i,n),s=Math.min(e,i,n),a=(o+s)/2;let r,l,c;return o!==s&&(c=o-s,l=a>.5?c/(2-o-s):c/(o+s),r=o===e?(i-n)/c+(i<n?6:0):o===i?(n-e)/c+2:(e-i)/c+4,r=60*r+.5),[0|r,l||0,a]}function S(t,e,i,n){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,i,n)).map(m)}function P(t,e,i){return S(v,t,e,i)}function D(t){return(t%360+360)%360}function C(t){const e=y.exec(t);let i,n=255;if(!e)return;e[5]!==i&&(n=e[6]?p(+e[5]):m(+e[5]));const o=D(+e[2]),s=+e[3]/100,a=+e[4]/100;return i="hwb"===e[1]?function(t,e,i){return S(M,t,e,i)}(o,s,a):"hsv"===e[1]?function(t,e,i){return S(w,t,e,i)}(o,s,a):P(o,s,a),{r:i[0],g:i[1],b:i[2],a:n}}const O={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},T={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let A;function L(t){A||(A=function(){const t={},e=Object.keys(T),i=Object.keys(O);let n,o,s,a,r;for(n=0;n<e.length;n++){for(a=r=e[n],o=0;o<i.length;o++)s=i[o],r=r.replace(s,O[s]);s=parseInt(T[a],16),t[r]=[s>>16&255,s>>8&255,255&s]}return t}(),A.transparent=[0,0,0,0]);const e=A[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}function R(t,e,i){if(t){let n=k(t);n[e]=Math.max(0,Math.min(n[e]+n[e]*i,0===e?360:1)),n=P(n),t.r=n[0],t.g=n[1],t.b=n[2]}}function E(t,e){return t?Object.assign(e||{},t):t}function z(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=m(t[3]))):(e=E(t,{r:0,g:0,b:0,a:1})).a=m(e.a),e}function I(t){return"r"===t.charAt(0)?function(t){const e=_.exec(t);let i,n,o,s=255;if(e){if(e[7]!==i){const t=+e[7];s=255&(e[8]?p(t):255*t)}return i=+e[1],n=+e[3],o=+e[5],i=255&(e[2]?p(i):i),n=255&(e[4]?p(n):n),o=255&(e[6]?p(o):o),{r:i,g:n,b:o,a:s}}}(t):C(t)}class F{constructor(t){if(t instanceof F)return t;const e=typeof t;let i;var n,o,s;"object"===e?i=z(t):"string"===e&&(s=(n=t).length,"#"===n[0]&&(4===s||5===s?o={r:255&17*r[n[1]],g:255&17*r[n[2]],b:255&17*r[n[3]],a:5===s?17*r[n[4]]:255}:7!==s&&9!==s||(o={r:r[n[1]]<<4|r[n[2]],g:r[n[3]]<<4|r[n[4]],b:r[n[5]]<<4|r[n[6]],a:9===s?r[n[7]]<<4|r[n[8]]:255})),i=o||L(t)||I(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=E(this._rgb);return t&&(t.a=x(t.a)),t}set rgb(t){this._rgb=z(t)}rgbString(){return this._valid?(t=this._rgb)&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${x(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`):this._rgb;var t}hexString(){return this._valid?u(this._rgb):this._rgb}hslString(){return this._valid?function(t){if(!t)return;const e=k(t),i=e[0],n=b(e[1]),o=b(e[2]);return t.a<255?`hsla(${i}, ${n}%, ${o}%, ${x(t.a)})`:`hsl(${i}, ${n}%, ${o}%)`}(this._rgb):this._rgb}mix(t,e){const i=this;if(t){const n=i.rgb,o=t.rgb;let s;const a=e===s?.5:e,r=2*a-1,l=n.a-o.a,c=((r*l==-1?r:(r+l)/(1+r*l))+1)/2;s=1-c,n.r=255&c*n.r+s*o.r+.5,n.g=255&c*n.g+s*o.g+.5,n.b=255&c*n.b+s*o.b+.5,n.a=a*n.a+(1-a)*o.a,i.rgb=n}return i}clone(){return new F(this.rgb)}alpha(t){return this._rgb.a=m(t),this}clearer(t){return this._rgb.a*=1-t,this}greyscale(){const t=this._rgb,e=f(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){return this._rgb.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return R(this._rgb,2,t),this}darken(t){return R(this._rgb,2,-t),this}saturate(t){return R(this._rgb,1,t),this}desaturate(t){return R(this._rgb,1,-t),this}rotate(t){return function(t,e){var i=k(t);i[0]=D(i[0]+e),i=P(i),t.r=i[0],t.g=i[1],t.b=i[2]}(this._rgb,t),this}}function B(t){return new F(t)}const V=t=>t instanceof CanvasGradient||t instanceof CanvasPattern;function W(t){return V(t)?t:B(t)}function N(t){return V(t)?t:B(t).saturate(.5).darken(.1).hexString()}function H(){}const j=function(){let t=0;return function(){return t++}}();function $(t){return null==t}function Y(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return"[object"===e.substr(0,7)&&"Array]"===e.substr(-6)}function U(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)}const X=t=>("number"==typeof t||t instanceof Number)&&isFinite(+t);function q(t,e){return X(t)?t:e}function K(t,e){return void 0===t?e:t}const G=(t,e)=>"string"==typeof t&&t.endsWith("%")?parseFloat(t)/100:t/e,Z=(t,e)=>"string"==typeof t&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Q(t,e,i){if(t&&"function"==typeof t.call)return t.apply(i,e)}function J(t,e,i,n){let o,s,a;if(Y(t))if(s=t.length,n)for(o=s-1;o>=0;o--)e.call(i,t[o],o);else for(o=0;o<s;o++)e.call(i,t[o],o);else if(U(t))for(a=Object.keys(t),s=a.length,o=0;o<s;o++)e.call(i,t[a[o]],a[o])}function tt(t,e){let i,n,o,s;if(!t||!e||t.length!==e.length)return!1;for(i=0,n=t.length;i<n;++i)if(o=t[i],s=e[i],o.datasetIndex!==s.datasetIndex||o.index!==s.index)return!1;return!0}function et(t){if(Y(t))return t.map(et);if(U(t)){const e=Object.create(null),i=Object.keys(t),n=i.length;let o=0;for(;o<n;++o)e[i[o]]=et(t[i[o]]);return e}return t}function it(t){return-1===["__proto__","prototype","constructor"].indexOf(t)}function nt(t,e,i,n){if(!it(t))return;const o=e[t],s=i[t];U(o)&&U(s)?ot(o,s,n):e[t]=et(s)}function ot(t,e,i){const n=Y(e)?e:[e],o=n.length;if(!U(t))return t;const s=(i=i||{}).merger||nt;for(let a=0;a<o;++a){if(!U(e=n[a]))continue;const o=Object.keys(e);for(let n=0,a=o.length;n<a;++n)s(o[n],t,e,i)}return t}function st(t,e){return ot(t,e,{merger:at})}function at(t,e,i){if(!it(t))return;const n=e[t],o=i[t];U(n)&&U(o)?st(n,o):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=et(o))}function rt(t,e){const i=t.indexOf(".",e);return-1===i?t.length:i}function lt(t,e){if(""===e)return t;let i=0,n=rt(e,i);for(;t&&n>i;)t=t[e.substr(i,n-i)],i=n+1,n=rt(e,i);return t}function ct(t){return t.charAt(0).toUpperCase()+t.slice(1)}const ht=t=>void 0!==t,dt=t=>"function"==typeof t,ut=(t,e)=>{if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0},ft=Object.create(null),gt=Object.create(null);function pt(t,e){if(!e)return t;const i=e.split(".");for(let e=0,n=i.length;e<n;++e){const n=i[e];t=t[n]||(t[n]=Object.create(null))}return t}function mt(t,e,i){return"string"==typeof e?ot(pt(t,e),i):ot(pt(t,""),e)}var xt=new class{constructor(t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,e)=>N(e.backgroundColor),this.hoverBorderColor=(t,e)=>N(e.borderColor),this.hoverColor=(t,e)=>N(e.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.describe(t)}set(t,e){return mt(this,t,e)}get(t){return pt(this,t)}describe(t,e){return mt(gt,t,e)}override(t,e){return mt(ft,t,e)}route(t,e,i,n){const o=pt(this,t),s=pt(this,i),a="_"+e;Object.defineProperties(o,{[a]:{value:o[e],writable:!0},[e]:{enumerable:!0,get(){const t=this[a],e=s[n];return U(t)?Object.assign({},e,t):K(t,e)},set(t){this[a]=t}}})}}({_scriptable:t=>!t.startsWith("on"),_indexable:t=>"events"!==t,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});const bt=Math.PI,_t=2*bt,yt=_t+bt,vt=Number.POSITIVE_INFINITY,wt=bt/180,Mt=bt/2,kt=bt/4,St=2*bt/3,Pt=Math.log10,Dt=Math.sign;function Ct(t){const e=Math.round(t);t=At(t,e,t/1e3)?e:t;const i=Math.pow(10,Math.floor(Pt(t))),n=t/i;return(n<=1?1:n<=2?2:n<=5?5:10)*i}function Ot(t){const e=[],i=Math.sqrt(t);let n;for(n=1;n<i;n++)t%n==0&&(e.push(n),e.push(t/n));return i===(0|i)&&e.push(i),e.sort(((t,e)=>t-e)).pop(),e}function Tt(t){return!isNaN(parseFloat(t))&&isFinite(t)}function At(t,e,i){return Math.abs(t-e)<i}function Lt(t,e){const i=Math.round(t);return i-e<=t&&i+e>=t}function Rt(t,e,i){let n,o,s;for(n=0,o=t.length;n<o;n++)s=t[n][i],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Et(t){return t*(bt/180)}function zt(t){return t*(180/bt)}function It(t){if(!X(t))return;let e=1,i=0;for(;Math.round(t*e)/e!==t;)e*=10,i++;return i}function Ft(t,e){const i=e.x-t.x,n=e.y-t.y,o=Math.sqrt(i*i+n*n);let s=Math.atan2(n,i);return s<-.5*bt&&(s+=_t),{angle:s,distance:o}}function Bt(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Vt(t,e){return(t-e+yt)%_t-bt}function Wt(t){return(t%_t+_t)%_t}function Nt(t,e,i,n){const o=Wt(t),s=Wt(e),a=Wt(i),r=Wt(s-o),l=Wt(a-o),c=Wt(o-s),h=Wt(o-a);return o===s||o===a||n&&s===a||r>l&&c<h}function Ht(t,e,i){return Math.max(e,Math.min(i,t))}function jt(t){return Ht(t,-32768,32767)}function $t(t){return!t||$(t.size)||$(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Yt(t,e,i,n,o){let s=e[o];return s||(s=e[o]=t.measureText(o).width,i.push(o)),s>n&&(n=s),n}function Ut(t,e,i,n){let o=(n=n||{}).data=n.data||{},s=n.garbageCollect=n.garbageCollect||[];n.font!==e&&(o=n.data={},s=n.garbageCollect=[],n.font=e),t.save(),t.font=e;let a=0;const r=i.length;let l,c,h,d,u;for(l=0;l<r;l++)if(d=i[l],null!=d&&!0!==Y(d))a=Yt(t,o,s,a,d);else if(Y(d))for(c=0,h=d.length;c<h;c++)u=d[c],null==u||Y(u)||(a=Yt(t,o,s,a,u));t.restore();const f=s.length/2;if(f>i.length){for(l=0;l<f;l++)delete o[s[l]];s.splice(0,f)}return a}function Xt(t,e,i){const n=t.currentDevicePixelRatio,o=0!==i?Math.max(i/2,.5):0;return Math.round((e-o)*n)/n+o}function qt(t,e){(e=e||t.getContext("2d")).save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function Kt(t,e,i,n){let o,s,a,r,l;const c=e.pointStyle,h=e.rotation,d=e.radius;let u=(h||0)*wt;if(c&&"object"==typeof c&&(o=c.toString(),"[object HTMLImageElement]"===o||"[object HTMLCanvasElement]"===o))return t.save(),t.translate(i,n),t.rotate(u),t.drawImage(c,-c.width/2,-c.height/2,c.width,c.height),void t.restore();if(!(isNaN(d)||d<=0)){switch(t.beginPath(),c){default:t.arc(i,n,d,0,_t),t.closePath();break;case"triangle":t.moveTo(i+Math.sin(u)*d,n-Math.cos(u)*d),u+=St,t.lineTo(i+Math.sin(u)*d,n-Math.cos(u)*d),u+=St,t.lineTo(i+Math.sin(u)*d,n-Math.cos(u)*d),t.closePath();break;case"rectRounded":l=.516*d,r=d-l,s=Math.cos(u+kt)*r,a=Math.sin(u+kt)*r,t.arc(i-s,n-a,l,u-bt,u-Mt),t.arc(i+a,n-s,l,u-Mt,u),t.arc(i+s,n+a,l,u,u+Mt),t.arc(i-a,n+s,l,u+Mt,u+bt),t.closePath();break;case"rect":if(!h){r=Math.SQRT1_2*d,t.rect(i-r,n-r,2*r,2*r);break}u+=kt;case"rectRot":s=Math.cos(u)*d,a=Math.sin(u)*d,t.moveTo(i-s,n-a),t.lineTo(i+a,n-s),t.lineTo(i+s,n+a),t.lineTo(i-a,n+s),t.closePath();break;case"crossRot":u+=kt;case"cross":s=Math.cos(u)*d,a=Math.sin(u)*d,t.moveTo(i-s,n-a),t.lineTo(i+s,n+a),t.moveTo(i+a,n-s),t.lineTo(i-a,n+s);break;case"star":s=Math.cos(u)*d,a=Math.sin(u)*d,t.moveTo(i-s,n-a),t.lineTo(i+s,n+a),t.moveTo(i+a,n-s),t.lineTo(i-a,n+s),u+=kt,s=Math.cos(u)*d,a=Math.sin(u)*d,t.moveTo(i-s,n-a),t.lineTo(i+s,n+a),t.moveTo(i+a,n-s),t.lineTo(i-a,n+s);break;case"line":s=Math.cos(u)*d,a=Math.sin(u)*d,t.moveTo(i-s,n-a),t.lineTo(i+s,n+a);break;case"dash":t.moveTo(i,n),t.lineTo(i+Math.cos(u)*d,n+Math.sin(u)*d)}t.fill(),e.borderWidth>0&&t.stroke()}}function Gt(t,e,i){return i=i||.5,t&&t.x>e.left-i&&t.x<e.right+i&&t.y>e.top-i&&t.y<e.bottom+i}function Zt(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Qt(t){t.restore()}function Jt(t,e,i,n,o){if(!e)return t.lineTo(i.x,i.y);if("middle"===o){const n=(e.x+i.x)/2;t.lineTo(n,e.y),t.lineTo(n,i.y)}else"after"===o!=!!n?t.lineTo(e.x,i.y):t.lineTo(i.x,e.y);t.lineTo(i.x,i.y)}function te(t,e,i,n){if(!e)return t.lineTo(i.x,i.y);t.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?i.cp2x:i.cp1x,n?i.cp2y:i.cp1y,i.x,i.y)}function ee(t,e,i,n,o,s={}){const a=Y(e)?e:[e],r=s.strokeWidth>0&&""!==s.strokeColor;let l,c;for(t.save(),t.font=o.string,function(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]);$(e.rotation)||t.rotate(e.rotation);e.color&&(t.fillStyle=e.color);e.textAlign&&(t.textAlign=e.textAlign);e.textBaseline&&(t.textBaseline=e.textBaseline)}(t,s),l=0;l<a.length;++l)c=a[l],r&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),$(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,i,n,s.maxWidth)),t.fillText(c,i,n,s.maxWidth),ie(t,i,n,c,s),n+=o.lineHeight;t.restore()}function ie(t,e,i,n,o){if(o.strikethrough||o.underline){const s=t.measureText(n),a=e-s.actualBoundingBoxLeft,r=e+s.actualBoundingBoxRight,l=i-s.actualBoundingBoxAscent,c=i+s.actualBoundingBoxDescent,h=o.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=o.decorationWidth||2,t.moveTo(a,h),t.lineTo(r,h),t.stroke()}}function ne(t,e){const{x:i,y:n,w:o,h:s,radius:a}=e;t.arc(i+a.topLeft,n+a.topLeft,a.topLeft,-Mt,bt,!0),t.lineTo(i,n+s-a.bottomLeft),t.arc(i+a.bottomLeft,n+s-a.bottomLeft,a.bottomLeft,bt,Mt,!0),t.lineTo(i+o-a.bottomRight,n+s),t.arc(i+o-a.bottomRight,n+s-a.bottomRight,a.bottomRight,Mt,0,!0),t.lineTo(i+o,n+a.topRight),t.arc(i+o-a.topRight,n+a.topRight,a.topRight,0,-Mt,!0),t.lineTo(i+a.topLeft,n)}function oe(t,e,i){i=i||(i=>t[i]<e);let n,o=t.length-1,s=0;for(;o-s>1;)n=s+o>>1,i(n)?s=n:o=n;return{lo:s,hi:o}}const se=(t,e,i)=>oe(t,i,(n=>t[n][e]<i)),ae=(t,e,i)=>oe(t,i,(n=>t[n][e]>=i));function re(t,e,i){let n=0,o=t.length;for(;n<o&&t[n]<e;)n++;for(;o>n&&t[o-1]>i;)o--;return n>0||o<t.length?t.slice(n,o):t}const le=["push","pop","shift","splice","unshift"];function ce(t,e){t._chartjs?t._chartjs.listeners.push(e):(Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),le.forEach((e=>{const i="_onData"+ct(e),n=t[e];Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value(...e){const o=n.apply(this,e);return t._chartjs.listeners.forEach((t=>{"function"==typeof t[i]&&t[i](...e)})),o}})})))}function he(t,e){const i=t._chartjs;if(!i)return;const n=i.listeners,o=n.indexOf(e);-1!==o&&n.splice(o,1),n.length>0||(le.forEach((e=>{delete t[e]})),delete t._chartjs)}function de(t){const e=new Set;let i,n;for(i=0,n=t.length;i<n;++i)e.add(t[i]);return e.size===n?t:Array.from(e)}function ue(t){let e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function fe(t,e,i){let n;return"string"==typeof t?(n=parseInt(t,10),-1!==t.indexOf("%")&&(n=n/100*e.parentNode[i])):n=t,n}const ge=t=>window.getComputedStyle(t,null);function pe(t,e){return ge(t).getPropertyValue(e)}const me=["top","right","bottom","left"];function xe(t,e,i){const n={};i=i?"-"+i:"";for(let o=0;o<4;o++){const s=me[o];n[s]=parseFloat(t[e+"-"+s+i])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}function be(t,e){const{canvas:i,currentDevicePixelRatio:n}=e,o=ge(i),s="border-box"===o.boxSizing,a=xe(o,"padding"),r=xe(o,"border","width"),{x:l,y:c,box:h}=function(t,e){const i=t.native||t,n=i.touches,o=n&&n.length?n[0]:i,{offsetX:s,offsetY:a}=o;let r,l,c=!1;if(((t,e,i)=>(t>0||e>0)&&(!i||!i.shadowRoot))(s,a,i.target))r=s,l=a;else{const t=e.getBoundingClientRect();r=o.clientX-t.left,l=o.clientY-t.top,c=!0}return{x:r,y:l,box:c}}(t,i),d=a.left+(h&&r.left),u=a.top+(h&&r.top);let{width:f,height:g}=e;return s&&(f-=a.width+r.width,g-=a.height+r.height),{x:Math.round((l-d)/f*i.width/n),y:Math.round((c-u)/g*i.height/n)}}const _e=t=>Math.round(10*t)/10;function ye(t,e,i,n){const o=ge(t),s=xe(o,"margin"),a=fe(o.maxWidth,t,"clientWidth")||vt,r=fe(o.maxHeight,t,"clientHeight")||vt,l=function(t,e,i){let n,o;if(void 0===e||void 0===i){const s=ue(t);if(s){const t=s.getBoundingClientRect(),a=ge(s),r=xe(a,"border","width"),l=xe(a,"padding");e=t.width-l.width-r.width,i=t.height-l.height-r.height,n=fe(a.maxWidth,s,"clientWidth"),o=fe(a.maxHeight,s,"clientHeight")}else e=t.clientWidth,i=t.clientHeight}return{width:e,height:i,maxWidth:n||vt,maxHeight:o||vt}}(t,e,i);let{width:c,height:h}=l;if("content-box"===o.boxSizing){const t=xe(o,"border","width"),e=xe(o,"padding");c-=e.width+t.width,h-=e.height+t.height}return c=Math.max(0,c-s.width),h=Math.max(0,n?Math.floor(c/n):h-s.height),c=_e(Math.min(c,a,l.maxWidth)),h=_e(Math.min(h,r,l.maxHeight)),c&&!h&&(h=_e(c/2)),{width:c,height:h}}function ve(t,e,i){const n=e||1,o=Math.floor(t.height*n),s=Math.floor(t.width*n);t.height=o/n,t.width=s/n;const a=t.canvas;return a.style&&(i||!a.style.height&&!a.style.width)&&(a.style.height=`${t.height}px`,a.style.width=`${t.width}px`),(t.currentDevicePixelRatio!==n||a.height!==o||a.width!==s)&&(t.currentDevicePixelRatio=n,a.height=o,a.width=s,t.ctx.setTransform(n,0,0,n,0,0),!0)}const we=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(t){}return t}();function Me(t,e){const i=pe(t,e),n=i&&i.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function ke(t,e){return"native"in t?{x:t.x,y:t.y}:be(t,e)}function Se(t,e,i,n){const{controller:o,data:s,_sorted:a}=t,r=o._cachedMeta.iScale;if(r&&e===r.axis&&a&&s.length){const t=r._reversePixels?ae:se;if(!n)return t(s,e,i);if(o._sharedOptions){const n=s[0],o="function"==typeof n.getRange&&n.getRange(e);if(o){const n=t(s,e,i-o),a=t(s,e,i+o);return{lo:n.lo,hi:a.hi}}}}return{lo:0,hi:s.length-1}}function Pe(t,e,i,n,o){const s=t.getSortedVisibleDatasetMetas(),a=i[e];for(let t=0,i=s.length;t<i;++t){const{index:i,data:r}=s[t],{lo:l,hi:c}=Se(s[t],e,a,o);for(let t=l;t<=c;++t){const e=r[t];e.skip||n(e,i,t)}}}function De(t,e,i,n){const o=[];if(!Gt(e,t.chartArea,t._minPadding))return o;return Pe(t,i,e,(function(t,i,s){t.inRange(e.x,e.y,n)&&o.push({element:t,datasetIndex:i,index:s})}),!0),o}function Ce(t,e,i,n,o){const s=function(t){const e=-1!==t.indexOf("x"),i=-1!==t.indexOf("y");return function(t,n){const o=e?Math.abs(t.x-n.x):0,s=i?Math.abs(t.y-n.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(s,2))}}(i);let a=Number.POSITIVE_INFINITY,r=[];if(!Gt(e,t.chartArea,t._minPadding))return r;return Pe(t,i,e,(function(i,l,c){if(n&&!i.inRange(e.x,e.y,o))return;const h=i.getCenterPoint(o);if(!Gt(h,t.chartArea,t._minPadding))return;const d=s(e,h);d<a?(r=[{element:i,datasetIndex:l,index:c}],a=d):d===a&&r.push({element:i,datasetIndex:l,index:c})})),r}function Oe(t,e,i,n){const o=ke(e,t),s=[],a=i.axis,r="x"===a?"inXRange":"inYRange";let l=!1;return function(t,e){const i=t.getSortedVisibleDatasetMetas();let n,o,s;for(let t=0,a=i.length;t<a;++t){({index:n,data:o}=i[t]);for(let t=0,i=o.length;t<i;++t)s=o[t],s.skip||e(s,n,t)}}(t,((t,e,i)=>{t[r](o[a],n)&&s.push({element:t,datasetIndex:e,index:i}),t.inRange(o.x,o.y,n)&&(l=!0)})),i.intersect&&!l?[]:s}var Te={modes:{index(t,e,i,n){const o=ke(e,t),s=i.axis||"x",a=i.intersect?De(t,o,s,n):Ce(t,o,s,!1,n),r=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach((t=>{const e=a[0].index,i=t.data[e];i&&!i.skip&&r.push({element:i,datasetIndex:t.index,index:e})})),r):[]},dataset(t,e,i,n){const o=ke(e,t),s=i.axis||"xy";let a=i.intersect?De(t,o,s,n):Ce(t,o,s,!1,n);if(a.length>0){const e=a[0].datasetIndex,i=t.getDatasetMeta(e).data;a=[];for(let t=0;t<i.length;++t)a.push({element:i[t],datasetIndex:e,index:t})}return a},point:(t,e,i,n)=>De(t,ke(e,t),i.axis||"xy",n),nearest:(t,e,i,n)=>Ce(t,ke(e,t),i.axis||"xy",i.intersect,n),x:(t,e,i,n)=>(i.axis="x",Oe(t,e,i,n)),y:(t,e,i,n)=>(i.axis="y",Oe(t,e,i,n))}};const Ae=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),Le=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function Re(t,e){const i=(""+t).match(Ae);if(!i||"normal"===i[1])return 1.2*e;switch(t=+i[2],i[3]){case"px":return t;case"%":t/=100}return e*t}function Ee(t,e){const i={},n=U(e),o=n?Object.keys(e):e,s=U(t)?n?i=>K(t[i],t[e[i]]):e=>t[e]:()=>t;for(const t of o)i[t]=+s(t)||0;return i}function ze(t){return Ee(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Ie(t){return Ee(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Fe(t){const e=ze(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Be(t,e){t=t||{},e=e||xt.font;let i=K(t.size,e.size);"string"==typeof i&&(i=parseInt(i,10));let n=K(t.style,e.style);n&&!(""+n).match(Le)&&(console.warn('Invalid font style specified: "'+n+'"'),n="");const o={family:K(t.family,e.family),lineHeight:Re(K(t.lineHeight,e.lineHeight),i),size:i,style:n,weight:K(t.weight,e.weight),string:""};return o.string=$t(o),o}function Ve(t,e,i,n){let o,s,a,r=!0;for(o=0,s=t.length;o<s;++o)if(a=t[o],void 0!==a&&(void 0!==e&&"function"==typeof a&&(a=a(e),r=!1),void 0!==i&&Y(a)&&(a=a[i%a.length],r=!1),void 0!==a))return n&&!r&&(n.cacheable=!1),a}function We(t,e){const{min:i,max:n}=t;return{min:i-Math.abs(Z(e,i)),max:n+Z(e,n)}}const Ne=["left","top","right","bottom"];function He(t,e){return t.filter((t=>t.pos===e))}function je(t,e){return t.filter((t=>-1===Ne.indexOf(t.pos)&&t.box.axis===e))}function $e(t,e){return t.sort(((t,i)=>{const n=e?i:t,o=e?t:i;return n.weight===o.weight?n.index-o.index:n.weight-o.weight}))}function Ye(t,e,i,n){return Math.max(t[i],e[i])+Math.max(t[n],e[n])}function Ue(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Xe(t,e,i){const n=i.box,o=t.maxPadding;U(i.pos)||(i.size&&(t[i.pos]-=i.size),i.size=i.horizontal?n.height:n.width,t[i.pos]+=i.size),n.getPadding&&Ue(o,n.getPadding());const s=Math.max(0,e.outerWidth-Ye(o,t,"left","right")),a=Math.max(0,e.outerHeight-Ye(o,t,"top","bottom")),r=s!==t.w,l=a!==t.h;return t.w=s,t.h=a,i.horizontal?{same:r,other:l}:{same:l,other:r}}function qe(t,e){const i=e.maxPadding;function n(t){const n={left:0,top:0,right:0,bottom:0};return t.forEach((t=>{n[t]=Math.max(e[t],i[t])})),n}return n(t?["left","right"]:["top","bottom"])}function Ke(t,e,i){const n=[];let o,s,a,r,l,c;for(o=0,s=t.length,l=0;o<s;++o){a=t[o],r=a.box,r.update(a.width||e.w,a.height||e.h,qe(a.horizontal,e));const{same:s,other:h}=Xe(e,i,a);l|=s&&n.length,c=c||h,r.fullSize||n.push(a)}return l&&Ke(n,e,i)||c}function Ge(t,e,i){const n=i.padding;let o,s,a,r,l=e.x,c=e.y;for(o=0,s=t.length;o<s;++o)a=t[o],r=a.box,a.horizontal?(r.left=r.fullSize?n.left:e.left,r.right=r.fullSize?i.outerWidth-n.right:e.left+e.w,r.top=c,r.bottom=c+r.height,r.width=r.right-r.left,c=r.bottom):(r.left=l,r.right=l+r.width,r.top=r.fullSize?n.top:e.top,r.bottom=r.fullSize?i.outerHeight-n.bottom:e.top+e.h,r.height=r.bottom-r.top,l=r.right);e.x=l,e.y=c}xt.set("layout",{padding:{top:0,right:0,bottom:0,left:0}});var Ze={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},t.boxes.push(e)},removeBox(t,e){const i=t.boxes?t.boxes.indexOf(e):-1;-1!==i&&t.boxes.splice(i,1)},configure(t,e,i){e.fullSize=i.fullSize,e.position=i.position,e.weight=i.weight},update(t,e,i,n){if(!t)return;const o=Fe(t.options.layout.padding),s=Math.max(e-o.width,0),a=Math.max(i-o.height,0),r=function(t){const e=function(t){const e=[];let i,n,o;for(i=0,n=(t||[]).length;i<n;++i)o=t[i],e.push({index:i,box:o,pos:o.position,horizontal:o.isHorizontal(),weight:o.weight});return e}(t),i=$e(e.filter((t=>t.box.fullSize)),!0),n=$e(He(e,"left"),!0),o=$e(He(e,"right")),s=$e(He(e,"top"),!0),a=$e(He(e,"bottom")),r=je(e,"x"),l=je(e,"y");return{fullSize:i,leftAndTop:n.concat(s),rightAndBottom:o.concat(l).concat(a).concat(r),chartArea:He(e,"chartArea"),vertical:n.concat(o).concat(l),horizontal:s.concat(a).concat(r)}}(t.boxes),l=r.vertical,c=r.horizontal;J(t.boxes,(t=>{"function"==typeof t.beforeLayout&&t.beforeLayout()}));const h=l.reduce(((t,e)=>e.box.options&&!1===e.box.options.display?t:t+1),0)||1,d=Object.freeze({outerWidth:e,outerHeight:i,padding:o,availableWidth:s,availableHeight:a,vBoxMaxWidth:s/2/h,hBoxMaxHeight:a/2}),u=Object.assign({},o);Ue(u,Fe(n));const f=Object.assign({maxPadding:u,w:s,h:a,x:o.left,y:o.top},o);!function(t,e){let i,n,o;for(i=0,n=t.length;i<n;++i)o=t[i],o.horizontal?(o.width=o.box.fullSize&&e.availableWidth,o.height=e.hBoxMaxHeight):(o.width=e.vBoxMaxWidth,o.height=o.box.fullSize&&e.availableHeight)}(l.concat(c),d),Ke(r.fullSize,f,d),Ke(l,f,d),Ke(c,f,d)&&Ke(l,f,d),function(t){const e=t.maxPadding;function i(i){const n=Math.max(e[i]-t[i],0);return t[i]+=n,n}t.y+=i("top"),t.x+=i("left"),i("right"),i("bottom")}(f),Ge(r.leftAndTop,f,d),f.x+=f.w,f.y+=f.h,Ge(r.rightAndBottom,f,d),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},J(r.chartArea,(e=>{const i=e.box;Object.assign(i,t.chartArea),i.update(f.w,f.h)}))}};class Qe{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,n){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,n?Math.floor(e/n):i)}}isAttached(t){return!0}}class Je extends Qe{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}}const ti={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},ei=t=>null===t||""===t;const ii=!!we&&{passive:!0};function ni(t,e,i){t.canvas.removeEventListener(e,i,ii)}function oi(t,e,i){const n=t.canvas,o=n&&ue(n)||n,s=new MutationObserver((t=>{const e=ue(o);t.forEach((t=>{for(let n=0;n<t.addedNodes.length;n++){const s=t.addedNodes[n];s!==o&&s!==e||i(t.target)}}))}));return s.observe(document,{childList:!0,subtree:!0}),s}function si(t,e,i){const n=t.canvas,o=n&&ue(n);if(!o)return;const s=new MutationObserver((t=>{t.forEach((t=>{for(let e=0;e<t.removedNodes.length;e++)if(t.removedNodes[e]===n){i();break}}))}));return s.observe(o,{childList:!0}),s}const ai=new Map;let ri=0;function li(){const t=window.devicePixelRatio;t!==ri&&(ri=t,ai.forEach(((e,i)=>{i.currentDevicePixelRatio!==t&&e()})))}function ci(t,i,n){const o=t.canvas,s=o&&ue(o);if(!s)return;const a=e(((t,e)=>{const i=s.clientWidth;n(t,e),i<s.clientWidth&&n()}),window),r=new ResizeObserver((t=>{const e=t[0],i=e.contentRect.width,n=e.contentRect.height;0===i&&0===n||a(i,n)}));return r.observe(s),function(t,e){ai.size||window.addEventListener("resize",li),ai.set(t,e)}(t,a),r}function hi(t,e,i){i&&i.disconnect(),"resize"===e&&function(t){ai.delete(t),ai.size||window.removeEventListener("resize",li)}(t)}function di(t,i,n){const o=t.canvas,s=e((e=>{null!==t.ctx&&n(function(t,e){const i=ti[t.type]||t.type,{x:n,y:o}=be(t,e);return{type:i,chart:e,native:t,x:void 0!==n?n:null,y:void 0!==o?o:null}}(e,t))}),t,(t=>{const e=t[0];return[e,e.offsetX,e.offsetY]}));return function(t,e,i){t.addEventListener(e,i,ii)}(o,i,s),s}class ui extends Qe{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(function(t,e){const i=t.style,n=t.getAttribute("height"),o=t.getAttribute("width");if(t.$chartjs={initial:{height:n,width:o,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",i.boxSizing=i.boxSizing||"border-box",ei(o)){const e=Me(t,"width");void 0!==e&&(t.width=e)}if(ei(n))if(""===t.style.height)t.height=t.width/(e||2);else{const e=Me(t,"height");void 0!==e&&(t.height=e)}}(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e.$chartjs)return!1;const i=e.$chartjs.initial;["height","width"].forEach((t=>{const n=i[t];$(n)?e.removeAttribute(t):e.setAttribute(t,n)}));const n=i.style||{};return Object.keys(n).forEach((t=>{e.style[t]=n[t]})),e.width=e.width,delete e.$chartjs,!0}addEventListener(t,e,i){this.removeEventListener(t,e);const n=t.$proxies||(t.$proxies={}),o={attach:oi,detach:si,resize:ci}[e]||di;n[e]=o(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),n=i[e];if(!n)return;({attach:hi,detach:hi,resize:hi}[e]||ni)(t,e,n),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,n){return ye(t,e,i,n)}isAttached(t){const e=ue(t);return!(!e||!ue(e))}}var fi=Object.freeze({__proto__:null,BasePlatform:Qe,BasicPlatform:Je,DomPlatform:ui});const gi=t=>0===t||1===t,pi=(t,e,i)=>-Math.pow(2,10*(t-=1))*Math.sin((t-e)*_t/i),mi=(t,e,i)=>Math.pow(2,-10*t)*Math.sin((t-e)*_t/i)+1,xi={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>1-Math.cos(t*Mt),easeOutSine:t=>Math.sin(t*Mt),easeInOutSine:t=>-.5*(Math.cos(bt*t)-1),easeInExpo:t=>0===t?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>1===t?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>gi(t)?t:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(2-Math.pow(2,-10*(2*t-1))),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>gi(t)?t:pi(t,.075,.3),easeOutElastic:t=>gi(t)?t:mi(t,.075,.3),easeInOutElastic(t){const e=.1125;return gi(t)?t:t<.5?.5*pi(2*t,e,.45):.5+.5*mi(2*t-1,e,.45)},easeInBack(t){const e=1.70158;return t*t*((e+1)*t-e)},easeOutBack(t){const e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:t=>1-xi.easeOutBounce(1-t),easeOutBounce(t){const e=7.5625,i=2.75;return t<1/i?e*t*t:t<2/i?e*(t-=1.5/i)*t+.75:t<2.5/i?e*(t-=2.25/i)*t+.9375:e*(t-=2.625/i)*t+.984375},easeInOutBounce:t=>t<.5?.5*xi.easeInBounce(2*t):.5*xi.easeOutBounce(2*t-1)+.5},bi="transparent",_i={boolean:(t,e,i)=>i>.5?e:t,color(t,e,i){const n=W(t||bi),o=n.valid&&W(e||bi);return o&&o.valid?o.mix(n,i).hexString():e},number:(t,e,i)=>t+(e-t)*i};class yi{constructor(t,e,i,n){const o=e[i];n=Ve([t.to,n,o,t.from]);const s=Ve([t.from,o,n]);this._active=!0,this._fn=t.fn||_i[t.type||typeof s],this._easing=xi[t.easing]||xi.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=s,this._to=n,this._promises=void 0}active(){return this._active}update(t,e,i){const n=this;if(n._active){n._notify(!1);const o=n._target[n._prop],s=i-n._start,a=n._duration-s;n._start=i,n._duration=Math.floor(Math.max(a,t.duration)),n._total+=s,n._loop=!!t.loop,n._to=Ve([t.to,e,o,t.from]),n._from=Ve([t.from,o,e])}}cancel(){const t=this;t._active&&(t.tick(Date.now()),t._active=!1,t._notify(!1))}tick(t){const e=this,i=t-e._start,n=e._duration,o=e._prop,s=e._from,a=e._loop,r=e._to;let l;if(e._active=s!==r&&(a||i<n),!e._active)return e._target[o]=r,void e._notify(!0);i<0?e._target[o]=s:(l=i/n%2,l=a&&l>1?2-l:l,l=e._easing(Math.min(1,Math.max(0,l))),e._target[o]=e._fn(s,r,l))}wait(){const t=this._promises||(this._promises=[]);return new Promise(((e,i)=>{t.push({res:e,rej:i})}))}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let t=0;t<i.length;t++)i[t][e]()}}xt.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const vi=Object.keys(xt.animation);xt.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}),xt.set("animations",{colors:{type:"color",properties:["color","borderColor","backgroundColor"]},numbers:{type:"number",properties:["x","y","borderWidth","radius","tension"]}}),xt.describe("animations",{_fallback:"animation"}),xt.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}});class wi{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!U(t))return;const e=this._properties;Object.getOwnPropertyNames(t).forEach((i=>{const n=t[i];if(!U(n))return;const o={};for(const t of vi)o[t]=n[t];(Y(n.properties)&&n.properties||[i]).forEach((t=>{t!==i&&e.has(t)||e.set(t,o)}))}))}_animateOptions(t,e){const i=e.options,n=function(t,e){if(!e)return;let i=t.options;if(!i)return void(t.options=e);i.$shared&&(t.options=i=Object.assign({},i,{$shared:!1,$animations:{}}));return i}(t,i);if(!n)return[];const o=this._createAnimations(n,i);return i.$shared&&function(t,e){const i=[],n=Object.keys(e);for(let e=0;e<n.length;e++){const o=t[n[e]];o&&o.active()&&i.push(o.wait())}return Promise.all(i)}(t.options.$animations,i).then((()=>{t.options=i}),(()=>{})),o}_createAnimations(t,e){const i=this._properties,n=[],o=t.$animations||(t.$animations={}),s=Object.keys(e),a=Date.now();let r;for(r=s.length-1;r>=0;--r){const l=s[r];if("$"===l.charAt(0))continue;if("options"===l){n.push(...this._animateOptions(t,e));continue}const c=e[l];let h=o[l];const d=i.get(l);if(h){if(d&&h.active()){h.update(d,c,a);continue}h.cancel()}d&&d.duration?(o[l]=h=new yi(d,t,l,c),n.push(h)):t[l]=c}return n}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);const i=this._createAnimations(t,e);return i.length?(a.add(this._chart,i),!0):void 0}}function Mi(t,e){const i=t&&t.options||{},n=i.reverse,o=void 0===i.min?e:0,s=void 0===i.max?e:0;return{start:n?s:o,end:n?o:s}}function ki(t,e){const i=[],n=t._getSortedDatasetMetas(e);let o,s;for(o=0,s=n.length;o<s;++o)i.push(n[o].index);return i}function Si(t,e,i,n){const o=t.keys,s="single"===n.mode;let a,r,l,c;if(null!==e){for(a=0,r=o.length;a<r;++a){if(l=+o[a],l===i){if(n.all)continue;break}c=t.values[l],X(c)&&(s||0===e||Dt(e)===Dt(c))&&(e+=c)}return e}}function Pi(t,e){const i=t&&t.options.stacked;return i||void 0===i&&void 0!==e.stack}function Di(t,e,i){const n=t[e]||(t[e]={});return n[i]||(n[i]={})}function Ci(t,e,i){for(const n of e.getMatchingVisibleMetas("bar").reverse()){const e=t[n.index];if(i&&e>0||!i&&e<0)return n.index}return null}function Oi(t,e){const{chart:i,_cachedMeta:n}=t,o=i._stacks||(i._stacks={}),{iScale:s,vScale:a,index:r}=n,l=s.axis,c=a.axis,h=function(t,e,i){return`${t.id}.${e.id}.${i.stack||i.type}`}(s,a,n),d=e.length;let u;for(let t=0;t<d;++t){const i=e[t],{[l]:n,[c]:s}=i;u=(i._stacks||(i._stacks={}))[c]=Di(o,h,n),u[r]=s,u._top=Ci(u,a,!0),u._bottom=Ci(u,a,!1)}}function Ti(t,e){const i=t.scales;return Object.keys(i).filter((t=>i[t].axis===e)).shift()}function Ai(t,e){const i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const n of e){const e=n._stacks;if(!e||void 0===e[i]||void 0===e[i][t.index])return;delete e[i][t.index]}}}const Li=t=>"reset"===t||"none"===t,Ri=(t,e)=>e?t:Object.assign({},t);class Ei{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const t=this,e=t._cachedMeta;t.configure(),t.linkScales(),e._stacked=Pi(e.vScale,e),t.addElements()}updateIndex(t){this.index!==t&&Ai(this._cachedMeta),this.index=t}linkScales(){const t=this,e=t.chart,i=t._cachedMeta,n=t.getDataset(),o=(t,e,i,n)=>"x"===t?e:"r"===t?n:i,s=i.xAxisID=K(n.xAxisID,Ti(e,"x")),a=i.yAxisID=K(n.yAxisID,Ti(e,"y")),r=i.rAxisID=K(n.rAxisID,Ti(e,"r")),l=i.indexAxis,c=i.iAxisID=o(l,s,a,r),h=i.vAxisID=o(l,a,s,r);i.xScale=t.getScaleForId(s),i.yScale=t.getScaleForId(a),i.rScale=t.getScaleForId(r),i.iScale=t.getScaleForId(c),i.vScale=t.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&he(this._data,this),t._stacked&&Ai(t)}_dataCheck(){const t=this,e=t.getDataset(),i=e.data||(e.data=[]),n=t._data;if(U(i))t._data=function(t){const e=Object.keys(t),i=new Array(e.length);let n,o,s;for(n=0,o=e.length;n<o;++n)s=e[n],i[n]={x:s,y:t[s]};return i}(i);else if(n!==i){if(n){he(n,t);const e=t._cachedMeta;Ai(e),e._parsed=[]}i&&Object.isExtensible(i)&&ce(i,t),t._syncList=[],t._data=i}}addElements(){const t=this,e=t._cachedMeta;t._dataCheck(),t.datasetElementType&&(e.dataset=new t.datasetElementType)}buildOrUpdateElements(t){const e=this,i=e._cachedMeta,n=e.getDataset();let o=!1;e._dataCheck();const s=i._stacked;i._stacked=Pi(i.vScale,i),i.stack!==n.stack&&(o=!0,Ai(i),i.stack=n.stack),e._resyncElements(t),(o||s!==i._stacked)&&Oi(e,i._parsed)}configure(){const t=this,e=t.chart.config,i=e.datasetScopeKeys(t._type),n=e.getOptionScopes(t.getDataset(),i,!0);t.options=e.createResolver(n,t.getContext()),t._parsing=t.options.parsing}parse(t,e){const i=this,{_cachedMeta:n,_data:o}=i,{iScale:s,_stacked:a}=n,r=s.axis;let l,c,h,d=0===t&&e===o.length||n._sorted,u=t>0&&n._parsed[t-1];if(!1===i._parsing)n._parsed=o,n._sorted=!0,h=o;else{h=Y(o[t])?i.parseArrayData(n,o,t,e):U(o[t])?i.parseObjectData(n,o,t,e):i.parsePrimitiveData(n,o,t,e);const s=()=>null===c[r]||u&&c[r]<u[r];for(l=0;l<e;++l)n._parsed[l+t]=c=h[l],d&&(s()&&(d=!1),u=c);n._sorted=d}a&&Oi(i,h)}parsePrimitiveData(t,e,i,n){const{iScale:o,vScale:s}=t,a=o.axis,r=s.axis,l=o.getLabels(),c=o===s,h=new Array(n);let d,u,f;for(d=0,u=n;d<u;++d)f=d+i,h[d]={[a]:c||o.parse(l[f],f),[r]:s.parse(e[f],f)};return h}parseArrayData(t,e,i,n){const{xScale:o,yScale:s}=t,a=new Array(n);let r,l,c,h;for(r=0,l=n;r<l;++r)c=r+i,h=e[c],a[r]={x:o.parse(h[0],c),y:s.parse(h[1],c)};return a}parseObjectData(t,e,i,n){const{xScale:o,yScale:s}=t,{xAxisKey:a="x",yAxisKey:r="y"}=this._parsing,l=new Array(n);let c,h,d,u;for(c=0,h=n;c<h;++c)d=c+i,u=e[d],l[c]={x:o.parse(lt(u,a),d),y:s.parse(lt(u,r),d)};return l}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const n=this.chart,o=this._cachedMeta,s=e[t.axis];return Si({keys:ki(n,!0),values:e._stacks[t.axis]},s,o.index,{mode:i})}updateRangeFromParsed(t,e,i,n){const o=i[e.axis];let s=null===o?NaN:o;const a=n&&i._stacks[e.axis];n&&a&&(n.values=a,t.min=Math.min(t.min,s),t.max=Math.max(t.max,s),s=Si(n,o,this._cachedMeta.index,{all:!0})),t.min=Math.min(t.min,s),t.max=Math.max(t.max,s)}getMinMax(t,e){const i=this,n=i._cachedMeta,o=n._parsed,s=n._sorted&&t===n.iScale,a=o.length,r=i._getOtherScale(t),l=e&&n._stacked&&{keys:ki(i.chart,!0),values:null},c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:d}=function(t){const{min:e,max:i,minDefined:n,maxDefined:o}=t.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:o?i:Number.POSITIVE_INFINITY}}(r);let u,f,g,p;function m(){return g=o[u],f=g[t.axis],p=g[r.axis],!X(f)||h>p||d<p}for(u=0;u<a&&(m()||(i.updateRangeFromParsed(c,t,g,l),!s));++u);if(s)for(u=a-1;u>=0;--u)if(!m()){i.updateRangeFromParsed(c,t,g,l);break}return c}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let n,o,s;for(n=0,o=e.length;n<o;++n)s=e[n][t.axis],X(s)&&i.push(s);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,n=e.vScale,o=this.getParsed(t);return{label:i?""+i.getLabelForValue(o[i.axis]):"",value:n?""+n.getLabelForValue(o[n.axis]):""}}_update(t){const e=this,i=e._cachedMeta;e.configure(),e._cachedDataOpts={},e.update(t||"default"),i._clip=function(t){let e,i,n,o;return U(t)?(e=t.top,i=t.right,n=t.bottom,o=t.left):e=i=n=o=t,{top:e,right:i,bottom:n,left:o,disabled:!1===t}}(K(e.options.clip,function(t,e,i){if(!1===i)return!1;const n=Mi(t,i),o=Mi(e,i);return{top:o.end,right:n.end,bottom:o.start,left:n.start}}(i.xScale,i.yScale,e.getMaxOverflow())))}update(t){}draw(){const t=this,e=t._ctx,i=t.chart,n=t._cachedMeta,o=n.data||[],s=i.chartArea,a=[],r=t._drawStart||0,l=t._drawCount||o.length-r;let c;for(n.dataset&&n.dataset.draw(e,s,r,l),c=r;c<r+l;++c){const t=o[c];t.active?a.push(t):t.draw(e,s)}for(c=0;c<a.length;++c)a[c].draw(e,s)}getStyle(t,e){const i=e?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const n=this,o=n.getDataset();let s;if(t>=0&&t<n._cachedMeta.data.length){const e=n._cachedMeta.data[t];s=e.$context||(e.$context=function(t,e,i){return Object.assign(Object.create(t),{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:i,index:e,mode:"default",type:"data"})}(n.getContext(),t,e)),s.parsed=n.getParsed(t),s.raw=o.data[t],s.index=s.dataIndex=t}else s=n.$context||(n.$context=function(t,e){return Object.assign(Object.create(t),{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}(n.chart.getContext(),n.index)),s.dataset=o,s.index=s.datasetIndex=n.index;return s.active=!!e,s.mode=i,s}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const n=this,o="active"===e,s=n._cachedDataOpts,a=t+"-"+e,r=s[a],l=n.enableOptionSharing&&ht(i);if(r)return Ri(r,l);const c=n.chart.config,h=c.datasetElementScopeKeys(n._type,t),d=o?[`${t}Hover`,"hover",t,""]:[t,""],u=c.getOptionScopes(n.getDataset(),h),f=Object.keys(xt.elements[t]),g=c.resolveNamedOptions(u,f,(()=>n.getContext(i,o)),d);return g.$shared&&(g.$shared=l,s[a]=Object.freeze(Ri(g,l))),g}_resolveAnimations(t,e,i){const n=this,o=n.chart,s=n._cachedDataOpts,a=`animation-${e}`,r=s[a];if(r)return r;let l;if(!1!==o.options.animation){const o=n.chart.config,s=o.datasetAnimationScopeKeys(n._type,e),a=o.getOptionScopes(n.getDataset(),s);l=o.createResolver(a,n.getContext(t,i,e))}const c=new wi(o,l&&l.animations);return l&&l._cacheable&&(s[a]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Li(t)||this.chart._animationsDisabled}updateElement(t,e,i,n){Li(n)?Object.assign(t,i):this._resolveAnimations(e,n).update(t,i)}updateSharedOptions(t,e,i){t&&!Li(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,n){t.active=n;const o=this.getStyle(e,n);this._resolveAnimations(e,i,n).update(t,{options:!n&&this.getSharedOptions(o)||o})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this,i=e._data,n=e._cachedMeta.data;for(const[t,i,n]of e._syncList)e[t](i,n);e._syncList=[];const o=n.length,s=i.length,a=Math.min(s,o);a&&e.parse(0,a),s>o?e._insertElements(o,s-o,t):s<o&&e._removeElements(s,o-s)}_insertElements(t,e,i=!0){const n=this,o=n._cachedMeta,s=o.data,a=t+e;let r;const l=t=>{for(t.length+=e,r=t.length-1;r>=a;r--)t[r]=t[r-e]};for(l(s),r=t;r<a;++r)s[r]=new n.dataElementType;n._parsing&&l(o._parsed),n.parse(t,e),i&&n.updateElements(s,t,e,"reset")}updateElements(t,e,i,n){}_removeElements(t,e){const i=this._cachedMeta;if(this._parsing){const n=i._parsed.splice(t,e);i._stacked&&Ai(i,n)}i.data.splice(t,e)}_onDataPush(){const t=arguments.length;this._syncList.push(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._syncList.push(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._syncList.push(["_removeElements",0,1])}_onDataSplice(t,e){this._syncList.push(["_removeElements",t,e]),this._syncList.push(["_insertElements",t,arguments.length-2])}_onDataUnshift(){this._syncList.push(["_insertElements",0,arguments.length])}}Ei.defaults={},Ei.prototype.datasetElementType=null,Ei.prototype.dataElementType=null;class zi{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return Tt(this.x)&&Tt(this.y)}getProps(t,e){const i=this,n=this.$animations;if(!e||!n)return i;const o={};return t.forEach((t=>{o[t]=n[t]&&n[t].active()?n[t]._to:i[t]})),o}}zi.defaults={},zi.defaultRoutes=void 0;const Ii=new Map;function Fi(t,e,i){return function(t,e){e=e||{};const i=t+JSON.stringify(e);let n=Ii.get(i);return n||(n=new Intl.NumberFormat(t,e),Ii.set(i,n)),n}(e,i).format(t)}const Bi={values:t=>Y(t)?t:""+t,numeric(t,e,i){if(0===t)return"0";const n=this.chart.options.locale;let o,s=t;if(i.length>1){const e=Math.max(Math.abs(i[0].value),Math.abs(i[i.length-1].value));(e<1e-4||e>1e15)&&(o="scientific"),s=function(t,e){let i=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;Math.abs(i)>=1&&t!==Math.floor(t)&&(i=t-Math.floor(t));return i}(t,i)}const a=Pt(Math.abs(s)),r=Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:o,minimumFractionDigits:r,maximumFractionDigits:r};return Object.assign(l,this.options.ticks.format),Fi(t,n,l)},logarithmic(t,e,i){if(0===t)return"0";const n=t/Math.pow(10,Math.floor(Pt(t)));return 1===n||2===n||5===n?Bi.numeric.call(this,t,e,i):""}};var Vi={formatters:Bi};function Wi(t,e){const i=t.options.ticks,n=i.maxTicksLimit||function(t){const e=t.options.offset,i=t._tickSize(),n=t._length/i+(e?0:1),o=t._maxLength/i;return Math.floor(Math.min(n,o))}(t),o=i.major.enabled?function(t){const e=[];let i,n;for(i=0,n=t.length;i<n;i++)t[i].major&&e.push(i);return e}(e):[],s=o.length,a=o[0],r=o[s-1],l=[];if(s>n)return function(t,e,i,n){let o,s=0,a=i[0];for(n=Math.ceil(n),o=0;o<t.length;o++)o===a&&(e.push(t[o]),s++,a=i[s*n])}(e,l,o,s/n),l;const c=function(t,e,i){const n=function(t){const e=t.length;let i,n;if(e<2)return!1;for(n=t[0],i=1;i<e;++i)if(t[i]-t[i-1]!==n)return!1;return n}(t),o=e.length/i;if(!n)return Math.max(o,1);const s=Ot(n);for(let t=0,e=s.length-1;t<e;t++){const e=s[t];if(e>o)return e}return Math.max(o,1)}(o,e,n);if(s>0){let t,i;const n=s>1?Math.round((r-a)/(s-1)):null;for(Ni(e,l,c,$(n)?0:a-n,a),t=0,i=s-1;t<i;t++)Ni(e,l,c,o[t],o[t+1]);return Ni(e,l,c,r,$(n)?e.length:r+n),l}return Ni(e,l,c),l}function Ni(t,e,i,n,o){const s=K(n,0),a=Math.min(K(o,t.length),t.length);let r,l,c,h=0;for(i=Math.ceil(i),o&&(r=o-n,i=r/Math.floor(r/i)),c=s;c<0;)h++,c=Math.round(s+h*i);for(l=Math.max(s,0);l<a;l++)l===c&&(e.push(t[l]),h++,c=Math.round(s+h*i))}xt.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Vi.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),xt.route("scale.ticks","color","","color"),xt.route("scale.grid","color","","borderColor"),xt.route("scale.grid","borderColor","","borderColor"),xt.route("scale.title","color","","color"),xt.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t,_indexable:t=>"borderDash"!==t&&"tickBorderDash"!==t}),xt.describe("scales",{_fallback:"scale"}),xt.describe("scale.ticks",{_scriptable:t=>"backdropPadding"!==t&&"callback"!==t,_indexable:t=>"backdropPadding"!==t});const Hi=(t,e,i)=>"top"===e||"left"===e?t[e]+i:t[e]-i;function ji(t,e){const i=[],n=t.length/e,o=t.length;let s=0;for(;s<o;s+=n)i.push(t[Math.floor(s)]);return i}function $i(t,e,i){const n=t.ticks.length,o=Math.min(e,n-1),s=t._startPixel,a=t._endPixel,r=1e-6;let l,c=t.getPixelForTick(o);if(!(i&&(l=1===n?Math.max(c-s,a-c):0===e?(t.getPixelForTick(1)-c)/2:(c-t.getPixelForTick(o-1))/2,c+=o<e?l:-l,c<s-r||c>a+r)))return c}function Yi(t){return t.drawTicks?t.tickLength:0}function Ui(t,e){if(!t.display)return 0;const i=Be(t.font,e),n=Fe(t.padding);return(Y(t.text)?t.text.length:1)*i.lineHeight+n.height}function Xi(t,e,i){let o=n(t);return(i&&"right"!==e||!i&&"right"===e)&&(o=(t=>"left"===t?"right":"right"===t?"left":t)(o)),o}class qi extends zi{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){const e=this;e.options=t.setContext(e.getContext()),e.axis=t.axis,e._userMin=e.parse(t.min),e._userMax=e.parse(t.max),e._suggestedMin=e.parse(t.suggestedMin),e._suggestedMax=e.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:n}=this;return t=q(t,Number.POSITIVE_INFINITY),e=q(e,Number.NEGATIVE_INFINITY),i=q(i,Number.POSITIVE_INFINITY),n=q(n,Number.NEGATIVE_INFINITY),{min:q(t,i),max:q(e,n),minDefined:X(t),maxDefined:X(e)}}getMinMax(t){const e=this;let i,{min:n,max:o,minDefined:s,maxDefined:a}=e.getUserBounds();if(s&&a)return{min:n,max:o};const r=e.getMatchingVisibleMetas();for(let l=0,c=r.length;l<c;++l)i=r[l].controller.getMinMax(e,t),s||(n=Math.min(n,i.min)),a||(o=Math.max(o,i.max));return{min:q(n,q(o,n)),max:q(o,q(n,o))}}getPadding(){const t=this;return{left:t.paddingLeft||0,top:t.paddingTop||0,right:t.paddingRight||0,bottom:t.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Q(this.options.beforeUpdate,[this])}update(t,e,i){const n=this,o=n.options.ticks,s=o.sampleSize;n.beforeUpdate(),n.maxWidth=t,n.maxHeight=e,n._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),n.ticks=null,n._labelSizes=null,n._gridLineItems=null,n._labelItems=null,n.beforeSetDimensions(),n.setDimensions(),n.afterSetDimensions(),n._maxLength=n.isHorizontal()?n.width+i.left+i.right:n.height+i.top+i.bottom,n._dataLimitsCached||(n.beforeDataLimits(),n.determineDataLimits(),n.afterDataLimits(),n._range=We(n,n.options.grace),n._dataLimitsCached=!0),n.beforeBuildTicks(),n.ticks=n.buildTicks()||[],n.afterBuildTicks();const a=s<n.ticks.length;n._convertTicksToLabels(a?ji(n.ticks,s):n.ticks),n.configure(),n.beforeCalculateLabelRotation(),n.calculateLabelRotation(),n.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(n.ticks=Wi(n,n.ticks),n._labelSizes=null),a&&n._convertTicksToLabels(n.ticks),n.beforeFit(),n.fit(),n.afterFit(),n.afterUpdate()}configure(){const t=this;let e,i,n=t.options.reverse;t.isHorizontal()?(e=t.left,i=t.right):(e=t.top,i=t.bottom,n=!n),t._startPixel=e,t._endPixel=i,t._reversePixels=n,t._length=i-e,t._alignToPixels=t.options.alignToPixels}afterUpdate(){Q(this.options.afterUpdate,[this])}beforeSetDimensions(){Q(this.options.beforeSetDimensions,[this])}setDimensions(){const t=this;t.isHorizontal()?(t.width=t.maxWidth,t.left=0,t.right=t.width):(t.height=t.maxHeight,t.top=0,t.bottom=t.height),t.paddingLeft=0,t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0}afterSetDimensions(){Q(this.options.afterSetDimensions,[this])}_callHooks(t){const e=this;e.chart.notifyPlugins(t,e.getContext()),Q(e.options[t],[e])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Q(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this,i=e.options.ticks;let n,o,s;for(n=0,o=t.length;n<o;n++)s=t[n],s.label=Q(i.callback,[s.value,n,t],e)}afterTickToLabelConversion(){Q(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Q(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this,e=t.options,i=e.ticks,n=t.ticks.length,o=i.minRotation||0,s=i.maxRotation;let a,r,l,c=o;if(!t._isVisible()||!i.display||o>=s||n<=1||!t.isHorizontal())return void(t.labelRotation=o);const h=t._getLabelSizes(),d=h.widest.width,u=h.highest.height,f=Ht(t.chart.width-d,0,t.maxWidth);a=e.offset?t.maxWidth/n:f/(n-1),d+6>a&&(a=f/(n-(e.offset?.5:1)),r=t.maxHeight-Yi(e.grid)-i.padding-Ui(e.title,t.chart.options.font),l=Math.sqrt(d*d+u*u),c=zt(Math.min(Math.asin(Math.min((h.highest.height+6)/a,1)),Math.asin(Math.min(r/l,1))-Math.asin(u/l))),c=Math.max(o,Math.min(s,c))),t.labelRotation=c}afterCalculateLabelRotation(){Q(this.options.afterCalculateLabelRotation,[this])}beforeFit(){Q(this.options.beforeFit,[this])}fit(){const t=this,e={width:0,height:0},{chart:i,options:{ticks:n,title:o,grid:s}}=t,a=t._isVisible(),r=t.isHorizontal();if(a){const a=Ui(o,i.options.font);if(r?(e.width=t.maxWidth,e.height=Yi(s)+a):(e.height=t.maxHeight,e.width=Yi(s)+a),n.display&&t.ticks.length){const{first:i,last:o,widest:s,highest:a}=t._getLabelSizes(),l=2*n.padding,c=Et(t.labelRotation),h=Math.cos(c),d=Math.sin(c);if(r){const i=n.mirror?0:d*s.width+h*a.height;e.height=Math.min(t.maxHeight,e.height+i+l)}else{const i=n.mirror?0:h*s.width+d*a.height;e.width=Math.min(t.maxWidth,e.width+i+l)}t._calculatePadding(i,o,d,h)}}t._handleMargins(),r?(t.width=t._length=i.width-t._margins.left-t._margins.right,t.height=e.height):(t.width=e.width,t.height=t._length=i.height-t._margins.top-t._margins.bottom)}_calculatePadding(t,e,i,n){const o=this,{ticks:{align:s,padding:a},position:r}=o.options,l=0!==o.labelRotation,c="top"!==r&&"x"===o.axis;if(o.isHorizontal()){const r=o.getPixelForTick(0)-o.left,h=o.right-o.getPixelForTick(o.ticks.length-1);let d=0,u=0;l?c?(d=n*t.width,u=i*e.height):(d=i*t.height,u=n*e.width):"start"===s?u=e.width:"end"===s?d=t.width:(d=t.width/2,u=e.width/2),o.paddingLeft=Math.max((d-r+a)*o.width/(o.width-r),0),o.paddingRight=Math.max((u-h+a)*o.width/(o.width-h),0)}else{let i=e.height/2,n=t.height/2;"start"===s?(i=0,n=t.height):"end"===s&&(i=e.height,n=0),o.paddingTop=i+a,o.paddingBottom=n+a}}_handleMargins(){const t=this;t._margins&&(t._margins.left=Math.max(t.paddingLeft,t._margins.left),t._margins.top=Math.max(t.paddingTop,t._margins.top),t._margins.right=Math.max(t.paddingRight,t._margins.right),t._margins.bottom=Math.max(t.paddingBottom,t._margins.bottom))}afterFit(){Q(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){const e=this;let i,n;for(e.beforeTickToLabelConversion(),e.generateTickLabels(t),i=0,n=t.length;i<n;i++)$(t[i].label)&&(t.splice(i,1),n--,i--);e.afterTickToLabelConversion()}_getLabelSizes(){const t=this;let e=t._labelSizes;if(!e){const i=t.options.ticks.sampleSize;let n=t.ticks;i<n.length&&(n=ji(n,i)),t._labelSizes=e=t._computeLabelSizes(n,n.length)}return e}_computeLabelSizes(t,e){const{ctx:i,_longestTextCache:n}=this,o=[],s=[];let a,r,l,c,h,d,u,f,g,p,m,x=0,b=0;for(a=0;a<e;++a){if(c=t[a].label,h=this._resolveTickFontOptions(a),i.font=d=h.string,u=n[d]=n[d]||{data:{},gc:[]},f=h.lineHeight,g=p=0,$(c)||Y(c)){if(Y(c))for(r=0,l=c.length;r<l;++r)m=c[r],$(m)||Y(m)||(g=Yt(i,u.data,u.gc,g,m),p+=f)}else g=Yt(i,u.data,u.gc,g,c),p=f;o.push(g),s.push(p),x=Math.max(g,x),b=Math.max(p,b)}!function(t,e){J(t,(t=>{const i=t.gc,n=i.length/2;let o;if(n>e){for(o=0;o<n;++o)delete t.data[i[o]];i.splice(0,n)}}))}(n,e);const _=o.indexOf(x),y=s.indexOf(b),v=t=>({width:o[t]||0,height:s[t]||0});return{first:v(0),last:v(e-1),widest:v(_),highest:v(y),widths:o,heights:s}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){const e=this;e._reversePixels&&(t=1-t);const i=e._startPixel+t*e._length;return jt(e._alignToPixels?Xt(e.chart,i,0):i)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this,i=e.ticks||[];if(t>=0&&t<i.length){const n=i[t];return n.$context||(n.$context=function(t,e,i){return Object.assign(Object.create(t),{tick:i,index:e,type:"tick"})}(e.getContext(),t,n))}return e.$context||(e.$context=(n=e.chart.getContext(),o=e,Object.assign(Object.create(n),{scale:o,type:"scale"})));var n,o}_tickSize(){const t=this,e=t.options.ticks,i=Et(t.labelRotation),n=Math.abs(Math.cos(i)),o=Math.abs(Math.sin(i)),s=t._getLabelSizes(),a=e.autoSkipPadding||0,r=s?s.widest.width+a:0,l=s?s.highest.height+a:0;return t.isHorizontal()?l*n>r*o?r/n:l/o:l*o<r*n?l/n:r/o}_isVisible(){const t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this,i=e.axis,n=e.chart,o=e.options,{grid:s,position:a}=o,r=s.offset,l=e.isHorizontal(),c=e.ticks.length+(r?1:0),h=Yi(s),d=[],u=s.setContext(e.getContext()),f=u.drawBorder?u.borderWidth:0,g=f/2,p=function(t){return Xt(n,t,f)};let m,x,b,_,y,v,w,M,k,S,P,D;if("top"===a)m=p(e.bottom),v=e.bottom-h,M=m-g,S=p(t.top)+g,D=t.bottom;else if("bottom"===a)m=p(e.top),S=t.top,D=p(t.bottom)-g,v=m+g,M=e.top+h;else if("left"===a)m=p(e.right),y=e.right-h,w=m-g,k=p(t.left)+g,P=t.right;else if("right"===a)m=p(e.left),k=t.left,P=p(t.right)-g,y=m+g,w=e.left+h;else if("x"===i){if("center"===a)m=p((t.top+t.bottom)/2+.5);else if(U(a)){const t=Object.keys(a)[0],i=a[t];m=p(e.chart.scales[t].getPixelForValue(i))}S=t.top,D=t.bottom,v=m+g,M=v+h}else if("y"===i){if("center"===a)m=p((t.left+t.right)/2);else if(U(a)){const t=Object.keys(a)[0],i=a[t];m=p(e.chart.scales[t].getPixelForValue(i))}y=m-g,w=y-h,k=t.left,P=t.right}const C=K(o.ticks.maxTicksLimit,c),O=Math.max(1,Math.ceil(c/C));for(x=0;x<c;x+=O){const t=s.setContext(e.getContext(x)),i=t.lineWidth,o=t.color,a=s.borderDash||[],c=t.borderDashOffset,h=t.tickWidth,u=t.tickColor,f=t.tickBorderDash||[],g=t.tickBorderDashOffset;b=$i(e,x,r),void 0!==b&&(_=Xt(n,b,i),l?y=w=k=P=_:v=M=S=D=_,d.push({tx1:y,ty1:v,tx2:w,ty2:M,x1:k,y1:S,x2:P,y2:D,width:i,color:o,borderDash:a,borderDashOffset:c,tickWidth:h,tickColor:u,tickBorderDash:f,tickBorderDashOffset:g}))}return e._ticksLength=c,e._borderValue=m,d}_computeLabelItems(t){const e=this,i=e.axis,n=e.options,{position:o,ticks:s}=n,a=e.isHorizontal(),r=e.ticks,{align:l,crossAlign:c,padding:h,mirror:d}=s,u=Yi(n.grid),f=u+h,g=d?-h:f,p=-Et(e.labelRotation),m=[];let x,b,_,y,v,w,M,k,S,P,D,C,O="middle";if("top"===o)w=e.bottom-g,M=e._getXAxisLabelAlignment();else if("bottom"===o)w=e.top+g,M=e._getXAxisLabelAlignment();else if("left"===o){const t=e._getYAxisLabelAlignment(u);M=t.textAlign,v=t.x}else if("right"===o){const t=e._getYAxisLabelAlignment(u);M=t.textAlign,v=t.x}else if("x"===i){if("center"===o)w=(t.top+t.bottom)/2+f;else if(U(o)){const t=Object.keys(o)[0],i=o[t];w=e.chart.scales[t].getPixelForValue(i)+f}M=e._getXAxisLabelAlignment()}else if("y"===i){if("center"===o)v=(t.left+t.right)/2-f;else if(U(o)){const t=Object.keys(o)[0],i=o[t];v=e.chart.scales[t].getPixelForValue(i)}M=e._getYAxisLabelAlignment(u).textAlign}"y"===i&&("start"===l?O="top":"end"===l&&(O="bottom"));const T=e._getLabelSizes();for(x=0,b=r.length;x<b;++x){_=r[x],y=_.label;const t=s.setContext(e.getContext(x));k=e.getPixelForTick(x)+s.labelOffset,S=e._resolveTickFontOptions(x),P=S.lineHeight,D=Y(y)?y.length:1;const i=D/2,n=t.color,l=t.textStrokeColor,h=t.textStrokeWidth;let u;if(a?(v=k,C="top"===o?"near"===c||0!==p?-D*P+P/2:"center"===c?-T.highest.height/2-i*P+P:-T.highest.height+P/2:"near"===c||0!==p?P/2:"center"===c?T.highest.height/2-i*P:T.highest.height-D*P,d&&(C*=-1)):(w=k,C=(1-D)*P/2),t.showLabelBackdrop){const e=Fe(t.backdropPadding),i=T.heights[x],n=T.widths[x];let o=w+C-e.top,s=v-e.left;switch(O){case"middle":o-=i/2;break;case"bottom":o-=i}switch(M){case"center":s-=n/2;break;case"right":s-=n}u={left:s,top:o,width:n+e.width,height:i+e.height,color:t.backdropColor}}m.push({rotation:p,label:y,font:S,color:n,strokeColor:l,strokeWidth:h,textOffset:C,textAlign:M,textBaseline:O,translation:[v,w],backdrop:u})}return m}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-Et(this.labelRotation))return"top"===t?"left":"right";let i="center";return"start"===e.align?i="left":"end"===e.align&&(i="right"),i}_getYAxisLabelAlignment(t){const e=this,{position:i,ticks:{crossAlign:n,mirror:o,padding:s}}=e.options,a=t+s,r=e._getLabelSizes().widest.width;let l,c;return"left"===i?o?(l="left",c=e.right+s):(c=e.right-a,"near"===n?l="right":"center"===n?(l="center",c-=r/2):(l="left",c=e.left)):"right"===i?o?(l="right",c=e.left+s):(c=e.left+a,"near"===n?l="left":"center"===n?(l="center",c+=r/2):(l="right",c=e.right)):l="right",{textAlign:l,x:c}}_computeLabelArea(){const t=this;if(t.options.ticks.mirror)return;const e=t.chart,i=t.options.position;return"left"===i||"right"===i?{top:0,left:t.left,bottom:e.height,right:t.right}:"top"===i||"bottom"===i?{top:t.top,left:0,bottom:t.bottom,right:e.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:n,width:o,height:s}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,n,o,s),t.restore())}getLineWidthForValue(t){const e=this,i=e.options.grid;if(!e._isVisible()||!i.display)return 0;const n=e.ticks.findIndex((e=>e.value===t));if(n>=0){return i.setContext(e.getContext(n)).lineWidth}return 0}drawGrid(t){const e=this,i=e.options.grid,n=e.ctx,o=e._gridLineItems||(e._gridLineItems=e._computeGridLineItems(t));let s,a;const r=(t,e,i)=>{i.width&&i.color&&(n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.setLineDash(i.borderDash||[]),n.lineDashOffset=i.borderDashOffset,n.beginPath(),n.moveTo(t.x,t.y),n.lineTo(e.x,e.y),n.stroke(),n.restore())};if(i.display)for(s=0,a=o.length;s<a;++s){const t=o[s];i.drawOnChartArea&&r({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},t),i.drawTicks&&r({x:t.tx1,y:t.ty1},{x:t.tx2,y:t.ty2},{color:t.tickColor,width:t.tickWidth,borderDash:t.tickBorderDash,borderDashOffset:t.tickBorderDashOffset})}}drawBorder(){const t=this,{chart:e,ctx:i,options:{grid:n}}=t,o=n.setContext(t.getContext()),s=n.drawBorder?o.borderWidth:0;if(!s)return;const a=n.setContext(t.getContext(0)).lineWidth,r=t._borderValue;let l,c,h,d;t.isHorizontal()?(l=Xt(e,t.left,s)-s/2,c=Xt(e,t.right,a)+a/2,h=d=r):(h=Xt(e,t.top,s)-s/2,d=Xt(e,t.bottom,a)+a/2,l=c=r),i.save(),i.lineWidth=o.borderWidth,i.strokeStyle=o.borderColor,i.beginPath(),i.moveTo(l,h),i.lineTo(c,d),i.stroke(),i.restore()}drawLabels(t){const e=this;if(!e.options.ticks.display)return;const i=e.ctx,n=e._computeLabelArea();n&&Zt(i,n);const o=e._labelItems||(e._labelItems=e._computeLabelItems(t));let s,a;for(s=0,a=o.length;s<a;++s){const t=o[s],e=t.font,n=t.label;t.backdrop&&(i.fillStyle=t.backdrop.color,i.fillRect(t.backdrop.left,t.backdrop.top,t.backdrop.width,t.backdrop.height)),ee(i,n,0,t.textOffset,e,t)}n&&Qt(i)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:n}}=this;if(!i.display)return;const s=Be(i.font),a=Fe(i.padding),r=i.align;let l=s.lineHeight/2;"bottom"===e?(l+=a.bottom,Y(i.text)&&(l+=s.lineHeight*(i.text.length-1))):l+=a.top;const{titleX:c,titleY:h,maxWidth:d,rotation:u}=function(t,e,i,n){const{top:s,left:a,bottom:r,right:l}=t;let c,h,d,u=0;return t.isHorizontal()?(h=o(n,a,l),d=Hi(t,i,e),c=l-a):(h=Hi(t,i,e),d=o(n,r,s),u="left"===i?-Mt:Mt),{titleX:h,titleY:d,maxWidth:c,rotation:u}}(this,l,e,r);ee(t,i.text,0,0,s,{color:i.color,maxWidth:d,rotation:u,textAlign:Xi(r,e,n),textBaseline:"middle",translation:[c,h]})}draw(t){const e=this;e._isVisible()&&(e.drawBackground(),e.drawGrid(t),e.drawBorder(),e.drawTitle(),e.drawLabels(t))}_layers(){const t=this,e=t.options,i=e.ticks&&e.ticks.z||0,n=e.grid&&e.grid.z||0;return t._isVisible()&&t.draw===qi.prototype.draw?[{z:n,draw(e){t.drawBackground(),t.drawGrid(e),t.drawTitle()}},{z:n+1,draw(){t.drawBorder()}},{z:i,draw(e){t.drawLabels(e)}}]:[{z:i,draw(e){t.draw(e)}}]}getMatchingVisibleMetas(t){const e=this,i=e.chart.getSortedVisibleDatasetMetas(),n=e.axis+"AxisID",o=[];let s,a;for(s=0,a=i.length;s<a;++s){const a=i[s];a[n]!==e.id||t&&a.type!==t||o.push(a)}return o}_resolveTickFontOptions(t){return Be(this.options.ticks.setContext(this.getContext(t)).font)}_maxDigits(){const t=this,e=t._resolveTickFontOptions(0).lineHeight;return(t.isHorizontal()?t.width:t.height)/e}}function Ki(t,e=[""],i=t,n,o=(()=>t[0])){ht(n)||(n=rn("_fallback",t));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:n,_getTarget:o,override:o=>Ki([o,...t],e,i,n)};return new Proxy(s,{deleteProperty:(e,i)=>(delete e[i],delete e._keys,delete t[0][i],!0),get:(i,n)=>tn(i,n,(()=>function(t,e,i,n){let o;for(const s of e)if(o=rn(Qi(s,t),i),ht(o))return Ji(t,o)?sn(i,n,t,o):o}(n,e,t,i))),getOwnPropertyDescriptor:(t,e)=>Reflect.getOwnPropertyDescriptor(t._scopes[0],e),getPrototypeOf:()=>Reflect.getPrototypeOf(t[0]),has:(t,e)=>ln(t).includes(e),ownKeys:t=>ln(t),set:(t,e,i)=>((t._storage||(t._storage=o()))[e]=i,delete t[e],delete t._keys,!0)})}function Gi(t,e,i,n){const o={_cacheable:!1,_proxy:t,_context:e,_subProxy:i,_stack:new Set,_descriptors:Zi(t,n),setContext:e=>Gi(t,e,i,n),override:o=>Gi(t.override(o),e,i,n)};return new Proxy(o,{deleteProperty:(e,i)=>(delete e[i],delete t[i],!0),get:(t,e,i)=>tn(t,e,(()=>function(t,e,i){const{_proxy:n,_context:o,_subProxy:s,_descriptors:a}=t;let r=n[e];dt(r)&&a.isScriptable(e)&&(r=function(t,e,i,n){const{_proxy:o,_context:s,_subProxy:a,_stack:r}=i;if(r.has(t))throw new Error("Recursion detected: "+Array.from(r).join("->")+"->"+t);r.add(t),e=e(s,a||n),r.delete(t),U(e)&&(e=sn(o._scopes,o,t,e));return e}(e,r,t,i));Y(r)&&r.length&&(r=function(t,e,i,n){const{_proxy:o,_context:s,_subProxy:a,_descriptors:r}=i;if(ht(s.index)&&n(t))e=e[s.index%e.length];else if(U(e[0])){const i=e,n=o._scopes.filter((t=>t!==i));e=[];for(const l of i){const i=sn(n,o,t,l);e.push(Gi(i,s,a&&a[t],r))}}return e}(e,r,t,a.isIndexable));Ji(e,r)&&(r=Gi(r,o,s&&s[e],a));return r}(t,e,i))),getOwnPropertyDescriptor:(e,i)=>e._descriptors.allKeys?Reflect.has(t,i)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,i),getPrototypeOf:()=>Reflect.getPrototypeOf(t),has:(e,i)=>Reflect.has(t,i),ownKeys:()=>Reflect.ownKeys(t),set:(e,i,n)=>(t[i]=n,delete e[i],!0)})}function Zi(t,e={scriptable:!0,indexable:!0}){const{_scriptable:i=e.scriptable,_indexable:n=e.indexable,_allKeys:o=e.allKeys}=t;return{allKeys:o,scriptable:i,indexable:n,isScriptable:dt(i)?i:()=>i,isIndexable:dt(n)?n:()=>n}}const Qi=(t,e)=>t?t+ct(e):e,Ji=(t,e)=>U(e)&&"adapters"!==t;function tn(t,e,i){let n=t[e];return ht(n)||(n=i(),ht(n)&&(t[e]=n)),n}function en(t,e,i){return dt(t)?t(e,i):t}const nn=(t,e)=>!0===t?e:"string"==typeof t?lt(e,t):void 0;function on(t,e,i,n){for(const o of e){const e=nn(i,o);if(e){t.add(e);const o=en(e._fallback,i,e);if(ht(o)&&o!==i&&o!==n)return o}else if(!1===e&&ht(n)&&i!==n)return null}return!1}function sn(t,e,i,n){const o=e._rootScopes,s=en(e._fallback,i,n),a=[...t,...o],r=new Set;r.add(n);let l=an(r,a,i,s||i);return null!==l&&((!ht(s)||s===i||(l=an(r,a,s,l),null!==l))&&Ki(Array.from(r),[""],o,s,(()=>function(t,e,i){const n=t._getTarget();e in n||(n[e]={});const o=n[e];if(Y(o)&&U(i))return i;return o}(e,i,n))))}function an(t,e,i,n){for(;i;)i=on(t,e,i,n);return i}function rn(t,e){for(const i of e){if(!i)continue;const e=i[t];if(ht(e))return e}}function ln(t){let e=t._keys;return e||(e=t._keys=function(t){const e=new Set;for(const i of t)for(const t of Object.keys(i).filter((t=>!t.startsWith("_"))))e.add(t);return Array.from(e)}(t._scopes)),e}const cn=Number.EPSILON||1e-14,hn=(t,e)=>e<t.length&&!t[e].skip&&t[e],dn=t=>"x"===t?"y":"x";function un(t,e,i,n){const o=t.skip?e:t,s=e,a=i.skip?e:i,r=Bt(s,o),l=Bt(a,s);let c=r/(r+l),h=l/(r+l);c=isNaN(c)?0:c,h=isNaN(h)?0:h;const d=n*c,u=n*h;return{previous:{x:s.x-d*(a.x-o.x),y:s.y-d*(a.y-o.y)},next:{x:s.x+u*(a.x-o.x),y:s.y+u*(a.y-o.y)}}}function fn(t,e="x"){const i=dn(e),n=t.length,o=Array(n).fill(0),s=Array(n);let a,r,l,c=hn(t,0);for(a=0;a<n;++a)if(r=l,l=c,c=hn(t,a+1),l){if(c){const t=c[e]-l[e];o[a]=0!==t?(c[i]-l[i])/t:0}s[a]=r?c?Dt(o[a-1])!==Dt(o[a])?0:(o[a-1]+o[a])/2:o[a-1]:o[a]}!function(t,e,i){const n=t.length;let o,s,a,r,l,c=hn(t,0);for(let h=0;h<n-1;++h)l=c,c=hn(t,h+1),l&&c&&(At(e[h],0,cn)?i[h]=i[h+1]=0:(o=i[h]/e[h],s=i[h+1]/e[h],r=Math.pow(o,2)+Math.pow(s,2),r<=9||(a=3/Math.sqrt(r),i[h]=o*a*e[h],i[h+1]=s*a*e[h])))}(t,o,s),function(t,e,i="x"){const n=dn(i),o=t.length;let s,a,r,l=hn(t,0);for(let c=0;c<o;++c){if(a=r,r=l,l=hn(t,c+1),!r)continue;const o=r[i],h=r[n];a&&(s=(o-a[i])/3,r[`cp1${i}`]=o-s,r[`cp1${n}`]=h-s*e[c]),l&&(s=(l[i]-o)/3,r[`cp2${i}`]=o+s,r[`cp2${n}`]=h+s*e[c])}}(t,s,e)}function gn(t,e,i){return Math.max(Math.min(t,i),e)}function pn(t,e,i,n,o){let s,a,r,l;if(e.spanGaps&&(t=t.filter((t=>!t.skip))),"monotone"===e.cubicInterpolationMode)fn(t,o);else{let i=n?t[t.length-1]:t[0];for(s=0,a=t.length;s<a;++s)r=t[s],l=un(i,r,t[Math.min(s+1,a-(n?0:1))%a],e.tension),r.cp1x=l.previous.x,r.cp1y=l.previous.y,r.cp2x=l.next.x,r.cp2y=l.next.y,i=r}e.capBezierPoints&&function(t,e){let i,n,o,s,a,r=Gt(t[0],e);for(i=0,n=t.length;i<n;++i)a=s,s=r,r=i<n-1&&Gt(t[i+1],e),s&&(o=t[i],a&&(o.cp1x=gn(o.cp1x,e.left,e.right),o.cp1y=gn(o.cp1y,e.top,e.bottom)),r&&(o.cp2x=gn(o.cp2x,e.left,e.right),o.cp2y=gn(o.cp2y,e.top,e.bottom)))}(t,i)}function mn(t,e,i,n){return{x:t.x+i*(e.x-t.x),y:t.y+i*(e.y-t.y)}}function xn(t,e,i,n){return{x:t.x+i*(e.x-t.x),y:"middle"===n?i<.5?t.y:e.y:"after"===n?i<1?t.y:e.y:i>0?e.y:t.y}}function bn(t,e,i,n){const o={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},a=mn(t,o,i),r=mn(o,s,i),l=mn(s,e,i),c=mn(a,r,i),h=mn(r,l,i);return mn(c,h,i)}function _n(t,e,i){return t?function(t,e){return{x:i=>t+t+e-i,setWidth(t){e=t},textAlign:t=>"center"===t?t:"right"===t?"left":"right",xPlus:(t,e)=>t-e,leftForLtr:(t,e)=>t-e}}(e,i):{x:t=>t,setWidth(t){},textAlign:t=>t,xPlus:(t,e)=>t+e,leftForLtr:(t,e)=>t}}function yn(t,e){let i,n;"ltr"!==e&&"rtl"!==e||(i=t.canvas.style,n=[i.getPropertyValue("direction"),i.getPropertyPriority("direction")],i.setProperty("direction",e,"important"),t.prevTextDirection=n)}function vn(t,e){void 0!==e&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function wn(t){return"angle"===t?{between:Nt,compare:Vt,normalize:Wt}:{between:(t,e,i)=>t>=Math.min(e,i)&&t<=Math.max(i,e),compare:(t,e)=>t-e,normalize:t=>t}}function Mn({start:t,end:e,count:i,loop:n,style:o}){return{start:t%i,end:e%i,loop:n&&(e-t+1)%i==0,style:o}}function kn(t,e,i){if(!i)return[t];const{property:n,start:o,end:s}=i,a=e.length,{compare:r,between:l,normalize:c}=wn(n),{start:h,end:d,loop:u,style:f}=function(t,e,i){const{property:n,start:o,end:s}=i,{between:a,normalize:r}=wn(n),l=e.length;let c,h,{start:d,end:u,loop:f}=t;if(f){for(d+=l,u+=l,c=0,h=l;c<h&&a(r(e[d%l][n]),o,s);++c)d--,u--;d%=l,u%=l}return u<d&&(u+=l),{start:d,end:u,loop:f,style:t.style}}(t,e,i),g=[];let p,m,x,b=!1,_=null;const y=()=>b||l(o,x,p)&&0!==r(o,x),v=()=>!b||0===r(s,p)||l(s,x,p);for(let t=h,i=h;t<=d;++t)m=e[t%a],m.skip||(p=c(m[n]),p!==x&&(b=l(p,o,s),null===_&&y()&&(_=0===r(p,o)?t:i),null!==_&&v()&&(g.push(Mn({start:_,end:t,loop:u,count:a,style:f})),_=null),i=t,x=p));return null!==_&&g.push(Mn({start:_,end:d,loop:u,count:a,style:f})),g}function Sn(t,e){const i=[],n=t.segments;for(let o=0;o<n.length;o++){const s=kn(n[o],t.points,e);s.length&&i.push(...s)}return i}function Pn(t,e){const i=t.points,n=t.options.spanGaps,o=i.length;if(!o)return[];const s=!!t._loop,{start:a,end:r}=function(t,e,i,n){let o=0,s=e-1;if(i&&!n)for(;o<e&&!t[o].skip;)o++;for(;o<e&&t[o].skip;)o++;for(o%=e,i&&(s+=o);s>o&&t[s%e].skip;)s--;return s%=e,{start:o,end:s}}(i,o,s,n);if(!0===n)return Dn([{start:a,end:r,loop:s}],i,e);return Dn(function(t,e,i,n){const o=t.length,s=[];let a,r=e,l=t[e];for(a=e+1;a<=i;++a){const i=t[a%o];i.skip||i.stop?l.skip||(n=!1,s.push({start:e%o,end:(a-1)%o,loop:n}),e=r=i.stop?a:null):(r=a,l.skip&&(e=a)),l=i}return null!==r&&s.push({start:e%o,end:r%o,loop:n}),s}(i,a,r<a?r+o:r,!!t._fullLoop&&0===a&&r===o-1),i,e)}function Dn(t,e,i){return i&&i.setContext&&e?function(t,e,i){const n=e.length,o=[];let s=t[0].start,a=s;for(const r of t){let t,l,c=e[s%n];for(a=s+1;a<=r.end;a++){const h=e[a%n];l=Cn(i.setContext({type:"segment",p0:c,p1:h})),On(l,t)&&(o.push({start:s,end:a-1,loop:r.loop,style:t}),t=l,s=a-1),c=h,t=l}s<a-1&&(o.push({start:s,end:a-1,loop:r.loop,style:l}),s=a-1)}return o}(t,e,i):t}function Cn(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function On(t,e){return e&&JSON.stringify(t)!==JSON.stringify(e)}var Tn=Object.freeze({__proto__:null,easingEffects:xi,color:W,getHoverColor:N,noop:H,uid:j,isNullOrUndef:$,isArray:Y,isObject:U,isFinite:X,finiteOrDefault:q,valueOrDefault:K,toPercentage:G,toDimension:Z,callback:Q,each:J,_elementsEqual:tt,clone:et,_merger:nt,merge:ot,mergeIf:st,_mergerIf:at,_deprecated:function(t,e,i,n){void 0!==e&&console.warn(t+': "'+i+'" is deprecated. Please use "'+n+'" instead')},resolveObjectKey:lt,_capitalize:ct,defined:ht,isFunction:dt,setsEqual:ut,toFontString:$t,_measureText:Yt,_longestText:Ut,_alignPixel:Xt,clearCanvas:qt,drawPoint:Kt,_isPointInArea:Gt,clipArea:Zt,unclipArea:Qt,_steppedLineTo:Jt,_bezierCurveTo:te,renderText:ee,addRoundedRectPath:ne,_lookup:oe,_lookupByKey:se,_rlookupByKey:ae,_filterBetween:re,listenArrayEvents:ce,unlistenArrayEvents:he,_arrayUnique:de,_createResolver:Ki,_attachContext:Gi,_descriptors:Zi,splineCurve:un,splineCurveMonotone:fn,_updateBezierControlPoints:pn,_getParentNode:ue,getStyle:pe,getRelativePosition:be,getMaximumSize:ye,retinaScale:ve,supportsEventListenerOptions:we,readUsedSize:Me,fontString:function(t,e,i){return e+" "+t+"px "+i},requestAnimFrame:t,throttled:e,debounce:i,_toLeftRightCenter:n,_alignStartEnd:o,_textX:s,_pointInLine:mn,_steppedInterpolation:xn,_bezierInterpolation:bn,formatNumber:Fi,toLineHeight:Re,_readValueToProps:Ee,toTRBL:ze,toTRBLCorners:Ie,toPadding:Fe,toFont:Be,resolve:Ve,_addGrace:We,PI:bt,TAU:_t,PITAU:yt,INFINITY:vt,RAD_PER_DEG:wt,HALF_PI:Mt,QUARTER_PI:kt,TWO_THIRDS_PI:St,log10:Pt,sign:Dt,niceNum:Ct,_factorize:Ot,isNumber:Tt,almostEquals:At,almostWhole:Lt,_setMinAndMaxByKey:Rt,toRadians:Et,toDegrees:zt,_decimalPlaces:It,getAngleFromPoint:Ft,distanceBetweenPoints:Bt,_angleDiff:Vt,_normalizeAngle:Wt,_angleBetween:Nt,_limitValue:Ht,_int16Range:jt,getRtlAdapter:_n,overrideTextDirection:yn,restoreTextDirection:vn,_boundSegment:kn,_boundSegments:Sn,_computeSegments:Pn});class An{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=this,i=Object.getPrototypeOf(t);let n;(function(t){return"id"in t&&"defaults"in t})(i)&&(n=e.register(i));const o=e.items,s=t.id,a=e.scope+"."+s;if(!s)throw new Error("class does not have id: "+t);return s in o||(o[s]=t,function(t,e,i){const n=ot(Object.create(null),[i?xt.get(i):{},xt.get(e),t.defaults]);xt.set(e,n),t.defaultRoutes&&function(t,e){Object.keys(e).forEach((i=>{const n=i.split("."),o=n.pop(),s=[t].concat(n).join("."),a=e[i].split("."),r=a.pop(),l=a.join(".");xt.route(s,o,l,r)}))}(e,t.defaultRoutes);t.descriptors&&xt.describe(e,t.descriptors)}(t,a,n),e.override&&xt.override(t.id,t.overrides)),a}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,n=this.scope;i in e&&delete e[i],n&&i in xt[n]&&(delete xt[n][i],this.override&&delete ft[i])}}var Ln=new class{constructor(){this.controllers=new An(Ei,"datasets",!0),this.elements=new An(zi,"elements"),this.plugins=new An(Object,"plugins"),this.scales=new An(qi,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){const n=this;[...e].forEach((e=>{const o=i||n._getRegistryForType(e);i||o.isForType(e)||o===n.plugins&&e.id?n._exec(t,o,e):J(e,(e=>{const o=i||n._getRegistryForType(e);n._exec(t,o,e)}))}))}_exec(t,e,i){const n=ct(t);Q(i["before"+n],[],i),e[t](i),Q(i["after"+n],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const n=e.get(t);if(void 0===n)throw new Error('"'+t+'" is not a registered '+i+".");return n}};class Rn{constructor(){this._init=[]}notify(t,e,i,n){const o=this;"beforeInit"===e&&(o._init=o._createDescriptors(t,!0),o._notify(o._init,t,"install"));const s=n?o._descriptors(t).filter(n):o._descriptors(t),a=o._notify(s,t,e,i);return"destroy"===e&&(o._notify(s,t,"stop"),o._notify(o._init,t,"uninstall")),a}_notify(t,e,i,n){n=n||{};for(const o of t){const t=o.plugin;if(!1===Q(t[i],[e,n,o.options],t)&&n.cancelable)return!1}return!0}invalidate(){$(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,n=K(i.options&&i.options.plugins,{}),o=function(t){const e=[],i=Object.keys(Ln.plugins.items);for(let t=0;t<i.length;t++)e.push(Ln.getPlugin(i[t]));const n=t.plugins||[];for(let t=0;t<n.length;t++){const i=n[t];-1===e.indexOf(i)&&e.push(i)}return e}(i);return!1!==n||e?function(t,e,i,n){const o=[],s=t.getContext();for(let a=0;a<e.length;a++){const r=e[a],l=En(i[r.id],n);null!==l&&o.push({plugin:r,options:zn(t.config,r,l,s)})}return o}(t,o,n,e):[]}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,n=(t,e)=>t.filter((t=>!e.some((e=>t.plugin.id===e.plugin.id))));this._notify(n(e,i),t,"stop"),this._notify(n(i,e),t,"start")}}function En(t,e){return e||!1!==t?!0===t?{}:t:null}function zn(t,e,i,n){const o=t.pluginScopeKeys(e),s=t.getOptionScopes(i,o);return t.createResolver(s,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function In(t,e){const i=xt.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||i.indexAxis||"x"}function Fn(t,e){return"x"===t||"y"===t?t:e.axis||("top"===(i=e.position)||"bottom"===i?"x":"left"===i||"right"===i?"y":void 0)||t.charAt(0).toLowerCase();var i}function Bn(t){const e=t.options||(t.options={});e.plugins=K(e.plugins,{}),e.scales=function(t,e){const i=ft[t.type]||{scales:{}},n=e.scales||{},o=In(t.type,e),s=Object.create(null),a=Object.create(null);return Object.keys(n).forEach((t=>{const e=n[t],r=Fn(t,e),l=function(t,e){return t===e?"_index_":"_value_"}(r,o),c=i.scales||{};s[r]=s[r]||t,a[t]=st(Object.create(null),[{axis:r},e,c[r],c[l]])})),t.data.datasets.forEach((i=>{const o=i.type||t.type,r=i.indexAxis||In(o,e),l=(ft[o]||{}).scales||{};Object.keys(l).forEach((t=>{const e=function(t,e){let i=t;return"_index_"===t?i=e:"_value_"===t&&(i="x"===e?"y":"x"),i}(t,r),o=i[e+"AxisID"]||s[e]||e;a[o]=a[o]||Object.create(null),st(a[o],[{axis:e},n[o],l[t]])}))})),Object.keys(a).forEach((t=>{const e=a[t];st(e,[xt.scales[e.type],xt.scale])})),a}(t,e)}function Vn(t){return(t=t||{}).datasets=t.datasets||[],t.labels=t.labels||[],t}const Wn=new Map,Nn=new Set;function Hn(t,e){let i=Wn.get(t);return i||(i=e(),Wn.set(t,i),Nn.add(i)),i}const jn=(t,e,i)=>{const n=lt(e,i);void 0!==n&&t.add(n)};class $n{constructor(t){this._config=function(t){return(t=t||{}).data=Vn(t.data),Bn(t),t}(t),this._scopeCache=new Map,this._resolverCache=new Map}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Vn(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),Bn(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Hn(t,(()=>[[`datasets.${t}`,""]]))}datasetAnimationScopeKeys(t,e){return Hn(`${t}.transition.${e}`,(()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]]))}datasetElementScopeKeys(t,e){return Hn(`${t}-${e}`,(()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]]))}pluginScopeKeys(t){const e=t.id;return Hn(`${this.type}-plugin-${e}`,(()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]]))}_cachedScopes(t,e){const i=this._scopeCache;let n=i.get(t);return n&&!e||(n=new Map,i.set(t,n)),n}getOptionScopes(t,e,i){const{options:n,type:o}=this,s=this._cachedScopes(t,i),a=s.get(e);if(a)return a;const r=new Set;e.forEach((e=>{t&&(r.add(t),e.forEach((e=>jn(r,t,e)))),e.forEach((t=>jn(r,n,t))),e.forEach((t=>jn(r,ft[o]||{},t))),e.forEach((t=>jn(r,xt,t))),e.forEach((t=>jn(r,gt,t)))}));const l=Array.from(r);return Nn.has(e)&&s.set(e,l),l}chartOptionScopes(){const{options:t,type:e}=this;return[t,ft[e]||{},xt.datasets[e]||{},{type:e},xt,gt]}resolveNamedOptions(t,e,i,n=[""]){const o={$shared:!0},{resolver:s,subPrefixes:a}=Yn(this._resolverCache,t,n);let r=s;if(function(t,e){const{isScriptable:i,isIndexable:n}=Zi(t);for(const o of e)if(i(o)&&dt(t[o])||n(o)&&Y(t[o]))return!0;return!1}(s,e)){o.$shared=!1;r=Gi(s,i=dt(i)?i():i,this.createResolver(t,i,a))}for(const t of e)o[t]=r[t];return o}createResolver(t,e,i=[""],n){const{resolver:o}=Yn(this._resolverCache,t,i);return U(e)?Gi(o,e,void 0,n):o}}function Yn(t,e,i){let n=t.get(e);n||(n=new Map,t.set(e,n));const o=i.join();let s=n.get(o);if(!s){s={resolver:Ki(e,i),subPrefixes:i.filter((t=>!t.toLowerCase().includes("hover")))},n.set(o,s)}return s}const Un=["top","bottom","left","right","chartArea"];function Xn(t,e){return"top"===t||"bottom"===t||-1===Un.indexOf(t)&&"x"===e}function qn(t,e){return function(i,n){return i[t]===n[t]?i[e]-n[e]:i[t]-n[t]}}function Kn(t){const e=t.chart,i=e.options.animation;e.notifyPlugins("afterRender"),Q(i&&i.onComplete,[t],e)}function Gn(t){const e=t.chart,i=e.options.animation;Q(i&&i.onProgress,[t],e)}function Zn(){return"undefined"!=typeof window&&"undefined"!=typeof document}function Qn(t){return Zn()&&"string"==typeof t?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Jn={},to=t=>{const e=Qn(t);return Object.values(Jn).filter((t=>t.canvas===e)).pop()};class eo{constructor(t,e){const n=this;this.config=e=new $n(e);const o=Qn(t),s=to(o);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas can be reused.");const r=e.createResolver(e.chartOptionScopes(),n.getContext());this.platform=n._initializePlatform(o,e);const l=n.platform.acquireContext(o,r.aspectRatio),c=l&&l.canvas,h=c&&c.height,d=c&&c.width;this.id=j(),this.ctx=l,this.canvas=c,this.width=d,this.height=h,this._options=r,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this.scale=void 0,this._plugins=new Rn,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=i((()=>this.update("resize")),r.resizeDelay||0),Jn[n.id]=n,l&&c?(a.listen(n,"complete",Kn),a.listen(n,"progress",Gn),n._initialize(),n.attached&&n.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:n,_aspectRatio:o}=this;return $(t)?e&&o?o:n?i/n:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}_initialize(){const t=this;return t.notifyPlugins("beforeInit"),t.options.responsive?t.resize():ve(t,t.options.devicePixelRatio),t.bindEvents(),t.notifyPlugins("afterInit"),t}_initializePlatform(t,e){return e.platform?new e.platform:!Zn()||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas?new Je:new ui}clear(){return qt(this.canvas,this.ctx),this}stop(){return a.stop(this),this}resize(t,e){a.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this,n=i.options,o=i.canvas,s=n.maintainAspectRatio&&i.aspectRatio,a=i.platform.getMaximumSize(o,t,e,s),r=n.devicePixelRatio||i.platform.getDevicePixelRatio();i.width=a.width,i.height=a.height,i._aspectRatio=i.aspectRatio,ve(i,r,!0)&&(i.notifyPlugins("resize",{size:a}),Q(n.onResize,[i,a],i),i.attached&&i._doResize()&&i.render())}ensureScalesHaveIDs(){J(this.options.scales||{},((t,e)=>{t.id=e}))}buildOrUpdateScales(){const t=this,e=t.options,i=e.scales,n=t.scales,o=Object.keys(n).reduce(((t,e)=>(t[e]=!1,t)),{});let s=[];i&&(s=s.concat(Object.keys(i).map((t=>{const e=i[t],n=Fn(t,e),o="r"===n,s="x"===n;return{options:e,dposition:o?"chartArea":s?"bottom":"left",dtype:o?"radialLinear":s?"category":"linear"}})))),J(s,(i=>{const s=i.options,a=s.id,r=Fn(a,s),l=K(s.type,i.dtype);void 0!==s.position&&Xn(s.position,r)===Xn(i.dposition)||(s.position=i.dposition),o[a]=!0;let c=null;if(a in n&&n[a].type===l)c=n[a];else{c=new(Ln.getScale(l))({id:a,type:l,ctx:t.ctx,chart:t}),n[c.id]=c}c.init(s,e)})),J(o,((t,e)=>{t||delete n[e]})),J(n,(e=>{Ze.configure(t,e,e.options),Ze.addBox(t,e)}))}_updateMetasets(){const t=this,e=t._metasets,i=t.data.datasets.length,n=e.length;if(e.sort(((t,e)=>t.index-e.index)),n>i){for(let e=i;e<n;++e)t._destroyDatasetMeta(e);e.splice(i,n-i)}t._sortedMetasets=e.slice(0).sort(qn("order","index"))}_removeUnreferencedMetasets(){const t=this,{_metasets:e,data:{datasets:i}}=t;e.length>i.length&&delete t._stacks,e.forEach(((e,n)=>{0===i.filter((t=>t===e._dataset)).length&&t._destroyDatasetMeta(n)}))}buildOrUpdateControllers(){const t=this,e=[],i=t.data.datasets;let n,o;for(t._removeUnreferencedMetasets(),n=0,o=i.length;n<o;n++){const o=i[n];let s=t.getDatasetMeta(n);const a=o.type||t.config.type;if(s.type&&s.type!==a&&(t._destroyDatasetMeta(n),s=t.getDatasetMeta(n)),s.type=a,s.indexAxis=o.indexAxis||In(a,t.options),s.order=o.order||0,s.index=n,s.label=""+o.label,s.visible=t.isDatasetVisible(n),s.controller)s.controller.updateIndex(n),s.controller.linkScales();else{const i=Ln.getController(a),{datasetElementType:o,dataElementType:r}=xt.datasets[a];Object.assign(i.prototype,{dataElementType:Ln.getElement(r),datasetElementType:o&&Ln.getElement(o)}),s.controller=new i(t,n),e.push(s.controller)}}return t._updateMetasets(),e}_resetElements(){const t=this;J(t.data.datasets,((e,i)=>{t.getDatasetMeta(i).controller.reset()}),t)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this,i=e.config;i.update(),e._options=i.createResolver(i.chartOptionScopes(),e.getContext()),J(e.scales,(t=>{Ze.removeBox(e,t)}));const n=e._animationsDisabled=!e.options.animation;e.ensureScalesHaveIDs(),e.buildOrUpdateScales();const o=new Set(Object.keys(e._listeners)),s=new Set(e.options.events);if(ut(o,s)&&!!this._responsiveListeners===e.options.responsive||(e.unbindEvents(),e.bindEvents()),e._plugins.invalidate(),!1===e.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;const a=e.buildOrUpdateControllers();e.notifyPlugins("beforeElementsUpdate");let r=0;for(let t=0,i=e.data.datasets.length;t<i;t++){const{controller:i}=e.getDatasetMeta(t),o=!n&&-1===a.indexOf(i);i.buildOrUpdateElements(o),r=Math.max(+i.getMaxOverflow(),r)}e._minPadding=r,e._updateLayout(r),n||J(a,(t=>{t.reset()})),e._updateDatasets(t),e.notifyPlugins("afterUpdate",{mode:t}),e._layers.sort(qn("z","_idx")),e._lastEvent&&e._eventHandler(e._lastEvent,!0),e.render()}_updateLayout(t){const e=this;if(!1===e.notifyPlugins("beforeLayout",{cancelable:!0}))return;Ze.update(e,e.width,e.height,t);const i=e.chartArea,n=i.width<=0||i.height<=0;e._layers=[],J(e.boxes,(t=>{n&&"chartArea"===t.position||(t.configure&&t.configure(),e._layers.push(...t._layers()))}),e),e._layers.forEach(((t,e)=>{t._idx=e})),e.notifyPlugins("afterLayout")}_updateDatasets(t){const e=this,i="function"==typeof t;if(!1!==e.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let n=0,o=e.data.datasets.length;n<o;++n)e._updateDataset(n,i?t({datasetIndex:n}):t);e.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this,n=i.getDatasetMeta(t),o={meta:n,index:t,mode:e,cancelable:!0};!1!==i.notifyPlugins("beforeDatasetUpdate",o)&&(n.controller._update(e),o.cancelable=!1,i.notifyPlugins("afterDatasetUpdate",o))}render(){const t=this;!1!==t.notifyPlugins("beforeRender",{cancelable:!0})&&(a.has(t)?t.attached&&!a.running(t)&&a.start(t):(t.draw(),Kn({chart:t})))}draw(){const t=this;let e;if(t._resizeBeforeDraw){const{width:e,height:i}=t._resizeBeforeDraw;t._resize(e,i),t._resizeBeforeDraw=null}if(t.clear(),t.width<=0||t.height<=0)return;if(!1===t.notifyPlugins("beforeDraw",{cancelable:!0}))return;const i=t._layers;for(e=0;e<i.length&&i[e].z<=0;++e)i[e].draw(t.chartArea);for(t._drawDatasets();e<i.length;++e)i[e].draw(t.chartArea);t.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let n,o;for(n=0,o=e.length;n<o;++n){const o=e[n];t&&!o.visible||i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){const t=this;if(!1===t.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=t.getSortedVisibleDatasetMetas();for(let i=e.length-1;i>=0;--i)t._drawDataset(e[i]);t.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this,i=e.ctx,n=t._clip,o=!n.disabled,s=e.chartArea,a={meta:t,index:t.index,cancelable:!0};!1!==e.notifyPlugins("beforeDatasetDraw",a)&&(o&&Zt(i,{left:!1===n.left?0:s.left-n.left,right:!1===n.right?e.width:s.right+n.right,top:!1===n.top?0:s.top-n.top,bottom:!1===n.bottom?e.height:s.bottom+n.bottom}),t.controller.draw(),o&&Qt(i),a.cancelable=!1,e.notifyPlugins("afterDatasetDraw",a))}getElementsAtEventForMode(t,e,i,n){const o=Te.modes[e];return"function"==typeof o?o(this,t,i,n):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let n=i.filter((t=>t&&t._dataset===e)).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(n)),n}getContext(){return this.$context||(this.$context={chart:this,type:"chart"})}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return"boolean"==typeof i.hidden?!i.hidden:!e.hidden}setDatasetVisibility(t,e){this.getDatasetMeta(t).hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateDatasetVisibility(t,e){const i=this,n=e?"show":"hide",o=i.getDatasetMeta(t),s=o.controller._resolveAnimations(void 0,n);i.setDatasetVisibility(t,e),s.update(o,{visible:e}),i.update((e=>e.datasetIndex===t?n:void 0))}hide(t){this._updateDatasetVisibility(t,!1)}show(t){this._updateDatasetVisibility(t,!0)}_destroyDatasetMeta(t){const e=this,i=e._metasets&&e._metasets[t];i&&i.controller&&(i.controller._destroy(),delete e._metasets[t])}destroy(){const t=this,{canvas:e,ctx:i}=t;let n,o;for(t.stop(),a.remove(t),n=0,o=t.data.datasets.length;n<o;++n)t._destroyDatasetMeta(n);t.config.clearCache(),e&&(t.unbindEvents(),qt(e,i),t.platform.releaseContext(i),t.canvas=null,t.ctx=null),t.notifyPlugins("destroy"),delete Jn[t.id]}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this,e=t._listeners,i=t.platform,n=function(e,i,n){e.offsetX=i,e.offsetY=n,t._eventHandler(e)};J(t.options.events,(o=>((n,o)=>{i.addEventListener(t,n,o),e[n]=o})(o,n)))}bindResponsiveEvents(){const t=this;t._responsiveListeners||(t._responsiveListeners={});const e=t._responsiveListeners,i=t.platform,n=(n,o)=>{i.addEventListener(t,n,o),e[n]=o},o=(n,o)=>{e[n]&&(i.removeEventListener(t,n,o),delete e[n])},s=(e,i)=>{t.canvas&&t.resize(e,i)};let a;const r=()=>{o("attach",r),t.attached=!0,t.resize(),n("resize",s),n("detach",a)};a=()=>{t.attached=!1,o("resize",s),n("attach",r)},i.isAttached(t.canvas)?r():a()}unbindEvents(){const t=this;J(t._listeners,((e,i)=>{t.platform.removeEventListener(t,i,e)})),t._listeners={},J(t._responsiveListeners,((e,i)=>{t.platform.removeEventListener(t,i,e)})),t._responsiveListeners=void 0}updateHoverStyle(t,e,i){const n=i?"set":"remove";let o,s,a,r;for("dataset"===e&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+n+"DatasetHoverStyle"]()),a=0,r=t.length;a<r;++a){s=t[a];const e=s&&this.getDatasetMeta(s.datasetIndex).controller;e&&e[n+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this,i=e._active||[],n=t.map((({datasetIndex:t,index:i})=>{const n=e.getDatasetMeta(t);if(!n)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:n.data[i],index:i}}));!tt(n,i)&&(e._active=n,e._updateHoverStyles(n,i))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}_updateHoverStyles(t,e,i){const n=this,o=n.options.hover,s=(t,e)=>t.filter((t=>!e.some((e=>t.datasetIndex===e.datasetIndex&&t.index===e.index)))),a=s(e,t),r=i?t:s(t,e);a.length&&n.updateHoverStyle(a,o.mode,!1),r.length&&o.mode&&n.updateHoverStyle(r,o.mode,!0)}_eventHandler(t,e){const i=this,n={event:t,replay:e,cancelable:!0},o=e=>(e.options.events||this.options.events).includes(t.type);if(!1===i.notifyPlugins("beforeEvent",n,o))return;const s=i._handleEvent(t,e);return n.cancelable=!1,i.notifyPlugins("afterEvent",n,o),(s||n.changed)&&i.render(),i}_handleEvent(t,e){const i=this,{_active:n=[],options:o}=i,s=o.hover,a=e;let r=[],l=!1,c=null;return"mouseout"!==t.type&&(r=i.getElementsAtEventForMode(t,s.mode,s,a),c="click"===t.type?i._lastEvent:t),i._lastEvent=null,Gt(t,i.chartArea,i._minPadding)&&(Q(o.onHover,[t,r,i],i),"mouseup"!==t.type&&"click"!==t.type&&"contextmenu"!==t.type||Q(o.onClick,[t,r,i],i)),l=!tt(r,n),(l||e)&&(i._active=r,i._updateHoverStyles(r,n,e)),i._lastEvent=c,l}}const io=()=>J(eo.instances,(t=>t._plugins.invalidate())),no=!0;function oo(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}Object.defineProperties(eo,{defaults:{enumerable:no,value:xt},instances:{enumerable:no,value:Jn},overrides:{enumerable:no,value:ft},registry:{enumerable:no,value:Ln},version:{enumerable:no,value:"3.4.1"},getChart:{enumerable:no,value:to},register:{enumerable:no,value:(...t)=>{Ln.add(...t),io()}},unregister:{enumerable:no,value:(...t)=>{Ln.remove(...t),io()}}});class so{constructor(t){this.options=t||{}}formats(){return oo()}parse(t,e){return oo()}format(t,e){return oo()}add(t,e,i){return oo()}diff(t,e,i){return oo()}startOf(t,e,i){return oo()}endOf(t,e){return oo()}}so.override=function(t){Object.assign(so.prototype,t)};var ao={_date:so};function ro(t){const e=function(t){if(!t._cache.$bar){const e=t.getMatchingVisibleMetas("bar");let i=[];for(let n=0,o=e.length;n<o;n++)i=i.concat(e[n].controller.getAllParsedValues(t));t._cache.$bar=de(i.sort(((t,e)=>t-e)))}return t._cache.$bar}(t);let i,n,o,s,a=t._length;const r=()=>{32767!==o&&-32768!==o&&(ht(s)&&(a=Math.min(a,Math.abs(o-s)||a)),s=o)};for(i=0,n=e.length;i<n;++i)o=t.getPixelForValue(e[i]),r();for(s=void 0,i=0,n=t.ticks.length;i<n;++i)o=t.getPixelForTick(i),r();return a}function lo(t,e,i,n){return Y(t)?function(t,e,i,n){const o=i.parse(t[0],n),s=i.parse(t[1],n),a=Math.min(o,s),r=Math.max(o,s);let l=a,c=r;Math.abs(a)>Math.abs(r)&&(l=r,c=a),e[i.axis]=c,e._custom={barStart:l,barEnd:c,start:o,end:s,min:a,max:r}}(t,e,i,n):e[i.axis]=i.parse(t,n),e}function co(t,e,i,n){const o=t.iScale,s=t.vScale,a=o.getLabels(),r=o===s,l=[];let c,h,d,u;for(c=i,h=i+n;c<h;++c)u=e[c],d={},d[o.axis]=r||o.parse(a[c],c),l.push(lo(u,d,s,c));return l}function ho(t){return t&&void 0!==t.barStart&&void 0!==t.barEnd}class uo extends Ei{parsePrimitiveData(t,e,i,n){return co(t,e,i,n)}parseArrayData(t,e,i,n){return co(t,e,i,n)}parseObjectData(t,e,i,n){const{iScale:o,vScale:s}=t,{xAxisKey:a="x",yAxisKey:r="y"}=this._parsing,l="x"===o.axis?a:r,c="x"===s.axis?a:r,h=[];let d,u,f,g;for(d=i,u=i+n;d<u;++d)g=e[d],f={},f[o.axis]=o.parse(lt(g,l),d),h.push(lo(lt(g,c),f,s,d));return h}updateRangeFromParsed(t,e,i,n){super.updateRangeFromParsed(t,e,i,n);const o=i._custom;o&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:i,vScale:n}=e,o=this.getParsed(t),s=o._custom,a=ho(s)?"["+s.start+", "+s.end+"]":""+n.getLabelForValue(o[n.axis]);return{label:""+i.getLabelForValue(o[i.axis]),value:a}}initialize(){const t=this;t.enableOptionSharing=!0,super.initialize();t._cachedMeta.stack=t.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,i,n){const o=this,s="reset"===n,a=o._cachedMeta.vScale,r=a.getBasePixel(),l=a.isHorizontal(),c=o._getRuler(),h=o.resolveDataElementOptions(e,n),d=o.getSharedOptions(h),u=o.includeOptions(n,d);o.updateSharedOptions(d,n,h);for(let h=e;h<e+i;h++){const e=o.getParsed(h),i=s||$(e[a.axis])?{base:r,head:r}:o._calculateBarValuePixels(h),f=o._calculateBarIndexPixels(h,c),g=(e._stacks||{})[a.axis],p={horizontal:l,base:i.base,enableBorderRadius:!g||ho(e._custom)||o.index===g._top||o.index===g._bottom,x:l?i.head:f.center,y:l?f.center:i.head,height:l?f.size:Math.abs(i.size),width:l?Math.abs(i.size):f.size};u&&(p.options=d||o.resolveDataElementOptions(h,t[h].active?"active":n)),o.updateElement(t[h],h,p,n)}}_getStacks(t,e){const i=this._cachedMeta.iScale,n=i.getMatchingVisibleMetas(this._type),o=i.options.stacked,s=n.length,a=[];let r,l;for(r=0;r<s;++r)if(l=n[r],l.controller.options.grouped){if(void 0!==e){const t=l.controller.getParsed(e)[l.controller._cachedMeta.vScale.axis];if($(t)||isNaN(t))continue}if((!1===o||-1===a.indexOf(l.stack)||void 0===o&&void 0===l.stack)&&a.push(l.stack),l.index===t)break}return a.length||a.push(void 0),a}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,e,i){const n=this._getStacks(t,i),o=void 0!==e?n.indexOf(e):-1;return-1===o?n.length-1:o}_getRuler(){const t=this,e=t.options,i=t._cachedMeta,n=i.iScale,o=[];let s,a;for(s=0,a=i.data.length;s<a;++s)o.push(n.getPixelForValue(t.getParsed(s)[n.axis],s));const r=e.barThickness;return{min:r||ro(n),pixels:o,start:n._startPixel,end:n._endPixel,stackCount:t._getStackCount(),scale:n,grouped:e.grouped,ratio:r?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(t){const e=this,{vScale:i,_stacked:n}=e._cachedMeta,{base:o,minBarLength:s}=e.options,a=e.getParsed(t),r=a._custom,l=ho(r);let c,h,d=a[i.axis],u=0,f=n?e.applyStack(i,a,n):d;f!==d&&(u=f-d,f=d),l&&(d=r.barStart,f=r.barEnd-r.barStart,0!==d&&Dt(d)!==Dt(r.barEnd)&&(u=0),u+=d);const g=$(o)||l?u:o;let p=i.getPixelForValue(g);c=this.chart.getDataVisibility(t)?i.getPixelForValue(u+f):p,h=c-p,void 0!==s&&Math.abs(h)<s&&(h=h<0?-s:s,0===d&&(p-=h/2),c=p+h);const m=o||0;if(p===i.getPixelForValue(m)){const t=i.getLineWidthForValue(m)/2;h>0?(p+=t,h-=t):h<0&&(p-=t,h+=t)}return{size:h,base:p,head:c,center:c+h/2}}_calculateBarIndexPixels(t,e){const i=this,n=e.scale,o=i.options,s=o.skipNull,a=K(o.maxBarThickness,1/0);let r,l;if(e.grouped){const n=s?i._getStackCount(t):e.stackCount,c="flex"===o.barThickness?function(t,e,i,n){const o=e.pixels,s=o[t];let a=t>0?o[t-1]:null,r=t<o.length-1?o[t+1]:null;const l=i.categoryPercentage;null===a&&(a=s-(null===r?e.end-e.start:r-s)),null===r&&(r=s+s-a);const c=s-(s-Math.min(a,r))/2*l;return{chunk:Math.abs(r-a)/2*l/n,ratio:i.barPercentage,start:c}}(t,e,o,n):function(t,e,i,n){const o=i.barThickness;let s,a;return $(o)?(s=e.min*i.categoryPercentage,a=i.barPercentage):(s=o*n,a=1),{chunk:s/n,ratio:a,start:e.pixels[t]-s/2}}(t,e,o,n),h=i._getStackIndex(i.index,i._cachedMeta.stack,s?t:void 0);r=c.start+c.chunk*h+c.chunk/2,l=Math.min(a,c.chunk*c.ratio)}else r=n.getPixelForValue(i.getParsed(t)[n.axis],t),l=Math.min(a,e.min*e.ratio);return{base:r-l/2,head:r+l/2,center:r,size:l}}draw(){const t=this,e=t._cachedMeta,i=e.vScale,n=e.data,o=n.length;let s=0;for(;s<o;++s)null!==t.getParsed(s)[i.axis]&&n[s].draw(t._ctx)}}uo.id="bar",uo.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},uo.overrides={interaction:{mode:"index"},scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};class fo extends Ei{initialize(){this.enableOptionSharing=!0,super.initialize()}parseObjectData(t,e,i,n){const{xScale:o,yScale:s}=t,{xAxisKey:a="x",yAxisKey:r="y"}=this._parsing,l=[];let c,h,d;for(c=i,h=i+n;c<h;++c)d=e[c],l.push({x:o.parse(lt(d,a),c),y:s.parse(lt(d,r),c),_custom:d&&d.r&&+d.r});return l}getMaxOverflow(){const{data:t,_parsed:e}=this._cachedMeta;let i=0;for(let n=t.length-1;n>=0;--n)i=Math.max(i,t[n].size()/2,e[n]._custom);return i>0&&i}getLabelAndValue(t){const e=this._cachedMeta,{xScale:i,yScale:n}=e,o=this.getParsed(t),s=i.getLabelForValue(o.x),a=n.getLabelForValue(o.y),r=o._custom;return{label:e.label,value:"("+s+", "+a+(r?", "+r:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,i,n){const o=this,s="reset"===n,{iScale:a,vScale:r}=o._cachedMeta,l=o.resolveDataElementOptions(e,n),c=o.getSharedOptions(l),h=o.includeOptions(n,c),d=a.axis,u=r.axis;for(let l=e;l<e+i;l++){const e=t[l],i=!s&&o.getParsed(l),c={},f=c[d]=s?a.getPixelForDecimal(.5):a.getPixelForValue(i[d]),g=c[u]=s?r.getBasePixel():r.getPixelForValue(i[u]);c.skip=isNaN(f)||isNaN(g),h&&(c.options=o.resolveDataElementOptions(l,e.active?"active":n),s&&(c.options.radius=0)),o.updateElement(e,l,c,n)}o.updateSharedOptions(c,n,l)}resolveDataElementOptions(t,e){const i=this.getParsed(t);let n=super.resolveDataElementOptions(t,e);n.$shared&&(n=Object.assign({},n,{$shared:!1}));const o=n.radius;return"active"!==e&&(n.radius=0),n.radius+=K(i&&i._custom,o),n}}fo.id="bubble",fo.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},fo.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title:()=>""}}}};class go extends Ei{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const i=this.getDataset().data,n=this._cachedMeta;let o,s;for(o=t,s=t+e;o<s;++o)n._parsed[o]=+i[o]}_getRotation(){return Et(this.options.rotation-90)}_getCircumference(){return Et(this.options.circumference)}_getRotationExtents(){let t=_t,e=-_t;const i=this;for(let n=0;n<i.chart.data.datasets.length;++n)if(i.chart.isDatasetVisible(n)){const o=i.chart.getDatasetMeta(n).controller,s=o._getRotation(),a=o._getCircumference();t=Math.min(t,s),e=Math.max(e,s+a)}return{rotation:t,circumference:e-t}}update(t){const e=this,i=e.chart,{chartArea:n}=i,o=e._cachedMeta,s=o.data,a=e.getMaxBorderWidth()+e.getMaxOffset(s)+e.options.spacing,r=Math.max((Math.min(n.width,n.height)-a)/2,0),l=Math.min(G(e.options.cutout,r),1),c=e._getRingWeight(e.index),{circumference:h,rotation:d}=e._getRotationExtents(),{ratioX:u,ratioY:f,offsetX:g,offsetY:p}=function(t,e,i){let n=1,o=1,s=0,a=0;if(e<_t){const r=t,l=r+e,c=Math.cos(r),h=Math.sin(r),d=Math.cos(l),u=Math.sin(l),f=(t,e,n)=>Nt(t,r,l,!0)?1:Math.max(e,e*i,n,n*i),g=(t,e,n)=>Nt(t,r,l,!0)?-1:Math.min(e,e*i,n,n*i),p=f(0,c,d),m=f(Mt,h,u),x=g(bt,c,d),b=g(bt+Mt,h,u);n=(p-x)/2,o=(m-b)/2,s=-(p+x)/2,a=-(m+b)/2}return{ratioX:n,ratioY:o,offsetX:s,offsetY:a}}(d,h,l),m=(n.width-a)/u,x=(n.height-a)/f,b=Math.max(Math.min(m,x)/2,0),_=Z(e.options.radius,b),y=(_-Math.max(_*l,0))/e._getVisibleDatasetWeightTotal();e.offsetX=g*_,e.offsetY=p*_,o.total=e.calculateTotal(),e.outerRadius=_-y*e._getRingWeightOffset(e.index),e.innerRadius=Math.max(e.outerRadius-y*c,0),e.updateElements(s,0,s.length,t)}_circumference(t,e){const i=this,n=i.options,o=i._cachedMeta,s=i._getCircumference();return e&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||null===o._parsed[t]?0:i.calculateCircumference(o._parsed[t]*s/_t)}updateElements(t,e,i,n){const o=this,s="reset"===n,a=o.chart,r=a.chartArea,l=a.options.animation,c=(r.left+r.right)/2,h=(r.top+r.bottom)/2,d=s&&l.animateScale,u=d?0:o.innerRadius,f=d?0:o.outerRadius,g=o.resolveDataElementOptions(e,n),p=o.getSharedOptions(g),m=o.includeOptions(n,p);let x,b=o._getRotation();for(x=0;x<e;++x)b+=o._circumference(x,s);for(x=e;x<e+i;++x){const e=o._circumference(x,s),i=t[x],a={x:c+o.offsetX,y:h+o.offsetY,startAngle:b,endAngle:b+e,circumference:e,outerRadius:f,innerRadius:u};m&&(a.options=p||o.resolveDataElementOptions(x,i.active?"active":n)),b+=e,o.updateElement(i,x,a,n)}o.updateSharedOptions(p,n,g)}calculateTotal(){const t=this._cachedMeta,e=t.data;let i,n=0;for(i=0;i<e.length;i++){const e=t._parsed[i];null!==e&&!isNaN(e)&&this.chart.getDataVisibility(i)&&(n+=Math.abs(e))}return n}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?_t*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,n=i.data.labels||[],o=Fi(e._parsed[t],i.options.locale);return{label:n[t]||"",value:o}}getMaxBorderWidth(t){const e=this;let i=0;const n=e.chart;let o,s,a,r,l;if(!t)for(o=0,s=n.data.datasets.length;o<s;++o)if(n.isDatasetVisible(o)){a=n.getDatasetMeta(o),t=a.data,r=a.controller,r!==e&&r.configure();break}if(!t)return 0;for(o=0,s=t.length;o<s;++o)l=r.resolveDataElementOptions(o),"inner"!==l.borderAlign&&(i=Math.max(i,l.borderWidth||0,l.hoverBorderWidth||0));return i}getMaxOffset(t){let e=0;for(let i=0,n=t.length;i<n;++i){const t=this.resolveDataElementOptions(i);e=Math.max(e,t.offset||0,t.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(e+=this._getRingWeight(i));return e}_getRingWeight(t){return Math.max(K(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}go.id="doughnut",go.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},go.descriptors={_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t},go.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i}}=t.legend.options;return e.labels.map(((e,n)=>{const o=t.getDatasetMeta(0).controller.getStyle(n);return{text:e,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,lineWidth:o.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(n),index:n}}))}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}},tooltip:{callbacks:{title:()=>"",label(t){let e=t.label;const i=": "+t.formattedValue;return Y(e)?(e=e.slice(),e[0]+=i):e+=i,e}}}}};class po extends Ei{initialize(){this.enableOptionSharing=!0,super.initialize()}update(t){const e=this,i=e._cachedMeta,{dataset:n,data:o=[],_dataset:s}=i,a=e.chart._animationsDisabled;let{start:r,count:l}=function(t,e,i){const n=e.length;let o=0,s=n;if(t._sorted){const{iScale:a,_parsed:r}=t,l=a.axis,{min:c,max:h,minDefined:d,maxDefined:u}=a.getUserBounds();d&&(o=Ht(Math.min(se(r,a.axis,c).lo,i?n:se(e,l,a.getPixelForValue(c)).lo),0,n-1)),s=u?Ht(Math.max(se(r,a.axis,h).hi+1,i?0:se(e,l,a.getPixelForValue(h)).hi+1),o,n)-o:n-o}return{start:o,count:s}}(i,o,a);e._drawStart=r,e._drawCount=l,function(t){const{xScale:e,yScale:i,_scaleRanges:n}=t,o={xmin:e.min,xmax:e.max,ymin:i.min,ymax:i.max};if(!n)return t._scaleRanges=o,!0;const s=n.xmin!==e.min||n.xmax!==e.max||n.ymin!==i.min||n.ymax!==i.max;return Object.assign(n,o),s}(i)&&(r=0,l=o.length),n._decimated=!!s._decimated,n.points=o;const c=e.resolveDatasetElementOptions(t);e.options.showLine||(c.borderWidth=0),c.segment=e.options.segment,e.updateElement(n,void 0,{animated:!a,options:c},t),e.updateElements(o,r,l,t)}updateElements(t,e,i,n){const o=this,s="reset"===n,{iScale:a,vScale:r,_stacked:l}=o._cachedMeta,c=o.resolveDataElementOptions(e,n),h=o.getSharedOptions(c),d=o.includeOptions(n,h),u=a.axis,f=r.axis,g=o.options.spanGaps,p=Tt(g)?g:Number.POSITIVE_INFINITY,m=o.chart._animationsDisabled||s||"none"===n;let x=e>0&&o.getParsed(e-1);for(let c=e;c<e+i;++c){const e=t[c],i=o.getParsed(c),g=m?e:{},b=$(i[f]),_=g[u]=a.getPixelForValue(i[u],c),y=g[f]=s||b?r.getBasePixel():r.getPixelForValue(l?o.applyStack(r,i,l):i[f],c);g.skip=isNaN(_)||isNaN(y)||b,g.stop=c>0&&i[u]-x[u]>p,g.parsed=i,d&&(g.options=h||o.resolveDataElementOptions(c,e.active?"active":n)),m||o.updateElement(e,c,g,n),x=i}o.updateSharedOptions(h,n,c)}getMaxOverflow(){const t=this,e=t._cachedMeta,i=e.dataset,n=i.options&&i.options.borderWidth||0,o=e.data||[];if(!o.length)return n;const s=o[0].size(t.resolveDataElementOptions(0)),a=o[o.length-1].size(t.resolveDataElementOptions(o.length-1));return Math.max(n,s,a)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}po.id="line",po.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},po.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};class mo extends Ei{constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,n=i.data.labels||[],o=Fi(e._parsed[t].r,i.options.locale);return{label:n[t]||"",value:o}}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}_updateRadius(){const t=this,e=t.chart,i=e.chartArea,n=e.options,o=Math.min(i.right-i.left,i.bottom-i.top),s=Math.max(o/2,0),a=(s-Math.max(n.cutoutPercentage?s/100*n.cutoutPercentage:1,0))/e.getVisibleDatasetCount();t.outerRadius=s-a*t.index,t.innerRadius=t.outerRadius-a}updateElements(t,e,i,n){const o=this,s="reset"===n,a=o.chart,r=o.getDataset(),l=a.options.animation,c=o._cachedMeta.rScale,h=c.xCenter,d=c.yCenter,u=c.getIndexAngle(0)-.5*bt;let f,g=u;const p=360/o.countVisibleElements();for(f=0;f<e;++f)g+=o._computeAngle(f,n,p);for(f=e;f<e+i;f++){const e=t[f];let i=g,m=g+o._computeAngle(f,n,p),x=a.getDataVisibility(f)?c.getDistanceFromCenterForValue(r.data[f]):0;g=m,s&&(l.animateScale&&(x=0),l.animateRotate&&(i=m=u));const b={x:h,y:d,innerRadius:0,outerRadius:x,startAngle:i,endAngle:m,options:o.resolveDataElementOptions(f,e.active?"active":n)};o.updateElement(e,f,b,n)}}countVisibleElements(){const t=this.getDataset(),e=this._cachedMeta;let i=0;return e.data.forEach(((e,n)=>{!isNaN(t.data[n])&&this.chart.getDataVisibility(n)&&i++})),i}_computeAngle(t,e,i){return this.chart.getDataVisibility(t)?Et(this.resolveDataElementOptions(t,e).angle||i):0}}mo.id="polarArea",mo.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},mo.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i}}=t.legend.options;return e.labels.map(((e,n)=>{const o=t.getDatasetMeta(0).controller.getStyle(n);return{text:e,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,lineWidth:o.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(n),index:n}}))}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}},tooltip:{callbacks:{title:()=>"",label:t=>t.chart.data.labels[t.dataIndex]+": "+t.formattedValue}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};class xo extends go{}xo.id="pie",xo.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"};class bo extends Ei{getLabelAndValue(t){const e=this._cachedMeta.vScale,i=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(i[e.axis])}}update(t){const e=this,i=e._cachedMeta,n=i.dataset,o=i.data||[],s=i.iScale.getLabels();if(n.points=o,"resize"!==t){const i=e.resolveDatasetElementOptions(t);e.options.showLine||(i.borderWidth=0);const a={_loop:!0,_fullLoop:s.length===o.length,options:i};e.updateElement(n,void 0,a,t)}e.updateElements(o,0,o.length,t)}updateElements(t,e,i,n){const o=this,s=o.getDataset(),a=o._cachedMeta.rScale,r="reset"===n;for(let l=e;l<e+i;l++){const e=t[l],i=o.resolveDataElementOptions(l,e.active?"active":n),c=a.getPointPositionForValue(l,s.data[l]),h=r?a.xCenter:c.x,d=r?a.yCenter:c.y,u={x:h,y:d,angle:c.angle,skip:isNaN(h)||isNaN(d),options:i};o.updateElement(e,l,u,n)}}}bo.id="radar",bo.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},bo.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};class _o extends po{}_o.id="scatter",_o.defaults={showLine:!1,fill:!1},_o.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title:()=>"",label:t=>"("+t.label+", "+t.formattedValue+")"}}},scales:{x:{type:"linear"},y:{type:"linear"}}};var yo=Object.freeze({__proto__:null,BarController:uo,BubbleController:fo,DoughnutController:go,LineController:po,PolarAreaController:mo,PieController:xo,RadarController:bo,ScatterController:_o});function vo(t,e,i){const{startAngle:n,pixelMargin:o,x:s,y:a,outerRadius:r,innerRadius:l}=e;let c=o/r;t.beginPath(),t.arc(s,a,r,n-c,i+c),l>o?(c=o/l,t.arc(s,a,l,i+c,n-c,!0)):t.arc(s,a,o,i+Mt,n-Mt),t.closePath(),t.clip()}function wo(t,e,i,n){const o=Ee(t.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const s=(i-e)/2,a=Math.min(s,n*e/2),r=t=>{const e=(i-Math.min(s,t))*n/2;return Ht(t,0,Math.min(s,e))};return{outerStart:r(o.outerStart),outerEnd:r(o.outerEnd),innerStart:Ht(o.innerStart,0,a),innerEnd:Ht(o.innerEnd,0,a)}}function Mo(t,e,i,n){return{x:i+t*Math.cos(e),y:n+t*Math.sin(e)}}function ko(t,e,i,n,o){const{x:s,y:a,startAngle:r,pixelMargin:l,innerRadius:c}=e,h=Math.max(e.outerRadius+n+i-l,0),d=c>0?c+n+i+l:0;let u=0;const f=o-r;if(n){const t=((c>0?c-n:0)+(h>0?h-n:0))/2;u=(f-(0!==t?f*t/(t+n):f))/2}const g=(f-Math.max(.001,f*h-i/bt)/h)/2,p=r+g+u,m=o-g-u,{outerStart:x,outerEnd:b,innerStart:_,innerEnd:y}=wo(e,d,h,m-p),v=h-x,w=h-b,M=p+x/v,k=m-b/w,S=d+_,P=d+y,D=p+_/S,C=m-y/P;if(t.beginPath(),t.arc(s,a,h,M,k),b>0){const e=Mo(w,k,s,a);t.arc(e.x,e.y,b,k,m+Mt)}const O=Mo(P,m,s,a);if(t.lineTo(O.x,O.y),y>0){const e=Mo(P,C,s,a);t.arc(e.x,e.y,y,m+Mt,C+Math.PI)}if(t.arc(s,a,d,m-y/d,p+_/d,!0),_>0){const e=Mo(S,D,s,a);t.arc(e.x,e.y,_,D+Math.PI,p-Mt)}const T=Mo(v,p,s,a);if(t.lineTo(T.x,T.y),x>0){const e=Mo(v,M,s,a);t.arc(e.x,e.y,x,p-Mt,M)}t.closePath()}function So(t,e,i,n,o){const{options:s}=e,a="inner"===s.borderAlign;s.borderWidth&&(a?(t.lineWidth=2*s.borderWidth,t.lineJoin="round"):(t.lineWidth=s.borderWidth,t.lineJoin="bevel"),e.fullCircles&&function(t,e,i){const{x:n,y:o,startAngle:s,pixelMargin:a,fullCircles:r}=e,l=Math.max(e.outerRadius-a,0),c=e.innerRadius+a;let h;for(i&&vo(t,e,s+_t),t.beginPath(),t.arc(n,o,c,s+_t,s,!0),h=0;h<r;++h)t.stroke();for(t.beginPath(),t.arc(n,o,l,s,s+_t),h=0;h<r;++h)t.stroke()}(t,e,a),a&&vo(t,e,o),ko(t,e,i,n,o),t.stroke())}class Po extends zi{constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,i){const n=this.getProps(["x","y"],i),{angle:o,distance:s}=Ft(n,{x:t,y:e}),{startAngle:a,endAngle:r,innerRadius:l,outerRadius:c,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),d=this.options.spacing/2;return(h>=_t||Nt(o,a,r))&&(s>=l+d&&s<=c+d)}getCenterPoint(t){const{x:e,y:i,startAngle:n,endAngle:o,innerRadius:s,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],t),{offset:r,spacing:l}=this.options,c=(n+o)/2,h=(s+a+l+r)/2;return{x:e+Math.cos(c)*h,y:i+Math.sin(c)*h}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const e=this,{options:i,circumference:n}=e,o=(i.offset||0)/2,s=(i.spacing||0)/2;if(e.pixelMargin="inner"===i.borderAlign?.33:0,e.fullCircles=n>_t?Math.floor(n/_t):0,0===n||e.innerRadius<0||e.outerRadius<0)return;t.save();let a=0;if(o){a=o/2;const i=(e.startAngle+e.endAngle)/2;t.translate(Math.cos(i)*a,Math.sin(i)*a),e.circumference>=bt&&(a=o)}t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor;const r=function(t,e,i,n){const{fullCircles:o,startAngle:s,circumference:a}=e;let r=e.endAngle;if(o){ko(t,e,i,n,s+_t);for(let e=0;e<o;++e)t.fill();isNaN(a)||(r=s+a%_t,a%_t==0&&(r+=_t))}return ko(t,e,i,n,r),t.fill(),r}(t,e,a,s);So(t,e,a,s,r),t.restore()}}function Do(t,e,i=e){t.lineCap=K(i.borderCapStyle,e.borderCapStyle),t.setLineDash(K(i.borderDash,e.borderDash)),t.lineDashOffset=K(i.borderDashOffset,e.borderDashOffset),t.lineJoin=K(i.borderJoinStyle,e.borderJoinStyle),t.lineWidth=K(i.borderWidth,e.borderWidth),t.strokeStyle=K(i.borderColor,e.borderColor)}function Co(t,e,i){t.lineTo(i.x,i.y)}function Oo(t,e,i={}){const n=t.length,{start:o=0,end:s=n-1}=i,{start:a,end:r}=e,l=Math.max(o,a),c=Math.min(s,r),h=o<a&&s<a||o>r&&s>r;return{count:n,start:l,loop:e.loop,ilen:c<l&&!h?n+c-l:c-l}}function To(t,e,i,n){const{points:o,options:s}=e,{count:a,start:r,loop:l,ilen:c}=Oo(o,i,n),h=function(t){return t.stepped?Jt:t.tension||"monotone"===t.cubicInterpolationMode?te:Co}(s);let d,u,f,{move:g=!0,reverse:p}=n||{};for(d=0;d<=c;++d)u=o[(r+(p?c-d:d))%a],u.skip||(g?(t.moveTo(u.x,u.y),g=!1):h(t,f,u,p,s.stepped),f=u);return l&&(u=o[(r+(p?c:0))%a],h(t,f,u,p,s.stepped)),!!l}function Ao(t,e,i,n){const o=e.points,{count:s,start:a,ilen:r}=Oo(o,i,n),{move:l=!0,reverse:c}=n||{};let h,d,u,f,g,p,m=0,x=0;const b=t=>(a+(c?r-t:t))%s,_=()=>{f!==g&&(t.lineTo(m,g),t.lineTo(m,f),t.lineTo(m,p))};for(l&&(d=o[b(0)],t.moveTo(d.x,d.y)),h=0;h<=r;++h){if(d=o[b(h)],d.skip)continue;const e=d.x,i=d.y,n=0|e;n===u?(i<f?f=i:i>g&&(g=i),m=(x*m+e)/++x):(_(),t.lineTo(e,i),u=n,x=0,f=g=i),p=i}_()}function Lo(t){const e=t.options,i=e.borderDash&&e.borderDash.length;return!(t._decimated||t._loop||e.tension||"monotone"===e.cubicInterpolationMode||e.stepped||i)?Ao:To}Po.id="arc",Po.defaults={borderAlign:"center",borderColor:"#fff",borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0},Po.defaultRoutes={backgroundColor:"backgroundColor"};const Ro="function"==typeof Path2D;function Eo(t,e,i,n){Ro&&1===e.segments.length?function(t,e,i,n){let o=e._path;o||(o=e._path=new Path2D,e.path(o,i,n)&&o.closePath()),Do(t,e.options),t.stroke(o)}(t,e,i,n):function(t,e,i,n){const{segments:o,options:s}=e,a=Lo(e);for(const r of o)Do(t,s,r.style),t.beginPath(),a(t,e,r,{start:i,end:i+n-1})&&t.closePath(),t.stroke()}(t,e,i,n)}class zo extends zi{constructor(t){super(),this.animated=!0,this.options=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,t&&Object.assign(this,t)}updateControlPoints(t,e){const i=this,n=i.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!i._pointsUpdated){const o=n.spanGaps?i._loop:i._fullLoop;pn(i._points,n,t,o,e),i._pointsUpdated=!0}}set points(t){const e=this;e._points=t,delete e._segments,delete e._path,e._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Pn(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,i=t.length;return i&&e[t[i-1].end]}interpolate(t,e){const i=this,n=i.options,o=t[e],s=i.points,a=Sn(i,{property:e,start:o,end:o});if(!a.length)return;const r=[],l=function(t){return t.stepped?xn:t.tension||"monotone"===t.cubicInterpolationMode?bn:mn}(n);let c,h;for(c=0,h=a.length;c<h;++c){const{start:i,end:h}=a[c],d=s[i],u=s[h];if(d===u){r.push(d);continue}const f=l(d,u,Math.abs((o-d[e])/(u[e]-d[e])),n.stepped);f[e]=t[e],r.push(f)}return 1===r.length?r[0]:r}pathSegment(t,e,i){return Lo(this)(t,this,e,i)}path(t,e,i){const n=this,o=n.segments,s=Lo(n);let a=n._loop;e=e||0,i=i||n.points.length-e;for(const r of o)a&=s(t,n,r,{start:e,end:e+i-1});return!!a}draw(t,e,i,n){const o=this,s=o.options||{};(o.points||[]).length&&s.borderWidth&&(t.save(),Eo(t,o,i,n),t.restore(),o.animated&&(o._pointsUpdated=!1,o._path=void 0))}}function Io(t,e,i,n){const o=t.options,{[i]:s}=t.getProps([i],n);return Math.abs(e-s)<o.radius+o.hitRadius}zo.id="line",zo.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},zo.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},zo.descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t};class Fo extends zi{constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,i){const n=this.options,{x:o,y:s}=this.getProps(["x","y"],i);return Math.pow(t-o,2)+Math.pow(e-s,2)<Math.pow(n.hitRadius+n.radius,2)}inXRange(t,e){return Io(this,t,"x",e)}inYRange(t,e){return Io(this,t,"y",e)}getCenterPoint(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}size(t){let e=(t=t||this.options||{}).radius||0;e=Math.max(e,e&&t.hoverRadius||0);return 2*(e+(e&&t.borderWidth||0))}draw(t){const e=this,i=e.options;e.skip||i.radius<.1||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,Kt(t,i,e.x,e.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function Bo(t,e){const{x:i,y:n,base:o,width:s,height:a}=t.getProps(["x","y","base","width","height"],e);let r,l,c,h,d;return t.horizontal?(d=a/2,r=Math.min(i,o),l=Math.max(i,o),c=n-d,h=n+d):(d=s/2,r=i-d,l=i+d,c=Math.min(n,o),h=Math.max(n,o)),{left:r,top:c,right:l,bottom:h}}function Vo(t){let e=t.options.borderSkipped;const i={};return e?(e=t.horizontal?Wo(e,"left","right",t.base>t.x):Wo(e,"bottom","top",t.base<t.y),i[e]=!0,i):i}function Wo(t,e,i,n){var o,s,a;return n?(a=i,t=No(t=(o=t)===(s=e)?a:o===a?s:o,i,e)):t=No(t,e,i),t}function No(t,e,i){return"start"===t?e:"end"===t?i:t}function Ho(t,e,i,n){return t?0:Math.max(Math.min(e,n),i)}function jo(t){const e=Bo(t),i=e.right-e.left,n=e.bottom-e.top,o=function(t,e,i){const n=t.options.borderWidth,o=Vo(t),s=ze(n);return{t:Ho(o.top,s.top,0,i),r:Ho(o.right,s.right,0,e),b:Ho(o.bottom,s.bottom,0,i),l:Ho(o.left,s.left,0,e)}}(t,i/2,n/2),s=function(t,e,i){const{enableBorderRadius:n}=t.getProps(["enableBorderRadius"]),o=t.options.borderRadius,s=Ie(o),a=Math.min(e,i),r=Vo(t),l=n||U(o);return{topLeft:Ho(!l||r.top||r.left,s.topLeft,0,a),topRight:Ho(!l||r.top||r.right,s.topRight,0,a),bottomLeft:Ho(!l||r.bottom||r.left,s.bottomLeft,0,a),bottomRight:Ho(!l||r.bottom||r.right,s.bottomRight,0,a)}}(t,i/2,n/2);return{outer:{x:e.left,y:e.top,w:i,h:n,radius:s},inner:{x:e.left+o.l,y:e.top+o.t,w:i-o.l-o.r,h:n-o.t-o.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(o.t,o.l)),topRight:Math.max(0,s.topRight-Math.max(o.t,o.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(o.b,o.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(o.b,o.r))}}}}function $o(t,e,i,n){const o=null===e,s=null===i,a=t&&!(o&&s)&&Bo(t,n);return a&&(o||e>=a.left&&e<=a.right)&&(s||i>=a.top&&i<=a.bottom)}function Yo(t,e){t.rect(e.x,e.y,e.w,e.h)}Fo.id="point",Fo.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},Fo.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};class Uo extends zi{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,t&&Object.assign(this,t)}draw(t){const e=this.options,{inner:i,outer:n}=jo(this),o=(s=n.radius).topLeft||s.topRight||s.bottomLeft||s.bottomRight?ne:Yo;var s;t.save(),n.w===i.w&&n.h===i.h||(t.beginPath(),o(t,n),t.clip(),o(t,i),t.fillStyle=e.borderColor,t.fill("evenodd")),t.beginPath(),o(t,i),t.fillStyle=e.backgroundColor,t.fill(),t.restore()}inRange(t,e,i){return $o(this,t,e,i)}inXRange(t,e){return $o(this,t,null,e)}inYRange(t,e){return $o(this,null,t,e)}getCenterPoint(t){const{x:e,y:i,base:n,horizontal:o}=this.getProps(["x","y","base","horizontal"],t);return{x:o?(e+n)/2:e,y:o?i:(i+n)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}}Uo.id="bar",Uo.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,enableBorderRadius:!0,pointStyle:void 0},Uo.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var Xo=Object.freeze({__proto__:null,ArcElement:Po,LineElement:zo,PointElement:Fo,BarElement:Uo});function qo(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{value:e})}}function Ko(t){t.data.datasets.forEach((t=>{qo(t)}))}var Go={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,i)=>{if(!i.enabled)return void Ko(t);const n=t.width;t.data.datasets.forEach(((e,o)=>{const{_data:s,indexAxis:a}=e,r=t.getDatasetMeta(o),l=s||e.data;if("y"===Ve([a,t.options.indexAxis]))return;if("line"!==r.type)return;const c=t.scales[r.xAxisID];if("linear"!==c.type&&"time"!==c.type)return;if(t.options.parsing)return;let h,{start:d,count:u}=function(t,e){const i=e.length;let n,o=0;const{iScale:s}=t,{min:a,max:r,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(o=Ht(se(e,s.axis,a).lo,0,i-1)),n=c?Ht(se(e,s.axis,r).hi+1,o,i)-o:i-o,{start:o,count:n}}(r,l);if(u<=4*n)qo(e);else{switch($(s)&&(e._data=l,delete e.data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(t){this._data=t}})),i.algorithm){case"lttb":h=function(t,e,i,n,o){const s=o.samples||n;if(s>=i)return t.slice(e,e+i);const a=[],r=(i-2)/(s-2);let l=0;const c=e+i-1;let h,d,u,f,g,p=e;for(a[l++]=t[p],h=0;h<s-2;h++){let n,o=0,s=0;const c=Math.floor((h+1)*r)+1+e,m=Math.min(Math.floor((h+2)*r)+1,i)+e,x=m-c;for(n=c;n<m;n++)o+=t[n].x,s+=t[n].y;o/=x,s/=x;const b=Math.floor(h*r)+1+e,_=Math.floor((h+1)*r)+1+e,{x:y,y:v}=t[p];for(u=f=-1,n=b;n<_;n++)f=.5*Math.abs((y-o)*(t[n].y-v)-(y-t[n].x)*(s-v)),f>u&&(u=f,d=t[n],g=n);a[l++]=d,p=g}return a[l++]=t[c],a}(l,d,u,n,i);break;case"min-max":h=function(t,e,i,n){let o,s,a,r,l,c,h,d,u,f,g=0,p=0;const m=[],x=e+i-1,b=t[e].x,_=t[x].x-b;for(o=e;o<e+i;++o){s=t[o],a=(s.x-b)/_*n,r=s.y;const e=0|a;if(e===l)r<u?(u=r,c=o):r>f&&(f=r,h=o),g=(p*g+s.x)/++p;else{const i=o-1;if(!$(c)&&!$(h)){const e=Math.min(c,h),n=Math.max(c,h);e!==d&&e!==i&&m.push({...t[e],x:g}),n!==d&&n!==i&&m.push({...t[n],x:g})}o>0&&i!==d&&m.push(t[i]),m.push(s),l=e,p=0,u=f=r,c=h=d=o}}return m}(l,d,u,n);break;default:throw new Error(`Unsupported decimation algorithm '${i.algorithm}'`)}e._decimated=h}}))},destroy(t){Ko(t)}};function Zo(t,e,i){const n=function(t){const e=t.options,i=e.fill;let n=K(i&&i.target,i);return void 0===n&&(n=!!e.backgroundColor),!1!==n&&null!==n&&(!0===n?"origin":n)}(t);if(U(n))return!isNaN(n.value)&&n;let o=parseFloat(n);return X(o)&&Math.floor(o)===o?("-"!==n[0]&&"+"!==n[0]||(o=e+o),!(o===e||o<0||o>=i)&&o):["origin","start","end","stack"].indexOf(n)>=0&&n}class Qo{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,i){const{x:n,y:o,radius:s}=this;return e=e||{start:0,end:_t},t.arc(n,o,s,e.end,e.start,!0),!i.bounds}interpolate(t){const{x:e,y:i,radius:n}=this,o=t.angle;return{x:e+Math.cos(o)*n,y:i+Math.sin(o)*n,angle:o}}}function Jo(t){return(t.scale||{}).getPointPositionForValue?function(t){const{scale:e,fill:i}=t,n=e.options,o=e.getLabels().length,s=[],a=n.reverse?e.max:e.min,r=n.reverse?e.min:e.max;let l,c,h;if(h="start"===i?a:"end"===i?r:U(i)?i.value:e.getBaseValue(),n.grid.circular)return c=e.getPointPositionForValue(0,a),new Qo({x:c.x,y:c.y,radius:e.getDistanceFromCenterForValue(h)});for(l=0;l<o;++l)s.push(e.getPointPositionForValue(l,h));return s}(t):function(t){const{scale:e={},fill:i}=t;let n,o=null;return"start"===i?o=e.bottom:"end"===i?o=e.top:U(i)?o=e.getPixelForValue(i.value):e.getBasePixel&&(o=e.getBasePixel()),X(o)?(n=e.isHorizontal(),{x:n?o:null,y:n?null:o}):null}(t)}function ts(t,e,i){for(;e>t;e--){const t=i[e];if(!isNaN(t.x)&&!isNaN(t.y))break}return e}function es(t){const{chart:e,scale:i,index:n,line:o}=t,s=[],a=o.segments,r=o.points,l=function(t,e){const i=[],n=t.getSortedVisibleDatasetMetas();for(let t=0;t<n.length;t++){const o=n[t];if(o.index===e)break;is(o)&&i.unshift(o.dataset)}return i}(e,n);l.push(ss({x:null,y:i.bottom},o));for(let t=0;t<a.length;t++){const e=a[t];for(let t=e.start;t<=e.end;t++)ns(s,r[t],l)}return new zo({points:s,options:{}})}const is=t=>"line"===t.type&&!t.hidden;function ns(t,e,i){const n=[];for(let o=0;o<i.length;o++){const s=i[o],{first:a,last:r,point:l}=os(s,e,"x");if(!(!l||a&&r))if(a)n.unshift(l);else if(t.push(l),!r)break}t.push(...n)}function os(t,e,i){const n=t.interpolate(e,i);if(!n)return{};const o=n[i],s=t.segments,a=t.points;let r=!1,l=!1;for(let t=0;t<s.length;t++){const e=s[t],n=a[e.start][i],c=a[e.end][i];if(o>=n&&o<=c){r=o===n,l=o===c;break}}return{first:r,last:l,point:n}}function ss(t,e){let i=[],n=!1;return Y(t)?(n=!0,i=t):i=function(t,e){const{x:i=null,y:n=null}=t||{},o=e.points,s=[];return e.segments.forEach((({start:t,end:e})=>{e=ts(t,e,o);const a=o[t],r=o[e];null!==n?(s.push({x:a.x,y:n}),s.push({x:r.x,y:n})):null!==i&&(s.push({x:i,y:a.y}),s.push({x:i,y:r.y}))})),s}(t,e),i.length?new zo({points:i,options:{tension:0},_loop:n,_fullLoop:n}):null}function as(t,e,i){let n=t[e].fill;const o=[e];let s;if(!i)return n;for(;!1!==n&&-1===o.indexOf(n);){if(!X(n))return n;if(s=t[n],!s)return!1;if(s.visible)return n;o.push(n),n=s.fill}return!1}function rs(t,e,i){t.beginPath(),e.path(t),t.lineTo(e.last().x,i),t.lineTo(e.first().x,i),t.closePath(),t.clip()}function ls(t,e,i,n){if(n)return;let o=e[t],s=i[t];return"angle"===t&&(o=Wt(o),s=Wt(s)),{property:t,start:o,end:s}}function cs(t,e,i,n){return t&&e?n(t[i],e[i]):t?t[i]:e?e[i]:0}function hs(t,e,i){const{top:n,bottom:o}=e.chart.chartArea,{property:s,start:a,end:r}=i||{};"x"===s&&(t.beginPath(),t.rect(a,n,r-a,o-n),t.clip())}function ds(t,e,i,n){const o=e.interpolate(i,n);o&&t.lineTo(o.x,o.y)}function us(t,e){const{line:i,target:n,property:o,color:s,scale:a}=e,r=function(t,e,i){const n=t.segments,o=t.points,s=e.points,a=[];for(const t of n){let{start:n,end:r}=t;r=ts(n,r,o);const l=ls(i,o[n],o[r],t.loop);if(!e.segments){a.push({source:t,target:l,start:o[n],end:o[r]});continue}const c=Sn(e,l);for(const e of c){const n=ls(i,s[e.start],s[e.end],e.loop),r=kn(t,o,n);for(const t of r)a.push({source:t,target:e,start:{[i]:cs(l,n,"start",Math.max)},end:{[i]:cs(l,n,"end",Math.min)}})}}return a}(i,n,o);for(const{source:e,target:l,start:c,end:h}of r){const{style:{backgroundColor:r=s}={}}=e;t.save(),t.fillStyle=r,hs(t,a,ls(o,c,h)),t.beginPath();const d=!!i.pathSegment(t,e);d?t.closePath():ds(t,n,h,o);const u=!!n.pathSegment(t,l,{move:d,reverse:!0}),f=d&&u;f||ds(t,n,c,o),t.closePath(),t.fill(f?"evenodd":"nonzero"),t.restore()}}function fs(t,e,i){const n=function(t){const{chart:e,fill:i,line:n}=t;if(X(i))return function(t,e){const i=t.getDatasetMeta(e);return i&&t.isDatasetVisible(e)?i.dataset:null}(e,i);if("stack"===i)return es(t);const o=Jo(t);return o instanceof Qo?o:ss(o,n)}(e),{line:o,scale:s,axis:a}=e,r=o.options,l=r.fill,c=r.backgroundColor,{above:h=c,below:d=c}=l||{};n&&o.points.length&&(Zt(t,i),function(t,e){const{line:i,target:n,above:o,below:s,area:a,scale:r}=e,l=i._loop?"angle":e.axis;t.save(),"x"===l&&s!==o&&(rs(t,n,a.top),us(t,{line:i,target:n,color:o,scale:r,property:l}),t.restore(),t.save(),rs(t,n,a.bottom)),us(t,{line:i,target:n,color:s,scale:r,property:l}),t.restore()}(t,{line:o,target:n,above:h,below:d,area:i,scale:s,axis:a}),Qt(t))}var gs={id:"filler",afterDatasetsUpdate(t,e,i){const n=(t.data.datasets||[]).length,o=[];let s,a,r,l;for(a=0;a<n;++a)s=t.getDatasetMeta(a),r=s.dataset,l=null,r&&r.options&&r instanceof zo&&(l={visible:t.isDatasetVisible(a),index:a,fill:Zo(r,a,n),chart:t,axis:s.controller.options.indexAxis,scale:s.vScale,line:r}),s.$filler=l,o.push(l);for(a=0;a<n;++a)l=o[a],l&&!1!==l.fill&&(l.fill=as(o,a,i.propagate))},beforeDraw(t,e,i){const n="beforeDraw"===i.drawTime,o=t.getSortedVisibleDatasetMetas(),s=t.chartArea;for(let e=o.length-1;e>=0;--e){const i=o[e].$filler;i&&(i.line.updateControlPoints(s,i.axis),n&&fs(t.ctx,i,s))}},beforeDatasetsDraw(t,e,i){if("beforeDatasetsDraw"!==i.drawTime)return;const n=t.getSortedVisibleDatasetMetas();for(let e=n.length-1;e>=0;--e){const i=n[e].$filler;i&&fs(t.ctx,i,t.chartArea)}},beforeDatasetDraw(t,e,i){const n=e.meta.$filler;n&&!1!==n.fill&&"beforeDatasetDraw"===i.drawTime&&fs(t.ctx,n,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const ps=(t,e)=>{let{boxHeight:i=e,boxWidth:n=e}=t;return t.usePointStyle&&(i=Math.min(i,e),n=Math.min(n,e)),{boxWidth:n,boxHeight:i,itemHeight:Math.max(e,i)}};class ms extends zi{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){const n=this;n.maxWidth=t,n.maxHeight=e,n._margins=i,n.setDimensions(),n.buildLabels(),n.fit()}setDimensions(){const t=this;t.isHorizontal()?(t.width=t.maxWidth,t.left=t._margins.left,t.right=t.width):(t.height=t.maxHeight,t.top=t._margins.top,t.bottom=t.height)}buildLabels(){const t=this,e=t.options.labels||{};let i=Q(e.generateLabels,[t.chart],t)||[];e.filter&&(i=i.filter((i=>e.filter(i,t.chart.data)))),e.sort&&(i=i.sort(((i,n)=>e.sort(i,n,t.chart.data)))),t.options.reverse&&i.reverse(),t.legendItems=i}fit(){const t=this,{options:e,ctx:i}=t;if(!e.display)return void(t.width=t.height=0);const n=e.labels,o=Be(n.font),s=o.size,a=t._computeTitleHeight(),{boxWidth:r,itemHeight:l}=ps(n,s);let c,h;i.font=o.string,t.isHorizontal()?(c=t.maxWidth,h=t._fitRows(a,s,r,l)+10):(h=t.maxHeight,c=t._fitCols(a,s,r,l)+10),t.width=Math.min(c,e.maxWidth||t.maxWidth),t.height=Math.min(h,e.maxHeight||t.maxHeight)}_fitRows(t,e,i,n){const o=this,{ctx:s,maxWidth:a,options:{labels:{padding:r}}}=o,l=o.legendHitBoxes=[],c=o.lineWidths=[0],h=n+r;let d=t;s.textAlign="left",s.textBaseline="middle";let u=-1,f=-h;return o.legendItems.forEach(((t,o)=>{const g=i+e/2+s.measureText(t.text).width;(0===o||c[c.length-1]+g+2*r>a)&&(d+=h,c[c.length-(o>0?0:1)]=0,f+=h,u++),l[o]={left:0,top:f,row:u,width:g,height:n},c[c.length-1]+=g+r})),d}_fitCols(t,e,i,n){const o=this,{ctx:s,maxHeight:a,options:{labels:{padding:r}}}=o,l=o.legendHitBoxes=[],c=o.columnSizes=[],h=a-t;let d=r,u=0,f=0,g=0,p=0;return o.legendItems.forEach(((t,o)=>{const a=i+e/2+s.measureText(t.text).width;o>0&&f+n+2*r>h&&(d+=u+r,c.push({width:u,height:f}),g+=u+r,p++,u=f=0),l[o]={left:g,top:f,col:p,width:a,height:n},u=Math.max(u,a),f+=n+r})),d+=u,c.push({width:u,height:f}),d}adjustHitBoxes(){const t=this;if(!t.options.display)return;const e=t._computeTitleHeight(),{legendHitBoxes:i,options:{align:n,labels:{padding:s},rtl:a}}=t;if(this.isHorizontal()){let r=0,l=o(n,t.left+s,t.right-t.lineWidths[r]);for(const a of i)r!==a.row&&(r=a.row,l=o(n,t.left+s,t.right-t.lineWidths[r])),a.top+=t.top+e+s,a.left=l,l+=a.width+s;if(a){const e=i.reduce(((t,e)=>(t[e.row]=t[e.row]||[],t[e.row].push(e),t)),{}),n=[];Object.keys(e).forEach((t=>{e[t].reverse(),n.push(...e[t])})),t.legendHitBoxes=n}}else{let a=0,r=o(n,t.top+e+s,t.bottom-t.columnSizes[a].height);for(const l of i)l.col!==a&&(a=l.col,r=o(n,t.top+e+s,t.bottom-t.columnSizes[a].height)),l.top=r,l.left+=t.left+s,r+=l.height+s}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){const t=this;if(t.options.display){const e=t.ctx;Zt(e,t),t._draw(),Qt(e)}}_draw(){const t=this,{options:e,columnSizes:i,lineWidths:n,ctx:a}=t,{align:r,labels:l}=e,c=xt.color,h=_n(e.rtl,t.left,t.width),d=Be(l.font),{color:u,padding:f}=l,g=d.size,p=g/2;let m;t.drawTitle(),a.textAlign=h.textAlign("left"),a.textBaseline="middle",a.lineWidth=.5,a.font=d.string;const{boxWidth:x,boxHeight:b,itemHeight:_}=ps(l,g),y=t.isHorizontal(),v=this._computeTitleHeight();m=y?{x:o(r,t.left+f,t.right-n[0]),y:t.top+f+v,line:0}:{x:t.left+f,y:o(r,t.top+v+f,t.bottom-i[0].height),line:0},yn(t.ctx,e.textDirection);const w=_+f;t.legendItems.forEach(((M,k)=>{a.strokeStyle=M.fontColor||u,a.fillStyle=M.fontColor||u;const S=a.measureText(M.text).width,P=h.textAlign(M.textAlign||(M.textAlign=l.textAlign)),D=x+p+S;let C=m.x,O=m.y;h.setWidth(t.width),y?k>0&&C+D+f>t.right&&(O=m.y+=w,m.line++,C=m.x=o(r,t.left+f,t.right-n[m.line])):k>0&&O+w>t.bottom&&(C=m.x=C+i[m.line].width+f,m.line++,O=m.y=o(r,t.top+v+f,t.bottom-i[m.line].height));!function(t,e,i){if(isNaN(x)||x<=0||isNaN(b)||b<0)return;a.save();const n=K(i.lineWidth,1);if(a.fillStyle=K(i.fillStyle,c),a.lineCap=K(i.lineCap,"butt"),a.lineDashOffset=K(i.lineDashOffset,0),a.lineJoin=K(i.lineJoin,"miter"),a.lineWidth=n,a.strokeStyle=K(i.strokeStyle,c),a.setLineDash(K(i.lineDash,[])),l.usePointStyle){const o={radius:x*Math.SQRT2/2,pointStyle:i.pointStyle,rotation:i.rotation,borderWidth:n},s=h.xPlus(t,x/2);Kt(a,o,s,e+p)}else{const o=e+Math.max((g-b)/2,0),s=h.leftForLtr(t,x),r=Ie(i.borderRadius);a.beginPath(),Object.values(r).some((t=>0!==t))?ne(a,{x:s,y:o,w:x,h:b,radius:r}):a.rect(s,o,x,b),a.fill(),0!==n&&a.stroke()}a.restore()}(h.x(C),O,M),C=s(P,C+x+p,y?C+D:t.right,e.rtl),function(t,e,i){ee(a,i.text,t,e+_/2,d,{strikethrough:i.hidden,textAlign:h.textAlign(i.textAlign)})}(h.x(C),O,M),y?m.x+=D+f:m.y+=w})),vn(t.ctx,e.textDirection)}drawTitle(){const t=this,e=t.options,i=e.title,s=Be(i.font),a=Fe(i.padding);if(!i.display)return;const r=_n(e.rtl,t.left,t.width),l=t.ctx,c=i.position,h=s.size/2,d=a.top+h;let u,f=t.left,g=t.width;if(this.isHorizontal())g=Math.max(...t.lineWidths),u=t.top+d,f=o(e.align,f,t.right-g);else{const i=t.columnSizes.reduce(((t,e)=>Math.max(t,e.height)),0);u=d+o(e.align,t.top,t.bottom-i-e.labels.padding-t._computeTitleHeight())}const p=o(c,f,f+g);l.textAlign=r.textAlign(n(c)),l.textBaseline="middle",l.strokeStyle=i.color,l.fillStyle=i.color,l.font=s.string,ee(l,i.text,p,u,s)}_computeTitleHeight(){const t=this.options.title,e=Be(t.font),i=Fe(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){const i=this;let n,o,s;if(t>=i.left&&t<=i.right&&e>=i.top&&e<=i.bottom)for(s=i.legendHitBoxes,n=0;n<s.length;++n)if(o=s[n],t>=o.left&&t<=o.left+o.width&&e>=o.top&&e<=o.top+o.height)return i.legendItems[n];return null}handleEvent(t){const e=this,i=e.options;if(!function(t,e){if("mousemove"===t&&(e.onHover||e.onLeave))return!0;if(e.onClick&&("click"===t||"mouseup"===t))return!0;return!1}(t.type,i))return;const n=e._getLegendItemAt(t.x,t.y);if("mousemove"===t.type){const a=e._hoveredItem,r=(s=n,null!==(o=a)&&null!==s&&o.datasetIndex===s.datasetIndex&&o.index===s.index);a&&!r&&Q(i.onLeave,[t,a,e],e),e._hoveredItem=n,n&&!r&&Q(i.onHover,[t,n,e],e)}else n&&Q(i.onClick,[t,n,e],e);var o,s}}var xs={id:"legend",_element:ms,start(t,e,i){const n=t.legend=new ms({ctx:t.ctx,options:i,chart:t});Ze.configure(t,n,i),Ze.addBox(t,n)},stop(t){Ze.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,i){const n=t.legend;Ze.configure(t,n,i),n.options=i},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,i){const n=e.datasetIndex,o=i.chart;o.isDatasetVisible(n)?(o.hide(n),e.hidden=!0):(o.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:i,pointStyle:n,textAlign:o,color:s}}=t.legend.options;return t._getSortedDatasetMetas().map((t=>{const a=t.controller.getStyle(i?0:void 0),r=Fe(a.borderWidth);return{text:e[t.index].label,fillStyle:a.backgroundColor,fontColor:s,hidden:!t.visible,lineCap:a.borderCapStyle,lineDash:a.borderDash,lineDashOffset:a.borderDashOffset,lineJoin:a.borderJoinStyle,lineWidth:(r.width+r.height)/4,strokeStyle:a.borderColor,pointStyle:n||a.pointStyle,rotation:a.rotation,textAlign:o||a.textAlign,borderRadius:0,datasetIndex:t.index}}),this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class bs extends zi{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const i=this,n=i.options;if(i.left=0,i.top=0,!n.display)return void(i.width=i.height=i.right=i.bottom=0);i.width=i.right=t,i.height=i.bottom=e;const o=Y(n.text)?n.text.length:1;i._padding=Fe(n.padding);const s=o*Be(n.font).lineHeight+i._padding.height;i.isHorizontal()?i.height=s:i.width=s}isHorizontal(){const t=this.options.position;return"top"===t||"bottom"===t}_drawArgs(t){const{top:e,left:i,bottom:n,right:s,options:a}=this,r=a.align;let l,c,h,d=0;return this.isHorizontal()?(c=o(r,i,s),h=e+t,l=s-i):("left"===a.position?(c=i+t,h=o(r,n,e),d=-.5*bt):(c=s-t,h=o(r,e,n),d=.5*bt),l=n-e),{titleX:c,titleY:h,maxWidth:l,rotation:d}}draw(){const t=this,e=t.ctx,i=t.options;if(!i.display)return;const o=Be(i.font),s=o.lineHeight/2+t._padding.top,{titleX:a,titleY:r,maxWidth:l,rotation:c}=t._drawArgs(s);ee(e,i.text,0,0,o,{color:i.color,maxWidth:l,rotation:c,textAlign:n(i.align),textBaseline:"middle",translation:[a,r]})}}var _s={id:"title",_element:bs,start(t,e,i){!function(t,e){const i=new bs({ctx:t.ctx,options:e,chart:t});Ze.configure(t,i,e),Ze.addBox(t,i),t.titleBlock=i}(t,i)},stop(t){const e=t.titleBlock;Ze.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,i){const n=t.titleBlock;Ze.configure(t,n,i),n.options=i},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ys=new WeakMap;var vs={id:"subtitle",start(t,e,i){const n=new bs({ctx:t.ctx,options:i,chart:t});Ze.configure(t,n,i),Ze.addBox(t,n),ys.set(t,n)},stop(t){Ze.removeBox(t,ys.get(t)),ys.delete(t)},beforeUpdate(t,e,i){const n=ys.get(t);Ze.configure(t,n,i),n.options=i},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ws={average(t){if(!t.length)return!1;let e,i,n=0,o=0,s=0;for(e=0,i=t.length;e<i;++e){const i=t[e].element;if(i&&i.hasValue()){const t=i.tooltipPosition();n+=t.x,o+=t.y,++s}}return{x:n/s,y:o/s}},nearest(t,e){if(!t.length)return!1;let i,n,o,s=e.x,a=e.y,r=Number.POSITIVE_INFINITY;for(i=0,n=t.length;i<n;++i){const n=t[i].element;if(n&&n.hasValue()){const t=Bt(e,n.getCenterPoint());t<r&&(r=t,o=n)}}if(o){const t=o.tooltipPosition();s=t.x,a=t.y}return{x:s,y:a}}};function Ms(t,e){return e&&(Y(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function ks(t){return("string"==typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function Ss(t,e){const{element:i,datasetIndex:n,index:o}=e,s=t.getDatasetMeta(n).controller,{label:a,value:r}=s.getLabelAndValue(o);return{chart:t,label:a,parsed:s.getParsed(o),raw:t.data.datasets[n].data[o],formattedValue:r,dataset:s.getDataset(),dataIndex:o,datasetIndex:n,element:i}}function Ps(t,e){const i=t._chart.ctx,{body:n,footer:o,title:s}=t,{boxWidth:a,boxHeight:r}=e,l=Be(e.bodyFont),c=Be(e.titleFont),h=Be(e.footerFont),d=s.length,u=o.length,f=n.length,g=Fe(e.padding);let p=g.height,m=0,x=n.reduce(((t,e)=>t+e.before.length+e.lines.length+e.after.length),0);if(x+=t.beforeBody.length+t.afterBody.length,d&&(p+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),x){p+=f*(e.displayColors?Math.max(r,l.lineHeight):l.lineHeight)+(x-f)*l.lineHeight+(x-1)*e.bodySpacing}u&&(p+=e.footerMarginTop+u*h.lineHeight+(u-1)*e.footerSpacing);let b=0;const _=function(t){m=Math.max(m,i.measureText(t).width+b)};return i.save(),i.font=c.string,J(t.title,_),i.font=l.string,J(t.beforeBody.concat(t.afterBody),_),b=e.displayColors?a+2:0,J(n,(t=>{J(t.before,_),J(t.lines,_),J(t.after,_)})),b=0,i.font=h.string,J(t.footer,_),i.restore(),m+=g.width,{width:m,height:p}}function Ds(t,e,i,n){const{x:o,width:s}=i,{width:a,chartArea:{left:r,right:l}}=t;let c="center";return"center"===n?c=o<=(r+l)/2?"left":"right":o<=s/2?c="left":o>=a-s/2&&(c="right"),function(t,e,i,n){const{x:o,width:s}=n,a=i.caretSize+i.caretPadding;return"left"===t&&o+s+a>e.width||"right"===t&&o-s-a<0||void 0}(c,t,e,i)&&(c="center"),c}function Cs(t,e,i){const n=e.yAlign||function(t,e){const{y:i,height:n}=e;return i<n/2?"top":i>t.height-n/2?"bottom":"center"}(t,i);return{xAlign:e.xAlign||Ds(t,e,i,n),yAlign:n}}function Os(t,e,i,n){const{caretSize:o,caretPadding:s,cornerRadius:a}=t,{xAlign:r,yAlign:l}=i,c=o+s,h=a+s;let d=function(t,e){let{x:i,width:n}=t;return"right"===e?i-=n:"center"===e&&(i-=n/2),i}(e,r);const u=function(t,e,i){let{y:n,height:o}=t;return"top"===e?n+=i:n-="bottom"===e?o+i:o/2,n}(e,l,c);return"center"===l?"left"===r?d+=c:"right"===r&&(d-=c):"left"===r?d-=h:"right"===r&&(d+=h),{x:Ht(d,0,n.width-e.width),y:Ht(u,0,n.height-e.height)}}function Ts(t,e,i){const n=Fe(i.padding);return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-n.right:t.x+n.left}function As(t){return Ms([],ks(t))}function Ls(t,e){const i=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return i?t.override(i):t}class Rs extends zi{constructor(t){super(),this.opacity=0,this._active=[],this._chart=t._chart,this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this,e=t._cachedAnimations;if(e)return e;const i=t._chart,n=t.options.setContext(t.getContext()),o=n.enabled&&i.options.animation&&n.animations,s=new wi(t._chart,o);return o._cacheable&&(t._cachedAnimations=Object.freeze(s)),s}getContext(){const t=this;return t.$context||(t.$context=(e=t._chart.getContext(),i=t,n=t._tooltipItems,Object.assign(Object.create(e),{tooltip:i,tooltipItems:n,type:"tooltip"})));var e,i,n}getTitle(t,e){const i=this,{callbacks:n}=e,o=n.beforeTitle.apply(i,[t]),s=n.title.apply(i,[t]),a=n.afterTitle.apply(i,[t]);let r=[];return r=Ms(r,ks(o)),r=Ms(r,ks(s)),r=Ms(r,ks(a)),r}getBeforeBody(t,e){return As(e.callbacks.beforeBody.apply(this,[t]))}getBody(t,e){const i=this,{callbacks:n}=e,o=[];return J(t,(t=>{const e={before:[],lines:[],after:[]},s=Ls(n,t);Ms(e.before,ks(s.beforeLabel.call(i,t))),Ms(e.lines,s.label.call(i,t)),Ms(e.after,ks(s.afterLabel.call(i,t))),o.push(e)})),o}getAfterBody(t,e){return As(e.callbacks.afterBody.apply(this,[t]))}getFooter(t,e){const i=this,{callbacks:n}=e,o=n.beforeFooter.apply(i,[t]),s=n.footer.apply(i,[t]),a=n.afterFooter.apply(i,[t]);let r=[];return r=Ms(r,ks(o)),r=Ms(r,ks(s)),r=Ms(r,ks(a)),r}_createItems(t){const e=this,i=e._active,n=e._chart.data,o=[],s=[],a=[];let r,l,c=[];for(r=0,l=i.length;r<l;++r)c.push(Ss(e._chart,i[r]));return t.filter&&(c=c.filter(((e,i,o)=>t.filter(e,i,o,n)))),t.itemSort&&(c=c.sort(((e,i)=>t.itemSort(e,i,n)))),J(c,(i=>{const n=Ls(t.callbacks,i);o.push(n.labelColor.call(e,i)),s.push(n.labelPointStyle.call(e,i)),a.push(n.labelTextColor.call(e,i))})),e.labelColors=o,e.labelPointStyles=s,e.labelTextColors=a,e.dataPoints=c,c}update(t,e){const i=this,n=i.options.setContext(i.getContext()),o=i._active;let s,a=[];if(o.length){const t=ws[n.position].call(i,o,i._eventPosition);a=i._createItems(n),i.title=i.getTitle(a,n),i.beforeBody=i.getBeforeBody(a,n),i.body=i.getBody(a,n),i.afterBody=i.getAfterBody(a,n),i.footer=i.getFooter(a,n);const e=i._size=Ps(i,n),r=Object.assign({},t,e),l=Cs(i._chart,n,r),c=Os(n,r,l,i._chart);i.xAlign=l.xAlign,i.yAlign=l.yAlign,s={opacity:1,x:c.x,y:c.y,width:e.width,height:e.height,caretX:t.x,caretY:t.y}}else 0!==i.opacity&&(s={opacity:0});i._tooltipItems=a,i.$context=void 0,s&&i._resolveAnimations().update(i,s),t&&n.external&&n.external.call(i,{chart:i._chart,tooltip:i,replay:e})}drawCaret(t,e,i,n){const o=this.getCaretPosition(t,i,n);e.lineTo(o.x1,o.y1),e.lineTo(o.x2,o.y2),e.lineTo(o.x3,o.y3)}getCaretPosition(t,e,i){const{xAlign:n,yAlign:o}=this,{cornerRadius:s,caretSize:a}=i,{x:r,y:l}=t,{width:c,height:h}=e;let d,u,f,g,p,m;return"center"===o?(p=l+h/2,"left"===n?(d=r,u=d-a,g=p+a,m=p-a):(d=r+c,u=d+a,g=p-a,m=p+a),f=d):(u="left"===n?r+s+a:"right"===n?r+c-s-a:this.caretX,"top"===o?(g=l,p=g-a,d=u-a,f=u+a):(g=l+h,p=g+a,d=u+a,f=u-a),m=g),{x1:d,x2:u,x3:f,y1:g,y2:p,y3:m}}drawTitle(t,e,i){const n=this,o=n.title,s=o.length;let a,r,l;if(s){const c=_n(i.rtl,n.x,n.width);for(t.x=Ts(n,i.titleAlign,i),e.textAlign=c.textAlign(i.titleAlign),e.textBaseline="middle",a=Be(i.titleFont),r=i.titleSpacing,e.fillStyle=i.titleColor,e.font=a.string,l=0;l<s;++l)e.fillText(o[l],c.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+r,l+1===s&&(t.y+=i.titleMarginBottom-r)}}_drawColorBox(t,e,i,n,o){const s=this,a=s.labelColors[i],r=s.labelPointStyles[i],{boxHeight:l,boxWidth:c}=o,h=Be(o.bodyFont),d=Ts(s,"left",o),u=n.x(d),f=l<h.lineHeight?(h.lineHeight-l)/2:0,g=e.y+f;if(o.usePointStyle){const e={radius:Math.min(c,l)/2,pointStyle:r.pointStyle,rotation:r.rotation,borderWidth:1},i=n.leftForLtr(u,c)+c/2,s=g+l/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,Kt(t,e,i,s),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,Kt(t,e,i,s)}else{t.lineWidth=a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;const e=n.leftForLtr(u,c),i=n.leftForLtr(n.xPlus(u,1),c-2),s=Ie(a.borderRadius);Object.values(s).some((t=>0!==t))?(t.beginPath(),t.fillStyle=o.multiKeyBackground,ne(t,{x:e,y:g,w:c,h:l,radius:s}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),ne(t,{x:i,y:g+1,w:c-2,h:l-2,radius:s}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(e,g,c,l),t.strokeRect(e,g,c,l),t.fillStyle=a.backgroundColor,t.fillRect(i,g+1,c-2,l-2))}t.fillStyle=s.labelTextColors[i]}drawBody(t,e,i){const n=this,{body:o}=n,{bodySpacing:s,bodyAlign:a,displayColors:r,boxHeight:l,boxWidth:c}=i,h=Be(i.bodyFont);let d=h.lineHeight,u=0;const f=_n(i.rtl,n.x,n.width),g=function(i){e.fillText(i,f.x(t.x+u),t.y+d/2),t.y+=d+s},p=f.textAlign(a);let m,x,b,_,y,v,w;for(e.textAlign=a,e.textBaseline="middle",e.font=h.string,t.x=Ts(n,p,i),e.fillStyle=i.bodyColor,J(n.beforeBody,g),u=r&&"right"!==p?"center"===a?c/2+1:c+2:0,_=0,v=o.length;_<v;++_){for(m=o[_],x=n.labelTextColors[_],e.fillStyle=x,J(m.before,g),b=m.lines,r&&b.length&&(n._drawColorBox(e,t,_,f,i),d=Math.max(h.lineHeight,l)),y=0,w=b.length;y<w;++y)g(b[y]),d=h.lineHeight;J(m.after,g)}u=0,d=h.lineHeight,J(n.afterBody,g),t.y-=s}drawFooter(t,e,i){const n=this,o=n.footer,s=o.length;let a,r;if(s){const l=_n(i.rtl,n.x,n.width);for(t.x=Ts(n,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=l.textAlign(i.footerAlign),e.textBaseline="middle",a=Be(i.footerFont),e.fillStyle=i.footerColor,e.font=a.string,r=0;r<s;++r)e.fillText(o[r],l.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+i.footerSpacing}}drawBackground(t,e,i,n){const{xAlign:o,yAlign:s}=this,{x:a,y:r}=t,{width:l,height:c}=i,h=n.cornerRadius;e.fillStyle=n.backgroundColor,e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.beginPath(),e.moveTo(a+h,r),"top"===s&&this.drawCaret(t,e,i,n),e.lineTo(a+l-h,r),e.quadraticCurveTo(a+l,r,a+l,r+h),"center"===s&&"right"===o&&this.drawCaret(t,e,i,n),e.lineTo(a+l,r+c-h),e.quadraticCurveTo(a+l,r+c,a+l-h,r+c),"bottom"===s&&this.drawCaret(t,e,i,n),e.lineTo(a+h,r+c),e.quadraticCurveTo(a,r+c,a,r+c-h),"center"===s&&"left"===o&&this.drawCaret(t,e,i,n),e.lineTo(a,r+h),e.quadraticCurveTo(a,r,a+h,r),e.closePath(),e.fill(),n.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this,i=e._chart,n=e.$animations,o=n&&n.x,s=n&&n.y;if(o||s){const n=ws[t.position].call(e,e._active,e._eventPosition);if(!n)return;const a=e._size=Ps(e,t),r=Object.assign({},n,e._size),l=Cs(i,t,r),c=Os(t,r,l,i);o._to===c.x&&s._to===c.y||(e.xAlign=l.xAlign,e.yAlign=l.yAlign,e.width=a.width,e.height=a.height,e.caretX=n.x,e.caretY=n.y,e._resolveAnimations().update(e,c))}}draw(t){const e=this,i=e.options.setContext(e.getContext());let n=e.opacity;if(!n)return;e._updateAnimationTarget(i);const o={width:e.width,height:e.height},s={x:e.x,y:e.y};n=Math.abs(n)<.001?0:n;const a=Fe(i.padding),r=e.title.length||e.beforeBody.length||e.body.length||e.afterBody.length||e.footer.length;i.enabled&&r&&(t.save(),t.globalAlpha=n,e.drawBackground(s,t,o,i),yn(t,i.textDirection),s.y+=a.top,e.drawTitle(s,t,i),e.drawBody(s,t,i),e.drawFooter(s,t,i),vn(t,i.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const i=this,n=i._active,o=t.map((({datasetIndex:t,index:e})=>{const n=i._chart.getDatasetMeta(t);if(!n)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:n.data[e],index:e}})),s=!tt(n,o),a=i._positionChanged(o,e);(s||a)&&(i._active=o,i._eventPosition=e,i.update(!0))}handleEvent(t,e){const i=this,n=i.options,o=i._active||[];let s=!1,a=[];"mouseout"!==t.type&&(a=i._chart.getElementsAtEventForMode(t,n.mode,n,e),n.reverse&&a.reverse());const r=i._positionChanged(a,t);return s=e||!tt(a,o)||r,s&&(i._active=a,(n.enabled||n.external)&&(i._eventPosition={x:t.x,y:t.y},i.update(!0,e))),s}_positionChanged(t,e){const{caretX:i,caretY:n,options:o}=this,s=ws[o.position].call(this,t,e);return!1!==s&&(i!==s.x||n!==s.y)}}Rs.positioners=ws;var Es={id:"tooltip",_element:Rs,positioners:ws,afterInit(t,e,i){i&&(t.tooltip=new Rs({_chart:t,options:i}))},beforeUpdate(t,e,i){t.tooltip&&t.tooltip.initialize(i)},reset(t,e,i){t.tooltip&&t.tooltip.initialize(i)},afterDraw(t){const e=t.tooltip,i={tooltip:e};!1!==t.notifyPlugins("beforeTooltipDraw",i)&&(e&&e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",i))},afterEvent(t,e){if(t.tooltip){const i=e.replay;t.tooltip.handleEvent(e.event,i)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:H,title(t){if(t.length>0){const e=t[0],i=e.chart.data.labels,n=i?i.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return i[e.dataIndex]}return""},afterTitle:H,beforeBody:H,beforeLabel:H,label(t){if(this&&this.options&&"dataset"===this.options.mode)return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const i=t.formattedValue;return $(i)||(e+=i),e},labelColor(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:H,afterBody:H,beforeFooter:H,footer:H,afterFooter:H}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>"filter"!==t&&"itemSort"!==t&&"external"!==t,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},zs=Object.freeze({__proto__:null,Decimation:Go,Filler:gs,Legend:xs,SubTitle:vs,Title:_s,Tooltip:Es});function Is(t,e,i){const n=t.indexOf(e);if(-1===n)return((t,e,i)=>"string"==typeof e?t.push(e)-1:isNaN(e)?null:i)(t,e,i);return n!==t.lastIndexOf(e)?i:n}class Fs extends qi{constructor(t){super(t),this._startValue=void 0,this._valueRange=0}parse(t,e){if($(t))return null;const i=this.getLabels();return((t,e)=>null===t?null:Ht(Math.round(t),0,e))(e=isFinite(e)&&i[e]===t?e:Is(i,t,K(e,t)),i.length-1)}determineDataLimits(){const t=this,{minDefined:e,maxDefined:i}=t.getUserBounds();let{min:n,max:o}=t.getMinMax(!0);"ticks"===t.options.bounds&&(e||(n=0),i||(o=t.getLabels().length-1)),t.min=n,t.max=o}buildTicks(){const t=this,e=t.min,i=t.max,n=t.options.offset,o=[];let s=t.getLabels();s=0===e&&i===s.length-1?s:s.slice(e,i+1),t._valueRange=Math.max(s.length-(n?0:1),1),t._startValue=t.min-(n?.5:0);for(let t=e;t<=i;t++)o.push({value:t});return o}getLabelForValue(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}configure(){const t=this;super.configure(),t.isHorizontal()||(t._reversePixels=!t._reversePixels)}getPixelForValue(t){const e=this;return"number"!=typeof t&&(t=e.parse(t)),null===t?NaN:e.getPixelForDecimal((t-e._startValue)/e._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){const e=this;return Math.round(e._startValue+e.getDecimalForPixel(t)*e._valueRange)}getBasePixel(){return this.bottom}}function Bs(t,e,{horizontal:i,minRotation:n}){const o=Et(n),s=(i?Math.sin(o):Math.cos(o))||.001,a=.75*e*(""+t).length;return Math.min(e/s,a)}Fs.id="category",Fs.defaults={ticks:{callback:Fs.prototype.getLabelForValue}};class Vs extends qi{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return $(t)||("number"==typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const t=this,{beginAtZero:e}=t.options,{minDefined:i,maxDefined:n}=t.getUserBounds();let{min:o,max:s}=t;const a=t=>o=i?o:t,r=t=>s=n?s:t;if(e){const t=Dt(o),e=Dt(s);t<0&&e<0?r(0):t>0&&e>0&&a(0)}o===s&&(r(s+1),e||a(o-1)),t.min=o,t.max=s}getTickLimit(){const t=this,e=t.options.ticks;let i,{maxTicksLimit:n,stepSize:o}=e;return o?i=Math.ceil(t.max/o)-Math.floor(t.min/o)+1:(i=t.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this,e=t.options,i=e.ticks;let n=t.getTickLimit();n=Math.max(2,n);const o=function(t,e){const i=[],{bounds:n,step:o,min:s,max:a,precision:r,count:l,maxTicks:c,maxDigits:h,includeBounds:d}=t,u=o||1,f=c-1,{min:g,max:p}=e,m=!$(s),x=!$(a),b=!$(l),_=(p-g)/(h+1);let y,v,w,M,k=Ct((p-g)/f/u)*u;if(k<1e-14&&!m&&!x)return[{value:g},{value:p}];M=Math.ceil(p/k)-Math.floor(g/k),M>f&&(k=Ct(M*k/f/u)*u),$(r)||(y=Math.pow(10,r),k=Math.ceil(k*y)/y),"ticks"===n?(v=Math.floor(g/k)*k,w=Math.ceil(p/k)*k):(v=g,w=p),m&&x&&o&&Lt((a-s)/o,k/1e3)?(M=Math.round(Math.min((a-s)/k,c)),k=(a-s)/M,v=s,w=a):b?(v=m?s:v,w=x?a:w,M=l-1,k=(w-v)/M):(M=(w-v)/k,M=At(M,Math.round(M),k/1e3)?Math.round(M):Math.ceil(M));const S=Math.max(It(k),It(v));y=Math.pow(10,$(r)?S:r),v=Math.round(v*y)/y,w=Math.round(w*y)/y;let P=0;for(m&&(d&&v!==s?(i.push({value:s}),v<s&&P++,At(Math.round((v+P*k)*y)/y,s,Bs(s,_,t))&&P++):v<s&&P++);P<M;++P)i.push({value:Math.round((v+P*k)*y)/y});return x&&d&&w!==a?At(i[i.length-1].value,a,Bs(a,_,t))?i[i.length-1].value=a:i.push({value:a}):x&&w!==a||i.push({value:w}),i}({maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:i.precision,step:i.stepSize,count:i.count,maxDigits:t._maxDigits(),horizontal:t.isHorizontal(),minRotation:i.minRotation||0,includeBounds:!1!==i.includeBounds},t._range||t);return"ticks"===e.bounds&&Rt(o,t,"value"),e.reverse?(o.reverse(),t.start=t.max,t.end=t.min):(t.start=t.min,t.end=t.max),o}configure(){const t=this,e=t.ticks;let i=t.min,n=t.max;if(super.configure(),t.options.offset&&e.length){const t=(n-i)/Math.max(e.length-1,1)/2;i-=t,n+=t}t._startValue=i,t._endValue=n,t._valueRange=n-i}getLabelForValue(t){return Fi(t,this.chart.options.locale)}}class Ws extends Vs{determineDataLimits(){const t=this,{min:e,max:i}=t.getMinMax(!0);t.min=X(e)?e:0,t.max=X(i)?i:1,t.handleTickRangeOptions()}computeTickLimit(){const t=this,e=t.isHorizontal(),i=e?t.width:t.height,n=Et(t.options.ticks.minRotation),o=(e?Math.sin(n):Math.cos(n))||.001,s=t._resolveTickFontOptions(0);return Math.ceil(i/Math.min(40,s.lineHeight/o))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}function Ns(t){return 1===t/Math.pow(10,Math.floor(Pt(t)))}Ws.id="linear",Ws.defaults={ticks:{callback:Vi.formatters.numeric}};class Hs extends qi{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const i=Vs.prototype.parse.apply(this,[t,e]);if(0!==i)return X(i)&&i>0?i:null;this._zero=!0}determineDataLimits(){const t=this,{min:e,max:i}=t.getMinMax(!0);t.min=X(e)?Math.max(0,e):null,t.max=X(i)?Math.max(0,i):null,t.options.beginAtZero&&(t._zero=!0),t.handleTickRangeOptions()}handleTickRangeOptions(){const t=this,{minDefined:e,maxDefined:i}=t.getUserBounds();let n=t.min,o=t.max;const s=t=>n=e?n:t,a=t=>o=i?o:t,r=(t,e)=>Math.pow(10,Math.floor(Pt(t))+e);n===o&&(n<=0?(s(1),a(10)):(s(r(n,-1)),a(r(o,1)))),n<=0&&s(r(o,-1)),o<=0&&a(r(n,1)),t._zero&&t.min!==t._suggestedMin&&n===r(t.min,0)&&s(r(n,-1)),t.min=n,t.max=o}buildTicks(){const t=this,e=t.options,i=function(t,e){const i=Math.floor(Pt(e.max)),n=Math.ceil(e.max/Math.pow(10,i)),o=[];let s=q(t.min,Math.pow(10,Math.floor(Pt(e.min)))),a=Math.floor(Pt(s)),r=Math.floor(s/Math.pow(10,a)),l=a<0?Math.pow(10,Math.abs(a)):1;do{o.push({value:s,major:Ns(s)}),++r,10===r&&(r=1,++a,l=a>=0?1:l),s=Math.round(r*Math.pow(10,a)*l)/l}while(a<i||a===i&&r<n);const c=q(t.max,s);return o.push({value:c,major:Ns(s)}),o}({min:t._userMin,max:t._userMax},t);return"ticks"===e.bounds&&Rt(i,t,"value"),e.reverse?(i.reverse(),t.start=t.max,t.end=t.min):(t.start=t.min,t.end=t.max),i}getLabelForValue(t){return void 0===t?"0":Fi(t,this.chart.options.locale)}configure(){const t=this,e=t.min;super.configure(),t._startValue=Pt(e),t._valueRange=Pt(t.max)-Pt(e)}getPixelForValue(t){const e=this;return void 0!==t&&0!==t||(t=e.min),null===t||isNaN(t)?NaN:e.getPixelForDecimal(t===e.min?0:(Pt(t)-e._startValue)/e._valueRange)}getValueForPixel(t){const e=this,i=e.getDecimalForPixel(t);return Math.pow(10,e._startValue+i*e._valueRange)}}function js(t){const e=t.ticks;if(e.display&&t.display){const t=Fe(e.backdropPadding);return K(e.font&&e.font.size,xt.font.size)+t.height}return 0}function $s(t,e,i,n,o){return t===n||t===o?{start:e-i/2,end:e+i/2}:t<n||t>o?{start:e-i,end:e}:{start:e,end:e+i}}function Ys(t){const e={l:0,r:t.width,t:0,b:t.height-t.paddingTop},i={},n=[],o=[],s=t.getLabels().length;for(let c=0;c<s;c++){const s=t.options.pointLabels.setContext(t.getContext(c));o[c]=s.padding;const h=t.getPointPosition(c,t.drawingArea+o[c]),d=Be(s.font),u=(a=t.ctx,r=d,l=Y(l=t._pointLabels[c])?l:[l],{w:Ut(a,r.string,l),h:l.length*r.lineHeight});n[c]=u;const f=t.getIndexAngle(c),g=zt(f),p=$s(g,h.x,u.w,0,180),m=$s(g,h.y,u.h,90,270);p.start<e.l&&(e.l=p.start,i.l=f),p.end>e.r&&(e.r=p.end,i.r=f),m.start<e.t&&(e.t=m.start,i.t=f),m.end>e.b&&(e.b=m.end,i.b=f)}var a,r,l;t._setReductions(t.drawingArea,e,i),t._pointLabelItems=function(t,e,i){const n=[],o=t.getLabels().length,s=t.options,a=js(s),r=t.getDistanceFromCenterForValue(s.ticks.reverse?t.min:t.max);for(let s=0;s<o;s++){const o=0===s?a/2:0,l=t.getPointPosition(s,r+o+i[s]),c=zt(t.getIndexAngle(s)),h=e[s],d=qs(l.y,h.h,c),u=Us(c),f=Xs(l.x,h.w,u);n.push({x:l.x,y:d,textAlign:u,left:f,top:d,right:f+h.w,bottom:d+h.h})}return n}(t,n,o)}function Us(t){return 0===t||180===t?"center":t<180?"left":"right"}function Xs(t,e,i){return"right"===i?t-=e:"center"===i&&(t-=e/2),t}function qs(t,e,i){return 90===i||270===i?t-=e/2:(i>270||i<90)&&(t-=e),t}function Ks(t,e,i,n){const{ctx:o}=t;if(i)o.arc(t.xCenter,t.yCenter,e,0,_t);else{let i=t.getPointPosition(0,e);o.moveTo(i.x,i.y);for(let s=1;s<n;s++)i=t.getPointPosition(s,e),o.lineTo(i.x,i.y)}}function Gs(t){return Tt(t)?t:0}Hs.id="logarithmic",Hs.defaults={ticks:{callback:Vi.formatters.logarithmic,major:{enabled:!0}}};class Zs extends Vs{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this;t.width=t.maxWidth,t.height=t.maxHeight,t.paddingTop=js(t.options)/2,t.xCenter=Math.floor(t.width/2),t.yCenter=Math.floor((t.height-t.paddingTop)/2),t.drawingArea=Math.min(t.height-t.paddingTop,t.width)/2}determineDataLimits(){const t=this,{min:e,max:i}=t.getMinMax(!1);t.min=X(e)&&!isNaN(e)?e:0,t.max=X(i)&&!isNaN(i)?i:0,t.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/js(this.options))}generateTickLabels(t){const e=this;Vs.prototype.generateTickLabels.call(e,t),e._pointLabels=e.getLabels().map(((t,i)=>{const n=Q(e.options.pointLabels.callback,[t,i],e);return n||0===n?n:""}))}fit(){const t=this,e=t.options;e.display&&e.pointLabels.display?Ys(t):t.setCenterPoint(0,0,0,0)}_setReductions(t,e,i){const n=this;let o=e.l/Math.sin(i.l),s=Math.max(e.r-n.width,0)/Math.sin(i.r),a=-e.t/Math.cos(i.t),r=-Math.max(e.b-(n.height-n.paddingTop),0)/Math.cos(i.b);o=Gs(o),s=Gs(s),a=Gs(a),r=Gs(r),n.drawingArea=Math.max(t/2,Math.min(Math.floor(t-(o+s)/2),Math.floor(t-(a+r)/2))),n.setCenterPoint(o,s,a,r)}setCenterPoint(t,e,i,n){const o=this,s=o.width-e-o.drawingArea,a=t+o.drawingArea,r=i+o.drawingArea,l=o.height-o.paddingTop-n-o.drawingArea;o.xCenter=Math.floor((a+s)/2+o.left),o.yCenter=Math.floor((r+l)/2+o.top+o.paddingTop)}getIndexAngle(t){return Wt(t*(_t/this.getLabels().length)+Et(this.options.startAngle||0))}getDistanceFromCenterForValue(t){const e=this;if($(t))return NaN;const i=e.drawingArea/(e.max-e.min);return e.options.reverse?(e.max-t)*i:(t-e.min)*i}getValueForDistanceFromCenter(t){if($(t))return NaN;const e=this,i=t/(e.drawingArea/(e.max-e.min));return e.options.reverse?e.max-i:e.min+i}getPointPosition(t,e){const i=this,n=i.getIndexAngle(t)-Mt;return{x:Math.cos(n)*e+i.xCenter,y:Math.sin(n)*e+i.yCenter,angle:n}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:i,right:n,bottom:o}=this._pointLabelItems[t];return{left:e,top:i,right:n,bottom:o}}drawBackground(){const t=this,{backgroundColor:e,grid:{circular:i}}=t.options;if(e){const n=t.ctx;n.save(),n.beginPath(),Ks(t,t.getDistanceFromCenterForValue(t._endValue),i,t.getLabels().length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const t=this,e=t.ctx,i=t.options,{angleLines:n,grid:o}=i,s=t.getLabels().length;let a,r,l;if(i.pointLabels.display&&function(t,e){const{ctx:i,options:{pointLabels:n}}=t;for(let o=e-1;o>=0;o--){const e=n.setContext(t.getContext(o)),s=Be(e.font),{x:a,y:r,textAlign:l,left:c,top:h,right:d,bottom:u}=t._pointLabelItems[o],{backdropColor:f}=e;if(!$(f)){const t=Fe(e.backdropPadding);i.fillStyle=f,i.fillRect(c-t.left,h-t.top,d-c+t.width,u-h+t.height)}ee(i,t._pointLabels[o],a,r+s.lineHeight/2,s,{color:e.color,textAlign:l,textBaseline:"middle"})}}(t,s),o.display&&t.ticks.forEach(((e,i)=>{if(0!==i){r=t.getDistanceFromCenterForValue(e.value);const n=o.setContext(t.getContext(i-1));!function(t,e,i,n){const o=t.ctx,s=e.circular,{color:a,lineWidth:r}=e;!s&&!n||!a||!r||i<0||(o.save(),o.strokeStyle=a,o.lineWidth=r,o.setLineDash(e.borderDash),o.lineDashOffset=e.borderDashOffset,o.beginPath(),Ks(t,i,s,n),o.closePath(),o.stroke(),o.restore())}(t,n,r,s)}})),n.display){for(e.save(),a=t.getLabels().length-1;a>=0;a--){const o=n.setContext(t.getContext(a)),{color:s,lineWidth:c}=o;c&&s&&(e.lineWidth=c,e.strokeStyle=s,e.setLineDash(o.borderDash),e.lineDashOffset=o.borderDashOffset,r=t.getDistanceFromCenterForValue(i.ticks.reverse?t.min:t.max),l=t.getPointPosition(a,r),e.beginPath(),e.moveTo(t.xCenter,t.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const t=this,e=t.ctx,i=t.options,n=i.ticks;if(!n.display)return;const o=t.getIndexAngle(0);let s,a;e.save(),e.translate(t.xCenter,t.yCenter),e.rotate(o),e.textAlign="center",e.textBaseline="middle",t.ticks.forEach(((o,r)=>{if(0===r&&!i.reverse)return;const l=n.setContext(t.getContext(r)),c=Be(l.font);if(s=t.getDistanceFromCenterForValue(t.ticks[r].value),l.showLabelBackdrop){e.font=c.string,a=e.measureText(o.label).width,e.fillStyle=l.backdropColor;const t=Fe(l.backdropPadding);e.fillRect(-a/2-t.left,-s-c.size/2-t.top,a+t.width,c.size+t.height)}ee(e,o.label,0,-s,c,{color:l.color})})),e.restore()}drawTitle(){}}Zs.id="radialLinear",Zs.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Vi.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:t=>t,padding:5}},Zs.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},Zs.descriptors={angleLines:{_fallback:"grid"}};const Qs={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Js=Object.keys(Qs);function ta(t,e){return t-e}function ea(t,e){if($(e))return null;const i=t._adapter,{parser:n,round:o,isoWeekday:s}=t._parseOpts;let a=e;return"function"==typeof n&&(a=n(a)),X(a)||(a="string"==typeof n?i.parse(a,n):i.parse(a)),null===a?null:(o&&(a="week"!==o||!Tt(s)&&!0!==s?i.startOf(a,o):i.startOf(a,"isoWeek",s)),+a)}function ia(t,e,i,n){const o=Js.length;for(let s=Js.indexOf(t);s<o-1;++s){const t=Qs[Js[s]],o=t.steps?t.steps:Number.MAX_SAFE_INTEGER;if(t.common&&Math.ceil((i-e)/(o*t.size))<=n)return Js[s]}return Js[o-1]}function na(t,e,i){if(i){if(i.length){const{lo:n,hi:o}=oe(i,e);t[i[n]>=e?i[n]:i[o]]=!0}}else t[e]=!0}function oa(t,e,i){const n=[],o={},s=e.length;let a,r;for(a=0;a<s;++a)r=e[a],o[r]=a,n.push({value:r,major:!1});return 0!==s&&i?function(t,e,i,n){const o=t._adapter,s=+o.startOf(e[0].value,n),a=e[e.length-1].value;let r,l;for(r=s;r<=a;r=+o.add(r,1,n))l=i[r],l>=0&&(e[l].major=!0);return e}(t,n,o,i):n}class sa extends qi{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e){const i=t.time||(t.time={}),n=this._adapter=new ao._date(t.adapters.date);st(i.displayFormats,n.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return void 0===t?null:ea(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this,e=t.options,i=t._adapter,n=e.time.unit||"day";let{min:o,max:s,minDefined:a,maxDefined:r}=t.getUserBounds();function l(t){a||isNaN(t.min)||(o=Math.min(o,t.min)),r||isNaN(t.max)||(s=Math.max(s,t.max))}a&&r||(l(t._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||l(t.getMinMax(!1))),o=X(o)&&!isNaN(o)?o:+i.startOf(Date.now(),n),s=X(s)&&!isNaN(s)?s:+i.endOf(Date.now(),n)+1,t.min=Math.min(o,s-1),t.max=Math.max(o+1,s)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){const t=this,e=t.options,i=e.time,n=e.ticks,o="labels"===n.source?t.getLabelTimestamps():t._generate();"ticks"===e.bounds&&o.length&&(t.min=t._userMin||o[0],t.max=t._userMax||o[o.length-1]);const s=t.min,a=re(o,s,t.max);return t._unit=i.unit||(n.autoSkip?ia(i.minUnit,t.min,t.max,t._getLabelCapacity(s)):function(t,e,i,n,o){for(let s=Js.length-1;s>=Js.indexOf(i);s--){const i=Js[s];if(Qs[i].common&&t._adapter.diff(o,n,i)>=e-1)return i}return Js[i?Js.indexOf(i):0]}(t,a.length,i.minUnit,t.min,t.max)),t._majorUnit=n.major.enabled&&"year"!==t._unit?function(t){for(let e=Js.indexOf(t)+1,i=Js.length;e<i;++e)if(Qs[Js[e]].common)return Js[e]}(t._unit):void 0,t.initOffsets(o),e.reverse&&a.reverse(),oa(t,a,t._majorUnit)}initOffsets(t){const e=this;let i,n,o=0,s=0;e.options.offset&&t.length&&(i=e.getDecimalForValue(t[0]),o=1===t.length?1-i:(e.getDecimalForValue(t[1])-i)/2,n=e.getDecimalForValue(t[t.length-1]),s=1===t.length?n:(n-e.getDecimalForValue(t[t.length-2]))/2);const a=t.length<3?.5:.25;o=Ht(o,0,a),s=Ht(s,0,a),e._offsets={start:o,end:s,factor:1/(o+1+s)}}_generate(){const t=this,e=t._adapter,i=t.min,n=t.max,o=t.options,s=o.time,a=s.unit||ia(s.minUnit,i,n,t._getLabelCapacity(i)),r=K(s.stepSize,1),l="week"===a&&s.isoWeekday,c=Tt(l)||!0===l,h={};let d,u,f=i;if(c&&(f=+e.startOf(f,"isoWeek",l)),f=+e.startOf(f,c?"day":a),e.diff(n,i,a)>1e5*r)throw new Error(i+" and "+n+" are too far apart with stepSize of "+r+" "+a);const g="data"===o.ticks.source&&t.getDataTimestamps();for(d=f,u=0;d<n;d=+e.add(d,r,a),u++)na(h,d,g);return d!==n&&"ticks"!==o.bounds&&1!==u||na(h,d,g),Object.keys(h).sort(((t,e)=>t-e)).map((t=>+t))}getLabelForValue(t){const e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}_tickFormatFunction(t,e,i,n){const o=this,s=o.options,a=s.time.displayFormats,r=o._unit,l=o._majorUnit,c=r&&a[r],h=l&&a[l],d=i[e],u=l&&h&&d&&d.major,f=o._adapter.format(t,n||(u?h:c)),g=s.ticks.callback;return g?Q(g,[f,e,i],o):f}generateTickLabels(t){let e,i,n;for(e=0,i=t.length;e<i;++e)n=t[e],n.label=this._tickFormatFunction(n.value,e,t)}getDecimalForValue(t){const e=this;return null===t?NaN:(t-e.min)/(e.max-e.min)}getPixelForValue(t){const e=this,i=e._offsets,n=e.getDecimalForValue(t);return e.getPixelForDecimal((i.start+n)*i.factor)}getValueForPixel(t){const e=this,i=e._offsets,n=e.getDecimalForPixel(t)/i.factor-i.end;return e.min+n*(e.max-e.min)}_getLabelSize(t){const e=this,i=e.options.ticks,n=e.ctx.measureText(t).width,o=Et(e.isHorizontal()?i.maxRotation:i.minRotation),s=Math.cos(o),a=Math.sin(o),r=e._resolveTickFontOptions(0).size;return{w:n*s+r*a,h:n*a+r*s}}_getLabelCapacity(t){const e=this,i=e.options.time,n=i.displayFormats,o=n[i.unit]||n.millisecond,s=e._tickFormatFunction(t,0,oa(e,[t],e._majorUnit),o),a=e._getLabelSize(s),r=Math.floor(e.isHorizontal()?e.width/a.w:e.height/a.h)-1;return r>0?r:1}getDataTimestamps(){const t=this;let e,i,n=t._cache.data||[];if(n.length)return n;const o=t.getMatchingVisibleMetas();if(t._normalized&&o.length)return t._cache.data=o[0].controller.getAllParsedValues(t);for(e=0,i=o.length;e<i;++e)n=n.concat(o[e].controller.getAllParsedValues(t));return t._cache.data=t.normalize(n)}getLabelTimestamps(){const t=this,e=t._cache.labels||[];let i,n;if(e.length)return e;const o=t.getLabels();for(i=0,n=o.length;i<n;++i)e.push(ea(t,o[i]));return t._cache.labels=t._normalized?e:t.normalize(e)}normalize(t){return de(t.sort(ta))}}function aa(t,e,i){let n,o,s,a,r=0,l=t.length-1;i?(e>=t[r].pos&&e<=t[l].pos&&({lo:r,hi:l}=se(t,"pos",e)),({pos:n,time:s}=t[r]),({pos:o,time:a}=t[l])):(e>=t[r].time&&e<=t[l].time&&({lo:r,hi:l}=se(t,"time",e)),({time:n,pos:s}=t[r]),({time:o,pos:a}=t[l]));const c=o-n;return c?s+(a-s)*(e-n)/c:s}sa.id="time",sa.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}};class ra extends sa{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this,e=t._getTimestampsForTable(),i=t._table=t.buildLookupTable(e);t._minPos=aa(i,t.min),t._tableRange=aa(i,t.max)-t._minPos,super.initOffsets(e)}buildLookupTable(t){const{min:e,max:i}=this,n=[],o=[];let s,a,r,l,c;for(s=0,a=t.length;s<a;++s)l=t[s],l>=e&&l<=i&&n.push(l);if(n.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(s=0,a=n.length;s<a;++s)c=n[s+1],r=n[s-1],l=n[s],Math.round((c+r)/2)!==l&&o.push({time:l,pos:s/(a-1)});return o}_getTimestampsForTable(){const t=this;let e=t._cache.all||[];if(e.length)return e;const i=t.getDataTimestamps(),n=t.getLabelTimestamps();return e=i.length&&n.length?t.normalize(i.concat(n)):i.length?i:n,e=t._cache.all=e,e}getDecimalForValue(t){return(aa(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this,i=e._offsets,n=e.getDecimalForPixel(t)/i.factor-i.end;return aa(e._table,n*e._tableRange+e._minPos,!0)}}ra.id="timeseries",ra.defaults=sa.defaults;var la=Object.freeze({__proto__:null,CategoryScale:Fs,LinearScale:Ws,LogarithmicScale:Hs,RadialLinearScale:Zs,TimeScale:sa,TimeSeriesScale:ra});return eo.register(yo,la,Xo,zs),eo.helpers={...Tn},eo._adapters=ao,eo.Animation=yi,eo.Animations=wi,eo.animator=a,eo.controllers=Ln.controllers.items,eo.DatasetController=Ei,eo.Element=zi,eo.elements=Xo,eo.Interaction=Te,eo.layouts=Ze,eo.platforms=fi,eo.Scale=qi,eo.Ticks=Vi,Object.assign(eo,yo,la,Xo,zs,fi),eo.Chart=eo,"undefined"!=typeof window&&(window.Chart=eo),eo}));
/*!
 * chartjs-plugin-datalabels v2.0.0
 * https://chartjs-plugin-datalabels.netlify.app
 * (c) 2017-2021 chartjs-plugin-datalabels contributors
 * Released under the MIT license
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("chart.js/helpers"),require("chart.js")):"function"==typeof define&&define.amd?define(["chart.js/helpers","chart.js"],e):(t="undefined"!=typeof globalThis?globalThis:t||self).ChartDataLabels=e(t.Chart.helpers,t.Chart)}(this,(function(t,e){"use strict";var r=function(){if("undefined"!=typeof window){if(window.devicePixelRatio)return window.devicePixelRatio;var t=window.screen;if(t)return(t.deviceXDPI||1)/(t.logicalXDPI||1)}return 1}(),a=function(e){var r,a=[];for(e=[].concat(e);e.length;)"string"==typeof(r=e.pop())?a.unshift.apply(a,r.split("\n")):Array.isArray(r)?e.push.apply(e,r):t.isNullOrUndef(e)||a.unshift(""+r);return a},o=function(t,e,r){var a,o=[].concat(e),n=o.length,i=t.font,l=0;for(t.font=r.string,a=0;a<n;++a)l=Math.max(t.measureText(o[a]).width,l);return t.font=i,{height:n*r.lineHeight,width:l}},n=function(t,e,r){return Math.max(t,Math.min(e,r))},i=function(t,e){var r,a,o,n,i=t.slice(),l=[];for(r=0,o=e.length;r<o;++r)n=e[r],-1===(a=i.indexOf(n))?l.push([n,1]):i.splice(a,1);for(r=0,o=i.length;r<o;++r)l.push([i[r],-1]);return l};function l(t,e){var r=e.x,a=e.y;if(null===r)return{x:0,y:-1};if(null===a)return{x:1,y:0};var o=t.x-r,n=t.y-a,i=Math.sqrt(o*o+n*n);return{x:i?o/i:0,y:i?n/i:-1}}function s(t,e,r){var a=0;return t<r.left?a|=1:t>r.right&&(a|=2),e<r.top?a|=8:e>r.bottom&&(a|=4),a}function u(t,e){var r,a,o=e.anchor,n=t;return e.clamp&&(n=function(t,e){for(var r,a,o,n=t.x0,i=t.y0,l=t.x1,u=t.y1,d=s(n,i,e),c=s(l,u,e);d|c&&!(d&c);)8&(r=d||c)?(a=n+(l-n)*(e.top-i)/(u-i),o=e.top):4&r?(a=n+(l-n)*(e.bottom-i)/(u-i),o=e.bottom):2&r?(o=i+(u-i)*(e.right-n)/(l-n),a=e.right):1&r&&(o=i+(u-i)*(e.left-n)/(l-n),a=e.left),r===d?d=s(n=a,i=o,e):c=s(l=a,u=o,e);return{x0:n,x1:l,y0:i,y1:u}}(n,e.area)),"start"===o?(r=n.x0,a=n.y0):"end"===o?(r=n.x1,a=n.y1):(r=(n.x0+n.x1)/2,a=(n.y0+n.y1)/2),function(t,e,r,a,o){switch(o){case"center":r=a=0;break;case"bottom":r=0,a=1;break;case"right":r=1,a=0;break;case"left":r=-1,a=0;break;case"top":r=0,a=-1;break;case"start":r=-r,a=-a;break;case"end":break;default:o*=Math.PI/180,r=Math.cos(o),a=Math.sin(o)}return{x:t,y:e,vx:r,vy:a}}(r,a,t.vx,t.vy,e.align)}var d=function(t,e){var r=(t.startAngle+t.endAngle)/2,a=Math.cos(r),o=Math.sin(r),n=t.innerRadius,i=t.outerRadius;return u({x0:t.x+a*n,y0:t.y+o*n,x1:t.x+a*i,y1:t.y+o*i,vx:a,vy:o},e)},c=function(t,e){var r=l(t,e.origin),a=r.x*t.options.radius,o=r.y*t.options.radius;return u({x0:t.x-a,y0:t.y-o,x1:t.x+a,y1:t.y+o,vx:r.x,vy:r.y},e)},h=function(t,e){var r=l(t,e.origin),a=t.x,o=t.y,n=0,i=0;return t.horizontal?(a=Math.min(t.x,t.base),n=Math.abs(t.base-t.x)):(o=Math.min(t.y,t.base),i=Math.abs(t.base-t.y)),u({x0:a,y0:o+i,x1:a+n,y1:o,vx:r.x,vy:r.y},e)},f=function(t,e){var r=l(t,e.origin);return u({x0:t.x,y0:t.y,x1:t.x,y1:t.y,vx:r.x,vy:r.y},e)},x=function(t){return Math.round(t*r)/r};function y(t,e){var r=e.chart.getDatasetMeta(e.datasetIndex).vScale;if(!r)return null;if(void 0!==r.xCenter&&void 0!==r.yCenter)return{x:r.xCenter,y:r.yCenter};var a=r.getBasePixel();return t.horizontal?{x:a,y:null}:{x:null,y:a}}function v(t,e,r){var a=r.backgroundColor,o=r.borderColor,n=r.borderWidth;(a||o&&n)&&(t.beginPath(),function(t,e,r,a,o,n){var i=Math.PI/2;if(n){var l=Math.min(n,o/2,a/2),s=e+l,u=r+l,d=e+a-l,c=r+o-l;t.moveTo(e,u),s<d&&u<c?(t.arc(s,u,l,-Math.PI,-i),t.arc(d,u,l,-i,0),t.arc(d,c,l,0,i),t.arc(s,c,l,i,Math.PI)):s<d?(t.moveTo(s,r),t.arc(d,u,l,-i,i),t.arc(s,u,l,i,Math.PI+i)):u<c?(t.arc(s,u,l,-Math.PI,0),t.arc(s,c,l,0,Math.PI)):t.arc(s,u,l,-Math.PI,Math.PI),t.closePath(),t.moveTo(e,r)}else t.rect(e,r,a,o)}(t,x(e.x)+n/2,x(e.y)+n/2,x(e.w)-n,x(e.h)-n,r.borderRadius),t.closePath(),a&&(t.fillStyle=a,t.fill()),o&&n&&(t.strokeStyle=o,t.lineWidth=n,t.lineJoin="miter",t.stroke()))}function b(t,e,r){var a=t.shadowBlur,o=r.stroked,n=x(r.x),i=x(r.y),l=x(r.w);o&&t.strokeText(e,n,i,l),r.filled&&(a&&o&&(t.shadowBlur=0),t.fillText(e,n,i,l),a&&o&&(t.shadowBlur=a))}var _=function(t,e,r,a){var o=this;o._config=t,o._index=a,o._model=null,o._rects=null,o._ctx=e,o._el=r};t.merge(_.prototype,{_modelize:function(r,a,n,i){var l,s=this,u=s._index,x=t.toFont(t.resolve([n.font,{}],i,u)),v=t.resolve([n.color,e.defaults.color],i,u);return{align:t.resolve([n.align,"center"],i,u),anchor:t.resolve([n.anchor,"center"],i,u),area:i.chart.chartArea,backgroundColor:t.resolve([n.backgroundColor,null],i,u),borderColor:t.resolve([n.borderColor,null],i,u),borderRadius:t.resolve([n.borderRadius,0],i,u),borderWidth:t.resolve([n.borderWidth,0],i,u),clamp:t.resolve([n.clamp,!1],i,u),clip:t.resolve([n.clip,!1],i,u),color:v,display:r,font:x,lines:a,offset:t.resolve([n.offset,0],i,u),opacity:t.resolve([n.opacity,1],i,u),origin:y(s._el,i),padding:t.toPadding(t.resolve([n.padding,0],i,u)),positioner:(l=s._el,l instanceof e.ArcElement?d:l instanceof e.PointElement?c:l instanceof e.BarElement?h:f),rotation:t.resolve([n.rotation,0],i,u)*(Math.PI/180),size:o(s._ctx,a,x),textAlign:t.resolve([n.textAlign,"start"],i,u),textShadowBlur:t.resolve([n.textShadowBlur,0],i,u),textShadowColor:t.resolve([n.textShadowColor,v],i,u),textStrokeColor:t.resolve([n.textStrokeColor,v],i,u),textStrokeWidth:t.resolve([n.textStrokeWidth,0],i,u)}},update:function(e){var r,o,n,i=this,l=null,s=null,u=i._index,d=i._config,c=t.resolve([d.display,!0],e,u);c&&(r=e.dataset.data[u],o=t.valueOrDefault(t.callback(d.formatter,[r,e]),r),(n=t.isNullOrUndef(o)?[]:a(o)).length&&(s=function(t){var e=t.borderWidth||0,r=t.padding,a=t.size.height,o=t.size.width,n=-o/2,i=-a/2;return{frame:{x:n-r.left-e,y:i-r.top-e,w:o+r.width+2*e,h:a+r.height+2*e},text:{x:n,y:i,w:o,h:a}}}(l=i._modelize(c,n,d,e)))),i._model=l,i._rects=s},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(t,e){var r,a=t.ctx,o=this._model,i=this._rects;this.visible()&&(a.save(),o.clip&&(r=o.area,a.beginPath(),a.rect(r.left,r.top,r.right-r.left,r.bottom-r.top),a.clip()),a.globalAlpha=n(0,o.opacity,1),a.translate(x(e.x),x(e.y)),a.rotate(o.rotation),v(a,i.frame,o),function(t,e,r,a){var o,n=a.textAlign,i=a.color,l=!!i,s=a.font,u=e.length,d=a.textStrokeColor,c=a.textStrokeWidth,h=d&&c;if(u&&(l||h))for(r=function(t,e,r){var a=r.lineHeight,o=t.w,n=t.x;return"center"===e?n+=o/2:"end"!==e&&"right"!==e||(n+=o),{h:a,w:o,x:n,y:t.y+a/2}}(r,n,s),t.font=s.string,t.textAlign=n,t.textBaseline="middle",t.shadowBlur=a.textShadowBlur,t.shadowColor=a.textShadowColor,l&&(t.fillStyle=i),h&&(t.lineJoin="round",t.lineWidth=c,t.strokeStyle=d),o=0,u=e.length;o<u;++o)b(t,e[o],{stroked:h,filled:l,w:r.w,x:r.x,y:r.y+r.h*o})}(a,o.lines,i.text,o),a.restore())}});var p=Number.MIN_SAFE_INTEGER||-9007199254740991,g=Number.MAX_SAFE_INTEGER||9007199254740991;function m(t,e,r){var a=Math.cos(r),o=Math.sin(r),n=e.x,i=e.y;return{x:n+a*(t.x-n)-o*(t.y-i),y:i+o*(t.x-n)+a*(t.y-i)}}function w(t,e){var r,a,o,n,i,l=g,s=p,u=e.origin;for(r=0;r<t.length;++r)o=(a=t[r]).x-u.x,n=a.y-u.y,i=e.vx*o+e.vy*n,l=Math.min(l,i),s=Math.max(s,i);return{min:l,max:s}}function M(t,e){var r=e.x-t.x,a=e.y-t.y,o=Math.sqrt(r*r+a*a);return{vx:(e.x-t.x)/o,vy:(e.y-t.y)/o,origin:t,ln:o}}var k=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};function $(t,e,r){var a=e.positioner(t,e),o=a.vx,n=a.vy;if(!o&&!n)return{x:a.x,y:a.y};var i=r.w,l=r.h,s=e.rotation,u=Math.abs(i/2*Math.cos(s))+Math.abs(l/2*Math.sin(s)),d=Math.abs(i/2*Math.sin(s))+Math.abs(l/2*Math.cos(s)),c=1/Math.max(Math.abs(o),Math.abs(n));return u*=o*c,d*=n*c,u+=e.offset*o,d+=e.offset*n,{x:a.x+u,y:a.y+d}}t.merge(k.prototype,{center:function(){var t=this._rect;return{x:t.x+t.w/2,y:t.y+t.h/2}},update:function(t,e,r){this._rotation=r,this._rect={x:e.x+t.x,y:e.y+t.y,w:e.w,h:e.h}},contains:function(t){var e=this,r=e._rect;return!((t=m(t,e.center(),-e._rotation)).x<r.x-1||t.y<r.y-1||t.x>r.x+r.w+2||t.y>r.y+r.h+2)},intersects:function(t){var e,r,a,o=this._points(),n=t._points(),i=[M(o[0],o[1]),M(o[0],o[3])];for(this._rotation!==t._rotation&&i.push(M(n[0],n[1]),M(n[0],n[3])),e=0;e<i.length;++e)if(r=w(o,i[e]),a=w(n,i[e]),r.max<a.min||a.max<r.min)return!1;return!0},_points:function(){var t=this,e=t._rect,r=t._rotation,a=t.center();return[m({x:e.x,y:e.y},a,r),m({x:e.x+e.w,y:e.y},a,r),m({x:e.x+e.w,y:e.y+e.h},a,r),m({x:e.x,y:e.y+e.h},a,r)]}});var C={prepare:function(t){var e,r,a,o,n,i=[];for(e=0,a=t.length;e<a;++e)for(r=0,o=t[e].length;r<o;++r)n=t[e][r],i.push(n),n.$layout={_box:new k,_hidable:!1,_visible:!0,_set:e,_idx:r};return i.sort((function(t,e){var r=t.$layout,a=e.$layout;return r._idx===a._idx?a._set-r._set:a._idx-r._idx})),this.update(i),i},update:function(t){var e,r,a,o,n,i=!1;for(e=0,r=t.length;e<r;++e)o=(a=t[e]).model(),(n=a.$layout)._hidable=o&&"auto"===o.display,n._visible=a.visible(),i|=n._hidable;i&&function(t){var e,r,a,o,n,i,l;for(e=0,r=t.length;e<r;++e)(o=(a=t[e]).$layout)._visible&&(l=new Proxy(a._el,{get:(t,e)=>t.getProps([e],!0)[e]}),n=a.geometry(),i=$(l,a.model(),n),o._box.update(i,n,a.rotation()));(function(t,e){var r,a,o,n;for(r=t.length-1;r>=0;--r)for(o=t[r].$layout,a=r-1;a>=0&&o._visible;--a)(n=t[a].$layout)._visible&&o._box.intersects(n._box)&&e(o,n)})(t,(function(t,e){var r=t._hidable,a=e._hidable;r&&a||a?e._visible=!1:r&&(t._visible=!1)}))}(t)},lookup:function(t,e){var r,a;for(r=t.length-1;r>=0;--r)if((a=t[r].$layout)&&a._visible&&a._box.contains(e))return t[r];return null},draw:function(t,e){var r,a,o,n,i,l;for(r=0,a=e.length;r<a;++r)(n=(o=e[r]).$layout)._visible&&(i=o.geometry(),l=$(o._el,o.model(),i),n._box.update(l,i,o.rotation()),o.draw(t,l))}},P="$default";function S(e,r,a){if(r){var o,n=a.$context,i=a.$groups;r[i._set]&&(o=r[i._set][i._key])&&!0===t.callback(o,[n])&&(e.$datalabels._dirty=!0,a.update(n))}}function I(t,e){var r,a,o=t.$datalabels,n=o._listeners;if(n.enter||n.leave){if("mousemove"===e.type)a=C.lookup(o._labels,e);else if("mouseout"!==e.type)return;r=o._hovered,o._hovered=a,function(t,e,r,a){var o,n;(r||a)&&(r?a?r!==a&&(n=o=!0):n=!0:o=!0,n&&S(t,e.leave,r),o&&S(t,e.enter,a))}(t,n,r,a)}}return{id:"datalabels",defaults:{align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:function(e){if(t.isNullOrUndef(e))return null;var r,a,o,n=e;if(t.isObject(e))if(t.isNullOrUndef(e.label))if(t.isNullOrUndef(e.r))for(n="",o=0,a=(r=Object.keys(e)).length;o<a;++o)n+=(0!==o?", ":"")+r[o]+": "+e[r[o]];else n=e.r;else n=e.label;return""+n},labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},beforeInit:function(t){t.$datalabels={_actives:[]}},beforeUpdate:function(t){var e=t.$datalabels;e._listened=!1,e._listeners={},e._datasets=[],e._labels=[]},afterDatasetUpdate:function(e,r,a){var o,n,i,l,s,u,d,c,h=r.index,f=e.$datalabels,x=f._datasets[h]=[],y=e.isDatasetVisible(h),v=e.data.datasets[h],b=function(e,r){var a,o,n,i=e.datalabels,l=[];return!1===i?null:(!0===i&&(i={}),r=t.merge({},[r,i]),o=r.labels||{},n=Object.keys(o),delete r.labels,n.length?n.forEach((function(e){o[e]&&l.push(t.merge({},[r,o[e],{_key:e}]))})):l.push(r),a=l.reduce((function(e,r){return t.each(r.listeners||{},(function(t,a){e[a]=e[a]||{},e[a][r._key||P]=t})),delete r.listeners,e}),{}),{labels:l,listeners:a})}(v,a),p=r.meta.data||[],g=e.ctx;for(g.save(),o=0,i=p.length;o<i;++o)if((d=p[o]).$datalabels=[],y&&d&&e.getDataVisibility(o)&&!d.skip)for(n=0,l=b.labels.length;n<l;++n)u=(s=b.labels[n])._key,(c=new _(s,g,d,o)).$groups={_set:h,_key:u||P},c.$context={active:!1,chart:e,dataIndex:o,dataset:v,datasetIndex:h},c.update(c.$context),d.$datalabels.push(c),x.push(c);g.restore(),t.merge(f._listeners,b.listeners,{merger:function(t,e,a){e[t]=e[t]||{},e[t][r.index]=a[t],f._listened=!0}})},afterUpdate:function(t,e){t.$datalabels._labels=C.prepare(t.$datalabels._datasets,e)},afterDatasetsDraw:function(t){C.draw(t,t.$datalabels._labels)},beforeEvent:function(t,e){if(t.$datalabels._listened){var r=e.event;switch(r.type){case"mousemove":case"mouseout":I(t,r);break;case"click":!function(t,e){var r=t.$datalabels,a=r._listeners.click,o=a&&C.lookup(r._labels,e);o&&S(t,a,o)}(t,r)}}},afterEvent:function(t){var e,r,a,o,n,l,s,u=t.$datalabels,d=u._actives,c=u._actives=t.getActiveElements(),h=i(d,c);for(e=0,r=h.length;e<r;++e)if((n=h[e])[1])for(a=0,o=(s=n[0].element.$datalabels||[]).length;a<o;++a)(l=s[a]).$context.active=1===n[1],l.update(l.$context);(u._dirty||h.length)&&(C.update(u._labels),t.render()),delete u._dirty}}}));
