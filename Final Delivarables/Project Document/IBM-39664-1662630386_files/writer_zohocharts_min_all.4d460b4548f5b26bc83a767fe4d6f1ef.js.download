function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):(e=e||self,t(e.d3={}))}(this,function(e){"use strict";function t(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function n(e){return 1===e.length&&(e=r(e)),{left:function(t,n,r,a){for(null==r&&(r=0),null==a&&(a=t.length);r<a;){var i=r+a>>>1;e(t[i],n)<0?r=i+1:a=i}return r},right:function(t,n,r,a){for(null==r&&(r=0),null==a&&(a=t.length);r<a;){var i=r+a>>>1;e(t[i],n)>0?a=i:r=i+1}return r}}}function r(e){return function(n,r){return t(e(n),r)}}function a(e,t){null==t&&(t=i);for(var n=0,r=e.length-1,a=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(a,a=e[++n]);return o}function i(e,t){return[e,t]}function o(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function l(e){return null===e?NaN:+e}function s(e,t){var n,r,a,i=e.length,o=-1;if(null==t){for(;++o<i;)if(null!=(n=e[o])&&n>=n)for(r=a=n;++o<i;)null!=(n=e[o])&&(r>n&&(r=n),a<n&&(a=n))}else for(;++o<i;)if(null!=(n=t(e[o],o,e))&&n>=n)for(r=a=n;++o<i;)null!=(n=t(e[o],o,e))&&(r>n&&(r=n),a<n&&(a=n));return[r,a]}function c(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var r=-1,a=0|Math.max(0,Math.ceil((t-e)/n)),i=new Array(a);++r<a;)i[r]=e+r*n;return i}function u(e,t,n){var r,a,i,o,l=-1;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((r=t<e)&&(a=e,e=t,t=a),0===(o=d(e,t,n))||!isFinite(o))return[];if(o>0)for(e=Math.ceil(e/o),t=Math.floor(t/o),i=new Array(a=Math.ceil(t-e+1));++l<a;)i[l]=(e+l)*o;else for(e=Math.floor(e*o),t=Math.ceil(t*o),i=new Array(a=Math.ceil(e-t+1));++l<a;)i[l]=(e-l)/o;return r&&i.reverse(),i}function d(e,t,n){var r=(t-e)/Math.max(0,n),a=Math.floor(Math.log(r)/Math.LN10),i=r/Math.pow(10,a);return a>=0?(i>=Yg?10:i>=Ug?5:i>=Gg?2:1)*Math.pow(10,a):-Math.pow(10,-a)/(i>=Yg?10:i>=Ug?5:i>=Gg?2:1)}function h(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),a=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),i=r/a;return i>=Yg?a*=10:i>=Ug?a*=5:i>=Gg&&(a*=2),t<e?-a:a}function f(e,t,n){if(null==n&&(n=l),r=e.length){if((t=+t)<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,a=(r-1)*t,i=Math.floor(a),o=+n(e[i],i,e);return o+(+n(e[i+1],i+1,e)-o)*(a-i)}}function p(e,t){var n,r,a=e.length,i=-1;if(null==t){for(;++i<a;)if(null!=(n=e[i])&&n>=n)for(r=n;++i<a;)null!=(n=e[i])&&n>r&&(r=n)}else for(;++i<a;)if(null!=(n=t(e[i],i,e))&&n>=n)for(r=n;++i<a;)null!=(n=t(e[i],i,e))&&n>r&&(r=n);return r}function g(e){for(var t,n,r,a=e.length,i=-1,o=0;++i<a;)o+=e[i].length;for(n=new Array(o);--a>=0;)for(r=e[a],t=r.length;--t>=0;)n[--o]=r[t];return n}function v(e,t){var n,r,a=e.length,i=-1;if(null==t){for(;++i<a;)if(null!=(n=e[i])&&n>=n)for(r=n;++i<a;)null!=(n=e[i])&&r>n&&(r=n)}else for(;++i<a;)if(null!=(n=t(e[i],i,e))&&n>=n)for(r=n;++i<a;)null!=(n=t(e[i],i,e))&&r>n&&(r=n);return r}function y(e,n){if(r=e.length){var r,a,i=0,o=0,l=e[o];for(null==n&&(n=t);++i<r;)(n(a=e[i],l)<0||0!==n(l,l))&&(l=a,o=i);return 0===n(l,l)?o:void 0}}function m(e,t){var n,r=e.length,a=-1,i=0;if(null==t)for(;++a<r;)(n=+e[a])&&(i+=n);else for(;++a<r;)(n=+t(e[a],a,e))&&(i+=n);return i}function b(){}function x(e,t){var n=new b;if(e instanceof b)e.each(function(e,t){n.set(t,e)});else if(Array.isArray(e)){var r,a=-1,i=e.length;if(null==t)for(;++a<i;)n.set(a,e[a]);else for(;++a<i;)n.set(t(r=e[a],a,e),r)}else if(e)for(var o in e)n.set(o,e[o]);return n}function w(){}function C(e,t){var n=new w;if(e instanceof w)e.each(function(e){n.add(e)});else if(e){var r=-1,a=e.length;if(null==t)for(;++r<a;)n.add(e[r]);else for(;++r<a;)n.add(t(e[r],r,e))}return n}function k(e){var t=[];for(var n in e)t.push(n);return t}function _(e){var t=[];for(var n in e)t.push(e[n]);return t}function S(e){return e}function O(e){return"translate("+(e+.5)+",0)"}function A(e){return"translate(0,"+(e+.5)+")"}function P(e){return function(t){return+e(t)}}function T(e){var t=Math.max(0,e.bandwidth()-1)/2;return e.round()&&(t=Math.round(t)),function(n){return+e(n)+t}}function E(){return!this.__axis}function L(e,t){function n(n){var h=null==a?t.ticks?t.ticks.apply(t,r):t.domain():a,f=null==i?t.tickFormat?t.tickFormat.apply(t,r):S:i,p=Math.max(o,0)+s,g=t.range(),v=+g[0]+.5,y=+g[g.length-1]+.5,m=(t.bandwidth?T:P)(t.copy()),b=n.selection?n.selection():n,x=b.selectAll(".domain").data([null]),w=b.selectAll(".tick").data(h,t).order(),C=w.exit(),k=w.enter().append("g").attr("class","tick"),_=w.select("line"),O=w.select("text");x=x.merge(x.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),w=w.merge(k),_=_.merge(k.append("line").attr("stroke","#000").attr(u+"2",c*o)),O=O.merge(k.append("text").attr("fill","#000").attr(u,c*p).attr("dy",e===qg?"0em":e===Kg?"0.71em":"0.32em")),n!==b&&(x=x.transition(n),w=w.transition(n),_=_.transition(n),O=O.transition(n),C=C.transition(n).attr("opacity",Jg).attr("transform",function(e){return isFinite(e=m(e))?d(e):this.getAttribute("transform")}),k.attr("opacity",Jg).attr("transform",function(e){var t=this.parentNode.__axis;return d(t&&isFinite(t=t(e))?t:m(e))})),C.remove(),x.attr("d",e===$g||e==Qg?"M"+c*l+","+v+"H0.5V"+y+"H"+c*l:"M"+v+","+c*l+"V0.5H"+y+"V"+c*l),w.attr("opacity",1).attr("transform",function(e){return d(m(e))}),_.attr(u+"2",c*o),O.attr(u,c*p).text(f),b.filter(E).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===Qg?"start":e===$g?"end":"middle"),b.each(function(){this.__axis=m})}var r=[],a=null,i=null,o=6,l=6,s=3,c=e===qg||e===$g?-1:1,u=e===$g||e===Qg?"x":"y",d=e===qg||e===Kg?O:A;return n.scale=function(e){return arguments.length?(t=e,n):t},n.ticks=function(){return r=Zg.call(arguments),n},n.tickArguments=function(e){return arguments.length?(r=null==e?[]:Zg.call(e),n):r.slice()},n.tickValues=function(e){return arguments.length?(a=null==e?null:Zg.call(e),n):a&&a.slice()},n.tickFormat=function(e){return arguments.length?(i=e,n):i},n.tickSize=function(e){return arguments.length?(o=l=+e,n):o},n.tickSizeInner=function(e){return arguments.length?(o=+e,n):o},n.tickSizeOuter=function(e){return arguments.length?(l=+e,n):l},n.tickPadding=function(e){return arguments.length?(s=+e,n):s},n}function M(e){return L(qg,e)}function z(e){return L(Qg,e)}function I(e){return L(Kg,e)}function D(e){return L($g,e)}function R(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r)throw new Error("illegal type: "+e);r[e]=[]}return new j(r)}function j(e){this._=e}function H(e,t){return e.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}})}function B(e,t){for(var n,r=0,a=e.length;r<a;++r)if((n=e[r]).name===t)return n.value}function N(e,t,n){for(var r=0,a=e.length;r<a;++r)if(e[r].name===t){e[r]=ev,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}function F(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),nv.hasOwnProperty(t)?{space:nv[t],local:e}:e}function V(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===tv&&t.documentElement.namespaceURI===tv?t.createElement(e):t.createElementNS(n,e)}}function W(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Y(e){var t=F(e);return(t.local?W:V)(t)}function U(){return new G}function G(){this._="@"+(++rv).toString(36)}function X(e,t,n){return e=Z(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function Z(t,n,r){return function(a){var i=e.event;e.event=a;try{t.call(this,this.__data__,n,r)}finally{e.event=i}}}function q(e){return e.trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}})}function Q(e){return function(){var t=this.__on;if(t){for(var n,r=0,a=-1,i=t.length;r<i;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++a]=n:this.removeEventListener(n.type,n.listener,n.capture);++a?t.length=a:delete this.__on}}}function K(e,t,n){var r=sv.hasOwnProperty(e.type)?X:Z;return function(a,i,o){var l,s=this.__on,c=r(t,i,o);if(s)for(var u=0,d=s.length;u<d;++u)if((l=s[u]).type===e.type&&l.name===e.name)return this.removeEventListener(l.type,l.listener,l.capture),this.addEventListener(l.type,l.listener=c,l.capture=n),void(l.value=t);this.addEventListener(e.type,c,n),l={type:e.type,name:e.name,value:t,listener:c,capture:n},s?s.push(l):this.__on=[l]}}function $(e,t,n){var r,a,i=q(e+""),o=i.length;if(!(arguments.length<2)){for(l=t?K:Q,null==n&&(n=!1),r=0;r<o;++r)this.each(l(i[r],t,n));return this}var l=this.node().__on;if(l)for(var s,c=0,u=l.length;c<u;++c)for(r=0,s=l[c];r<o;++r)if((a=i[r]).type===s.type&&a.name===s.name)return s.value}function J(t,n,r,a){var i=e.event;t.sourceEvent=e.event,e.event=t;try{return n.apply(r,a)}finally{e.event=i}}function ee(){for(var t,n=e.event;t=n.sourceEvent;)n=t;return n}function te(e,t){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}var a=e.getBoundingClientRect();return[t.clientX-a.left-e.clientLeft,t.clientY-a.top-e.clientTop]}function ne(e){var t=ee();return t.changedTouches&&(t=t.changedTouches[0]),te(e,t)}function re(){}function ae(e){return null==e?re:function(){return this.querySelector(e)}}function ie(e){"function"!=typeof e&&(e=ae(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var i,o,l=t[a],s=l.length,c=r[a]=new Array(s),u=0;u<s;++u)(i=l[u])&&(o=e.call(i,i.__data__,u,l))&&("__data__"in i&&(o.__data__=i.__data__),c[u]=o);return new Ct(r,this._parents)}function oe(){return[]}function le(e){return null==e?oe:function(){return this.querySelectorAll(e)}}function se(e){"function"!=typeof e&&(e=le(e));for(var t=this._groups,n=t.length,r=[],a=[],i=0;i<n;++i)for(var o,l=t[i],s=l.length,c=0;c<s;++c)(o=l[c])&&(r.push(e.call(o,o.__data__,c,l)),a.push(o));return new Ct(r,a)}function ce(e){"function"!=typeof e&&(e=lv(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var i,o=t[a],l=o.length,s=r[a]=[],c=0;c<l;++c)(i=o[c])&&e.call(i,i.__data__,c,o)&&s.push(i);return new Ct(r,this._parents)}function ue(e){return new Array(e.length)}function de(){return new Ct(this._enter||this._groups.map(ue),this._parents)}function he(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function fe(e){return function(){return e}}function pe(e,t,n,r,a,i){for(var o,l=0,s=t.length,c=i.length;l<c;++l)(o=t[l])?(o.__data__=i[l],r[l]=o):n[l]=new he(e,i[l]);for(;l<s;++l)(o=t[l])&&(a[l]=o)}function ge(e,t,n,r,a,i,o){var l,s,c,u={},d=t.length,h=i.length,f=new Array(d);for(l=0;l<d;++l)(s=t[l])&&(f[l]=c=cv+o.call(s,s.__data__,l,t),c in u?a[l]=s:u[c]=s);for(l=0;l<h;++l)c=cv+o.call(e,i[l],l,i),(s=u[c])?(r[l]=s,s.__data__=i[l],u[c]=null):n[l]=new he(e,i[l]);for(l=0;l<d;++l)(s=t[l])&&u[f[l]]===s&&(a[l]=s)}function ve(e,t){if(!e)return f=new Array(this.size()),c=-1,this.each(function(e){f[++c]=e}),f;var n=t?ge:pe,r=this._parents,a=this._groups;"function"!=typeof e&&(e=fe(e));for(var i=a.length,o=new Array(i),l=new Array(i),s=new Array(i),c=0;c<i;++c){var u=r[c],d=a[c],h=d.length,f=e.call(u,u&&u.__data__,c,r),p=f.length,g=l[c]=new Array(p),v=o[c]=new Array(p);n(u,d,g,v,s[c]=new Array(h),f,t);for(var y,m,b=0,x=0;b<p;++b)if(y=g[b]){for(b>=x&&(x=b+1);!(m=v[x])&&++x<p;);y._next=m||null}}return o=new Ct(o,r),o._enter=l,o._exit=s,o}function ye(){return new Ct(this._exit||this._groups.map(ue),this._parents)}function me(e){for(var t=this._groups,n=e._groups,r=t.length,a=n.length,i=Math.min(r,a),o=new Array(r),l=0;l<i;++l)for(var s,c=t[l],u=n[l],d=c.length,h=o[l]=new Array(d),f=0;f<d;++f)(s=c[f]||u[f])&&(h[f]=s);for(;l<r;++l)o[l]=t[l];return new Ct(o,this._parents)}function be(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,a=e[t],i=a.length-1,o=a[i];--i>=0;)(r=a[i])&&(o&&o!==r.nextSibling&&o.parentNode.insertBefore(r,o),o=r);return this}function xe(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=we);for(var n=this._groups,r=n.length,a=new Array(r),i=0;i<r;++i){for(var o,l=n[i],s=l.length,c=a[i]=new Array(s),u=0;u<s;++u)(o=l[u])&&(c[u]=o);c.sort(t)}return new Ct(a,this._parents).order()}function we(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Ce(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function ke(){var e=new Array(this.size()),t=-1;return this.each(function(){e[++t]=this}),e}function _e(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],a=0,i=r.length;a<i;++a){var o=r[a];if(o)return o}return null}function Se(){var e=0;return this.each(function(){++e}),e}function Oe(){return!this.node()}function Ae(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var a,i=t[n],o=0,l=i.length;o<l;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this}function Pe(e){return function(){this.removeAttribute(e)}}function Te(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ee(e,t){return function(){this.setAttribute(e,t)}}function Le(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Me(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function ze(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Ie(e,t){var n=F(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?Te:Pe:"function"==typeof t?n.local?ze:Me:n.local?Le:Ee)(n,t))}function De(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Re(e){return function(){this.style.removeProperty(e)}}function je(e,t,n){return function(){this.style.setProperty(e,t,n)}}function He(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Be(e,t,n){return arguments.length>1?this.each((null==t?Re:"function"==typeof t?He:je)(e,t,null==n?"":n)):Ne(this.node(),e)}function Ne(e,t){return e.style.getPropertyValue(t)||De(e).getComputedStyle(e,null).getPropertyValue(t)}function Fe(e){return function(){delete this[e]}}function Ve(e,t){return function(){this[e]=t}}function We(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function Ye(e,t){return arguments.length>1?this.each((null==t?Fe:"function"==typeof t?We:Ve)(e,t)):this.node()[e]}function Ue(e){return e.trim().split(/^|\s+/)}function Ge(e){return e.classList||new Xe(e)}function Xe(e){this._node=e,this._names=Ue(e.getAttribute("class")||"")}function Ze(e,t){for(var n=Ge(e),r=-1,a=t.length;++r<a;)n.add(t[r])}function qe(e,t){for(var n=Ge(e),r=-1,a=t.length;++r<a;)n.remove(t[r])}function Qe(e){return function(){Ze(this,e)}}function Ke(e){return function(){qe(this,e)}}function $e(e,t){return function(){(t.apply(this,arguments)?Ze:qe)(this,e)}}function Je(e,t){var n=Ue(e+"");if(arguments.length<2){for(var r=Ge(this.node()),a=-1,i=n.length;++a<i;)if(!r.contains(n[a]))return!1;return!0}return this.each(("function"==typeof t?$e:t?Qe:Ke)(n,t))}function et(){this.textContent=""}function tt(e){return function(){this.textContent=e}}function nt(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function rt(e){return arguments.length?this.each(null==e?et:("function"==typeof e?nt:tt)(e)):this.node().textContent}function at(){this.innerHTML=""}function it(e){return function(){this.innerHTML=e}}function ot(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function lt(e){return arguments.length?this.each(null==e?at:("function"==typeof e?ot:it)(e)):this.node().innerHTML}function st(){this.nextSibling&&this.parentNode.appendChild(this)}function ct(){return this.each(st)}function ut(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function dt(){return this.each(ut)}function ht(e){var t="function"==typeof e?e:Y(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function ft(){return null}function pt(e,t){var n="function"==typeof e?e:Y(e),r=null==t?ft:"function"==typeof t?t:ae(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function gt(){var e=this.parentNode;e&&e.removeChild(this)}function vt(){return this.each(gt)}function yt(e){return arguments.length?this.property("__data__",e):this.node().__data__}function mt(e,t,n){var r=De(e),a=r.CustomEvent;"function"==typeof a?a=new a(t,n):(a=r.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function bt(e,t){return function(){return mt(this,e,t)}}function xt(e,t){return function(){return mt(this,e,t.apply(this,arguments))}}function wt(e,t){return this.each(("function"==typeof t?xt:bt)(e,t))}function Ct(e,t){this._groups=e,this._parents=t}function kt(){return new Ct([[document.documentElement]],uv)}function _t(e){return"string"==typeof e?new Ct([[document.querySelector(e)]],[document.documentElement]):new Ct([[e]],uv)}function St(e){return"string"==typeof e?new Ct([document.querySelectorAll(e)],[document.documentElement]):new Ct([null==e?[]:e],uv)}function Ot(e,t,n){arguments.length<3&&(n=t,t=ee().changedTouches);for(var r,a=0,i=t?t.length:0;a<i;++a)if((r=t[a]).identifier===n)return te(e,r);return null}function At(e,t){null==t&&(t=ee().touches);for(var n=0,r=t?t.length:0,a=new Array(r);n<r;++n)a[n]=te(e,t[n]);return a}function Pt(){e.event.stopImmediatePropagation()}function Tt(){e.event.preventDefault(),e.event.stopImmediatePropagation()}function Et(e){var t=e.document.documentElement,n=_t(e).on("dragstart.drag",Tt,!0);"onselectstart"in t?n.on("selectstart.drag",Tt,!0):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Lt(e,t){var n=e.document.documentElement,r=_t(e).on("dragstart.drag",null);t&&(r.on("click.drag",Tt,!0),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Mt(e){return function(){return e}}function zt(e,t,n,r,a,i,o,l,s,c){this.target=e,this.type=t,this.subject=n,this.identifier=r,this.active=a,this.x=i,this.y=o,this.dx=l,this.dy=s,this._=c}function It(){return!e.event.button}function Dt(){return this.parentNode}function Rt(t){return null==t?{x:e.event.x,y:e.event.y}:t}function jt(){return"ontouchstart"in this}function Ht(){function t(e){e.on("mousedown.drag",n).filter(v).on("touchstart.drag",i).on("touchmove.drag",o).on("touchend.drag touchcancel.drag",l).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function n(){if(!h&&f.apply(this,arguments)){var t=s("mouse",p.apply(this,arguments),ne,this,arguments);t&&(_t(e.event.view).on("mousemove.drag",r,!0).on("mouseup.drag",a,!0),Et(e.event.view),Pt(),d=!1,c=e.event.clientX,u=e.event.clientY,t("start"))}}function r(){if(Tt(),!d){var t=e.event.clientX-c,n=e.event.clientY-u;d=t*t+n*n>x}y.mouse("drag")}function a(){_t(e.event.view).on("mousemove.drag mouseup.drag",null),Lt(e.event.view,d),Tt(),y.mouse("end")}function i(){if(f.apply(this,arguments)){var t,n,r=e.event.changedTouches,a=p.apply(this,arguments),i=r.length;for(t=0;t<i;++t)(n=s(r[t].identifier,a,Ot,this,arguments))&&(Pt(),n("start"))}}function o(){var t,n,r=e.event.changedTouches,a=r.length;for(t=0;t<a;++t)(n=y[r[t].identifier])&&(Tt(),n("drag"))}function l(){var t,n,r=e.event.changedTouches,a=r.length;for(h&&clearTimeout(h),h=setTimeout(function(){h=null},500),t=0;t<a;++t)(n=y[r[t].identifier])&&(Pt(),n("end"))}function s(n,r,a,i,o){var l,s,c,u=a(r,n),d=m.copy();if(J(new zt(t,"beforestart",l,n,b,u[0],u[1],0,0,d),function(){return null!=(e.event.subject=l=g.apply(i,o))&&(s=l.x-u[0]||0,c=l.y-u[1]||0,!0)}))return function e(h){var f,p=u;switch(h){case"start":y[n]=e,f=b++;break;case"end":delete y[n],--b;case"drag":u=a(r,n),f=b}J(new zt(t,h,l,n,f,u[0]+s,u[1]+c,u[0]-p[0],u[1]-p[1],d),d.apply,d,[h,i,o])}}var c,u,d,h,f=It,p=Dt,g=Rt,v=jt,y={},m=R("start","drag","end"),b=0,x=0;return t.filter=function(e){return arguments.length?(f="function"==typeof e?e:Mt(!!e),t):f},t.container=function(e){return arguments.length?(p="function"==typeof e?e:Mt(e),t):p},t.subject=function(e){return arguments.length?(g="function"==typeof e?e:Mt(e),t):g},t.touchable=function(e){return arguments.length?(v="function"==typeof e?e:Mt(!!e),t):v},t.on=function(){var e=m.on.apply(m,arguments);return e===m?t:e},t.clickDistance=function(e){return arguments.length?(x=(e=+e)*e,t):Math.sqrt(x)},t}function Bt(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Nt(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ft(){}function Vt(e){var t;return e=(e+"").trim().toLowerCase(),(t=pv.exec(e))?(t=parseInt(t[1],16),new Xt(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1)):(t=gv.exec(e))?Wt(parseInt(t[1],16)):(t=vv.exec(e))?new Xt(t[1],t[2],t[3],1):(t=yv.exec(e))?new Xt(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=mv.exec(e))?Yt(t[1],t[2],t[3],t[4]):(t=bv.exec(e))?Yt(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=xv.exec(e))?Zt(t[1],t[2]/100,t[3]/100,1):(t=wv.exec(e))?Zt(t[1],t[2]/100,t[3]/100,t[4]):Cv.hasOwnProperty(e)?Wt(Cv[e]):"transparent"===e?new Xt(NaN,NaN,NaN,0):null}function Wt(e){return new Xt(e>>16&255,e>>8&255,255&e,1)}function Yt(e,t,n,r){return r<=0&&(e=t=n=NaN),new Xt(e,t,n,r)}function Ut(e){return e instanceof Ft||(e=Vt(e)),e?(e=e.rgb(),new Xt(e.r,e.g,e.b,e.opacity)):new Xt}function Gt(e,t,n,r){return 1===arguments.length?Ut(e):new Xt(e,t,n,null==r?1:r)}function Xt(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function Zt(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Kt(e,t,n,r)}function qt(e){if(e instanceof Kt)return new Kt(e.h,e.s,e.l,e.opacity);if(e instanceof Ft||(e=Vt(e)),!e)return new Kt;if(e instanceof Kt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),i=Math.max(t,n,r),o=NaN,l=i-a,s=(i+a)/2;return l?(o=t===i?(n-r)/l+6*(n<r):n===i?(r-t)/l+2:(t-n)/l+4,l/=s<.5?i+a:2-i-a,o*=60):l=s>0&&s<1?0:o,new Kt(o,l,s,e.opacity)}function Qt(e,t,n,r){return 1===arguments.length?qt(e):new Kt(e,t,n,null==r?1:r)}function Kt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function $t(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function Jt(e){if(e instanceof tn)return new tn(e.l,e.a,e.b,e.opacity);if(e instanceof cn){var t=e.h*kv;return new tn(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}e instanceof Xt||(e=Ut(e));var n=on(e.r),r=on(e.g),a=on(e.b),i=nn((.4124564*n+.3575761*r+.1804375*a)/Sv),o=nn((.2126729*n+.7151522*r+.072175*a)/Ov);return new tn(116*o-16,500*(i-o),200*(o-nn((.0193339*n+.119192*r+.9503041*a)/Av)),e.opacity)}function en(e,t,n,r){return 1===arguments.length?Jt(e):new tn(e,t,n,null==r?1:r)}function tn(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function nn(e){return e>Lv?Math.pow(e,1/3):e/Ev+Pv}function rn(e){return e>Tv?e*e*e:Ev*(e-Pv)}function an(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function on(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function ln(e){if(e instanceof cn)return new cn(e.h,e.c,e.l,e.opacity);e instanceof tn||(e=Jt(e));var t=Math.atan2(e.b,e.a)*_v;return new cn(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function sn(e,t,n,r){return 1===arguments.length?ln(e):new cn(e,t,n,null==r?1:r)}function cn(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function un(e){if(e instanceof hn)return new hn(e.h,e.s,e.l,e.opacity);e instanceof Xt||(e=Ut(e));var t=e.r/255,n=e.g/255,r=e.b/255,a=(Bv*r+jv*t-Hv*n)/(Bv+jv-Hv),i=r-a,o=(Rv*(n-a)-Iv*i)/Dv,l=Math.sqrt(o*o+i*i)/(Rv*a*(1-a)),s=l?Math.atan2(o,i)*_v-120:NaN;return new hn(s<0?s+360:s,l,a,e.opacity)}function dn(e,t,n,r){return 1===arguments.length?un(e):new hn(e,t,n,null==r?1:r)}function hn(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function fn(e,t,n,r,a){var i=e*e,o=i*e;return((1-3*e+3*i-o)*t+(4-6*i+3*o)*n+(1+3*e+3*i-3*o)*r+o*a)/6}function pn(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),a=e[r],i=e[r+1],o=r>0?e[r-1]:2*a-i,l=r<t-1?e[r+2]:2*i-a;return fn((n-r/t)*t,o,a,i,l)}}function gn(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),a=e[(r+t-1)%t],i=e[r%t],o=e[(r+1)%t],l=e[(r+2)%t];return fn((n-r/t)*t,a,i,o,l)}}function vn(e){return function(){return e}}function yn(e,t){return function(n){return e+n*t}}function mn(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function bn(e,t){var n=t-e;return n?yn(e,n>180||n<-180?n-360*Math.round(n/360):n):vn(isNaN(e)?t:e)}function xn(e){return 1==(e=+e)?wn:function(t,n){return n-t?mn(t,n,e):vn(isNaN(t)?n:t)}}function wn(e,t){var n=t-e;return n?yn(e,n):vn(isNaN(e)?t:e)}function Cn(e){return function(t){var n,r,a=t.length,i=new Array(a),o=new Array(a),l=new Array(a);for(n=0;n<a;++n)r=Gt(t[n]),i[n]=r.r||0,o[n]=r.g||0,l[n]=r.b||0;return i=e(i),o=e(o),l=e(l),r.opacity=1,function(e){return r.r=i(e),r.g=o(e),r.b=l(e),r+""}}}function kn(e,t){var n,r=t?t.length:0,a=e?Math.min(r,e.length):0,i=new Array(a),o=new Array(r);for(n=0;n<a;++n)i[n]=En(e[n],t[n]);for(;n<r;++n)o[n]=t[n];return function(e){for(n=0;n<a;++n)o[n]=i[n](e);return o}}function _n(e,t){var n=new Date;return e=+e,t-=e,function(r){return n.setTime(e+t*r),n}}function Sn(e,t){return e=+e,t-=e,function(n){return e+t*n}}function On(e,t){var n,r={},a={};null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={});for(n in t)n in e?r[n]=En(e[n],t[n]):a[n]=t[n];return function(e){for(n in r)a[n]=r[n](e);return a}}function An(e){return function(){return e}}function Pn(e){return function(t){return e(t)+""}}function Tn(e,t){var n,r,a,i=qv.lastIndex=Qv.lastIndex=0,o=-1,l=[],s=[];for(e+="",t+="";(n=qv.exec(e))&&(r=Qv.exec(t));)(a=r.index)>i&&(a=t.slice(i,a),l[o]?l[o]+=a:l[++o]=a),(n=n[0])===(r=r[0])?l[o]?l[o]+=r:l[++o]=r:(l[++o]=null,s.push({i:o,x:Sn(n,r)})),i=Qv.lastIndex;return i<t.length&&(a=t.slice(i),l[o]?l[o]+=a:l[++o]=a),l.length<2?s[0]?Pn(s[0].x):An(t):(t=s.length,function(e){for(var n,r=0;r<t;++r)l[(n=s[r]).i]=n.x(e);return l.join("")})}function En(e,t){var n,r=typeof t;return null==t||"boolean"===r?vn(t):("number"===r?Sn:"string"===r?(n=Vt(t))?(t=n,Gv):Tn:t instanceof Vt?Gv:t instanceof Date?_n:Array.isArray(t)?kn:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?On:Sn)(e,t)}function Ln(e,t){return e=+e,t-=e,function(n){return Math.round(e+t*n)}}function Mn(e,t,n,r,a,i){var o,l,s;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(s=e*n+t*r)&&(n-=e*s,r-=t*s),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,s/=l),e*r<t*n&&(e=-e,t=-t,s=-s,o=-o),{translateX:a,translateY:i,rotate:Math.atan2(t,e)*Kv,skewX:Math.atan(s)*Kv,scaleX:o,scaleY:l}}function zn(e){return"none"===e?$v:(Nv||(Nv=document.createElement("DIV"),Fv=document.documentElement,Vv=document.defaultView),Nv.style.transform=e,e=Vv.getComputedStyle(Fv.appendChild(Nv),null).getPropertyValue("transform"),Fv.removeChild(Nv),e=e.slice(7,-1).split(","),Mn(+e[0],+e[1],+e[2],+e[3],+e[4],+e[5]))}function In(e){return null==e?$v:(Wv||(Wv=document.createElementNS("http://www.w3.org/2000/svg","g")),Wv.setAttribute("transform",e),(e=Wv.transform.baseVal.consolidate())?(e=e.matrix,Mn(e.a,e.b,e.c,e.d,e.e,e.f)):$v)}function Dn(e,t,n,r){function a(e){return e.length?e.pop()+" ":""}function i(e,r,a,i,o,l){if(e!==a||r!==i){var s=o.push("translate(",null,t,null,n);l.push({i:s-4,x:Sn(e,a)},{i:s-2,x:Sn(r,i)})}else(a||i)&&o.push("translate("+a+t+i+n)}function o(e,t,n,i){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),i.push({i:n.push(a(n)+"rotate(",null,r)-2,x:Sn(e,t)})):t&&n.push(a(n)+"rotate("+t+r)}function l(e,t,n,i){e!==t?i.push({i:n.push(a(n)+"skewX(",null,r)-2,x:Sn(e,t)}):t&&n.push(a(n)+"skewX("+t+r)}function s(e,t,n,r,i,o){if(e!==n||t!==r){var l=i.push(a(i)+"scale(",null,",",null,")");o.push({i:l-4,x:Sn(e,n)},{i:l-2,x:Sn(t,r)})}else 1===n&&1===r||i.push(a(i)+"scale("+n+","+r+")")}return function(t,n){var r=[],a=[];return t=e(t),n=e(n),i(t.translateX,t.translateY,n.translateX,n.translateY,r,a),o(t.rotate,n.rotate,r,a),l(t.skewX,n.skewX,r,a),s(t.scaleX,t.scaleY,n.scaleX,n.scaleY,r,a),t=n=null,function(e){for(var t,n=-1,i=a.length;++n<i;)r[(t=a[n]).i]=t.x(e);return r.join("")}}}function Rn(e){return((e=Math.exp(e))+1/e)/2}function jn(e){return((e=Math.exp(e))-1/e)/2}function Hn(e){return((e=Math.exp(2*e))-1)/(e+1)}function Bn(e,t){var n,r,a=e[0],i=e[1],o=e[2],l=t[0],s=t[1],c=t[2],u=l-a,d=s-i,h=u*u+d*d;if(h<ay)r=Math.log(c/o)/ty,n=function(e){return[a+e*u,i+e*d,o*Math.exp(ty*e*r)]};else{var f=Math.sqrt(h),p=(c*c-o*o+ry*h)/(2*o*ny*f),g=(c*c-o*o-ry*h)/(2*c*ny*f),v=Math.log(Math.sqrt(p*p+1)-p),y=Math.log(Math.sqrt(g*g+1)-g);r=(y-v)/ty,n=function(e){var t=e*r,n=Rn(v),l=o/(ny*f)*(n*Hn(ty*t+v)-jn(v));return[a+l*u,i+l*d,o*n/Rn(ty*t+v)]}}return n.duration=1e3*r,n}function Nn(e){return function(t,n){var r=e((t=Qt(t)).h,(n=Qt(n)).h),a=wn(t.s,n.s),i=wn(t.l,n.l),o=wn(t.opacity,n.opacity);return function(e){return t.h=r(e),t.s=a(e),t.l=i(e),t.opacity=o(e),t+""}}}function Fn(e,t){var n=wn((e=en(e)).l,(t=en(t)).l),r=wn(e.a,t.a),a=wn(e.b,t.b),i=wn(e.opacity,t.opacity);return function(t){return e.l=n(t),e.a=r(t),e.b=a(t),e.opacity=i(t),e+""}}function Vn(e){return function(t,n){var r=e((t=sn(t)).h,(n=sn(n)).h),a=wn(t.c,n.c),i=wn(t.l,n.l),o=wn(t.opacity,n.opacity);return function(e){return t.h=r(e),t.c=a(e),t.l=i(e),t.opacity=o(e),t+""}}}function Wn(e){return function t(n){function r(t,r){var a=e((t=dn(t)).h,(r=dn(r)).h),i=wn(t.s,r.s),o=wn(t.l,r.l),l=wn(t.opacity,r.opacity);return function(e){return t.h=a(e),t.s=i(e),t.l=o(Math.pow(e,n)),t.opacity=l(e),t+""}}return n=+n,r.gamma=t,r}(1)}function Yn(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}function Un(){return vy||(by(Gn),vy=my.now()+yy)}function Gn(){vy=0}function Xn(){this._call=this._time=this._next=null}function Zn(e,t,n){var r=new Xn;return r.restart(e,t,n),r}function qn(){Un(),++dy;for(var e,t=Yv;t;)(e=vy-t._time)>=0&&t._call.call(null,e),t=t._next;--dy}function Qn(){vy=(gy=my.now())+yy,dy=hy=0;try{qn()}finally{dy=0,$n(),vy=0}}function Kn(){var e=my.now(),t=e-gy;t>py&&(yy-=t,gy=e)}function $n(){for(var e,t,n=Yv,r=1/0;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:Yv=t);Uv=e,Jn(r)}function Jn(e){dy||(hy&&(hy=clearTimeout(hy)),e-vy>24?(e<1/0&&(hy=setTimeout(Qn,e-my.now()-yy)),fy&&(fy=clearInterval(fy))):(fy||(gy=my.now(),fy=setInterval(Kn,py)),dy=1,by(Qn)))}function er(e,t,n){var r=new Xn;return t=null==t?0:+t,r.restart(function(n){r.stop(),e(n+t)},t,n),r}function tr(e,t,n){var r=new Xn,a=t;return null==t?(r.restart(e,t,n),r):(t=+t,n=null==n?Un():+n,r.restart(function i(o){o+=a,r.restart(i,a+=t,n),e(o)},t,n),r)}function nr(e,t,n,r,a,i){var o=e.__transition;if(o){if(n in o)return}else e.__transition={};or(e,n,{name:t,index:r,group:a,on:xy,tween:wy,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:Cy})}function rr(e,t){var n=ir(e,t);if(n.state>Cy)throw new Error("too late; already scheduled");return n}function ar(e,t){var n=ir(e,t);if(n.state>_y)throw new Error("too late; already started");return n}function ir(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function or(e,t,n){function r(e){n.state=ky,n.timer.restart(a,n.delay,n.time),n.delay<=e&&a(e-n.delay)}function a(r){var c,u,d,h;if(n.state!==ky)return o();for(c in s)if(h=s[c],h.name===n.name){if(h.state===Sy)return er(a);h.state===Oy?(h.state=Py,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete s[c]):+c<t&&(h.state=Py,h.timer.stop(),delete s[c])}if(er(function(){n.state===Sy&&(n.state=Oy,n.timer.restart(i,n.delay,n.time),i(r))}),n.state=_y,n.on.call("start",e,e.__data__,n.index,n.group),n.state===_y){for(n.state=Sy,l=new Array(d=n.tween.length),c=0,u=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(l[++u]=h);l.length=u+1}}function i(t){for(var r=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(o),n.state=Ay,1),a=-1,i=l.length;++a<i;)l[a].call(null,r);n.state===Ay&&(n.on.call("end",e,e.__data__,n.index,n.group),o())}function o(){n.state=Py,n.timer.stop(),delete s[t];for(var r in s)return;delete e.__transition}var l,s=e.__transition;s[t]=n,n.timer=Zn(r,0,n.time)}function lr(e,t){var n,r,a,i=e.__transition,o=!0;if(i){t=null==t?null:t+"";for(a in i)(n=i[a]).name===t?(r=n.state>_y&&n.state<Ay,n.state=Py,n.timer.stop(),r&&n.on.call("interrupt",e,e.__data__,n.index,n.group),delete i[a]):o=!1;o&&delete e.__transition}}function sr(e){return this.each(function(){lr(this,e)})}function cr(e,t){var n,r;return function(){var a=ar(this,e),i=a.tween;if(i!==n){r=n=i;for(var o=0,l=r.length;o<l;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}a.tween=r}}function ur(e,t,n){var r,a;if("function"!=typeof n)throw new Error;return function(){var i=ar(this,e),o=i.tween;if(o!==r){a=(r=o).slice();for(var l={name:t,value:n},s=0,c=a.length;s<c;++s)if(a[s].name===t){a[s]=l;break}s===c&&a.push(l)}i.tween=a}}function dr(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,a=ir(this.node(),n).tween,i=0,o=a.length;i<o;++i)if((r=a[i]).name===e)return r.value;return null}return this.each((null==t?cr:ur)(n,e,t))}function hr(e,t,n){var r=e._id;return e.each(function(){var e=ar(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return ir(e,r).value[t]}}function fr(e,t){var n;return("number"==typeof t?Sn:t instanceof Vt?Gv:(n=Vt(t))?(t=n,Gv):Tn)(e,t)}function pr(e){return function(){this.removeAttribute(e)}}function gr(e){return function(){this.removeAttributeNS(e.space,e.local)}}function vr(e,t,n){var r,a;return function(){var i=this.getAttribute(e);return i===n?null:i===r?a:a=t(r=i,n)}}function yr(e,t,n){var r,a;return function(){var i=this.getAttributeNS(e.space,e.local);return i===n?null:i===r?a:a=t(r=i,n)}}function mr(e,t,n){var r,a,i;return function(){var o,l=n(this);return null==l?void this.removeAttribute(e):(o=this.getAttribute(e),o===l?null:o===r&&l===a?i:i=t(r=o,a=l))}}function br(e,t,n){var r,a,i;return function(){var o,l=n(this);return null==l?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),o===l?null:o===r&&l===a?i:i=t(r=o,a=l))}}function xr(e,t){var n=F(e),r="transform"===n?ey:fr;return this.attrTween(e,"function"==typeof t?(n.local?br:mr)(n,r,hr(this,"attr."+e,t)):null==t?(n.local?gr:pr)(n):(n.local?yr:vr)(n,r,t+""))}function wr(e,t){function n(){var n=this,r=t.apply(n,arguments);return r&&function(t){n.setAttributeNS(e.space,e.local,r(t))}}return n._value=t,n}function Cr(e,t){function n(){var n=this,r=t.apply(n,arguments);return r&&function(t){n.setAttribute(e,r(t))}}return n._value=t,n}function kr(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var r=F(e);return this.tween(n,(r.local?wr:Cr)(r,t))}function _r(e,t){return function(){rr(this,e).delay=+t.apply(this,arguments)}}function Sr(e,t){return t=+t,function(){rr(this,e).delay=t}}function Or(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?_r:Sr)(t,e)):ir(this.node(),t).delay}function Ar(e,t){return function(){ar(this,e).duration=+t.apply(this,arguments)}}function Pr(e,t){return t=+t,function(){ar(this,e).duration=t}}function Tr(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?Ar:Pr)(t,e)):ir(this.node(),t).duration}function Er(e,t){if("function"!=typeof t)throw new Error;return function(){ar(this,e).ease=t}}function Lr(e){var t=this._id;return arguments.length?this.each(Er(t,e)):ir(this.node(),t).ease}function Mr(e){"function"!=typeof e&&(e=lv(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var i,o=t[a],l=o.length,s=r[a]=[],c=0;c<l;++c)(i=o[c])&&e.call(i,i.__data__,c,o)&&s.push(i);return new Jr(r,this._parents,this._name,this._id)}function zr(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,a=n.length,i=Math.min(r,a),o=new Array(r),l=0;l<i;++l)for(var s,c=t[l],u=n[l],d=c.length,h=o[l]=new Array(d),f=0;f<d;++f)(s=c[f]||u[f])&&(h[f]=s);for(;l<r;++l)o[l]=t[l];return new Jr(o,this._parents,this._name,this._id)}function Ir(e){return(e+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})}function Dr(e,t,n){var r,a,i=Ir(t)?rr:ar;return function(){var o=i(this,e),l=o.on;l!==r&&(a=(r=l).copy()).on(t,n),o.on=a}}function Rr(e,t){var n=this._id;return arguments.length<2?ir(this.node(),n).on.on(e):this.each(Dr(n,e,t))}function jr(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Hr(){return this.on("end.remove",jr(this._id))}function Br(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=ae(e));for(var r=this._groups,a=r.length,i=new Array(a),o=0;o<a;++o)for(var l,s,c=r[o],u=c.length,d=i[o]=new Array(u),h=0;h<u;++h)(l=c[h])&&(s=e.call(l,l.__data__,h,c))&&("__data__"in l&&(s.__data__=l.__data__),d[h]=s,nr(d[h],t,n,h,d,ir(l,n)));return new Jr(i,this._parents,t,n)}function Nr(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=le(e));for(var r=this._groups,a=r.length,i=[],o=[],l=0;l<a;++l)for(var s,c=r[l],u=c.length,d=0;d<u;++d)if(s=c[d]){for(var h,f=e.call(s,s.__data__,d,c),p=ir(s,n),g=0,v=f.length;g<v;++g)(h=f[g])&&nr(h,t,n,g,f,p);i.push(f),o.push(s)}return new Jr(i,o,t,n)}function Fr(){return new Ty(this._groups,this._parents)}function Vr(e,t){var n,r,a;return function(){var i=Ne(this,e),o=(this.style.removeProperty(e),Ne(this,e));return i===o?null:i===n&&o===r?a:a=t(n=i,r=o)}}function Wr(e){return function(){this.style.removeProperty(e)}}function Yr(e,t,n){var r,a;return function(){var i=Ne(this,e);return i===n?null:i===r?a:a=t(r=i,n)}}function Ur(e,t,n){var r,a,i;return function(){var o=Ne(this,e),l=n(this);return null==l&&(this.style.removeProperty(e),l=Ne(this,e)),o===l?null:o===r&&l===a?i:i=t(r=o,a=l)}}function Gr(e,t,n){var r="transform"==(e+="")?Jv:fr;return null==t?this.styleTween(e,Vr(e,r)).on("end.style."+e,Wr(e)):this.styleTween(e,"function"==typeof t?Ur(e,r,hr(this,"style."+e,t)):Yr(e,r,t+""),n)}function Xr(e,t,n){function r(){var r=this,a=t.apply(r,arguments);return a&&function(t){r.style.setProperty(e,a(t),n)}}return r._value=t,r}function Zr(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,Xr(e,t,null==n?"":n))}function qr(e){return function(){this.textContent=e}}function Qr(e){return function(){var t=e(this);this.textContent=null==t?"":t}}function Kr(e){return this.tween("text","function"==typeof e?Qr(hr(this,"text",e)):qr(null==e?"":e+""))}function $r(){for(var e=this._name,t=this._id,n=ta(),r=this._groups,a=r.length,i=0;i<a;++i)for(var o,l=r[i],s=l.length,c=0;c<s;++c)if(o=l[c]){var u=ir(o,t);nr(o,e,n,c,l,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Jr(r,this._parents,e,n)}function Jr(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function ea(e){return kt().transition(e)}function ta(){return++Ey}function na(e){return+e}function ra(e){return e*e}function aa(e){return e*(2-e)}function ia(e){return((e*=2)<=1?e*e:--e*(2-e)+1)/2}function oa(e){return e*e*e}function la(e){return--e*e*e+1}function sa(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}function ca(e){return 1-Math.cos(e*Ry)}function ua(e){return Math.sin(e*Ry)}function da(e){return(1-Math.cos(Dy*e))/2}function ha(e){return Math.pow(2,10*e-10)}function fa(e){return 1-Math.pow(2,-10*e)}function pa(e){return((e*=2)<=1?Math.pow(2,10*e-10):2-Math.pow(2,10-10*e))/2}function ga(e){return 1-Math.sqrt(1-e*e)}function va(e){return Math.sqrt(1- --e*e)}function ya(e){return((e*=2)<=1?1-Math.sqrt(1-e*e):Math.sqrt(1-(e-=2)*e)+1)/2}function ma(e){return 1-ba(1-e)}function ba(e){return(e=+e)<jy?Gy*e*e:e<By?Gy*(e-=Hy)*e+Ny:e<Vy?Gy*(e-=Fy)*e+Wy:Gy*(e-=Yy)*e+Uy}function xa(e){return((e*=2)<=1?1-ba(1-e):ba(e-1)+1)/2}function wa(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))return em.time=Un(),em;return n}function Ca(e){var t,n;e instanceof Jr?(t=e._id,e=e._name):(t=ta(),(n=em).time=Un(),e=null==e?null:e+"");for(var r=this._groups,a=r.length,i=0;i<a;++i)for(var o,l=r[i],s=l.length,c=0;c<s;++c)(o=l[c])&&nr(o,e,t,c,l,n||wa(o,t));return new Jr(r,this._parents,e,t)}function ka(e,t){var n,r,a=e.__transition;if(a){t=null==t?null:t+"";for(r in a)if((n=a[r]).state>ky&&n.name===t)return new Jr([[e]],nm,t,+r)}return null}function _a(e){return function(){return e}}function Sa(e,t,n){this.target=e,this.type=t,this.selection=n}function Oa(){e.event.stopImmediatePropagation()}function Aa(){e.event.preventDefault(),e.event.stopImmediatePropagation()}function Pa(e){return[+e[0],+e[1]]}function Ta(e){return[Pa(e[0]),Pa(e[1])]}function Ea(t){return function(n){return Ot(n,e.event.touches,t)}}function La(e){return{type:e}}function Ma(){return!e.event.ctrlKey&&!e.event.button}function za(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function Ia(){return navigator.maxTouchPoints||"ontouchstart"in this}function Da(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function Ra(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function ja(e){var t=e.__brush;return t?t.dim.output(t.selection):null}function Ha(){return Fa(lm)}function Ba(){return Fa(sm)}function Na(){return Fa(cm)}function Fa(t){function n(e){var n=e.property("__brush",c).selectAll(".overlay").data([La("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",um.overlay).merge(n).each(function(){var e=Da(this).extent;_t(this).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1])}),e.selectAll(".selection").data([La("selection")]).enter().append("rect").attr("class","selection").attr("cursor",um.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var a=e.selectAll(".handle").data(t.handles,function(e){return e.type});a.exit().remove(),a.enter().append("rect").attr("class",function(e){return"handle handle--"+e.type}).attr("cursor",function(e){return um[e.type]}),e.each(r).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",o).filter(f).on("touchstart.brush",o).on("touchmove.brush",l).on("touchend.brush touchcancel.brush",s).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function r(){var e=_t(this),t=Da(this).selection;t?(e.selectAll(".selection").style("display",null).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1]),e.selectAll(".handle").style("display",null).attr("x",function(e){return"e"===e.type[e.type.length-1]?t[1][0]-v/2:t[0][0]-v/2}).attr("y",function(e){return"s"===e.type[0]?t[1][1]-v/2:t[0][1]-v/2}).attr("width",function(e){return"n"===e.type||"s"===e.type?t[1][0]-t[0][0]+v:v}).attr("height",function(e){return"e"===e.type||"w"===e.type?t[1][1]-t[0][1]+v:v})):e.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function a(e,t,n){return!n&&e.__brush.emitter||new i(e,t)}function i(e,t){this.that=e,this.args=t,this.state=e.__brush,this.active=0}function o(){function n(){var e=H(k);!j||w||C||(Math.abs(e[0]-N[0])>Math.abs(e[1]-N[1])?C=!0:w=!0),N=e,x=!0,Aa(),i()}function i(){var e;switch(D=N[0]-B[0],R=N[1]-B[1],S){case am:case rm:O&&(D=Math.max(L-c,Math.min(z-v,D)),d=c+D,y=v+D),A&&(R=Math.max(M-f,Math.min(I-m,R)),g=f+R,b=m+R);break;case im:O<0?(D=Math.max(L-c,Math.min(z-c,D)),d=c+D,y=v):O>0&&(D=Math.max(L-v,Math.min(z-v,D)),d=c,y=v+D),A<0?(R=Math.max(M-f,Math.min(I-f,R)),g=f+R,b=m):A>0&&(R=Math.max(M-m,Math.min(I-m,R)),g=f,b=m+R);break;case om:O&&(d=Math.max(L,Math.min(z,c-D*O)),y=Math.max(L,Math.min(z,v+D*O))),A&&(g=Math.max(M,Math.min(I,f-R*A)),b=Math.max(M,Math.min(I,m+R*A)))}y<d&&(O*=-1,e=c,c=v,v=e,e=d,d=y,y=e,_ in dm&&W.attr("cursor",um[_=dm[_]])),b<g&&(A*=-1,e=f,f=m,m=e,e=g,g=b,b=e,_ in hm&&W.attr("cursor",um[_=hm[_]])),P.selection&&(E=P.selection),w&&(d=E[0][0],y=E[1][0]),C&&(g=E[0][1],b=E[1][1]),E[0][0]===d&&E[0][1]===g&&E[1][0]===y&&E[1][1]===b||(P.selection=[[d,g],[y,b]],r.call(k),F.brush())}function o(){if(Oa(),e.event.touches){if(e.event.touches.length)return;u&&clearTimeout(u),u=setTimeout(function(){u=null},500)}else Lt(e.event.view,x),Y.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);V.attr("pointer-events","all"),W.attr("cursor",um.overlay),P.selection&&(E=P.selection),Ra(E)&&(P.selection=null,r.call(k)),F.end()}function l(){switch(e.event.keyCode){case 16:j=O&&A;break;case 18:S===im&&(O&&(v=y-D*O,c=d+D*O),A&&(m=b-R*A,f=g+R*A),S=om,i());break;case 32:S!==im&&S!==om||(O<0?v=y-D:O>0&&(c=d-D),A<0?m=b-R:A>0&&(f=g-R),S=am,W.attr("cursor",um.selection),i());break;default:return}Aa()}function s(){switch(e.event.keyCode){case 16:j&&(w=C=j=!1,i());break;case 18:S===om&&(O<0?v=y:O>0&&(c=d),A<0?m=b:A>0&&(f=g),S=im,i());break;case 32:S===am&&(e.event.altKey?(O&&(v=y-D*O,c=d+D*O),A&&(m=b-R*A,f=g+R*A),S=om):(O<0?v=y:O>0&&(c=d),A<0?m=b:A>0&&(f=g),S=im),W.attr("cursor",um[_]),i());break;default:return}Aa()}if((!u||e.event.touches)&&h.apply(this,arguments)){var c,d,f,g,v,y,m,b,x,w,C,k=this,_=e.event.target.__data__.type,S="selection"===(p&&e.event.metaKey?_="overlay":_)?rm:p&&e.event.altKey?om:im,O=t===sm?null:fm[_],A=t===lm?null:pm[_],P=Da(k),T=P.extent,E=P.selection,L=T[0][0],M=T[0][1],z=T[1][0],I=T[1][1],D=0,R=0,j=O&&A&&p&&e.event.shiftKey,H=e.event.touches?Ea(e.event.changedTouches[0].identifier):ne,B=H(k),N=B,F=a(k,arguments,!0).beforestart();"overlay"===_?(E&&(x=!0),P.selection=E=[[c=t===sm?L:B[0],f=t===lm?M:B[1]],[v=t===sm?z:c,m=t===lm?I:f]]):(c=E[0][0],f=E[0][1],v=E[1][0],m=E[1][1]),d=c,g=f,y=v,b=m;var V=_t(k).attr("pointer-events","none"),W=V.selectAll(".overlay").attr("cursor",um[_]);if(e.event.touches)F.moved=n,F.ended=o;else{var Y=_t(e.event.view).on("mousemove.brush",n,!0).on("mouseup.brush",o,!0);p&&Y.on("keydown.brush",l,!0).on("keyup.brush",s,!0),Et(e.event.view)}Oa(),lr(k),r.call(k),F.start()}}function l(){a(this,arguments).moved()}function s(){a(this,arguments).ended()}function c(){var e=this.__brush||{selection:null};return e.extent=Ta(d.apply(this,arguments)),e.dim=t,e}var u,d=za,h=Ma,f=Ia,p=!0,g=R("start","brush","end"),v=6;return n.move=function(e,n){e.selection?e.on("start.brush",function(){a(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){a(this,arguments).end()}).tween("brush",function(){function e(e){o.selection=1===e&&null===c?null:u(e),r.call(i),l.brush()}var i=this,o=i.__brush,l=a(i,arguments),s=o.selection,c=t.input("function"==typeof n?n.apply(this,arguments):n,o.extent),u=En(s,c);return null!==s&&null!==c?e:e(1)}):e.each(function(){var e=this,i=arguments,o=e.__brush,l=t.input("function"==typeof n?n.apply(e,i):n,o.extent),s=a(e,i).beforestart();lr(e),o.selection=null===l?null:l,r.call(e),s.start().brush().end()})},n.clear=function(e){n.move(e,null)},i.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting?(this.starting=!1,this.emit("start")):this.emit("brush"),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(e){J(new Sa(n,e,t.output(this.state.selection)),g.apply,g,[e,this.that,this.args])}},n.extent=function(e){return arguments.length?(d="function"==typeof e?e:_a(Ta(e)),n):d},n.filter=function(e){return arguments.length?(h="function"==typeof e?e:_a(!!e),n):h},n.touchable=function(e){return arguments.length?(f="function"==typeof e?e:_a(!!e),n):f},n.handleSize=function(e){return arguments.length?(v=+e,n):v},n.keyModifiers=function(e){return arguments.length?(p=!!e,n):p},n.on=function(){var e=g.on.apply(g,arguments);return e===g?n:e},n}function Va(e){return new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}")}function Wa(e,t){var n=Va(e);return function(r,a){return t(n(r),a,e)}}function Ya(e){var t=Object.create(null),n=[];return e.forEach(function(e){for(var r in e)r in t||n.push(t[r]=r)}),n}function Ua(e){function t(e,t){var r,a,i=n(e,function(e,n){return r?r(e,n-1):(a=e,void(r=t?Wa(e,t):Va(e)))});return i.columns=a||[],i}function n(e,t){function n(){if(c)return vm;if(u)return u=!1,gm;var t,n,r=o;if(e.charCodeAt(r)===ym){for(;o++<i&&e.charCodeAt(o)!==ym||e.charCodeAt(++o)===ym;);return(t=o)>=i?c=!0:(n=e.charCodeAt(o++))===mm?u=!0:n===bm&&(u=!0,e.charCodeAt(o)===mm&&++o),e.slice(r+1,t-1).replace(/""/g,'"')}for(;o<i;){if((n=e.charCodeAt(t=o++))===mm)u=!0;else if(n===bm)u=!0,e.charCodeAt(o)===mm&&++o;else if(n!==s)continue;return e.slice(r,t)}return c=!0,e.slice(r,i)}var r,a=[],i=e.length,o=0,l=0,c=i<=0,u=!1;for(e.charCodeAt(i-1)===mm&&--i,e.charCodeAt(i-1)===bm&&--i;(r=n())!==vm;){for(var d=[];r!==gm&&r!==vm;)d.push(r),r=n();t&&null==(d=t(d,l++))||a.push(d)}return a}function r(t,n){return null==n&&(n=Ya(t)),[n.map(o).join(e)].concat(t.map(function(t){return n.map(function(e){return o(t[e])}).join(e)})).join("\n")}function a(e){return e.map(i).join("\n")}function i(t){return t.map(o).join(e)}function o(e){return null==e?"":l.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}var l=new RegExp('["'+e+"\n\r]"),s=e.charCodeAt(0);return{parse:t,parseRows:n,format:r,formatRows:a}}function Ga(e,t){function n(e){var t,n=c.status;if(!n&&Za(c)||n>=200&&n<300||304===n){if(i)try{t=i.call(r,c)}catch(e){return void l.call("error",r,e)}else t=c;l.call("load",r,t)}else l.call("error",r,e)}var r,a,i,o,l=R("beforesend","progress","load","error"),s=x(),c=new XMLHttpRequest,u=null,d=null,h=0;if("undefined"==typeof XDomainRequest||"withCredentials"in c||!/^(http(s)?:)?\/\//.test(e)||(c=new XDomainRequest),"onload"in c?c.onload=c.onerror=c.ontimeout=n:c.onreadystatechange=function(e){c.readyState>3&&n(e)},c.onprogress=function(e){l.call("progress",r,e)},r={header:function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?s.get(e):(null==t?s.remove(e):s.set(e,t+""),r)},mimeType:function(e){return arguments.length?(a=null==e?null:e+"",r):a},responseType:function(e){return arguments.length?(o=e,r):o},timeout:function(e){return arguments.length?(h=+e,r):h},user:function(e){return arguments.length<1?u:(u=null==e?null:e+"",r)},password:function(e){return arguments.length<1?d:(d=null==e?null:e+"",r)},response:function(e){return i=e,r},get:function(e,t){return r.send("GET",e,t)},post:function(e,t){return r.send("POST",e,t)},send:function(t,n,i){return c.open(t,e,!0,u,d),null==a||s.has("accept")||s.set("accept",a+",*/*"),c.setRequestHeader&&s.each(function(e,t){c.setRequestHeader(t,e)}),null!=a&&c.overrideMimeType&&c.overrideMimeType(a),null!=o&&(c.responseType=o),h>0&&(c.timeout=h),null==i&&"function"==typeof n&&(i=n,n=null),null!=i&&1===i.length&&(i=Xa(i)),null!=i&&r.on("error",i).on("load",function(e){i(null,e)}),l.call("beforesend",r,c),c.send(null==n?null:n),r},abort:function(){return c.abort(),r},on:function(){var e=l.on.apply(l,arguments);return e===l?r:e}},null!=t){if("function"!=typeof t)throw new Error("invalid callback: "+t);return r.get(t)}return r}function Xa(e){return function(t,n){e(null==t?n:null)}}function Za(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}function qa(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Qa(e){return e=qa(Math.abs(e)),e?e[1]:NaN}function Ka(e,t){return function(n,r){for(var a=n.length,i=[],o=0,l=e[0],s=0;a>0&&l>0&&(s+l+1>r&&(l=Math.max(1,r-s)),i.push(n.substring(a-=l,a+l)),!((s+=l+1)>r));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function $a(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}function Ja(e,t){e=e.toPrecision(t);e:for(var n,r=e.length,a=1,i=-1;a<r;++a)switch(e[a]){case".":i=n=a;break;case"0":0===i&&(i=a),n=a;break;case"e":break e;default:i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(n+1):e}function ei(e,t){var n=qa(e,t);if(!n)return e+"";var r=n[0],a=n[1],i=a-(tm=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,o=r.length;return i===o?r:i>o?r+new Array(i-o+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+qa(e,Math.max(0,t+i-1))[0]}function ti(e,t){var n=qa(e,t);if(!n)return e+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}function ni(e){return new ri(e)}function ri(e){if(!(t=Sm.exec(e)))throw new Error("invalid format: "+e);var t,n=t[1]||" ",r=t[2]||">",a=t[3]||"-",i=t[4]||"",o=!!t[5],l=t[6]&&+t[6],s=!!t[7],c=t[8]&&+t[8].slice(1),u=t[9]||"";"n"===u?(s=!0,u="g"):_m[u]||(u=""),(o||"0"===n&&"="===r)&&(o=!0,n="0",r="="),this.fill=n,this.align=r,this.sign=a,this.symbol=i,this.zero=o,this.width=l,this.comma=s,this.precision=c,this.type=u}function ai(e){return e}function ii(e){function t(e){function t(e){var t,a,l,u=v,x=y;if("c"===g)x=m(e)+x,e="";else{e=+e;var w=e<0;if(e=m(Math.abs(e),p),w&&0==+e&&(w=!1),u=(w?"("===c?c:"-":"-"===c||"("===c?"":c)+u,x=x+("s"===g?Am[8+tm/3]:"")+(w&&"("===c?")":""),b)for(t=-1,a=e.length;++t<a;)if(48>(l=e.charCodeAt(t))||l>57){x=(46===l?i+e.slice(t+1):e.slice(t))+x,e=e.slice(0,t);break}}f&&!d&&(e=r(e,1/0));var C=u.length+e.length+x.length,k=C<h?new Array(h-C+1).join(n):"";switch(f&&d&&(e=r(k+e,k.length?h-x.length:1/0),k=""),s){case"<":e=u+e+x+k;break;case"=":e=u+k+e+x;break;case"^":e=k.slice(0,C=k.length>>1)+u+e+x+k.slice(C);break;default:e=k+u+e+x}return o(e)}e=ni(e);var n=e.fill,s=e.align,c=e.sign,u=e.symbol,d=e.zero,h=e.width,f=e.comma,p=e.precision,g=e.type,v="$"===u?a[0]:"#"===u&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",y="$"===u?a[1]:/[%p]/.test(g)?l:"",m=_m[g],b=!g||/[defgprs%]/.test(g);return p=null==p?g?6:12:/[gprs]/.test(g)?Math.max(1,Math.min(21,p)):Math.max(0,Math.min(20,p)),t.toString=function(){return e+""},t}function n(e,n){var r=t((e=ni(e),e.type="f",e)),a=3*Math.max(-8,Math.min(8,Math.floor(Qa(n)/3))),i=Math.pow(10,-a),o=Am[8+a/3];return function(e){return r(i*e)+o}}var r=e.grouping&&e.thousands?Ka(e.grouping,e.thousands):ai,a=e.currency,i=e.decimal,o=e.numerals?$a(e.numerals):ai,l=e.percent||"%";return{format:t,formatPrefix:n}}function oi(t){return Om=ii(t),e.format=Om.format,e.formatPrefix=Om.formatPrefix,Om}function li(e){return Math.max(0,-Qa(Math.abs(e)))}function si(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Qa(t)/3)))-Qa(Math.abs(e)))}function ci(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Qa(t)-Qa(e))+1}function ui(e,t){return e.parent===t.parent?1:2}function di(e){return e.reduce(hi,0)/e.length}function hi(e,t){return e+t.x}function fi(e){return 1+e.reduce(pi,0)}function pi(e,t){return Math.max(e,t.y)}function gi(e){for(var t;t=e.children;)e=t[0];return e}function vi(e){for(var t;t=e.children;)e=t[t.length-1];return e}function yi(){function e(e){var i,o=0;e.eachAfter(function(e){var n=e.children;n?(e.x=di(n),e.y=fi(n)):(e.x=i?o+=t(e,i):0,e.y=0,i=e)});var l=gi(e),s=vi(e),c=l.x-t(l,s)/2,u=s.x+t(s,l)/2;return e.eachAfter(a?function(t){t.x=(t.x-e.x)*n,t.y=(e.y-t.y)*r}:function(t){t.x=(t.x-c)/(u-c)*n,t.y=(1-(e.y?t.y/e.y:1))*r})}var t=ui,n=1,r=1,a=!1;return e.separation=function(n){return arguments.length?(t=n,e):t},e.size=function(t){return arguments.length?(a=!1,n=+t[0],r=+t[1],e):a?null:[n,r]},e.nodeSize=function(t){return arguments.length?(a=!0,n=+t[0],r=+t[1],e):a?[n,r]:null},e}function mi(e){var t=0,n=e.children,r=n&&n.length;if(r)for(;--r>=0;)t+=n[r].value;else t=1;e.value=t}function bi(){return this.eachAfter(mi)}function xi(e){var t,n,r,a,i=this,o=[i];do for(t=o.reverse(),o=[];i=t.pop();)if(e(i),n=i.children)for(r=0,a=n.length;r<a;++r)o.push(n[r]);while(o.length);return this}function wi(e){for(var t,n,r=this,a=[r];r=a.pop();)if(e(r),t=r.children)for(n=t.length-1;n>=0;--n)a.push(t[n]);return this}function Ci(e){for(var t,n,r,a=this,i=[a],o=[];a=i.pop();)if(o.push(a),t=a.children)for(n=0,r=t.length;n<r;++n)i.push(t[n]);for(;a=o.pop();)e(a);return this}function ki(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,a=r&&r.length;--a>=0;)n+=r[a].value;t.value=n})}function _i(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Si(e){for(var t=this,n=Oi(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var a=r.length;e!==n;)r.splice(a,0,e),e=e.parent;return r}function Oi(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),a=null;for(e=n.pop(),t=r.pop();e===t;)a=e,e=n.pop(),t=r.pop();return a}function Ai(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Pi(){var e=[];return this.each(function(t){e.push(t)}),e}function Ti(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Ei(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function Li(e,t){var n,r,a,i,o,l=new Ri(e),s=+e.value&&(l.value=e.value),c=[l];for(null==t&&(t=zi);n=c.pop();)if(s&&(n.value=+n.data.value),(a=t(n.data))&&(o=a.length))for(n.children=new Array(o),i=o-1;i>=0;--i)c.push(r=n.children[i]=new Ri(a[i])),r.parent=n,r.depth=n.depth+1;return l.eachBefore(Di)}function Mi(){return Li(this).eachBefore(Ii)}function zi(e){return e.children}function Ii(e){e.data=e.data.data}function Di(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Ri(e){this.data=e,this.depth=this.height=0,this.parent=null}function ji(e){for(var t,n,r=e.length;r;)n=Math.random()*r--|0,t=e[r],e[r]=e[n],e[n]=t;return e}function Hi(e){for(var t,n,r=0,a=(e=ji(Pm.call(e))).length,i=[];r<a;)t=e[r],n&&Fi(n,t)?++r:(n=Wi(i=Bi(i,t)),r=0);return n}function Bi(e,t){var n,r;if(Vi(t,e))return[t];for(n=0;n<e.length;++n)if(Ni(t,e[n])&&Vi(Ui(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(Ni(Ui(e[n],e[r]),t)&&Ni(Ui(e[n],t),e[r])&&Ni(Ui(e[r],t),e[n])&&Vi(Gi(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function Ni(e,t){var n=e.r-t.r,r=t.x-e.x,a=t.y-e.y;return n<0||n*n<r*r+a*a}function Fi(e,t){var n=e.r-t.r+1e-6,r=t.x-e.x,a=t.y-e.y;return n>0&&n*n>r*r+a*a}function Vi(e,t){for(var n=0;n<t.length;++n)if(!Fi(e,t[n]))return!1;return!0}function Wi(e){switch(e.length){case 1:return Yi(e[0]);case 2:return Ui(e[0],e[1]);case 3:return Gi(e[0],e[1],e[2])}}function Yi(e){return{x:e.x,y:e.y,r:e.r}}function Ui(e,t){var n=e.x,r=e.y,a=e.r,i=t.x,o=t.y,l=t.r,s=i-n,c=o-r,u=l-a,d=Math.sqrt(s*s+c*c);return{x:(n+i+s/d*u)/2,y:(r+o+c/d*u)/2,r:(d+a+l)/2}}function Gi(e,t,n){var r=e.x,a=e.y,i=e.r,o=t.x,l=t.y,s=t.r,c=n.x,u=n.y,d=n.r,h=r-o,f=r-c,p=a-l,g=a-u,v=s-i,y=d-i,m=r*r+a*a-i*i,b=m-o*o-l*l+s*s,x=m-c*c-u*u+d*d,w=f*p-h*g,C=(p*x-g*b)/(2*w)-r,k=(g*v-p*y)/w,_=(f*b-h*x)/(2*w)-a,S=(h*y-f*v)/w,O=k*k+S*S-1,A=2*(i+C*k+_*S),P=C*C+_*_-i*i,T=-(O?(A+Math.sqrt(A*A-4*O*P))/(2*O):P/A);return{x:r+C+k*T,y:a+_+S*T,r:T}}function Xi(e,t,n){var r=e.x,a=e.y,i=t.r+n.r,o=e.r+n.r,l=t.x-r,s=t.y-a,c=l*l+s*s;if(c){var u=.5+((o*=o)-(i*=i))/(2*c),d=Math.sqrt(Math.max(0,2*i*(o+c)-(o-=c)*o-i*i))/(2*c);n.x=r+u*l+d*s,n.y=a+u*s-d*l}else n.x=r+o,n.y=a}function Zi(e,t){var n=t.x-e.x,r=t.y-e.y,a=e.r+t.r;return a*a-1e-6>n*n+r*r}function qi(e){var t=e._,n=e.next._,r=t.r+n.r,a=(t.x*n.r+n.x*t.r)/r,i=(t.y*n.r+n.y*t.r)/r;return a*a+i*i}function Qi(e){this._=e,this.next=null,this.previous=null}function Ki(e){if(!(a=e.length))return 0;var t,n,r,a,i,o,l,s,c,u,d;if(t=e[0],t.x=0,t.y=0,!(a>1))return t.r;if(n=e[1],t.x=-n.r,n.x=t.r,n.y=0,!(a>2))return t.r+n.r;Xi(n,t,r=e[2]),t=new Qi(t),n=new Qi(n),r=new Qi(r),t.next=r.previous=n,n.next=t.previous=r,r.next=n.previous=t;e:for(l=3;l<a;++l){Xi(t._,n._,r=e[l]),r=new Qi(r),s=n.next,c=t.previous,u=n._.r,d=t._.r;do if(u<=d){if(Zi(s._,r._)){n=s,t.next=n,n.previous=t,--l;continue e}u+=s._.r,s=s.next}else{if(Zi(c._,r._)){t=c,t.next=n,n.previous=t,--l;continue e}d+=c._.r,c=c.previous}while(s!==c.next);for(r.previous=t,r.next=n,t.next=n.previous=n=r,i=qi(t);(r=r.next)!==n;)(o=qi(r))<i&&(t=r,i=o);n=t.next}for(t=[n._],r=n;(r=r.next)!==n;)t.push(r._);for(r=Hi(t),l=0;l<a;++l)t=e[l],t.x-=r.x,t.y-=r.y;return r.r}function $i(e){return Ki(e),e}function Ji(e){return null==e?null:eo(e)}function eo(e){if("function"!=typeof e)throw new Error;return e}function to(){return 0}function no(e){return function(){return e}}function ro(e){return Math.sqrt(e.value)}function ao(){function e(e){return e.x=n/2,e.y=r/2,t?e.eachBefore(io(t)).eachAfter(oo(a,.5)).eachBefore(lo(1)):e.eachBefore(io(ro)).eachAfter(oo(to,1)).eachAfter(oo(a,e.r/Math.min(n,r))).eachBefore(lo(Math.min(n,r)/(2*e.r))),e}var t=null,n=1,r=1,a=to;return e.radius=function(n){return arguments.length?(t=Ji(n),e):t},e.size=function(t){return arguments.length?(n=+t[0],r=+t[1],e):[n,r]},e.padding=function(t){return arguments.length?(a="function"==typeof t?t:no(+t),e):a},e}function io(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function oo(e,t){return function(n){if(r=n.children){var r,a,i,o=r.length,l=e(n)*t||0;if(l)for(a=0;a<o;++a)r[a].r+=l;if(i=Ki(r),l)for(a=0;a<o;++a)r[a].r-=l;n.r=i+l}}}function lo(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function so(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function co(e,t,n,r,a){for(var i,o=e.children,l=-1,s=o.length,c=e.value&&(r-t)/e.value;++l<s;)i=o[l],i.y0=n,i.y1=a,i.x0=t,i.x1=t+=i.value*c}function uo(){function e(e){var o=e.height+1;return e.x0=e.y0=a,e.x1=n,e.y1=r/o,e.eachBefore(t(r,o)),i&&e.eachBefore(so),e}function t(e,t){return function(n){n.children&&co(n,n.x0,e*(n.depth+1)/t,n.x1,e*(n.depth+2)/t);var r=n.x0,i=n.y0,o=n.x1-a,l=n.y1-a;o<r&&(r=o=(r+o)/2),l<i&&(i=l=(i+l)/2),n.x0=r,n.y0=i,n.x1=o,n.y1=l}}var n=1,r=1,a=0,i=!1;return e.round=function(t){return arguments.length?(i=!!t,e):i},e.size=function(t){return arguments.length?(n=+t[0],r=+t[1],e):[n,r]},e.padding=function(t){return arguments.length?(a=+t,e):a},e}function ho(e){return e.id}function fo(e){return e.parentId}function po(){function e(e){var r,a,i,o,l,s,c,u=e.length,d=new Array(u),h={};for(a=0;a<u;++a)r=e[a],l=d[a]=new Ri(r),null!=(s=t(r,a,e))&&(s+="")&&(c=Tm+(l.id=s),h[c]=c in h?Lm:l);for(a=0;a<u;++a)if(l=d[a],null!=(s=n(e[a],a,e))&&(s+="")){if(!(o=h[Tm+s]))throw new Error("missing: "+s);if(o===Lm)throw new Error("ambiguous: "+s);o.children?o.children.push(l):o.children=[l],l.parent=o}else{if(i)throw new Error("multiple roots");i=l}if(!i)throw new Error("no root");if(i.parent=Em,i.eachBefore(function(e){e.depth=e.parent.depth+1,--u}).eachBefore(Di),i.parent=null,u>0)throw new Error("cycle");return i}var t=ho,n=fo;return e.id=function(n){return arguments.length?(t=eo(n),e):t},e.parentId=function(t){return arguments.length?(n=eo(t),e):n},e}function go(e,t){return e.parent===t.parent?1:2}function vo(e){var t=e.children;return t?t[0]:e.t}function yo(e){var t=e.children;return t?t[t.length-1]:e.t}function mo(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function bo(e){for(var t,n=0,r=0,a=e.children,i=a.length;--i>=0;)t=a[i],t.z+=n,t.m+=n,n+=t.s+(r+=t.c)}function xo(e,t,n){return e.a.parent===t.parent?e.a:n}function wo(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}function Co(e){for(var t,n,r,a,i,o=new wo(e,0),l=[o];t=l.pop();)if(r=t._.children)for(t.children=new Array(i=r.length),a=i-1;a>=0;--a)l.push(n=t.children[a]=new wo(r[a],a)),n.parent=t;return(o.parent=new wo(null,0)).children=[o],o}function ko(){function e(e){var r=Co(e);if(r.eachAfter(t),r.parent.m=-r.z,r.eachBefore(n),s)e.eachBefore(a);else{var c=e,u=e,d=e;e.eachBefore(function(e){e.x<c.x&&(c=e),e.x>u.x&&(u=e),e.depth>d.depth&&(d=e)});var h=c===u?1:i(c,u)/2,f=h-c.x,p=o/(u.x+h+f),g=l/(d.depth||1);e.eachBefore(function(e){e.x=(e.x+f)*p,e.y=e.depth*g})}return e}function t(e){var t=e.children,n=e.parent.children,a=e.i?n[e.i-1]:null;if(t){bo(e);var o=(t[0].z+t[t.length-1].z)/2;a?(e.z=a.z+i(e._,a._),e.m=e.z-o):e.z=o}else a&&(e.z=a.z+i(e._,a._));e.parent.A=r(e,a,e.parent.A||n[0])}function n(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function r(e,t,n){if(t){for(var r,a=e,o=e,l=t,s=a.parent.children[0],c=a.m,u=o.m,d=l.m,h=s.m;l=yo(l),a=vo(a),l&&a;)s=vo(s),o=yo(o),o.a=e,r=l.z+d-a.z-c+i(l._,a._),r>0&&(mo(xo(l,e,n),e,r),c+=r,u+=r),d+=l.m,c+=a.m,h+=s.m,u+=o.m;l&&!yo(o)&&(o.t=l,o.m+=d-u),a&&!vo(s)&&(s.t=a,s.m+=c-h,n=e)}return n}function a(e){e.x*=o,e.y=e.depth*l}var i=go,o=1,l=1,s=null;return e.separation=function(t){return arguments.length?(i=t,e):i},e.size=function(t){return arguments.length?(s=!1,o=+t[0],l=+t[1],e):s?null:[o,l]},e.nodeSize=function(t){return arguments.length?(s=!0,o=+t[0],l=+t[1],e):s?[o,l]:null},e}function _o(e,t,n,r,a){for(var i,o=e.children,l=-1,s=o.length,c=e.value&&(a-n)/e.value;++l<s;)i=o[l],i.x0=t,i.x1=r,i.y0=n,i.y1=n+=i.value*c}function So(e,t,n,r,a,i){for(var o,l,s,c,u,d,h,f,p,g,v,y=[],m=t.children,b=0,x=0,w=m.length,C=t.value;b<w;){s=a-n,c=i-r;do u=m[x++].value;while(!u&&x<w);for(d=h=u,g=Math.max(c/s,s/c)/(C*e),v=u*u*g,p=Math.max(h/v,v/d);x<w;++x){if(u+=l=m[x].value,l<d&&(d=l),l>h&&(h=l),v=u*u*g,(f=Math.max(h/v,v/d))>p){u-=l;break}p=f}y.push(o={value:u,dice:s<c,children:m.slice(b,x)}),o.dice?co(o,n,r,a,C?r+=c*u/C:i):_o(o,n,r,C?n+=s*u/C:a,i),C-=u,b=x}return y}function Oo(){function e(e){return e.x0=e.y0=0,e.x1=a,e.y1=i,e.eachBefore(t),o=[0],r&&e.eachBefore(so),e}function t(e){var t=o[e.depth],r=e.x0+t,a=e.y0+t,i=e.x1-t,h=e.y1-t;i<r&&(r=i=(r+i)/2),h<a&&(a=h=(a+h)/2),e.x0=r,e.y0=a,e.x1=i,e.y1=h,e.children&&(t=o[e.depth+1]=l(e)/2,r+=d(e)-t,a+=s(e)-t,i-=c(e)-t,h-=u(e)-t,i<r&&(r=i=(r+i)/2),h<a&&(a=h=(a+h)/2),n(e,r,a,i,h))}var n=zm,r=!1,a=1,i=1,o=[0],l=to,s=to,c=to,u=to,d=to;return e.round=function(t){return arguments.length?(r=!!t,e):r},e.size=function(t){return arguments.length?(a=+t[0],i=+t[1],e):[a,i]},e.tile=function(t){return arguments.length?(n=eo(t),e):n},e.padding=function(t){return arguments.length?e.paddingInner(t).paddingOuter(t):e.paddingInner()},e.paddingInner=function(t){return arguments.length?(l="function"==typeof t?t:no(+t),e):l},e.paddingOuter=function(t){return arguments.length?e.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):e.paddingTop()},e.paddingTop=function(t){return arguments.length?(s="function"==typeof t?t:no(+t),e):s},e.paddingRight=function(t){return arguments.length?(c="function"==typeof t?t:no(+t),e):c},e.paddingBottom=function(t){return arguments.length?(u="function"==typeof t?t:no(+t),e):u},e.paddingLeft=function(t){return arguments.length?(d="function"==typeof t?t:no(+t),e):d},e}function Ao(e,t,n,r,a){function i(e,t,n,r,a,o,l){if(e>=t-1){var c=s[e];return c.x0=r,c.y0=a,c.x1=o,void(c.y1=l)}for(var d=u[e],h=n/2+d,f=e+1,p=t-1;f<p;){var g=f+p>>>1;u[g]<h?f=g+1:p=g}h-u[f-1]<u[f]-h&&e+1<f&&--f;var v=u[f]-d,y=n-v;if(o-r>l-a){var m=(r*y+o*v)/n;i(e,f,v,r,a,m,l),i(f,t,y,m,a,o,l)}else{var b=(a*y+l*v)/n;i(e,f,v,r,a,o,b),i(f,t,y,r,b,o,l)}}var o,l,s=e.children,c=s.length,u=new Array(c+1);for(u[0]=l=o=0;o<c;++o)u[o+1]=l+=s[o].value;i(0,c,e.value,t,n,r,a)}function Po(e,t,n,r,a){(1&e.depth?_o:co)(e,t,n,r,a)}function To(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Eo(){return new To}function Lo(e){function t(t){var i=t+"",o=n.get(i);if(!o){if(a!==Fm)return a;n.set(i,o=r.push(t))}return e[(o-1)%e.length]}var n=x(),r=[],a=Fm;return e=null==e?[]:Nm.call(e),t.domain=function(e){if(!arguments.length)return r.slice();r=[],n=x();for(var a,i,o=-1,l=e.length;++o<l;)n.has(i=(a=e[o])+"")||n.set(i,r.push(a));return t},t.range=function(n){return arguments.length?(e=Nm.call(n),t):e.slice()},t.unknown=function(e){return arguments.length?(a=e,t):a},t.copy=function(){return Lo().domain(r).range(e).unknown(a)},t}function Mo(){function e(){var e=a().length,r=o[1]<o[0],h=o[r-0],f=o[1-r];t=(f-h)/Math.max(1,e-s+2*u),l&&(t=Math.floor(t)),h+=(f-h-t*(e-s))*d,n=t*(1-s),l&&(h=Math.round(h),n=Math.round(n));var p=c(e).map(function(e){return h+t*e});return i(r?p.reverse():p)}var t,n,r=Lo().unknown(void 0),a=r.domain,i=r.range,o=[0,1],l=!1,s=0,u=0,d=.5;return delete r.unknown,r.domain=function(t){return arguments.length?(a(t),e()):a()},r.range=function(t){return arguments.length?(o=[+t[0],+t[1]],e()):o.slice()},r.rangeRound=function(t){return o=[+t[0],+t[1]],l=!0,e()},r.bandwidth=function(){return n},r.step=function(){return t},r.round=function(t){return arguments.length?(l=!!t,e()):l},r.padding=function(t){return arguments.length?(s=u=Math.max(0,Math.min(1,t)),e()):s},r.paddingInner=function(t){return arguments.length?(s=Math.max(0,Math.min(1,t)),e()):s},r.paddingOuter=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),e()):u},r.align=function(t){return arguments.length?(d=Math.max(0,Math.min(1,t)),e()):d},r.copy=function(){return Mo().domain(a()).range(o).round(l).paddingInner(s).paddingOuter(u).align(d)},e()}function zo(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return zo(t())},e}function Io(){return zo(Mo().paddingInner(1))}function Do(e){return function(){return e}}function Ro(e){return+e}function jo(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Do(t)}function Ho(e){return function(t,n){var r=e(t=+t,n=+n);return function(e){return e<=t?0:e>=n?1:r(e)}}}function Bo(e){return function(t,n){var r=e(t=+t,n=+n);return function(e){return e<=0?t:e>=1?n:r(e)}}}function No(e,t,n,r){var a=e[0],i=e[1],o=t[0],l=t[1];return i<a?(a=n(i,a),o=r(l,o)):(a=n(a,i),o=r(o,l)),function(e){return o(a(e))}}function Fo(e,t,n,r){var a=Math.min(e.length,t.length)-1,i=new Array(a),o=new Array(a),l=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<a;)i[l]=n(e[l],e[l+1]),o[l]=r(t[l],t[l+1]);return function(t){var n=Vg(e,t,1,a)-1;return o[n](i[n](t))}}function Vo(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp())}function Wo(e,t){function n(){return a=Math.min(l.length,s.length)>2?Fo:No,i=o=null,r}function r(t){return(i||(i=a(l,s,u?Ho(e):e,c)))(+t)}var a,i,o,l=Vm,s=Vm,c=En,u=!1;return r.invert=function(e){return(o||(o=a(s,l,jo,u?Bo(t):t)))(+e)},r.domain=function(e){return arguments.length?(l=Bm.call(e,Ro),n()):l.slice()},r.range=function(e){return arguments.length?(s=Nm.call(e),n()):s.slice()},r.rangeRound=function(e){return s=Nm.call(e),c=Ln,n()},r.clamp=function(e){return arguments.length?(u=!!e,n()):u},r.interpolate=function(e){return arguments.length?(c=e,n()):c},n()}function Yo(t,n,r){var a,i=t[0],o=t[t.length-1],l=h(i,o,null==n?10:n);switch(r=ni(null==r?",f":r),r.type){case"s":var s=Math.max(Math.abs(i),Math.abs(o));return null!=r.precision||isNaN(a=si(l,s))||(r.precision=a),e.formatPrefix(r,s);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(a=ci(l,Math.max(Math.abs(i),Math.abs(o))))||(r.precision=a-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(a=li(l))||(r.precision=a-2*("%"===r.type))}return e.format(r)}function Uo(e){var t=e.domain;return e.ticks=function(e){var n=t();return u(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){return Yo(t(),e,n)},e.nice=function(n){null==n&&(n=10);var r,a=t(),i=0,o=a.length-1,l=a[i],s=a[o];return s<l&&(r=l,l=s,s=r,r=i,i=o,o=r),r=d(l,s,n),r>0?(l=Math.floor(l/r)*r,s=Math.ceil(s/r)*r,r=d(l,s,n)):r<0&&(l=Math.ceil(l*r)/r,s=Math.floor(s*r)/r,r=d(l,s,n)),r>0?(a[i]=Math.floor(l/r)*r,a[o]=Math.ceil(s/r)*r,t(a)):r<0&&(a[i]=Math.ceil(l*r)/r,a[o]=Math.floor(s*r)/r,t(a)),e},e}function Go(){var e=Wo(jo,Sn);return e.copy=function(){return Vo(e,Go())},Uo(e)}function Xo(e,t){e=e.slice();var n,r=0,a=e.length-1,i=e[r],o=e[a];return o<i&&(n=r,r=a,a=n,n=i,i=o,o=n),e[r]=t.floor(i),e[a]=t.ceil(o),e}function Zo(){function e(){var e=0,t=Math.max(1,a.length);for(i=new Array(t-1);++e<t;)i[e-1]=f(r,e/t);return n}function n(e){if(!isNaN(e=+e))return a[Vg(i,e)]}var r=[],a=[],i=[];return n.invertExtent=function(e){var t=a.indexOf(e);return t<0?[NaN,NaN]:[t>0?i[t-1]:r[0],t<i.length?i[t]:r[r.length-1]]},n.domain=function(n){if(!arguments.length)return r.slice();r=[];for(var a,i=0,o=n.length;i<o;++i)null==(a=n[i])||isNaN(a=+a)||r.push(a);return r.sort(t),e()},n.range=function(t){return arguments.length?(a=Nm.call(t),e()):a.slice()},n.quantiles=function(){return i.slice()},n.copy=function(){return Zo().domain(r).range(a)},n}function qo(e,t,n,r){function a(t){return e(t=new Date(+t)),t}return a.floor=a,a.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},a.round=function(e){var t=a(e),n=a.ceil(e);return e-t<n-e?t:n},a.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},a.range=function(n,r,i){var o,l=[];if(n=a.ceil(n),i=null==i?1:Math.floor(i),!(n<r&&i>0))return l;do l.push(o=new Date(+n)),t(n,i),e(n);while(o<n&&n<r);return l},a.filter=function(n){return qo(function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)},function(e,r){if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););})},n&&(a.count=function(t,r){return Wm.setTime(+t),Ym.setTime(+r),e(Wm),e(Ym),Math.floor(n(Wm,Ym))},a.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?a.filter(r?function(t){return r(t)%e==0}:function(t){return a.count(0,t)%e==0}):a:null}),a}function Qo(e){return qo(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Xm)/Zm})}function Ko(e){return qo(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/Zm})}function $o(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Jo(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function el(e){return{y:e,m:0,d:1,H:0,M:0,S:0,L:0}}function tl(e){function t(e,t){return function(n){var r,a,i,o=[],l=-1,s=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++l<c;)37===e.charCodeAt(l)&&(o.push(e.slice(s,l)),null!=(a=Gb[r=e.charAt(++l)])?r=e.charAt(++l):a="e"===r?" ":"0",(i=t[r])&&(r=i(n,a)),o.push(r),s=l+1);return o.push(e.slice(s,l)),o.join("")}}function n(e,t){return function(n){var a,i,o=el(1900),l=r(o,e,n+="",0);if(l!=n.length)return null;if("Q"in o)return new Date(o.Q);if("p"in o&&(o.H=o.H%12+12*o.p),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(a=Jo(el(o.y)),i=a.getUTCDay(),a=i>4||0===i?Pb.ceil(a):Pb(a),a=Sb.offset(a,7*(o.V-1)),o.y=a.getUTCFullYear(),o.m=a.getUTCMonth(),o.d=a.getUTCDate()+(o.w+6)%7):(a=t(el(o.y)),i=a.getDay(),a=i>4||0===i?ab.ceil(a):ab(a),a=tb.offset(a,7*(o.V-1)),o.y=a.getFullYear(),o.m=a.getMonth(),o.d=a.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?Jo(el(o.y)).getUTCDay():t(el(o.y)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,Jo(o)):t(o)}}function r(e,t,n,r){for(var a,i,o=0,l=t.length,s=n.length;o<l;){if(r>=s)return-1;if(37===(a=t.charCodeAt(o++))){if(a=t.charAt(o++),!(i=V[a in Gb?t.charAt(o++):a])||(r=i(e,n,r))<0)return-1}else if(a!=n.charCodeAt(r++))return-1}return r}function a(e,t,n){var r=E.exec(t.slice(n));return r?(e.p=L[r[0].toLowerCase()],n+r[0].length):-1}function i(e,t,n){var r=I.exec(t.slice(n));return r?(e.w=D[r[0].toLowerCase()],n+r[0].length):-1}function o(e,t,n){var r=M.exec(t.slice(n));return r?(e.w=z[r[0].toLowerCase()],n+r[0].length):-1}function l(e,t,n){var r=H.exec(t.slice(n));return r?(e.m=B[r[0].toLowerCase()],n+r[0].length):-1}function s(e,t,n){var r=R.exec(t.slice(n));return r?(e.m=j[r[0].toLowerCase()],n+r[0].length):-1}function c(e,t,n){return r(e,C,t,n)}function u(e,t,n){return r(e,k,t,n)}function d(e,t,n){return r(e,_,t,n)}function h(e){return A[e.getDay()]}function f(e){return O[e.getDay()]}function p(e){return T[e.getMonth()]}function g(e){return P[e.getMonth()]}function v(e){return S[+(e.getHours()>=12)]}function y(e){return A[e.getUTCDay()]}function m(e){return O[e.getUTCDay()]}function b(e){return T[e.getUTCMonth()]}function x(e){return P[e.getUTCMonth()]}function w(e){return S[+(e.getUTCHours()>=12)]}var C=e.dateTime,k=e.date,_=e.time,S=e.periods,O=e.days,A=e.shortDays,P=e.months,T=e.shortMonths,E=al(S),L=il(S),M=al(O),z=il(O),I=al(A),D=il(A),R=al(P),j=il(P),H=al(T),B=il(T),N={a:h,A:f,b:p,B:g,c:null,d:Sl,e:Sl,f:El,H:Ol,I:Al,j:Pl,L:Tl,m:Ll,M:Ml,p:v,Q:os,s:ls,S:zl,u:Il,U:Dl,V:Rl,w:jl,W:Hl,x:null,X:null,y:Bl,Y:Nl,Z:Fl,"%":is},F={a:y,A:m,b:b,B:x,c:null,d:Vl,e:Vl,f:Xl,H:Wl,I:Yl,j:Ul,L:Gl,m:Zl,M:ql,p:w,Q:os,s:ls,S:Ql,u:Kl,U:$l,V:Jl,w:es,W:ts,x:null,X:null,y:ns,Y:rs,Z:as,"%":is},V={a:i,A:o,b:l,B:s,c:c,d:gl,e:gl,f:wl,H:yl,I:yl,j:vl,L:xl,m:pl,M:ml,p:a,Q:kl,s:_l,S:bl,u:ll,U:sl,V:cl,w:ol,W:ul,x:u,X:d,y:hl,Y:dl,Z:fl,"%":Cl};return N.x=t(k,N),N.X=t(_,N),N.c=t(C,N),F.x=t(k,F),F.X=t(_,F),F.c=t(C,F),{format:function(e){var n=t(e+="",N);return n.toString=function(){return e},n},parse:function(e){var t=n(e+="",$o);return t.toString=function(){return e},t},utcFormat:function(e){var n=t(e+="",F);return n.toString=function(){return e},n},utcParse:function(e){var t=n(e,Jo);return t.toString=function(){return e},t}}}function nl(e,t,n){var r=e<0?"-":"",a=(r?-e:e)+"",i=a.length;return r+(i<n?new Array(n-i+1).join(t)+a:a)}function rl(e){return e.replace(qb,"\\$&")}function al(e){return new RegExp("^(?:"+e.map(rl).join("|")+")","i")}function il(e){for(var t={},n=-1,r=e.length;++n<r;)t[e[n].toLowerCase()]=n;return t}function ol(e,t,n){var r=Xb.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function ll(e,t,n){var r=Xb.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function sl(e,t,n){var r=Xb.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function cl(e,t,n){var r=Xb.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function ul(e,t,n){var r=Xb.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function dl(e,t,n){var r=Xb.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function hl(e,t,n){var r=Xb.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function fl(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function pl(e,t,n){var r=Xb.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function gl(e,t,n){var r=Xb.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function vl(e,t,n){var r=Xb.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function yl(e,t,n){var r=Xb.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function ml(e,t,n){var r=Xb.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function bl(e,t,n){var r=Xb.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function xl(e,t,n){var r=Xb.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function wl(e,t,n){var r=Xb.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Cl(e,t,n){var r=Zb.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function kl(e,t,n){var r=Xb.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function _l(e,t,n){var r=Xb.exec(t.slice(n));return r?(e.Q=1e3*+r[0],n+r[0].length):-1}function Sl(e,t){return nl(e.getDate(),t,2)}function Ol(e,t){return nl(e.getHours(),t,2)}function Al(e,t){return nl(e.getHours()%12||12,t,2)}function Pl(e,t){return nl(1+tb.count(bb(e),e),t,3)}function Tl(e,t){return nl(e.getMilliseconds(),t,3)}function El(e,t){return Tl(e,t)+"000"}function Ll(e,t){return nl(e.getMonth()+1,t,2)}function Ml(e,t){return nl(e.getMinutes(),t,2)}function zl(e,t){return nl(e.getSeconds(),t,2)}function Il(e){var t=e.getDay();return 0===t?7:t}function Dl(e,t){return nl(rb.count(bb(e),e),t,2)}function Rl(e,t){var n=e.getDay();return e=n>=4||0===n?lb(e):lb.ceil(e),nl(lb.count(bb(e),e)+(4===bb(e).getDay()),t,2)}function jl(e){return e.getDay()}function Hl(e,t){return nl(ab.count(bb(e),e),t,2)}function Bl(e,t){return nl(e.getFullYear()%100,t,2)}function Nl(e,t){return nl(e.getFullYear()%1e4,t,4)}function Fl(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+nl(t/60|0,"0",2)+nl(t%60,"0",2)}function Vl(e,t){return nl(e.getUTCDate(),t,2)}function Wl(e,t){return nl(e.getUTCHours(),t,2)}function Yl(e,t){return nl(e.getUTCHours()%12||12,t,2)}function Ul(e,t){return nl(1+Sb.count(Wb(e),e),t,3)}function Gl(e,t){return nl(e.getUTCMilliseconds(),t,3)}function Xl(e,t){return Gl(e,t)+"000"}function Zl(e,t){return nl(e.getUTCMonth()+1,t,2)}function ql(e,t){return nl(e.getUTCMinutes(),t,2)}function Ql(e,t){return nl(e.getUTCSeconds(),t,2)}function Kl(e){var t=e.getUTCDay();return 0===t?7:t}function $l(e,t){return nl(Ab.count(Wb(e),e),t,2)}function Jl(e,t){var n=e.getUTCDay();return e=n>=4||0===n?Lb(e):Lb.ceil(e),nl(Lb.count(Wb(e),e)+(4===Wb(e).getUTCDay()),t,2)}function es(e){return e.getUTCDay()}function ts(e,t){return nl(Pb.count(Wb(e),e),t,2)}function ns(e,t){return nl(e.getUTCFullYear()%100,t,2)}function rs(e,t){return nl(e.getUTCFullYear()%1e4,t,4)}function as(){return"+0000"}function is(){return"%"}function os(e){return+e}function ls(e){return Math.floor(+e/1e3)}function ss(t){return Yb=tl(t),e.timeFormat=Yb.format,e.timeParse=Yb.parse,e.utcFormat=Yb.utcFormat,e.utcParse=Yb.utcParse,Yb}function cs(e){return e.toISOString()}function us(e){var t=new Date(e);return isNaN(t)?null:t}function ds(e){return new Date(e)}function hs(e){return e instanceof Date?+e:+new Date(+e)}function fs(e,t,r,a,i,o,l,s,c){function u(n){return(l(n)<n?v:o(n)<n?y:i(n)<n?m:a(n)<n?b:t(n)<n?r(n)<n?x:w:e(n)<n?C:k)(n)}function d(t,r,a,i){if(null==t&&(t=10),"number"==typeof t){var o=Math.abs(a-r)/t,l=n(function(e){return e[2]}).right(_,o);l===_.length?(i=h(r/ax,a/ax,t),t=e):l?(l=_[o/_[l-1][2]<_[l][2]/o?l-1:l],i=l[1],t=l[0]):(i=Math.max(h(r,a,t),1),t=s)}return null==i?t:t.every(i)}var f=Wo(jo,Sn),p=f.invert,g=f.domain,v=c(".%L"),y=c(":%S"),m=c("%I:%M"),b=c("%I %p"),x=c("%a %d"),w=c("%b %d"),C=c("%B"),k=c("%Y"),_=[[l,1,$b],[l,5,5*$b],[l,15,15*$b],[l,30,30*$b],[o,1,Jb],[o,5,5*Jb],[o,15,15*Jb],[o,30,30*Jb],[i,1,ex],[i,3,3*ex],[i,6,6*ex],[i,12,12*ex],[a,1,tx],[a,2,2*tx],[r,1,nx],[t,1,rx],[t,3,3*rx],[e,1,ax]];return f.invert=function(e){return new Date(p(e))},f.domain=function(e){return arguments.length?g(Bm.call(e,hs)):g().map(ds)},f.ticks=function(e,t){var n,r=g(),a=r[0],i=r[r.length-1],o=i<a;return o&&(n=a,a=i,i=n),n=d(e,a,i,t),n=n?n.range(a,i+1):[],o?n.reverse():n},f.tickFormat=function(e,t){return null==t?u:c(t)},f.nice=function(e,t){var n=g();return(e=d(e,n[0],n[n.length-1],t))?g(Xo(n,e)):f},f.copy=function(){return Vo(f,fs(e,t,r,a,i,o,l,s,c))},f}function ps(){return fs(bb,yb,rb,tb,Jm,Km,qm,Um,e.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)])}function gs(){return fs(Wb,Fb,Ab,Sb,kb,wb,qm,Um,e.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])}function vs(e){return e.match(/.{6}/g).map(function(e){return"#"+e})}function ys(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function ms(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function bs(e){return function(){return e}}function xs(e){return+e}function ws(e){return e}function Cs(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:bs(isNaN(t)?NaN:.5)}function ks(e){var t,n=e[0],r=e[e.length-1];return n>r&&(t=n,n=r,r=t),function(e){return Math.max(n,Math.min(r,e))}}function _s(e,t,n){var r=e[0],a=e[1],i=t[0],o=t[1];return a<r?(r=Cs(a,r),i=n(o,i)):(r=Cs(r,a),i=n(i,o)),function(e){return i(r(e))}}function Ss(e,t,n){var r=Math.min(e.length,t.length)-1,a=new Array(r),i=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)a[o]=Cs(e[o],e[o+1]),i[o]=n(t[o],t[o+1]);return function(t){var n=Vg(e,t,1,r)-1;return i[n](a[n](t))}}function Os(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function As(){function e(){return i=Math.min(s.length,c.length)>2?Ss:_s,o=l=null,t}function t(e){return isNaN(e=+e)?a:(o||(o=i(s.map(n),c,u)))(n(d(e)))}var n,r,a,i,o,l,s=sx,c=sx,u=En,d=ws;return t.invert=function(e){return d(r((l||(l=i(c,s.map(n),Sn)))(e)))},t.domain=function(t){return arguments.length?(s=ox.call(t,xs),d===ws||(d=ks(s)),e()):s.slice()},t.range=function(t){return arguments.length?(c=lx.call(t),e()):c.slice()},t.rangeRound=function(t){return c=lx.call(t),u=Ln,e()},t.clamp=function(e){return arguments.length?(d=e?ks(s):ws,t):d!==ws},t.interpolate=function(t){return arguments.length?(u=t,e()):u},t.unknown=function(e){return arguments.length?(a=e,t):a},function(t,a){return n=t,r=a,e()}}function Ps(t,n,r,a){var i,o=h(t,n,r);switch(a=ni(null==a?",f":a),a.type){case"s":var l=Math.max(Math.abs(t),Math.abs(n));return null!=a.precision||isNaN(i=si(o,l))||(a.precision=i),e.formatPrefix(a,l);case"":case"e":case"g":case"p":case"r":null!=a.precision||isNaN(i=ci(o,Math.max(Math.abs(t),Math.abs(n))))||(a.precision=i-("e"===a.type));break;case"f":case"%":null!=a.precision||isNaN(i=li(o))||(a.precision=i-2*("%"===a.type))}return e.format(a)}function Ts(e){var t=e.domain;return e.ticks=function(e){var n=t();return u(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return Ps(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,a=t(),i=0,o=a.length-1,l=a[i],s=a[o];return s<l&&(r=l,l=s,s=r,r=i,i=o,o=r),r=d(l,s,n),r>0?(l=Math.floor(l/r)*r,s=Math.ceil(s/r)*r,r=d(l,s,n)):r<0&&(l=Math.ceil(l*r)/r,s=Math.floor(s*r)/r,r=d(l,s,n)),r>0?(a[i]=Math.floor(l/r)*r,a[o]=Math.ceil(s/r)*r,t(a)):r<0&&(a[i]=Math.ceil(l*r)/r,a[o]=Math.floor(s*r)/r,t(a)),e},e}function Es(e,t){e=e.slice();var n,r=0,a=e.length-1,i=e[r],o=e[a];return o<i&&(n=r,r=a,a=n,n=i,i=o,o=n),e[r]=t.floor(i),e[a]=t.ceil(o),e}function Ls(e){return Math.log(e)}function Ms(e){return Math.exp(e)}function zs(e){return-Math.log(-e)}function Is(e){return-Math.exp(-e)}function Ds(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Rs(e){return 10===e?Ds:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}function js(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}function Hs(e){return function(t){return-e(-t)}}function Bs(t){function n(){return r=js(l),a=Rs(l),o()[0]<0?(r=Hs(r),a=Hs(a),t(zs,Is)):t(Ls,Ms),i}var r,a,i=t(Ls,Ms),o=i.domain,l=10;return i.base=function(e){return arguments.length?(l=+e,n()):l},i.domain=function(e){return arguments.length?(o(e),n()):o()},i.ticks=function(e){var t,n=o(),i=n[0],s=n[n.length-1];(t=s<i)&&(f=i,i=s,s=f);var c,d,h,f=r(i),p=r(s),g=null==e?10:+e,v=[];if(!(l%1)&&p-f<g){if(f=Math.round(f)-1,p=Math.round(p)+1,i>0){for(;f<p;++f)for(d=1,c=a(f);d<l;++d)if(!((h=c*d)<i)){if(h>s)break;v.push(h)}}else for(;f<p;++f)for(d=l-1,c=a(f);d>=1;--d)if(!((h=c*d)<i)){if(h>s)break;v.push(h)}}else v=u(f,p,Math.min(p-f,g)).map(a);return t?v.reverse():v},i.tickFormat=function(t,n){if(null==n&&(n=10===l?".0e":","),"function"!=typeof n&&(n=e.format(n)),t===1/0)return n;null==t&&(t=10);var o=Math.max(1,l*t/i.ticks().length);return function(e){var t=e/a(Math.round(r(e)));return t*l<l-.5&&(t*=l),t<=o?n(e):""}},i.nice=function(){return o(Es(o(),{floor:function(e){return a(Math.floor(r(e)))},ceil:function(e){return a(Math.ceil(r(e)))}}))},i}function Ns(){var e=Bs(As()).domain([1,10]);return e.copy=function(){return Os(e,Ns()).base(e.base())},ms.apply(e,arguments),e}function Fs(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Vs(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Ws(e){var t=1,n=e(Fs(t),Vs(t));return n.constant=function(n){return arguments.length?e(Fs(t=+n),Vs(t)):t},Ts(n)}function Ys(){var e=Ws(As());return e.copy=function(){return Os(e,Ys()).constant(e.constant())},ms.apply(e,arguments)}function Us(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Gs(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Xs(e){return e<0?-e*e:e*e}function Zs(e){function t(){return 1===r?e(ws,ws):.5===r?e(Gs,Xs):e(Us(r),Us(1/r))}var n=e(ws,ws),r=1;return n.exponent=function(e){return arguments.length?(r=+e,t()):r},Ts(n)}function qs(){var e=Zs(As());return e.copy=function(){return Os(e,qs()).exponent(e.exponent())},ms.apply(e,arguments),e}function Qs(){return qs.apply(null,arguments).exponent(.5)}function Ks(e,t){return e.each(function(){var e=t.apply(this,arguments),n=_t(this);for(var r in e)n.attr(r,e[r])})}function $s(e,t){for(var n in t)e.attr(n,t[n]);return e}function Js(e){return("function"==typeof e?Ks:$s)(this,e)}function ec(e,t,n){return e.each(function(){var e=t.apply(this,arguments),r=_t(this);for(var a in e)r.style(a,e[a],n)})}function tc(e,t,n){for(var r in t)e.style(r,t[r],n);return e}function nc(e,t){return("function"==typeof e?ec:tc)(this,e,null==t?"":t)}function rc(e,t){return e.each(function(){var e=t.apply(this,arguments),n=_t(this);for(var r in e)n.property(r,e[r])})}function ac(e,t){for(var n in t)e.property(n,t[n]);return e}function ic(e){return("function"==typeof e?rc:ac)(this,e)}function oc(e,t){return e.each(function(){var n=t.apply(this,arguments),r=_t(this).transition(e);for(var a in n)r.attr(a,n[a])})}function lc(e,t){for(var n in t)e.attr(n,t[n]);return e}function sc(e){return("function"==typeof e?oc:lc)(this,e)}function cc(e,t,n){return e.each(function(){var r=t.apply(this,arguments),a=_t(this).transition(e);for(var i in r)a.style(i,r[i],n)})}function uc(e,t,n){for(var r in t)e.style(r,t[r],n);return e}function dc(e,t){return("function"==typeof e?cc:uc)(this,e,null==t?"":t)}function hc(e){return function(){return e}}function fc(e){return e>1?0:e<-1?yx:Math.acos(e)}function pc(e){return e>=1?mx:e<=-1?-mx:Math.asin(e)}function gc(e){return e.innerRadius}function vc(e){return e.outerRadius}function yc(e){return e.startAngle}function mc(e){return e.endAngle}function bc(e){return e&&e.padAngle}function xc(e,t,n,r,a,i,o,l){var s=n-e,c=r-t,u=o-a,d=l-i,h=(u*(t-i)-d*(e-a))/(d*s-u*c);return[e+h*s,t+h*c]}function wc(e,t,n,r,a,i,o){var l=e-n,s=t-r,c=(o?i:-i)/gx(l*l+s*s),u=c*s,d=-c*l,h=e+u,f=t+d,p=n+u,g=r+d,v=(h+p)/2,y=(f+g)/2,m=p-h,b=g-f,x=m*m+b*b,w=a-i,C=h*g-p*f,k=(b<0?-1:1)*gx(hx(0,w*w*x-C*C)),_=(C*b-m*k)/x,S=(-C*m-b*k)/x,O=(C*b+m*k)/x,A=(-C*m+b*k)/x,P=_-v,T=S-y,E=O-v,L=A-y;return P*P+T*T>E*E+L*L&&(_=O,S=A),{cx:_,cy:S,x01:-u,y01:-d,x11:_*(a/w-1),y11:S*(a/w-1)}}function Cc(){function e(){var e,c,u=+t.apply(this,arguments),d=+n.apply(this,arguments),h=i.apply(this,arguments)-mx,f=o.apply(this,arguments)-mx,p=cx(f-h),g=f>h;if(s||(s=e=Eo()),d<u&&(c=d,d=u,u=c),d>vx)if(p>bx-vx)s.moveTo(d*dx(h),d*px(h)),s.arc(0,0,d,h,f,!g),u>vx&&(s.moveTo(u*dx(f),u*px(f)),s.arc(0,0,u,f,h,g));else{var v,y,m=h,b=f,x=h,w=f,C=p,k=p,_=l.apply(this,arguments)/2,S=_>vx&&(a?+a.apply(this,arguments):gx(u*u+d*d)),O=fx(cx(d-u)/2,+r.apply(this,arguments)),A=O,P=O;if(S>vx){var T=pc(S/u*px(_)),E=pc(S/d*px(_));(C-=2*T)>vx?(T*=g?1:-1,x+=T,w-=T):(C=0,x=w=(h+f)/2),(k-=2*E)>vx?(E*=g?1:-1,m+=E,b-=E):(k=0,m=b=(h+f)/2)}var L=d*dx(m),M=d*px(m),z=u*dx(w),I=u*px(w);if(O>vx){var D=d*dx(b),R=d*px(b),j=u*dx(x),H=u*px(x);if(p<yx){var B=C>vx?xc(L,M,j,H,D,R,z,I):[z,I],N=L-B[0],F=M-B[1],V=D-B[0],W=R-B[1],Y=1/px(fc((N*V+F*W)/(gx(N*N+F*F)*gx(V*V+W*W)))/2),U=gx(B[0]*B[0]+B[1]*B[1]);A=fx(O,(u-U)/(Y-1)),P=fx(O,(d-U)/(Y+1))}}k>vx?P>vx?(v=wc(j,H,L,M,d,P,g),y=wc(D,R,z,I,d,P,g),s.moveTo(v.cx+v.x01,v.cy+v.y01),P<O?s.arc(v.cx,v.cy,P,ux(v.y01,v.x01),ux(y.y01,y.x01),!g):(s.arc(v.cx,v.cy,P,ux(v.y01,v.x01),ux(v.y11,v.x11),!g),s.arc(0,0,d,ux(v.cy+v.y11,v.cx+v.x11),ux(y.cy+y.y11,y.cx+y.x11),!g),s.arc(y.cx,y.cy,P,ux(y.y11,y.x11),ux(y.y01,y.x01),!g))):(s.moveTo(L,M),s.arc(0,0,d,m,b,!g)):s.moveTo(L,M),u>vx&&C>vx?A>vx?(v=wc(z,I,D,R,u,-A,g),y=wc(L,M,j,H,u,-A,g),s.lineTo(v.cx+v.x01,v.cy+v.y01),A<O?s.arc(v.cx,v.cy,A,ux(v.y01,v.x01),ux(y.y01,y.x01),!g):(s.arc(v.cx,v.cy,A,ux(v.y01,v.x01),ux(v.y11,v.x11),!g),s.arc(0,0,u,ux(v.cy+v.y11,v.cx+v.x11),ux(y.cy+y.y11,y.cx+y.x11),g),s.arc(y.cx,y.cy,A,ux(y.y11,y.x11),ux(y.y01,y.x01),!g))):s.arc(0,0,u,w,x,g):s.lineTo(z,I)}else s.moveTo(0,0);if(s.closePath(),e)return s=null,e+""||null}var t=gc,n=vc,r=hc(0),a=null,i=yc,o=mc,l=bc,s=null;return e.centroid=function(){var e=(+t.apply(this,arguments)+ +n.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-yx/2;return[dx(r)*e,px(r)*e]},e.innerRadius=function(n){return arguments.length?(t="function"==typeof n?n:hc(+n),e):t},e.outerRadius=function(t){return arguments.length?(n="function"==typeof t?t:hc(+t),e):n},e.cornerRadius=function(t){return arguments.length?(r="function"==typeof t?t:hc(+t),e):r},e.padRadius=function(t){return arguments.length?(a=null==t?null:"function"==typeof t?t:hc(+t),e):a},e.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:hc(+t),e):i},e.endAngle=function(t){return arguments.length?(o="function"==typeof t?t:hc(+t),e):o},e.padAngle=function(t){return arguments.length?(l="function"==typeof t?t:hc(+t),e):l},e.context=function(t){return arguments.length?(s=null==t?null:t,e):s},e}function kc(e){this._context=e}function _c(e){return new kc(e)}function Sc(e){return e[0]}function Oc(e){return e[1]}function Ac(){function e(e){var l,s,c,u=e.length,d=!1;for(null==a&&(o=i(c=Eo())),l=0;l<=u;++l)!(l<u&&r(s=e[l],l,e))===d&&((d=!d)?o.lineStart():o.lineEnd()),d&&o.point(+t(s,l,e),+n(s,l,e));if(c)return o=null,c+""||null}var t=Sc,n=Oc,r=hc(!0),a=null,i=_c,o=null;return e.x=function(n){return arguments.length?(t="function"==typeof n?n:hc(+n),e):t},e.y=function(t){return arguments.length?(n="function"==typeof t?t:hc(+t),e):n},e.defined=function(t){return arguments.length?(r="function"==typeof t?t:hc(!!t),e):r},e.curve=function(t){return arguments.length?(i=t,null!=a&&(o=i(a)),e):i},e.context=function(t){return arguments.length?(null==t?a=o=null:o=i(a=t),e):a},e}function Pc(){function e(e){var t,u,d,h,f,p=e.length,g=!1,v=new Array(p),y=new Array(p);for(null==l&&(c=s(f=Eo())),t=0;t<=p;++t){if(!(t<p&&o(h=e[t],t,e))===g)if(g=!g)u=t,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),d=t-1;d>=u;--d)c.point(v[d],y[d]);c.lineEnd(),c.areaEnd()}g&&(v[t]=+n(h,t,e),y[t]=+a(h,t,e),c.point(r?+r(h,t,e):v[t],i?+i(h,t,e):y[t]))}if(f)return c=null,f+""||null}function t(){return Ac().defined(o).curve(s).context(l)}var n=Sc,r=null,a=hc(0),i=Oc,o=hc(!0),l=null,s=_c,c=null;return e.x=function(t){return arguments.length?(n="function"==typeof t?t:hc(+t),r=null,e):n},e.x0=function(t){return arguments.length?(n="function"==typeof t?t:hc(+t),e):n},e.x1=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:hc(+t),e):r},e.y=function(t){return arguments.length?(a="function"==typeof t?t:hc(+t),i=null,e):a},e.y0=function(t){return arguments.length?(a="function"==typeof t?t:hc(+t),e):a},e.y1=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:hc(+t),e):i},e.lineX0=e.lineY0=function(){return t().x(n).y(a)},e.lineY1=function(){return t().x(n).y(i)},e.lineX1=function(){return t().x(r).y(a)},e.defined=function(t){return arguments.length?(o="function"==typeof t?t:hc(!!t),e):o},e.curve=function(t){return arguments.length?(s=t,null!=l&&(c=s(l)),e):s},e.context=function(t){return arguments.length?(null==t?l=c=null:c=s(l=t),e):l},e}function Tc(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function Ec(e){return e}function Lc(){function e(e){var l,s,c,u,d,h=e.length,f=0,p=new Array(h),g=new Array(h),v=+a.apply(this,arguments),y=Math.min(bx,Math.max(-bx,i.apply(this,arguments)-v)),m=Math.min(Math.abs(y)/h,o.apply(this,arguments)),b=m*(y<0?-1:1);for(l=0;l<h;++l)(d=g[p[l]=l]=+t(e[l],l,e))>0&&(f+=d);for(null!=n?p.sort(function(e,t){return n(g[e],g[t])}):null!=r&&p.sort(function(t,n){return r(e[t],e[n])}),l=0,c=f?(y-h*b)/f:0;l<h;++l,v=u)s=p[l],d=g[s],u=v+(d>0?d*c:0)+b,g[s]={data:e[s],index:l,value:d,startAngle:v,endAngle:u,padAngle:m};return g}var t=Ec,n=Tc,r=null,a=hc(0),i=hc(bx),o=hc(0);return e.value=function(n){return arguments.length?(t="function"==typeof n?n:hc(+n),e):t},e.sortValues=function(t){return arguments.length?(n=t,r=null,e):n},e.sort=function(t){return arguments.length?(r=t,n=null,e):r},e.startAngle=function(t){return arguments.length?(a="function"==typeof t?t:hc(+t),e):a},e.endAngle=function(t){return arguments.length?(i="function"==typeof t?t:hc(+t),e):i},e.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:hc(+t),e):o},e}function Mc(e){this._curve=e}function zc(e){function t(t){return new Mc(e(t))}return t._curve=e,t}function Ic(e){var t=e.curve;return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e.curve=function(e){return arguments.length?t(zc(e)):t()._curve},e}function Dc(){return Ic(Ac().curve(xx))}function Rc(){var e=Pc().curve(xx),t=e.curve,n=e.lineX0,r=e.lineX1,a=e.lineY0,i=e.lineY1;return e.angle=e.x,delete e.x,e.startAngle=e.x0,delete e.x0,e.endAngle=e.x1,delete e.x1,e.radius=e.y,delete e.y,e.innerRadius=e.y0,delete e.y0,e.outerRadius=e.y1,delete e.y1,e.lineStartAngle=function(){return Ic(n())},delete e.lineX0,e.lineEndAngle=function(){return Ic(r())},delete e.lineX1,e.lineInnerRadius=function(){return Ic(a())},delete e.lineY0,e.lineOuterRadius=function(){return Ic(i())},delete e.lineY1,e.curve=function(e){return arguments.length?t(zc(e)):t()._curve},e}function jc(e,t){return[(t=+t)*Math.cos(e-=Math.PI/2),t*Math.sin(e)]}function Hc(e){return e.source}function Bc(e){return e.target}function Nc(e){function t(){var t,l=wx.call(arguments),s=n.apply(this,l),c=r.apply(this,l);if(o||(o=t=Eo()),e(o,+a.apply(this,(l[0]=s,l)),+i.apply(this,l),+a.apply(this,(l[0]=c,l)),+i.apply(this,l)),t)return o=null,t+""||null}var n=Hc,r=Bc,a=Sc,i=Oc,o=null;return t.source=function(e){return arguments.length?(n=e,t):n},t.target=function(e){return arguments.length?(r=e,t):r},t.x=function(e){return arguments.length?(a="function"==typeof e?e:hc(+e),t):a},t.y=function(e){return arguments.length?(i="function"==typeof e?e:hc(+e),t):i},t.context=function(e){return arguments.length?(o=null==e?null:e,t):o},t}function Fc(e,t,n,r,a){e.moveTo(t,n),e.bezierCurveTo(t=(t+r)/2,n,t,a,r,a)}function Vc(e,t,n,r,a){e.moveTo(t,n),e.bezierCurveTo(t,n=(n+a)/2,r,n,r,a)}function Wc(){return Nc(Fc)}function Yc(){return Nc(Vc)}function Uc(){}function Gc(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function Xc(e,t){this._context=e,this._k=(1-t)/6}function Zc(e,t){this._context=e,this._k=(1-t)/6}function qc(e){this._context=e}function Qc(e){return new qc(e)}function Kc(e){return e<0?-1:1}function $c(e,t,n){var r=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(r||a<0&&-0),o=(n-e._y1)/(a||r<0&&-0),l=(i*a+o*r)/(r+a);return(Kc(i)+Kc(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function Jc(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function eu(e,t,n){var r=e._x0,a=e._y0,i=e._x1,o=e._y1,l=(i-r)/3;e._context.bezierCurveTo(r+l,a+l*t,i-l,o-l*n,i,o)}function tu(e){this._context=e}function nu(e){this._context=new ru(e)}function ru(e){this._context=e}function au(e){return new tu(e)}function iu(e){return new nu(e)}function ou(e,t){this._context=e,this._t=t}function lu(e){return new ou(e,0)}function su(e){return new ou(e,1)}function cu(e,t){if((a=e.length)>1)for(var n,r,a,i=1,o=e[t[0]],l=o.length;i<a;++i)for(r=o,o=e[t[i]],n=0;n<l;++n)o[n][1]+=o[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}function uu(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function du(e,t){return e[t]}function hu(){function e(e){var i,o,l=t.apply(this,arguments),s=e.length,c=l.length,u=new Array(c);for(i=0;i<c;++i){for(var d,h=l[i],f=u[i]=new Array(s),p=0;p<s;++p)f[p]=d=[0,+a(e[p],h,p,e)],d.data=e[p];f.key=h}for(i=0,o=n(u);i<c;++i)u[o[i]].index=i;return r(u,o),u}var t=hc([]),n=uu,r=cu,a=du;return e.keys=function(n){return arguments.length?(t="function"==typeof n?n:hc(wx.call(n)),e):t},e.value=function(t){return arguments.length?(a="function"==typeof t?t:hc(+t),e):a},e.order=function(t){return arguments.length?(n=null==t?uu:"function"==typeof t?t:hc(wx.call(t)),e):n},e.offset=function(t){return arguments.length?(r=null==t?cu:t,e):r},e}function fu(e){return function(){return e}}function pu(e,t,n){this.target=e,this.type=t,this.transform=n}function gu(e,t,n){this.k=e,this.x=t,this.y=n}function vu(e){for(;!e.__zoom;)if(!(e=e.parentNode))return _x;return e.__zoom}function yu(){e.event.stopImmediatePropagation()}function mu(){e.event.preventDefault(),e.event.stopImmediatePropagation()}function bu(){return!e.event.ctrlKey&&!e.event.button}function xu(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function wu(){return this.__zoom||_x}function Cu(){return-e.event.deltaY*(1===e.event.deltaMode?.05:e.event.deltaMode?1:.002)}function ku(){return navigator.maxTouchPoints||"ontouchstart"in this}function _u(e,t,n){var r=e.invertX(t[0][0])-n[0][0],a=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(a>r?(r+a)/2:Math.min(0,r)||Math.max(0,a),o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o))}function Su(){function t(e){e.property("__zoom",wu).on("wheel.zoom",s).on("mousedown.zoom",c).on("dblclick.zoom",u).filter(x).on("touchstart.zoom",d).on("touchmove.zoom",h).on("touchend.zoom touchcancel.zoom",f).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function n(e,t){return t=Math.max(w[0],Math.min(w[1],t)),t===e.k?e:new gu(t,e.x,e.y)}function r(e,t,n){var r=t[0]-n[0]*e.k,a=t[1]-n[1]*e.k;return r===e.x&&a===e.y?e:new gu(e.k,r,a)}function a(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function i(e,t,n){e.on("start.zoom",function(){o(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){o(this,arguments).end()}).tween("zoom",function(){var e=this,r=arguments,i=o(e,r),l=y.apply(e,r),s=null==n?a(l):"function"==typeof n?n.apply(e,r):n,c=Math.max(l[1][0]-l[0][0],l[1][1]-l[0][1]),u=e.__zoom,d="function"==typeof t?t.apply(e,r):t,h=_(u.invert(s).concat(c/u.k),d.invert(s).concat(c/d.k));return function(e){if(1===e)e=d;else{var t=h(e),n=c/t[2];e=new gu(n,s[0]-t[0]*n,s[1]-t[1]*n)}i.zoom(null,e)}})}function o(e,t,n){return!n&&e.__zooming||new l(e,t)}function l(e,t){this.that=e,this.args=t,this.active=0,this.extent=y.apply(e,t),this.taps=0}function s(){function e(){t.wheel=null,t.end()}if(v.apply(this,arguments)){var t=o(this,arguments),a=this.__zoom,i=Math.max(w[0],Math.min(w[1],a.k*Math.pow(2,b.apply(this,arguments)))),l=ne(this);if(t.wheel)t.mouse[0][0]===l[0]&&t.mouse[0][1]===l[1]||(t.mouse[1]=a.invert(t.mouse[0]=l)),clearTimeout(t.wheel);else{if(a.k===i)return;t.mouse=[l,a.invert(l)],lr(this),t.start()}mu(),t.wheel=setTimeout(e,A),t.zoom("mouse",m(r(n(a,i),t.mouse[0],t.mouse[1]),t.extent,C))}}function c(){function t(){if(mu(),!a.moved){var t=e.event.clientX-s,n=e.event.clientY-c;a.moved=t*t+n*n>P}a.zoom("mouse",m(r(a.that.__zoom,a.mouse[0]=ne(a.that),a.mouse[1]),a.extent,C))}function n(){i.on("mousemove.zoom mouseup.zoom",null),Lt(e.event.view,a.moved),mu(),a.end()}if(!g&&v.apply(this,arguments)){var a=o(this,arguments,!0),i=_t(e.event.view).on("mousemove.zoom",t,!0).on("mouseup.zoom",n,!0),l=ne(this),s=e.event.clientX,c=e.event.clientY;Et(e.event.view),yu(),a.mouse=[l,this.__zoom.invert(l)],lr(this),a.start()}}function u(){if(v.apply(this,arguments)){var a=this.__zoom,o=ne(this),l=a.invert(o),s=a.k*(e.event.shiftKey?.5:2),c=m(r(n(a,s),o,l),y.apply(this,arguments),C);mu(),k>0?_t(this).transition().duration(k).call(i,c,o):_t(this).call(t.transform,c)}}function d(){if(v.apply(this,arguments)){var t,n,r,a,i=e.event.touches,l=i.length,s=o(this,arguments,e.event.changedTouches.length===l);for(yu(),n=0;n<l;++n)r=i[n],a=Ot(this,i,r.identifier),a=[a,this.__zoom.invert(a),r.identifier],s.touch0?s.touch1||s.touch0[2]===a[2]||(s.touch1=a,s.taps=0):(s.touch0=a,t=!0,s.taps=1+!!p);p&&(p=clearTimeout(p)),t&&(s.taps<2&&(p=setTimeout(function(){p=null},O)),lr(this),s.start())}}function h(){if(this.__zooming){var t,a,i,l,s=o(this,arguments),c=e.event.changedTouches,u=c.length;for(mu(),p&&(p=clearTimeout(p)),s.taps=0,t=0;t<u;++t)a=c[t],i=Ot(this,c,a.identifier),s.touch0&&s.touch0[2]===a.identifier?s.touch0[0]=i:s.touch1&&s.touch1[2]===a.identifier&&(s.touch1[0]=i);if(a=s.that.__zoom,s.touch1){var d=s.touch0[0],h=s.touch0[1],f=s.touch1[0],g=s.touch1[1],v=(v=f[0]-d[0])*v+(v=f[1]-d[1])*v,y=(y=g[0]-h[0])*y+(y=g[1]-h[1])*y;a=n(a,Math.sqrt(v/y)),i=[(d[0]+f[0])/2,(d[1]+f[1])/2],l=[(h[0]+g[0])/2,(h[1]+g[1])/2]}else{if(!s.touch0)return;i=s.touch0[0],l=s.touch0[1]}s.zoom("touch",m(r(a,i,l),s.extent,C))}}function f(){if(this.__zooming){var t,n,r=o(this,arguments),a=e.event.changedTouches,i=a.length;for(yu(),g&&clearTimeout(g),g=setTimeout(function(){g=null},O),t=0;t<i;++t)n=a[t],r.touch0&&r.touch0[2]===n.identifier?delete r.touch0:r.touch1&&r.touch1[2]===n.identifier&&delete r.touch1;if(r.touch1&&!r.touch0&&(r.touch0=r.touch1,delete r.touch1),r.touch0)r.touch0[1]=this.__zoom.invert(r.touch0[0]);else if(r.end(),2===r.taps){var l=_t(this).on("dblclick.zoom");l&&l.apply(this,arguments)}}}var p,g,v=bu,y=xu,m=_u,b=Cu,x=ku,w=[0,1/0],C=[[-1/0,-1/0],[1/0,1/0]],k=250,_=Bn,S=R("start","zoom","end"),O=500,A=150,P=0;return t.transform=function(e,t,n){var r=e.selection?e.selection():e;r.property("__zoom",wu),e!==r?i(e,t,n):r.interrupt().each(function(){o(this,arguments).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()})},t.scaleBy=function(e,n,r){t.scaleTo(e,function(){return this.__zoom.k*("function"==typeof n?n.apply(this,arguments):n)},r)},t.scaleTo=function(e,i,o){t.transform(e,function(){var e=y.apply(this,arguments),t=this.__zoom,l=null==o?a(e):"function"==typeof o?o.apply(this,arguments):o,s=t.invert(l),c="function"==typeof i?i.apply(this,arguments):i;return m(r(n(t,c),l,s),e,C)},o)},t.translateBy=function(e,n,r){t.transform(e,function(){return m(this.__zoom.translate("function"==typeof n?n.apply(this,arguments):n,"function"==typeof r?r.apply(this,arguments):r),y.apply(this,arguments),C)})},t.translateTo=function(e,n,r,i){t.transform(e,function(){var e=y.apply(this,arguments),t=this.__zoom,o=null==i?a(e):"function"==typeof i?i.apply(this,arguments):i;return m(_x.translate(o[0],o[1]).scale(t.k).translate("function"==typeof n?-n.apply(this,arguments):-n,"function"==typeof r?-r.apply(this,arguments):-r),e,C)},i)},l.prototype={start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){J(new pu(t,e,this.that.__zoom),S.apply,S,[e,this.that,this.args])}},t.wheelDelta=function(e){return arguments.length?(b="function"==typeof e?e:fu(+e),t):b},t.filter=function(e){return arguments.length?(v="function"==typeof e?e:fu(!!e),t):v},t.touchable=function(e){return arguments.length?(x="function"==typeof e?e:fu(!!e),t):x},t.extent=function(e){return arguments.length?(y="function"==typeof e?e:fu([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),t):y},t.scaleExtent=function(e){return arguments.length?(w[0]=+e[0],w[1]=+e[1],t):[w[0],w[1]]},t.translateExtent=function(e){return arguments.length?(C[0][0]=+e[0][0],C[1][0]=+e[1][0],C[0][1]=+e[0][1],C[1][1]=+e[1][1],t):[[C[0][0],C[0][1]],[C[1][0],C[1][1]]]},t.constrain=function(e){return arguments.length?(m=e,t):m},t.duration=function(e){return arguments.length?(k=+e,t):k},t.interpolate=function(e){return arguments.length?(_=e,t):_},t.on=function(){var e=S.on.apply(S,arguments);return e===S?t:e},t.clickDistance=function(e){return arguments.length?(P=(e=+e)*e,t):Math.sqrt(P)},t}function Ou(e){for(var t,n=-1,r=e.length,a=e[r-1],i=0;++n<r;)t=a,a=e[n],i+=t[1]*a[0]-t[0]*a[1];return i/2}function Au(e){for(var t,n,r=-1,a=e.length,i=0,o=0,l=e[a-1],s=0;++r<a;)t=l,l=e[r],s+=n=t[0]*l[1]-l[0]*t[1],i+=(t[0]+l[0])*n,o+=(t[1]+l[1])*n;return s*=3,[i/s,o/s]}function Pu(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function Tu(e,t){return e[0]-t[0]||e[1]-t[1]}function Eu(e){for(var t=e.length,n=[0,1],r=2,a=2;a<t;++a){for(;r>1&&Pu(e[n[r-2]],e[n[r-1]],e[a])<=0;)--r;n[r++]=a}return n.slice(0,r)}function Lu(e){if((n=e.length)<3)return null;var t,n,r=new Array(n),a=new Array(n);for(t=0;t<n;++t)r[t]=[+e[t][0],+e[t][1],t];for(r.sort(Tu),t=0;t<n;++t)a[t]=[r[t][0],-r[t][1]];var i=Eu(r),o=Eu(a),l=o[0]===i[0],s=o[o.length-1]===i[i.length-1],c=[];for(t=i.length-1;t>=0;--t)c.push(e[r[i[t]][2]]);for(t=+l;t<o.length-s;++t)c.push(e[r[o[t]][2]]);return c}function Mu(e,t){for(var n,r,a=e.length,i=e[a-1],o=t[0],l=t[1],s=i[0],c=i[1],u=!1,d=0;d<a;++d)i=e[d],n=i[0],r=i[1],r>l!=c>l&&o<(s-n)*(l-r)/(c-r)+n&&(u=!u),s=n,c=r;return u}function zu(e){for(var t,n,r=-1,a=e.length,i=e[a-1],o=i[0],l=i[1],s=0;++r<a;)t=o,n=l,i=e[r],o=i[0],l=i[1],t-=o,n-=l,s+=Math.sqrt(t*t+n*n);return s}function Iu(){return new Du}function Du(){this.reset()}function Ru(e,t,n){var r=e.s=t+n,a=r-t,i=r-a;e.t=t-i+(n-a)}function ju(e){return e>1?0:e<-1?iw:Math.acos(e)}function Hu(e){return e>1?ow:e<-1?-ow:Math.asin(e)}function Bu(e){return(e=bw(e/2))*e}function Nu(){}function Fu(e,t){e&&_w.hasOwnProperty(e.type)&&_w[e.type](e,t)}function Vu(e,t,n){var r,a=-1,i=e.length-n;for(t.lineStart();++a<i;)r=e[a],t.point(r[0],r[1],r[2]);t.lineEnd()}function Wu(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)Vu(e[n],t,1);t.polygonEnd()}function Yu(e,t){e&&kw.hasOwnProperty(e.type)?kw[e.type](e,t):Fu(e,t)}function Uu(){Aw.point=Xu}function Gu(){Zu(Sx,Ox)}function Xu(e,t){Aw.point=Zu,Sx=e,Ox=t,e*=uw,t*=uw,Ax=e,Px=pw(t=t/2+lw),Tx=bw(t)}function Zu(e,t){e*=uw,t*=uw,t=t/2+lw;var n=e-Ax,r=n>=0?1:-1,a=r*n,i=pw(t),o=bw(t),l=Tx*o,s=Px*i+l*pw(a),c=l*r*bw(a);Sw.add(fw(c,s)),Ax=e,Px=i,Tx=o}function qu(e){return Ow.reset(),Yu(e,Aw),2*Ow}function Qu(e){return[fw(e[1],e[0]),Hu(e[2])]}function Ku(e){var t=e[0],n=e[1],r=pw(n);return[r*pw(t),r*bw(t),bw(n)]}function $u(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Ju(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function ed(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function td(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function nd(e){var t=ww(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function rd(e,t){Hx.push(Bx=[Ex=e,Mx=e]),t<Lx&&(Lx=t),t>zx&&(zx=t)}function ad(e,t){var n=Ku([e*uw,t*uw]);if(jx){var r=Ju(jx,n),a=[r[1],-r[0],0],i=Ju(a,r);nd(i),i=Qu(i);var o,l=e-Ix,s=l>0?1:-1,c=i[0]*cw*s,u=dw(l)>180;u^(s*Ix<c&&c<s*e)?(o=i[1]*cw)>zx&&(zx=o):(c=(c+360)%360-180,u^(s*Ix<c&&c<s*e)?(o=-i[1]*cw)<Lx&&(Lx=o):(t<Lx&&(Lx=t),t>zx&&(zx=t))),u?e<Ix?ud(Ex,e)>ud(Ex,Mx)&&(Mx=e):ud(e,Mx)>ud(Ex,Mx)&&(Ex=e):Mx>=Ex?(e<Ex&&(Ex=e),e>Mx&&(Mx=e)):e>Ix?ud(Ex,e)>ud(Ex,Mx)&&(Mx=e):ud(e,Mx)>ud(Ex,Mx)&&(Ex=e)}else Hx.push(Bx=[Ex=e,Mx=e]);t<Lx&&(Lx=t),t>zx&&(zx=t),jx=n,Ix=e}function id(){Tw.point=ad}function od(){Bx[0]=Ex,Bx[1]=Mx,Tw.point=rd,jx=null}function ld(e,t){if(jx){var n=e-Ix;Pw.add(dw(n)>180?n+(n>0?360:-360):n)}else Dx=e,Rx=t;Aw.point(e,t),ad(e,t)}function sd(){Aw.lineStart()}function cd(){ld(Dx,Rx),Aw.lineEnd(),dw(Pw)>rw&&(Ex=-(Mx=180)),Bx[0]=Ex,Bx[1]=Mx,jx=null}function ud(e,t){return(t-=e)<0?t+360:t}function dd(e,t){return e[0]-t[0]}function hd(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function fd(e){var t,n,r,a,i,o,l;if(zx=Mx=-(Ex=Lx=1/0),Hx=[],Yu(e,Tw),n=Hx.length){for(Hx.sort(dd),t=1,r=Hx[0],i=[r];t<n;++t)a=Hx[t],hd(r,a[0])||hd(r,a[1])?(ud(r[0],a[1])>ud(r[0],r[1])&&(r[1]=a[1]),ud(a[0],r[1])>ud(r[0],r[1])&&(r[0]=a[0])):i.push(r=a);for(o=-1/0,n=i.length-1,t=0,r=i[n];t<=n;r=a,++t)a=i[t],(l=ud(r[1],a[0]))>o&&(o=l,Ex=a[0],Mx=r[1])}return Hx=Bx=null,Ex===1/0||Lx===1/0?[[NaN,NaN],[NaN,NaN]]:[[Ex,Lx],[Mx,zx]]}function pd(e,t){e*=uw,t*=uw;var n=pw(t);gd(n*pw(e),n*bw(e),bw(t))}function gd(e,t,n){++Nx,Vx+=(e-Vx)/Nx,Wx+=(t-Wx)/Nx,Yx+=(n-Yx)/Nx}function vd(){Ew.point=yd}function yd(e,t){e*=uw,t*=uw;var n=pw(t);Jx=n*pw(e),ew=n*bw(e),tw=bw(t),Ew.point=md,gd(Jx,ew,tw)}function md(e,t){e*=uw,t*=uw;var n=pw(t),r=n*pw(e),a=n*bw(e),i=bw(t),o=fw(ww((o=ew*i-tw*a)*o+(o=tw*r-Jx*i)*o+(o=Jx*a-ew*r)*o),Jx*r+ew*a+tw*i);Fx+=o,Ux+=o*(Jx+(Jx=r)),Gx+=o*(ew+(ew=a)),Xx+=o*(tw+(tw=i)),gd(Jx,ew,tw)}function bd(){Ew.point=pd}function xd(){Ew.point=Cd}function wd(){kd(Kx,$x),Ew.point=pd}function Cd(e,t){Kx=e,$x=t,e*=uw,t*=uw,Ew.point=kd;var n=pw(t);Jx=n*pw(e),ew=n*bw(e),tw=bw(t),gd(Jx,ew,tw)}function kd(e,t){e*=uw,t*=uw;var n=pw(t),r=n*pw(e),a=n*bw(e),i=bw(t),o=ew*i-tw*a,l=tw*r-Jx*i,s=Jx*a-ew*r,c=ww(o*o+l*l+s*s),u=Hu(c),d=c&&-u/c;Zx+=d*o,qx+=d*l,Qx+=d*s,Fx+=u,Ux+=u*(Jx+(Jx=r)),Gx+=u*(ew+(ew=a)),Xx+=u*(tw+(tw=i)),gd(Jx,ew,tw)}function _d(e){Nx=Fx=Vx=Wx=Yx=Ux=Gx=Xx=Zx=qx=Qx=0,Yu(e,Ew);var t=Zx,n=qx,r=Qx,a=t*t+n*n+r*r;return a<aw&&(t=Ux,n=Gx,r=Xx,Fx<rw&&(t=Vx,n=Wx,r=Yx),(a=t*t+n*n+r*r)<aw)?[NaN,NaN]:[fw(n,t)*cw,Hu(r/ww(a))*cw]}function Sd(e){return function(){return e}}function Od(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return(n=t.invert(n,r))&&e.invert(n[0],n[1])}),n}function Ad(e,t){return[e>iw?e-sw:e<-iw?e+sw:e,t]}function Pd(e,t,n){return(e%=sw)?t||n?Od(Ed(e),Ld(t,n)):Ed(e):t||n?Ld(t,n):Ad}function Td(e){return function(t,n){return t+=e,[t>iw?t-sw:t<-iw?t+sw:t,n]}}function Ed(e){var t=Td(e);return t.invert=Td(-e),t}function Ld(e,t){function n(e,t){var n=pw(t),l=pw(e)*n,s=bw(e)*n,c=bw(t),u=c*r+l*a;return[fw(s*i-u*o,l*r-c*a),Hu(u*i+s*o)]}var r=pw(e),a=bw(e),i=pw(t),o=bw(t);return n.invert=function(e,t){var n=pw(t),l=pw(e)*n,s=bw(e)*n,c=bw(t),u=c*i-s*o;return[fw(s*i+c*o,l*r+u*a),Hu(u*r-l*a)]},n}function Md(e){function t(t){return t=e(t[0]*uw,t[1]*uw),t[0]*=cw,t[1]*=cw,t}return e=Pd(e[0]*uw,e[1]*uw,e.length>2?e[2]*uw:0),t.invert=function(t){return t=e.invert(t[0]*uw,t[1]*uw),t[0]*=cw,t[1]*=cw,t},t}function zd(e,t,n,r,a,i){if(n){var o=pw(t),l=bw(t),s=r*n;null==a?(a=t+r*sw,i=t-s/2):(a=Id(o,a),i=Id(o,i),(r>0?a<i:a>i)&&(a+=r*sw));for(var c,u=a;r>0?u>i:u<i;u-=s)c=Qu([o,-l*pw(u),-l*bw(u)]),e.point(c[0],c[1])}}function Id(e,t){t=Ku(t),t[0]-=e,nd(t);var n=ju(-t[1]);return((-t[2]<0?-n:n)+sw-rw)%sw}function Dd(){function e(e,t){n.push(e=r(e,t)),e[0]*=cw,e[1]*=cw}function t(){var e=a.apply(this,arguments),t=i.apply(this,arguments)*uw,s=o.apply(this,arguments)*uw;return n=[],r=Pd(-e[0]*uw,-e[1]*uw,0).invert,zd(l,t,s,1),e={type:"Polygon",coordinates:[n]},n=r=null,e}var n,r,a=Sd([0,0]),i=Sd(90),o=Sd(6),l={point:e};return t.center=function(e){return arguments.length?(a="function"==typeof e?e:Sd([+e[0],+e[1]]),t):a},t.radius=function(e){return arguments.length?(i="function"==typeof e?e:Sd(+e),t):i},t.precision=function(e){return arguments.length?(o="function"==typeof e?e:Sd(+e),t):o},t}function Rd(){var e,t=[];return{point:function(t,n){e.push([t,n])},lineStart:function(){t.push(e=[])},lineEnd:Nu,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function jd(e,t){return dw(e[0]-t[0])<rw&&dw(e[1]-t[1])<rw}function Hd(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Bd(e,t,n,r,a){var i,o,l=[],s=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n,r=e[0],o=e[t];if(jd(r,o)){for(a.lineStart(),i=0;i<t;++i)a.point((r=e[i])[0],r[1]);return void a.lineEnd()}l.push(n=new Hd(r,e,null,!0)),s.push(n.o=new Hd(r,null,n,!1)),l.push(n=new Hd(o,e,null,!1)),s.push(n.o=new Hd(o,null,n,!0))}}),l.length){for(s.sort(t),Nd(l),Nd(s),i=0,o=s.length;i<o;++i)s[i].e=n=!n;for(var c,u,d=l[0];;){for(var h=d,f=!0;h.v;)if((h=h.n)===d)return;c=h.z,a.lineStart();do{if(h.v=h.o.v=!0,h.e){if(f)for(i=0,o=c.length;i<o;++i)a.point((u=c[i])[0],u[1]);else r(h.x,h.n.x,1,a);h=h.n}else{if(f)for(c=h.p.z,i=c.length-1;i>=0;--i)a.point((u=c[i])[0],u[1]);else r(h.x,h.p.x,-1,a);h=h.p}h=h.o,c=h.z,f=!f}while(!h.v);a.lineEnd()}}}function Nd(e){if(t=e.length){for(var t,n,r=0,a=e[0];++r<t;)a.n=n=e[r],n.p=a,a=n;a.n=n=e[0],n.p=a}}function Fd(e,t){var n=t[0],r=t[1],a=bw(r),i=[bw(n),-pw(n),0],o=0,l=0;Vw.reset(),1===a?r=ow+rw:-1===a&&(r=-ow-rw);for(var s=0,c=e.length;s<c;++s)if(d=(u=e[s]).length)for(var u,d,h=u[d-1],f=h[0],p=h[1]/2+lw,g=bw(p),v=pw(p),y=0;y<d;++y,f=b,g=w,v=C,h=m){var m=u[y],b=m[0],x=m[1]/2+lw,w=bw(x),C=pw(x),k=b-f,_=k>=0?1:-1,S=_*k,O=S>iw,A=g*w;if(Vw.add(fw(A*_*bw(S),v*C+A*pw(S))),o+=O?k+_*sw:k,O^f>=n^b>=n){var P=Ju(Ku(h),Ku(m));nd(P);var T=Ju(i,P);nd(T);var E=(O^k>=0?-1:1)*Hu(T[2]);(r>E||r===E&&(P[0]||P[1]))&&(l+=O^k>=0?1:-1)}}return(o<-rw||o<rw&&Vw<-rw)^1&l}function Vd(e,t,n,r){return function(a){function i(t,n){e(t,n)&&a.point(t,n)}function o(e,t){v.point(e,t)}function l(){x.point=o,v.lineStart()}function s(){x.point=i,v.lineEnd()}function c(e,t){p.push([e,t]),m.point(e,t)}function u(){m.lineStart(),p=[]}function d(){c(p[0][0],p[0][1]),m.lineEnd();var e,t,n,r,i=m.clean(),o=y.result(),l=o.length;if(p.pop(),h.push(p),p=null,l)if(1&i){if(n=o[0],(t=n.length-1)>0){for(b||(a.polygonStart(),b=!0),a.lineStart(),e=0;e<t;++e)a.point((r=n[e])[0],r[1]);a.lineEnd()}}else l>1&&2&i&&o.push(o.pop().concat(o.shift())),f.push(o.filter(Wd))}var h,f,p,v=t(a),y=Rd(),m=t(y),b=!1,x={point:i,lineStart:l,lineEnd:s,polygonStart:function(){x.point=c,x.lineStart=u,x.lineEnd=d,f=[],h=[]},polygonEnd:function(){x.point=i,x.lineStart=l,x.lineEnd=s,f=g(f);var e=Fd(h,r);f.length?(b||(a.polygonStart(),b=!0),Bd(f,Yd,e,n,a)):e&&(b||(a.polygonStart(),b=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),b&&(a.polygonEnd(),b=!1),f=h=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}};return x}}function Wd(e){return e.length>1}function Yd(e,t){return((e=e.x)[0]<0?e[1]-ow-rw:ow-e[1])-((t=t.x)[0]<0?t[1]-ow-rw:ow-t[1])}function Ud(e){var t,n=NaN,r=NaN,a=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(i,o){var l=i>0?iw:-iw,s=dw(i-n);dw(s-iw)<rw?(e.point(n,r=(r+o)/2>0?ow:-ow),e.point(a,r),e.lineEnd(),e.lineStart(),e.point(l,r),e.point(i,r),t=0):a!==l&&s>=iw&&(dw(n-a)<rw&&(n-=a*rw),dw(i-l)<rw&&(i-=l*rw),r=Gd(n,r,i,o),e.point(a,r),e.lineEnd(),e.lineStart(),e.point(l,r),t=0),e.point(n=i,r=o),a=l},lineEnd:function(){e.lineEnd(),n=r=NaN},clean:function(){return 2-t}}}function Gd(e,t,n,r){var a,i,o=bw(e-n);return dw(o)>rw?hw((bw(t)*(i=pw(r))*bw(n)-bw(r)*(a=pw(t))*bw(e))/(a*i*o)):(t+r)/2}function Xd(e,t,n,r){var a;if(null==e)a=n*ow,r.point(-iw,a),r.point(0,a),r.point(iw,a),r.point(iw,0),r.point(iw,-a),r.point(0,-a),r.point(-iw,-a),r.point(-iw,0),r.point(-iw,a);else if(dw(e[0]-t[0])>rw){var i=e[0]<t[0]?iw:-iw;a=n*i/2,r.point(-i,a),r.point(0,a),r.point(i,a)}else r.point(t[0],t[1])}function Zd(e){function t(t,n,r,a){zd(a,e,l,r,t,n)}function n(e,t){return pw(e)*pw(t)>o}function r(e){var t,r,o,l,u;return{lineStart:function(){l=o=!1,u=1},point:function(d,h){var f,p=[d,h],g=n(d,h),v=s?g?0:i(d,h):g?i(d+(d<0?iw:-iw),h):0;if(!t&&(l=o=g)&&e.lineStart(),g!==o&&(!(f=a(t,p))||jd(t,f)||jd(p,f))&&(p[0]+=rw,p[1]+=rw,g=n(p[0],p[1])),g!==o)u=0,g?(e.lineStart(),f=a(p,t),e.point(f[0],f[1])):(f=a(t,p),e.point(f[0],f[1]),e.lineEnd()),t=f;else if(c&&t&&s^g){var y;v&r||!(y=a(p,t,!0))||(u=0,s?(e.lineStart(),e.point(y[0][0],y[0][1]),e.point(y[1][0],y[1][1]),e.lineEnd()):(e.point(y[1][0],y[1][1]),e.lineEnd(),e.lineStart(),e.point(y[0][0],y[0][1])))}!g||t&&jd(t,p)||e.point(p[0],p[1]),t=p,o=g,r=v},lineEnd:function(){o&&e.lineEnd(),t=null},clean:function(){return u|(l&&o)<<1}}}function a(e,t,n){var r=Ku(e),a=Ku(t),i=[1,0,0],l=Ju(r,a),s=$u(l,l),c=l[0],u=s-c*c;if(!u)return!n&&e;var d=o*s/u,h=-o*c/u,f=Ju(i,l),p=td(i,d);ed(p,td(l,h));var g=f,v=$u(p,g),y=$u(g,g),m=v*v-y*($u(p,p)-1);if(!(m<0)){var b=ww(m),x=td(g,(-v-b)/y);if(ed(x,p),x=Qu(x),!n)return x;var w,C=e[0],k=t[0],_=e[1],S=t[1];k<C&&(w=C,C=k,k=w);var O=k-C,A=dw(O-iw)<rw,P=A||O<rw;if(!A&&S<_&&(w=_,_=S,S=w),P?A?_+S>0^x[1]<(dw(x[0]-C)<rw?_:S):_<=x[1]&&x[1]<=S:O>iw^(C<=x[0]&&x[0]<=k)){var T=td(g,(-v+b)/y);return ed(T,p),[x,Qu(T)]}}}function i(t,n){var r=s?e:iw-e,a=0;return t<-r?a|=1:t>r&&(a|=2),n<-r?a|=4:n>r&&(a|=8),a}var o=pw(e),l=6*uw,s=o>0,c=dw(o)>rw;return Vd(n,r,t,s?[0,-e]:[-iw,e-iw])}function qd(e,t,n,r,a,i){var o,l=e[0],s=e[1],c=t[0],u=t[1],d=0,h=1,f=c-l,p=u-s;if(o=n-l,f||!(o>0)){if(o/=f,f<0){if(o<d)return;o<h&&(h=o)}else if(f>0){if(o>h)return;o>d&&(d=o)}if(o=a-l,f||!(o<0)){if(o/=f,f<0){if(o>h)return;o>d&&(d=o)}else if(f>0){if(o<d)return;o<h&&(h=o)}if(o=r-s,p||!(o>0)){if(o/=p,p<0){if(o<d)return;o<h&&(h=o)}else if(p>0){if(o>h)return;o>d&&(d=o)}if(o=i-s,p||!(o<0)){if(o/=p,p<0){if(o>h)return;o>d&&(d=o)}else if(p>0){if(o<d)return;o<h&&(h=o)}return d>0&&(e[0]=l+d*f,e[1]=s+d*p),h<1&&(t[0]=l+h*f,t[1]=s+h*p),!0}}}}}function Qd(e,t,n,r){function a(a,i){return e<=a&&a<=n&&t<=i&&i<=r}function i(a,i,l,c){var u=0,d=0;if(null==a||(u=o(a,l))!==(d=o(i,l))||s(a,i)<0^l>0){do c.point(0===u||3===u?e:n,u>1?r:t);while((u=(u+l+4)%4)!==d)}else c.point(i[0],i[1])}function o(r,a){return dw(r[0]-e)<rw?a>0?0:3:dw(r[0]-n)<rw?a>0?2:1:dw(r[1]-t)<rw?a>0?1:0:a>0?3:2}function l(e,t){return s(e.x,t.x)}function s(e,t){var n=o(e,1),r=o(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(o){function s(e,t){a(e,t)&&A.point(e,t)}function c(){for(var t=0,n=0,a=y.length;n<a;++n)for(var i,o,l=y[n],s=1,c=l.length,u=l[0],d=u[0],h=u[1];s<c;++s)i=d,o=h,u=l[s],d=u[0],h=u[1],o<=r?h>r&&(d-i)*(r-o)>(h-o)*(e-i)&&++t:h<=r&&(d-i)*(r-o)<(h-o)*(e-i)&&--t;return t}function u(){A=P,v=[],y=[],O=!0}function d(){var e=c(),t=O&&e,n=(v=g(v)).length;(t||n)&&(o.polygonStart(),t&&(o.lineStart(),i(null,null,1,o),o.lineEnd()),n&&Bd(v,l,e,i,o),o.polygonEnd()),A=o,v=y=m=null}function h(){T.point=p,y&&y.push(m=[]),S=!0,_=!1,C=k=NaN}function f(){v&&(p(b,x),w&&_&&P.rejoin(),v.push(P.result())),T.point=s,_&&A.lineEnd()}function p(i,o){var l=a(i,o);if(y&&m.push([i,o]),S)b=i,x=o,w=l,S=!1,l&&(A.lineStart(),A.point(i,o));else if(l&&_)A.point(i,o);else{var s=[C=Math.max(Uw,Math.min(Yw,C)),k=Math.max(Uw,Math.min(Yw,k))],c=[i=Math.max(Uw,Math.min(Yw,i)),o=Math.max(Uw,Math.min(Yw,o))];qd(s,c,e,t,n,r)?(_||(A.lineStart(),A.point(s[0],s[1])),A.point(c[0],c[1]),l||A.lineEnd(),O=!1):l&&(A.lineStart(),A.point(i,o),O=!1)}C=i,k=o,_=l}var v,y,m,b,x,w,C,k,_,S,O,A=o,P=Rd(),T={point:s,lineStart:h,lineEnd:f,polygonStart:u,polygonEnd:d};return T}}function Kd(){var e,t,n,r=0,a=0,i=960,o=500;return n={stream:function(n){return e&&t===n?e:e=Qd(r,a,i,o)(t=n)},extent:function(l){return arguments.length?(r=+l[0][0],a=+l[0][1],i=+l[1][0],o=+l[1][1],e=t=null,n):[[r,a],[i,o]]}}}function $d(){Xw.point=eh,Xw.lineEnd=Jd}function Jd(){Xw.point=Xw.lineEnd=Nu}function eh(e,t){e*=uw,t*=uw,Lw=e,Mw=bw(t),zw=pw(t),Xw.point=th}function th(e,t){e*=uw,t*=uw;var n=bw(t),r=pw(t),a=dw(e-Lw),i=pw(a),o=bw(a),l=r*o,s=zw*n-Mw*r*i,c=Mw*n+zw*r*i;Gw.add(fw(ww(l*l+s*s),c)),Lw=e,Mw=n,zw=r}function nh(e){return Gw.reset(),Yu(e,Xw),+Gw}function rh(e,t){return Zw[0]=e,Zw[1]=t,nh(qw)}function ah(e,t){return!(!e||!Kw.hasOwnProperty(e.type))&&Kw[e.type](e,t)}function ih(e,t){return 0===rh(e,t)}function oh(e,t){var n=rh(e[0],e[1]);return rh(e[0],t)+rh(t,e[1])<=n+rw}function lh(e,t){return!!Fd(e.map(sh),ch(t))}function sh(e){return e=e.map(ch),e.pop(),e}function ch(e){return[e[0]*uw,e[1]*uw]}function uh(e,t){return(e&&Qw.hasOwnProperty(e.type)?Qw[e.type]:ah)(e,t)}function dh(e,t,n){var r=c(e,t-rw,n).concat(t);return function(e){return r.map(function(t){return[e,t]})}}function hh(e,t,n){var r=c(e,t-rw,n).concat(t);return function(e){return r.map(function(t){return[t,e]})}}function fh(){function e(){return{type:"MultiLineString",coordinates:t()}}function t(){return c(gw(i/y)*y,a,y).map(f).concat(c(gw(u/m)*m,s,m).map(p)).concat(c(gw(r/g)*g,n,g).filter(function(e){return dw(e%y)>rw}).map(d)).concat(c(gw(l/v)*v,o,v).filter(function(e){return dw(e%m)>rw}).map(h))}var n,r,a,i,o,l,s,u,d,h,f,p,g=10,v=g,y=90,m=360,b=2.5;return e.lines=function(){return t().map(function(e){return{type:"LineString",coordinates:e}})},e.outline=function(){return{type:"Polygon",coordinates:[f(i).concat(p(s).slice(1),f(a).reverse().slice(1),p(u).reverse().slice(1))]}},e.extent=function(t){return arguments.length?e.extentMajor(t).extentMinor(t):e.extentMinor()},e.extentMajor=function(t){return arguments.length?(i=+t[0][0],a=+t[1][0],u=+t[0][1],s=+t[1][1],i>a&&(t=i,i=a,a=t),u>s&&(t=u,u=s,s=t),e.precision(b)):[[i,u],[a,s]]},e.extentMinor=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],l=+t[0][1],o=+t[1][1],r>n&&(t=r,r=n,n=t),l>o&&(t=l,l=o,o=t),e.precision(b)):[[r,l],[n,o]]},e.step=function(t){return arguments.length?e.stepMajor(t).stepMinor(t):e.stepMinor()},e.stepMajor=function(t){return arguments.length?(y=+t[0],m=+t[1],e):[y,m]},e.stepMinor=function(t){return arguments.length?(g=+t[0],v=+t[1],e):[g,v]},e.precision=function(t){return arguments.length?(b=+t,d=dh(l,o,90),h=hh(r,n,b),f=dh(u,s,90),p=hh(i,a,b),e):b},e.extentMajor([[-180,-90+rw],[180,90-rw]]).extentMinor([[-180,-80-rw],[180,80+rw]])}function ph(){return fh()()}function gh(e,t){var n=e[0]*uw,r=e[1]*uw,a=t[0]*uw,i=t[1]*uw,o=pw(r),l=bw(r),s=pw(i),c=bw(i),u=o*pw(n),d=o*bw(n),h=s*pw(a),f=s*bw(a),p=2*Hu(ww(Bu(i-r)+o*s*Bu(a-n))),g=bw(p),v=p?function(e){var t=bw(e*=p)/g,n=bw(p-e)/g,r=n*u+t*h,a=n*d+t*f,i=n*l+t*c;return[fw(a,r)*cw,fw(i,ww(r*r+a*a))*cw]}:function(){return[n*cw,r*cw]};return v.distance=p,v}function vh(e){return e}function yh(){eC.point=mh}function mh(e,t){eC.point=bh,Iw=Rw=e,Dw=jw=t}function bh(e,t){Jw.add(jw*e-Rw*t),Rw=e,jw=t}function xh(){bh(Iw,Dw)}function wh(e,t){e<tC&&(tC=e),e>rC&&(rC=e),t<nC&&(nC=t),t>aC&&(aC=t)}function Ch(e,t){oC+=e,lC+=t,++sC}function kh(){gC.point=_h}function _h(e,t){gC.point=Sh,Ch(Nw=e,Fw=t)}function Sh(e,t){var n=e-Nw,r=t-Fw,a=ww(n*n+r*r);cC+=a*(Nw+e)/2,uC+=a*(Fw+t)/2,dC+=a,Ch(Nw=e,Fw=t)}function Oh(){gC.point=Ch}function Ah(){gC.point=Th}function Ph(){Eh(Hw,Bw)}function Th(e,t){gC.point=Eh,Ch(Hw=Nw=e,Bw=Fw=t)}function Eh(e,t){var n=e-Nw,r=t-Fw,a=ww(n*n+r*r);cC+=a*(Nw+e)/2,uC+=a*(Fw+t)/2,dC+=a,a=Fw*e-Nw*t,hC+=a*(Nw+e),fC+=a*(Fw+t),pC+=3*a,Ch(Nw=e,Fw=t)}function Lh(e){this._context=e}function Mh(e,t){CC.point=zh,yC=bC=e,mC=xC=t}function zh(e,t){bC-=e,xC-=t,wC.add(ww(bC*bC+xC*xC)),bC=e,xC=t}function Ih(){this._string=[]}function Dh(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function Rh(e,t){function n(e){return e&&("function"==typeof i&&a.pointRadius(+i.apply(this,arguments)),Yu(e,r(a))),a.result()}var r,a,i=4.5;return n.area=function(e){return Yu(e,r(eC)),eC.result()},n.measure=function(e){return Yu(e,r(CC)),CC.result()},n.bounds=function(e){return Yu(e,r(iC)),iC.result()},n.centroid=function(e){return Yu(e,r(gC)),gC.result()},n.projection=function(t){return arguments.length?(r=null==t?(e=null,vh):(e=t).stream,n):e},n.context=function(e){return arguments.length?(a=null==e?(t=null,new Ih):new Lh(t=e),"function"!=typeof i&&a.pointRadius(i),n):t},n.pointRadius=function(e){return arguments.length?(i="function"==typeof e?e:(a.pointRadius(+e),+e),n):i},n.projection(e).context(t)}function jh(e){return{stream:Hh(e)}}function Hh(e){return function(t){var n=new Bh;for(var r in e)n[r]=e[r];return n.stream=t,n}}function Bh(){}function Nh(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=r&&e.clipExtent(null),Yu(n,e.stream(iC)),t(iC.result()),null!=r&&e.clipExtent(r),e}function Fh(e,t,n){return Nh(e,function(n){var r=t[1][0]-t[0][0],a=t[1][1]-t[0][1],i=Math.min(r/(n[1][0]-n[0][0]),a/(n[1][1]-n[0][1])),o=+t[0][0]+(r-i*(n[1][0]+n[0][0]))/2,l=+t[0][1]+(a-i*(n[1][1]+n[0][1]))/2;e.scale(150*i).translate([o,l])},n)}function Vh(e,t,n){return Fh(e,[[0,0],t],n)}function Wh(e,t,n){return Nh(e,function(n){var r=+t,a=r/(n[1][0]-n[0][0]),i=(r-a*(n[1][0]+n[0][0]))/2,o=-a*n[0][1];e.scale(150*a).translate([i,o])},n)}function Yh(e,t,n){return Nh(e,function(n){var r=+t,a=r/(n[1][1]-n[0][1]),i=-a*n[0][0],o=(r-a*(n[1][1]+n[0][1]))/2;e.scale(150*a).translate([i,o])},n)}function Uh(e,t){return+t?Xh(e,t):Gh(e)}function Gh(e){return Hh({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function Xh(e,t){function n(r,a,i,o,l,s,c,u,d,h,f,p,g,v){var y=c-r,m=u-a,b=y*y+m*m;if(b>4*t&&g--){var x=o+h,w=l+f,C=s+p,k=ww(x*x+w*w+C*C),_=Hu(C/=k),S=dw(dw(C)-1)<rw||dw(i-d)<rw?(i+d)/2:fw(w,x),O=e(S,_),A=O[0],P=O[1],T=A-r,E=P-a,L=m*T-y*E;(L*L/b>t||dw((y*T+m*E)/b-.5)>.3||o*h+l*f+s*p<_C)&&(n(r,a,i,o,l,s,A,P,S,x/=k,w/=k,C,g,v),v.point(A,P),n(A,P,S,x,w,C,c,u,d,h,f,p,g,v))}}return function(t){function r(n,r){n=e(n,r),t.point(n[0],n[1])}function a(){y=NaN,C.point=i,t.lineStart()}function i(r,a){var i=Ku([r,a]),o=e(r,a);n(y,m,v,b,x,w,y=o[0],m=o[1],v=r,b=i[0],x=i[1],w=i[2],kC,t),t.point(y,m)}function o(){C.point=r,t.lineEnd()}function l(){a(),C.point=s,C.lineEnd=c}function s(e,t){i(u=e,t),d=y,h=m,f=b,p=x,g=w,C.point=i}function c(){n(y,m,v,b,x,w,d,h,u,f,p,g,kC,t),C.lineEnd=o,o()}var u,d,h,f,p,g,v,y,m,b,x,w,C={point:r,lineStart:a,lineEnd:o,polygonStart:function(){t.polygonStart(),C.lineStart=l},polygonEnd:function(){t.polygonEnd(),C.lineStart=a}};return C}}function Zh(e){return Hh({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function qh(e,t,n){function r(r,a){return[t+e*r,n-e*a]}return r.invert=function(r,a){return[(r-t)/e,(n-a)/e]},r}function Qh(e,t,n,r){function a(e,r){return[l*e-s*r+t,n-s*e-l*r]}var i=pw(r),o=bw(r),l=i*e,s=o*e,c=i/e,u=o/e,d=(o*n-i*t)/e,h=(o*t+i*n)/e;return a.invert=function(e,t){return[c*e-u*t+d,h-u*e-c*t]},a}function Kh(e){return $h(function(){return e})()}function $h(e){function t(e){return h(e[0]*uw,e[1]*uw)}function n(e){return(e=h.invert(e[0],e[1]))&&[e[0]*cw,e[1]*cw]}function r(){var e=Qh(g,0,0,k).apply(null,i(m,b)),t=(k?Qh:qh)(g,v-e[0],y-e[1],k);return o=Pd(x,w,C),d=Od(i,t),h=Od(o,d),u=Uh(d,P),a()}function a(){return f=p=null,t}var i,o,l,s,c,u,d,h,f,p,g=150,v=480,y=250,m=0,b=0,x=0,w=0,C=0,k=0,_=null,S=Ww,O=null,A=vh,P=.5;return t.stream=function(e){return f&&p===e?f:f=SC(Zh(o)(S(u(A(p=e)))))},t.preclip=function(e){return arguments.length?(S=e,_=void 0,a()):S},t.postclip=function(e){return arguments.length?(A=e,O=l=s=c=null,a()):A},t.clipAngle=function(e){return arguments.length?(S=+e?Zd(_=e*uw):(_=null,Ww),a()):_*cw},t.clipExtent=function(e){return arguments.length?(A=null==e?(O=l=s=c=null,vh):Qd(O=+e[0][0],l=+e[0][1],s=+e[1][0],c=+e[1][1]),a()):null==O?null:[[O,l],[s,c]]},t.scale=function(e){return arguments.length?(g=+e,r()):g},t.translate=function(e){return arguments.length?(v=+e[0],y=+e[1],r()):[v,y]},t.center=function(e){return arguments.length?(m=e[0]%360*uw,b=e[1]%360*uw,r()):[m*cw,b*cw]},t.rotate=function(e){return arguments.length?(x=e[0]%360*uw,w=e[1]%360*uw,C=e.length>2?e[2]%360*uw:0,r()):[x*cw,w*cw,C*cw]},t.angle=function(e){return arguments.length?(k=e%360*uw,r()):k*cw},t.precision=function(e){return arguments.length?(u=Uh(d,P=e*e),a()):ww(P)},t.fitExtent=function(e,n){return Fh(t,e,n)},t.fitSize=function(e,n){return Vh(t,e,n)},t.fitWidth=function(e,n){return Wh(t,e,n)},t.fitHeight=function(e,n){return Yh(t,e,n)},function(){return i=e.apply(this,arguments),t.invert=i.invert&&n,r()}}function Jh(e){var t=0,n=iw/3,r=$h(e),a=r(t,n);return a.parallels=function(e){return arguments.length?r(t=e[0]*uw,n=e[1]*uw):[t*cw,n*cw]},a}function ef(e){function t(e,t){return[e*n,bw(t)/n]}var n=pw(e);return t.invert=function(e,t){return[e/n,Hu(t*n)]},t}function tf(e,t){function n(e,t){var n=ww(i-2*a*bw(t))/a;return[n*bw(e*=a),o-n*pw(e)]}var r=bw(e),a=(r+bw(t))/2;if(dw(a)<rw)return ef(e);var i=1+r*(2*a-r),o=ww(i)/a;return n.invert=function(e,t){var n=o-t;return[fw(e,dw(n))/a*xw(n),Hu((i-(e*e+n*n)*a*a)/(2*a))]},n}function nf(){return Jh(tf).scale(155.424).center([0,33.6442])}function rf(){return nf().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function af(e){var t=e.length;return{point:function(n,r){for(var a=-1;++a<t;)e[a].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function of(){function e(e){var t=e[0],n=e[1];return l=null,a.point(t,n),l||(i.point(t,n),l)||(o.point(t,n),l)}function t(){return n=r=null,e}var n,r,a,i,o,l,s=rf(),c=nf().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=nf().rotate([157,0]).center([-3,19.9]).parallels([8,18]),d={point:function(e,t){l=[e,t]}};return e.invert=function(e){var t=s.scale(),n=s.translate(),r=(e[0]-n[0])/t,a=(e[1]-n[1])/t;return(a>=.12&&a<.234&&r>=-.425&&r<-.214?c:a>=.166&&a<.234&&r>=-.214&&r<-.115?u:s).invert(e)},e.stream=function(e){return n&&r===e?n:n=af([s.stream(r=e),c.stream(e),u.stream(e)])},e.precision=function(e){return arguments.length?(s.precision(e),c.precision(e),u.precision(e),t()):s.precision()},e.scale=function(t){return arguments.length?(s.scale(t),c.scale(.35*t),u.scale(t),e.translate(s.translate())):s.scale()},e.translate=function(e){if(!arguments.length)return s.translate();var n=s.scale(),r=+e[0],l=+e[1];return a=s.translate(e).clipExtent([[r-.455*n,l-.238*n],[r+.455*n,l+.238*n]]).stream(d),i=c.translate([r-.307*n,l+.201*n]).clipExtent([[r-.425*n+rw,l+.12*n+rw],[r-.214*n-rw,l+.234*n-rw]]).stream(d),o=u.translate([r-.205*n,l+.212*n]).clipExtent([[r-.214*n+rw,l+.166*n+rw],[r-.115*n-rw,l+.234*n-rw]]).stream(d),t()},e.fitExtent=function(t,n){return Fh(e,t,n)},e.fitSize=function(t,n){return Vh(e,t,n)},e.fitWidth=function(t,n){return Wh(e,t,n)},e.fitHeight=function(t,n){return Yh(e,t,n)},e.scale(1070)}function lf(e){return function(t,n){var r=pw(t),a=pw(n),i=e(r*a);return[i*a*bw(t),i*bw(n)]}}function sf(e){return function(t,n){var r=ww(t*t+n*n),a=e(r),i=bw(a),o=pw(a);return[fw(t*i,r*o),Hu(r&&n*i/r)]}}function cf(){return Kh(OC).scale(124.75).clipAngle(179.999)}function uf(){return Kh(AC).scale(79.4188).clipAngle(179.999)}function df(e,t){return[e,yw(Cw((ow+t)/2))]}function hf(){return ff(df).scale(961/sw)}function ff(e){function t(){var t=iw*l(),o=i(Md(i.rotate()).invert([0,0]));return c(null==u?[[o[0]-t,o[1]-t],[o[0]+t,o[1]+t]]:e===df?[[Math.max(o[0]-t,u),n],[Math.min(o[0]+t,r),a]]:[[u,Math.max(o[1]-t,n)],[r,Math.min(o[1]+t,a)]])}var n,r,a,i=Kh(e),o=i.center,l=i.scale,s=i.translate,c=i.clipExtent,u=null;return i.scale=function(e){return arguments.length?(l(e),t()):l()},i.translate=function(e){return arguments.length?(s(e),t()):s()},i.center=function(e){return arguments.length?(o(e),t()):o()},i.clipExtent=function(e){return arguments.length?(null==e?u=n=r=a=null:(u=+e[0][0],n=+e[0][1],r=+e[1][0],a=+e[1][1]),t()):null==u?null:[[u,n],[r,a]]},t()}function pf(e){return Cw((ow+e)/2)}function gf(e,t){function n(e,t){i>0?t<-ow+rw&&(t=-ow+rw):t>ow-rw&&(t=ow-rw);var n=i/mw(pf(t),a);return[n*bw(a*e),i-n*pw(a*e)]}var r=pw(e),a=e===t?bw(e):yw(r/pw(t))/yw(pf(t)/pf(e)),i=r*mw(pf(e),a)/a;return a?(n.invert=function(e,t){var n=i-t,r=xw(a)*ww(e*e+n*n);return[fw(e,dw(n))/a*xw(n),2*hw(mw(i/r,1/a))-ow]},n):df}function vf(){return Jh(gf).scale(109.5).parallels([30,30])}function yf(e,t){return[e,t]}function mf(){return Kh(yf).scale(152.63)}function bf(e,t){function n(e,t){var n=i-t,r=a*e;return[n*bw(r),i-n*pw(r)]}var r=pw(e),a=e===t?bw(e):(r-pw(t))/(t-e),i=r/a+e;return dw(a)<rw?yf:(n.invert=function(e,t){var n=i-t;return[fw(e,dw(n))/a*xw(n),i-xw(a)*ww(e*e+n*n)]},n)}function xf(){return Jh(bf).scale(131.154).center([0,13.9389])}function wf(e,t){var n=Hu(MC*bw(t)),r=n*n,a=r*r*r;return[e*pw(n)/(MC*(PC+3*TC*r+a*(7*EC+9*LC*r))),n*(PC+TC*r+a*(EC+LC*r))]}function Cf(){return Kh(wf).scale(177.158)}function kf(e,t){var n=pw(t),r=pw(e)*n;return[n*bw(e)/r,bw(t)/r]}function _f(){return Kh(kf).scale(144.049).clipAngle(60)}function Sf(e,t,n,r){return 1===e&&1===t&&0===n&&0===r?vh:Hh({point:function(a,i){this.stream.point(a*e+n,i*t+r)}})}function Of(){function e(){return a=i=null,o}var t,n,r,a,i,o,l=1,s=0,c=0,u=1,d=1,h=vh,f=null,p=vh;return o={stream:function(e){return a&&i===e?a:a=h(p(i=e))},postclip:function(a){return arguments.length?(p=a,f=t=n=r=null,e()):p},clipExtent:function(a){return arguments.length?(p=null==a?(f=t=n=r=null,vh):Qd(f=+a[0][0],t=+a[0][1],n=+a[1][0],r=+a[1][1]),e()):null==f?null:[[f,t],[n,r]]},scale:function(t){return arguments.length?(h=Sf((l=+t)*u,l*d,s,c),e()):l},translate:function(t){return arguments.length?(h=Sf(l*u,l*d,s=+t[0],c=+t[1]),e()):[s,c]},reflectX:function(t){return arguments.length?(h=Sf(l*(u=t?-1:1),l*d,s,c),e()):u<0},reflectY:function(t){return arguments.length?(h=Sf(l*u,l*(d=t?-1:1),s,c),e()):d<0},fitExtent:function(e,t){return Fh(o,e,t)},fitSize:function(e,t){return Vh(o,e,t)},fitWidth:function(e,t){return Wh(o,e,t)},fitHeight:function(e,t){return Yh(o,e,t)}}}function Af(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),t*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}function Pf(){return Kh(Af).scale(175.295)}function Tf(e,t){return[pw(t)*bw(e),bw(t)]}function Ef(){return Kh(Tf).scale(249.5).clipAngle(90+rw)}function Lf(e,t){var n=pw(t),r=1+pw(e)*n;return[n*bw(e)/r,bw(t)/r]}function Mf(){return Kh(Lf).scale(250).clipAngle(142)}function zf(e,t){return[yw(Cw((ow+t)/2)),-e]}function If(){var e=ff(zf),t=e.center,n=e.rotate;return e.center=function(e){return arguments.length?t([-e[1],e[0]]):(e=t(),[e[1],-e[0]])},e.rotate=function(e){return arguments.length?n([e[0],e[1],e.length>2?e[2]+90:90]):(e=n(),[e[0],e[1],e[2]-90])},n([0,0,90]).scale(159.155)}function Df(e){return e?e/Math.sin(e):1}function Rf(e){return e>1?GC:e<-1?-GC:Math.asin(e)}function jf(e){return e>1?0:e<-1?UC:Math.acos(e)}function Hf(e){return e>0?Math.sqrt(e):0}function Bf(e){function t(e,t){var n=RC(e),a=RC(t),i=VC(t),o=a*n,l=-((1-o?BC((1+o)/2)/(1-o):-.5)+r/(1+o));return[l*a*VC(e),l*i]}var n=WC(e/2),r=2*BC(RC(e/2))/(n*n);return t.invert=function(t,n){var a,i=Hf(t*t+n*n),o=-e/2,l=50;if(!i)return[0,0];do{var s=o/2,c=RC(s),u=VC(s),d=WC(s),h=BC(1/c);o-=a=(2/d*h-r*d-i)/(-h/(u*u)+1-r/(2*c*c))}while(zC(a)>YC&&--l>0);var f=VC(o);return[DC(t*f,i*RC(o)),Rf(n*f/i)]},t}function Nf(){var e=GC,t=$h(Bf),n=t(e);return n.radius=function(n){return arguments.length?t(e=n*KC):e*QC},n.scale(179.976).clipAngle(147)}function Ff(e,t){var n=RC(t),r=Df(jf(n*RC(e/=2)));return[2*n*VC(e)*r,VC(t)*r]}function Vf(){return Kh(Ff).scale(152.63)}function Wf(e){function t(e,t){var l=RC(t),s=RC(e/=2);return[(1+l)*VC(e),(a*t>-DC(s,i)-.001?0:10*-a)+o+VC(t)*r-(1+l)*n*s]}var n=VC(e),r=RC(e),a=e>=0?1:-1,i=WC(a*e),o=(1+n-r)/2;return t.invert=function(e,t){var l=0,s=0,c=50;do{var u=RC(l),d=VC(l),h=RC(s),f=VC(s),p=1+h,g=p*d-e,v=o+f*r-p*n*u-t,y=p*u/2,m=-d*f,b=n*p*d/2,x=r*h+n*u*f,w=m*b-x*y,C=(v*m-g*x)/w/2,k=(g*b-v*y)/w;l-=C,s-=k}while((zC(C)>YC||zC(k)>YC)&&--c>0);return a*s>-DC(RC(l),i)-.001?[2*l,s]:null},t}function Yf(){var e=20*KC,t=e>=0?1:-1,n=WC(t*e),r=$h(Wf),a=r(e),i=a.stream;return a.parallel=function(a){return arguments.length?(n=WC((t=(e=a*KC)>=0?1:-1)*e),r(e)):e*QC},a.stream=function(r){var o=a.rotate(),l=i(r),s=(a.rotate([0,0]),i(r));return a.rotate(o),l.sphere=function(){s.polygonStart(),s.lineStart();for(var r=-180*t;t*r<180;r+=90*t)s.point(r,90*t);for(;t*(r-=e)>=-180;)s.point(r,t*-DC(RC(r*KC/2),n)*QC);s.lineEnd(),s.polygonEnd()},l},a.scale(218.695).center([0,28.0974])}function Uf(e,t){function n(n,r){var a=OC(n/t,r);return a[0]*=e,a}return arguments.length<2&&(t=e),1===t?OC:t===1/0?Gf:(n.invert=function(n,r){var a=OC.invert(n/e,r);return a[0]*=t,a},n)}function Gf(e,t){return[e*RC(t)/RC(t/=2),2*VC(t)]}function Xf(){var e=2,t=$h(Uf),n=t(e);return n.coefficient=function(n){return arguments.length?t(e=+n):e},n.scale(169.529)}function Zf(e,t){var n,r=e*VC(t),a=30;do t-=n=(t+VC(t)-r)/(1+RC(t));while(zC(n)>YC&&--a>0);return t/2}function qf(e,t,n){function r(r,a){return[e*r*RC(a=Zf(n,a)),t*VC(a)]}return r.invert=function(r,a){return a=Rf(a/t),[r/(e*RC(a)),Rf((2*a+VC(2*a))/n)]},r}function Qf(e){var t=0,n=$h(e),r=n(t);return r.parallel=function(e){return arguments.length?n(t=e*KC):t*QC},r}function Kf(e,t,n,r,a,i){var o,l=RC(i);if(zC(e)>1||zC(i)>1)o=jf(n*a+t*r*l);else{var s=VC(e/2),c=VC(i/2);o=2*Rf(Hf(s*s+t*r*c*c))}return zC(o)>YC?[o,DC(r*VC(i),t*a-n*r*l)]:[0,0]}function $f(e,t,n){return jf((e*e+t*t-n*n)/(2*e*t))}function Jf(e){return e-2*UC*HC((e+UC)/(2*UC))}function ep(e,t,n){function r(e,t){var n,r=VC(t),a=RC(t),o=new Array(3);for(n=0;n<3;++n){var l=i[n];if(o[n]=Kf(t-l[1],l[3],l[2],a,r,e-l[0]),!o[n][0])return l.point;o[n][1]=Jf(o[n][1]-l.v[1])}var s=d.slice();for(n=0;n<3;++n){var h=2==n?0:n+1,f=$f(i[n].v[0],o[n][0],o[h][0]);o[n][1]<0&&(f=-f),n?1==n?(f=c-f,s[0]-=o[n][0]*RC(f),s[1]-=o[n][0]*VC(f)):(f=u-f,s[0]+=o[n][0]*RC(f),s[1]+=o[n][0]*VC(f)):(s[0]+=o[n][0]*RC(f),s[1]-=o[n][0]*VC(f))}return s[0]/=3,s[1]/=3,s}for(var a,i=[[e[0],e[1],VC(e[1]),RC(e[1])],[t[0],t[1],VC(t[1]),RC(t[1])],[n[0],n[1],VC(n[1]),RC(n[1])]],o=i[2],l=0;l<3;++l,o=a)a=i[l],o.v=Kf(a[1]-o[1],o[3],o[2],a[3],a[2],a[0]-o[0]),o.point=[0,0];var s=$f(i[0].v[0],i[2].v[0],i[1].v[0]),c=$f(i[0].v[0],i[1].v[0],i[2].v[0]),u=UC-s;i[2].point[1]=0,i[0].point[0]=-(i[1].point[0]=i[0].v[0]/2);var d=[i[2].point[0]=i[0].point[0]+i[2].v[0]*RC(s),2*(i[0].point[1]=i[1].point[1]=i[2].v[0]*VC(s))];return r}function tp(e){return e[0]*=KC,e[1]*=KC,e}function np(){return rp([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function rp(e,t,n){var r=_d({type:"MultiPoint",coordinates:[e,t,n]}),a=[-r[0],-r[1]],i=Md(a),o=Kh(ep(tp(i(e)),tp(i(t)),tp(i(n)))).rotate(a),l=o.center;return delete o.rotate,o.center=function(e){return arguments.length?l(i(e)):i.invert(l())},o.clipAngle(90)}function ap(e){function t(e,t){return[e*n,(1+n)*WC(t/2)]}var n=RC(e);return t.invert=function(e,t){return[e/n,2*IC(t/(1+n))]},t}function ip(){return Qf(ap).scale(124.75)}function op(e,t){var n=Hf(UC*(4+UC));return[2/n*e*(1+Hf(1-4*t*t/(UC*UC))),4/n*t]}function lp(){return Kh(op).scale(180.739)}function sp(e,t){var n=(2+GC)*VC(t);t/=2;for(var r=0,a=1/0;r<10&&zC(a)>YC;r++){var i=RC(t);t-=a=(t+VC(t)*(i+2)-n)/(2*i*(1+i))}return[2/Hf(UC*(4+UC))*e*(1+RC(t)),2*Hf(UC/(4+UC))*VC(t)]}function cp(){return Kh(sp).scale(180.739)}function up(e,t){return[e*(1+RC(t))/Hf(2+UC),2*t/Hf(2+UC)]}function dp(){return Kh(up).scale(173.044)}function hp(e,t){for(var n=(1+GC)*VC(t),r=0,a=1/0;r<10&&zC(a)>YC;r++)t-=a=(t+VC(t)-n)/(1+RC(t));return n=Hf(2+UC),[e*(1+RC(t))/n,2*t/n]}function fp(){return Kh(hp).scale(173.044)}function pp(e,t){var n=WC(t/2);return[e*$C*Hf(1-n*n),(1+$C)*n]}function gp(){return Kh(pp).scale(137.152)}function vp(e,t,n,r,a,i,o,l){function s(s,c){if(!c)return[e*s/UC,0];var u=c*c,d=e+u*(t+u*(n+u*r)),h=c*(a-1+u*(i-l+u*o)),f=(d*d+h*h)/(2*h),p=s*Rf(d/f)/UC;return[f*VC(p),c*(1+u*l)+f*(1-RC(p))]}return arguments.length<8&&(l=0),s.invert=function(s,c){var u,d,h=UC*s/e,f=c,p=50;do{var g=f*f,v=e+g*(t+g*(n+g*r)),y=f*(a-1+g*(i-l+g*o)),m=v*v+y*y,b=2*y,x=m/b,w=x*x,C=Rf(v/x)/UC,k=h*C,_=v*v,S=(2*t+g*(4*n+6*g*r))*f,O=a+g*(3*i+5*g*o),A=2*(v*S+y*(O-1)),P=2*(O-1),T=(A*b-m*P)/(b*b),E=RC(k),L=VC(k),M=x*E,z=x*L,I=h/UC*(1/Hf(1-_/w))*(S*x-v*T)/w,D=z-s,R=f*(1+g*l)+x-M-c,j=T*L+M*I,H=M*C,B=1+T-(T*E-z*I),N=z*C,F=j*N-B*H;if(!F)break;h-=u=(R*j-D*B)/F,f-=d=(D*N-R*H)/F}while((zC(u)>YC||zC(d)>YC)&&--p>0);return[h,f]},s}function yp(){return Kh(JC).scale(149.995)}function mp(){return Kh(ek).scale(153.93)}function bp(){return Kh(tk).scale(130.945)}function xp(e,t){var n=e*e,r=t*t;return[e*(1-.162388*r)*(.87-952426e-9*n*n),t*(1+r/12)]}function wp(){return Kh(xp).scale(131.747)}function Cp(){return Kh(nk).scale(131.087)}function kp(e,t){return[3/qC*e*Hf(UC*UC/3-t*t),t]}function _p(){return Kh(kp).scale(158.837)}function Sp(e,t){return[e,1.25*BC(WC(XC+.4*t))]}function Op(){return Kh(Sp).scale(108.318)}function Ap(){}function Pp(e){if((t=e.length)<4)return!1;for(var t,n=0,r=e[t-1][1]*e[0][0]-e[t-1][0]*e[0][1];++n<t;)r+=e[n-1][1]*e[n][0]-e[n-1][0]*e[n][1];return r<=0}function Tp(e,t){for(var n=t[0],r=t[1],a=!1,i=0,o=e.length,l=o-1;i<o;l=i++){var s=e[i],c=s[0],u=s[1],d=e[l],h=d[0],f=d[1];u>r^f>r&&n<(h-c)*(r-u)/(f-u)+c&&(a=!a)}return a}function Ep(e,t){var n,r=t.stream;if(!r)throw new Error("invalid projection");switch(e&&e.type){case"Feature":n=Mp;break;case"FeatureCollection":n=Lp;break;default:n=Ip}return n(e,r)}function Lp(e,t){return{type:"FeatureCollection",features:e.features.map(function(e){return Mp(e,t)})}}function Mp(e,t){return{type:"Feature",id:e.id,properties:e.properties,geometry:Ip(e.geometry,t)}}function zp(e,t){return{type:"GeometryCollection",geometries:e.geometries.map(function(e){return Ip(e,t)})}}function Ip(e,t){if(!e)return null;if("GeometryCollection"===e.type)return zp(e,t);var n;switch(e.type){case"Point":case"MultiPoint":n=ok;break;case"LineString":case"MultiLineString":n=lk;break;case"Polygon":case"MultiPolygon":case"Sphere":n=sk;break;default:return null}return Yu(e,t(n)),n.result()}function Dp(e,t){function n(e){var n=e.length,r=2,a=new Array(n);for(a[0]=+e[0].toFixed(t),a[1]=+e[1].toFixed(t);r<n;)a[r]=e[r],++r;return a}function r(e){return e.map(n)}function a(e){return e.map(r)}function i(e){if(null==e)return e;var t;switch(e.type){case"GeometryCollection":t={type:"GeometryCollection",geometries:e.geometries.map(i)};break;case"Point":t={type:"Point",coordinates:n(e.coordinates)};break;case"MultiPoint":case"LineString":t={type:e.type,coordinates:r(e.coordinates)};break;case"MultiLineString":case"Polygon":t={type:e.type,coordinates:a(e.coordinates)};break;case"MultiPolygon":t={type:"MultiPolygon",coordinates:e.coordinates.map(a)};break;default:return e}return null!=e.bbox&&(t.bbox=e.bbox),t}function o(e){var t={type:"Feature",properties:e.properties,geometry:i(e.geometry)};return null!=e.id&&(t.id=e.id),null!=e.bbox&&(t.bbox=e.bbox),t}if(!(0<=(t=+t)&&t<=20))throw new Error("invalid digits");if(null!=e)switch(e.type){case"Feature":return o(e);case"FeatureCollection":var l={type:"FeatureCollection",features:e.features.map(o)};return null!=e.bbox&&(l.bbox=e.bbox),l;default:return i(e)}return e}function Rp(e,t){var n,r=FC(18,36*zC(t)/UC),a=HC(r),i=r-a,o=(n=ck[a])[0],l=n[1],s=(n=ck[++a])[0],c=n[1],u=(n=ck[FC(19,++a)])[0],d=n[1];return[e*(s+i*(u-o)/2+i*i*(u-2*s+o)/2),(t>0?GC:-GC)*(c+i*(d-l)/2+i*i*(d-2*c+l)/2)]}function jp(){return Kh(Rp).scale(152.63)}function Hp(e){function t(t,n){var r=RC(n),a=(e-1)/(e-r*RC(t));return[a*r*VC(t),a*VC(n)]}return t.invert=function(t,n){var r=t*t+n*n,a=Hf(r),i=(e-Hf(1-r*(e+1)/(e-1)))/((e-1)/a+a/(e-1));return[DC(t*i,a*Hf(1-i*i)),a?Rf(n*i/a):0]},t}function Bp(e,t){function n(t,n){var o=r(t,n),l=o[1],s=l*i/(e-1)+a;return[o[0]*a/s,l/s]}var r=Hp(e);if(!t)return r;var a=RC(t),i=VC(t);return n.invert=function(t,n){var o=(e-1)/(e-1-n*i);return r.invert(o*t,o*n*a)},n}function Np(){var e=2,t=0,n=$h(Bp),r=n(e,t);return r.distance=function(r){return arguments.length?n(e=+r,t):e},r.tilt=function(r){return arguments.length?n(e,t=r*KC):t*QC},r.scale(432.147).clipAngle(jf(1/e)*QC-1e-6)}function Fp(e){return e.length>0}function Vp(e){return Math.floor(e*uk)/uk}function Wp(e){return e===gk||e===yk?[0,e]:[dk,Vp(e)]}function Yp(e){var t=e[0],n=e[1],r=!1;return t<=hk?(t=dk,r=!0):t>=pk&&(t=fk,r=!0),n<=vk?(n=gk,r=!0):n>=mk&&(n=yk,r=!0),r?[t,n]:e}function Up(e){return e.map(Yp)}function Gp(e,t,n){for(var r=0,a=e.length;r<a;++r){var i=e[r].slice();n.push({index:-1,polygon:t,ring:i});for(var o=0,l=i.length;o<l;++o){var s=i[o],c=s[0],u=s[1];if(c<=hk||c>=pk||u<=vk||u>=mk){i[o]=Yp(s);for(var d=o+1;d<l;++d){var h=i[d],f=h[0],p=h[1];if(f>hk&&f<pk&&p>vk&&p<mk)break}if(d===o+1)continue;if(o){var g={index:-1,polygon:t,ring:i.slice(0,o+1)};g.ring[g.ring.length-1]=Wp(u),n[n.length-1]=g}else n.pop();if(d>=l)break;n.push({index:-1,polygon:t,ring:i=i.slice(d-1)}),i[0]=Wp(i[0][1]),o=-1,l=i.length}}}}function Xp(e){var t,n,r,a,i,o,l=e.length,s={},c={};for(t=0;t<l;++t)n=e[t],r=n.ring[0],i=n.ring[n.ring.length-1],r[0]!==i[0]||r[1]!==i[1]?(n.index=t,s[r]=c[i]=n):(n.polygon.push(n.ring),e[t]=null);for(t=0;t<l;++t)if(n=e[t]){if(r=n.ring[0],i=n.ring[n.ring.length-1],a=c[r],o=s[i],delete s[r],delete c[i],r[0]===i[0]&&r[1]===i[1]){n.polygon.push(n.ring);continue}a?(delete c[r],delete s[a.ring[0]],a.ring.pop(),e[a.index]=null,n={index:-1,polygon:a.polygon,ring:a.ring.concat(n.ring)},a===o?n.polygon.push(n.ring):(n.index=l++,e.push(s[n.ring[0]]=c[n.ring[n.ring.length-1]]=n))):o?(delete s[i],delete c[o.ring[o.ring.length-1]],n.ring.pop(),n={index:l++,polygon:o.polygon,ring:n.ring.concat(o.ring)},e[o.index]=null,e.push(s[n.ring[0]]=c[n.ring[n.ring.length-1]]=n)):(n.ring.push(n.ring[0]),n.polygon.push(n.ring))}}function Zp(e){var t={type:"Feature",geometry:qp(e.geometry)};return null!=e.id&&(t.id=e.id),null!=e.bbox&&(t.bbox=e.bbox),null!=e.properties&&(t.properties=e.properties),t}function qp(e){if(null==e)return e;var t,n,r,a;switch(e.type){case"GeometryCollection":t={type:"GeometryCollection",geometries:e.geometries.map(qp)};break;case"Point":t={type:"Point",coordinates:Yp(e.coordinates)};break;case"MultiPoint":case"LineString":t={type:e.type,coordinates:Up(e.coordinates)};break;case"MultiLineString":t={type:"MultiLineString",coordinates:e.coordinates.map(Up)};break;case"Polygon":var i=[];Gp(e.coordinates,i,n=[]),Xp(n),t={type:"Polygon",coordinates:i};break;case"MultiPolygon":n=[],r=-1,a=e.coordinates.length;for(var o=new Array(a);++r<a;)Gp(e.coordinates[r],o[r]=[],n);Xp(n),t={type:"MultiPolygon",coordinates:o.filter(Fp)};break;default:return e}return null!=e.bbox&&(t.bbox=e.bbox),t}function Qp(e){if(null==e)return e;switch(e.type){case"Feature":return Zp(e);case"FeatureCollection":var t={type:"FeatureCollection",features:e.features.map(Zp)};return null!=e.bbox&&(t.bbox=e.bbox),t;default:return qp(e)}}function Kp(){return Kh(wk).scale(176.84)}function $p(e,t){return[e*Hf(1-3*t*t/(UC*UC)),t]}function Jp(){return Kh($p).scale(152.63)}function eg(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function tg(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function ng(e){return e}function rg(e){if(null==e)return ng;var t,n,r=e.scale[0],a=e.scale[1],i=e.translate[0],o=e.translate[1];return function(e,l){l||(t=n=0);var s=2,c=e.length,u=new Array(c);for(u[0]=(t+=e[0])*r+i,u[1]=(n+=e[1])*a+o;s<c;)u[s]=e[s],++s;return u}}function ag(e){function t(e){e=a(e),e[0]<i&&(i=e[0]),e[0]>l&&(l=e[0]),e[1]<o&&(o=e[1]),e[1]>s&&(s=e[1])}function n(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(n);break;case"Point":t(e.coordinates);break;case"MultiPoint":e.coordinates.forEach(t)}}var r,a=rg(e.transform),i=1/0,o=i,l=-i,s=-i;e.arcs.forEach(function(e){for(var t,n=-1,r=e.length;++n<r;)t=a(e[n],n),t[0]<i&&(i=t[0]),t[0]>l&&(l=t[0]),t[1]<o&&(o=t[1]),t[1]>s&&(s=t[1])});for(r in e.objects)n(e.objects[r]);return[i,o,l,s]}function ig(e,t){for(var n,r=e.length,a=r-t;a<--r;)n=e[a],e[a++]=e[r],e[r]=n}function og(e,t){return"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map(function(t){return lg(e,t)})}:lg(e,t)}function lg(e,t){var n=t.id,r=t.bbox,a=null==t.properties?{}:t.properties,i=sg(e,t);return null==n&&null==r?{type:"Feature",properties:a,geometry:i}:null==r?{type:"Feature",id:n,properties:a,geometry:i}:{type:"Feature",id:n,bbox:r,properties:a,geometry:i}}function sg(e,t){function n(e,t){t.length&&t.pop();for(var n=c[e<0?~e:e],r=0,a=n.length;r<a;++r)t.push(s(n[r],r));e<0&&ig(t,a)}function r(e){return s(e)}function a(e){for(var t=[],r=0,a=e.length;r<a;++r)n(e[r],t);return t.length<2&&t.push(t[0]),t}function i(e){for(var t=a(e);t.length<4;)t.push(t[0]);return t}function o(e){return e.map(i)}function l(e){var t,n=e.type;switch(n){case"GeometryCollection":return{type:n,geometries:e.geometries.map(l)};case"Point":t=r(e.coordinates);break;case"MultiPoint":t=e.coordinates.map(r);break;case"LineString":t=a(e.arcs);break;case"MultiLineString":t=e.arcs.map(a);break;case"Polygon":t=o(e.arcs);break;case"MultiPolygon":t=e.arcs.map(o);break;default:return null}return{type:n,coordinates:t}}var s=rg(e.transform),c=e.arcs;return l(t)}function cg(e,t){function n(t){var n,r=e.arcs[t<0?~t:t],a=r[0];return e.transform?(n=[0,0],r.forEach(function(e){n[0]+=e[0],n[1]+=e[1]})):n=r[r.length-1],t<0?[n,a]:[a,n]}function r(e,t){for(var n in e){var r=e[n];delete t[r.start],delete r.start,delete r.end,r.forEach(function(e){a[e<0?~e:e]=1}),l.push(r)}}var a={},i={},o={},l=[],s=-1;return t.forEach(function(n,r){var a,i=e.arcs[n<0?~n:n];i.length<3&&!i[1][0]&&!i[1][1]&&(a=t[++s],t[s]=n,t[r]=a)}),t.forEach(function(e){var t,r,a=n(e),l=a[0],s=a[1];if(t=o[l])if(delete o[t.end],t.push(e),t.end=s,r=i[s]){delete i[r.start];var c=r===t?t:t.concat(r);i[c.start=t.start]=o[c.end=r.end]=c}else i[t.start]=o[t.end]=t;else if(t=i[s])if(delete i[t.start],t.unshift(e),t.start=l,r=o[l]){delete o[r.end];var u=r===t?t:r.concat(t);i[u.start=r.start]=o[u.end=t.end]=u}else i[t.start]=o[t.end]=t;else t=[e],i[t.start=l]=o[t.end=s]=t}),r(o,i),r(i,o),t.forEach(function(e){a[e<0?~e:e]||l.push([e])}),l}function ug(e){return sg(e,dg.apply(this,arguments))}function dg(e,t,n){var r,a,i;if(arguments.length>1)r=hg(e,t,n);else for(a=0,r=new Array(i=e.arcs.length);a<i;++a)r[a]=a;return{type:"MultiLineString",arcs:cg(e,r)}}function hg(e,t,n){function r(e){var t=e<0?~e:e;(u[t]||(u[t]=[])).push({i:e,g:s})}function a(e){e.forEach(r)}function i(e){e.forEach(a)}function o(e){e.forEach(i)}function l(e){switch(s=e,e.type){case"GeometryCollection":e.geometries.forEach(l);break;case"LineString":a(e.arcs);break;case"MultiLineString":case"Polygon":i(e.arcs);break;case"MultiPolygon":o(e.arcs)}}var s,c=[],u=[];return l(t),u.forEach(null==n?function(e){c.push(e[0].i)}:function(e){n(e[0].g,e[e.length-1].g)&&c.push(e[0].i)}),c}function fg(e){for(var t,n=-1,r=e.length,a=e[r-1],i=0;++n<r;)t=a,a=e[n],i+=t[0]*a[1]-t[1]*a[0];return Math.abs(i)}function pg(e){return sg(e,gg.apply(this,arguments))}function gg(e,t){function n(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(n);break;case"Polygon":r(e.arcs);break;case"MultiPolygon":e.arcs.forEach(r)}}function r(e){e.forEach(function(t){t.forEach(function(t){(i[t=t<0?~t:t]||(i[t]=[])).push(e)})}),o.push(e)}function a(t){return fg(sg(e,{type:"Polygon",arcs:[t]}).coordinates[0])}var i={},o=[],l=[];return t.forEach(n),o.forEach(function(e){if(!e._){var t=[],n=[e];for(e._=1,l.push(t);e=n.pop();)t.push(e),e.forEach(function(e){e.forEach(function(e){i[e<0?~e:e].forEach(function(e){e._||(e._=1,n.push(e))})})})}}),o.forEach(function(e){delete e._}),{type:"MultiPolygon",arcs:l.map(function(t){var n,r=[];if(t.forEach(function(e){e.forEach(function(e){e.forEach(function(e){i[e<0?~e:e].length<2&&r.push(e)})})}),r=cg(e,r),(n=r.length)>1)for(var o,l,s=1,c=a(r[0]);s<n;++s)(o=a(r[s]))>c&&(l=r[0],r[0]=r[s],r[s]=l,c=o);return r})}}function vg(e,t){for(var n=0,r=e.length;n<r;){var a=n+r>>>1;e[a]<t?n=a+1:r=a}return n}function yg(e){function t(e,t){e.forEach(function(e){e<0&&(e=~e);var n=a[e];n?n.push(t):a[e]=[t]})}function n(e,n){e.forEach(function(e){t(e,n)})}function r(e,t){"GeometryCollection"===e.type?e.geometries.forEach(function(e){r(e,t)}):e.type in o&&o[e.type](e.arcs,t)}var a={},i=e.map(function(){return[]}),o={LineString:t,MultiLineString:n,Polygon:n,MultiPolygon:function(e,t){e.forEach(function(e){n(e,t)})}};e.forEach(r);for(var l in a)for(var s=a[l],c=s.length,u=0;u<c;++u)for(var d=u+1;d<c;++d){var h,f=s[u],p=s[d];(h=i[f])[l=vg(h,p)]!==p&&h.splice(l,0,p),(h=i[p])[l=vg(h,f)]!==f&&h.splice(l,0,f)}return i}function mg(e){if(null==e)return ng;var t,n,r=e.scale[0],a=e.scale[1],i=e.translate[0],o=e.translate[1];return function(e,l){l||(t=n=0);var s=2,c=e.length,u=new Array(c),d=Math.round((e[0]-i)/r),h=Math.round((e[1]-o)/a);for(u[0]=d-t,t=d,u[1]=h-n,n=h;s<c;)u[s]=e[s],++s;return u}}function bg(e,t){function n(e){return h(e)}function r(e){var t;switch(e.type){case"GeometryCollection":t={type:"GeometryCollection",geometries:e.geometries.map(r)};break;case"Point":t={type:"Point",coordinates:n(e.coordinates)};break;case"MultiPoint":t={type:"MultiPoint",coordinates:e.coordinates.map(n)};break;default:return e}return null!=e.id&&(t.id=e.id),null!=e.bbox&&(t.bbox=e.bbox),null!=e.properties&&(t.properties=e.properties),t}function a(e){var t,n=0,r=1,a=e.length,i=new Array(a);for(i[0]=h(e[0],0);++n<a;)((t=h(e[n],n))[0]||t[1])&&(i[r++]=t);return 1===r&&(i[r++]=[0,0]),i.length=r,i}if(e.transform)throw new Error("already quantized");if(t&&t.scale)u=e.bbox;else{if(!((i=Math.floor(t))>=2))throw new Error("n must be ≥2");u=e.bbox||ag(e);var i,o=u[0],l=u[1],s=u[2],c=u[3];t={scale:[s-o?(s-o)/(i-1):1,c-l?(c-l)/(i-1):1],translate:[o,l]}}var u,d,h=mg(t),f=e.objects,p={};for(d in f)p[d]=r(f[d]);return{type:"Topology",bbox:u,transform:t,objects:p,arcs:e.arcs.map(a)}}function xg(e){var t=+this._x.call(null,e),n=+this._y.call(null,e);return wg(this.cover(t,n),t,n,e)}function wg(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var a,i,o,l,s,c,u,d,h,f=e._root,p={data:r},g=e._x0,v=e._y0,y=e._x1,m=e._y1;if(!f)return e._root=p,e;for(;f.length;)if((c=t>=(i=(g+y)/2))?g=i:y=i,(u=n>=(o=(v+m)/2))?v=o:m=o,a=f,!(f=f[d=u<<1|c]))return a[d]=p,e;if(l=+e._x.call(null,f.data),s=+e._y.call(null,f.data),t===l&&n===s)return p.next=f,a?a[d]=p:e._root=p,e;do a=a?a[d]=new Array(4):e._root=new Array(4),(c=t>=(i=(g+y)/2))?g=i:y=i,(u=n>=(o=(v+m)/2))?v=o:m=o;while((d=u<<1|c)==(h=(s>=o)<<1|l>=i));return a[h]=f,a[d]=p,e}function Cg(e){var t,n,r,a,i=e.length,o=new Array(i),l=new Array(i),s=1/0,c=1/0,u=-1/0,d=-1/0;for(n=0;n<i;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(a=+this._y.call(null,t))||(o[n]=r,l[n]=a,r<s&&(s=r),r>u&&(u=r),a<c&&(c=a),a>d&&(d=a));if(s>u||c>d)return this;for(this.cover(s,c).cover(u,d),n=0;n<i;++n)wg(this,o[n],l[n],e[n]);return this}function kg(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,a=this._x1,i=this._y1;if(isNaN(n))a=(n=Math.floor(e))+1,i=(r=Math.floor(t))+1;else{for(var o,l,s=a-n,c=this._root;n>e||e>=a||r>t||t>=i;)switch(l=(t<r)<<1|e<n,o=new Array(4),o[l]=c,c=o,s*=2,l){case 0:a=n+s,i=r+s;break;case 1:n=a-s,i=r+s;break;case 2:a=n+s,r=i-s;break;case 3:n=a-s,r=i-s}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=a,this._y1=i,this}function _g(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Sg(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Og(e,t,n,r,a){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=a}function Ag(e,t,n){var r,a,i,o,l,s,c,u=this._x0,d=this._y0,h=this._x1,f=this._y1,p=[],g=this._root;for(g&&p.push(new Og(g,u,d,h,f)),null==n?n=1/0:(u=e-n,d=t-n,h=e+n,f=t+n,n*=n);s=p.pop();)if(!(!(g=s.node)||(a=s.x0)>h||(i=s.y0)>f||(o=s.x1)<u||(l=s.y1)<d))if(g.length){var v=(a+o)/2,y=(i+l)/2;p.push(new Og(g[3],v,y,o,l),new Og(g[2],a,y,v,l),new Og(g[1],v,i,o,y),new Og(g[0],a,i,v,y)),(c=(t>=y)<<1|e>=v)&&(s=p[p.length-1],p[p.length-1]=p[p.length-1-c],p[p.length-1-c]=s)}else{var m=e-+this._x.call(null,g.data),b=t-+this._y.call(null,g.data),x=m*m+b*b;if(x<n){var w=Math.sqrt(n=x);u=e-w,d=t-w,h=e+w,f=t+w,r=g.data}}return r}function Pg(e){if(isNaN(i=+this._x.call(null,e))||isNaN(o=+this._y.call(null,e)))return this;var t,n,r,a,i,o,l,s,c,u,d,h,f=this._root,p=this._x0,g=this._y0,v=this._x1,y=this._y1;if(!f)return this;if(f.length)for(;;){if((c=i>=(l=(p+v)/2))?p=l:v=l,(u=o>=(s=(g+y)/2))?g=s:y=s,t=f,!(f=f[d=u<<1|c]))return this;if(!f.length)break;(t[d+1&3]||t[d+2&3]||t[d+3&3])&&(n=t,h=d)}for(;f.data!==e;)if(r=f,!(f=f.next))return this;return(a=f.next)&&delete f.next,r?(a?r.next=a:delete r.next,this):t?(a?t[d]=a:delete t[d],(f=t[0]||t[1]||t[2]||t[3])&&f===(t[3]||t[2]||t[1]||t[0])&&!f.length&&(n?n[h]=f:this._root=f),this):(this._root=a,this)}function Tg(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Eg(){return this._root}function Lg(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Mg(e){var t,n,r,a,i,o,l=[],s=this._root;for(s&&l.push(new Og(s,this._x0,this._y0,this._x1,this._y1));t=l.pop();)if(!e(s=t.node,r=t.x0,a=t.y0,i=t.x1,o=t.y1)&&s.length){var c=(r+i)/2,u=(a+o)/2;(n=s[3])&&l.push(new Og(n,c,u,i,o)),(n=s[2])&&l.push(new Og(n,r,u,c,o)),(n=s[1])&&l.push(new Og(n,c,a,i,u)),(n=s[0])&&l.push(new Og(n,r,a,c,u))}return this}function zg(e){var t,n=[],r=[];for(this._root&&n.push(new Og(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var a=t.node;if(a.length){var i,o=t.x0,l=t.y0,s=t.x1,c=t.y1,u=(o+s)/2,d=(l+c)/2;(i=a[0])&&n.push(new Og(i,o,l,u,d)),(i=a[1])&&n.push(new Og(i,u,l,s,d)),(i=a[2])&&n.push(new Og(i,o,d,u,c)),(i=a[3])&&n.push(new Og(i,u,d,s,c))}r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this}function Ig(e){return e[0]}function Dg(e){return arguments.length?(this._x=e,this):this._x}function Rg(e){return e[1]}function jg(e){return arguments.length?(this._y=e,this):this._y}function Hg(e,t,n){var r=new Bg(null==t?Ig:t,null==n?Rg:n,NaN,NaN,NaN,NaN);return null==e?r:r.addAll(e)}function Bg(e,t,n,r,a,i){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=a,this._y1=i,this._root=void 0}function Ng(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Fg=n(t),Vg=Fg.right,Wg=Fg.left,Yg=Math.sqrt(50),Ug=Math.sqrt(10),Gg=Math.sqrt(2);b.prototype=x.prototype={constructor:b,has:function(e){return"$"+e in this},get:function(e){return this["$"+e]},set:function(e,t){return this["$"+e]=t,this},remove:function(e){var t="$"+e;return t in this&&delete this[t]},clear:function(){for(var e in this)"$"===e[0]&&delete this[e]},keys:function(){var e=[];for(var t in this)"$"===t[0]&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)"$"===t[0]&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)"$"===t[0]&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)"$"===t[0]&&++e;return e},empty:function(){for(var e in this)if("$"===e[0])return!1;return!0},each:function(e){for(var t in this)"$"===t[0]&&e(this[t],t.slice(1),this)}};var Xg=x.prototype;w.prototype=C.prototype={constructor:w,has:Xg.has,add:function(e){return e+="",this["$"+e]=e,this},remove:Xg.remove,clear:Xg.clear,values:Xg.keys,size:Xg.size,empty:Xg.empty,each:Xg.each};var Zg=Array.prototype.slice,qg=1,Qg=2,Kg=3,$g=4,Jg=1e-6,ev={value:function(){}};j.prototype=R.prototype={constructor:j,on:function(e,t){var n,r=this._,a=H(e+"",r),i=-1,o=a.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++i<o;)if(n=(e=a[i]).type)r[n]=N(r[n],e.name,t);else if(null==t)for(n in r)r[n]=N(r[n],e.name,null);return this}for(;++i<o;)if((n=(e=a[i]).type)&&(n=B(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new j(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,a=new Array(n),i=0;i<n;++i)a[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(r=this._[e],i=0,n=r.length;i<n;++i)r[i].value.apply(t,a)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],a=0,i=r.length;a<i;++a)r[a].value.apply(t,n)}};var tv="http://www.w3.org/1999/xhtml",nv={svg:"http://www.w3.org/2000/svg",xhtml:tv,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},rv=0;G.prototype=U.prototype={constructor:G,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}};var av=function(e){return function(){return this.matches(e)}};if("undefined"!=typeof document){var iv=document.documentElement;if(!iv.matches){var ov=iv.webkitMatchesSelector||iv.msMatchesSelector||iv.mozMatchesSelector||iv.oMatchesSelector;av=function(e){return function(){return ov.call(this,e)}}}}var lv=av,sv={};e.event=null,"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(sv={mouseenter:"mouseover",mouseleave:"mouseout"})),he.prototype={constructor:he,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var cv="$";Xe.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var uv=[null];Ct.prototype=kt.prototype={constructor:Ct,select:ie,selectAll:se,filter:ce,data:ve,enter:de,exit:ye,merge:me,order:be,sort:xe,call:Ce,nodes:ke,node:_e,size:Se,empty:Oe,each:Ae,attr:Ie,style:Be,property:Ye,classed:Je,text:rt,html:lt,raise:ct,lower:dt,append:ht,insert:pt,remove:vt,datum:yt,on:$,dispatch:wt},zt.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};var dv="\\s*([+-]?\\d+)\\s*",hv="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",fv="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",pv=/^#([0-9a-f]{3})$/,gv=/^#([0-9a-f]{6})$/,vv=new RegExp("^rgb\\("+[dv,dv,dv]+"\\)$"),yv=new RegExp("^rgb\\("+[fv,fv,fv]+"\\)$"),mv=new RegExp("^rgba\\("+[dv,dv,dv,hv]+"\\)$"),bv=new RegExp("^rgba\\("+[fv,fv,fv,hv]+"\\)$"),xv=new RegExp("^hsl\\("+[hv,fv,fv]+"\\)$"),wv=new RegExp("^hsla\\("+[hv,fv,fv,hv]+"\\)$"),Cv={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Bt(Ft,Vt,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),Bt(Xt,Gt,Nt(Ft,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new Xt(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new Xt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(1===e?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}})),Bt(Kt,Qt,Nt(Ft,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new Kt(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new Kt(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new Xt($t(e>=240?e-240:e+120,a,r),$t(e,a,r),$t(e<120?e+240:e-120,a,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var kv=Math.PI/180,_v=180/Math.PI,Sv=.95047,Ov=1,Av=1.08883,Pv=4/29,Tv=6/29,Ev=3*Tv*Tv,Lv=Tv*Tv*Tv;Bt(tn,en,Nt(Ft,{brighter:function(e){return new tn(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new tn(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return e=Ov*rn(e),t=Sv*rn(t),n=Av*rn(n),new Xt(an(3.2404542*t-1.5371385*e-.4985314*n),an(-.969266*t+1.8760108*e+.041556*n),an(.0556434*t-.2040259*e+1.0572252*n),this.opacity)}})),Bt(cn,sn,Nt(Ft,{brighter:function(e){return new cn(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker:function(e){return new cn(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb:function(){return Jt(this).rgb()}}));var Mv=-.14861,zv=1.78277,Iv=-.29227,Dv=-.90649,Rv=1.97294,jv=Rv*Dv,Hv=Rv*zv,Bv=zv*Iv-Dv*Mv;Bt(hn,dn,Nt(Ft,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new hn(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new hn(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*kv,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),a=Math.sin(e);return new Xt(255*(t+n*(Mv*r+zv*a)),255*(t+n*(Iv*r+Dv*a)),255*(t+n*(Rv*r)),this.opacity)}}));var Nv,Fv,Vv,Wv,Yv,Uv,Gv=function e(t){function n(e,t){var n=r((e=Gt(e)).r,(t=Gt(t)).r),a=r(e.g,t.g),i=r(e.b,t.b),o=wn(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=a(t),e.b=i(t),e.opacity=o(t),e+""}}var r=xn(t);return n.gamma=e,n}(1),Xv=Cn(pn),Zv=Cn(gn),qv=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Qv=new RegExp(qv.source,"g"),Kv=180/Math.PI,$v={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Jv=Dn(zn,"px, ","px)","deg)"),ey=Dn(In,", ",")",")"),ty=Math.SQRT2,ny=2,ry=4,ay=1e-12,iy=Nn(bn),oy=Nn(wn),ly=Vn(bn),sy=Vn(wn),cy=Wn(bn),uy=Wn(wn),dy=0,hy=0,fy=0,py=1e3,gy=0,vy=0,yy=0,my="object"==typeof performance&&performance.now?performance:Date,by="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};Xn.prototype=Zn.prototype={constructor:Xn,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?Un():+n)+(null==t?0:+t),this._next||Uv===this||(Uv?Uv._next=this:Yv=this,Uv=this),this._call=e,this._time=n,Jn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Jn())}};var xy=R("start","end","interrupt"),wy=[],Cy=0,ky=1,_y=2,Sy=3,Oy=4,Ay=5,Py=6,Ty=kt.prototype.constructor,Ey=0,Ly=kt.prototype;Jr.prototype=ea.prototype={constructor:Jr,select:Br,selectAll:Nr,filter:Mr,merge:zr,selection:Fr,transition:$r,call:Ly.call,nodes:Ly.nodes,node:Ly.node,size:Ly.size,empty:Ly.empty,each:Ly.each,on:Rr,attr:xr,attrTween:kr,style:Gr,styleTween:Zr,text:Kr,remove:Hr,tween:dr,delay:Or,duration:Tr,ease:Lr};var My=function e(t){function n(e){return Math.pow(e,t)}return t=+t,n.exponent=e,n}(3),zy=function e(t){function n(e){return 1-Math.pow(1-e,t)}return t=+t,n.exponent=e,n}(3),Iy=function e(t){function n(e){return((e*=2)<=1?Math.pow(e,t):2-Math.pow(2-e,t))/2}return t=+t,n.exponent=e,n}(3),Dy=Math.PI,Ry=Dy/2,jy=4/11,Hy=6/11,By=8/11,Ny=.75,Fy=9/11,Vy=10/11,Wy=.9375,Yy=21/22,Uy=63/64,Gy=1/jy/jy,Xy=function e(t){function n(e){return e*e*((t+1)*e-t)}return t=+t,n.overshoot=e,n}(1.70158),Zy=function e(t){function n(e){return--e*e*((t+1)*e+t)+1}return t=+t,n.overshoot=e,n}(1.70158),qy=function e(t){function n(e){return((e*=2)<1?e*e*((t+1)*e-t):(e-=2)*e*((t+1)*e+t)+2)/2}return t=+t,n.overshoot=e,n}(1.70158),Qy=2*Math.PI,Ky=function e(t,n){function r(e){return t*Math.pow(2,10*--e)*Math.sin((a-e)/n)}var a=Math.asin(1/(t=Math.max(1,t)))*(n/=Qy);return r.amplitude=function(t){return e(t,n*Qy)},r.period=function(n){return e(t,n)},r}(1,.3),$y=function e(t,n){function r(e){return 1-t*Math.pow(2,-10*(e=+e))*Math.sin((e+a)/n)}var a=Math.asin(1/(t=Math.max(1,t)))*(n/=Qy);return r.amplitude=function(t){return e(t,n*Qy)},r.period=function(n){return e(t,n)},r}(1,.3),Jy=function e(t,n){function r(e){return((e=2*e-1)<0?t*Math.pow(2,10*e)*Math.sin((a-e)/n):2-t*Math.pow(2,-10*e)*Math.sin((a+e)/n))/2}var a=Math.asin(1/(t=Math.max(1,t)))*(n/=Qy);return r.amplitude=function(t){return e(t,n*Qy)},r.period=function(n){return e(t,n)},r}(1,.3),em={time:null,delay:0,duration:250,ease:sa};kt.prototype.interrupt=sr,kt.prototype.transition=Ca;var tm,nm=[null],rm={name:"drag"},am={name:"space"},im={name:"handle"},om={name:"center"},lm={name:"x",handles:["w","e"].map(La),input:function(e,t){return null==e?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},sm={name:"y",handles:["n","s"].map(La),input:function(e,t){return null==e?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},cm={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(La),input:function(e){return null==e?null:Ta(e)},output:function(e){return e}},um={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},dm={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},hm={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},fm={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},pm={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1},gm={},vm={},ym=34,mm=10,bm=13,xm=Ua(","),wm=xm.parse,Cm=xm.parseRows,km=(Ua("\t"),function(e,t){return function(n,r){var a=Ga(n).mimeType(e).response(t);if(null!=r){if("function"!=typeof r)throw new Error("invalid callback: "+r);return a.get(r)}return a}}("application/json",function(e){return JSON.parse(e.responseText)})),_m={"":Ja,"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return ti(100*e,t)},r:ti,s:ei,X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}},Sm=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;ni.prototype=ri.prototype,ri.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var Om,Am=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];oi({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),Ri.prototype=Li.prototype={constructor:Ri,count:bi,each:xi,eachAfter:Ci,eachBefore:wi,sum:ki,sort:_i,path:Si,ancestors:Ai,descendants:Pi,leaves:Ti,links:Ei,copy:Mi};var Pm=Array.prototype.slice,Tm="$",Em={depth:-1},Lm={};wo.prototype=Object.create(Ri.prototype);var Mm=(1+Math.sqrt(5))/2,zm=function e(t){function n(e,n,r,a,i){So(t,e,n,r,a,i)}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(Mm),Im=function e(t){function n(e,n,r,a,i){if((o=e._squarify)&&o.ratio===t)for(var o,l,s,c,u,d=-1,h=o.length,f=e.value;++d<h;){for(l=o[d],s=l.children,c=l.value=0,u=s.length;c<u;++c)l.value+=s[c].value;l.dice?co(l,n,r,a,r+=(i-r)*l.value/f):_o(l,n,r,n+=(a-n)*l.value/f,i),f-=l.value}else e._squarify=o=So(t,e,n,r,a,i),o.ratio=t}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(Mm),Dm=Math.PI,Rm=2*Dm,jm=Rm-1e-6;To.prototype=Eo.prototype={constructor:To,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,a,i){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+a)+","+(this._y1=+i)},arcTo:function(e,t,n,r,a){e=+e,t=+t,n=+n,r=+r,a=+a;var i=this._x1,o=this._y1,l=n-e,s=r-t,c=i-e,u=o-t,d=c*c+u*u;if(a<0)throw new Error("negative radius: "+a);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(d>1e-6)if(Math.abs(u*l-s*c)>1e-6&&a){var h=n-i,f=r-o,p=l*l+s*s,g=h*h+f*f,v=Math.sqrt(p),y=Math.sqrt(d),m=a*Math.tan((Dm-Math.acos((p+d-g)/(2*v*y)))/2),b=m/y,x=m/v;Math.abs(b-1)>1e-6&&(this._+="L"+(e+b*c)+","+(t+b*u)),this._+="A"+a+","+a+",0,0,"+ +(u*h>c*f)+","+(this._x1=e+x*l)+","+(this._y1=t+x*s)}else this._+="L"+(this._x1=e)+","+(this._y1=t)},arc:function(e,t,n,r,a,i){e=+e,t=+t,n=+n;var o=n*Math.cos(r),l=n*Math.sin(r),s=e+o,c=t+l,u=1^i,d=i?r-a:a-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+s+","+c:(Math.abs(this._x1-s)>1e-6||Math.abs(this._y1-c)>1e-6)&&(this._+="L"+s+","+c),n&&(d<0&&(d=d%Rm+Rm),d>jm?this._+="A"+n+","+n+",0,1,"+u+","+(e-o)+","+(t-l)+"A"+n+","+n+",0,1,"+u+","+(this._x1=s)+","+(this._y1=c):d>1e-6&&(this._+="A"+n+","+n+",0,"+ +(d>=Dm)+","+u+","+(this._x1=e+n*Math.cos(a))+","+(this._y1=t+n*Math.sin(a))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var Hm=Array.prototype,Bm=Hm.map,Nm=Hm.slice,Fm={name:"implicit"},Vm=[0,1],Wm=new Date,Ym=new Date,Um=qo(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});Um.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?qo(function(t){t.setTime(Math.floor(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):Um:null};var Gm=Um.range,Xm=6e4,Zm=6048e5,qm=qo(function(e){e.setTime(1e3*Math.floor(e/1e3))},function(e,t){e.setTime(+e+1e3*t)},function(e,t){return(t-e)/1e3},function(e){return e.getUTCSeconds()}),Qm=qm.range,Km=qo(function(e){e.setTime(Math.floor(e/Xm)*Xm)},function(e,t){e.setTime(+e+t*Xm)},function(e,t){return(t-e)/Xm},function(e){return e.getMinutes()}),$m=Km.range,Jm=qo(function(e){var t=e.getTimezoneOffset()*Xm%36e5;t<0&&(t+=36e5),e.setTime(36e5*Math.floor((+e-t)/36e5)+t)},function(e,t){e.setTime(+e+36e5*t)},function(e,t){return(t-e)/36e5},function(e){return e.getHours()}),eb=Jm.range,tb=qo(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Xm)/864e5},function(e){return e.getDate()-1}),nb=tb.range,rb=Qo(0),ab=Qo(1),ib=Qo(2),ob=Qo(3),lb=Qo(4),sb=Qo(5),cb=Qo(6),ub=rb.range,db=ab.range,hb=ib.range,fb=ob.range,pb=lb.range,gb=sb.range,vb=cb.range,yb=qo(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())},function(e){return e.getMonth()}),mb=yb.range,bb=qo(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});bb.every=function(e){return isFinite(e=Math.floor(e))&&e>0?qo(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n*e)}):null};var xb=bb.range,wb=qo(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*Xm)},function(e,t){return(t-e)/Xm},function(e){return e.getUTCMinutes()}),Cb=wb.range,kb=qo(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+36e5*t)},function(e,t){return(t-e)/36e5},function(e){return e.getUTCHours()}),_b=kb.range,Sb=qo(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/864e5},function(e){return e.getUTCDate()-1}),Ob=Sb.range,Ab=Ko(0),Pb=Ko(1),Tb=Ko(2),Eb=Ko(3),Lb=Ko(4),Mb=Ko(5),zb=Ko(6),Ib=Ab.range,Db=Pb.range,Rb=Tb.range,jb=Eb.range,Hb=Lb.range,Bb=Mb.range,Nb=zb.range,Fb=qo(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())},function(e){return e.getUTCMonth()}),Vb=Fb.range,Wb=qo(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});Wb.every=function(e){return isFinite(e=Math.floor(e))&&e>0?qo(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null};var Yb,Ub=Wb.range,Gb={"-":"",_:" ",0:"0"},Xb=/^\s*\d+/,Zb=/^%/,qb=/[\\^$*+?|[\]().{}]/g;ss({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Qb=Date.prototype.toISOString?cs:e.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),Kb=+new Date("2000-01-01T00:00:00.000Z")?us:e.utcParse("%Y-%m-%dT%H:%M:%S.%LZ"),$b=1e3,Jb=60*$b,ex=60*Jb,tx=24*ex,nx=7*tx,rx=30*tx,ax=365*tx;vs("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),vs("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),vs("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),vs("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),uy(dn(300,.5,0),dn(-240,.5,1)),uy(dn(-100,.75,.35),dn(80,1.5,.8)),uy(dn(260,.75,.35),dn(80,1.5,.8)),dn(),ys(vs("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var ix=(ys(vs("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),ys(vs("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),ys(vs("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),Array.prototype),ox=ix.map,lx=ix.slice,sx=[0,1];kt.prototype.attrs=Js,kt.prototype.styles=nc,kt.prototype.properties=ic,ea.prototype.attrs=sc,ea.prototype.styles=dc;var cx=Math.abs,ux=Math.atan2,dx=Math.cos,hx=Math.max,fx=Math.min,px=Math.sin,gx=Math.sqrt,vx=1e-12,yx=Math.PI,mx=yx/2,bx=2*yx;kc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};var xx=zc(_c);Mc.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(e,t){this._curve.point(t*Math.sin(e),t*-Math.cos(e))}};var wx=Array.prototype.slice;Xc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Gc(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:Gc(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Cx=function e(t){function n(e){return new Xc(e,t)}return n.tension=function(t){return e(+t)},n}(0);Zc.prototype={areaStart:Uc,areaEnd:Uc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Gc(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var kx=function e(t){function n(e){return new Zc(e,t)}return n.tension=function(t){return e(+t)},n}(0);qc.prototype={areaStart:Uc,areaEnd:Uc,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},tu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:eu(this,this._t0,Jc(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,e!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,eu(this,Jc(this,n=$c(this,e,t)),n);break;default:eu(this,this._t0,n=$c(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(nu.prototype=Object.create(tu.prototype)).point=function(e,t){tu.prototype.point.call(this,t,e)},ru.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,a,i){this._context.bezierCurveTo(t,e,r,n,i,a)}},ou.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}},gu.prototype={constructor:gu,scale:function(e){return 1===e?this:new gu(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new gu(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var _x=new gu(1,0,0);vu.prototype=gu.prototype,Du.prototype={constructor:Du,reset:function(){this.s=this.t=0},add:function(e){Ru(nw,e,this.t),Ru(this,nw.s,this.s),this.s?this.t+=nw.t:this.s=nw.t},valueOf:function(){return this.s}};var Sx,Ox,Ax,Px,Tx,Ex,Lx,Mx,zx,Ix,Dx,Rx,jx,Hx,Bx,Nx,Fx,Vx,Wx,Yx,Ux,Gx,Xx,Zx,qx,Qx,Kx,$x,Jx,ew,tw,nw=new Du,rw=1e-6,aw=1e-12,iw=Math.PI,ow=iw/2,lw=iw/4,sw=2*iw,cw=180/iw,uw=iw/180,dw=Math.abs,hw=Math.atan,fw=Math.atan2,pw=Math.cos,gw=Math.ceil,vw=Math.exp,yw=Math.log,mw=Math.pow,bw=Math.sin,xw=Math.sign||function(e){return e>0?1:e<0?-1:0},ww=Math.sqrt,Cw=Math.tan,kw={Feature:function(e,t){Fu(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,a=n.length;++r<a;)Fu(n[r].geometry,t)}},_w={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,a=n.length;++r<a;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){Vu(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,a=n.length;++r<a;)Vu(n[r],t,0)},Polygon:function(e,t){Wu(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,a=n.length;++r<a;)Wu(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,a=n.length;++r<a;)Fu(n[r],t)}},Sw=Iu(),Ow=Iu(),Aw={point:Nu,lineStart:Nu,lineEnd:Nu,polygonStart:function(){Sw.reset(),Aw.lineStart=Uu,Aw.lineEnd=Gu},polygonEnd:function(){var e=+Sw;Ow.add(e<0?sw+e:e),this.lineStart=this.lineEnd=this.point=Nu},sphere:function(){Ow.add(sw)}},Pw=Iu(),Tw={point:rd,lineStart:id,lineEnd:od,polygonStart:function(){Tw.point=ld,Tw.lineStart=sd,Tw.lineEnd=cd,Pw.reset(),Aw.polygonStart()},polygonEnd:function(){Aw.polygonEnd(),Tw.point=rd,Tw.lineStart=id,Tw.lineEnd=od,Sw<0?(Ex=-(Mx=180),Lx=-(zx=90)):Pw>rw?zx=90:Pw<-rw&&(Lx=-90),Bx[0]=Ex,Bx[1]=Mx}},Ew={sphere:Nu,point:pd,lineStart:vd,lineEnd:bd,polygonStart:function(){Ew.lineStart=xd,Ew.lineEnd=wd},polygonEnd:function(){Ew.lineStart=vd,Ew.lineEnd=bd}};Ad.invert=Ad;var Lw,Mw,zw,Iw,Dw,Rw,jw,Hw,Bw,Nw,Fw,Vw=Iu(),Ww=Vd(function(){return!0},Ud,Xd,[-iw,-ow]),Yw=1e9,Uw=-Yw,Gw=Iu(),Xw={sphere:Nu,point:Nu,lineStart:$d,lineEnd:Nu,polygonStart:Nu,polygonEnd:Nu},Zw=[null,null],qw={type:"LineString",coordinates:Zw},Qw={Feature:function(e,t){return ah(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,a=n.length;++r<a;)if(ah(n[r].geometry,t))return!0;return!1}},Kw={Sphere:function(){return!0},Point:function(e,t){return ih(e.coordinates,t)},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,a=n.length;++r<a;)if(ih(n[r],t))return!0;return!1},LineString:function(e,t){return oh(e.coordinates,t)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,a=n.length;++r<a;)if(oh(n[r],t))return!0;return!1},Polygon:function(e,t){return lh(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,a=n.length;++r<a;)if(lh(n[r],t))return!0;return!1},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,a=n.length;++r<a;)if(ah(n[r],t))return!0;return!1}},$w=Iu(),Jw=Iu(),eC={point:Nu,lineStart:Nu,lineEnd:Nu,polygonStart:function(){eC.lineStart=yh,eC.lineEnd=xh},polygonEnd:function(){eC.lineStart=eC.lineEnd=eC.point=Nu,$w.add(dw(Jw)),Jw.reset()},result:function(){var e=$w/2;return $w.reset(),e}},tC=1/0,nC=tC,rC=-tC,aC=rC,iC={point:wh,lineStart:Nu,lineEnd:Nu,polygonStart:Nu,polygonEnd:Nu,result:function(){var e=[[tC,nC],[rC,aC]];return rC=aC=-(nC=tC=1/0),e}},oC=0,lC=0,sC=0,cC=0,uC=0,dC=0,hC=0,fC=0,pC=0,gC={point:Ch,lineStart:kh,lineEnd:Oh,polygonStart:function(){gC.lineStart=Ah,gC.lineEnd=Ph},polygonEnd:function(){gC.point=Ch,gC.lineStart=kh,gC.lineEnd=Oh},result:function(){var e=pC?[hC/pC,fC/pC]:dC?[cC/dC,uC/dC]:sC?[oC/sC,lC/sC]:[NaN,NaN];return oC=lC=sC=cC=uC=dC=hC=fC=pC=0,e}};Lh.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._context.moveTo(e,t),this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,sw)}},result:Nu};var vC,yC,mC,bC,xC,wC=Iu(),CC={point:Nu,lineStart:function(){CC.point=Mh},lineEnd:function(){vC&&zh(yC,mC),CC.point=Nu},polygonStart:function(){vC=!0},polygonEnd:function(){vC=null},result:function(){var e=+wC;return wC.reset(),e}};Ih.prototype={_radius:4.5,_circle:Dh(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._string.push("M",e,",",t),this._point=1;break;case 1:this._string.push("L",e,",",t);break;default:null==this._circle&&(this._circle=Dh(this._radius)),this._string.push("M",e,",",t,this._circle)}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}return null}},Bh.prototype={constructor:Bh,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var kC=16,_C=pw(30*uw),SC=Hh({point:function(e,t){this.stream.point(e*uw,t*uw)}}),OC=lf(function(e){return ww(2/(1+e))});OC.invert=sf(function(e){return 2*Hu(e/2)});var AC=lf(function(e){return(e=ju(e))&&e/bw(e)});AC.invert=sf(function(e){return e}),df.invert=function(e,t){return[e,2*hw(vw(t))-ow]},yf.invert=yf;var PC=1.340264,TC=-.081106,EC=893e-6,LC=.003796,MC=ww(3)/2;wf.invert=function(e,t){for(var n,r,a,i=t,o=i*i,l=o*o*o,s=0;s<12&&(r=i*(PC+TC*o+l*(EC+LC*o))-t,a=PC+3*TC*o+l*(7*EC+9*LC*o),i-=n=r/a,o=i*i,l=o*o*o,!(dw(n)<aw));++s);return[MC*e*(PC+3*TC*o+l*(7*EC+9*LC*o))/pw(i),Hu(bw(i)/MC)]},kf.invert=sf(hw),Af.invert=function(e,t){var n,r=t,a=25;do{var i=r*r,o=i*i;r-=n=(r*(1.007226+i*(.015085+o*(.028874*i-.044475-.005916*o)))-t)/(1.007226+i*(.045255+o*(.259866*i-.311325-.005916*11*o)))}while(dw(n)>rw&&--a>0);return[e/(.8707+(i=r*r)*(i*(i*i*i*(.003971-.001529*i)-.013791)-.131979)),r]},Tf.invert=sf(Hu),Lf.invert=sf(function(e){return 2*hw(e)}),zf.invert=function(e,t){return[-t,2*hw(vw(e))-ow]};var zC=Math.abs,IC=Math.atan,DC=Math.atan2,RC=Math.cos,jC=Math.exp,HC=Math.floor,BC=Math.log,NC=Math.max,FC=Math.min,VC=Math.sin,WC=Math.tan,YC=1e-6,UC=Math.PI,GC=UC/2,XC=UC/4,ZC=(Math.SQRT1_2,Hf(2)),qC=2*UC,QC=180/UC,KC=UC/180;Ff.invert=function(e,t){if(!(e*e+4*t*t>UC*UC+YC)){var n=e,r=t,a=25;do{var i,o=VC(n),l=VC(n/2),s=RC(n/2),c=VC(r),u=RC(r),d=VC(2*r),h=c*c,f=u*u,p=l*l,g=1-f*s*s,v=g?jf(u*s)*Hf(i=1/g):i=0,y=2*v*u*l-e,m=v*c-t,b=i*(f*p+v*u*s*h),x=i*(.5*o*d-2*v*c*l),w=.25*i*(d*l-v*c*f*o),C=i*(h*s+v*p*u),k=x*w-C*b;if(!k)break;var _=(m*x-y*C)/k,S=(y*w-m*b)/k;n-=_,r-=S}while((zC(_)>YC||zC(S)>YC)&&--a>0);return[n,r]}},Gf.invert=function(e,t){var n=2*Rf(t/2);return[e*RC(n/2)/RC(n),n]},qf(ZC/GC,ZC,UC),qf(1,4/UC,UC),op.invert=function(e,t){var n=Hf(UC*(4+UC))/2;return[e*n/(1+Hf(1-t*t*(4+UC)/(4*UC))),t*n/2]},sp.invert=function(e,t){var n=t*Hf((4+UC)/UC)/2,r=Rf(n),a=RC(r);return[e/(2/Hf(UC*(4+UC))*(1+a)),Rf((r+n*(a+2))/(2+GC))]},up.invert=function(e,t){var n=Hf(2+UC),r=t*n/2;return[n*e/(1+RC(r)),r]},hp.invert=function(e,t){var n=1+GC,r=Hf(n/2);return[2*e*r/(1+RC(t*=r)),Rf((t+VC(t))/n)]};var $C=RC(35*KC);pp.invert=function(e,t){var n=t/(1+$C);return[e&&e/($C*Hf(1-n*n)),2*IC(n)]};var JC=vp(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555),ek=vp(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742),tk=vp(5/6*UC,-.62636,-.0344,0,1.3493,-.05524,0,.045);xp.invert=function(e,t){var n,r=e,a=t,i=50;do{var o=a*a;a-=n=(a*(1+o/12)-t)/(1+o/4)}while(zC(n)>YC&&--i>0);i=50,e/=1-.162388*o;do{var l=(l=r*r)*l;r-=n=(r*(.87-952426e-9*l)-e)/(.87-.00476213*l)}while(zC(n)>YC&&--i>0);return[r,a]};var nk=vp(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);kp.invert=function(e,t){return[qC/3*e/Hf(UC*UC/3-t*t),t]},Sp.invert=function(e,t){return[e,2.5*IC(jC(.8*t))-.625*UC]};var rk=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]];[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(e){return e.map(function(e){return rk[e]})});var ak=[],ik=[],ok={point:function(e,t){ak.push([e,t])},result:function(){var e=ak.length?ak.length<2?{type:"Point",coordinates:ak[0]}:{type:"MultiPoint",coordinates:ak}:null;return ak=[],e}},lk={lineStart:Ap,point:function(e,t){ak.push([e,t])},lineEnd:function(){ak.length&&(ik.push(ak),ak=[])},result:function(){var e=ik.length?ik.length<2?{type:"LineString",coordinates:ik[0]}:{type:"MultiLineString",coordinates:ik}:null;return ik=[],e}},sk={polygonStart:Ap,lineStart:Ap,point:function(e,t){ak.push([e,t])},lineEnd:function(){var e=ak.length;if(e){do ak.push(ak[0].slice());while(++e<4);ik.push(ak),ak=[]}},polygonEnd:Ap,result:function(){if(!ik.length)return null;var e=[],t=[];return ik.forEach(function(n){Pp(n)?e.push([n]):t.push(n)}),t.forEach(function(t){var n=t[0];e.some(function(e){if(Tp(e[0],n))return e.push(t),!0})||e.push([t])}),ik=[],e.length?e.length>1?{type:"MultiPolygon",coordinates:e}:{type:"Polygon",coordinates:e[0]}:null}},ck=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];ck.forEach(function(e){e[1]*=1.0144}),Rp.invert=function(e,t){var n=t/GC,r=90*n,a=FC(18,zC(r/5)),i=NC(0,HC(a));do{var o=ck[i][1],l=ck[i+1][1],s=ck[FC(19,i+2)][1],c=s-o,u=s-2*l+o,d=2*(zC(n)-l)/c,h=u/c,f=d*(1-h*d*(1-2*h*d));if(f>=0||1===i){r=(t>=0?5:-5)*(f+a);var p,g=50;do a=FC(18,zC(r)/5),i=HC(a),f=a-i,o=ck[i][1],l=ck[i+1][1],s=ck[FC(19,i+2)][1],r-=(p=(t>=0?GC:-GC)*(l+f*(s-o)/2+f*f*(s-2*l+o)/2)-t)*QC;while(zC(p)>1e-12&&--g>0);break}}while(--i>=0);var v=ck[i][0],y=ck[i+1][0],m=ck[FC(19,i+2)][0];return[e/(y+f*(m-v)/2+f*f*(m-2*y+v)/2),r*KC]};var uk=1e4,dk=-180,hk=dk+1e-4,fk=180,pk=fk-1e-4,gk=-90,vk=gk+1e-4,yk=90,mk=yk-1e-4,bk=4*UC+3*Hf(3),xk=2*Hf(2*UC*Hf(3)/bk),wk=qf(xk*Hf(3)/UC,xk,bk/6);$p.invert=function(e,t){return[e/Hf(1-3*t*t/(UC*UC)),t]};var Ck=Math.acos,kk=Math.asin,_k=Math.atan2,Sk=Math.cos,Ok=Math.max,Ak=Math.min,Pk=Math.PI,Tk=Math.sin,Ek=Math.sqrt,Lk=Pk/180,Mk=180/Pk,zk=function(e){var t=e[0]/2*Lk,n=Tk(t),r=Sk(t),a=e[1]/2*Lk,i=Tk(a),o=Sk(a),l=e[2]/2*Lk,s=Tk(l),c=Sk(l);return[r*o*c+n*i*s,n*o*c-r*i*s,r*i*c+n*o*s,r*o*s-n*i*c]};zk.cartesian=function(e){var t=e[0]*Lk,n=e[1]*Lk,r=Sk(n);return[r*Sk(t),r*Tk(t),Tk(n)]},zk.rotation=function(e){return[_k(2*(e[0]*e[1]+e[2]*e[3]),1-2*(e[1]*e[1]+e[2]*e[2]))*Mk,kk(Ok(-1,Ak(1,2*(e[0]*e[2]-e[3]*e[1]))))*Mk,_k(2*(e[0]*e[3]+e[1]*e[2]),1-2*(e[2]*e[2]+e[3]*e[3]))*Mk]},zk.delta=function(e,t,n){2==arguments.length&&(n=1);var r=eg(e,t),a=Ek(tg(r,r));if(!a)return[1,0,0,0];var i=n*Ck(Ok(-1,Ak(1,tg(e,t))))/2,o=Tk(i);return[Sk(i),r[2]/a*o,-r[1]/a*o,r[0]/a*o]},zk.multiply=function(e,t){return[e[0]*t[0]-e[1]*t[1]-e[2]*t[2]-e[3]*t[3],e[0]*t[1]+e[1]*t[0]+e[2]*t[3]-e[3]*t[2],e[0]*t[2]-e[1]*t[3]+e[2]*t[0]+e[3]*t[1],e[0]*t[3]+e[1]*t[2]-e[2]*t[1]+e[3]*t[0]]};var Ik=Object.freeze({bbox:ag,feature:og,mesh:ug,meshArcs:dg,merge:pg,mergeArcs:gg,neighbors:yg,quantize:bg,transform:rg,untransform:mg}),Dk=Hg.prototype=Bg.prototype;Dk.copy=function(){var e,t,n=new Bg(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=Ng(r),n;for(e=[{source:r,target:n._root=new Array(4)}];r=e.pop();)for(var a=0;a<4;++a)(t=r.source[a])&&(t.length?e.push({source:t,target:r.target[a]=new Array(4)}):r.target[a]=Ng(t));return n},Dk.add=xg,Dk.addAll=Cg,Dk.cover=kg,Dk.data=_g,Dk.extent=Sg,Dk.find=Ag,Dk.remove=Pg,Dk.removeAll=Tg,Dk.root=Eg,Dk.size=Lg,Dk.visit=Mg,Dk.visitAfter=zg,Dk.x=Dg,Dk.y=jg,e.topojson=Ik,e.bisect=Vg,e.bisectRight=Vg,e.bisectLeft=Wg,e.ascending=t,e.bisector=n,e.descending=o,e.extent=s,e.max=p,e.min=v,e.merge=g,e.range=c,e.scan=y,e.sum=m,e.ticks=u,e.tickIncrement=d,e.tickStep=h,e.pairs=a,e.set=C,e.map=x,e.keys=k,e.values=_,e.csvParse=wm,e.csvParseRows=Cm,e.request=Ga,e.json=km,e.scaleBand=Mo,e.scalePoint=Io,e.scaleLinear=Go,e.scaleOrdinal=Lo,e.scaleQuantile=Zo,e.scaleTime=ps,e.scaleUtc=gs,e.scaleLog=Ns,e.scaleSymlog=Ys,e.scaleSqrt=Qs,e.arc=Cc,e.area=Pc,e.line=Ac,e.pie=Lc,e.areaRadial=Rc,e.radialArea=Rc,e.lineRadial=Dc,e.radialLine=Dc,e.pointRadial=jc,e.curveLinear=_c,e.curveLinearClosed=Qc,e.curveCardinal=Cx,e.curveCardinalClosed=kx,e.curveMonotoneX=au,e.curveMonotoneY=iu,e.curveStepAfter=su,e.curveStepBefore=lu,e.linkHorizontal=Wc,e.linkVertical=Yc,e.stack=hu,e.geoStitch=Qp,e.geoProject=Ep,e.geoQuantize=Dp,e.geoAiry=Nf,e.geoAitoff=Vf,e.geoArmadillo=Yf,e.geoMiller=Op,e.geoChamberlinAfrica=np,e.geoCylindricalStereographic=ip,e.geoEckert3=lp,e.geoEckert4=cp,e.geoEckert5=dp,e.geoEckert6=fp,e.geoFahey=gp,e.geoGinzburg4=yp,e.geoGinzburg5=mp,e.geoGinzburg6=bp,e.geoGinzburg8=wp,e.geoGinzburg9=Cp,e.geoHammer=Xf,e.geoKavrayskiy7=_p,e.geoRobinson=jp,e.geoSatellite=Np,e.geoWagner4=Kp,e.geoWagner6=Jp,e.versor=zk,e.axisTop=M,e.axisRight=z,e.axisBottom=I,e.axisLeft=D,e.brush=Na,e.brushX=Ha,e.brushY=Ba,e.brushSelection=ja,e.color=Vt,e.rgb=Gt,e.hsl=Qt,e.lab=en,e.hcl=sn,e.cubehelix=dn,e.dispatch=R,e.drag=Ht,e.dragDisable=Et,e.dragEnable=Lt,e.easeLinear=na,e.easeQuad=ia,e.easeQuadInOut=ia,e.easeQuadIn=ra,e.easeQuadOut=aa,e.easeCubic=sa,e.easeCubicInOut=sa,e.easeCubicIn=oa,e.easeCubicOut=la,e.easePoly=Iy,e.easePolyInOut=Iy,e.easePolyIn=My,e.easePolyOut=zy,e.easeSin=da,e.easeSinInOut=da,e.easeSinIn=ca,e.easeSinOut=ua,e.easeExp=pa,e.easeExpInOut=pa,e.easeExpIn=ha,e.easeExpOut=fa,e.easeCircle=ya,e.easeCircleInOut=ya,e.easeCircleIn=ga,e.easeCircleOut=va,e.easeBounce=ba,e.easeBounceOut=ba,e.easeBounceIn=ma,e.easeBounceInOut=xa,e.easeBack=qy,e.easeBackInOut=qy,e.easeBackIn=Xy,e.easeBackOut=Zy,e.easeElastic=$y,e.easeElasticOut=$y,e.easeElasticIn=Ky,e.easeElasticInOut=Jy,e.formatDefaultLocale=oi,e.formatLocale=ii,e.formatSpecifier=ni,e.precisionFixed=li,e.precisionPrefix=si,e.precisionRound=ci,e.cluster=yi,e.hierarchy=Li,e.pack=ao,e.packSiblings=$i,e.packEnclose=Hi,e.partition=uo,e.stratify=po,e.tree=ko,e.treemap=Oo,e.treemapBinary=Ao,e.treemapDice=co,e.treemapSlice=_o,e.treemapSliceDice=Po,e.treemapSquarify=zm,e.treemapResquarify=Im,e.interpolate=En,e.interpolateArray=kn,e.interpolateBasis=pn,e.interpolateBasisClosed=gn,e.interpolateDate=_n,e.interpolateNumber=Sn,e.interpolateObject=On,e.interpolateRound=Ln,e.interpolateString=Tn,e.interpolateTransformCss=Jv,e.interpolateTransformSvg=ey,e.interpolateZoom=Bn,e.interpolateRgb=Gv,e.interpolateRgbBasis=Xv,e.interpolateRgbBasisClosed=Zv,e.interpolateHsl=iy,e.interpolateHslLong=oy,e.interpolateLab=Fn,e.interpolateHcl=ly,e.interpolateHclLong=sy,e.interpolateCubehelix=cy,e.interpolateCubehelixLong=uy,e.quantize=Yn,e.path=Eo,e.creator=Y,e.local=U,e.matcher=lv;e.mouse=ne,e.namespace=F,e.namespaces=nv,e.clientPoint=te,e.select=_t,e.selectAll=St,e.selection=kt,e.selector=ae,e.selectorAll=le,e.style=Ne,e.touch=Ot,e.touches=At,e.window=De,e.customEvent=J,e.timeInterval=qo,e.timeMillisecond=Um,e.utcMillisecond=Um,e.timeMilliseconds=Gm,e.utcMilliseconds=Gm,e.timeSecond=qm,e.utcSecond=qm,e.timeSeconds=Qm,e.utcSeconds=Qm,e.timeMinute=Km,e.timeMinutes=$m,e.timeHour=Jm,e.timeHours=eb,e.timeDay=tb,e.timeDays=nb,e.timeWeek=rb,e.timeSunday=rb,e.timeWeeks=ub,e.timeSundays=ub,e.timeMonday=ab,e.timeMondays=db,e.timeTuesday=ib,e.timeTuesdays=hb,e.timeWednesday=ob,e.timeWednesdays=fb,e.timeThursday=lb,e.timeThursdays=pb,e.timeFriday=sb,e.timeFridays=gb,e.timeSaturday=cb,e.timeSaturdays=vb,e.timeMonth=yb,e.timeMonths=mb,e.timeYear=bb,e.timeYears=xb,e.utcMinute=wb,e.utcMinutes=Cb,e.utcHour=kb,e.utcHours=_b,e.utcDay=Sb,e.utcDays=Ob,e.utcWeek=Ab,e.utcSunday=Ab,e.utcWeeks=Ib,e.utcSundays=Ib,e.utcMonday=Pb,e.utcMondays=Db,e.utcTuesday=Tb,e.utcTuesdays=Rb,e.utcWednesday=Eb,e.utcWednesdays=jb,e.utcThursday=Lb,e.utcThursdays=Hb,e.utcFriday=Mb,e.utcFridays=Bb,e.utcSaturday=zb,e.utcSaturdays=Nb,e.utcMonth=Fb,e.utcMonths=Vb,e.utcYear=Wb,e.utcYears=Ub,e.timeFormatDefaultLocale=ss,e.timeFormatLocale=tl,e.isoFormat=Qb,e.isoParse=Kb,e.now=Un,e.timer=Zn,e.timerFlush=qn,e.timeout=er,e.interval=tr,e.transition=ea,e.active=ka,e.interrupt=lr,e.zoom=Su,e.zoomTransform=vu,e.zoomIdentity=_x,e.polygonArea=Ou,e.polygonCentroid=Au,e.polygonHull=Lu,e.polygonContains=Mu,e.polygonLength=zu,e.geoArea=qu,e.geoBounds=fd,e.geoCentroid=_d,e.geoCircle=Dd,e.geoClipAntimeridian=Ww,e.geoClipCircle=Zd,e.geoClipExtent=Kd,e.geoClipRectangle=Qd,e.geoContains=uh,e.geoDistance=rh,e.geoGraticule=fh,e.geoGraticule10=ph,e.geoInterpolate=gh,e.geoLength=nh,e.geoPath=Rh,e.geoAlbers=rf,e.geoAlbersUsa=of,e.geoAzimuthalEqualArea=cf,e.geoAzimuthalEqualAreaRaw=OC,e.geoAzimuthalEquidistant=uf,e.geoAzimuthalEquidistantRaw=AC,e.geoConicConformal=vf,e.geoConicConformalRaw=gf,e.geoConicEqualArea=nf,e.geoConicEqualAreaRaw=tf,e.geoConicEquidistant=xf,e.geoConicEquidistantRaw=bf,e.geoEqualEarth=Cf,e.geoEqualEarthRaw=wf,e.geoEquirectangular=mf,e.geoEquirectangularRaw=yf,e.geoGnomonic=_f,e.geoGnomonicRaw=kf,e.geoIdentity=Of,e.geoProjection=Kh,e.geoProjectionMutator=$h,e.geoMercator=hf,e.geoMercatorRaw=df,e.geoNaturalEarth1=Pf,e.geoNaturalEarth1Raw=Af,e.geoOrthographic=Ef,e.geoOrthographicRaw=Tf,e.geoStereographic=Mf,e.geoStereographicRaw=Lf,e.geoTransverseMercator=If,e.geoTransverseMercatorRaw=zf,e.geoRotation=Md,e.geoStream=Yu,e.geoTransform=jh,e.quadtree=Hg,Object.defineProperty(e,"__esModule",{value:!0})});var _get=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in a)return a.value;var o=a.get;return void 0!==o?o.call(r):void 0},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_slicedToArray=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&l.return&&l.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?t(exports,require("@zohocharts/d3")):"function"==typeof define&&define.amd?define(["exports","@zohocharts/d3"],t):t((e=e||self).$ZC={},e.d3)}(this,function(e,t){function n(e){return e.target.depth}function r(e){return e.depth}function a(e,t){return t-1-e.height}function i(e,t){return e.sourceLinks.length?e.depth:t-1}function o(e){return e.targetLinks.length?e.depth:e.sourceLinks.length?gg(e.sourceLinks,n)-1:0}function l(e){return function(){return e}}function s(e,t){return u(e.source,t.source)||e.index-t.index}function c(e,t){return u(e.target,t.target)||e.index-t.index}function u(e,t){return e.y0-t.y0}function d(e){return e.value}function h(e){return e.index}function f(e){return e.nodes}function p(e){return e.links}function g(e,t){var n=e.get(t);if(!n)throw new Error("missing: "+t);return n}function v(e){e.nodes.forEach(function(e){var t=e.y0,n=t;e.sourceLinks.forEach(function(e){e.y0=t+e.width/2,t+=e.width}),e.targetLinks.forEach(function(e){e.y1=n+e.width/2,n+=e.width})})}function y(){function e(){var e={nodes:L.apply(null,arguments),links:M.apply(null,arguments)};return function(e){var t=e.nodes,n=e.links,r=Dg(t,A);t.forEach(function(e,t){e.index=t,e.sourceLinks=[],e.targetLinks=[]}),n.forEach(function(e,t){e.index=t;var n=e.source,a=e.target;"object"!==(void 0===n?"undefined":_typeof(n))&&(n=e.source=g(r,n)),"object"!==(void 0===a?"undefined":_typeof(a))&&(a=e.target=g(r,a)),n.sourceLinks.push(e),a.targetLinks.push(e)}),null!=E&&t.forEach(function(e){var t=e.sourceLinks,n=e.targetLinks;t.sort(E),n.sort(E)})}(e),function(e){e.nodes.forEach(function(e){e.value=void 0===e.fixedValue?Math.max(Lg(e.sourceLinks,d),Lg(e.targetLinks,d)):e.fixedValue})}(e),function(e){var t=void 0,n=void 0,r=void 0,a=e.nodes.length;for(t=e.nodes,n=[],r=0;t.length;++r,t=n,n=[]){if(a<r)throw new Error("circular link");t.forEach(function(e){e.depth=r,e.sourceLinks.forEach(function(e){n.indexOf(e.target)<0&&n.push(e.target)})})}}(e),function(e){var t=void 0,n=void 0,r=void 0,a=e.nodes.length;for(t=e.nodes,n=[],r=0;t.length;++r,t=n,n=[]){if(a<r)throw new Error("circular link");t.forEach(function(e){e.height=r,e.targetLinks.forEach(function(e){n.indexOf(e.source)<0&&n.push(e.source)})})}}(e),function(e){var r=function(e){var t=e.nodes,n=vg(t,function(e){return e.depth})+1,r=(C-x-_)/(n-1),a=new Array(n);return t.forEach(function(e){var t=Math.max(0,Math.min(n-1,Math.floor(P.call(null,e,n))));e.layer=t,e.x0=x+t*r,e.x1=e.x0+_,a[t]?a[t].push(e):a[t]=[e]}),T&&a.forEach(function(e){e.sort(T)}),a}(e);O=Math.min(S,(k-w)/(vg(r,function(e){return e.length})-1)),function(e){var t=gg(e,function(e){return(k-w-(e.length-1)*O)/Lg(e,d)});e.forEach(function(e){var n=w;e.forEach(function(e){e.y0=n,e.y1=n+e.value*t,n=e.y1+O,e.sourceLinks.forEach(function(e){e.width=e.value*t})}),n=(k-n+O)/(e.length+1);for(var r=0;r<e.length;++r){var a=e[r];a.y0+=n*(r+1),a.y1+=n*(r+1)}!function(e){void 0===E&&e.forEach(function(e){var t=e.sourceLinks,n=e.targetLinks;t.sort(c),n.sort(s)})}(e)})}(r);for(var a=0;a<z;++a){var i=Math.pow(.99,a),o=Math.max(1-i,(a+1)/z);n(r,i,o),t(r,i,o)}}(e),v(e),e}function t(e,t,n){for(var a=1,i=e.length;a<i;++a){var o=e[a];o.forEach(function(e){var n=0,r=0;if(e.targetLinks.forEach(function(t){var a=t.source,i=t.value*(e.layer-a.layer);n+=m(a,e)*i,r+=i}),0<r){var a=(n/r-e.y0)*t;e.y0+=a,e.y1+=a,y(e)}}),void 0===T&&o.sort(u),r(o,n)}}function n(e,t,n){for(var a=e.length-2;0<=a;--a){var i=e[a];i.forEach(function(e){var n=0,r=0;if(e.sourceLinks.forEach(function(t){var a=t.target,i=t.value*(a.layer-e.layer);n+=b(e,a)*i,r+=i}),0<r){var a=(n/r-e.y0)*t;e.y0+=a,e.y1+=a,y(e)}}),void 0===T&&i.sort(u),r(i,n)}}function r(e,t){var n=e.length>>1,r=e[n];o(e,r.y0-O,n-1,t),a(e,r.y1+O,1+n,t),o(e,k,e.length-1,t),a(e,w,0,t)}function a(e,t,n,r){for(;n<e.length;++n){var a=e[n],i=(t-a.y0)*r;1e-6<i&&(a.y0+=i,a.y1+=i),t=a.y1+O}}function o(e,t,n,r){for(;0<=n;--n){var a=e[n],i=(a.y1-t)*r;1e-6<i&&(a.y0-=i,a.y1-=i),t=a.y0-O}}function y(e){var t=e.sourceLinks,n=e.targetLinks;void 0===E&&(n.forEach(function(e){return e.source.sourceLinks.sort(c)}),t.forEach(function(e){return e.target.targetLinks.sort(s)}))}function m(e,t){for(var n=e.y0-(e.sourceLinks.length-1)*O/2,r=0,a=e.sourceLinks;r<a.length;r++){var i=a[r],o=i.target,l=i.width;if(o===t)break;n+=l+O}r=0;for(var s=t.targetLinks;r<s.length;r++){var c=s[r];if(o=c.source,l=c.width,o===e)break;n-=l}return n}function b(e,t){for(var n=t.y0-(t.targetLinks.length-1)*O/2,r=0,a=t.targetLinks;r<a.length;r++){var i=a[r],o=i.source,l=i.width;if(o===e)break;n+=l+O}r=0;for(var s=e.sourceLinks;r<s.length;r++){var c=s[r];if(o=c.target,l=c.width,o===t)break;n-=l}return n}var x=0,w=0,C=1,k=1,_=24,S=8,O=void 0,A=h,P=i,T=void 0,E=void 0,L=f,M=p,z=6;return e.update=function(e){return v(e),e},e.nodeId=function(t){return arguments.length?(A="function"==typeof t?t:l(t),e):A},e.nodeAlign=function(t){return arguments.length?(P="function"==typeof t?t:l(t),e):P},e.nodeSort=function(t){return arguments.length?(T=t,e):T},e.nodeWidth=function(t){return arguments.length?(_=+t,e):_},e.nodePadding=function(t){return arguments.length?(S=O=+t,e):S},e.nodes=function(t){return arguments.length?(L="function"==typeof t?t:l(t),e):L},e.links=function(t){return arguments.length?(M="function"==typeof t?t:l(t),e):M},e.linkSort=function(t){return arguments.length?(E=t,e):E},e.size=function(t){return arguments.length?(x=w=0,C=+t[0],k=+t[1],e):[C-x,k-w]},e.extent=function(t){return arguments.length?(x=+t[0][0],C=+t[1][0],w=+t[0][1],k=+t[1][1],e):[[x,w],[C,k]]},e.iterations=function(t){return arguments.length?(z=+t,e):z},e}function m(){}function b(){}function x(e){return xm[e]||bm}function w(e,t){xm[e]=t}function C(e){return arguments.length?void(Am=e):Am}function k(e){return!!(e&&e.constructor&&e.call&&e.apply)}function _(e,t){var n=e.nodeType;if(3==n)t.push(e.textContent.replace(/&/,"&amp;").replace(/</,"&lt;").replace(">","&gt;"));else if(1==n){if(t.push("<",e.tagName),e.hasAttributes())for(var r=e.attributes,a=0,i=r.length;a<i;++a){var o=r.item(a);t.push(" ",o.name,"='",o.value,"'")}if(e.hasChildNodes()){t.push(">");var l=e.childNodes;for(a=0,i=l.length;a<i;++a)_(l.item(a),t);t.push("</",e.tagName,">")}else t.push("/>")}else{if(8!=n)throw"Error serializing XML. Unhandled node of type: "+n;t.push("<!--",e.nodeValue,"-->")}}function S(e){Em(this,{_v:{value:[]}}),e&&e.forEach(this.add,this)}function O(e,t){return-1<(Tm=e._v.indexOf(t))}function A(e){return[e,e]}function P(e,t){e.attr("width",t.width).attr("height",t.height).style("fill-opacity",0).style("stroke",pm)}function T(e,t){return"function"==typeof e?e.apply(null,t):e}function E(e,t){if(null==e||e.constructor!=Object)return null!=t?t:void 0;var n,r="";for(var a in e)e.hasOwnProperty(a)&&((n=e[a])&&n.constructor===Object&&(n=re(n)),r+=null==n||""==n?"$$":n+"_");return r=(r=(r=t+r).replace(/[.-]/g,"_")).replace(/[`~!@#$%^&*( )|+\-=?;:'",.<>{}[\]\\\/\s]/gi,"_")}function L(e,t,n){var r=Mg(e),a=kg().domain([-1,0,1]).range([Mg(r.h,r.s,.1),r,Mg(r.h,r.s,.9)]).interpolate(nv),i=kg().domain(t).range(n);return function(e){return a(i(e))}}function M(e){return e&&(e.isD3Selection&&(e=e.node()),Ee(e))?e.getBBox():{x:0,y:0,height:0,width:0}}function z(e){if(!Am||null==e)return e;var t=document.createElement("div");t.innerHTML=encodeURI(e);var n=t.textContent;return decodeURI(n)}function I(e){if(Am||null==e)return e;var t=document.createElement("div");return t.textContent=z(e),t.innerHTML}function D(e){var t=new RegExp(/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)/g),n=new RegExp(/[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)?/gi);return e.match(t)||e.match(n)}function R(e){return e.slice(0)}function j(){return pg("base").node()?location.href.split(location.search||location.hash||/[?#]/)[0]:""}function H(e,t,n){var r=t.replace(/\[(\w+)\]/g,".$1"),a=(r=r.replace(/^\./,"")).split(".").reduce(function(e,t){return Z(e)?e[t]:e},e);return n?a:Z(a)}function B(e){return!Z(e)}function N(e){return Array.prototype.slice.call(e)}function F(e,t,n){var r=[];for(var a in e)e.hasOwnProperty(a)&&ee(e[a])&&(t?t(e[a])&&r.push(e[a]):r.push(e[a]),n&&(r=r.slice(n[0],n[1])));return r}function V(){var e=N(arguments),t=!0===e[0]&&e.shift(),n=e.shift();if("string"==typeof n){var r=Rm(window,n);n="function"==typeof r?r:n}return"function"==typeof n?t?n.apply(e[0],e.splice(1)):n.apply(void 0,e):n}function W(e,t){return Z(e)?"function"==typeof e?e.call(t):e:null}function Y(e,t){for(var n,r=0,a=e.length;r<a&&(null==n||""===n);r++)e[r]&&(n=e[r][t]);return n}function U(e,t){var n=null==e||""===e?t:e,r=JSON.parse(n);return n="number"==typeof r?parseFloat(r):"boolean"==typeof r?JSON.parse(r):r}function G(e,t,n,r,a,i){var o,l=Qy(a,i),s=r*l/100,c=n*l/100;return o=null==(o=e[t])||""===o?null:o<c?c:s<o?s:parseFloat(o)}function X(e,t){var n=t[0],r=t[1];return!(e<n||r<e)}function Z(e){return null!=e}function q(e){return 0<e}function Q(e){return null==e||"null"==e}function K(e){return e+"".toLocaleLowerCase()==="true"}function $(e){return(e+="").replace(/ /g,"px ")+"px"}function J(e,t){return parseInt(e,t||10)}function ee(e){return e&&"object"===(void 0===e?"undefined":_typeof(e))}function te(e){return Array.isArray?Array.isArray(e):!!e&&e.constructor===Array}function ne(e){return"number"==typeof e&&!isNaN(e)}function re(e,t){return Z(e)?JSON.stringify(e,t):Ey}function ae(e,t){if(!e||!t)return null;var n,r={};for(var a in e)if(e.hasOwnProperty(a)&&t.hasOwnProperty(a)){var i=e[a],o=t[a];if(!i||i.constructor!=Object&&i.constructor!=Array)i==o&&(r[a]=i,n=!0);else{var l=ae(i,o);null!=l&&(r[a]=l,n=!0)}}return n?r:null}function ie(e){var t=zg(e);return(299*t.r+587*t.g+114*t.b)/1e3<128}function oe(e){return ie(e)?"#f8f8f8":"#444444"}function le(e){return null!=e&&e===e.window}function se(e){return le(e)?e:9===e.nodeType&&e.defaultView}function ce(e){var t=e.getBoundingClientRect(),n=e&&e.ownerDocument,r=n.documentElement,a=se(n);return{top:t.top+a.pageYOffset-r.clientTop,left:t.left+a.pageXOffset-r.clientLeft}}function ue(e){return e?e.split(",").reverse().join():e}function de(){return Z(document.visibilityState)&&"visible"!==document.visibilityState}function he(e){for(var t=e.length,n=new Array(t),r=0;r<t;++r)n[r]=r;return n.sort(function(t,n){var r=e[t],a=e[n];return Z(r)||(r=""),Z(a)||(a=""),a.length>r.length?1:a.length<r.length?-1:0}),n}function fe(e){return null===e.offsetParent}function pe(e,t){if("object"!==(void 0===e?"undefined":_typeof(e)))return!1;if(te(e)||"number"==typeof e.length)Array.prototype.forEach.call(e,t);else for(var n in e)e.hasOwnProperty(n)&&t(e[n],n,e)}function ge(e){if(arguments[1]){for(var t=1,n=arguments.length;t<n;t++){var r=arguments[t];for(var a in r)!e[a]&&r.hasOwnProperty(a)&&(e[a]=r[a])}return e}}function ve(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":_typeof(t)));var n=e.prototype;e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),ge(e.prototype,n)}function ye(e,t,n){var r;return e.isD3Selection&&(e=e.node()),"width"===t?Qy(e.offsetWidth,e.scrollWidth)-ye(e,"padding-left")-ye(e,"padding-right"):"height"===t?Qy(e.offsetHeight,e.scrollHeight)-ye(e,"padding-top")-ye(e,"padding-bottom"):((r=window.getComputedStyle(e))&&(r=r.getPropertyValue(t),Hm(n,"opacity"!==t)&&(r=J(r))),r)}function me(e){return e instanceof HTMLElement}function be(e){return te(e)?e:[e]}function xe(e){var t,n,r,a;if(Z(e)){var i=e.toString().split(" ");t=J(Ce([i[0],0])),n=J(Ce([i[1],i[0],0])),r=J(Ce([i[2],i[0],0])),a=J(Ce([i[3],i[1],i[0],0]))}else a=r=n=t=0;return{top:t,right:n,bottom:r,left:a}}function we(e){var t={},n=null!=e?e.toString().split("/"):null,r=null!=n&&null!=n[0]?n[0].split(" "):[],a=null!=n&&null!=n[1]?n[1].split(" "):r;return t.tlx=J(Ce([r[0]])),t.tly=J(Ce([a[0],r[0]])),t.trx=J(Ce([r[1],r[0]])),t.trY=J(Ce([a[1],a[0],r[1],r[0]])),t.brx=J(Ce([r[2],r[0]])),t.bry=J(Ce([a[2],a[0],r[2],r[0]])),t.blx=J(Ce([r[3],r[1],r[0]])),t.bly=J(Ce([a[3],a[1],r[3],r[0]])),t}function Ce(e,t){var n=null,r=e.length,a=0;for(t=Hm(t,0);a<r&&!Z(n);)n=null!=e[a]?e[a]:null,a++;return Hm(n,t)}function ke(e){return e.charAt(0).toUpperCase()+e.slice(1)}function _e(e){var t=e.canvas,n=mm;return t.style.width=t.width+"px",t.style.height=t.height+"px",t.setAttribute("width",t.width*n),t.setAttribute("height",t.height*n),e.scale(n,n),e}function Se(e,t){if(Array.prototype.find)return e.find(t);for(var n=e.length>>>0,r=0;r<n;){var a=e[r];if(t.call(t,a,r,e))return a;r++}}function Oe(e){return e.getRootNode?e.getRootNode():null!=e.parentNode?Oe(e.parentNode):e}function Ae(e){return Pe(Oe(e))}function Pe(e){return"#document-fragment"===e.nodeName&&"ShadowRoot"===e.constructor.name}function Te(e){return Ae(e)||document.body.contains(e)}function Ee(e){return Te(e)&&fg(e).style("display")!==fm}function Le(e){var t=Oe(e);if(Pe(t)){var n="_zc_fakeBody",r=t.querySelector("."+n);return r||((r=document.createElement("div")).className=n,t.appendChild(r)),r}return document.body}function Me(e){return Oe(e).ZC_DOCUMENT_INDEX}function ze(e){if(e.isD3Selection&&(e=e.node()),Z(e)&&Ee(e))return e.getBoundingClientRect();var t={};return t.x=t.y=t.width=t.height=t.top=t.left=t.right=t.bottom=0,t}function Ie(e,t,n){return"string"==typeof e&&-1<e.indexOf("%")?t*+e.replace(/%/g,"")*.01:U(e,n)}function De(e){return Object.getPrototypeOf(e.constructor.prototype)}function Re(e,t){return e.includes?e.includes(t):-1<e.indexOf(t)}function je(e,t){var n=Math.min.apply(Math,t),r=Math.max.apply(Math,t);return n<=e&&e<=r}function He(e){return e in document.documentElement.style}function Be(e){return!Z(e)||0===Object.keys(e).length&&e.constructor===Object}function Ne(e){return{x:e[0][0],y:e[0][1],width:Ky(e[1][0]-e[0][0]),height:Ky(e[1][1]-e[0][1])}}function Fe(e,t){var n=[].concat(_toConsumableArray(new Mm(e).values()));return t&&(n=n.map(t)),n}function Ve(e){return Object.values?Object.values(e):Object.keys(e).map(function(t){return e[t]})}function We(e,t){var n=1<arguments.length&&void 0!==t?t:"height";return e.isD3Selection&&(e=e.node()),"width"===n?e.scrollWidth>e.offsetWidth:e.scrollHeight>e.offsetHeight}function Ye(e){return function(t,n){var r=[];return t.map(function(t,a){e(t)==n&&r.push(a)}),r}}function Ue(e){if(Object.entries)return Object.entries(e);for(var t=Object.keys(e),n=t.length,r=new Array(n);n--;)r[n]=[t[n],e[t[n]]];return r}function Ge(e){return te(e)?[e[0],e[e.length-1]]:e}function Xe(e,t){return e.reduce(function(e,n){return(e[n[t]]=e[n[t]]||[]).push(n),e},{})}function Ze(e,t){function n(n,r){n&&n!==t&&(n.remove&&n.remove(),n.destroy&&n.destroy()),ne(n)&&(clearTimeout(n),clearInterval(n)),e[r]=null,delete e[r]}for(var r in e)Object.hasOwnProperty.call(e,r)&&n.call(e[r],e[r],r,e)}function qe(e,t){return 100*e/t}function Qe(e,t,n){return function(){var r=n.apply(t,arguments);return r===t?e:r}}function Ke(e,t,n,r){for(var a,i=N(arguments).slice(4),o=null,l=0,s=i.length;l<s+1&&(o=Je(r,null,a=l===s?null:Rm(e,i[l]),t,n),!ne(a));l++);return o}function $e(e,t,n){Qm.globalProp={},n.fontL1Size=Ke(e,Qm.fontL1Size,n.fontL1Size,t,"canvas.fontSize"),n.fontL2Size=Ke(e,Qm.fontL2Size,n.fontL2Size,t,"chart.fontSize","canvas.fontSize"),Qm.globalProp.fontL1Color=null,Qm.globalProp.fontL2Color=null,Qm.globalProp.fontL1Family=null,Qm.globalProp.fontL2Family=null,Qm.globalProp.fontL1Style=null,Qm.globalProp.fontL2Style=null,Qm.globalProp.fontL1Weight=null,Qm.globalProp.fontL2Weight=null,Qm.globalProp.textShadow=null;var r=Hm(Rm(e,"chart.plot.animation"),{});return Qm.globalProp.animation={},Qm.globalProp.animation.enabled=!1!==r.enabled,Qm.globalProp.animation.duration=r.duration||null,Qm.globalProp.animation.easingType=r.easingType||null,Qm.globalProp.datalabels={},n.datalabels=null==n.datalabels?{}:n.datalabels,Qm.globalProp.datalabels.enabled=null,n.datalabels.fontSize=Ke(e,Qm.fontL3Size,n.datalabels.fontSize,t,"chart.plot.datalabels.fontSize","chart.fontSize","canvas.fontSize"),Qm.globalProp.datalabels.fontColor=null,Qm.globalProp.datalabels.fontFamily=null,Qm.globalProp.datalabels.fontStyle=null,Qm.globalProp.datalabels.fontWeight=null,Qm.globalProp.events={},Qm.globalProp.events.mouseMove=null,Qm.globalProp.events.mouseOut=null,Qm.globalProp.events.click=null,Qm.globalProp.events.doubleClick=null,n}function Je(e,t,n,r,a){var i=Qy(e.width,e.height),o=H(Sm,"ratio")&&Sm.ratio;"function"==typeof o&&(o=o(e)),t=null==t?o&&!isNaN(o)?o:.038:t;var l=Gy(i*t);Qm.minL1Size=Sm.minsize,Qm.maxL1Size=Sm.maxsize;var s=Qm.minL1Size,c=Qm.maxL1Size;return l=l<s?s:c<l?c:l,null!=n&&(t=J(n)*t/l,l=(l=Gy(i*t))<s?s:c<l?c:l),(a=null==r?null==a?{}:a:r).size=l,a.l1=function(){return a.size},a.l2=function(){return a.size-2},a.l3=function(){return a.size-3},a.l4=function(){return a.size-4},a.l5=function(){return a.size-5},a.l8=function(){return a.size-8},a}function et(e){return{canvas:{fontFamily:Qm.globalProp.fontL1Family,fontColor:Qm.globalProp.fontL1Color,fontSize:e.fontL1Size.l3,fontWeight:Qm.globalProp.fontL1Weight,fontStyle:Qm.globalProp.fontL1Style,title:{show:!0,text:"Title comes here",hAlign:"left",vAlign:"top",marginTop:10,marginRight:0,marginBottom:0,marginLeft:10,target:"newtab",fontSize:e.fontL1Size.l1},subtitle:{show:!0,text:"Description comes here",hAlign:"left",vAlign:"top",marginTop:0,marginRight:0,marginBottom:0,marginLeft:10,target:"newtab",fontSize:e.fontL1Size.l2},background:{alpha:1,color:"#FFFFFF"},border:{show:!0,size:1,style:"solid",radius:1,color:"#cccccc"},shadow:{show:!0,x:1,y:1,color:"rgba(0,0,0,0.1)",blur:2,inset:!1},intelligence:{dimension:{title:100,subtitle:120,xaxis:70,xaxislabel:80,yaxis:70,yaxislabel:80,legend:140,credits:150,marker:50},dataCount:{marker:300,animation:300,datalabels:300}}},legend:{enabled:!0,colorPallete:{type:"multicolor",options:{multicolor:"countries",monochrome:{baseColor:"red",count:5,colorGamma:[.3,.9]}}},hAlign:"right",vAlign:"top",fontSize:e.fontL1Size.l5,textPadding:5,itemMargin:3,marginTop:10,marginRight:10,marginBottom:10,marginLeft:10,colorBox:{shape:"square",strokeWidth:2},colorBand:{},title:{show:!1,text:"Legend",fontSize:e.fontL1Size.l4,keepAligned:!1},background:{color:"transparent",alpha:0},border:{show:!0,size:1,style:"solid",radius:0,color:"transparent"},itemDisabledStyle:{color:"#d1d1d1",patternColor:"#ffffff",strikeout:!1},shadow:{show:!1,color:"rgba(0,0,0,0.3)",x:2,y:2,blur:3,inset:!1},filter:{enabled:!0},highlightEffect:{selectedSeries:null,unselectedSeries:"none"},expandable:{fontSize:e.fontL1Size.l5},size:{}},chart:{marginTop:10,marginRight:10,marginBottom:10,marginLeft:10,fontSize:e.fontL2Size.l3,zoom:{enabled:!1,type:"x"},brush:{enabled:!1,type:"x"},effects:{choice:"auto",options:{dropShadow:{dx:"5",dy:"5",blur:"3",color:"rgba(0,0,0,0.6)"},freeHand:{scale:7}}},plot:{renderer:{mode:window.rendererMode||"svg",image:{source:"auto",addDimensionInSource:!1,exportUrl:""}},background:{alpha:1,color:"transparent",gradients:{show:!1,type:"radial"}},border:{show:!1,size:1,style:"solid",radius:0,color:"#ececec"},animation:{enabled:Qm.globalProp.animation.enabled,easingType:Qm.globalProp.animation.easingType,duration:Qm.globalProp.animation.duration},datalabels:{show:Qm.globalProp.datalabels.enabled,handleOverlapping:!0,fontSize:e.datalabels.fontSize.l5,boundBox:{strokeColor:Qm.fontColor,fillColor:"white"}},events:{cursor:null,click:Qm.globalProp.events.click,mousemove:Qm.globalProp.events.mouseMove,mouseout:Qm.globalProp.events.mouseOut,doubleclick:Qm.globalProp.events.doubleClick,contextmenu:null,init:null,onload:null},plotoptions:{}},axes:et.axes?et.axes(e):{}},map:et.map?et.map():{},tooltip:{enabled:!0,fontSize:e.fontL1Size.l5,opacity:.8,zindex:2e3,view:"normal",crosshair:{type:"none",color:"grey"},pointerEvents:"none"},noDataHandler:{text:"No Data",fontSize:e.fontL1Size.l1},loader:{type:"none",fontSize:e.fontL1Size.l3}}}function tt(e,t,n){var r;switch(e){case"zoom":r=et.zoom(n);break;case"brush":r=et.brush(n);break;case"scroll":r=et.scroll();break;case"legend":r={};break;case"credits":r=et.credits(n);break;case"notes":r=et.notes(n);break;case"bar":r=et.bar();break;case"line":r=et.line();break;case"area":r=et.area();break;case"arearange":r=et.arearange();break;case"scatter":case"geoscatter":r=et.scatter(e);break;case"bubblepie":case"geobubblepie":case"pie":r=et.pie(e);break;case"funnel":r=et.funnel();break;case"web":r=et.web();break;case"pyramid":r=et.pyramid();break;case"sunburst":r=et.sunburst();break;case"dial":r=et.dial(n);break;case"bubble":case"geobubble":r=et.bubble();break;case"packedbubble":r=et.packedbubble();break;case"bullet":r=et.bullet(n);break;case"gantt":r=et.gantt();break;case"treemap":r=et.treemap();break;case"heatmap":r=et.heatmap();break;case"geoheatmap":r=et.geoheatmap();break;case"dotgrid":r=et.dotgrid();break;case"waterfall":r=et.waterfall();break;case"wordcloud":r=et.wordcloud();break;case"size":r=et.sizeLegend?et.sizeLegend(n):{};break;case"color":r=et(n).legend;break;case"boxplot":r=et.boxplot();break;case"sankey":r=et.sankey();break;case"metadata":r={axes:{x:[0],y:[[1]],tooltip:[0,1]},columns:[{dataindex:0,columnname:"",datatype:"numeric"},{dataindex:1,columnname:"",datatype:"numeric"}]}}return r}function nt(e,t,n,r,a){a||(r=tt(e,0,n));var i=null==t[e]?t[e]={}:t[e];return Im(r,i,!0,!0),t[e]=r}function rt(e,t,n){var r=Z($m[e]),a=Hm($m[e],e,null);return Z(a)&&"solid"!==e?(t=r?Hm(t,1):1,n&&(t*=n),a.split(",").map(function(e){return+e*t})):[]}function at(e,t){return e||(t&&/dot/g.test(t)?"round":null)}function it(e,t,n,r,a,i,o,l,s){Jm[e]={type:t||"diagonal-line-right",size:n||5,strokeWidth:r||1,bgClr:i,stroke:a,fillOpacity:o||1,strokeOpacity:l||1,translate:s}}function ot(e){return{ele:e}}function lt(e,t,n,r){var a=e.type;if(a&&a!==fm){var i=e.options[a]||e.options,o=Dm(i);return o.color=null!=n?n:o.color,o.opacity=null!=r?r:o.opacity,o.dimension=null!=t?t:o.dimension,o.type=a,o}}function st(e,t){return t.map(function(t,n){var r=parseInt(t);return e.width%r/(parseInt(e.width/r)||1)+r})}function ct(e){var t=document.createRange();t.selectNode(e);var n=t.getClientRects(),r=n[1]||n[0];return t.detach(),r&&(Km.FIREFOX||Km.SAFARI)&&(r.width=2*r.width,r.height=2*r.height),r||{x:0,y:0,width:0,height:0}}function ut(e){return e.getBoundingClientRect()}function dt(e,t,n,r,a,i,o){var l,s,c=te(e),u=zm.fontUtils.getTextHeight(e,t,n,i,o,a);return c?e.forEach(function(e,a){Z(r)&&r.length&&(t=r[a].fontSize||t,n=r[a].fontFamily||n);var c=zm.fontUtils.getTextWidth(e,t,n,i,o);u=zm.fontUtils.getTextHeight(e,t,n,i,o),l=Z(l)?qy(l,c):c,s=Z(s)?s+1.1*u:u}):(Z(r)&&(t=r.fontSize||t,n=r.fontFamily||n),l=zm.fontUtils.getTextWidth(e,t,n,i,o),s=zm.fontUtils.getTextHeight(e,t,n,i,o,a)),{width:l,height:s}}function ht(e){var t="",n=0,r={"<tspan":[],"</tspan>":[]};return e.replace(/<tspan|<\/tspan>/g,function(){r[arguments[0]].push(arguments[1])}),r["<tspan"].forEach(function(a,i){n!=a&&(t+="<tspan>"+e.substring(n,a)+"</tspan>"),t+=e.substring(a,n=r["</tspan>"][i]+8)}),n!=e.length&&(t+="<tspan>"+e.substring(n,e.length)+"</tspan>"),t}function ft(e,t){e.selectAll("tspan.zcTspan").attr("x",t)}function pt(e,t,n,r,a,i,o,l){var s=+n[0],c=+n[1],u=t.plotarea,d={left:-r,right:-r,top:0,bottom:0},h=ib;o=o||0,a=a||{left:-s+o,top:-c,right:u.width-s-o,bottom:u.height-c},e.each(function(){var e=this.childNodes,t=0,n=M(this),r=this.getComputedTextLength();n.x+r>a.right&&(r-=n.x+r-a.right+o),n.x<a.left&&(r-=a.left-n.x+o);for(var s=0;s<e.length;s++){for(var c=e[s],u=c.childNodes,f=c.getComputedTextLength(),p="",g=0;g<u.length;g++){var v=u[g].textContent;p+=v,i[t+g].textLength=v.length}if(1<f-r){var y=i[t].bbox,m={left:y.x+(l?l[0]:0),top:y.y+(l?l[1]:0),width:f,height:y.height};bt(u[0],p,m,a,h,"..",d,null,null,!1);var b=u[0].innerHTML;".."===b&&(b=""),g=0;for(var x=0;g<u.length;g++){var w=i[t+g].textLength;u[g].innerHTML=b.substring(x,x+w),x+=w}}t+=u.length-1}})}function gt(e,t){var n=e.selectAll(function(){return this.childNodes}),r=e.attr("text-anchor"),a=+e.attr("x"),i=+e.attr("y"),o=[],l=0;return n.each(function(){if(yt(this)){var e=fg(this),n=parseFloat(e.attr("dy")||0),s=this.childNodes,c=this.getComputedTextLength(),u="middle"===r?-c/2:"end"==r?-c:0;l+=n;for(var d=0;d<s.length;d++){var h=s[d].getComputedTextLength(),f={dy:l,dx:u+("middle"===r?h/2:0),bbox:{x:a+u,y:i+l*t,width:s[d].getComputedTextLength(),height:t},style:s[d].style,text:s[d].textContent};o.push(f),u+=h}}}),o}function vt(e,t){return t=t||[],e.each(function(e,n){var r=fg(this).selectAll("*");if(r.size())r.each(function(){vt(fg(this),t)});else{var a=M(this),i=this.nodeName;if(i===Ym){if(""===this.textContent)return;var o=ct(function e(t){return t.parentNode.nodeName!==Wm?e(t.parentNode):t.parentNode}(this)),l=ct(this);a.x+=l.left-o.left,a.y+=l.top-o.top,a.width=l.width,a.height=l.height}t.push({node:this,nodeName:i,bb:a})}}),t}function yt(e){var t=Km.PHANTOMJS||Km.IE?1:0,n=ct(e);return n.width>t&&n.height>t}function mt(e,t,n,r,a,i,o,l){var s;r=r||"",i=i||"";var c=(s=e.selectAll(t+r+i).data(n,l)).enter().append(t).merge(s);return a&&c.attr(a,i),o&&c.styles(o),s.exit().remove(),c}function bt(e,t,n,r,a,i,o,l,s,c){if(null==t||!t.trim()||!e)return t;var u,d;s=s||e,d=l?(u=l.width,l.height):(u=r.right-r.left,r.bottom-r.top);var h=0;if("left"==a||"right"==a?(n.top+n.height-o.bottom>r.bottom&&(h+=(n.top+n.height-o.bottom-r.bottom)/n.height),n.top+o.top<r.top&&(h+=(r.top-(n.top+o.top))/n.height),d=n.height-qy(0,n.top+n.height-o.bottom-r.bottom)-qy(0,r.top-(n.top+o.top))):"bottom"!=a&&"top"!=a||(n.left+n.width-o.right>r.right&&(h+=(n.left+n.width-o.right-r.right)/n.width),n.left+o.left<r.left&&(h+=(r.left-(n.left+o.left))/n.width),u=n.width-qy(0,n.left+n.width-o.right-r.right)-qy(0,r.left-(n.left+o.left))),0<(h=parseFloat(h.toFixed(2)))){var f=Zy((1-h)*t.length);e.textContent=t.substring(0,f-1)+i;var p=("tspan"==s.nodeName?ct:ut)(s);!1===(c="tspan"!=e.nodeName&&c)||p.width==n.width&&p.height==n.height||St(e,s,t,u,d,p,i)}}function xt(e,t,n,r,a,i,o){return{x1:i&&o?e-n:e,y1:i&&!o?t-r:t,x2:i&&o?e:e+n,y2:i&&!o?t:t+r}}function wt(e,t,n,r,a,i,o,l){var s=e,c=t,u=n,d=r;if(!l){var h=xt.apply(this,N(arguments));s=h.x1,c=h.y1,u=h.x2,d=h.y2}return"M"+s+","+(d-(a=Ct(a,n,r)).bly)+"L"+s+","+(c+a.tly)+"A"+a.tlx+","+a.tly+" 0 0 1 "+(s+a.tlx)+","+c+"L"+(u-a.trx)+","+c+"A"+a.trx+","+a.trY+" 0 0 1 "+u+","+(c+a.trY)+"L"+u+","+(d-a.bry)+"A"+a.brx+","+a.bry+" 0 0 1 "+(u-a.brx)+","+d+"L"+(s+a.blx)+","+d+"A"+a.blx+","+a.bly+" 0 0 1 "+s+","+(d-a.bly)+"Z"}function Ct(e,t,n,r){var a,i=Object.create(e),o=i.tlx+i.trx,l=i.trY+i.bry,s=i.brx+i.blx,c=i.tly+i.bly;return n<c&&(a=c/(c-n),i.tly=i.tly-i.tly/a,i.bly=i.bly-i.bly/a),t<o&&(a=o/(o-t),i.tlx=i.tlx-i.tlx/a,i.trx=i.trx-i.trx/a),n<l&&(a=l/(l-n),i.trY=i.trY-i.trY/a,i.bry=i.bry-i.bry/a),t<s&&(a=s/(s-t),i.brx=i.brx-i.brx/a,i.blx=i.blx-i.blx/a),r&&(i.tlx=i.tly=Math.min(i.tlx,i.tly),i.trx=i.trY=Math.min(i.trx,i.trY),i.blx=i.bly=Math.min(i.blx,i.bly),i.brx=i.bry=Math.min(i.brx,i.bry)),i}function kt(e,t,n){var r=zm.getVal(Y(t,"fontSize")),a=Y(t,"fontFamily"),i=Y(t,"fontWeight"),o=Y(t,"fontStyle"),l=Y(t,"textShadow"),s=Y(t,"fontColor"),c=Y(t,"textDecoration"),u=Y(t,"strokeColor"),d=Y(t,"fontOpacity"),h=_defineProperty({"font-size":Z(r)?r+"px":null,"font-family":a,"font-weight":i,"font-style":o,"text-shadow":l,"text-decoration":c,"fill-opacity":d},n?"color":"fill",s);return!n&&u&&(h.stroke=u,h["stroke-width"]=Y(t,"strokeWidth")||3,h["paint-order"]="stroke"),Z(e)?("contrast"===u&&(h.stroke=null),e.styles(h)):h.color=s,h}function _t(e,t){e.append("title").text(function(){return t||this.parentNode.textContent})}function St(e,t,n,r,a,i,o){function l(r){var a="tspan"==e.nodeName?ct:ut;e.textContent=n.substring(0,s-c)+o,r&&(i=a(t))}var s=e.textContent.length-1,c=o.length;if(i.width>r||i.height>a)for(var u=0;u<=s;){if(l(!0),i.width<=r&&i.height<=a)return;s--}else for(u=n.length;s<u;){if(i.width>=r||i.height>=a)return s--,void l(!1);s++}}function Ot(e){return e.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/gi).map(function(e){var t=(e=e.trim()).match(/[a-z]/gi).shift(),n=e.match(/-?[0-9]\d*(\.\d+(e-\d+)?)?/g);return{function:t,moves:n=n&&n.map(function(e){return parseFloat(e)})}})}function At(e,t,n,r){var a=te(t)&&1<t.length,i=r?"html":"text",o=fg(e.node().parentNode);if(a){e.text(null);var l=e.attr("x")||0,s=e.attr("y")||0,c=e.attr("dy")?parseFloat(e.attr("dy")):.71,u=0,d=Z(n)&&Z(n.lineHeight)?n.lineHeight:c,h=Z(n)&&n.orient;d="top"==h?-(t.length-1+d):"left"==h||"right"==h?-(t.length-2+d)/2:d,t.forEach(function(t){if(r)Pt(o,e,t);else{var n=e.append("tspan");n.attr("x",l).attr("y",s).attr("dy",function(e,t){return u++ +d+"em"}),n[i](function(){return t})}})}else r?(e.text(null),Pt(o,e,t)):e[i](t);return e}function Pt(e,t,n){if(/^<image.+<\/image>/i.test(n))mt(e,"g",[1],".","class","image").html(n);else if(/^<tspan.+<\/tspan>/i.test(n)){var r=(new DOMParser).parseFromString('<svg xmlns="'+Rv.svg+'">'+n+"</svg>","application/xml");t.node().appendChild(r.querySelector("tspan"))}else t.append("tspan").text(n)}function Tt(e){var t=e.selectAll("tspan").nodes();if(t&&t.length){var n=[];return t.forEach(function(e){n.push(e.textContent)}),n}return e.node().textContent}function Et(e,t,n,r,a,i){r=r||fg("body");var o,l,s;if(/^[.#]/.test(t)&&(s=t[0],l=t.slice(1),o={".":"class","#":"id"}[s]),a){var c=r.selectAll(e+t).data(n,i),u=c.enter().insert(e,a).merge(c);return c.exit().remove(),u.attr(o,l)}return mt(r,e,n,s,o,l,null,i)}function Lt(e){return e.isD3Selection&&(e=e.node()),!!e.ownerSVGElement}function Mt(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=_extends({transform:"transform",filter:"filter",dashStyle:"stroke-dasharray"},3<arguments.length&&void 0!==arguments[3]?arguments[3]:{}),a=_extends({fillColor:"fill",innerFillColor:"fill",outerFillColor:"fill",fillOpacity:"fill-opacity",innerFillOpacity:"fill-opacity",outerFillOpacity:"fill-opacity",strokeColor:"stroke",innerStrokeColor:"stroke",outerStrokeColor:"stroke",strokeOpacity:"stroke-opacity",innerStrokeOpacity:"stroke-opacity",outerStrokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",innerStrokeWidth:"stroke-width",outerStrokeWidth:"stroke-width",fontWeight:"font-weight",fontStyle:"font-style",textShadow:"text-shadow"},n);return pe(t,function(n,i){r[i]?("dashStyle"===i&&(n=rt(n,t.strokeWidth)),e.attr(r[i],n)):e.style(a[i]||i,n)}),e}function zt(e,t){if(e){var n=e.split(" "),r={dx:parseFloat(n[0]),dy:parseFloat(n[1]),color:n[3],blur:parseFloat(n[2]),x:"-50%",y:"-50%",width:"200%",height:"200%"},a=tb.get(tb.svg_filters,"dropShadow",r,{chartObj:t});return"url("+t.defsLocation+"#"+a+")"}}function It(e){e.isD3Selection&&(e=e.node());for(var t=e.getTotalLength(),n=[],r=0;r<t;r++){var a=e.getPointAtLength(r);n.push([a.x,a.y])}return n}function Dt(e,t){return N(e.querySelectorAll(t))}function Rt(e,t,n,r){return r="html"===(n=n||"text")&&r,e[n](t),r&&ft(e,0),M(e.node())}function jt(e,t,n){return+e.systemConf.canvas.intelligence.dimension[t]<=n}function Ht(e,t){return+e.systemConf.canvas.intelligence.dataCount[t]>=e.dataObject.totalnoofdatas}function Bt(e){return function(t,n,r){if(ix.has(e))return function(e,t,n){return n=Hm(n,"outer"),{"geo-location-1":{outer:"M 0 "+-.9956*t+"C "+-.1506*t+" "+-.9956*t+" "+-.2845*t+" "+-.8718*t+" "+-.2845*t+" "+-.7279*t+"C "+-.2845*t+" "+-.7179*t+" "+-.2845*t+" "+-.7078*t+" "+-.2811*t+" "+-.6978*t+"C "+-.2744*t+" "+-.594*t+" "+-.2209*t+" "+-.5204*t+" "+-.1673*t+" "+-.4401*t+"C "+-.0971*t+" "+-.3363*t+" "+-.0167*t+" "+-.2159*t+" "+-.0167*t+" "+-.0084*t+"C "+-.0167*t+" "+.0017*t+" "+-.01*t+" "+.0084*t+" 0 "+.0084*t+"S "+.0167*t+" "+.0017*t+" "+.0167*t+" "+-.0084*t+"C "+.0167*t+" "+-.2192*t+" "+.0971*t+" "+-.3363*t+" "+.1673*t+" "+-.4401*t+"C "+.2209*t+" "+-.5204*t+" "+.2744*t+" "+-.594*t+" "+.2811*t+" "+-.6944*t+"C "+.2811*t+" "+-.7045*t+" "+.2845*t+" "+-.7145*t+" "+.2845*t+" "+-.7246*t+"C "+.2845*t+" "+-.8718*t+" "+.1506*t+" "+-.9956*t+" 0 "+-.9956*t+"z",inner:"M 0 "+-1.7333*t+"C "+.1267*t+" "+-1.7333*t+" "+.2333*t+" "+-1.6267*t+" "+.2333*t+" "+-1.5*t+"S "+.1267*t+" "+-1.2667*t+" 0 "+-1.2667*t+"S "+-.2333*t+" "+-1.3733*t+" "+-.2333*t+" "+-1.5*t+"S "+-.1267*t+" "+-1.7333*t+" 0 "+-1.7333*t+"z"},"geo-location-2":{outer:"M 0 "+-1*t+"C "+-.1933*t+" "+-1*t+" "+-.35*t+" "+-.8433*t+" "+-.35*t+" "+-.65*t+"C "+-.35*t+" "+-.31*t+" "+-.0233*t+" "+-.0167*t+" "+-.01*t+" "+-.0033*t+"C "+-.0067*t+" 0 "+-.0033*t+" 0 0 0S "+.0067*t+" 0 "+.01*t+" "+-.0033*t+"C "+.0233*t+" "+-.0167*t+" "+.35*t+" "+-.31*t+" "+.35*t+" "+-.65*t+"C "+.35*t+" "+-.8433*t+" "+.1933*t+" "+-1*t+" 0 "+-1*t+"z",inner:"M 0 "+-1.6667*t+"C "+.2*t+" "+-1.6667*t+" "+.3667*t+" "+-1.5*t+" "+.3667*t+" "+-1.3*t+"S "+.2*t+" "+-.9333*t+" 0 "+-.9333*t+"S "+-.3667*t+" "+-1.1*t+" "+-.3667*t+" "+-1.3*t+"S "+-.2*t+" "+-1.6667*t+" 0 "+-1.6667*t+"z"},"geo-pin-1":{outer:"M "+.2167*t+" "+-.7833*t+"C "+.2167*t+" "+-.9033*t+" "+.12*t+" "+-1*t+" 0 "+-1*t+"S "+-.2167*t+" "+-.9033*t+" "+-.2167*t+" "+-.7833*t+"C "+-.2167*t+" "+-.67*t+" "+-.1267*t+" "+-.5767*t+" "+-.0167*t+" "+-.5667*t+"L "+-.0167*t+" "+-.0167*t+"C "+-.0167*t+" "+-.0067*t+" "+-.01*t+" 0 0 0S "+.0167*t+" "+-.0067*t+" "+.0167*t+" "+-.0167*t+"L "+.0167*t+" "+-.5667*t+"C "+.1267*t+" "+-.5767*t+" "+.2167*t+" "+-.67*t+" "+.2167*t+" "+-.7833*t+"z",inner:"M 0 "+-1.8*t+"C "+-.1267*t+" "+-1.8*t+" "+-.2333*t+" "+-1.6933*t+" "+-.2333*t+" "+-1.5667*t+"C "+-.2333*t+" "+-1.5467*t+" "+-.2467*t+" "+-1.5333*t+" "+-.2667*t+" "+-1.5333*t+"S "+-.3*t+" "+-1.5467*t+" "+-.3*t+" "+-1.5667*t+"C "+-.3*t+" "+-1.7333*t+" "+-.1667*t+" "+-1.8667*t+" 0 "+-1.8667*t+"C "+.02*t+" "+-1.8667*t+" "+.0333*t+" "+-1.8533*t+" "+.0333*t+" "+-1.8333*t+"S "+.02*t+" "+-1.8*t+" 0 "+-1.8*t+"z"},"geo-pin-2":{outer:"M "+.304*t+" "+-.6935*t+"C "+.304*t+" "+-.8607*t+" "+.1672*t+" "+-.9975*t+" 0 "+-.9975*t+"S "+-.304*t+" "+-.8607*t+" "+-.304*t+" "+-.6935*t+"C "+-.304*t+" "+-.532*t+" "+-.1786*t+" "+-.4009*t+" "+-.019*t+" "+-.3914*t+"L "+-.019*t+" "+-.019*t+"C "+-.019*t+" "+-.0076*t+" "+-.0114*t+" 0 0 0S "+.019*t+" "+-.0076*t+" "+.019*t+" "+-.019*t+"L "+.019*t+" "+-.3914*t+"C "+.1786*t+" "+-.4009*t+" "+.304*t+" "+-.532*t+" "+.304*t+" "+-.6935*t+"z",inner:"M "+-.038*t+" "+-1.767*t+"C "+-.228*t+" "+-1.767*t+" "+-.38*t+" "+-1.615*t+" "+-.38*t+" "+-1.425*t+"C "+-.38*t+" "+-1.4022*t+" "+-.3648*t+" "+-1.387*t+" "+-.342*t+" "+-1.387*t+"S "+-.304*t+" "+-1.4022*t+" "+-.304*t+" "+-1.425*t+"C "+-.304*t+" "+-1.5732*t+" "+-.1862*t+" "+-1.691*t+" "+-.038*t+" "+-1.691*t+"C "+-.0152*t+" "+-1.691*t+" 0 "+-1.7062*t+" 0 "+-1.729*t+"S "+-.0152*t+" "+-1.767*t+" "+-.038*t+" "+-1.767*t+"z"},"geo-pin-3":{outer:"M "+.9442*t+" "+-.5854*t+"L "+.5451*t+" "+-.9826*t+"C "+.5376*t+" "+-.9901*t+" "+.5264*t+" "+-.9901*t+" "+.5189*t+" "+-.9826*t+"L "+.4196*t+" "+-.8833*t+"C "+.4159*t+" "+-.8795*t+" "+.414*t+" "+-.8758*t+" "+.414*t+" "+-.8702*t+"S "+.4159*t+" "+-.8608*t+" "+.4196*t+" "+-.857*t+"L "+.4721*t+" "+-.8046*t+"L "+.2248*t+" "+-.5554*t+"L "+.1161*t+" "+-.5236*t+"C "+.1105*t+" "+-.5217*t+" "+.1049*t+" "+-.5161*t+" "+.103*t+" "+-.5105*t+"C "+.1012*t+" "+-.5049*t+" "+.103*t+" "+-.4974*t+" "+.1087*t+" "+-.4917*t+"L "+.2473*t+" "+-.3531*t+"L "+-.0244*t+" "+-.0815*t+"C "+-.0431*t+" "+-.0628*t+" "+-.0431*t+" "+-.0328*t+" "+-.0244*t+" "+-.0159*t+"C "+-.015*t+" "+-.0066*t+" "+-.0037*t+" "+-.0028*t+" "+.0094*t+" "+-.0028*t+"S "+.0337*t+" "+-.0084*t+" "+.0431*t+" "+-.0159*t+"L "+.3147*t+" "+-.2876*t+"L "+.4533*t+" "+-.1489*t+"C "+.4571*t+" "+-.1452*t+" "+.4608*t+" "+-.1433*t+" "+.4665*t+" "+-.1433*t+"L "+.4702*t+" "+-.1433*t+"C "+.4758*t+" "+-.1452*t+" "+.4814*t+" "+-.1489*t+" "+.4833*t+" "+-.1564*t+"L "+.5152*t+" "+-.2651*t+"L "+.7643*t+" "+-.5142*t+"L "+.8168*t+" "+-.4618*t+"C "+.8243*t+" "+-.4543*t+" "+.8355*t+" "+-.4543*t+" "+.843*t+" "+-.4618*t+"L "+.9423*t+" "+-.5611*t+"C "+.9498*t+" "+-.5667*t+" "+.9498*t+" "+-.5779*t+" "+.9442*t+" "+-.5854*t+"z",inner:"M "+.0336*t+" "+-.0747*t+"C "+.0299*t+" "+-.0709*t+" "+.0224*t+" "+-.0709*t+" "+.0187*t+" "+-.0709*t+"C "+.0149*t+" "+-.0709*t+" "+.0112*t+" "+-.0709*t+" "+.0037*t+" "+-.0747*t+"C "+-.0037*t+" "+-.0821*t+" "+-.0037*t+" "+-.0933*t+" "+.0037*t+" "+-.1008*t+"L "+.5451*t+" "+-.6421*t+"L "+.5712*t+" "+-.616*t+"L "+.0336*t+" "+-.0747*t+"zM "+1.6539*t+" "+-.9856*t+"L "+1.5493*t+" "+-1.0901*t+"C "+1.5344*t+" "+-1.1051*t+" "+1.512*t+" "+-1.1051*t+" "+1.4971*t+" "+-1.0901*t+"L "+.9707*t+" "+-.5637*t+"C "+.9669*t+" "+-.56*t+" "+.9632*t+" "+-.5525*t+" "+.9595*t+" "+-.5488*t+"L "+.9109*t+" "+-.3845*t+"L "+.3136*t+" "+-.9819*t+"L "+.4555*t+" "+-1.0229*t+"L "+.6757*t+" "+-.8027*t+"C "+.6832*t+" "+-.7952*t+" "+.6944*t+" "+-.7915*t+" "+.7019*t+" "+-.7915*t+"S "+.7205*t+" "+-.7952*t+" "+.728*t+" "+-.8027*t+"C "+.7429*t+" "+-.8176*t+" "+.7429*t+" "+-.84*t+" "+.728*t+" "+-.8549*t+"L "+.5189*t+" "+-1.064*t+"L "+.9931*t+" "+-1.5381*t+"L "+1.176*t+" "+-1.3515*t+"C "+1.1835*t+" "+-1.344*t+" "+1.1947*t+" "+-1.3403*t+" "+1.2021*t+" "+-1.3403*t+"S "+1.2208*t+" "+-1.344*t+" "+1.2283*t+" "+-1.3515*t+"C "+1.2432*t+" "+-1.3664*t+" "+1.2432*t+" "+-1.3888*t+" "+1.2283*t+" "+-1.4037*t+"L "+1.0155*t+" "+-1.6165*t+"L "+.9147*t+" "+-1.7248*t+"L "+1.0603*t+" "+-1.8704*t+"L "+1.7995*t+" "+-1.1312*t+"L "+1.6539*t+" "+-.9856*t+"z"},"geo-flag-1":{outer:"M "+.7417*t+" "+-.6333*t+"C "+.735*t+" "+-.6467*t+" "+.7283*t+" "+-.6567*t+" "+.7217*t+" "+-.67*t+"C "+.7183*t+" "+-.6767*t+" "+.7117*t+" "+-.6833*t+" "+.7083*t+" "+-.69*t+"C "+.695*t+" "+-.7133*t+" "+.6917*t+" "+-.7433*t+" "+.6983*t+" "+-.77*t+"C "+.705*t+" "+-.7933*t+" "+.7183*t+" "+-.8167*t+" "+.735*t+" "+-.84*t+"C "+.7383*t+" "+-.8467*t+" "+.7417*t+" "+-.85*t+" "+.745*t+" "+-.8567*t+"C "+.7583*t+" "+-.8767*t+" "+.755*t+" "+-.9033*t+" "+.7383*t+" "+-.92*t+"C "+.6617*t+" "+-1*t+" "+.5317*t+" "+-1.0233*t+" "+.4283*t+" "+-.9767*t+"C "+.3983*t+" "+-.9633*t+" "+.375*t+" "+-.9467*t+" "+.3483*t+" "+-.93*t+"C "+.3317*t+" "+-.9167*t+" "+.315*t+" "+-.9067*t+" "+.295*t+" "+-.8967*t+"C "+.215*t+" "+-.85*t+" "+.1083*t+" "+-.85*t+" "+.025*t+" "+-.8967*t+"L "+.025*t+" "+-.9667*t+"C "+.025*t+" "+-.9867*t+" "+.0117*t+" "+-1*t+" "+-.0083*t+" "+-1*t+"S "+-.0417*t+" "+-.9867*t+" "+-.0417*t+" "+-.9667*t+"L "+-.0417*t+" "+-.0333*t+"C "+-.0417*t+" "+-.0133*t+" "+-.0283*t+" 0 "+-.0083*t+" 0S "+.025*t+" "+-.0133*t+" "+.025*t+" "+-.0333*t+"L "+.025*t+" "+-.4267*t+"C "+.0683*t+" "+-.41*t+" "+.115*t+" "+-.4*t+" "+.1617*t+" "+-.4*t+"C "+.2183*t+" "+-.4*t+" "+.2783*t+" "+-.4133*t+" "+.3283*t+" "+-.44*t+"C "+.3483*t+" "+-.45*t+" "+.3683*t+" "+-.4633*t+" "+.3883*t+" "+-.4767*t+"C "+.4117*t+" "+-.4933*t+" "+.435*t+" "+-.5067*t+" "+.4583*t+" "+-.52*t+"C "+.525*t+" "+-.55*t+" "+.615*t+" "+-.54*t+" "+.675*t+" "+-.49*t+"C "+.6917*t+" "+-.4767*t+" "+.7117*t+" "+-.4767*t+" "+.7283*t+" "+-.4833*t+"C "+.745*t+" "+-.4933*t+" "+.7583*t+" "+-.51*t+" "+.755*t+" "+-.53*t+"C "+.7583*t+" "+-.5667*t+" "+.755*t+" "+-.6*t+" "+.7417*t+" "+-.6333*t+"z",inner:"M "+.8633*t+" "+-1.1667*t+"C "+.8033*t+" "+-1.14*t+" "+.7567*t+" "+-1.1067*t+" "+.7033*t+" "+-1.0733*t+"C "+.67*t+" "+-1.0467*t+" "+.63*t+" "+-1.0267*t+" "+.5967*t+" "+-1.0067*t+"C "+.43*t+" "+-.9133*t+" "+.2167*t+" "+-.92*t+" "+.05*t+" "+-1.0067*t+"L "+.05*t+" "+-1.6467*t+"C "+.2433*t+" "+-1.5667*t+" "+.4767*t+" "+-1.5733*t+" "+.6633*t+" "+-1.6733*t+"C "+.7033*t+" "+-1.6933*t+" "+.7433*t+" "+-1.72*t+" "+.7833*t+" "+-1.7467*t+"C "+.83*t+" "+-1.78*t+" "+.8767*t+" "+-1.8067*t+" "+.9233*t+" "+-1.8333*t+"C "+1.07*t+" "+-1.9*t+" "+1.25*t+" "+-1.8667*t+" "+1.37*t+" "+-1.7667*t+"L "+1.3633*t+" "+-1.76*t+"C "+1.33*t+" "+-1.7067*t+" "+1.29*t+" "+-1.6533*t+" "+1.27*t+" "+-1.58*t+"C "+1.25*t+" "+-1.4933*t+" "+1.2567*t+" "+-1.4*t+" "+1.3033*t+" "+-1.32*t+"C "+1.31*t+" "+-1.3*t+" "+1.3233*t+" "+-1.2867*t+" "+1.3367*t+" "+-1.2667*t+"S "+1.3633*t+" "+-1.2267*t+" "+1.37*t+" "+-1.2133*t+"C "+1.3833*t+" "+-1.1867*t+" "+1.39*t+" "+-1.16*t+" "+1.39*t+" "+-1.1267*t+"C "+1.2233*t+" "+-1.22*t+" "+1.0233*t+" "+-1.24*t+" "+.8633*t+" "+-1.1667*t+"z"},"geo-flag-2":{outer:"M "+.6456*t+" "+-.928*t+"L "+.0538*t+" "+-.928*t+"L "+.0538*t+" "+-.9818*t+"C "+.0538*t+" "+-.9926*t+" "+.0466*t+" "+-.9998*t+" "+.0359*t+" "+-.9998*t+"L "+-.0359*t+" "+-.9998*t+"C "+-.0466*t+" "+-.9998*t+" "+-.0538*t+" "+-.9926*t+" "+-.0538*t+" "+-.9818*t+"L "+-.0538*t+" "+-.0134*t+"C "+-.0538*t+" "+-.0027*t+" "+-.0466*t+" "+.0045*t+" "+-.0359*t+" "+.0045*t+"L "+.0359*t+" "+.0045*t+"C "+.0466*t+" "+.0045*t+" "+.0538*t+" "+-.0027*t+" "+.0538*t+" "+-.0134*t+"L "+.0538*t+" "+-.4438*t+"L "+.6456*t+" "+-.4438*t+"C "+.6564*t+" "+-.4438*t+" "+.6635*t+" "+-.451*t+" "+.6635*t+" "+-.4618*t+"L "+.6635*t+" "+-.9101*t+"C "+.6635*t+" "+-.9209*t+" "+.6564*t+" "+-.928*t+" "+.6456*t+" "+-.928*t+"z",inner:"M "+.0359*t+" "+-.0717*t+"L "+-.0359*t+" "+-.0717*t+"L "+-.0359*t+" "+-1.9368*t+"L "+.0359*t+" "+-1.9368*t+"L "+.0359*t+" "+-.0717*t+"zM "+1.2553*t+" "+-.9684*t+"L "+.1076*t+" "+-.9684*t+"L "+.1076*t+" "+-1.7933*t+"L "+1.2553*t+" "+-1.7933*t+"L "+1.2553*t+" "+-.9684*t+"z"},"geo-flag-3":{inner:"M "+.664*t+" "+-.5013*t+"L "+.664*t+" "+-.508*t+"C "+.664*t+" "+-.5113*t+" "+.6607*t+" "+-.5113*t+" "+.6607*t+" "+-.5146*t+"C "+.6607*t+" "+-.5146*t+" "+.6607*t+" "+-.5179*t+" "+.6574*t+" "+-.5179*t+"L "+.5412*t+" "+-.664*t+"L "+.6574*t+" "+-.8101*t+"S "+.6574*t+" "+-.8134*t+" "+.6607*t+" "+-.8134*t+"C "+.6607*t+" "+-.8167*t+" "+.664*t+" "+-.8167*t+" "+.664*t+" "+-.82*t+"L "+.664*t+" "+-.841*t+"C "+.664*t+" "+-.8433*t+" "+.664*t+" "+-.8433*t+" "+.6607*t+" "+-.8466*t+"C "+.6607*t+" "+-.8499*t+" "+.6574*t+" "+-.8499*t+" "+.6574*t+" "+-.8532*t+"S "+.654*t+" "+-.8566*t+" "+.654*t+" "+-.8599*t+"C "+.654*t+" "+-.8599*t+" "+.6507*t+" "+-.8599*t+" "+.6507*t+" "+-.8632*t+"C "+.6474*t+" "+-.8632*t+" "+.6474*t+" "+-.8665*t+" "+.6441*t+" "+-.8665*t+"L "+.3685*t+" "+-.8665*t+"L "+.3685*t+" "+-.8964*t+"C "+.3685*t+" "+-.9163*t+" "+.3552*t+" "+-.9296*t+" "+.3353*t+" "+-.9296*t+"L "+.0332*t+" "+-.9296*t+"L "+.0332*t+" "+-.9628*t+"C "+.0332*t+" "+-.9827*t+" "+.0199*t+" "+-.996*t+" 0 "+-.996*t+"S "+-.0332*t+" "+-.9827*t+" "+-.0332*t+" "+-.9628*t+"L "+-.0332*t+" 0L "+.0332*t+" 0L "+.0332*t+" "+-.5312*t+"L "+.2988*t+" "+-.5312*t+"L "+.2988*t+" "+-.498*t+"C "+.2988*t+" "+-.4781*t+" "+.3121*t+" "+-.4648*t+" "+.332*t+" "+-.4648*t+"L "+.6308*t+" "+-.4648*t+"C "+.6341*t+" "+-.4648*t+" "+.6374*t+" "+-.4648*t+" "+.6441*t+" "+-.4681*t+"C "+.6441*t+" "+-.4681*t+" "+.6474*t+" "+-.4681*t+" "+.6474*t+" "+-.4714*t+"C "+.6474*t+" "+-.4714*t+" "+.6507*t+" "+-.4714*t+" "+.6507*t+" "+-.4748*t+"C "+.654*t+" "+-.4748*t+" "+.654*t+" "+-.4781*t+" "+.654*t+" "+-.4814*t+"C "+.654*t+" "+-.4814*t+" "+.6574*t+" "+-.4847*t+" "+.6574*t+" "+-.488*t+"S "+.6574*t+" "+-.4914*t+" "+.6607*t+" "+-.4947*t+"C "+.6607*t+" "+-.498*t+" "+.6607*t+" "+-.498*t+" "+.664*t+" "+-.5013*t+"C "+.6607*t+" "+-.5013*t+" "+.6607*t+" "+-.5013*t+" "+.6607*t+" "+-.5046*t+"C "+.664*t+" "+-.498*t+" "+.664*t+" "+-.5013*t+" "+.664*t+" "+-.5013*t+"z",outer:"M "+.664*t+" "+-.5013*t+"L "+.664*t+" "+-.508*t+"C "+.664*t+" "+-.5113*t+" "+.6607*t+" "+-.5113*t+" "+.6607*t+" "+-.5146*t+"C "+.6607*t+" "+-.5146*t+" "+.6607*t+" "+-.5179*t+" "+.6574*t+" "+-.5179*t+"L "+.5412*t+" "+-.664*t+"L "+.6574*t+" "+-.8101*t+"S "+.6574*t+" "+-.8134*t+" "+.6607*t+" "+-.8134*t+"C "+.6607*t+" "+-.8167*t+" "+.664*t+" "+-.8167*t+" "+.664*t+" "+-.82*t+"L "+.664*t+" "+-.841*t+"C "+.664*t+" "+-.8433*t+" "+.664*t+" "+-.8433*t+" "+.6607*t+" "+-.8466*t+"C "+.6607*t+" "+-.8499*t+" "+.6574*t+" "+-.8499*t+" "+.6574*t+" "+-.8532*t+"S "+.654*t+" "+-.8566*t+" "+.654*t+" "+-.8599*t+"C "+.654*t+" "+-.8599*t+" "+.6507*t+" "+-.8599*t+" "+.6507*t+" "+-.8632*t+"C "+.6474*t+" "+-.8632*t+" "+.6474*t+" "+-.8665*t+" "+.6441*t+" "+-.8665*t+"L "+.3685*t+" "+-.8665*t+"L "+.3685*t+" "+-.8964*t+"C "+.3685*t+" "+-.9163*t+" "+.3552*t+" "+-.9296*t+" "+.3353*t+" "+-.9296*t+"L "+.0332*t+" "+-.9296*t+"L "+.0332*t+" "+-.9628*t+"C "+.0332*t+" "+-.9827*t+" "+.0199*t+" "+-.996*t+" 0 "+-.996*t+"S "+-.0332*t+" "+-.9827*t+" "+-.0332*t+" "+-.9628*t+"L "+-.0332*t+" 0L "+.0332*t+" 0L "+.0332*t+" "+-.5312*t+"L "+.2988*t+" "+-.5312*t+"L "+.2988*t+" "+-.498*t+"C "+.2988*t+" "+-.4781*t+" "+.3121*t+" "+-.4648*t+" "+.332*t+" "+-.4648*t+"L "+.6308*t+" "+-.4648*t+"C "+.6341*t+" "+-.4648*t+" "+.6374*t+" "+-.4648*t+" "+.6441*t+" "+-.4681*t+"C "+.6441*t+" "+-.4681*t+" "+.6474*t+" "+-.4681*t+" "+.6474*t+" "+-.4714*t+"C "+.6474*t+" "+-.4714*t+" "+.6507*t+" "+-.4714*t+" "+.6507*t+" "+-.4748*t+"C "+.654*t+" "+-.4748*t+" "+.654*t+" "+-.4781*t+" "+.654*t+" "+-.4814*t+"C "+.654*t+" "+-.4814*t+" "+.6574*t+" "+-.4847*t+" "+.6574*t+" "+-.488*t+"S "+.6574*t+" "+-.4914*t+" "+.6607*t+" "+-.4947*t+"C "+.6607*t+" "+-.498*t+" "+.6607*t+" "+-.498*t+" "+.664*t+" "+-.5013*t+"C "+.6607*t+" "+-.5013*t+" "+.6607*t+" "+-.5013*t+" "+.6607*t+" "+-.5046*t+"C "+.664*t+" "+-.498*t+" "+.664*t+" "+-.5013*t+" "+.664*t+" "+-.5013*t+"z"},"geo-location-3":{outer:"M "+-.3654*t+" "+-.928*t+"L "+-.3654*t+" "+-.3712*t+"C "+-.319*t+" "+-.1392*t+" "+-.1334*t+" "+-.0928*t+" "+.0058*t+" 0C "+.145*t+" "+-.0928*t+" "+.3306*t+" "+-.1392*t+" "+.377*t+" "+-.3712*t+"L "+.377*t+" "+-.928*t+"C "+.0522*t+" "+-1.0208*t+" "+-.0406*t+" "+-1.0208*t+" "+-.3654*t+" "+-.928*t+"Z",inner:"M "+-.5452*t+" "+-1.392*t+"L "+-.174*t+" "+-1.392*t+"L "+.0116*t+" "+-1.7632*t+"L "+.1972*t+" "+-1.392*t+"L "+.5684*t+" "+-1.392*t+"L "+.29*t+" "+-1.1136*t+"L "+.4756*t+" "+-.6496*t+"L "+.0116*t+" "+-.928*t+"L "+-.4524*t+" "+-.6496*t+"L "+-.2668*t+" "+-1.1136*t}}[e][n]}(e,t,n);switch(e){case"asterisk":return"M0 0 C"+-.25*t+" "+-.65*t+" "+.25*t+" "+-.65*t+" 0 0 C"+.5*t+" "+-.633*t+" "+.65*t+" "+-.117*t+" 0 0 C"+.583*t+" "+.083*t+" "+.583*t+" "+.65*t+" 0 0 C"+.25*t+" "+.65*t+" "+-.25*t+" "+.65*t+" 0 0 C"+-.617*t+" "+.65*t+" "+-.55*t+" "+.017*t+" 0 0 C"+-.483*t+" "+-.05*t+" "+-.583*t+" "+-.717*t+" 0 0 Z";case"bean":return"M0 "+.5*t+" A"+.25*t+" "+.5*t+" 0 0 1 0 "+.5*-t+" A"+.15*t+" "+.25*t+" 0 0 1 1 0 A"+.15*t+" "+.25*t+" 0 0 1 0 "+.5*t;case"butterfly":return"M0 "+.25*-t+" C0 "+.25*-t+" "+.85*t+" "+-t+" "+.3*t+" "+.25*t+" C"+.6*t+" "+.7*t+" 0 "+.4*t+" 0 "+.4*t+" M0 "+.25*-t+" C0 "+.25*-t+" "+.85*-t+" "+-t+" "+.3*-t+" "+.25*t+" C"+.6*-t+" "+.7*t+" 0 "+.4*t+" 0 "+.4*t+" M0 "+.25*-t+" L"+.1*t+" "+.5*-t+" M0 "+.25*-t+" L"+.1*-t+" "+.5*-t;case"clover":return"M"+.033*t+" "+-.033*t+" C"+-.133*t+" "+-.966*t+" "+1.066*t+" "+-.116*t+" "+.1*t+" "+.033*t+" C"+.933*t+" "+.233*t+" "+-.133*t+" "+.9*t+" "+.016*t+" "+.083*t+" C"+-.633*t+" "+.6*t+" "+-.6*t+" "+-.6*t+" "+.033*t+" "+-.033*t+" Z";case"cloverFour":return"M"+.05*-t+" "+.05*-t+" C"+.4*-t+" "+.6*-t+" "+.4*t+" "+.6*-t+" "+.05*t+" "+.05*-t+" C"+.6*t+" "+.4*-t+" "+.6*t+" "+.4*t+" "+.05*t+" "+.05*t+" C"+.4*t+" "+.6*t+" "+.4*-t+" "+.6*t+" "+.05*-t+" "+.05*t+" C"+.6*-t+" "+.4*t+" "+.6*-t+" "+.4*-t+" "+.05*-t+" "+.05*-t+" Z";case"cross":return"M"+-t/2+" "+.2*-t+" L"+.2*-t+" "+.2*-t+" L"+.2*-t+" "+-t/2+" L"+.2*t+" "+-t/2+" L"+.2*t+" "+.2*-t+" L"+t/2+" "+.2*-t+" L"+t/2+" "+.2*t+" L"+.2*t+" "+.2*t+" L"+.2*t+" "+t/2+" L"+.2*-t+" "+t/2+" L"+.2*-t+" "+.2*t+" L"+-t/2+" "+.2*t+" Z";case"diamond":return"M"+.4*-t+" 0 L0 "+-t/2+" L"+.4*t+" 0 L0 "+t/2+" Z";case"ellipse":return"M"+.5*-t+" 0 A"+.5*t+" "+.35*t+" 0 0 1 "+.5*t+" 0 A"+.5*t+" "+.35*t+" 0 0 1 "+.5*-t+" 0";case"gear":return"M"+-.088*t+" "+-.365*t+" L"+-.084*t+" "+-.471*t+" L"+.092*t+" "+-.471*t+" L"+.097*t+" "+-.369*t+" L"+.194*t+" "+-.317*t+" L"+.27*t+" "+-.386*t+" L"+.409*t+" "+-.263*t+" L"+.339*t+" "+-.189*t+" L"+.364*t+" "+-.088*t+" L"+.478*t+" "+-.088*t+" L"+.478*t+" "+.097*t+" L"+.369*t+" "+.097*t+" L"+.325*t+" "+.192*t+" L"+.394*t+" "+.265*t+" L"+.254*t+" "+.396*t+" L"+.197*t+" "+.325*t+" L"+.092*t+" "+.364*t+" L"+.092*t+" "+.476*t+" L"+-.084*t+" "+.476*t+" L"+-.084*t+" "+.364*t+" L"+-.185*t+" "+.32*t+" L"+-.263*t+" "+.394*t+" L"+-.388*t+" "+.26*t+" L"+-.317*t+" "+.192*t+" L"+-.354*t+" "+.097*t+" L"+-.473*t+" "+.097*t+" L"+-.473*t+" "+-.091*t+" L"+-.356*t+" "+-.091*t+" L"+-.317*t+" "+-.189*t+" L"+-.384*t+" "+-.258*t+" L"+-.267*t+" "+-.384*t+" L"+-.184*t+" "+-.312*t+" L"+-.088*t+" "+-.365*t+" Z";case"heart":return"M0 "+.2*-t+" C"+.65*t+" "+.65*-t+" "+.65*t+" "+.2*t+" 0 "+.45*t+" C"+.65*-t+" "+.2*t+" "+.65*-t+" "+.65*-t+" 0 "+.2*-t+"Z";case"star":return"M0 "+.5*-t+" L"+.122*t+" "+.12*-t+" L"+.5*t+" "+.12*-t+" L"+.197*t+" "+.12*t+" L"+.306*t+" "+.5*t+" L0 "+.274*t+" L"+.306*-t+" "+.5*t+" L"+.197*-t+" "+.12*t+" L"+.5*-t+" "+.12*-t+" L"+.122*-t+" "+.12*-t+" Z";case"malteseCross":return"M"+.3*-t+" "+.4*-t+" A"+.3*t+" "+.1*t+" 0 0 1 "+.3*t+" "+.4*-t+" L"+.2*t+" "+.2*-t+" L"+.4*t+" "+.3*-t+" A"+.1*t+" "+.3*t+" 0 0 1 "+.4*t+" "+.3*t+" L"+.2*t+" "+.2*t+" L"+.3*t+" "+.4*t+" A"+.3*t+" "+.1*t+" 0 0 1 "+.3*-t+" "+.4*t+" L"+.2*-t+" "+.2*t+" L"+.4*-t+" "+.3*t+" A"+.1*t+" "+.3*t+" 0 0 1 "+.4*-t+" "+.3*-t+" L"+.2*-t+" "+.2*-t+" Z";case"square":n=+t;var a=+Hm(r,0);return Z(r)?wt(-n/2,-n/2,n,n,we(a)):"M"+.5*-t+" "+.5*-t+" L"+.5*t+" "+.5*-t+" "+.5*t+" "+.5*t+" "+.5*-t+" "+.5*t+" Z";case"triangle-up":return"M"+.5*-t+" "+.285*t+" L0 "+.43*-t+" "+.5*t+" "+.285*t+" Z";case"triangle-down":return"M0 "+.43*t+" L"+.5*-t+" "+.285*-t+" L"+.5*t+" "+.285*-t+" Z";case"triangle-right":return"M"+.5*-t+" "+.43*-t+" L"+.285*t+" 0 L"+.5*-t+" "+.43*t+" Z";case"triangle-left":return"M"+.5*t+" "+.43*t+" L"+.285*-t+" 0 L"+.5*t+" "+.43*-t+" Z";case"arrow":return"M"+.5*-t+" "+.2*t+" L0 "+.5*-t+" "+.5*t+" "+.2*t+" "+.25*t+" "+.2*t+" "+.25*t+" "+.5*t+" "+.25*-t+" "+.5*t+" "+.25*-t+" "+.2*t+" Z";case"rocket":return"M"+.5*-t+" "+.5*t+" L0 "+.5*-t+" "+.5*t+" "+.5*t+" 0 "+.25*t+" "+.5*-t+" "+.5*t+" Z";case"nylon":return"M"+-t/2+" "+-t/4+" L"+-t/4+" "+-t/4+" L"+-t/4+" "+-t/2+" M"+-t/4+" 0 L"+-t/4+" "+t/4+" L0 "+t/4+" M0 "+-t/4+" L"+t/4+" "+-t/4+" L"+t/4+" 0 M"+t/4+" "+t/2+" L"+t/4+" "+t/4+" L"+t/2+" "+t/4;case"waves":return"M"+-t+" 0 C"+7*-t/8+" "+-t/4+" "+5*-t/8+" "+-t/4+" "+-t/2+" 0 C"+3*-t/8+" "+-t/4+" "+-t/8+" "+-t/4+" 0 0 C"+t/8+" "+t/4+" "+3*t/8+" "+t/4+" "+t/2+" 0 C"+5*t/8+" "+-t/4+" "+7*t/8+" "+-t/4+" "+3*t/4+" 0";case"woven":return"M"+-t/4+" "+-t/4+" L"+t/4+" "+t/4+" M"+t/4+" "+-t/4+" L"+t/2+" "+-t/2+" M"+-t/4+" "+t/4+" L"+-t/2+" "+t/2+" M"+t/4+" "+3*t/4+" L"+3*t/4+" "+t/4;case"crosses":return"M "+-t/4+" "+-t/4+" L"+t/4+","+t/4+" M"+-t/4+","+t/4+" L"+t/4+","+-t/4;case"caps":return"M"+-t/4+" "+t/4+" L0 "+-t/4+" "+t/4+" "+t/4;case"hexagons":return"M"+-t/2+" 0 L"+-t/4+" 0 M"+t/2+" 0 L"+t/4+" "+-t/2+" L0 "+-t/2+" L"+-t/4+" 0 L0 "+t/2+" L"+t/4+" "+t/2+"Z";case"line":case"horizontal-line":return"M"+.5*-t+" 0 L"+.5*t+" 0";case"diagonal-line-right":return"M"+3*-t/4+" "+-t/4+" L"+-t/4+" "+3*-t/4+" M"+-t/2+" "+t/2+" L"+t/2+" "+-t/2+" M"+t/4+" "+3*t/4+" L"+3*t/4+" "+t/4;case"vertical-line":return"M0 "+-t/2+" L0 "+t/2;case"vertical-line-z":return"M0 0 L0 "+t;case"hexagon":return"M"+.433*t+" "+.25*t+" L"+0*t+" "+.5*t+" L"+-.433*t+" "+.25*t+" L"+-.433*t+" "+-.26*t+" L"+0*t+" "+-.5*t+" L"+.433*t+" "+-.26*t+" Z";case"diagonal-line-left":return"M"+3*-t/4+" "+t/4+" L"+-t/4+" "+3*t/4+" M"+-t/2+" "+-t/2+" L"+t/2+" "+t/2+" M"+t/4+" "+3*-t/4+" L"+3*t/4+" "+-t/4;case"oval":return"M"+-t/2+" 0 A"+t/2+" "+t/2+" 0 0 1 0 "+-t/2+" A"+t/2+" "+t/2+" 0 0 1 "+-t/2+" 0";case"rect":var i=+t,o=+Hm(n,0);return a=+Hm(r,0),Z(r)?wt(-i/2,-o/2,i,o,we(a)):"M"+-i/2+" "+-o/2+" L"+i/2+" "+-o/2+" L"+i/2+" "+o/2+" L"+-i/2+" "+o/2+"Z";case"ninja":return"M"+-.267*t+" "+-.367*t+" L"+.167*t+" "+-.133*t+" L"+.433*t+" "+-.267*t+" L"+.2*t+" "+.167*t+" L"+.333*t+" "+.433*t+" L"+-.1*t+" "+.167*t+" L"+-.367*t+" "+.333*t+" L"+-.167*t+" "+-.1*t+" Z";case"whiskers":return function(e,t,n,r){return Bt(e)(t)+" Z "+Bt(n)(r)}("line",t,r.symbol,r.size);case"whisker":return Wt(t,Hm(n,8),!1);case"horizontal-whisker":return Wt(Hm(t,8),n,!0);case"half-circle":return"M"+-t/2+" "+t/4+" A"+t/2+" "+t/2+" 0 0 1 "+t/2+" "+t/4+" Z";default:return"M"+-t/2+" 0 A"+t/2+" "+t/2+" 0 0 1 "+t/2+" 0 A"+t/2+" "+t/2+" 0 0 1 "+-t/2+" 0"}}}function Nt(e,t,n,r,a){var i,o=r.color,l=r.strokeWidth,s=r.imageSize,c=r.transform,u=Bt(n.symbol||r.symbol),d=null!=n.imageUrl&&""!==n.imageUrl,h=U(n.size,U(l,1)),f=h*r.symbolSize.outer,p=h*r.symbolSize.inner,g=null!=c?"translate("+c[0]+","+c[1]+")":null,v=(null!=t?h:f)*(null!=s?s:10);null!=t?(i=mt(a.getPatternSvg().select("defs"),"marker",[1],"#","id",t)).attrs({id:t,orient:0,viewBox:10*-h/2+" "+10*-h/2+" "+10*h+" "+10*h,markerUnits:"userSpaceOnUse",markerWidth:10*h,markerHeight:10*h}):i=e;var y=n.animation,m=i.selectAll("path.outer").nodes().length,b=mt(i,"path",[1],".","class","outer"),x={fill:function(){if(d){var e={name:n.imageUrl,width:v,height:v,x:-v/2,y:-v/2};return"url("+j()+"#"+tb.get(tb.svg_patterns,"imageFill",e,{chartObj:a})+")"}return n.outerFillColor||o},"fill-opacity":n.outerFillOpacity,stroke:n.outerStrokeColor||o,"stroke-opacity":n.outerStrokeOpacity,"stroke-width":n.outerStrokeWidth,"stroke-dasharray":rt(n.outerDashStyle,n.outerStrokeWidth),"stroke-linecap":at(n.outerLineCap,n.outerDashStyle)};b.attrs({d:u(d?v:10*f,null,r.custom),transform:g}),!m&&y&&y.enabled?b.styles({"stroke-opacity":0}).transition().delay(y.duration).duration(y.duration).styles(x):b.styles(x);var w=[1],C=n.innerFillColor||o;return!d&&(0!==n.innerStrokeWidth||0!==n.innerFillOpacity&&"transparent"!==C)||(w=[]),mt(i,"path",w,".","class","inner").attrs({d:u(10*p,"inner",r.custom),transform:g}).styles({fill:n.innerFillColor||o,"fill-opacity":n.innerFillOpacity,stroke:n.innerStrokeColor||o,"stroke-opacity":n.innerStrokeOpacity,"stroke-width":n.innerStrokeWidth,"stroke-dasharray":rt(n.innerDashStyle,n.innerStrokeWidth),"stroke-linecap":at(n.innerLineCap,n.innerDashStyle)}),i}function Ft(e){var t={left:0,top:0,right:0,bottom:0},n=e.behaviouralEvents&&e.behaviouralEvents.eventManager.behaviours||{};if(!e.isAxisCategory||n.PLOT_ZOOM||n.PLOT_BRUSH||n.CHART_SCROLL)return t;var r=e.systemConf.chart.axes.xaxis,a=e.systemConf.chart.axes.yaxis,i=null!=r.minRange&&""!==r.minRange,o=null!=r.maxRange&&""!==r.maxRange,l=a.some(function(e){return null!=e.minRange&&""!==e.minRange}),s=a.some(function(e){return null!=e.maxRange&&""!==e.maxRange});if(i&&o&&l&&s)return t;var c=e.axes.rotated,u=e.systemConf.chart.plot.plotoptions,d=e.canvasarea,h=vg(e.seriesdata.map(function(t,n){var r=t.plotoptions,a=0,i=e.chartTypes[n].name,o=zm.getValueOfPlotOptions(r?r.marker:null,u[i].marker);return/(area|arearange|line)/.test(i)&&o("enabled")&&Ht(e,"marker")&&jt(e,"marker",Qy(d.width,d.height))?a=U(o("size"),U(r?r.strokeWidth:u[i].strokeWidth,1)):i===kb&&(a=U(o("size"),2)),10*a}))/2;return{left:(c?l:i)?t.left:h,top:(c?o:s)?t.top:h,right:(c?s:o)?t.right:h,bottom:(c?i:l)?t.bottom:h}}function Vt(e,t,n){if(Km.IE&&t.enabled)!function(e,t,n){var r=Z(n)?n-1:t.repeat||1/0;if(!e.node()||!r)return e.styles({transform:null,opacity:null});var a=(t.type||"twinkle")===Yb,i=(t.duration||800)/2,o=bg(t.easingType),l=i,s=a?500:0,c=a?0:i,u=a?{transform:"scale(1)",opacity:0}:{transform:"scale(0)"},d=a?{transform:"scale(0)",opacity:1}:{transform:"scale(1)"};e.transition(),e.attrs(d).transition().delay(s).duration(l).ease(o).attrs(u).transition().duration(c).ease(o).attrs(d).on("end",function(){Vt(e,t,r)})}(e,t);else{var r={animation:vm,opacity:vm,transform:vm};if(t.enabled){var a=Z(t.repeat)?t.repeat:"infinite",i=t.type||"twinkle",o=(t.duration||800)/1e3,l=("fade"===i?250:0)/1e3,s=t.easingType||"linear",c=mt(fg(Le(n.container.node())).selectAll("div.__baseZC_Container__"),"style",[1]).node(),u="",d="ZC"+E(t,"blink");switch(i){case"twinkle":u="\n@keyframes "+d+" { 0% {transform: scale(1);}50% {transform: scale(0);}100% {transform: scale(1);} }\n";break;case"fade":u="\n@keyframes "+d+" { 0% {transform: scale(0);opacity: 1;}100% {transform: scale(1);opacity: 0;} }\n",e.styles({transform:"scale(0)",opacity:1})}var h=Me(n.container.node()),f=ym[h].ANIMATION;f&&Z(f[d])||(c.innerHTML+=u,f[d]=!0),e.style("animation",d+" "+o+"s "+s+" "+l+"s "+a).on("animationend",function(){fg(this).styles(r)})}else e.styles(r)}}function Wt(e,t,n){function r(e){return function(){return arguments[0][0]+e}}var a=Bt("line")(e),i=Bt("vertical-line")(t);if(n){var o=/ (\d)+/g;return i+" "+a.replace(o,r(-t/2))+" "+a.replace(o,r(t/2))}var l=/M(\d)+|L(\d)+/g;return a+" "+i.replace(l,r(-e/2))+" "+i.replace(l,r(e/2))}function Yt(e){return Ve(e.hierarchical.pivotLayout.getRootNodeList("layer").panes)}function Ut(e,t){function n(e){var t=a[e].index===e?e:a.filter(function(t){return t.index===e})[0];r+=a[t].data.length}for(var r=0,a=Ve(e),i=0;i<t;i++)n(i);return r}function Gt(e,t,n){this.data=e,this.dataset=t,this.chartObj=n,this.allChartTypes=null,this.globalChartType=null,this.processedseriesData=n.seriesdata,this.initialize()}function Xt(e,t,n){var r=t.dataset.getDataType("clr");return Zt(e.colorBand,r,n)}function Zt(e,t,n){var r=e.ranges,a=Dm(r),i=t===ox;return te(a[0])||(a=a.map(function(e){return[e]})),i||n||a.sort(function(e,t){return Wg(e[0],t[0])}),a}function qt(e,t){var n=e.colorBand,r=t.dataset.getDataType("clr");return n.type?n.type:n.ranges||r===ox?"discrete":"continuous"}function Qt(e,t,n,r){if(null==t){var a="y"==n?"row":"column";t=r.dataObject.hierarchical.pivotLayout.getRootNodeList(a).getClustersCount()}return e%t}function Kt(e,t,n){var r=n.dataObject.hierarchical,a=(n.dataObject.categoryHierarchy,"y"==e?"row":"column");if(r){var i=r.pivotLayout.getRootNodeList(a);if(i.getCount()||i.hasMultiCluster()){var o=i.getClustersCount(),l=(i.getLeavesCount(),Jt(e,t,n)),s=Qt(t,o);return l?s:0}return t}return t}function $t(e,t,n){var r="x"==e?"column":"row";return n.dataObject.hierarchical.pivotLayout.getRootNodeList(r).getLeavesCount()-1<t}function Jt(e,t,n){var r="x"==e?"column":"row";return t<n.dataObject.hierarchical.pivotLayout.getRootNodeList(r).getLeavesCount()}function en(e,t,n){return t==n.getAxesCount(e)-1}function tn(e,t,n){return"x"==e?en(e,t,n):Jt(e,t,n)||en(e,t,n)}function nn(e,t,n,r,a){var i=r.dataObject.hierarchical;if(i&&i.pivot){if("y"==e&&Jt(e,t,r)){var o="x"==e?"column":"row",l=r.dataObject.hierarchical.pivotLayout.getRootNodeList(o),s={};return s["left"==n||"right"==n?"height":"width"]=2*(l.leafSize*t+l.leafSize/2),s}return a}return a}function rn(e){var t=e.dataObject;if(!t)return!1;var n=t.hierarchical;return n&&n.pivot}function an(e){return e===Kv.area||e===Kv.stkdarea||e===Kv.arearange}function on(e){return Py.bubble.has(e)||Py.bubblePie.has(e)}function ln(e,t,n,r){if(e.dataObject.categoryHierarchy&&e.dataObject.hierarchical.pivot){t=t||(r?r.row+"_"+r.column:"0_0");var a=e.dataObject.hierarchical.gridOptions;return a[t].chartTypes[n]||a[t].chartTypes[0]}return e.chartTypes[n]||e.chartTypes[0]}function sn(e){return Rg(e.distinctChartTypes)}function cn(e,t,n){return rn(e)?Re(Py[{axis:"axis",polarAxis:"polarAxis",nonAxisMultiSeries:"nonaxismultiseries",hierarchy:"hierarchy"}[n]],t):e.dataObject[{axis:"isAxisCategory",polarAxis:"isPolarAxisCategory",nonAxisMultiSeries:"isNonAxisMultiSeriesCategory",hierarchy:"isHierarchy"}[n]]}function un(e){return function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"z-0";return hn(t.legends,n)===e}}function dn(e,t){var n=void 0;return t.some(function(r,a){var i=t.length-1-a,o=t[i];if(e>=o[0]&&e<=o[1])return n=i,!0}),n}function hn(e,t){var n=e.get(t);return n&&n.meta.view}function fn(e,t,n){var r=1<arguments.length&&void 0!==t?t:"z",a=!(2<arguments.length&&void 0!==n)||n,i=gn(e,r),o=e.hoverOptions,l=e.itemHoverStyle,s=("clr"===r?l:o)||{};return(a?s[i]:null)||s}function pn(e,t){var n=1<arguments.length&&void 0!==t?t:"z",r=gn(e,n),a=e.filter,i=e.itemDisabledStyle,o=("clr"===n?i:a)||{};return o[r]||o}function gn(e,t){var n=e.ranges;return e.type||(n?fx:"z"===t?hx:px)}function vn(e,t){var n=t.config,r=t.scale,a=t.columnKey,i=n.nullAs;return e===Ey&&(e=vm),B(e)&&Z(i)&&(i==="{{min("+a+")}}"?r&&(e=r.domain()[0]):e=i),e}function yn(e,t,n){if(!e)return!1;var r=e.data||e,a=t.dataset.getClr(r),i=km.getComponent("color.isWithinColorRange"),o=Hm(r.seriesIndex,e.index,n),l=Gt.helpers.getChartType,s=Z(o)&&on(l(null,sx,o,t.userdata)),c=Hm(r.seriesIndex,r.seriesPos,e._seriesIndex,t.dataObject.isHierarchy||t.dataObject.pivot?null:e.index,n);if(Z(c)&&Bn(t,r&&r.paneid,c))return!1;if(!i(a,t))return!1;if(t.dataObject.hasZaxis&&s&&!km.getComponent("size.isWithinSizeEncode")(r,t))return!1;if(t.dataObject.isFlowChartCategory){var u=t.renderer[0];if(u&&u.highlighter)return u.highlighter.isVisible(r.point||r)}return!0}function mn(e,t,n,r,a,i){var o=5<arguments.length&&void 0!==i?i:{},l=o.range,s=o.condition,c=void 0===s?function(){return!0}:s,u=a.ranges;if(!r)return!0;var d={config:a,scale:r,columnKey:n.dataset.getColumnIdx(t)};e=vn(e,d);var h=l||a.filter.range,f=n.dataset.getDataType(t),p=r.domain(),g=function(){if(h){if(f===ox)return Re(h,e);if(u&&u.length&&te(h[0])){var t=dn(e,u);return!(Z(t)&&u[t].disabled)}return bn(e,h)}return!0}();return(f===ox?Re(p,e):bn(e,[p[0],p[p.length-1]]))&&g&&null!==r(e)&&c(e)}function bn(e,t){return e>=t[0]&&e<=t[1]}function xn(e,t,n){var r=e.dataObject.hierarchical;if(e.dataObject.categoryHierarchy&&r.pivot&&t){t=t||"0_0";var a=e.dataObject.hierarchical.gridOptions[t].colors;return a[n%a.length]}return e.seriesColor[n%e.seriesColor.length]}function wn(e,t,n){var r=e.imagePallete;if(r){var a=e.dataObject.hierarchical;return e.dataObject.categoryHierarchy&&a&&a.pivot&&n?(n=n||"0_0",r[a.gridOptions[n].renderer[t].commonRendererProp().params.legendIndex%r.length]):r[t%r.length]}}function Cn(e){var t=e.match(By);return t&&5===t.length?"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2):e}function kn(e,t){t=Hm(t,1);var n=zg(e);return"rgba("+n.r+","+n.g+","+n.b+","+t*n.opacity+")"}function _n(e,t,n,r){return e===pm?e:(n=Hm(n,"darker"),Hm(r,zg)(e)[n](t).toString())}function Sn(e,t,n,r,a,i,o,l){function s(a,i,s,u,f,p,w,C,k){var _,S=i&&e.dataset.getClr(i),O=o&&o.type;if(r=p||r,a=Math.max(a,0)||0,u)_=u;else if(l&&l.paneColor)_=l.paneColor;else if(_=Ln(e,a,i,t,n),a=dx.getItemIndex(e,x,i,a),x&&(!Pn(S,e)||B(a))&&0===zg(_).opacity)return _;if(_=Hn(e,n,t,_),"canvas"!=b||O||_ instanceof Object||(_=kn(_,f)),m&&/(url|data)/.test(_))return _;if(Z(s)&&(_=_n(_,s).toString()),v&&v.length&&Pn(S,e)){var A={name:wn(e,a,n),width:w&&w.width||e.patternImageSizes[a%y][0],height:w&&w.height||e.patternImageSizes[a%y][1],mode:b,context:w&&w.context},P="svg"==b||C?tb.get(tb.svg_patterns,"imageFill",A,{returnSVGimage:C,chartObj:e}):tb.get(tb.canvas_patterns,"imageFill",A,{returnSVGimage:C,chartObj:e});return"canvas"==b?P:"url("+c+"#"+P+")"}if(m)return A=function(e,t,n,r,a){var i=Jm[e]?eb(e):ot(e);return i.bgClr_base=t,i.stroke_base=t,i.fillOpacity=i.fillOpacity||n,i.customStaticClr=a,r&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height),i}(g[a%m],_,f,w=Z(e.userdata.legend.useCustomPatternDimension)&&!e.userdata.legend.useCustomPatternDimension?e.userdata.legend.useCustomPatternDimension:w,e.userdata.legend.customPatternColor),P="svg"==b||C?tb.get(tb.svg_patterns,"svgPatternFill",A,{returnSVGimage:C,chartObj:e}):tb.get(tb.canvas_patterns,"canvasPatternFill",A,{returnSVGimage:C,chartObj:e}),C||"canvas"==b?P:"url("+c+"#"+P+")";if(dx.isQuantileColorScale(e)&&Z(k)&&an(h)){var T=l?l.rendererIndex:t;o=Dn(e,e.renderer[T].seriesdataAfterUpdate[k],t)}return r&&o&&o.type?On(o,r,_,b,f,d,C,e):_}var c=e.defsLocation,u=ln(e,n,t),d=u.name,h=u.value,f=e.systemConf.chart.plot.plotoptions[d],p=(e.seriesdata[t]||e.seriesdata[0]).plotoptions,g=(o=o||(p&&p.gradients?Im(f.gradients,p.gradients,!0):f.gradients),e.patternPallete),v=e.imagePallete,y=v&&v.length,m=!a&&g&&g.length,b=i||e.plot.renderer.mode,x=dx.getIndexScale(e);return s.gradientOptions=o,s}function On(e,t,n,r,a,i,o,l){var s,c=lt(e,t,n,a),u={offset:i,chartObj:l};return s="svg"===r?tb.get(tb.svg_gradients,"svgGradientFill",c,u):tb.get(tb.canvas_gradients,"canvasGradientFill",c,{offset:i,chartObj:l,returnSVGimage:o}),o||"canvas"===r?s:"url("+l.defsLocation+"#"+s+")"}function An(e,t,n,r,a){var i,o=e.defsLocation,l=ln(e,n,t),s=l.value,c=l.name,u=an(s),d=s===Kv.line,h=(e.seriesdata[t]||e.seriesdata[0]).plotoptions,f=e.systemConf.chart.plot.plotoptions[c],p=d&&h&&h.gradients?Im(f.gradients,h.gradients,!0):f.gradients,g=dx.isQuantileColorScale(e),v=e.plot.renderer.mode;return function(l,s,y,m,b,x){var w=g&&Z(x)&&(d||u&&!(h&&h.strokeColor||f.strokeColor)),C=d&&p.type;if(w){var k=a?a.rendererIndex:t;p=Dn(e,e.renderer[k].seriesdataAfterUpdate[x],t)}if(r&&(w||C)){var _=y||Mn(e,t,n),S=lt(p,r,_,b),O={offset:c,chartObj:e},A="svg"==v?tb.get(tb.svg_gradients,"svgGradientFill",S,O):tb.get(tb.canvas_gradients,"canvasGradientFill",S,{offset:c,chartObj:e});return"canvas"==v?A||_:"url("+o+"#"+A+")"}return y?i=y:(l=Math.max(l,0)||0,_=Ln(e,l,s,t,n),Z(m)&&(_=_n(_,m).toString()),i=_),i=Hn(e,n,t,i),"canvas"!=v||i instanceof Object||(i=kn(i,b)),i}}function Pn(e,t,n,r,a){n=n||t.axes.clr.scale;var i=t.systemConf.legend;return mn(e,"clr",t,n,i,{condition:function(e){return!(B(i.colorBand.nullAs)&&null==e)},range:a})}function Tn(e,t,n){if(!e||!e.dummy&&e.disabled)return t;var r=n.systemConf.legend;if(!Pn(n.dataset.getClr(e),n))return En(t,r.filter.track);if(n.dataObject.hasZaxis){var a=Se(n.scales,function(e){return"z-0"===e.id}).config;if(!km.getComponent("size.isWithinSizeEncode")(e,n))return En(t,pn(a).track)}return!0}function En(e,t){var n=1<arguments.length&&void 0!==t?t:{},r=U(n.fillOpacity,1),a=n.fillColor||pm;return 0===(r=zg(a).opacity*r)?pm:kg().domain([0,1]).range([e,Cn(a)]).interpolate(nv)(r)}function Ln(e,t,n,r,a){var i=Mn(e,t,a=a||n&&n.paneid),o=cn(e,ln(e,a,0).value,"axis")&&Z(r)&&e.rendererConf&&e.rendererConf[r].params,l=(e.seriesdata[Hm(r,t)]||e.seriesdata[0]).colorFinder,s=void 0;return Z(l)&&Z(s=V(l,e,t,n,r))?s:(s=o&&o.categoryColorConfig?dx.getWaterfallColor(n,o.categoryColorConfig,i):o&&o.colorOverlay?function(e,t,n,r){var a=t.yaxiscolumnorder,i=t.threshold,o=t.thresholdType,l=e.dataset,s="x"==o?l.getX(n):l.getY(n,a);return t.colorOverlay(i,o,s,r)}(e,o,n,i):n&&dx.isQuantileColorScale(e)?zn(e,n):n&&n.arcColor?te(n.arcColor)?n.arcColor[0]:n.arcColor:i,yn(n,e,r)||(s=Tn(n,s,e)),s=Hn(e,a,r,s))}function Mn(e,t,n,r){if(e.imagePallete)return wn(e,t,n);if(e.dataObject&&e.dataObject.categoryHierarchy&&r){var a=e.dataObject.hierarchical.legendOptions[r],i=e.imagePallete||a.colors;return i[t%i.length]}return xn(e,n,t)}function zn(e,t){var n=e.dataset.getClr(t),r=e.axes.clr.scale;return n===Ey&&(n=null),r(n)}function In(e,t){return e.multiColoring&&!t.legendarea.show}function Dn(e,t,n){var r,a,i,o,l,s,c=e.axes.rotated,u=e.systemConf.chart.axes.xaxis.reversed,d=e.axes.x.scale,h=d.range(),f="rgba(255,255,255,0)",p="discrete"===e.systemConf.legend.colorBand.colorModeOnPlot,g=d.bandwidth?d.bandwidth()/2:0,v=kg().domain([h[0]+g,h[h.length-1]-g]).range([0,100]),y=[],m=[];t.forEach(function(t){if(o=+v(d(e.dataset.getX(t))+g).toFixed(2),l=zn(e,t),yn(t,e,n)||(l=Tn(t,l,e)),(s=l===pm)&&(l=f),p||!i&&!s||(Z(r)&&(m.push(Qy(100,r+.1)+"%"),y.push(f)),m.push(qy(0,o-.1)+"%"),y.push(f)),p&&a)if(i)m.push(qy(0,o-.1)+"%"),y.push(a);else if(s)m.push(Qy(100,r+.1)+"%"),y.push(l);else{var c=(o+r)/2;m.push(c+"%"),y.push(a),m.push(c+"%"),y.push(l)}m.push(o+"%"),y.push(l),r=o,a=l,i=s});var b={type:"linear",options:{linear:{gradientUnits:"userSpaceOnUse",x1:0,x2:0,y1:0,y2:0,stopColor:y,stopOffset:m}}},x=c?u?"y2":"y1":u?"x1":"x2";return b.options.linear[x]=100,b}function Rn(e,t,n,r){var a=n.dataCount;return n.reverseColor?a-1-e:(r.isAxisCategory||r.isNonAxisMultiSeriesCategory||r.dataObject.isPolarAxisCategory||r.isGeoMap)&&!n.multiColoring?t:e}function jn(e,t){if(e.isGeoMap)return!1;if(!rn(e))return!1;var n=Z(t)?e.dataObject.hierarchical.gridOptions[t].chartTypes.map(function(e){return e.name}):sn(e).values();return e.userdata.facets.color.length&&n.some(function(e){return Re([Tb,Lb,Mb],e)})}function Hn(e,t,n,r){if(Bn(e,t,n)){var a=e.dataObject.hierarchical.gridOptions[t].legendOrder||0;return En(r,e.legends.get("clr-"+a).meta.config.filter.track)}return r}function Bn(e,t,n){var r=ln(e,t,0).name;if(rn(e)&&t&&(!Re([Tb,Lb,Mb],r)||e.userdata.facets.color.length))return Gt.helpers.getSeriesdata(e,t,n).filtered}function Nn(e,t){var n=t.x-e.x,r=t.y-e.y;return Jy($y(n,2)+$y(r,2))}function Fn(e,t){var n=Nn(e,t),r=e.r,a=t.r;return n+a==r||n+a<r}function Vn(e,t){var n=_slicedToArray(e,3),r=n[0],a=n[1],i=n[2],o=_slicedToArray(t,2),l=Nn({x:r,y:a},{x:o[0],y:o[1]});return i<=l?l-i:i-l}function Wn(e,t){var n=e.x,r=e.y,a=e.r,i=t.x,o=t.y,l=t.r;if(Fn(e,t)||Fn(t,e))return[];if(a===l){var s=im((o-r)/(i-n));return[[n+a*tm(s),r-a*em(s)],[i+a*tm(s),o-a*em(s)],[n-a*tm(s),r+a*em(s)],[i-a*tm(s),o+a*em(s)]]}var c=(i*a-n*l)/(a-l),u=(o*a-r*l)/(a-l),d=$y(c-n,2)+$y(u-r,2),h=$y(c-n,2)+$y(u-r,2)-$y(a,2),f=$y(a,2)*(c-n),p=a*(u-r)*Jy(h),g=$y(a,2)*(u-r),v=a*(c-n)*Jy(h),y=$y(c-i,2)+$y(u-o,2),m=$y(c-i,2)+$y(u-o,2)-$y(l,2),b=$y(l,2)*(c-i),x=l*(u-o)*Jy(m),w=$y(l,2)*(u-o),C=l*(c-i)*Jy(m);return[[n+(f+p)/d,r+(g-v)/d],[i+(b+x)/y,o+(w-C)/y],[n+(f-p)/d,r+(g+v)/d],[i+(b-x)/y,o+(w+C)/y]]}function Yn(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[{x:0,y:0},{x:0,y:0}],r=e.map(function(e,r){var a=void 0,i=void 0,o=void 0,l=void 0;pe(e,function(e){t?e[0]<0&&e[1]<0?(!a||a[1]>e[1])&&(a=e):0<=e[0]&&e[1]<0?(!i||i[1]>e[1])&&(i=e):0<=e[0]&&0<=e[1]?(!o||o[1]<e[1])&&(o=e):(!l||l[1]<e[1])&&(l=e):e[0]<0&&e[1]<0?(!a||a[0]>e[0])&&(a=e):0<=e[0]&&e[1]<0?(!i||i[0]<e[0])&&(i=e):0<=e[0]&&0<=e[1]?(!o||o[0]<e[0])&&(o=e):(!l||l[0]>e[0])&&(l=e)});var s=t?0==r?[i,o]:[a,l]:0==r?[o,l]:[i,a];return pe(s,function(e){e&&(e[0]+=n[r].x,e[1]+=n[r].y)}),s});return[r[0][0],r[1][0],r[0][1],r[1][1]]}function Un(e,t){return!(e.x1>t.x2||t.x1>e.x2||e.y1>t.y2||t.y1>e.y2)}function Gn(e,t,n,r,a){var i=Z(e)&&Z(e.events)&&e.events,o=t.events,l=n.systemConf.chart.plot.events;Z(a)&&(o=t[a.type]&&t[a.type].events);var s=Z(i)&&Z(i[r])?i[r]:Z(o)&&Z(o[r])?o[r]:null!=l?l[r]:null;return void 0===s&&l&&(s=l[r]),s}function Xn(e){return e.changedTouches?e.changedTouches[0]:e}function Zn(e){return e===Kv.bar||e===Kv.stkdbar||e===Kv.bullet||e===Kv.gantt||er(e)&&e!==Kv.geoheatmap||e===Kv.waterfall||e===Kv.boxplot}function qn(e){return-1!=Py.dotPlot.indexOf(e)}function Qn(e){return Py.bubble.has(e)||Py.bubblePie.has(e)}function Kn(e){return ar(e,bb)}function $n(e){return qn(e)||e===Kv.bubblepie}function Jn(e){return e===Kv.sunburst}function er(e){return e===Kv.heatmap||e===Kv.geoheatmap}function tr(e){return-1!=Py.piePlot.indexOf(e)}function nr(e){return tr(e)&&e!==Kv.pie}function rr(e){return e===Kv.geoheatmap}function ar(e,t){return(ne(e)?Ay.get(e):e)===t}function ir(e,t,n,r,a){var i,o,l,s,c=e.dataset,u=e.systemConf.chart.plot.plotoptions.heatmap,d=u.symbol&&Bt(u.symbol),h=c.getX(t),f=c.getY(t,a),p=e.dataObject.hasZaxis?e.dataObject.getXYvalue(null,null,null,null,null,t,"z"):1,g=n.bandwidth(),v=r.bandwidth(),y=u.padding||0,m=g-2*Qy(y,.4*g),b=v-2*Qy(y,.4*v);return e.axes.rotated?(l=b*p,s=m*p,d&&(l=s=Qy(l,s)),o=n(h)+(g-s)/2,i=r(f)+(v-l)/2):(l=m*p,s=b*p,d&&(l=s=Qy(l,s)),i=n(h)+(g-l)/2,o=r(f)+(v-s)/2),{x:i,y:o,width:l,height:s}}function or(e,t,n,r){if(dx.isQuantileColorScale(e)||rn(e)){var a=ln(e,r,0).value===Kv.pyramid,i=jn(e)?e.dataObject.hierarchical.pivotLayout.getRootNodeList("layer").panes[r].data:rn(e)?Gt.helpers.getSeriesdata(e,r,0).data[0]:a?e.seriesdata[0].data[0]:vm,o=dx.getIndexScale(e);t.style("pointer-events",function(t,l){var s,c=a?i.length-1-l:Hm(t&&t.seriesIndex,l),u=a&&i?i[c]:t.data||t,d=zm.getVal(n,arguments);if(rn(e)){var h=e.dataObject.isHierarchy?t&&t.seriesIndex||u&&u.seriesIndex||u&&u.seriesPos||u&&u._seriesIndex||0:jn(e)?c:dx.getItemIndex(e,o,u,c);s=Bn(e,r,h)}if(d||!yn(a?u:t,e)||s)return fm})}}function lr(e,t,n,r,a,i,o,l,s,c,u,d){var h=null,f=a.plotarea,p=a.plotarea_approx,g=a.eventHandler.isSingleSource(),v=i&&i.yaxisOrder||0,y=a.systemConf.chart.axes.yaxis[v].reversed;if(i=i||{},l&&function(e){return e.systemConf.tooltip.crosshair.type!=fm}(a))o?h={actLeft:n+f.left,actTop:t.y+f.top,top:t.y,left:c?f.width:t.x}:(h={top:0,actTop:f.top+r},c?(h.left=t.x,h.actLeft=t.x+f.left):(h.left=n,h.actLeft=f.left+n));else if(c||!g)if(h={left:t.x,top:t.y},o){var m=y?0:i&&i._width||0;h.actLeft=n+m+f.left,h.actTop=t.y+f.top}else{var b=y&&i&&i._height||0;h.actLeft=t.x+f.left,h.actTop=r+b+f.top}else{var x=ln(a,i.paneid,i.seriesIndex||0).value;(a.dataObject.isFlowChartCategory||Re(Py.nonAxisSingleSourceEvent,x))&&(n=t.x,r=t.y),h={left:n,top:r,actLeft:f.left+n,actTop:f.top+r}}var w=t.x-e.clientX,C=t.y-e.clientY;return h.dLeft=w+f.left,h.dTop=C+f.top,h.left-=w,h.top-=C,h.distance=a.dataObject.isBubbleEnabled&&!c&&i._size?i._size/2:0,g||(h.dLeft=w,h.dTop=C),h.helpers={seriesindex:i.seriesIndex,subseriespos:te(i.subSeriesIndex)?i.subSeriesIndex[i.seriesIndex]:i.subSeriesIndex,subseriesLength:te(i.subseriesLength)?i.subseriesLength[i.seriesIndex]:i.subseriesLength,itempos:Hm(i.categoryIndex,i.sortedItemIndex,i.itemIndex),paneid:i.paneid,itemposShared:i.itemPosShared,color:a.seriesColor,tooltipSharedInfo:s,tooltipShared:l,svgFillFunc:d||a.renderer[i.seriesIndex]&&a.renderer[i.seriesIndex].fillColorFunc,inheritColors:a.dataObject.isWaterfallEnabled,d:(a.dataObject.isHierarchy||!g)&&(i.data&&i.data.data||i.data)||i,renderTo:"plot",isWithinPlot:!(!c&&g&&!a.dataObject.isPolarAxisCategory)||cr(a.plotarea.left+n,a.plotarea.top+r,{x:a.plotarea.left+(a.scrolledX||0),y:a.plotarea.top+(a.scrolledY||0),width:a.plotarea.width,height:a.plotarea.height})},u&&(h.dLeft+=p.x,h.dTop+=p.y),h}function sr(e,t){return e.userdata.metadata.columns.filter(function(e){return e.dataindex===t.dataindex})[0]}function cr(e,t,n){return gx.pointInRectangle({x:e,y:t},n)}function ur(e,t,n){var r=null,a=e.systemConf.chart.plot.plotoptions[Ay.get(t)],i=$n(t)||t===Kv.line,o=!i,l=a&&a.events&&a.events.triggerOffset;return r=Z(l)?l:Qn(t)||"bubble"==t?3===arguments.length?n:(e.zscale?e.zscale.range()[1]/2:10)+(e.dataObject.isCombinationalChart?10:50):o||e.systemConf.tooltip.sharedSeriesInfo?null:e.dataObject.isCombinationalChart&&i?10:50}function dr(e,t){var n=yn(t,e),r=!function(e,t){var n=e.dataset,r=Gt.helpers,a=r.isCatNull(n,"x"),i=r.isCatNull(n,"y",t.yaxisOrder);if(e.seriesdata[0].type==Kv.stkdarea)return!1;if(t){var o=ln(e,t.paneid,t.seriesindex).value;if(Re(Py.nonAxisSingleSourceEvent,o))return!1}return null==t||a(n.getX(t))||i(n.getY(t,t.yaxisOrder))}(e,t),a=!t._filter;return n&&r&&a}function hr(e){var t="x",n="y";return e&&(t="y",n="x"),[t,n]}function fr(e){return e.chartTypes[0].name===Nb}function pr(e){return{left:-e.scrolledX||0,top:-e.scrolledY||0,right:gr(e,"width"),bottom:gr(e,"height")}}function gr(e,t,n,r){n=n||e.plotarea;var a=r||n[t],i=e.systemConf.chart[t];return null==i||isNaN(i)?a:qy(a,+i)}function vr(e,t,n,r,a){var i=1<H(t.dataObject,"hierarchical.pivotLayout.layers.groups.length",!0),o=function(e,t,n){if(rn(e)){var r=!1;return e.legends.forEach(function(a){if("clr"===a.meta.encode){var i=e.legend.state&&e.legend.state[a.id]||{allSelected:!0};r=r||(Z(t)&&a.id==="clr-"+n?t:!a.enabled||i.allSelected)}}),r}var a=e.legend.states||{};return Hm(t,a.allSelected)}(t,r,a);if(rn(t)&&i){var l=Et("svg",".zc-fade-overlay-svg",[1],t.container.selectAll(".canvas-component")),s=Et("rect",".zc-fade-overlay",[1],Et("g",".zc-fade-overlay-clip-holder",[1],l));if(l.attrs({version:"1.1",xmlns:Rv.svg}).styles({position:"absolute",left:0,top:0,width:t.getChartDimension("width"),height:t.getChartDimension("height"),"box-sizing":"border-box","pointer-events":"none"}),!o)return yr(!1,t,n),mr(t,!1),void s.style("visibility","hidden");yr(!0,t,n);var c,u="",d=Yt(t.dataObject),h=0;d.forEach(function(e){var i=t.rendererConf[h].params,o=i.bound,l=(i.yaxiscolumnorder,e.row),s=e.layer,c=e.data,d=t.legend.state["clr-"+s],f=Z(r)&&"clr-"+s=="clr-"+a?r:d.allSelected;mr(t,!f,n,"y-axis-"+l),u+=f?"":function(e,t){var n=t.x,r=t.y,a=t.width,i=t.height,o=e.plotarea,l=o.left,s=o.top;return"M"+(l+n)+" "+(s+r)+" L"+(l+n+a)+" "+(s+r)+" L"+(l+n+a)+" "+(s+r+i)+" L"+(l+n+a)+" "+(s+r+i)+" L"+(l+n)+" "+(s+r+i)+" Z"}(t,o),h+=c.length});var f={d:u,name:"zc-legend-selectAll",id:t.id};c=u?tb.get(tb.svg_clips,"polygon",f,{chartObj:t}):null,s.attrs({x:t.plotarea.left,y:t.plotarea.top,width:gr(t,"width"),height:gr(t,"height"),transform:"translate("+(-t.scrolledX||0)+","+(-t.scrolledY||0)+")","clip-path":c?"url("+t.defsLocation+"#"+c+")":null}).styles({fill:"white",opacity:1-n,visibility:c?null:"hidden"})}else yr(o,t,n)}function yr(e,t,n){var r=t.container.selectAll("g.chartgroup,svg.static,canvas.zc-canvas,canvas.zc-labelholder-canvas,div.zcnotes");r.style("opacity",e?vm:n),wr(r,e?vm:["opacity"])}function mr(e,t,n,r){(r?e.container.selectAll("g."+r):e.container.selectAll("g.y-axis").selectAll(function(){return this.childNodes})).style("opacity",t?n:null)}function br(e){var t=xr(e),n=t.vAlign,r=t.hAlign,a=0,i=0;return"horizontal"===t.layout?"top"===n||"bottom"===n?(a=xx,i=mx):"center"===n&&(a=wx,i=yx):"left"===r||"right"===r?(a=bx,i=yx):"center"===r&&(a=xx,i=Cx),{width:a,height:i}}function xr(e){var t=e.hAlign,n=e.vAlign,r=e.layout,a=e.x,i=e.y,o=Z(a)&&Z(i);return"center"===t&&"center"===n&&(t="right"),o&&(t=rb,n=ob),Z(r)||(r=o?"vertical":"top"===n||"bottom"===n?"horizontal":"vertical"),{hAlign:t,vAlign:n,layout:r,floating:o}}function wr(e,t){var n=1<arguments.length&&void 0!==t?t:[],r="zc-priority";return 1===arguments.length?JSON.parse(e.attr(r))||[]:void e.attr(r,re(n))}function Cr(e,t,n){var r=2<arguments.length&&void 0!==n?n:"color",a=xr(e),i=a.vAlign,o=a.floating,l=jt(t,"legend",t.canvasarea[i===ob||i===ib?"height":"width"]);return!(!o&&!l||!function(e,t){switch(e){case"color":if(dx.isQuantileColorScale(t))return!0;var n=t.isAxisCategory||t.isNonAxisMultiSeriesCategory||t.isGeoMap,r=!0;if(t.dataObject.pivot){var a=t.dataObject.hierarchical.pivotLayout.getRootNodeList("layer");r=!a.noLayers}return n?t.seriesdata.some(function(e){return!Dx.isHiddenItem(e)&&e.seriesname!==Ey})&&r:t.chartTypes[0].value!==Kv.dial;default:return!0}}(r,t))&&(t.dataObject.isFlowChartCategory&&e.enabled?0<t.dataObject.sankeyLayout.nodeLength:e.enabled)}function kr(e){var t=rn(e)&&Re([Tb,Lb,Mb],e.chartTypes[0].name)&&!e.userdata.facets.color.length;return rn(e)&&!t}function _r(e,t){var n=1<arguments.length&&void 0!==t?t:"clr-0";if(rn(e)){var r=e.legends.get(n);return r&&r.element||e.legendarea.element}return e.legendarea.element}function Sr(e){return null!=e}function Or(e){e.isD3Selection&&(e=e.node());var t=e.transform.baseVal.consolidate(),n=Sr(t)?t.matrix:null;if(Sr(n)){var r,a,i,o=n.a,l=n.b,s=n.c,c=n.d,u=n.e,d=n.f;return(r=Math.sqrt(o*o+l*l))&&(o/=r,l/=r),(i=o*s+l*c)&&(s-=o*i,c-=l*i),(a=Math.sqrt(s*s+c*c))&&(s/=a,c/=a,i/=a),o*c<l*s&&(o=-o,l=-l,i=-i,r=-r),{translate:[u,d],skew:[180*Math.atan2(l,o)/Math.PI,180*Math.atan(i)/Math.PI],rotate:180*Math.atan2(l,o)/Math.PI,scale:[r,a]}}return{translate:[0,0],skew:[0,0],rotate:0,scale:[0,0]}}function Ar(e){return"translate("+e.join(" ")+")"}function Pr(e){if(e.isD3Selection&&(e=e.node()),Km.FIREFOX&&e.ownerSVGElement){for(var t,n=e.ownerSVGElement,r=hg.event,a=n.getBoundingClientRect();t=r.sourceEvent;)r=t;r.changedTouches&&(r=r.changedTouches[0]);var i=function(e){e.isD3Selection&&(e=e.node());for(var t=e.ownerSVGElement,n=[0,0];e!==t;){var r=Or(e).translate;n[0]+=r[0],n[1]+=r[1],e=e.parentNode}return n}(e),o=_slicedToArray(i,2),l=o[0],s=o[1];return[l=r.clientX-a.left-e.clientLeft-l,s=r.clientY-a.top-e.clientTop-s]}return hg.mouse.apply(this,arguments)}function Tr(e,t){var n=Pr(e);return null==t.touches||Km.ANDROID||!Km.uiwebview||Km.WKWebView||(n[0]+=window.pageXOffset,n[1]+=window.pageYOffset),n}function Er(e){var t=e.eventHandler.trackerElement.node(),n=e.eventHandler.mousePos=Tr(t,Hv()),r=M(t);return{x:n[0]-r.x,y:n[1]-r.y}}function Lr(e,t,n,r,a){var i=t&&t[r]||a;Z(i)&&V(i,Hv(),e)}function Mr(e,t,n,r,a){a=(r=r||{}).namespace||a,Km.isMouseDevice&&!Be(t)&&function(e,t,n){if(null!=e.node()){t="."+t;var r={};for(var a in n)r[a+t]=n[a],e.on(a+t,r[a+t]);n=r,e.on(n)}}(e,a,t),Km.isTouchDevice&&!Be(n)&&function(e,t,n,r){function a(e,t,n,r){return Math.sqrt(Math.pow(n-e,2)+Math.pow(r-t,2))}function i(){var e=Hv();u&&e.cancelable&&e.preventDefault()}if(null!=e.node()){var o=r.touchleave,l=r.target,s=r.chartObj,c=s&&s.systemConf.chart.plot.events||{},u=!1!==r.preventDefault,d=!("plot"===l&&0==c.isFocusedTouchmove);t=null!=t?"."+t:"";var h,f,p,g,v,y={},m=0,b=0,x=null,w=!1,C=(n.touchmove,n.touchend),k=n.tap,_=n.dbltap,S=n.singletouchmove,O=n.doubletouchmove;v="plot"===l&&Gn(null,s.systemConf.chart.plot.plotoptions[s.chartTypes[0].name],s,"taphold")?(g=n.tap,C):(g=n.taphold,n.tapholdend);var A="touchstart"+t,P="touchmove"+t,T="touchend"+t,E={};for(var L in E[A]=function(){if(0!=c.enabled&&!(1<Hv().touches.length)&&(y.time=new Date,y.location=Tr(this,Hv()),x=null,f=w=!1,g)){var e=Hv(),t=arguments,n=this;p=setTimeout(function(){Hv(e),s&&(s.zcEventType="taphold"),g.apply(n,t),f=!0},500)}},E[P]=function(){if(0!=c.enabled){var e=Hv().touches;if(g){var t=Tr(this,Hv());if(30<(null!=y.location?a(y.location[0],y.location[1],t[0],t[1]):null))clearTimeout(p);else if(f)return i(),!1}if(1<e.length)2==e.length&&O&&(w=!0,O.apply(this,arguments),i());else{var n=(new Date).getTime();if(x=x||n,o&&null!=document.elementFromPoint){var r=0==m||50<n-m,l=e[0],u=document.elementFromPoint(l.pageX-window.pageXOffset,l.pageY-window.pageYOffset);if(!r||"svg"===u.localName||null!=u.id.match(/tooltip/gi))return void i();if(u!=this){if(h!=u){var v=h||this,b=(k=fg(v)).on(T),C=k.datum();E=null!=(E=null!=(A=k.attr("id")||k.attr("class"))?A.match(/(\d)+$/gi):null)&&null!=E[0]?parseInt(E[0]):null,null!=b&&null!=E&&b.call(v,C,E)}var k,_=(k=fg(u)).attr("class");s.chartTypes[0].value!==Kv.dial||"inner"!==_&&"outer"!==_||(k=fg(u.parentNode));var A,E,L=k.on(P);return C=k.datum(),E=null!=(E=null!=(A=k.attr("id")||k.attr("class"))?A.match(/(\d)+$/gi):null)&&null!=E[0]?parseInt(E[0]):null,void(null!=L&&null!=E&&(L.call(u,C,E),h=u,m=n))}}d&&x-y.time<100||S&&(s&&(s.zcEventType="touchmove"),S.apply(this,arguments),i())}}},E[T]=function(){if(0!=c.enabled){var e=Hv().touches;if(g&&(clearTimeout(p),f))return f=!1,i(),v&&v.apply(this,arguments),!1;if(!(1<e.length)){if(w&&O&&C)return w=!1,C.apply(this,arguments),void i();var t=new Date,n=Tr(this,Hv()),r=t-y.time,o=null!=y.location?a(y.location[0],y.location[1],n[0],n[1]):null,l=t-b;l<=350&&0<l&&o<=30?(_&&(s&&(s.zcEventType="doubletap"),_.apply(this,arguments),i()),b=0):r<=150&&o<=30?k&&(s&&(s.zcEventType="tap"),k.apply(this,arguments),i()):C&&C.apply(this,arguments),b=t}}},E)e.on(L,E[L])}}(e,a,n,r)}function zr(e,t,n){if(t=null!=t&&""!=t?"."+t:"",Km.isMouseDevice){if(""!==t)e.on(t,null);else for(var r in n)e.on(r,null);n=null}}function Ir(e){function t(){g=a+l.marginTop+l.marginBottom,e.chartarea.height-=g,e.plotarea.height-=g,"top"===l.vAlign&&(e.chartarea.top+=g,e.plotarea.top+=g),e.legendarea.adjust="x"}function n(){p=r+l.marginLeft+l.marginRight,e.chartarea.width-=p,e.plotarea.width-=p,"left"===l.hAlign&&(p=r+l.marginLeft+l.marginRight,e.chartarea.left+=p,e.plotarea.left+=p),e.legendarea.adjust="y"}var r,a,i,o,l=e.systemConf.legend,s=Dx.isContinousLegend(e),c=e.legendarea.element.node(),u=Z(l.x)&&Z(l.y),d=xr(l),h="vertical"===d.layout,f=!h,p=0,g=0,v=d.hAlign,y=d.vAlign;if(s){var m=M(c);r=m.width,a=m.height,i=m.x,o=m.y}else r=c.offsetWidth,a=c.offsetHeight,i=c.offsetLeft,o=c.offsetTop;u||(f?"top"===y||"bottom"===y?t():"center"===y&&n():h&&("left"===v||"right"===v?n():"center"===v&&t())),e.legendarea.x=i,e.legendarea.y=o,e.legendarea.width=r,e.legendarea.height=a}function Dr(e,t,n){var r=2<arguments.length&&void 0!==n?n:{},a=t.width-e.marginLeft-e.marginRight,i=t.height-e.marginTop-e.marginBottom,o=br(e);return{maxWidth:Ie(r.maxWidth||e.maxWidth||o.width,a),maxHeight:Ie(r.maxHeight||e.maxHeight||o.height,i)}}function Rr(e,t,n){return{w:e=e||n.maxWidth,h:t=t||n.maxHeight}}function jr(){}function Hr(e,t,n,r,a){function i(e){return!1===n?0:+a[e]}var o=t.legend.isSingleLayout;r=r||t.legendarea.element,a=a||t.systemConf.legend;var l=r.node(),s=xr(a),c=0,u=0,d=Lt(l),h=d?M(l):l.getBoundingClientRect(),f=h.width,p=h.height,g=s.floating,v=t.canvasarea,y=Dr(a,t.chartarea),m=y.maxWidth,b=y.maxHeight;if(d||(h.x=0,h.y=0),g)return c=a.x-h.x,u=a.y-h.y,[c=Qy(v.width-Qy(h.width,m),c),u=Qy(v.height-Qy(h.height,b),u)];switch(s.hAlign){case"left":c=e.left+i("marginLeft")-h.x;break;case"center":c=e.width/2-f/2-h.x;break;case"right":c=(d||!o?e.left:0)+e.width-f-i("marginRight")-h.x}switch(s.vAlign){case"top":u=e.top+i("marginTop")-h.y;break;case"center":u=e.top+e.height/2-p/2-(o?0:h.y);break;case"bottom":u=e.top+e.height-p-i("marginBottom")-h.y}return[c,u,f,p]}function Br(e,t,n,r){var a=n.showAs,i=0,o=t;if((r.isAxisCategory||r.isNonAxisMultiSeriesCategory||r.isGeoMap)&&(i=t,o=0),a)return a=V(a,e,t,r),r.dataset.getCustomizedVal(r,a,i,0,o,e,"legend")}function Nr(){var e=navigator.userAgent,t={};if(0<e.indexOf("OPR")){t.name="Opera",t.jsPrefix="webkit",t.cssPrefix="-webkit-";var n=e.indexOf("OPR/");t.version=J(e.substr(n+4))}else 0<e.indexOf("Chrome")?(t.name="Chrome",t.jsPrefix="webkit",t.cssPrefix="-webkit-",n=e.indexOf("Chrome/"),t.version=J(e.substr(n+7))):0<e.indexOf("Safari")?(t.name="Safari",t.jsPrefix="webkit",t.cssPrefix="-webkit-",n=e.indexOf("Version/"),t.version=J(e.substr(n+8))):0<e.indexOf("Firefox")?(t.name="Firefox",t.jsPrefix="Moz",t.cssPrefix="-moz-",n=e.indexOf("Firefox/"),t.version=J(e.substr(n+8))):0<e.indexOf("MSIE")?(t.name="Internet Explorer",t.jsPrefix="ms",t.cssPrefix="-ms-",n=e.indexOf("MSIE"),t.version=J(e.substr(n+5))):t=void 0;return t}function Fr(e,t){var n=getComputedStyle(e),r=Nr();for(var a in t)if(t.hasOwnProperty(a))if(a in n)e.style[a]=t[a];else if(null!=r){var i=r.jsPrefix+a.charAt(0).toUpperCase()+a.slice(1);e.style[i]=t[a]}}function Vr(e){function t(e){var t=e.type||r,n=void 0;n="number"==typeof t?Ay.get(t):t.toLowerCase(),a.push(n)}var n=e.seriesdata;if(!n||!n.chartdata)return[];var r=n.type,a=[];return e.facets?function e(t,n){t.forEach(function(t){n(t),t.data&&e(t.data,n)})}(n.chartdata,t):n.chartdata.forEach(t),a}function Wr(){return this.count}function Yr(){return this.branches.length}function Ur(){return("column"!=this.name||this.splitColumnLeaves)&&this.count?this.clustersCount*this.getDomainForBranch(0).length:this.leafCount}function Gr(){return this.clustersCount}function Xr(){return 1<this.clustersCount}function Zr(e){var t=this.branches[e];if(t)return t.domain}function qr(e){var t=this.branches[e];if(t)return t.range}function Qr(e){var t=this.clusters[e],n=t.entries;if(t)return n.size()?Ig(n.values().map(function(e){return e.domain})):t.domain}function Kr(e,t){var n=this.clusters[e];if(n)return n.entries.values()[t].domain}function $r(e,t){var n=this.clusters[e];if(n)return n.entries.values()[t].nodes}function Jr(e){var t=this.branches[e];if(t)return t.nodes}function ea(e){var t=this.clusters[e],n=t.entries;if(t)return n.size()?Ig(n.values().map(function(e){return e.nodes})):t.nodes}function ta(e,t){return t=Hm(t,[]),e.children?(e.children.forEach(function(e){"leaf"==e.tag&&e.isDefined?t.push(e.data):ta(e,t)}),t):e.data}function na(e){var t=this.getLeavesCount();return t-1<e?this.getBranchNodes(e-t):this.getClusterNodes(0)}function ra(e,t){for(var n=t.systemConf.metadata,r=n.axes.y[e],a=1,i=r.length-1,o=n.columns[r[a-1]],l=o[o.datatype];a<=i;a++){var s=n.columns[r[a]];l=ae(l,s[s.datatype])}return l}function aa(e){switch(e){case"left":return"right";case"right":return"left";case"top":return"bottom";case"bottom":return"top"}}function ia(e,t){return{top:Hm(e.marginTop,t,5),right:Hm(e.marginRight,t,5),bottom:Hm(e.marginBottom,t,5),left:Hm(e.marginLeft,t,5)}}function oa(e,t,n){return n||(e=aa(e)),t[e]}function la(e,t,n){var r;if("x"==t){var a=e.dataObject.hierarchical;if(a){var i=a.pivotLayout.getRootNodeList("column"),o=i.getCount(),l=i.getLeavesCount();r=o&&l-1<n?(e.axes.x.levels[n-l]=e.axes.x.levels[n-l]||{},e.axes.x.levels[n-l]):1<l?(e.axes.x.leaves[n]=e.axes.x.leaves[n]||{},e.axes.x.leaves[n]):e.axes.x}else r=e.axes.x}else if("clr"===t)r=e.axes.clr;else{var s=e.dataObject.hierarchical,c=void 0,u=void 0,d=void 0;if(s){var h=s.pivotLayout.getRootNodeList("row");c=h.getCount(),u=h.hasMultiCluster(),d=h.getLeavesCount()}r=u||c?c&&d-1<n?(e.axes.y.branches[n-d]=e.axes.y.branches[n-d]||{},e.axes.y.branches[n-d]):(e.axes.y.leaves[n]=e.axes.y.leaves[n]||{},e.axes.y.leaves[n]):(e.axes.y.groups[n]=e.axes.y.groups[n]||{},e.axes.y.groups[n])}return r}function sa(e,t,n,r){var a,i=e.systemConf,o="y"==t?i.chart.axes.yaxis:i.chart.axes.xaxis,l="y"==t?i.chart.axes.yaxisLevels:i.chart.axes.xaxisLevels,s=e.dataObject,c="y"==t?s.categoryHierarchy:s.hierarchical;if(c&&c.categoryTree,c){var u=$t(t,n,e),d=Qt(n,null,t,e);if(u){var h=function(e,t,n){var r="x"==e?"column":"row",a=n.dataObject.hierarchical.pivotLayout.getRootNodeList(r).getLeavesCount();return 1<a?t-a:t-1}(t,n,e);if(a=l[h]||{},r){var f="y"==t?o[0]:o;a=l[h]=Im(l[h],f,!1)}}else a="x"==t?o:o[d],r&&"y"==t&&0<d&&(a=Im(o[d],o[0],!1))}else a="x"==t?o:o[n],r&&"y"==t&&0<n&&(a=Im(o[n],o[0],!1));return a}function ca(e,t,n){if("inner"==e.tickOrient)return"x"!=t||!n.ismultix}function ua(e){var t=e.chart.axes;return t&&!0===t.rotated}function da(e,t,n){var r=n.dataObject.hierarchical,a=(n.plotarea,n.axes[e].count,0);if(r)for(var i="x"==e?"column":"row",o=r.pivotLayout.getRootNodeList(i),l=o.getLeavesCount(),s=o.getCount(),c=o.hasMultiCluster(),u=n.dataObject.hierarchical&&(c||s),d=0;d<t;d++)if(u&&d<l-1);else if(ha(sa(n,e,d),e,d,n)){var h=la(n,e,d);a+="y"===e&&d===l-1&&u?n.axes[e].maxLeafAxisArea:h.component.tickLabelWidth()}return a}function ha(e,t,n,r){var a=e.show;return!(r._isAxisCategory()&&!r.isAxisCategory&&Jt(t,n,r)&&("y"===t||"x"!==t||!jn(r)))&&a}function fa(){}function pa(e,t,n,r){var a=e.dataObject.hierarchical,i=e.plotarea,o="width"==n?e.scrolledX:e.scrolledY,l=(e.axes[t].count,0);l=a?da(t,r,e):"x"==t?e.axes.x.ticks.preCalcAxisLen:e.axes.y.groups[0].ticks.preCalcAxisLen;var s=r;rn(e)&&!e.isAxisCategory&&(s=a.pivotLayout.getRootNodeList("y"==t?"row":"column").getLeavesCount());var c=la(e,t,s),u=c.component.tickLabelWidth(),d=c.component.orient();return"height"==n?"left"==d?{x:-i.left,y:o,width:i.width+i.left+l,height:i.height}:{x:-l-i.width,y:o,width:i.width+u+l,height:i.height}:"bottom"==d?{x:o,y:-l-i.height,width:i.width,height:l+i.height+u}:{x:o,y:-i.top,width:i.width,height:i.height+i.top+l}}function ga(e,t,n,r){function a(e){return e&&-1<e.search("-")}var i=e.container.selectAll("g."+t+"-axis").selectAll("g.axisgroup,g.minmaxlabelsGroup"),o=function(e,t){var n="width"==t?e.scrolledX:e.scrolledY;return"height"==t?[0,-n]:[-n,0]}(e,n),l=_slicedToArray(o,2),s=l[0],c=l[1],u=va(e);i.each(function(i,o){var l,d,h=fg(this);if(ba(e))if(l=function(e,t){return fg(t.parentNode).attr("class").replace(e+"-axis-","")}(t,this),"minmaxlabelsGroup"===h.attr("class")||a(l))d=function(e,t,n){var r=va(e),a=Or(n.parentNode).translate,i=e.plotarea,o=e.plotarea_approx,l=e.rendererConf[0].bound(),s=e.dataObject.isPolarAxisCategory&&"x"===t||!e.dataObject.isPolarAxisCategory&&"y"===t,c=s?-a[0]-o.x+i.left+r[0]:-a[0]+i.left+r[0],u=s?-a[1]-o.y+i.top+r[1]:-a[1]+i.top+r[1];return{x:c,y:u,width:Qy(i.width,qy(-c+l.width,0)),height:Qy(i.height,qy(-u+l.height,0))}}(e,t,this);else{if(r)return;d=pa(e,t,n,+l)}else d=pa(e,t,n,o);var f=a(l)?e.dataObject.isPolarAxisCategory&&"x"===t||!e.dataObject.isPolarAxisCategory&&"y"===t?[-u[0]+e.plotarea_approx.x,-u[1]+e.plotarea_approx.y]:[-u[0],-u[1]]:[s,c],p="default_scroll_axes_"+t+"_"+o+"_clip"+e.id;jx.rect(d,p,null,null,null,e),h.attrs({transform:"translate("+f[0]+","+f[1]+")","clip-path":"url(#"+p+")"}),e.dataObject.hierarchical&&e.dataObject.hierarchical.categoryTree&&!a(l)&&Jt(t,o,e)&&fg(this.parentElement).selectAll("g.axislabelgroup").attrs({transform:"translate("+s+","+c+")","clip-path":"url(#"+p+")"})})}function va(e){var t=Hv();if(t){var n=t.srcElement||t.target;return[n.scrollLeft,n.scrollTop]}return[e.scrolledX||0,e.scrolledY||0]}function ya(e,t,n){var r=e.axes.rotated,a=(e.plotarea,"x"==t?e.scrolledX:e.scrolledY,e.dataObject.hierarchical),i={x:r?"height":"width",y:r?"width":"height"},o={x:r?"y":"x",y:r?"x":"y"};if("xy"==t?(ga(e,"x",i.x),ga(e,"y",i.y)):"x"==t?(ga(e,o[t],i[o[t]]),ba(e)&&ga(e,o.y,i[o[t]],!0)):(ga(e,o[t],i[o[t]]),ba(e)&&ga(e,o.x,i[o[t]],!0)),"init"==n&&"xy"==t&&a){var l=a.pivotLayout.getRootNodeList("row").getCount(),s=e.axes.y.count,c=e.axes.y.branches[l-1],u=(c.component.majorTicks(),c.component.orient()),d=Et("g",".scroll_roller_grid_group",[1],e.wrap.selectAll("g.y-axis-"+(s-1)),".y-axis"),h=Et("g",".scroll_roller_header_grid_group",[1],d,".y-axis"),f=Et("g",".scroll_roller_footer_grid_group",[1],d,".y-axis"),p=e.wrap.selectAll("g.y-axis-"+(s-1)).selectAll("line.majorTicks").nodes();if(p.length){var g=p[0].cloneNode(0),v=p[0].cloneNode(0);h.node().appendChild(g),f.node().appendChild(v),"left"==u?(h.attr("transform","translate(0,0.5)"),f.attr("transform","translate(0,"+(e.plotarea.height+.5)+")")):"bottom"==u&&(h.attr("transform","translate(0.5,0)"),f.attr("transform","translate("+(e.plotarea.width+.5)+",0)"))}}}function ma(e,t){var n=e.plotarea,r=n.left,a=n.top,i=n.width,o=n.height;return t&&(r=a=0),Z(e.divScroll)&&(r-=e.scrolledX,a-=e.scrolledY,i+=e.scrolledX,o+=e.scrolledY),{x:r,y:a,left:r,top:a,width:i,height:o}}function ba(e){return e.dataObject.isPolarAxisCategory||ar(e.chartTypes[0].value,Eb)}function xa(e){var t=void 0;switch(e){case"z":case"size":t="sizeScale";break;case"clr":case"color":t="colorScale"}return km.getComponent(t)}function wa(e,t){this.container=e,this.userdata=t,this.dataset={},this.dataObject={},this.canvasarea={},this.chartarea={},this.legendarea={},this.legend={color:[{component:null}],component:null},this.renderer=[],this.svg=null,this.cache={},this.subrenderer=[],this.datalabels={moduleExists:Dy},this.prepareLayout(),this.renderVisiblePointsOnly=!1}function Ca(e,t,n,r,a,i){var o=2<arguments.length&&void 0!==n?n:"x",l=r,s=4<arguments.length&&void 0!==a&&a,c=5<arguments.length&&void 0!==i&&i;if(!te(e))return t.originalDomain;var u=e.map(function(e){var n={x:0,y:0};return n[ka(o,s)]=e,Zv.invert(l,n,t,s,o,c)}),d=_slicedToArray(u,2),h=d[0],f=d[1];if(f<h){var p=[f,h];h=p[0],f=p[1]}return l===ox?t.domain().slice(h,f+1,0):_a([h,f],t.originalDomain,t.outerPadding)}function ka(e,t){return t&&{x:"y",y:"x"}[e]||e}function _a(e,t,n){var r=2<arguments.length&&void 0!==n?n:0,a=e[0]instanceof Date;a&&(e=e.map(function(e){return e.getTime()}),t=t.map(function(e){return e.getTime()}));var i=_slicedToArray(e,2),o=i[0],l=i[1],s=_slicedToArray(t,2),c=s[0],u=s[1],d=u+(u-o)*r,h=qy(o,c-(l-c)*r),f=Qy(l,d);if(l<c&&(h=c-.001*(h-c),f=c+.001*(c-f)),u<o&&(h=u+.001*(u-h),f=u-.001*(f-u)),a){var p=[h,f].map(function(e){return new Date(e)}),g=_slicedToArray(p,2);h=g[0],f=g[1]}return[h,f]}function Sa(e,t){if(e.isD3Selection||(e=fg(e)),!Te(e.node()))return this.console.warn("No container"),null;var n=e.datum(t),r=null;return n.each(function(e){var t=fg(this);(r=Fx.get(t,e)).showLoading(t)}),r}function Oa(e,t,n){var r=e.length,a=e[r-1];r||(n.chartRendered=!0),0<r&&1!=a.drawStarted&&Te(a.container.node())&&(a.draw(),a.drawStarted=!0,function e(t,n,r,a){var i=t.length,o=t[i-1];if(o.chartRendered||o.breakOnErr)n.push(t.pop()),Oa(t,n,r);else{null!=a&&clearTimeout(a);var a=setTimeout(function(){e(t,n,r,a)},10)}}(e,t,n))}function Aa(e,t,n,r,a,i,o,l){function s(t){return n!==lx||u.customFormat?n===sx&&("axis"===a||a===Yx||a===Wx&&r.dataObject.isHierarchy)&&"number"==typeof t&&12<ja(t)&&(t=parseFloat(t.toFixed(12))):t=La(t,u,e),l&&u.customFormat&&((e=Dm(e)).levelindex=l),c("function"==typeof u?u(t,n,e):u.customFormat?V(u.customFormat,t,n,e,a,r):Ta(u,t,e,n,l,a,r))}function c(e){return 0!=i?z(e):I(e)}if(!n)return c(t);if(null==t||t.constructor==Array&&null===t[0])return e&&null!=e.nullformatting?c(V(e.nullformatting,t,n,e,a,r)):t;var u=e?e[a+"format"]||e.format:null;return u&&Object.keys(u).length||(u=Pa(n,e)),t.constructor==Array?t.map(function(e){return s(e)}).join(Z(u.arraySeperator)?u.arraySeperator:o):s(t)}function Pa(e,t){var n={};switch(e){case"time":t&&t.groupby?n={}:t&&t.subfunction?n=Ea(t.subfunction,t.useUTC):n.specifier="YYYY";break;case"numeric":n.thousandSeperator=",";break;case"geo":break;case"percent":n.decimalPlaces=1,n.suffix="%",n.trailingZeros=!1}return n}function Ta(e,t,n,r,a,i,o){var l;switch(r){case"time":var s,c=n&&!0===n.useUTC?xv:bv,u=e.specifier;if(Z(n)&&(s=te(n.groupby)?n.groupby:n.AUTO_GROUP_ORDER),te(u)||te(s))l=[],u=u||[null],Z(a)&&(u=Z(u)?[u[a]]:[null]),(u=te(u)?u:[u]).forEach(function(e,r){var i=za(e),o=Ia(c,i,n,a);l[r]=o?o(t):t}),i==Wx&&(l=l&&l.toString());else if(u){var d=za(u);if("auto"===u||null==d)l=t;else if(sw.test(d)){var h=Ia(c,d,n,a);l=h(t)}else l=c(d)(t)}else{var f=Pa(r,n);l=f(t)}break;case"ordinal":var p=e.letterCase;t+="",l=p?"uppercase"===p?t.toUpperCase():"lowercase"===p?t.toLowerCase():ke(t):t;break;case"geo":var g=e.mapBy;if(p=e.letterCase,l=t,g){var v=o.dataObject.userMapFeatures.get(t);v&&v.properties&&v.properties[g]&&(l=v.properties[g])}l=p?"uppercase"===p?l.toUpperCase():"lowercase"===p?l.toLowerCase():l[0].toUpperCase()+l.substring(1).toLowerCase():l;break;default:if("decimal"==e.type&&J(t)!=t)return"";var y=e.decimalPlaces;t="decimal"==e.type||0===y?parseFloat(t):t;var m=e.currency,b=Da(e,null,t),x=!1;if(l=b(t),/(e|s)/gi.test(Ra(e))?Z(y)?l=l.replace(/[^a-z]+/i,function(){return Da(e,"."+y+"f")(arguments[0])}):x=!0:Z(y)&&0<y&&(l=l.replace(/[^a-z]+/i,function(){var t=Fa(+arguments[0].replace(/,/g,""),y);return Da(e,"."+y+"f")(t)})),!1===e.signEnabled&&(l=l.substring(1,l.length)),!U(e.trailingZeros,!0)||x){var w="";l=(l=l.replace(/[a-z]+(\+|-)*(\d)*$/i,function(){return w=arguments[0],""})).replace(/\.(\d)*0*$/gi,function(){var e=arguments[0];return parseFloat(e)?"."+Ha(+e).toString().split(".")[1]:""})+w}l=function(e,t){var n=e.thousandSeperator,r=e.decimalSeperator,a=t.split(/\./);return(null!=n&&","!=n?a[0].replace(/,/g,n):a[0])+(a[1]?(null!=r?r:".")+a[1]:"")}(e,l),null!=m&&(l=/(\+|\-)/.test(l[0])?l[0]+m+l.slice(1):m+l)}return l=function(e,t){if(te(t))return t;var n=Hm(e.prefix,""),r=Hm(e.suffix,"");return n+t+r}(e,l),e.breakSpace&&(l=l.split(" ")),l}function Ea(e,t){var n=(t=!0===t)?xv:bv;switch(e){case"YEAR":case"year":return n("%Y");case"MONTH":case"month":return n("%B");case"ABSDAY":return n("%a");case"DAY":case"day":return n("%e");case"WEEKDAY":return n("%A");case"WEEK":case"week":return n("Week %W");case"ABSHOUR":return n("%I");case"ABSSECOND":return n("%S");case"ABSMINUTE":case"MINUTE":return n("%M");case"MILLISEC":return n("%L");case"HOUR":return n("%H hrs");case"DATETIME":return n("%d %b %Y %H:%M:%S");case"DATE":return n("%x");case"TIME":return n("%X");case"TIMESTAMP":return n("%x %X hrs");case"ABSMONTH":return n("%b %Y");case"ABSWEEK":return n("W%U %Y");case"ABSQUARTER":return function(e){var r=t?e.getUTCFullYear():e.getFullYear();return n("Q"+Va(e,t)+" "+r)};case"QUARTER":return function(e){return n("Q"+Va(e,t))};case 100:return n("%d %b %Y %H:%M:%S %L");default:throw"UNKNOWN TYPE 111: "+e}}function La(e,t,n){var r=n?n.inputformat:null,a=new Date(e.toString()),i="function"==typeof r?r:"function"==typeof window[r]?window[r]:null;if(!(e instanceof Date)&&null!=r&&(i||"timestamp"!=r.toLowerCase())){e=i||(void 0===e?"undefined":_typeof(e))==String?e:e.toString();var o=wv,l=i?i(e,n):o(za(r))(e);a=null==l?a:new Date(l)}return isNaN(a)&&(a=new Date(+e)),a}function Ma(e,t,n,r,a){return(e=e||{})[(a=(a&&e[a+"percentformat"]?a:"")+"percent")+"format"]||(e.percentformat=Pa("percent")),Aa(e,t,n,r,a)}function za(e){if(e)for(var t in aw){var n=e.indexOf(t);0<=n&&"%"!==e[n-1]&&(e=e.replace(new RegExp(t,"g"),aw[t]))}return e}function Ia(e,t,n,r){var a;if(t)a=function(e,t,n){return function(t){for(var r,a=e(t),i=[],o=-1,l=0,s=a.length;++o<s;)36===a.charCodeAt(o)&&(i.push(a.slice(l,o)),r=a.charAt(++o),r=Z(ow[r])?ow[r](t,n):r,i.push(r),l=o+1);return i.push(a.slice(l,o)),i.join("")}}(e(t),0,n.useUTC);else if(n.groupby){var i=te(n.groupby)?n.groupby:n.AUTO_GROUP_ORDER;a=Ea(0!==r&&Z(r)?i[r-1]:n.subfunction,n.useUTC)}return a}function Da(e,t,n){var r,a=Z(e.signEnabled)?"+":"",i=null!=e.zeroPadding&&e.zeroPadding.enabled?"0"+e.zeroPadding.digits:"",o=null!=e.thousandSeperator?",":"",l=Ra(e),s=/(e|s)/gi.test(l),c=e.decimalPlaces;return r=null!=c&&0<=c?s?Km.IE?".20":"":"."+(0===c?c:c+3):s?"":"."+ja(n),mv(a+i+o+(t||r+l))}function Ra(e){e.decimalPlaces;var t=e.type;return iw[t]||"f"}function ja(e){return isNaN(e)?0:(e=+e,Math.floor(e)==e?0:Ha(e).toString().split(".")[1].length||0)}function Ha(e){if(/\d+\.?\d*e[+-]*\d+/i.test(e)){var t=String(e).toLowerCase().split("e"),n=t.pop(),r=Math.abs(n),a=n/r,i=t[0].split(".");if(-1==a)e="0."+new Array(r).join("0")+i.join("");else{var o=i[1];o&&(r-=o.length),e=i.join("")+new Array(r+1).join("0")}}return e}function Ba(e){var t=Xy(e/1e3),n=Xy(t/60),r=Xy(n/60),a=Xy(r/24);return{seconds:t,minute:n,hour:r,day:a,month:Xy(a/30.436854166666667),years:Xy(a/365.24225)}}function Na(e){var t=Ba(e);return{subFunction:1<t.years?"YEAR":1<t.month?"ABSMONTH":1<t.day?"ABSDAY":1<t.hour?"ABSHOUR":1<t.minute?"ABSMINUTE":"ABSSECOND"}}function Fa(e,t){var n=Math.pow(10,t);return+(Math.round((e+dm)*n)/n).toFixed(t)}function Va(e,t){return Xy((t?e.getUTCMonth():e.getMonth())/3)+1}function Wa(e,t,n){return e?vg(e,function(e,r){return Re(n?n(e,r):e,t)?r:0}):0}function Ya(e){return e.seriesIndices[e.seriesIndices.length-1]}function Ua(e,t,n,r){var a=Wa(e.dataObject.getStackGroup(),t),i=e.renderer[t].commonRendererProp().params,o=e.dataset,l=o.getX(n),s=o.getY(n,i.yaxiscolumnorder||0),c=e.dataObject.getEncode("stack",a).layout.getAllExtents().filter(function(e){return e[0]==l});return r===ew||r===Kx?c.reduce(function(e,t){return e+Ky(t[1])},0):c[s<i.hasNegValue&&c[1]?1:0][1]}function Ga(){}function Xa(e,t,n,r,a,i,o){r=+r;var l=e.systemConf.metadata.axes.y,s=-1,c=nr(e.chartTypes[t].value);if(e.dataObject.isstacked(e.chartTypes[t].value)&&!e.dataObject.isPercentChart&&/(datalabels|tooltip)/.test(o))return Ua(e,t,a,i);if((te(l)||e.isGeoMap)&&(te(l)&&(te(l[0])?l.forEach(function(e,t){s=-1==s&&-1<e.indexOf(r)?t:s}):s=-1<l.indexOf(r)?0:-1),-1!=s||c)){var u;if(c){var d=cw.getKey(a,t,e);u=e.subrenderer[n||0][d].total}else if(e.isAxisCategory||e.dataObject.isPolarAxisCategory){var h=e.axes.y.groups[s].scale;if(i!==Jx&&h)u=(f=h.domain())[1];else{var f=e.dataObject.ZC_BAR_getRangeY(s);u=e.dataset.getY(a,s)<0?-f[0]:f[1]}}else if(e.isNonAxisMultiSeriesCategory){var p=Za(a,e),g=e.renderer[p];if(i===Kx)return g.total;if(g.extentY)return g.extentY[1];var v=g.getProcessedNode,y=v?v(a):a;u=y._parent?y._parent.value:y.parent.value}else if("legend"===o){var m=e.seriesdata[0],b=e.dataset.yidx(Gt.helpers.getParsedYAxisOrder(m.yaxiscolumnorder));u=m.data[0].reduce(function(e,t){return e+(t.disabled?0:Ky(t[b]||0))},0)}else{var x=Za(a,e);u=e.renderer[x].total}return u||0===u?u:null}return null}function Za(e,t,n){var r=2<arguments.length&&void 0!==n?n:0;if(rn(t)&&(e&&e.data&&e.data.paneid||e&&e.paneid)){var a=t.dataObject.hierarchical.pivotLayout.getRootNodeList("layer").panes;return Ut(a,a[e.paneid].index)}return r}function qa(e){this.chart=e,this.data=e.systemConf,this.initialize()}function Qa(e,t){t=Hm(t,e.systemConf);var n=Gt.helpers.getChartType(null,sx,0,t);return Re(Py.hierarchy,n)}function Ka(e,t){e.forEach(function(e){var n=e.data;if(te(n)){var r=Gt.helpers.is3D(n);n.forEach(function(e,n){r&&te(e)&&e.forEach(function(e){return Ja(t,e)}),r||Ja(t,e)})}})}function $a(e,t){e.forEach(function(e){te(e[0])?$a(e,t):Ja(t,e)})}function Ja(e,t){(e=be(e)).forEach(function(e){return e(t)})}function ei(e,t,n,r){var a=t&&t.animation?Im(e.animation,t.animation,!0):e.animation,i=n.systemConf.chart.plot.animation,o={},l=a.easingType||i.easingType||(/(scatter|bubble$|packedbubble|heatmap)/.test(r)?"cubic-in-out":null)||"linear";return de()||n.isHiddenCoainer||n.disableAnimation?o.enabled=!1:o.enabled=!!Ht(n,"animation")&&Y([a,i],"enabled"),o.enabled="canvas"==window.rendererMode?"dial"==r:o.enabled,o.type=a.type,o.easingType=bg(l),o.duration=o.enabled?U(a.duration,+(i.duration||(/(bar|bullet|gantt|waterfall)/.test(r)?300:/(line|area|arearange)/.test(r)?600:/(scatter|bubble$|funnel|pyramid|heatmap)/.test(r)?1e3:500))):0,o}function ti(e,t,n,r,a,i,o,l,s,c,u){var d=a==tx,h=l.dataset,f=l.yaxiscolumnorder,p=d?0:-1,g=n.length,v=Gy(o/(d?r.length-1:g));!function a(){if(p++,d)for(var o=0;o<g;o++)e[o]=n[o<p?o:qy(0,p-1)],t[o]=n[o<p?o:p];else e[p-1]=n[p-1],t[p]=n[p];if(p<g){var l=1==p&&d?(r.indexOf(h.getX(n[0]))-(p-1))*v:0,y=(d?r.indexOf(h.getX(n[p]))-r.indexOf(h.getX(n[p-1])):1)*v,m=d?null!=h.getY(n[p],f)&&null!=h.getY(n[qy(0,p-1)],f):null!=h.getY(n[p],f);m?c.attrs(s(e)).transition().delay(l).duration(y).ease(i).attrs(s(t)).on("end",u===kb?function(e,t){t==g-1&&a()}:a):a()}}()}function ni(e){var t=tv(0,sm);e.attrTween("transform",function(){var e=fg(this).attr("transform");return function(n){return e+" matrix("+em(t(n))+",0,0,1,0,0)"}})}function ri(e){var t=tv(0,1);e.styleTween("opacity",function(){return function(e){return t(e)}})}function ai(e){var t=tv(0,1);e.attrTween("transform",function(){var e=fg(this).attr("transform")||"";return function(n){return e+" scale("+t(n)+")"}})}function ii(e){e.interrupt()}function oi(e,t){function n(t){var n;n=e.dataObject.noofAreaEnabledSeries||e.dataObject.noofAreaRangeEnabledSeries?t.selectAll(function(){return this.childNodes}).filter(function(){return"g"==this.tagName}):e.dataObject.isFlowChartCategory?t.selectAll("g.sankey-links").selectAll("path.sankey-link"):t.selectAll("g.hierarchychart").selectAll("*"),n.sort(function(e,t){return e.index-t.index})}function r(n,r){function a(t,n,i,o){var d,f,p=3<arguments.length&&void 0!==o?o:0;if(er(t))d=i.selectAll("g.heatmapseries_"+n).selectAll("path");else if(Zn(t))d=i.selectAll("g.barseries_"+n).selectAll("path.zcbar");else if(t==Kv.line){var g=i.selectAll("g.lineseries_"+n);d=g.selectAll("path.line"),f=g}else if(an(t)||t==Kv.web){var v=i.selectAll("g.areaseries_"+n);d=v.selectAll("path.area"),f=v}else{if(qn(t)){var y=i.selectAll("g.scatterseries_"+n);d=y.selectAll("g.scatter");var m=(d=A(d,!0,r,n)).selectAll("path.outer"),b=d.selectAll("path.inner");return s.push(m,b),l.push(t,t),u.push(p,p),f=y,void c.push(f)}if(t===Kv.bubblepie||t===Kv.geobubblepie)d=i.selectAll("g.piegroup").selectAll("path#arc_"+n);else if(tr(t))d=i.selectAll("g.piegroup").selectAll(Z(r)?"path":"path#arc_"+n);else if(t==Kv.funnel)d=i.selectAll("g.funnelgroup").selectAll("g.trapezoidgroup").selectAll(Z(r)?"path":"path#funnel"+n);else if(t==Kv.pyramid)d=i.selectAll("g.pyramidgroup").selectAll(Z(r)?"g":"g#section_"+n);else if(t==Kv.wordcloud)d=i.selectAll("g.wordcloudgroup").selectAll("text.series_"+n);else if(-1!=Py.hierarchy.indexOf(t))d=i.selectAll("g.hierarchychart").selectAll(".series_"+n);else if(t==Kv.sankey){var x=e.cache.sankey.legend[n],w=e.renderer[0].highlighter.getDependentLayoutPoints(x,!0,"legend");d=i.selectAll("path").filter(function(e){return Re(w,e)})}}var C=cn(e,t,"axis"),k=cn(e,t,"nonAxisMultiSeries"),_=C||k||e.isGeoMap?n:0;d=A(d,!0,r,_),s.push(d),l.push(t),c.push(f),u.push(p),!an(t)&&t!=Kv.web||a(Kv.line,n,i,p),t==Kv.line&&h(r)&&a(Kv.scatter,n,i,p)}var i=t.selectAll("g.seriesholder"),o=_(null,"object",n,m).value,l=[],s=[],c=[],u=[];if(rn(e))if(si(e))a(o,n,i);else{var d=Yt(e.dataObject),f=-1;d.forEach(function(t){var r=t.row,l=t.column,s=t.layer,c=r+"_"+l,u=i.selectAll("g.grid"+c);t.data.forEach(function(t,r){var i=!O(t);f++,e.userdata.facets.color.length&&s!==C||e.rendererConf[f].legendIndex()!==n||!i||a(o=ln(e,c,r).value,r,u,c)})})}else a(o,n,i);return{selectedSeries:s,charttypes:l,parentSeries:c,paneIDs:u}}function a(n,r){function a(t,n,u,d,f,p){function g(e,t){var a=fg(this),i=+this.getAttribute("id").split(k).pop(),u=Z(r)?!A(a,!1,r,0).empty():this.getAttribute("id")!=k+n;return!u||!Z(r)&&Re(n,i)||(o.push(a),l.push(i),s.push(y),c.push(b)),u}var v,y,m=4<arguments.length&&void 0!==f?f:0,b=5<arguments.length&&void 0!==p?p:0,x=ln(e,b,n[0]).value,w=cn(e,x,"axis"),C=cn(e,x,"nonAxisMultiSeries");if(w||C||e.isGeoMap)d.forEach(function(a,d){var h=si(e)?d:e.rendererConf[m+d].legendIndex();if(1!=a.disabled&&(Z(r)?Re(n,d):!Re(n,h))){y=t||ln(e,b,d).value;var f=Z(r)?n:d;if(er(y)){var p=u.selectAll("g.heatmapseries_"+f);v=p.selectAll("path")}else if(Zn(y)){var g=u.selectAll("g.barseries_"+f);v=g.selectAll("path.zcbar")}else if(y==Kv.line){var x=u.selectAll("g.lineseries_"+f);v=x.selectAll("path.line")}else if(an(y)||y==Kv.web){var w=u.selectAll("g.areaseries_"+f);v=w.selectAll("path.area"),i=w}else{if(qn(y)){var C=u.selectAll("g.scatterseries_"+f);v=C.selectAll("g.scatter");var k=(v=A(v,!1,r,d)).selectAll("path.outer"),_=v.selectAll("path.inner");return o.push(k,_),s.push(y,y),l.push(f,f),void c.push(b,b)}if(-1!=Py.hierarchy.indexOf(y)){var S=u.selectAll("g.hierarchychart");v=S.selectAll(".series_"+f)}else if(y==Kv.wordcloud){var O=u.selectAll("g.wordcloudgroup");v=O.selectAll(".series_"+f)}else Py.bubblePie.has(y)&&(v=u.selectAll("g.piegroup").selectAll("path#arc_"+d))}v=A(v,!1,r,d),o.push(v),l.push(d),s.push(y),c.push(b)}});else{var k;if(tr(y=t||x))k="arc_",v=u.selectAll("g.piegroup").selectAll("path").filter(g);else if(y==Kv.funnel)k="funnel",v=u.selectAll("g.trapezoidgroup").selectAll("path").filter(g),k="ellipse",v=u.selectAll("g.ellipsegroup").selectAll("path").filter(g);else if(y==Kv.pyramid){k="section_";var _=u.selectAll("g.pyramidgroup");v=_.selectAll("g").filter(g)}else if(y===Kv.sankey){var S=e.cache.sankey.legend[n],O=e.renderer[0].highlighter.getDependentLayoutPoints(S,!0,"legend");v=u.selectAll("path").filter(function(e){return!Re(O,e)}),o.push(v),s.push(y),l.push(0),c.push(b)}}!an(y)&&y!=Kv.web||a(Kv.line,n,u,d,m,b),y==Kv.line&&h(r)&&a(Kv.scatter,n,u,d,m,b)}var i,o=[],l=[],s=[],c=[],u=t.selectAll("g.seriesholder"),d=0;return rn(e)?si(e)?a(null,n,u,e.seriesdata):Yt(e.dataObject).forEach(function(t){var r=t.row,i=t.column,o=t.layer,l=u.selectAll("g.grid"+r+"_"+i);e.userdata.facets.color.length&&o!==C?a(null,[-1],l,t.data,d,r+"_"+i):a(null,n,l,t.data,d,r+"_"+i),d+=t.data.length}):a(null,n,u,e.seriesdata),{unselectedSeries:o,indices:l,charttypes:s,parentSeries:i,paneIDs:c}}function i(e,t,n,r,a,i){if(null!=n&&n.constructor==Object&&null!=e&&null!=e.node()){var o=l(e,r,a,i),s={},c=u(r),d=wr(e);for(var h in n)if(n.hasOwnProperty(h)&&!Re(d,h)){c?(s[h]=s[h]||[],e.each(function(){s[h].push(fg(this).style(h))})):s[h]=e.style(h);var f=n[h];Km.SAFARI||Km.IE?e.attr(h,function(e){return zm.getVal(f,[e,r])}).style(h,function(e){return zm.getVal(f,[e,r])}):e.style(h,function(e){return zm.getVal(f,[e,r])})}v[o]=v[o]||s,"select"===a&&g.raiseSelection(t||e,i)}}function o(e,t,n,r,a){function i(){return c?f[p++]:f}if(null!=t&&t.constructor==Object&&null!=e&&null!=e.node()){var o=l(e,n,r,a),s=v[o],c=u(n),d=wr(e);for(var h in s)if(s.hasOwnProperty(h)&&!Re(d,h)){var f=s[h],p=0;Km.SAFARI||Km.IE?e.style(h,i).attr(h,i):e.style(h,i)}}}function l(e,t,n,r){var a=e.node(),i=a.localName,o=a.getAttribute("class"),l=a.getAttribute("id"),s=i+"_"+t;return null!=o&&(s+="_"+o),null!=l&&(s+="_"+l),null!==n&&(s+="_"+n),null!==r&&(s+="_"+r),s}function s(t){return Dx.hasPatternPallete(e)?/(area|arearange)/.test(t)?"moody":"strokeEnlarge":/(bar|bullet|gantt|area|arearange|pie|funnel|pyramid|web|sunburst|waterfall|boxplot|sankey)/.test(t)?"hatchfill":"heatmap"===t||"geoheatmap"===t?"tinyHatchfill":/(treemap|wordcloud)/.test(t)?"blackyBorder":"strokeEnlarge"}function c(t,n,a){g.selSeriesObj=[],(n=be(n)).forEach(function(t){var n=r(t,a);g.selSeriesObj.push(n);for(var o,l=n.selectedSeries,s=n.charttypes,c=n.parentSeries,u=n.paneIDs,d=l.length,h=0;h<d;h++){var p=g.getLegendHighlightEffect(t,"selectedSeries",void 0,u[h]),v=Ay.get(s[h]),y=g.baseClr||f(t,a);e.dataObject.isFlowChartCategory?l[h].each(function(n){y=e.renderer[0].getColor(n.point),o=g.getEffect(p,v,y,null,t),i(fg(this),c[h],o,n.point.itemIndex,"select")}):(o=g.getEffect(p,v,y,null,t),i(l[h],c[h],o,t,"select",u[h]))}})}function u(t){var n=_(null,sx,t,m);return n!==Kv.sankey&&(-1!=Py.hierarchy.indexOf(n)||b||Qn(n)||e.rendererConf&&e.rendererConf[e.isAxisCategory?t:0].thresholdType)}function d(t){var n=ln(e,0<arguments.length&&void 0!==t?t:"0_0",0),r=e.dataObject;if(r.isFlowChartCategory)return!0;if(cn(e,n.value,"hierarchy")){var a=g.getEffect(g.getLegendHighlightEffect(0,"selectedSeries"),n.name),i=Object.keys(a);return 0<i.length&&i.some(function(e){return"fill"!==e})}return!(!cn(e,n.value,"axis")||!r.noofAreaEnabledSeries&&!r.noofAreaRangeEnabledSeries)||void 0}function h(e){return Km.IE||Km.SAFARI||Z(e)}function f(t,n){if(Z(n)&&"clr"===x){var r=e.systemConf.legend.colorBand.ranges;return r&&r.length?Mn(e,n,null,C):e.axes.clr.scale((n[0]+n[1])/2)}return"z"===x?function(n,r){return Ln(e,r,n&&(n.data||n),t)}:Mn(e,t,null,C)}var p=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{encode:"clr"},g={},v={},y=e.defsLocation,m=e.userdata,b=!e.nochartdata&&dx.isQuantileColorScale(e),x=p.encode,w=p.order,C=void 0===w?0:w,_=Gt.helpers.getChartType,S=Dx.filterSelectionByColor,O=Dx.isItemDisabled,A=function(t,n,r,a){var i=ln(e,"0_0",a).value,o=-1<Py.zaxis.indexOf(i)&&!er(i);return"z"!==x||o?S(t,n,r,e,x):n?pg():t},P=p.config||e.systemConf.legend;return g.highlightSelectedSeries=function(t,n,a){if(g.baseClr=f(n,a),e.isGeoMap&&rr(ln(e,"0_0",n).value))!function(e,t,n,r){if(g.previousFilterIndex!==r){var a=e.eventHandler.mapEvents,i=a.getPointsByIndex(n,r),o=e.dataObject.getMapFeaturesByDataPoint(i,"array"),l=a.getHighlightEffect(n,null,"selectedSeries","legend");a.highlightPoints(o,"feature",l),g.previousFilterIndex=r}}(e,0,n,a);else switch(e.plot.renderer.mode){case"svg":c(t,n,a);break;case"canvas":!function(e,t,n,r){function a(t,n,a,l,s,c){var u=ln(e,c,t),d=u.name,h=u.value,p=cn(e,h,"axis"),v=cn(e,h,"polarAxis"),y=cn(e,h,"nonAxisMultiSeries"),m=g.getLegendHighlightEffect(t,"selectedSeries",void 0,c),w=g.getLegendHighlightEffect(t,"unselectedSeries",void 0,c);if(s=Hm(s,p||y||e.isGeoMap?t:0),m!==fm||Fy.test(w)){var C=Qv.canvasRenderer.createCanvasRenderer(d),k=n[s],_=null,S=y&&!v||e.dataObject.isFlowChartCategory?0:t,O=e.systemConf.chart.plot.plotoptions[d].fillOpacity;if("z"!==x||-1<Py.zaxis.indexOf(h)&&!er(h)){a=Hm(a,S);var A=e.renderer[a].commonRendererProp().params,P=f(rn(e)?A.legendIndex:t,r)||g.baseClr;if(zy.setRendererProp(e,C,n,S,S,{labelQueue:[],labelArray:{}},a,Gt.helpers.getChartType((rn(e)?k.node.type:k.type)||e.userdata.seriesdata.type,sx),l),b&&(an(h)||qn(h)))_=g.getEffect(m,h);else switch(d){case"bar":case"bullet":case"area":case"arearange":case"heatmap":case"treemap":case"web":(T=Jm[m]?eb(m):null)&&(_=li(T,P,O,e));break;case"sankey":case"wordcloud":var T;_=(T=Jm[m]?eb(m):null)?{fill:li(T,P,O,e)}:g.getEffect(m,h);break;case"scatter":case"geoscatter":case"bubble":case"geobubble":case"line":_=g.getEffect(m,d)}var E=p||rn(e)?n:k,L=A.bound,M=o[0]+(p?0:L.x+(v?L.polar.x:0)),z=o[1]+(p?0:L.y+(v?L.polar.y:0));i.translate(M,z),Qv.canvasRenderer.drawCanvas(e,E,C,i,_,r,x,e.dataObject.isFlowChartCategory?t:s),i.translate(-M,-z)}}}var i=e.highlightContext||(e.highlightContext=Qv.canvasRenderer.updateCanvasContext(e,"highlight-canvas",null,e.canvasScrollGroup)),o=[0,0];if(e.canvasScrollGroup){var l=e.axes.rotated,s=l?e.scrolledY:e.scrolledX;fg(i.canvas).styles({left:"0px",top:"0px"}),o=[l?0:-s,l?-s:0]}n=be(n),n.forEach(function(t){if(rn(e)){var n=Yt(e.dataObject),r=0;n.forEach(function(n){var i=n.layer,o=n.row+"_"+n.column;n.data.forEach(function(l,s){var c=ln(e,o,s).value,u=cn(e,c,"axis"),d=cn(e,c,"polarAxis");if(u||d)e.userdata.facets.color.length&&i!==C||e.rendererConf[r].legendIndex()!==t||a(s,n.data,r,l.layer,void 0,o);else if((!e.userdata.facets.color.length||i===C)&&e.rendererConf[r].legendIndex()===t){var h=r-s;a(t,n.data,h,l.layer,e.rendererConf[r].datasetIndex(),o)}r++})})}else a(t,e.seriesdata)})}(e,0,n,a);break;default:!function(t,n){if(g.getLegendHighlightEffect(n,"selectedSeries")!==fm){g.baseClr=Mn(e,n,null,C);var a=ln(e,"0_0",n),i=a.name,o=a.value,l=r(n);if(0<l.selectedSeries[0].length)return function(e,t){e.style("visibility",t?"visible":"hidden")}(l.selectedSeries[0],!0);if(e.chartRendered){e.systemConf.chart.plot.animation.enabled=!1,e.systemConf.chart.plot.plotoptions[i].animation.enabled=!1,e.seriesdata[n].plotoptions&&e.seriesdata[n].plotoptions.animation&&(e.seriesdata[n].plotoptions.animation.enabled=!1);var s=uw(i,e),u=e.systemConf.seriesdata.chartdata[n],d=0;if(o===Kv.bar||o===Kv.stkdbar)for(var h=0;h<n;h++)a=ln(e,"0_0",h),o=a.value,null!=e.seriesdata[h].disabled&&e.seriesdata[h].disabled||!Zn(o)||(d+=e.seriesdata[h].data.length);zy.setRendererProp(e,s,u,n,n,{labelQueue:[],barDatasetIndex:d}),dw(e,u,s),c(t,n)}}}(t,n)}},g.highlightUnselectedSeries=function(t,n,r){e.isGeoMap||"svg"===e.plot.renderer.mode?function(t,n,r){for(var o=a(n=be(n),r),l=o.unselectedSeries,s=o.indices,c=o.charttypes,u=o.paneIDs,d=l.length,h=0;h<d;h++){var f=Ay.get(c[h]),p=g.getLegendHighlightEffect(s[h],"unselectedSeries",void 0,u[h]);if(e.dataObject.isFlowChartCategory)l[h].each(function(e){v=g.getEffect(p,f,vm,vm,s[h]),i(fg(this),vm,v,e.point.itemIndex,"unselect")});else{var v=g.getEffect(p,f,vm,vm,s[h]);i(l[h],vm,v,s[h],"unselect",u[h])}}}(0,n,r):function(){var t=fg(e.context.canvas),n=g.getLegendHighlightEffect(0,"unselectedSeries"),r=g.getEffect(n,vm,vm,vm,0);i(t,vm,r,0,"unselect")}()},g.reset=function(t,n,i,l){if(e.isGeoMap&&rr(ln(e,"0_0",n).value))g.previousFilterIndex=null,e.eventHandler.mapEvents.clearHighlightedPoints();else switch(n=be(n),e.plot.renderer.mode){case"svg":!function(t,n,a){g.selSeriesObj=[],n.forEach(function(t){function n(){var n=void 0,r=Ay.get(c[h]);e.dataObject.isFlowChartCategory?s[h].each(function(e){n=g.getEffect(l,r,null,null,t),o(fg(this),n,e.point.itemIndex,"select")}):(n=g.getEffect(l,r,null,null,t),o(s[h],n,t,"select",u[h]))}for(var i=r(t,a),l=g.getLegendHighlightEffect(t,"selectedSeries"),s=i.selectedSeries,c=i.charttypes,u=i.paneIDs,d=s.length,h=0;h<d;h++)n();g.selSeriesObj.push(i)})}(0,n,i),function(t,n,r){g.unselSeriesObj=a(n,r);for(var i=g.unselSeriesObj.unselectedSeries,l=g.unselSeriesObj.indices,s=g.unselSeriesObj.charttypes,c=g.unselSeriesObj.paneIDs,u=i.length,d=0;d<u;d++){var h=Ay.get(s[d]),f=g.getLegendHighlightEffect(l[d],"unselectedSeries");if(e.dataObject.isFlowChartCategory)i[d].each(function(e){p=g.getEffect(f,h,vm,vm,l[d]),o(fg(this),p,e.point.itemIndex,"unselect")});else{var p=g.getEffect(f,h,null,null,l[d]);o(i[d],p,l[d],"unselect",c[d])}}}(0,n,i);break;case"canvas":e.container.select(".highlight-canvas").style("visibility","hidden"),function(){var t=fg(e.context.canvas),n=g.getLegendHighlightEffect(0,"unselectedSeries"),r=g.getEffect(n,vm,vm,vm,0);o(t,r,0,"unselect")}()}!1!==l&&(v={},this.resetSelection())},g.getLegendHighlightEffect=function(t,n,r,a){var i=ln(e,a,t),o=i.name,l=i.value,c=cn(e,l,"axis"),u=cn(e,l,"nonAxisMultiSeries"),d=c||u||e.isGeoMap?(e.seriesdata[t]||e.seriesdata[0]).plotoptions:e.seriesdata[0].plotoptions,h=e.systemConf.chart.plot.plotoptions[o],f=P.highlightEffect[n],p=d&&d.legendHighlightEffect?zm.getValueOfPlotOptions(d.legendHighlightEffect,h.legendHighlightEffect)(n):h.legendHighlightEffect&&h.legendHighlightEffect[n];if("plot"===r)return"unselectedSeries"!==n||P.highlightEffect.applyUnselectedSeriesToPlot?p||f||s(o):fm;var g="selectedSeries"===n&&b&&(an(l)||l===Kv.line)?"strokeEnlarge(6)":s(o);return p||f||g},g.getEffect=function(t,n,r,a,i,o){function l(n,a){var i=T(r,[n,a]);if(f.ele)f.bgClr_base=_n(i,1,"darker",Mg);else{var o="flip"===t?i:_n(i,1,"moody"===t?"darker":"brighter",Mg);if(f.bgClr_base=o,f.stroke_base=o,f.customStaticClr=e.userdata.legend.customPatternColor,"flip"===t){var l=(f=Dm(f)).bgClr_base;f.bgClr_base=f.stroke_base,f.stroke_base=l;var s=ue(f.bgClr),c=ue(f.stroke);f.bgClr=c,f.stroke=s}}var u=tb.get(tb.svg_patterns,"svgPatternFill",f,{chartObj:e});return"url("+y+"#"+u+")"}var c=k(r="waterfall"===n?function(t,n){return Ln(e,n,t,i)}:r||g.baseClr),u=V(t,e,r,Jm,o||"legend");if(u&&u.constructor==Object)return u;t=null===t||function(e,t){return/(line|scatter)/.test(t)&&/(((\D)+fill$)|illuminate|moody|flip)/.test(e)}(t,n)?s(n):t;var d={};if(e.patternPallete&&/(flip|moody|illuminate)/.test(t)){var h=e.patternPallete[(i||0)%e.patternPallete.length],f=Jm[h]?eb(h):ot(h);d.fill=c?l:l()}else if(/(saturate|grayscale|blur|glow|shadow|boxShadow)/.test(t)){var p,v=/(saturate|grayscale)/.test(t)?"colorMatrix":"dropShadow";switch(t){case"saturate":p={type:"saturate",values:"0.3"};break;case"grayscale":p={type:"matrix",values:".33 .33 .33 0 0 .33 .33 .33 0 0 .33 .33 .33 0 0 0 0 0 1 0"};break;case"blur":p={blur:2,source:"SourceGraphic"},d.opacity=.7;break;case"glow":p={blur:3,color:"gold"};break;case"shadow":p={dx:5,dy:5,blur:3};break;case"boxShadow":d.fill=r,d.stroke="white",p={dx:0,dy:0,blur:5,color:"rgba(0,0,0,0.3)"}}var m=tb.get(tb.svg_filters,v,p,{chartObj:e});d.filter="url("+y+"#"+m+")"}else if(/(moody|illuminate)/.test(t)){var x="moody"===t,w=function(e,t){var n=T(r,[e,t]);return Bm(n,"url")?x?"grey":"silver":te(n)?n.map(function(e){return _n(e,.6,x?"darker":"brighter",Mg)}):_n(n,.6,x?"darker":"brighter",Mg)};d.fill=c?w:w()}else if(-1<t.indexOf("strokeEnlarge")){var C=t.split(/(\d+)/g)[1];if(d["stroke-width"]=Z(C)?+C:3,b&&(d.visibility=vm),a)for(var _ in a)d[_]=a[_]}else"fadeOut"===t?d.opacity=.3:"blackyBorder"===t?(d.stroke="rgba(0,0,0,0.5)",d["stroke-width"]=1):"invert"===t?(d.fill="white",d.stroke=r,d["stroke-width"]=1,d["paint-order"]=null):"ridge"===t?(d.fill=r,d.stroke="white",d["stroke-width"]=7):t!==fm&&((f=eb(t))?(w=function(n,a){var i=T(r,[n,a]),o=eb(t);o.bgClr_base=i,o.stroke="transparent,white,white";var l=tb.get(tb.svg_patterns,"svgPatternFill",o,{chartObj:e});return"url("+y+"#"+l+")"},d.fill=c?w:w()):d.fill=r);var S=n;if(("sankey"===n||36===n)&&t!==fm){S+=".link";var O=Rm(e.systemConf,"chart.plot.plotoptions.sankey.hoveroptions");d["fill-opacity"]=O.fillOpacity}var A=Rm(e.systemConf,"chart.plot.plotoptions."+S+".gradients")||{};if(Z(A.type)&&te(r)&&n===Nb){A.options[A.type].stopColor=r;var P=[e.plotarea.width,e.plotarea.height];d.fill=On(A,P,r,"svg",1,n,!1,e)}return d},g.raiseSelection=function(e,t){d(t)&&e.raise()},g.resetSelection=function(){var r=t.selectAll("g.seriesholder");rn(e)?Yt(e.dataObject).forEach(function(e){var t=e.row+"_"+e.column,a=r.selectAll("g.grid"+t);d(t)&&n(a)}):d()&&n(r)},g}function li(e,t,n,r){return e.bgClr_base=kn(t,n),e.stroke="transparent,white,white",tb.get(tb.canvas_patterns,"canvasPatternFill",e,{chartObj:r})}function si(e){return!rn(e)||rn(e)&&Re([Tb,Lb,Mb],e.chartTypes[0].name)&&!e.userdata.facets.color.length}function ci(e,t){var n=t.nearest||t.selectionSet[0];ui(this.chart);var r=this.chart.eventHandler.tooltipElement,a=!0===this.chart.systemConf.tooltip.enabled,i=vx.hasSharedSeries(this.chart),o=this.chart.eventHandler.getPointType(n),l=this.chart.dataset.getDataType("x"),s=0<this.chart.dataObject.noofBarEnabledSeries,c=(i=vx.hasSharedSeries(this.chart),l===ox&&(s||i));if(a&&"series"==o){var u=lr(Xn(this.chart.eventHandler.targetEvent),e,n._x,n._y,this.chart,n,this.chart.eventHandler.rotated,i,this.chart.eventHandler.tooltipSharedInfo,c,this.chart.eventHandler.isPolarAxisCategory,nr(ln(this.chart,n.paneid,n.seriesIndex).value)&&this.chart.subrenderer[n.subSeriesIndex][cw.getKey(n,n.seriesIndex,this.chart)].fillColorFunc);u.helpers.d.paneid||(u.helpers.d.paneid=n.paneid),r.show(this.chart,u,null,!0,u.helpers)}else if(a&&("marker"==n.type||"levelMarker"==n.type)){var d=lr(Xn(this.chart.eventHandler.targetEvent),e,0,0,this.chart,n,this.chart.eventHandler.rotated,i,{},!0,!1,!1),h=this.chart.eventHandler.bulletEvents.getTooltipContent(n,0);d.helpers.inheritColors=!0,d.helpers.itemIndex=n.sortedItemIndex,d.helpers.seriesIndex=n.sortedItemIndex,d.helpers.chartType=n.chartType,r.show(this.chart,d,h,!1,d.helpers)}}function ui(e){if(!e.eventHandler.tooltipElement){e.eventHandler.tooltipElement=qv.tooltip(e.tooltip.element,e.systemConf,e),e.eventHandler.tooltipElement.initialize();var t=e.eventHandler.tooltipElement;e.eventHandler.addListeners(e.eventHandler.tooltipElement.element,"tooltip"),"auto"===e.systemConf.tooltip.pointerEvents&&(t.element.on("mouseenter",function(){e.eventHandler.mouseOnTooltip=!0}),t.element.on("mouseleave",function(){e.eventHandler.mouseOnTooltip=!1,e.eventHandler.handlers.mouseout.call(this)}));var n="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",r=e.container.node(),a=null;e.d3container.on(n,function(){var e=r.getBoundingClientRect();a&&(a.left===e.left&&a.top===e.top||t.hide(t.element)),a=e})}}function di(e){var t=void 0;if(rn(e)){var n="";Yt(e.dataObject).forEach(function(t){var r=zy.getBound(e,t.data[0]),a=r.x,i=r.y,o=r.width,l=r.height,s=r.polar,c=e.dataObject.hierarchical.gridOptions[t.row+"_"+t.column].chartTypes[0].value;if(cn(e,c,"polarAxis")){var u=s.radius;a+=s.x,i+=s.y,n+="M"+(a-u)+" "+i+" A"+u+" "+u+" 0 0 1 "+(a+u)+" "+i+" A"+u+" "+u+" 0 0 1 "+(a-u)+" "+i+" "}else Re(Py.singleSourceEvent,c)&&(n+="M"+a+" "+i+" L"+(a+o)+" "+i+" L"+(a+o)+" "+(i+l)+" L"+a+" "+(i+l)+" Z ")});var r={d:n,name:"pivotpolarClip",id:e.id};t=tb.get(tb.svg_clips,"polygon",r,{chartObj:e})}else if(cn(e,null,"polarAxis")){var a=e.plotarea_approx,i=(r={name:"polarClip",id:e.id,cx:a.x,cy:a.y,r:qy(0,a.radius)},{chartObj:e});t=tb.get(tb.svg_clips,Gm,r,i)}e.eventHandler.trackerElement.attr("clip-path",t?"url("+e.defsLocation+"#"+t+")":null),window.PointerEvent||"canvas"!==e.plot.renderer.mode||function(e){function t(){e.style("display",fm);var t=document.elementFromPoint(Hv().clientX,Hv().clientY),n=fg(t),r=t&&t.__on&&t.__on.filter(function(e){return e.type===Hv().type})[0].value;return e.style("display",vm),fg(this).style("cursor",r?n.style("cursor"):vm),r&&r.call(t,n.datum(),n.attr("index")||0),!1}Mr(e,{mousemove:t,mouseout:t,click:t,dblclick:t},{singletouchmove:t,touchend:t,tap:t,dbltap:t})}(e.container.selectAll("canvas.zc-labelholder-canvas,canvas.highlight-canvas,canvas.zc-canvas"))}function hi(){function e(e){return t?t.get(e):null}var t,n,r,a,i,o;return e.domain=function(t){return arguments.length?(n=t,e):n},e.rangeBand=function(t){return arguments.length?(o=t,e):0},e.bandwidth=function(e){return r?arguments.length?r.get(e):o:null},e.rangeBands=function(n){if(!arguments.length)return r;if(null==n)return e;i=n,r=new Dg,t=new Dg;for(var a=-1,o=n.length;++a<o;)t.set(a,n[a][0]),r.set(a,n[a][1]-n[a][0]);return e},e.discreteWidth=function(e){return r?r.get(e):null},e.range=function(t){return arguments.length?(a=t,e):a},e.copy=function(){return hi().domain(n).rangeBands(i).range(a)},e}function fi(e){e=Hm(e,{}),this.startWeekDay=Z(e.startWeekDay)?e.startWeekDay:1,this.startMonth=Z(e.startMonth)?e.startMonth:0}function pi(e,t,n,r,a){return r.length,e||function(e,t){var r=Rn(t.itemIndex,a,t,n);return Ln(n,r,e&&e.data?e.data:e,a)}}function gi(e,t){return Im(t.systemConf.chart.plot.datalabels.boundBox,e.boundBox,!0)}function vi(e,t){return!0===Y([e.boundBox||{},t.systemConf.chart.plot.datalabels.boundBox||{}],"show")}function yi(e,t){return qy(U(Y([e.boundBox||{},t.systemConf.chart.plot.datalabels.boundBox||{}],"padding"),2),0)}function mi(e,t){return U(Y([e.boundBox||{},t.systemConf.chart.plot.datalabels.boundBox||{}],"strokeWidth"),1)}function bi(e,t,n,r){return qy(2*(n||0)+r-e-2*t,0)}function xi(e){var t=!0===(e=e||{}).enabled,n={};return n.enabled=t,n.width=t?Z(e.width)?+e.width:10:0,n.height=t?Z(e.height)?+e.height:4:0,n}function wi(e){return!(!1===e.display||B(e.text)||""===e.text)}function Ci(e,t,n){return{seriesIndex:t,itemIndex:e,multiColoring:n.multiColoring,reverseColor:n.reverseColor,dataCount:n.dataUpdate.length}}function ki(e,t,n,r,a){var i=t&&t.datalabels?Im(e.datalabels,t.datalabels,!0):e.datalabels;return n&&function(e,t,n,r){var a,i,o,l,s,c,u=ln(t,r,n).name,d=H(t.userdata,"chart.plot.plotoptions."+u+".datalabels",!0)||{},h=H(t.seriesdata[n]||t.seriesdata[0],"plotoptions.datalabels",!0)||{};(h.showAs||d.showAs)&&(e.showAs=h.showAs||d.showAs||e.showAs),(a=d.innerLabel)?((l=e.innerLabel).showAs=a.showAs||l.showAs,(i=a.parentLabel)&&((s=e.innerLabel.parentLabel).showAs=i.showAs||s.showAs)):(o=d.stackLabels)&&((c=e.stackLabels).showAs=o.showAs||c.showAs)}(i,n,r,a),i}function _i(e,t,n,r,a,i,o){var l=n.systemConf;return te(r)&&Z(i)&&(r=r[i]),kt(e,[{fontColor:Oi(l,r,t,n,a,i,o,"fontColor"),strokeColor:Oi(l,r,t,n,a,i,o,"strokeColor")},t,l.chart.plot.datalabels,l.chart,l.canvas,Qm])}function Si(e,t,n){var r=1<arguments.length&&void 0!==t?t:1,a=n;if(Km.FIREFOX&&a&&r)return e===pm?{stroke:null}:{stroke:null,"text-shadow":function(e,t,n){t=parseInt(t/2);var r=n.split(/ (?![^(]*\))/),a=parseFloat(r[0])+t+"px "+(parseFloat(r[1])+t)+"px "+r[2]+" "+(r[3]||"black");return-t+"px "+-t+"px 0 "+e+", "+t+"px "+-t+"px 0 "+e+", "+-t+"px "+t+"px 0 "+e+", "+t+"px "+t+"px 0 "+e+", "+a}(e,r,a)}}function Oi(e,t,n,r,a,i,o,l,s){var c=7<arguments.length&&void 0!==l?l:"fontColor",u=s,d=n[c];if("function"==typeof d){var h=V(d,t,r);if(Z(h))return h}var f,p=Rm(r.systemConf,"chart.plot.datalabels")||{},g=Rm(r.systemConf,"map.labels")||{},v=r.isGeoMap?Hm(p[c],g[c]):p[c],y=ln(r,u,i||0),m=y.value,b=Z(e.legend.imagePallete),x=Zn(m)&&r.dataObject.isstacked(m)&&!0!==o,w=y.name===Nb&&"inside"===n.labelPos;if(vi(n,r))f=gi(n,r).fillColor||t;else if(w){var C=e.chart.plot.plotoptions.sankey.node;t=Hm(C.fillColor,t)}if("fontColor"===c&&d===Ey&&v===Ey){if(f&&f!==pm)return oe(f);if(a&&b)return"#444444";if(a&&-1<Py.innerLabels.indexOf(m)||x||w||-1<Py.datalabelsInside.indexOf(m))return oe(t)}return(b||(Z(d)||null!==v)&&null!==d?d:t)||Hm(v,e.chart[c],e.canvas[c],Qm[c])}function Ai(e,t){return!(e.x1<t.x1||e.y1<t.y1||e.x2>t.x2||e.y2>t.y2)}function Pi(e,t){if(Ht(t,Wx)){var n=t.systemConf.metadata.axes.label;return n&&Z(n[0])||!0===Y([e,t.systemConf.chart.plot.datalabels],"show")}return!1}function Ti(e,t){return t.dataObject.noofBarEnabledSeries&&t.dataObject.isstacked()&&!t.dataObject.isStackedPercentChart&&e&&e.show}function Ei(e,t,n,r,a,i){var o=+n[0],l=+n[1],s=t.plotarea,c={left:-r,right:-r,top:0,bottom:0},u=ib;a=a||{left:-o,top:-l,right:s.width-o,bottom:s.height-l},e.each(function(){var e=M(this),t={left:e.x+(i?i[0]:0),top:e.y+(i?i[1]:0),width:e.width,height:e.height};bt(this,this.textContent,t,a,u,"..",c)})}function Li(e){return e.staticPaneSVG.select(".labelholder")}function Mi(e,t,n){var r=e.labelArray,a=""+(t||0);return-1===a.indexOf("_")?a="0":Z(n)&&(a+="("+n+")"),r[a]=r[a]||[],r[a]}function zi(e,t){var n,r,a=e.systemConf,i=e.dataObject,o=i.isstacked(),l=i.noofBarEnabledSeries,s="y"===t;if(n=e.seriesdata.some(function(t,n){if(!t.disabled){var r=t.plotoptions;return Pi(ki(a.chart.plot.plotoptions[e.chartTypes[n].name],r),e)}}),s&&l&&o&&!i.isStackedPercentChart){var c=i.allChartTypes,u=e.dataObject.filterEncode("stack",function(e){return e.seriesIndices.some(function(e){return Zn(c[e])})});if(!u.length)return!1;var d=Ya(u[0]),h=a.chart.plot.plotoptions[e.chartTypes[d].name].datalabels.stackLabels||{};r=!!h&&h.show}return n||r}function Ii(e){var t=e.systemConf,n=e.dataObject.totalnoofdatas;if(+t.canvas.intelligence.dataCount.datalabels<n)return!1;if(!0===Rm(t.chart,"plot.datalabels.show"))return!0;for(var r=e.seriesdata,a=r.length;a--;){var i=t.chart.plot.plotoptions[e.chartTypes[a].name],o=i.datalabels;if(Z(r[a].plotoptions)&&(o=ki(i,r[a].plotoptions)),Pi(o,e))return!0}return!1}function Di(e,t,n){var r=2<arguments.length&&void 0!==n?n:0;return Ri(e,t)[r]}function Ri(e,t){var n=e.axes[t];if(rn(e)){if("y"!==t)return e.systemConf.chart.axes.xaxis.splitLeaves?n.leaves:[{scale:n.leafScaleGrid}];var r=e.dataObject.hierarchical.pivotLayout.getRootNodeList("row"),a=r.getCount();return r.hasMultiCluster()||a?n.leaves:n.groups}return"y"===t?n.groups:[{scale:n.scale}]}function ji(e){var t=e.chartTypes[0].name;return e.systemConf.chart.plot.plotoptions[t]}function Hi(e,t,n,r){var a=e.dataset.getColumn(t,n),i=a.datatype,o=a[i];return function(t){return Aa(o,t,i,e,r)}}function Bi(e,t){var n=ji(e),r=function(e,t,n){var r=2<arguments.length&&void 0!==n?n:0,a=e.systemConf.chart.axes;return"x"==t?a.xaxis:a.yaxis[r]}(e,t).reversed,a=n.startAngle,i=n.endAngle;return r?[U(i,2*sm),U(a,0)]:[U(a,0),U(i,2*sm)]}function Ni(){this.list=Dg(),this.list1=Dg(),this.count=0}function Fi(e){return"datalabels-"+e}function Vi(e){if("time"==e.dataType)return correctionFactorForTimeData.call(this,e);var t=this,n=(t.chartObj.dataObject,t.type,t.encode,t.reverse,t.dimension,t.config.extremes),r=e._needCorrectionFactor,a=e.correction,i=e.preCorrectionValue?t.config.domain.outerPaddingCorrection:0,o=e.correctionValue||i||0,l=t.config.domain.operators.min,s=t.config.domain.operators.max,c=n[1]-n[0];return 0===c&&(c=1),r&&(o=c*a),B(l)&&(l=t.config.domain.hasDefaultMin?0:n[0]-o),B(s)&&(s=n[1]+o),t.config.extremes=[l,s],[l,s]}function Wi(e,t){return te(t)||(t=[t]),Ig(t.map(function(t){return Yi(e,t)}))}function Yi(e,t){var n=[];return e&&te(e)&&e.every(te)?e.forEach(function(e){return function(e,t,n){var r=Yi(e,t);n.push.apply(n,_toConsumableArray(r))}(e,t,n)}):function(e,t,n){var r=k(t)?t(e):e[t];te(r)?n.push.apply(n,_toConsumableArray(r)):n.push(r)}.call(null,e,t,n),n}function Ui(e,t,n,r){_classCallCheck(this,Ui),this.encode=e,this.key=t||0,this.config=n,this.chartObj=r,this.bounds={},this.init()}function Gi(e){var t=e.useDiscrete,n=e.datatype;return t?ox:n||ox}function Xi(e){return/(left|right)/.test(e)?"bottom":"left"}function Zi(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function qi(e){var t=[];return Z(e.threshold)&&pe(e.threshold,function(e){!0===e.show&&e.values.length&&(t=t.concat(e.values))}),t}function Qi(e,t,n){if(1<n.getAxesCount("y")){var r=t.allChartTypes;return e.seriesIndices.map(function(e){return r[e]}).some(function(e){return Zn(e)||e===Kv.area||e===Kv.stkdarea})}return t.noofBarEnabledSeries&&!t.noofBoxplotEnabledSeries||t.noofAreaEnabledSeries}function Ki(e,t,n,r,a,i){var o="y"==n?r?e.x:e.y:r?e.y:e.x,l=function(e,t){return"y"==e?t?ib:rb:t?rb:ib}(n,r)==rb;return function(e,t,n,r,a){var i=Eg(n).left(t,e,0,r);return">"==a?0<i&&t[i]>e?i-1:i:"<"==a?0<i&&t[i]<e?i-1:i:0<i&&e>t[i-1]?i-1:i}(o,t,(a?!l:l)?Yg:Wg,t.length-1,i)}function $i(e,t,n,r,a){var i=Zv.getOuterPadding(e,t,n,r);return 2*(Qy(e[0],e[1])+a*i)}function Ji(e,t,n,r,a,i,o,l){var s=0,c=0,u=a[0]<a[1],d=u?0:1,h=u?1:0;return(e.datalabels.moduleExists&&Ii(e)||e.dataObject.isBubbleEnabled)&&(c=e.dataObject.extendOuterpadding(r,a,e.systemConf,i,l,t,n)),s+=c,s+=Ky(a[1]-a[0])*o,a[d]=a[d]+s,a[h]=a[h]-s,{range:a,outerPaddingPx:s}}function eo(e){return e.ordinalRange||(e.ordinalRange=e.domain().map(function(t){return e(t)}))}function to(e){var t=Gt.helpers.getChartType(e.type||this.globalChartType,sx);return!e.disabled&&Zn(t)}function no(e,t,n){if("x"===t)return e.systemConf.chart.axes.xaxis;if("clr"===t)return e.systemConf.legend.colorBand;if(e.dataObject.hierarchical){var r=Qt(n,null,"y",e);return e.systemConf.chart.axes.yaxis[r]}return e.systemConf.chart.axes.yaxis[n||0]}function ro(e,t,n){var r=e.getColumn(t,n).scaleType||"linear";return"log"===r?Tg:"sqrt"===r?Pg:kg}function ao(e){var t=e.chartTypes[0].value;return rn(e)&&Yt(e.dataObject).some(function(n){var r=n.row+"_"+n.column,a=ln(e,r,0).value;if(cn(e,a,"axis"))return t=a,!0}),t}function io(e){return Jy($y(e[0],2)+$y(e[1],2))}function oo(e,t){var n=1;return e[0]*t[1]-e[1]*t[0]<0&&(n=-1),n*Math.acos(function(e,t){var n=function(e,t){return e[0]*t[0]+e[1]*t[1]}(e,t)/(io(e)*io(t));return n<0?qy(-1,n):Qy(1,n)}(e,t))}function lo(e,t,n,r,a,i,o,l){if(0!==t&&0!==n){r*=Math.PI/180,t=Math.abs(t),n=Math.abs(n);var s,c=function(e,t){var n=em(t),r=Math.sin(t);return[n*e[0]+r*e[1],-1*r*e[0]+n*e[1]]}(function(e,t){return[(e[0]-t[0])/2,(e[1]-t[1])/2]}(e,o),r),u=function(e,t){return[e[0]*t[0],e[1]*t[1]]}(c,c),d=$y(t,2),h=$y(n,2),f=Jy(u[0]/d+u[1]/h);1<f&&(n*=f,d=$y(t*=f,2),h=$y(n,2)),s=Jy(Math.abs((d*h-d*u[1]-h*u[0])/(d*u[1]+h*u[0]))),a===i&&(s*=-1);var p=function(e,t){return[e*t[0],e*t[1]]}(s,[t*c[1]/n,-n*c[0]/t]),g=function(e,t){return[e[0]+t[0],e[1]+t[1]]}(function(e,t){var n=em(t),r=Math.sin(t);return[n*e[0]-r*e[1],r*e[0]+n*e[1]]}(p,r),function(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]}(e,o)),v=[(c[0]-p[0])/t,(c[1]-p[1])/n],y=[(-1*c[0]-p[0])/t,(-1*c[1]-p[1])/n],m=oo([1,0],v),b=m+oo(v,y);l.push({type:"save",args:[]},{type:"translate",args:[g[0],g[1]]},{type:"rotate",args:[r]},{type:"scale",args:[t,n]},{type:"arc",args:[0,0,1,m,b,1-i]},{type:"restore",args:[]})}else l.push({type:"lineTo",args:o})}function so(e){function t(e,t){return-1==="mlazhvcsqt".indexOf(e)?i=t:(i[0]+=t[0],i[1]+=t[1]),s=e,i.slice(0)}function n(e,n){for(var r=[],a=i.slice(0),l=0;l<n.length;l+=2){i=a.slice(0);var s=t(e,n.slice(l,l+2));r=r.concat(s),l===n.length-4&&(o=s.slice(0))}return r}function r(){-1==="CcSsQqTt".indexOf(s)&&(o=i.slice(0));var e=[0,0];return e[0]=2*i[0]-o[0],e[1]=2*i[1]-o[1],e}var a,i=[0,0],o=[0,0],l=[],s="",c=!1,u={m:function(e,n){var r=e;for(c=c&&!(r="M"),l.push({type:"moveTo",args:t(r,n)});n.length;)a=n.splice(0,2),l.push({type:"lineTo",args:t(e,a)})},z:function(){l.push({type:"closePath",args:[]})},l:function(e,n){for(;n.length;)a=n.splice(0,2),l.push({type:"lineTo",args:t(e,a)})},h:function(e,n){l.push({type:"lineTo",args:function(e,n){var r=[n,0];return"H"===e&&(r[1]=i[1]),t(e,r)}(e,n)})},v:function(e,n){l.push({type:"lineTo",args:function(e,n){var r=[0,n];return"V"===e&&(r[0]=i[0]),t(e,r)}(e,n)})},c:function(e,t){for(;t.length;)a=t.splice(0,6),l.push({type:"bezierCurveTo",args:n(e,a)})},s:function(e,t){l.push({type:"bezierCurveTo",args:r().concat(n(e,t))})},q:function(e,t){for(;t.length;)a=t.splice(0,6),l.push({type:"quadraticCurveTo",args:n(e,t)})},t:function(e,t){var a=r();l.push({type:"quadraticCurveTo",args:a.concat(n(e,t))}),o=a.slice(0)},a:function(e,n){var r=[i.slice()],a=[t(e,n.slice(-2))],o=r.concat(n.slice(0,-2),a,[l]);lo.apply(this,o)}},d=Ot(e);return d.length&&d.forEach(function(e){var t=e.function.toLowerCase();u[t](e.type,e.moves)}),l}function co(e,t,n,r){var a={d:Hm((4<arguments.length&&void 0!==arguments[4]?arguments[4]:{}).desc,function(e,t){var n=[0,0],r=void 0,a=e.d3_brush.extent()()[1];return t=t||e.getSelection(),r="x"===e.options.type?"M"+n[0]+" "+n[1]+"L"+t[0]+" "+n[1]+"L"+t[0]+" "+a[1]+"L"+n[0]+" "+a[1]+"ZM"+t[1]+" "+n[1]+"L"+a[0]+" "+n[1]+"L"+a[0]+" "+a[1]+"L"+t[1]+" "+a[1]+"Z":"M"+n[0]+" "+n[1]+"L"+a[0]+" "+n[1]+"L"+a[0]+" "+t[0]+"L"+n[0]+" "+t[0]+"ZM"+n[0]+" "+t[1]+"L"+a[0]+" "+t[1]+"L"+a[0]+" "+a[1]+"L"+n[0]+" "+a[1]+"Z"}(e,t)),name:"brush",id:n.id},i="brush_tracker_clip_"+r+"_"+n.id;return Km.PHANTOMJS?i=tb.get(tb.svg_clips,"polygon",a,{chartObj:n}):jx.polygon(a,i,null,null,null,n),"url("+n.defsLocation+"#"+i+")"}function uo(e,t,n){return{line:{strokeColor:"grey",strokeWidth:2,height:e[t?1:0]+20},triangleUp:{size:15,fillColor:"#4C4C4C"},triangleDown:{size:15,fillColor:"#4C4C4C"},triangleUpDown:{size:15,fillColor:"#4C4C4C",padding:e[t?1:0]+15},box:{strokeWidth:1,strokeColor:"black",fillColor:"transparent",height:e[t?1:0],width:n?e[t?0:1]/n:10},enlarge:{range:1.2,height:e[t?1:0],width:n?e[t?0:1]/n:10},lever:{height:26,width:9,radius:2,stripeHeight:8,stripePadding:2,fillColor:"white",strokeColor:"#DADADA",stripeColor:"#DADADA",shadow:"0 0 2px rgba(0,0,0,0.2)"},hollowCircle:{size:25,outerFillColor:"white",outerStrokeColor:"#DADADA",innerStrokeColor:"#DADADA",shadow:"0 0 2px rgba(0,0,0,0.2)"},circle:{size:25,outerStrokeColor:"white",outerStrokeWidth:2,innerFillColor:"white",shadow:"0 0 2px rgba(0,0,0,0.2)"},vernier:{height:26,width:9,fillColor:"white",strokeColor:"#DADADA",shadow:"0 0 2px rgba(0,0,0,0.2)"},pentagon:{size:8,bandWidth:3,fillColor:"white",strokeColor:"#DADADA",shadow:"0 0 2px rgba(0,0,0,0.2)",height:e[t?1:0]},lineCircle:{size:15,strokeWidth:2,strokeColor:"blue",position:t?"end":"start"},rectangle:{fillColor:"#333",strokeWidth:1}}}function ho(e,t){Cw.set(e,t)}function fo(e,t,n,r,a,i){var o=function(e,t,n,r,a,i){var o=[n[1][0]-n[0][0],n[1][1]-n[0][1]],l=uo(o,"x"===e,r)[t],s=_extends({},l,a),c=kw(t,s,e,o,i);return be(c).forEach(function(e){e.alignCenter=!1}),c}(e,1<arguments.length&&void 0!==t?t:"lever",n,3<arguments.length&&void 0!==r?r:null,a,i);return function(e){return{x:[{type:"w"},{type:"e"}],y:[{type:"n"},{type:"s"}]}[e]}(e).map(function(e){return _extends({},e,o)})}function po(e,t,n,r,a){var i=3<arguments.length&&void 0!==r?r:0,o=a,l=e.axes.rotated,s=o||go(e,t,i,n),c={x:l?"y":"x",y:l?"x":"y"},u=s[1]-s[0],d="x"===c[n]?"width":"height",h=e.plotarea[d]/u,f=0,p=0;return"height"==d?p=-s[0]:f=-s[0],Bg.scale(h).translate(f,p)}function go(e,t,n,r,a,i,o){var l=!(5<arguments.length&&void 0!==i)||i,s=o;t=[t[0],t[t.length-1]];var c=la(e,r,n)||{},u=c.scale,d=c.baseScale,h=void 0;return u=Hm(s,l?d:u),h=t.map(u).sort(Wg),u.bandwidth&&(h=function(e,t,n){var r=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],a=eo(t).slice(0).sort(Wg),i=(a[1]-a[0]-t.bandwidth())/2,o=e.outerPaddingPx;!1===r&&(i=o=0);var l=t.bandwidth(),s=a[0]===n[0]?n[0]-o:n[0]-i,c=a[a.length-1]===n[1]?n[1]+l+o:n[1]+l+i;return[s,c]}(u,s||d||u,h,a,e.axes.rotated)),h}function vo(e,t,n){var r=function(e){var t=e.systemConf.chart.scroll.overview.data;if(!t){t=Dm(e.userdata),jm(t,"chart.marginTop",0),jm(t,"chart.marginBottom",0),jm(t,"chart.marginLeft",0),jm(t,"chart.marginRight",0),jm(t,"canvas.title.show",!1),jm(t,"canvas.subtitle.show",!1),jm(t,"canvas.border.show",!1),jm(t,"canvas.shadow.show",!1),(t.metadata.axes.y||[]).forEach(function(e,n){jm(t,"chart.axes.yaxis["+n+"].show",!1)});var n=e.dataset.getColumn("x",0);jm(t,"chart.axes.xaxis.show",n.datatype===lx&&"auto"===Rm(n,"time.format.specifier")),jm(t,"chart.axes.xaxis.label.show",!1)}return jm(t,"__$overview",!0),jm(t,"chart.plot.renderer.mode","canvas"),jm(t,"chart.axes.rotated",e.axes.rotated),jm(t,"chart.plot.datalabels.show",!1),jm(t,"chart.plot.events.enabled",!1),jm(t,"credits.show",!1),jm(t,"notes.enabled",!1),jm(t,"chart.scroll.enabled",!1),jm(t,"chart.axes.xaxis.ticklabel.textOverflow","none"),jm(t,"chart.axes.animation.enabled",!1),jm(t,"metadata.axes.label",[]),jm(t,"legend.enabled",!1),Gt.helpers.getAllChartTypes(t,"object").forEach(function(e){jm(t,"chart.plot.plotoptions."+e.name+".datalabels.show",!1),jm(t,"chart.plot.plotoptions."+e.name+".datalabels.stackLabels.show",!1),jm(t,"chart.plot.plotoptions."+e.name+".animation.enabled",!1)}),t}(e),a=e.container.selectAll("div.zcoverview");a.styles({position:"absolute","pointer-events":fm,"box-sizing":"border-box",width:t.width+"px",height:t.height+"px",left:t.left+"px",top:t.top+"px"}),e.overview=Fx(a.node(),r),n&&n(e.overview)}function yo(e,t){var n=Rg(["lineCircle"]),r=e.settings.resizer||{},a=r.type;if(r.enabled&&n.has(a)){var i=r[a]||{};return function(e,t,n,r,a){var i=uo([n[1][0]-n[0][0],n[1][1]-n[0][1]],"x"===e,r)[t];return _extends({},i,a)}("x",r.type,t,null,i).size}return 0}function mo(e){function t(){var t=u.getSelection(),r=function(e,t,n,r){var a=e[1]-e[0],i=n?0:e[0]-r.left,o=n?e[0]-r.top:0,l=n?t.height:a,s=n?a:t.height;return{x:i,y:o,width:l,height:s}}(t,a,l,e.plotarea);d.putImageData(h,0,0),d.clearRect(r.x,r.y,r.width,r.height),ww.CLIP_TRACK(u,t,n.chart,"overview")}var n=this,r=n.dimension,a=n.settings,i=n.brushExtent,o=a.overview||{},l=e.axes.rotated,s=n.scrollDomain,c=o.selection||s;!1!==o.syncScale&&(n.brushScale=e.axes.x.scale),"plot"===o.bindTo&&(i=bo(e,a,!0));var u=n.addEvent(i,c),d=function(e,t){return t.width=Gy(t.width),_e(Et("canvas",".overview-grayscale",[1],e.d3container.select(".canvas-component"),"svg.static").attrs({width:t.width,height:t.height}).styles({position:"absolute",left:e.plotarea.left+"px",top:e.plotarea.top+"px",width:t.width+"px",height:t.height+"px"}).node().getContext("2d"))}(e,r),h=function(e){return e.getImageData(0,0,e.canvas.width,e.canvas.height)}(e.context);!function(e,t){for(var n=1<arguments.length&&void 0!==t?t:"gray",r=zg(n),a=e.data,i=0;i<a.length;i+=4){var o=a[i]+a[i+1]+a[i+2];"grayscale"===n?a[i]=r.r=a[i+1]=a[i+2]=o:0!==o&&(a[i]=r.r,a[i+1]=r.g,a[i+2]=r.b,a[i+3]=255*r.opacity)}}(h,o.unselectedEffect),t(),u.addHook("brush.clipCanvas",t)}function bo(e,t,n){var r=e.plotarea;return n?[[r.left,r.top],[r.width+r.left,r.height+r.top]]:[[0,0],e.axes.rotated?[t.height,e.plotarea.height]:[e.plotarea.width,t.height]]}function xo(e,t,n){this.target=e,this.type=t,this.selection=n}function wo(){var e=Hv();e.cancelable&&e.preventDefault()}function Co(e){return e.touches}function ko(){var e=Hv();return!e.ctrlKey&&!e.button}function _o(e,t){var n=function(){for(var e=Hv(),t=void 0;t=e.sourceEvent;)e=t;return e}();n.changedTouches&&(n=n.touches[t]);var r=e.ownerSVGElement||e;if(r.createSVGPoint){var a=r.createSVGPoint();a.x=n.clientX,a.y=n.clientY;var i=[(a=a.matrixTransform(e.getScreenCTM().inverse())).x,a.y];return Co(Hv())&&!Km.ANDROID&&Km.uiwebview&&(i[0]+=window.pageXOffset,i[1]+=window.pageYOffset),i}var o=e.getBoundingClientRect();return[n.clientX-o.left-e.clientLeft,n.clientY-o.top-e.clientTop]}function So(e){function t(e,t,r){var i=new xo(n,t,e);jv(i,a.apply,a,[t,r,[i,r]])}function n(a){function o(t){switch(e){case"X":return[t[0][0],t[1][0]];case"Y":return[t[0][1],t[1][1]];default:return t}}function l(t){var n=null,a=null,i=null,o=null;if(null!==t)switch(e){case"X":n=t[0][0],i=t[1][0]-t[0][0],a=r[0][1],o=r[1][1]-r[0][1];break;case"Y":n=r[0][0],i=r[1][0]-r[0][0],a=t[0][1],o=t[1][1]-t[0][1];break;default:n=t[0][0],a=t[0][1],i=t[1][0]-t[0][0],o=t[1][1]-t[0][1]}u.attrs({width:i,height:o,x:n,y:a})}function s(){wo(),Hv().stopImmediatePropagation();var e=void 0;e=Co(Hv())?(d=_o(p,0),_o(p,1)):Pr(p),f=function(e,t){var n=Qy(e[0],t[0]),a=Qy(e[1],t[1]),i=qy(e[0],t[0]),o=qy(e[1],t[1]);return[[n=qy(n,r[0][0]),a=qy(a,r[0][1])],[i=Qy(i,r[1][0]),o=Qy(o,r[1][1])]]}(d,e),l(f),t(o(f),"brush",a)}function c(){wo(),h.on("mousemove.brush",null),h.on("touchmove.brush",null),h.on("mouseup.brush touchend.brush",null),f&&t(o(f),"end",a)}var u=Et("rect",".selection",[1],a).attrs({fill:"#777","fill-opacity":.3,stroke:"#fff","shape-rendering":"crispEdges"}),d=void 0,h=fg(window),f=void 0,p=a.node();a.on("mousedown.brush, touchstart.brush",function(){if(i.apply(this,arguments)){wo(),d=Pr(p),l(f=[d,d]),t(o(f),"start",a);var e=Hv(),n=e.touches;Co(e)&&1<n.length?h.on("touchmove.brush",s,!0):h.on("mousemove.brush",s,!0),h.on("mouseup.brush touchend.brush",c,!0)}}),n.move=function(n,r){r?(t(o(f),"start",n),function(t){if(null!==t)switch(e){case"X":f[0][0]=t[0],f[1][0]=t[1];break;case"Y":f[0][1]=t[0],f[1][1]=t[1];break;default:f=[].concat(_toConsumableArray(t))}}(r),t(o(f),"brush",n),t(o(f),"end",n)):f=null,l(f)}}var r=void 0,a=Vg("start","brush","end"),i=ko;return n.extent=function(e){return arguments.length&&(r=e),n},n.on=function(){var e=a.on.apply(a,arguments);return e===a?n:e},n.handleSize=function(){},n.filter=function(e){return arguments.length?(i="function"==typeof e?e:i,n):i},n}function Oo(e){_classCallCheck(this,Oo),this.settings=_extends({},Aw,e)}function Ao(e){_classCallCheck(this,Ao);var t=this.options=e.settings;if(this.type=this.options.type,this.initialize(),this.hookCount=0,this._snap={},Z(t.behaviour)){if(!Ao.behaviours.has(t.behaviour))throw new TypeError(t.behaviour+" behaviour not found");this.behaviour=Ao.behaviours.get(t.behaviour)}t.element&&t.element.isD3Selection&&this.bindTo(t.element)}function Po(e,t,n,r,a,i,o,l,s){var c=l.enabled,u=l.width,d=l.height,h=wt(e,t,n+2*i,r+2*i,a);if(c&&o){var f=o===ib?7:o===ob?3:o===ab?5:1,p=Ot(h);!function(e,t,n){n.forEach(function(n){e.splice(t,0,{function:"l",moves:n})})}(p,f,function(n,r,a){var i=r[a-1].moves[a-1?5:0],o=r[a].moves[0],l=r[a-1].moves[a-1?6:1],c=r[a].moves[1],h=(i+o)/2,f=(l+c)/2;if(t=r[a].moves[1],e=r[a].moves[0],Z(s)&&s){var p=0<s?1:-1,g=n===ib?i-o:o-i;h-=0<(g-u)/2-s*p?s:(g-u)/2*p}switch(n){case ib:return[[h-u/2,t],[h,t+d],[h+u/2,t]];case ob:return[[h+u/2,t],[h,t-d],[h-u/2,t]];case rb:return[[e,f-u/2],[e-d,f],[e,f+u/2]];case ab:return[[e,f+u/2],[e+d,f],[e,f-u/2]]}}(o,p,f)),h=function(e){return e.reduce(function(e,t){return e+t.function.toUpperCase()+(t.moves&&t.moves.join(" ")||"")},"")}(p)}return h}function To(e,t,n){var r=xr(e);return[Dx.getColorBandDimension(e,t,n),"horizontal"===r.layout,e.colorBand.ranges&&e.colorBand.ranges.length]}function Eo(e){var t=e.config,n=e.orient,r=e.chart,a=e.element,i=r.systemConf,o=_extends({},{enabled:!0,padding:5,margin:5,backgroundColor:"white",borderColor:"rgb(51, 51, 51)",fontColor:"rgb(51, 51, 51)"},{fontSize:r.globalProp.fontL1Size.l5,orient:n}),l={config:Im(o,t,!0),container:a,globalFont:[i.chart,i.canvas]};return new Tw(l)}function Lo(e,t,n,r){var a=!(2<arguments.length&&void 0!==n)||n,i=3<arguments.length&&void 0!==r?r:[0,0],o=t.padding,l=t.margin,s=t.orient,c=M(e.node()),u=void 0,d=void 0,h=void 0,f=void 0,p=o+l,g=void 0,v=void 0;switch(f=a?(u=c.x,d=c.y,h=c.width,c.height):(u=c.y,d=c.x,h=c.height,c.width),s){case ib:g=0,v=d-p;break;case ab:g=u-p,v=0;break;case rb:g=u+h+p,v=0;break;case ob:g=0,v=d+f+p}return[g+i[0],v+i[1]]}function Mo(e,t,n,r,a,i,o){var l=7<arguments.length&&void 0!==arguments[7]?arguments[7]:{},s=t.customHandles,c=(a||{}).systemConf,u={config:_extends({},Ew,e,{orient:n}),container:s,globalFont:o||[c.chart,c.canvas]};this.dataFinder=r,this.chart=a;var d=this.super=new Tw(u);this.container=d.container,this.boundBoxEle=d.boundBoxEle,this.tooltipOptions=d.config,this.customActions=i||{},this.options=l,this.positionTooltip(),this.addHoverEvents(t.parent_group)}function zo(e,t,n){var r,a=void 0,i=la(e,t,0).baseScale,o=void 0,l=void 0;if(0===n)return Lw;if(i.bandwidth){var s=1<(a=i.domain()).length?1:0;a=[a[s],a[s]]}else{a=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"x",r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,a=[],i=e.dataset.getColumn(n,r).dataindex;return e.seriesdata.some(function(e){return e.data.some(function(e){return e.some(function(e){var n=e[i];if(Z(n)&&!Re(a,n)&&a.length!==t)return a.push(n),a.length===t})})}),a}(e,2);var c=e.dataObject.getMinMaxX(0,!1),u=_slicedToArray(c,2);o=u[0],l=u[1]}var d=(r=go(e,a,0,"x",!0))[1]-r[0],h=i.range(),f=Ky(h[1]-h[0]);return r[0]===r[1]?f:(o===a[0]&&l===a[1]&&(d/=2),Qy(f,d*n))}function Io(e,t,n){var r=this.chart,a=t.point,i=Rm(this,"behaviours.PLOT_ZOOM.instance");if(r.scroll&&r.scroll.visible&&!r.scrolling&&a.x){var o=a.x[0].domain,l=Do(r,o,n);(i&&r.zooming||!i)&&(r.scroll.scrollDomain=o,r.scroll.brushInstance.setSelection(l))}}function Do(e,t,n){var r=e.scroll.brushScale,a=void 0,i=(r.origRange||r.range()).slice(0).sort(Wg);if(te(t)&&r.bandwidth&&(t=[t[0],t[t.length-1]]),r.bandwidth&&n&&n.invert){var o,l="width",s="X";e.axes.rotated&&(l="height",s="Y"),a=[o=n["invert"+s](0),e.plotarea[l]/n.k+o]}else t&&(a=go(e,t,0,"x",!1,!1,r));return a.sort(Wg),a[0]=qy(a[0],i[0]),a[1]=Qy(a[1],i[1]),a}function Ro(e,t,n,r){var a,i,o=e.scale,l=e.baseScale,s=e.zoomScale,c=e.baseZoomScale,u=1<n.k;if(t=t.toUpperCase(),o.bandwidth){var d=r||l.range();i=d.map(function(e){return n["apply"+t](e)}),u&&(i=function(e,t){var n=_slicedToArray(t,2),r=n[0],a=n[1];return e=t[0]<t[1]?[Qy(e[0],r),qy(e[1],a)]:[qy(e[0],r),Qy(e[1],a)]}(i,d)),o.range(i)}else a=n["rescale"+t](l).domain(),u&&(a=_a(a,l.originalDomain||o.originalDomain,o.outerPadding)),o.domain(a);if(s){var h=n["rescale"+t](c).domain();s.domain(e.zoomDomain=h)}return{domain:a,range:i}}function jo(e,t){var n=e;return"x"===t?n=[[e[0],0],[e[1],0]]:"y"===t&&(n=[[0,e[0]],[0,e[1]]]),n}function Ho(e,t,n,r,a,i){var o,l=e.chart,s=e.behaviours.PLOT_ZOOM,c=n.split("").map(function(e,n){return go(l,te(t[0])?t[n]:t,r,e)});"xy"!==n&&(c=c[0]),o=jo(c,ka(n,l.axes.rotated)),s.instance.zoomToBounds(o,a,i)}function Bo(e,t){_classCallCheck(this,Bo),this.chart=e,this.rotated=this.chart.axes.rotated,this.settings=e.systemConf.chart.scroll,this.type=t}function No(e){_classCallCheck(this,No),this.chart=e,this.behaviours={}}function Fo(e){_classCallCheck(this,Fo),this.chart=e,this.eventManager=new zw(e),this.init()}function Vo(e,t,n,r){var a=e.chart,i=e.behaviours.PLOT_BRUSH,o=e.behaviours.PLOT_ZOOM,l=n.split("").map(function(e,n){return go(a,te(t[0])?t[n]:t,r,e,Z(o),!1)});l="xy"===n?[[l[0][0],l[1][0]],[l[0][1],l[1][1]]]:l[0],i.instance.setSelection(l)}function Wo(e,t,n,r){if(e.systemConf.__$overview)return!1;if(n){if(Dy&&t.labelQueue.length){var a=e.systemConf.chart.plot.datalabels.events;Lr(e,a,0,"init"),km.getComponent("labelRenderer")(t.labelQueue,t.labelArray,e),Lr(e,a,0,r?"onreload":"onload")}t.labelArray={},t.labelQueue=[];var i,o=e.systemConf.notes;if(Z(o)&&!0===o.enabled){var l=km.getComponent("annotation");l._empty||(i=l.draw(e,t.notesArray))}t.notesArray=i||[]}}function Yo(e,t){this.container=e,this.userdata=t,this.dataObject=null,this.dataset=null,this.svg=null,this.seriesColor=[],this.axes={x:{levels:[],branches:[],clusters:[],leaves:[]},y:{groups:[],branches:[],clusters:[],leaves:[]}},this.ismultiy=null,this.plotarea_approx=null,this.nochartdata=!1,this.chartRendered=!1,this.plot={},this.events={},this.viewPortExtent=null,wa.call(this,e,t),this.initialize()}function Uo(){}function Go(e,t,n,r){n=Hm(n,t);var a,i=e.params,o=i.stacked,l=i.chartObj,s=i.yscale,c=l.dataObject,u=l.renderer[t].barDatasetIndex?l.renderer[t].barDatasetIndex():0,d=i.commonPlotOptions,h=ln(l,r,n).name,f="bullet"==h,p=(l.seriesdata[n]||l.seriesdata[0]).plotoptions,g=p&&p.levelMarker?Im(d.levelMarker,p.levelMarker,!0):d.levelMarker,v=d.levelMarker||{},y=l.barscale2.bandwidth()||0,m=+(d.bandWidth||null)||(f?y/3:y),b=+(v.bandWidth||y),x=+(v.maxBandWidth||y),w=+(d.maxBandWidth||y);a=Qy(b,x,y),m=Qy(m,w,y);var C,k=qy(0,(y-m)/2),_=qy(0,(y-a)/2);if(o){var S=c.allChartTypes,O=c.getStackGroup().filter(function(e){return e.some(function(e){return!l.seriesdata[e].disabled&&Zn(S[e])})});C=c.categoryHierarchy?0:Wa(O,t)}else C=0;var A={stacked:o,categories:i.xscale.domain(),axisrotated:i.axisrotated,bandwidth1:i.xscale,bandwidth2:l.barscale2,barDatasetIndex:u,padding:k,yscale:s,hasNegValue:i.hasNegValue,yaxiscolumnorder:i.yaxiscolumnorder,addRangeBand:function(){return s.bandwidth?s.bandwidth()/2:0},barWidth:m,charttype:h,levelMarker:g,levelMarkerWidth:a,levelMarkerPadding:_,stackGroupIndex:C};return l.renderer[t].commonOption=A}function Xo(e,t){var n=(e.data||e).slice(),r=n.splice(0,n.length);return null!=t&&r.push(t),r}function Zo(e,t,n,r,a){"plot"==a?e.plotValues.push({data:t,text:n}):e[a+"Values"].push({id:t,text:n,x:r[0],y:r[1]})}function qo(e,t,n,r,a,i){return a<e+n&&(e-=e+n-a),i<t+r&&(t-=t+r-i),[e,t]}function Qo(e,t,n){var r=e[n+"Values"];return r.indexOf(r.filter(function(e){return"plot"===n?re(e.data)==re(t):e.id==t})[0])}function Ko(e){var t=e.instance,n=this.chart.systemConf.chart.brush;Mt(t._selection,n.selectionArea)}function $o(e,t){var n=this.getData(e,t.type,t.selection),r=n.point;("start"===t.type||r.x||r.y)&&this.associateBehaviours(e,t.type,n,t.selection,t)}function Jo(e,t,n,r){var a=this.chart,i=e.instance,o=i.options.type,l=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:2,r=3<arguments.length&&void 0!==arguments[3]&&arguments[3],a={};if(e)if(e=be(e),"xy"===t){var i=_slicedToArray(e,2),o=i[0],l=i[1];a={x:l[0]-o[0]>n,y:l[1]-o[1]>n}}else e[1]-e[0]>n&&(a[t]=!0);else r&&("xy"===t?a.x=a.y=!0:a[t]=!0);return Object.keys(a).filter(function(e){return a[e]})}(n,ka(o,a.axes.rotated),Ey,r);return i.brushedAxes=l,Nx.GET_DOMAIN_INFO(n,l,o,a)}function el(e){var t=this;jw.keys().forEach(function(n){jw.get(n).call(t,e).selectAll("*").remove()})}function tl(e,t){var n=this.chart,r=n.eventHandler.eventManager;el(this.chart),n.eventHandler.tooltipElement.hide(),n.eventHandler.handlers.mouseout.call(r)}function nl(e,t,n){_classCallCheck(this,nl),this.label=e,this.button=t,this.parent=n,this.init()}function rl(e){var t=e.systemConf.chart.brush.resetButton,n=e.behaviouralEvents.eventManager,r=n.brushResetButton;if(n.brushResetButton){var a=Hm(zm.getVal(t.x,[e,r.bounds.rect]),e.plotarea.left+e.plotarea.width-r.bounds.rect.width),i=Hm(zm.getVal(t.y,[e,r.bounds.rect]),10);r.translate([a,i])}}function al(e,t,n){var r=e.instance,a=this.behaviours.PLOT_BRUSH,i=this.chart,o=t.point;i.disableAnimation=!1,pe(o,function(e,t){pe(e,function(e,n){var r=la(i,t,n);r.scale.ordinalRange&&(r.scale.ordinalRange=null)})});var l=[[0,0],[i.plotarea.width,i.plotarea.height]];a&&a.instance.updateExtent(l),i.positionEventTrackerElement(),r.updateExtent(l),i.zooming=!1,i.brushing=!1}function il(e,t){var n=e.options.type,r=t||e.getSelection(),a=Pr(this)["x"===n?0:1],i=r[1]-r[0],o=a-i/2,l=a+i/2,s=e.getRange(),c=_slicedToArray(s,2),u=c[0],d=c[1],h=d<l?[d-i,d]:o<u?[u,u+i]:[o,l];e.setSelection(h)}function ol(e,t){e[0]===e[1]&&(e[1]+=1e-9,e[0]-=1e-9,t.setSelection(e,0))}function ll(e,t){t.selection&&this.associateBehaviours(e,t.type,{},t.selection,t)}function sl(e,t){return{vertical:Ie(Hm(e.height,e.maxHeight,Gv.ticks.maxTickSizeRatio_Vert),t.height),horizontal:Ie(Hm(e.width,e.maxWidth,Gv.ticks.maxTickSizeRatio_Hori),t.width)}}function cl(e,t){var n=null!=e?e[(1<arguments.length&&void 0!==t?t:"axis")+"format"]||e.format:null;return n&&"auto"===n.specifier}function ul(e,t,n,r,a,i,o,l,s,c,u){function d(e,n){var a=Hm(n,R),o={},l="x"==C&&S&&e.axes.x.leaves[0]?e.axes.x.leaves[0].scale:i;return y?"bottom"==t||"top"==t?(o.left=l(z)-Ky(a-D),o.right=l(I)+(D+a)):"left"!=t&&"right"!=t||90!=r&&270!=r||(o.top=l(I)-D,o.bottom=l(z)+D):(o.top=o.left=0,o.right="bottom"==t||"top"==t?gr(e,"width",m):0,o.bottom="bottom"==t||"top"==t?0:gr(e,"height",m)),o}function h(e,l){if("none"!=a){var c=e,u=[c.childNodes[0]],h=fg(c).selectAll("tspan").nodes();if(h&&h.length&&(h.sort(function(e,t){return t.textContent.length-e.textContent.length}),u=h),u){if(y){v=v||o.selectAll("text.ticklabel").nodes().length;var p=Ky(g.outerPaddingInPixel);"bottom"==t||"top"==t?H?N=j.horizontal:90!=r&&270!=r&&(N=0==l||l==v-1?2*p:2*Ky(g.rangeBand)):"left"!=t&&"right"!=t||90!=r&&270!=r||(B=0==l||l==v-1?2*p:2*Ky(g.rangeBand))}for(var m=0;m<u.length;m++){var b,x=h&&h.length?u[m]:c,w=x.textContent,C="tspan"==x.nodeName?ct:ut,k=D=C(x),S=-1,O={width:N,height:B},P=y||M?0:T;if(L&&"ticklabel"==s&&!n.actChartObj){var E="left"==t||"right"==t?N:Math.abs(i.discreteWidth(e.__data__))||N,z=Qy(N,E);return void St(x,x,x.textContent,z,B,D,A)}if("ticklabel"==s){if(N<D.width){S=(D.width-N)/D.width;var I=Zy((1-S)*x.textContent.length);x.textContent=x.textContent.substring(0,I-2)+A,D=C(x)}B<D.height&&(S=(D.height-B)/D.height,I=Zy((1-S)*x.textContent.length),x.textContent=x.textContent.substring(0,I-2)+A,D=C(x))}var D,R=M?{left:0,top:0}:ze(o.selectAll(".domain")),W={left:D.left-R.left,right:D.left+D.width-R.left,top:D.top-R.top,bottom:D.top+D.height-R.top,width:D.width,height:D.height};f.edge?F=f.edge(x,D):_&&i.bandwidth&&(F=d(n,i.bandwidth(e.__data__))),"left"!=t&&"right"!=t||0==r||180==r||360==r?"bottom"!=t&&"top"!=t||90==r||270==r||(W.left+qy(P,V.left)<F.left||W.right-qy(P,V.right)>F.right)&&(b=!0,bt(x,x.textContent,W,F,t,A,V,O,x)):(W.top+qy(P,V.top)<F.top||W.bottom-qy(P,V.bottom)>F.bottom)&&(b=!0,bt(x,x.textContent,W,F,t,A,V,O,x)),"ticklabel"!=s||b||(D=C(x)).width==k.width&&D.height==k.height||St(x,c,w,O.width,O.height,D,A),x.textContent==A&&(x.textContent=n.actChartObj?".":"")}}}}var f=11<arguments.length&&void 0!==arguments[11]?arguments[11]:{};if("none"==a)return h;var p,g,v,y,m=n.plotarea,b=n.chartarea,x=n.canvasarea,w=n.actChartObj||n,C=w.dataObject.isAxisCategory?function(e,t){return("bottom"==e||"top"==e)&&!t||("left"==e||"right"==e)&&t?"x":"y"}(t,w.axes.rotated):"y",k=w.dataObject.categoryHierarchy,_=n&&n.dataObject&&n.dataObject.hierarchical&&n.dataObject.hierarchical.dynamicLeafScale,S=!!k&&w.dataObject.hierarchical.pivotLayout.columns.splitColumnLeaves,O=(w.systemConf.chart.axes.xaxis,w.systemConf.chart.axes.yaxis,sa(w,C,u||0,!w.dataObject.isAxisCategory)),A=null==a||"ellipsis"==a?"..":"",P=O.tickmark.align,T=zm.getVal(Y([c,w.systemConf.chart,w.systemConf.canvas,Qm],"fontSize")),E=(c="ticklabel"==s?c:{},la(w,C,u||0).ticks),L=E?E.isHierarchialLevelType():i.discreteWidth&&null==i.bandwidth(),M="polar"===f.type;if(null==e&&"ticklabel"==s&&(p=null==l.tickValues()?i.ticks?i.ticks.apply(i,[10]):i.domain():l.tickValues(),e=o.selectAll(".tick").data(p,i).selectAll("text.ticklabel")),"ticklabel"==s&&l&&!L&&(E&&E.isHierarchy()&&"x"==C||"between"==P)){y=!0,p=p||l.tickValues(),g=Zv.getRangeBand(i,p,0);var z=p[0],I=p[p.length-1];O.reversed&&(z=p[p.length-1],I=p[0]);var D=Ky(g.outerPaddingInPixel),R=i.bandwidth?i.bandwidth()/2:0}var j=sl(c,b),H=Z(c.width)||Z(c.maxWidth),B=j.vertical,N=j.horizontal,F=d(w),V=function(e,t,n,r){var a={};return y||M?(a.left=a.right=0,a.top=a.bottom=0):(a.left="axislabel"==e?r*(n.width-(t.left+t.width)):r*t.left,a.right=r*(n.width-(t.left+t.width)),a.top=r*t.top,a.bottom=r*t.bottom),a}(s,m,x,.5);return n.actChartObj||"axislabel"==s&&e.node()?h(e.node()):h}function dl(e){if(e.dataObject.noofBarEnabledSeries){var t;if(e.seriesdata.some(function(n,r){return(t=hl(e,r,Wx))===lb}),t===lb)return!0;var n=e.dataObject.getEncode("stack");return Object.keys(n).some(function(n){var r=e.dataObject.getEncode("stack",n);if(r){var a=Ya(r);return(t=hl(e,a,Yx))===lb}}),t===lb}}function hl(e,t,n){if(e.dataObject.noofBarEnabledSeries){var r=n===Yx,a=e.chartTypes[t]||e.chartTypes[0],i=e.seriesdata[t]||e.seriesdata[0],o=ki(e.systemConf.chart.plot.plotoptions[a.name],r?vm:i.plotoptions,e,t);r&&(o=o.stackLabels||{});var l=e.dataObject,s=e.axes.rotated,c=l.isstacked(),u=o.labelPos||ob,d=o.textDirection;return(r?Ti(o,e):Pi(o,e))?(d=!d||c&&!r?s?sb:cb:d,n===Wx&&u===lb&&(c||s&&d!==sb||!s&&d===sb)&&(u=ob),u):void 0}}function fl(e,t,n,r,a){return null==e?e:"wrapOnSpace"==t?e.split(" "):"wrapAll"==t?function(e,t,n,r){var a,i=e.split(/\s+/).reverse(),o=[],l=[],s=r;for(t=t;a=i.pop();)if(o.push(a),t<zm.fontUtils.getTextWidth(o.join(" "))){if(1<o.length&&(o.pop(),l.pop(),l.push(o.join(" "))),n<s)return l;s+=r,o=[a],l.push(a)}else l.pop(),l.push(o.join(" "));return l}(e,n,r,a):e}function pl(e,t,n){var r=0,a=0;return t&&(r=t.baseZoomScale(t.zoomDomain[0])),n&&(a=n.baseZoomScale(n.zoomDomain[0])),Bg.scale(e).translate(-r,-a)}function gl(e,t,n,r,a,i,o){var l={},s="0.71em",c="0.35em",u="left"===e||"right"===e?"width":"height",d=(i=null==i?r.tickPadding():i,o&&o.isInline),h=o&&o.inlineToPlot,f=d&&!h?o.longTickSize[u]:Math.max(a,0)+i,p="top"===e||"left"===e?-1:1,g=h?-p:p,v=d&&o.showGrid;switch(e){case"top":l.rotate=[t,0,g*f],0<=t&&t<45||315<t&&t<=360?(l.dy=d?s:"0em",l.dy1="-1em"):45<=t&&t<=90||90<=t&&t<=135||225<=t&&t<=315?l.dy=c:135<t&&t<225&&(l.dy=s),l.textAnchor="0"==t||180==J(t)||360==J(t)?"middle":J(t)<180?"end":"start";break;case"bottom":l.rotate=[t,0,g*f],0<=t&&t<45||315<t&&t<=360?(l.dy=d?"0em":s,l.dy1="1.71em"):45<=t&&t<=90||90<=t&&t<=135||225<=t&&t<=315?l.dy=c:135<t&&t<225&&(l.dy="0em");var y="0"==t||180==J(t)||360==J(t)?"middle":J(t)<180?"start":"end";l.textAnchor=d?"start"==y?"end":"end"==y?"start":y:y;break;case"left":l.rotate=[t,g*f,0],0<=t&&t<45?l.dy=v?"-"+c:c:45<=t&&t<=90||90<=t&&t<=135?l.dy=s:(135<t&&t<225||225<=t&&t<=315||315<t&&t<=360)&&(l.dy=d?"1em":"0em"),y="90"==t||270==J(t)?"middle":90<t&&t<270?"start":"end",l.textAnchor=d?"start"==y?"end":"end"==y?"start":y:y;break;case"right":l.rotate=[t,g*f,0],0<=t&&t<45||135<t&&t<225?l.dy=v?"-"+c:c:225<=t&&t<=315||315<t&&t<=360?l.dy=s:(90<=t&&t<=135||45<=t&&t<=90)&&(l.dy="0em"),l.textAnchor=d?"end":"90"==t||270==J(t)?"middle":90<t&&t<270?"end":"start"}return l}function vl(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:10,n=e<0;if(2<arguments.length&&void 0!==arguments[2]&&arguments[2]){if(0===e)return e;(e=Math.abs(e))<t&&(e+=(t-e)/t)}var r=ml(Math.log(e)/Math.log(t),14);return n?-r:r}function yl(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:10,n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=e<0,a=Math.pow(t,e);return n&&((a=Math.pow(t,Math.abs(e)))<t&&(a=t*(a-1)/(t-1)),a=r?-a:a),ml(a,12)}function ml(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:14;return parseFloat(e.toPrecision(t))}function bl(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:10,n=arguments[2],r=e<0;n&&(e=Ky(e));var a=Math.floor(vl(e,t,n),14);return r?-Math.pow(t,a):Math.pow(t,a)}function xl(e,t,n,r,a,i,o,l,s,c,u,d,h,f,p){function g(e){return ml(yl(e,w,A),12)}var v,y=a.minRange,m=a.maxRange,b=a.interval,x=a.logBase,w=void 0===x?10:x,C=a.outerPadding,k=a.tickCount,_=a.minorGrid||{},S=a.subtickmark||{},O=!0===_.show,A=!1!==a.allowNonPositiveTicks,P=_.count,T=_.interval,E=O?Hm(P,S.count):S.count,L=O?Hm(T,S.interval):S.interval,M=O||0<E||Z(L),z=_slicedToArray(e,2),I=z[0],D=z[1],R=void 0,j=_slicedToArray(n,2),H=j[0],B=j[1],N=r&&!Z(y)?Hm(C,.05):0,F=r&&!Z(m)?Hm(C,.05):0,V=Hm(k,t/70),W=[],Y=void 0,U=void 0,G=I===D;!Z(k)&&b||(b=Ey),k<4&&(R=k,V=k=5);var X=vl(I,w,A),q=vl(D,w,A),Q=q-X||1;if((X-=Q*N)===(q+=Q*F)||0===p[0]&&0===p[1])return{tickValues:n,minorTickValues:[]};Z(d)&&(X<0||q<0)&&A&&(X<d&&d<=H?X=d:d<q&&B<=d&&(q=d)),v={numberMin:I,numberMax:D,userTickCount:k,tickCount:V,logMin:X,logMax:q,forceUserTickCount:R,base:w,allowNonPositiveTicks:A,axisSize:t},function(e){return e===1/0||e===-1/0}($y(w||10,b))&&(Vy.warn("Log axis interval "+b+" is too large. Switching to the default interval."),b=null),(Y=wl(v,Hm(b,(q-X)/Math.max(V-1,1)),l,c,i,s,o,u)).slice(0),U=Fg(Y),Z(y)&&(U[0]=y,Y=Y.filter(function(e){return I<=e})),Z(m)&&(U[1]=m,Y=Y.filter(function(e){return e<=D}));var K=h(Y),$=!0;if(K.length!==Y.length&&(Y=K,$=!1),I=g(X),D=g(q),!Z(k)&&!Z(R)&&!Z(b)&&$&&!G&&3<Y.length){var J=_slicedToArray(U,2),ee=J[0],te=J[1],ne=bl(I,w,A),re=bl(D,w,A),ae=I-Ky(ne)/10,ie=D+Ky(re)/10,oe=Y.map(i),le=oe[oe.length-1]-oe[oe.length-2],se=i(D),ce=qe(oe[oe.length-1]-se,le),ue=oe[1]-oe[0],de=qe(i(I)-oe[0],ue);f?(U=e,Y=Y.filter(function(e){return e>=p[0]&&e<=p[1]})):(40<ce||40<de)&&(40<ce&&ie<te&&(U[1]=ie),40<de&&ee<ae&&(U[0]=ae),Y=Y.filter(function(e){return e>=U[0]&&e<=U[1]}))}else Z(v.useDefaultLogDomain)&&(Y.every(function(e){return I<e})&&(U[0]=I),Y.every(function(e){return e<D})&&(U[1]=D));return M&&!G&&(W=Cl(v,Y,U,E,L)),{tickValues:Y,minorTickValues:W,logDomain:U}}function wl(e,t,n,r,a,i,o,l,s){e.interval=t;var c=e.base,u=e.allowNonPositiveTicks,d=e.tickCount,h=(e.axisSize,kl(e,s).map(function(e){return ml(yl(e,c,u),12)})),f=Fg(h),p=void 0;return h=Rg(h).values().map(Number).sort(Wg),!s&&(p=i(h),a.domain(f),h.length>d&&"auto"===l&&(l=45),function(e){var t=[],n=!1;return e.forEach(function(e,r){n||t.length&&(n=t.some(function(t){return function(e,t){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.height+e.y>t.y}(e,t)}))||t.push(e)}),n}(h.map(function(e,t){var i=0,s=0;return"top"===r||"bottom"===r?i=a(e):s=a(e),_extends({},function(e){var t=dt(e,null,null,n);return{width:El("width",t,o,l,n.fontSize,r),height:El("height",t,o,l,n.fontSize,r)}}(p[t]),{x:i,y:s,tick:p[t]})})))?wl(e,t*Xw,n,r,a,i,o):h}function Cl(e,t,n,r){var a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:"auto",i=[],o=_slicedToArray(n,2),l=o[0],s=o[1],c="auto"===a?e.interval/5:a;if(0<r)t.forEach(function(e,t,n){if(t){var a=Qy(n[t-1],e),o=qy(n[t-1],e),l=av(a,o,(o-a)/(r+1));i=[].concat(_toConsumableArray(i),_toConsumableArray(l))}});else{var u=e,d=u.base,h=u.allowNonPositiveTicks;(e=_extends({},e)).interval=c,e.isMinorGrid=!0,t.forEach(function(n,r){if(r){e.logMin=vl(t[r-1],d,h),e.logMax=vl(t[r],d,h);var a=kl(e,!0);i=[].concat(_toConsumableArray(i),_toConsumableArray(a))}}),i=i.map(function(e){return ml(yl(e,d,h),12)})}return i.filter(function(e){return!Re(t,e)&&l<=e&&e<=s})}function kl(e,t){var n=void 0,r=e.logMin,a=e.logMax,i=e.tickCount,o=e.interval,l=e.base,s=e.allowNonPositiveTicks,c=e.userTickCount,u=e.isMinorGrid,d=!1;if(.5<=o)n=Ol(r,a,o=Math.round(o));else if(.1<=o)d=!0,n=_l(r,a,o,l,s,u);else{var h=yl(r,l,s),f=yl(a,l,s),p=(f-h)/i,g=1<p?bl(p,l,s):bl(p,l);0<c?(n=jl([h,f],i),e.useDefaultLogDomain=!0):n=Ol(h,f,p=Hm(e.autoSubTickInterval,zl(p,g,[1,2,2.5,5,10]))),n=n.map(function(e){return vl(e,l,s)}),t||(e.autoSubTickInterval=p/5)}return e.interval=o,e.logMin=n[0],e.logMax=n[n.length-1],!t&&0<e.userTickCount&&n.length!==e.userTickCount&&(e.extent=e.extent||Fg(n),n=Sl(n,e,d),n=[].concat(_toConsumableArray(n),_toConsumableArray(e.extent))),n}function _l(e,t,n,r,a,i){var o,l,s,c=Xy(e),u=Zy(t),d=[],h=!1,f=[];o=.3<n?[1,2,4]:.15<n?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9];for(var p=c;p<=u+1&&!s;p++)for(var g=0;g<o.length&&!s;g++){var v=void 0,y=!0;i&&a&&p<0?(v=ml(yl(p+1,r,a))*o[g],y=!1):v=ml(yl(p,r,a))*o[g],l=vl(v,r,a),c<=l&&l<=u&&(d.push(l),f.push(v)),y&&t<=l&&(s=!0)}if(f.some(function(e){return 0<=e&&e<=r})){var m=o.map(function(e){return vl(e,r,a)});d=d.concat(m),h=!0}if(f.some(function(e){return e<=0&&-r<=e})){var b=o.map(function(e){return-vl(e,r,a)});d=d.concat(b),h=!0}h&&(d=d.filter(function(e){return c<=e&&e<=u})),d.sort(Wg);for(var x=null,w=0;w<d.length;w++){var C=d[w];if(e<C)break;x=C}return Z(x)&&(d=d.splice(d.lastIndexOf(x))),d}function Sl(e,t,n){function r(t){var n=yl(ml(-1===t?e[e.length-1]+a:e[0]-a),s,c),r=bl(n,s,c);return vl(ml(-1===t?Math.ceil(n/r)*r:Math.floor(n/r)*r),s,c)}var a=t.interval,i=t.tickCount,o=t.forceUserTickCount,l=t.logMin,s=(t.logMax,t.base),c=t.allowNonPositiveTicks,u=t.extent,d=e&&e.length;if(d<i)for(;e.length<i;)e.length%2||0===l?n?e.push(r(-1)):e.push(ml(e[e.length-1]+a)):n?e.unshift(ml(r(1))):e.unshift(ml(e[0]-a));else i<d&&(e=Al(e,i));if(Z(o)&&e.length!==o){var h=Fg(e),f=_slicedToArray(h,2),p=f[0],g=f[1],v=e[Math.round(e.length/2)];e=2===o?[p,g]:[p,v,g],t.forceUserTickCount=null}return e=e.filter(function(e){return e>=u[0]&&e<=u[1]})}function Ol(e,t,n){var r=ml(Math.floor(e/n)*n),a=ml(Math.ceil(t/n)*n);return av(r,a+n/2,n)}function Al(e,t,n,r){var a=e.length;t=Gy(t),n=n||Zy(a/Ky(t));for(var i=0,o=[],l=r?[]:null,s=r?[]:null,c=!!r&&Z(e[0].index);i<a;)r?c?(o.push(e[i].value),l.push(e[i].index),s.push(e[i])):(o.push(e[i]),l.push(i)):o.push(e[i]),i+=n;return r?{nodes:s,ticks:o,indices:l}:o}function Pl(e,t,n,r,a,i){var o=[],l=[],s=[],c={data:[n]};return n.columnindex=Hm(n.columnindex,a),e.forEach(function(e,n){var a=V(t.showAs,e,t,c,r,n,i),u=[],d=[];if(te(a)?(o.push(u),l.push(d)):(u=o,d=l),s.push(a),Z(a)){var h=function(e){var t="<zc-temp>"+e+"</zc-temp>";return(new DOMParser).parseFromString(t,"text/xml")}(a),f=Dt(h,"tspan"),p=Dt(h,"image,img");f.length?f.forEach(function(e){u.push(e.textContent.trim());var t=e.style||{};d.push({fontSize:t.fontSize&&parseFloat(t.fontSize),fontFamily:t.fontFamily,fontStyle:t.fontStyle,fontWeight:t.fontWeight})}):u.push(h.textContent),p.length&&N(h.querySelectorAll("image,img")).forEach(function(e){u.push({width:+e.getAttribute("width"),height:+e.getAttribute("height")}),d.push({})}),h=null}}),{tickValues:o,styles:l,userRawTicks:s}}function Tl(e,t,n,r,a,i,o){Wy.save(),Wy.font=n+"px "+r;var l,s,c,u=0,d=null,h=null;return a=Hm(a,[]),Z(t)||(t=[]),e.forEach(function(e,f){var p=dt(e,n,r,a[f]),g=p.width;i&&(g=p.width*p.height),o&&!s&&(s=-1!=e.indexOf(" ")),u<g&&(u=g,d=e,h=t[f],l=a[f],c=f)}),Wy.restore(),{actualVal:h,formattedVal:d,style:l,index:c,hasWhiteSpace:s}}function El(e,t,n,r,a,i){return"height"===e?Math.abs(a+n.top+n.bottom):0<r?Ll(r,t.width,a,i).tickSpacing+n.left+n.right:t.width+n.left+n.right}function Ll(e,t,n,r){var a=e*(2*sm/360),i=2*sm/360*(90-e);return"bottom"===r||"top"===r?{tickSpacing:Ky(n/tm(a))+5,baseLen:0}:{tickSpacing:Ky(tm(i)*n)+Ky(em(i)*n*rm(a))+5,baseLen:Ky(em(i)*t)}}function Ml(e,t,n,r,a,i){var o=n.dataObject,l=t.minmaxlabels||{};if(!0===l.show){var s=Zv.getScale(n,o,n.plotarea,i,a,n.dataset,r).domain();U(l.excludeIntervals,!0)?e=s:(s[0]!==e[0]&&e.splice(0,0,s[0]),s[1]!==e[e.length-1]&&e.push(s[1]))}return e}function zl(e,t,n){var r,a,i=null,o=t;n=n||[1,1.2,1.5,1.75,2,2.2,2.5,3,3.5,4,4.5,5,6,7,8,9,10];for(var l=0;l<n.length;l++)a=n[l]*t,(r=Ky(e-a))<(i=null==i?r:i)&&a<=e&&(i=r,o=a);return o}function Il(e,t,n,r){this.axis=e,this.config=e.label,this.axisRect=t.bound,this.parentNode=r.isD3Selection?r:fg(r),this.orient=n,this.systemConfig=t.systemConf,this.chart=t.chartObj,this.axisType=t.type,this.order=t.axisOrder,this.plotRect=t.plotRect,this.show=!t.hide,this.tickObj=t.tickObj,this.show?this.add():this.element=mt(this.parentNode,"text",[],".","class","axislabel")}function Dl(e,t,n,r,a){this.type=e,this.config=t.ticklabel,this.axis=t,this.plotRect=n,this.helpers=r,this.tickCount=a,this.maxSize=function(){return sl(this.config,this.plotRect)},this.cache={}}function Rl(e,t,n,r,a,i,o,l,s,c){var u="wrapOnSpace"==l||"wrapAll"==l;return e.map(function(e){var d;return d=t(n,e,a,r,i,null,null,o),d=u?fl(d,l,s.horizontal,s.vertical,c):d})}function jl(e,t){if(1===t)return s=Hl(e,1),[n=Math.ceil(e[0]/s)*s];var n,r,a,i=(e[1]-e[0])/t,o=t-1,l=e[1]-e[0],s=l/o,c=Xy(nm(s)/om),u=$y(10,c),d=zl(i,u=+(u*=Math.floor(s/u)).toFixed(12));return n=e[0],r=e[1],r=(r=+(r=(n=+(n=function(e,t,n,r){var a,i,o=[1,2,5,10],l=o.length,s=e+t/2;s=+s.toFixed(12);for(var c=0;c<l;c++){var u,d=n/o[c],h=Ky(s-(u=e%d?e-e%d+d:e));(h<a||null==a)&&(a=h,i=u)}if(null==i||i<e){var f=Xy(nm(r)/om);f<0&&(i=+e.toFixed(Ky(Qy(0,f)))),i=e}return i=e<i?i:e}(n,a=l-d*o,$y(10,Xy(nm(a)/om)+1),d)).toFixed(12))+d*t).toFixed(12))>e[1]?+e[1]:r,av(n,r,d)}function Hl(e,t){var n=Z(t)?t:10,r=e[1]-e[0],a=$y(10,Xy(nm(r/n)/om)),i=n/r*a;return i<=.15?a*=10:i<=.35?a*=5:i<=.75&&(a*=2),a}function Bl(e,t){return av(function(e,t){var n=Hl(e);return Z(t)&&(n=qy(t,n)),Zy(e[0]/n)*n}(e,1),e[1],function(e,t){return Zy(Hl(e,t))}(e,t))}function Nl(e,t,n){e.each(function(e,r){var a=function(e,t){var n="opacity";if(Ay.has(Kv[t])){var r=qw.get(t),a=r&&r[1]||n,i=r&&r[0]||n,o=e.systemConf.chart.plot.plotoptions[t],l=o&&o[a]||1;return[i,l]}return[n,1]}(t,r),i=a[0],o=n?a[1]:.1;e.style(i,o)})}function Fl(e,t,n,r,a,i){var o={selected:Dg(),unSelected:Dg(),reset:Dg()},l=t;return Ig(i?[["tick","label","boundbox","connector","bar.levelMarker"],a]:[["label","boundbox","connector"],a]).map(function(a){var s=t&&t.get(a)||function(e,t,n){return"label"==e||"boundbox"==e||"connector"==e?t.staticPaneSVG.select("g.labelholder"):"tick"==e||"axislabel"==e?t.wrap.selectAll("."+n+"-axis"):t.svg.select(".seriesholder")}(a,e,i),c=Zw.get(a),u=Zw.get(a+"_child"),d="row"==n?"levelbyrow":"levelbycolumn";l=t&&!$w.has(a);var h=function(e,t,n,r,a,i){var o=a?"filter":"selectAll",l=e[o](r+"["+t+'^="'+n+'"]'),s=e[o](r+":not(["+t+'^="'+n+'"])'),c=e[o](""+r);return i&&(l=l[o](""+i),s=s[o](""+i)),{selected:l,unSelected:s,reset:c}}(s,d,r,c,l,u);o.selected.set(a,h.selected),o.unSelected.set(a,h.unSelected),"tick"==a&&o.reset.set(a,h.reset)}),o}function Vl(e,t){e.forEach(function(e){e.active=t})}function Wl(e,t,n,r,a,i){function o(t,n,a,o,l){h[t]&&V(h[t],n,s(r,a,o,i),e,l)}function l(t,n,r,a,i,o){if(e.dataObject.hierarchical&&e.dataObject.hierarchical.categoryTree){var l=e.chartTypes[0],c=$t(o,a,e);if(("area"===l.name||"line"===l.name)&&!c)return;var u={event:Hv(),columnInfo:s(t,n,r,a),axisType:o,element:this};(function(e){var t=e.columnInfo.data[0];if(e.axisType,e.event,t.datatype!=sx){this.cache.hierarchical||(this.cache.hierarchical={row:{},column:{}});var n=Jw._defaultBehavior.selection.call(this,e);Jw._defaultBehavior.action.call(this,n)}}).call(e,u)}}function s(e,t,n,r){return e.data=e.data.map(function(e){return e.value=e.datatype===lx?La(t,0,e.time).getTime():t,e.itemIndex=n,e.levelindex=Hm(e.levelindex,r),e.axisOrder=r,e}),e}var c=this,u=n.events,d=null!=u&&0==U(u.enabled,!0),h={mousemove:u?u.mousemove:null,mouseout:u?u.mouseout:null,click:u?u.click:null,dblclick:u?u.doubleclick:null,tap:u?u.tap:null,tapHold:u?u.taphold:null,tapHoldEnd:u?u.tapholdend:null,dbltap:u?u.doubletap:null};if(!d){var f={click:l,tap:l};Mr(t,{mousemove:function(e,t){var n=Hv();o("mousemove",n,e,t,c)},mouseout:function(e,t){var n=Hv();o("mouseout",n,e,t,c)},click:function(e,t){var n=Hv();o("click",n,e,t,this),(!h.click||h.click&&n.allowDefault)&&f.click.call(this,r,e,t,i,!1,a)},dblclick:function(e,t){var n=Hv();o("dblclick",n,e,t,c)}},{tapHold:function(e,t){var n=Hv();o("tapHold",n,e,t)},tapHoldEnd:function(e,t){var n=Hv();o("tapHoldEnd",n,e,t)},tap:function(e,t){var n=Hv();o("tap",n,e,t),(!h.tap||h.tap&&n.allowDefault)&&f.tap.call(this,r,e,t,i,!1,a)},dbltap:function(e,t){var n=Hv();o("dbltap",n,e,t)}})}}function Yl(e,t,n){e.nodes().forEach(function(e,r){var a="left"==n||"right"==n?1:0,i=[0,0],o=t.discreteWidth(r)/2;i[a]=i[a]+o,e.setAttribute("transform","translate("+i[0]+","+i[1]+")")})}function Ul(e){return"translate("+(e+.5)+",0)"}function Gl(e){return"translate(0,"+(e+.5)+")"}function Xl(e){return function(t){return+e(t)}}function Zl(){return!this.__axis}function ql(e,t,n){function r(e,t,n,r){r&&e.attr("transform",function(e){return O(te(e))}),e.attr(_+"1",w*K).attr(_+"2",w*K+k*n).styles({fill:"none","shape-rendering":"crispedges","stroke-width":t.strokeWidth,stroke:t.color})}function a(e,t){var n=Hm(t.strokeWidth,1),r=rt(t.style,n),a=at(t.lineCap,t.style);e.attr("stroke","#000").attrs({x1:p.x1,y1:p.y1,x2:p.x2,y2:p.y2}).styles({fill:"none","shape-rendering":"crispedges","stroke-width":n,stroke:t.color,"stroke-dasharray":r,"stroke-linecap":a})}var i=[],o=t.chart,l=t.axis,s=l.ticks.tickValueObj,c=t.tickValues,u=t.tickFormat,d=t.tickSizeInner,h=t.tickSizeOuter,f=t.isSubTickMarkShow?t.subTickSize:0,p=t.gridSize,g=t.tickPadding,v=t.rotation,y=t.orient,m=t.scale,b=s&&s.isInline,x=s&&s.inlineToPlot,w="top"===y||"left"===y?-1:1,C=x?-w:w,k=b?-w:w,_="left"===y||"right"===y?"x":"y",S="left"===y||"right"===y?"width":"height",O="top"===y||"bottom"===y?Ul:Gl,A=o.dataObject.isPolarAxisCategory?"H":"h",P=(n.label,n.ticklabel),T=P.events,E=n.tickmark,L=n.subtickmark,M=n.axisline,z=n.grid,I=n.minorGrid||{},D=t.renderGrid,R=t.renderTicklabel,j=t.isGridShow,H=t.isMinorGridShow,B=t.isSubTickMarkShow,N=null!=T&&0==U(T.enabled,!0)?"auto":T&&T.cursor||"pointer",F=o.systemConf.chart.plot.border,V=t.minorGrid,W=l.ticks.isHierarchialLevelType(),G=null==c?m.ticks?m.ticks.apply(m,i):m.domain():c,q=null==u?m.tickFormat?m.tickFormat.apply(m,i):eC:u,Q=b&&!x?s.longTickSize[S]:Math.max(d,f,0)+g,K=b&&!x?s.axisgroup[S]:0,$=m.origRange?m.origRange:m.range(),J=+$[0]+.5,ee=+$[$.length-1]+.5,te=(m.bandwidth?m.discreteWidth?W?Xl:function(e){return function(t,n){var r=Math.max(0,e.bandwidth(t)-1)/2;return r=Math.round(r),+e(t)+r}}:function(e){var t=Math.max(0,e.bandwidth()-1)/2;return e.round()&&(t=Math.round(t)),function(n){return+e(n)+t}}:Xl)(m.copy()),ne=e.selection?e.selection():e,re=ne.selectAll(".domain").data([null]),ae=ne.selectAll(".tick").data(G,m).order(),ie=ae.exit(),oe=ae.enter().append("g").attr("class","tick"),le=ae.select("line.minorTicks"),se=(p&&z.show?ae.select("line.majorTicks"):ae.select("line.majorTicks").remove(),ae.select("text").attr("class","ticklabel"));H=H&&isArray(V),B=B&&isArray(V);var ce=Et("line",".minor-grid",H?V:[],Et("g",".minorGrid",H?[1]:[],ne)),ue=Et("line",".sub-ticks",B?V:[],Et("g",".subTicks",B?[1]:[],ne));re=re.merge(re.enter().insert("path",".tick")).attr("class","domain").styles({stroke:!1===M.show?"transparent":M.color||"#000","stroke-width":Hm(M.strokeWidth,1),"stroke-dasharray":rt(M.style,Hm(M.strokeWidth,1)),"stroke-linecap":at(M.lineCap,M.style)}),r(le=Et("line",".minorTicks",[1],ae=ae.merge(oe)),E,d),L&&r(ue,L,f,!0),D&&p&&j&&a(Et("line",".majorTicks",[1],ae),z),D&&H&&p&&(ce.attr("transform",function(e){return O(te(e))}),a(ce,I));var de=[P,o.systemConf.chart,o.systemConf.canvas,Qm],he=zm.getVal(Y(de,"fontSize")),fe=Y(de,"fontFamily"),pe=Y(de,"fontWeight"),ge=Y(de,"fontStyle"),ve=Y(de,"textShadow"),ye=Y(de,"fontColor"),me=Y(de,"textDecoration"),be=(Y(de,"strokeColor"),gl(y,v,0,null,Math.max(E.size,f),g,s));if(se=se.merge(oe.append("text")),R&&(se.attr("class","ticklabel").style("font-size",he+"px").style("font-family",fe).style("font-weight",pe).style("font-style",ge).style("text-shadow",ve).style("text-decoration",me).style("fill",ye).style("text-anchor",be.textAnchor).style("cursor",N).style(_,C*Q).attr(_,C*Q).attr("dy",function(e,t){return s&&"zigzag"==s.mode&&t%2&&be.dy1?be.dy1:be.dy}).attr("transform","rotate("+be.rotate[0]+" "+be.rotate[1]+" "+be.rotate[2]+")"),function(e,t,n,r,a,i,o){var l=r.minmaxlabels||{},s=o.systemConf;if(!0===l.show){var c=!0===a.reversed,u=+zm.getVal(Y([l,r,s.chart,s.canvas,Qm],"fontSize")),d=i.domain(),h=d.length-1,f=e.filter(function(e,t){return!(e-d[0]&&e-d[h])});"top"!==t&&"bottom"!==t||"middle"!==n.textAnchor?"left"!==t&&"right"!==t||!(o.plotarea.top<u/2||o.plotarea.bottom<u/2)||f.attr("dy",function(e){return e-d[c?h:0]?"0.9em":"-0.3em"}):f.style("text-anchor",function(e){return e-d[c?h:0]?"end":"start"}),kt(f,[l,r,s.chart,s.canvas,Qm])}}(se,y,be,P,n,m,o),l.ticks.isHierarchialLevelType()&&se.call(Yl,m,y)),ae.attr("transform",function(e){return O(te(e))}),e!==ne&&(ae=ae.transition(e),le=le.transition(e),se=se.transition(e),ce=ce.transition(e),ue=ue.transition(e),ie=ie.transition(e).attr("opacity",1e-6).attr("transform",function(e){return isFinite(e=te(e))?O(e):this.getAttribute("transform")}),oe.attr("opacity",1e-6).attr("transform",function(e){var t=this.parentNode.__axis;return O((t&&isFinite(t=t(e)),te(e)))})),ie.remove(),re.attr("d","left"===y||"right"==y?"M"+w*(h+K)+","+J+A+"0.5V"+ee+"H"+w*(h+K):"M"+J+","+w*h+"V0.5H"+ee+"V"+w*h),ae.attr("opacity",1).attr("transform",function(e){return O(te(e))}),s&&s.isInline&&Z(F)&&!0===F.show){var xe="left"==y||"right"==y,we=xe?1:0,Ce=xe?he*parseFloat(be.dy):0,ke=xe?[0,o.plotarea.height]:[o.plotarea.left+.05*o.plotarea.left,o.plotarea.width+.05*o.plotarea.width];ae.style("display",function(){var e=Or(this).translate[we];return X(Ce+e,ke)?"":"none"})}le.attr(_+"2",w*K+k*d),ne.filter(Zl).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor","right"===y?"start":"left"===y?"end":"middle"),ne.each(function(){this.__axis=te}),R&&(se.each(q),!0===P.tooltip&&se.each(function(e){_t(fg(this),this.formattedVal)}))}function Ql(e,t){return[em(t-=sm/2)*e,tm(t)*e]}function Kl(e){return(e%=2*sm)<0?e+2*sm:e}function $l(e,t,n,r,a){var i=0-(e.x-.5*a),o=e.width+a-i,l=0-(e.y-.5*a);return[t/2-(r-i)/2+(r-o)/2,n/2-(r-l)/2+(r-(e.height+a-l))/2]}function Jl(e){return kg().range([0,1]).domain([e<sm?sm/2:3*sm/2,sm])(e)}function es(e,t,n){return t<e&&(t=e+((e=t)-t)),e<0&&t<0&&(e+=2*sm,t+=2*sm),e<0&&0<=t&&(n<0?t=2*sm:e=0),e<=(n=n<0?n+2*sm:n)&&n<=t}function ts(e){return 180*e/sm}function ns(e,t){var n=Z(e.bandWidth)||e.levelMarker&&Z(e.levelMarker.bandWidth),r=Z(e.maxBandWidth)||e.levelMarker&&Z(e.levelMarker.maxBandWidth),a=qy(0,Ie(e.innerRadius,t,0));if(n||r){var i=Z(e.bandWidth)?Ie(e.bandWidth,t,0):t-a,o=Z(e.levelMarker.bandWidth)?Ie(e.levelMarker.bandWidth,t,0):t-a,l=U(e.maxBandWidth,t),s=U(e.levelMarker.maxBandWidth,t);return i=Qy(i,l),o=Qy(o,s),t-qy(i,o)}return Qy(a,t)}function rs(e,t,n,r){var a=n.datatype,i=n[a],o="threshold";return e.replace(Hy,function(e,n){var l="";return te(t[n])?(l=Aa(i,t[n][0],a,r,o,!1),l+=" - "+Aa(i,t[n][1],a,r,o,!1)):l=Aa(i,t[n],a,r,o,!1),l})}function as(e,t,n,r,a,i,o){var l=2<arguments.length&&void 0!==n?n:"y",s=3<arguments.length&&void 0!==r?r:0,c=a,u=i,d=o;("polar"===ls(e,l)?is:os)(e,t,l,s,c,u,d)}function is(e,t){function n(e){return e.selectAll(function(){return this.childNodes})}function r(t,n){var r=Y?Y[t]:t;return Hi(e,u,d,"axis")(r,n)}function a(){var t=[Q,D/2,C.ticklabel,e,N,X];return function(e,t,n,r,a,i){var o=n.textOverflow||"ellipsis",l=!1,s=ul.apply(void 0,[vm,ib,r,0,o,a,e,i,"ticklabel",n,0,{edge:function(e,n){var r=fg(e).attr("text-anchor"),a=Or(e.parentNode).translate,i=Or(e).translate,o={};if(r===fb){var s=(n.left+n.right)/2;o.left=s-t,o.right=s+t}else r===pb?(o.right=n.left+n.width,o.left=o.right-a[0]-i[0]-t):(o.left=n.left,o.right=o.left-a[0]-i[0]+t);return l=l||n.left<o.left||n.right>o.right,o},type:"polar"}]);return function(){e.selectAll(Wm+".ticklabel").each(function(e,t){s(this,t)}),r.cache.polarAxis={trimmed:l}}}.apply(void 0,t)}function i(){!0===C.ticklabel.tooltip&&Q.selectAll(Wm).each(function(e){_t(fg(this),r(e))})}function o(e){var t=[],n=e+((z==db?A:A/2)+E*(I==ub?-1:1)),r=I==ub?gg:vg;return Q.selectAll(Wm).each(function(a){var i=M(this),o=Ql(e+((z==db?A:A/2)+T+P)*(I==ub?-1:1),Zv(a)),l=[us(o[0]+i.x,o[1]+i.y),us(o[0]+i.x,o[1]+i.y+i.height),us(o[0]+i.x+i.width,o[1]+i.y),us(o[0]+i.x+i.width,o[1]+i.y+i.height),n];t.push(r(l))}),r(t)}function l(t){!function(e){var t=e.config,n=e.radius,r=e.innerRadius,a=e.data,i=e.globalFont,o=e.scale,l=e.element,s=e.format,c=t.show,u=t.align,d=t.showAs,h=t.padding,f=void 0===h?5:h,p=c?"min"===d?[a[0]]:"max"===d?[a[1]]:a:[],g=u===ub?r-f:u===nb?(n+r)/2:n+f,v=Et("g",".minmaxlabelsGroup",[1],l),y=Et(Wm,".minmaxlabels",p,v);kt(y,[t].concat(_toConsumableArray(i),[Qm])),y.attrs({"text-anchor":function(e){var t=Kl(o(e));return u===nb?fb:t%sm==0?fb:u===ub&&t<sm||u!==ub&&sm<t?pb:null},dy:function(e){var t=Kl(o(e));return u===nb?"1em":u===ub?sm/2<t&&t<3*sm/2?null:-Jl(t)+"em":sm/2<t&&t<3*sm/2?Jl(t)+"em":null},transform:function(e){var t=Ql(g,o(e)),n=u===nb?f:0;return Ar([t[0],t[1]+n])}}).text(s)}(function(e,t){var n=t.scale,r=t.radius,a=t.innerRadius,i=t.element,o=t.type,l=t.index,s=ji(e).minmaxlabels,c=s.text,u=n.domain(),d=e.dataset.getColumn(o,l);return{config:s,radius:r,innerRadius:a,data:u,scale:n,element:i,globalFont:[e.systemConf.chart,e.systemConf.canvas],format:function(t,n){return c&&Z(c[n])?rs(""+c[n],u,d,e):Hi(e,o,l,"minmaxlabels")(t)}}}(e,{radius:t,innerRadius:H,type:u,index:d,scale:N,element:h}))}function s(t,n){n.forEach(function(n,r){var a=Et("g",".targetSeries-"+r,[1],ee);tC.targetMarker(a,t,H,e,n.data)})}function c(e,t){var n=[".targetSeries",".datalabel",".minmaxlabels",".axisgroup"].filter(function(e){return e!=="."+t}).join();h.selectAll(n).style("display",fm);var r=M(h),a=j+Qy((D-r.width)/se,(R-r.height)/le),i=Ie("minmaxlabels"===t?w.minmaxlabels.maxWidth:null,j,Ie("50%",j));(a<j-i||j<=0||!isFinite(a))&&(e[t]=!0,h.selectAll("."+t).remove()),h.selectAll(n).style("display",null)}var u=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"y",d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,h=arguments[4],f=arguments[5],p=arguments[6],g=e.systemConf,v=e.renderer[0],y=f,m=e.chartTypes[0],b=m.value,x=m.name,w=g.chart.plot.plotoptions[x],C=sa(e,u,d),k=+w.outerPadding||0,_=+w.maxRadius||0,S=b===Kv.dial,O=ss(e,u,C),A=O&&C.axisline.show?U(C.axisline.strokeWidth,1):0,P=U(C.ticklabel.marginLeft,5),T=U(C.tickmark.size,3),E=C.subtickmark?U(C.subtickmark.size,2):0,L=zm.getVal(C.ticklabel.fontSize||g.chart.fontSize||g.canvas.fontSize||Qm.fontSize),z=C.orient||db,I=C.tickOrient,D=y.width-2*k,R=y.height-2*k,j=Hm(p&&p.radius,Qy(D,R)/2),H=Hm(p&&p.innerRadius,ns(w,j)),B=O&&+w.padding||0;e.plotarea_approx={x:0,y:0,innerRadius:H};var N=t.scale,F=N.range(),V=e.dataset.getColumnIdx(u,d),W=e.dataObject,Y=W.isPolarAxisCategory&&W.categoryHierarchy&&W.hierarchical.pivotLayout.columns.count&&!W.hierarchical.pivotLayout.columns.splitColumnLeaves&&W.getCategories(u,d),G=Hm(p&&p.axisRadius,z==ub?I===db?H-B-A/2-qy(E,T+P+L):H:j),X=Gv.polar().scale(N).chartObj(e).radius(G).columnIndices([V]).tickFormat(r).tickValues(null);n(h).attr("transform",null);var q,Q=Et("g",".axisgroup",O?[C]:[],h);if(Q.call(X).call(a()).call(i),h.style("visibility","hidden"),S&&l(j),!p){var K=qg().innerRadius(!S||w.needle.show||e.datalabels.moduleExists&&Pi(w.datalabels,e)?0:H).outerRadius(j).startAngle(F[0]).endAngle(F[1]),$=mt(h,Um,[1],".","class","dummyArc").attr("d",K(1)),J=Et("g",".datalabel",[1],h),ee=Et("g",".targetSeries",[1],h),te=void 0;if(S){var ne=e.dataObject.hierarchical;te=ne&&ne.facetRendering?Yt(e.dataObject):[{data:e.seriesdata}],v||(v=e.renderer[0]=uw(x,e),e.rendererConf=[],e.rendererConf[0]=new Qv.rendererConf,zy.setRendererProp(e,v,te[0].data,0,0,[],0,null,0)),v.firedList={};var re=gw.get("dial");re._empty||J.call(re().renderer(v).args([e.seriesdata,0]),e.labelHandler,J),s(j,te);var ae=+w.needle.width/2||7;mt(J,"circle",w.needle.show?[1]:[]).attrs({r:ae,transform:"translate("+ae+","+ae+")"})}var ie=M($),oe=M(h),le=ie.height/j,se=ie.width/j,ce=j+Qy((D-oe.width)/se,(R-oe.height)/le),ue={};S&&(c(q={},"axisgroup"),c(q,"minmaxlabels"),c(q,"targetSeries"),ue=v.firedList=q,oe=M(h),ce=_<(ce=j+Qy((D-oe.width)/se,(R-oe.height)/le))?_:ce,ce=isFinite(ce)&&0<ce?ce:0),H=ns(w,ce)-(z==ub?(+w.strokeWidth||0)/2:0),G=(z==ub?I==ub?H:H-(o(j)-j):ce)-(I==ub?A/2:0)-(z==ub?B:0),X.radius(G),ue.axisgroup||Q.call(X).call(a()).call(i),K.outerRadius(ce).innerRadius(!S||w.needle.show||e.datalabels.moduleExists&&Pi(w.datalabels,e)?0:H),$.attr("d",K(1)),S&&(ue.minmaxlabels||l(ce),s(ce,te)),ie=M($);var de=$l(oe=M(h),y.width,y.height,ce,0);e.cache.polarAxis.trimmed&&(de[0]=y.width/2);var he=(I==ub&&z==db?o(ce):ce-(z==ub?0:A/2))-(z==ub?0:B),fe=I==ub?(ce-he)*se:0,pe=I==ub?(ce-he)*le:0;p={x:de[0],y:de[1],width:ie.width-A-fe,height:ie.height-A-pe,radius:he,actualRadius:ce,innerRadius:H,axisRadius:G},$.remove(),J.remove(),ee.remove()}n(h).attr("transform","translate("+p.x+","+p.y+")"),h.style("visibility",null),e.dataObject.isPolarAxisCategory&&h.selectAll(Um+".domain").attr("d",function(){return ds(p.radius,N,C)}),e.plotarea_approx=p,f.polar=p}function os(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"y",r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,a=arguments[4],i=arguments[5],o=e.systemConf.chart.axes.yaxis[r],l=ss(e,n,o),s=i.polar,c=s.radius,u=o.orient||ab,d=U(o.tickmark.size,6),h=U(o.ticklabel[u==rb?"marginRight":"marginLeft"],3),f=t.scale,p=f.range(),g=Di(e,"x",0).scale;f=f.copy().range([p[1],p[0]]);var v={left:e.plotarea.left,top:e.plotarea.top,width:c,height:c},y=Di(e,n,r),m=Gv.ticks(e,o,"y",r,u,v);(y.ticks=m).preCalcApproxAxisLength(v);var b=m.getTickValues(c,c,null,null,c/20,y.Ticks),x=e.userdata.metadata,w=1<x.axes.y[r].length,C=e.dataset.getColumnIdx(n,r);isArray(y.logDomain)&&f.domain(y.logDomain),t=Gv.get().orient(u).scale(f).tickPadding(h).tickSize(d,0).plotarea({width:c,height:c}).systemconf(e.systemConf).chartObj(e).tickRotation(b.rotation).preCalcTickLen(m.preCalcTickLen).tickValues(b.ticks).tickFormat(function(t){var a=Hi(e,n,r,"axis")(t);fg(this).text(a)}).columnIndices(w&&"y"==n?x.axes.y[r]:[C]);var k=Or(a).translate;a.datum(o).call(t,n,r).attr("transform","translate("+(s.x+k[0])+","+(s.y-c+k[1])+")"),l||a.remove();var _=a.selectAll(".tick");_.append(Um),_.select(Um).attr("transform",function(e){return"translate(0,"+(c-f(e))+")"}).attr("d",function(e){return ds(c-f(e),g,o)}).styles({fill:fm,stroke:o.grid.color,"stroke-width":o.grid.strokeWidth})}function ls(e,t){return e.chartTypes[0].value===Kv.dial?"polar":"x"===t?"polar":"angular"}function ss(e,t,n){var r=e.canvasarea;return(n.show||n._backup&&n._backup.show)&&jt(e,t+"axis",Qy(r.width,r.height))}function cs(e,t){e.attr("transform",Ar(t))}function us(e,t){return Jy($y(e,2)+$y(t,2))}function ds(e,t,n){var r=t.range();return"arc"===n.grid.type?"M"+qg().innerRadius(e-1).outerRadius(e).startAngle(r[0]).endAngle(r[1])(1).split(/L|M/gi)[1]:"M"+(t.ticks?t.ticks():t.domain()).reduce(function(n,r,a){var i=t(r),o=Ql(e,i);return n+"L"+o[0]+" "+o[1]+" "},"").substring(1)+"Z"}function hs(e,t,n,r){var a=t.stopOffset,i=t.stopOpacity,o=t.stopColor,l=t.colorGamma||[1,0],s=t.spreadMethod,c="radial"==r?+t.radius:qy(Ky((+t.x2||0)-(+t.x1||0)),Ky((+t.y2||0)-(+t.y1||0)));if(a=a||["0%","100%"],o=("function"==typeof o?o(n):o)||a.map(function(e,t){return _n(n,l[t]||0,"brighter",Mg)}),i=i||[1,1],!fs(s)){for(var u=[],d=[],h=[],f=0,p=0;f<100;){for(var g=0,v=a.length;g<v;g++){var y=Qy(parseFloat(a[g])/100*c+f,100);u.push(y+"%"),h.push(p%2!=0?i[i.length-1-g]:i[g]),d.push(p%2!=0?o[o.length-1-g]:o[g])}f+=c,p+="reflect"===s?1:0}a=u,o=d,i=h}return{offset:a,color:o,opacity:i}}function fs(e){return!(("repeat"===e||"reflect"===e)&&(Km.IS_IOS||Km.SAFARI))}function ps(){}function gs(){}function vs(e,t,n){function r(t,n){var r=function(e,t){var n=0,r=0,a=e.naturalWidth,i=e.naturalHeight,o=U(t.width,50),l=U(t.height,50);if("no-repeat"===t.repeatMode){var s;a<i?(n=(s=o-o*(a/i))/2,o-=s):(r=(s=l-l*(i/a))/2,l-=s)}return{x:n,y:r,width:o,height:l}}(t,n),i=function(t){return e+"-"+a+"-"+~~t.x+"-"+~~t.y+"-"+~~t.width+"-"+~~t.height}(r),o=iC.get(i);return Z(o)||(o=function(e,t,n){var r=document.createElement("canvas");return r.width=t.width,r.height=t.height,r.getContext("2d").drawImage(e,0,0,r.width,r.height),n.context.createPattern(r,a)}(t,r,n),iC.set(i,o)),{pattern:o,dimension:r}}var a=t.repeatMode||"repeat",i=oC.get(e);if(Z(i)){var o=r(i,t),l=o.pattern,s=o.dimension;n(t.context,l,s)}else{var c=new Image;c.onload=function(){oC.has(e)||oC.set(e,c);var a=r(c,t),i=a.pattern,o=a.dimension;n(t.context,i,o)},c.src=e}}function ys(e,t){var n=t.systemConf;return+zm.getVal(Y([e,n.chart.plot.datalabels,n.chart,n.canvas],"fontSize"))}function ms(e,t){var n=t.systemConf;return zm.getVal(Y([e,n.chart,n.canvas,Qm],"fontFamily"))}function bs(e,t,n,r,a,i,o,l){function s(t,n){var l=r==Yx?t[1]:t,c=h.isHierarchy&&O&&O(l);if(L){var u=vm;switch(E){case ew:case tw:case nw:var d=a,f=r==Yx?l:w||h.isPercentChart?l.y:k?l[_]:c&&c.children&&c.value||l.value||b.getY(l,x,o);if(w&&!h.isPercentChart&&r==Wx)d=Ua(e,i,l,E);else if("function"==typeof a)d=a(l,E);else if(!Z(d))if(E!==nw&&C)d=(C.originalDomain||C.domain())[1];else{var p=h.ZC_BAR_getRangeY(x);d=f<0&&f>=p[0]?-p[0]:p[1]}u=f/d*100||0;break;case Xx:u=c&&c.children?Ey:b.getActualX(l);break;case qx:Z(b.zidx)&&(u=b.getZ(l));break;case Qx:u=b.getGeo(l);break;default:u=r==Yx?l:h.isHierarchy?c&&c.children&&c.value||l.value||b.getY(l,x):b.getY(l,x,o)}return y(v,u,g,e,r)}return z?V(E,t,n,e):b.getCustomizedVal(e,m,i,vm,vm,l,r,vm,"html"!==s.contentType,vm,o)}var c=e.seriesdata[i]&&e.seriesdata[i].yaxiscolumnorder||[0,0],u=ln(e,l,i),d=Gt.helpers,h=e.dataObject,f=e.systemConf.metadata.columns,p=e.isGeoMap;t=t||{stacked:!1,commonPlotOptions:e.systemConf.chart.plot.plotoptions[u.name],yaxiscolumnorder:d.getParsedYAxisOrder(c)};var g,v,y,m,b=e.dataset,x=t.yaxiscolumnorder,w=t.stacked,C=t.yscale,k=nr(u.value),_=U(t.commonPlotOptions.dataindex,3),S=Za({paneid:l},e,0),O=e.renderer[S]&&e.renderer[S].getProcessedNode,A=e.systemConf.metadata.axes.label,P=A&&A[0],T=r===Wx&&Z(P),E=T?f[P]?"{{val("+P+")}}":P.toString():n.showAs,L=-1!=[Xx,Zx,qx,ew,tw,nw,Qx].indexOf(E),M=-1!=[ew,tw,nw].indexOf(E),z="function"==typeof E||"function"==typeof window[E];if(e.renderVisiblePointsOnly&&!e.isGeoMap&&(C=la(e,"y",x).baseScale||C),L||z||(m=function(e){var t="";if(te(e))e.forEach(function(e,n){t+="<tspan class='zcTspan'"+(n?" dy='1.1em'":"")+">"+ht(e)+"</tspan>"});else{var n=e.indexOf("<tspan");t=-1!=n?"<tspan class='zcTspan'>"+ht(e)+"</tspan>":e}return t}(E)),!T){var I=T?"label":E==Xx?Xx:E==qx&&Z(b.zidx)?qx:p?Qx:Zx;if(g=f[b.getColumnIdx(I,c)].datatype,v=b.getColumn(I,c)[g],y=M?Ma:Aa,k&&!z&&M){var D=f.filter(function(e){return e.dataindex===_})[0];D=Z(D)?D:b.getColumnIdx(I,c),g=D.datatype,v=D[g]}}return s.contentType=L||!z&&!te(E)&&-1==E.indexOf("<tspan")?"text":"html",s.multiLine="html"===s.contentType&&!z&&te(E)&&1<E.length,s.hasShowAsFunction=z,s}function xs(e,t,n,r,a){var i,o=n,l=r,s=function(e){var t=e.selectAll("tspan.zcTspan").nodes();return Array.prototype.filter.call(t,yt)}(e),c=1.1*(s.length-1);return s.length?t.showAs.length!==s.length&&(fg(s[0]).attr("dy",null),l=e.html()):a=!1,-.3===o?i=(o-=c)+c:.3===o&&(i=(o-=c/2)+c/2),[o,i,l,a]}function ws(e){var t=Et("text","#zc-text-dummy",[1],pg("div.__baseZC_Container__ > svg.svgPattern"));t.html("qtyplkjhgfd"),kt(t,e);var n=M(t).height;return t.remove(),n}function Cs(){}function ks(){}function _s(e,t,n,r){for(var a=hs(0,t,n,r),i=0;i<a.offset.length;i++)e.append("stop").attr("offset",a.offset[i]).styles({"stop-color":a.color[i],"stop-opacity":a.opacity[i]})}function Ss(){}function Os(e,t,n,r,a){return{_x:a?t:e,_y:a?e:t,_width:a?r:n,_height:a?n:r}}function As(e,t,n,r){this.chart=e,this.barOptions=t,this.scale={x:n,y:r},this.barOptions=t,this.axesRotated=e.axes.rotated,this.cache=Dg()}function Ps(){return[]}function Ts(e,t,n){return t.highlighter.data(n)}function Es(e,t,n){var r=e.plotoptions,a=n.systemConf.chart.plot.plotoptions[t];return e.disabled||0==U(Gn(r,a,n,"enabled"),!0)}function Ls(e,t){_classCallCheck(this,Ls),this.chart=e,this.eventManager=t,this.nearest=null,this.selectedEvent=null,this.selectionSet=[],this.newSelectionSet=[],this.oldSelectionSet=[],this.mergedSelectionSet=[],this.rejectionSet=[],this.oldSelectionSet=[],this.oldRejectionSet=[]}function Ms(e,t){_classCallCheck(this,Ms),this.chart=e,this.data=t,this.selectionManager,this.handlers={},this.dataGenerators={},this.defaultBehaviour={},this.customBehaviour={},this.targetEvent=null}function zs(e,t,n,r){return(ee(e)?e.action():e).call(t,n,r)}function Is(e,t){return t&&!gC.has(e)?"bisect":_C.has(e)?"PATH":fC.has(e)?"POLY":hC.has(e)?"QUADTREE":pC.has(e)?"BISECT":void 0}function Ds(e,t,n,r,a){this.size=t,this.radius=n,this.sizeOffset=a,this.tree=hg.quadtree().x(function(e){var t=e._data();return t._visible&&t._x}).y(function(e){var t=e._data();return t._visible&&t._y}).size(function(e){var t=e._data();return t._visible&&t._size}).extent([[0,0],r]).addAll(e)}function Rs(e){this.data=e}function js(e,t){this.data=e,this.type=t,this.bisector="continous"==t?this.continousBisect():this.discreteBisect()}function Hs(e,t){return Ky(e.x-t._data()._x)}function Bs(e,t,n,r){if(e._data)return e;var a=n.eventHandler.dataAccesor(),i=Kv[a.bestChartType(r)],o=a.radius(r),l=Py.bubble.has(i)||Py.bubblePie.has(i)||"segment"==r,s=n.systemConf.chart.plot.plotoptions[r],c=s&&s.events&&s.events.triggerOffset||10,u=new Ds(e,l,o,[n.plotarea.width,n.plotarea.height],c),d=hr();return u.find([t[d[0]],t[d[1]]])}function Ns(e,t,n,r){var a,i,o=n.cache.search.bisect?Bs(e,t,n,r):e,l=n.dataObject,s=n.plotarea,c=l.isCombinationalChart;if(o){var u=o.map(function(e){var n=e._data(),r=n._size/2,a={x:n._x,y:n._y},i=function(e,t,n,r){return Jy((e-n)*(e-n)+(t-r)*(t-r))}(t.x,t.y,a.x,a.y);if(cr(a.x,a.y,{x:0,y:0,width:s.width,height:s.height}))return{radius:r,bubbleDistance:i-r,pointDistance:i,over:i-r<=0,point:e}}).filter(function(e){return Z(e)});return 1===u.length?(!c||c&&u[0].over)&&(a=u[0].point):1<u.length&&(a=1===(i=u.filter(function(e){return e.over})).length?i[0].point:1<i.length?i.slice(0).sort(function(e,t){return Wg(e.radius,t.radius)})[0].point:u.slice(0).sort(function(e,t){return Wg(e.bubbleDistance,t.bubbleDistance)})[0].point),a}}function Fs(e,t){var n=e.map(function(e,n){var r=e._data(),a=function(e){var t=e._x,n=e._y,r=e._width,a=e._height;return e._centric?{x:t-r/2,y:n-a/2,width:r,height:a}:{x:t,y:n,width:r,height:a}}(r),i=function(e,t){var n=t.x,r=t.y,a=t.rotation;return Z(a)?gx.rotatePoint(e,a,{x:n,y:r}):e}(t,{x:r._x,y:r._y,rotation:r._rotation});return[cr(i.x,i.y,a)?0:1,r]}).filter(function(e){if(0==e[0])return e});if(1<n.length){var r={marker:0,levelMarker:2};return n.sort(function(e,t){var n=r[e[1].type]||1,a=r[t[1].type]||1;return n==a?-1:Wg(n,a)})[0][1]}return n.length?n[0][1]:vm}function Vs(e,t){var n,r,a,i,o,l,s=[],c=Z(t.counter)?t.counter:t.itemIndex,u=0==c,d=c==e.length-1,h=[0,0],f=t._data(),p=u?h:e[c-1]._data(),g=d?h:e[c+1]._data(),v=!f._defined,y=u||!p._defined,m=d||!g._defined;r=v?h:Ws(f),n=u?h:y?r:Ws(p),a=d?h:m?r:Ws(g),o=v?h:Ys(f),i=u?h:y?o:Ys(p),l=d?h:m?o:Ys(g);var b=u?h:y?r:Us(n,r),x=d?h:m?r:Us(a,r),w=u?h:y?o:Us(i,o),C=d?h:m?o:Us(l,o);return y&&m?s.push(r):u||y?s.push(r,x,C,o):d||m?s.push(b,r,o,w):s.push(b,r,x,C,o,w),{points:s,prevCur:b,curNext:x,curpt:r}}function Ws(e){return[e._x,e._y]}function Ys(e){return[e._x0,e._y0]}function Us(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]}function Gs(e,t,n){return Jy(function(e,t,n){var r=Zs(t,n);if(0===r)return Zs(e,t);var a=((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/r;return a<0?Zs(e,t):1<a?Zs(e,n):Zs(e,[t[0]+a*(n[0]-t[0]),t[1]+a*(n[1]-t[1])])}(e,t,n))}function Xs(e){return e*e}function Zs(e,t){return Xs(e[0]-t[0])+Xs(e[1]-t[1])}function qs(e,t,n,r){n.renderer,n.dataObject;var a,i,o,l=n.dataset;return Gt.helpers.getParsedYAxisOrder,t=[t.x,t.y],e.map(function(r){var s=r.rendererIndex,c=r.seriesIndex,u=r.subSeriesIndex,d=r.itemIndex,h=ln(n,r.paneid,c),f=n.renderer[s],p=f?f.seriesdataAfterUpdate[u]:e,g=r._polydata(),v=Lv(g.points,t);h.name===Nb?v&&((i=l.getZ(r))<o||null==o)&&(o=i,a=r):v?((i=0==d?Gs(t,g.curpt,g.curNext):d==p.length-1?Gs(t,g.prevCur,g.curpt):gg([Gs(t,g.prevCur,g.curpt),Gs(t,g.curpt,g.curNext)]))<o||null==o)&&(o=i,a=r):1!=p.length&&1!=g.points.length||!r._defined||((i=Zs(t,g.curpt))<=o||null==o)&&i<ur(n,Kv.line)&&(o=i,a=r)}),a=a||Bs(e,{x:t[0],y:t[1]},n,"web")}function Qs(e,t){return this.chart=e,this.renderer=t,this}function Ks(e,t){this.chart=e,this.renderer=t}function $s(e,t,n){var r=this.renderer.commonRendererProp().params,a=this.chart.legendHighlight,i=In(r.commonPlotOptions,this.chart),o=e.seriesIndex,l=e.paneid,s=Hm(n,i?Hm(e.categoryIndex,e.sortedItemIndex):o),c=ln(this.chart,l,o),u=Zn(c.value)?"bar":c.name,d=a.getLegendHighlightEffect(o,"selectedSeries","plot",l),h=a.getLegendHighlightEffect(o,"unselectedSeries","plot",l),f=this.options(e),p=f.color,g=Ny.test(d)||Fy.test(h),v=g?p:pm,y={};if(d==fm)y.fill=c.value===Kv.wordcloud&&f.fillColor||v;else{var m={};m.fill=v,m.stroke=p,t="inherit"==t?p:m.fill,y=a.getEffect(d,u,t,m,s,"plot"),Re(Py.nonAxisSingleSourceEvent,c.value)&&(y=_extends({fill:g||c.value===Kv.wordcloud?f.fillColor:pm,stroke:f.strokeColor},y))}return y}function Js(e,t){return this.chart=e,this.renderer=t,this}function ec(e,t){this.chart=e,this.renderer=t}function tc(e,t){this.chart=e,this.renderer=t}function nc(e,t,n,r){var a=cw.getKey(r,t,e),i=e.subrenderer[n][a];return i?{start:i.data[t].startAngle,end:i.data[t].endAngle}:null}function rc(e,t,n,r){var a,i=Ns(e,t,n,r),o=null;if(i){if("bubblepie"!=(i.type||n.chartTypes[i.seriesIndex].name))return i;if(i._uid,r=cw.getKey(i,i.seriesIndex,n),!(a=n.subrenderer[i.subSeriesIndex][r]))return!1;if(a.data.some(function(e){if(e.data.disabled||e.data.dummy)return!1;var r=e.data,a=nc(n,r.seriesIndex,r.subSeriesIndex,r),i=am(t.x-r._x,-(t.y-r._y)),l=a&&es(a.start,a.end,i);return l&&(o=r),l}),o&&(!n.hasColorScale||n.hasColorScale&&yn(o,n)))return o}return null}function ac(e){Rs.call(this,e)}function ic(e,t,n,r){var a=e.keys(),i={},o=[],l=void 0;a.map(function(a){var l=e.get(a),s=l.superKey||a,c=F(l,function(e){return!e.disabled()},r.spliceIndices()),u=Is(s,n),d=function(e,t,n,r,a){var i=a.chart.cache.search,o=void 0,l=void 0,s=i.lastPane;if("QUADTREE"==r){var c=e[0]instanceof Array?Ig(e):e,u=a.radius(t),d=a.sizeOffset(t),h=a.extent(),f=a.size(t);n=a.toArray(n),l=i[s+"_"+t+"_"+r]||new Ds(c,f,u,h,d),o=l.find(n)}else if("POLY"==r){var p=Ig(e);l=i[s+"_"+t+"_"+r]||new Rs(p),o=l.find(n)}else if("PATH"===r){var g=Ig(e);l=i[s+"_"+t+"_"+r]||new ac(g),o=l.find(n)}else{var v=a.bisectMode(),y=a.median();l=i[s+"_"+t+"_"+r]||new js(e,v),o=l.find(y,n)}return i[s+"_"+t+"_"+r]=l,o}(c,a,t,u,r);if(d){o=o.concat(d);var h=function(e){var t;return LC.some(function(n,r){if(n.has(e))return t=EC.get(MC[r]),!0}),t}(s)(d,t,r.chart,a),f=Is(s,!1);h&&(te(h)&&h.length||ee(h))&&(i[f]?i[f].push(h):i[f]=[h])}});var s=function(e,t){if(e&&1==e.length)return e[0];var n,r={QUADTREE:0,BISECT:1,POLY:2},a=function(e,t){return fr(t.chart)?"POINT":"SEARCH_MODE"}(0,t);return"SEARCH_MODE"===a?n=e.sort(function(e,n){if(e&&(te(e)&&e.length||ee(e))){var a=Is(oc(e,t)),i=Is(oc(n,t));return r[a]-r[i]}}):"POINT"===a&&(n=e.sort(function(e,t){return e._getRank()-t._getRank()})),n[0]}(function(e,t,n){var r=[];for(var a in e){var i=e[a];if(1<i.length){var o=EC.get(a+"_TYPES"),l="QUADTREE"==a?"bubble":"bar",s=o(i,t,n.chart,l,!0);r.push(s)}else r.push(i[0])}return r}(i,t,r),r);return s&&r.hasDependantPoints()&&(l=function(e,t){var n=function(e){if(SC.has(e))return"FLOW"}(oc(e,t)),r=e.seriesIndex,a=t.chart.renderer[r],i=void 0;return"FLOW"===n&&(i=a.highlighter.getDependentLayoutPoints(e,!0).map(function(e){return e.point})),i}(s,r)),{nearest:s,nearby:o,dependents:l}}function oc(e,t){var n=e.seriesIndex;return e.type||t.chart.chartTypes[n].name}function lc(e){_classCallCheck(this,lc),this.chart=e}function sc(e,t){var n=t.nearest;n&&3==n.selected||(this.chart.eventHandler.isSingleSource()?function(e,t,n){el(n);var r=vx.hasSharedSeries(n),a=Dg(),i=void 0,o=n.eventHandler.plotHighlighter||new zC(n);n.eventHandler.plotHighlighter=o,i=r||fr(n)?e.selectionSet:[e.nearest],n.dataObject.pivot&&n.systemConf.chart.axes.events&&n.systemConf.chart.axes.events.highlightAllGrid&&(i=function(e,t){e.column;var n=t.dataObject.hierarchical.pivotLayout.getRootNodeList("column");return n.clusters[0].datatype==sx?null:n.getClusterNodes(0)[e.index].data}(e.nearest,n)||i),i.forEach(function(e){"series"==n.eventHandler.getPointType(e)&&(n.eventHandler.tooltipSharedInfo=a.set(e.seriesIndex,Z(e.counter)?e.counter:e.sortedItemIndex||e.itemIndex),hw.updateSharedInfo(n,a,e.seriesIndex)),o.highlight(e)})}(t,0,this.chart):n.renderer.defaultMouseOverFunc(n.data,n.seriesIndex,n.itemIndex,n.paneid))}function cc(e,t){var n=t.nearest;this.chart.eventHandler.reverseLegendHighlight.highlight(n),this.chart.eventHandler.unselectedHighlight.highlight(n)}function uc(e,t){this.chart.eventHandler.tapOldInfo;var n=Hv()&&Hv().touches,r=t.nearest;if(n&&"taphold"!==this.chart.zcEventType){var a=$ZC.getPlotDefaultBehaviour(),i=this.chart.eventHandler.eventManager;r&&3==r.selected?(i.selectionManager.remove(),a.mouseout.map(function(n,r){n.action().call(i,e,t)})):i.associateBehaviours.call(i,"mousemove",t,e)}}function dc(e,t,n){var r=this.chart.eventHandler.isSingleSource()&&!this.chart.isGeoMap,a=fc(this.chart),i=!0===Rm(this.chart.systemConf,"chart.brush.enabled"),o=this.chart.isAxisCategory&&this.chart.isPolarAxisCategory,l=n||(i&&o?"crosshair":gm);r?(l=n||BC.getCustomBehaviour.call(this,t,"cursor")||(i?"crosshair":gm),function(e,t,n){if(!t)return!1;var r=t.seriesIndex,a=t.type||ln(n,t.paneid,r).name;if(IC.has(a))return!0;var i={x:t._x,y:t._y};return gx.dist(i,e)<10}(e,t.nearest,this.chart)?a.style("cursor",l):hc.call(this)):a.style("cursor",l)}function hc(){fc(this.chart).style("cursor","default")}function fc(e){return e.isAxisCategory&&(e.systemConf.chart.width||e.systemConf.chart.height)?e.container.selectAll(".zohocharts_scroll"):e.eventHandler.trackerElement}function pc(){this.chart.eventHandler.handlers;var e=this.chart.eventHandler.tooltipElement;e.hide(e.element),hc.call(this)}function gc(e,t){var n,r=this.chart,a=t.nearest;if(this.chart.systemConf.notes&&this.chart.systemConf.notes.addOnDoubleclickEvent){if(this.chart.eventHandler.isSingleSource()){var i=this.chart.seriesdata,o=a.slice(),l=o.splice(0,o.length),s=ln(r,a.paneid,0).value,c=a._centric&&Re(Py.nonAxisSingleSourceEvent,s),u=[a._x-(c?a._width/2:0),a._y-(c?a._height/2:0)];1<i.length&&l.push(i[a.seriesIndex].seriesname),n={coordinate:this.chart.dataObject.isPolarAxisCategory?[u[0]+this.chart.plotarea_approx.x,u[1]+this.chart.plotarea_approx.y]:u,data:l,basedOn:"plot"}}else n=a;DC._empty||DC.addNotes(this.chart,n)}}function vc(e,t){var n=Hv()||this.chart.eventHandler.targetEvent,r=null!=n?n.relatedTarget:null,a=null!=n?n.target:null,i=this.chart.eventHandler.tooltipElement,o=this.chart.systemConf.tooltip.hideDelay,l=(this.chart.eventHandler.getSourceNode(),t.nearest),s=this.chart,c=this.chart.eventHandler;if(s.eventHandler.unselectedHighlight.reset(),!this.chart.isAxisCategory||!function(e,t,n){var r=n.element;return t!=vm&&n!==vm&&(e==r.node()||e==r.selectAll("div#tooltipcontent").node()||e==r.selectAll("div#zctooltipafter").node()||e==r.selectAll("div#zctooltipbefore").node()||t==r.node()||t==r.selectAll("div#tooltipcontent").node()||t==r.selectAll("div#zctooltipafter").node()||t==r.selectAll("div#zctooltipbefore").node())}(a,r,i)){if(c.isSingleSource())clearTimeout(c.mouseouttimer),c.mouseouttimer=setTimeout(function(){clearTimeout(c.tooltipElement.timeout),c.tooltipElement.timeout=setTimeout(function(){el(s),i.hide()},Hm(o,150))},0),hc.call(this);else{var u=l?l.seriesIndex:0;this.chart.renderer[u]||l.renderer,pc.call(this)}c.reverseLegendHighlight.reset()}}function yc(e,t){var n=Hv()||this.chart.eventHandler.targetEvent,r=(null!=n&&n.relatedTarget,null!=n&&n.target,this.chart.eventHandler.tooltipElement,this.chart.systemConf.tooltip.hideDelay,this.chart.eventHandler.getSourceNode(),t.nearest),a=this.chart;if(this.chart.eventHandler.isSingleSource()){var i=t.nearest;if(i&&3==i.selected)return;el(this.chart)}else!function(e,t,n){var r=t?t.seriesIndex:0;((e.renderer[e.dataObject.isAxisCategory||e.dataObject.isPolarAxisCategory?r:t&&t.rendererIndex||0]||t.renderer).defaultMouseOutFunc||t.renderer.defaultMouseOutFunc)(t,r,n)}(a,r,void 0)}function mc(){return RC._defaultPlotBehaviour}function bc(e){return!(!this.chart.isAxisCategory&&!this.chart.isPolarAxisCategory)}function xc(e){var t=this.chart,n=this.eventManager,r=n.selectionManager;!0!==t.eventHandler.mouseOnTooltip&&t.chartRendered&&(n.eventType="mouseout",n.targetEvent=t.eventHandler.targetEvent=Hv()||t.eventHandler.targetEvent,this.isSingleSource(),e&&e.constructor===Object||e&&e.constructor===Array||(e=r.oldSelectionSet[0]||r.selectionSet[0]),e=this.toNewObject(e),n.selectionManager.remove(),n.associateBehaviours("mouseout",e))}function wc(e){var t=this.chart,n=this.eventManager;if(t.zooming||t.brushing)return!1;if(t.chartRendered){this.clearOldActions(),!1!==t.stopPropogate&&Hv().stopPropagation(),n.eventType=t.zcEventType||"mousemove",n.targetEvent=t.eventHandler.targetEvent=Hv();var r=this.isSingleSource(),a=this.getSourceNode(),i=this.getRelativeMousePosition(a,r),o=e.constructor===Object||e.constructor===Array||!r;if(e=r?e:e.constructor===Object?e:n.selectionManager.nearest,o&&(e=this.toNewObject(e)),!o&&!(e=n.getData("mousemove",i)).selectionSet.length)return void t.eventHandler.handlers.mouseout.call(this);n.associateBehaviours(n.eventType,e,i)}}function Cc(e,t){e&&Km.isTouchDevice&&e.dataObject.pivot&&e.cache.search.lastPane&&(e.dataObject.isAxisCategory||e.dataObject.isNonAxisMultiSeriesCategory||!t||!t.paneid||t.paneid===e.cache.search.lastPane||(Qm.clickArguments=[],kc(e))),Km.isTouchDevice&&(!e&&Qm.clickArguments&&Qm.previousChartObj||Qm.previousChartObj&&Qm.previousChartObj!=e)&&Qm.previousChartObj&&!Qm.previousChartObj.destroying&&kc(Qm.previousChartObj)}function kc(e){if(Ee(e.container.node())){Qm.clickArguments[4]=!0;var t=e.systemConf.tooltip,n=t.hideDelay;t.hideDelay=0;var r=!(e.dataObject.isAxisCategory||e.dataObject.isNonAxisMultiSeriesCategory);e.dataObject.pivot&&r&&(e.eventHandler.eventManager.selectionManager.oldSelectionSet=[]),e.eventHandler.tapOldInfo=null,e.eventHandler.handlers.mouseout.call(e.eventHandler),t.hideDelay=n}}function _c(){var e=(new Date).getTime();(!Qm.clickedTime||500<e-Qm.clickedTime)&&Cc()}function Sc(e){var t=this.chart,n=this.eventManager;if(t.chartRendered){t.seriesdata;var r=Hv()&&Hv().touches,a=t.zcEventType||"click";r&&"taphold"!==a&&Oc(a,t,e),n.eventType=a,n.targetEvent=t.eventHandler.targetEvent=Hv();var i=this.isSingleSource(),o=this.getSourceNode(),l=this.getRelativeMousePosition(o,i),s=e.constructor===Object||e.constructor===Array||!i;if(i||(e=this.toNewObject(e)),!s&&!(e=n.getData("click",l)).nearest)return void t.eventHandler.handlers.mouseout.call(this);n.associateBehaviours(a,e,l)}}function Oc(e,t,n){"taphold"!=e&&(HC(t,n),Qm.clickedTime=(new Date).getTime(),Qm.clickedElement=Hv()&&Hv().target,Qm.clickArguments=[],Qm.previousChartObj=t)}function Ac(e){var t=this.chart,n=this.eventManager;if(t.chartRendered){!1!==t.stopPropogate&&Hv().stopPropagation(),Hv()&&Hv().touches&&t.eventHandler.handlers.mouseout.call(this),n.eventType=t.zcEventType||"doubleclick",n.targetEvent=t.eventHandler.targetEvent=Hv();var r=this.isSingleSource(),a=this.getSourceNode(),i=this.getRelativeMousePosition(a,r),o=e.constructor===Object||e.constructor===Array||!r;if(r||(e=this.toNewObject(e)),!o&&!(e=n.getData("doubleclick",i)).nearest)return void t.eventHandler.handlers.mouseout.call(this);n.associateBehaviours(n.eventType,e,i)}}function Pc(){var e=this;return{mousemove:function(t){return wc.call(e,t)},mouseout:function(t){return xc.call(e,t)},click:function(t){return Sc.call(e,t)},doubleclick:function(t){return Ac.call(e,t)},contextmenu:function(t){return function(e){var t=this.chart,n=this.eventManager;if(t.chartRendered){t.eventHandler.targetEvent=Hv();var r=this.isSingleSource(),a=this.getSourceNode(),i=this.getRelativeMousePosition(a,r);e=n.selectionManager,n.associateBehaviours("contextmenu",e,i)}}.call(e,t)},tap:function(t){return Sc.call(e,t)},dbltap:function(t){return Ac.call(e,t)},singletouchmove:function(t){return wc.call(e,t)},touchend:function(t){return xc.call(e,t)}}}function Tc(e,t){var n=e.legendarea.element,r=n&&n.selectAll(".legseries").node();this.chartObj=e,this.legendSeries=r,this.legendElements=r?r.children:[],this.itemHighlighted=!1,this.hoveredSeriesIndex=vm,this.hoveredlegendOrder=vm,this.previousHoveredSeriesIndex=vm,this.legend_series_height=vm,this.legendScrollable=vm,this.legendComponents=function(e){var t={};return e.forEach(function(e){return t[e.id]={data:null,highlighted:!1}}),t}(e.legends),r&&(this.legend_series_height=r.clientHeight,this.legendScrollable=r.scrollHeight>this.legend_series_height)}function Ec(e,t){var n=e.legends.get(t).meta.encode,r=hn(e.legends,t);return function(e){return"z"===e?"size":"clr"===e?"color":null}(n).toUpperCase()+"_"+r.toUpperCase()+"("+t+")"}function Lc(e){this.chartObj=e,this.elements="svg"===e.plot.renderer.mode?e.container.selectAll("g.seriesholder"):fg(e.context.canvas),this.backupStyles=vm,this.previousPoint=vm}function Mc(e,t){return-1<["parent","children"].indexOf(e)?Ey:t}function zc(e,t,n,r,a){var i;if("threshold-marker"===t.type){var o="x"===t.thresholdType?"x":"y.groups["+t.yColumnIndex+"]";i=Rm(a.axes,o+".threshold.line").getMetaInfo(t)}else i=a.chartTypes[0].name===Nb&&"node"===t._type?{point:t,seriesIndex:t.seriesIndex,subSeriesIndex:t.subSeriesIndex,data:a.dataset.getMetaInfoObj(a,t,t.seriesIndex)}:function(e,t){var n,r=t.currentQualitativeRangePoint,a=Hm(t.point,t.data)||{},i=Hm(t.level,a&&a.level);return n=Z(i)?Ic(i):{seriesIndex:Hm(t.seriesIndex,a.seriesIndex),subSeriesIndex:Hm(t.subSeriesIndex,t.subSeriesIndex,a.subSeriesIndex),itemIndex:Hm(t.itemIndex,a.itemIndex)},te(t.subseriesindex)&&t.subseriesindex.some(function(e){if(Z(e))return n.subSeriesIndex=e}),Z(r)&&(n.rangeIndex=r.rangeIndex,n.targetIndex=r.targetIndex),Z(n.seriesIndex)&&Z(n.itemIndex)&&(Z(a)&&te(a.data)&&(a=a.data),te(a)||(n.subSeriesIndex=Hm(n.subSeriesIndex,0),Z((a=t).level)&&(n.levelIndices=Ic(a.level).levelIndices)),n.data=e.dataset.getMetaInfoObj(e,a,n.seriesIndex)),n.point=a,n}(a,t);return Z(r)&&"object"===(void 0===r?"undefined":_typeof(r))&&(i=Im(i,r,!0,!0)),{args:i,callback:e}}function Ic(e){return{levelIndices:(e=e.split("_")).map(Number),seriesIndex:+e[0],itemIndex:+e[e.length-1]}}function Dc(e,t){var n=e.dataObject.isPolarAxisCategory;if(e.dataObject.pivot){e.dataObject.isPolarAxisCategory&&(t.x+=e.plotarea_approx.x,t.y+=e.plotarea_approx.y);var r,a,i=e.dataObject.hierarchical.pivotLayout,o=i.getRootNodeList("row"),l=i.getRootNodeList("column");if(o.hasMultiCluster()){var s=e.axes.y.leaves,c=o.leafSize,u=0,d=e.axes.rotated,h=!n&&e.axes.rotated;r=Ki(t,f=s.map(function(e,t){var r=n?[u,u+c]:e.scale.range(),a=!!n||e.reversed;return u+=c,r[n?0:h&&a?0:1]}),"y",d,!d,p=h?"<":">")}else if(o.count){var f=e.axes.y.branches[0].scale.ordinalRange,p=(e.axes.rotated,">");r=Ki(t,f,"y",e.axes.rotated,!e.axes.rotated,p)}if(l.count){var g=e.axes.x.levels[0].scale.ordinalRange,v=e.axes.x.reversed;p=e.axes.rotated&&!v?"<":">",a=Ki(t,g,"x",e.axes.rotated,v,p)}return e.dataObject.isPolarAxisCategory&&(t.x-=e.plotarea_approx.x,t.y-=e.plotarea_approx.y),(r||0)+"_"+(a||0)}return"0_0"}function Rc(e,t){_classCallCheck(this,Rc),this.chart=e,this.tracker=t,this.rotated=e.axes.rotated,this.isAxisCategory=e.isAxisCategory,this.isGeoMap=e.isGeoMap,this.isPolarAxisCategory=e.dataObject.isPolarAxisCategory,this.isFlowChartCategory=e.dataObject.isFlowChartCategory}function jc(e,t,n){return this instanceof jc?(t=Hm(t,[]),n&&(t=jc.toCircle(t)),this.chart=e,this.points=jc.addType(t),void 0):new jc(t)}function Hc(e,t,n){var r=Bc(n);t.dataObject.pivot&&e.attr("levelbycolumn",function(e){return r(e).levelByColumn}).attr("levelbyrow",function(e){return r(e).levelByRow})}function Bc(e,t){return e===Db||e===Rb||e===jb?Nc:e===Tb?function(e){return e.data}:e===xb||e===Cb?function(e){return e[0]&&e[0]}:"label"==e?t?function(e,t){return e[e.length-1-t]}:function(e){return e.data||e}:function(e){return e}}function Nc(e){return e.children?Nc(e.children[0]):e.data}function Fc(e,t,n,r){if(t.dataObject.hierarchical&&t.cache.hierarchical){var a=Bc(n,r);e.style("opacity",function(e,i){var o=t.cache.hierarchical,l=o.row,s=o.column,c=!0,u=!0,d=a(r||e,i);if(l&&l.active){var h=l.query;c=!Z(d.levelByRow)||d.levelByRow.startsWith(h)}s&&s.active&&(h=s.query,u=!Z(d.levelByColumn)||d.levelByColumn.startsWith(h));var f=qw.get(n),p=f&&f[1]||"opacity",g=t.systemConf.chart.plot.plotoptions[n]?t.systemConf.chart.plot.plotoptions[n][p]:1,v=c&&u?g:.1;return fg(this).attr("filtered-opacity",v),v})}}function Vc(e,t){var n=e.dataObject,r=n.isContinousChart,a=t.length,i={top:["hidden","topPlus","right","bottom","left"],bottom:["hidden","right","left"]},o=pr(e),l={x1:o.left,y1:o.top,x2:o.right,y2:o.bottom};t=r?t.sort(function(e,t){return Wg(e.x1,t.x1)}):t;for(var s=1;s<a;s++){var c,u,d,h=0,f=!1,p=0,g=Hm(t[s].factor,1),v=(t[s].pointRadius||0)*g,y=t[s].x1,m=t[s].y1,b=t[s].x2,x=t[s].y2,w=t[s].x2-t[s].x1,C=t[s].y2-t[s].y1,k=i[Hm(t[s].orient,"top")],_=t.slice(0,s);_=r?_.reverse():_;do{switch(k[p]){case"hidden":u="hidden"===(c=t[s]).overlap||n.isBubbleEnabled;break;case"topPlus":c.y1=m-C/2,c.y2=x-C/2,d=ib;break;case"right":c.x1=(y+b)/2+v,c.x2=(y+b)/2+v+w,c.y1=x+1,c.y2=x+C+1,d=rb;break;case"bottom":c.x1=y,c.x2=b,c.y1=x+2*(1+v),c.y2=x+2*(1+v)+C,d=ob;break;case"left":c.x1=(y+b)/2-v-w,c.x2=(y+b)/2-v,c.y1=x+1,c.y2=x+C+1,d=ab}for(var S=s-1;0<=S;S--)if(f=Un(_[S],c)){h++;break}}while(++p<5&&f);if(0!=h){var O=!!n.isPolarAxisCategory||Ai(c,l),A=t[s].translateFunction,P=t[s].id,T=t[s].isStackedLabels;!O||5==h||u?(A(P,null,null,!0,Ey,Ey,T?Yx:Wx),t[s].x1=t[s].y1=t[s].x2=t[s].y2=0):A(P,c.x1-y,c.y1-m,null,void 0,d,T?Yx:Wx)}}}function Wc(e,t){function n(e,t){return o?Yg(e.x1,t.x1):Wg(e.y1,t.y1)}var r=t.length,a=pr(e),i={x1:a.left,y1:a.top,x2:a.right,y2:a.bottom},o=e.axes.rotated;t.sort(function(e,t){return o?Yg(e.y1,t.y1):Wg(e.x1,t.x1)});for(var l=0;l<r;l++){for(var s=!1,c=0,u=0,d=t[l].x1,h=t[l].y1,f=t[l],p=t.slice(0,l).sort(n),g="hidden"===f.overlap,v=l-1;0<=v&&c<2;v--){var y=Un(p[v],f);y&&(o?(u=p[v].x2-f.x1,f.x2+=u,f.x1+=u):(u=p[v].y1-f.y2,f.y2+=u,f.y1+=u),c++),s=s||y}if(s){var m=Ai(f,i),b=t[l].translateFunction,x=t[l].id,w=t[l].isStackedLabels;!m||1<c||g?(b(x,null,null,!0,Ey,Ey,w?Yx:Wx),t[l].x1=t[l].y1=t[l].x2=t[l].y2=0):b(x,f.x1-d,f.y1-h,Ey,Ey,Ey,w?Yx:Wx)}}}function Yc(e,t,n,r){function a(e,t){return e.dist-t.dist}for(var i=[],o=[],l=[],s=n-r,c=s,u=0;u<n;u++)e[u]||i.push(u);e.forEach(function(e){e.sort(a)}),e.forEach(function(e){e.forEach(function(e,t){0!=t&&(l[t]=l[t]||[],l[t].push(e))})}),l.forEach(function(e){e.sort(a)}),l.forEach(function(e){e.forEach(function(e,t){o.push([e])})}),o.forEach(function(e,t){0<s?s--:e[0].hide=!0}),(o=o.slice(0,c)).sort(function(e,t){return e[0].y1-t[0].y1}),o.forEach(function(n){var r=n[0],a=r.y2-r.y1,o=qy(Xy((r.y1-t)/a),0);if(e[o]){for(var l,s=i[0],c=0,u=0;u<i.length;u++){var d=Ky(t+i[u]*a-r.y1);null==l&&(l=d),d<l&&(l=d,s=i[u],c=u)}if(s<o){i.splice(c,1);var h=s;e.forEach(function(t,n){var a=t[0];s<n&&a.y1<r.y1&&(e[h]=t,h=n)}),e[h]=[r]}else{i.splice(c,1),h=[r];for(var f=o;f<=s;f++)if(e[f]){if(e[f][0].y1>r.y1){var p=e[f];e[f]=h,h=p}}else e[f]=h}}else e[o]=n}),e.forEach(function(r,a){var i=r[0],o=i.y2-i.y1,l=t+a*o-i.y1;i.translate=Ky(l)<o&&a+1<n&&!e[a+1]&&l<0?0:l}),e.forEach(function(r,a){var i=r[0],o=i.y2-i.y1,l=t+a*o-i.y1;i.translate=Ky(l)<o&&a+1<n&&(!e[a+1]||!e[a+1][0].translate)&&l<0?i.translate:l})}function Uc(e,t,n,r){return e.forEach(function(e){var a=e.y2-e.y1,i=qy(0,Xy((e.y1-r)/(e.y2-e.y1)));e.dist=e.y1<r?r-e.y1:e.y1-(r+i*a),n[i]||(n[i]=[],t++),n[i].push(e)}),t}function Gc(e,t,n,r,a,i,o,l,s){if(!e.hide){null==t&&(t=Xy((r-n)/(e.y2-e.y1)));var c=s?null==a?r-e.y2:i[a].y1-e.y2:null==a?e.y1-n:e.y1-i[a].y2;l+=null!=a&&Un(e,i[a])&&c<-5?Ky(c):0,a=o,i.push(e),o++}return{prev:a,count:o,totalslot:t,need:l}}function Xc(e,t,n){if(t.length){var r,a,i,o=[],l=[],s=t.TOP,c=t.BOTTOM,u=t.queue,d=0,h=0,f=[],p=[],g=0,v=0,y=0,m=0;t.forEach(function(e){if(e.isLeft){var t=Gc(e,i,s,c,r,l,h,m,!0);i=t.totalslot,r=t.prev,h=t.count,m=t.need}else t=Gc(e,i,s,c,a,o,d,y),i=t.totalslot,a=t.prev,d=t.count,y=t.need}),y||m?("funnel"===t.actualType&&o.reverse(),g=Uc(o,g,f,s),l.reverse(),v=Uc(l,v,p,s),Yc(f,s,i,g),Yc(p,s,i,v),t.forEach(function(t){e.labelHandler.update(t.id,t.DX,t.translate||0,t.hide,void 0,t.overlappingHookPosition,void 0,t.queue||u)}),H(u,"properties.onOverlap")&&be(t.queues).forEach(function(e){return e.properties.onOverlap(e[t.subSeriesIndex])})):(H(u,"properties.onNonOverlap")&&be(t.queues).forEach(function(e){return e.properties.onNonOverlap(e[t.subSeriesIndex])}),t.forEach(function(t){e.labelHandler.update(t.id,0,0,null,t.actualDY,void 0,void 0,t.queue||u)}))}}function Zc(e){this.chartObj=e}function qc(e){var t=e.chartObj,n=e.renderer,r=e.charttype,a=e.rendererIndex,i=e.paneid,o=e.args,l=t.staticPaneSVG.selectAll("g.labelholder"),s=t.labelHandler;t.labelHandler||((s=t.labelHandler=Iy.initialize(t)).chartType=r),s.rendererIndex=a,s.paneid=i;var c=gw.get(r);c!==bm&&((c=c()).renderer(n).args(o),l.call(c,s))}function Qc(e,t){t=(t=rn(e)&&"0"===t?"0_0":t).replace(/\((\d+)\)/,"");var n=e.dataObject,r=ln(e,t,0).value,a=cn(e,r,"axis"),i=cn(e,r,"polarAxis");return a&&n.isCombinationalChart||a&&!n.noofBarEnabledSeries||i||e.isGeoMap||n.isFlowChartCategory?Vc:a&&n.noofBarEnabledSeries?Wc:Xc}function Kc(e,t){return _extends({mark:e,selector:t,data:2<arguments.length&&void 0!==arguments[2]?arguments[2]:[1],children:[]},arguments[3])}function $c(e,t,n,r){var a=1<arguments.length&&void 0!==t?t:[],i=n,o=r,l=e.config,s=e.globalFont,c=void 0===s?{}:s,u=l.text,d=l.hAlign,h=void 0===d?"left":d,f=l.vAlign,p=void 0===f?"top":f,g=kt(vm,[l,c,Qm]);return{text:z(u),x:a[0],y:a[1],dy:NC[p],anchor:gb[h],styles:g,trim:i&&o&&function(e){return function(e,t,n){var r=e.node(),a=M(r),i={left:0,top:0,width:a.width,height:a.height};bt(r,r.textContent,i,t,ib,"..",n),".."===r.textContent&&e.text("")}(e,i,o)}}}function Jc(e){_classCallCheck(this,Jc);var t=e.data,n=e.selector,r=e.parser,a=r.x,i=r.y,o=r.text,l=r.dy,s=r.anchor,c=r.styles,u=r.trim,d=Kc(Wm,n,t,{properties:{text:o,styles:c,attrs:{x:a,y:i,dy:l,"text-anchor":s}},onEnd:u});return this.encode=d}function eu(e){_classCallCheck(this,eu),this.spec=e}function tu(e){_classCallCheck(this,tu),this.spec=e}function nu(e,t){var n=e.range,r=e.ranges,a=r&&r.length;return t=function(e,t){return t[1]>t[0]?(e[1]=Qy(e[1],t[1]),e[0]=qy(e[0],t[0])):(e[1]=qy(e[1],t[1]),e[0]=Qy(e[0],t[0])),e}(t,n),a?function(e,t){var n=t.scale_domain,r=t.datatype,a=t.isHorizontal,i=t.reversed,o=t.scale,l=t.ranges,s=R(o.domain().map(o)).sort(Wg),c=o.domain(),u=o.bandwidth(),d=void 0,h=void 0;s.some(function(t,n){if(e[0]>=t&&e[0]<=t+u){var r=e[0]-t;d=r<=.5&&0<=r?qy(n-1,0):n}return e[1]>=t&&e[1]<=t+u&&(r=t+u-e[1],h=r<=.5&&0<=r?Qy(n+1,s.length-1):n),Z(d)&&Z(h)}),d=qy(0,U(d,0)),h=qy(0,U(h,c.length-1));var f=c;if(r!==ox&&1===l[0].length&&(f=function(e,t){for(var n=e[2],r=e[e.length-1-2],a=[],i=0;i<t.length;i++)a.push([n,t[i][0]]),n=t[i][0];return a.push(n,r),a}(n,f)),"z"!==t.encode?!a&&!i||a&&i:i){var p=d;d=s.length-1-h,h=s.length-1-p}return f=f.slice(d,h+1,0),e=r===ox?f:iu(e=Fg(Ig(f)),n)}(t,e):t.map(function(t){return e.scale.invert(t)}).sort(Wg)}function ru(e,t){var n=void 0,r=e.ranges,a=r&&r.length,i=e.scale;return a?n=au(nu(e,t),e):e.singleDomainContinuous&&(n=e.singleDomainContinuous.map(function(e){return i(e)})),n}function au(e,t){var n,r=t.scale,a=t.ranges,i=t.scale_domain,o=t.datatype,l=r.bandwidth()/2;if(o===ox)n=[r(e[0])+l,r(e[e.length-1])+l];else{var s,c,u=r.domain();e=iu(e,i),u.forEach(function(t,n){e[0]>=t[0]&&(s=1===a[0].length?n+1:n),!Z(c)&&e[1]<=t[0]&&(c=1===a[0].length?n:n-1)}),s=qy(0,U(s,0)),c=qy(0,U(c,u.length-1)),n=[r(u[s])+l,r(u[c])+l]}return n[0]===n[1]&&(n[0]-=WC,n[1]+=WC),n}function iu(e,t){return function(e,t){return e.indexOf(t)===e.lastIndexOf(t)}(t,e[1])||(e[1]-=WC),e}function ou(e,t,n,r){var a=[0,0],i=n.getSelection().slice(0),o="x"===e.type;if(e.scale.bandwidth){var l=e.scale.bandwidth();i[0]-=i[0]%l,i[1]+=l-i[1]%l}else if(e.singleDomainContinuous){var s=o?0:1;i[0]=a[s],i[1]=e.dimension[s]}ww.CLIP_TRACK(n,i,r,"colorband"),function(e,t,n,r,a){var i=Et("path",".zcbrushhighlighttracker",[1],e,":nth-child(2)"),o=n[0]+1,l=n[1]-1,s=a?"M"+o+" "+t[1]+"L"+l+" "+t[1]+"L"+l+" "+r[1]+"L"+o+" "+r[1]+"Z":"M"+t[0]+" "+o+"L"+t[0]+" "+l+"L"+r[0]+" "+l+"L"+r[0]+" "+o+"Z";i.attr("d",s).styles({opacity:0,"stroke-width":0})}(t,a,i,e.dimension,o)}function lu(e,t){var n=e.helperOptions.spec.config,r=e.chartObj,a=function(e,t){var n=e.colorBand.ranges,r=n&&n.length,a=e.filter.range,i=t.axes.clr.scale.domain();if(r){var o=t.dataset.getDataType("clr"),l=a||(o===ox?i:n);return a?cu(a,n):[l[0],l[l.length-1]]}return a||i}(n,r),i=r.dataset.getColumn("clr"),o=i.datatype,l=i[o];return su(a,t,{datatype:r.dataset.getDataType("clr"),format:function(e){return Aa(l,e,o,r,"legend",Ey,"-")},ranges:n.colorBand.ranges,scale:r.axes.clr.scale,reversed:Dx.isReversedColorAxis(n),isHorizontal:function(e){var t=e.helperOptions.orient;return t===ob||t===ib}(e)})}function su(e,t,n){var r,a,i=n.datatype,o=n.format,l=n.ranges,s=n.scale,c=n.reversed,u=n.isHorizontal,d=e;if(!(i!==sx||l&&l.length)){var h=s.domain();a=[h[0],h[h.length-1]];var f=Ky(a[1]-a[0]);if(f){var p=Math.floor(Math.log(f)/Math.LN10)-2;r=Math.abs(Math.min(p,0))}}var g=t;"z"!==n.encode&&(g=u?t:+!t),c&&(g=!g);var v=d[g?d.length-1:0];return Z(r)&&-1===a.indexOf(v)&&(v=te(v)?v.map(function(e){return+e.toFixed(r)}):+v.toFixed(r)),o(v)}function cu(e,t){var n,r,a=[e[0],e[1]+1e-12],i=1===t[0].length;return t.forEach(function(e,t){e[0]<=a[0]&&(n=t),e[1===e.length?0:1]<=a[1]&&(r=t)}),B(n)?n=0:i&&n++,B(r)&&(r=t.length-1),[t[n],t[r]]}function uu(e,t){this.chartObj=e,this.initialize(t)}function du(e,t,n,r,a){var i=e&&e.length,o=n.domain(),l=r.domain(),s=r.bandwidth?r.bandwidth()/2:0,c=r.singleDomainContinuous,u=void 0;return i?(u=t?au(t,{scale_domain:o,datatype:a,ranges:e,scale:r}):[r(l[l.length-1])+s-1e-12,r(l[0])+s+1e-12],u.sort(Wg)):u=(u=t||c||r.domain()).map(function(e){return r(e)}).sort(Wg),u}function hu(e,t,n,r){var a=n.domain();t===ox&&(e.ranges||(e.ranges=a));var i=e.ranges,o=void 0;if(i&&i.length)o=_g().domain(t===ox?a:Zt(e,t)).range(r).padding(0);else{var l,s=[a[0],a[a.length-1]];s[0]===s[1]&&(l=[-1,1],s=[-um,um]),(o=kg().domain(s).range(r).clamp(!0)).singleDomainContinuous=l}return o}function fu(e,t){t.empty()||pe(e,function(e,n){"styles"===n&&(e=pu(e),Lt(t)&&(e=function(e){return e["stroke-width"]=Hm(e["stroke-width"],1),e["stroke-linecap"]=at(e["stroke-linecap"],e["stroke-dasharray"]),e["stroke-dasharray"]=rt(e["stroke-dasharray"],e["stroke-width"]),e}(e))),t[n](e)})}function pu(e){var t={};return pe(e,function(e,n){return t[UC[n]||n]=e}),t}function gu(e,t){var n=e.mark,r=e.selector,a=e.data,i=e.order,o=e.properties,l=e.children,s=Et(n,r,a,t,i);e.depends&&(s=t.select(n+(r||""))),e.onStart&&e.onStart(s),fu(o,s),e.element=s,l&&l.length?l.forEach(function(e){return gu(e,s)}):s.selectAll("*").remove(),e.onEnd&&e.onEnd(s)}function vu(e,t,n,r,a){var i={config:t.title,bound:n,globalFont:a,margin:xe(5)};gu(new FC(i).create(),e)}function yu(e,t,n,r,a,i){var o=e.minmaxlabels.align,l=[];return l[0]=t===rb?o===ab?n.width:qy(n.width,o===rb?a.width:a.width/2):t===ab?o===ab?i[0]:o===rb?i[0]+a.width:i[0]+a.width/2:o===ob||o===ib?i[0]:i[0]-a.x,l[1]=r.height,t===rb||t===ab?l[1]-=Qy(0,a.y):t===ib&&o===ob&&(l[1]+=a.height),l[1]+=t===ob?n.height:i[1],l=function(e,t,n){var r=(t.show?U(t.strokeWidth,1):0)-.5;return n===rb?e[0]-=r:n===ab?e[0]+=r:n===ib?e[1]+=r:e[1]-=r,e}(l,e.axisline,t)}function mu(e,t,n,r,a,i,o){var l=M(n.node()),s=Dx.getOrient(r),c=function(e,t){var n=t.selectAll("g."+Mx+",line.majorTicks");n.style("display",fm);var r=Dm(M(t.node()));return n.style("display",null),r}(0,e),u=M(e.selectAll("g."+Mx).node()),d=function(e,t,n,r,a){var i=e.align,o=[];return o[0]=t===rb?i===ab?n.width:qy(n.width,i===rb?a.width:a.width/2):t===ab?i===ab?0:i===rb?a.width:a.width/2:i===ob||i===ib?0:-a.x,o[1]=r.height,t===rb||t===ab?o[1]-=Qy(0,a.y):t===ib&&i===ob&&(o[1]+=a.height),t===ob&&(o[1]+=n.height),o}(a.minmaxlabels,s,c,l,u),h=yu(a,s,c,l,u,i);return function(e,t,n,r){e===ob?n[1]+=t:e===ib?r[1]+=t:e===rb?n[0]+=t:r[0]+=t}(s,o,d,h),t.attr("transform","translate("+d[0]+","+d[1]+")"),e.attr("transform","translate("+h[0]+","+h[1]+")"),{axisGroupPosition:h,bandGroupPosition:d}}function bu(e,t){return xu(e,this.options)}function xu(e,t){var n=t.config,r=t.brushScale,a=t.reversed,i=t.scale,o=t.singleDomainContinuous,l=t.isHorizontal,s=t.range,c=t.ranges,u=t.encode,d=fn(n,u),h=e[l?0:1];if(c&&c.length){var f=r.bandwidth(),p=J((h+(n.filter.enabled?0:f/2))/f);return p=qy(Qy(p,c.length-1),0),p=a?c.length-1-p:p}return o?i.domain():("z"===u&&(h=a?Qy(qy(h,s[1]),s[0]):Qy(qy(h,s[0]),s[1])),wu(h,r,{triggerOffset:qy(U(d.triggerOffset,10),.1),round:"z"===u}))}function wu(e,t,n){var r=n.triggerOffset,a=void 0===r?0:r,i=n.round,o=void 0!==i&&i?Gy:Xy,l=t.invert(e-a/2),s=t.invert(e+a/2),c=Ky(s-l),u=c?Xy(+(nm(c)/om).toFixed(2)):0,d=$y(10,u),h=o(t.invert(e)/d)*d,f=[h=+h.toFixed(12),h+d-1e-12];return f.data=t.invert(e),f}function Cu(e){_classCallCheck(this,Cu),this.spec=e,this._view={}}function ku(e,t,n,r,a,i){var o=r.systemConf,l=n.minmaxlabels,s=i,c=s.colorBand,u=xr(s),d=s.filter.enabled?Ou(s.filter.slider,t,a,u):[0,0],h=c.ranges&&c.ranges.length,f=Dx.isReversedColorAxis(i),p=[],g=r.dataset.getColumn("clr"),v=g.datatype,y=g[v];if(l.show)if(h){var m=Xt(i,r);p=[m[0][0],m[m.length-1][m[m.length-1].length-1]]}else{var b=r.axes.clr.scale.domain();p=[b[0],b[b.length-1]]}f&&p.reverse();var x={format:function(e){return Aa(y,e,v,r,"minmaxlabels")},data:p,orient:a,dimension:t,sliderSize:d,config:l,globalFont:o.canvas};gu(new XC(x).create(),e)}function _u(){return _classCallCheck(this,_u),_possibleConstructorReturn(this,(_u.__proto__||Object.getPrototypeOf(_u)).apply(this,arguments))}function Su(e){var t=e.config,n=e.format,r=e.data,a=e.trimText,i=e.index,o=void 0===i?function(e){return e}:i,l=e.globalFont,s=void 0===l?{}:l,c=e.orient,u=void 0===c?ab:c,d=e.dimension,h=e.sliderSize,f=void 0===h?[[0,0],[0,0]]:h,p=t.show,g=t.align,v=t.padding,y=void 0===v?2:v,m=t.text,b=kt(null,[t,s,Qm]),x=r.map(function(e,t){return function(e,t,n,r,a,i){var o,l,s,c,u=te(a[i])?a[i]:a;return e===ib?o=n===ob?(s="-0.3em",c=0===i?null:"end",l=-t[1]-r-qy(0,(u[1]-t[1])/2),0===i?0:t[0]):n===ib?(s="1em",c=0===i?null:"end",l=r+qy(0,(u[1]-t[1])/2),0===i?0:t[0]):(s="0.3em",c=0===i?"end":null,l=-t[1]/2,0===i?-r-u[0]/2:t[0]+r+u[0]/2):e===ob?o=n===ob?(s="-0.3em",c=0===i?null:"end",l=-r-qy(0,(u[1]-t[1])/2),0===i?0:t[0]):n===ib?(s="1em",c=0===i?null:"end",l=t[1]+r+qy(0,(u[1]-t[1])/2),0===i?0:t[0]):(s="0.3em",c=0===i?"end":null,l=t[1]/2,0===i?-r-u[0]/2:t[0]+r+u[0]/2):l=e===ab?n===rb?(s=0!==i?"0.71em":"0em",c="end",o=-t[0]-r-qy(0,(u[1]-t[0])/2),0!==i?0:t[1]):n===ab?(s=0!==i?"0.71em":"0em",c=null,o=r+qy(0,(u[1]-t[0])/2),0!==i?0:t[1]):(s=0!==i?"-0.3em":"1em",c="middle",o=-t[0]/2,0!==i?-r-u[0]/2:t[1]+r+u[0]/2):n===rb?(s=0!==i?"0.71em":"0em",c="end",o=-r-qy(0,(u[1]-t[0])/2),0!==i?0:t[1]):n===ab?(s=0!==i?"0.71em":"0em",c=null,o=t[0]+r+qy(0,(u[1]-t[0])/2),0!==i?0:t[1]):(s=0!==i?"-0.3em":"1em",c="middle",o=t[0]/2,0!==i?-r-u[0]/2:t[1]+r+u[0]/2),{x:o,y:l,dy:s,anchor:c}}(u,d,g,y,f,o(t))});return{show:p,trimText:a,text:function(e,t){return m?m[o(t)]:n(e,o(t))},x:function(e,t){return x[o(t)].x},y:function(e,t){return x[o(t)].y},anchor:function(e,t){return x[o(t)].anchor},dy:function(e,t){return x[o(t)].dy},styles:b}}function Ou(e,t,n,r){var a=e.type,i=e[a],o="horizontal"===r.layout;return"triangleUp"===a||"triangleDown"===a?[0,0]:"lever"===a||"vernier"===a?[i.width,i.height]:"pentagon"===a?[i.size+2*i.bandWidth,t[o?1:0]+1.5*i.bandWidth+2]:[i.size,i.size]}function Au(e,t,n,r){r=r||[0,0];var a=M(e),i={x1:a.x+t[0]+n[0]+r[0],y1:a.y+t[1]+n[1]+r[1],width:a.width,height:a.height};return i.x2=i.x1+a.width,i.y2=i.y1+a.height,i}function Pu(e,t,n){var r=e,a=Dx.getOrient(r),i=xr(r),o=i.hAlign,l=i.floating,s=n.width,c=n.height,u=n.left,d=n.top,h=s-r.marginLeft-r.marginRight,f=c-r.marginTop-r.marginBottom,p=u+r.marginLeft,g=d+r.marginTop,v=t.maxWidth,y=t.maxHeight;return t={},l?(t.x1=Qy(r.x,s-v),t.y1=Qy(r.y,c-y),t.x2=Qy(t.x1+v,s),t.y2=Qy(t.y1+y,c)):(a===ib?(t.y1=g+f-y,t.x1=o===rb?p:o===ab?p+h-v:p+(h-v)/2):a===ob?(t.y1=g,t.x1=o===rb?p:o===ab?p+h-v:p+(h-v)/2):a===ab?(t.y1=g,t.x1=p+h-v):(t.y1=g,t.x1=p),t.x2=t.x1+v,t.y2=t.y1+y),t}function Tu(e,t){return"legend-"+e+"-"+t}function Eu(e){_classCallCheck(this,Eu),this.spec=e}function Lu(){return _classCallCheck(this,Lu),_possibleConstructorReturn(this,(Lu.__proto__||Object.getPrototypeOf(Lu)).apply(this,arguments))}function Mu(e){return function(t){switch(e){case vb:case mb:case yb:case bb:return"M"+.5*-t+" "+.5*t+" L"+.5*-t+" "+.2*-t+" L"+.25*-t+" "+.2*-t+" L"+.25*-t+" "+.5*t+"Z  M"+.125*-t+" "+.5*t+" L"+.125*-t+" "+.5*-t+" L"+.125*t+" "+.5*-t+" L"+.125*t+" "+.5*t+"Z  M"+.25*t+" "+.5*t+" L"+.25*t+" "+.1*t+" L"+.5*t+" "+.1*t+" L"+.5*t+" "+.5*t+"Z";case xb:case wb:return"M"+.5*-t+" "+.5*t+" L"+.5*-t+" "+.28*t+" L"+.24*-t+" "+.08*t+" L"+.13*-t+" "+.19*t+" L"+.07*t+" "+.14*-t+" L"+.23*t+" "+.012*t+" L"+.5*t+" "+.5*-t+" L"+.5*t+" "+.5*t+"Z";case Tb:case Ab:case Db:case Pb:return"M"+.045*t+" "+.045*-t+" L"+.5*t+" "+.045*-t+" A "+.455*t+" "+.455*t+" 0 0 0 "+.045*t+" "+.5*-t+"Z M"+.045*-t+" "+.045*t+" L"+.045*-t+" "+.41*-t+" A "+.455*t+" "+.455*t+" 1 1 0 "+.41*t+" "+.045*t+"Z";case Lb:return"M"+.5*-t+" "+.5*-t+" L "+.5*t+" "+.5*-t+" L "+.15*t+" "+.2*t+" L "+.15*t+" "+.5*t+" L "+.15*-t+" "+.5*t+" L "+.15*-t+" "+.2*t+"Z";case Mb:return"M0 "+.5*-t+" L"+.23*t+" "+.06*-t+" L"+.23*-t+" "+.06*-t+"Z M"+.5*-t+" "+.5*t+" L"+.5*t+" "+.5*t+" L"+.27*t+" 0 L"+.27*-t+" 0Z";case zb:return Bt("line")(t);case jb:return Bt("square")(t);case kb:case _b:case Sb:case Ob:case Rb:case Cb:default:return Bt(e)(t)}}}function zu(e,t,n,r,a,i,o){return"<path d='"+Mu(e.symbol)(i)+"' transform='translate("+t/2+","+n/2+")' style='"+("stroke:"+$C(e[a?a+"StrokeColor":"strokeColor"]||r)+";stroke-width:"+U(e[a?a+"StrokeWidth":"strokeWidth"],1)+";stroke-opacity:"+U(e[a?a+"StrokeOpacity":"strokeOpacity"],1)+";fill:"+(o||$C(e[a?a+"FillColor":"fillColor"]||r))+";fill-opacity:"+U(e[a?a+"FillOpacity":"fillOpacity"],1)+";")+"'></path>"}function Iu(e,t,n,r,a,i,o){var l,s=e&&e.gradients?Im(t.gradients||{},e.gradients,!0):t.gradients||{},c="",u=i.getPatternSvg();if("linear"===s.type||"radial"===s.type){var d=lt(s,[n,r],a,1),h={offset:o,chartObj:i},f=tb.get(tb.svg_gradients,"svgGradientFill",d,h),p=(new XMLSerializer).serializeToString(u.select("#"+f).node());c="<defs>"+(p=p.replace(/"/g,"'"))+"</defs>",l="url("+(Km.IE?"#":"%23")+f+")"}return{defs:c,fill:l}}function Du(){return _classCallCheck(this,Du),_possibleConstructorReturn(this,(Du.__proto__||Object.getPrototypeOf(Du)).apply(this,arguments))}function Ru(e,t){_classCallCheck(this,Ru);var n=t.area,r=t.order,a=t.getPosition,i=t.callbackArgs,o=void 0===i?[]:i;o=be(o),this.units=e.slice(0),this.area=n,this.getPosition=a,this.order=r,this.callbackArgs=o,this.areaToBeUpdated=[n]}function ju(e,t,n){var r=Nu(e);(n=be(n)).forEach(function(n){n[e]+=t,n[r]-=t})}function Hu(e){var t=xr(e),n=t.vAlign,r=t.hAlign,a=t.floating,i=t.layout;if(!a)if(i===cb){if(n===ob||n===ib)return n;if(n===nb)return r}else{if(r===rb||r===ab)return r;if(r===nb)return n}}function Bu(e,t){var n=Nu(e);return vg(t.map(function(e){return e[n]}))}function Nu(e){return e===rb||e===ab?ek:tk}function Fu(e,t,n){var r=xr(Vu(Se(e,function(e){return e.id===n}))),a=r.hAlign,i=r.vAlign;return rk[t===rb||t===ab?i:a]}function Vu(e){return e.config||e.meta.config}function Wu(e,t,n){var r=e[t],a=void 0;return r&&(k(a=Rm(window,r))||(a=function(){return Ie(r,n[t])})),a}function Yu(e){function t(t,n,r){var a=2<arguments.length&&void 0!==r?r:[1],i=t===qm?"g":Zm,o=e.container.selectAll(i+".legendarea").filter(function(e,t,n){return t===n.length-1});return o.style("display",vm),Et(i,".zc-legend-"+n,a,o)}function n(n,r,a){t(n===qm?"html":qm,r,[]);var i=t(n,r,a);return-1<r.indexOf("z")&&kt(i,[e.systemConf.canvas,Qm],n!==qm),i}var r=e.systemConf.legend,a=!e.dataObject.hasZaxis||er(e.chartTypes[0].value)||e.dataObject.isFlowChartCategory?[]:["z"],i=[],o=e.userdata.metadata.axes;!function(e){if(dx.isQuantileColorScale(e)){var t=e.userdata,n=e.systemConf.legend;e.dataset.getDataType("clr")===ox&&(t.legend=t.legend||{},t.legend.colorBand=t.legend.colorBand||{},t.legend.colorBand.ranges||(n.colorBand.ranges=t.legend.colorBand.ranges=dx.getCategories(e)));var r=n.colorBand.ranges;r&&r.length&&(t.legend.colorBand.ranges=n.colorBand.ranges=Xt(n,e,!0));var a=Zv.getScale(e,e.dataObject,null,null,null,e.dataset,"clr"),i=a.domain(),o=a.copy();o.range(dx.getProcessedColorRange(av(i.length),i,n,e));var l=e.axes.clr||{};l.scaleType="quantile",l.scale=a,l.indexScale=o,l.component=l.component||Gv.get(),e.axes.clr=l}else e.axes.clr={}}(e);var l=1;e.dataObject.categoryHierarchy&&(l=e.dataObject.hierarchical.pivotLayout.layers.groups.length);for(var s=0;s<l;s++){var c="clr-"+s,u=r;1<s&&r.color&&(r.color[0],r.color[s]=u=null!=r.color[s]?mergeJSON(r.color[s],r.color[0],!1):r.color[0]);var d={id:c,config:u,renderTo:n,order:s,encode:"clr",globalFont:e.systemConf.canvas,bound:Dr(u,e.chartarea),enabled:Cr(u,e),view:Dx.isContinousLegend(e)?"band":"list",effect:Xu(u,e),callbackArgs:[e],highlightManager:new oi(e,e.svg,{encode:"clr",config:u,order:s}),chartObj:e};i.push(d)}return a.forEach(function(t){o[t]&&o[t].forEach(function(a,o){var l=t+"-"+o,s=Se(e.scales,function(e){return e.id===l}),c=s.getConfig(),u=Gu(t,s),d=qC(t,u).domMode,h={id:l,scaleComponent:s,config:c,renderTo:n,view:u,encode:t,globalFont:e.systemConf.canvas,area:e.chartarea,bound:Dr(c,e.chartarea),format:function(e,t,n){var r=e.datatype,a=e[r],i=n===qm;return function(e){return Aa(a,e,r,t,"legend",i,"-")}}(s.schema.data.meta,e,d),enabled:Cr(c,e,t),effect:Xu(c,e),highlightManager:new oi(e,e.svg,{encode:t,config:c}),callbackArgs:[e]};r.singleLayout||i.push(h)})}),e.legend.isSingleLayout=r.singleLayout||i.length<=1,i[0].bound.adjust=!e.legend.isSingleLayout,i}function Uu(e){var t=e.encode,n=e.id,r=e.enabled,a=e.highlightManager,i=e.config,o=qC(t,e.view);if(o!==bm){var l=new o(e),s=e.renderTo(o.domMode,n,[i]);return s.style("display",r?vm:fm),r&&(l.create(),l.draw(s),s.style("filter",e.effect)),{enabled:r,element:s,component:l,meta:e,id:n,highlightManager:a}}}function Gu(e,t){var n=t.getConfig(),r=t.schema.data.dataType;if(n.type)return n.type;switch(e){case"z":case"size":return n.ranges||r===ox?"list":"nested";case"color":case"clr":return n.ranges||r===ox?"discrete":"continuous"}}function Xu(e,t){var n=!1!==e.useChartEffect&&t.filterEffectsID;return n?"url("+t.defsLocation+"#"+n+")":null}function Zu(e,t){e.get=function(t){return Se(e,function(e){return e.id===t})},e.behaviour=function(n,r,a){for(var i=arguments.length,o=Array(3<i?i-3:0),l=3;l<i;l++)o[l-3]=arguments[l];var s=e.get(n);if(s){var c=s.meta,u=c.view,d=function(e){return"z"===e?"size":"clr"===e?"color":null}(c.encode).toUpperCase()+"_"+u.toUpperCase()+"("+n+")",h=t.legendEvents.eventManager[d],f=function(e,t){var n=Ve(e.defaultBehaviour),r=void 0;return n.some(function(e){return r=Se(e,function(e){return function(e){return e.charAt(0).toLowerCase()+e.slice(1)}(e.name).replace(/\$(\d+)/,"")===t})}),r}(h,r),p=a.point?a:{point:a};f&&f.call.apply(f,[h,null,p].concat(o))}}}function qu(e,t){if(!t)return{};var n=t.element,r={element:n,show:t.enabled};if(t.enabled){var a=Hr(e.chartarea,e,null,n);r.x=a[0],r.y=a[1],r.width=a[2],r.height=a[3]}return r}function Qu(e){return e&&!("<"===e[0]||0===e.indexOf('url("data'))}function Ku(e,t,n,r,a,i,o){var l=i.fillOpacity,s=void 0===l?1:l,c=i.strokeOpacity,u=void 0===c?1:c,d=i.strokeWidth,h=i.padding,f=void 0===h?0:h,p=i.borderRadius,g=o?qy(e-2*f,1):10,v=o?qy(t-2*f,1):10,y=qy(e-2*f,1)/(g+2*U(d,1)),m=qy(t-2*f,1)/(v+2*U(d,1)),b=Bt(a||"square")(g,v,p),x=Dx.hexToRGB;return"<path d='"+b+"' transform='translate("+e/2+","+t/2+") scale("+y+","+m+")' style='stroke: "+x(n)+"; fill: "+x(r)+"; fill-opacity: "+s+"; stroke-width: "+U(d,1)+"px; stroke-opacity: "+u+";'></path>"}function $u(e,t,n){var r="<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='"+t+"' height='"+n+"'>";return r+=e,r+=" </svg>",'url("data:image/svg+xml;'+(Km.IE?"base64":"utf8")+","+(Km.IE?Pm(r):r)+'")'}function Ju(e,t,n,r,a,i){var o=~~(1.195*r-r),l=0;switch(e){case"top":l=o;break;case"bottom":l=t-n-o;break;default:"center"===e&&"wrap"!==i?l=(qy(t,n)-n)/2:Z(a)||"wrap"===i?l=(qy(r,n)-n)/2:n<t&&(l=(t-n)/2)}return l}function ed(){return _classCallCheck(this,ed),_possibleConstructorReturn(this,(ed.__proto__||Object.getPrototypeOf(ed)).apply(this,arguments))}function td(e){_classCallCheck(this,td),this.chart=e,this.eventManager={},this.reverseEventManager={},this.init()}function nd(e,t,n,r){t[e]=t[e]||new pk(n);var a=t[e];return a.init(),a.options=r,a}function rd(e,t,n){t&&(e.dataFinder(n),e.defaultBehaviour=t,e.customBehaviour=bm)}function ad(e){function t(e,t){return function(){if(e)return V.apply(void 0,[b,this,e,d].concat(_toConsumableArray(f)))||"Show less..";var n=t?V.apply(void 0,[b,this,e,d].concat(_toConsumableArray(f))):null,r=V.apply(void 0,[x,d].concat(_toConsumableArray(f)));return n||r||d+" more..."}}var n=e.config,r=e.globalFont,a=e.margin,i=void 0===a?0:a,o=e.bound,l=e.height,s=e.padding,c=void 0===s?3:s,u=e.target,d=e.remainingCount,h=e.callbackArgs,f=void 0===h?[]:h,p=e.expanded,g=void 0!==p&&p,v=e.isHorizontal,y=n.show,m=n.textAlign,b=n.ontoggle,x=n.text,w=n.keepAligned&&v,C=_extends({cursor:gm,display:w?"inline-block":"block",overflow:"hidden",padding:c+"px",margin:function(){return $(V(i))},"text-overflow":"ellipsis","white-space":"nowrap","text-align":w?null:m,"max-width":o.maxWidth+"px","line-height":w&&l?function(){return l()+"px"}:null},kt(null,[n,r,Qm],!0));return{show:y=y&&0<d,styles:C,html:t,target:u,expanded:g}}function id(){return _classCallCheck(this,id),_possibleConstructorReturn(this,(id.__proto__||Object.getPrototypeOf(id)).apply(this,arguments))}function od(e,t,n,r,a,i,o,l,s,c,u,d,h,f,p,g){var v=e.systemConf,y=v.legend,m=[y,v.canvas,Qm],b=y.expandable||{},x=!0===b.show,w=y.title.keepAligned&&l,C=!!e.renderer.length;return{create:function(a){if(x){r.style("overflow","hidden");var o=mt(t,"div",[1],".","class","expandable").styles({color:b.fontColor,"font-size":zm.getVal(b.fontSize)+"px","font-family":b.fontFamily||Y(m,"fontFamily"),"text-align":b.textAlign,cursor:gm,display:"block",padding:y.itemMargin+"px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap","max-width":i+"px","margin-left":w?s+hm:0}),h=e.legend.expanded;return h?C&&h&&o.html(function(){return V(b.ontoggle,this,h,e)||"Show less.."}):o.html(V(b.text,a,e)||a+" more..."),function(t,a){a.on("click",function(){if(!e.legend.allRendered&&0<t){e.cache.data={},e.cache.search={},e.legend.allRendered=!0;var a=c(n);if(u(a),e.legend.isSingleLayout?d(f):Xv.align(chartObj.legends,chartObj,p,g),!l&&f.node().offsetWidth>e.legendarea.width){var i=Se(chartObj.legends,function(e){return"clr-0"===e.id});chartObj.legendarea=qu(chartObj,i),function(){e.legend.isSingleLayout?(e.updatePlotArea(),Ir(e)):(e.chartarea=p,e.plotarea=g),e.isAxisCategory?Gv.render(e,e.chartWidth,e.chartHeight,!0):e.dataObject.isPolarAxisCategory&&Gv.polar.render(e,"x"),e.drawThreshold(!0),e.drawPlotareaClippath(),e.updatePlotareaProp(),e.plot.renderer.draw(!0),(e.isAxisCategory||e.dataObject.isPolarAxisCategory)&&e.positionEventTrackerElement()}()}}var o=e.legend.expanded=!e.legend.expanded,s=V(b.ontoggle,this,o,e);Z(s)&&(s=""+s),o?(this.innerHTML=s||"Show less..",r.style("overflow-y","auto")):(r.node().scrollTop=0,this.innerHTML=s||V(b.text,t,e)||t+" more...",r.style("overflow-y","hidden"))})}(a,o),o}t.select(".expandable").empty()||(t.selectAll(".expandable").remove(),r.style("overflow-y","hidden"),r.style("overflow-x","hidden"))},remove:function(){t.select(".expandable").empty()||(t.selectAll(".expandable").remove(),r.style("overflow-y","hidden"),r.style("overflow-x","hidden"))}}}function ld(){return _classCallCheck(this,ld),_possibleConstructorReturn(this,(ld.__proto__||Object.getPrototypeOf(ld)).apply(this,arguments))}function sd(e,t,n,r){this.associateBehaviours(r,this.selectionManager)}function cd(){var e=this.options,t=e.config,n=e.expandableObj,r=t.list.expandable,a=n.expanded();n.expanded(!a),r._expanded=!a}function ud(){var e=this.chart,t=this.options,n=t.legendInstance,r=t.expandableObj,a=n.element,i=r.expanded();if(!r.allRendered&&i){var o=r.spec.isHorizontal?"height":"width",l=Lt(a),s=l?M(a):ze(a);!function(e,t,n){var r=t.spec,a=r.renderList,i=r.setLegendDimension,o=r.alignLegend;e.styles({left:null,top:null}),V(a),V(i),n.chartarea=Dm(n._chartarea),n.plotarea=Dm(n._plotarea),n.legend.isSingleLayout?V(o,e):Xv.align(n.legends,n,n.chartarea,n.plotarea)}(a,r,e);var c=l?M(a):ze(a);if(1<Ky(c[o]-s[o])){var u=e.legends.get("clr-0");e.legendarea=qu(e,u),function(e){e.legend.isSingleLayout&&(e.updatePlotArea(),Ir(e)),e.isAxisCategory?Gv.render(e,e.chartWidth,e.chartHeight,!0):e.dataObject.isPolarAxisCategory&&Gv.polar.render(e,"x"),e.drawThreshold(!0),e.drawPlotareaClippath(),e.updatePlotareaProp(),e.plot.renderer.draw(!0),(e.isAxisCategory||e.dataObject.isPolarAxisCategory)&&e.positionEventTrackerElement()}(e)}r.allRendered=!0}}function dd(){var e=this.options,t=e.expandableObj,n=e.trackerElement,r=e.expandableParser,a=t.expanded(),i=t.spec.isHorizontal,o=i?"x":"y",l=i?"scrollLeft":"scrollTop",s=r.html,c=(0,t.spec.target)();n.html(s(a,!0)),a?c.style("overflow-"+o,"auto"):(c.node()[l]=0,c.style("overflow-"+o,"hidden"))}function hd(){var e=this.chart,t=this.options.legendInstance;e.legendEvents.initiateBehaviour("SIZE_LIST",t)}function fd(e,t,n,r,a){var i=e.domain(),o=void 0;return t===lx?(vd(o=Al(o=(o=e.ticks(n)).length<n?e.ticks(2*n):o,n),i),o):("integer"===r?o=function(e,t){var n=e.length,r=t[t.length-1];return 1<n&&t[t.length-1]-e[n-1]<(e[n-1]-e[n-2])/2?e[n-1]=r:e.push(r),e}(o=Bl(i,qy(n-1,1)),i):vd(o=jl(i,n),i),o.map(function(e){return+e.toFixed(12)}).sort(a?Yg:Wg))}function pd(e,t,n){var r=gd(e,t,n);if(!r){var a=t.range(),i=t.domain(),o=i[0]===i[i.length-1]?1:3;r=qy(o,Gy((a[a.length-1]-a[0])/20))}return 1<r?r+.1:r}function gd(e,t,n){var r=e[n],a=(r.axis||r).tickCount;if(a)return V(a,t,e)}function vd(e,t){e[0]=t[0],e[e.length-1]=t[t.length-1]}function yd(){return _classCallCheck(this,yd),_possibleConstructorReturn(this,(yd.__proto__||Object.getPrototypeOf(yd)).apply(this,arguments))}function md(e,t,n){return function(r){var a=t.width?t.width(r):t(r),i=t.height?t.height(r):t(r),o=function(e,t,n){var r=n.fillColor,a=void 0===r?pm:r,i=n.strokeColor,o=void 0===i?pm:i,l=n.shape,s=void 0===l?"square":l;return Ku(e,t,o,a,s,n,!0)}(a,i,e);return n?$u(o,a,i):o}}function bd(e,t){var n=e.fillColor,r=void 0===n?pm:n,a=e.strokeColor,i=void 0===a?pm:a,o=e.strokeWidth,l=e.borderRadius,s=e.shape,c=void 0===s?"square":s,u=void 0,d=void 0;return l="square"!==c&&"rect"!==c?(d=md(e,t,!0),u=fm,vm):(d=r,u=function(e,t){return Hm(o,1)+"px solid "+V(i,e,t)},Z(l)?l+"px":vm),_defineProperty({background:d,border:u},"border-radius",l)}function xd(e,t){return fg(e.nodes()[t])}function wd(e,t){var n=t.backgroundColor,r=t.borderRadius;e.styles({"background-color":n,"border-radius":Z(r)?r+"px":null})}function Cd(e,t,n,r){kt(e,[r,t.list.label,n,Qm],!0)}function kd(e,t,n,r){r?e.styles({background:function(e){var a=t.width?t.width(e):t(e),i=t.height?t.height(e):t(e);return $u(md(n,t)(e)+(r?md(r,t)(e):""),a,i)},border:"none","border-radius":null}):e.styles(bd(n,t))}function _d(e,t){var n=t.config,r=t.ticks,a=n.reversed,i=Hm(e.point,e);return a?r.length-1-i:i}function Sd(){return _classCallCheck(this,Sd),_possibleConstructorReturn(this,(Sd.__proto__||Object.getPrototypeOf(Sd)).apply(this,arguments))}function Od(e){_classCallCheck(this,Od),this.spec=e}function Ad(e){_classCallCheck(this,Ad),this.spec=e}function Pd(e,t,n,r,a){var i=function(e,t,n){return e?function(t){return[e(t),e(t)]}:function(){return Dx.getFilterBoxSize(t,n)}}(r,e,a),o=function(e,t,n){var r=e.width,a=e.height,i=e.overflow,o=void 0===i?"hidden":i;if(n.layout!==cb&&t.keepAligned||"visible"!==o)return a||r?o:void 0}(e,t,n),l=e.width,s=e.height,c=e.shape,u=void 0,d=void 0,h=void 0,f=void 0;return o&&(u=l,d=s),"hidden"===o&&(h=l,f=s),{width:function(e){return h||i(e)[0]},height:"half-circle"===c?function(e){return(f||i(e)[1])/2}:function(e){return f||i(e)[1]},totalWidth:u,totalHeight:d,overflow:o,size:i}}function Td(e){return!1!==e.show}function Ed(e){_classCallCheck(this,Ed),this.spec=e}function Ld(e){_classCallCheck(this,Ld),this.spec=e}function Md(){return{}}function zd(e,t){_classCallCheck(this,zd);var n=_possibleConstructorReturn(this,(zd.__proto__||Object.getPrototypeOf(zd)).call(this,e));return n.viewScaleComponent=t||Md,n}function Id(e,t){return e||t?"inline-block":vm}function Dd(e,t){return e.getView(t).encode.element}function Rd(e){var t=e.spec,n=t.config,r=t.bound,a=n.border,i=n.title,o=n.list.expandable,l=void 0===o?{}:o,s=a&&a.show?a.size:0,c=r.maxWidth,u=r.maxHeight,d=xr(n).layout===cb;if(l.show){var h=Et("div",".temp_list_view",[1],pg("div.__baseZC_Container__")),f=c-2*s,p=u-2*s,g=0,v=0,y=0,m=i.show,b=l._expanded;l._expanded=!1,d&&!i.keepAligned&&(i.show=!1);for(var x=_extends({},t,{data:e.viewScaleComponent().ticks}),w=new zk(x,e.viewScaleComponent);(d?v<f:y<p)&&++g<=t.data.length;){x.visibleItemCount=g,w.create(),w.draw(h);var C=ze(h);d?v=C.width:y=C.height}return(d?f<=v:p<=y)&&g--,i.show=m,l._expanded=b,h.remove(),qy(g,1)}}function jd(){return _classCallCheck(this,jd),_possibleConstructorReturn(this,(jd.__proto__||Object.getPrototypeOf(jd)).apply(this,arguments))}function Hd(e,t,n,r){var a=Hv(),i=Tr(this.tracker.node(),a),o=this.getData(r,i,[e,t]);this.associateBehaviours(r,o,i,a)}function Bd(e,t,n,r){var a=this.options,i=a.config,o=a.ticks;return i.reversed?o.length-1-r:r}function Nd(e,t){var n=this.chart,r=this.options,a=r.config,i=r.legendInstance.meta.scaleComponent.getScale(),o=n.dataset.getZ(e);return function(e,t){var n=t.config,r=t.dataType,a=n.ranges;if(r===ox)return(te(a[0])?a.map(function(e){return e[0]}):a).indexOf(e);if(a&&a.length)return dn(e,a);var i=[e,e];return i.data=e,i}(o=vn(o,{config:a,scale:i,columnKey:n.dataset.getColumnIdx("z")}),r)}function Fd(e,t){var n=this.options,r=this.targetEvent,a=n.trackerElement,i=n.config.events,o=void 0===i?{}:i,l=r.srcElement||r.target,s=fg(l).classed(zx)?fg(l.parentNode).attr("cursor"):o.cursor||gm;a.style("cursor",s)}function Vd(){this.options.trackerElement.style("cursor",null)}function Wd(e,t,n){var r=this.chart,a=this.options,i=this.previousHighlightedItem,o=a.config,l=a.highlightManager,s=o.ranges,c=t.point,u=r.seriesdata;if((n||re(i)!==re(c))&&(!s||!s[c].disabled)){if(r.highlightContext=null,Z(i)&&re(i)!==re(c)){var d=i;this.previousHighlightedItem=null,u.forEach(function(e,t){l.reset(o,t,d,u.length-1===t)})}u.forEach(function(e,t){l.highlightSelectedSeries(o,t,c),l.highlightUnselectedSeries(o,t,c)}),this.previousHighlightedItem=c}}function Yd(e,t){var n=this.chart,r=this.options,a=this.previousHighlightedItem,i=r.config,o=r.highlightManager,l=n.seriesdata;l.forEach(function(e,t){o.reset(i,t,a,l.length-1===t)}),this.previousHighlightedItem=null}function Ud(e,t){var n=this.options,r=n.trackerElement,a=n.config,i=n.globalFont,o=n.boxSize,l=a.ranges,s=fn(a),c=xd(r,_d(t,n));if(!(Be(s)||l&&l[t.point].disabled)){var u=a.list.marker,d=s.label,h=s.marker,f=Be(h)?h:Im(h,u),p=c.selectAll(".zc-legend-legendlabel, .zc-legend-legendlabel *"),g=c.selectAll(".zc-legend-legendfilterbox");wd(c,s),Cd(p,a,i,d),kd(g,o,u,f)}}function Gd(e,t,n){var r=this.options,a=r.trackerElement,i=r.config,o=r.globalFont,l=r.boxSize,s=i.ranges,c=fn(i),u=xd(a,_d(t,r));if(!Be(c)&&(n||!s||!s[t.point].disabled)){var d=i.list.marker,h=u.selectAll(".zc-legend-legendlabel"),f=u.selectAll(".zc-legend-legendfilterbox");wd(u,i),Cd(h,i,o),kd(f,l,d)}}function Xd(e,t){var n=this.chart,r=this.options,a=r.config,i=r.dataType,o=a.ranges,l=a.filter,s=o[t.point];if(l.enabled&&(!function(e){return e.filter(function(e){return e.disabled}).length==e.length-1}(o)||s.disabled)){s.disabled=!s.disabled;var c=o.filter(function(e){return!e.disabled});i===ox&&(c=c.map(function(e){return e[0]})),a.filter.range=c,n.plot.renderer.draw(!0)}}function Zd(e,t){var n=this,r=n.options.config.ranges,a=t.point,i=Hv();r[a].disabled?(Gd.call.apply(Gd,[n].concat(Array.prototype.slice.call(arguments),[!0])),function(e,t){var n=this.options,r=n.trackerElement,a=n.config,i=n.globalFont,o=n.boxSize,l=pn(a),s=a.list.marker,c=l.label,u=l.marker,d=xd(r,_d(t,n));if(Be(c)||Cd(d.selectAll(".zc-legend-legendlabel, .zc-legend-legendlabel *"),a,i,c),!Be(u)){var h=Im(u,s);kd(d.selectAll(".zc-legend-legendfilterbox"),o,s,h)}}.apply(n,arguments)):i&&(i.touches?Gd.call.apply(Gd,[n].concat(Array.prototype.slice.call(arguments),[!0])):(Ud.apply(n,arguments),Wd.call.apply(Wd,[n].concat(Array.prototype.slice.call(arguments),[!0]))))}function qd(e,t){this.chart.cache.search={}}function Qd(e){var t=e.config,n=e.bound,r=e.scale,a=void 0===r?function(e){return e}:r,i=Kd(n,a,t.hAlign),o=$d(n,a,t.vAlign);return{selector:"."+jk,mark:[{mark:"point",data:e.data,config:_extends({},t,{shape:t.shape,size:a,transform:function(e){return"translate("+i(e)+","+o(e)+")"}})}]}}function Kd(e,t,n){var r=e.width;switch(n){case rb:return function(e){return t(e)/2};case ab:return function(e){return r-t(e)/2};default:return function(){return r/2}}}function $d(e,t,n){var r=e.height;switch(n){case ob:return function(e){return t(e)/2};case ib:return function(e){return r-t(e)/2};default:return function(){return r/2}}}function Jd(){return _classCallCheck(this,Jd),_possibleConstructorReturn(this,(Jd.__proto__||Object.getPrototypeOf(Jd)).apply(this,arguments))}function eh(e,t,n,r,a){function i(e,t){fg(e).style("display","none"),fg(s[t]).style("display","none"),o[t]={x1:0,y1:0,x2:0,y2:0}}if(!e.empty()){var o=void 0,l=e.nodes(),s=t.nodes(),c=function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{left:0,right:0,bottom:0,top:0},a=e.x,i=void 0===a?0:a,o=e.y,l=void 0===o?0:o,s=e.maxWidth,c=e.maxHeight,u=l+r.top,d=u+c-r.bottom,h=i+r.left,f=h+s-r.right;switch(n){case"end":var p=s-t.width;h-=p,f-=p;break;case"middle":var g=(s-t.width)/2;h-=g,f-=g}return{top:u,right:f,bottom:d,left:h}}(n,r,a.attrs["text-anchor"]),u=a.translateFunction;l.splice(1,0,l.splice(l.length-1,1)[0]),s.splice(1,0,s.splice(s.length-1,1)[0]),o=function(e,t){return e.map(function(e){return function(e,t){var n=M(e),r=th(e,t),a={x1:n.x+r[0],y1:n.y+r[1],width:n.width,height:n.height};return a.x2=a.x1+a.width,a.y2=a.y1+a.height,a}(e,t)})}(l,u),function(e,t,n,r){var a={left:0,right:0,bottom:0,top:0};e.forEach(function(e,i){var o=M(e),l=th(e,r),s={left:o.x+l[0],top:o.y+l[1],width:o.width,height:o.height};bt(e,e.textContent,s,t,ib,"..",a),".."===e.textContent&&fg(e).text(""),e.textContent||n(e,i)})}(l,c,i,u),function(e,t,n){e.forEach(function(e,r){for(var a=r-1,i=!1;0<=a&&!i;a--)(i=Un(t[a],t[r]))&&n(e,r)})}(l,o,i)}}function th(e,t){return t?t(e):Or(e).translate}function nh(e,t,n,r,a){var i=oh(r),o=i.hAlign,l=i.vAlign,s=e.strokeWidth,c=e.dashStyle,u=e.lineCap,d=e.size,h=void 0===d?3:d,f={fillColor:"none",strokeColor:e.color,strokeWidth:s,dashStyle:c,lineCap:u,display:null},p=function(e,t,n,r,a,i){return function(o){var l=ih(e,t,n,r,a,i),s=l.startX,c=l.startY,u=l.endX,d=l.endY;return"M"+s(o)+" "+c(o)+"L"+u(o)+" "+d(o)}}(t,n,o,l,h,a);return{styles:f,attrs:{d:function(e){return p(e)}}}}function rh(e,t,n,r,a,i,o,l){var s=oh(r),c=s.hAlign,u=s.vAlign,d=void 0,h=void 0,f=void 0,p=void 0,g=null,v=Hm(e.margin,2),y=u===nb;if(l){var m=ih(t,n,c,u,function(){var e=N(arguments).slice(0),t={top:0,right:0,bottom:0,left:0};return e.map(function(e){var n=xe(e);for(var r in t)t[r]+=n[r]}),Ve(t).join(" ")}(Hm(i.size,3),v),o),b=m.endX,x=m.endY;f=function(e){return"translate("+b(e)+","+x(e)+")"},p=y?"1em":"0.3em",g=y?fb:null}else{var w=ah(t,n,c,u,v,o);d=w[0],h=w[1],f=function(e){return"translate("+d(e)+","+h(e)+")"},p=function(e){switch(e){case ob:return"1em";case ib:case Bk:return"-0.3em";default:return"0.3em"}}(u),g=function(e){switch(e){case rb:return null;case ab:return pb;default:return fb}}(c)}return{text:a,attrs:{transform:f,dy:p,"text-anchor":g},styles:_extends({},kt(null,[e]),{display:null})}}function ah(e,t,n,r,a,i,o){var l=function(e,t,n,r){var a=xe(3<arguments.length&&void 0!==r?r:0),i=e.width;switch(n){case rb:return function(e){return t(e)+a.left};case ab:return function(e){return i-t(e)-a.right};default:return function(){return i/2}}}(e,t,n,a),s=function(e,t,n,r){var a=xe(3<arguments.length&&void 0!==r?r:0),i=e.height;switch(n){case ob:return function(e){return t(e)+a.top};case ib:return function(e){return i-t(e)-a.bottom};case Bk:return function(e){return(i-t(e))/2-a.bottom};default:return function(){return i/2}}}(e,t,r,a),c=l,u=s;return"square"===i?o&&(r===nb?u=function(e){return s(e)+t(e)/2}:n===nb?c=function(e){return l(e)+t(e)/2}:n===ab&&(c=function(e){return l(e)+t(e)})):r!==nb&&(n===rb?c=function(e){return l(e)-t(e)/2}:n===ab&&(c=function(e){return l(e)+t(e)/2})),[c,u]}function ih(e,t,n,r,a,i){a=xe(a);var o=ah(e,t,n,r,0,i,!0),l=o[0],s=o[1],c=function(){return e.width+a.left},u=function(){return e.height+a.top};return r===nb?c=l:u=s,{startX:l,startY:s,endX:c,endY:u}}function oh(e){var t=e.hAlign,n=e.vAlign;return n===nb&&t===nb&&(n=Bk),{vAlign:n,hAlign:t}}function lh(e){_classCallCheck(this,lh),this.spec=e}function sh(e){return e.tickOrient===db}function ch(){return _classCallCheck(this,ch),_possibleConstructorReturn(this,(ch.__proto__||Object.getPrototypeOf(ch)).apply(this,arguments))}function uh(e,t,n,r){var a=Hv(),i=Tr(a.srcElement||a.target,a),o=this.getData(r,i,[e,t]);this.associateBehaviours(r,o,i,a)}function dh(e,t){var n=_slicedToArray(t,2),r=n[0],a=n[1],i=e.map(function(e){return gx.dist({x:e[0],y:e[1]},{x:r,y:a})});return gg(i)||0}function hh(e,t,n,r){var a=this.options,i=a.ticks,o=a.config,l=a.scale,s=a.viewBound,c=a.polygonPoints,u=o.ranges,d=o.nested.marker,h=d.hAlign,f=d.vAlign,p=d.shape,g=void 0===p?"circle":p,v=fn(o),y=qy(Hm(v.triggerOffset,5),.1),m=i.length-1-r;if(u&&u.length)return m;var b=i[m],x=Hm(i[m-1],l.domain()[0]),w=Hk.x(s,l,h),C=Hk.y(s,l,f),k=[w(x),C(x)],_=[w(b),C(b)],S=[_[0]+e[0],_[1]+e[1]],O=void 0,A=void 0;if("circle"===g)O=Vn([].concat(k,[l(x)/2]),S),A=Vn([].concat(_,[l(b)/2]),S);else{var P=c[r+1]||[],T=c[r];O=dh(P.map(function(e){return[e[0]+k[0],e[1]+k[1]]}),S),A=dh(T.map(function(e){return[e[0]+_[0],e[1]+_[1]]}),S)}return wu(l(kg().domain([0,O+A]).range([x,b])(O)),l,{triggerOffset:y,round:!0})}function fh(e,t){var n=this.options,r=n.config,a=n.highlightElement,i=n.viewScale,o=n.viewBound,l=n.dataType,s=r.ranges,c=r.nested,u=fn(r),d=c.marker,h=u.marker,f=t.point;if(!Be(h)){a.style("opacity",null);var p={bound:o,data:function(e,t,n){return n===ox?[t[e][0]]:t&&t.length?[t[e]]:Z(e.data)?[e.data]:[]}(f,s,l),scale:i,config:Im(h,d)},g=new Hk(p);g.create(),g.draw(a)}}function ph(){this.options.highlightElement.style("opacity",0)}function gh(e,t,n){this.options.tooltip.hide(n)}function vh(){gh.call.apply(gh,[this].concat(Array.prototype.slice.call(arguments),[!0]))}function yh(e,t){var n=this.options,r=n.tooltip,a=n.format,i=n.config,o=n.highlightElement,l=n.dataType,s=i.ranges,c=t.point,u=l===ox?s[c][0]:s&&s.length?s[c]:c[0],d=o.selectAll("g."+jk).selectAll(Um),h=Lo(d,r.config,void 0,Or(d).translate);r.show(a(u)),r.positionTooltip(h)}function mh(e,t,n,r,a){function i(t){return e(t)+s/2}var o=n.hAlign,l=n.vAlign,s=e.bandwidth?e.bandwidth():0,c=t.bandwidth?t.bandwidth():0,u=r.width,d=r.height,h=void 0,f=void 0;return a.layout===cb?(h=function(e){return t(e)+c/2},f=l===ob?function(e){return i(e)/2}:l===ib?function(e){return d-i(e)/2}:function(e){return d/2}):(f=function(e){return t(e)+c/2},h=o===rb?function(e){return i(e)/2}:o===ab?function(e){return u-i(e)/2}:function(e){return u/2}),{x:h,y:f,r:i}}function bh(e,t,n){var r=e.ranges,a=e.reversed,i=e.config,o=e.sizeScale,l=e.datatype,s=e.singleDomainContinuous,c=i.filter.range,u=void 0;if(c&&(t=t||(a?R(c).reverse():c)),s)return o.domain();if(t){if(l===ox){var d=[t[0],t[t.length-1]];u=a?R(d).reverse():d}else u=r&&r.length?cu(R(t).sort(Wg),r):n?R(t).reverse():t;return r&&r.length&&a&&(u=R(u).reverse()),u}var h=o.domain(),f=[h[0],h[h.length-1]];return a?R(f).reverse():f}function xh(e){_classCallCheck(this,xh),this.spec=e}function wh(){return _classCallCheck(this,wh),_possibleConstructorReturn(this,(wh.__proto__||Object.getPrototypeOf(wh)).apply(this,arguments))}function Ch(){return _classCallCheck(this,Ch),_possibleConstructorReturn(this,(Ch.__proto__||Object.getPrototypeOf(Ch)).apply(this,arguments))}function kh(e){_classCallCheck(this,kh),this.spec=e}function _h(e){return e.selectAll("text.ticklabel")}function Sh(){_classCallCheck(this,Sh);var e=_possibleConstructorReturn(this,(Sh.__proto__||Object.getPrototypeOf(Sh)).apply(this,arguments));return e.brushOptions=e.getBrushOptions(),e}function Oh(e){for(var t="translate("+e.join(" ")+")",n=arguments.length,r=Array(1<n?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];pe(r,function(e){return e.attr("transform",t)})}function Ah(e,t){return e.getView(t).encode.element}function Ph(e,t){var n=t.type,r=t.selection,a=this.getData(e,n,r);this.associateBehaviours(e,n,a,r,t)}function Th(e,t,n,r){var a=e.instance.options.component.brushOptions,i=a.reversed,o=nu(a,n);return i?R(o).reverse():o}function Eh(e){var t=e.instance,n=t.options.component,r=n.spec.globalFont,a=n.brushOptions,i=a.config,o=a.reversed,l=a.handles,s=pn(i).tooltip,c=e.dataFinder.brush,u=Dx.getOrient(i);return new Mo(s,t,u,function(n){var r=c(e,null,t.getSelection());return su(function(e,t,n){var r,a=e.ranges,i=e.reversed,o=e.config,l=e.sizeScale,s=e.datatype,c=e.singleDomainContinuous;if(t=t||o.filter.range,c)return l.domain();if(t){if(s===ox){var u=[t[0],t[t.length-1]];r=i?R(u).reverse():u}else r=a&&a.length?cu(R(t).sort(Wg),a):n?R(t).reverse():t;return r}}(a,r,o),n,a)},null,null,r,{translate:function(e){return Or(e).translate},boxElement:function(e){return e.selectAll("path")},isHorizontal:l?void 0:function(e){return e===ob||e===ib}})}function Lh(e,t,n,r){var a=e.type;if(a){var i=Hm(e[a].shadow,e.shadow);if(i){var o=Hm(t[0]._effectElementIndex,0)+1;n.select("path:nth-child("+o+")").attr("filter",zt(i,r))}}}function Mh(e,t,n,r,a){var i=e.instance.tooltip;i&&i.hide(a)}function zh(e,t,n){var r=this.options.highlightElement;n?r.style("opacity",0):r.transition().style("opacity",0)}function Ih(e,t){var n=e.instance,r=n.customHandles,a=this.chart;if(r){var i=n.options.component.brushOptions,o=i.isHorizontal;i.handles&&r.each(function(e,t){var r=fg(this).selectAll(Um+"."+Ix).nodes();if(r[1]){var i=function(e,t,n){var r=e.x,a=e.y,i=e.width,o=e.height,l=Ug().curve(wg("linear-closed")),s=void 0;return s=n?0===t?[[0,a-1],[r+i+1,a-1],[r+i+1,a+o+1],[0,a+o+1]]:[[r-1,a-1],[0,a-1],[0,a+o+1],[r-1,a+o+1]]:0===t?[[r-1,0],[r+i+1,0],[r+i+1,a+o+1],[r-1,a+o+1]]:[[r-1,a-1],[r+i+1,a-1],[r+i+1,0],[r-1,0]],l(s)}(M(r[0]),t,o),l=ww.GET_CLIP(n,[0,0],a,"size_slider_brush_handle_"+t,{desc:i});fg(r[1]).attr("clip-path",l).style("opacity",0).classed(zx,!0)}})}}function Dh(e,t,n,r){var a=Hv(),i=Tr(this.tracker.node(),a),o=this.getData(r,i);this.associateBehaviours(r,o,i,a)}function Rh(e,t){var n=this.options,r=this.chart,a=n.config,i=n.dimension,o=n.highlightElement,l=n.type,s=n.markerBound,c=n.handles,u=a.slider.marker,d=fn(a),h=pn(a),f=d.type,p=function(e,t){var n=t.dataType,r=t.ranges;return n===ox?r[e][0]:r&&r.length?r[e]:e.data}(t.point,n),g=void 0;if(ii(o),o.style("opacity",null),"inherit"===f)if(h.type)g=jh(h,n,p);else{var v=c.shape,y=c.position;(g=kw("marker-"+u.shape,u,l,i)).shape=[[v(s.width(p),s.height(p))]],g.style.transform=Hh(p,y(p),n)}else f&&(g=jh(d,n,p));if(g){Pw.ADD_HANDLE(g,o);var m=o.selectAll("g.handle--custom");"inherit"===f?h.type&&Lh(h,[g],m,r):f&&Lh(d,[g],m,r)}}function jh(e,t,n){function r(e){var r=e.transform,a=r.indexOf("rotate"),i=-1<a?" "+r.substr(a):"";e.transform=Hh(n,s,t)+i}var a=t.dimension,i=t.type,o=e.type,l=e[o],s=_w(i,o,a,l.size),c=kw(o,l,i,a);return te(c.style)?c.style.forEach(r):r(c.style),c}function Hh(e,t,n){var r=n.isHorizontal,a=n.brushScale,i=a.bandwidth?a.bandwidth():0,o=a(e)+i/2,l=[];return r?(l[0]=o,l[1]=t[1]):(l[0]=t[0],l[1]=o),Ar(l)}function Bh(){zh.call.apply(zh,[this].concat(Array.prototype.slice.call(arguments),[!0]))}function Nh(e,t){var n=this.options,r=n.tooltip,a=n.highlightElement,i=n.format,o=n.ranges,l=n.isHorizontal,s=n.handles,c=n.dataType,u=t.point,d=c===ox?o[u][0]:o&&o.length?o[u]:u[0];r.show(i(d));var h,f=a.selectAll("g.handle--custom").selectAll(Um),p=f.node(),g=p?Or(p).translate:[0,0];h=Lo(f,r.config,s?void 0:l,g),r.positionTooltip(h)}function Fh(e){var t=e.targetEvent.relatedTarget;if(t)return fg(t).classed(Ix)}function Vh(e,t,n,r,a,i){this.value=i,this.depth=r,this.depthbyrow=t,this.depthbycolumn=n,this.childIndexbyrow=0,this.childIndexbycolumn=0,this.tag=a,this.data=e.data,this.node=e}function Wh(e,t){var n,r,a,i=e,o=[i];do for(n=o;i=n.pop();)if(t(i),r=i.children)for(a=r.length-1;0<=a;a--)n.push(r[a]);while(o.length)}function Yh(e,t,n){var r,a,i,o=e,l=[o];do for(r=l;o=r.pop();)if(t(o),a=o.children)for(i=a.length-1;0<=i;i--)n(o,a[i]),r.push(a[i]);while(l.length)}function Uh(){this.datatype="ordinal",this.nodes=[],this.inodes=[],this.domain=[],this.range=null,this.index=-1,this.list=new Ni}function Gh(){this.datatype="numeric",this.nodes=new Array(0),this.domain=new Array(0),this.range=[],this.entries=Dg(),this.keys=[],this.index=0,this.count=0,this.list=new Ni}function Xh(){this.list=new Ni,this.domain=new Array(0),this.nodes=new Array(0),this.prevNodesCount=null}function Zh(){this.data=[],this.index=-1,this.row=-1,this.column=-1}function qh(e,t,n,r){this.value=e,this.depth=t,this.depthbyrow=n,this.depthbycolumn=r,this.datatype="numeric",this.data=[],this.index=0,this.count=0,this.name="Leaf"}function Qh(e,t){this.value=t,this.children=new Array(0),this.layerNames=new Ni,this.leafNames=new Ni,this.list=new Ni,this.node=e}function Kh(e){return new Qh(e,e.value)}function $h(e){var t=e.tag,n=e.getDepth(),r="row"==t?"levelByRow":"levelByColumn",a="row"==t?"levelByColumn":"levelByRow",i=void 0;(i=this.branches[n])||(i=this.branches[n]=new Uh)&&this.count++;var o="layer"==e.mainTag?"":e.point||e.value,l=i.list.indexOf(o);if(0==n&&Z(l))e.index=l;else{i.list.add(e.value),i.index++,i.domain.push(o||""),i.nodes.push(e);var s=Kh(e);!function(e,t){var n=e.tag;"row"==n?e.firstRow&&e.lastRow:e.firstColumn&&e.lastColumn,"row"==n?e.firstRow:e.firstColumn,("row"==n?e.lastRow:e.lastColumn)||(t.children=e.children)}(e,s),i.inodes.push(s),e.index=i.index}e.level=Hm(e.parent&&e.parent.level,"")+e.index+"_",e[r]=Hm(e.parent&&e.parent[r],"")+e.index+"_",e[a]=""+Hm(e.parent&&e.parent[a],"")}function Jh(e){var t=e.childIndex,n=this.clusters;n[t]||(n[t]=new Gh)&&this.clustersCount++;var r=this.clusterMap.indexOf(e[this.name]+"_"+t);B(r)?(this.clusterMap.add(e[this.name]+"_"+t),e.index=this.leafCount++):e.index=r}function ef(e){if(e.isDefined){var t=this.clusters,n=this.levelAttr,r=Hm(e.parent&&e.parent[n],""),a=void 0;(a=t[0])||(a=t[0]=new Gh)&&++this.leafCount&&++this.clustersCount&&(a.datatype="column"==this.name&&e.datatype._columns||"ordinal");var i=void 0,o=a.entries;i=o.has(r)||o.set(r,new Xh);var l=(i=o.get(r)).list,s=l.indexOf(e.value,!0),c=void 0;if(B(s)){if(!this.missedNodes){var u=a.getPrevNodesCountBySetIdx(r);this.missedNodes=u+l.count!=a.count}(c=function(e){var t=new qh(e.value,e.depth,e.depthbyrow,e.depthbycolumn);return t.data=[e.data],t.node=e,t.parent=e.parent,t}(e)).index=a.count,s=l.count,i.domain[s]=e.value,i.nodes[s]=c,i.list.add(e.value,a.count++)}else i.nodes[s].data.push(e.data);(this.branches[e.depthbycolumn]?this.branches[e.depthbycolumn].inodes[e.column]:null)&&function(e,t,n){if(!e.rootLayer){var r,a=e.parent.value,i=a+"_"+n.value;"layer"==e.parent.tag?null==t.layerNames.indexOf(a)?(r=Kh(e.parent),t.layerNames.add(a),r.children.push(n),t.children.push(r)):null==t.leafNames.indexOf(i)&&(r=t.children[t.layerNames.indexOf(a)]).children.push(n):(i=""+n.value,null==t.leafNames.indexOf(i)&&t.children.push(e)),t.leafNames.add(i)}}(e,this.branches[e.depthbycolumn].inodes[e.column],i.nodes[s]),B(a.list.indexOf(e.value))&&(a.list.add(e.value),a.keys.push(e.value)),e.data.index=e.index=l.indexOf(e.value),e.data.level=Hm(e.parent&&e.parent.level,"")+e.index+"_",e.data.levelByColumn=Hm(e.parent&&e.parent.levelByColumn,"")+e.index+"_",e.data.levelByRow=Hm(e.parent&&e.parent.levelByRow,"")+e.index+"_",c&&(c.level=e.data.level,c.levelByColumn=e.data.levelByColumn,c.levelByRow=e.data.levelByRow)}}function tf(e){var t=this.clusters,n="row"==this.name?e.childIndexbyrow:e.childIndexbycolumn,r=void 0;(r=t[n])||(r=t[n]=new Gh)&&++this.leafCount&&++this.clustersCount,"column"==this.name&&(e.data.level=Hm(e.parent&&e.parent.level,"")+e.index+"_",e.data.levelByColumn=Hm(e.parent&&e.parent.levelByColumn,"")+e.index+"_",e.data.levelByRow=Hm(e.parent&&e.parent.levelByRow,"")+e.index+"_"),r.nodes.push(e),t.count++}function nf(e,t){for(var n=this.getClusterNodes(0)[e],r=null,a=this.getCount()+1;a--;){if(n.depth===t){r=n;break}if(0===n.depth)break;n=n.parent}return r}function rf(){this.count=0,this.clustersCount=0,this.leafCount=0,this.branches=[],this.clusters=[],this.name="row",this.levelAttr="levelByRow",this.clusterMap=new Ni}function af(){this.count=0,this.clustersCount=0,this.leafCount=0,this.branches=[],this.clusters=[],this.name="column",this.levelAttr="levelByColumn",this.leafNodeMap=new Ni}function of(){this.count=0,this.domain=new Ni,this.splitClusters=new Ni,this.groups=new Array(0),this.panes={}}function lf(e){if(!e.isEmpty){var t=e.tag;if("row"==t||"column"==t)if("ordinal"==e.datatype){if(this.getRootNodeList(e.tag).pushToBranch(e),"row"==t?e.row=e.index:e.column=e.index,!e.hasInnerChild){var n=this.layers.createDuplicateLayerNode(e);this.layers.pushToLayers(n,this.series),this.layers.createSeries(n,this.series)}}else this.getRootNodeList(e.tag).createCluster(e),"row"==t?e.row=e.index:e.column=e.index,"row"==t?e.childIndexbyrow=e.childIndex:e.childIndexbycolumn=e.childIndex,e.hasInnerChild?(e.levelByColumn=""+Hm(e.parent&&e.parent.levelByColumn,""),e.levelByRow=""+Hm(e.parent&&e.parent.levelByRow,""),this.layers.splitClusters.add(e.value)):this.layers.pushToLayers(e,this.series),this.layers.createSeries(e,this.series);else if("layer"==t)this.layers.pushToLayers(e,this.series),e.parent&&"ordinal"!=e.parent.datatype||this.layers.createSeries(e,this.series);else if("leaf"==t){var r=e.datatype,a=r.rows,i=r.columns;e.parent&&(e.childIndexbyrow=e.parent.childIndexbyrow,e.childIndexbycolumn=e.parent.childIndexbycolumn),"ordinal"==i||"time"==i?this.columns.pushToDiscreteCluster(e):this.columns.pushToContinuousCluster(e),this.layers.pushToSeries(e,this.series),"ordinal"==a||"time"==a?this.rows.pushToDiscreteCluster(e):this.rows.pushToContinuousCluster(e)}}}function sf(e,t){function n(e){var t=void 0;if(d){var n=l(a(e)?e:e[0].children);t=d(n[h])-o(n,!0,!0)}return t}function r(e,n,r,o){return"continuous"==r||g?function(e,t){return v||!e.nonUniformLeafSize?e.leafSize*e.clustersCount:e.nonUniformLeafSize[t]*e.clustersCount}(e,o):function(e,n){if(t._rangebandForFirstBranch)return t._rangebandForFirstBranch(n);if(a(n))return n.reduce(i,0);var r=function(e){var t=Dg();return e.map(function(e){e.children.map(function(e){if(!t.has(e.value)){var n=e.rootLayer?e:e.node||e;t.set(e.value,n)}})}),t.values()}(n);return"discrete"==c&&t._hasDynamicLeafScale()&&t._padding(e.getClusterNodes(0),e.getDomainForCluster(0),r[0].index),r.reduce(i,0)}(e,n)}function a(e){return Z(e[0])&&"leaf"===e[0].tag}function i(e,t){return!t.isDefined||t.isEmpty?0:t.rangeBand?e+t.rangeBand:e+d.bandwidth(t.index)+o(t,!0,d)+o(t,!1,d)}function o(e,t,n){var r="Leaf"==e.name?e.node:e;return t&&r===d.firstPt||!t&&r===d.lastPt?n?Hm(d._outerPadding,d.outerPadding):d.outerPadding:n?Hm(d._innerPadding,d.innerPadding):d.innerPadding}function l(e){var t;return e.some(function(e){var n="Leaf"==e.name?e.node:e;return n.isDefined&&(t=e),n.isDefined}),t}function s(e){var t;return e.some(function(e){return e.isEmpty||(t=e),!e.isEmpty}),t}var c=t?"discrete":"continuous",u="row"==e?this.rows:this.columns,d=void 0,h=void 0,f=void 0,p=1,g="column"==e?u.splitColumnLeaves:null,v=void 0;if("discrete"==c){if(t._padding(u.getClusterNodes(0),u.getDomainForCluster(0)),u.leafScale=d=t._scale,g){var y=t._rangeInfo();f=y.startPos,p=y.sign,v=t._haUniformLeafScale}h=t.pointProperty}for(var m=u.count,b=0;b<m;b++){var x=u.branches[b].nodes,w=u.branches[b].range=new Array(x.length),C=u.branches[b].inodes,k=f;x.forEach(function(t,a){if(t.children){if(f=e,(v=t.children)&&Z(v[0])&&(v[0].tag!=f||"leaf"===v[0].tag||"numeric"==v[0].datatype)){var o=C[a].children,l=o&&o.length?o:t.children;t.rangeBand=r(u,l,c,a);var d="continuous"==c?t.rangeBand*a:g?k:n(l);k=d+p*t.rangeBand,t.range=[d,k]}else{t.rangeBand=t.children.reduce(i,0);var h=s(t.children);t.range=h?[h.range[0],t.rangeBand+h.range[0]]:[]}w[a]=t.range}var f,v})}}function cf(e,t){!function(e,t){if(e.count||e.leafCount){var n=e.count?e.branches[0].domain.length:1;e.leafSize=t?t/(n*e.clustersCount):150}}(this.rows,e),function(e,t){if(e.count||e.leafCount){var n=e.getClusterNodes(0).length,r=t?t/n:150/n,a=e.count?e.branches[0].domain.length:1;if(e.clusters[0].datatype==ox){e.nonUniformLeafSize=new Array(0);for(var i=0;i<a;i++)e.nonUniformLeafSize[i]=r*e.getDomainForClusterSet(0,i).length}e.leafSize=t?t/(a*e.clustersCount):150}}(this.columns,t)}function uf(e){for(var t=e.parent,n=e,r=void 0,a=e.children;t;)r=t.children,0==a.length&&hf(r,df(r,n,"value")),a=(n=t).children,t=t.parent}function df(e,t,n){var r=-1;return e.some(function(e,a){if(e[n]==t[n])return r=a,!0}),r}function hf(e,t){-1<t&&e.splice(t,1)}function ff(e,t){var n=this,r=new Vh(e,-1,-1,-1,"root",""),a=void 0,i=void 0,o=void 0,l=void 0,s=t.children||pf,c=t.nodeType||gf,u=t.dataType||vf,d=t.nodeName||yf,h=t.data,f=t.isDefined,p=t.isEmpty,g=t.hasSplitLeavesColumns();this.rows=new rf,this.columns=new af,this.layers=new of,this.series=[],Wh(r,function(e){if("leaf"!==e.tag&&(i=s(e))&&(l=i.length)){e.children=new Array(0);var t=!0;for(o=0;o<l;o++)(a=new Vh(i[o])).parent=e,a.depth=e.depth+1,a.row=e.row||0,a.column=e.column||0,a.tag=c(a),a.datatype=u(a),a.depthbyrow="row"==a.tag?e.depthbyrow+1:e.depthbyrow,a.depthbycolumn="column"==a.tag?e.depthbycolumn+1:e.depthbycolumn,a.childIndex=e.children.length,a.childIndexbyrow=e.childIndexbyrow||0,a.childIndexbycolumn=e.childIndexbycolumn||0,a.isDefined="leaf"!=a.tag||f(a.node),a.value=d(a.node),a.data=h(a.node),a.isEmpty="leaf"==a.tag?!a.isDefined:p(a),t=t?a.isEmpty:t,a.isEmpty||e.children.push(a);e.isEmpty=t,e.isEmpty&&uf(e)}}),this.columns.splitColumnLeaves=g,Yh(r,function(e){n.process(e)},this.postProcess),this.rows.branches.reverse(),this.columns.branches.reverse(),this.columns.missedNodes&&this.columns.setNodeIndexForClusters()}function pf(e){return e.children}function gf(e){}function vf(e){}function yf(e){}function mf(e,t,n){var r=new Vh(e,-1,-1,-1,"root",""),a=void 0,i=void 0,o=void 0,l=void 0,s=n.children,c=n.nodeType,u=n.dataType,d=n.nodeName,h=n.layerName(e),f=n.data,p=n.isDefined,g=n.isEmpty,v=t||new Vh({},-1,-1,-1,"root","");return Wh(r,function(t){if("leaf"!==t.tag&&(i=s(t))&&(l=i.length)){var n,r=t.main||v;r.children||(r.children=[]),t.children=new Array(0);var y=bf(r.children),m=!0;for(o=0;o<l;o++){(a=new Vh(i[o])).parent=r,a.row=r.row||0,a.column=r.column||0,a.depth=r.depth+1,a.tag=c(a,a.depth+1),a.datatype=u(a,a.depth+1),a.depthbyrow="row"==a.tag?r.depthbyrow+1:r.depthbyrow,a.depthbycolumn="column"==a.tag?r.depthbycolumn+1:r.depthbycolumn,a.data=f(i[o]),a.childIndex=t.children.length,a.childIndexbyrow=r.childIndexbyrow||0,a.childIndexbycolumn=r.childIndexbycolumn||0,a.value=d(a.node),a.isDefined="leaf"!=a.tag||p(a.node),a.isEmpty="leaf"==a.tag?!a.isDefined:g(a),m=m?a.isEmpty:m;var b=new Vh(i[o]);b.value=a.value,"leaf"==a.tag?(bf(r.children)[h]&&n?n.children.push(a):((n=new Vh(e)).disabled=e.disabled,n.value=h,r.children.push(n),n.children=[a]),n.isDefined=!0,n.tag="layer",a.seriesname=n.value,a.rootLayer=!0):y[a.value]?b.main=y[a.value]:(r.children.push(a),b.main=a),b.parent=r,a.isEmpty||t.children.push(b)}t.isEmpty=r.isEmpty=m,t.isEmpty&&uf(t)}}),v}function bf(e){var t={};return e&&e.length&&e.forEach(function(e){t[e.value]=e}),t}function xf(e,t){var n=this,r=void 0,a=this;this.rows=new rf,this.columns=new af,this.layers=new of,this.series=[],e.forEach(function(e,a){n.layers.createSeries({node:e},n.series),n.layers.domain.add(e.seriesname),e.disabled||(r=new mf(e,r,t))}),this.columns.splitColumnLeaves=t.hasSplitLeavesColumns(),Yh(r,function(e){"layer"==e.tag&&(e.data=[e.children.map(function(e){return e.data})]),a.process(e)},this.postProcess),this.rows.branches.reverse(),this.columns.branches.reverse()}function wf(e,t){var n=this;this.rows=new rf,this.columns=new af,this.layers=new of,this.series=[];var r=new Vh(e,-1,-1,-1,"root","");r.children=e.data,Yh(r,function(e){"layer"==e.type&&(e.data=[e.children.map(function(e){return e.data})]),n.process(e)},this.postProcess),this.rows.branches.reverse(),this.columns.branches.reverse()}function Cf(e,t){var n=t.selection,r=this.getData(e,t.type,n);this.chart.cache.scroll.selection,this.associateBehaviours(e,t.type,r,t.selection,t)}function kf(e,t,n){function r(e){return s[0]instanceof Date?new Date(e):e}var a=e.instance,i=this.chart.overview||this.chart,o=i.dataset.getDataType("x",0),l=i.axes.rotated,s=Ca(function(e,t){if(e=e.slice(0),t[0]>t[1]){var n=_slicedToArray(t,2),r=n[0],a=n[1];t=[a,r]}t=t.slice(0).sort(Wg);var i=Qy(e[0]-t[0],0),o=qy(e[1]-t[1],0);return e[0]-=o,e[1]-=i,e}(n,e.instance.brushScale.range()),a.brushScale,"x",o,l,i.axes.x.reversed);Z(a.visiblePointCount)&&s.length>a.visiblePointCount&&(s.length=a.visiblePointCount);var c=this.chart.systemConf.chart.axes.xaxis,u=c.minRange,d=c.maxRange;(Z(d)||Z(u))&&(this.chart.scrollView=s.slice(0));var h=s[1]>s[0]?{max:1,min:0}:{max:0,min:0};return Z(d)&&(s[h.max]=r(d)),Z(u)&&(s[h.min]=r(u)),{x:{domain:s,index:0,dataType:o}}}function _f(e,t){var n=this.chart,r=e.instance.getTransform(),a=n.systemConf.chart.zoom.type;return function(e,t,n){var r={},a={x:1,y:n.axes.y.groups.length};return pe(t,function(t,i){if(!0===t)for(var o=0;o<a[i];o++){var l=la(n,i,o);if(!l.disabled){var s=Ro(l,ka(i,n.axes.rotated),e),c=s.domain,u=s.range;(r[i]=r[i]||[]).push({domain:c,range:u,index:l.index}),l.domain=c,l.range=u}}}),r}(r,e.types=e.types||{x:Bm(a,"x"),y:Bm(a,"y")},n)}function Sf(e,t){var n=this.getData(e,t.type,t.transform);this.associateBehaviours(e,t.type,n,t.transform,t)}function Of(e,t){this.associateBehaviours(e,t.type,{},t.transform,t)}function Af(e){var t=e.baseProjection=e.baseProjection=e.getProjection(e.geo.renderedLayer);return{scale:t.scale(),translate:t.translate()}}function Pf(e,t,n,r,a,i){function o(t,n){var r;return r=u?0==t.y0?Qy(e.yscale.range()[0],e.yscale(p),t.y0):e.yscale(t.y0):e.yscale(e.yscale.domain()[C])+(null!=e.yscale.bandwidth?e.yscale.bandwidth()/2:0),qy(r,e.yscale.range()[C])}var l,s=e.chartObj,c=e.xscale,u=(e.yscale,e.stacked),d=e.datasetIndex,h=e.axisrotated,f=e.commonPlotOptions,p=e.hasNegValue,g=e.yaxiscolumnorder,v=e.dataset,y=s.systemConf,m=s.dataObject,b=y.chart.axes.yaxis[g].reversed,x=(s.seriesdata[d]||s.seriesdata[0]).plotoptions,w=zm.getValueOfPlotOptions(x,f)("mode");if(m.isPolarAxisCategory){var C=b&&!u?e.yscale.domain().length-1:0,k=(S=Gt.helpers).isCatNull(v,"x"),_=S.isCatNull(v,"y",g);(l=Zg().angle(function(e,t){return c(v.getX(e))}).outerRadius(function(t,n){if(t.isDummy)return o.apply(null,arguments);var r=u?e.yscale(t.y0+t.y):e.yscale(v.getY(t,g))+(null!=e.yscale.bandwidth?e.yscale.bandwidth()/2:0);return qy(r,e.yscale.range()[C])}).innerRadius(o).curve(wg(w)))._defined=function(e,t){return!_(v.getY(e,g))&&!k(v.getX(e))}}else{var S,O=ln(s,i,d).name===wb,A=O?1:null;k=(S=Gt.helpers).isCatNull(v,"x"),_=S.isCatNull(v,"y",g),l=Xg().defined(function(e,t){return u?!k(v.getX(e)):!_(v.getY(e,g))&&!k(v.getX(e))}).curve(wg(w,e.axisrotated,f.tension)),h?l.x0(function(t,n){return u?0==d&&0==a&&0==n?qy(e.yscale.range()[0],e.yscale(p)):e.yscale(t.y0):O?m.getXYvalue(e.axisrotated,e.stacked,e.xscale,e.yscale,e.yaxiscolumnorder,t,"x",null,0):null!=e.yscale.bandwidth?e.yscale.origRange[0]+e.yscale.bandwidth():qy(e.yscale.range()[0],e.yscale(p))}).x1(function(a,i){var o=m.getXYvalue(e.axisrotated,e.stacked,e.xscale,e.yscale,e.yaxiscolumnorder,a,"x",null,A);return isNaN(o)&&null!=n&&(o=m.getXYvalue(e.axisrotated,e.stacked,e.xscale,e.yscale,e.yaxiscolumnorder,r[r.length-1],"x",null,A)+t),o}).y(function(t,n){return m.getXYvalue(e.axisrotated,e.stacked,e.xscale,e.yscale,e.yaxiscolumnorder,t,"y",null,A)}):l.x(function(t,a){var i=s.dataObject.getXYvalue(e.axisrotated,e.stacked,e.xscale,e.yscale,e.yaxiscolumnorder,t,"x",null,A);return null!=n&&(i+=Math.abs(s.dataObject.getXYvalue(e.axisrotated,e.stacked,s.renderer[d].oldXscale,e.yscale,e.yaxiscolumnorder,r[0],"x",null,A)-s.dataObject.getXYvalue(e.axisrotated,e.stacked,e.xscale,e.yscale,e.yaxiscolumnorder,r[0],"x",null,A))),i}).y0(function(t,n){return u?0==d&&0==a&&0==n?Qy(e.yscale.range()[0],e.yscale(p)):e.yscale(t.y0):O?m.getXYvalue(e.axisrotated,e.stacked,e.xscale,e.yscale,e.yaxiscolumnorder,t,"y",null,0):null!=e.yscale.bandwidth?e.yscale.origRange[0]+e.yscale.bandwidth():Qy(e.yscale.range()[0],e.yscale(p))}).y1(function(t,n){return e.yscale,m.getXYvalue(e.axisrotated,e.stacked,e.xscale,e.yscale,e.yaxiscolumnorder,t,"y",null,A)})}return l}function Tf(e,t){this.chart=e,this.renderer=t}function Ef(e,t,n){var r=this._base=0;this._extent=[r,r],this._data=[],this._list=Dg(),e&&this.add.apply(this,arguments)}function Lf(e){this.chart=e,this.originalSeries=e.seriesdata,this.initialize()}function Mf(e){Gt.HierarchicalDataAdapter.call(this,e),this.dataType=ox,this.categoryTree=!0,this.gridOptions={},this.legendOptions={},this.update(!0)}function zf(e,t,n,r,a){Gt.HierarchicalDataAdapter.call(this,e),this.dataType=lx,this.chart=e,this.columnInfo=a,r?this.groupByDiscreteTime=!0:this.groupByContinuousTime=!0,te(n)?this.groupOrder=n.slice(0).reverse():"AUTO"===n&&(this.groupOrder=zf.getAutoGroupOrder(a.time.subfunction)),this.groupByTime=!0,this.update(t)}function If(e,t){var n=null;return e.reduce(function(e,r){return e[n=t.call(null,r)]=e[n]||[],e[n].push(r),e},{})}function Df(e){return e.map(function(e){return{YEAR:e.getFullYear(),QUARTER:Va(e),MONTH:function(e){return h_[e.getMonth()]}(e),WEEK:function(e){var t=new Date(e.getFullYear(),0,1);return Zy(((e-t)/864e5+t.getDay()+1)/7)}(e),DAY:function(e){return f_[e.getDay()]}(e),timestamps:e.getTime(),data:e}})}function Rf(e,t,n,r){var a=[];for(var i in e)if(e.hasOwnProperty(i)){var o=new Vh(e[i],n,n,n);a.push(o),t?(o.leaf=!0,o.value=r?e[i].data.getTime():e[i].data,o.point=e[i].data.getTime(),o.tag=o.leaf?"leaf":"column",o.datatype={rows:"numeric",columns:r?"ordinal":"time",_columns:"time"}):(o.value=i,o.point=e[i][0].data,o.children=e[i],o.tag=o.leaf?"leaf":"column",o.datatype="ordinal",o.depthbyrow="row"==o.tag?o.depthbyrow+1:o.depthbyrow,o.depthbycolumn=(o.tag,n)),o.seriesname="manual",o.isDefined=!0}return a}function jf(e,t,n){var r,a,i=Gt.helpers,o=i.isCatNull(t,"x");e.forEach(function(e,l){var s=i.getChartType(null,sx,l,n.data);if((n.isstacked(s)||n.isPercentChart)&&!Zn(s)){var c,u,d=function(e){return t.getX(e)};if(n.categoryHierarchy){u=(c=n.hierarchical.pivotLayout.getRootNodeList("column")).splitColumnLeaves;var h=n.chartObj.systemConf.chart.axes.xaxis.uniformLeafScale;r=h?c.getUniqueDomainForCluster(0):c.getDomainForClusterSet(0,e.column),c.count&&!u&&(d=function(e){return t.getActualX(e)})}r||(r=n.getDomain(n.getCategories("x"),"x",!0),n.pivot&&(r=c.getUniqueDomainForCluster(0)),a=r.length),e.data.forEach(function(n){for(var l=n.map(d),s=0,c=a;s<c;s++){var u=r[s],h=l.indexOf(u);if(0<=h&&h!=s&&(n.splice(s,0,n[h]),n.splice(h+1,1),l=n.map(d)),_typeof(l[s])!=Ey&&o(l[s])&&n.splice(s,1),h<0){var f=[],p=i.getParsedYAxisOrder(e.yaxiscolumnorder);f.splice(t.xidx,0,u),f.splice(t.yidx(p),0,0),f.isDummy=!0,n.splice(s,0,f),l=n.map(d)}}a!=n.length&&n.splice(a,n.length-a)})}})}function Hf(e,t,n){var r=Gt.helpers,a=!!n.pivot&&n.hierarchical.pivotLayout.columns.splitColumnLeaves;e.forEach(function(e,i){var o=n.pivot?e.row+e.column+i:i,l=n.seriesAssist[o];if(!e.disabled&&Re(l.layout||[],"stack")){var s=n.pivot?e.row+"_"+e.column:l.stackIndex,c=n.getEncode("stack",s).layout,u=e.data,d=r.getParsedYAxisOrder(e.yaxiscolumnorder),h=Ig(u);if(Zn(r.getChartType(null,sx,o,n.data))){var f=n.getCategories("x",0,!1),p=a?f:n.getDomain(f,"x",!0);h=n.updateSeriesdatabyCategories(h,p)}c.add(h,function(e){return t.getX(e)},function(e){return t.getY(e,d)})}})}function Bf(e,t,n,r,a){var i=e.groupedByStack,o={si:n,d:t};if(Zn(a)){if(i.has(r)){var l=i.get(r);i.set(r,l.concat([o]))}else i.set(r,[o]);i.get(r).stackLabelIndex=o.si}}function Nf(e,t,n){var r=t.getZ(e),a=Se(n.scales,function(e){return"z-0"===e.id}),i=a.scale,o=a.config,l=a.schema.data.dataType,s=o.nullAs;return i(B(r)?Z(s)?vn(r,{config:o,scale:i,columnKey:n.dataset.getColumnIdx("z")}):l===ox?r:i.domain()[0]:r)}function Ff(e,t,n){this.values=[],this.minmaxY=[],this.stackeddata=[],this.stackedChart=null,this.hasNegativeValue=[],this.baseline=[],this.xRange=null,this.yRange=[],this.domainCorrections={plotHeight:null,byDatalabels:{},forBubbles:{}},this.rangeCorrections={datalabels:{}},this.xaxisData=e.chart.axes.xaxis,this.yaxesData=e.chart.axes.yaxis,this.qualitativeRanges=null,this.groupedByStack=Dg(),this.categoriesStore=null,this.hierarchical=n.preProcessor.hierarchical,this.categoryHierarchy=this.hierarchical&&this.hierarchical.categoryTree,this.pivot=this.categoryHierarchy&&this.hierarchical.pivot,this.isHierarchy=n.preProcessor.isHierarchy,this.initialize=function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(){var t=this,r=arguments;e.apply(t,r),n.forEach(function(e){return e.apply(t,r)})}}(Gt.prototype.initialize,m_),Gt.apply(this,arguments)}function Vf(e,t){this.chart=e,this.renderer=t}function Wf(e,t){this.chart=e,this.renderer=t,ge(Wf.prototype,Vf.prototype)}function Yf(e,t){this.chart=e,this.renderer=t}function Uf(e,t){this.chart=e,this.renderer=t}function Gf(e,t,n,r,a,i){var o=e.dataObject.getTransRectValue("x",r,0,0,t),l=e.dataObject.getTransRectValue("y",r,0,0,t),s=e.dataObject.getTransRectValue("width",r,0,0,t),c=e.dataObject.getTransRectValue("height",r,0,0,t),u=xt(o,l,s,c,0,n.yaxisreversed,n.axisrotated);return{_data:function(){return{_x:u.x1,_y:u.y1,_width:s,_height:c,_widthT:u.x2,_heightT:u.y2,_point:a,type:i,_uid:r._uid}}}}function Xf(e,t,n){var r=[],a=n.xidx,i=n.yidx(e.yaxisOrder),o=n.getX(e);return r[a]=o,r[i]=t,r.index=e.index,r}function Zf(e,t){return{enabled:e.enabled,dataindex:e.dataindex,columnindex:e.columnindex,size:e.size,symbol:e.symbol||"line",innerFillColor:"transparent",innerStrokeColor:"transparent",innerStrokeWidth:0,innerStrokeOpacity:0,outerFillColor:e.color,outerStrokeOpacity:e.opacity,outerStrokeWidth:e.strokeWidth,outerStrokeColor:e.color,animation:t}}function qf(e,t,n,r){e.attrTween("d",function(e,a){var i=tv(r[0],r[1]),o=tv(n[0],n[1]);return function(n){return t.outerRadius(i(n)),t.innerRadius(o(n)),t(e)}})}function Qf(e,t){e.selected=t.selected}function Kf(e){e.selected=null}function $f(){return _classCallCheck(this,$f),_possibleConstructorReturn(this,($f.__proto__||Object.getPrototypeOf($f)).apply(this,arguments))}function Jf(e){return er(e.chartTypes[0].value)}function ep(e,t,n,r){return{start:tp(e.source,n,r),end:tp(e.target,n,r),type:t.link.type.toUpperCase()||"ES"}}function tp(e,t,n){var r=t.commonOption;return{x:t.getParamValue("x",e,n,null,r),y:t.getParamValue("y",e,n,null,r),width:t.getParamValue("width",e,n,null,r),height:t.getParamValue("height",e,n,null,r)}}function np(e,t){this.chart=e,this.renderer=t}function rp(e,t,n,r,a,i){this.layer=e,this.utils=t,this.layerContainer=n,this.styles=r,this.geoMap=a,this.useMesh=i,this.initialize()}function ap(e,t){this.x=e,this.y=t}function ip(e,t){this.longitude=e,this.latitude=t}function op(e,t,n,r){this.text=e,this.latLong=t,this.styles=n,this.geoMap=r}function lp(e){this.geoMap=e,this.initialize()}function sp(e){this.geoMap=e,this.initialize()}function cp(e){this.geoMap=e,this.initialize()}function up(e){this.geoMap=e,this.initialize()}function dp(){_classCallCheck(this,dp)}function hp(e){_classCallCheck(this,hp),this.options=e.settings,this.initialize(),this.hookCount=0}function fp(e,t){this.axes={x:{},y:{}},wa.call(this,e,t),this.initialize()}function pp(e){this.geoMap=e,this.initialize()}function gp(e,t,n){this.series=e,this.geoMap=t,this.index=n,this.initialize()}function vp(e,t){_classCallCheck(this,vp),this.type=e,this[e]=t}function yp(e,t,n){gp.call(this,e,t,n)}function mp(e,t,n){yp.call(this,e,t,n)}function bp(e,t,n){mp.call(this,e,t,n)}function xp(e,t,n){this.renderingMode=t.systemConf.map.renderingMode,gp.call(this,e,t,n)}function wp(e,t,n,r,a){var i,o=e.chartObj,l=e.xscale,s=e.yscale,c=e.stacked,u=e.datasetIndex,d=e.axisrotated,h=e.commonPlotOptions,f=e.yaxiscolumnorder,p=e.dataset,g=o.systemConf,v=o.dataObject,y=g.chart.axes.yaxis[f].reversed,m=(o.seriesdata[u]||o.seriesdata[0]).plotoptions,b=zm.getValueOfPlotOptions(m,h),x=Km.FIREFOX&&1==t.length?"linearClosed":b("mode");if(v.isPolarAxisCategory)i=Gg().defined(function(e,t){return!e.isDummy}).radius(function(e,t){var n=c?s(e.y+e.y0):s(p.getY(e,f))+(null!=s.bandwidth?s.bandwidth()/2:0);return qy(n,s.range()[y&&!c?s.domain().length-1:0]+.1)}).angle(function(e,t){return l(p.getX(e))}).curve(wg(x,d));else{var w=ln(o,a,u),C=Gt.helpers,k=C.isCatNull(p,"x"),_=C.isCatNull(p,"y",f);i=Ug().defined(function(e,t){var n=!_(p.getY(e,f))&&!k(p.getX(e));return w.value===Kv.stkdarea||!e.isDummy&&n}).x(function(e,a){var i=v.getXYvalue(d,c,l,s,f,e,"x",null,r);return null!=n&&(i+=Math.abs(v.getXYvalue(d,c,o.renderer[u].oldXscale,s,f,t[0],"x",null,r)-v.getXYvalue(d,c,l,s,f,t[0],"x",null,r))),i}).y(function(e,t){return o.dataObject.getXYvalue(d,c,l,s,f,e,"y",null,r)}).curve(wg(x,d,h.tension))}return i}function Cp(e,t,n){this.data=e,this.dataset=t,this.chartObj=n,this.globalChartType=null,this.processedseriesData=n.seriesdata,this.initialize()}function kp(e,t){_classCallCheck(this,kp),e&&te(e)?(this.data=this.convert(e,t),_p(this.data)):this.data=e}function _p(e,t){var n=1<arguments.length&&void 0!==t?t:-1;e.forEach(function(e,t){e.level=-1!=n?n+"_"+t:""+t,te(e[0])&&_p(e,e.level)})}function Sp(e,t){return t=t||0,e.forEach(function(e){te(e[0])?t=Sp(e,t):t++}),t}function Op(e,t){this.chart=e,this.renderer=t}function Ap(e,t,n){return e?t.renderer[Za(e,t)]:n}function Pp(e,t){var n=e.getProcessedNode(t),r=e.layout;return cC.getTileBound(r,n)}function Tp(e,t){this.data=t;var n=this.rp=e.params,r=n.bound;this.chartObj=n.chartObj,this.commonRendererProp=e,this.dimension=Uw.getAvailableBound(r,n.commonPlotOptions),this.createScale(),this.layout=this.getLayout(),this.processData()}function Ep(e,t){var n=e.data,r=e.chartObj,a=cC.getSeriesIndex(t)||0;return rn(r)?n[a].node:r.seriesdata[a]}function Lp(e,t,n,r,a){var i=Xn(Hv()),o=cC.getLevel(e);return{renderer:n,seriesIndex:cC.getSeriesIndex(e),rendererIndex:a,paneid:r,coordinates:[i.pageX,i.pageY],element:this,data:e.data,level:o,selected:e.selected||vm,_key:o}}function Mp(e){var t,n=e.chartObj,r=Er(n),a=0;if(n.dataObject.pivot){t=Dc(n,r);var i=n.dataObject.hierarchical.pivotLayout.getRootNodeList("layer").panes;if(!i[t])return;a=Ut(i,i[t].index)}var o,l=(e=n.renderer[a].layout).dimension,s=e.processedData,c=e.rp,u=e.rp.commonPlotOptions,d=e.data,h=n.dataset;if(n.chartRendered)return s.some(function(e){var a=cC.getSeriesIndex(e);if(!B(a)&&0!=U(Gn(d[a].plotoptions,u,n,"enabled"),!0)){var i=cC.getTileBound(n,e),s=i.x,f=i.y,p=i.width,g=i.height,v=Pn(h.getClr(e.data),n),y=Z(a)&&Bn(n,t,a),m={x:s+l.x+c.bound.x,y:f+l.y+c.bound.y,width:p,height:g};return v&&gx.pointInRectangle(r,m)&&!e.children&&!y?(o=e,!0):void 0}}),{point:o,rendererIndex:a}}function zp(e,t){return t?Ip(e,t):e.y+e.y0}function Ip(e,t){var n=e.index,r=t.filter(function(e,t){return e[0]==n})[0];if(!r||!r.length)return 0;var a=r[1],i=r[2];return q(a)?i:i+Ky(a)}function Dp(e,t,n,r){var a=n.renderer,i=n.axisrotated,o=n.seriesindex;if(r){if(i&&"width"==t)return 0;var l=Ip(e,r);return i&&"x"==t||!i&&"y"==t?a.commonOption.yscale(l):a.getParamValue(t,e,o,null,a.commonOption)}return a.getParamValue(t,e,o,null,a.commonOption)}function Rp(e){ge(Rp.prototype,Ef.prototype);var t=this._base=0;this._stack=!1,this._extent=[t,t],this._data=[],this._rows={},this._keys={},this._sum=t,e&&this.add.apply(this,arguments)}function jp(e,t,n,r,a,i){return"x"==r?i?a||n.isCascaded?n.isPositive?e+t:e:n.isPositive?e:e+t:a?e+t:e:i?a?e:e+t:a||n.isCascaded?n.isPositive?e:e+t:n.isPositive?e+t:e}function Hp(e){return e.y}function Bp(){return document.createElement("canvas")}function Np(e){return e.getContext("2d")}function Fp(e){return e.nodeName===Ym}function Vp(e,t){function n(e){if(U[e])return U[e];var t=e*re,n=t,r=[];for(0===e&&r.push([te[0],te[1],0]);n--;){var a=n/t*2*sm;r.push([te[0]+e*em(-a)*J,te[1]+e*tm(-a)*ee,a])}return U[e]=r}function r(e){var t=Bp();t.setAttribute("width",e.width),t.setAttribute("height",e.height),e.context=Np(t)}function a(e){var t=e.constructor===Object?e.canvasIndex:e;return P[t].context}function i(e,t){O[t]=a(t).getImageData(0,0,e.width,e.height).data}function o(e){return t.strokeWidth(e)+t.padding(e)}function l(e,t){return F(t)-F(e)}function s(e,t,n){e[0]=Qy(e[0],t[0]),e[1]=Qy(e[1],t[1]),e[2]=qy(e[2],n[0]),e[3]=qy(e[3],n[1])}function c(e,n,r,a){function i(e){var t=(Fp(e)?ct:ut)(e);return Fp(e)&&(h=S-qy(0,t.left-w)-qy(0,k-t.right),f=O-qy(0,t.top-C)-qy(0,_-t.bottom)),{width:t.width,height:t.height}}var o=e.node(),l=o.childElementCount?e.selectAll("*").filter(function(){return Fp(this)&&!this.childElementCount}).nodes():[o],s=ts(r)%360,c=90<s?180-s:s;e.attr("dy","1em").attr("transform","rotate("+c+" 0 0)");var u,d,h,f,p,g="ellipsis"===z?"..":"",v=g.length,y=ut(o),m=t.padding(n),b=(Z(a)?a:E)-m,x=L-m,w=y.left,C=y.top,k=y.left+b,_=y.top+x,S=b,O=x;l.forEach(function(e){h=b,f=x,1<(p=i(e)).width-h&&(u=(p.width-h)/p.width,d=Zy((1-u)*e.textContent.length),e.textContent=e.textContent.substring(0,d-v)+g,p=i(e)),1<p.height-f&&(u=(p.height-f)/p.height,d=Zy((1-u)*e.textContent.length),e.textContent=e.textContent.substring(0,d-v)+g,p=i(e)),(1<p.width-h||1<p.height-f)&&St(e,e,e.textContent,p.width,p.height,p,g),e.textContent===g&&(e.textContent="")})}function u(e,t,n){var r=V(e),a=r.value,i=r.type,o=q[t];kt(Q,[ae(e)]),Q[i](a),n&&Q.style("font-size",n+hm),q_.isMultiLine(r)&&ft(Q,0),n||"none"===z||(j&&c(Q,e,0,j),c(Q,e,o)),Q.attr("text-anchor",fb).attr("dy",q_.getDy(r)+"em").attr("transform","rotate("+ts(o)+" 0 0)")}function d(e,t){var n=F(e),r=V(e),a=o(e),i=r.type,l=q[t],s=[];u(e,t);var c=M(Q.node()),d=c.width+a,h=c.height+a,f=Zy((d*Ky(tm(l))+h*Ky(em(l)))/G),p=Zy((d*Ky(em(l))+h*Ky(tm(l)))/G),g=p*G,v=f*G;if(s.innerSVG=Q[i](),s.contentType=i,s.format=r.format,"html"===i){var y=gt(Q,n);Array.prototype.push.apply(s,y)}var m={gw:p,gh:f,width:d,height:h,size:n,rotation:l,nodeList:s,bb:c};return Q_<C+g&&(k+=_,_=C=0),Q_<k+v&&(P[++S]={width:1,height:1},C=k=_=0),m.canvasBound=[C,k,g,v],m.canvasIndex=S,C+=g,_=qy(_,v),P[S].width=qy(P[S].width,C),P[S].height=k+_,m}function h(e,n){var r=b[n];if(r){var i=a(r),l=r.canvasBound;i.save(),i.translate(l[0]+l[2]/2,l[1]+l[3]/2),i.rotate(r.rotation),t.boundBox?i.fillRect(-r.width/2,-r.height/2,r.width,r.height):function(e,t){var n=t.size,r=ie(e),i=t.bb,l=t.nodeList,s=q_.getDy(l),c=0,u=0,d=a(t);d.strokeStyle="#000",d.lineWidth=o(e),d.lineJoin="bevel",d.fillStyle="#000","html"===l.contentType?(d.textAlign=nb,l.forEach(function(t){var a,o=t.style;o.length&&(a=lC(kt(vm,[ae(e)]),o),parseFloat(o["font-size"])),c=t.dx||0,u=(t.dy||0)*n+n*s-(q_.isMultiLine(l)?i.height/2:0),d.font=a||r,d.strokeText(t.text,c,u),d.fillText(t.text,c,u)})):(u=n*s,d.textAlign=nb,d.font=r,d.strokeText(l.innerSVG,c,u),d.fillText(l.innerSVG,c,u))}(e,r),i.restore()}}function f(e,t){return K<=e||$<=t||e<0||t<0}function p(e){var t=Xy(e[0]-this.gw/2),n=Xy(e[1]-this.gh/2);return!!function(e,t,n){return!n.some(function(n){var r=e+n[0],a=t+n[1];if(f(r,a)||!X[r][a])return!0})}(t,n,this.occupied)&&(function(e,t){t.occupied.forEach(function(t){var n=e[0]+t[0],r=e[1]+t[1];f(n,r)||(X[n][r]=!1)})}(A=[t,n],this),!0)}function g(e,t){var r=b[t];if(e.layout=vm,!r)return!1;var a=function(e){for(var t,n,r,a=e.gw,i=e.gh,o=e.canvasBound[0],l=e.canvasBound[1],c=e.canvasIndex,u=P[c].width,d=O[c],h=[],f=[a/2,i/2,a/2,i/2],p=a;p--;)for(t=i;t--;){r=G;e:for(;r--;)for(n=G;n--;)if(d[4*((t*G+r+l)*u+(p*G+n+o))+3]){h.push([p,t]),s(f,[p,t],[p,t]);break e}}return{occupied:h,bound:f}}(r);r.occupied=a.occupied;var i=r.bound=a.bound;if(i[2]-i[0]+1>K||i[3]-i[1]+1>$)return!1;for(var o=ne+1;o--;)if(n(ne-o).some(p,r)){var l=A[0],c=A[1];return e.layout={x:(l+r.gw/2)*G,y:(c+r.gh/2)*G,width:r.width,height:r.height,rotation:r.rotation,size:r.size,nodeList:r.nodeList},s(T,[l*G,c*G],[(l+r.gw)*G,(c+r.gh)*G]),!0}return!1}function v(){C=k=S=_=0,P=[{width:1,height:1}],O=[],T=[E/2,L/2,E/2,L/2],function(){var n,r=x?w:gx.areaOfEllipse(E/2,L/2),a=0,i=0,l=0;e.forEach(function(e,t){var n=F(e),r=o(e),s="html"===V(e).type?n:10,c=n/s,d=W(e);q.push(d),u(e,t,s);var h=M(Q.node()),f=h.width+r,p=h.height+r,g=f*p,v=f*c*Ky(em(d))+p*c*Ky(tm(d)),y=f*c*Ky(tm(d))+p*c*Ky(em(d));l=qy(l,y-L),i=qy(i,v-E),a+=g*$y(c,2)}),(i||l)&&a<r?(n=qy(i?i/E:0,l?l/L:0),n=1-Qy(n,.2)):(n=Jy(r/a)*(t.boundBox?.5:1),n=qy(n,.4));var s=R.range(),c=Hm(t.size.min,qy(s[0],3)),d=Hm(t.size.max,qy(s[1]*n,c+2));R.range([c,d])}(),function(){for(var e,t,n,r=K;r--;)for(X[r]=[],e=$;e--;)if(I){X[r][e]=!D,n=G;e:for(;n--;)for(t=G;t--;)if(!x[4*((e*G+n)*K*G+(r*G+t))+3]){X[r][e]=D;break e}}else X[r][e]=!0}(),b=e.map(d),P.forEach(r),e.forEach(h),P.forEach(i),e.filter(g)}function y(){e.sort(l),v();var n=Qy(T[0]-0,T[1]-0,E-T[2],L-T[3]);n=x||Z(t.size.min)&&Z(t.size.max)?1:Qy(E,L)/(Qy(E,L)-n),t.onload({mask:oe,scaleFactor:n}),Q.remove(),x=vm}function m(){var e,n,r,a=ce.getImageData(0,0,le,se),i=t.maskBackground,o=i&&"inherit"!==i&&zg(i);x=a.data;for(var l=w=0;l<x.length;l+=4)x[l+3]&&(w++,e=x,n=l,(r=o)&&(e[n]=r.r,e[n+1]=r.g,e[n+2]=r.b,e[n+3]=qy(1,Xy(255*r.opacity))));o&&ce.putImageData(a,0,0),y()}var b,x,w,C,k,_,S,O,A,P,T,E=t.width,L=t.height,z=t.textOverflow,I=(t.textOverlap,t.mask),D=t.invert||!1,R=t.fontScale,j=Z(t.maxWidth)?Ie(t.maxWidth,E):vm,H=t.fontFamily,B=t.fontStyle,N=t.fontWeight,F=t.fontSize,V=t.content,W=t.rotation,Y=t.chartObj,U=[],G=Qy(8,qy(4,Gy(16*Qy(E,L)/1024))),X=[],q=[],Q=mt(Y.getPatternSvg(),Wm,[1],".","class","dummyText"),K=Zy(E/G),$=Zy(L/G),J=Qy(1,K/$),ee=Qy(1,$/K),te=(te=t.origin)?[te[0]/G,te[1]/G]:[K/2,$/2],ne=Xy(Jy(K*K+$*$)),re=e.length<100?8:1,ae=function(e){return{fontStyle:B(e),fontWeight:N(e),fontSize:F(e),fontFamily:H(e)}},ie=function(e){return B(e)+" normal "+N(e)+" "+F(e).toString(10)+hm+" "+H(e)};if(I){var oe=Bp(),le=K*G,se=$*G;oe.width=le,oe.height=se;var ce=Np(oe);if("function"==typeof I){var ue=Qy(le,se),de="rect"===I.name?[le,se]:[ue,ue],he=I.apply(vm,de);ce.translate(le/2,se/2),ce.scale(le/de[0],se/de[1]),xw.drawPath(ce,he),ce.fillStyle="#000",ce.fill(),m()}else{var fe=new Image;fe.crossOrigin="Anonymous",fe.onload=function(){ce.drawImage(fe,0,0,le,se),m()},fe.src=I}}else y()}function Wp(e,t){function n(e){var n=Gt.helpers.getParsedYAxisOrder(t[O(e)].yaxiscolumnorder);return i.dataset.getY(e,n)}function r(e,t){return t===ew?c:u[1]}var a,i,o,l,s,c,u,d,h,f,p,g,v,y,m,b,x,w,C,k,_,S,O=q_.getSeriesIndex,A=t[0].row+"_"+t[0].column;return a=e.params,i=a.chartObj,o=a.commonPlotOptions,s=Uw.getAvailableBound(a.bound,o),c=0,l=[],h=[],f=[],p=[],g=[],v=[],y=[],w=[],C=[],b=te(b=o.rotation||[0])?b:[b],x=0,i.showLoading(i.container),t.forEach(function(e,t){e.disabled||e.data.forEach(function(e,r){e.forEach(function(e,a){e.seriesIndex=t,e.subSeriesIndex=r,e.itemIndex=a,e.layout=vm,e.paneid=A,e.level=t+"_"+r+"_"+a;var i=n(e);Z(i)&&(c+=i,y.push(i),l.push(e))})})}),u=Fg(Ig([[0],Fg(y)])),t.forEach(function(e,t){var n=ki(o,e.plotoptions,i,t,A),l=_i(vm,n,i);p.push(l["font-family"]),g.push(l["font-style"]),v.push(l["font-weight"]),h.push(n),f.push(bs(i,a,n,Wx,r,t,void 0,A)),m=m||vi(n,i);var s=e.plotoptions&&e.plotoptions.rotation;Z(s)&&(w[t]=te(s)?s:[s],C[t]=0)}),k=Qy(s.width,s.height),_=Ie(o.minSize,k,Ie("2%",k)),S=Ie(o.maxSize,k,Ie("20%",k)),d=kg().domain(u).range([_,S]),{rp:a,processedData:l,dimension:s,sum:c,fontScale:d,datalabelOptions:h,fontFamily:p,fontStyle:g,fontWeight:v,drawLayout:function(e){var r=this,a=o.mask,c=o.datalabels,u={width:s.width,height:s.height,rotation:function(e){var t,n=O(e);return t=w[n]?w[n][C[n]++%w[n].length]:b[x++%b.length],gx.degreeToRadian(t)},fontSize:function(e){var t=n(e);return t?d(t):0},fontFamily:function(e){return p[O(e)]},fontStyle:function(e){return g[O(e)]||"normal"},fontWeight:function(e){return v[O(e)]||"normal"},content:function(e){n(e);var t=f[O(e)];return{type:t.contentType,value:t(e),format:t}},padding:function(e){var t=h[O(e)],n=U(o.padding,2),r=0;return vi(t,i)&&(r=2*yi(t,i)+mi(t,i)),n+r},strokeWidth:function(e){var n=t[O(e)].plotoptions;return U(n&&Z(n.strokeWidth)?n.strokeWidth:o.strokeWidth,1)},onload:function(t){i.hideLoading(i.container),r.output=t,e()},origin:vm,mask:function(){var e,t=o.mask,n=!Km.IE&&!Km.PHANTOMJS&&t.htmlEl,r=t.imageUrl,a=t.symbol;return n?e="data:image/svg+xml;"+(Km.IE?"base64":"utf8")+","+(Km.IE?Pm(unescape(encodeURIComponent(n))):n):r?e=r:a&&((e=Bt(a)).name=a),e}(),maskBackground:a.background.color,invert:a.invert,textOverflow:c.textOverflow||"ellipsis",textOverlap:c.textOverlap||"adjust",maxWidth:c.maxWidth,fontScale:d,chartObj:i,size:"auto"===o.size?{}:{min:o.minSize,max:o.maxSize},boundBox:m};Vp(l,u)},hasBoundBox:m,data:t}}function Yp(e,t){this.chart=e,this.renderer=t}function Up(e,t,n){return e?t.renderer[Za(e,t)]:n}function Gp(e,t,n,r,a){var i=Xn(Hv()),o=eS(e),l=e.subSeriesIndex,s=tS(e);return{renderer:n,rendererIndex:a,seriesIndex:o,subSeriesIndex:l,itemIndex:s,paneid:r,coordinates:[i.pageX,i.pageY],element:this,data:e,selected:e.selected,_key:"ZC_"+o+"_"+l+"_"+s}}function Xp(e){var t,n=e.rp.chartObj,r=Er(n),a=0;if(n.dataObject.pivot){t=Dc(n,r);var i=n.dataObject.hierarchical.pivotLayout.getRootNodeList("layer").panes;if(!i[t])return;a=Ut(i,i[t].index)}var o,l=(e=n.renderer[a].layout).data,s=e.dimension,c=e.processedData,u=e.rp,d=q_.getContainerTransformation(e,s),h=e.output.scaleFactor,f=c.length,p=null;if(n.staticPaneSVG.selectAll("g.zcplothighlight").attr("transform","translate("+(n.plotarea.left+d.translate[0]+e.rp.bound.x)+","+(n.plotarea.top+d.translate[1]+e.rp.bound.y)+") scale("+d.scale+")"),r.x-=d.translate[0],r.y-=d.translate[1],!n.chartRendered)return{};for(;f--;){var g=c[f],v=g.layout,y=Pn(n.dataset.getClr(g),n),m=Bn(n,t,g.seriesIndex),b=0==U(Gn(l[eS(g)].plotoptions,e.rp.commonPlotOptions,n,"enabled"),!0);if(v&&!b&&y&&!m){var x=v.x+u.bound.x,w=v.y+u.bound.y,C=x*h,k=w*h,_=v.width*h,S=v.height*h,O={x:C-_/2,y:k-S/2,width:_,height:S},A=gx.rotatePoint(r,v.rotation,{x:C,y:k}),P=Ky(A.y-w);gx.pointInRectangle(A,O)&&(null===p||P<p)&&(o=g,p=P)}}return{point:o,rendererIndex:a}}function Zp(e,t,n,r){var a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:Dg();_classCallCheck(this,Zp);var i=[],o=[],l=Rg(),s=Rg(),c=[],u=[];e.forEach(function(e){var d=t(e),h=n(e),f=r(e);if(Zp.isValidPoint(d,h,f)){var p={name:""+d,nameOriginal:d,point:e,_type:"node"},g={name:""+h,nameOriginal:h,point:e,_type:"node"},v={_type:"link",source:""+d,target:""+h,value:f,point:e};a.has(d)||a.has(h)?a.has(d)?a.has(h)||(i.push(g),s.add(h)):(s.add(d),i.push(p)):(o.push(v),l.add(d),l.add(h),s.add(d),i.push(p),s.add(h),i.push(g)),u.push(_extends({},v)),c.push(_extends({},p)),c.push(_extends({},g))}});var d=Fg(o,function(e){return e.value});i=qp(i,function(e){return e.name}),c=qp(c,function(e){return e.name}),i.forEach(function(e){l.has(e.name)||(e.fixedValue=d[0]||1e-4),e._type="node"}),this.extent=d,this.nodeLength=i.length,this.linkLength=o.length,this.graph={nodes:i,links:o},this.completeGraph={nodes:c,links:u}}function qp(e,t){var n,r={},a=[],i=e.length;for(n=0;n<i;n++){var o=t(e[n]);r[o]||(r[o]=!0,a.push(e[n]))}return a}function Qp(e,t,n,r){isNaN(t.x0)&&(t.x0=0),isNaN(t.x1)&&(t.x1=n.width),e.moveTo(t.x0,t.y0),e.lineTo(t.x1,t.y0),e.lineTo(t.x1,t.y1),e.lineTo(t.x0,t.y1),e.closePath();var a=t.y1-t.y0,i=t.y0+a/2,o=t.y0,l=t.y1;a<4&&(o=i-2,l=i+2),t._polypoints=[[t.x0,o],[t.x1,o],[t.x1,l],[t.x0,l]]}function Kp(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,a=qy(t.width/2,r/2),i=t.source.x1,o=t.y0-a,l=t.target.x0,s=t.y1-a,c=n.padding||0;i+=c,l-=c;var u=qy(t.width,r),d=(i+l)/2,h=(i+l)/2;return u/2<l-i&&(s<o?h+=u/2:d+=u/2),e.moveTo(i,o),e.bezierCurveTo(d,o,d,s,l,s),e.lineTo(l,s+u),e.bezierCurveTo(h,s+u,h,o+u,i,o+u),e.closePath(),e}function $p(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,a=qy(t.width/2,r/2),i=t.source.x1,o=t.y0-a,l=t.target.x0,s=t.y1-a,c=qy(t.width,r),u=n.padding||0;return i+=u/2,l-=u/2,e.moveTo(i,o),e.lineTo(l,s),e.lineTo(l,s+c),e.lineTo(i,o+c),e.closePath(),t._polypoints=[[i,o],[l,s],[l,s+c],[i,o+c]],e}function Jp(e,t,n,r){var a=3<arguments.length&&void 0!==r?r:.5,i=Uv();return"node"===e._type||"node"===e._type?Qp(i,e,t):"link"===e._type&&("linear"===n.curve?$p:Kp)(i,e,n,a),i}function eg(e,t,n,r,a,i,o){function l(t,n){e.save(),e.fillStyle=n,e.strokeStyle=r.strokeColor,e.lineWidth=h,e.beginPath(),("linear"===r.curve?$p:Kp)(e,t,r,.5),e.translate(t.source.x0,0),e.fill(),h&&e.stroke(),e.restore()}function s(t,r){e.save(),e.fillStyle=r,e.lineWidth=d,e.strokeStyle=n.strokeColor,e.beginPath(),t.color=r,Qp(e,t,n),e.fill(),d&&e.stroke(),e.restore()}var c=t.nodes,u=t.links,d=n.strokeWidth,h=r.strokeWidth;e.save(),e.translate(d,d),Z(r.blendMode)&&(e.globalCompositeOperation=r.blendMode),u.forEach(function(t){if(tg(r.fillColor))l(t,r.fillColor);else if(Z(o)){var n={context:e,name:o[t.source.index]};tb.canvas_patterns.imageFill(n,function(e,n){return l(t,n)})}else l(t,i(t.point))}),c.forEach(function(t){if(tg(n.fillColor))s(t,n.fillColor);else if(Z(o)){var r={context:e,name:o[t.index]};tb.canvas_patterns.imageFill(r,function(e,n){return s(t,n)})}else s(t,a(t.point))}),e.restore()}function tg(e){return e instanceof CanvasPattern}function ng(e,t,n,r){var a=3<arguments.length&&void 0!==r?r:0,i=Bv().extent(t).nodeWidth(Qy(a,e.node.width)).nodeSort(e.node.sort).linkSort(e.link.sort).nodePadding(e.node.padding||0).iterations(n||e.iterations||64).nodeId(function(e){return e.name});return e.align&&i.nodeAlign(aS[e.align]),i}function rg(e,t){this.chart=e,this.renderer=t}function ag(){function e(g,v,y,m,b,x){s=r.params.chartObj;var w=r.params,C=w.labelQueue,k=w.commonPlotOptions,_=s.systemConf,S=(w.dataset,s.dataObject),O=w.datasetIndex||0,A=s.seriesdata[O],P="canvas"===s.plot.renderer.mode,T=A.plotoptions,E=p=Im(Hm(A.plotoptions,{}),k),L=E.link,M=E.node,z=s.cache.sankey,I=z.legendItemsMap,D=z.legend,R=S.sankeyLayout,j=R.graph,H=R.linkLength,B=R.nodeLength,N=s.plotarea,F=N.width,V=N.height,W=L.gradients,Y=Z(s.phase),U=P&&Z(x),G=ei(k,T,s,Nb),X=Y?0:G.duration,q=M.strokeWidth,Q=p.datalabels,K=0,$=0,J=s.imagePallete,ee=Im(Hm(_.chart.plot.events),k.events),te=0,ne=Z(x);i=e.nodeAligns=function(e){var t=Xe(e,"layer"),n=Object.keys(t).map(parseFloat).sort(Wg),r=n.length,a=n.shift(),i=n.pop(),o=[];return n.forEach(function(e){o=[].concat(_toConsumableArray(o),_toConsumableArray(t[e]))}),{start:t[a],center:o,end:t[i]||[],layerCount:r}}(j.nodes),a="inside"===Q.labelPos,d="outside"===Q.labelPos,L.padding,l=Dg(),j.nodes.forEach(function(e){l.set(e.name,e),e.point.arcColor=Ln(s,e.index,e.point,O)});var re=Dg();if(j.links.forEach(function(e){re.set(e.point._key,e),W.type?e.point.arcColor=[e.source.point.arcColor,e.target.point.arcColor]:e.point.arcColor=e.source.point.arcColor}),d&&D.length){var ae=gi(Q,s),ie=xi(ae.hook),oe=2*(ae.padding||0);if(i.layerCount,$=ie.height,K=2*(Q.padding||0)+oe,te=oe/2,ne){var le=_slicedToArray(s.renderer[0].labelWidthOutside,2);h=le[0],f=le[1]}else{var se=gw.get("preCalculation")(null,{},s),ce=_slicedToArray(se,2);h=ce[0],f=ce[1],s.renderer[0].labelWidthOutside=[h,f]}}var ue=[[h+q+K+$,q+te+0],[F-q-f-K-$,V-q-te-0]],de=[F,V],he=Sn(s,0),fe=Sn(s,0,null,de,null,null,W),pe=r.params.hoverOptions=T&&T.hoveroptions?Im(k.hoveroptions,T.hoveroptions,!0):k.hoveroptions,ge=(ue[1][0]-ue[0][0])/i.layerCount*.8;c=function(e,n){var r,a=t(e);if(a)return r=I.get(a.name).index,he(r,a.point,vm,n?vm:M.fillColor,M.fillOpacity)},u=function(e){var t=re.get(e._key),n=(U?pe:L).fillOpacity;if(Z(W.type)){var r=t.source,a=t.target,i=c(r.point,!0),o=c(a.point,!0),l=[a.x0-r.x1,500];return W.options.linear.stopColor=[i,o],fe(r.index,t.point,null,L.fillColor,n,l)}var u=I.get(t.source.name).index;return fe(u,t.point,vm,L.fillColor,n,null,{context:s.context})};var ve=ng(p,ue,Ey,ge);if(e.sankeyLayout=o=H||B?ve(j):j,"legendFilter"===s.phase&&o.nodes.forEach(function(e){e.index=I.get(e.name).index}),e.seriesdataAfterUpdate=[D],e.sankeyOptions=p,P)if(ne){var ye=s.renderer[0].highlighter,me=D[x],be=ye.getDependentLayoutPoints(me),xe=_extends({},L,{fillColor:y.fill,fillOpacity:y["fill-opacity"]});eg(g,be,_extends({},M,{fillColor:y.fill}),xe,c,u,J)}else eg(g,o,M,L,c,u,J);else Y?n(g):function(e,t){var r={x:0,y:0,width:0,height:s.plotarea.height};n(e,r).transition().ease(t.easingType).duration(t.duration).attr("width",s.plotarea.width)}(g,G),function(e,t,n,r,a,i){var o=t.nodes,l=t.links,s=Et("g",".sankey-chart",[1],e).attr("transform","translate("+n.strokeWidth+","+n.strokeWidth+")"),c=Et("g",".sankey-links",[1],s),u=Et("g",".sankey-nodes",[1],s);Et("path",".sankey-link",l,c,null,function(e){return e.point}).attrs({d:function(e){return this.index=e.index,Jp(e,n,r)}}).styles({fill:function(e){return i(e.point)},"fill-opacity":r.fillOpacity,stroke:r.strokeColor,"stroke-width":r.strokeWidth,"mix-blend-mode":r.blendMode}),Et("path",".sankey-node",o,u,null,function(e){return e.point}).attrs({d:function(e){return Jp(e,n,r)}}).styles({fill:function(e){return a(e.point)},"fill-opacity":n.fillOpacity,stroke:n.strokeColor,"stroke-width":n.strokeWidth})}(g,o,M,L,c,u);var we=H||B?D.filter(function(e){return!e.disabled}):[];C.length=0,C.push({renderer:e,charttype:"hierarchy",chartObj:s,args:[s.seriesdata[0],0,vm,vm,null,we,[0,0]]});var Ce=Et("path",".temp-sankey-path",[1],s.svg).styles({"pointer-events":"none",fill:"none",stroke:"none"}),ke=Ce.node();e.getPath=function(e,t){return Ce.attr("d",Jp(e,M,L,t)),ke},e.getLinkByPoint=function(e){return re.get(e._key)},e.getNodeByPoint=function(e){return l.get(e._key)},D.disabled=function(){return!1===ee.enabled},s.cache.customPoints.sankeyNodes={"0_0":D},setTimeout(function(){e.chartRendered=!0},X)}function t(e,t){var n=function(e,t){var n=s.dataset.getColumn(t,0);return Aa(n[n.datatype],e,n.datatype,s)}(s.dataset.getX(e),"x");return Hm(t,l).get(n)}function n(e,t){var n=1<arguments.length&&void 0!==t?t:{x:0,y:0,width:s.plotarea.width,height:s.plotarea.height},r="sankey-animation-clip-"+s.idNumeric,a=jx.createElement("rect",r,s);return a.interrupt(),jx.setAttributes(a,n,["x","y","width","height"]),e.attr("clip-path","url(#"+r+")"),s.container.selectAll(".labelholder").attr("clip-path","url(#"+r+")"),a}var r=void 0,a=!1,i=void 0,o=void 0,l=void 0,s=void 0,c=void 0,u=void 0,d=!1,h=0,f=0,p=void 0;return e.getHighlighter=function(t,n){return e.highlighter=new rg(t,e,o)},e.getPosition=function(e,n){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,o=arguments[3],l=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,s=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,c=t(e);if(a)return{x:c.x0,y:c.y0,width:c.x1-c.x0,height:c.y1-c.y0};var u=void 0,h=c.x1-c.x0,f=(c.y1,c.y0,0),p=2*l;return n&&(f=Qy(n.width,o)),u=Re(i.start,c)?d?c.x0-s-2*r-f-p:c.x1+s:Re(i.end,c)?d?c.x1+s:c.x0-f-s-2*r-p:c.x0+h/2-f/2-r-p,{x:u,y:c.y0,width:f+2*r+p,height:c.y1-c.y0}},e.getLabelAnchor=function(e){var n=t(e);return a?fb:Re(i.center,n)?fb:Re(i.end,n)?d?hb:pb:d?pb:hb},e.getSankeyNodeByPoint=t,e.getColor=function(e,t){return!Z(p[e._type].fillColor)&&Z(e.arcColor)?e.arcColor:"node"===e._type?c(e):"link"===e._type?u(e,t):void 0},e.commonRendererProp=function(t){return t?(r=t,e):r},e}var ig,og,lg,sg,cg,ug,dg,hg=t,fg=t.select,pg=t.selectAll,gg=t.min,vg=t.max,yg=t.pairs,mg=(dg={top:t.axisTop,bottom:t.axisBottom,left:t.axisLeft,right:t.axisRight},function(e,t){return dg[e](t)}),bg=(ug={linear:t.easeLinear,quad:t.easeQuad,"quad-in-out":t.easeQuadInOut,"quad-in":t.easeQuadIn,"quad-out":t.easeQuadOut,cubic:t.easeCubic,"cubic-in-out":t.easeCubicInOut,"cubic-in":t.easeCubicIn,"cubic-out":t.easeCubicOut,sin:t.easeSin,"sin-in-out":t.easeSinInOut,"sin-in":t.easeSinIn,"sin-out":t.easeSinOut,exp:t.easeExp,"exp-in-out":t.easeExpInOut,"exp-in":t.easeExpIn,"exp-out":t.easeExpOut,circle:t.easeCircle,"circle-in-out":t.easeCircleInOut,"circle-in":t.easeCircleIn,"circle-out":t.easeCircleOut,elastic:t.easeElastic,"elastic-in-out":t.easeElasticInOut,"elastic-in":t.easeElasticIn,"elastic-out":t.easeElasticOut,back:t.easeBack,"back-in-out":t.easeBackInOut,"back-in":t.easeBackIn,"back-out":t.easeBackOut,bounce:t.easeBounce,"bounce-in-out":t.easeBounceInOut,"bounce-in":t.easeBounceIn,"bounce-out":t.easeBounceOut},function(e){return ug[e]||t.easeLinear}),xg=t.easeLinear,wg=(cg={linear:t.curveLinear,linearClosed:t.curveLinearClosed,cardinal:t.curveCardinal,cardinalClosed:t.curveCardinalClosed,monotone:t.curveMonotoneX,monotoneY:t.curveMonotoneY,stepBefore:t.curveStepBefore,stepAfter:t.curveStepAfter,"linear-closed":t.curveLinearClosed,"cardinal-closed":t.curveCardinalClosed,"step-before":t.curveStepBefore,"step-after":t.curveStepAfter},function(e,t,n){var r=cg[e];return"monotone"==e&&t&&(r=cg.monotoneY),null!=n&&r.tension&&r.tension(n),r}),Cg=(sg={squarify:t.treemapSquarify,slice:t.treemapSlice,dice:t.treemapDice,sliceDice:t.treemapSliceDice,resquarify:t.treemapResquarify},function(e){return sg[e]||sg.squarify}),kg=function(){var e=t.scaleLinear();return e.ticks=function(e){var n=this.domain();return t.ticks(n[0],n[n.length-1],null==e?10:e)},e},_g=t.scaleBand,Sg=t.scaleTime,Og=t.scalePoint,Ag=t.scaleOrdinal,Pg=t.scaleSqrt,Tg=t.scaleSymlog,Eg=t.bisector,Lg=t.sum,Mg=t.hsl,zg=function(){var e=t.rgb.apply(this,arguments);return(isNaN(e.r)||isNaN(e.g)||isNaN(e.b))&&(e=t.rgb(0,0,0,e.opacity)),e},Ig=t.merge,Dg=t.map,Rg=t.set,jg=t.zoom,Hg=t.zoomTransform,Bg=t.zoomIdentity,Ng=t.drag,Fg=t.extent,Vg=t.dispatch,Wg=t.ascending,Yg=t.descending,Ug=t.line,Gg=t.radialLine,Xg=t.area,Zg=t.radialArea,qg=t.arc,Qg=t.hierarchy,Kg=t.pack,$g=t.pie,Jg=t.partition,ev=t.treemap,tv=t.interpolate,nv=t.interpolateRgb,rv=t.interpolateRound,av=t.range,iv=t.timeSunday,ov=t.timeMonday,lv=t.timeTuesday,sv=t.timeWednesday,cv=t.timeThursday,uv=t.timeFriday,dv=t.timeSaturday,hv=t.timeSeconds,fv=t.timeHours,pv=t.timeDays,gv=t.timeWeeks,vv=t.timeMonths,yv=t.timeYears,mv=t.format,bv=t.timeFormat,xv=t.utcFormat,wv=t.timeParse,Cv=t.brush,kv=t.brushX,_v=t.brushY,Sv=t.brushSelection,Ov=t.topojson,Av=t.versor,Pv=t.geoPath,Tv=t.geoGraticule,Ev=t.geoCentroid,Lv=t.polygonContains,Mv=t.geoDistance,zv=t.geoContains,Iv=t.quadtree,Dv=t.namespace,Rv=t.namespaces,jv=t.customEvent,Hv=function(e){return e&&(hg.event=e),hg.event},Bv=y,Nv=o,Fv=r,Vv=a,Wv=i,Yv=(hg.linkHorizontal,hg.polygonCentroid),Uv=hg.path,Gv=function(){},Xv=function(){},Zv=function(){},qv=function(){},Qv=function(){};Qv.canvas=function(){};var Kv={},$v=Kv.line=11,Jv=Kv.pie=8,ey=Kv.bar=9,ty=Kv.stkdbar=10,ny=Kv.scatter=12,ry=Kv.area=14,ay=Kv.stkdarea=15,iy=Kv.bubble=20,oy=Kv.packedbubble=19,ly=Kv.funnel=7,sy=Kv.web=16,cy=Kv.sunburst=17,uy=Kv.pyramid=13,dy=Kv.dial=18,hy=Kv.bullet=6,fy=Kv.arearange=21,py=Kv.bubblepie=5,gy=Kv.gantt=24,vy=Kv.treemap=4,yy=Kv.heatmap=3,my=Kv.dotgrid=26,by=Kv.waterfall=27,xy=Kv.wordcloud=2,wy=Kv.geoheatmap=30,Cy=Kv.geoscatter=31,ky=Kv.geobubble=32,_y=Kv.geobubblepie=33,Sy=Kv.boxplot=35,Oy=Kv.sankey=36,Ay=Dg();Ay.set(Kv.line,"line"),Ay.set(Kv.pie,"pie"),Ay.set(Kv.bar,"bar"),Ay.set(Kv.stkdbar,"bar"),Ay.set(Kv.scatter,"scatter"),Ay.set(Kv.area,"area"),Ay.set(Kv.funnel,"funnel"),Ay.set(Kv.web,"web"),Ay.set(Kv.stkdarea,"area"),Ay.set(Kv.sunburst,"sunburst"),Ay.set(Kv.pyramid,"pyramid"),Ay.set(Kv.bubble,"bubble"),Ay.set(Kv.dial,"dial"),Ay.set(Kv.packedbubble,"packedbubble"),Ay.set(Kv.bullet,"bullet"),Ay.set(Kv.arearange,"arearange"),Ay.set(Kv.gantt,"gantt"),Ay.set(Kv.bubblepie,"bubblepie"),Ay.set(Kv.treemap,"treemap"),Ay.set(Kv.heatmap,"heatmap"),Ay.set(Kv.dotgrid,"dotgrid"),Ay.set(Kv.waterfall,"waterfall"),Ay.set(Kv.wordcloud,"wordcloud"),Ay.set(Kv.geoheatmap,"geoheatmap"),Ay.set(Kv.geoscatter,"geoscatter"),Ay.set(Kv.geobubble,"geobubble"),Ay.set(Kv.geobubblepie,"geobubblepie"),Ay.set(Kv.boxplot,"boxplot"),Ay.set(Kv.sankey,"sankey");var Py={};Py.axis=[$v,ry,ny,ay,ey,ty,iy,hy,fy,py,gy,yy,by,Sy],Py.flow=[Oy],Py.nonaxis=[Jv,ly,uy,dy,my],Py.nonaxismultiseries=[sy,cy,oy,vy,xy],Py.polarAxis=[sy],Py.hierarchy=[oy,cy,vy],Py.continous=[$v,ry,ny,ay,iy,fy,py],Py.discrete=[Jv,ey,ty,cy,ly,uy,dy,hy,gy,yy,by,Sy],Py.dotPlot=[ny,iy,Cy,ky],Py.piePlot=[Jv,py,_y],Py.zaxis=[iy,py,yy,ky,_y,Oy],Py.svgOnly=[Jv,ly,uy,dy,cy,oy,py,gy,by,_y,Sy],Py.geo=[wy,Cy,ky,_y],Py.bubble=Rg([iy,ky]),Py.bubblePie=Rg([py,_y]),Py.rangePlot=Rg([fy,gy,Sy]),Py.barPlot=Rg([ey,ty,hy,gy,yy,by,Sy]),Py.markerPlot=Rg([ny,iy,$v,ry,fy]),Py.stacked=[ey,by,hy,$v,ry,sy],Py.stackedPercent=[ey,$v,ry,sy,ty,ay],Py.innerLabels=[Jv,ly,uy,cy,py,_y],Py.datalabelsInside=[oy,yy,vy,wy],Py.parentLabels=[vy,cy],Py.nonAxisSingleSourceEvent=[vy,xy],Py.singleSourceEvent=[].concat(_toConsumableArray(Py.axis),_toConsumableArray(Py.polarAxis),_toConsumableArray(Py.flow),_toConsumableArray(Py.nonAxisSingleSourceEvent));var Ty,Ey,Ly={},My={},zy={},Iy={},Dy=function(){},Ry={},jy=Dg(),Hy=/\{\{val\((\d+)\)\}\}|\{\{col\((\d+)\)\}\}|\{\{per\((\d+)\)\}\}|\{\{splitper\((\d+)\)\}\}|\{\{maxper\((\d+)\)\}\}|\{\{geo\(([a-z0-9\-\_]+)\)\}\}|\{\{clr\}\}|\{\{valatpos\((\d+)\)\[(\d+)\]\}\}/gi,By=/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/i,Ny=/(illuminate|moody|flip|boxShadow|invert|ridge)/,Fy=/(fadeOut|blur|grayscale|saturate)/,Vy=window.console,Wy=document.createElement("canvas").getContext("2d"),Yy=function(e){return e&&e.document?e.document:window},Uy=Math,Gy=Uy.round,Xy=Uy.floor,Zy=Uy.ceil,qy=Uy.max,Qy=Uy.min,Ky=Uy.abs,$y=Uy.pow,Jy=Uy.sqrt,em=Uy.cos,tm=Uy.sin,nm=Uy.log,rm=Uy.tan,am=Uy.atan2,im=Uy.atan,om=Uy.LN10,lm=Uy.random,sm=Uy.PI,cm=2*sm/360,um=Number.MAX_SAFE_INTEGER||9007199254740991,dm=Number.EPSILON||2.220446049250313e-16,hm="px ",fm="none",pm="transparent",gm="pointer",vm=null,ym=[],mm=Yy().devicePixelRatio||1,bm=(b._empty=!0,b),xm={},wm=x,Cm=w,km={getComponent:x,setComponent:w,getComponentMethod:function(e,t){return(x(e)||bm)[t]||bm}},_m=window.location.protocol+"//"+window.location.hostname+"/src/images/",Sm={minsize:15,maxsize:40,ratio:.038},Om=!1,Am=!1;km.setComponent("dataEncoded",C);var Pm=window.btoa||function(e){e=String(e);var t,n,r,a,i,o,l,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c=0,u=[];if(/[^\x00-\xFF]/.test(e))throw Error("InvalidCharacterError");for(;c<e.length;)a=(t=e.charCodeAt(c++))>>2,i=(3&t)<<4|(n=e.charCodeAt(c++))>>4,o=(15&n)<<2|(r=e.charCodeAt(c++))>>6,l=63&r,c===e.length+2?l=o=64:c===e.length+1&&(l=64),u.push(s.charAt(a),s.charAt(i),s.charAt(o),s.charAt(l));return u.join("")};Object.defineProperty(SVGElement.prototype,"innerHTML",{configurable:!0,get:function(){for(var e=[],t=this.firstChild;t;)_(t,e),t=t.nextSibling;return e.join("")},set:function(e){for(;this.firstChild;)this.removeChild(this.firstChild);try{var t=new DOMParser;t.async=!1;for(var n="<svg xmlns='http://www.w3.org/2000/svg'>"+e+"</svg>",r=t.parseFromString(n,"text/xml").documentElement.firstChild;r;)this.appendChild(this.ownerDocument.importNode(r,!0)),r=r.nextSibling}catch(e){throw new Error("Error parsing XML string")}}}),Object.defineProperty(SVGElement.prototype,"innerSVG",{configurable:!0,get:function(){return this.innerHTML},set:function(e){this.innerHTML=e}}),String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{value:function(e,t){var n=0<t?0|t:0;return this.substring(n,n+e.length)===e}}),function(){try{document.createElement("div").style.setProperty("opacity",0,"")}catch(a){var e=window.Element.prototype,t=e.setAttribute,n=e.setAttributeNS,r=window.CSSStyleDeclaration.prototype.setProperty;e.setAttribute=function(e,n){t.call(this,e,""+n)},e.setAttributeNS=function(e,t,r){n.call(this,e,t,""+r)},window.CSSStyleDeclaration.prototype.setProperty=function(e,t,n){r.call(this,e,""+t,n)}}}();var Tm,Em,Lm,Mm=window.Set;Mm&&Mm.prototype.values||(Tm=0,Em=Object.defineProperties,(Lm=Em(S.prototype,{size:{configurable:!0,get:function(){return this._v.length}}})).add=function(e){return O(this,e)||this._v.push(e),this},Lm.clear=function(){var e=this._v.length;this._v.splice(0,e)},Lm.delete=function(e){return O(this,e)&&!!this._v.splice(Tm,1)},Lm.entries=function(){return this._v.map(A)},Lm.forEach=function(e,t){this._v.forEach(function(n,r){e.call(t,n,n,this)},this)},Lm.has=function(e){return O(this,e)},Lm.keys=Lm.values=function(){return this._v.slice(0)},Mm=S),Math.sign=Math.sign||function(e){return(0<e)-(e<0)||+e},Math.log1p=Math.log1p||function(e){if((e=Number(e))<-1||e!=e)return NaN;if(0===e||e===1/0)return e;var t=e+1-1;return 0==t?e:e*(Math.log(e+1)/t)},Math.expm1=Math.expm1||function(e){return Math.exp(e)-1};var zm=function(){};zm.drawBorderBox=P,zm.getActualTextBounds=function(e,t,n){t=t;var r=e,a=n*(2*sm/360),i={};return i.width=Ky(r*tm(a))+Ky(t*em(a)),i.height=Ky(r*em(a))+Ky(t*tm(a)),i};var Im=zm.mergeJSON=function(e,t,n,r){e=e||{},t=t||{};var a=null!=r&&1==r?e:Dm(e);for(var i in t)t.hasOwnProperty(i)&&(null!=a[i]?null==t[i]||t[i].constructor!=Object&&t[i].constructor!=Array?1==n&&"object"===(void 0===a?"undefined":_typeof(a))&&(a[i]=t[i]):a[i]=Im(a[i],t[i],n,r):a[i]=t[i]);return a};km.setComponent("utils.mergeJSON",Im),zm.getValueOfPlotOptions=function(e,t){return function(n){return null!=e&&null!=e[n]?e[n]:null!=t&&null!=t[n]?t[n]:null}},zm.getVal=T,zm.generateIdByPropValue=E,zm.getMonochromeColor=L,km.setComponent("domUtils.getBBox",M);var Dm=zm.simpleClone=function(e){var t,n=e;if(e&&"object"===(void 0===e?"undefined":_typeof(e)))for(t in n=te(e)?[]:{},e)n[t]=Dm(e[t]);return n};km.setComponent("utils.simpleClone",Dm),km.setComponent("domUtils.decodeHTML",z),zm.encodeHTML=I,zm.validateURL=D,zm.d3_values=R,km.setComponent("domUtils.getDefsLocation",j),zm.isObjectPropDefined=H,km.setComponent("utils.isUndefined",B),km.setComponent("utils.toArray",N),zm.objectToArray=F,km.setComponent("utils.invokeFunction",V),zm.getValue=W,zm.getValByPriority=Y,km.setComponent("utils.validateNullValue",U),zm.validateValWithinLimit=G,zm.isWithinRange=X,km.setComponent("utils.defined",Z),zm.isPositive=q,zm.isNull=Q,zm.isTrue=K,zm.shorthand_px=$,zm.pInt=J,zm.isString=function(e){return"string"==typeof e},zm.isObject=ee,km.setComponent("utils.isArray",te),zm.isNumber=ne,zm.jsonStringify=re;var Rm=zm.getPropVal=function(e,t){return H(e,t,!0)},jm=zm.setPropVal=function(e,t,n){var r=(t=(t=t.replace(/\[(\w+)]/g,".$1")).replace(/^\./,"")).split(".");return function e(t){var a=r.shift();return null===a||0===r.length?(t[a]=n,!1):(null!==t[a]&&"object"===_typeof(t[a])||(t[a]=isNaN(parseInt(r[0]))?{}:[]),void e(t[a]))}(e),e};zm.intersectObject=ae,zm.isDarkColor=ie,zm.isLightColor=function(e){return!ie(e)},zm.getContrastColor=oe,zm.isWindow=le,zm.getWindow=se,zm.offset=ce,zm.stringifiedArrayReverse=ue,zm.isDocumentVisible=de,zm.elementIsVisible=function(e,t,n){var r=t.offsetHeight,a=ce(e).top-ce(t).top,i=a+e.offsetHeight;return 0<=a&&i<=r||n&&(a<0&&0<i||0<a&&a<=r)};var Hm=function(){var e,t,n=arguments,r=n.length;for(e=0;e<r;e++)if(Z(t=n[e]))return t;return n[r-1]};zm.pick=Hm,zm.arrayJoin=function(){var e=N(arguments),t=!0===e[0]&&e.shift(),n=t?e.shift():[];return t&&!e.length||e.forEach(function(e){for(var t=0,r=e.length;t<r;++t)n.push(e[t])}),n},zm.sortByLength=function(e){return e.slice(0).sort(function(e,t){return Z(e)||(e=""),Z(t)||(t=""),t.length-e.length})},zm.sortByIndices=he,zm.isHidden=fe,zm.each=pe,zm.extend=ge,zm.inherit=ve,zm.removeElementFromArray=function(e,t){var n=e.indexOf(t);return-1<n&&e.splice(n,1),e},zm.getStyle=ye,zm.isHTMLElement=me,zm.splat=be,zm.parseShortHandValue=xe,zm.getBorderRadius=we,zm.priorityBasedValue=Ce,zm.toCapitalize=ke,zm.fixHDPI=_e,zm.arrayFind=Se,zm.moveArrayElement=function(e,t,n){e.splice(n,0,e.splice(t,1)[0])},zm.getRootNode=Oe,zm.isShadowElement=Ae,zm.isShadowRoot=Pe,zm.isElementOnDocument=Te,zm.isElementVisible=Ee,zm.getRootBody=Oe,zm.getDocumentIndex=Me,zm.getBoundingRect=ze,zm.perToPx=Ie,zm._super=De;var Bm=zm.arrayIncludes=Re;zm.numberIsBetween=je,zm.isStylePropertySupported=He,zm.isEmptyObject=Be,zm.boundToRect=Ne,zm.getDistinct=Fe,zm.objectValues=Ve;var Nm,Fm=(Nm=null,function(){if(Z(Nm))return Nm;var e=fg(document.body||document.documentElement).append("div").styles({width:"100%",visibility:"hidden",overflow:"scroll","-ms-overflow-style":"scrollbar"}),t=e.append("div").styles({width:"100%"});return Nm=e.node().offsetWidth-t.node().offsetWidth,e.remove(),Nm});zm.getScrollbarWidth=Fm;var Vm;zm.elementIsScrollable=We,zm.searchIndex=Ye,zm.objectEntries=Ue,zm.firstAndLastItem=Ge,zm.groupBy=Xe,zm.destroyObjectProperties=Ze,hg.rebind=function(e,t){for(var n,r=1,a=arguments.length;++r<a;)e[n=arguments[r]]=Qe(e,t,t[n]);return e},(Vm=hg).quadtree.prototype.findAll=function(e,t,n,r){var a=this,i={points:[],visited:[]};return a._size=a._size||function(){return 0},ee(n)?a.visit(function(e,t,n,r){var a=e[0][0],i=e[0][1],o=e[1][0],l=e[1][1];return function(e,s,c,u,d){if(!e.length)do{var h=e.data,f=r._x(h),p=r._y(h);n.push(h),a<=f&&f<o&&i<=p&&p<l&&t.push(h)}while(e=e.next);return o<=s||l<=c||u<a||d<i}}(n,i.points,i.visited,a)):a.visit(function(e,t,n,r,a,i){var o=t,l=e.x-o,s=e.x+o,c=e.y-o,u=e.y+o;return function(t,o,d,h,f){if(!t.length){a.push(t.data);do if(t.data){var p=e.x-i._x(t.data),g=e.y-i._y(t.data);Jy(p*p+g*g)<=i._size(t.data)/2+n&&r.push(t.data)}while(t=t.next)}return s<o||h<l||u<d||f<c}}({x:e,y:t},n,r,i.points,i.visited,a)),i},Vm.quadtree.prototype.size=function(e){return k(e)&&(this._size=e),this},hg.selection.prototype.first=function(){return hg.select(this.nodes()[0])},hg.selection.prototype.last=function(){return hg.select(this.nodes()[this.size()-1])},hg.selection.prototype.removeAllListeners=function(){var e=this,t=void 0;return(t=this.node()&&this.node().__on)&&t.forEach(function(t){return e.on("."+t.name,vm)}),this},hg.selection.prototype.isD3Selection=!0;var Wm="text",Ym="tspan",Um="path",Gm="circle",Xm="line",Zm="div",qm="svg",Qm={};Qm.fontFamily="'Roboto','Open Sans',sans-serif",Qm.fontColor="#616161",Qm.fontStyle=null,Qm.fontWeight=null,Qm.fontL1Size=null,Qm.fontL2Size=null,Qm.fontL3Size=null,Qm.DOMBorder="none";var Km=new function(){this.NETSCAPE=0,this.FIREFOX=0,this.OPERA=0,this.IE=0,this.SAFARI=0,this.MOZILA=0,this.CHROME=0,this.NONIE=1,this.WEBKIT=0;var e=navigator.userAgent.toLowerCase();this.OSX=-1!=e.indexOf("mac"),this.WINDOWS=-1!=e.indexOf("windows"),this.LINUX=-1!=e.indexOf("linux"),this.IPHONE=-1!=e.indexOf("iphone"),this.IPAD=-1!=e.indexOf("ipad"),this.ANDROID=-1!=e.indexOf("android"),this.IS_IOS=this.IPHONE||this.IPAD,this.isTouchDevice="ontouchstart"in window||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints,this.isMouseDevice=!(this.IS_IOS||this.ANDROID||-1!=e.indexOf("mobile")),this.uiwebview=this.IS_IOS&&!/safari/.test(e),this.PHANTOMJS=-1!==e.indexOf("phantomjs"),this.WKWebView=this.uiwebview&&-1!=e.indexOf("wkwebview");var t="";this.detect=function(){var e=navigator.userAgent,n=e.length,r=navigator.vendor,a="";window.opera?(this.OPERA=1,t="o"):-1<e.indexOf("Chrome")?(this.CHROME=1,a="Chrome/",t="webkit"):-1<e.indexOf("Firefox")?(this.FIREFOX=1,a="Firefox/",t="moz"):-1<e.indexOf("MSIE ")||-1<e.indexOf("Trident/")?(this.IE=1,a="MSIE ",t="ms"):-1<r.indexOf("Apple")?(this.SAFARI=1,a="Version/",t="webkit"):a="Unknown Browser",this.VERSION=e.substring(e.indexOf(a),n).match(/[0-9\.]+/)[0]},this.detect(),this.NONIE=!this.IE,this.WEBKIT=this.SAFARI||this.CHROME,this.prefix={lowercase:t,css:t?"-"+t+"-":t,js:t?t[0].toUpperCase()+t.substr(1):t}};km.setComponent("browser",Km);var $m={solid:"",shortdash:"1.5,1.5",shortdot:"0.1,1.5",dashed:"2.5,2.5",longdash:"5,5",dotted:"0.1,2.5",shortdashdotdot:"1.5,2,0.1,2,0.1,2",dashdot:"2.5,2.5,0.1,2.5",longdashdot:"5,5,0.1,5",longdashdotdot:"5,2.5,0.1,2.5,0.1,2.5"},Jm={},eb=function(e){return{type:Jm[e].type,size:Jm[e].size,strokeWidth:Jm[e].strokeWidth,bgClr:Jm[e].bgClr,stroke:Jm[e].stroke,fillOpacity:Jm[e].fillOpacity,strokeOpacity:Jm[e].strokeOpacity,translate:Jm[e].translate}};km.setComponent("patterns.get",eb);var tb=function(){};km.setComponent("effects",tb),tb.get=function(e,t,n,r){var a=(r=r||{}).offset,i=(r.dimension,r.returnSVGimage),o=r.base64,l=r.chartObj,s="svgPattern"==r.moduleType?tb.svg_patterns:null;if(e=e||s,(null!=t||""!=t)&&e[t]){var c;l&&l.getPatternSvg?c=l.getPatternSvg():(c=Hm(r.renderTo,Qm.patternSVG)).isD3Selection||(c=fg(c));var u,d="zp"+E(n,t);if(null!=d){var h=Me(c.node()),f=ym&&h&&ym[h].EFFECTS;return f&&Z(f[d])?(u=f[d],i?u:u.id||u):(u=e[t](n,d,a,i,o,l,c))?(f&&(f[d]=u),i?u:u.id||u):void 0}}};var nb="center",rb="left",ab="right",ib="bottom",ob="top",lb="fixedTop",sb="vertical",cb="horizontal",ub="inner",db="outer",hb="start",fb="middle",pb="end",gb={center:fb,right:pb,left:hb};km.setComponent("domUtils.appendElement",mt),km.setComponent("domUtils.applyFont",kt),zm.fontUtils={getTextWidth:function(e,t,n,r,a){r=r||"normal",a=a||"normal",Wy.save(),Wy.font=r+" "+a+" "+(t||12)+"px "+(n||Qm.fontFamily);var i=Wy.measureText(e).width;return Wy.restore(),i},getTextHeight:function(e,t,n,r,a,i){return i?t:t<24?t+3:~~(1.195*t)}},zm.createElement=Et,zm.setStyles=Mt,zm.svgBoxShadow=zm.setStyles;var vb="bar",yb="bullet",mb="gantt",bb="waterfall",xb="area",wb="arearange",Cb="line",kb="scatter",_b="geoscatter",Sb="bubble",Ob="geobubble",Ab="bubblepie",Pb="geobubblepie",Tb="pie",Eb="dial",Lb="funnel",Mb="pyramid",zb="web",Ib="heatmap",Db="sunburst",Rb="packedbubble",jb="treemap",Hb="wordcloud",Bb="boxplot",Nb="sankey",Fb="fadeAll",Vb="fadeOneByOne",Wb="fadeRandom",Yb="fade",Ub="sizing",Gb="sizingRandom",Xb="randomOut",Zb="vertical",qb="verticalAll",Qb="vertPathTween",Kb="vertPathTweenAll",$b="horizontalAll",Jb="horiPathTween",ex="strokeTween",tx="pointTween",nx="pointbypoint",rx="allseries",ax="onebyone",ix=Rg(["geo-location-1","geo-location-2","geo-location-3","geo-flag-1","geo-flag-2","geo-flag-3","geo-pin-1","geo-pin-2","geo-pin-3"]);km.setComponent("svg.symbolPath",Bt),km.setComponent("svgRenderer.marker",Nt);var ox="ordinal",lx="time",sx="numeric",cx={};cx.saveEncode=function(e,t,n,r){var a=this.encodes[e]=this.encodes[e]||{},i=a[t];i=i||(a[t]={seriesData:[],seriesIndices:[]});var o=this.processedseriesData[n];i.seriesData.push(r||o),i.seriesIndices.push(n)},cx.getEncode=function(e,t){var n=this.encodes[e]||{};return 1<arguments.length?n[t=t||0]:n},cx.filterEncode=function(e,t){var n=this.encodes[e]||{};return 1<arguments.length?Ve(n).filter(function(e){return t(e)}):n},km.setComponent("defaultDataProcessor",Gt);var ux=Gt.prototype;ux.initialize=function(e){var t=this,n=t.data,r=t.globalChartType=n.seriesdata&&n.seriesdata.type,a=n.metadata,i=t.dataset,o=t.processedseriesData,l=Gt.helpers,s=t.chartObj;if(i.setDataObj(t),i.seriesTypes=Rg(),t.totalnoofdatas=0,t.encodes={},t.markerSize={},s.cache.data={},s.cache.search={},s.cache.customPoints={},te(o)){var c=l.groupByDataIndices(a);t.allChartTypes=t.allChartTypes||l.getAllChartTypes(n),(t.pivot?Yt(t):[{data:o}]).forEach(function(e){e.data.forEach(function(e){var n=l.getChartType(e.node&&e.node.type||e.type||r,sx);t.isAxisCategory=t.isAxisCategory||Re(Py.axis,n),t.isPolarAxisCategory=t.isPolarAxisCategory||Re(Py.polarAxis,n),t.isNonAxisMultiSeriesCategory=t.isNonAxisMultiSeriesCategory||Re(Py.nonaxismultiseries,n),t.singleSourceEvent=t.singleSourceEvent||Re(Py.singleSourceEvent,n),t.hasLevelMarker=t.hasLevelMarker||n==Kv.bullet||n==Kv.dial,Py.markerPlot.has(n)&&(t.markerSize[Ay.get(n)]=Rg())})}),o.forEach(function(n,a){var o=n.disabled,s=n.data,u=l.is3D(s),d=l.getChartType(n.type||r,sx);i.seriesTypes.add(d),"addorremoveseries"!==e&&!u&&te(s)&&(s=t.convertTo3DArray(n,c,d)),!o&&te(s)&&t.totalDataCount(s)})}},ge(ux,cx);var dx={};dx.getProcessedColorRange=function(e,t,n,r){function a(e,n){if(1===e.length?c?e[0]===t[d]:e[0]===t[d+1]:e[0]===t[d]&&e[1]===t[d+1])return f=n,!0}var i=n.colorBand,o=i.stops,l=i.ranges,s=[],c=r.dataset.getDataType("clr")===ox,u="discrete"!==qt(n,r);if(l&&l.length){l=Xt(n,r,!0);for(var d=0,h=t.length;d<h;c?d++:d+=2){var f=-1;l.some(a),-1===f||!u&&l[f].disabled?s.push(null):s.push(e[f%e.length])}}else if(!c&&o&&o.length){var p=0;t.forEach(function(t,n){var r=o.indexOf(t);-1===r&&(r=p),s.push(e[r%e.length]),p=r})}else s=e;return s},dx.getColorDomain=function(e){var t=e.systemConf.legend,n=t.colorBand,r=n.stops,a=n.ranges,i=dx.getMinMax(e),o=Hm(n.minRange,i[0])||0,l=Hm(n.maxRange,i[1])||0,s=e.dataset.getDataType("clr")===ox;if(a&&a.length){var c=Xt(t,e),u=[];if(s)u=c;else{if(1===c[0].length){var d=o;c=c.map(function(e){var t=[d,e[0]];return d=t[1],t})}(u=c).splice(0,0,[-1/0,-um]),u.splice(u.length,0,[um,1/0])}return Ig(u)}if(!s&&r&&r.length){var h=R(r);h.sort(Wg);var f=h.filter(function(e){var t=!0;return Z(n.minRange)&&(t=t&&e>=n.minRange),Z(n.maxRange)&&(t=t&&e<=n.maxRange),t});return(o<f[0]||!f.length)&&f.splice(0,0,o),l>f[f.length-1]&&f.splice(f.length,0,l),f}return[o,l]},dx.getMinMax=function(e){var t=dx.getAllColorData(e);return Fg(t)},dx.getCategories=function(e){return Fe(dx.getAllColorData(e))},dx.getAllColorData=function(e){var t=e.seriesdata,n=[];return t.forEach(function(t){if(!t.disabled){var r=t.data||t;dx.pushColorData(e,r,n)}}),n},dx.pushColorData=function(e,t,n){if(t&&te(t)&&t.every(te))t.forEach(function(t){dx.pushColorData(e,t,n)});else{var r=e.dataset.getClr(t);n.push(r)}},dx.isQuantileColorScale=function(e){return e.axes.clr?"quantile"===e.axes.clr.scaleType:Z(e.dataset.clridx)&&!e.dataObject.isPolarAxisCategory&&e.systemConf.legend.colorBand.type!==fm},dx.getItemIndex=function(e,t,n,r){var a=n&&e.dataset.getClr(n);return t?t(a):r},dx.getIndexScale=function(e){var t,n=dx.isQuantileColorScale(e),r=e.systemConf.legend,a=r.colorBand.ranges;if(n&&a&&a.length){var i,o=e.axes.clr.scale,l=o.domain(),s=e.patternPallete,c=e.imagePallete;c&&c.length?i=c:s&&s.length&&(i=s),i&&(t=o.copy()).range(dx.getProcessedColorRange(av(i.length),l,r,e))}return t},km.setComponent("colorscale_helpers",dx),km.setComponent("utils.isCategoryOf",cn),km.setComponent("utils.getChartTypeByIndex",ln);var hx="nested",fx="list",px="band";km.setComponent("color.rgb2hex",Cn),km.setComponent("color.toneColor",_n),km.setComponent("color.isWithinColorRange",Pn),km.setComponent("color.getRawColor",Ln),km.setComponent("color.getColorByIndex",Mn),km.setComponent("color.getIndexForItem",Rn),km.setComponent("geometryUtils.circle.closestToCircle",Vn),km.setComponent("geometryUtils.circle.isCircleWithinCircle",Fn),km.setComponent("geometryUtils.circle.outerTangentPoints",Wn),km.setComponent("geometryUtils.polygon.outerTangentPoints",Yn);var gx={rotatePoint:function(e,t,n){var r=2<arguments.length&&void 0!==n?n:{x:0,y:0},a=e.x,i=e.y,o=r.x,l=r.y;return{x:(a-o)*em(t)+(i-l)*tm(t)+o,y:(a-o)*tm(t)-(i-l)*em(t)+l}},pointInRectangle:function(e,t){var n,r,a=t.x||0,i=t.y||0,o=a+t.width,l=i+t.height;return r=te(e)?(n=e[0],e[1]):(n=e.x,e.y),a<=n&&n<=o&&i<=r&&r<=l},degreeToRadian:function(e){return e/180*sm},areaOfEllipse:function(e,t){return sm*e*t},areaOfCircle:function(e){return sm*e*e},areaOfRect:function(e,t){return e*t},dist:Nn,outerTangentPoints$Circle:Wn,tangentPoints$Polygon:Yn};km.setComponent("geometryUtils.doOverlapRect",Un);var vx={};vx.getSize=function(e,t,n,r){r=r||[];var a=t[0],i=t[1],o=n[0],l=n[1],s=r[0],c=r[1],u=Ie(e.width,a,Ie(o,a)),d=Ie(e.height,i,Ie(l,i)),h=Ie(e.maxWidth,a,s||u),f=Ie(e.maxHeight,i,c||d);return{w:Qy(h,u),h:Qy(f,d),maxw:h,maxh:f}},vx.getPieColumnIndex=function(e){var t,n=U(e.systemConf.chart.plot.plotoptions.bubblepie.dataindex,3);return e.systemConf.metadata.columns.some(function(e,r){if(e.dataindex===n)return t=r,!0}),Z(t)?t:e.dataset.getColumnIdx("y",0)},vx.hasSharedSeries=function(e){return e.systemConf.tooltip.sharedSeriesInfo&&e.isAxisCategory&&!er(e.chartTypes[0].value)},km.setComponent("events.getConfig",Gn);var yx="80%",mx="20%",bx="20%",xx="100%",wx="30%",Cx="30%",kx="zc-legend-legseries",_x="zc-legend-series",Sx="zc-track-flash",Ox="zc-track-symbol",Ax="zc-legend-track",Px="zc-nested-axis-ticklabel",Tx="zc-slider-view",Ex="zc-expandable",Lx="zc-legend-highlight",Mx="zc-legend-minmaxlabels",zx="custom-handle-path-track",Ix="custom-handle-path",Dx={};Dx.getLegendData=function(e,t){if(dx.isQuantileColorScale(e)){var n=e.systemConf.legend.colorBand.ranges;if(n&&n.length)return n}var r=e.dataObject;if(e._isAxisCategory()&&!r.isAxisCategory&&!r.isPolarAxisCategory&&!r.isNonAxisMultiSeriesCategory&&!jn(e))return Yt(r)[t||0].data[0].data[0];if(e.dataObject.categoryHierarchy){var a=e.dataObject.hierarchical.pivotLayout,i=a.getRootNodeList("row"),o=a.layers,l=o.isLayerNode,s=i.hasMultiCluster(),c=1<o.groups.length,u=Ve(o.panes);if(c||s&&l)return u[t||0].data;if(jn(e))return e.seriesdata}return e.isAxisCategory||e.isNonAxisMultiSeriesCategory||e.isGeoMap?e.seriesdata:e.dataObject.isFlowChartCategory?e.cache.sankey.legend:e.seriesdata[0].data[0]},Dx.getLegendDataLength=function(e,t){return e.isAxisCategory||e.isNonAxisMultiSeriesCategory?t.filter(function(e){return!Dx.isHiddenItem(e)}).length:t.length},Dx.isHiddenItem=function(e){return e&&e.hideInLegend},Dx.getClr=function(e,t,n){return e&&n.color||t},Dx.updateBubblePieData=function(e,t,n){n.dataObject.pieWithAxis&&e.data.forEach(function(r){var a=nr(n.chartTypes[t].value);r.forEach(function(t){t.disabled=e.disabled||!a||t.dummy})})},Dx.updateHierarchyData=function(e,t,n){n.dataObject.isHierarchy&&(n.systemConf.seriesdata.chartdata[t].disabled=e.disabled)},Dx.toggleChartEvents=function(e,t){var n=1<H(e.dataObject,"hierarchical.pivotLayout.layers.groups.length",!0);if(rn(e)&&n)e.container.selectAll("rect.zc-fade-overlay").style("pointer-events",t?fm:"all");else{var r=t?null:fm,a=[];e.svg?((e.isAxisCategory||e.dataObject.isPolarAxisCategory)&&a.push(e.eventHandler.trackerElement),a.push(e.svg)):a.push(e.container),a.forEach(function(e){e.style("pointer-events",r)})}},Dx.fadeChart=function(e,t,n,r,a){vr(0,t,n,r,a)},Dx.isDisabled=function(e,t,n){return t||n?Dx.isItemDisabled(e):!t},Dx.isItemDisabled=function(e){var t=e.node||e;return t.disabled||t.filtered||e.disabled||e.filtered},Dx.isAllEnabled=function(e,t){return t?!e.filter(Dx.isItemDisabled).length:t},Dx.getFilterBoxSize=function(e,t){var n=Hm(e.size,t);return[Hm(e.width,n),Hm(e.height,n)]},Dx.updateData=function(e,t,n){dx.isQuantileColorScale(n)?n.axes.clr.scale=Zv.getScale(n,n.dataObject,null,null,null,n.dataset,"clr"):rn(n)||(Dx.updateBubblePieData(e,t,n),Dx.updateHierarchyData(e,t,n),n.dataObject.data=n.systemConf)},Dx.isContinousLegend=function(e){if(dx.isQuantileColorScale(e)){var t=qt(e.systemConf.legend,e);return"continuousDiscrete"===t||"continuous"===t}return!1},Dx.getColorBandDimension=function(e,t,n){var r=n.chartarea,a=e,i=xr(a),o=a.colorBand,l="horizontal"===i.layout,s=t.maxWidth,c=t.maxHeight,u=o.width,d=o.height;if(d=l?(u=u||"40%",d||14):(u=u||14,d||"70%"),!t.adjust){var h=br(a);s=h.width,c=h.height}return s=Ie(s,r.width),c=Ie(c,r.height),t.adjust&&(l?s*=.8:c*=.8),u=Ie(u,r.width),d=Ie(d,r.height),[u=Qy(u,s),d=Qy(d,c)]},Dx.getOrient=function(e){var t=xr(e),n=t.hAlign,r=t.vAlign,a=t.floating,i=t.layout===cb;return a?i?ib:ab:i?{top:"top",center:"bottom",bottom:"bottom"}[r]:{left:"left",center:"right",right:"right"}[n]},Dx.getLabelIndex=function(e,t,n){var r,a=t.stops,i=t.ranges,o=n.dataset.getDataType("clr")===ox;return i&&i.length?i.some(function(t,n){if(te(t)?te(e)?t[0]===e[0]&&t[1]===e[1]:t[0]===e:t===e)return r=n,!0}):!o&&a&&a.length&&a.some(function(t,n){if(t===e)return r=n,!0}),r},Dx.hexToRGB=function(e){if(e&&-1==e.toString().indexOf("#"))return e;var t=J(Cn(e).replace(/#/g,""),16);return"rgb("+(t>>16&255)+","+(t>>8&255)+","+(255&t)+")"},Dx.filterSelectionByColor=function(e,t,n,r){var a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:"clr",i=void 0;if("clr"===a){var o=r.systemConf.legend;i={encode:a,config:o,userRanges:o.colorBand.ranges,scale:r.axes.clr.scale,dataType:r.dataset.getDataType("clr"),dataAccessor:function(e){return r.dataset.getClr(e)},valueByIdex:function(e){return Mn(r,e)}}}else if("z"===a){var l=Se(r.scales,function(e){return"z-0"===e.id}),s=l.config,c=l.getScale(),u=c.range();i={encode:a,config:s,scale:c,userRanges:s.ranges,dataType:r.dataset.getDataType("z"),dataAccessor:function(e){var t=r.dataset.getZ(e);return t=vn(t,{config:s,scale:c,columnKey:r.dataset.getColumnIdx(a)})},valueByIdex:function(e){return u[e]}}}return function(e,t,n,r,a){function i(e){return c(e._acutalData&&e._acutalData()||e.data||e)}if(Z(n)){var o=a.config,l=a.scale,s=a.dataType,c=a.dataAccessor,u=a.userRanges,d=a.encode,h=a.valueByIdex;if(u&&u.length){var f=be(u[n]),p=s===ox;if(1===f.length&&!p){var g=R(l.domain());g.splice(0,2),f=[g[2*n],g[2*n+1]]}return e.filter(function(e){var a=i(e),s=yn(e,r)&&mn(a,d,r,l,o,{range:f});return p?s=s&&a===f[0]:(s=s&&a>=f[0]&&a<=f[1],a===f[0]&&(s=s&&h(n)===l(a)),a===f[1]&&(s=s&&h(n)===l(a))),t?s:!s})}return e.filter(function(e){var a=i(e),s=yn(e,r)&&mn(a,d,r,l,o,{range:n});return t?s:!s})}return e.filter(function(e){return yn(e,r)})}(e,t,n,r,i)},Dx.isReversedColorAxis=function(e){return e.colorAxis&&e.colorAxis.reversed},Dx.hasPatternPallete=function(e){var t=e.patternPallete;return t&&t.length},km.setComponent("domUtils.getSvgTransform",Or);var Rx=["tap","taphold","dbltap","tapholdend","touchmove","touchend","singletouchmove","doubletouchmove"];km.setComponent("events.getMousePosition",Tr),(jr.colorpallete=Dg()).set("greenish",["#6c6c6d","#1ba98e","#00ff80","#00ffc0","#00ffff","#40ff00","#40ff40","#40ff80","#40ffc0","#40ffff","#80ff00","#80ff40","#80ff80","#80ffc0","#80ffff"]),jr.colorpallete.set("pinkish",["#ff00ff","#ff00c0","#ff0080","#ff0040","#ff0000","#c000ff","#c000c0","#c00080","#c00040","#c00000","#8000ff","#8000c0","#800080","#800040","#800000"]),jr.colorpallete.set("countries",["#00c6e4","#faa43a","#5da5da","#60bd68","#f17cb0","#b2912f","#307d99"]),jr.colorpallete.set("saturate5",["#594f4f","#547980","#45ada8","#97843a","#518058","#975156"]),jr.colorpallete.set("ocean5",["#ff7f00","#6a4a3c","#cc333f","#eb6841","#edc951","#975156"]),jr.colorpallete.set("zoho-reports-old",["#FF465B","#04C36B","#3A92E9","#FDC33A","#D65587","#FC7C63","#51A5A9","#BFBFBF","#91CD6A","#BE9B89","#7D8DB0","#B68E2E","#C6D5B0","#D1ACCE","#E0AE60","#5CD29F","#716398","#AD8686","#FF99A8","#A0C0C0","#2D7094","#553D4E","#B2449D","#FED577","#D3D159","#AAAAAA","#7ED9D9","#F7A26D","#8ABFA2","#767676","#E36068","#A3AFC7"]),jr.colorpallete.set("zoho-reports-new",["#60bfdf","#ffa060","#aadf80","#ff6c7d","#c9ac66","#bf80bf","#df6060","#606060","#60a0df","#ff99a8","#feff60","#a0dfdf","#dfa080","#dfdfdf","#a0a060","#a080bf","#a06060","#5cd29f","#ffbe60","#bfa080","#f28fb5","#8080bf","#bfbfbf","#dfdf80","#80a060","#80a060","#a08060","#7ed9d9","#be9b89","#bf6060","#a0bf60","#fc7c63"]),jr.colorpallete.set("colors",["#0eaadd","#1ac9bb","#92c658","#dbbe56","#ee7d54","#ef4f6a","#b952ef"]),jr.colorpallete.set("flat-ui-colors",["#23a96e","#bca634","#f75a51","#39b6c5","#f9ce8d","#983a67","#634c3f","#d7dab9","#357180","#983a67","#b16b76","#7f90a0"]),jr.colorpallete.set("MEMobile",["#73c2f4","#ecd543","#e6be3f","#da7b36","#c84b37","#9c240f","#9bcedd","#ffe560","#ffe560","#c67c99","#c6db4c"]),jr.colorpallete.set("Toddler",["#f8d0db","#9be1ed","#c4ead1","#fbe2aa","#e5e5e5","#d6b65f","#be9fbf","#ffe560","#ffe560","#c67c99","#c6db4c"]),jr.colorpallete.set("BrightNDull",["#47bac1","#8ccace","#72c3f5","#71bfee","#ac66ad","#c5a0c6","#906aa6","#b29dbf","#fd9f94","#f6cac4","#ff759c","#f6acc1"]),jr.colorpallete.set("BlueShades",["#00c6e4","#6ad4e4","#a3dbe4","#c3e0e4","#e4e4e4","#c8c8c8","#aac4c8"]),jr.colorpallete.set("graphite6",["#595959","#767676","#373737","#9d9d9d","#bfbfbf","#222222"]),jr.colorpallete.set("chalk",["#FFFFFF","#FAFAFA","#CCCCCC"]),jr.colorpallete.set("map",["#FB0D0D","#53B808","#B80894","#2ADBDD"]),jr.patternPallete=Dg(),(jr.imagePallete=Dg()).set("linesndots",["01.png","02.png","03.png","04.png","05.png","06.png","07.png","08.png","09.png","10.png","11.png","12.png","13.png","14.png","15.png","16.png","17.png","18.png","19.png","20.png"]),jr.imagePallete.set("dotsfirst",["13.png","12.png","13.png","14.png","15.png","16.png","17.png","18.png","19.png","20.png"]),jr.imagePallete.set("stones",["01.jpg","02.jpg","03.jpg"]),it("hatch","diagonal-line-right","5","1","null","white","1","1"),it("hatchDash","square,diagonal-line-right","5,5","1","transparent,{{brighter}}","transparent,transparent","1","1","0,3"),it("thinThickHatch","square,diagonal-line-right,diagonal-line-right","10,10,10","1,1,3","transparent,null,null",pm,"1","1","0,2.5,0"),it("thinThickHatchLeft","square,diagonal-line-left,diagonal-line-left","10,10,10","1,1,3","transparent,null,null",pm,"1","1","[0,[2.5,-2.5],0]"),it("thickHatch","diagonal-line-right","5","3","null","white","1","1"),it("thinHatch","diagonal-line-right","2","1","null","white","1","1"),it("hatchLeft","diagonal-line-left","5","1","null","white","1","1"),it("horizontalStripes","horizontal-line","5","1","null","white","1","1"),it("thinHorizontalStripes","horizontal-line","2","1","null","white","1","1"),it("verticalStripes","vertical-line","5","1","null","white","1","1"),it("thinVerticalStripes","vertical-line","2","1","null","white","1","1"),it("crossStripes","vertical-line,horizontal-line","5","1","null","white","1","1"),it("tinyHatchfill","square,diagonal-line-right","5","1","transparent,{{brighter}}","null,transparent","1","1"),it("hatchfill","square,diagonal-line-right","10","1","transparent,{{brighter}}","null,transparent","1","1"),it("hatchLeftfill","square,diagonal-line-left","10","1","transparent,{{brighter}}","null,transparent","1","1"),it("hatchDashfill","square,diagonal-line-right","5,5","1","transparent,{{brighter}}","null,transparent","1","1","0,3"),it("tinyHatchLeftfill","square,diagonal-line-left","5","1","transparent,{{brighter}}","null,transparent","1","1"),it("horizontalStripesfill","square,horizontal-line","5","1","transparent,{{brighter}}","null,transparent","1","1"),it("verticalStripesfill","square,vertical-line","5","1","transparent,{{brighter}}","null,transparent","1","1"),it("crossStripesfill","square,square","5,5","1","transparent,{{brighter}}","null,transparent","1","1"),it("checkerBoard","square,square,square","10,5,5","1",pm,"transparent,null,{{brighter}}","1","1","0,0,5"),it("circle","circle","10","1","null","white","1","1"),it("tinyCircle","circle","5","1","null","white","1","1"),it("crossCircle","square,circle,circle","10,5,5","1","transparent,null,{{brighter}}",pm,"1","1","0,0,5"),it("floatingCircle","square,circle","10,5","1","transparent,{{brighter}}",pm,"1","1","0,2.5"),it("dot","square,circle","5,2.5","1","transparent,{{brighter}}","transparent,transparent","1","1","0,1.25"),it("dotSquare","square,circle","10,2.5","1","null,{{brighter}}","transparent,transparent","1","1","0,3.75"),it("circlefill","square,circle","10,10","1","transparent,{{brighter}}","null,transparent","1","1"),it("crossCirclefill","square,circle,circle","10,5,5","1","transparent,null,{{brighter}}","null,{{brighter}},null","1","1","0,0,5"),it("floatingCirclefill","square,circle","10,5","1","transparent,{{brighter}}","null,transparent","1","1","0,2.5"),it("dotfill","square,circle","5,2.5","1","transparent,{{brighter}}","null,transparent","1","1","0,1.25"),it("square","square","5","1","null","white","1","1"),it("squarefill","square","5","1","{{brighter}}","null","1","1"),it("star","star","10","1","null","white","1","1"),it("starfill","square,star","10,5","1","transparent,{{brighter}}","null,transparent","1","1"),it("wave","waves","5","1","null","white","1","1"),it("wavefill","square,waves","10,10","1","transparent,{{brighter}}","null,transparent","1","1"),it("cap","caps","5","1","null","white","1","1"),it("capfill","square,caps","10,10","1","transparent,{{brighter}}","null,transparent","1","1"),it("nylon","nylon","5","1","null","white","1","1"),it("nylonfill","square,nylon","10,10","1","transparent,{{brighter}}","null,transparent","1","1"),jr.patternPallete.set("stripes-fill",["hatchfill","hatchDashfill","checkerBoard","horizontalStripesfill","verticalStripesfill","crossStripesfill"]),jr.patternPallete.set("stripes",["hatch","thinThickHatch","hatchLeft","hatchDash","horizontalStripes","crossStripes","verticalStripes","thickHatch","thinHatch","thinVerticalStripes","thinHorizontalStripes"]),jr.patternPallete.set("dotted",["circle","tinyCircle","crossCircle","floatingCircle","dot"]),jr.patternPallete.set("dotted-fill",["circlefill","crossCirclefill","floatingCirclefill","dotfill"]),jr.patternPallete.set("shapes",["thinThickHatch","crossCircle","star","wave","cap","nylon"]),jr.patternPallete.set("shapes-fill",["checkerBoard","floatingCirclefill","squarefill","starfill","wavefill","capfill","nylonfill"]),jr.imagePallete.each(function(e,t){var n=e.map(function(e,t){return _m+e});jr.imagePallete.set(t,n)}),jr.getMonochromeColorPallette=function(e){var t=[0,+e.count-1],n=[+e.colorGamma[0],+e.colorGamma[1]],r=L(e.baseColor,t,n);return av(e.count).map(function(e,t){return r(t)})};var jx=function(){};jx.polygon=function(e,t,n,r,a,i,o){var l=jx.createElement(Um,t,i,o);return jx.setAttributes(l,e,["d"]),t},jx.rect=function(e,t,n,r,a,i,o){var l=jx.createElement("rect",t,i,o);return jx.setAttributes(l,e,["x","y","width","height"]),t},jx.circle=function(e,t,n,r,a,i,o){var l=jx.createElement(Gm,t,i,o);return jx.setAttributes(l,e,["cx","cy","r"]),t},jx.createElement=function(e,t,n,r){var a=n.getPatternSvg();return Et(e,".clip",[1],Et("clipPath","#"+t,[1],(Km.SAFARI?n.svg||a:r||a).select("defs")))},jx.setAttributes=function(e,t,n){n.forEach(function(n){e.attr(n,t[n])})},tb.svg_clips=jx,fa.prototype.defaultScroll=function(e,t){function n(t,n,r){var a=e.container.selectAll(".seriesholder"),i=e.container.select(".seriesClippathholder").attr("clip-path"),o=Or(a).translate,c="x"==r?l.left-t:o[0],u="x"==r?o[1]:l.top-t;a.attr("transform","translate("+c+","+u+")"),e.container.selectAll(".zc-fade-overlay").attr("transform","translate("+-e.scrolledX+","+-e.scrolledY+")"),e.container.selectAll(".labelholder").attr("transform","translate("+c+","+u+")"),e.container.selectAll(".eventgroup").attr("transform","translate("+-e.scrolledX+","+-e.scrolledY+")"),e.container.selectAll("rect.eventhandler").attr("transform","translate("+e.scrolledX+","+e.scrolledY+")");var d="translate("+(-e.scrolledX+hm)+","+(-e.scrolledY+hm)+")";e.container.selectAll("canvas").style("transform",d),e.container.selectAll("canvas").style(Km.prefix.css+"transform",d),e.drawPlotareaClippath();var h="y"==r?{y:-t,height:l.height+t}:{x:-t,width:l.width+t};(e.dataObject.isAxisCategory||e.dataObject.isPolarAxisCategory||s)&&e.eventHandler.trackerElement.attrs(h).attr("clip-path",i),ya(e,r);var f={name:"rect_highlight",id:e.id};"y"==r?(f.x=-l.left+e.scrolledX,f.y=t,f.width=l.width+l.left):(f.x=t,f.y=l.top+e.scrolledY,f.width=l.width),f.height=l.height;var p="default_scroll_highlight_clip_"+e.id;jx.rect(f,p,null,null,null,e)}if(e._isAxisCategory()&&(e.systemConf.chart.width||e.systemConf.chart.height)){var r=Z(e.systemConf.chart.width),a=Z(e.systemConf.chart.height),i=this.mode=r&&a?"xy":r?"x":"y",o=e.axes.rotated,l=e.plotarea,s=Re(Py.nonAxisSingleSourceEvent,e.chartTypes[0].value),c=gr(e,"width")-l.width,u=gr(e,"height")-l.height,d=e.container.selectAll(".d3container").selectAll(".zohocharts_scroll"),h=+d.attr("scrollbarSize");ya(e,i,"init");var f={left:l.left+hm,top:l.top+hm,height:l.height+("xy"==this.mode||"x"==this.mode?h:0)+hm,width:l.width+("xy"==this.mode||"y"==this.mode?h:0)+hm,"overflow-y":"xy"==this.mode||"y"==this.mode||o?"auto":"hidden","overflow-x":"xy"!=this.mode&&"x"!=this.mode&&o?"hidden":"auto"};if(d.styles(f).on("scroll",function(t){var r,a=Hv().srcElement||Hv().target,o=a.scrollLeft,l=a.scrollTop,s=e.scrolledX!==o;e.scrolledY,e.scrolledY=l,e.scrolledX=o;var c=s?"x":"y";r=s?o:l,Hv().clientX=Hv().clientX||0,Hv().clientY=Hv().clientY||0,e.dataObject.isAxisCategory&&(e.eventHandler.tooltipElement.hide(),e.eventHandler.handlers.mouseout.call(e.eventHandler)),e.cache.data={},e.cache.search={},n(r,i,c)}),e.canvasScrollGroup&&e.canvasScrollGroup.styles(f),Km.CHROME){var p=e.canvasarea;this.fixScrollView(!1,{width:p.width+("xy"!=this.mode&&o?0:c),height:p.height+("xy"==this.mode||o?u:0)},e)}d.selectAll(".child").styles({height:l.height+("xy"==this.mode||"y"==this.mode||o?u:0)+hm,width:l.width+("xy"!=this.mode&&"x"!=this.mode&&o?0:c)+hm,"pointer-events":fm,margin:0,padding:0,"background-color":pm}),(e.dataObject.isAxisCategory||s)&&e.eventHandler.addListeners(d);var g=e.scrolledX?"x":"y",v="x"==g?e.scrolledX:e.scrolledY;v&&"addorremoveseries"===t&&n(v,this.mode,g)}},fa.prototype.initialize=function(e){if(e._isAxisCategory()&&(e.systemConf.chart.width||e.systemConf.chart.height)){var t=Z(e.systemConf.chart.width),n=Z(e.systemConf.chart.height),r=this.mode=t&&n?"xy":t?"x":"y",a={x:(l=e.axes.rotated)?"y":"x",y:l?"x":"y"};e.plotarea,e.scrolledX=e.scrolledX||0,e.scrolledY=e.scrolledY||0;var i={overflow:"scroll",position:"absolute",margin:0,padding:0,"background-color":"rgba(0,0,0,0)","box-sizing":"content-box","-webkit-tap-highlight-color":pm,"-webkit-overflow-scrolling":"touch"},o=mt(e.container.selectAll(".d3container"),Zm,[1],".","class","zohocharts_scroll");o.styles(i),mt(o,Zm,[1],".","class","child");var l=e.axes.rotated,s=e.defaultScroll,c=o.node();"xy"==r&&(u=c.offsetWidth-c.clientWidth+(c.offsetHeight-c.clientHeight));var u=l||"y"==r?c.offsetWidth-c.clientWidth:c.offsetHeight-c.clientHeight;o.attr("scrollbarSize",u);var d=a.y,h="x"==a.x?e.systemConf.chart.axes.xaxis:e.systemConf.chart.axes.yaxis[0],f="x"==d?e.systemConf.chart.axes.xaxis:e.systemConf.chart.axes.yaxis[0];s||((s=e.defaultScroll={}).tickmarkSize=+h.tickmark.size,s.marginRight=+e.systemConf.chart.marginRight,s.tickmarkSizeVertical=+f.tickmark.size),"x"!=r&&"xy"!=r||"top"===h.orient||(h.tickmark.size=+s.tickmarkSize+u),"y"!=r&&"xy"!=r||"right"!=f.orient||(f.tickmark.size=+s.tickmarkSizeVertical+u),"canvas"===e.systemConf.chart.plot.renderer.mode.toLowerCase()&&(e.canvasScrollGroup=Et("div",".canvas_scroll_group",[1],e.chartParentElement,".static").styles(i)),"xy"!=r&&"y"!=r||(e.plotarea.bottom+=u,e.plotarea.width-=u)}},fa.prototype.fixScrollView=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];n.svg.styles({width:t.width+hm,height:t.height+hm}),n.d3container.style("overflow",e?null:"hidden")},wa.prototype.prepareLayout=function(){var e=this,t=(Ty=Ty||0,++Ty);e.id="ZC_"+t,e.idNumeric=t;try{var n=this.userdata;e.createHelperElements(),e.handleHiddenContainer(),e.chartWidth=e.getChartDimension("width"),e.chartHeight=e.getChartDimension("height"),wa.helpers.initializeChartHolders(e),e.setCanvasDimension(),e.chartTypes=Gt.helpers.getAllChartTypes(n,"object"),e.chartFontProp={},e.globalProp=$e(n,{width:e.canvasarea.width,height:e.canvasarea.height},e.chartFontProp),e.themeoptions=e.getThemeOptions(e.globalProp),n.metadata||nt("metadata",n),e.defsLocation=j(),e.svg.append("defs")}catch(t){wa.helpers.handleErrors(e,t)}};var Hx={getPatternSvg:function(){var e=this.patternSVG;if(!Z(e)){var t=Le(this.container.node());e=this.patternSVG=fg(t).select("svg.svgPattern")}return e},getDocumentIndex:function(){return Z(this.DOCUMENT_INDEX)||(this.DOCUMENT_INDEX=Me(this.container.node())),this.DOCUMENT_INDEX},getBaseContainer:function(){var e=this.getDocumentIndex();return Z(this.BASE_HELPER_CONTAINER)||(this.BASE_HELPER_CONTAINER=ym[e].BASE_HELPER_CONTAINER),this.BASE_HELPER_CONTAINER},createHelperElements:function(){var e=Le(this.container.node()),t=fg(e).select("svg.svgPattern");if(t.empty()){var n=Oe(e),r=fg(e),a=this.baseContainer=mt(r,"div",[1],".","class","__baseZC_Container__");if(a.styles({position:"absolute",left:-9999+hm,top:-9999+hm}),this.patternSVG=mt(a,"svg",[1],".","class","svgPattern").attrs({version:"1.1",xmlns:Rv.svg}),mt(this.patternSVG,"defs",[1]),ym){var i=0,o=i++;n.ZC_DOCUMENT_INDEX=o,ym[o]={BASE_HELPER_CONTAINER:this.baseContainer,EFFECTS:{},ANIMATION:{},CANVASPATTERN:{}}}}else this.patternSVG=t},handleHiddenContainer:function(e){var t=this,n=t.container;if(e&&Z(t.originalContainer))t.originalContainer.node().appendChild(t.d3container.node()),t.container.remove(),t.container=t.originalContainer,delete t.isHiddenCoainer,delete t.originalContainer;else{var r=n.node();if(fe(r)){var a=r.cloneNode(0);t.getBaseContainer().node().appendChild(a),a.style.setProperty("display","block","important"),t.isHiddenCoainer=!0,t.originalContainer=n,t.container=fg(a)}}},updateCanvasArea:function(){var e=this,t=e.systemConf;e.container.selectAll("div.d3container").styles({position:"relative",width:e.getChartDimension("width")+hm,height:e.getChartDimension("height")+hm}),(e.chartParentElement=e.container.selectAll("div.canvas-component")).styles({position:"relative",width:e.canvasarea.width+"px",height:e.canvasarea.height+"px"});var n=e.container.selectAll("div.canvas-property");n.styles({position:"absolute",width:e.canvasarea.width+"px",height:e.canvasarea.height+"px"}),e.updateCommonBBSProp(n,null,t.canvas,"canvas")},getThemeOptions:function(e){var t,n,r=Fe(Vr(this.userdata)),a=H(this.userdata,"canvas.theme",!0);n=new et(e),r.forEach(function(t){return nt(t,n.chart.plot.plotoptions,e)});var i=Ly[a]||window.$ZC&&$ZC[a];return i?(t=new i(e),Im(n,t,!0,!0)):(this.distinctChartTypes=r,n)},getChartDimension:function(e){var t={width:960,height:400};return this.isHiddenCoainer||(t[e]=ye(this.container,e,!0)),t[e]},setCanvasDimension:function(e,t){e||t||(e=this.getChartDimension("width"),t=this.getChartDimension("height")),this.canvasarea={left:0,top:0,right:0,bottom:0,width:e,height:t}},setChartDimension:function(){var e=this,t=e.systemConf.canvas.border,n=t.show?G(t,"size",0,10,e.canvasarea.width,e.canvasarea.height):0;e.titlearea={left:e.canvasarea.left+n,top:e.canvasarea.top+n,right:e.canvasarea.right-n,bottom:e.canvasarea.bottom-n,width:e.canvasarea.width-2*n,height:e.canvasarea.height-2*n},e.chartarea=Dm(e.titlearea),e.plotarea=Object.create(e.chartarea)},applyChartProperties:function(){var e=this,t=e.systemConf,n=e.chartHeight,r=t.canvas.title,a=t.canvas.subtitle,i=t.credits||{},o=r.show&&jt(e,"title",n),l=a.show&&jt(e,"subtitle",n);!0===i.enabled&&jt(e,"credits",n)&&(nt("credits",e.systemConf,e.globalProp),e.drawTitle(e.systemConf.credits,"credits")),o&&("bottom"===r.vAlign&&"bottom"===a.vAlign&&a.show?e.drawTitle(t.canvas.subtitle,"subtitle"):e.drawTitle(t.canvas.title,"title")),l&&("bottom"===a.vAlign&&"bottom"===r.vAlign&&r.show?e.drawTitle(t.canvas.title,"title"):e.drawTitle(t.canvas.subtitle,"subtitle")),e.staticPaneSVG.selectAll("g.plotareaBorder-property").selectAll("line","path").style("border",""),e.updatePlotArea()},updatePlotArea:function(){var e=this,t=e.systemConf;e.chartarea=Dm(e.titlearea),e.plotarea=Object.create(e.chartarea);var n=t.chart,r=parseFloat(n.marginLeft),a=parseFloat(n.marginRight),i=parseFloat(n.marginTop),o=parseFloat(n.marginBottom),l=r+a>e.plotarea.width?0:r,s=r+a>e.plotarea.width?0:a,c=i+o>e.plotarea.height?0:i,u=i+o>e.plotarea.height?0:o;e.plotarea.left+=l,e.plotarea.right+=s,e.plotarea.bottom+=u,e.plotarea.top+=c,e.plotarea.width=e.plotarea.width-l-s,e.plotarea.height=e.plotarea.height-u-c},drawTitle:function(e,t){function n(){if(D(e.href)){var t=e.target;"newtab"===t||"newwindow"===t?window.open(e.href,"popUpWindow","newwindow"===t?"status=yes":""):l.href=e.href}else Vy.log("invalid URL for credits")}var r=this,a=r.svg,i=r.systemConf,o=Z(e.x)&&Z(e.y),l=window.location,s={top:U(e.marginTop,0),right:U(e.marginRight,0),bottom:U(e.marginBottom,0),left:U(e.marginLeft,0)},c=a.selectAll("g.chart"+t),u=o?{x:e.x+s.left,y:e.y+s.top,dy:"1",textAnchor:"left"===e.hAlign?"start":"right"===e.hAlign?"end":"middle"}:wa.helpers.align(e.hAlign,e.vAlign,r.titlearea,s),d=!Z(e.imageUrl),h=d?""===e.text?fm:"text":"image";if(h!==fm){var f=mt(c,h,[e],".","class",t);if(Z(e.href)&&Mr(f,{click:n},{tap:n}),d){var p=r.userdata.canvas?r.userdata.canvas.fontColor:null;f.attrs({x:u.x,y:u.y,dy:u.dy+"em","text-anchor":u.textAnchor}).styles({cursor:Z(e.href)?gm:"auto",display:"block"}).text(z(e.text)),!0===e.tooltip&&_t(f),kt(f,[{fontColor:"subtitle"!==t||Z(e.fontColor)||Z(p)?e.fontColor||p:"#CCCCCC"},e,i.canvas,Qm])}else f.attrs({x:u.x+("right"===e.hAlign?-e.imageWidth:0),y:u.y+("bottom"===e.vAlign?-e.imageHeight:0),width:e.imageWidth,height:e.imageHeight,"xlink:href":e.imageUrl}).styles({cursor:Z(e.href)?gm:"auto",display:"block"});var g=M(f.node()),v={left:o?e.x+s.left:g.x,top:o?e.y+s.top:g.y,width:g.width,height:g.height},y={left:s.left,top:s.top,right:r.titlearea.width-s.right,bottom:r.titlearea.height};if(bt(f.node(),z(e.text),v,y,"bottom","..",{left:5,right:5,top:5,bottom:5}),!o){var m=g.height+s.bottom+s.top;"top"===e.vAlign&&(r.titlearea.top+=m,r.titlearea.height-=m),"bottom"===e.vAlign&&(r.titlearea.height-=m)}}c.selectAll(h===fm?"text,image":"image"===h?"text":"image").style("display",fm)},updateCommonBBSProp:function(e,t,n,r){var a,i=this.systemConf,o=n.border||{},l=n.background||{},s=n.shadow||{},c=!0===Rm(l,"gradients.show");if(e.styles({"background-color":l.color,opacity:l.alpha}),Z(l.imageUrl)){var u=wa.helpers.getStyles4Image(l);e.styles(u)}else c&&(u=wa.helpers.getStyles4Gradients(l),e.styles(u));if(!0===o.show&&"canvas"===r){a="plotarea"===r?t:e;var d="canvas"===r?G(i.canvas.border,"size",0,10,this.canvasarea.width,this.canvasarea.height):G(i.chart.plot.border,"size",0,10,this.plotarea.width,this.plotarea.height);d=Hm(d,2),a.styles({border:d+"px "+o.style+" "+o.color,"border-radius":J(o.radius)+"px"}),a.node().border={size:d,clr:o.color}}else a="plotarea"===r?t:e,"plotarea"!==r&&a.style("border","");if(!0===s.show){var h=s.x+"px "+s.y+"px "+s.blur+"px "+s.color;!0===s.inset&&(h+=" inset"),e.style("box-shadow",h)}else e.style("box-shadow","")},updatePlotareaProp:function(){var e=this,t=e.systemConf,n=(e.d3container,e.plotareaPropertyElement),r=e.staticPaneSVG.selectAll("g.plotareaBorder-property"),a={position:"absolute",left:e.plotarea.left+"px",top:e.plotarea.top+"px",width:e.plotarea.width+"px",height:e.plotarea.height+"px","pointer-events":fm,"box-sizing":"border-box"};a[Km.prefix.css+"box-sizing"]="border-box",e.plotareaPropertyElement.styles(a),r.attrs({transform:"translate("+e.plotarea.left+","+e.plotarea.top+")"}),e.updateCommonBBSProp(n,r,t.chart.plot,"plotarea")},drawPlotareaClippath:function(){var e=this,t=e.systemConf,n=H(t,"chart.zoom.x")||Z(e.scrolledX),r=H(t,"chart.zoom.y")||Z(e.scrolledY),a=e.axes.rotated,i=Ft(e),o=(a?r:n)?e.plotarea.left:-i.left+e.plotarea.left,l=(a?n:r)?e.plotarea.top:-i.top+e.plotarea.top,s=e.plotarea.width+((a?r:n)?0:i.left+i.right),c=e.plotarea.height+((a?n:r)?0:i.top+i.bottom),u={name:"rect",id:e.id,x:o,y:l,width:s,height:c},d={chartObj:e},h=tb.get(tb.svg_clips,"rect",u,d);e.container.selectAll("g.seriesClippathholder, g.labelClippathholder, g.zcMapClipHighlight, g.threshold, g.zc-fade-overlay-clip-holder").attr("clip-path","url("+e.defsLocation+"#"+h+")");var f="highlight_group_clip_"+e.id,p={x:u.x+(e.scrolledX||0),y:u.y+(e.scrolledY||0),width:s,height:c};jx.rect(p,f,null,null,null,e);var g="g#zcscatterCliphighlight, g#zcareaCliphighlight, g#zcbarCliphighlight, g.zcMapClipHighlight";g+=rn(e)?", g.zcnonaxisCliphighlight":"",e.staticPaneSVG.selectAll(g).attr("clip-path","url("+e.defsLocation+"#"+f+")")},getChartSeriesColor:function(){var e=this,t=e.systemConf,n=[],r=t.legend;if(r.colors)if(te(r.colors))n=r.colors;else{var a=[];for(var i in r.colors)r.colors.hasOwnProperty(i)&&a.push(r.colors[i]);n=a}else r.colorPallete&&(n="monochrome"===r.colorPallete.type?jr.getMonochromeColorPallette(r.colorPallete.options.monochrome):jr.colorpallete.get(r.colorPallete.options.multicolor)||jr.colorpallete.get("flat-ui-colors"));if(r.imagePallete){e.patternImageSizes=[];var o=jr.imagePallete.get(r.imagePallete);e.imagePallete=o;var l="stripes"===r.imagePallete?null:50,s=mt(e.getPatternSvg(),"image",[1],".","class","tempImage");o.map(function(t,n){s.attr("xlink:href",t);var r=M(s.node());e.patternImageSizes[n]=[l||r.width||3,l||r.height||3]}),s.remove()}if(r.patterns)e.patternPallete=r.patterns;else if(r.patternPallete){var c=jr.patternPallete.get(r.patternPallete);!Z(c)&&te(r.patternPallete)&&r.patternPallete.length&&(c=r.patternPallete),e.patternPallete=c}if(Z(n)){var u=n.slice(0,n.length),d=0;e.seriesColor=u,e.mainSeriesColor=u,dx.isQuantileColorScale(e)||e.seriesdata.map(function(t,r){Z(t.color)?e.seriesColor[r]=t.color:e.seriesColor[r]||(e.seriesColor[r]=n[d++%n.length])})}e.dataObject.categoryHierarchy&&e.dataObject.hierarchical.setGridOptions()},resetdata:function(e){var t=this;t.chartWidth=t.getChartDimension("width"),t.chartHeight=t.getChartDimension("height"),t.setCanvasDimension(),t.chartTypes=Gt.helpers.getAllChartTypes(e,"object"),t.processUserData(e,!0),t.setChartDimension(),t.globalProp=$e(e,{width:t.canvasarea.width,height:t.canvasarea.height},t.chartFontProp),t.events={},t.dataObject&&(t.dataObject.formattedData={x:[],y:[]})},destroy:function(){var e=this;e.destroying||(e.eventHandler&&(clearTimeout(e.eventHandler.mouseouttimer),clearTimeout(e.eventHandler.mousemovetimer),clearTimeout(e.eventHandler.tooltipElement.timeout),e.eventHandler.tooltipElement.destroy()),e.container.datum(null),e.container=e.baseContainer=e.BASE_HELPER_CONTAINER=e.patternSVG=null,(e.dataObject.isAxisCategory||e.dataObject.isPolarAxisCategory)&&(Ze(e.axes.x),e.axes.y.groups.forEach(function(e){return Ze(e)})),e.renderer.forEach(function(t){return Ze(t,e)}),e.behaviouralEvents&&(Ze(e.behaviouralEvents.eventManager.brushResetButton,e),pe(e.behaviouralEvents.eventManager.behaviours,function(e){Ze(e)}),Ze(e.behaviouralEvents,e)),Ze(e.eventHandler,e),Ze(e.dataObject,e),Ze(e.cache),Ze(e),e.destroying=!0)},redraw:function(){var e=this,t=e.systemConf;e.updating=!0,e.phase="redraw",e.viewPortExtent=null,e.svg.styles({width:e.getChartDimension("width")+hm,height:e.getChartDimension("height")+hm}),e.staticPaneSVG.styles({width:e.getChartDimension("width")+hm,height:e.getChartDimension("height")+hm}),e.resetdata(t),wa.helpers.constructChartGroups(e),e.render(!0),e.phase=null},drawPlotBorder:function(){var e=this.systemConf.chart.plot.border,t=this.staticPaneSVG.selectAll("g.plotareaBorder-property");if(Z(e)&&!0===e.show){var n=t.selectAll("path.plotBorderPath"),r=G(e,"size",0,10,this.plotarea.width,this.plotarea.height),a=Hm(this.tickarea,{left:0,right:0,top:0,bottom:0}),i=wt(-a.left||.5,-a.top||.5,this.plotarea.width+a.right+a.left,this.plotarea.height+a.bottom+a.top,we(e.radius),!1,!1);r=null==r||""===r?2:r,n.styles({"stroke-width":r,stroke:e.color,"stroke-dasharray":rt(e.style,r),fill:fm,"pointer-events":fm}).attrs({d:i}),t.selectAll("line").style("stroke",pm)}},handleNoData:function(e,t){this.clearChart();var n=this.systemConf,r=Hm(t,this.wrap.selectAll("g.nodatahandler"));if(Z(e.htmlEl)){var a=mt(this.container.selectAll("div.canvas-component"),"div",[1],".","class","nodatahandler");a.style("position","absolute").html(e.htmlEl);var i=a.node();a.styles({left:Hm(e.x,(this.chartWidth-i.offsetWidth)/2)+"px",top:Hm(e.y,(this.chartHeight-i.offsetHeight)/2)+"px"})}else if(Z(e.imageUrl))mt(r,"image",[1]).attrs({x:e.x||this.chartarea.width/2-50,y:e.y||this.chartarea.height/2-50,width:100,height:100,"xlink:href":e.imageUrl});else if(Z(e.text)){var o=mt(r,"text",[e],".","class","nodata");o.attrs({x:e.x||this.chartarea.width/2,y:e.y||this.chartarea.height/2,"text-anchor":"middle"}).text(z(e.text||"No Data")),kt(o,[e,n.canvas,Qm])}},clearNoData:function(e,t){this.systemConf;var n=Hm(t,this.wrap.selectAll("g.nodatahandler"));Z(e.htmlEl)?mt(this.container.selectAll("div.canvas-component"),"div",[],".","class","nodatahandler"):Z(e.imageUrl)?mt(n,"image",[]):Z(e.text)&&mt(n,"text",[],".","class","nodata")},clearChart:function(e,t,n){var r=this;n||mt(r.wrap,"g",[],".","class","chartgroup"),mt(r.staticPaneSVG,"g",[],".","class","plotareaBorder-property"),mt(r.staticPaneSVG,"g",[],".","class","labelClippathholder"),mt(r.container,"div",[],".","class","legendgroup"),mt(r.staticPaneSVG,"g",[],".","class","legendarea"),mt(r.container,"div",[],".","class","zcnotes"),mt(r.container,"canvas",[],".","class","zc-canvas"),mt(r.container,"canvas",[],".","class","zc-labelholder-canvas"),r.eventHandler&&(r.isAxisCategory||r.dataObject.isPolarAxisCategory||r.isGeoMap)&&r.positionEventTrackerElement(null,{})},showLoading:function(e){var t=this.systemConf,n=t.loader;if(!0===n.enabled&&n.type!==fm){var r=mt(this.container.selectAll("div.d3container"),"div",[1],".","class","loading");r.style("position","absolute").html(wa.helpers.getLoader(this,n)),kt(r,[n,t.chart,t.canvas,Qm],!0);var a=r.node();r.styles({left:this.chartarea.width/2-a.offsetWidth/2+"px",top:this.chartarea.height/2-a.offsetHeight/2+"px"})}},hideLoading:function(){this.container.selectAll("div.loading").remove()},fixLegendPosition:function(){var e=this.legendarea;if(!0===this.systemConf.legend.enabled){var t=Hr(this.plotarea,this,!1),n=Dx.isContinousLegend(this);if("y"===e.adjust)if(n){var r=Or(e.element.node()).translate;e.element.attr("transform","translate("+r[0]+","+t[1]+")")}else e.element.style("top",t[1]+hm)}},createEventGroups:function(e){var t=this.systemConf,n={opacity:0,"pointer-events":fm},r=_extends({},n,{fill:fm}),a=this.eventWrap=this.staticPaneSVG.selectAll("g.eventgroup").styles({"pointer-events":"visible"});if(a.append("g").attr("id","zcareaCliphighlight").append("g").attr("id","zcareahighlight"),a.append("g").attr("id","zcbarCliphighlight").append("g").attr("id","zcbarhighlight"),t.tooltip.crosshair){var i=mt(a,"g",[1],".","class","crosshair");i.style("visibility","hidden"),mt(i,"line",[1],".","class","x-crosshair"),mt(i,"line",[1],".","class","y-crosshair")}a.append("g").attr("id","zcscatterCliphighlight").append("g").attr("id","zcscatterhighlight"),Et("g",".zcplothighlight",[1],a).styles(n),Et("g",".zcnonaxishighlight",[1],Et("g",".zcnonaxisCliphighlight",[1],a)).styles(r),this.dataObject.isHierarchy&&Et("g","#zchierarchyhighlight",[1],a).styles(r)},positionEventTrackerElement:function(e,t){var n=1<arguments.length&&void 0!==t?t:ma(this,!0),r=this.eventHandler.trackerGroup,a=this.plotarea,i=this.scrolledX,o=this.scrolledY,l=i||o;r.attr("transform","translate("+(a.left||0)+" "+(a.top||0)+")"),e=Hm(e,this.eventHandler.trackerElement),l?e.attr("transform","translate("+(this.scrolledX||0)+" "+(this.scrolledY||0)+")"):e.attr("transform","translate("+(n.left||0)+" "+(n.top||0)+")"),P(e,n)},__enableZoomBrush:function(e,t){function n(){r.systemConf.chart[t].enabled=!0,r.systemConf.chart[t].type=e,i.initiateBehaviour(a)}var r=this,a="PLOT_"+t.toUpperCase(),i=r.behaviouralEvents,o=i.eventManager.behaviours;o[a]?o[a]&&o[a].instance.options.type!==e&&n():n()},__enableZoom:function(e){this.__enableZoomBrush(e,"zoom")},__enableBrush:function(e){this.__enableZoomBrush(e,"brush")},zoomStep:function(e){var t=this.isGeoMap?"xy":Rm(this.systemConf,"chart.zoom.type")||"x";this.__enableZoom(t),this.behaviouralEvents.eventManager.behaviours.PLOT_ZOOM.instance.step(e)},parseScale:function(){function e(e,n){var r="z"===e?"size":"clr"===e?"color":e,a=function(e){if("size"===e||"color"===e)return t.systemConf.legend}(r);return nt(r,a,t.globalProp),a[r][n]||a[r]}var t=this,n=t.userdata.metadata.axes,r=t.dataObject.hasZaxis?["z"]:[],a={},i=[];for(var o in r.forEach(function(e){n[e]&&(a[e]=av(n[e].length))}),a)a[o].forEach(function(n){var r=xa(o);if(r!=bm){var a=e(o,n),l=new r(o,n,a,t);i.push(l)}});i.forEach(function(e){return e.getScale()}),t.scales=i},handleLegendEvents:function(){var e=km.getComponent("LegendEvents");if(e._empty||(this.legendEvents?this.legendEvents.update():this.legendEvents=new e(this)),rn(this)){var t=Hm(H(this.systemConf,"legend.selectAllBox.disabledOpacity",!0),.3);Dx.fadeChart(null,this,t)}},_isAxisCategory:function(){var e=this.dataObject,t=this.preProcessor,n=e.hierarchical;return e.isAxisCategory||n&&n.facetRendering||t&&t.hierarchical&&t.hierarchical.facetRendering}},Bx=Hx.createHelperElements;ge(wa.prototype,Hx),wa.helpers={initializeChartHolders:function(e){var t,n,r=e.container,a=r.selectAll("div.d3container");if(!a.empty()){var i=a.datum();i&&i.destroy&&i.destroy(),a.remove()}t=e.getChartDimension("width"),n=e.getChartDimension("height"),a=e.d3container=mt(r,"div",[e],".","class","d3container");var o={width:t+"px",height:n+"px",position:"relative",left:"0px",top:"0px","box-sizing":"border-box","-moz-user-select":fm,"-webkit-user-select":fm,"-ms-user-select":fm,"user-select":fm};o[Km.prefix.css+"box-sizing"]="border-box",a.styles(o),mt(a,"div",[1],".","class","canvas-property"),e.plotareaPropertyElement=mt(a,"div",[1],".","class","plotarea-property"),mt(e.d3container,"div",[1],".","class","zcoverview");var l=mt(a,"div",[1],".","class","canvas-component");l.style("-webkit-tap-highlight-color",pm);var s=mt(e.getBaseContainer(),"div",[1],"#","id","zctooltip"+e.idNumeric);s.node().isTooltipContainer=!0,e.tooltip={element:s},e.tooltip.element.styles({position:"fixed",display:"inline-block",visibility:"hidden","white-space":"nowrap","background-color":"white",border:"1px solid","-webkit-tap-highlight-color":pm});var c=wa.helpers.positionSVG(e);e.svg=mt(l,"svg",[1],".","class","svgarea",c),e.staticPaneSVG=mt(l,"svg",[e],".","class","static",c).style("pointer-events",fm),l.append(Zm).attr("class","legendarea"),e.notes=l.append("div").attr("class","zcnotes")},removeChartHolders:function(e){var t=e.container;t.select("div.d3container").remove(),t.select("div.zc-staticPane").remove(),t.select("div.zc-chartPane").remove()},align:function(e,t,n,r){var a={};return"center"===e?(a.x=n.width/2+r.left,a.textAnchor="middle"):"left"===e?(a.x=n.left+r.left,a.textAnchor="start"):"right"===e&&(a.x=n.width+n.left-r.right,a.textAnchor="end"),"top"===t?(a.y=n.top+r.top,a.dy=1):"bottom"===t&&(a.y=n.height+n.top-r.bottom,a.dy=-.21),a},getLoader:function(e,t){var n=t.htmlEl,r=t.imageUrl,a=t.type,i=t.text,o=t.colors;if(n)return n;if(r)return"<img src="+r+" height="+t.imageHeight+" width="+t.imageWidth+">";var l="",s=null;return a&&(s=function e(t,n){var r={type:"zBars",scale:1,duration:1.2},a=document.getElementById("ZCloader");for(var i in e.style||((a=document.createElement("style")).setAttribute("id","ZCloader"),document.head.appendChild(a),e.style=!0),n)n.hasOwnProperty(i)&&(r[i]=n[i]);var o=r.colors||["rgb(204, 32, 50)","rgb(24, 153, 74)","rgb(1, 115, 178)","rgb(253, 208, 25)"],l=o[0%o.length],s=o[1%o.length],c=o[2%o.length],u=o[3%o.length],d=Nr(),h="";if(void 0===d?d={cssPrefix:""}:"Internet Explorer"===d.name&&d.version<10&&(r.type="wheel"),!t.loader){var f=document.createElement("div");if("zBlocks"==r.type){e.zBlocks||(h="\n@"+d.cssPrefix+"keyframes "+r.type+" {",h+="0% { left:0px; top:0px; "+d.cssPrefix+"transform:rotate(0deg) scale(1)}",h+="25% { left:40px; top:0px; "+d.cssPrefix+"transform:rotate(90deg) scale(0.5)}",h+="50% { left:40px; top:40px; "+d.cssPrefix+"transform:rotate(180deg) scale(1.0)}",h+="75% { left:0px; top:40px; "+d.cssPrefix+"transform:rotate(270deg) scale(0.5)}",h+="100% { left:0px; top:0px; "+d.cssPrefix+"transform:rotate(360deg)scale(1)} }\n",a.innerHTML+=h,e.zBlocks=!0),Fr(f,{display:"inline-block",verticalAlign:"middle",width:"70px",height:"70px",transform:"scale("+r.scale+")"});var p=document.createElement("div");p.innerHTML="&nbsp",f.appendChild(p),Fr(p,{backgroundColor:l,width:"30px",height:"30px",borderRadius:"1px",position:"absolute",top:"0",left:"0",animationName:r.type,animationDuration:r.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out"});var g=document.createElement("div");g.innerHTML="&nbsp",f.appendChild(g),Fr(g,{backgroundColor:s,width:"30px",height:"30px",borderRadius:"1px",position:"absolute",top:"0",left:"0",animationName:r.type,animationDuration:r.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",animationDelay:"-"+r.duration/4*1+"s"});var v=document.createElement("div");v.innerHTML="&nbsp",f.appendChild(v),Fr(v,{backgroundColor:c,width:"30px",height:"30px",borderRadius:"1px",position:"absolute",top:"0",left:"0",animationName:r.type,animationDuration:r.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",animationDelay:"-"+r.duration/4*2+"s"});var y=document.createElement("div");y.innerHTML="&nbsp",f.appendChild(y),Fr(y,{backgroundColor:u,width:"30px",height:"30px",borderRadius:"1px",position:"absolute",top:"0",left:"0",animationName:r.type,animationDuration:r.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",animationDelay:"-"+r.duration/4*3+"s"}),t.loader=!0}else if("zCircle1"==r.type){e.zCircle1||(h="\n@"+d.cssPrefix+"keyframes "+r.type+" { ",h+="0% ,25%, 50%, 75%, 100%{ "+d.cssPrefix+"transform: scale(0.0);  } ",h+="12.5%  { "+d.cssPrefix+"transform: scale(1.0); background-color: "+l+";}",h+="37.5%  { "+d.cssPrefix+"transform: scale(1.0); background-color: "+s+";}",h+="62.5%  { "+d.cssPrefix+"transform: scale(1.0); background-color: "+c+";}",h+="87.5%  { "+d.cssPrefix+"transform: scale(1.0); background-color: "+u+";} }\n",a.innerHTML+=h,e.zCircle1=!0),Fr(f,{display:"inline-block",verticalAlign:"middle",width:"70px",height:"70px",transform:"scale("+r.scale+")"});var m=document.createElement("div");m.innerHTML="&nbsp",f.appendChild(m),Fr(m,{width:"100%",height:"100%",borderRadius:"50%",opacity:"0.6",position:"absolute",top:"0",left:"0",animationName:r.type,animationDuration:r.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out"}),t.loader=!0}else if("zBars"==r.type)e.zBars||(h="\n@"+d.cssPrefix+"keyframes "+r.type+" { ",h+="0%, 40%, 100% { "+d.cssPrefix+"transform: scaleY(0.4) }",h+="20% { "+d.cssPrefix+"transform: scaleY(1.0) } }\n",a.innerHTML+=h,e.zBars=!0),Fr(f,{display:"inline-block",verticalAlign:"middle",width:"50px",height:"30px",textAlign:"center",fontSize:"10px",transform:"scale("+r.scale+")"}),(k=document.createElement("div")).innerHTML="&nbsp",f.appendChild(k),Fr(k,{backgroundColor:l,marginLeft:"1px",display:"inline-block",width:"6px",height:"100%",borderRadius:"1px",animationName:r.type,animationDuration:r.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out"}),(_=document.createElement("div")).innerHTML="&nbsp",f.appendChild(_),Fr(_,{backgroundColor:s,marginLeft:"1px",display:"inline-block",width:"6px",height:"100%",borderRadius:"1px",animationName:r.type,animationDuration:r.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",animationDelay:"-"+(r.duration-.1)+"s"}),(S=document.createElement("div")).innerHTML="&nbsp",f.appendChild(S),Fr(S,{backgroundColor:c,marginLeft:"1px",display:"inline-block",width:"6px",height:"100%",borderRadius:"1px",animationName:r.type,animationDuration:r.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",animationDelay:"-"+(r.duration-.2)+"s"}),(O=document.createElement("div")).innerHTML="&nbsp",f.appendChild(O),Fr(O,{backgroundColor:u,marginLeft:"1px",display:"inline-block",width:"6px",height:"100%",borderRadius:"1px",animationName:r.type,animationDuration:r.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",animationDelay:"-"+(r.duration-.3)+"s"}),t.loader=!0;else if("zCircle2"==r.type){e.zCircle2||(h="\n@"+d.cssPrefix+"keyframes "+r.type+" { ",h+="0%, 80%, 100% { "+d.cssPrefix+"transform: scale(0.0) }",h+="40% { "+d.cssPrefix+"transform: scale(1.0) } }\n",a.innerHTML+=h,e.zCircle2=!0),Fr(f,{display:"inline-block",verticalAlign:"middle",width:"72px",height:"18px",textAlign:"center",fontSize:"10px",transform:"scale("+r.scale+")"});var b=document.createElement("div");b.innerHTML="&nbsp",f.appendChild(b),Fr(b,{backgroundColor:l,display:"inline-block",width:"18px",height:"18px",borderRadius:"100%",animationName:r.type,animationDuration:r.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out"});var x=document.createElement("div");x.innerHTML="&nbsp",f.appendChild(x),Fr(x,{backgroundColor:s,display:"inline-block",width:"18px",height:"18px",borderRadius:"100%",animationName:r.type,animationDuration:r.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",animationDelay:"-"+(r.duration-.2)+"s"});var w=document.createElement("div");w.innerHTML="&nbsp",f.appendChild(w),Fr(w,{backgroundColor:c,display:"inline-block",width:"18px",height:"18px",borderRadius:"100%",animationName:r.type,animationDuration:r.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",animationDelay:"-"+(r.duration-.4)+"s"});var C=document.createElement("div");C.innerHTML="&nbsp",f.appendChild(C),Fr(C,{backgroundColor:u,display:"inline-block",width:"18px",height:"18px",borderRadius:"100%",animationName:r.type,animationDuration:r.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",animationDelay:"-"+(r.duration-.6)+"s"}),t.loader=!0}else if("zCrossBars"==r.type){e.zCrossBars||(h="\n@"+d.cssPrefix+"keyframes "+r.type+" { ",h+="0%{left:-50%;}",h+="100%{left: 150%;} }\n",a.innerHTML+=h,e.zCrossBars=!0);var k,_,S,O;Fr(f,{display:"inline-block",position:"relative",verticalAlign:"middle",width:"70px",height:"30px",boxSizing:"border-box",borderWidth:"2px",borderStyle:"solid",borderColor:"rgb(160, 150, 150)",borderRadius:"8px",overflow:"hidden",transform:"scale("+r.scale+")"}),(k=document.createElement("div")).innerHTML="&nbsp",f.appendChild(k),Fr(k,{backgroundColor:l,width:"10px",height:"100%",position:"absolute",transform:"rotate(45deg) scaleY(2)",animationName:r.type,animationDuration:r.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDelay:"-"+r.duration+"s"}),(_=document.createElement("div")).innerHTML="&nbsp",f.appendChild(_),Fr(_,{backgroundColor:s,width:"10px",height:"100%",position:"absolute",transform:"rotate(45deg) scaleY(2)",animationName:r.type,animationDuration:r.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDelay:"-"+r.duration/100*80+"s"}),(S=document.createElement("div")).innerHTML="&nbsp",f.appendChild(S),Fr(S,{backgroundColor:c,width:"10px",height:"100%",position:"absolute",transform:"rotate(45deg) scaleY(2)",animationName:r.type,animationDuration:r.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDelay:"-"+r.duration/100*60+"s"}),(O=document.createElement("div")).innerHTML="&nbsp",f.appendChild(O),Fr(O,{backgroundColor:u,width:"10px",height:"100%",position:"absolute",transform:"rotate(45deg) scaleY(2)",animationName:r.type,animationDuration:r.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDelay:"-"+r.duration/100*40+"s"}),t.loader=!0}else Fr(f,{display:"inline-block",verticalAlign:"middle",width:"30px",height:"30px",position:"absolute",backgroundImage:"url('"+_m+"loader_"+r.type+".gif')",backgroundSize:"30px 30px",backgroundRepeat:"no-repeat",backgroundPosition:"center"});return f}}(e.container.selectAll("div.loading"),{type:a,colors:o=o&&o.length?o:null}),l=(new XMLSerializer).serializeToString(s)),i&&(l+="<p style=position:relative;display:inline-block>"+i+"</p>"),l},constructChartGroups:function(e){function t(e){return e?[1]:[]}var n,r=e.svg,a=e.systemConf,i=e.chartHeight;if(e.chartWidth,mt(r,"g",t(!0===a.canvas.title.show&&jt(e,"title",i)),".","class","charttitle"),mt(r,"g",t(!0===a.canvas.subtitle.show&&jt(e,"subtitle",i)),".","class","chartsubtitle"),mt(r,"g",t(a.credits&&!0===a.credits.enabled&&jt(e,"credits",i)),".","class","chartcredits"),n=e.isGeoMap&&e.geo.isCanvasMode&&e.dataObject.hasPointChart?e.wrap=Et("g",".xychart",[1],e.staticPaneSVG,":first-child"):e.wrap=mt(r,"g",[1],".","class","xychart"),e.nochartdata)mt(n,"g",[1],".","class","nodatahandler");else{mt(n,"g",[0],".","class","nodatahandler");var o=mt(n,"g",[e.seriesdata],".","class","chartgroup");mt(o,"g",t(!0===a.chart.axes.xaxis.show),".","class","x-axis"),mt(o,"g",[e.seriesdata],".","class","y-axis"),mt(o,"g",[e.seriesdata],".","class","threshold");var l=mt(mt(o,"g",[e.seriesdata],".","class","seriesClippathholder"),"g",[e.seriesdata],".","class","seriesholder");e.filterEffectsID=function(e){var t=e.systemConf,n=t.chart.effects.choice;if(tb.svg_filters[n]){var r=t.chart.effects.options[n];return"dropShadow"===n&&(r.blur=qy(0,r.blur)),tb.get(tb.svg_filters,n,r,{chartObj:e})}}(e),l.attr("filter",e.filterEffectsID?"url("+e.defsLocation+"#"+e.filterEffectsID+")":null);var s=mt(e.staticPaneSVG,"g",[e.seriesdata],".","class","labelClippathholder"),c=!1;e.dataObject&&(c=e.dataObject&&e.dataObject.noofBarEnabledSeries&&!e.dataObject.isCombinationalChart||e.dataObject.isHierarchy||e.dataObject.isFlowChartCategory),c||mt(s,"g",[e.seriesdata],".","class","labelholder"),mt(e.staticPaneSVG,"g",[e.seriesdata],".","class","threshold"),mt(e.staticPaneSVG,"g",[1],".","class","qualitativeGroup"),mt(mt(e.staticPaneSVG,"g",[1],".","class","plotareaBorder-property"),"path",t(!0===a.chart.plot.border.show),".","class","plotBorderPath"),mt(e.staticPaneSVG,"g",[1],".","class","eventgroup"),c&&(s.raise(),mt(s,"g",[e.seriesdata],".","class","labelholder").style("pointer-events",fm)),mt(l,"rect",[1],".","class","dummy-rect-filter").style("pointer-events",fm),wa.helpers.createLegendArea(e)}},handleErrors:function(e,t){t=t.stack?t.stack:t,Vy.error?Vy.error(t):Vy.log(t),e.breakOnErr=!0,H(e.systemConf,"canvas.events")&&V(e.systemConf.canvas.events.onerror,Hv(),e,t)},positionSVG:function(e){return{width:e.getChartDimension("width")+hm,height:e.getChartDimension("height")+hm,position:"absolute",top:0,left:0}},createLegendArea:function(e){var t=Dx.isContinousLegend(e),n=Et("g",".legendarea",[1],e.staticPaneSVG),r=e.container.selectAll("div.legendarea");if(t){var a=e.dataObject;a&&(a.noofBarEnabledSeries&&!a.isCombinationalChart||a.isHierarchy)&&n.raise(),r.style("display",fm),e.legendarea.element=n}else n.style("display",fm),e.legendarea.element=r},getChartId:function(e){return e.id},setChartId:function(e){e.id},getStyles4Gradients:function(e){var t=e.gradients||{};if(1===Km.IE&&0===Km.VERSION.indexOf("9.")){var n=t.stopColor?t.stopColor.map(Cn):["black","white"];return"linear"!==t.type?{filter:"progid:DXImageTransform.Microsoft.Alpha(opacity=0, finishopacity=100, style=2)","background-color":n[1]}:{filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr="+n[0]+", endColorstr="+n[1]+")"}}var r,a=Km.WEBKIT?"-webkit-":Km.FIREFOX?"-moz-":Km.IE?"-ms-":"",i="";return Z(t.useCSS)?r=t.useCSS:(Z(t.stopColor)&&t.stopColor.map(function(e,n){var r=Z(t.stopOffset)&&Z(t.stopOffset[n])?" "+t.stopOffset[n]:"";i+=0===n?e+" "+r:","+e+r}),"radial"===t.type?r="radial-gradient("+i+")":"linear"===t.type&&(r="linear-gradient("+i+")")),{"background-image":a+r}},getStyles4Image:function(e){return{"background-image":"url("+e.imageUrl+")","background-repeat":e.imageRepeat}}},et.credits=function(e){return{enabled:!1,imageWidth:150,imageHeight:50,hAlign:"right",vAlign:"bottom",text:"Zoho Reports",target:"newtab",marginTop:0,marginRight:10,marginBottom:10,marginLeft:0,fontSize:e.fontL1Size.l4}};var Nx={CALCULATE_DOMAIN:function(e,t,n,r,a){var i=e.dataset.getDataType(n,r),o=e.axes.rotated,l=void 0,s=void 0;return null===t?("x"===n?s=e.axes.x.baseScale:"y"===n&&(s=e.axes.y.groups[r].baseScale),s.domain()):(l="x"===n?(a=Hm(a,e.axes.x.scale),e.systemConf.chart.axes.xaxis.reversed):(a=Hm(a,e.axes.y.groups[r].scale),e.systemConf.chart.axes.yaxis[r].reversed),Ca(t,a,n,i,o,l))},GET_DOMAIN:function(e,t,n,r,a){var i=3<arguments.length&&void 0!==r?r:0,o=a;return"xy"===n&&te(e)&&(e="x"===ka(t,o.axes.rotated)?[e[0][0],e[1][0]]:[e[0][1],e[1][1]]),this.CALCULATE_DOMAIN(o,e,t,i)},GET_DOMAIN_INFO:function(e,t,n,r){var a=this,i={};if(Re(t=be(t),"x")){var o=this.GET_DOMAIN(e,"x",n,0,r);i.x=[{domain:o,index:0,dataType:r.dataset.getDataType("x",0)}]}return Re(t,"y")&&(i.y=[],r.axes.y.groups.forEach(function(t,o){t.disabled||i.y.push({domain:a.GET_DOMAIN(e,"y",n,o,r),index:o,dataType:r.dataset.getDataType("y",o)})})),i},DOMAIN_TO_DATA:function(e,t,n){var r=e.axes.x.scale,a=e.axes.y.groups[0].scale,i=void 0,o=void 0,l=[];return te(t)&&(t=Ge(t),i=t.map(r).sort(Wg)),te(n)&&(n=Ge(n),o=n.map(a).sort(Wg)),e.renderer.filter(function(t){t.seriesdataAfterUpdate.forEach(function(t){var n=t.filter(function(t){return Nx.POINT_WITHIN_RANGE(t,i,o,e)});l=l.concat(n)})}),l},POINT_WITHIN_RANGE:function(e,t,n,r,a){var i=4<arguments.length&&void 0!==a?a:0,o=r.axes.x.scale,l=r.axes.y.groups[i].scale;return function(e){var a=!0,s=!0;if(te(t)){var c=o(r.dataset.getX(e));a=c>=t[0]&&c<=t[1]}if(te(n)){var u=l(r.dataset.getY(e,i));s=u>=n[0]&&u<=n[1]}return a&&s}(e)},POINT_WITHIN_DOMAIN:function(e,t){var n=void 0,r=t.plotBrush.domainInfo.x[0].domain;return te(r=[r[0],r[r.length-1]])&&(n=r.map(t.axes.x.scale).sort(Wg)),Nx.POINT_WITHIN_RANGE(e,n,null,t)},FILTER_CHART:function(e,t){t.cache.data={},t.cache.search={},t.eventHandler.bulletEvents=null,t.updateScale&&(pe(e,function(e,n){be(e).forEach(function(e,r){t.updateScale(null,n,e.domain,e.index,e.range,!0)})}),t.plot.renderer.draw(!0,!1),t.dataObject.flattenPoints||t.dataObject.flattenData(),t.drawPlotareaClippath(),t.updatePlotareaProp(),t.positionEventTrackerElement(),t.drawThreshold(!0))}},Fx=function(e,t){if(te(e)&&te(t))return function(e,t){if(te(e)&&te(t)){var n=e.map(function(e,n){return Sa(e,t[n])});return Oa(n.slice().reverse(),[],n),n}}(e,t);var n=Sa(e,t);return n&&n.draw(),n},Vx=function(e,t){return e.isD3Selection||(e=fg(e)),function(e,t){return new Vx.GeoMap(e,t)}(e,t)},Wx="datalabels",Yx="stackLabels",Ux="innerLabel",Gx="parentLabels",Xx="x",Zx="y",qx="z",Qx="geo",Kx="per",$x="splitper",Jx="maxper",ew="percent",tw="splitpercent",nw="maxpercent",rw=Rg([Xx,Zx,qx,Qx,Kx,$x,Jx,ew,tw,nw]),aw={YYYY:"%Y",MMMM:"%B",EEEE:"%A",EEE:"%a",MMM:"%b",YY:"%y",MM:"%m",EE:"%U",dd:"%d",HH:"%H",hh:"%I",mm:"%M",ss:"%S",a:"%p",MILLI:"%L",z:"%Z",QT:"$Q"},iw={decimal:"d",exponent:"e",float:"f",binary:"b",octal:"o",hexadecimal:"x",SIprefix:"s"},ow={Q:Va},lw=Object.keys(ow).map(function(e){return"\\$"+e}),sw=new RegExp(lw.join("|")),cw={};cw.filterBySum=function(e,t){function n(e,n){return e+(n.disabled?0:Ky(n[t]||0))}return e.filter(function(e){return 0<e.reduce(n,0)})},cw.getKey=function(e,t,n,r){if(!r){var a=n.dataset,i=Gt.helpers.getParsedYAxisOrder((n.seriesdata[t]||{}).yaxiscolumnorder);r=[a.getX(e),a.getY(e,i)]}return n&&jn(n)?"x("+r[0]+")":"x("+r[0]+") y("+r[1]+")"},km.setComponent("defaultDataParser",Ga),Ga.get=function(e,t){var n,r=e.metadata,a=r.columns,i=r.axes,o=e.seriesdata.chartdata,l=Gt.helpers.getParsedYAxisOrder;n={},Object.keys(i).sort(function(e,t){return t.length>e.length?-1:t.length<e.length?1:0}).forEach(function(e){n[e]=i[e]});var s,c=a[(i=n).clr]||{},u=a.map(function(e,t){return function(e){var t=[];for(var n in i)if(i.hasOwnProperty(n)&&-1!=("y"==n?Ig(i[n]):i[n]).indexOf(e))return"y"==n&&i[n].map(function(n,r){var a=n.indexOf(e);-1!=a&&(t.push(r),t.push(a))}),{type:n,order:t}}(t)}),d={xidx:a[i.x].dataindex,yidx:function(e){var t=e instanceof Array?i.y[e[0]][e[1]||0]:i.y[e][0];return a[t].dataindex},zidx:(a[i.z]||{}).dataindex,tooltipidx:function(e){return null!=i.tooltip?a[e].dataindex:null},clridx:c.levelindex?null:c.dataindex};return d.setDataObj=function(e){s=e},d.getX=function(e){return Z(s)&&(s.categoryHierarchy&&s.hierarchical.pivotLayout.columns.count&&!s.hierarchical.pivotLayout.columns.splitColumnLeaves||s.isWaterfallEnabled)?e.index:this.getActualX(e)},d.getY=function(e,t,n){try{var r=this.yidx(t);return void 0===e[r]?null:null==n?e[r]:e[r][n]}catch(e){}},d.getZ=function(e){return e[this.zidx]},d.getClr=function(e){return e[this.clridx]},d.getGroupByValues=function(e,t){return null==t||0==t.length?null:t.reduce(function(t,n,r){return Z(e[n])?t+e[n]:t},"")},d.getActualX=function(e){return e[this.xidx]},d.getDataType=function(t,n,i){i=i||d.seriesTypes.values().map(function(e){return+e});var o=s&&s.hierarchical,l=void 0;if(o)if(o.pivot){var c="x"==t?"column":"row";l=s.hierarchical.pivotLayout.getRootNodeList(c).getLeavesCount()-1<n}else l="x"===t&&0<n;if(l)return"ordinalNonLinear";var u=null;if(null!=r.axes[t]){var h=this.getColumnIdx(t,n),f=a[h];u=f.datatype;var p="x"==t&&(s&&s.isPolarAxisCategory||-1!=i.indexOf(Kv.bar)||-1!=i.indexOf(Kv.stkdbar)||-1!=i.indexOf(Kv.bullet)||-1!=i.indexOf(Kv.gantt)||-1!=i.indexOf(Kv.boxplot)||-1!=i.indexOf(Kv.web))||"clr"===t&&e.legend._dummy,g=-1!=i.indexOf(Kv.heatmap)&&("x"===t||"y"===t);u=p||f.useDiscrete||g?ox:u}return u},d.getColumnIdx=function(e,n){var a,i=r.axes[e];if("y"==e)if(s&&s.hierarchical&&s.hierarchical.pivotLayout.rows.count){var o=s.hierarchical.pivotLayout.getRootNodeList("row");n>o.getLeavesCount()-1?r.columns.filter(function(e,r){e.levelindex==t.axes.y.count-1-n&&(a=r);}):a=i[0][0]}else a=n instanceof Array&&2==n.length?i[n[0]][n[1]]:i[n][0];else if("tooltip"==e)a=i[n];else if("x"==e&&0<n){if(s.hierarchical.pivot){var l=s.hierarchical.pivotLayout.getRootNodeList("column"),c=s.hierarchical.pivotLayout.getRootNodeList("row").getBranchesCount()||0;n>l.getLeavesCount()-1?r.columns.filter(function(e,r){e.levelindex==c+t.axes.x.count-1-n&&(a=r)}):a=i[0]}else r.columns.filter(function(e,r){e.levelindex==t.axes.x.count-n&&(a=r)});a=Hm(a,i[0])}else a=null==i?null:i[0];return a},d.getColumn=function(e,t){var n=this.getColumnIdx(e,t);return a[n]},d.getColumnName=function(e,t){return(0!=t?z:I)(a[e].columnname)},d.getCustomizedVal=function(e,t,n,r,i,o,l,s,c,u,h){B(c)&&(c=!/(tooltip|legend)/.test(l));var f=e.chartTypes[0].name===Nb;return t.toString().replace(Hy,function(){var t=arguments[0],p=arguments[1],g=arguments[2],v=arguments[3],y=arguments[4],m=arguments[5],b=arguments[7],x=arguments[8],w=p||g||v||y||m||x;if(-1!=t.indexOf("{{clr}}"))return s;if(null==a[w])return t;var C=l===Yx||f?o:d.getDataPoint(e,w,n,r,i,o);if(null==C)return"";var k=t.match(/[a-z]+/gi)[0];switch(k){case"col":return d.getColumnName(g,c);case"valatpos":case"val":var _=Z(x),S=h;_&&(p=b,S=x);var O=d.getDataPointValue(e,C,p,n,!1,l,r,c,u,S);return-1<[Wx,Yx,Ux,Gx].indexOf(l)&&(O=O||""),O;case Kx:case $x:case Jx:return d.getDataPointValue(e,C,v||y||m,n,k,l,r,c,u)}})},d.getYaxisColumnIndexBySeriesIndex=function(e,t){var n=(o[t]||o[0]).yaxiscolumnorder||[0,0];return te(n)?i.y[n[0]][n[1]||0]:i.y[n][0]},d.getDataPoint=function(e,t,n,r,l,s){var c=null,d=a[t=+t]||{},h=n,f=!0;if("y"===(u[t]&&u[t].type)&&this.getYaxisColumnIndexBySeriesIndex(e,n)!==t)return c;if(e.dataObject.isHierarchy){var p=Za(s,e),g=e.renderer[p].getProcessedNode,v=g?g(s):s,y=e.userdata.facets;f=i.clr&&i.clr[0]===t&&1===v.depth||-1!==e.systemConf.metadata.axes.y[0].indexOf(t)||v.children&&(d.levelindex===v.depth-1||te(d.levelindex)&&-1!==d.levelindex.indexOf(v.depth-1))||!v.children&&(null==d.levelindex||null!=d.dataindex)||Re(y&&y.rows||[],t)||Re(y&&y.columns||[],t)}else e.dataObject.isFlowChartCategory&&(c=s.point);if(null!=h&&f){var m=Za(s,e,e.isAxisCategory||e.dataObject.isPolarAxisCategory?h:0),b=e.renderer[m],x=s?null:null!=b&&null!=b.seriesdataAfterUpdate?b.seriesdataAfterUpdate[r]:o[h].data[r];c=s||x[l]}return c},d.getDataPointValue=function(e,t,n,r,s,c,u,h,f,p){null!=n&&(n=+n),B(h)&&(h=!/(tooltip|legend)/.test(c));var g,v=a[n]||{},y=v.datatype,m=v.levelindex,b=v.dataindex,x=v[y];if(null==t)return null;if(e.dataObject.isHierarchy){var w=Za(t,e),C=e.renderer[w],k=C&&C.getProcessedNode;g=k?k(t):t}if(null==i.clr&&"legend"!==c||n!=i.clr||e.dataObject.isHierarchy&&"legend"!==c&&null!=v.dataindex){if(Z(m)&&e.dataObject.hierarchical&&"ordinal"==y){var _=e.dataObject.hierarchical.getNodeValueByColumnIdx(t,n,m);return _?Aa(x,_,y,e,c,h):""}if(e.dataObject.isHierarchy&&(m===g.depth-1||te(m)&&-1!==m.indexOf(g.depth-1)))return Aa(x,g.children||null==v.dataindex?t.seriesname:t[b],y,e,c,h);T=n==this.getColumnIdx("y",l((e.seriesdata[r]||e.seriesdata[0]).yaxiscolumnorder))?" - ":void 0;var S,O=s?Ma:Aa;if(f){for(var A=0,P=0;P<f;P++)A+=d.getDataPointUnformattedValue(y,r,P,n,t,c,s,b,p);S=A}else S=d.getDataPointUnformattedValue(y,r,u,n,t,c,s,b,p);return""===S&&s?S:O(x,S,y,e,c,h,T)}if(Z(this.clridx)&&dx.isQuantileColorScale(e))return"legend"!==c?Aa(x,this.getClr(t),y,e,c,h):Aa(x,t,y,e,c,h,T="-");var T,E=t.paneid?Gt.helpers.getSeriesdata(e,t.paneid,r):o[r];return Aa(x,t.seriesname||E&&E.seriesname,y,e,c,h)},d.getDataPointUnformattedValue=function(e,n,r,a,i,o,s,c,u){if(t.dataObject.isHierarchy)var d=Za(i,t),h=t.renderer[d],f=h&&h.getProcessedNode,p=f?f(i):i;if(s){var g=e==sx?Xa(t,n,r,a,i,s,o):null;return null!=g?(o==Yx?i:t.dataObject.isHierarchy&&p.children&&Z(p.value)?p.value:t.dataObject.isPercentChart?i.y:i[c])/g*100||0:""}var v=this.getColumnIdx("y",l((t.seriesdata[n]||t.seriesdata[0]).yaxiscolumnorder));return t.dataObject.isHierarchy&&p.children&&a==v&&Z(p.value)?p.value:o==Yx?i:Z(u)?i[c][u]:i[c]},d.getMetaInfoObj=function(e,t,n){function r(e,t){var n=Dm(i[e]||{});return n.value=t,n.columnindex=e,n}var a=e.systemConf.metadata.axes,i=e.systemConf.metadata.columns,o=e.systemConf.seriesdata.chartdata,l=(n=e.isAxisCategory||e.isNonAxisMultiSeriesCategory?n:0,[]),s=(o[n]||o[0]).yaxiscolumnorder||[0,0],c=s instanceof Array?a.y[s[0]][s[1]||0]:a.y[s][0];if(t instanceof Array&&t.forEach(function(e,t){var n=i.indexOf(i.filter(function(e,n){return e.dataindex==t&&(d.yidx(s)!=t||d.yidx(s)==t&&c==n)})[0]);l.push(r(n,e))}),null!=a.clr){var u=a.clr instanceof Array?a.clr[0]:a.clr;l.push(r(u,o[n].seriesname))}return l},d.processMetaData=function(){var e=Rm(r,"axes.clr");Z(e)&&(e=e[0]),a.forEach(function(t,n){var r;if(n!==e){if(!Z(t.datatype)){var a=d.getDataByColumnIndex(t.dataindex);r=d.findDataType(a),t.datatype=r}Z(r)&&!Z(t[r])&&(t[r]={})}})},d.getDataByColumnIndex=function(e){var n=null,r=!1;return t.seriesdata.some(function(t){return t.data.some(function(t){return t.some(function(t){if(Z(t))return(r=Z(t[e]))&&(n=t[e]),r})})}),n},d.findDataType=function(e){return"number"==typeof e?31536e6<e?lx:sx:ox},d.processMetaData(),d},qa.prototype.initialize=function(){var e=this,t=e.chart,n=e.data,r=n.metadata.axes.x,a=n.metadata.columns[r].datatype,i=Gt.helpers,o=Py.discrete.some(function(e){return-1!==t.chartTypes.indexOf(e)}),l=i.getChartType(null,null,0,t.systemConf),s=l.value,c=l.name,u=n.facets&&n.facets.hierarchy,d=Zn(s)||an(s)||qn(s)||$n(s)||"line"===c||n.facets&&-1<["pie","funnel","pyramid","dial","web","packedbubble","treemap","sunburst","wordcloud"].indexOf(c);if((this.isHierarchyLayout()&&d||u)&&(e.hierarchical=new Gt.HierarchicalOrdinalDataAdapter(this.chart),e.isLayerHierarchy=!e.hierarchical.pivot,e.isPivot=e.hierarchical.pivot,e.isAxisCategoricalPivot=!0,e.chart.seriesdata=this.hierarchical.getSeries(),this.hierarchical.pivot&&(t.chartTypes=Gt.helpers.getAllChartTypesFromSeriesdata(e.chart.userdata,e.chart.seriesdata,"object"))),e.hierarchical&&e.hierarchical.facetRendering)Yt(e).forEach(function(n){var r={seriesdata:{chartdata:n.data.map(function(e){return e.node}),type:t.systemConf.seriesdata.type}};if(Qa(t,r)){e.isHierarchy=!0;var a=new(km.getComponent("hierarchyDataAdapter"))(n.data,e);n.data=a.getData()}});else if(Qa(t)){e.isHierarchy=!0;var h=new(km.getComponent("hierarchyDataAdapter"))(t.seriesdata,e);t.seriesdata=h.getData()}e.processTimeData(),Om&&(a===sx||a===lx&&!o)&&e.sortData(r,a)},qa.prototype.isHierarchyLayout=function(){return this.chart.systemConf.seriesdata.chartdata.some(qa.helpers.hasInnerSeries)},qa.prototype.processTimeData=function(){var e,t,n,r=this.chart,a=r.seriesdata;t=(e=qa.helpers.time.getDataInfo(this.data)).indices,n=e.formatConf.some(function(e){return Z(e)&&Z(e.inputformat)}),t&&t.length&&n&&(Qa(r)?$a:Ka)(a,function(t){return qa.helpers.time.applyFormats(t,e)})},qa.prototype.sortData=function(e){var t=this.chart,n=this.data;return t.seriesdata.forEach(function(t){var r=t.data,a=n.metadata.columns[e].dataindex;Gt.helpers.is3D(r)?te(r)&&r.forEach(function(e){qa.helpers.linear.sort(e,a)}):qa.helpers.linear.sort(r,a)}),n},Qv.svgRenderer=function(e,t){var n={},r=e.systemConf,a=Gt.helpers;return n.draw=function(n){if(e.scroll&&!e.scroll.initialized&&e.scroll.visible)return!1;e.dataset.getDataType("x")==ox&&e.isAxisCategory&&Zv.barBandwidth(e);var i,o=[];e.chartRendered=!1;var l=e.dataObject.isCombinationalChart,s=l?zy.arrangeSeriesRenderingOrder(e):e.seriesdata,c=e.dataObject.hierarchical,u=c&&c.facetRendering,d=[{data:s}];u&&(d=Ve((u&&c.pivotLayout).getRootNodeList("layer").panes));var h=0;d.forEach(function(n,o){t.barDatasetIndex=0,n.data.forEach(function(o,c){var d=u?zy.arrangeSeriesRenderingOrder(e,n.data,h,!0):s,f=u?o.node:o,p=l?u?c:d[c].seriesidx:c,g=u?h++:p,v=u?o.layer:0;((i=a.getChartType(f.type||e.userdata.seriesdata.type,sx))==Kv.bubblepie||jn(e))&&B(e.bubblePieRendererIndex)&&(e.bubblePieRendererIndex=p);var y=Ay.get(i);null==e.renderer[g]&&(e.renderer[g]=uw(y,e),e.rendererConf[g]=new Qv.rendererConf),e.renderer[g].chartRendered=!1,0==c&&(Lr(e,r.chart.plot.events,0,"init"),e.hideLoading(e.container)),zy.setRendererProp(e,e.renderer[g],d,p,c,t,g,i,v)})}),h=0,d.forEach(function(c,d){t.barDatasetIndex=0,c.data.forEach(function(t,d){var f=u?c.data:e.seriesdata,p=u?zy.arrangeSeriesRenderingOrder(e,c.data,h,!0):s,g=u?t.node:t,v=l?u?d:p[d].seriesidx:d,y=u?h++:v;if(0<v&&!e._isAxisCategory()&&!e.dataObject.isPolarAxisCategory)e.renderer[y].chartRendered=!0;else{i=a.getChartType(g.type||e.userdata.seriesdata.type,sx);var m=[],b=Ay.get(i),x=p.plotoptions,w=ei(r.chart.plot.plotoptions[b],x,e,b),C=w.enabled,k=w.type,_=cn(e,i,"axis"),S=cn(e,i,"polarAxis");if(C&&!n&&(qn(i)||an(i))&&[rx,tx,Kb,Fb,qb,Ub,Gb].indexOf(k)<0)o[y]=!1,m[y]=setInterval(function(){e.renderer[y].chartRendered&&clearInterval(m[y]),!o[y]&&(0==y||0<y&&e.renderer[y-1].chartRendered)&&(dw(e,f,e.renderer[y]),o[y]=!0)},10);else{if(e._isAxisCategory()&&!_&&!S&&0!=d)return void(e.renderer[y].chartRendered=!0);dw(e,f,e.renderer[y])}}})}),zy.renderCompletedEvents(e,n,t)},n};var uw=Qv.svgRenderer.createSVGRenderer=function(e,t){switch(e){case"waterfall":case"gantt":case"boxplot":case"bullet":e="bar";break;case"web":case"arearange":e="area";break;case"bubble":case"geobubble":case"geoscatter":e="scatter";break;case"bubblepie":case"geobubblepie":e="bubblepie"}return rn(t)&&jn(t)&&Re([Tb,Lb,Mb],e)&&(e="bubblepie"),new My[e]},dw=Qv.svgRenderer.drawSVG=function(e,t,n,r){function a(e,t,n){return e.select("g."+t).attr("transform","translate("+n.x+","+n.y+")")}function i(t){e.dataObject.isPolarAxisCategory&&t.selectAll(function(){return this.childNodes}).attr("transform","translate("+e.plotarea_approx.x+","+e.plotarea_approx.y+")")}if(r)n.update();else{clearTimeout(n.renderedTimer);var o=e.wrap.data([e.systemConf]),l=ma(e),s=n.commonRendererProp().params.bound,c=a(o,"seriesholder",{x:l.left,y:l.top}),u=e.dataObject.hierarchical;if(u&&u.facetRendering){var d=t[0].row||0,h=t[0].column||0,f=d+"_"+h,p=ln(e,f,0).value,g=Et("g",".grid"+f,[1],c);g.datum(t).call(n),i(g),Re(Py.axis,p)||a(c,"grid"+d+"_"+h,s)}else c.datum(t).call(n),i(o.selectAll("g.seriesholder"));a(e.staticPaneSVG,"labelholder",{x:l.left,y:l.top})}},hw={getContentTemplate:function(e,t,n,r){var a,i,o=e.systemConf,l=o.metadata,s=l.axes,c=l.columns,u=V(n||s.tooltip||av(c.length),null,e.userdata.seriesdata.chartdata[0].data[0][0]),d=s.y&&Ig(s.y)||[],h=o.tooltip,f=Ie(h.maxWidth||"40%",e.chartarea.width),p=vx.hasSharedSeries(e),g="column"===h.view,v=[];if(t)v=t;else{if(Z(o.tooltip.theme)&&H(window.$ZC,"tooltip.getTheme"))u=e.tooltip.content;else if(p){var y=Dg();e.seriesdata.forEach(function(t,n){hw.updateSharedInfo(e,y,n)}),u=hw.getRawSharedContent(e,y,u)}u.forEach(function(e,t){var n,r,i=r="";if(c[e]){if(1<d.length&&-1<d.indexOf(e)&&!p){if(a)return;a=!0,u.forEach(function(e){-1<d.indexOf(e)&&(i+="{{col("+e+")}}",r+="{{val("+e+")}}")})}else i="{{col("+e+")}}",r="{{val("+e+")}}";n=[i,r]}else n=e;v.push(n)})}return i=g?"<table cellspacing='0' cellpadding='0' border='0' style='border-spacing: 5px;'><tbody>"+(i=v.reduce(function(e,t){return e+(te(t)?"<tr style='vertical-align: top;'><td style='max-width:"+.4*f+"px;'>"+t[0]+": </td><td style='max-width:"+.6*f+"px;'><b>"+t[1]+"</b></td></tr>":"<tr style='vertical-align: top;'><td style='max-width:"+f+"px;'>"+t+"</td></tr>")},""))+"</tbody></table>":v.reduce(function(e,t,n){return e+(te(t)?t[0]+" : "+t[1]:t)+(n==v.length-1?"":"<br>")},""),r&&(i=i.replace(/{{clr}}/g,"black")),i},updateSharedInfo:function(e,t,n){var r=e.dataset,a=r.getColumnIdx("clr"),i=r.getColumnIdx("y",(e.seriesdata[n]||e.seriesdata[0]).yaxiscolumnorder||[0,0]),o="{{val("+(e.dataObject.pieWithAxis&&!e.dataObject.isCombinationalChart?vx.getPieColumnIndex(e):i)+")}}";t.y_val_pattern=t.y_val_pattern||"",t.y_col_pattern=t.y_col_pattern||"",-1==t.y_val_pattern.indexOf(o)&&(t.y_val_pattern+=o,t.y_col_pattern+=e.ismultiy||B(a)?""!=t.y_col_pattern?"":"{{val(null)}}":"{{val("+a+")}}")},getRawSharedContent:function(e,t,n){function r(e){var t=Z(d)?d:e;return(te(u)?u:[u]).some(function(e){return"string"==typeof e&&(-1!=e.indexOf("{{val("+t+")}}")||-1!=e.indexOf("{{per("+t+")}}"))})}var a=e.systemConf.metadata,i=a.axes,o=a.columns,l=Ig(i.y),s=e.dataset,c=[],u="",d=e.dataObject.pieWithAxis&&!e.dataObject.isCombinationalChart?vx.getPieColumnIndex(e):vm,h=n.some(function(e){return Hy.lastIndex=0,"string"==typeof e&&Hy.test(e)}),f=e.isAxisCategory;if(h)n.forEach(function(t,n){Z(o[t])&&(t=["{{col("+t+")}}","{{val("+t+")}}"]),(te(u=t)||"string"==typeof t)&&l.some(r)&&f?e.seriesdata.forEach(function(){c.push(te(t)?R(t):t)}):c.push(t)});else{var p="{{val("+s.getColumnIdx("x")+")}}",g=t.y_val_pattern,v=p,y=["<div style='margin-right:0.2em;display:inline-block;vertical-align:middle;border-radius: 50%;padding:0.4em;background:{{clr}}''></div>"+t.y_col_pattern,g];c.push(v),e.dataObject.pieWithAxis&&!e.dataObject.isCombinationalChart&&(c.push(["{{col("+s.getColumnIdx("y",0)+")}}","{{val("+s.getColumnIdx("y",0)+")}}"]),c.push(["{{col("+s.getColumnIdx("z")+")}}","{{val("+s.getColumnIdx("z")+")}}"])),f?e.seriesdata.forEach(function(){c.push(R(y))}):c.push(R(y))}return c}},fw={};fw.MAXHEIGHT_BLOCK="50%",fw.updatePlotarea4BlockTooltip=function(e){var t=e.systemConf.tooltip,n=t.block||{},r=t.position||"relative";if(t.enabled&&"block"===r){B(t.height)&&!t.content?(qv.tooltip(e.tooltip.element,e.systemConf,e).initialize(),e.tooltip.element.selectAll("div#tooltipcontent").html(hw.getContentTemplate(e,vm,vm,!0)),e.tooltip.preCalculatedHeight=e.tooltip.element.node().clientHeight):e.tooltip.preCalculatedHeight="20%";var a=e.plotarea;e.tooltip.blockarea=Dm(a);var i=n.vAlign||ob,o=xe(Hm(t.borderWidth,1)),l=o.top,s=o.right,c=o.bottom,u=o.left,d=e.chartarea,h=d.width-u-s,f=d.height,p=vx.getSize(t,[h,f],["100%",e.tooltip.preCalculatedHeight]),g=Qy(p.h,Ie(fw.MAXHEIGHT_BLOCK,f))+l+c;i===nb&&(i=ob),a.height-=g,a[i]+=g}},fi.MILLISEC=0,fi.SECOND=1,fi.MINUTE=2,fi.HOUR=3,fi.DATE=4,fi.MONTH=5,fi.SECOND_TYPE="ABSSECOND",fi.MINUTE_TYPE="ABSMINUTE",fi.HOUR_TYPE="ABSHOUR",fi.DAY_TYPE="ABSDAY",fi.DATETIME_TYPE="DATETIME",fi.DATE_TYPE="DATE",fi.ABSWEEK_TYPE="ABSWEEK",fi.ABSMONTH_TYPE="ABSMONTH",fi.ABSQUARTER_TYPE="ABSQUARTER",fi.ABSYEAR_TYPE="YEAR",fi.D3_WEEKDAY_FNS=[iv,ov,lv,sv,cv,uv,dv],fi.DAY_MILLIS=864e5,fi.prototype.setZero=function(e,t){for(var n=0,r=0;r<=t;r++)switch(r){case fi.MILLISEC:n+=this.getMilliseconds(e),this.setMilliseconds(e,0);break;case fi.SECOND:n+=this.getSeconds(e),this.setSeconds(e,0);break;case fi.MINUTE:n+=this.getMinutes(e),this.setMinutes(e,0);break;case fi.HOUR:n+=this.getHours(e),this.setHours(e,0);break;case fi.DATE:n+=this.getDate(e)-1,this.setDate(e,1);break;case fi.MONTH:n+=this.getMonth(e),this.setMonth(e,this.startMonth);break;default:throw"unknown type 333: "+t}return n},fi.prototype.getBaseValue=function(e,t,n){switch(t){case fi.SECOND_TYPE:case fi.DATETIME_TYPE:var r=this.setZero(e,fi.MILLISEC);n&&0<r&&this.setSeconds(e,this.getSeconds(e)+1);break;case fi.MINUTE_TYPE:r=this.setZero(e,fi.SECOND),n&&0<r&&this.setMinutes(e,this.getMinutes(e)+1);break;case fi.HOUR_TYPE:r=this.setZero(e,fi.MINUTE),n&&0<r&&this.setHours(e,this.getHours(e)+1);break;case fi.DAY_TYPE:case fi.DATE_TYPE:r=this.setZero(e,fi.HOUR),n&&0<r&&this.setDate(e,this.getDate(e)+1);break;case fi.ABSWEEK_TYPE:r=this.setZero(e,fi.SECOND);var a=this.startWeekDay;n?(0<r&&this.setDate(e,this.getDate(e)+1),a<this.getDay(e)?this.setDate(e,this.getDate(e)+(7-this.getDay(e)+a)):this.setDate(e,this.getDate(e)+(a-this.getDay(e)))):a>this.getDay(e)?this.setDate(e,this.getDate(e)-(7-a+this.getDay(e))):this.setDate(e,this.getDate(e)-(this.getDay(e)-a));break;case fi.ABSQUARTER_TYPE:case fi.ABSMONTH_TYPE:r=this.setZero(e,fi.DATE),n&&0<r&&this.setMonth(e,this.getMonth(e)+1);break;case fi.ABSYEAR_TYPE:r=this.setZero(e,fi.MONTH),n&&r>this.startMonth&&this.setFullYear(e,this.getFullYear(e)+1);break;default:throw"unknow type 222: "+t}},fi.prototype.getTicksList=function(e,t,n,r){for(var a=new Array,i=t.getTime(),o=e.getTime(),l=new Date(o);o<=i;){switch(a.push(l),l=new Date(o),r){case fi.SECOND_TYPE:case fi.DATETIME_TYPE:l.setTime(l.getTime()+1e3*Xy(n));break;case fi.MINUTE_TYPE:l.setTime(l.getTime()+6e4*n);break;case fi.HOUR_TYPE:l.setTime(l.getTime()+36e5*n);break;case fi.DAY_TYPE:case fi.DATE_TYPE:l.setTime(l.getTime()+n*fi.DAY_MILLIS);break;case fi.ABSWEEK_TYPE:this.setDate(l,this.getDate(l)+n);break;case fi.ABSMONTH_TYPE:case fi.ABSQUARTER_TYPE:this.setMonth(l,this.getMonth(l)+n);break;case fi.ABSYEAR_TYPE:this.setFullYear(l,this.getFullYear(l)+n)}o=l.getTime()}return a},fi.prototype.range=function(e,t,n,r,a){function i(e,t){return null!=t&&e<=t?t:e}switch(e=new Date(e.getTime()),t=new Date(t.getTime()),this.getBaseValue(e,r,!1),this.getBaseValue(t,r,!0),r){case fi.SECOND_TYPE:case fi.DATETIME_TYPE:var o=1,l=Zy((t.getTime()-e.getTime())/1e3);return c=i(c=Zy(l/n)||o,a),{TYPE:hv,INTERVAL:c,TICKS:this.getTicksList(e,t,c,r)};case fi.MINUTE_TYPE:return o=1,c=i(c=Zy((t.getTime()-e.getTime())/(6e4*n))||o,a),{TYPE:fv,INTERVAL:c,TICKS:this.getTicksList(e,t,c,r)};case fi.HOUR_TYPE:return o=1,c=i(c=Zy((t.getTime()-e.getTime())/(36e5*n))||o,a),{TYPE:fv,INTERVAL:c,TICKS:this.getTicksList(e,t,c,r)};case fi.DAY_TYPE:case fi.DATE_TYPE:return o=1,c=i(c=Zy((t.getTime()-e.getTime())/(n*fi.DAY_MILLIS))||o,a),{TYPE:pv,INTERVAL:c,TICKS:this.getTicksList(e,t,c,r)};case fi.ABSWEEK_TYPE:o=1;var s=Zy((t.getTime()-e.getTime())/(n*fi.DAY_MILLIS*7));s=i(s,a);var c=7*Zy(s)||o;return{TYPE:gv,INTERVAL:c,TICKS:this.getTicksList(e,t,c,r)};case fi.ABSMONTH_TYPE:return o=1,c=i(c=Zy(this.getMonthsDiff(e,t)/n)||o,a),{TYPE:vv,INTERVAL:c,TICKS:this.getTicksList(e,t,c,r)};case fi.ABSQUARTER_TYPE:o=1;var u=this.getMonthsDiff(e,t)/n||o,d=Zy(u/3);return d=i(d,a),{TYPE:vv,INTERVAL:c=3*d,TICKS:this.getTicksList(e,t,c,r)};case fi.ABSYEAR_TYPE:return o=1,c=i(c=Zy((t.getFullYear()-e.getFullYear())/n)||o,a),{TYPE:yv,INTERVAL:c,TICKS:this.getTicksList(e,t,c,r)};default:throw"UNKNOWN TYPE 111: "+r}},fi.MAX_DATE=new Date(2008,8,29,23,23,23,999),fi.prototype.getMaxDate=function(e,t){return Aa(e,fi.MAX_DATE,lx,null,"axis",null,null,t)},fi.prototype.getMonthsDiff=function(e,t){return 12*(this.getFullYear(t)-this.getFullYear(e))+(this.getMonth(t)-this.getMonth(e))},fi.prototype.getYearsDiff=function(e,t){return 12*(this.getFullYear(t)-this.getFullYear(e))+(this.getMonth(t)-this.getMonth(e))},fi.prototype.getFullYear=function(e){return null!=this.useUTC&&this.useUTC?e.getUTCFullYear():e.getFullYear()},fi.prototype.getMonth=function(e){return null!=this.useUTC&&this.useUTC?e.getUTCMonth():e.getMonth()},fi.prototype.getDay=function(e){return null!=this.useUTC&&this.useUTC?e.getUTCDay():e.getDay()},fi.prototype.getDate=function(e){return null!=this.useUTC&&this.useUTC?e.getUTCDate():e.getDate()},fi.prototype.getHours=function(e){return null!=this.useUTC&&this.useUTC?e.getUTCHours():e.getHours()},fi.prototype.getMinutes=function(e){return null!=this.useUTC&&this.useUTC?e.getUTCMinutes():e.getMinutes()},fi.prototype.getSeconds=function(e){return null!=this.useUTC&&this.useUTC?e.getUTCSeconds():e.getSeconds()},fi.prototype.getMilliseconds=function(e){return null!=this.useUTC&&this.useUTC?e.getUTCMilliseconds():e.getMilliseconds()},fi.prototype.setFullYear=function(e,t){return null!=this.useUTC&&this.useUTC?e.setUTCFullYear(t):e.setFullYear(t)},fi.prototype.setMonth=function(e,t){return null!=this.useUTC&&this.useUTC?e.setUTCMonth(t):e.setMonth(t)},fi.prototype.setDate=function(e,t){return null!=this.useUTC&&this.useUTC?e.setUTCDate(t):e.setDate(t)},fi.prototype.setHours=function(e,t){return null!=this.useUTC&&this.useUTC?e.setUTCHours(t):e.setHours(t)},fi.prototype.setMinutes=function(e,t){return null!=this.useUTC&&this.useUTC?e.setUTCMinutes(t):e.setMinutes(t)},fi.prototype.setSeconds=function(e,t){return null!=this.useUTC&&this.useUTC?e.setUTCSeconds(t):e.setSeconds(t)},fi.prototype.setMilliseconds=function(e,t){return null!=this.useUTC&&this.useUTC?e.setUTCMilliseconds(t):e.setMilliseconds(t)},km.setComponent("dataLabel.applyFont",_i),km.setComponent("dataLabel.isDatalabelEnabled",Pi),Ni.prototype.add=function(e,t){var n=Hm(t,this.count);this.list.has(e)||(this.list1.set(n,e),this.list.set(e,[n,this.count++]))},Ni.prototype.get=function(e){return this.list1.get(e)},Ni.prototype.indexOf=function(e,t){var n=this.list.get(e);if(n)return t?n[1]:n[0]},Ni.prototype.values=function(){return this.list.keys()};var pw="log";dx.quantileScale=function(){function e(e){var t;return r.forEach(function(n,r){e>=n[0]&&e<=n[1]&&(t=r)}),Z(t)?n[t]:null}var t=[],n=[],r=[];return e.domain=function(n){if(arguments.length){t=n;for(var a=0;a<t.length;a+=2)r.push([t[a],t[a+1]]);return e}return t},e.range=function(t){return arguments.length?(n=t,e):n},e.copy=function(){return dx.quantileScale().domain(t).range(n)},e};var gw={add:function(e,t){km.setComponent(Fi(e),t)},get:function(e){return km.getComponent(Fi(e))}},vw=Dg();vw.set("categories",""),vw.set("extremes",function(e){var t,n=this;this.chartObj.dataObject,this.type,this.encode,this.reverse,this.dimension,t=e.map(function(e){if(te(e))return e;if(k(e))return V(e,n);var t={};return yw.has(e._type)?(t[e._type]=yw.get(e._type).call(n,e),t[e._type]):void 0});var r=Fg(Ig(t));return this.config.tempDomain=Fg(Ig(t)),this.config.extremes=r}),vw.set("plotBound",function(e){var t=this.config,n=this.chartObj,r=t.scaleType,a=this.encode,i=t.reverse,o=e.dimension,l=e.plotSize||n.plotarea;if("polar"==r)return Bi(n,a);if("clr"==a)return n.imagePallete||n.seriesColor;var s=gr(n,o,l),c=["width"==o?0:s,"width"==o?s:0];return i&&(c=c.reverse()),t.tempRange=c,this.d3_scale.origRange=Dm(c),c}),vw.set("markerBound",function(e){var t=this.chartObj,n=(this.config,t.dataObject),r=this.encode,a=e.mode,i=function(e,t){var n=t.chartObj,r=t.config,a=void 0,i=void 0,o=void 0;if("ordinal"==e){a=r.tempDomain,(i=r.tempRange)[0]>i[1]&&(i=[i[1],i[0]]);var l=Zv.getOuterPadding(i,r.tempDomain.length,r.padding,r.outerPadding);o=_g().domain(a).range(i).paddingInner(padding).paddingOuter(l)}else a=r.tempDomain,i=[0,n.plotarea[r.range.operators.plotBound.dimension]],o=ro(n.dataset,t.encode,t.key)().domain(a).range(i);return o}(type,this),o=n.updateMinMaxForMarker(i,r);return"range"==a?function(e){var t=this.tempRange;t[0]>t[1]&&(t=[t[1],t[0]]);var n=qy(e[1]-t[1],-e[0]);return this.outerPaddingPx=n}.call(this,o||0):function(e){var t=this.config,n=t.tempDomain,r=t.domain.extremes,a=[0,chartObj.plotarea[t.range.operators.plotBound.dimension]],i=Z(t.minRange)?0:a[0]-e[0],o=Z(t.maxRange)?0:e[1]-a[1],l=a[1]-a[0],s=(n[1]-n[0])/(l-i-o),c=[i*s,o*s],u=[t.defaultMin?0:r[0]-c[0],r[1]+c[1]];return this.config.extremes=u}.call(this,o||0)}),vw.set("bubbleBound",function(e){var t=this.chartObj,n=t.dataObject,r=this.config,a=(r.domain,r.padding,this.key),i=this.encode,o="x"==i?i:i+Hm(a,""),l=e.mode,s="domain"==l?n.domainCorrections.forBubbles:{},c=(r.tempRange||t.plotarea[r.range.operators.plotBound.dimension],t.plotarea.height),u=void 0,d=void 0,h=void 0;return"domain"==l&&Z(s[o])&&n.domainCorrections.plotHeight===c?d=s[o]:(h=function(e){var t=e.chartObj,n=e.config,r=void 0,a=void 0,i=void 0;if("ordinal"==e.config.type){r=n.tempDomain||n.domain,(a=n.tempRange)[0]>a[1]&&(a=[a[1],a[0]]);var o=Zv.getOuterPadding(a,n.domain.length,n.padding,n.outerPadding);i=_g().domain(r).range(a).paddingInner(n.padding).paddingOuter(o)}else r=n.tempDomain,a=[0,t.plotarea[n.range.operators.plotBound.dimension]],i=ro(t.dataset,e.encode,e.key)().domain(r).range(a);return i}(this),u=n.updateMinMaxForBubble(h.range(),h,i,a)),"range"==l?function(e,t){var n=.5*qy(t[0]-e[0],e[1]-t[1]),r=[e[0]-n,e[1]+n],a=qy(r[1]-t[1],-r[0]);return this.outerPaddingPx=a}.call(this,u||0,h.range()):function(e,t,n){var r=this.chartObj,a=r.plotarea.height,i=r.dataObject,o=this.config,l=this.encode,s=this.key,c=o.tempDomain,u=void 0;if(n&&i.domainCorrections.plotHeight===a)u=n;else{var d=Z(o.domain.operators.minRange)?c[0]:t.invert(e[0]),h=Z(o.domain.operators.maxRange)?c[1]:t.invert(e[1]),f="x"==l?l:l+Hm(s,""),p=i.domainCorrections.forBubbles;i.domainCorrections.plotHeight=r.plotarea.height,u=p[f]=[c[0]-d,h-c[1]]}return this.config.extremes=[c[0]-u[0],c[1]+u[1]],u}.call(this,u||0,h,d)}),vw.set("fontBound",function(e){this.config;var t=this.chartObj,n=t.dataObject,r=this.encode,a=this.key,i=n.rangeCorrections.datalabels,o=n.domainCorrections.byDatalabels,l=e.mode,s=i,c="range"==l?i:o,u=r+Hm(a,""),d=n.getEncode(r,a).seriesData;if(B(c[u])&&zi(t,r)&&e.condition&&e.condition.call(this)){var h="time"==this.schema.data.dataType?"x":r;s[u]=gw.get("preCalculation")(h,d,t)||0}return"range"==l?function(e){var t=this.config,n=t.domain,r=t.padding,a=t.tempRange;a[0]>a[1]&&(a=[a[1],a[0]]);var i=Zv.getOuterPadding(a,t.domain.length,t.padding,t.outerPadding),o=_g().domain(n).range(a).paddingInner(r).paddingOuter(i),l=o(o.domain()[0])-o.range()[0],s=e||0;s=qy(0,s-l);var c=[a[0]-s,a[1]+s],u=qy(c[1]-a[1],-c[0]);return this.outerPaddingPx=u}.call(this,s[u]||0):function(e,t){var n=this,r=n.config,a=r.extremes,i=n.chartObj,o=i.dataObject,l=n.encode,s=o.domainCorrections.byDatalabels,c=l+Hm(n.key,""),u="time"==n.schema.data.dataType?"x":n.encode,d=n.chartObj.axes[u].orient,h=n.chartObj.plotarea["left"==d?"height":"width"],f=a[1]-a[0],p=t,g=i.plotarea.height;return t&&g==o.domainCorrections.plotHeight||(o.domainCorrections.plotHeight=g,p=(r.domain.outerPaddingCorrection||0)+f/(h-e)*e,s[c]=p||0),n.config.domain.hasDefaultMin||this.chartObj.datalabels.hasFixedPosition||(n.config.extremes[0]=n.config.extremes[0]-p||0),n.config.extremes[1]=n.config.extremes[1]+p||0,n.bounds.font=p||0,p}.call(this,s[u]||0,c[u])}),vw.set("waterfallBound",function(e){var t=this.config,n=this.chartObj,r=n.dataObject,a=this.encode,i=this.key,o=r.getCorrectionForWaterfall(t.extremes,a,i,n,this.bounds.font);return this.config.extremes=o}),vw.set("correctionFactor",Vi),vw.set("extraCorrectionFactor",function(e){var t=this.config,n=this.chartObj,r=t.extremes[1]-t.extremes[0],a=0==r?n.plotarea.width/2:r*(t.outerPadding||0);return this.config.domain.outerPaddingCorrection=a}),vw.set("correctionFactor1",Vi),vw.set("updateBaseValue",function(e){var t=this.chartObj.dataObject,n=this.key,r=this.config;t.saveBaseLine(n,r.extremes,e.definedMin,e.operatorC)}),vw.set("hasDefaultBaseValue",function(){var e=this.chartObj.dataObject,t=this.key,n=this.config,r=n.extremes,a=n.domain.operators.hasDefaultBase&&(null==e.hasNegativeValue[t]||0<e.hasNegativeValue[t]||r[1]-r[0]==0);return this.config.domain.hasDefaultMin=a}),vw.set("basevalue",function(e){var t=this.config,n=(this.chartObj,t.subfunction),r=t.extremes,a=new Date(r[0]),i=new Date(r[1]),o=new fi(e.metaConf);return o.useUTC=Hm(e.metaConf&&e.metaConf.useUTC,!1),o.getBaseValue(a,n,!1),o.getBaseValue(i,n,!0),t.extremes=[a.getTime(),i.getTime()],t.extremes}),vw.set("subfunction",function(e){var t=this.config,n=(this.chartObj,e.subfunction),r=t.extremes,a=new Date(r[0]),i=new Date(r[1]);return Z(n)||(n=Na(i-a).subFunction),t.subfunction=n}),vw.set("logConstant",function(e){var t=this.config,n=(this.chartObj.dataObject,this.encode,this.key,t.extremes),r=gg(n);0<r&&r<Hm(t.logBase,10)?this.d3_scale.constant=1e-4:this.d3_scale.constant=1});var yw=Dg();yw.set("extremesByData",function(e){var t=this.chartObj,n=(t.dataObject,this.type,this.encode,this.reverse,e.accessor,e.data||t.seriesdata),r=e.indices,a=[];return n.forEach(function(e){Ig(e.data).forEach(function(e){r.map(function(t){a=a.concat(e[t])})})}),Fg(a)}),yw.set("extremesByEncode",function(){var e=this.chartObj.dataObject,t=(this.type,this.encode,this.reverse,this.dimension,this.id,this.key),n=Ig(e.seriesExtermes[t]);return 0!=n.length?Fg(n):n.enabled?[0,0]:null}),yw.set("extremesByAccessor",function(e){var t,n=this.chartObj,r=n.dataObject,a=(this.type,this.encode),i=(this.reverse,this.dimension,e.accessor),o=e.data,l=e.indices;return t=o.map(function(e,t){var o=void 0,s=Ig(e.data),c=l?l[t]:t,u=r.allChartTypes[c],d=Gt.helpers.getParsedYAxisOrder(r.processedseriesData[c].yaxiscolumnorder);if("y"!=a||i||(i=function(e){return n.dataset.getY(e,d)}),Py.rangePlot.has(u)&&"y"==a){var h=Ig(s.map(i));o=Fg(h)}else o=Fg(s,i,d);return o}),Fg(Ig(t))}),yw.set("stackExtremes",function(e){var t=this.chartObj.dataObject,n=(this.type,this.encode,this.reverse,this.dimension,e.stackIndices);if(t.isPercentChart)return[0,100];if(!n.length)return[];var r=n.map(function(e){return t.encodes.stack[e].layout.getExtent()});return Fg(Ig(r))}),yw.set("waterfallProcessor",function(e){this.config;var t=this.chartObj.dataObject,n=(this.encode,this.key),r=t.processDataForWaterFall(n);return this.config.extremes=r});var mw=(_createClass(Ui,[{key:"init",value:function(){this.scale=vm,this.id=this.encode+"-"+this.key,this.d3_scale={};var e=this.getConfig(),t=this.getDataSchema(),n=e.ranges;n&&!te(n[0])&&(e.ranges=n.map(function(e){return[e]})),this.schema={data:t,domain:{key:t.meta.dataindex,min:e.minRange,max:e.maxRange,ranges:e.ranges,stops:e.stops,base:e.base}}}},{key:"create",value:function(){var e=this.getScaleType()();for(var t in"x"==this.encode||"y"==this.encode?(this.d3_scale.domain=this._parseDomain(),this.d3_scale.range=this._parseRange()):(this.d3_scale.domain=this.parseDomain(),this.d3_scale.range=this.parseRange()),this.d3_scale.unknown=0,this.d3_scale)e[t]?e[t](this.d3_scale[t]):e[t]=this.d3_scale[t];return this.scale=e}},{key:"getScale",value:function(){return this.scale||this.create(),this.scale}},{key:"getScaleType",value:function(){var e=this.schema.data,t=e.meta.scaleType;return function(e,t,n){var r=t.schema.domain.ranges,a=t.encode;switch(e){case sx:return r?dx.quantileScale:"sqrt"===n?Pg:n===pw?Tg:kg;case ox:return"x"==a||"y"==a?_g:Ag;case lx:return r?dx.quantileScale:Sg}}(e.dataType,this,t)}},{key:"getConfig",value:function(){return this.config}},{key:"_parseDomain",value:function(){var e=this,t=this.config,n=(t.field,t.domain);if(t.type,te(n))return n;if(!k(n)){var r={};return Object.keys(n.operators).map(function(t){vw.has(t)&&(r[t]=vw.get(t).call(e,n.operators[t]))}),n.evaluator.call(this,r)}V(n,this)}},{key:"_parseRange",value:function(){var e=this,t=this.config,n=(t.field,t.range);if(t.type,te(n))return n;if(!k(n)){var r={};return vw.keys().map(function(t){n.operators[t]&&(r[t]=vw.get(t).call(e,n.operators[t]))}),n.evaluator.call(this,r)}V(n,this)}},{key:"parseDomain",value:function(){var e=this.schema.data,t=V(e.source),n=e.dataType,r=this.schema.domain;n===lx&&(r=function(e,t){function n(e){return La(e,0,a).getTime()}var r=Gi(t),a=t[r]||{},i=a.inputformat;if(!i||/timestamp/i.test(i))return e;var o=e.min,l=e.max,s=e.stops,c=e.ranges;return c=c&&c.map(function(e){return e.map(n)}),s=s&&s.map(n),Z(o)&&(o=n(o)),Z(l)&&(l=n(l)),_extends({},e,{ranges:c,stops:s,min:o,max:l})}(r,e.meta));var a=r.min,i=r.max,o=r.stops,l=r.ranges,s=r.base;if(l)return Ig(l);switch(e.condition&&(t=t.filter(e.condition)),n){case ox:return function(e,t){return Fe(Wi(e,t))}(t,this.schema.domain.key);case lx:case sx:var c=function(e,t){var n=Wi(e,t);return Fg(n)}(t,this.schema.domain.key);if(Z(s)&&(c=Fg([].concat(_toConsumableArray(c),[s]))),Z(a)&&(c[0]=a),Z(i)&&(c[c.length-1]=i),o){var u=R(o);u.sort(Wg);var d=u.filter(function(e){var t=!0;return Z(a)&&(t=t&&a<=e),Z(i)&&(t=t&&e<=i),t});return(c[0]<d[0]||!d.length)&&d.splice(0,0,c[0]),c[1]>d[d.length-1]&&d.splice(d.length,0,c[1]),d}return c}}},{key:"parseRange",value:function(){}},{key:"getDataSchema",value:function(){var e=Gt.helpers.isCatNull,t=this.encode,n=this.key,r=this.chartObj,a=r.dataObject,i=r.dataset,o=e(i,"x"),l=e(i,"y",0),s=i.getColumn(t,n),c=a.getEncode(t,n),u=t?r.dataset.getDataType(t,n):Gi(s);return{source:c?Ig(c.seriesData.map(function(e){return Ig(e.data)})):[],condition:function(e){return!!function(e){return e.isGeoMap||e.mapObj||e.dataObject.isFlowChartCategory}(r)||!(o(i.getActualX(e,n))||l(i.getY(e,n)))},meta:Dm(s),dataType:u}}}]),Ui);Gt.prototype.getMinMaxY=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=arguments[1],n=arguments[2],r=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],a=this,i=a.yaxesData,o=a.hasNegativeValue,l=a.baseline,s=a.yRange,c=a.chartObj,u=a.dataset,d=a.isstacked()||a.isPercentChart,h=Hm(i[e],{}),f=u.getDataType("y",e),p=u.getColumn("y",e),g=h.minRange,v=h.maxRange,y=0,m=a.getEncode("y",e),b=la(c,"y",e);if(!m)return["NoData","NoData"];if(p.scaleType===pw&&(t=0,Z(b.logDomain)))return a.saveBaseLine(e,b.logDomain,g),b.logDomain;if(H(c.systemConf,"chart.brush.y["+e+"]")&&r){var x=c.systemConf.chart.brush.y[e],w=[x.minRange,x.maxRange];return a.saveBaseLine(e,w,null,!0),w}if(t=Hm(t,c.datalabels.hasFixedPosition?1e-8:.05),l[e]=!0===Rm(h,"baseline.show")?h.baseline.value:null,!s[e]){var C;if(C=a.isWaterfallEnabled?a.processDataForWaterFall(e):d?function(e,t){var n,r=e.dataset,a=e.processedseriesData,i=Gt.helpers,o=e.getEncode("y",t),l=o.seriesData,s=o.seriesIndices;if(e.isPercentChart)return[0,100];if(e.pivot){var c=e.hierarchical.pivotLayout,u=c.getRootNodeList("row"),d=c.layers;u.hasMultiCluster(),l=Ve(d.panes)}return n=l.map(function(t,n){function o(e){return r.getY(e,h)}var l=e.pivot?n:s[n],c=e.seriesAssist[l];if(Re(c.layout||[],"stack")){var u=e.pivot?t.row+"_"+t.column:c.stackIndex;return e.encodes.stack[u].layout.getExtent()}var d=Ig(t.data),h=i.getParsedYAxisOrder(a[l].yaxiscolumnorder),f=e.allChartTypes[l];if(Py.rangePlot.has(f)){var p=Ig(d.map(o));return Fg(p)}return Fg(d,o)}),Fg(Ig(n))}(a,e):function(e,t){var n=Ig(t.seriesExtermes[e]);return 0!=n.length?Fg(n):n.enabled?[0,0]:null}(e,a)){var k=qi(Hm(Rm(c.userdata,"chart.axes.yaxis["+e+"]"),{})),_=Gt.helpers.hasLevelMarkerData(a,e)?a.overLevelMarker(e):[];C=C.concat(k,_),C=Fg(C)}s[e]=C}var S=s[e];if(B(S))return["NoData","NoData"];a.saveBaseLine(e,S,g);var O=f==sx&&Qi(m,a,c),A=O&&(null==o[e]||0<o[e]);O&&S[1]-S[0]==0&&(S=Fg(Ig([S,[0]]))),a.isBubbleEnabled&&f!==lx&&B(h.minRange)&&B(h.maxRange)&&(S[0]=A?0:S[0],C=a.overBubbles(S,"y",e),S=[S[0]-C[0],S[1]+C[1]]),Gt.helpers.hasMarkerCorrection()&&f!==lx&&(C=a.overMarker(S,"y",e,t),S=[A?0:S[0]-C[0],S[1]+C[1]]);var P=S[1]-S[0];0===P&&(P=1),a.isPercentChart||a.hasLevelMarker||a.isWaterfallEnabled||(y=P*t),B(g)&&(g=A?0:S[0]-y),B(v)&&(v=S[1]+y);var T=0;if("time"===f||n||0===t&&p.scaleType!==pw||(T=c.datalabels.hasFixedPosition&&Z(h.maxRange)&&h.maxRange<=S[1]?0:a.getCorrectionOverDataLabels([g,v],"y",e)),A||c.datalabels.hasFixedPosition||(g=g-T||0),v=v+T||0,a.isWaterfallEnabled){var E=a.getCorrectionForWaterfall([g,v],"y",e,c,T);g=E[0],v=E[1]}return[g,v]},Gt.prototype.ZC_BAR_getRangeY=function(e){var t=this.yRange[e]||[];return Fg(Ig([t,[0]]))},Zv.getScale=function(e,t,n,r,a,i,o,l,s){var c,u,d=!(9<arguments.length&&void 0!==arguments[9])||arguments[9],h=e.systemConf,f=i.getDataType(o,a),p=no(e,o,a),g=t.hierarchical,v=Z(p.minRange),y=Z(p.maxRange),m=Ay.get(ao(e)),b=h.chart.plot.plotoptions[m],x="dial"===m||"web"===m&&"x"===o,w="heatmap"===m,C="clr"===o&&dx.isQuantileColorScale(e),k=i.getColumn(o,a),_=d?Rm(h,"chart.brush."+o+"["+a+"]"):Ey,S=k.scaleType===pw,O=function(e,t,n,r,a){var i=Ay.get(ao(e)),o=e.plotarea,l="dial"===i&&"y"===t||"web"===i&&"x"===t&&!e.dataObject.hierarchical;if(l){var s=e.dataObject.hierarchical;if(s){var c=s.pivotLayout.getRootNodeList("x"==t?"column":"row");a>=c.getLeavesCount()&&(l=!1)}}return l?Bi(e,t):"clr"===t?e.imagePallete||e.seriesColor:r?"bottom"===n||"top"==n?[gr(e,"width",o),0]:[0,gr(e,"height",o)]:"bottom"===n||"top"==n?[0,gr(e,"width",o)]:[gr(e,"height",o),0]}(e,o,r,p.reversed,a),A=function(){if(x||w||"x"!=o||!e.dataObject.isAxisCategory)return 0;var n=t.noofBarEnabledSeries?.2:rn(e)&&Object.keys(t.hierarchical.gridOptions).some(function(t){return jn(e,t)})?0:.9;return U(b.padding,n)}(),P=x||C||w||s||!e.dataObject.isAxisCategory&&!e.dataObject.isPolarAxisCategory&&!e.dataObject.isAxisCategory||S?0:"y"===o?U(p.outerPadding,e.datalabels.hasFixedPosition?1e-8:.05):null!=P?P:U(b.outerPadding,.02);switch("clr"===o&&(u=dx.getColorDomain(e),O=dx.getProcessedColorRange(O,u,h.legend,e)),f){case"numeric":l?u=l:"x"===o?u=t.getMinMaxX(0,d):"y"===o&&(u=t.getMinMaxY(a,P,Ey,d)),X="clr"===o&&p.ranges&&p.ranges.length?dx.quantileScale:ro(i,o,a);var T=u[0],E=u[1];if("NoData"==u[0]&&"NoData"==u[1]&&(u=[0,0]),!_&&(l||"x"==o)){var L=0==(K=u[1]-u[0])?e.plotarea.width/2:K*P;u[0]=v?u[0]:u[0]-L,u[1]=y?u[1]:u[1]+L}if((c=X().domain(u).range(O)).constant){var M=gg(u);0<M&&M<Hm(p.logBase,10)&&!1===p.allowNonPositiveTicks?c.constant(1e-4):c.constant(1),"NoData"===T&&"NoData"===E&&(T=E=0)}var z=($=[T,E]).map(c);c.actualRange=z,c.origRange=O,c.originalDomain=$,c.correction=L;break;case"ordinal":if(l)u=l;else if("clr"!==o){var I=t.getCategories(o,a,d);u=t.getDomain(I,o,!0)}var D,R=0,j=[O[0],O[1]];if(A=1===u.length?0:A,P&&!s&&!w&&"clr"!==o&&!x){R=Zv.getOuterPadding(O,u.length,A,P);var H=Ji(e,o,a,u,O,A,P,R);O=H.range,D=H.outerPaddingPx}c=(X="clr"===o?Ag:_g)().domain(u),"clr"===o?c.range(O):c.range(O).paddingInner(A).paddingOuter(0),eo(c),c.origRange=j,c.outerPaddingPx=D||0;break;case"time":var B=i.getColumn(o,a),N=B[B.datatype],F=N&&N.subfunction,V=Hm(N&&N.useUTC,!1);l?u=l:"x"===o?u=t.getMinMaxX(0,d):"y"===o&&(u=t.getMinMaxY(a,0,d));var W=new Date(u[0]),Y=new Date(u[1]);T=W,E=Y,Z(F)||(F=Na(Y-W).subFunction);var G,X,q=0;if(!_&&"clr"!==o){if(!h.chart.axes[o+"axis"].disableBaseValue){var Q=new fi(N);Q.useUTC=V,Q.getBaseValue(W,F,!1),Q.getBaseValue(Y,F,!0)}var K;t.isBubbleEnabled&&(G=t.overBubbles([W.getTime(),Y.getTime()],o,"y"==o?a:null),W=new Date(W.getTime()-G[0]),Y=new Date(Y.getTime()+G[1])),T=W,q=(0==(K=(E=Y).getTime()-W.getTime())?e.plotarea.width/2:K*P)+(0==P?0:t.getCorrectionOverDataLabels([W.getTime(),Y.getTime()],"x")),u=[W=new Date(v?u[0]:W.getTime()-q),Y=new Date(y?u[1]:Y.getTime()+q)]}c=(X="clr"===o&&p.ranges&&p.ranges.length?dx.quantileScale:Sg)().domain(u).range(O);var $;z=($=[T,E]).map(c),c.originalDomain=$,c.correction=q,c.actualRange=z,c.outerPaddingPx=Qy.apply(null,z),c.origRange=O,c.correctionOverBubbles=G;break;case"ordinalNonLinear":I=t.getCategories(o,a,d),u=l||t.getDomain(I,o);var J,ee=g.pivotLayout.getRootNodeList("row"),te=g.pivotLayout.getRootNodeList("column");j=[O[0],O[1]],"x"==o&&te.getCount()?J=te.getRangesForBranch(a-te.getLeavesCount()):"y"==o&&ee.getCount()&&(J=ee.getRangesForBranch(a-ee.getLeavesCount())),(c=hi().domain(u).range(O).rangeBands(J)).origRange=j}return c.outerPadding=P,c.padding=A,c},Zv.setRowScale=function(e,t,n){var r,a,i,o=e.dataObject.hierarchical,l=e.axes.y,s=e.dataObject,c=e.plotarea,u=e.dataset;if(o&&(a=(r=o.pivotLayout.getRootNodeList("row")).getCount(),i=r.hasMultiCluster()),i||a){o.pivotLayout.setRanges("row");var d=a||0,h=r.getClustersCount();if(d||h){for(var f=d?r.getDomainForBranch(0).length:1,p=r.getLeavesCount(),g=0;g<d;g++){l.branches[g]||(l.branches[g]={});var v=r.getDomainForBranch(g),y=s.getDomain(v,"y",!0);l.branches[g].scale=Zv.getScale(e,s,c,l.orient,g+p,u,"y",y)}for(var m=new Array(h),b=0;b<h;b++)m[b]=Zv.getScale(e,s,c,l.orient,b,u,"y"),r.clusters[b].domain=m[b].domain();d&&l.branches[0].scale;for(var x=0,w=0,C=0;C<f;C++)for(b=0;b<h;b++){var k=no(e,"y",b),_=m[b],S=[x+r.leafSize,x];x+=r.leafSize;var O=n?.1:0,A=Ky(S[1]-S[0])*O;S=[S[0]-A,S[1]+A],(e.axes.rotated&&!k.reversed||!e.axes.rotated&&k.reversed)&&(S=S.reverse()),l.leaves[w]||(l.leaves[w]={}),l.leaves[w].scale=_.copy().range(S),l.leaves[w].scale.origRange=S,l.leaves[w].parentBranchIdx=C,w++}return(e.axes.y=l).leaves.concat(l.branches)}}},Zv.getEventScale=function(e,t,n,r,a,i,o){return i.getDataType(o,a),Zv.getScale(e,t,n,r,a,i,o)},Zv.constructor=function(e,t,n,r){function a(){var t=e.dataObject,a=t.hierarchical,i=e.viewPortExtent,o=e.axes.x,l=e.dataObject,s=e.plotarea,c=e.dataset;if(e.axes.x.scale=n(e,l,s,o.orient,0,c,"x",i),e.axes.x.eventscale=null==r?e.axes.x.scale:r(e,l,s,o.orient,null,c,"x"),Z(a)){if(o.rangeScale=o.scale.copy(),o.rangeScale.outerPaddingPx=o.scale.outerPaddingPx,a.groupByDiscreteTime){var u=t.getCategories("x"),d=t.getDomain(u,"x");o.rangeScale.domain(d)}var h=a.pivotLayout.getRootNodeList("column"),f=h.getCount(),p=h.getDomainForCluster(0),g=f||0,v=(d=l.getDomain(p,"x",!0),c.getDataType("x"));if(v!=lx&&v!=sx||(d=Fg(d)),e.axes.x.leafScaleGrid=a.categoryTree?Zv.getScale(e,l,s,o.orient,null,c,"x",d):e.axes.x.scale,f){var y=a.pivotLayout.getRootNodeList("column");if(e.systemConf.facets&&e.systemConf.facets.config&&e.systemConf.facets.config.columns.leafSize){e.dataObject.hierarchical.getDynamicColumnSize(e.axes.x.leafScaleGrid);var m=y.getDynamicDomainForCluster(0),b=Zv.getScale(e,l,s,o.orient,null,c,"x",av(m.length)),x=a.pivotLayout.setRangesForLeaf("column",b),w=hi().domain(d).range(b.origRange).rangeBands(x).rangeBand(b.bandwidth());w.origRange=b.origRange,w.outerPaddingPx=o.scale.outerPaddingPx,o.rangeScale=w,o.rangeScale.outerPaddingPx=w.outerPaddingPx,o.scale=w,o.scale.outerPaddingPx=w.outerPaddingPx,e.axes.x.leafScaleGrid=w,e.axes.x.leafScaleGrid.outerPaddingPx=w.outerPaddingPx}var C=a.setScaleForRange(e.axes.x.rangeScale);a.pivotLayout.setRanges("column",C);for(var k=0;k<g;k++)o.levels[k]||(o.levels[k]={}),o.levels[k].scale=n(e,t,s,o.orient,k+h.getLeavesCount(),c,"x",i,null)}var _=e.systemConf.chart.axes.xaxis.splitLeaves,S=e.systemConf.chart.axes.xaxis.reversed,O=h.getLeavesCount();if(_&&f){for(var A=e.systemConf.chart.axes.xaxis.uniformLeafScale,P=v==ox?h.getUniqueDomainForCluster(0):null,T=Zv.getScale(e,l,s,o.orient,null,c,"x",P),E=(f&&o.levels[0].scale,"top"==o.orient||"bottom"==o.orient),L=E?1:-1,M=E?0:s.height,z=0,I=0;I<O;I++){var D=v==ox?h.getDomainForClusterSet(0,I):null,R=A?h.leafSize:h.nonUniformLeafSize[I],j=[M,M+L*R];M+=L*R;var H=.1*Ky(j[1]-j[0]),B=E?1:-1;j=[j[0]+B*H,j[1]-B*H],S&&(j=j.reverse()),o.leaves[z]||(o.leaves[z]={});var N=A?T:Zv.getScale(e,l,s,o.orient,null,c,"x",D);o.leaves[z].scale=N.copy().range(j),o.leaves[z].scale.origRange=j,o.leaves[z].parentBranchIdx=I;var F=T.domain(),V=T.padding,W=T.outerPadding,Y=Zv.getOuterPadding(j,F.length,V,W),U=Ji(e,"x",0,F,j,V,W,Y);o.leaves[z].scale.outerPaddingPx=U.outerPaddingPx||0,z++}return o.leaves.concat(o.levels)}return[{scale:e.axes.x.leafScaleGrid}].concat(o.levels)}return[{scale:e.axes.x.scale}].concat(o.levels)}function i(){for(var t=e.dataObject.hierarchical,a=t&&t.categoryTree?1:e.axes.y.count,i=e.axes.y,o=0;o<a;o++)i.groups[o]||(i.groups[o]={}),i.groups[o].scale=n(e,e.dataObject,e.plotarea,e.axes.y.orient,o,e.dataset,"y"),i.groups[o].eventscale=null==r?i.groups[o].scale:r(e,e.dataObject,e.plotarea,e.axes.y.orient,o,e.dataset,"y");if(t&&t.categoryTree){var l=t.pivotLayout.getRootNodeList("row"),s=l.getCount(),c=l.hasMultiCluster();return s||c?(e.axes.rotated&&Zv.setRowScale(e,"row",!0),s?e.axes.y.leaves.concat(e.axes.y.branches):e.axes.y.leaves):e.axes.y.groups}return e.axes.y.groups}var o,l=Zv.getScale,s=Zv.getEventScale;switch(n=Hm(n,l),r=Hm(r,s),t){case"left":o=e.axes.rotated?a():i();break;case"bottom":o=e.axes.rotated?i():a()}return o},Zv.invert=function(e,t,n,r,a,i,o){var l;switch(e){case"numeric":case"time":var s="y"==a?r?t.x:t.y:r?t.y:t.x;l=n.invert(s);break;case"ordinal":var c=eo(n),u=n.bandwidth(),d=n.maxBandWidth,h=d?Qy(u,d):u,f=1<c.length?Ky(c[1]-c[0]):0,p=Ky(f-h),g=d&&d<u?(u-h)/2:0,v=r&&!i?1:-1,y=r&&!i?h:0,m=r&&!i?"<":">";l=Ki(t,c=c.map(function(e){return e+y+v*p/2}),a,r,i,m);var b="y"==a?r?t.x:t.y:r?t.y:t.x,x=n.ordinalRange[l]+g;o&&!X(b,[x,x+h])&&(l=null)}return l},Zv.ordinalSubInvert=function(e,t,n,r,a,i,o){var l=n.bandwidth(),s=n.range(),c=r.ordinalRange,u=n.domain(),d=s[1]-s[0]-u.length*l;return Ki(e,u.map(function(e,n){return c[t]+n*(l+d)}),i,a,o)},Zv.barBandwidth=function(e){var t,n=e.systemConf,r=e.dataObject,a=ao(e),i=e.dataset.seriesTypes,o=r.barChartType||(r.noofBarEnabledSeries?i.has(Kv.stkdbar)?Kv.stkdbar:i.has(Kv.bar)?Kv.bar:i.has(Kv.bullet)?Kv.bullet:i.has(Kv.waterfall)?Kv.waterfall:a:a);if(r.barChartType=o,r.isstacked(o)){var l=r.getEncode("stack");t=r.categoryHierarchy?1:Ve(l).filter(function(e){return to.call(r,e.seriesData[0])}).length||1}else t=r.hierarchical&&r.hierarchical.pivotLayout.getRootNodeList("row").hasMultiCluster()?1:function(e){var t=e.dataObject;if(rn(e)&&t.isCombinationalChart){var n=Yt(e.dataObject);return vg(n,function(e){return e.data.reduce(function(e,n){return e+(to.call(t,n.node)?1:0)},0)})}return Lg(e.seriesdata.map(function(e){if(to.call(t,e))return e.data.length}))}(e);var s=Ay.get(a),c=a==Kv.bullet,u=n.chart.plot.border,d=!0===u.show?u.size:0,h=("gantt"==s||"bullet"==s||"bar"==s||"waterfall"==s||"boxplot"==s)&&n.chart.plot.plotoptions[s].padding||.2,f=1==t?0:("bar"==s||"gantt"==s||"waterfall"==s||"boxplot"==s)&&n.chart.plot.plotoptions[s].interPadding||0,p=n.chart.plot.plotoptions[s].outerPadding;p=null!=p&&""!==p?p:.02;var g,v,y=e.axes.x.scale.domain().length,m=e.axes.rotated?[gr(e,"height",e.plotarea)-d,d]:[d,gr(e,"width",e.plotarea)-d];p=Zv.getOuterPadding(m,y,h,p),(e.datalabels.moduleExists&&Ii(e)||r.isBubbleEnabled)&&(p+=r.extendOuterpadding(av(y),m,n,h,p,"x")),e.barscale1=g=e.axes.x.leaves.length?e.axes.x.leaves[0].scale:e.axes.x.scale,e.barscale2=v=_g().domain(av(t)).range([0,g.bandwidth()]).paddingInner(f);var b=r.noofBarEnabledSeries&&!c?n.chart.plot.plotoptions[s].maxBandWidth||g.bandwidth():200;if(g.maxBandWidth=t*n.chart.plot.plotoptions[s].maxBandWidth,!c&&v.bandwidth()>b){var x=(g.bandwidth()-t*b)/2;v.range([x,g.bandwidth()-x]).paddingInner(f)}return[g,v]},Zv.getOuterPadding=function(e,t,n,r){var a=Ky(e[1]-e[0]),i=r*a;return i/((a-2*i)/(t-n+0))},Zv.getOrdinalOuterPadding=function(e,t,n,r){return r*Ky(e[1]-e[0])/2},Zv.getContinuousRangeBand=function(e,t,n){var r=e(t[0]),a=n&&t[n]?e(t[n]):r,i=e(n&&t[n+1]?t[n+1]:t[1])-a,o=e.range();return{outerPaddingInPixel:(i<0?-1:1)*Qy(Ky(r-o[0]),Ky(i/2)),rangeBand:i/2}},Zv.getDiscreteRangeBand=function(e){var t=e.bandwidth(),n=e.outerPaddingPx+t/2,r=eo(e),a=t/2+(1<e.domain().length?r[1]-r[0]-t:0)/2;return{outerPaddingInPixel:Qy(n,a),rangeBand:a}},Zv._getDiscreteRangeBand=function(e,t){var n,r=e.bandwidth(),a=e.outerPaddingPx,i=eo(e),o=te(i)&&1<i.length,l=Hm(t,0);o&&l==i.length-1?(n=l,l-=1):n=l+1;var s=o?(i[n]-(i[l]+r))/2:0;return{outerPaddingInPixel:Qy(a,s),rangeBand:s}},Zv.getRangeBand=function(e,t,n){return e.bandwidth?Zv.getDiscreteRangeBand(e):Zv.getContinuousRangeBand(e,t,n)};var bw={parse:so,drawPath:function(e,t){so(e).forEach(function(e){t[e.type].apply(t,e.args)})}},xw={drawPath:function(e,t){bw.drawPath(t,e)},getRadianAngle:function(e){return e*sm/180},constant:function(e){return function(){return e}},pointX:function(e){return e[0]},pointY:function(e){return e[1]},rgba:function(e,t){t=Hm(t,1);var n=zg(e);return"rgba("+n.r+","+n.g+","+n.b+","+t*n.opacity+")"},roundedRect:function(e,t,n,r,a,i,o,l){var s=wt(t,n,r,a,i,o,l);bw.drawPath(s,e)},boundBoxWithHook:function(e,t){bw.drawPath(t,e)},getFontStyles:function(e,t,n,r,a,i){return _i(null,t,e,n,r,a,i)}},ww={CLIP_TRACK:function(e,t,n,r,a){var i=co(e,t,n,r,4<arguments.length&&void 0!==a?a:{});return e._track.attr("clip-path",i),i},GET_CLIP:co},Cw=Dg(),kw=function(e,t,n,r,a){var i=4<arguments.length&&void 0!==a?a:[0,0];if(Cw.has(e))return Cw.get(e);var o=null,l=void 0,s={x:1,y:0}[n],c="x"===n,u=_w(n,e,r,t.size);switch(u=u.map(function(e,t){return e+i[t]}),e){case"line":o={shape:Bt("vertical-line")(t.height),style:{stroke:t.strokeColor,"stroke-width":t.strokeWidth}};break;case"triangleUp":o={shape:Bt("triangle-down")(t.size),style:{fill:t.fillColor,stroke:t.strokeColor,"stroke-width":t.strokeWidth}};break;case"triangleDown":o={shape:Bt("triangle-up")(t.size),style:{fill:t.fillColor,stroke:t.strokeColor,"stroke-width":t.strokeWidth}};break;case"triangleUpDown":var d=t.padding/2,h=c?[0,d]:[d,0],f=h.map(function(e){return-1*e});f=[f[0]+u[0],f[1]+u[1]],h=[h[0]+u[0],h[1]+u[1]],o={shape:[Bt("triangle-down")(t.size),Bt("triangle-up")(t.size)],style:[{fill:t.fillColor,stroke:t.strokeColor,"stroke-width":t.strokeWidth,transform:"translate("+f+")"},{fill:t.fillColor,stroke:t.strokeColor,"stroke-width":t.strokeWidth,transform:"translate("+h+")"}]};break;case"box":var p=t.strokeWidth;o={shape:wt(-((y=t.width)-p)/2,-((m=t.height)-p)/2,y-p,m-p,we()),style:{stroke:t.strokeColor,"stroke-width":t.strokeWidth,fill:t.fillColor}};break;case"enlarge":p=t.strokeWidth;var g=t.range||1;o={shape:wt(-(y=t.width*g)/2,-(m=t.height*g)/2,y,m,we()),style:{stroke:t.strokeColor,"stroke-width":t.strokeWidth,fillColor:t.fillColor}};break;case"lever":var v=we(t.radius);o={shape:[wt(-t.width/2,-t.height/2,t.width,t.height,v),"M"+-t.stripePadding/2+" "+-t.stripeHeight/2+" L"+-t.stripePadding/2+" "+t.stripeHeight/2+" M"+t.stripePadding/2+" "+-t.stripeHeight/2+" L"+t.stripePadding/2+" "+t.stripeHeight/2],style:[{fill:t.fillColor,stroke:t.strokeColor},{stroke:t.stripeColor}]};break;case"hollowCircle":o={shape:[Bt()(t.size),Bt()(.4*t.size)],style:[{fill:t.outerFillColor,stroke:t.outerStrokeColor},{fill:t.innerFillColor,stroke:t.innerStrokeColor}]};break;case"circle":o={shape:[Bt()(t.size),Bt()(.3*t.size)],style:[{fill:t.outerFillColor,stroke:t.outerStrokeColor,"stroke-width":t.outerStrokeWidth},{fill:t.innerFillColor,stroke:t.innerStrokeColor}]};break;case"vernier":var y;o={shape:[["M"+.5*-(y=t.width)+" "+.5*-(m=t.height)+" L"+.5*y+" "+.5*-m+" L"+.5*y+" "+.5*m+" L"+.5*-y+" "+.2*m+" Z"],["M"+.5*-y+" "+.5*-m+" L"+.5*y+" "+.5*-m+" L"+.5*y+" "+.2*m+" L"+.5*-y+" "+.5*m+" Z"]],style:{fill:t.fillColor,stroke:t.strokeColor}};break;case"pentagon":var m,b=t.size,x=t.bandWidth;o={_effectElementIndex:1,shape:["M"+.5*-b+" "+.5*-(m=t.height)+" L"+.5*b+" "+.5*-m+" L"+.5*b+" "+.5*m+" L"+.5*-b+" "+.5*m+"Z","M"+(.5*-b-x)+" "+(.5*-m-x)+" L"+(.5*b+x)+" "+(.5*-m-x)+" L"+(.5*b+x)+" "+.5*m+"L0 "+(.5*m+1.5*x+2)+" L"+(.5*-b-x)+" "+.5*m+"ZM"+.5*-b+" "+.5*-m+" L"+.5*b+" "+.5*-m+" L"+.5*b+" "+(.5*m-.5*x)+"L0 "+(.5*m+.5*x)+" L"+.5*-b+" "+(.5*m-.5*x)+"Z"],style:[{},{"fill-rule":"evenodd",fill:t.fillColor,stroke:t.strokeColor}]};break;case"lineCircle":b=t.size;var w=r[s],C=b/2*("end"===t.position?1:-1);"end"===t.position&&(C+=r[s]),l=[0,C],c||l.reverse(),l=l.map(function(e,t){return e+i[t]}),o={shape:[Bt("circle")(b),Bt("vertical-line")(w)],style:[{fill:t.fillColor,stroke:t.strokeColor,transform:"translate("+l.join(" ")+")"},{fill:t.fillColor,stroke:t.strokeColor,"stroke-width":t.strokeWidth}]};break;case"rectangle":return{shape:"default",style:_extends({},t)}}return l=u&&"translate("+u.join(" ")+") "||"",be(o.style).forEach(function(e){var t=e.transform||l;"y"===n&&(t+=" rotate(-90)"),e.transform=t}),o},_w=function(e,t,n,r){var a={x:1,y:0}[e],i=[0,0];switch(t){case"triangleUp":i[a]=-r/2;break;case"triangleDown":i[a]=n[a]+r/2;break;default:i[a]=n[a]/2}return i},Sw=Object.freeze({brushX:function(){return So("X")},brushY:function(){return So("Y")},brush:function(){return So("XY")}}),Ow={brush:Cv,brushX:kv,brushY:_v},Aw={extent:[[0,0],[0,0]],handleSize:6,type:"xy",snap:null,element:null,metaKey:null,styles:{track:{},selection:{},handles:{}}},Pw=(_createClass(Ao,[{key:"initialize",value:function(){var e,t,n=this,r=n.options,a=Km.isTouchDevice&&!0===r.multitouch,i=r.extent,o=n.type=Hm({x:"brushX",y:"brushY",xy:"brush"}[n.type],"brush"),l=n.d3_brush=n.d3_brush||(a?Sw:Ow)[o]();te(i)&&te(i[0])&&te(i[1])&&l.extent(i),r.metaKey&&l.filter(function(){return!Hv()[r.metaKey]}),l.handleSize(Hm(r.handleSize,6)),e=n._signal=Vg("start","brush","end"),t=n.behaviour_signal=Vg("init","start","brush","end");var s=[0,0],c=!1,u=void 0;l.on("start",function(){var r=Hv(),a=void 0,i=r;if(!r.selection)return!1;for(c=!1;a=i.sourceEvent;)i=a;var o=i&&i.target&&i.target.getAttribute?i.target:null;u=o&&/handle/.test(o.getAttribute("class"))?"resize":"move",r.mode=u,t.call("start",n,r),e.call("start",n,r)}),l.on("brush",function(){if(Ao.isInvalidBrush())return!1;var r=Hv();r.mode=u;var a="brush"===n._snap.when&&k(n._snap.calculate)&&n._snap.calculate(r);if(a){if(Ao.isInvalidBrush())return;var i=Hm(a,s);n.setSelection(i),s[0]===i[0]&&s[1]===i[1]||(s=r.selection=i,n.positionCustomHandles(s),t.call("brush",n,r),e.call("brush",n,r))}else n.positionCustomHandles(),t.call("brush",n,r),e.call("brush",n,r);r&&r.sourceEvent&&"end"!==r.sourceEvent.type&&(c=!0)}),l.on("end",function(){if(!Ao.isInvalidBrush()){var r=Hv(),a=n.getSelection(),i="end"===n._snap.when&&k(n._snap.calculate)&&n._snap.calculate(n,r);if(r.mode=u,i&&a){var o=Hm(i,s);n.setSelection(o,n._snap.duration),s[0]===o[0]&&s[1]===o[1]||(s=r.selection=o,t.call("end",n,r,c),e.call("end",n,r,c))}else n.positionCustomHandles(),t.call("end",n,r,c),e.call("end",n,r,c)}})}},{key:"snap",value:function(e,t,n){this._snap={when:e,calculate:t,duration:n}}},{key:"getSignals",value:function(){return this._signal}},{key:"addHook",value:function(e,t){this.hookCount++;var n=e+"."+this.hookCount;return this._signal.on(n,t),n}},{key:"removeHook",value:function(e){this._signal.on(e,null)}},{key:"addBehaviourHook",value:function(e,t){this.hookCount++;var n=e+"."+this.hookCount;return this.behaviour_signal.on(n,t),n}},{key:"removeBehaviourHook",value:function(e){this.behaviour_signal.on(e,null)}},{key:"bindTo",value:function(e){var t=this,n=t.d3_brush,r=t.options.styles||{},a=e;(t.parent_group=a).call(n),t._track=a.selectAll("rect.overlay"),t._selection=a.selectAll("rect.selection"),t._handles=a.selectAll("rect.handle"),Mt(t._track,r.track),Mt(t._selection,r.selection),Mt(t._handles,r.handle),!1===t.options.resizer&&a.selectAll("rect.handle").remove(),Z(t.behaviour)&&t.behaviour.call(t),t.behaviour_signal.call("init",t)}},{key:"addCustomHandle",value:function(e){return e.isD3Selection?this.customHandles=e:"default"===e[0].shape?Mt(this._handles,e[0].style):(this.customHandles=Ao.ADD_HANDLE(e,this.parent_group).attrs({cursor:function(e){return Ao.getCursor(e.type)},"pointer-events":"all"}),this.positionCustomHandles(),this.customHandles)}},{key:"positionCustomHandles",value:function(){var e=this,t=e.getSelection();e.customHandles&&(t?e.customHandles.attr("transform",function(t){return"translate("+e.getCustomHandlePosition(t).join(" ")+")"}).style("display",null):e.customHandles.style("display","none"))}},{key:"getCustomHandlePosition",value:function(e){var t=this.getSelection(),n=Ne(Hm(this.options.extent,this.d3_brush.extent()())),r=0,a=0;if(!1!==e.alignCenter&&(r=n.width/2,a=n.height/2),t)return{e:[t[1],a],w:[t[0],a],n:[r,t[0]],s:[r,t[1]]}[e.type]}},{key:"setSelection",value:function(e,t){var n=this.options.type,r=this.getRange(n);e="xy"===n?[[qy(r[0][0],e[0][0]),Qy(r[0][1],e[0][1])],[Qy(r[1][0],e[1][0]),Qy(r[1][1],e[1][1])]]:[qy(r[0],e[0]),Qy(r[1],e[1])],Hv()&&(Hv().selection=e),ne(t)&&0<t?this.parent_group.transition().duration(t).call(this.d3_brush.move,e):(this.__checkSameType=!0,this.parent_group.call(this.d3_brush.move,e))}},{key:"getSelection",value:function(){return Hv()&&Hv().selection||Sv(this.parent_group.node())}},{key:"getRange",value:function(){var e=this.d3_brush.extent()();switch(this.options.type){case"x":return[e[0][0],e[1][0]];case"y":return[e[0][1],e[1][1]];default:return e}}},{key:"hide",value:function(){this.parent_group.attr("display","none")}},{key:"show",value:function(){this.parent_group.attr("display",null)}},{key:"reset",value:function(){this.parent_group.call(this.d3_brush.move,null)}},{key:"destroy",value:function(){var e=this;e.parent_group&&e.parent_group.on(".brush",null),e.parent_group&&e.parent_group.selectAll("rect.overlay, rect.handle, rect.selection").remove(),pe(e,function(t,n){e[n]=null,delete e[n]})}},{key:"update",value:function(e){this.options=e,this.type=Hm(e.type,"xy"),this.initialize()}},{key:"updateExtent",value:function(e){te(e)&&te(e[0])&&te(e[1])&&(this.d3_brush.extent(e),this.parent_group&&this.parent_group.call(this.d3_brush))}}],[{key:"isInvalidBrush",value:function(e){var t=Hv(),n=t&&t.sourceEvent;return n&&n.type===(e||Hv().type)}},{key:"getCursor",value:function(e){return{e:"ew-resize",w:"ew-resize",n:"ns-resize",s:"ns-resize"}[e]}},{key:"ADD_HANDLE",value:function(e,t){var n=Et("g",".handle--custom",e=be(e),t);return Et("path",".custom-handle-path",function(e,t){var n=be(e.shape);return te(e.shape[t])&&(n=e.shape[t]),be(n).map(function(n){return{type:e.type,shape:n,i:t}})},n).attr("d",function(e){return e.shape}).each(function(t,n){var r=fg(this),a=e[t.i],i=be(a.style),o=be(a.attributes);r.attrs(Hm(o[n],a.attributes)),Mt(r,Hm(i[n],a.style))}),n}}]),Ao);Pw.prototype.on=Pw.prototype.addHook,Pw.behaviours=Dg(),Pw.addBehaviour=function(e,t){return Z(t)?void Pw.behaviours.set(e,t):Pw.behaviours.remove(e)},km.setComponent("BrushD3",Pw),km.setComponent("BrushD3Options",Oo);var Tw=function(e){this.chartObj=e.chartObj,this.config=e.config,this.globalFont=be(e.globalFont||[]);var t=this.container=mt(e.container,"g",this.config.enabled?[1]:[],".","class","zc-svg-tooltip");t.style("pointer-events",fm).style("display",fm),this.boundBoxEle=mt(t,Um,[1]),this.textEle=mt(t,Wm,[1]),this.styleText(),this.styleBoundBox()};Tw.prototype.show=function(e,t){ii(this.container),this.container.styles({opacity:vm,display:vm}),this.updateTextContent(e),this.positionTooltip(t),this.drawBoundBox()},Tw.prototype.hide=function(e){var t=this.container;e?t.style("opacity",0).style("display",fm):t.transition().duration(e?0:250).style("opacity",0).on("end",function(){fg(this).style("display",fm)})},Tw.prototype.styleText=function(){var e=this.textEle,t=this.config.orient,n=this.globalFont,r=t===ob||t===ib;kt(e,[this.config].concat(_toConsumableArray(n),[Qm])),e.attrs({"text-anchor":r?"middle":t===rb?"start":"end",dy:r?t===ob?"0.9em":"-0.3em":"0.3em"})},Tw.prototype.styleBoundBox=function(){var e=this.config;this.boundBoxEle.styles({fill:e.backgroundColor,stroke:e.borderColor,"stroke-width":e.borderWidth})},Tw.prototype.updateTextContent=function(e){this.textEle.text(e)},Tw.prototype.positionTooltip=function(e){e&&this.container.attr("transform","translate("+e[0]+","+e[1]+")")},Tw.prototype.drawBoundBox=function(){var e=this.textEle.nodes(),t=this.config,n=t.padding,r=we(t.borderRadius||0),a=0;this.boundBoxEle.attr("d",function(){var t=M(e[a++]);return Po(t.x-n,t.y-n,t.width,t.height,r,n,ob,{},0)})};var Ew={padding:5,margin:5};Mo.prototype.show=function(){var e=this,t=0;e.super.show(function(){return e.dataFinder(t++)}),e.customActions.show&&e.customActions.show()},Mo.prototype.hide=function(e){this.super.hide(e),this.customActions.hide&&this.customActions.hide()},Mo.prototype.positionTooltip=function(){var e=this.tooltipOptions,t=this.super.config.orient,n=this.options,r=n.translate,a=n.boxElement,i=void 0===a?function(e){return e}:a,o=n.isHorizontal;this.container.attr("transform",function(){var n=i(fg(this.parentNode));return Ar(Lo(n,e,V(o,t),V(r,n)))})},Mo.prototype.addHoverEvents=function(e){var t=this,n=!0;Mr(e,{mousemove:function(){"overlay"!==fg(Hv().srcElement||Hv().target).attr("class")?(t.show(),n=!0):n&&(t.hide(),n=!1)},mouseleave:function(){t.hide(),n=!1}})};var Lw=2,Mw=(_createClass(Bo,[{key:"initialize",value:function(){var e=this,t=e.chart,n=e.settings,r=e.rotated?"left":"bottom",a=!0===Rm(t.systemConf,"chart.zoom.enabled"),i=a||n.smooth,o=e.brushScale=e.getScale(t,t.plotarea,e.type,r,!i),l=te(n.selection)?n.selection.slice().sort(Wg):null,s=n.resizer||{},c=n.slider||{},u=!0===s.enabled,d=o.domain();!u&&c.enabled&&(u=!0,s=c,e.behaviour="slider"),e.updatePositionScale(),e.minimumVisiblePoints=Hm(n.minimumVisiblePoints,3),e.resizerSettings=s,e.resizerEnabled=u,e.overviewEnabled=!0===Rm(n,"overview.enabled"),e.isSmooth=i,a||e.fixScaleOuterPadding();var h=t.plotarea[e.rotated?"height":"width"],f=e.getInitialDomain(),p=l||e.getScrollSelection(f),g=Ky(p[1]-p[0]),v=e.resizerEnabled||a||1<=h-g;(e.visible=v)&&(e.initialSelection=p,e.scrollDomain=f,e.isSmooth||e.resizerEnabled||(e.visiblePointCount=f.length),e.isSmooth||(t.viewPortExtent=u?d:f),e.updatePlotAreaByScroll())}},{key:"fixScaleOuterPadding",value:function(){var e=this.brushScale;if(!e.bandwidth){var t=Ge(this.getInitialDomain()),n=this.chart.chartTypes[0].name,r=this.chart.systemConf.chart.plot.plotoptions[n].outerPadding||.02,a=(t[1]-t[0])*r,i=this.brushScale.domain();i=function(e,t,n){var r=e[0]instanceof Date;if(r&&(e=e.map(function(e){return e.getTime()})),te(n))e=[e[0]-n[0],e[1]+n[1]];else{var a=Ky(e[1]-e[0])*t;e=[e[0]-a,e[1]+a]}return r&&(e=e.map(function(e){return new Date(e)})),e}(i,null,[a,a]),e.domain(i),e.originalDomain=i}}},{key:"updatePositionScale",value:function(){var e=this.chart,t=void 0;t=e.axes.rotated?[e.plotarea.height,0]:[0,e.plotarea.width],this.scrollPositionScale=kg().range(t).domain([0,100])}},{key:"update",value:function(){if("redraw"===this.chart.phase)return this.settings=this.chart.systemConf.chart.scroll,void(this.rotated=this.chart.axes.rotated);if(this.visible){var e=this.chart,t=e.axes.x.scale,n=e.axes.x.baseScale.domain();this.updatePositionScale(),e.cache.scroll.selection=null,t.bandwidth&&(e.viewPortExtent=null),this.scrollDomain=e.cache.scroll.domain,this.render(),this.brushScale.originalDomain=n,t.originalDomain=n}}},{key:"render",value:function(){var e=this,t=e.chart,n=e.settings,r=e.rotated,a=n.overview||{};if(e.parent=Et("g",".brush-scroll",e.visible?[1]:[],t.staticPaneSVG,"g.legendarea"),!e.parent.empty()){e.brushType=ka("x",r),e.brushExtent=bo(t,n),e.position=e.getPosition();var i=e.position;e.dimension=function(e,t){var n=t.settings,r=e.axes.rotated,a=e.plotarea;return{width:r?n.height:a.width,height:r?a.height:n.height,left:t.position.x,top:t.position.y}}(t,e),e.parent.attr("transform","translate("+i.x+","+i.y+")"),e.initialized=!1,a.enabled?vo(t,e.dimension,function(t){mo.call(e,t)}):e.addEvent(e.brushExtent),e.isRedraw=!0}}},{key:"getScrollSelection",value:function(e){var t=this,n=t.chart,r=n.behaviouralEvents&&n.behaviouralEvents.eventManager.behaviours||{},a=t.transform||r.PLOT_ZOOM&&r.PLOT_ZOOM.instance.getTransform(),i=void 0;if((i=t.lastScroll?t.lastScroll.map(t.scrollPositionScale):Do(n,e,a)).sort(Wg),!t.isRedraw&&!t.overviewEnabled&&!t.resizerEnabled){var o=t.rotated?1:0;if(t.brushScale.bandwidth){var l=t.brushScale.origRange,s=n.axes.x.reversed;t.rotated?s?i[0]=l[0]:i[1]=l[0]:s?i[1]=l[0]:i[0]=l[0]}else i[o]=t.brushScale(t.brushScale.originalDomain[0])}return i}},{key:"addEvent",value:function(e,t){function n(e){return e.radius&&(e.rx=e.ry=e.radius)}var r=this,a=r.chart,i=r.settings,o=r.resizerSettings,l=r.resizerEnabled,s=i.tracker,c=i.thumb,u=a.cache.scroll=a.cache.scroll||{},d=a.overview&&[a.overview.plotarea.left,a.overview.plotarea.top],h=(te(i.selection)?i.selection.slice().sort(Wg):null)||r.getScrollSelection(u.domain||t||r.scrollDomain);n(c),n(s);var f=new Oo({type:r.brushType,behaviour:r.behaviour||"scroll",extent:e,resizer:l&&"rectangle"===o.type,styles:{track:s,selection:c}}),p=r.brushInstance=new Pw(f);if(p.bindTo(r.parent),pe(r._hooks,function(e,t){return r.brushInstance.addHook(t,e)}),l){var g=o[o.type]||{};n(g);var v=fo(r.brushType,o.type,e,null,g,d);p.addCustomHandle(v),r.enableTooltip(o)}return r.initialized=!0,r.constrain(p),p.setSelection(h),p}},{key:"enableTooltip",value:function(){var e=this.settings.resizer.tooltip||{};if(!0===e.enabled){var t=this.chart,n=t.dataset.getColumn("x"),r=n.datatype,a=n[r]||{},i=this.rotated?"right":"bottom";this.tooltip=new Mo(e,this.brushInstance,i,function(i){var o=[t.viewPortExtent[0],t.viewPortExtent[t.viewPortExtent.length-1]];if(n.datatype===lx&&"auto"===(Rm(a,"tooltipformat.specifier")||Rm(a,"format.specifier"))){var l=Na(Ky(o[1]-o[0]));a={subfunction:{YEAR:"DATE",MONTH:"DATE"}[l.subFunction]||"DATETIME"}}return Z(e.content)?V(t,o[i],n):Aa(a,o[i],r,t,"tooltip",Ey,"-")},this.chart)}}},{key:"on",value:function(e,t){this._hooks=this._hooks||{},this._hooks[e]=t}},{key:"getScale",value:function(e,t,n,r,a){return e.axes.x.scrollScale=Zv.getScale(e,e.dataObject,t,r,0,e.dataset,n,null,a,!1)}},{key:"constrain",value:function(e){var t=this,n=zo(t.chart,"x",t.minimumVisiblePoints),r=void 0;e.addHook("start",function(e){r=e.selection,i=a=null}),e.addHook("brush",function(e){"resize"!==e.mode||t.isSmooth||(t.visiblePointCount=null)}),e.addHook("end",function(e){"resize"!==e.mode||t.isSmooth||(t.visiblePointCount=t.scrollDomain.length)});var a=null,i=null;e.snap("brush",function(e){var t=e.selection;if("move"===e.mode)return t;"left"===(i=i||(+t[0]!=+r[0]?"left":"right"))?t[1]=Qy(r[1],t[1]):t[0]=qy(r[0],t[0]);var o=Fa(Ky(t[1]-t[0]),2);return"left"===i&&a&&t[0]>=r[1]-n?a:"right"===i&&a&&t[1]<=r[0]+n?a:o<n?a="right"===i?[t[0],t[0]+n]:[t[1]-n,t[1]]:t})}},{key:"getInitialDomain",value:function(){return this.getCategoryPosScreen();}},{key:"getInitialSelection",value:function(e){return go(this.chart,e,0,"x",!1,!0,this.brushScale)}},{key:"getCategoryPosScreen",value:function(){var e=this.chart,t=this.settings,n=e.plotarea,r=t.visibleCategories,a=e.chartTypes[0].name,i=("gantt"==a||"bullet"==a||"bar"==a)&&e.systemConf.chart.plot.plotoptions[a].padding||.2,o=e.systemConf.chart.plot.plotoptions[a].outerPadding||.02;if(this.resizerEnabled){var l=e.dataObject.getCategories("x",0,!1);return l=l&&l.length?l:e.dataObject.findXCategories(),this.isSingleDomain=1===l.length,this.brushScale.domain()}return r?(r=qy(this.minimumVisiblePoints,t.visibleCategories),this.getCategoryPosByCount(n,i,o,r)):this.getCategoryPosByThickness(n,i,o,t.categoryThickness||15)}},{key:"getActualScreenValue",value:function(e,t,n){return e.bandwidth?e.ordinalRange[t]:e(n)}},{key:"getScrollBarLength",value:function(e,t,n){var r=this.rotated;return te(n)?n[1]-n[0]:e.bandwidth?r?e.range()[0]-t:t+e.bandwidth():r?e.range()[0]-t:t}},{key:"getCategoryPosByCount",value:function(e,t,n,r){var a,i=this,o=i.chart,l=i.chart.axes.x.scrollScale,s=(a=(a=o.dataObject.getCategories("x",0,!1))&&a.length?a:o.dataObject.findXCategories()).length,c=o.dataObject.isWaterfallEnabled,u=Qy(r,s),d=o.behaviouralEvents&&o.behaviouralEvents.eventManager.behaviours,h=o.systemConf.chart.brush;if(i.allCategoriesVisible=s<=u,c&&(a=l.domain()),i.allCategoriesVisible)return i.lastScroll=null,o.cache.scroll&&(o.cache.scroll.domain=null),l.bandwidth&&!i.isSmooth&&"redraw"===o.phase&&(o.viewPortExtent=a),i.brushScale.domain();if(i.chart.cache.scroll&&i.chart.cache.scroll.domain){var f=i.chart.cache.scroll.domain;if(l.bandwidth){if(d.PLOT_BRUSH&&te(h.x))return f;if(f.length!==u)return i.lastScroll=null,o.cache.scroll.domain=null,function(e,t,n){var r=e.length-t;if(r<n){var a=Math.max(t-(n-r),0);return e.slice(a)}return e.slice(t,t+n)}(a,a.indexOf(f[0]),u)}return i.chart.cache.scroll.domain}var p=a.slice(0,u);return l.bandwidth?p:Ge(p)}},{key:"getCategoryPosByThickness",value:function(e,t,n,r){var a=this.chart.axes.x.scrollScale,i=(this.rotated?e.height:e.width,function(e,t){return e/(1-t)}(r,t)),o=this.getVisibleNumCategories(this.chart,e,n,i);return n=a&&a.bandwidth?$i(a.range(),o,t,n,i):i*n*2,o=this.getVisibleNumCategories(this.chart,e,n,i),this.getCategoryPosByCount(e,t,n,o)}},{key:"getVisibleNumCategories",value:function(e,t,n,r){return Xy(this.rotated?(t.height-n)/r:(t.width-n)/r)}},{key:"updatePlotAreaByScroll",value:function(e){var t=0<arguments.length&&void 0!==e?e:this.chart.plotarea,n=this.settings,r=this.rotated,a=yo(this,bo(this.chart,n)),i=n.height+a,o=t.left,l=t.top,s=ia(n,0),c=n.orient;r?(t.width-=i+s.left+s.right,"left"===c?t.left+=i+s.left+s.right:o+=t.width,o+=s.left):(t.height-=i+s.top+s.bottom,t.bottom+=i+s.top+s.bottom,"top"===c?t.top+=i+s.top+s.bottom:l+=t.height,l+=s.top),this._position={x:o,y:l}}},{key:"getPosition",value:function(){var e=this.chart.plotarea;return this.chart.axes.rotated?{x:this._position.x,y:e.top}:{x:e.left,y:this._position.y}}},{key:"destroy",value:function(){this.chart.overview&&this.chart.overview.destroy(),this.brushInstance&&this.brushInstance.destroy(),this.parent.remove()}}]),Bo),zw=(_createClass(No,[{key:"getBehaviouralEventInstance",value:function(e,t){var n=void 0;if(t){var r=km.getComponent(t._constructor),a=km.getComponent(t._arguments);return(n=this.behaviours[e]||{}).instance=new r(a(this.chart)),this.behaviours[e]=n}}},{key:"dataFinder",value:function(e,t){e.dataFinder=t}},{key:"setListenerTypes",value:function(e,t){e.listenerTypes=t}},{key:"getData",value:function(e,t,n){var r=e.dataFinder,a={point:null};return r[t]&&(a.point=r[t].apply(this,[e,t,n])),a}},{key:"attachListeners",value:function(e,t){var n=this,r=e.listenerTypes,a=e.instance;pe(t,function(t,i){r.has(i)&&be(t).forEach(function(t){a.on(i,function(){t.apply(n,[e].concat(Array.prototype.slice.call(arguments)))})})})}},{key:"getBehaviours",value:function(e,t){var n=[],r=e.defaultBehaviour[t],a=e.customBehaviour&&e.customBehaviour[t];return a&&(n=[].concat(_toConsumableArray(be(a).map(function(e){return{type:"custom",behaviour:e}})))),r&&(n=[].concat(_toConsumableArray(n),_toConsumableArray(be(r).map(function(e){return{type:"default",behaviour:e}})))),n}},{key:"setBehaviours",value:function(e,t,n,r){e[(2<arguments.length&&void 0!==n?n:"default")+"Behaviour"]=t}},{key:"associateBehaviours",value:function(e,t,n,r,a){var i=this,o=i.getBehaviours(e,t),l=!0;te(o)&&o.length&&o.forEach(function(t){"custom"===t.type?(V(!0,t.behaviour,i,e,n,r,a),l=a.allowDefault):l&&t.behaviour.apply(i,[e,n,r,a])})}},{key:"detachListeners",value:function(){}}]),No);km.setComponent("ZCChartScroll",function(e){return e.scroll}),km.setComponent("ZCChartScrollArguments",function(e){return e});var Iw={PLOT_ZOOM:{_property:"chart.zoom",_feature_name:"zoom",_handlers:function(e){return e.isGeoMap?"_mapZoomHandlers":"_chartZoomHandlers"},_behavior:{_constructor:"ZoomD3",_arguments:"_getPlotZoomArguments"}},PLOT_BRUSH:{_property:"chart.brush",_feature_name:"brush",_handlers:function(e){return e.isGeoMap?"_mapBrushHandlers":"_chartBrushHandlers"},_behavior:{_constructor:"BrushD3",_arguments:"_getPlotBrushArguments"}},CHART_SCROLL:{_property:"chart.scroll",_feature_name:"scroll",_handlers:"_chartScrollHandlers",_behavior:{_constructor:"ZCChartScroll",_arguments:"ZCChartScrollArguments"}}},Dw={LEGEND_SIZE_SLIDER_BRUSH:{_property:"legend.size",_feature_name:"brush",_handlers:"_legendSizeSliderBrushHandlers",_behavior:{_constructor:"BrushD3",_arguments:"_getLegendSizeSliderBrushArguments"}}},Rw=(_createClass(Fo,[{key:"init",value:function(){function e(e,t,r){n.initiateBehaviour(t,r)}var t=this,n=this;n.chart,pe(Iw,e),pe(Dw,e),pe(this.eventManager.behaviours,function(e){e&&e._init&&e._init.call(t,e)})}},{key:"update",value:function(){var e=this;pe(this.eventManager.behaviours,function(t){t&&t._update&&t._update.call(e,t)}),this.init()}},{key:"initiateBehaviour",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:Iw,r=this.eventManager,a=r.chart,i=a.systemConf,o=n[e],l=Rm(i,o._property)||{},s=l.actions,c=km.getComponent(T(o._handlers,[a]));if(Z(c)&&c!==bm&&c.SUPPORTED(a)&&l.enabled){var u=n===Iw;Z(a.systemConf.chart.width)||a.renderVisiblePointsOnly||!u||(a.renderVisiblePointsOnly=!1!==l.renderVisiblePointsOnly),nt(o._feature_name,i.chart,a.globalProp);var d=r.getBehaviouralEventInstance(e,T(o._behavior,[a]));c.BEHAVIOUR&&(d._init=c.INIT,d._update=c.UPDATE,r.setBehaviours(d,c.BEHAVIOUR),r.dataFinder(d,c.DATA_FINDER),r.setListenerTypes(d,c.LISTENER_TYPES),r.attachListeners(d,c.LISTENER),(s=l.actions)&&r.setBehaviours(d,s,"custom"))}else Z(r.behaviours[e])&&(r.behaviours[e].destroy&&r.behaviours[e].destroy(),r.behaviours[e]=null,delete r.behaviours[e])}}]),Fo);km.setComponent("BehaviouralEvents",Rw),Gt.helpers={isCatNull:function(e,t,n){var r=e.hasNullFormatter&&!e.hasNullFormatter[t+(Z(n)?n:"")];return function(e){return!Z(e)&&r}},is3D:function(e){return te(e)&&te(e[0])&&te(e[0][0])},getParsedYAxisOrder:function(e){return te(e)?e[0]:e||0},getChartType:function(e,t,n,r){if(null!=e||null!=n){var a,i,o=r&&r.seriesdata.chartdata;return Z(n)&&(e=Hm((o[n]||o[0]).type,r.seriesdata.type)),isNaN(+e)?(a=e.toLowerCase(),i=Kv[a]):(i=+e,a=Ay.get(i)),"string"===t?a:t===sx?i:{name:a,value:i}}},getAllChartTypes:function(e,t){var n=this,r=e.seriesdata&&e.seriesdata.type;return Hm(Rm(e,"seriesdata.chartdata"),[]).map(function(e){var a=n.getChartType(Hm(e.type,r),Hm(t,sx));return t||"object"!==t?a:{}})},getAllChartTypesFromSeriesdata:function(e,t,n){var r=this,a=e.seriesdata&&e.seriesdata.type;return Hm(t,[]).map(function(e){var t=r.getChartType(Hm(e.type,a),Hm(n,sx));return n||"object"!==n?t:{}})},filterDataToViewPort:function(e,t,n,r,a){var i=te(t)&&te(r),o=0;return e.filter(function(e){var l,s=n&&n(e),c=a&&a(e);return(l=i?null!==s&&null!==c&&s>=t[0]&&s<=t[1]&&c>=r[0]&&c<=r[1]:null!==s&&s>=t[0]&&s<=t[1])?(e._filter=!1,e.counter=o++):e._filter=!0,l})},getDataPosition:function(e,t,n,r,a,i,o,l){var s=2<arguments.length&&void 0!==n?n:0,c=3<arguments.length&&void 0!==r?r:0,u=a,d=i,h=o,f=l,p=u.renderer[s],g=u.rendererConf[s],v=g.yaxiscolumnorder(),y=u.axes.rotated,m=g.stacked(),b=null;if(d=Hm(d,u.chartTypes[s].name),h=Hm(h,g.xscale()),f=Hm(f,g.yscale()),"bar"===d)b=p.getParamValue(t,e,c,0,p.commonOption);else if("bubblepie"===d){var x=e[s];b=u.dataObject.getXYvalue(y,m,h,f,v,x,t)}else b=u.dataObject.getXYvalue(y,m,h,f,v,e,t);return isNaN(b)&&(b=null),b},filterPointsInViewport:function(e,t,n,r,a,i){function o(t){return g(t,p?"y":"x",s,c,e,n)}function l(t){return g(t,"y",s,c,e,n)}var s=4<arguments.length&&void 0!==a?a:0,c=5<arguments.length&&void 0!==i?i:0;if(e.isGeoMap)return t;var u=Re(["line","area","bar","arearange","canvasscatter"],n),d=e.plotarea,h=[0,d.width],f=[0,d.height],p=e.axes.rotated,g=Gt.helpers.getDataPosition;if("x"===r&&te(e.scrollView)&&(h=e.scrollView.map(e.axes.x.baseScale).sort(Wg)),u&&(1<t.length||"bar"===n))if("bar"===n)p&&(h=f),h=[h[0]-e.barscale2.bandwidth(),h[1]];else{var v=g(t[1],"x",s,c,e,n)-g(t[0],"x",s,c,e,n),y=g(t[1],"y",s,c,e,n)-g(t[0],"y",s,c,e,n);if(p){var m=[y,v].map(Ky),b=_slicedToArray(m,2);v=b[0],y=b[1];var x=[f,h];h=x[0],f=x[1]}h=[h[0]-v,h[1]+v],f=[f[0]-y,f[1]+y]}return"xy"===r?Gt.helpers.filterDataToViewPort(t,h,o,f,l):"x"===r?Gt.helpers.filterDataToViewPort(t,h,o):"y"===r?Gt.helpers.filterDataToViewPort(t,f,l):void 0},groupByDataIndices:function(e){var t=e.columns;return(e.axes.groupby||[]).map(function(e){return t[e].dataindex})},hasLevelMarkerData:function(e,t){var n=[vb,yb,Eb,Bb],r=e.getEncode("y",t).seriesIndices,a=e.allChartTypes;return r.some(function(e){return Re(n,Ay.get(a[e]))})},hasMarkerCorrection:function(e){return!1},generatePointKey:function(e,t,n,r,a){return e+"_"+t+"_"+n+"_"+r+"_"+a},getSeriesdata:function(e,t,n){if(Z(n))return e.dataObject.pivot?e.dataObject.hierarchical.pivotLayout.getRootNodeList("layer").panes[t].data[n].node:e.seriesdata[n]}},(qa.helpers={time:{},ordinal:{},numeric:{},linear:{}}).hasInnerSeries=function(e){return te(e.data)&&e.data[0]&&e.data[0].constructor===Object},qa.helpers.time={getDataInfo:function(e,t){var n,r,a,i=e.metadata.axes,o=i.x,l=i.z||[],s=i.clr||[],c=Ig([o,Ig(e.metadata.axes.y),l,s]),u=/timestamp/i,d=[],h=[];return c.map(function(i){a=Hm(e.metadata.columns[i],{}),n=Hm(a.time,{}),"time"!==a.datatype||i===o||t||(r=n.inputformat,u.test(r)&&"function"!==r&&"function"!=typeof window[r]?h.push(null):h.push(n),d.push(e.metadata.columns[i].dataindex))}),{indices:d,formatConf:h}},applyFormats:function(e,t){var n=t.indices,r=t.formatConf;return n.map(function(t,n){Z(e[t])&&(te(e[t])?e[t]=e[t].map(function(e){return La(e,0,r[n]).getTime()}):e[t]=La(e[t],0,r[n]).getTime())}),e}},qa.helpers.linear={sort:function(e,t){return e.sort(function(e,n){return(e=e[t])<(n=n[t])?-1:n<e?1:n<=e?0:NaN})}},Gt.prototype.convertTo3DArray=function(e,t,n){var r=e.data;if(0<t.length&&(n===Kv.bar||n===Kv.stkdbar)){var a=function(e,t){var n=e.data.map(function(e){return t.reduce(function(t,n){return t+e[n]},"")});return{distintGroupbyCat:Fe(n),allGroupbyCat:n}}(e,t),i=a.distintGroupbyCat,o=a.allGroupbyCat,l=[];e.data.forEach(function(e,t){var n=i.indexOf(o[t]);l[n]=l[n]||[],l[n].push(e)}),r=e.data=l}else Z(r)&&(!r.length||Z(r[0])&&te(r[0]))&&(e.data=[],e.data.push(r),r=e.data);return r},Gt.prototype.totalDataCount=function(e){var t=this,n=t.chartObj,r=0;return e.map(function(a){if(!e.disabled&&te(a)){var i=n._isAxisCategory()||t.isPolarAxisCategory||t.isNonAxisMultiSeriesCategory?a.length:a.reduce(function(e,t){return e+(t.disabled?0:1)},0);r+=1!==i||null!==a[0]&&a[0].length?i:0}}),this.totalnoofdatas+=r,r},Qv.rendererConf=function(){var e={params:{},xscale:function(t){return arguments.length?(e.params.xscale=t,e):e.params.xscale},yscale:function(t){return arguments.length?(e.params.yscale=t,e):e.params.yscale},stacked:function(t){return arguments.length?(e.params.stacked=t,e):e.params.stacked},datasetIndex:function(t){return arguments.length?(e.params.datasetIndex=t,e):e.params.datasetIndex},renderingOrderIndex:function(t){return arguments.length?(e.params.renderingOrderIndex=t,e):e.params.renderingOrderIndex},legendOrderIndex:function(t){return arguments.length?(e.params.legendOrderIndex=t,e):e.params.legendOrderIndex},rendererIndex:function(t){return arguments.length?(e.params.rendererIndex=t,e):e.params.rendererIndex},axisrotated:function(t){return arguments.length?(e.params.axisrotated=t,e):e.params.axisrotated},commonPlotOptions:function(t){return arguments.length?(e.params.commonPlotOptions=t,e):e.params.commonPlotOptions},color:function(t){return arguments.length?(e.params.color=t,e):e.params.color},paneColor:function(t){return arguments.length?(e.params.paneColor=t,e):e.params.paneColor},chartObj:function(t){return arguments.length?(e.params.chartObj=t,e):e.params.chartObj},notes:function(t){return arguments.length?(e.params.notesArray=t,e):e.params.notesArray},updateLabelArrayAndLabelQueue:function(t,n){return arguments.length?(e.params.labelArray=t,e.params.labelQueue=n,e):[e.params.labelArray,e.params.labelQueue]},hasNegValue:function(t){return arguments.length?(e.params.hasNegValue=t,e):e.params.hasNegValue},dataset:function(t){return arguments.length?(e.params.dataset=t,e):e.params.dataset},yaxiscolumnorder:function(t){return arguments.length?(e.params.yaxiscolumnorder=t,e):e.params.yaxiscolumnorder},threshold:function(t){return arguments.length?(e.params.threshold=t,e):e.params.threshold},thresholdType:function(t){return arguments.length?(e.params.thresholdType=t,e):e.params.thresholdType},colorOverlay:function(t){return arguments.length?(e.params.colorOverlay=t,e):e.params.colorOverlay},bound:function(t){return arguments.length?(e.params.bound=t,e):e.params.bound},legendIndex:function(t){return arguments.length?(e.params.legendIndex=t,e):e.params.legendIndex},legendOrder:function(t){return arguments.length?(e.params.legendOrder=t,e):e.params.legendOrder}};return e},Qv.render=function(e){var t=e.systemConf.chart.plot.renderer.mode.toLowerCase(),n={mode:function(e){if(rn(e))return Yt(e.dataObject).some(function(t){var n=t.row+"_"+t.column,r=ln(e,n,0).value;return Re(Py.svgOnly,r)});var t=e.chartTypes[0];return-1<Py.svgOnly.indexOf(t.value)||e.dataObject.pieWithAxis}(e)?"svg":t.toLocaleLowerCase()},r={labelQueue:[],notesArray:[],labelArray:{}};if(e.rendererConf||(e.rendererConf=[]),"function"!=typeof Qv[n.mode+"Renderer"])throw new SyntaxError(n.mode+"Renderer not found");return n[n.mode]=Qv[n.mode+"Renderer"](e,r),n.draw=function(t){e.chartRendered=!1,r.labelArray={},r.labelQueue=[],this[this.mode].draw(t)},n},zy.renderCompletedEvents=function(e,t,n,r){var a,i=e.systemConf,o=e.dataObject.hasLevelMarker&&!e.isAxisCategory,l=function(e){var t=e.dataObject;if(rn(e))return Fe(Vr(e.userdata)).map(function(e){return Kv[e]}).every(function(e){return Re(Py.axis,e)});var n=t.hasLevelMarker&&!t.isAxisCategory;return(t.isAxisCategory||t.isPolarAxisCategory)&&!t.pieWithAxis||n||e.isGeoMap&&!t.hasBubblePie}(e),s=e.renderer,c=!1;e._isAxisCategory()||e.dataObject.isPolarAxisCategory?setTimeout(function(){c=!0},e.axes.animationDuration+17):c=!0;var u=setInterval(function(){if(de()&&(e.chartRendered=!0),e.destroying)return clearInterval(u),!0;for(a=s.length;a--;)if(!0!==s[a].chartRendered||!c)return!1;return function(){try{e.divScroll&&Km.CHROME&&e.divScroll.fixScrollView(!0,e.canvasarea,e),Lr(e,i.chart.plot.events,0,t?"onreload":"onload"),Wo(e,n,!(l&&t),t),e.handleHiddenContainer(!0),Lr(e,i.canvas.events,0,t?"onreload":"onload")}catch(t){wa.helpers.handleErrors(e,t)}e.phase=null}(),clearInterval(u),k(r)?r():(e.updating=!1,e.chartRendered=!0),!0},1e3/60);l&&Wo(e,n,o||t,t)},zy.arrangeSeriesRenderingOrder=function(e,t,n,r){var a=t||e.seriesdata,i=Gt.helpers;if(e.dataObject.isCombinationalChart){var o={defaultType:0,area:0,geoheatmap:0,bar:1,line:2,bubble:3,geobubble:3,bubblepie:4,geobubblepie:4,scatter:5,geoscatter:5},l=e.userdata.seriesdata.type;r&&(a=t.map(function(e){return e.node}));var s=Dm(a),c=n||0;return s.map(function(e,t){return e.seriesidx=c++,e}),s.sort(function(e,t){var n=i.getChartType(e.type||l,"string"),r=i.getChartType(t.type||l,"string"),a=null==o[n]?o.defaultType:o[n],s=null==o[r]?o.defaultType:o[r],c=e.seriesidx,u=t.seriesidx;return a<s?-1:s<a?1:c<u?-1:u<c?1:0}),r?t.map(function(e,t){return e.node=s[t],e}):s}return a},zy.setRendererProp=function(e,t,n,r,a,i,o,l,s){o=Hm(o,r);var c,u,d,h,f,p,g,v=e.chartTypes[r],y=l?Ay.get(l):v.name,m=l||v.value,b=e.systemConf,x=Gt.helpers,w=e.dataObject.hierarchical,C=w&&w.facetRendering;if(C){c=w.pivotLayout.getRootNodeList("row"),u=w.pivotLayout.getRootNodeList("column"),d=c.getCount(),c.getClustersCount(),h=c.hasMultiCluster(),p=u.getLeavesCount(),g=w.pivotLayout.layers.groups[s],f=!!h&&w.pivotLayout.layers.isLayerNode;var k=w.gridOptions,_=n[r].row+"_"+n[r].column;k[_]&&(k[_].renderer[r]=t)}var S,O,A,P,T,E,L,M,z,I,D,R,j,H,B=C?g.indexOf(n[r].value):r;S=n,O=r,A=y,P=B,T=o,E=e.dataObject.hierarchical,L=E&&E.facetRendering,M=L&&S[P]?S[P].node.color:null,z=!!(L&&E.pivotLayout.rows&&E.pivotLayout.rows.hasMultiCluster())&&E.pivotLayout.layers.isLayerNode,I=L&&z?S[P].node:e.seriesdata[P],D=S[O]?S[O].row+"_"+S[O].column:"0_0",R=L?xn(e,D,O):I.color||xn(e,D,O),j=z?S[P].parent.node.yaxiscolumnorder:e.seriesdata[O].yaxiscolumnorder,H=L&&E.hasRows()?Qt(S[O].row||0,null,"y",e):x.getParsedYAxisOrder(j),e.rendererConf[T].chartObj(e).dataset(e.dataset).yaxiscolumnorder(H).commonPlotOptions(e.systemConf.chart.plot.plotoptions[A]).color("bubblepie"==A?e.seriesColor:e.isAxisCategory?function(t,n,r,a,i,o,l){var s=b.chart.axes.xaxis.threshold.coloroverlay,c=null!=b.chart.axes.yaxis[i]&&null!=b.chart.axes.yaxis[i].threshold?b.chart.axes.yaxis[i].threshold.coloroverlay:null,u=s.show||null!=c&&c.show;if(u){var d=null!=c&&c.show?"y":s.show?"x":null,h=null!=c&&c.show?c:s.show?s:null,f=null!=c&&c.show?"y":s.show?"x":null,p=u?Gv.threshold.overlay(e,"continous"):null,g="y"===f?i:0;return e.rendererConf[l].threshold(u?h:null).thresholdType(f).colorOverlay(u?Gv.threshold.overlay(e,"discrete",d,h):null),"bar"==o||"scatter"==o||"bubble"==o?r:p(r,h,g,f)}return r}(0,0,R,0,H,A,T):e.dataObject.isPolarAxisCategory||jn(e)?R:e.seriesColor).paneColor(M).notes(i.notesArray).updateLabelArrayAndLabelQueue(i.labelArray,i.labelQueue),t.commonRendererProp(e.rendererConf[o]);var N=f?n[B].parent.node.yaxiscolumnorder:e.seriesdata[r].yaxiscolumnorder,F=f?n[B]:e.seriesdata[B],V=x.getParsedYAxisOrder(N);if(t.chartRendered=!1,e._isAxisCategory()||e.dataObject.isPolarAxisCategory){var W=e.axes.y.groups[V].scale||e.axes.y.groups[0].scale,Y=C&&(h||d)?n[r].row||0:null,U=C?1<p?e.axes.x.leaves[n[r].column].scale:e.axes.x.leafScaleGrid:e.axes.x.scale,G=C&&(h||d)?e.axes.y.leaves[Y].scale:W;e.rendererConf[o].xscale(U).yscale(G).datasetIndex(r).renderingOrderIndex(a).legendOrderIndex(r).legendIndex(B).legendOrder(s).rendererIndex(o).axisrotated(e.axes.rotated).hasNegValue(e.dataObject.containsNegativeData(V)).stacked(e.dataObject.isstacked(m)),i.labelArray=e.rendererConf[o].params.labelArray,i.labelQueue=e.rendererConf[o].params.labelQueue}if(e.dataObject.isFlowChartCategory&&e.rendererConf[o].datasetIndex(r),Zn(m)&&!er(m)&&(t.bandwidth1(e.barscale1).bandwidth2(e.barscale2),i.barDatasetIndex=C&&1<e.barscale2.domain().length?B:i.barDatasetIndex,i.image||t.barDatasetIndex(i.barDatasetIndex),null!=F.disabled&&F.disabled||(i.barDatasetIndex=i.barDatasetIndex+F.data.length)),Kn(m)){var X=e.rendererConf[o].params;X.categoryColorConfig=zy.getWaterfallCategoriesConfig(e.seriesdata[r].plotoptions,X.commonPlotOptions)}e.rendererConf[o].bound(zy.getBound(e,n[r]))},zy.getBound=function(e,t){var n=e.dataObject.hierarchical;if(n&&n.facetRendering){var r=t.row,a=t.column,i=n.pivotLayout,o=i.columns,l=i.rows,s=o.leafSize,c=l.leafSize,u=o.count?o.branches[0].domain.length:1,d=l.count?l.branches[0].domain.length:1,h=u*o.clustersCount,f=d*l.clustersCount,p=o.branches.length,g=l.branches.length,v=void 0,y=void 0,m=void 0,b=void 0,x=e.cache.polar&&e.cache.polar[r+"-"+a],w=p&&sa(e,"x",0).reversed,C=g&&sa(e,"y",0).reversed;return b=e.axes.rotated?(v=(C?f-r-1:r)*c,y=(w?a:h-a-1)*s,m=c,s):(v=(w?h-a-1:a)*s,y=(C?f-r-1:r)*c,m=s,c),{width:m||0,height:b||0,x:v||0,y:y||0,polar:x}}var k=e.plotarea,_=k.width,S=k.height,O=e.plotarea_approx;return _defineProperty({width:_,height:S,polar:O,x:0,y:0},"polar",O)},zy.saveSeriesdataInRenderer=function(e,t,n){n=Hm(n,t);var r=e.rendererConf[t].params,a=r.xscale,i=r.yscale,o=r.yaxiscolumnorder,l=e.dataset,s=l.getDataType("x"),c=l.getDataType("y",o),u=e.seriesdata[t].data,d=e.renderer[n];if(s==ox||c==ox){d.seriesdataAfterUpdate=[];var h=Gt.helpers,f=(h.isCatNull(l,"x"),h.isCatNull(l,"y",o),s==ox?a.domain():null),p=c==ox?i.domain():null;u.forEach(function(t,n){d.seriesdataAfterUpdate[n]=e.dataObject.updateSeriesdatabyCategories(R(t),f,p,o)})}else d.seriesdataAfterUpdate=null},Fx.get=function(e,t){return new Yo(e,t)},ve(Yo,wa),Yo.helpers=wa.helpers,Yo.prototype.initialize=function(){var e=this;try{e.processUserData(e.themeoptions),e.setChartDimension(),e.legendHighlight=new oi(e,e.svg),wa.helpers.constructChartGroups(e)}catch(t){wa.helpers.handleErrors(e,t)}},Yo.prototype.draw=function(){this.render(!1)},Yo.prototype.render=function(e){var t=this;try{t.updateCanvasArea();var n=t.systemConf;if(t.applyChartProperties(),t.nochartdata)t.hideLoading(t.container),t.handleNoData(n.noDataHandler),t.chartRendered=!0,Lr(t,n.canvas.events,0,e?"onreload":"onload");else{if(t.clearNoData(n.noDataHandler),t.getChartSeriesColor(),t.isAxisCategory=t.dataObject.isAxisCategory,t.isNonAxisMultiSeriesCategory=t.dataObject.isNonAxisMultiSeriesCategory,t.isPolarAxisCategory=t.dataObject.isPolarAxisCategory,t.parseScale(),t.zscale=t.scales[0]&&t.scales[0].getScale(),Xv.render(t,e),fw.updatePlotarea4BlockTooltip(t),H(t.systemConf,"notes")&&t.systemConf.notes.enabled){var r=km.getComponent("annotation");r._empty||r.addBlockAnnotations(t)}if((t._isAxisCategory()||t.dataObject.isPolarAxisCategory||t.dataObject.hasLevelMarker)&&(t.axes.rotated=ua(n),t.axes.rotated?(t.axes.x.orient="left",t.axes.y.orient="bottom"):(t.axes.x.orient="bottom",t.axes.y.orient="left"),t.ismultiy=1<t.getAxesCount("y"),t.ismultix=1<t.getAxesCount("x")),H(t.systemConf.chart,"scroll")&&t.systemConf.chart.scroll.enabled?t.scroll?t.scroll.update():(nt("scroll",t.systemConf.chart,t.globalProp),t.scroll=new Mw(t,"x")):t.scroll&&(t.scroll.destroy(),t.scroll=null,t.behaviouralEvents.eventManager.behaviours.CHART_SCROLL=null,delete t.behaviouralEvents.eventManager.behaviours.CHART_SCROLL,delete t.scroll),t._isAxisCategory()&&(t.systemConf.chart.width||t.systemConf.chart.height)){var a=new fa;(t.divScroll=a).initialize(t)}Lr(t,n.chart.axes.events,0,"init"),t.drawPlotBorder(),t._isAxisCategory()&&Gv.render(t,t.chartWidth,t.chartHeight,e),(t.dataObject.isPolarAxisCategory||ar(t.chartTypes[0].value,Eb))&&Gv.polar.render(t),t.legend.isSingleLayout&&(t.zscale=t.dataObject.hasZaxis&&!t.dataObject.isHierarchy?t.scales[0].create():null),Lr(t,n.chart.axes.events,0,e?"onreload":"onload"),t.updatePlotareaProp(),t.plot.renderer?t.plot.renderer.draw(e):(t.plot.renderer=Qv.render(t,e)).draw(!1),t.isAxisCategory&&t.drawThreshold(e),t.handleEvent(e),t.drawPlotareaClippath(),t.positionEventTrackerElement(t.wrap.selectAll("rect.dummy-rect-filter"))}}catch(e){wa.helpers.handleErrors(t,e)}},Yo.prototype.processUserData=function(e,t){var n,r,a,i=this;if(i.systemConf=n=Im(e,i.userdata,!0,!0),r=Rm(n,"seriesdata")||{},i.seriesdata=a=r.chartdata,Lr(i,n.canvas.events,0,"init"),i.nochartdata=!Z(a)||Z(a)&&a.length<1,i.nochartdata)i.seriesdata=null;else{if(function(e){var t=e.systemConf,n=t.metadata.axes,r=t.facets,a=[Tb,Lb,Mb],i=sn(e).values().some(function(e){return Re(a,e)}),o=t.metadata.columns[n.x[0]],l=o.datatype;if(!r||n.clr&&n.clr.length||t.facets.color&&t.facets.color.length||!i)!i&&Rm(e.userdata,"legend._dummy")&&(delete t.metadata.axes.clr,jm(e.userdata,"legend._dummy",void 0),jm(e.systemConf,"legend._dummy",void 0),l===ox&&(H(o.ordinal,"_dummyNullformatting")&&(jm(o,"ordinal.nullformatting",void 0),jm(o,"ordinal._dummyNullformatting",void 0)),jm(e.userdata,"legend.colorBand.nullAs",void 0),jm(e.systemConf,"legend.colorBand.nullAs",void 0)));else if(t.metadata.axes.clr=[n.x[0]],jm(e.userdata,"legend._dummy",!0),jm(e.systemConf,"legend._dummy",!0),l===ox){H(o.ordinal,"nullformatting")||(jm(o,"ordinal.nullformatting","null"),jm(o,"ordinal._dummyNullformatting",!0));var s=H(o.ordinal,"nullformatting",!0)||"null";jm(e.userdata,"legend.colorBand.nullAs",s),jm(e.systemConf,"legend.colorBand.nullAs",s)}}(i),i.dataset=new Ga.get(n,i),i.preProcessor=new qa(i),!i.seriesdata.length)return void(i.nochartdata=!0);i.dataObject=i.getDataObject(),i.nochartdata=i.dataObject.totalnoofdatas<1}},Yo.prototype.getDataObject=function(){var e,t,n=this.chartTypes[0].value;return e=this._isAxisCategory()?"cartesianDataProcessor":Re(Py.hierarchy,n)?"hierarchyDataProcessor":Re(Py.axis,n)||Re(Py.polarAxis,n)||ar(n,Eb)||Re(Py.flow,n)?"cartesianDataProcessor":"defaultDataProcessor",function(e){var t=e.prototype,n={getAxisRotated:function(){return ua(this.data)},isstacked:function(){return!1}};for(var r in n)t[r]||(t[r]=n[r])}(t=km.getComponent(e)),new t(this.systemConf,this.dataset,this)},Yo.prototype.getAxesCount=function(e){var t=1,n=this.systemConf.metadata,r=this.dataObject.hierarchical;if("x"===e){var a=this.dataset.getColumnIdx(e),i=n.columns[a].datatype,o=Hm(n.columns[a][i],{}),l=o.subfunction,s=this.systemConf.chart.axes.xaxis.show;if(r){var c=r.pivotLayout.getRootNodeList("column");t=c.getCount()+c.getLeavesCount()}else s&&te(o.groupby)&&o.groupby.length?t=o.groupby.length+1:s&&"AUTO"===o.groupby&&(t=Gt.HierarchicalTimeDataAdapter.getAutoGroupOrder(l).length+1);this.axes[e].count=t}else{var u=n.axes.y;if(r&&r.pivot){var d=r.pivotLayout.getRootNodeList("row");t=(d.getCount()||0)+d.getLeavesCount()}else t=u.length;this.axes[e].count=t}return t},Yo.prototype.drawThreshold=function(e){Gv.threshold&&(this.cache.thresholdCustomPoints=[],Gv.threshold(this,e))},Yo.prototype.handleEvent=function(e){var t=this,n=t.systemConf,r=km.getComponent("ZC_ChartEvents");if(e&&t.eventHandler)t.eventHandler.update(),function(e){e.eventHandler.tooltipElement=qv.tooltip(e.tooltip.element,e.systemConf,e),e.eventHandler.tooltipElement.initialize()}(t);else{t.createEventGroups(e);var a=Et("g",".trackerGroup",[1],t.eventWrap).attr("pointer-events","all"),i=Et("rect",".eventhandler",[1],a);t.eventHandler=new r(t,a),t.eventHandler.trackerGroup=a,t.eventHandler.trackerElement=i,di(t),t.eventHandler.init(),ui(t)}t.eventHandler.isSingleSource()&&(t.renderer.length&&t.dataObject.flattenData(),t.positionEventTrackerElement()),di(t),t._isAxisCategory()&&(t.systemConf.chart.width||t.systemConf.chart.height)&&t.divScroll.defaultScroll(t),t.behaviouralEvents?t.behaviouralEvents.update():!0!==n.__$overview&&(t.behaviouralEvents=new Rw(t)),t.scroll&&t.scroll.render(),t.handleLegendEvents()},Yo.prototype.addRemoveSeries=function(e,t,n,r){var a=this,i=a.systemConf;if(a.phase="legendFilter",rn(a))return a.cache.search={},void a.plot.renderer.draw(!0);if(dx.isQuantileColorScale(a))return a.phase="legendFilter-colorScale",a.cache.search={},void a.plot.renderer.draw(!0);if(a.dataObject.formattedData={x:[],y:[]},a.dataObject.initialize("addorremoveseries"),Lr(a,i.chart.axes.events,0,"init"),a.isAxisCategory){a.updateZscale();var o=a.dataObject.hierarchical;if(r?(a.axes.y.groups.forEach(function(e,t){a.updateScale([t,0],"y")}),a.dataObject.hierarchical&&o.pivotLayout.getRootNodeList("row").getCount()&&Zv.setRowScale(a,"row")):a.updateScale(n,"y"),a.updateScale(0,"x",a.viewPortExtent),o){a.axes.x.rangeScale=a.axes.x.scale.copy(),a.axes.x.rangeScale.outerPaddingPx=a.axes.x.scale.outerPaddingPx,a.dataObject.hierarchical.groupByDiscreteTime&&a.axes.x.rangeScale.domain(av(a.axes.x.scale.domain().length));var l=o.setScaleForRange(a.axes.x.rangeScale);o.pivotLayout.setRanges("column",l),a.axes.x.levels.forEach(function(e,t){a.updateScale(n,"x",null,t+1)}),o.categoryTree&&Gv.TickLabelFilter.updateTickEventHandler(a,e.disabled,"x")}a.drawThreshold(!0),a.updatePlotareaProp()}else a.dataObject.isPolarAxisCategory&&Gv.polar.render(a,"x");Lr(a,i.chart.axes.events,0,"onreload"),a.events={},a.plot.renderer.draw(!0),a.drawPlotareaClippath(),(a.isAxisCategory||a.dataObject.isPolarAxisCategory)&&(a.positionEventTrackerElement(),(a.systemConf.chart.width||a.systemConf.chart.height)&&a.divScroll.defaultScroll(a,"addorremoveseries")),a.behaviouralEvents&&a.behaviouralEvents.update(),a.scroll&&a.scroll.update()},Yo.prototype.pushDataPoint=function(e,t,n){var r=this,a=r.dataObject.isCombinationalChart,i=a?zy.arrangeSeriesRenderingOrder(r):r.seriesdata;if(!Array.isArray(e)){var o=[],l=[];o.push(e),l.push(t),e=o,t=l}r.cache.data={},r.cache.search={},e.forEach(function(e,o){var l,s,c,u=i[e],d=a?u.seriesidx:e,h=r.seriesdata[d],f=r.renderer[d];if(c=te(n)?n[o]:n,h.data[0].push(t[o]),r.dataObject.flattenData([{seriesindex:d,subseriesindex:0,data:[[t[o]]]}]),c){l=h.data[0][0];var p=h.data[0].shift();p._filter=!0,Z(f.shiftInfo())?(s=f.shiftInfo()).count++:s={count:0},s.point=l,s.shiftedData=p,f.shiftInfo(s)}else f.shiftInfo(null)}),r.dataObject.initialize(),r.updateScale(null,"x"),r.ismultiy?e.forEach(function(e,t){var n=i[e],o=a?n.seriesidx:e,l=r.seriesdata[o];r.updateScale(l,"y")}):r.updateScale(r.seriesdata[0],"y"),r.plot.renderer.draw(!0),r.drawThreshold(!0)},Yo.prototype.popDataPoint=function(e){var t=this.seriesdata[e];t.data.forEach(function(e){e.pop()}),this.dataObject.initialize(),this.updateScale(t,"x"),this.updateScale(t,"y"),this.plot.renderer.draw(!0),this.drawThreshold(!0)},Yo.prototype.zoomX=function(e,t){this.__enableZoom("x"),Ho(this.behaviouralEvents.eventManager,t,"x",e)},Yo.prototype.zoomY=function(e,t){this.__enableZoom("y"),Ho(this.behaviouralEvents.eventManager,t,"y",e)},Yo.prototype.zoomXY=function(e,t,n){this.__enableZoom("xy"),Ho(this.behaviouralEvents.eventManager,[t,n],"xy",e)},Yo.prototype.zoomReset=function(){this.behaviouralEvents.eventManager.behaviours.PLOT_ZOOM.instance.reset()},Yo.prototype.brushON=function(e){this.__enableBrush(e)},Yo.prototype.brushOFF=function(){this.__enableBrush(null)},Yo.prototype.brushX=function(e,t){this.__enableBrush("x"),Vo(this.behaviouralEvents.eventManager,t,"x",e)},Yo.prototype.brushY=function(e,t){this.__enableBrush("y"),Vo(this.behaviouralEvents.eventManager,t,"y",e)},Yo.prototype.brushXY=function(e,t,n){this.__enableBrush("xy"),Vo(this.behaviouralEvents.eventManager,[t,n],"xy",e)},Yo.prototype.changeZoomType=function(e){var t=this.systemConf;this.zoom||nt("zoom",t.chart,this.globalProp),t.chart.zoom.type=e},et.notes=function(e){return{enabled:!1,chartValues:[],plotValues:[],blockValues:[],type:"stickyNote",options:{stickyNote:{headWidth:15,headHeight:15,bodyWidth:100,bodyHeight:100,fontSize:e.fontL1Size.l5,color:["#F0F8FF","#FFE4C4","#DCDCDC","#ADFF2F","#90EE90","#87CEFA","#FFC0CB","#B0E0E6","#D2B48C","#D8BFD8","#EE82EE","#F5DEB3"],mode:"close",border:"1px solid grey"},customNote:{fontSize:e.fontL1Size.l5}}}},km.setComponent("annotation",Uo),Uo.draw=function(e,t){var n=e.systemConf.notes;if(Z(n)&&!0===n.enabled){var r=e.dataObject.isPolarAxisCategory,a=e.dataObject.isFlowChartCategory;if(Hm(n.chartValues,[]).forEach(function(t){Uo.addNotes(e,{coordinate:[t.x,t.y],conf:t})}),e.isAxisCategory||r||e.isGeoMap||a)for(var i=0,o=e.seriesdata.length;i<o;i++){var l=e.renderer[i];"image"===e.plot.renderer.mode&&zy.setRendererProp(e,l,e.seriesdata,i,i,{image:!0});var s,c,u=e.rendererConf[i].params,d=u.xscale,h=u.yscale,f=u.stacked,p=u.datasetIndex,g=u.legendOrderIndex,v=(u.rendererIndex,u.axisrotated),y=u.yaxiscolumnorder,m=e.chartTypes[p].value;if(e.isGeoMap||a||(c=e.dataset.getDataType("x")==ox?d.domain():e.dataObject.getCategories("x")),Zn(m)){var b=Go(e.rendererConf[p],p,g);s=function(t,n,r){return[e.dataObject.getTransRectValue("x",t,n,r,b),e.dataObject.getTransRectValue("y",t,n,r,b)]}}else s=function(t){var n=r?[e.plotarea_approx.x,e.plotarea_approx.y]:[0,0];return[e.dataObject.getXYvalue(v,f,d,h,y,t,"x")+n[0],e.dataObject.getXYvalue(v,f,d,h,y,t,"y")+n[1]]};t=Uo.preprocessAnnotations(e.seriesdata,p,s,t,e,u,c)}t.forEach(function(t){Uo.addNotes(e,t)})}return t=[]},Uo.addNotes=function(e,t){var n,r,a,i,o=e.systemConf.notes,l=e.plotarea,s=e.canvasarea,c=s.width,u=s.height,d=t.coordinate,h=t.basedOn||"chart",f=t.data,p=t.conf||{},g=t.disabled,v=Hm(p.type,o.type,"stickyNote"),y="block"===h||"plot"===h?l:s,m=p.overflow||o.overflow||"scroll";"block"===h&&(a="scroll"===m?"auto":"hidden",n=Ie(o.maxWidth||"100%",y.width)),"block"===h&&(i="scroll"===m?"auto":"hidden",r=Ie(o.maxHeight||"10%",y.height));var b="plot"==h?re(f):"block"==h?E(p,""):re(t.conf);b="plot"!=h&&null!=p.id?p.id:h+b.replace(/[`~!@#$%^&*( )_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi,""),p.id=b;var x=mt(e.notes,"div",[1],"#","id",h);x.styles({width:"0",height:"0"});var w=mt(x,"div",[t],"#","id",b);w.styles({display:g?fm:null,position:"absolute",left:"0",top:"0","overflow-x":a,"overflow-y":i,"max-width":Z(n)?n+hm:vm,"max-height":Z(r)?r+hm:vm});var C=Uo["stickyNote"===v?"stickyNote":"customNote"](),k=Im(o.options[v],t.conf||{},!0);if(C.chartObj(e).conf(k),kt(w,[k,e.systemConf.canvas,Qm],!0),w.call(C),!g){var _=w.node(),S="stickyNote"===v?qy(parseFloat(w.selectAll(".head").style("width")),parseFloat(w.selectAll(".body").style("width"))):0,O="stickyNote"===v?parseFloat(w.selectAll(".head").style("height"))+parseFloat(w.selectAll(".body").style("height")):0;d=d.map(function(t,n){var r="plot"===h?t+e.plotarea[0==n?rb:ob]:V(t,e,p,_);return isNaN(+r)?Ie(t,0==n?c:u,0):r}),d=V("plot"===h||"block"===h?p.transform:null,e,p,_,d)||d,C.coordinate(d),d=qo(d[0],d[1],S,O,c,u),w.styles({left:d[0]+hm,top:d[1]+hm});var A="plot"==h?f:b;return-1==Qo(o,A,h)&&Zo(o,A,"",t.coordinate,h),w}},Uo.preprocessAnnotations=function(e,t,n,r,a,i,o){function l(e,t,n,a){r.push({coordinate:e,data:t,conf:n,disabled:a,basedOn:"plot"})}if(!a.destroying){var s=a.systemConf.notes;if(!Z(s)||!Z(s.enabled)||!1===s.enabled)return r;var c=s.plotValues,u=a.isAxisCategory,d=a.isNonAxisMultiSeriesCategory,h=a.dataset,f=i.stacked,p=a.plotarea,g=i.yaxiscolumnorder,v=e[t],y=gx.pointInRectangle,m=a.dataObject.isHierarchy?v:v.data,b=(u||d)&&1<e.length?v.seriesname:null,x=a.chartTypes[t].name,w=a.dataObject.seriesNames||(a.dataObject.seriesNames=a.seriesdata.map(function(e){return e.seriesname}));return(u&&1<e.length?c.filter(function(e){var t=e.data[e.data.length-1];return b==t||-1==w.indexOf(t)}):c).forEach(function(t,r){for(var i=!1,s=t.data,c=0,C=u?m.length:1;c<C&&!i;c++)for(var k=0,_=m[c].length;k<_&&!i;k++){var S=Xo(A=m[c][k],b);re(S)==re(s)&&(i=!0,l(O=n(A,c,k),S,t,!(!u||y(O,p))||(u||d?v.disabled:A.disabled)||!yn(A,a)))}if(u&&!i&&("bar"!==x||-1!=o.indexOf(h.getX(s)))){i=!0;var O,A=Xo(s);f&&(A.y=h.getY(s,g),A.y0=0),l(O=n(A,0,k),A,t,!(!u||y(O,p))||!(u&&1<e.length&&-1==w.indexOf(s[s.length-1]))&&v.disabled)}if(!i&&"sunburst"===x){var P=[b,v.value];re(P)===re(s)&&l(n(v),P,t,v.disabled)}if(!i&&x===Nb){var T=a.renderer[0].getSankeyNodeByPoint(s);if(T){var E=a.dataset,L=[];L[E.xidx]=L[E.yidx(0)]=T.name,L[E.zidx]=T.value,re(L)===re(s)&&l(n(s),L,t)}else l([null,null],s,t,!0)}}),r}},Uo.addBlockAnnotations=function(e){var t=e.systemConf.notes;if(Z(t)&&!1!==t.enabled){nt("notes",e.systemConf,e.globalProp);var n,r,a=(t=e.systemConf.notes).blockValues,i=e.plotarea,o=Ie(t.maxWidth||"100%",i.width),l=Ie(t.maxHeight||"10%",i.height),s=i.width,c=i.height,u=i.left,d=i.top,h=i.bottom;a.forEach(function(a){var f=a.hAlign,p=a.vAlign,g=a.overflow||t.overflow||"scroll",v=f===ab,y=f===rb,m=p===ob,b=p===ib;if(!(r&&m||n&&b)){var x=Uo.addNotes(e,{coordinate:[function(e,t,n){var r=n.getBoundingClientRect(),a=v?u+s:y?u:u+s/2,i=v?r.width:y?0:r.width/2;return qy(a-i,0)},function(e,t,n){var r=n.getBoundingClientRect();return(m?d:d+c)-(m?0:r.height)}],conf:a,basedOn:"block"}),w=x.node(),C=w.getBoundingClientRect(),k=C.height;C.width,"fire"===g&&(w.scrollHeight>l||w.scrollWidth>o)?x.remove():(i.height=c-k,m?i.top=d+k:b&&(i.bottom=h+k)),r=r||m,n=n||b}})}},Uo.customNote=function(){function e(e){e.each(function(e){var n=this;fg(this).each(function(){var a=fg(n),i=V(t.htmlEl,r,e.conf);if(i&&(i.isD3Selection||1===i.nodeType)){a.html("");var o=i.isD3Selection?i.node():i;1===o.nodeType&&n.appendChild(Km.IE?o.cloneNode(!0):o)}else a.html(i)})})}var t,n,r;return e.coordinate=function(t){return arguments.length?(n=t,e):n},e.conf=function(n){return arguments.length?(t=n,e):t},e.chartObj=function(t){return arguments.length?(r=t,e):r},e},Uo.stickyNote=function(){function e(e){e.each(function(e){var a=fg(this),i=t.systemConf.notes,o=t.canvasarea.width,l=t.canvasarea.height,s=t.notes,c=e.basedOn||"chart",u=(e.data,e.coordinate),d="string"==typeof u[0]&&-1<u[0].indexOf("%"),h="string"==typeof u[1]&&-1<u[1].indexOf("%"),f=n.text,p=s.selectAll(".head").size(),g=n.color,v="open"===n.mode,y=U(n.bodyWidth,100),m=U(n.bodyHeight,100),b=U(n.headWidth,15),x=U(n.headHeight,15),w=v?0:1;g=g instanceof Array?g[p%g.length]:g,Ng().on("drag",function(e,t){if(!Hv().defaultPrevented){var n=fg(this.parentNode),a=parseFloat(n.style("left"))+Hv().x,s=parseFloat(n.style("top"))+Hv().y,u=qy(w%2!=0?0:y,b),f=(w%2!=0?0:m)+x;a=o-u<a?o-u:a<0?0:a,s=l-f<s?l-f:s<0?0:s,r[0]=a,r[1]=s;var p=a+hm,g=s+hm;if(n.styles({left:p,top:g}),"plot"!=c){var v=n.attr("id"),C=Qo(i,v,c);-1!=C&&(i.chartValues[C].x=d?a/o*100+"%":a,i.chartValues[C].y=h?s/l*100+"%":s)}}}),a.attr("class","group").styles({width:0,height:0,"z-index":2});var C=mt(s,"textarea",[1]);C.styles({width:y+hm,height:m+hm,position:"absolute","border-color":pm,"border-radius":(n.bodyBorderRadius||0)+hm,"background-color":pm,overflow:"hidden",display:fm,resize:fm,"z-index":2,outline:fm}).on("blur",function(e,t){var n=C.attr("eleID");if(C.style("display",fm),null!=n){var r=fg("#"+n);r.selectAll(".body").style("color",null),r.style("z-index",2)}}).on("input",function(){var e=fg(this);if(e.style("display")!==fm){var t=fg("#"+e.attr("eleID")),n=t.selectAll(".body"),r=t.attr("id"),a=C.node().value,o=t.datum(),l=o.basedOn||"chart",s=o.data;n.text(a);var c="plot"==l?s:r,d=Qo(i,c,l);-1==d?Zo(i,c,a,u,l):i[l+"Values"][d].text=a}}).text(f);var k=mt(a,"div",[1],".","class","head");k.attr("customColor")||k.style("background-color",g).attr("customColor",g),k.styles({width:b+hm,height:x+hm,border:n.border,"border-radius":(n.headBorderRadius||0)+hm,"z-index":"auto"}),Mr(k,{click:_=function(e,t){if(!Hv().defaultPrevented){var n=w%2==0,a=fg(this.nextSibling),i=fg(this.parentNode);if(C.on("blur")(),n)i.transition().delay(250).duration(0).styles({left:r[0]+hm,top:r[1]+hm});else{var c=qo(parseFloat(i.style("left")),parseFloat(i.style("top")),y,x+m,o,l);i.styles({left:c[0]+hm,top:c[1]+hm})}a.style("color",null).transition().ease(xg).styles({width:n?0+hm:y+hm,height:n?0+hm:m+hm,display:n?null:"block"}),a.transition().delay(250).style("display",n?fm:null),s.selectAll(".group").style("z-index",1),i.style("z-index",2),w++}}},{tap:_});var _,S=a.selectAll("div.body").empty()?{"background-color":g}:{},O=mt(a,"div",[1],".","class","body");O.styles({width:v?y+hm:"0",height:v?m+hm:"0",display:v?null:fm,border:n.border,overflow:"hidden","box-shadow":n.shadow,"border-radius":(n.bodyBorderRadius||0)+hm,"z-index":"auto"}).styles(S).text(f),Mr(O,{click:_=function(e,t){var n=fg(this),r=fg(this.parentNode);C.on("blur")(),C.styles({display:null,left:r.style("left"),top:parseFloat(r.style("top"))+x+hm,color:r.style("color"),"font-size":r.style("font-size"),"font-family":r.style("font-family"),"font-weight":r.style("font-weight"),"font-style":r.style("font-style")}).attr("eleID",r.attr("id")),C.node().value=n.text(),C.node().focus(),n.style("color",pm),s.selectAll(".group").style("z-index",1),r.style("z-index",2),C.style("z-index",3)}},{tap:_})})}var t,n,r;return e.chartObj=function(n){return arguments.length?(t=n,e):t},e.conf=function(t){return arguments.length?(n=t,e):n},e.coordinate=function(t){return arguments.length?(r=t,e):r},e};var jw=Dg();jw.set("bar",function(e){return e.staticPaneSVG.selectAll("g.eventgroup").selectAll("g#zcbarhighlight")}),jw.set("scatter",function(e){return e.staticPaneSVG.selectAll("g.eventgroup").selectAll("g#zcscatterhighlight")}),jw.set("area",function(e){return e.staticPaneSVG.selectAll("g.eventgroup").selectAll("g#zcareahighlight")}),jw.set("nonaxis",function(e){return e.staticPaneSVG.selectAll("g.eventgroup").selectAll("g.zcnonaxishighlight")});var Hw=0,Bw=(_createClass(nl,[{key:"init",value:function(){var e=this,t=ia(e.button,5),n=e.group=Et("g",".custom-button-"+Hw++,[1],e.parent),r=e._rect=Et("rect",".custom-button-rect",[1],n),a=e._text=Et("text",".custom-button-text",[1],n);a.text(e.label.text).attrs({dy:".9em"}),Mt(e._text,e.label.style);var i,o=ze(a),l=Hm(e.button.width,o.width),s=Hm(e.button.height,o.height),c={width:l+t.left+t.right,height:s+t.top+t.bottom},u={x:c.width/2-o.width/2,y:c.height/2-o.height/2};(i=e.button).radius&&(i.rx=i.ry=i.radius),Mt(r,_extends({},c,e.button),Ey,{width:"width",height:"height"}),a.attrs(u),e.group.styles({cursor:gm}),e.bounds={text:_extends({},u,{width:o.width,height:o.height}),rect:c}}},{key:"translate",value:function(e){this.group.attr("transform","translate("+e.join(" ")+")")}},{key:"show",value:function(){this.group.style("display",null)}},{key:"hide",value:function(){this.group.style("display","none")}}]),nl),Nw=function(e,t,n){var r=e.border,a=e.label,i=r.show,o=i?r.radius:0,l=rt(r.style,r.size),s=[a,t.systemConf.chart,t.systemConf.canvas,{fontColor:"white",fontSize:11},Qm];return{label:{text:Hm(a.text,n?"Reset Zoom":"Reset Brush"),style:_extends({},a,{fill:a.fontColor||"white","font-size":a.fontSize,"font-family":Y(s,"fontFamily"),"text-shadow":Y(s,"textShadow")})},button:{radius:o,fill:e.fillColor,"fill-opacity":e.fillOpacity,stroke:r.color,"stroke-width":i?r.size:0,"stroke-dasharray":l,"stroke-linecap":at(r.lineCap,l),marginTop:a.marginTop,marginRight:a.marginRight,marginBottom:a.marginBottom,marginLeft:a.marginLeft,filter:zt(e.shadow,t)}}},Fw=[],Vw=[];Km.isTouchDevice?Vw=[tl]:Fw=[tl];var Ww={LISTENER:{start:$o,brush:$o,end:$o},DATA_FINDER:{start:Jo,brush:Jo,end:Jo},BEHAVIOUR:{start:[].concat(_toConsumableArray(Fw),[Ko]),brush:[function(){this.chart.brushing=!0}].concat(_toConsumableArray(Vw)),end:[function(e){e.instance.reset()},function(e,t,n){var r=this.behaviours,a=this.chart,i=e.instance,o=a.systemConf.chart.brush,l=t.point,s=a.scroll&&a.scroll.settings.smooth;if(n){if(r.PLOT_ZOOM){var c=jo(n,i.options.type),u=r.PLOT_ZOOM.instance,d=u.getTransform();u.zoomToBounds(c.map(function(e){return d.invert(e)}))}else s||function(e,t,n){pe(e,function(e,r){pe(e,function(e,a){if(e.domain){var i=la(n,r,a),o=r+"["+a+"]",l=Rm(t,o),s=be(e.domain);Z(l)||jm(t,o,l={}),e.dataType===ox?l.categories=s:(l.minRange=s[0],l.maxRange=s[1]),i.domain=e.domain||i.baseScale.domain()}})})}(l,o,a),Nx.FILTER_CHART(l,a);i.updateExtent([[0,0],[a.plotarea.width,a.plotarea.height]])}},Io,function(e){(function(e,t){function n(){(function(){var e=this.chart,t=e.systemConf.chart.brush,n=this.behaviours,r=n.PLOT_BRUSH,a=n.PLOT_ZOOM,i=void 0;t.x=t.y=null,tl.call(this),a?a.instance.reset():e.scroll&&e.scroll.visible?(e.scroll.visiblePointCount=null,e.scroll.brushInstance.setSelection(e.scroll.brushInstance.getRange())):(i=Jo.apply(this,[r,null,null,!0]),Nx.FILTER_CHART(i,e)),this.brushResetButton.hide(),r.instance.updateExtent([[0,0],[e.plotarea.width,e.plotarea.height]]),e.positionEventTrackerElement()}).call(t,i)}if(t.brushResetButton)return t.brushResetButton;var r=e.systemConf.chart.brush.resetButton,a=Nw(r,e,Z(t.behaviours.PLOT_ZOOM)),i=t.brushResetButton=new Bw(a.label,a.button,e.staticPaneSVG.select(".eventgroup"));i.group.classed("zmbtn",!0),rl(e);var o={click:n,tap:n};return Mr(i.group,o,o),i})(this.chart,this).show()},al]},LISTENER_TYPES:Rg(["start","brush","end"]),SUPPORTED:function(e){return e.isAxisCategory&&!e.isPolarAxisCategory},UPDATE:function(){rl(this.eventManager.chart)}};km.setComponent("_chartBrushHandlers",Ww),et.brush=function(e){return{enabled:!1,type:"x",pan:!0,snap:!1,selectionArea:{fillColor:"#3a8aea",fillOpacity:.2,strokeColor:"#3a8aea",dashStyle:"",strokeWidth:.8},resetButton:{fillColor:"#3c3c3c",label:{marginTop:6,marginRight:10,marginBottom:6,marginLeft:10,fontSize:14,fontColor:"white",fontWeight:500},border:{show:!0,size:1,radius:2,color:"transparent"}}}},pe({scroll:function(){var e=this,t=0;this._track.datum({type:"selection"}).on("mousedown touchstart",function(){il.call(this,e)}),e.addBehaviourHook("brush.scroll",function(){t=e.getSelection()}),e.addBehaviourHook("end.scroll",function(n){n.sourceEvent&&t[0]===t[1]&&ol(t,e)})},reposition:function(){var e=this,t=void 0;e.addBehaviourHook("brush.reposition",function(){return t=e.getSelection()}),e.addBehaviourHook("end.reposition",function(n,r){n.sourceEvent&&(r||il.call(e.parent_group.node(),e,t))})},resizeToMouse:function(){var e=this,t=e.getSelection(),n=e.options.type;e.addBehaviourHook("brush.resizeToMouse",function(){t=e.getSelection()}),e.addBehaviourHook("end.resizeToMouse",function(r,a){if(r.sourceEvent)if(!a&&te(t)){var i=Pr(e.parent_group.node())["x"===n?0:1],o=t.indexOf(function(e,t){var n,r;return e.some(function(e){var a=Math.abs(t-e);return r<a||(n=e,void(r=a))}),n}(t,i));t[o]=i,e.setSelection(t)}else ol(t,e)})},slider:function(){function e(){var e=d3.mouse(t.parent_group.node()),n=_slicedToArray(e,1)[0];t.setSelection([0,n])}var t=this,n=t.getSelection();t.options.type,this._selection.datum({type:"none"}),this._track.datum({type:"none"}),this._track.on("click touchstart",e),this._selection.on("click touchstart",e),t.addBehaviourHook("start.slider",function(e){t.customHandles&&fg(t.customHandles.node()).remove()}),t.addBehaviourHook("brush.slider",function(e){var r=_slicedToArray(e.selection,2),a=r[0],i=r[1];n=[0,i],0<a&&t.setSelection(n)}),t.addBehaviourHook("end.slider",function(e){return e.sourceEvent&&ol(n,t)})}},function(e,t){return Pw.addBehaviour(t,e)}),km.setComponent("_getPlotBrushArguments",function(e){var t=e.systemConf.chart.brush,n=e.systemConf.chart.zoom,r=[[0,0],[e.plotarea.width,e.plotarea.height]],a=km.getComponent("BrushD3Options"),i=e.isGeoMap?"xy":ka(t.type,e.axes.rotated),o=void 0;return!0===t.pan&&n.enabled&&(o="shiftKey"),new a({type:i,extent:r,element:e.eventHandler.trackerGroup,metaKey:o,multitouch:t.multitouch,styles:{selection:{fillColor:"transparent",strokeColor:"transparent"}}})});var Yw={LISTENER:{start:ll,end:ll},DATA_FINDER:{},BEHAVIOUR:{start:Ko,end:function(e,t,n){var r=this.behaviours;if(n&&r.PLOT_ZOOM){var a=r.PLOT_ZOOM.instance,i=a.getTransform();e.instance.reset(),a.zoomToBounds(n.map(function(e){return i.invert(e)}))}}},LISTENER_TYPES:Rg(["start","brush","end"]),SUPPORTED:function(e){return e.isGeoMap}};km.setComponent("_mapBrushHandlers",Yw),et.axes=function(e){return{xaxisLevels:{},yaxisLevels:{},xaxis:{splitLeaves:!1,uniformLeafScale:!0,show:!0,label:{show:!0,text:"Xaxis",fontSize:e.fontL2Size.l4,marginTop:5,marginRight:5,marginBottom:5,marginLeft:5},grid:{show:!0,color:"transparent",strokeWidth:null},minorGrid:{show:!1,color:"#ececec"},subtickmark:{show:!1,color:"#ececec",size:3,count:0},ticklabel:{textOverflow:"ellipsis",fontSize:e.fontL2Size.l5},tickmark:{strokeWidth:null,color:"#ececec",size:3},axisline:{show:!0,color:"#ececec",strokeWidth:null,style:"solid"},baseline:{show:!1,value:10,color:"black"},threshold:{line:{show:!1,values:[],label:{text:["Description comes here"],fontSize:e.fontL2Size.l5},marker:{enabled:!0,hoveroptions:{innerStrokeOpacity:1,outerFillColor:"transparent",outerStrokeWidth:2}}},coloroverlay:{show:!1,values:[],overlayRange:"below"},range:{show:!1,values:[],label:{text:["Description comes here"],fontSize:e.fontL2Size.l5}}}},yaxis:[{show:!0,label:{show:!0,text:"Yaxis",fontSize:e.fontL2Size.l4,marginTop:5,marginRight:5,marginBottom:5,marginLeft:5},grid:{show:!0,color:"#ececec"},minorGrid:{show:!1,color:"#ececec"},ticklabel:{textOverflow:"ellipsis",fontSize:e.fontL2Size.l5},tickmark:{color:"#ececec",size:3},subtickmark:{color:"#ececec",size:5,count:0},axisline:{show:!0,color:"#ececec",strokeWidth:null,style:"solid"},baseline:{show:!1,value:0,color:"grey",strokeWidth:null},threshold:{line:{show:!1,values:[],label:{text:["Description comes here"],fontSize:e.fontL2Size.l5},marker:{enabled:!0,hoveroptions:{innerStrokeOpacity:1,outerFillColor:"transparent",outerStrokeWidth:2}}},coloroverlay:{show:!1,values:[],overlayRange:"below"},range:{show:!1,values:[],label:{text:["Description comes here"],fontSize:e.fontL2Size.l5}}}}]}};var Uw={};Uw.getAvailableBound=function(e,t){var n=e.width,r=e.height,a=Qy(n/2,Ie(t.outerPadding,n/2,0)),i=Qy(r/2,Ie(t.outerPadding,r/2,0));return{x:a,y:i,width:n-2*a,height:r-2*i}},Uw.updatePlotareaByBandWidth=function(e,t){var n,r=e.dataObject;if((r.noofBarEnabledSeries||r.isCombinationalChart)&&r.allChartTypes.some(function(t){var r=Gt.helpers.getChartType(t,"string");if(Zn(t))return n=e.systemConf.chart.plot.plotoptions[r],!0}),n&&n.strictBandWidth){var a=r.getCategories("x").length,i=Hm(n.padding,.2),o=n.outerPadding;o=Z(o)?o:.2,o=Zv.getOuterPadding(u?[0,t.width]:[t.height,0],a,i,o);var l=n.levelMarker,s=n.targetMarker||{},c=e.plotarea,u=e.axes.rotated,d=(u?t.height:t.width)/(a-i+2*o)*(1-i),h=[],f=U(l.bandWidth,d),p=U(l.maxBandWidth,d),g=Qy(f,p,d);l.enabled&&h.push(g),s.enabled&&h.push(Z(s.size)?Qy(10*s.size,d):0);var v=U(n.bandWidth,g),y=U(n.maxBandWidth,v);h.push(Qy(v,y,d));var m=qy.apply(null,h);m=m/(1-i)*(a-i+2*o),u?(c.height=m+(c.height-t.height),c.top+=c.adjust=(t.height-m)/2):(c.width=m+(c.width-t.width),c.left+=c.adjust=(t.width-m)/2)}},Gv.ticks=function(e,t,n,r,a,i){function o(){var t=e.dataObject.hierarchical;if(t){var a="x"==n?"column":"row",i=t.pivotLayout.getRootNodeList(a),o=i.getCount(),s=i.getLeavesCount();return"x"==n&&l()&&s-1<r||"y"==n&&l()&&o&&s-1<r}}function l(){var t=e.axes;return"x"==n&&1<t.x.count||h.categoryHierarchy&&"y"==n&&1<t.y.count}function s(e,t,n){return n.customTickInfo.userRawTicks[Z(t)?t:e.index]}var c,u,d={},h=e.dataObject,f=e.systemConf,p=e.svg,g=e.canvasarea["bottom"==a||"top"==a?"height":"width"];d.isHierarchy=l,d.isHierarchialLevelType=o;var v=e.dataset.getDataType(n,r),y=e.axes.rotated,m=t.label||{},b=t.ticklabel||{},x=t.tickmark||{},w=parseFloat(zm.getVal(Y([b,f.chart,f.canvas,Qm],"fontSize"))),C=zm.getVal(Y([b,f.chart,f.canvas,Qm],"fontFamily")),k=null!=b&&null!=b.rotation&&"auto"!=b.rotation?b.rotation:0;l()&&(k=0),k=360<(k=(k=null==k||""==k?0:parseFloat(k))<0?360-Ky(k):k)?Ky(k)%360:k;var _,S,O,A,P=!1===m.show||!Z(m.text)||""===m.text||!jt(e,n+"axislabel",g)||l()&&!tn(n,r,e)||rn(e)&&h.isPolarAxisCategory&&"y"==n&&!h.hierarchical.pivotLayout.getRootNodeList("row").branches.length;_=P?S=O=A=0:(A=Hm(m.marginTop,5),O=Hm(m.marginBottom,5),S=Hm(m.marginLeft,5),Hm(m.marginRight,5));var T=ia(b),E=e.systemConf.metadata,L=e.dataset.getColumnIdx(n,r),M=E.columns[L],z=M[M.datatype],I=h.hierarchical,D="y"==n&&!I&&1<E.axes.y[r].length,R=z;R=D&&"y"==n?ra(r,e):z,this.preCalcAxisLen=0;var j,H=Hm(x.size,6);if("y"==n&&I&&I.categoryTree&&$t(n,r,e)){var B={label:{text:M.columnname}};j=Im(t,B,!0)}return d.preCalcApproxAxisLength=function(i){var o=null;"x"===n&&0===r&&(o=e.viewPortExtent);var l=la(e,n,r),s={axisRotated:y,axisOrder:r,chart:e,orient:a};l.Ticks||(l.Ticks=new Gv.Ticks(n,t,i,s)),this.tickValueObj=d.getTickValues(i.width,i.height,o,!0,null,l.Ticks,i);var c=n+"-axis-"+r,u=mt(e.svg.selectAll("g."+n+"-axis"),"g",[t],".","class",c);mt(u,"g",[t],".","class","axisgroup").selectAll("line.majorTicks").style("display","");var h=this.tickValueObj.axisgroup,p=h.width,g=h.height,v=b.maxWidth,m=b.maxHeight;"left"!==a&&"right"!==a||!Z(b.width)?Z(b.height)&&(g=Ie(Gw(b.height,m)||Gv.ticks.maxTickSizeRatio_Vert,i.height)):p=Ie(Gw(b.width,v)||Gv.ticks.maxTickSizeRatio_Hori,i.width),h=this.preCalcTickLen={x:h.left,y:h.top,width:p,height:g};var x="x"===n&&!y,w={systemConf:f,bound:h,horizontal:x,vertical:!x,axisOrder:r,plotRect:i,hide:P,tickObj:this.tickValueObj,type:n,chartObj:e},C=0,k=j||t;if(l.axisLabel&&l.axisLabel.order==r){var E=nn(n,r,a,e,i);l.axisLabel.show=!P,l.axisLabel.transformLabel(h,E,a)}else l.axisLabel=new Gv.AxisLabel(k,w,a,u);if(P)this.preCalcAxisLen="bottom"===a||"top"==a?h.height+T.bottom:h.width+T.left;else switch(C=l.axisLabel.getBBox().height,a){case"left":var L=this.tickValueObj.inlineToPlot?0:this.tickValueObj.isInline?h.width:h.width+T.left;this.preCalcAxisLen=L+_+C+S;break;case"right":L=this.tickValueObj.inlineToPlot?0:this.tickValueObj.isInline?h.width:h.width+T.right,this.preCalcAxisLen=L+S+C+_;break;case"bottom":var M=this.tickValueObj.inlineToPlot?0:this.tickValueObj.isInline?h.height:h.height+T.bottom;this.preCalcAxisLen=M+O+C+A;break;case"top":M=this.tickValueObj.inlineToPlot?0:this.tickValueObj.isInline?h.height:h.height+T.top,this.preCalcAxisLen=M+A+C+O}return this.preCalcAxisLen},d.getTickValues=function(o,l,d,h,g,m,x){var _={},S={axisRotated:y,axisOrder:r,chart:e,orient:a,extent:d,maxTickSize:this.tickValueObj?this.tickValueObj.maxTickSize:null},O=m.getTicks(i,g,S),A=Z(b.showAs);k=isNaN(O.rotation)?k:O.rotation;var P=O.tickMargin,E=oa(a,T,ca(t,n,e)),L=gl(a,k,0,null,H,E,this.tickValueObj),M="left"===a||"right"===a?"x":"y",z="left"===a||"right"===a?1:2;P[M]+=this.tickValueObj&&this.tickValueObj.isInline&&!this.tickValueObj.inlineToPlot?L.rotate[z]:0,P.dy=L.dy,L.rotate[z]=P[M],v=e.dataset.getDataType(n,r);var I=Hm(x,i),D=p.append("g").attr("class","dummy"),j="right"==a?I.left+I.width:I.left,B="bottom"==a?I.top+I.height:I.top;D.attr("transform","translate("+j+","+B+")");var N=D.append("g").attr("class","tick");return function(e,t,n,r,a,i){var o=mt(e,"text",[1],".","class","dummyText");return o.attrs({x:n.x||0,y:n.y||0,dy:n.dy||0}).attr("transform","rotate("+r+" "+n.x+" "+n.y+")"),a?t=s(i.longestTickValue,null,i):o.text(t),At(o,t,null,a),kt(o,[b,f.chart,f.canvas,Qm]),o}(N,O.longestTickValue.formattedVal,P,k,A,O).call(function(n){_=function(n,i,o,l,d,h,f,p){function g(e,t){var n,r;return Z(S)&&(n=S[t]),r=dt(e,w,C,n),f?r.width*r.height:"left"==a||"right"==a?r.width:r.width*r.height}var y,m=i,x=v===lx&&cl(R),_=d.formatterTickValues;c=d.rawTickValues,u=d.minorTickValues;var S,O,A=d.longestTickValue,P=d.maxTickSize,T=d.tickValueIndices,E=d.scale;Z(d.customTickInfo)&&d.customTickInfo.length&&(S=d.customTickInfo.styles,O=d.customTickInfo.userRawTicks);var L=he(_);if(!h){o.append("line").attr("class","domain").attrs({x1:0,y1:0,x2:"bottom"==a||"top"==a?n.width:1e-4,y2:"bottom"==a||"top"==a?1e-4:n.height}).style("stroke","black");var M,z=b.textOverflow==fm?"":b.textOverflow,I=!1,D=-1,j=A.actualVal,H=A.formattedVal;f&&(H=s(d.longestTickValue,null,d)),At(i,H,null,f),function(e,t,n){e.attrs({dy:"zigzag"==n.mode&&t.dy1||t.dy,transform:"rotate("+t.rotate[0]+" "+t.rotate[1]+" "+t.rotate[2]+")"}).styles({"text-anchor":t.textAnchor})}(i,p,d);var B,N,F,V=(E(j)||0)+(E.bandwidth&&!E.discreteWidth?E.bandwidth()/2:0);for(V="bottom"==a||"top"==a?V+",0":"0,"+V,l.attr("transform","translate("+V+")"),ul(i,a,{svg:e.svg,canvasarea:e.canvasarea,plotarea:n,chartarea:e.chartarea,legendarea:e.legendarea,actChartObj:e},k,z,E,o,null,"ticklabel",b,r),N=B=f?H:Tt(i);"ordinalNonLinear"!=v&&!I&&D<c.length;){M=L[D+=1],V=(E(j)||0)+(null==E.bandwidth?0:E.bandwidth()/2),V="bottom"==a||"top"==a?V+",0":"0,"+V,l.attr("transform","translate("+V+")"),ul(i,a,{svg:e.svg,canvasarea:e.canvasarea,plotarea:n,chartarea:e.chartarea,legendarea:e.legendarea,actChartObj:e},k,z,E,o,null,"ticklabel",b,r),B=Tt(i),g(B,M)>g(N,M)&&(H=B,f&&(H=s(null,M,d)),N=H),At(i,N,null,f);var W=!c.length||D===c.length-1||1===c.length;F=W?null:x?_[M]:_[M]||"",!W&&g(B,M)<g(F,M)?(j=c[M],H=B=F,f&&(H=s(null,M,d)),At(i,H,null,f)):I=!0}}var Y=m.node().getBoundingClientRect(),U=o.node().getBoundingClientRect();return y={ticks:c,minorTickValues:u,rotation:k,longTickSize:Y,longtick:A,axisgroup:U,customTicks:O,mode:d.mode,isInline:d.isInline,inlineToPlot:d.inlineToPlot,maxTickSize:P,showGrid:t.grid.show&&t.grid.color!=pm},T&&(y.tickValueIndices=T),y}(I,n,D,N,O,Z(g),A,L)}),D.remove(),_},d.getActualTicklabel=function(){var t=this.tickValueObj,n=t.ticks;return this.isHierarchy()&&!this.isHierarchialLevelType()&&t.tickValueIndices?function(e){var r=t.tickValueIndices.indexOf(e);return-1!=r?n[r]:null}:e.dataObject.isWaterfallEnabled&&t.tickValueIndices?function(e){return n[e]}:function(e){return n[e]}},d.getTicksforAxisComp=function(){var t=e.dataset.getDataType(n,r);return l()&&e.dataObject.hierarchical.categoryTree&&(t==ox&&"x"==n&&!e.dataObject.hierarchical.pivotLayout.columns.splitColumnLeaves||"ordinalNonLinear"==t)||o()&&e.dataObject.hierarchical.groupByTime?null:e.dataObject.isWaterfallEnabled&&"x"==n?this.tickValueObj.tickValueIndices||null:this.tickValueObj.ticks},d},Gv.ticks.maxTickSizeRatio_Vert="50%",Gv.ticks.maxTickSizeRatio_Hori="50%",Gv.constructTickObj=function(e,t,n,r,a,i){var o,l,s=e.systemConf;o="left"==r&&e.axes.rotated||"bottom"==r&&!e.axes.rotated?"x":"y";var c,u,d,h,f,p=e.axes[o].count,g=e.dataObject.hierarchical,v=g&&g.categoryTree;if(g){var y="x"==o?"column":"row",m=g.pivotLayout.getRootNodeList(y);u=m.getCount(),c=m.getClustersCount(),d=m.getLeavesCount(),h=m.hasMultiCluster()}for(var b=0;b<p;b++){var x,w,C=s.chart.axes.yaxis;"y"==o&&v&&(x=Jt(o,b,e),w=Qt(b,c));var k=Hm(w,b);if(0<b&&"y"==o&&(!g||g&&x)){l=sa(e,"y",b,!(i&&C[k].merged));var _=null!=C[k]&&""!==C[k]?C[k]:{};l.interval=_.interval,l.tickCount=_.tickCount,l.minRange=_.minRange,l.maxRange=_.maxRange,l.categories=_.categories,C[k]=l,C[k].merged=!0}var S="bottom"==(r=(l=sa(e,o,b,(g||"x"==o&&0<b)&&$t(o,b,e)&&!i)).orient||("x"==o?e.axes.rotated?"left":"bottom":e.axes.rotated?Z(g)?"bottom":0==b?"bottom":"top":Z(g)?"left":0==b?"left":"right"))||"top"==r?n:t;if(ha(l,o,b,e)&&jt(e,o+"axis",S)){var O=la(e,o,b);"y"!=o||O||(O={}),"x"!=o||O||(O=0<b?{}:O);var A=ca(l,o,e),P=0,T=!0===Rm(l,"label.show");O.ticks=Gv.ticks(e,l,o,b,r,a),A&&"x"==o&&!T||(P=O.ticks.preCalcApproxAxisLength(a));var E=la(e,"y",b),L=e.dataObject.hierarchical&&(h||u),M=L&&b<=d-2;if(L&&L&&b<=d-1?(f=0==b?P:qy(f,P),e.axes[o].maxLeafAxisArea=f):f=P,!("y"==o&&E.disabled||M)){var z=e.plotarea;"left"==r?(a.left+=f,a.width=a.width-f,z.left=a.left,z.width=a.width):"right"==r?(a.width=a.width-f,z.width=a.width):"bottom"==r?(z.height=z.height-f,z.bottom+=f,a.height=z.height,a.bottom+=z.bottom):"top"==r&&(z.height=z.height-f,z.top+=f,a.height=z.height,a.top+=z.top)}}else{var I="y"==o?e.axes.y.groups[b]:e.axes.x;I&&(I.axisLabel=I.Ticks=null)}}"y"==o&&e.scroll&&e.scroll.initialize()};var Gw=function(e,t){return Z(e)&&Z(e)?t<e?t:e:e||t};km.setComponent("logUtils.logBase",vl),km.setComponent("logUtils.logArgument",yl),km.setComponent("logUtils.fixFloatingPoint",ml),km.setComponent("logUtils.getMagnitude",bl);var Xw=1.5;km.setComponent("logTicks.getLogTickValues",wl),km.setComponent("logTicks.getMinorTickValues",Cl),km.setComponent("logTicks.getLogTickExponents",kl),km.setComponent("logTicks.getIntermediateLogTickExponents",_l),km.setComponent("logTicks.getTickValuesByUserTickCount",Sl),km.setComponent("logTicks.getNiceLinearTicks",Ol),Il.prototype={add:function(){var e=this,t=Aa({},e.config.text,"ordinal",this.chart,"axis"),n=nn(this.axisType,this.order,this.orient,this.chart,this.plotRect);e.group=mt(e.parentNode,"g",[1],".","class","axislabelgroup"),e.element=mt(e.group,"text",[1],".","class","axislabel"),e.text=e.config.text,e.element.text(t),e.rect=null,e.transformLabel(vm,n)},remove:function(){this.rect=null,this.element=mt(this.parentNode,"text",[],".","class","axislabel")},setStyles:function(){var e=this.systemConfig;kt(this.element,[this.config,e.chart,e.canvas,Qm])},getBBox:function(){if(!Z(this.rect)){if(!this.element.isD3Selection||this.element.empty()||this.parentNode.style("display")===fm)return function(){var e={};return e.x=e.y=e.width=e.height=0,e}();this.rect=M(this.element)}return this.rect},transformLabel:function(e,t,n){function r(e,t,n,r,i){r=Hm(r,0),i=Hm(i,0),a.element.attrs({x:t,y:n,transform:function(e,t,n){return"rotate("+e+" "+(t||0)+" "+(n||0)+")"}(e,r,i),"text-anchor":s})}var a=this;if(!0!==a.show)return a.remove();if(a.element.empty()&&!0===a.show||a.text!==a.config.text)return a.add();a.setStyles();var i,o,l=a.systemConfig,s="middle",c=Hm(n,a.orient),u={top:0,right:90,bottom:0,left:270}[c],d=Hm(e,this.axisRect),h=Hm(t,this.plotRect),f=a.axis.ticklabel,p=a.config,g=ia(f),v=ia(p),y=parseFloat(zm.getVal(Y([a.config,l.chart,l.canvas,Qm],"fontSize")));a.fontSize!==y?a.rect=null:a.fontSize=y,a.element.attr("dy","-0.25em");var m=this.tickObj.isInline,b=this.tickObj.inlineToPlot,x=m&&!b?0:g[c];switch(c){case"top":var w=b?0:d.height+x;r(u,i=h.width/2,-(o=w+v.bottom));break;case"right":w=b?0:d.width+x,r(u,i=h.height/2,-(o=w+v.left));break;case"bottom":w=b?0:d.height+x,i=h.width/2,o=w+v.top,a.element.attr("dy","0.91em"),r(u,i,o);break;case"left":r(u,-(i=(w=b?0:d.width+x)+v.right),o=h.height/2,-i,o)}}},Dl.prototype={getScale:function(){var e=this.helpers.chart,t=this.helpers,n=e.dataObject.hierarchical,r=e.dataObject.categoryHierarchy&&"y"==this.type?0:t.axisOrder,a=Zv.getScale(e,e.dataObject,this.plotRect,t.orient,r,e.dataset,this.type,this.extent);if(e.dataObject.categoryHierarchy){var i=n.pivotLayout.getRootNodeList("row"),o=n.pivotLayout.getRootNodeList("column"),l=i.getCount(),s=i.hasMultiCluster(),c=i.leafSize,u=Qt(t.axisOrder||0,null,"y",e),d=e.systemConf.chart.axes.yaxis[u],h=e.systemConf.chart.axes.xaxis.splitLeaves;if(s&&"y"==this.type){if(l){var f=e.axes.y.branches[0].scale,p=[f(t.axisOrder)+f.discreteWidth(t.axisOrder),f(t.axisOrder)];return(e.axes.rotated&&!d.reversed||!e.axes.rotated&&d.reversed)&&(p=p.reverse()),a.copy().range(p)}return p=[t.axisOrder*c+c,t.axisOrder*c],e.axes.rotated&&(p=p.reverse()),a.copy().range(p)}if("x"==this.type&&h)return p=[t.axisOrder*o.leafSize,t.axisOrder*o.leafSize+o.leafSize],a.copy().range(p)}return a},getTicks:function(e,t,n){function r(e,t,n){var r,a,i=0,o=gr(S.chart,pe,_.plotRect,k);if("x"===n&&(i=o*we*2),r=o-i,a=t||mt,!!e){if("height"===pe&&(90===e||270===e))return r/(a.width+Ky(ee.top)+Ky(ee.bottom));var l=e%90;if("height"===pe?0<l:0<l||90===e||270===e)return r/(Ll(e,a.width,a.height,S.orient).tickSpacing+Ky(ee.left)+Ky(ee.right))}return r/("height"===pe?a.height+Ky(ee.top)+Ky(ee.bottom):a.width+Ky(ee.left)+Ky(ee.right))}function a(e,t,n){var a,i=Z(t)?t:me,o=O.dataObject.categoryHierarchy;return"auto"===i?(a=r(me=0,e,L),n=!Et&&a<D&&("width"===pe&&(a=r(me=!fe&&(o&&"x"==L&&!ye&&function(e,t){var n="x"==e?"column":"row";return t.dataObject.hierarchical.pivotLayout.getRootNodeList(n).getCount()}(L,S.chart)||!o&&"x"==L&&1<S.chart.axes.x.count)?90:he,e,null)),!0)):(a=r(i,e,L),me=i),{mode:"rotate",rotation:me,maxTickCount:a,recalculate:n}}function i(e){return{mode:"zigzag",rotation:0,maxTickCount:2*r(0,e,L)}}function o(){if("auto"==ce){var e=Tl(pt=pt.map(function(e,t){return e.split(" ")}),j,oe,le,Oe.styles);Z(ke)||(ke=e.formattedVal);var t=dt(ke,oe,le,e.style,!0)}return{mode:"wrapOnSpace",maxTickCount:r(me,t,L),rotation:me}}var l,s,c,u,d,h,f,p,g,v,y,m,b,x,w,C,k,_=this,S=Hm(n,_.helpers),O=S.chart,A=O.systemConf,P=O.dataObject,T=_.plotRect=Hm(e,_.plotRect),E=_.axis,L=_.type,M=E.interval,z=E.tickCount,I=E.interval,D=Hm(t,0),R=n.extent,j=R,H=S.axisOrder,N=S.axisRotated,F=O.dataset.getDataType(L,H),V=O.systemConf.metadata,W=O.dataset.getColumnIdx(L,H),U=V.columns[W],G=V.columns[W].datatype,X=P.hierarchical,q="y"==L&&!X&&1<V.axes.y[H].length,Q=V.columns[W],K=Hm(q&&"y"==L?ra(H,O):Q[G],{}),$=K.subfunction,J="y"===L&&O.dataObject.isPercentChart?Ma:Aa,ee=ia(_.config),ne=ca(_.axis,L,O),re=!!ne&&function(e,t){var n=A.chart.axes.yaxis[0].reversed;if("x"==e&&("bottom"==t&&!n||"left"==t&&!n||"top"==t&&n||"right"==t&&n))return!0}(L,S.orient),ae=U.scaleType===pw,ie=function(e,t,n,r,a,i,o,l){var s=Hm(n.size,6),c=oa(e,t,o),u="left"===e||"right"===e?"x":"y",d="left"===e||"right"===e?"y":"x",h="top"===e||"left"===e?-1:1,f=(h=i?-h:h,{});return l&&(0<r.count||Z(r.interval))&&(s=qy(s,Hm(r.size,3))),f[d]=0,f[u]=h*(c+s),f}(S.orient,ee,_.axis.tickmark,_.axis.subtickmark,_.axis.ticklabel,re,ne,ae),oe=parseFloat(zm.getVal(Y([_.config,A.chart,A.canvas,Qm],"fontSize"))),le=zm.getVal(Y([_.config,A.chart,A.canvas,Qm],"fontFamily")),se=function(e){var t,n,r=e.alignMode,a=e.alignMode&&-1!=e.alignMode.indexOf("rotate"),i=Z(e.rotation),o=0,l=45;if(a){var s=/\(([^)]+)\)/.exec(r);o=s?parseInt(s[1]):"auto"}else i&&!Z(e.alignMode)?(o="auto"==e.rotation?e.rotation:parseInt(e.rotation),r="rotate",a=!0):Array.isArray(r)&&r.length?(t=!0,r.some(function(e){if(-1!=e.indexOf("rotate")){r="rotate",a=!0;var t=/\(([^)]+)\)/.exec(e);return o="auto",l=(n=t)?parseInt(t[1]):l,!0}})):Z(e.alignMode)||(r="rotate(0)",a=!0);return{alignmentMode:r,isRotateMode:a,rotation:o,hasPriorityOrder:t,hasDefinedAutoRotation:n,autoRotation:l}}(_.config),ce=se.alignmentMode,ue=se.isRotateMode,de=se.rotation,he=se.autoRotation,fe=se.hasDefinedAutoRotation,pe=function(e,t){return"x"==e&&t||"y"==e&&!t}(L,N)?"height":"width",ge=(nt=O.dataObject.hierarchical)&&nt.categoryTree,ve=function(e,t,n,r){var a;return e.dataObject.categoryHierarchy&&"x"==t&&(a=$t(t,n,e)),"auto"==r&&!a}(O,this.type,H,de),ye=ge?$t(L,H,O):"x"==L&&0<H,me=ye?0:de,be=O.chartTypes[0].name,xe=O.systemConf.chart.plot.plotoptions[be],we=P.isAxisCategory&&xe.outerPadding||0,Ce=P.isAxisCategory?xe.padding||.2:0,ke=null,_e=gr(S.chart,pe,T),Se="x"===L?_e*we*2:0,Oe={},Ae=n.maxTickSize||this.maxSize(),Pe=te(K.groupby)&&0<K.groupby.length||"AUTO"===K.groupby&&"YEAR"!==$,Te=la(O,L,H),Ee=Pe?H:null,Le=Rm(O,"behaviouralEvents.eventManager.behaviours")||{},Me=Le.PLOT_ZOOM||Le.CHART_SCROLL&&O.scroll&&O.scroll.settings.smooth&&"x"===L;if(Pe&&"AUTO"===K.groupby&&(K.AUTO_GROUP_ORDER=Gt.HierarchicalTimeDataAdapter.getAutoGroupOrder($).reverse()),Le.PLOT_ZOOM||Le.PLOT_BRUSH||Le.CHART_SCROLL){y=Te.scale,R="x"===L&&Le.CHART_SCROLL?O.viewPortExtent||Te.domain||R:Te.domain||R,j=Me?null:R;var ze=y.range();if(_e=Ky(ze[1]-ze[0]),Se="x"===L?_e*we*2:0,"time"===F&&te(R)&&y){R[0]instanceof Date&&(R=R.map(function(e){return e.getTime()}));var Ie=Ky(R[1]-R[0])*y.outerPadding;R[0]=R[0]+Ie,R[1]=R[1]-Ie}}switch(ve||(me<0?me=360-Ky(me):360<=me&&(me=Ky(me)%360)),he&&(he<0?he=360-Ky(he):360<he&&(he=Ky(he)%360)),nt&&(m=nt.pivotLayout.getRootNodeList("row"),b=nt.pivotLayout.getRootNodeList("column"),x=m.getLeavesCount(),w=m.getClustersCount(),C=b.splitColumnLeaves),F){case"numeric":"y"==L&&ge?m.hasMultiCluster()&&S.axisOrder:S.axisOrder;var De,je,He="y"==L&&ge?m.hasMultiCluster()&&S.axisOrder<x?S.axisOrder%w:0:S.axisOrder;if(Te.logDomain=null,s=Z(R)?R:"x"===L?P.getMinMaxX():P.getMinMaxY(He,Ey,O.datalabels.hasFixedPosition),"y"===L&&O.datalabels.hasFixedPosition){var Be=P.rangeCorrections.datalabels,Ne=L+S.axisOrder;if(B(Be[Ne])){var Fe=P.getEncode("y",S.axisOrder);Be[Ne]=gw.get("preCalculation")(L,Fe.seriesData,O)||0}De=Be[Ne]}else De=0;if("y"==L&&ge&&x){var Ve=[S.axisOrder*m.leafSize+m.leafSize,S.axisOrder*m.leafSize];k=je=Ky(Ve[1]-Ve[0])}"x"==L&&ge&&C&&(Ve=[S.axisOrder*b.leafSize,S.axisOrder*b.leafSize+b.leafSize],k=je=Ky(Ve[1]-Ve[0])),l="height"===pe?(f=(je||T.height)-De,D=D||Gy(f/40),[f,0]):(f=(je||T.width)-De,D=D||Gy(f/100),[0,f]),Z(z)&&(I=(s[1]-s[0])/z);var We=(s[1]-s[0])/M,Ye=Z(M)&&We<f,Ue=y||ro(O.dataset,L,H)().domain(s).range(l);if(ae){if(Ue.constant){var Ge=gg(s);0<Ge&&Ge<Hm(E.logBase,10)&&!1===E.allowNonPositiveTicks?Ue.constant(1e-4):Ue.constant(1)}var Xe,Ze="x"===L?P.getMinMaxX(0):P.getMinMaxY(He,0),qe=!Re(Ze),Qe=Ze.slice(0),Ke=!(P.isPercentChart||P.hasLevelMarker||P.isWaterfallEnabled),$e=null,Je=P.getEncode("y",He);0===Ze[0]&&0===Ze[1]&&(U.scaleType=null,s="x"===L?P.getMinMaxX(0):P.getMinMaxY(He,Ey,O.datalabels.hasFixedPosition),U.scaleType=pw),Je&&Qi(Je,O.dataObject,O)&&qe&&"y"===L&&!Z(E.minRange)&&($e=0,Qe.push(0),Qe=Fg(Qe));var et=xl(Qe,f,Ze,Ke,E,Ue.copy(),ee,{fontSize:oe,fontFamily:le},function(e){return Rl(e,J,K,O,G,"axis",Ee,ce,Ae,oe)},S.orient,de,$e,function(e){return Te.logDomain=Fg(e),Ml(e,_.config,O,L,S.axisOrder,S.orient)},O.datalabels.hasFixedPosition,s);j=et.tickValues,v=et.minorTickValues,Xe=et.logDomain,Te.logDomain=Xe}else j=Ye?function(e,t){var n=Xy((e[1]-e[0])/t),r=void 0;if(n){var a=Hl(e,n);if((r=Zy(e[0]/a)*a)-e[0]>t){var i=$y(10,Xy(nm(t)/om)),o=Xy((r-e[0])/i);r-=o*i}}else{var l=e[1]-e[0];i=$y(10,Xy(nm(l)/om)),r=e[0]-e[0]%i+i}return av(r,e[1],t)}(s,I):0<+z?jl(s,z):"integer"===$?Bl(s):Ue.ticks(D);j=Ml(j,_.config,O,L,S.axisOrder,S.orient),D=j.length;break;case"ordinalNonLinear":case"ordinal":var tt,nt,rt,at=oe;u=Z(nt=P.hierarchical)&&nt.categoryTree&&"x"==L&&!C&&0==H||P.isWaterfallEnabled,h=rt="auto"===A.chart.width||"auto"===A.chart.height;var it=null;if(P.isWaterfallEnabled&&Z(y)&&te(j)&&(it=j),Z(j)||(j=P.getCategories(L,S.axisOrder).slice(0)),u&&Z(nt)&&(j=b.getClusterNodes(0)),G===lx&&!Z($)){var ot=Na(j[j.length-1]-j[0]);$=K.subfunction=ot.subFunction}D=j.length,(p={}).width=p.height=oe,g=El(pe,p,ee,me,oe,S.orient),_e=C?b.leafSize:_e,k=C?b.leafSize:null,(tt=Gy((_e-Se)/g))<D&&"width"===pe&&(me||0<_.config.rotation)&&(g=Ll(he,oe,at,S.orient).tickSpacing+ee.left+ee.right),ye||h||(z<D?j=Al(j,z,null,u):Z(I)?j=Al(j,D,I,u):tt<D&&(j=Al(j,tt,null,u))),u&&(c=j.nodes||j,d=j.indices,j=j.ticks||P.getCategories(L,S.axisOrder,!0,it).slice(0)),D=j.length;break;case"time":var lt=cl(K);if(!lt){var st,ct,ut;s=Z(R)?R:"x"===L?P.getMinMaxX(0):P.getMinMaxY(S.axisOrder,0),st=new Date(s[0]),ct=new Date(s[1]),Z(Q[G])||(Q[G]=K),Z($)&&"AUTO"!==$||(ot=Na(ct-st),$=K.subfunction=ot.subFunction),(ut=new fi(K)).useUTC=!0===K.useUTC,p=dt(ke=fl(ke=ut.getMaxDate(K,Ee),ce,Ae.horizontal,Ae.vertical,oe),oe,le),g=El(pe,p,ee,me,oe,S.orient),D=(_e-Se)/g;var ht=ut.range(st,ct,Zy(D),$,I,O);j=Ml(ht.TICKS,_.config,O,L,S.axisOrder,S.orient),D=ht.TICKS.length;break}var ft=y||Zv.getScale(O,P,T,S.orient,S.axisOrder,O.dataset,L,R);j=ft.ticks(),pt=j.map(function(e){return ft.tickFormat()(e)}),D=j.length}if("ordinalNonLinear"===F){var pt=lt?pt:Rl(j,J,K,O,G,"axis",Ee,ce,Ae,oe);Z(_.config.showAs)&&(Oe=Pl(j,_.config,U,O,W,H),pt=Oe.tickValues,Oe.length=pt.length);var gt=Tl(pt,j,oe,le,Oe.styles);if(!O.dataObject.isAxisCategory){var vt="x"===L&&(N?"height":"width")||"y"===L&&(N?"width":"height"),yt="auto"===A.chart[vt];Z(ke)||(ke=gt.formattedVal);var mt=dt(ke,oe,le,gt.style,!0),bt=sl(_.config,O.chartarea);if(mt.width=Qy(mt.width,bt.horizontal),mt.height=Qy(mt.height,bt.vertical),yt&&_.recalculatePlotSize(S.chart,_e,mt,pe,D,ee,Ce,we,"x"),yt&&nt){var xt=nt.pivotLayout.getRootNodeList("row"),wt=xt.getCount(),Ct=xt.getLeavesCount(),kt=xt.leafSize;if(wt){var _t={width:0,height:0};_t[pe]=kt,_.recalculatePlotSize(O,_e,_t,pe,Ct,ee,Ce,we,"y")}}}return{rawTickValues:j,formatterTickValues:pt,longestTickValue:gt,scale:_.getScale(),longestTickDimension:dt(gt.formattedVal,oe,le),margin:ee,tickMargin:ie,rotation:me,customTickInfo:Oe,mode:ce,isInline:ne,inlineToPlot:re,maxTickSize:Ae}}var St,Ot,At,Pt,Tt=(Ue=y||_.getScale()).actualRange,Et=Tt&&Tt[0]===Tt[1];if(Et&&(j=[Ue.invert(Tt[0])],ae&&(j=j.map(function(e){return ml(e)}))),O.renderVisiblePointsOnly&&!u&&(St=j,Ot=Ky(Ue.origRange[1]-Ue.origRange[0]),At=Ue.bandwidth?Ue.bandwidth()/2:0,Pt=[-At,Ot-At],j=St.filter(function(e){var t=Ue(e);return null!==t&&Pt[0]<=t&&t<=Pt[1]})),D=j.length,pt=lt?pt:Rl(j,J,K,O,G,"axis",Ee,ce,Ae,oe),Z(_.config.showAs)&&(Oe=Pl(j,_.config,U,O,W,H),pt=Oe.tickValues,Oe.length=pt.length),gt=Tl(pt,j,oe,le,Oe.styles),Z(ke)||(ke=gt.formattedVal),mt=dt(ke,oe,le,gt.style,!0),bt=sl(_.config,O.chartarea),mt.width=Qy(mt.width,bt.horizontal),mt.height=Qy(mt.height,bt.vertical),rt&&_.recalculatePlotSize(S.chart,_e,mt,pe,D,ee,Ce,we,"x"),("auto"===A.chart.width||"auto"===A.chart.height)&&nt&&"y"==L){var Lt=nt.pivotLayout.getRootNodeList("row"),Mt=Lt.getCount(),zt=Mt?Lt.getDomainForBranch(0).length:0,It=Lt.getLeavesCount(),Dt=Lt.leafSize;if(Mt&&H==zt-1){var Rt={width:0,height:Dt};_.recalculatePlotSize(O,_e,Rt,pe,It,ee,Ce,we,"y")}}var jt=function(e){if("auto"===ce){var t=a(mt,0);if(t.maxTickCount<e){var n=F==ox?i(mt):a(mt,he,!0);if(n.maxTickCount<e){var l=a(mt,he,!0);return l.maxTickCount<e&&gt.hasWhiteSpace?o():l}return n}return t}return ue?a(mt):"zigzag"==ce?i(mt):"wrapOnSpace"==ce?o():"wrapAll"==ce?{mode:"wrapAll",maxTickCount:r(me,mt,L),rotation:me}:void 0}(D),Ht=jt.mode,Bt=jt.maxTickCount;if(me=jt.rotation,!Et&&(Bt<D||jt.recalculate))if(F===lx)if(lt){ft=y||Zv.getScale(O,P,T,S.orient,S.axisOrder,O.dataset,L,null);var Nt=Bt<D&&ue&&0===me;j=ft.ticks(Nt?.5*Bt:Bt),Bt<D&&!Nt&&(me=he),pt=j.map(function(e){return ft.tickFormat()(e)}),gt=Tl(pt,j,oe,le,Oe.styles)}else ht=ut.range(st,ct,Bt,$,I,O),j=Ml(ht.TICKS,_.config,O,L,S.axisOrder,S.orient),pt=Rl(j,J,K,O,G,"axis",Ee,ce,Ae,oe);else Bt<D&&(u?(d=(j=Al(c||j,Bt,null,u)).indices,j=j.ticks):(j=Al(j,Bt),_.config.showAs&&(Oe.styles=Al(Oe.styles,Bt),Oe.userRawTicks=Al(Oe.userRawTicks,Bt))),pt=Al(pt,Bt),gt=Tl(pt,j,oe,le,Oe.styles));if(G===lx&&Pe)if(Pe&&!Z(P.hierarchical))P.hierarchical=new Gt.HierarchicalTimeDataAdapter(O,j,K.groupby,F!==lx,U);else if(Pe){P.hierarchical.update(j);var Ft=P.hierarchical.setScaleForRange(O.axes.x.rangeScale);nt.pivotLayout.setRanges("column",Ft)}(Z(Oe.styles)||K&&K.format&&K.format.breakSpace)&&(gt=Tl(pt,j,oe,le,Oe.styles,!0));var Vt=dt(ke,oe,le,gt.style);return{rawTickValues:j,formatterTickValues:pt,longestTickValue:gt,scale:Ue,longestTickDimension:Vt,margin:ee,tickMargin:ie,rotation:me,mode:Ht,isInline:ne,inlineToPlot:re,tickValueIndices:d,customTickInfo:Oe,maxTickSize:Ae,minorTickValues:v}},recalculatePlotSize:function(e,t,n,r,a,i,o,l,s){var c,u=Rm(e.systemConf,"chart.scroll.categoryThickness")||n[r];t="height"===r?[c=(u+=i.top+i.bottom)*a,0]:[0,c=(u+=i.left+i.right)*a],c+="x"==s?$i(t,a,o,l,u):0,e.systemConf.chart[r]=c}},Gv.Ticks=Dl,Gv.AxisLabel=Il,Gv.Ticks.prototype.ticklabelFitModels=function(e,t){var n={},r=e.length;return n.zigzag={},n.rotate={},n.type=t<r?2*r<t?"zigzag":"rotate":"default",n},Gv.render=function(e,t,n,r){function a(t,n,r,a,i,o,l){var s=v.chart.plot.border,c=e.staticPaneSVG.selectAll("g.plotareaBorder-property"),u=null;if(Z(s)&&!0===s.show)e.drawPlotBorder();else{var d,h,f,p,g=n.axisline,y=0==g.show||null==g.color?pm:g.color,m=U(g.strokeWidth,1),b=g.style||"solid",x=ca(n,o,e)&&!a.tickObj.tickValueObj.inlineToPlot,w="left"==t||"right"==t?a.preCalcTickLen().width:a.preCalcTickLen().height,C=x?w:0,k=mt(c,"line",[1],".","class",t);if(0==i||0==ha(n,o,l,e)||r.style("display")==fm)return void k.style("stroke",pm);"bottom"==t?(d=-e.tickarea.left,h=e.plotarea.width+e.tickarea.right,f=e.plotarea.height+.5+C,p=e.plotarea.height+.5+C):"left"==t?(h=d=.5-C,f=0,p=e.plotarea.height+e.tickarea.bottom):"right"==t?(d=e.plotarea.width+.5+C,h=e.plotarea.width+.5+C,f=0,p=e.plotarea.height+e.tickarea.bottom):"top"==t&&(d=-e.tickarea.left,h=e.plotarea.width+e.tickarea.right,p=f=.5-C),k.styles({"stroke-width":m,stroke:y,"shape-rendering":"crispedges","stroke-dasharray":rt(b,m)}).attrs({x1:d,x2:h,y1:f,y2:p}),u={size:m,clr:y},c.node()["border-"+t]=u}r.selectAll("path.domain").style("stroke",pm)}function i(t,n,r){var a=t.orient,i=e.axes.rotated,o=e.dataObject.hierarchical,l=e.dataObject.categoryHierarchy&&o.hasRows();return a||(a="x"==n?0==r||o?i?"left":"bottom":i?"right":"top":0==r||l?i?"bottom":"left":i?"top":"right")}function o(t,n){var r=[];switch(t){case"left":r=e.axes.rotated?s("x",n):s("y",n);break;case"bottom":r=e.axes.rotated?s("y",n):s("x",n)}return r}function l(r,a,o){var l="left"==a?e.axes.rotated?"x":"y":e.axes.rotated?"y":"x";return function(r,a,o,l,s){var c,u,d=r.component,h=e.dataObject.hierarchical,g=h&&h.categoryTree,x=(!g||h.pivotLayout.getRootNodeList("row").hasMultiCluster(),v.chart.axes,sa(e,a,s,!1)),_="bottom"==(l=i(x,a,s))||"top"==l?n:t,O=!0===ha(x,a,s,e)&&jt(e,a+"axis",_),A=ia(x.ticklabel),P=oa(l,A,ca(x,a,e)),T=e.plotarea;if(g){var E=h.pivotLayout.getRootNodeList("row").getLeavesCount();c=g?h.hasRows():null,u=c&&s==E-1}var L=la(e,"y",s);if("y"!==a||O&&!L.disabled||C++,d&&!m[l]){var M="y"===a&&L.disabled;d.plotBorderDrawn=!(!O||M)||d.plotBorderDrawn,m[l]=d.plotBorderDrawn}if(r.index=s,r.reversed=x.reversed,r.baseScale=Zv.getScale(e,y,T,l,s,e.dataset,a,Ey,Ey,!1),r.scale.originalDomain=r.baseScale.originalDomain,function(e,t){!0===Rm(t.systemConf,"chart.zoom.enabled")&&(e.zoomScale=kg().range([0,t.axes.rotated?t.plotarea.height:t.plotarea.width]).domain([0,100]),e.baseZoomScale=e.zoomScale.copy())}(r,e),function(e,t,n,r,a,i){var o=a.behaviouralEvents&&Rm(a.behaviouralEvents.eventManager,"behaviours.PLOT_ZOOM");if(o&&o.types&&!0===o.types[t]){var l=o.instance.getTransform(),s=_defineProperty({},t,i);Ro(i,t,pl(l.k,s.x,s.y,a))}}(o,a,0,x.reversed,e,r),o.ordinalRange=null,o.ordinalRange=eo(o),O){e.axes.y.groups;var z=la(e,a,s),I=z.ticks,D=c?e.axes[a].maxLeafAxisArea:I.preCalcAxisLen,R=(I.preCalcApproxAxisLength(S),I.preCalcAxisLen-D),j=I.tickValueObj,H=!c||u,B=a+"-axis-"+s,N=mt(b.selectAll("g."+a+"-axis"),"g",O?[x]:[],".","class",B);if(N.attr("filter",null),te(z.logDomain)&&o.domain(z.logDomain),1<Ky(R)&&H&&(p(l,R),S=e.plotarea),null!=d){var F="y"==a&&!g&&1<w.axes.y[s].length,V=I&&I.isHierarchy()&&e.dataObject.hierarchical.groupByTime,W=e.dataset.getColumnIdx(a,V?0:s),G=w.columns[W].datatype;G=I&&I.isHierarchialLevelType()&&e.dataObject.categoryHierarchy?ox:G;var X=w.columns[W][G],q=(X=F&&"y"==a?ra(s,e):X)&&(X.axisformat||X.format),Q=U(x.tickmark.size,6),K=U(x.subtickmark.size,6),$=y.isPercentChart&&"y"==a?Ma:Aa,J=V?s:null,ee=!(I&&I.isHierarchy())&&X&&q&&q.specifier&&q.specifier.constructor==Array||"wrapOnSpace"==j.mode||"wrapAll"==j.mode,ne=j.isInline&&!j.inlineToPlot,re="left"===l||"right"===l?"width":"height";e.tickarea[l]=ne&&d.plotBorderDrawn?j.axisgroup[re]:e.tickarea[l]||0,d.orient(l).scale(o).tickPadding(P).tickSize(Q).subTickSize(K).tickSizeOuter(0).majorTicks(s===("y"===a?C:k)||g?f(l,a,j):null).plotarea(e.plotarea).systemconf(e.systemConf).tickRotation(j.rotation).preCalcTickLen(I.preCalcTickLen).chartObj(e).columnIndices(F&&"y"==a?w.axes.y[s]:[W]).isMultiLineTick(ee).minorGrid(j.minorTickValues);var ae=null!=X?X.axisformat||X.format:null;if(ae&&"auto"==ae.specifier&&!o.bandwidth)d.tickValues(I.getTicksforAxisComp()).tickFormat(function(e,t){var n=o.tickFormat()(e);fg(this).text(n),this.formattedVal=n});else{d.tickValues(I.getTicksforAxisComp());var ie=I.getActualTicklabel(),oe=I.tickValueObj.maxTickSize.horizontal,le=I.tickValueObj.maxTickSize.vertical,se=zm.getVal(Y([x.ticklabel,e.systemConf.chart,e.systemConf.canvas,Qm],"fontSize")),ce="wrapOnSpace"==I.tickValueObj.mode||"wrapAll"==I.tickValueObj.mode,ue=d.isMultiLineTick(),de=Z(x.ticklabel.showAs),he=[null,l,e,j.rotation,x.ticklabel.textOverflow,d.scale(),N,d,"ticklabel",x.ticklabel,s],fe=ul.apply(null,he);d.tickFormat(function(t,n){var r=ie(n),a=$(X,r,G,e,"axis",null,null,J);if(fg(this).text(a),this.formattedVal=a,ue)ce&&(a=fl(a,I.tickValueObj.mode,oe,le,se)),At(fg(this),a,{orient:l});else if(de&&Z(I.tickValueObj.customTicks[n])){this.innerHTML="",At(fg(this),I.tickValueObj.customTicks[n],null,!0);var i=Tt(fg(this));this.formattedVal=te(i)?i.join(" "):i}fe(this,n)})}d.tickObj=I,d.hideAxisLabel=!jt(e,a+"axislabel",_)}}return d}(la(e,l,o),l,r,a,o)}function s(t,r){var a=la(e,t,r),i=(Kt("y",r,e),sa(e,t,r)),o=a.component;if(o)return o;var l=ha(i,t,r,e);return a.component="x"==t?l&&jt(e,"xaxis",n)?Gv.get():null:l?Gv.get():null,o}function c(r,o,l){return function(r,o,l){var s=e.dataObject.categoryHierarchy,c=(v.chart.axes,s&&Kt("y",l,e),sa(e,o,l,!1)),h=(c.ticklabel,i(c,o,l)),f="bottom"==h||"top"==h?n:t,p=!0===ha(c,o,l,e)&&jt(e,o+"axis",f),g=o+"-axis-"+l,y=mt(b.selectAll("g."+o+"-axis"),"g",p?[c]:[],".","class",g),m=la(e,o,l),w=e.axes[o].count;if(w-1<l)return mt(b.selectAll("g."+o+"-axis"),"g",[],".","class",g),void(1==r.plotBorderDrawn&&a(h,c,y,r,!1,o,l));var C=la(e,o,l);y.style("display","y"===o&&C.disabled?fm:null);var k=!e.dataObject.isAxisCategory&&l===e.axes[o].count-1;"x"===o&&p?u(c,l,r,!0,k):p&&d(c,l,r,k,!0),p?(m.ticks.tickValueObj,e.plotarea=r.plotarea(),y.transition().duration(x).call(r,o,l),"y"==o&&1==r.plotBorderDrawn?a(h,c,y,r,p,o,l):"x"==o&&function(e,t,n){var r=e.dataObject.hierarchical;if(!r||e.dataObject.isAxisCategory||jn(e))return 0===n;var a=r.pivotLayout.getRootNodeList("x"===t?"column":"row");return n===a.getLeavesCount()}(e,o,l)&&a(h,c,y,r,p,o,l)):1==r.plotBorderDrawn&&a(h,c,y,r,p,o,l)}(r,l,o)}function u(t,n,r,a,i){var o={left:0,top:0,right:0,bottom:0},l=e.axes.x.count,s=e.dataObject.categoryHierarchy,c=0,u=void 0,d=void 0,f=void 0;if(s){var p=e.dataObject.hierarchical.pivotLayout.getRootNodeList("column");d=p.getCount(),u=p.hasMultiCluster(),f=p.getLeavesCount()}if(0==n||i){for(var g=0;g<l;g++)if(ha(sa(e,"x",g),"x",g,e)){var v=la(e,"x",g).component,y=r.orient(),m=a?h(t.label,t.ticklabel,v.preCalcTickLen(),e,"x",g,y):v.tickLabelWidth(),x=b.selectAll(".x-axis-"+g),w=s&&g<f-1,C="right"==y?e.plotarea.left+e.plotarea.width+o.right:e.plotarea.left-o.left,k=e.axes.rotated||"top"==y?e.plotarea.top-o.top:e.plotarea.top+e.plotarea.height+o[y];if(o[y]+=w&&g!==f-1?0:m,x.attr("transform","translate("+C+","+k+")"),x.attr("x",C),x.attr("y",k),(d||u)&&(0==g&&(c=m),d&&f-1<g&&v.majorTicks())){var _="left"==y||"right"==y?"x2":"y2",S="top"===y||"left"===y?1:-1;v.majorTicks()[_]+=S*c,c+=m}}x=b.selectAll("g.x-axis-0")}}function d(r,i,o,l){var s=v.chart.axes.yaxis,c=e.axes.y.count,u=b.selectAll(".y-axis-0"),d=s[0].orient||(e.axes.rotated?"bottom":s[0].orient||"left"),f=e.dataObject.categoryHierarchy;if(l||0==i){for(var p={left:0,top:0,right:0,bottom:0},g=0,y=0;y<c;y++){var m=sa(e,"y",y),x=m,w=ha(m,"y",y,e);if(w){var C=x.orient;if(C=C||(e.axes.rotated?0==y||f?"bottom":"top":null!=x.orient?x.orient:0==y||f?"left":"right"),!0===w&&jt(e,"yaxis","bottom"==C||"top"==C?n:t)){var k=void 0,_=void 0,S=void 0;if(f){var O=e.dataObject.hierarchical.pivotLayout.getRootNodeList("row");_=O.getCount(),k=O.hasMultiCluster(),S=O.getLeavesCount()}var A=la(e,"y",y),P=A.component,T=f&&y<S-1,E=b.selectAll(".y-axis-"+y),L=E.style("display")==fm?P.tickLabelWidth():h(x.label,x.ticklabel,P.preCalcTickLen(),e,"y",y,C),M="bottom"==C||"top"==C?e.plotarea.left:"left"===C?e.plotarea.left-p[C]:e.plotarea.left+e.plotarea.width+p[C],z="left"==C||"right"==C?e.plotarea.top:"bottom"===C?e.plotarea.height+e.plotarea.top+p[C]:e.plotarea.top-p[C];if(p[C]+=A.disabled||T&&y!==S-1?0:L,E.attr("transform","translate("+M+","+z+")"),P&&1==P.plotBorderDrawn&&a(C,x,E,o,"y",y),(_||k)&&(0==y&&(g=L),_&&S-1<y&&P.majorTicks())){var I="left"==C||"right"==C?"x2":"y2",D="top"===C||"left"===C?1:-1;P.majorTicks()[I]+=D*g,g+=L}}}}e.axes.rotated||u.selectAll("line.majorTicks").attr("x2","right"==d?-e.plotarea.width:e.plotarea.width)}}function h(e,t,n,r,a,i,o){var l={top:0,right:0,bottom:5,left:0},s=0,c=0,u=la(r,a,i),d=u.component,h=u.ticks;c="clr"===a?0:u.axisLabel.getBBox().height,d.hideAxisLabel||!1===e.show||!Z(e.text)||""===e.text||h.isHierarchy()&&!tn(a,i,r)?l.top=l.bottom=l.left=l.right=0:(l.top=Hm(e.marginTop,5),l.bottom=Hm(e.marginBottom,5),l.left=Hm(e.marginLeft,5),l.right=Hm(e.marginRight,5));var f=Hm(t.marginRight,5),p=Hm(t.marginLeft,5),g=Hm(t.marginBottom,5),v=Hm(t.marginTop,5);switch(o){case"top":s=(s=null!=n?n.height+v+l.bottom:0)+c+l.top;break;case"bottom":s=(s=null!=n?n.height+g+l.top:0)+c+l.bottom;break;case"left":s=(s=null!=n?n.width+p+l.right:0)+c+l.left;break;case"right":s=(s=null!=n?n.width+f+l.left:0)+c+l.right}return d.tickLabelWidth(s),s}function f(t,n,r){var a,i,o,l;a=i=o=l=0;var s=r.isInline&&!r.inlineToPlot,c=r.longTickSize,u=!s||"left"!=t&&"right"!=t?0:c.width;if("bottom"==t?(i=u,l=-e.plotarea.height):"top"==t?(i=-u,l=e.plotarea.height):"left"==t?(a=-u,o=e.plotarea.width):"right"==t&&(a=u,o=-e.plotarea.width),"x"===n&&e.datalabels.hasFixedPosition){var d=e.axes.y.groups.map(function(e){return e.disabled}).indexOf(!1),h=v.chart.axes.yaxis[d].reversed,f=function(t){var n,r=Zv.getScale(e,e.dataObject,e.plotarea,e.axes.y.orient,t,e.dataset,"y"),a=r.origRange;if(e.dataset.getDataType("y",t)===ox){var i=r.domain();n=r(i[i.length-1])+r.bandwidth()/2}else i=e.dataObject.getMinMaxY(t,0,e.datalabels.hasFixedPosition),n=r(i[1]);return Qy(Ky(n-a[0]),Ky(n-a[1]))}(d);"bottom"==t?h?i-=f:l+=f:"top"==t?h?l-=f:i+=f:"left"==t?h?a+=f:o-=f:"right"==t&&(h?o+=f:a-=f)}return{x1:a,y1:i,x2:o,y2:l}}function p(t,n){var r=e.plotarea;"left"===t?(r.left+=n,r.width-=n):"right"===t?r.width-=n:"bottom"===t?(r.height-=n,r.bottom+=n):(r.height-=n,r.top+=n)}function g(t,n,r,a,i,o){m={left:!1,right:!1,top:!1,bottom:!1},e.staticPaneSVG.selectAll("g.plotareaBorder-property").selectAll("line").style("stroke",pm);var l=n.orient(),s=(n.majorTicks(),n.tickLabelWidth());"none"===t.style("display")&&"remove"===o||("left"==l||"right"==l?(e.plotarea.width="add"==o?e.plotarea.width-s:e.plotarea.width+s,e.plotarea.left="left"==l?"add"==o?e.plotarea.left+s:e.plotarea.left-s:e.plotarea.left):(e.plotarea.height="add"==o?e.plotarea.height-s:e.plotarea.height+s,e.plotarea.top="top"==l?"add"==o?e.plotarea.top+s:e.plotarea.top-s:e.plotarea.top));var c=0,u="add"==o?"":fm;t.style("display",u),t.attr("filter",!0),"add"==o&&t.style("display",null);for(var h=0;h<e.axes.y.groups.length;h++){var p=b.selectAll("g.y-axis-"+h),g=e.axes.y.groups[h].component,y=g.orient(),x=g.majorTicks(),w=v.chart.axes.yaxis[h]||v.chart.axes.yaxis[0];p.node()&&(p.style("display")!=fm&&0==c?(x=f(y,i,g.tickObj.tickValueObj),g.majorTicks(x),p.transition().duration(0).call(g,i,h,!0),c++):null!=x&&0<c&&(g.majorTicks(null),p.transition().duration(0).call(g,i,h,!0)),p.style("display")===fm||m[y]?(g.plotBorderDrawn=!1,""==p.style("display")||"inline"==p.style("display")?p.selectAll("path.domain").style("stroke",w.axisline.color):p.selectAll("path.domain").style("stroke",pm)):(m[y]=!0,g.plotBorderDrawn=!0))}d(0,a,n,!0)}var v=e.systemConf,y=e.dataObject,m={left:!1,right:!1,top:!1,bottom:!1},b=e.wrap,x=function(){var t=v.chart.axes.animation||{},n=t.enabled;if(!Z(n)){var r=e._isAxisCategory()||e.isNonAxisMultiSeriesCategory?e.seriesdata:e.seriesdata.slice(0,1);n=r.some(function(t,n){var r=e.chartTypes[n].name;return ei(v.chart.plot.plotoptions[r],t.plotoptions,e,r).enabled})}return n?Hm(t.duration,600):0}(),w=e.systemConf.metadata,C=0,k=0,_=Gt.helpers.getParsedYAxisOrder;e.axes.animationDuration=x,e.legend.isSingleLayout&&(e.zscale=e.dataObject.hasZaxis?e.scales[0].create():null),e.datalabels.hasFixedPosition=e.datalabels.moduleExists&&dl(e),e.tickarea={left:0,right:0,top:0,bottom:0};var S={left:e.plotarea.left,top:e.plotarea.top,width:e.plotarea.width,height:e.plotarea.height};if(e.dataObject.hierarchical){var O=e.axes.rotated?"width":"height",A="auto"==e.systemConf.chart[O]?null:e.systemConf.chart[O]||e.plotarea[O],P=e.axes.rotated?"height":"width",T="auto"==e.systemConf.chart[P]?null:e.systemConf.chart[P]||e.plotarea[P];e.dataObject.hierarchical.pivotLayout.leafSize(A,T),Zv.setRowScale(e,"row",!0)}Gv.constructTickObj(e,t,n,"left",S,r),Gv.constructTickObj(e,t,n,"bottom",S,r),e.dataObject.hierarchical&&(O=e.axes.rotated?"width":"height",A="auto"==e.systemConf.chart[O]?null:e.systemConf.chart[O]||e.plotarea[O],P=e.axes.rotated?"height":"width",T="auto"==e.systemConf.chart[P]?null:e.systemConf.chart[P]||e.plotarea[P],e.dataObject.hierarchical.pivotLayout.leafSize(A,T),Zv.setRowScale(e,"row",!0)),e.legend.isSingleLayout&&(e.zscale=e.dataObject.hasZaxis?e.scales[0].create():null),Uw.updatePlotareaByBandWidth(e,S);for(var E=Zv.constructor(e,"left"),L=e.axes.rotated?"x":"y",M=e.axes[L].count,z=0;z<M;z++)o("left",z),l(E[z].scale,"left",z,r);var I=Zv.constructor(e,"bottom"),D=e.axes.rotated?"y":"x";for(z=0;z<e.axes[D].count;z++)o("bottom",z),l(I[z].scale,"bottom",z,r);for(z=0;z<E.length;z++)null!=(R=la(e,L,z)).component&&c(R.component,z,L,r);for(z=0;z<I.length;z++){var R;null!=(R=la(e,D,z)).component&&c(R.component,z,D,r)}e.dataset.getDataType("x")==ox&&Zv.barBandwidth(e),e.updateZscale=function(){e.legend.isSingleLayout&&e.dataObject.hasZaxis&&e.zscale.domain(y.getMinMaxZ())},e.updateScale=function(r,o,l,s,c){function f(){var t=e.chartTypes[0].name,n=v.chart.plot.plotoptions[t].outerPadding;return H===ox?y.getCategories(o,s):"x"===o?e.dataObject.getMinMaxX(U(n,.2)):e.dataObject.getMinMaxY(A)}function m(t,n){var r=!(1<arguments.length&&void 0!==n)||n;return k=Zv.getScale(e,y,V,z,s,R,o,t,Ey,r)}function C(e,t){e&&T.scale.domain(T.domain=e),t&&T.scale.range(T.range=t),T.scale.bandwidth&&(T.scale.ordinalRange=null),l=e,T.eventscale=T.scale}var k,S=5<arguments.length&&void 0!==arguments[5]&&arguments[5],O=(null==r||te(r)?r:r.yaxiscolumnorder)||s,A="y"==o?_(O):0,P=(s="x"==o&&Z(s)?s:A,b.selectAll("g."+o+"-axis-"+s)),T=la(e,o,s),E=T.ticks,L="x"==o?v.chart.axes.xaxis:v.chart.axes.yaxis[A],M=L.ticklabel,z=T.component?T.component.orient():i(L,o,A),I="bottom"==z||"top"==z?n:t,D=!0===ha(L,o,"x"===o?0:A,e)&&jt(e,o+"axis",I),R=e.dataset,j=e.dataset.getColumnIdx(o,A),H=w.columns[j].datatype,B=(H=E&&E.isHierarchialLevelType()&&e.dataObject.hierarchical.categoryTree?ox:H,w.columns[j][H]),N=E&&E.isHierarchy()&&e.dataObject.hierarchical.groupByTime?s:null,F=!1,V=e.plotarea,W=l,G=e.behaviouralEvents.eventManager.behaviours,X=0<Object.keys(G).length,q=G.PLOT_ZOOM&&G.PLOT_ZOOM.types&&G.PLOT_ZOOM.types[o],Q=q||G.CHART_SCROLL&&e.scroll&&e.scroll.settings.smooth&&"x"===o;if(!l){var K=f()||[];F="NoData"===K[0]&&"NoData"===K[1]}if(T.scale.bandwidth&&!Q&&T.domain&&1===T.domain.length&&(S=!1,te(W)&&(T.domain=W)),!S){if("x"===o&&Q&&T.scale.bandwidth&&(l=null),T.logDomain){var $=T.logDomain;T.logDomain=null;var J=f();0===J[0]&&0===J[1]?T.logDomain=null:T.logDomain=$}if(k=m(l),T.eventscale=T.scale=k,Q){T.baseScale=m(Ey,!1),k.originalDomain=T.baseScale.originalDomain;var ee=void 0;if(ee=q?G.PLOT_ZOOM.instance.getTransform():e.scroll.transform){var ne=Ro(T,ka(o,e.axes.rotated),ee);W=ne.domain,c=ne.range,C(W,c)}}}S&&(C(Q?null:l,c),e.axes.animationDuration=e.disableAnimation?0:x);var re="y"==o&&!P.empty()&&F,ae="y"==o&&!P.empty()&&1!=L.disabled&&P.style("display")==fm&&!!P.attr("filter");if(re)D&&g(P,T.component,0,A,"y","remove");else if(ae&&!X)D&&g(P,T.component,0,A,"y","add");else if(y.isBubbleEnabled&&"y"==o&&!Q&&(T.eventscale=T.scale=Zv.getScale(e,y,e.plotarea,z,A,e.dataset,"y")),D&&X&&ae&&g(P,T.component,0,A,"y","add"),D){T.component.scale(T.scale),B=1<w.axes.y[A].length&&"y"==o?ra(A,e):B;var ie=y.isPercentChart&&"y"==o?Ma:Aa,oe=null!=B?B.axisformat||B.format:null,le=(E=T.ticks,"bottom"==z||"top"==z?E.tickValueObj.longTickSize.height:E.tickValueObj.longTickSize.width),se=E.getTickValues(e.plotarea.width,e.plotarea.height,l,!1,null,T.Ticks,e.plotarea);te(T.logDomain)&&!S&&(T.scale.domain(T.logDomain),T.eventscale.domain(T.logDomain)),E.tickValueObj=se;var ce="bottom"==z||"top"==z?E.tickValueObj.longTickSize.height:E.tickValueObj.longTickSize.width,ue=E.preCalcTickLen,de=ce<le?ce-le:le<ce?ce-le:0;"bottom"==z||"top"==z?ue.height=ue.height+de:ue.width=ue.width+de;var he=!P.empty()&&P.style("display")===fm&&"y"===o;he&&P.style("display",null);var fe=E.getTicksforAxisComp(),pe=h(L.label,L.ticklabel,T.component.preCalcTickLen(),e,o,s,z);T.component.tickValues(fe).tickRotation(se.rotation).minorGrid(E.tickValueObj.minorTickValues),T.component.tickLabelWidth(pe);var ge=E.getActualTicklabel(),ve=E.tickValueObj.maxTickSize.horizontal,ye=E.tickValueObj.maxTickSize.vertical,me=zm.getVal(Y([L.ticklabel,e.systemConf.chart,e.systemConf.canvas,Qm],"fontSize")),be="wrapOnSpace"==E.tickValueObj.mode||"wrapAll"==E.tickValueObj.mode,xe=T.component.isMultiLineTick(),we=Z(L.ticklabel.showAs),Ce=[null,z,e,se.rotation,L.ticklabel.textOverflow,T.scale,P,T.component,"ticklabel",L.ticklabel,s],ke=ul.apply(null,Ce);if(oe&&"auto"==oe.specifier&&!T.scale.bandwidth?T.component.tickFormat(function(e,t){fg(this).text(T.scale.tickFormat()(e))}):T.component.tickFormat(function(t,n){var r=ge(n),a=ie(B,r,H,e,"axis",null,null,N);fg(this).text(a),this.formattedVal=a,xe?(be&&(a=fl(a,E.tickValueObj.mode,ve,ye,me)),At(fg(this),a,{orient:z})):we&&Z(E.tickValueObj.customTicks[n])&&(this.innerHTML="",At(fg(this),E.tickValueObj.customTicks[n],null,!0)),ke(this,n)}),T.component.isMultiLineTick()||Z(M.showAs)?P.call(T.component,o,s):P.transition().duration(x).call(T.component,o,s),he&&g(P,T.component,0,A,"y","add"),1<Ky(de)){he||p(z,de);var _e="x"===o?"y":"x";("x"==_e?[e.axes.x]:e.axes.y.groups).forEach(function(t){t.disabled||(Q?(W=t.domain,c=t.range,e.updateScale(r,_e,W,t.index,c,!1)):e.updateScale(r,_e,null,t.index))}),e.drawPlotareaClippath(),e.updatePlotareaProp()}"y"===o?(P.styles({display:null,visibility:"visible"}),d(0,A,T.component,!0)):u(L,s,T.component);var Se=e.plotarea.width;e.axes.rotated||"y"!=o||b.selectAll(".y-axis-"+A).selectAll("line.majorTicks").attr("x2","right"!=z?Se:-Se),1==T.component.plotBorderDrawn&&a(z,L,P,T.component,o,s)}}};var Zw=Dg(),qw=Dg(),Qw=Dg(),Kw=Rg(),$w=Rg();Rg(),Qw.set("row","levelByRow"),Qw.set("column","levelByColumn"),Zw.set("bar","path.zcbar"),Zw.set("bar.levelMarker","path.levelMarker"),Zw.set("area","path.area"),Zw.set("line","path.line"),Zw.set("scatter","g.scatter"),Zw.set("bubble","g.scatter"),Zw.set("pie","path.zc_pie"),Zw.set("funnel","path.zc_funnel"),Zw.set("pyramid","g.pyramidsection"),Zw.set("sunburst","path.zc_sunburst"),Zw.set("treemap","path.zc_treemap"),Zw.set("packedbubble","circle.zc_packedbubble"),Zw.set("wordcloud","text.zc_wordcloud"),Zw.set("web","path.area"),Zw.set("tick","g.tick"),Zw.set("tick_child","text.ticklabel"),Zw.set("axislabel","text.axislabel"),Zw.set("label","text"),Zw.set("boundbox","path.zc_label_background"),Zw.set("connector","path.zc_label_connector"),qw.set("area",["opacity","fillOpacity"]),Kw.add(["label","series","boundbox","connector"]),$w.add(["tick"]);var Jw={};Jw._defaultBehavior={handler:"",selection:function(e){var t=sn(this),n=t.values(),r=e.columnInfo.data[0],a=this.dataObject.hierarchical,i=e.axisType,o="x"==i?"column":"row",l="x"==i?"row":"column",s="row"==o?"levelbyrow":"levelbycolumn",c=e.element.parentNode.getAttribute(s),u=this.cache.hierarchical[o],d=u.itemIndex=r.itemIndex,h=a.pivotLayout.getRootNodeList(o),f=h.getCount(),p=h.getLeavesCount(),g=r.axisOrder,v=(u.depth=f+p-g-1,h.getNodesAtDepth(g)[d]),y=h.getAllChildren(v),m=this.cache.hierarchical[l].query,b=void 0,x=u.query==c;n=t.has("line")&&(Km.SAFARI||Km.IE)?n.concat(["scatter"]):t.has("area")?n.concat(["line","scatter"]):n,m&&(b=Fl(this,null,l,m,n).selected);var w=Fl(this,b,o,c,n,i);return w.resetMode=x,te(u.data)&&Vl(u.data,!1),u.query===c?u.data=u.query=u.active=u.depth=u.itemIndex=u.isLeaf=null:(Vl(y,!0),u.data=y,u.active=!0,u.query=c),w},action:function(e){e&&(e.resetMode?(Nl(e.selected,this,!0),Nl(e.unSelected,this,!0)):(Nl(e.reset,this,!0),Nl(e.unSelected,this,!1),Nl(e.selected,this,!0)))}};var eC=function(e){return e};Gv.get=function(){function e(n,a,i,y){return n.each(function(n){var y=fg(this);f=n.label,d=n.ticklabel,h=n.tickmark,p=n.grid,g=n.minorGrid||{},v=n.subtickmark||{};var S=la(m,a,i),I=S.ticks,R=I.tickValueObj,j=m.dataObject.hierarchical,H=m.dataObject.categoryHierarchy,B=H&&$t(a,i,m),N=p.show,F=te(_)&&0<_.length,V=g.show&&F,W=(0<v.count||Z(v.interval))&&F,Y=I.isHierarchialLevelType(),U=(D=Hm(D,0))<0?360-Ky(D):D;U=360<U?Ky(U)-360:U,c&&(y.selectAll("g.axisgroup").selectAll("*").remove(),y.selectAll("g.axisgroup").attr("transform",null),y.selectAll("g.axislabelgroup").attr("transform",null).attr("clip-path",null));var G,X=mt(y,"g",[n],".","class","axisgroup");if(y.selectAll("g#ticklabelG_"+m.id).remove(),R&&R.inlineToPlot){y.selectAll("g.axisgroup").selectAll("*").remove(),(G=mt(y,"g",[1],"#","id","ticklabelG_"+m.id)).style("pointer-events","visible");var q=mt(m.staticPaneSVG,"use",[1]);q.attr("xlink:href","#ticklabelG_"+m.id),q.attr("x",y.attr("x")),q.attr("y",y.attr("y"))}if(s&&o.ticks(s[0],s[1]),m._isAxisCategory()&&"clr"!==a&&(m.dataObject.isAxisCategory||!Jt(a,i,m))){var Q=function(e,t,n,r,a){var i=Dm(e.plotarea);i.chartId=e.id;var o=e.dataObject.hierarchical,l=mt(e.svg,"defs",[1]),s=E(i,r+a),c=mt(mt(l,"clipPath",[1],"#","id",s),"rect",[1]),u=(e.systemConf.chart.axes.xaxis,e.systemConf.chart.axes.yaxis,sa(e,r,a,!1)),d={},h=t.axisgroup,f=.5*e.plotarea.left,p=.5*(e.canvasarea.width-(e.plotarea.left+e.plotarea.width)),g=.5*e.plotarea.top,v=.5*e.plotarea.bottom,y=0;switch(o&&(y=da(r,a,e)),n){case"top":d.x=-f,d.y=-h.height,d.height=h.height+y+e.plotarea.height,d.width=h.width+f+p;break;case"right":d.x=-e.plotarea.width,d.y=-g,d.width=h.width+e.plotarea.width+(u.axisline.strokeWidth||1),d.height=h.height+g+v;break;case"bottom":d.x=-f,d.y=-e.plotarea.height-y,d.height=h.height+y+e.plotarea.height,d.width=h.width+f+p;break;case"left":d.x=-h.width,d.y=-g,d.width=h.width+e.plotarea.width+y+(u.axisline.strokeWidth||1),d.height=h.height+g+v}return c.attrs(d),s}(m,R,x,a,i);X.attr("clip-path","url("+m.defsLocation+"#"+Q+")"),R.inlineToPlot&&G.attr("clip-path","url("+m.defsLocation+"#"+Q+")")}k=m.axes.animationDuration;var K={tickValues:O,tickFormat:A,tickSizeInner:P,tickSizeOuter:T,subTickSize:L,gridSize:z,tickPadding:M,orient:x,rotation:U,scale:l,chart:m,axis:S,minorGrid:_};"clr"===a||Z(d.showAs)||C?(K.renderGrid=!0,K.renderTicklabel=!0,K.isGridShow=N,X.call(ql,K,n)):(K.renderGrid=!0,K.renderTicklabel=!R.inlineToPlot,K.isGridShow=N,K.isMinorGridShow=V,K.isSubTickMarkShow=W,X.transition().duration(k).call(ql,K,n),R.inlineToPlot&&(K.renderGrid=!1,K.renderTicklabel=!0,G.transition().duration(k).call(ql,K,n)));var $=X.selectAll(".tick"),J=null==O?l.ticks?l.ticks.apply(l,[$.nodes().length]):l.domain():O,ee=X.selectAll(".tick").data(J,l),ne=ee.select("line.majorTicks"),re=S.axisLabel,ae=X.selectAll("text.ticklabel").data(J,l);Y&&(r(ee,a,i,"minorTicks"),B&&N&&r(ee,a,i,"majorTicks")),gl(x,U,0,o,h.size);var ie={data:w.map(function(e){return Im(m.systemConf.metadata.columns[e],{columnindex:e},!0)})};if(Wl(m,ae,d,ie,a,i),"clr"!==a&&m.dataObject.hierarchical&&m.dataObject.hierarchical.categoryTree&&function(e,t,n,r,a,i){var o,l=m.dataObject.hierarchical.pivotLayout,s="x"==r?"column":"row",c=l.getRootNodeList(s);if($t(r,a,m))var u=a-c.getLeavesCount(),d=c.getBranchNodes(u);else{var h="column"==s&&c.splitColumnLeaves&&m.axes[r].leaves.length||"numeric"==i;d=h?c.getBranchNodes(0):c.getClusterNodes(0),o=h?m.axes[r].leaves[a].parentBranchIdx:null}if(d){e.attr("levelbycolumn",function(e,t){var n=Hm(o,t);return d[n].levelByColumn}).attr("levelbyrow",function(e,t){var n=Hm(o,t);return d[n].levelByRow}),"numeric"==i&&(n.attr("levelbycolumn",d[o||0].levelByColumn),n.attr("levelbyrow",d[o||0].levelByRow));var f=m.cache.hierarchical&&m.cache.hierarchical[s],p="row"==s?"levelByRow":"levelByColumn";if(f&&f.active){var g=f.query;t.style("opacity",function(e,t){var n=Hm(o,t);return d[n][p].startsWith(g)?1:.1})}}}(ee,ae,re.element,a,i,ie.data[0].datatype),Y||"between"!=h.align||t(l,ee,"minorTicks",a,i),"clr"!==a){!0===f.tooltip&&_t(re.element),re.tickObj=R;var oe=nn(a,i,x,m,u);re.transformLabel(b,oe,x);var le="left"==x?270:"right"==x?90:0;ul(re.element,x,m,le,"ellipsis",l,X,e,"axislabel")}if(z&&N&&((l.bandwidth||l.discreteWidth)&&"between"==h.align&&t(l,ee,"majorTicks",a,i),"clr"!==a)){var se=l.range(),ce=null==e.tickValues()?null:l(e.tickValues()[0])+(l.bandwidth?l.bandwidth()/2:0),ue=m.systemConf.chart.plot.border,de=!0===ue?ue.color:n.axisline.color;!Z(ce)||"transparent"===p.color||"transparent"===de||se[0]!==ce||"y"==a&&H&&j.hasRows()||fg(ne.nodes()[0]).style("stroke","transparent")}var he=n.baseline;null!=he&&mt(X,"line",!0===he.show&&l.domain()[0]<=he.value&&he.value<l.domain()[1]?[1]:[],".","class","zeroBase").attrs({x1:"left"==x||"right"==x?0:l(he.value),y1:"left"==x||"right"==x?l(he.value):-u.height,x2:"left"==x||"right"==x?u.width:l(he.value),y2:"left"==x||"right"==x?l(he.value):0}).styles({fill:fm,stroke:he.color,"shape-rendering":"crispedges","stroke-width":he.strokeWidth})}),e}function t(e,t,r,o,l){var s,c,u,d,f=t.nodes(),g=fg(t.node()),v=fg(f[f.length-1]),y=t.selectAll("line."+r+":not(#minorTicksAlign)"),b=v.selectAll("line."+r),w=mt(g,"line",[1],"#","id",r+"Align"),C=la(m,o,l).ticks.isHierarchialLevelType(),k=n(e,C);if("minorTicks"==r)u="bottom"==x||"top"==x?0:-h.size,d="bottom"==x?h.size:"top"==x?-h.size:0,a(h,w);else{var _=da(o,l,m),S="left"==x||"right"==x?"x1":"y1",O="left"==x||"top"==x?_:-_;s="x1"==S?O:z.x1,c="y1"==S?O:z.y1,u=z.x2,d=z.y2,i(p,w)}if(e.bandwidth||e.discreteWidth)y.attr("transform","translate("+k.mid+")"),b.attr("transform","translate("+k.end+")"),w.attr("transform","translate("+k.start+")").attrs({x1:s,y1:c,x2:u,y2:d});else{var A=0;y.attr("transform",function(t,r){return"translate("+n(e,C,A++).mid+")"}),b.attr("transform","translate("+k.end+")"),w.attr("transform","translate("+k.start+")").attrs({x1:s,y1:c,x2:u,y2:d})}}function n(t,n,r){var a,i,o,l,s;if(t.bandwidth&&!n){var c=t.bandwidth(),u=t.ordinalRange,d=t.outerPaddingPx+c/2,h=1<t.domain().length?u[1]-u[0]-c:0;s=Qy(d,l=c/2+h/2)}else if(n)s=l=0;else{var f=void 0;f=m.dataObject.hierarchical?m.dataObject.hierarchical.pivotLayout.getRootNodeList("column").getDomainForCluster(0):e.tickValues();var p=Zv.getContinuousRangeBand(t,f,r);l=c=p.rangeBand,s=p.outerPaddingInPixel}var g=t.bandwidth?.5:0;return o="bottom"===x||"top"==x?(a=-(s-g)+",0",i=l+g+",0",s+g+",0"):(a="0,"+(g-s),i="0,"+(l+g),"0,"+(s+g)),{start:a,mid:i,end:o}}function r(e,t,n,r){var o=la(m,t,n),l=o.component,s="minorTicks"==r?h:p,c=e.selectAll("line."+r),d=da(t,n,m);o.ticks.tickValueObj.tickMarkSize=d+l.tickSize();var f=n,g="left"==x||"right"==x?"x1":"y1",v="left"==x||"top"==x?d:-d,y="left"==x?"y1":"x1";if(m.dataObject.hierarchical.pivotLayout,f===m.axes[t].count-1){"bottom"==x&&h.size;var b=e.nodes();e.selectAll("line#"+r+"Align").remove();var w,C=mt(fg(b[b.length-1]),"line",[1],"#","id",r+"Align"),k=o.scale,_=k.domain().length,S="top"==x||"bottom"==x?k.discreteWidth(_-1)+",0":"0,"+k.discreteWidth(_-1),O="left"==x||"right"==x?"x2":"y2";w="minorTicks"==r?"left"==x||"top"==x?-h.size:h.size:"left"==x||"top"==x?d+u.width:-(d+u.height),C.attr("transform","translate("+S+")").attr(g,v).attr(O,w),"minorTicks"==r?a(s,C):i(s,C)}c.attr(y,null),c.attr(g,v)}function a(e,t){t.styles({fill:"none","shape-rendering":"crispedges","stroke-width":e.strokeWidth,stroke:e.color})}function i(e,t){var n=Hm(e.strokeWidth,1),r=rt(e.style,n),a=at(e.lineCap,p.style);t.styles({fill:"none","shape-rendering":"crispedges","stroke-width":n,stroke:p.color,"stroke-dasharray":r,"stroke-linecap":a})}var o,l,s,c,u,d,h,f,p,g,v,y,m,b,x,w,C,k,_,S=[],O=null,A=null,P=6,T=6,L=6,M=3,z=null,I=null,D=0;return e.axis=o,e.scale=function(t){return arguments.length?(l=t,o?o.scale(l):(o=mg(x,l)).scale(l),e):l},e.systemconf=function(t){return arguments.length?(y=t,e):y},e.orient=function(t){return arguments.length?(Z(x)&&(x!=t?(c=!0,m.staticPaneSVG.selectAll("g.plotareaBorder-property").selectAll("*").remove(),o=null):c=!1),x=t,e):x},e.tickArguments=function(t){return arguments.length?(S=null==t?[]:Array.prototype.slice.call(t),e):S.slice()},e.tickValues=function(t){return arguments.length?(O=null==t?null:Array.prototype.slice.call(t),e):O&&O.slice()},e.tickFormat=function(t){return arguments.length?(A=t,e):A},e.tickSize=function(t){return arguments.length?(P=T=+t,e):P},e.subTickSize=function(t){return arguments.length?(L=+t,e):L},e.tickSizeInner=function(t){return arguments.length?(P=+t,e):P},e.tickSizeOuter=function(t){return arguments.length?(T=+t,e):T},e.tickPadding=function(t){return arguments.length?(M=+t,e):M},e.ticks=function(){return arguments.length?(s=arguments,e):s},e.majorTicks=function(t){return arguments.length?(z=t,e):z},e.minorGrid=function(t){return arguments.length?(_=t,e):_},e.plotarea=function(t){return arguments.length?(u=t,e):u},e.tickLabelWidth=function(t){return arguments.length?(I=t,e):I},e.tickRotation=function(t){return arguments.length?(D=t,e):D},e.preCalcTickLen=function(t){return arguments.length?(b=t,e):b},e.chartObj=function(t){return arguments.length?(m=t,e):m},e.columnIndices=function(t){return arguments.length?(w=t,e):w},e.isMultiLineTick=function(t){return arguments.length?(C=t,e):C},e},Gv.TickLabelFilter=function(e,t,n,r,a){if((t=t.data[0]).datatype!=sx&&t.datatype!=lx){n.cache.hierarchical||(n.cache.hierarchical={rows:{},columns:{}});var i=n.dataObject.hierarchical,o=t.itemIndex,l="x"==a?"column":"row",s="row"==l?n.cache.hierarchical.rows:n.cache.hierarchical.columns,c=i.pivotLayout.getRootNodeList(l),u=c.getCount(),d=c.getLeavesCount(),h=t.axisOrder,f=u+d-h-1,p=$t(a,h,n),g=c.getNodesAtDepth(h)[o],v=c.getAllChildren(g),y=n.dataObject.pivot?"row"==l?"levelByRow":"levelByColumn":"level",m=n.dataObject.pivot?"row"==l?"levelByColumn":"levelByRow":"level",b=n.dataObject.pivot?"row"==l?"columns":"rows":"level",x=Gv.TickLabelFilter.getQuery(v[0],f,y),w=n.cache.hierarchical[b].query,C=n.chartTypes[0];if("area"!==C.name&&"line"!==C.name||p){if(s.lastQuery=x,r){var k;w&&(k=Gv.TickLabelFilter.getSelectedNodes(n,null,m,w).selected);var _=Gv.TickLabelFilter.getSelectedNodes(n,k,y,x);Gv.TickLabelFilter.getSelectedTickNodes(n,_,a,h,o,x,y),function(e,t,n){t&&(!0===n?(t.selected.series.style("opacity",1),t.unSelected.series.style("opacity",.1),t.selected.labels.style("opacity",1),t.unSelected.labels.style("opacity",.1),t.reset.tick.style("opacity",1),t.unSelected.tick.style("opacity",.1)):(t.selected.series.style("opacity",1),t.unSelected.series.style("opacity",1),t.selected.labels.style("opacity",1),t.unSelected.labels.style("opacity",1),t.unSelected.tick.style("opacity",1)),t.selected.tick.style("opacity",1))}(0,_,s.query!==x)}s.query===x?(te(s.data)&&Gv.TickLabelFilter.setState(s.data,!1),s.data=s.query=s.active=s.depth=s.itemIndex=s.isLeaf=null):(te(s.data)&&Gv.TickLabelFilter.setState(s.data,!1),Gv.TickLabelFilter.setState(v,!0),s.query=x,s.data=v,s.active=!0,s.depth=f,s.itemIndex=o,s.isLeaf=g.leaf)}}},Gv.TickLabelFilter.getSelectedTickNodes=function(e,t,n,r,a,i,o){if(t){var l=e.wrap.selectAll("."+n+"-axis");return e.wrap.selectAll("."+n+"-axis-"+r).selectAll("g.tick:nth-child("+(a+2)+")"),t.selected.tick=l.selectAll("g.tick["+o+'^="'+i+'"]').selectAll("text.ticklabel"),t.unSelected.tick=l.selectAll("g.tick:not(["+o+'^="'+i+'"])').selectAll("text.ticklabel"),t.reset.tick=l.selectAll("g.tick").selectAll("text.ticklabel"),t}},Gv.TickLabelFilter.getSelectedNodes=function(e,t,n,r){var a,i,o=e.chartTypes[0],l=t?t.series:e.svg.select(".seriesholder"),s=t?t.labels:e.staticPaneSVG.select("g.labelholder"),c=t?"filter":"selectAll",u=s[c]("text["+n+'^="'+r+'"],path['+n+'^="'+r+'"]'),d=s[c]('text:not([level^="'+r+'"]), path:not(['+n+'^="'+r+'"])');if("bar"===o.name||"area"===o.name||"line"===o.name)a=l[c]("path["+n+'^="'+r+'"]'),i=l[c]("path:not(["+n+'^="'+r+'"])');else{if("scatter"!==o.name&&"bubble"!==o.name)return;a=l[c]("g.scatter["+n+'^="'+r+'"]'),i=l[c]("g.scatter:not(["+n+'^="'+r+'"])')}return{selected:{labels:u,series:a},unSelected:{labels:d,series:i},reset:{}}},Gv.TickLabelFilter.setState=function(e,t){e.forEach(function(e){e.active=t})},Gv.TickLabelFilter.updateTickEventHandler=function(e,t,n){var r="x"==n?"column":"row",a=e.cache.hierarchical&&e.cache.hierarchical[r],i=!t;if(Z(a)&&Z(a.data)){var o,l=e.dataObject.hierarchical,s="row"==r?"levelByRow":"levelByColumn";if(a.data){var c=a.data.filter(function(e){return!e.seriesDisabled});if(t&&(c.length?a.query=Gv.TickLabelFilter.getQuery(c[0],a.depth,s):a.query="-1"),i){var u=(o=c[0])[s].split("_").slice(0,a.depth+1).map(Number),d=u.length-1,h=u[u.length-1],f=l.pivotLayout.getRootNodeList("column"),p=f.getCount()+f.getLeavesCount()-d-1,g=f.getNodesAtDepth(p)[h],v=f.getAllChildren(g);a.query=Gv.TickLabelFilter.getQuery(o,a.depth,s),a.data=v,Gv.TickLabelFilter.setState(v,!0)}}}},Gv.TickLabelFilter.getQuery=function(e,t,n){return e[n=n||"level"].split("_").slice(0,t+1).map(Number).slice(0,t+1).join("_")+"_"},km.setComponent("geometryUtils.polarToCartesian",Ql),km.setComponent("geometryUtils.dyFromAngle",Jl),km.setComponent("geometryUtils.isAngleInside",es);var tC=function(){};tC.getValueWithinRange=function(e,t){return Qy(qy(e,t[0]),t[1])},tC.getNeedlePolygon=function(e,t,n){var r=Hm(e.width/2,7),a=-Ie(e.innerRadius,t.radius,0),i=-Ie(e.radius,t.radius,n)+e.padding;switch(i=Qy(i,-3*r),e.type){case"clock":return"M"+r+" "+a+" A"+r+" "+r+" 0 0 1 "+-r+" "+a+" A"+r+" "+r+" 0 0 1 "+r+" "+a+" M0 "+(a-r)+" L0 "+i+" M"+-r+" "+(r+i)+" L0 "+i+" L"+r+" "+(r+i)+" L0 "+i;case"sharp":return"M"+r+" "+a+" L0 "+(a+r)+" L"+-r+" "+a+" L0 "+i+" L"+r+" "+a;default:return"M"+r+" "+a+" A"+r+" "+r+" 0 0 1 "+-r+" "+a+" L0 "+i+" L"+r+" "+a}},tC.createLevelsNColors=function(e,t,n,r){var a,i=[],o=[],l=e[0].data[0],s=l[0][t.dataindex]||t.values||[],c=l[0][t.dataindex]||[],u=t.color,d=t.cornerRadius,h=t.padAngle,f=Z(d)&&!Z(h);if(a=te(c[0])?c:t.ranges,s instanceof Array||(s=[s]),void 0===u&&s.length<=1&&(u=["#d1d1d1"]),a)return f&&((a=a.slice(0)).forEach(function(e){e[0]=r[0]}),a.reverse(),(u=u.slice(0)).length=a.length,u.reverse()),{values:a,colors:u};if(0<s.length){var p=s.slice(0);if(!u)var g=L(n,[0,p.length-1],[t.colorGamma[0],t.colorGamma[1]]);var v=r[0],y=v;f?(y<0&&!Re(p,0)&&p.push(0),p.sort(Wg),v===p[0]&&(p=p.slice(1,p.length)),p.forEach(function(e,t){var n=tC.getValueWithinRange(e,r);o[t]=u?u[t]:g(t),i[t]=[y,n]}),i.reverse(),o.reverse()):(p.sort(Wg),p.forEach(function(e,t){var n=s.indexOf(e),a=tC.getValueWithinRange(e,r),l=tC.getValueWithinRange(Z(p[t+1])?p[t+1]:0,r);i[t]=a<0?[a,l]:[v,a],o[t]=u?u[n]:g(t),v=a<0?l:a}))}else l.forEach(function(e,t){i[t]=r,o[t]=(u instanceof Array?u[t]:u)||"#d1d1d1"});return{values:i,colors:o}},Gv.polar=function(){function e(e){e.each(function(e){function c(e){t(f,Hv(),e)}function u(e){t(p,Hv(),e)}function d(e){t(g,Hv(),e)}function h(e){t(v,Hv(),e)}var f,p,g,v,y,m,b=fg(this),x=r.systemConf,w=e.axisline,C=e.tickmark,k=e.subtickmark||{},_=e.grid,S=e.ticklabel,O=S.events;null!=O&&(m=0==U(O.enabled,!0),f=O.mousemove,p=O.mouseout,g=O.click,v=O.doubleclick,y=O.cursor);var A=e.tickOrient,P=w.show?U(w.strokeWidth,1):0,T=U(_.strokeWidth,1),E=U(S.marginLeft,5),L=U(C.size,3),M=U(k.size,2),z=+k.count||0,I=l||(n.ticks?n.ticks():n.domain()),D=function(e,t,n){if(r=[],n&&1<t.length){for(var r,a,i,o=function(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]}(e.domain()),l=-1,s=t.length,c=(t[1]-t[0])/++n;++l<s;)for(a=n;0<--a;)(i=+t[l]-a*c)>=o[0]&&r.push(i);for(--l,a=0;++a<n&&(i=+t[l]+a*c)<o[1];)r.push(i)}return r}(n,I,z),R=n.range(),j=mt(b,"g",[1],".","class","subticksGroup");j.style("stroke",k.color);var H=mt(j,Xm,D),B=mt(mt(b,"g",[1],".","class","ticksGroup"),"g",I,".","class","tick");mt(b,Um,w.show?[1]:[],".","class","domain").attr("d",function(){return"M"+qg().innerRadius(a-1).outerRadius(a).startAngle(R[0]).endAngle(R[1])(1).split(/L|M/gi)[1]}).styles({stroke:w.color,fill:fm,"stroke-width":P,"stroke-dasharray":rt(w.style,P),"stroke-linecap":at(w.lineCap,w.style),"pointer-events":fm}),mt(B,Xm,[1],".","class","tickmark"),mt(B,Xm,[1],".","class","grid"),mt(B,Wm,[1],".","class","ticklabel");var N=B.select(Wm+".ticklabel"),F=B.select(Xm+".tickmark"),V=B.select(Xm+".grid");N.style("cursor",y||gm).style("pointer-events",m?fm:vm).attr("index",function(e,t){return t}).text(function(e){return o(e)}),kt(N,[S,x.chart,x.canvas,Qm]),s={data:i.map(function(e){return Im(r.systemConf.metadata.columns[e],{columnindex:e},!0)})};var W,Y,G,X;switch(Mr(N,{mousemove:c,mouseout:u,click:d,dblclick:h},{singletouchmove:c,touchend:u,tap:d,dbltap:h}),A){case ub:W=a-P/2,Y=-(L+E),G=-L,X=-M;break;default:W=a+P/2,Y=L+E,G=L,X=M}B.attr("transform",function(e){var t=Ql(W,n(e));return"translate("+t[0]+","+t[1]+")"}),N.attrs({dy:function(e){var t=Kl(n(e));return A==ub?sm/2<t&&t<3*sm/2?null:-Jl(t)+"em":sm/2<t&&t<3*sm/2?Jl(t)+"em":null},"text-anchor":function(e){var t=Kl(n(e));return t%sm==0?"middle":A==ub&&t<sm||A!=ub&&sm<t?"end":null},transform:function(e){var t=Ql(Y,n(e));return"translate("+t[0]+","+t[1]+")"}}),F.attrs({x2:function(e){return Ql(G,n(e))[0]},y2:function(e){return Ql(G,n(e))[1]}}).styles({stroke:C.color,"stroke-width":C.strokeWidth}),V.attrs({x2:function(e){return Ql(-a,n(e))[0]},y2:function(e){return Ql(-a,n(e))[1]}}).styles({stroke:_.color,"stroke-width":T,"stroke-dasharray":rt(_.style,T),"stroke-linecap":at(_.lineCap,_.style)}),H.attrs({x2:function(e){return Ql(X,n(e))[0]},y2:function(e){return Ql(X,n(e))[1]},transform:function(e){var t=Ql(W,n(e));return"translate("+t[0]+","+t[1]+")"}})})}function t(e,t,n){null!=e&&(s.data=s.data.map(function(e){return e.value=n,e}),V(e,t,s,r))}var n,r,a,i,o,l,s;return e.scale=function(t){return arguments.length?(n=t,e):n},e.chartObj=function(t){return arguments.length?(r=t,e):r},e.radius=function(t){return arguments.length?(a=t,e):a},e.columnIndices=function(t){return arguments.length?(i=t,e):i},e.tickValues=function(t){return arguments.length?(l=t,e):l},e.tickFormat=function(t){return arguments.length?(o=t,e):o},e},Gv.polar.render=function(e){var t=e.dataObject.isPolarAxisCategory?["x","y"]:["y"],n=e.plotarea,r=rn(e);e.plotarea_approx=null,t.forEach(function(t){var a=Et("g","."+t+"-axis",[1],e.wrap.selectAll("g.chartgroup"));if(function(e,t){var n=ls(e,t);if(rn(e)){var r=Ri(e,t),a=void 0;r.forEach(function(r,i){var o=sa(e,t,i);if("polar"===n)a=Bi(e,t);else{var l=e.plotarea_approx.radius;a=o.reversed&&!e.dataObject.isstacked()?[l,0]:[0,l]}var s=r.scale;s&&(s.range(a),s.origRange=a)})}else{var i=sa(e,t,0),o=Zv.constructor(e,"x"==t?ib:rb);if(e.axes.rotated&&"x"===t&&(e.axes.x.scale=o[0].scale),"polar"!==n){var l=e.plotarea_approx.radius,s=i.reversed&&!e.dataObject.isstacked()?[l,0]:[0,l],c=o[0].scale;c.range(s),c.origRange=s}}}(e,t),r){var i=Yt(e.dataObject);e.cache.polar=e.cache.polar||{},i.forEach(function(r){var i=r.row,o=r.column,l="x"===t?0:i,s=Di(e,t,l),c=zy.getBound(e,r.data[0]),u="x"===t?0:Kt(t,l,e),d=Et("g","."+t+"-axis-"+i+"-"+o,[1],a);cs(d,[n.left+c.x,n.top+c.y]),as(e,s,t,u,d,c,e.plotarea_approx),e.cache.polar[i+"-"+o]=c.polar})}else{var o=Di(e,t),l=zy.getBound(e),s=Et("g","."+t+"-axis-0",[1],a);cs(s,[n.left,n.top]),as(e,o,t,0,s,l)}})},Gv.polar.render;var nC=function(e,t,n){function r(e,t){if(!e.bandwidth||!an(o)&&o!==Kv.line)return t;var n=e.bandwidth()/2,r=t[0]<t[1]?1:-1;return[t[0]+n*r,t[1]-n*r]}if(e.dataObject.isPolarAxisCategory){var a=e.plotarea_approx.radius;return{r:a,x1:-a,x2:a,y1:-a,y2:a}}if(e._isAxisCategory()){var i=e.rendererConf[t].params,o=ln(e,n,t).value,l=e.systemConf.chart.axes,s=l.xaxis.reversed,c=l.yaxis[i.yaxiscolumnorder].reversed,u=i.xscale,d=i.yscale,h=u.range(),f=d.range();return h=r(u,h),f=r(d,f),i.axisrotated?{x1:f[+!c],x2:f[+!!c],y1:h[+!s],y2:h[+!!s]}:{x1:h[+!!s],x2:h[+!s],y1:f[+!!c],y2:f[+!c]}}},rC={};ps.create=function(e,t,n,r){if(/threshold/gi.test(t))return rC[t](e,n,r);var a=Km.SAFARI,i=hs(Km.SAFARI=0,n,n.color,t),o=rC[t](e,n,i);return Km.SAFARI=a,o},ps.canvasGradientFill=rC.canvasGradientFill=function(e,t,n,r,a,i){return Z(i.context)||(i.context=document.createElement("canvas").getContext("2d")),e&&e.type?ps[e.type](e,t,n,r,a,i):null},ps.linear=rC.linear=function(e,t,n,r,a,i){var o,l,s,c,u=i.context,d=e.dimension,h=e.spreadMethod,f=+e.x1||0,p=+e.x2||0,g=+e.y1||0,v=+e.y2||0,y=hs(0,e,e.color,"linear"),m=fs(h)?100:qy(Ky(p-f),Ky(v-g));c=te(d)?(l=d[o=0],s=0,d[1]):(o=d.x1||0,l=d.x2||0,s=d.y1||0,d.y2||0);var b=kg().domain([0,100]).range([o,l].sort(Wg)),x=kg().domain([0,100]).range([s,c].sort(Wg)),w=b(100*f/m),C=(f=b(100*p/m),x(100*g/m)),k=(g=x(100*v/m),u.createLinearGradient(w,C,f,g));return aC(k,y,e.opacity),k},ps.radial=rC.radial=function(e,t,n,r,a,i){var o=i.context,l=e.dimension,s=e.spreadMethod,c=hs(0,e,e.color,"radial"),u=te(l)?Z(l[2])?l[2]:l[0]:l.r,d=te(l)?u:l.x2-l.x1,h=te(l)?u:l.y2-l.y1,f=d/100*e.x||0,p=h/100*e.y||0,g=fs(s)?u/100*e.radius:u,v=o.createRadialGradient(f,p,0,f,p,g);return aC(v,c,e.opacity),v},ps.thresholdLinear=rC.thresholdLinear=function(e,t,n,r,a,i){var o=i.context,l={opacity:[],offset:[],color:[]};n.forEach(function(e){l.opacity.push(1),l.offset.push(e.offset),l.color.push(e.color)});var s=o.createLinearGradient(e.x1,e.y1,e.x2,e.y2);return aC(s,l,e.opacity),s};var aC=function(e,t,n){var r=t.offset.length,a=-1;for(n=n||1;++a<r;){var i=Ky(1-(U(t.opacity[a],1)+n)),o=kn(t.color[a],i),l=parseFloat(t.offset[a])/100;X(l,[0,1])&&e.addColorStop(l,o)}};tb.canvas_gradients=ps;var iC=Dg(),oC=Dg();gs.canvasPatternFill=function(e,t,n){var r,a;return a=document.createElement("canvas").getContext("2d"),r=e.ele?function(e){var t=tb.get(tb.svg_patterns,"svgPatternFill",e,{returnSVGimage:!0,base64:!0});vs(t.url,t)}(e):function(e){var t="zp"+E(e,"canvasFill"),n=iC.get(t);if(!Z(n)){var r=document.createElement("canvas"),a=e.bgClr||e.bgClr_base,i=e.stroke||e.stroke_base,o=/\{\{([a-z]+)\}\}/,l=e.type.split(","),s=l.length,c="function"==typeof e.size,u=e.translate&&"function"==typeof e.translate,d=c?e.size(e.width):(e.size||"").split(","),h=e.strokeWidth.split(","),f=a.split(","),p=i.split(","),g=(e.fillOpacity||"").split(","),v=((e.strokeOpacity||"").split(","),u?e.translate(e.width):e.translate?/\[.*?\]/g.test(e.translate)?JSON.parse(e.translate):e.translate.split(","):null);d=e.width&&!c?st(e,d):d,r.width=d[0],r.height=d[0];for(var y=r.getContext("2d"),m=0;m<s;m++){var b=Q(p[m]||p[0])?e.stroke_base:"static"==(p[m]||p[0])?e.customStaticClr:p[m]||p[0],x=Q(f[m]||f[0])?e.bgClr_base:"static"==(f[m]||f[0])?e.customStaticClr:f[m]||f[0],w=(d[m]||d[0])/2,C=[w,w];if(b=o.test(b)?_n(e.stroke_base,1,b.replace(o,"$1"),Mg):b,x=o.test(x)?_n(e.bgClr_base,1,x.replace(o,"$1"),Mg):x,v){var k=v[m]||v[0];if(te(k))C=[w+parseFloat(k[0]),w+parseFloat(k[1])];else{var _=w+parseFloat(k);C=[_,_]}}if(y.save(),y.translate(C[0],C[1]),y.beginPath(),y.lineWidth=h[m]||h[0],y.fillStyle=kn(x,g[m]||g[0]),y.strokeStyle=b,"circle"===l[m])y.arc(0,0,d[m]/2,0,2*sm,!1);else{var S=Bt(l[m])(d[m]||d[0]);xw.drawPath(y,S)}y.fill(),y.stroke(),y.closePath(),y.restore()}iC.set(t,r),n=r}return n}(e),a.createPattern(r,"repeat")},gs.imageFill=function(e,t){vs(e.name,e,t)},tb.canvas_patterns=gs,km.setComponent("patterns.canvas",gs),km.setComponent("dataLabel.getContent",bs),gw.add("bar",function(){function e(e,o){e.each(function(){function e(){return m.dataObject.getTransRectValue.apply(m.dataObject,N(arguments))}var l,s=n[0],c=n[1],u=n[2]||Wx,d=n[3],h=n[4],f=Hm(o.rendererIndex,c),p=o.paneid,g=t.commonRendererProp().params,v=Z(h)?g.chartObj.systemConf.metadata.columns[h].dataindex:null,y=s.plotoptions,m=g.chartObj,b=m.systemConf,x=g.commonPlotOptions,w=g.dataset,C=g.stacked,k=g.yscale,_=g.yaxiscolumnorder,S=Mi(g,p),O=u===Yx,A=ln(m,p,c),P=A.name==Bb,T=P&&Z(d),E="canvas"===m.plot.renderer.mode,L=m.behaviouralEvents.eventManager.behaviours,z=g.axisrotated,I=!0;(L.PLOT_ZOOM||L.CHART_SCROLL&&!z)&&(I=!1),l=ki(x,O?vm:y,m,c,p),O&&(l=l.stackLabels);var D=O?Ti(l,m):Pi(l,m);if(!s.disabled&&D&&(O||!Bn(m,p,c))){var R=pr(m),j=l.textOverlap,H=hl(m,c,u),B=l.showZeros,F=In(x,m),V=R.left,W=R.top,Y=R.right,G=R.bottom,X=m.svg.node().getBoundingClientRect(),q=X.left+m.plotarea.left,Q=X.top+m.plotarea.top,K=.75*(z?m.plotarea.width:m.plotarea.height),$=bs(m,g,l,u,vm,c,d,p),J=$.contentType||"text",ee="html"===J&&$.multiLine,te=H===lb,ne=i.isCatNull(w,"x"),re=i.isCatNull(w,"y",_),ae=b.chart.axes.yaxis[_||0].reversed,ie=m.barscale2.bandwidth()||0,oe=ys(l,m),le=m.dataset.getDataType("y",_);if(!te||m.dataObject.rangeCorrections.datalabels["y"+_]){var se=0,ce=0,ue=0,de=0,he=0;if(vi(l,m)){var fe=gi(l,m),pe=xi(fe.hook);se=yi(l,m),ce=mi(l,m),ue=C||H===fb?0:pe.height,de=pe.width,he=fe.radius}var ge="clip"===j,ve=b.chart.plot.datalabels.handleOverlapping&&j!==fm,ye=qy(0,U(l.padding,2))+se+ue+(te&&ce?ce/2-1:0),me=te&&function(){if(le===ox){var e=k.domain();return k(e[e.length-1])+k.bandwidth()/2}var t=m.dataObject.rangeCorrections.datalabels,n=[0],r=z?ae?1:-1:ae?-1:1;for(var a in t)-1<a.indexOf("y")&&n.push(t[a]);return k(k.domain()[1])+vg(n)*r}();ye=K<ye?K:ye,r=!(r=l.textDirection)||C&&!O?z?sb:cb:r,a=z?r==cb?90:0:r==cb?0:270;var be=t.commonOption,xe=mt(m.staticPaneSVG.select(".labelholder"),Wm,[1],".","class","temp_label"),we=o.update,Ce=o.add;s.data.forEach(function(n,i){var o=t.seriesdataAfterUpdate&&!O?t.seriesdataAfterUpdate[i]:s.data[i];if(O){var u=b.chart.scroll;u&&u.enabled&&(o=function(e,t){return e.filter(function(e){var n=e[0];return-1<t.indexOf(n)})}(o,g.xscale.domain())),te&&k.domain()[0]<0&&(o=function(e){var t=Rg();return e.filter(function(e){var n=e[0];return!t.has(n)&&(t.add(n),!0)})}(o))}var h=[];_i(xe,l,m,g.color,!1,c),xe.styles({fill:pm}),o.forEach(function(t,n){var o,s,u,p,y,b,x,A=vm,L=!0,D=ae?-1:1,R=O?t[1]<0:w.getY(t,_)<0;xe[J](function(){if(O){var e=t[1];t[0],o=B||0!=e?$(t):vm}else o=ne(w.getX(t))||re(w.getY(t,_))||!B&&0==w.getY(t,_)?vm:$(t);return o}),ee&&ft(xe,0),A=M(xe.node());var N=0,F=0;if(O){var U=be.bandwidth1(t[0])+be.bandwidth2(be.stackGroupIndex),X=k(t[2]||t[1]);s=z?X:U,u=z?U:X,z?r==cb?(s+=(R?-ye:ye)*D,p=ae?R?"-0.3em":"1em":R?"1em":"-0.3em"):(u+=ie/2,p="0.3em",te?(s=me+ye*D+0*D,y=ae?"end":vm):(s+=(R?-ye:ye)*D,y=ae?R?vm:"end":R?"end":vm,ee&&(s+=A.width/2*(R?-1:1)*D))):(s+=ie/2,u+=(R?ye:-ye)*D,r==sb?(p="0.3em",y=ae?R?vm:"end":R?"end":vm):(y="middle",p=te?(u=me-ye*D,ae?"1em":"-0.3em"):ae?R?"-0.3em":"1em":R?"1em":"-0.3em"))}else{var K=A,le=(U=Z(v)&&z?g.yscale(t[v][d]||t[v]):e("x",t,i,n,be,null,d)||0,X=Z(v)&&!z?g.yscale(t[v][d]||t[v]):e("y",t,i,n,be,null,d)||0,e("width",t,i,n,be)||0),fe=e("height",t,i,n,be)||0,pe=ge;s=U,u=X;var Ce=T&&Z(v)?t[v][0]>t[v][1]:null,ke=!!Ce,_e=(ae&&z?!ke:ke)?1-d:d,Se=ae?Ce?d:1-d:Ce?1-d:d;if(D=P&&T?ae&&!z?-1:1:D,z)C?(u+=fe/2,p="0.3em",H==fb?(s+=le/2*D,y="middle"):H==ob?(s+=(R?ye:le-ye)*D,y=ae?R?"end":vm:R?vm:"end",ee&&!te&&(s+=K.width/2*(R?1:-1)*D)):(s+=(R?le-ye:ye)*D,y=ae?R?vm:"end":R?"end":vm,ee&&!te&&(s+=K.width/2*(R?-1:1)*D))):r==sb?(u+=fe/2+(F=bi(A.height,se,he,de))/2,p="0.3em",pe=pe&&H!=ob&&K.width>le,b=ae?R?rb:ab:R?ab:rb,te?(y=ae?"end":vm,s=me+ye*D+0*D,b=ae?ab:rb):pe?H==ib?s+=ae?R?-le+ye:-le:R?0:ye:H==fb&&(s+=ae?-le+se:se):(y=ae?R?vm:"end":R?"end":vm,H==fb?(s+=(K.width>le?R?le:0:le/2)*D,y=K.width>le?y:"middle"):H==ob?P?b=T?(s+=(0==_e?-ye:ye)*D,y=0==_e?"end":vm,0==Se?ab:rb):(y="middle",vm):s+=(R?-ye:le+ye)*D:s+=(R?le-ye:ye)*D,!ee||H===fb&&K.width<=le||(s+=(R?-A.width/2:A.width/2)*D))):(N=bi(A.width,se,he,de),p=ae?R?"-0.3em":"1em":R?"1em":"-0.3em",pe=pe&&K.width>fe,b=ae?R?ib:ob:R?ob:ib,H==fb?(K.height>le?ee?(s+=(ae?R?le:0:R?0:le)*D,s+=ae?K.height/2*(R?1:-1):0):s+=(ae?R?0:le:R?le:0)*D:s+=le/2*D,p=K.height>le?p:"0.3em"):s+=H==ob?(R?-ye:le+ye)*D:(R?le-ye:ye)*D,pe?(s+=N/2,u+=se):(u+=fe/2,y="middle",H==fb&&(p="0.3em")));else if(C)s+=le/2,y="middle",p=H==fb?(u+=fe/2*D,"0.3em"):H==ob?(u+=(R?fe-ye:ye)*D,ae?R?"1em":"-0.3em":R?"-0.3em":"1em"):(u+=(R?ye:fe-ye)*D,ae?R?"-0.3em":"1em":R?"1em":"-0.3em");else if(r==sb){F=bi(A.height,se,he,de);var Oe=!ae&&R||ae&&!R?K.width:0;pe=pe&&H!=ob&&K.width+ye>fe,p="0.3em",b=ae?R?rb:ab:R?ab:rb,pe?(s+=le/2,u+=H==fb?ae?se:fe-se:ae?R?-ye:0:fe+(R?0:-ye)):(s+=le/2,H==fb?(u+=K.width>fe?ee?(R?A.width/2:fe-A.width/2)*D:(R?0:fe)*D+Oe:fe/2*D,y=K.width>fe?vm:"middle"):(u+=H==ob?(R?fe+ye:-ye)*D+Oe:(R?ye:fe-ye)*D+Oe,ee&&(u-=A.width/2)))}else N=bi(A.width,se,he,de),pe=pe&&K.width+2*se>le,p=ae?R||0==_e?"-0.3em":"1em":R||0==_e?"1em":"-0.3em",b=ae?R?ib:ob:R?ob:ib,te?(u=me-ye*D,b=ae?ob:ib,p=ae?"1em":"-0.3em"):H==fb?(u+=(K.height<fe?fe/2:R?0:fe)*D,p=K.height<fe?"0.3em":p):H==ob?(u+=(R&&!T?fe+ye:0==_e?ye:-ye)*D,b=P?T?0==Se?ob:ib:vm:b):u+=(R?ye:fe-ye)*D,pe?s+=se:(s+=le/2,y="middle")}if(ee){var Ae=xs(xe,l,parseFloat(p),o,L);p=Ae[0]+"em",x=Ae[1],o=Ae[2],L=Ae[3],pe||te||(y="middle")}if(xe.attrs({x:s,y:u,dy:p,"text-anchor":y,transform:"rotate("+a+" "+s+" "+u+")"}),te&&!1!==L){var Pe=Ie(Z(l.maxWidth)?l.maxWidth:"30%",m.plotarea.width);if("html"===J){ft(xe,s);var Te={left:(Le=M(xe.node())).x,top:Le.y,right:Le.x+Pe,bottom:Le.y+Le.height},Ee=(Le.width,gt(xe,oe));pt(xe,m,[0,0],0,Te,Ee),o=xe.html()}else{var Le;Te={left:(Le=M(xe.node())).x,top:Le.y,right:Le.x+Pe,bottom:Le.y+Le.height},Ei(xe,m,[0,0],0,Te),o=xe.text()}}var Me=0,ze=0,De=0,Re=0;if(b=H===fb?vm:b,z?Re=(r===cb?N:F)/2:De=(r===cb?N:F)/2,!ge){ee&&ft(xe,s);var je=se+ce/2,He=(K=xe.node().getBoundingClientRect()).left-q-je-De-0,Be=He+K.width+2*je+2*De,Ne=K.top-Q-je-Re-0,Fe=Ne+K.height+2*je+2*Re;if(I){var Ve=s+(He<V?V-He:Y<Be?-(Be-Y):0);Ve==s||te&&z||(Me=Ve-s,s=Ve);var We=u+(Ne<W?W-Ne:G<Fe?-(Fe-G):0);We==u||te&&!z||(ze=We-u,u=We)}}var Ye=Pn(w.getClr(t),m);if(L=L&&(O||Ye),ve)if(C&&!O)xe.attrs({x:s,y:u}),ee&&ft(xe,s),A=M(xe.node()),U=e("x",t,i,n,be)||0,X=e("y",t,i,n,be)||0,fe=e("height",t,i,n,be)||0,le=e("width",t,i,n,be)||0,ae&&(z?U-=le:X-=fe),Ai({x1:A.x-se,y1:A.y-se,x2:A.x+A.width+se,y2:A.y+A.height+se},{x1:U,y1:X,x2:U+le,y2:X+fe})||(L=!1);else if(!ge||O){ee&&ft(xe,s);var Ue=(K=xe.node().getBoundingClientRect()).left-q,Ge=K.top-Q,Xe={id:"lbl"+f+"_"+i+"_"+n+"_"+c+"_"+d,translateFunction:we,isStackedLabels:O,x1:Ue-se+Me-De,y1:Ge-se+ze-Re,x2:Ue+K.width+se+Me+(a?ue+2*ce:0)+De,y2:Ge+K.height+se+ze+(a?0:ue+2*ce)+Re,overlap:te&&"hidden"!==j&&j!==fm?"hidden":j};S.push(Xe)}else{if(r!=cb){var Ze=e(z?"width":"height",t,i,n,be)||0;le=H==ob?A.width:Ze-(H==ib?ye+se:2*se)}else le=ie-2*se;A.width=Qy(le,A.width)}var qe={X:s,Y:u,DY:p,ANCHOR:y,text:o,display:L,height:A.height+F,width:A.width+N,hookPosition:b,adjustVal:r===cb?z?ze:Me:vm};void 0!==x&&(qe.actualDY=x),E&&"html"===J&&(qe.tspanInfo=gt(xe,oe)),h.push(qe)}),h.dataUpdate=o,Ce(h,c,i,d,O?Yx:vm,f).properties={type:vb,dataLabels:l,rotation:a,color:g.color,dataUpdate:o,showlabel:D,multiColoring:F,textDirection:r,rangeChart:T,yrangePos:d,rp:g,contentType:J,isMultiLine:ee,chartType:A.value}})}}})}var t,n,r,a,i=Gt.helpers;return e.renderer=function(n){return arguments.length?(t=n,e):t},e.args=function(t){return arguments.length?(n=t,e):n},e}),Ry.canvas=function(){function e(e,n,r,a){e.each(function(){var e=n;if(Hm(a,n),t){var r=t.properties,i=r.rp.chartObj,o=i.labelHolderContext;if(!Z(o))return!1;if(vi(r.dataLabels,i)){var l=gi(r.dataLabels,i),s=xi(l.hook),c=r.dataUpdate,u=r.rotation||0,d=yi(r.dataLabels,i),h=we(l.radius),f=Z(l.strokeWidth)?+l.strokeWidth:1,p=rt(l.dashStyle,f),g=at(l.lineCap,l.dashStyle),v=kg();t.forEach(function(t){t.forEach(function(t,n){if(wi(t)){var a=t.xy||[t.X,t.Y],y=a[0],m=a[1],b=void 0!==t.actualDY?t.actualDY:parseFloat(t.DY)||0,x=t.height,w=t.width,C=pi(l.strokeColor,0,i,c,e);C=V(C,c&&c[n],Ci(n,e,r),i);var k=pi(l.fillColor,0,i,c,e);if(k=V(k,c&&c[n],Ci(n,e,r),i),o.save(),Z(u)&&0!==u){var _=0,S=0;_=i.axes.rotated?-1*b*x:(S=("middle"===t.ANCHOR?w/2:"end"===t.ANCHOR?-w:0)+d,-v.domain([-.3,.9]).range([x,0])(b)-d),o.translate(y+_,m+S),o.rotate(xw.getRadianAngle(u))}else y=("middle"===t.ANCHOR?y-w/2:"end"===t.ANCHOR?y-w:y)-d,m=m-v.domain([-.3,1]).range([x,0])(b)-d,o.translate(y,m);o.fillStyle=kn(k,l.fillOpacity),o.strokeStyle=kn(C,l.strokeOpacity),o.lineWidth=f,p&&Z(o.setLineDash)&&(o.setLineDash(p),o.lineCap=g),o.beginPath(),o.translate(-y,-m),xw.boundBoxWithHook(o,Po(y,m,w,x,h,d,t.hookPosition,s,t.adjustVal)),o.fill(),o.stroke(),o.closePath(),o.restore()}})})}}})}var t;return e.args=function(n){return arguments.length?(t=n,e):t},e},gw.add("boundBox-canvas",Ry.canvas);var lC=function(e,t){var n="normal";return(t&&t["font-style"]||e["font-style"]||n)+" "+n+" "+(t&&t["font-weight"]||e["font-weight"]||n)+" "+(t&&t["font-size"]||e["font-size"])+" "+(t&&t["font-family"]||e["font-family"])};Iy.canvasUtils=function(){},Iy.canvasUtils.align=function(e){switch(e.toLocaleLowerCase()){case"start":return rb;case"middle":return nb;case"end":return ab}},Iy.canvasUtils.parseTextShadow=function(e){if(e=e&&e.trim())return e.split(/\s+/).map(function(e){var t=J(e);return isNaN(t)?e:t})},Iy.canvasUtils.addTextShadow=function(e,t){Z(t)&&(e.shadowOffsetX=t[0],e.shadowOffsetY=t[1],e.shadowBlur=t[2],e.shadowColor=t[3])},Iy.canvasUtils.createText=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=arguments[3],a=n.text,i=n.font,o=n.fill,l=n.stroke,s=n.textShadow,c=xw.rgba(o||t.color,U(t&&t["fill-opacity"],1)),u=l||t.stroke;a=Hm(a,""),r=r||[0,0],e.font=i,e.fillStyle=c,0<t["stroke-width"]&&("contrast"===t.stroke&&(u=oe(c)),e.strokeStyle=u,e.lineWidth=t["stroke-width"],e.strokeText(a,r[0],r[1])),Iy.canvasUtils.addTextShadow(e,s),e.fillText(a,r[0],r[1])};var sC=Iy.canvasUtils;gw.add("canvas",function(e,t,n,r,a){if(t){var i="stacklabel"===(r=r||"label"),o=r===Ux||r===Gx,l=t.properties,s=rn(e)?l.rp.legendOrderIndex:n,c=l.rotation,u=l.dataLabels,d=Z(n)?e.renderer[n]:null,h=dx.isQuantileColorScale(e),f=l.chartType,p=cn(e,f,"polarAxis"),g=cn(e,f,"hierarchy"),v=cn(e,f,"nonAxisMultiSeries"),y=cn(e,f,"axis"),m=f==Kv.treemap,b=xw.getFontStyles(e,l.dataLabels,l.color,null,n,i),x=parseFloat(b["font-size"]),w=sC,C=e.labelHolderContext,k=lC(b),_=w.parseTextShadow(b["text-shadow"]);t.forEach(function(t,r){var a=d&&d.seriesdataAfterUpdate?d.seriesdataAfterUpdate[r]:null;t.forEach(function(t,r){function i(t){return Oi(e.systemConf,M,u,e,void 0,void 0,void 0,t,D)}C.save();var d,f,S,O,A=t.xy||[t.X,t.Y],P=t.display,T=vm,E=vm;if(h||l.rp.threshold||g||!(y||p||v)||l.multiColoring){var L=m&&o?l.dataUpdate[r]:a&&a[r],M=Ln(e,l.multiColoring?r:n,L&&L.data?L.data:L,s),z=l.dataUpdate||a,I=z&&z[r],D=((I&&I.data?I.data:I)||[]).paneid;m&&o&&/(top-outset|bottom-outset)/.test(u.position)&&zg(M).opacity<.1&&(M="white"),T=i("fontColor"),E=i("strokeColor")}if(!0===P){if(d=A[0],f=A[1],S=t.customHTML?0:parseFloat(t.DY||0),O=t.height,S=(t.tspanInfo||1===S?x:O)*S,Z(c)&&0!==c?(e.axes.rotated&&(S*=-1),C.translate(d+S,f),C.rotate(xw.getRadianAngle(c))):C.translate(d,f+S),Z(t.ANCHOR)&&(C.textAlign=w.align(t.ANCHOR)),t.customHTML)t.customHTML.forEach(function(n){!function(e,t,n,r,a,i,o,l,s){var c=sC,u=n.xy||[n.X,n.Y],d=r.bb,h=r.node;switch(r.nodeName){case"image":var f=+(b=fg(h)).attr("x")||0,p=+b.attr("y")||0,g=+b.attr("width")||0,v=+b.attr("height")||0,y=b.attr("href")||b.attr("xlink:href"),m=new Image;m.onload=function(){t.drawImage(m,u[0]+f,u[1]+p,g,v)},m.src=y;break;case"rect":f=+(b=fg(h)).attr("x")||0,p=+b.attr("y")||0,g=+b.attr("width")||0,v=+b.attr("height")||0;var b,x=+b.attr("rx")||0;t.fillStyle=b.style("fill"),t.strokeStyle=b.style("stroke"),t.lineWidth=b.style("stroke-width"),t.beginPath(),xw.roundedRect(t,f,p,g,v,e.dataObject.getTransRectValue("radius",vm,vm,vm,vm,x)),t.fill(),t.stroke(),t.closePath();break;case"text":case"tspan":var w,C,k,_=h.style;_&&(w=lC(a,_),C=_.fill,k=_.stroke);var S={text:h.textContent,font:w||i,fill:C||l||a.color,stroke:k||s,textShadow:o};t.translate(d.x,d.y+.77*d.height),t.textAlign=c.align("start"),c.createText(t,a,S),t.translate(-d.x,-d.y-.77*d.height)}}(e,C,t,n,b,k,_,T,E)});else if(t.tspanInfo)t.tspanInfo.forEach(function(e){var t,n,r,a,i=e.style;i&&(t=lC(b,i),n=parseFloat(i["font-size"]),r=i.fill,a=i.stroke);var o=[e.dx||0,(n||x)*e.dy],l={text:e.text,font:t||k,fill:r||T||b.color,stroke:a||E,textShadow:_};w.createText(C,b,l,o)});else{var R={text:t.text,font:k,fill:T||b.color,stroke:E,textShadow:_};w.createText(C,b,R)}C.restore()}})})}});var cC={};cC.getTileBound=function(e,t){var n=e.xScale,r=e.yScale,a=t.x0||0,i=t.x1||0,o=t.y0||0,l=t.y1||0;return{x:n(a),y:r(o),width:n(i)-n(a),height:r(l)-r(o)}},cC.getLevel=function(e){return e.level||e.data&&e.data.level},cC.getSeriesIndex=function(e){var t=cC.getLevel(e);if(t)return+t.split("_")[0]},cC.getItemIndex=function(e){var t=cC.getLevel(e);if(t){var n=t.split("_");return+n[n.length-1]}},cC.getParentColor=function(e,t,n){var r=e.params,a=r.chartObj,i=r.commonPlotOptions.parent.fillColor,o=pm;if(t.depth){var l=cC.getSeriesIndex(t),s=Ln(a,l,t,l,n);o="{{clr-tint}}"===i?_n(s,.5,"brighter",Mg):"{{clr-shade}}"===i?_n(s,.5,"darker",Mg):"{{clr}}"===i?s:i||function(e,t){var n=zg(e);return n.opacity=B(t)?1:t,n.toString()}(s,1e-4)}return o},cC.isDisabled=function(e,t){return Z(cC.getSeriesIndex(t))&&e.disabled},gw.add("hierarchy",function(){function e(e,r){e.each(function(){function e(e,n){switch(T){case Rb:return function(e){var t=2*e.r,n=2*e.r;return{x:(e.x||0)-t/2,y:(e.y||0)-n/2,width:t,height:n}}(e);case jb:var r=v.renderer[Za(e.data,v)].layout,i=cC.getTileBound(r,e);return i=function(e){if(d&&("bottom-outset"===a.position||"top-outset"===a.position)){var t=xe(m.padding)["bottom-outset"===a.position?"bottom":"top"];"bottom-outset"===a.position&&(e.y=e.y+e.height-t),e.height=t}return e}(i);case Ib:return ir(v,e,C,k,x);case Nb:return t.getPosition(e,n,V,z,D,R)}}var a,i=n[0],o=n[1],l=(n[2],n[3]),s=n[4],c=n[5],u=n[6]||[0,0],d=n[7],h=n[8],f=i.plotoptions,p=r.paneid,g=t.commonRendererProp().params,v=g.chartObj,y=v.systemConf,m=g.commonPlotOptions,b=g.dataset,x=g.yaxiscolumnorder,w=Mi(g,p),C=g.xscale,k=g.yscale,_=g.rendererIndex,S=void 0===_?o:_,O=Pi(a=ki(m,f,v,o),v),A=ln(v,p,0),P=A.value,T=A.name,E=T===Nb,L=E&&"inside"===a.labelPos,z=Ie(Z(a.maxWidth)?a.maxWidth:"30%",v.plotarea.width);if(d){var I=Im(m.parent.datalabels,a);O=K(I.show),a=I}if(!i.disabled&&O&&!Bn(v,p,o)){pr(v);var D=0,R=0;if(vi(a,v)){var j=gi(a,v),H=xi(j.hook);D=yi(a,v),mi(a,v),R=H.height,H.width,j.radius}var B=a.textOverlap,N=a.hAlign||nb,F=a.vAlign||nb,V=U(a.padding,.5),W=!0===y.chart.plot.datalabels.handleOverlapping&&B!==fm,Y=bs(v,g,a,Wx,s,o,l,p),G=Y.contentType||"text",X="html"===G&&Y.multiLine,q=Y.hasShowAsFunction,Q=In(m,v),$=ys(a,v),J=kg().domain([-.3,.9]),ee="canvas"===v.plot.renderer.mode,te=function(){var e;return e=F===nb?.3:F===ib?-.3:1}(),ne=_i(null,a,v,g.color,!1,o);B=q&&"ellipsis"===B?"hidden":B;var re=mt(v.staticPaneSVG.select(".labelholder"),q?"g":"text",[1],".","class","temp_label"),ae=r.update,ie=r.add,oe=c,le=[];_i(re,a,v,g.color,!1,o),re.styles({fill:pm}),oe.forEach(function(n,r){var i,l,s,c=function(e){return E?t.getLabelAnchor(e):N===nb?"middle":N===ab?"end":null}(n),d=function(t){var n=e(t),r=n.x,a=n.y,i=n.width,o=n.height;return r=function(e,t){return e+=N===nb?t/2:N===ab?t-V-D:V+D}(r,i)+u[0],a=function(e,t){return e+=F===nb?t/2:F===ib?t-V-D:V+D}(a,o)+u[1],{x:r,y:a,w:i,h:o}}(n),f=d.x,p=d.y,g=null,y=null,m=!dx.isQuantileColorScale(v)||Pn(b.getClr(n.data||n),v),x=null;if(E&&(c===hb?x=rb:c===pb&&(x=ab)),re[G](function(){return g=Y(n.data||n,d)}),X){var C=xs(re,a,te,g,m);i=C[0]+"em",l=C[1],g=C[2],m=C[3]}else i=te+"em";if(re.attrs({dy:i,transform:"translate("+[f,p]+")","text-anchor":c,display:m}),"html"===G){if(X&&ft(re,0),N!==nb){re.attr("text-anchor",pb);var k=(s=M(re)).width+s.x;re.attr("text-anchor",hb),f+=((s=M(re)).x-k)*(N===ab?1:-1),re.attr("transform","translate("+[f,p]+")").attr("text-anchor",c)}s=M(re)}else s=function(e,t,n){var r=e.width,a=e.height,i="middle"===t?r/2:"end"===t?r:0,o=J.range([a,0])(parseFloat(n));return e.x=-i,e.y=-o,e}(s=dt(g,$,ms(a,v),null,null,ne["font-style"],ne["font-weight"]),c,i);var _=s.width+0,S=s.height;if(s.x,W){var O={x1:s.x+f-D,y1:s.y+p-D,x2:s.x+f+s.width+D,y2:s.y+p+s.height+D},A=function(e,t,n){var r=e.height-2*V,a=e.width-2*V,i=e.x+u[0]+V,o=e.y+u[1]+V,l={x1:i,y1:o,x2:i+a,y2:o+r};if(T===Nb&&(l.y1=n.y1-2,l.y2=n.y2+2),T===Rb){var s=a/2,c=Qy(t.height/2,s),d=Jy($y(s,2)-$y(c,2)),h=s-d;l.x1+=h,l.x2-=h,l.y1+=h,l.y2-=h}return l}(e(n,s),s,O);if(E&&(d.w=A.x2-A.x1,d.h=A.y2-A.y1),!Ai(O,A)){var P;if("ellipsis"===B){var z=d.h,I=d.w;if(S+2*D<z){var j={left:A.x1+D,top:A.y1+D,right:A.x2-D,bottom:A.y2-D};"html"===G?(y=gt(re,$),pt(re,v,u,0,j,y,vm,[f,p])):Ei(re,v,u,0,j,[f,p]);var H=re.text();if(H&&".."!==H&&(g=re[G](),P=!0,_=I-2*D,X)){var U=M(re);S=U.height,_=U.width+0,p+=(s.height-U.height)/2}}}P?"html"===G&&(y=gt(re,$)):m=!1}if(T===Nb&&!L){O.x1=qy(A.x1,O.x1),O.x2=Qy(A.x2,O.x2);var Z={id:"lbl"+o+"_0_"+r,x1:O.x1,y1:O.y1,x2:O.x2,y2:O.y2,translateFunction:ae,overlap:"hidden",hookHeight:R,hookPosition:x},Q=pr(v),K=Q.left,ie=Q.top,oe=Q.right,se=Q.bottom,ce=O.x1<K||O.x2>oe||O.y1<ie||O.y2>se;m&&!h&&(m=!ce),w.push(Z)}}var ue={X:0,Y:0,DY:i,xy:[f,p],actualDY:l,ANCHOR:c,text:g,display:m,height:S,width:_,hookPosition:x,adjustVal:0};ee&&"html"===G&&(q?ue.customHTML=vt(re):ue.tspanInfo=y||gt(re,$)),le.push(ue)}),le.dataUpdate=oe,ie(le,o,0,l,d?Gx:vm,S).properties={type:"hierarchy",dataLabels:a,color:g.color,dataUpdate:oe,showlabel:O,multiColoring:Q,rp:g,contentType:G,isMultiLine:X,GLT:Y,trans:[0,0],chartType:P}}})}var t,n;return e.renderer=function(n){return arguments.length?(t=n,e):t},e.args=function(t){return arguments.length?(n=t,e):n},e}),gw.add("scatter",function(){function e(e,a){e.each(function(){var e,i=n[0],o=n[1],l=n[2]||0,s=n[3],c=Hm(a.rendererIndex,o),u=a.paneid,d=[0,0],h=i.plotoptions,f=t.commonRendererProp().params,p=f.chartObj,g=p.systemConf,v=f.commonPlotOptions,y=f.dataset,m=f.stacked,b=f.axisrotated,x=f.yaxiscolumnorder,w=f.xscale,C=f.yscale,k=Mi(f,u),_=ln(p,u,o),S=_.value,O=_.name==wb,A="canvas"===p.plot.renderer.mode,P=qn(S),T=Py.bubble.has(S),E=P&&!T,L=Py.bubblePie.has(S),z=p.dataObject.isPolarAxisCategory,I=Kv.geoheatmap===S,D=E&&ix.has(v.marker.symbol),R=Pi(e=ki(v,h,p,o,u),p),j=Hm(e.orient,"top");if(!i.disabled&&R&&!Bn(p,u,o)){var H=pr(p),B=0,N=0,F=0,V=0,W=0,Y=function(e,t){var n=t.staticPaneSVG.selectAll("g.plotareaBorder-property").node(),r={left:0,top:0,right:0,bottom:0};if(vi(e,t))for(var a in r)r[a]=n["border-"+a]?n["border-"+a].size/2+1:1;return r}(e,p);if(vi(e,p)){var U=gi(e,p),G=xi(U.hook);B=yi(e,p),N=mi(e,p),F=G.height,V=G.width,W=U.radius}var X=T?0:qy(0,+(e.padding||0))+B+F,Z=e.textOverlap,q=!0===g.chart.plot.datalabels.handleOverlapping,Q=!!P&&In(v,p),K=H.left,$=H.top,J=H.right,ee=H.bottom,te=K+Y.left,ne=$+Y.top,re=J-Y.right,ae=bs(p,f,e,Wx,null,o,s,u),ie=ae.contentType||"text",oe="html"===ie&&ae.multiLine,le=r.isCatNull(y,"x"),se=r.isCatNull(y,"y",x),ce=ys(e,p),ue=_i(null,e,p,f.color,!1,o),de=mt(p.staticPaneSVG.select(".labelholder"),"text",[1],".","class","temp_label"),he=a.update,fe=a.add,pe="bottom"===j&&E,ge=pe?-1:1;i.data.forEach(function(n,r){var a=t.seriesdataAfterUpdate?t.seriesdataAfterUpdate[r]:i.data[r],u=[];_i(de,e,p,f.color,!1,o),de.styles({fill:pm}),a.forEach(function(t,n){var a,i,h,g=p.dataObject.getXYvalue(b,m,w,C,x,t,"x",null,s),v=p.dataObject.getXYvalue(b,m,w,C,x,t,"y",null,s),_=T||L?p.dataObject.getXYvalue(b,m,w,C,x,t,"z",p.zscale):null,S=yn(t,p),P=null,E=null,R=null,H=null,Y=S&&!t.disabled,U=oe?"0.9em":T||I||pe?"0.3em":"-0.3em",G="middle",Q=T?null:ib,fe=0,ve=0;if(L){var ye=cw.getKey(t,o,p),me=p.subrenderer[r][ye],be=me.data[o];i=(be.startAngle+be.endAngle)/2;var xe=Ql(_/2+X,i);U=oe?"0.9em":sm/2<i&&i<3*sm/2?Jl(i)+"em":"0",G=i<0||sm<i?"end":"start",ae=bs(p,f,e,Wx,me.total,o,s)}if(de[ie](function(){return R=t.isDummy||le(y.getX(t))||se(y.getY(t,x,s))?null:ae(t)}).styles({display:function(){return z?null:g<K||J<g||v<$||ee<v?(Y=!1,fm):null}}).attrs({transform:null,dy:U,x:function(){return(P=L?g+xe[0]:g)||0},y:function(){return ze=D?pe?2:l:(T?0:l)/2,ze*=ge,(E=L?v+xe[1]:v+(ze+X*ge)*(O&&!s?1:-1))||0},"text-anchor":G}),a="lbl"+c+"_"+r+"_"+n+"_"+o+"_"+s,oe){var we=xs(de,e,parseFloat(U),R,Y);if(R=we[2],Y=we[3],ft(de,P),h=M(de.node()),L){var Ce=kg().range([-1,0]).domain(i<sm?[0,sm]:[2*sm,sm]);E+=Ce(i)*h.height,ft(de,P)}else pe||(E-=T||I?h.height/2:h.height);de.attr("y",E),h=M(de.node())}else"html"===ie?h=M(de.node()):((h=dt(R,ce,ms(e,p),null,null,ue["font-style"],ue["font-weight"])).x=P-("middle"===G?h.width/2:"end"===G?h.width:0),h.y=E-h.height,pe&&(E+=h.height/2));var ke=0;if(!z){ke=bi(h.width,B,W,V);var _e=B+N/2+ke/2,Se=de,Oe=h.x-_e,Ae=Oe+h.width+0+2*_e,Pe=P+(Oe<te?te-Oe:re<Ae?-(Ae-re):0);(fe=Pe-P)&&(P=Pe,Se.attr("x",Pe),oe&&ft(de,Pe));var Te=E+(h.y<ne?h.height+l+X:0);(ve=Te-E)&&(p.dataObject.isPercentChart&&!b?(E=Te,Se.attr("y",Te)):Y=!1),oe&&(fe||ve)?h=M(de.node()):(Km.IE&&(h=Dm(h)),h.x+=fe,h.y+=ve)}ke=z?bi(h.width,B,W,V):ke;var Ee=h.width+ke,Le=h.height,Me=h.x+ke/2;if(q){var ze=(T?_:l)/2;if(T){var Ie=g,De=v,Re=Jy($y(Ie-Me,2)+$y(De-h.y,2))+B,je=Jy($y(Ie-(Me+h.width),2)+$y(De-(h.y+h.height),2))+B;if(ze<Re||ze<je){var He;if("ellipsis"===Z){var Be=Qy(h.height/2,ze),Ne=Jy($y(ze,2)-$y(Be,2)),Fe={left:Ie-Ne+B,top:De-Ne+B,right:Ie+Ne-B,bottom:De+Ne-B};"html"===ie?(H=gt(de,ce),pt(de,p,d,0,Fe,H)):Ei(de,p,d,0,Fe);var Ve=de.text();if(Ve&&".."!==Ve&&(R=de[ie](),He=!0,Ee=2*Ne-2*B,oe)){var We=M(de.node());Le=We.height,Ee=We.width+ke,E+=(h.height-We.height)/2}}He||(Y=!1,de.style("display",fm))}}if(p.isGeoMap&&Y||!p.isGeoMap){var Ye={id:a,x1:Me-B,y1:h.y-B,x2:Me+Ee+B,y2:h.y+h.height+B+F,pointRadius:ze+X-F,translateFunction:he,overlap:Z,hookHeight:F,orient:j,factor:ge};k.push(Ye)}}var Ue={X:P,Y:E,DY:U,ANCHOR:G,text:R,display:Y,height:Le,width:Ee,hookPosition:Q,adjustVal:fe};A&&"html"===ie&&(Ue.tspanInfo=H||gt(de,ce)),u.push(Ue)}),u.dataUpdate=a,fe(u,o,r,s,vm,c).properties={type:kb,dataLabels:e,color:f.color,dataUpdate:a,showlabel:R,multiColoring:Q,rp:f,rangeChart:O,yrangePos:s,contentType:ie,isMultiLine:oe,chartType:S}})}})}var t,n,r=Gt.helpers;return e.renderer=function(n){return arguments.length?(t=n,e):t},e.args=function(t){return arguments.length?(n=t,e):n},e}),Cs.chalk=function(e,t,n,r,a,i,o){var l=o.select("defs").append("filter").attrs({id:t,x:-.3,y:-.5,height:2,width:1.6,"color-interpolation-filters":"sRGB"});return l.append("feTurbulence").attrs({baseFrequency:.32065,seed:115,result:"result1",numOctaves:1,type:"turbulence"}),l.append("feOffset").attrs({result:"result2",dx:-2,dy:-2}),l.append("feDisplacementMap").attrs({scale:5,yChannelSelector:"G",in2:"result1",xChannelSelector:"R",in:"SourceGraphic"}),t},Cs.dropShadow=function(e,t,n,r,a,i,o){var l=o.select("defs").append("filter").attrs({x:e.x,y:e.y,width:e.width,height:e.height,id:t,filterUnits:e.filterUnits});if(l.append("feGaussianBlur").attrs({in:e.source||"SourceAlpha",stdDeviation:e.blur}),"SourceGraphic"!==e.source){l.append("feOffset").attrs({dx:e.dx,dy:e.dy,result:"offsetblur"});var s=e.color,c=null,u=s&&s.match(By);u&&5===u.length&&(s=Cn(s),c=u[4]),l.append("feFlood").attrs({"flood-color":s,"flood-opacity":c}),l.append("feComposite").attrs({in2:"offsetblur",operator:"in"});var d=l.append("feMerge");d.append("feMergeNode"),d.append("feMergeNode").attr("in","SourceGraphic")}return t},Cs.colorMatrix=function(e,t,n,r,a,i,o){return o.select("defs").append("filter").attr("id",t).append("feColorMatrix").attrs({in:"SourceGraphic",type:e.type,values:e.values}),t},Cs.freeHand=function(e,t,n,r,a,i,o){var l=o,s=(null==e.scale||e.scale,l.select("defs").append("filter").attr("id",t));return s.append("feTurbulence").attrs({type:"fractalNoise",baseFrequency:.015,numOctaves:2,result:"turbulence_3","data-filterId":3}),s.append("feDisplacementMap").attrs({xChannelSelector:"R",yChannelSelector:"G",in:"SourceGraphic",in2:"turbulence_3",scale:e.scale}),t},tb.svg_filters=Cs,ks.get=function(e,t,n,r,a,i){var o=e.type;if(o&&o!==fm){var l=a?a.plot.renderer.mode:"svg",s=e.options[o]||e.options,c=Dm(s);switch(c.color=null!=t?t:c.color,c.dimension=null!=n?n:c.dimension,c.defsLocation=a?a.defsLocation:"",c.id=a.id,l){case"canvas":return c.pointOpacity=i||1,ps.create(a.context,o,c,r);default:return tb.get(ks,o,c,{offset:r,chartObj:a})}}},ks.svgGradientFill=function(e,t,n,r,a,i,o){return e&&e.type?ks[e.type](e,t,n,r,a,i,o):null},ks.radial=function(e,t,n,r,a,i,o){var l=o,s=e.color,c=e.dimension,u=e.spreadMethod,d=te(c)?Z(c[2])?c[2]:c[0]:c.r,h=+e.x||0,f=+e.y||0,p=+e.radius||0,g=kg().domain([0,100]),v=l.select("defs").append("radialGradient").attrs({id:t,gradientUnits:e.gradientUnits||"userSpaceOnUse",spreadMethod:fs(u)||Km.PHANTOMJS?u:"pad"});if("objectBoundingBox"===e.gradientUnits)v.attrs({cx:h+"%",cy:f+"%",r:p+"%"});else{var y=te(c)?d:c.x2-c.x1,m=te(c)?d:c.y2-c.y1,b=g.copy().range([0,y]),x=g.copy().range([0,m]),w=g.copy().range([0,d]);v.attrs({cx:b(h),cy:x(f),r:fs(u)?w(p):d})}return _s(v,e,s,"radial"),t},ks.linear=function(e,t,n,r,a,i,o){var l,s,c,u,d=o,h=e.color,f=e.dimension,p=e.spreadMethod,g=+e.x1||0,v=+e.x2||0,y=+e.y1||0,m=+e.y2||0,b=fs(p)?100:qy(Ky(v-g),Ky(m-y));u=te(f)?(s=f[l=0],c=0,f[1]):(l=f.x1||0,s=f.x2||0,c=f.y1||0,f.y2||0),/(pie|dial|bubblepie)/.test(n)&&(l=-s,c=-u);var x=kg().domain([0,100]).range([l,s]),w=kg().domain([0,100]).range([c,u]);g=100*g/b,v=100*v/b,y=100*y/b,m=100*m/b;var C=d.select("defs").append("linearGradient").attrs({id:t,gradientUnits:e.gradientUnits,spreadMethod:fs(p)||Km.PHANTOMJS?p:"pad"});return"userSpaceOnUse"==e.gradientUnits?C.attrs({x1:x(g),x2:x(v),y1:w(y),y2:w(m)}):C.attrs({x1:g+"%",x2:v+"%",y1:y+"%",y2:m+"%"}),_s(C,e,h,"linear"),t},ks.thresholdLinear=function(e,t,n,r,a,i,o){return mt(o.select("defs").append("linearGradient").attrs({id:t,gradientUnits:"userSpaceOnUse",x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2}),"stop",n,".","class","stop").attr("offset",function(e){return e.offset}).attr("stop-color",function(e){return e.color}),t},tb.svg_gradients=ks,Ss.imageFill=function(e,t,n,r,a,i,o){var l=e.width,s=e.height;return o.select("defs").append("pattern").attrs({patternUnits:"userSpaceOnUse",id:t,width:l,height:s,x:e.x||0,y:e.y||0}).append("image").attrs({"xlink:href":e.name,x:0,y:0,width:l,height:s}),t},Ss.svgPatternFill=function(e,t,n,r,a,i,o,l){var s;if(s=null!=e.ele?function(e,t,n,r,a){var i=a,o=t.bgClr||t.bgClr_base,l=V(e,o);t.ele=l.replace(/\{\{clr\}\}/g,o);var s,c=i.select("defs").append("pattern").attrs({patternUnits:r||"userSpaceOnUse",id:n,x:t.x||0,y:t.y||0}).html(t.ele);Km.FIREFOX?i.append("g").html(t.ele).each(function(){s=M(this)}).remove():s=M(c.node().firstChild);var u=s.width,d=s.height;return c.attrs({width:u,height:d}),{node:c,w:u,h:d,id:n}}(e.ele,e,t,l,o):function(e,t,n,r){var a=r,i=e.bgClr||e.bgClr_base,o=e.stroke||e.stroke_base,l=/\{\{([a-z]+)\}\}/,s=(e.type||"").split(","),c=s.length,u="function"==typeof e.size,d=e.translate&&"function"==typeof e.translate,h=u?e.size(e.width):(e.size||"").split(","),f=(e.strokeWidth||"").split(","),p=i.split(","),g=o.split(","),v=(e.fillOpacity||"").split(","),y=(e.strokeOpacity||"").split(","),m=d?e.translate(e.width):e.translate?/\[.*?\]/g.test(e.translate)?JSON.parse(e.translate):e.translate.split(","):null;h=e.width&&!u?st(e,h):h;for(var b=a.select("defs").append("pattern").attrs({id:t,patternUnits:n||"userSpaceOnUse",width:h[0],height:h[0],x:e.x||0,y:e.y||0}),x=0;x<c;x++){var w=Bt(s[x])(h[x]||h[0]),C=Q(g[x]||g[0])?e.stroke_base:"static"==(g[x]||g[0])?e.customStaticClr:g[x]||g[0],k=Q(p[x]||p[0])?e.bgClr_base:"static"==(p[x]||p[0])?e.customStaticClr:p[x]||p[0],_=(h[x]||h[0])/2,S=[_,_];if(C=l.test(C)?_n(e.stroke_base,1,C.replace(l,"$1"),Mg):C,k=l.test(k)?_n(e.bgClr_base,1,k.replace(l,"$1"),Mg):k,m){var O=m[x]||m[0];if(te(O))S=[_+parseFloat(O[0]),_+parseFloat(O[1])];else{var A=_+parseFloat(O);S=[A,A]}}b.append("path").attrs({transform:"translate("+S[0]+","+S[1]+")",d:w,stroke:C,fill:k,"stroke-width":f[x]||f[0],"stroke-opacity":y[x]||y[0],"fill-opacity":v[x]||v[0]})}return{node:b,w:h[0],h:h[0],id:t}}(e,t,l,o),r){var c="<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='"+s.w+"' height='"+s.h+"'>"+(new XMLSerializer).serializeToString(s.node.node())+"<path d='"+Bt("square")(Qy(s.w,s.h))+"' transform='translate("+s.w/2+","+s.h/2+")' style='fill: url(#"+s.id+")'></path> </svg>";return{url:Km.FIREFOX||a?"data:image/svg+xml;base64,"+Pm(c):"data:image/svg+xml;utf8,"+c,node:s.node,w:s.w,h:s.h,id:s.id}}return s},tb.svg_patterns=Ss,km.setComponent("patterns.svg",Ss),As.prototype.getCurrentPoint=function(e,t){for(var n,r=this.getCurrentRectangles(t),a=r.length;a--;)if(n=r[a],cr(e.x,e.y,n))return n;return null},As.prototype.getCurrentRectangles=function(e){if(e.isDummy)return[];var t=this.chart,n=t.dataset.getX(e);if(this.cache.has(n))return this.cache.get(n);var r,a,i,o,l=this.scale.y,s=this.scale.x,c=t.systemConf.chart.plot.plotoptions.bullet.levelMarker,u=t.systemConf.chart.plot.plotoptions.bullet.targetMarker,d=this.barOptions,h=s(n)+d.levelMarkerPadding,f=s.bandwidth(),p=Qy(c.maxBandWidth,f),g=t.dataset.getDataType("y",0),v=[],y=e[c.dataindex]||[],m=this.axesRotated,b=s.domain().indexOf(n),x=null;te(y)||(y=[y]);var w=y.slice(0);if(g===lx){var C=t.dataset.getColumn("y",0);i=Z(C.time)?C.time:null}w.push(0),w=w.map(function(e){return g===lx?La(e,0,i).getTime():e});var k,_=(w=m?w.sort(Wg):w.sort(Yg)).map(function(e){return l(e)});w.splice(w.indexOf(0),1);var S=c.events||{},O=!Z(S.enabled)||S.enabled;if(k=(o=_.length-1)-1,O)for(;o--;)0<(a=_[o+1]-_[o])&&(r=_[o]),r=_[o],0<a&&((x=Os(h,r,p,a,m)).currentStage=w[o],x.type="levelMarker",x.data=e,x.rangeIndex=k-o,x.itemIndex=b,x.seriesIndex=e.seriesIndex,x.events=c.events,x.chartType=t.chartTypes[0],x._defaultH=Ps,x._visible=!0,x._key="levelMarker_"+e.seriesIndex+"_"+b+"_"+x.rangeIndex,v.push(x));var A=u.events||{},P=!Z(A.enabled)||A.enabled;if(!0===u.enabled&&P){p=Hm(u.size,d.levelMarkerWidth-2*Hm(u.padding,d.padding/2)),Z(u.size)&&(p=10*Qy(p,f/10)),a="line"===u.symbol?qy(Hm(u.outerStrokeWidth,u.innerStrokeWidth,0)):p;var T=e[u.dataindex];h=s(t.dataset.getX(e))-0,r=l(T)-0,h+=(f-p)/2,r-=a/2,a<5&&(a=5,r-=2.5);var E=A.triggerOffset||0;(x=Os(h-=E/2,r-=E/2,p+=E+0,a+=E+0,m)).type="marker",x.data=e,x.currentStage=T,x.itemIndex=b,x.seriesIndex=e.seriesIndex,x.targetIndex=0,x.events=u.events,x.chartType=t.chartTypes[0],x._defaultH=Ps,x._key="targetMarker_"+e.seriesIndex+"_"+b+"_"+T,v.push(x),x._visible=!0}return this.cache.set(n,v),v},As.prototype.getTooltipContent=function(e,t){var n=this.chart,r=n.systemConf.chart.plot.plotoptions.bullet,a=sr(n,r.levelMarker),i=sr(n,r.targetMarker),o=Rm(r,"levelMarker.events")||{},l=Rm(r,"targetMarker.events")||{},s=("marker"===this.type?i:a)||n.dataset.getColumn("y",0),c=e.currentStage,u=s.datatype,d=n.dataset.getMetaInfoObj(n,e.data,t),h=Aa(s[u],c,u,n,"tooltip"),f={value:c,formattedValue:h,actualData:e.data,data:d};return"marker"===e.type?V(l.tooltipContent,f,n,"tooltip")||"Target: "+h:V(o.tooltipContent,f,n,"tooltip")||"Range: "+h},qv.BulletEvent=As,Gt.prototype.flattenData=function(e){function t(e){v.hasOwnProperty(e)&&(pe(v[e],function(t,n){var a=n.split("_").map(Number),i=_slicedToArray(a,2),o=i[0],l=i[1],s=r.renderer[o];k(s)&&t.forEach(function(t,n){t.seriesIndex=o,t.subSeriesIndex=l,t._key=Gt.helpers.generatePointKey(e,o,l,n),t._data=Ts(r,s,t)})}),s.set(e,v[e]))}var n=this,r=n.chartObj,a=Z(e),i=r.seriesdata,o=function(e,t){var n=e?[{data:e}]:[{data:t.seriesdata}];if(t.dataObject.pivot){var r=t.dataObject.hierarchical.pivotLayout.getRootNodeList("layer").panes;n=Ve(r)}return n}(e,r),l=this.flattenPoints=this.flattenPoints||Dg(),s=void 0,c=Gt.helpers,u=(n.globalChartType,n.isCombinationalChart,vx.hasSharedSeries(r)),d=r.systemConf.chart.axes.xaxis.reversed,h=n.pivot,f=0;if(o.forEach(function(e,t){var o=(e.row||0)+"_"+(e.column||0),p="pane"+(e.row||0)+"_"+(e.column||0);e.index,l.has(p)||l.set(p,Dg()),s=l.get(p),e.data.forEach(function(t,l){var g=a?t.seriesindex:l,v=ln(r,o,g),y=v.name,m="bubblepie"==y?r.bubblePieRendererIndex:h?f++:g,b=r.renderer[m],x=(Zn(v.value),function(e,t){return"charttype"==t?e:getSearchMode(e,u||n.noofBarEnabledSeries)}(function(e,t,n){var r=t.commonRendererProp().params,a=r.commonPlotOptions,i=(r.markerOptions||{}).symbol,o=a.link||{};return"line"==i||"vertical-line"==i?"segment":o.curve?n+"Link"+ke(o.curve):n}(0,b,y),"charttype")),w=s.get(x)||{},C=c.getParsedYAxisOrder(h?t.node.yaxiscolumnorder:t.yaxiscolumnorder),k=v.value,_=n.isstacked(k),S=b.getHighlighter&&b.getHighlighter(r,g,y),O=t.data||t;if(Re(Py.singleSourceEvent,k)){var A=void 0;Re(Py.hierarchy,v.value)&&function e(t,n){if(t)return te(t[0])?void t.forEach(function(t){e(t,n)}):void n.push(t)}(O,A=[]),pe(A?[A]:O,function(n,s){var c=a?t.subseriesindex:s,u=g+"_"+c,h=w[u]||[],f=a?h[h.length-1].itemIndex+1:0;pe(n,function(e,t){var a=f++,l=a;if(Rg(),d&&(l=n.length-1-l),e.seriesIndex=g,e.subSeriesIndex=c,e.itemIndex=a,e.sortedItemIndex=l,e.rendererIndex=m,e.yaxisOrder=C,e._data=Ts(r,b,e,C,_),e.paneid=o,e._key=Gt.helpers.generatePointKey(r.id,p,g,c,a),e._xid=r.dataset.getActualX(e),e.subseriesLength=O.length,h.push(e),S.levelmarker&&!w["lm_"+e._xid]){var s=S.levelmarker(e);w[r.id+"_lm_"+e._xid]=s,w[r.id+"_lm_"+e._xid].disabled=function(){return i[g].disabled||Es(i[g],y,r)}}}),w[u]=h,w[u].disabled=function(){var t=e.data[g]&&e.data[g].node||e.data[g]||e.data[l];return t.disabled||Es(t,y,r)}}),s.set(x,w)}})}),r.cache.thresholdCustomPoints)for(var p in r.cache.thresholdCustomPoints)if(r.cache.thresholdCustomPoints.hasOwnProperty(p)){var g=p;s.get(g)?s.set(g,s.concat(r.cache.thresholdCustomPoints[p])):s.set(g,r.cache.thresholdCustomPoints[p])}var v=r.cache.customPoints;if(v)for(var y in v)t(y)},Gt.prototype.getFlattenedSeriesData=function(e){var t=this.chartObj,n=t.chartTypes[e.seriesIndex].name;return t.dataObject.flattenPoints.get(n)[e.seriesIndex+"_"+e.subSeriesIndex]},Gt.prototype.removeFlattenData=function(e){var t=this.getFlattenedSeriesData(e),n=e.itemIndex;t.splice(n,1);for(var r=n;r<t.length-1;r++)t[r].itemIndex=n++};var uC=(_createClass(Ls,[{key:"add",value:function(e){this.selectionSet.length?(this.mergedSelectionSet=this.intersection(e,this.selectionSet,3),this.oldSelectionSet=this.difference(this.selectionSet,this.mergedSelectionSet,2),this.newSelectionSet=this.difference(e,this.mergedSelectionSet,1)):e.length&&(this.newSelectionSet=e,this.updateID(this.newSelectionSet,1)),this.selectionSet=e,this.selectedEvent=this.eventManager.eventType}},{key:"remove",value:function(){this.updateID(this.mergedSelectionSet,null),this.mergedSelectionSet=[],this.oldSelectionSet=[].concat(_toConsumableArray(this.selectionSet)),this.selectionSet=[]}},{key:"updateID",value:function(e,t){e.forEach(function(e){e.selected=t})}},{key:"difference",value:function(e,t,n){var r=[];return t.length?e.forEach(function(e){t.forEach(function(t){e._key==t._key&&3!=t.selected&&r.push(e)})}):r=e,this.updateID(r,n),r}},{key:"intersection",value:function(e,t,n){if(this.eventManager.eventType!=this.selectedEvent)return[];var r=[];return e.forEach(function(e){t.forEach(function(t){!e._key||e._key!=t._key||1!=t.selected&&3!=t.selected||r.push(e)})}),this.updateID(r,n),r}}]),Ls),dC=(_createClass(Ms,[{key:"init",value:function(){this.selectionManager=new uC(this.chart,this)}},{key:"bindTo",value:function(e){this.tracker=e}},{key:"attachListeners",value:function(e,t,n,r,a){Mr(e,t,n,r,a)}},{key:"dataFinder",value:function(e){return e&&(this.dataGenerators=e),this.dataGenerators}},{key:"getData",value:function(e,t,n){var r=2<arguments.length&&void 0!==n?n:[],a=this.dataFinder()[e],i=a.call.apply(a,[this,t,e].concat(_toConsumableArray(r)));return this.updateSelectionManager(i),this.selectionManager}},{key:"updateSelectionManager",value:function(e){e.dependents?(this.selectionManager.add([e.nearest]),this.selectionManager.selectionSet=e.dependents,this.selectionManager.nearest!==e.nearest&&this.selectionManager.updateID([e.nearest],1)):e.nearby?this.selectionManager.add(e.nearby):e.nearest?this.selectionManager.add([e.nearest]):this.selectionManager.remove(),this.selectionManager.nearest=e.nearest}},{key:"associateBehaviours",value:function(e,t,n){var r,a=this;this.getbehaviour(e,t).forEach(function(e){var i=W(e.allowifcustom,a);if("custom"==e.type){r=!0;var o=e.action;V(o.callback,a.targetEvent,o.args,a.chart)}else a.targetEvent.allowDefault||e.allowDefault?r&&i||zs(e,a,n,t):r&&i?zs(e,a,n,t):r||i||zs(e,a,n,t)})}},{key:"getbehaviour",value:function(e,t){var n=[],r=(t.nearest,this.defaultBehaviour[e]),a=this.customBehaviour(t,e);return n=Z(a)?(n=n.concat(a)).concat(r):n.concat(r)}},{key:"isDefaultAllowed",value:function(e,t){return!Z(e)||e&&!0===t.allowDefault}}]),Ms),hC=Rg(["line","scatter","bubble","bubblepie","threshold","threshold-marker","segment","treemap","wordcloud"]),fC=Rg(["area","arearange","web","sankeyLinkLinear","sankeyNodes"]),pC=Rg(["bar","bullet","gantt","heatmap","waterfall","boxplot"]),gC=Rg(["threshold"]),vC=Rg(["line","scatter","threshold"]),yC=Rg(["bubble"]),mC=Rg(["bubblepie"]),bC=Rg(["treemap"]),xC=Rg(["wordcloud"]),wC=Rg(["bar","bullet","gantt","heatmap","waterfall"]),CC=Rg(["boxplot"]),kC=Rg(["segment"]),_C=Rg(["sankeyLinkBezier"]),SC=Rg(["sankey"]);Ds.prototype.find=function(e){return this.size?this.tree.findAll(e[0],e[1],this.radius,this.sizeOffset).points:this.tree.find(e[0],e[1],this.radius)};var OC=Rs.prototype;OC.getPoly=function(e){return e._polydata().points},OC.find=function(e){var t=[];return this.data.map(function(e,n){e._data()._visible&&t.push(e)}),t};var AC=js.prototype;AC.find=function(e,t){var n=this,r=[],a=this.data.map(function(r){return n.bisector.call(n,r,e,t)}),i=this.bisectValue(a,t);return this.data.map(function(e,t){if(a[t])return a[t].map(function(t){e[t]&&e[t]._data()._visible&&function(e){return"discrete"==n.type||i==e._x}(e[t])&&r.push(e[t])})}),r},AC.continousBisect=function(){var e=Eg(function(e){return e._data()._uid}).left,t=this.discreteBisect;return function(n,r,a){var i=e(n,r,0,n.length-1);if(0<i){var o=[i,i-1],l=[Hs(a,n[o[0]]),Hs(a,n[o[1]])];i=l[0]<=l[1]?o[0]:o[1]}return t()(n,n[i]._uid)}},AC.discreteBisect=function(){return Ye(function(e){return e._data()._uid})},AC.bisectValue=function(e,t){var n=void 0,r=void 0,a=void 0;return this.type,this.data.map(function(i,o){if(e[o])return e[o].map(function(e){i[e]&&i[e]._data()._visible&&((r=Hs(t,i[e]))<a||null==a)&&(n=i[e]._x,a=r)})}),n};var PC=Qs.prototype;PC._defaultH=function(){return[{shape:"marker",data:PC.data,path:this.path,context:this.renderingContext,translate:this.translateContext}]},PC.data=function(e){var t=this.renderer.commonRendererProp().params,n=this.chart,r=this.renderer;return function(){n.cache.data[e._key]||(n.cache.data[e._key]={});var a=n.cache.data[e._key];return a._x=e._x=a._x||n.dataObject.getXYvalue(t.axisrotated,t.stacked,t.xscale,t.yscale,t.yaxiscolumnorder,e,"x"),a._y=e._y=a._y||n.dataObject.getXYvalue(t.axisrotated,t.stacked,t.xscale,t.yscale,t.yaxiscolumnorder,e,"y"),a._size=e._size=a._size||r.getSymbolSize(e),a._visible=e._visible=dr(n,e),a._uid=e._uid=n.dataset.getX(e),a._point=e}},PC.commonOptions=function(e){this.chart;var t=this.renderer.commonRendererProp().params,n=t.markerOptions||{},r=t.hoverOptions||{},a=r.symbol||n.symbol,i=null!=r.size?1:n.size;return{options:r,symbol:a,_size:i,color:Ln(this.chart,In(t.commonPlotOptions,this.chart)?e.sortedItemIndex:e.seriesIndex,e,e.seriesIndex),size:{outer:i,inner:i}}},PC.options=function(e){var t=this.commonOptions(e),n=t.symbol,r=t._size||1,a=ix.has(n)?1:2,i=ix.has(n)?.5:1;return t.size={outer:r*a,inner:r*i},t},PC.renderingContext=function(){return jw.get("scatter").call(this,this.chart)},PC.translateContext=function(){return[this.chart.plotarea.left,this.chart.plotarea.top]},PC.path=function(e,t){e=e._data&&e._data()||e;var n=this.options(e),r=(n.options,t.context.call(this)),a=t.translate.call(this),i=e,o=i.seriesIndex,l=i.paneid,s=ln(this.chart,l,o).value,c=Qn(s)||s===Kv.scatter,u=mt(r,"g",[1],".","class","highlight"+e.paneid+o+e.itemIndex+t.type||"_"),d=this.chart.legendHighlight.getLegendHighlightEffect(o,"selectedSeries","plot",l),h=Dx.hasPatternPallete(this.chart)&&"strokeEnlarge"!==d&&d.constructor!==Function&&c,f="end"==t.type?[e._x,e._y0]:[e._x,e._y];if(Nt(u,null,h?{symbol:n.symbol}:n.options,{color:h?null:n.color,symbolSize:{inner:n.size.inner,outer:n.size.outer},symbol:n.symbol,transform:f,imageSize:15},this.chart),h){var p=d===fm?{fill:pm}:this.chart.legendHighlight.getEffect(d,"scatter",Ny.test(d)?n.color:pm,{fill:pm,stroke:n.color},e.seriesIndex,"plot");u.styles(p)}return r.style("display",""),r.attr("transform","translate("+a[0]+","+a[1]+")"),u},ve(Ks,Qs),Ks.prototype.options=function(e){var t=this.renderer.commonRendererProp().params,n=De(this).commonOptions.call(this,e),r=(n.symbol,n._size||t.gvp("strokeWidth"));return n.size={outer:.9*r,inner:.4*r},n},ve(Js,Qs);var TC=Js.prototype;TC._defaultH=function(){var e=this,t=[{shape:"marker",path:De(this).path,data:De(this).data,context:De(this).renderingContext,translate:De(this).translateContext},{shape:"poly",path:this.path,data:this.data,context:this.renderingContext,translate:De(this).translateContext,styles:function(t){return $s.call(e,t,"inherit")}}];return this.renderer.commonRendererProp().params.isRangeChart&&t.push({shape:"marker",path:De(this).path,data:De(this).data,context:De(this).renderingContext,translate:De(this).translateContext,type:"end"}),t},TC.data=function(e){var t=this.renderer.commonRendererProp().params,n=this.chart,r=this.renderer,a=t.axisrotated,i=r.layout[e.subSeriesIndex],o=a?i.x1():i.x(),l=a?i.y():i.y1(),s=a?i.x0():i.x(),c=a?i.y():i.y0(),u=i.defined();return e._polydata=this.poly(e),function(){n.cache.data[e._key]||(n.cache.data[e._key]={});var t=n.cache.data[e._key],r=Z(e.counter)?e.counter:e.itemIndex;return t._x=e._x=t._x||o(e,r),t._y=e._y=t._y||l(e,r),t._x0=e._x0=t._x0||s(e,r),t._y0=e._y0=t._y0||c(e,r),t._uid=e._uid=n.dataset.getX(e),t._defined=e._defined=Z(t._defined)?t._defined:u(e),t._visible=e._visible=dr(n,e),t._point=e}},TC.poly=function(e){var t=this.chart,n=this.renderer;return function(){t.cache.data[e._key]||(t.cache.data[e._key]={});var r=t.cache.data[e._key],a=n.seriesdataAfterUpdate[e.subSeriesIndex];return r._poly=e._poly=r._poly||Vs(a,e),e._poly;}},TC.options=function(e){var t=this.renderer.commonRendererProp().params,n=De(this).commonOptions.call(this,e),r=(n.symbol,n._size||t.gvp("strokeWidth")),a=t.gvp("mode"),i=t.hoverOptions.fillOpacity||.2;return n.size={outer:.9*r,inner:.4*r},n.fillopacity=i,n.interpolation=a,n},TC.renderingContext=function(){return jw.get("area").call(this,this.chart)},TC.path=function(e,t){e=e._data();var n,r=this.options(e),a=this.poly(e)(),i=this.chart.axes.rotated,o=t.context.call(this),l=this.renderer.commonRendererProp().params,s=this.renderer.layout[e.subSeriesIndex];if(s.context(vm),o.style("display","").attr("transform","translate("+this.chart.plotarea.left+","+this.chart.plotarea.top+")"),"linear"==r.interpolation){var c=Ig(a.points);(n=mt(o,"polygon",[a],".","class","highlight"+e.paneid+e.seriesIndex)).attr("points",c.toString()).styles({"fill-opacity":r.fillopacity||.2,display:""})}else{var u=a.points,d=gg(u,function(e){return e[0]}),h=vg(u,function(e){return e[0]}),f=gg(u,function(e){return e[1]}),p=vg(u,function(e){return e[1]}),g=d,v=0,y=h-d,m=this.chart.plotarea.height;l.axisrotated&&(g=0,v=f,y=this.chart.plotarea.width,m=p-f);var b={name:"rect",id:this.chart.id,x:g+((i?0:this.chart.scrolledX)||0),y:v+((i?0:this.chart.scrolledY)||0),width:y,height:m},x={chartObj:this.chart},w=tb.get(tb.svg_clips,"rect",b,x);(n=mt(o,"path",[1],".","class","highlight"+e.paneid+e.seriesIndex)).datum(this.renderer.seriesdataAfterUpdate[e.subSeriesIndex]).attr("d",s).attr("stroke","").attr("clip-path","url("+this.chart.defsLocation+"#"+w+")").styles({"fill-opacity":r.fillopacity,display:""})}return n},ve(ec,Qs),ec.prototype.options=function(e){var t=De(this).options.call(this,e);return{options:t.options,color:t.color,symbol:t.symbol,size:{outer:.1*(e._size+Ie("2.5%",Qy(this.chart.plotarea.width,this.chart.plotarea.height))),inner:e._size/2*.1}}},ve(tc,ec),tc.prototype.data=function(e){this.renderer.commonRendererProp().params;var t=this.chart,n=De(this).data.call(this,e);return function(){var r=n(),a=t.dataset.getX(e),i=cw.getKey(vm,vm,vm,[a,e[1]]),o=t.subrenderer[e.subSeriesIndex][i].data.map(function(e){var n=e.data;nc(t,n.seriesIndex,n.subSeriesIndex,n)});return r._angles=e._angles=o,r._visible=e._visible=dr(t,e),r._uid=e._uid=t.dataset.getX(e),e}},My.bubblepie=function(){function e(t){return t.each(function(t){var a=n.params,i=a.chartObj,o=a.datasetIndex,l=a.commonPlotOptions,s=a.axisrotated,c=a.stacked,u=a.xscale,d=a.yscale,h=a.yaxiscolumnorder,f=a.labelQueue,p=a.renderingOrderIndex,g=a.bound,v=a.rendererIndex,y=void 0===v?o:v,m=fg(this),b=t[o],x={data:b,index:p},w=b.plotoptions;if(zy.saveSeriesdataInRenderer(i,o,y),o===i.bubblePieRendererIndex){r=[],e.subrenderer=e.subrenderer||[],rn(i)||(i.subrenderer=e.subrenderer);var C=ei(l,w,i,Ab).duration;n.params.hoverOptions=w&&w.hoverOptions?Im(l.hoveroptions,w.hoveroptions,!0):l.hoveroptions;var k=e.subrenderer,_=rn(i)?b.row+"_"+b.column:null,S=ln(i,_,o),O=!Re(Py.nonaxis,S.value),A=O?U(l.dataindex,3):i.dataset.yidx(h),P=i.dataObject.processBubblePieData(t,{dataIndex:A}),T=-1;if(i.renderVisiblePointsOnly){var E=Gt.helpers.filterPointsInViewport(i,P[0],"bubblepie","xy",o);P=[E]}var L=mt(m,"g",P?[x]:[],".","class","scatterseries");P&&P.forEach(function(e,t){k[t]=k[t]||{};var a=cw.filterBySum(e,A);a=a.filter(function(e){var t=e.reference,n=i.dataObject.getXYvalue(s,c,u,d,h,t,"x"),r=i.dataObject.getXYvalue(s,c,u,d,h,t,"y");return!isNaN(n)&&!isNaN(r)}),rn(i)&&a.forEach(function(e){e.row=b.row,e.column=b.column}),mt(mt(L,"g",[1],".","class","subseries_"+t),"g",a,".","class",jn(i)?"zc_nonaxis":"scatter",vm,function(e){return e.reference,cw.getKey(vm,vm,i,[e.x,e.y])}).each(function(e,a){var o=e.reference,l=cw.getKey(vm,vm,i,[e.x,e.y]),f=i.dataObject.getXYvalue(s,c,u,d,h,o,"x")||0,p=i.dataObject.getXYvalue(s,c,u,d,h,o,"y")||0,v=O?i.dataObject.getXYvalue(s,c,u,d,h,o,"z",i.zscale):Qy(g.width,g.height,u.bandwidth?u.bandwidth():1),y=O?"pie":S.name,m=O?[f-v/2,p-v/2]:i.axes.rotated?[g.width/2-v/2,p-v/2-g.y]:[f-v/2-g.x,g.height/2-v/2];k[t][l]=(k[t][l]||My[y]()).commonRendererProp(n).plotarea({width:v,height:v,left:f-v/2,top:p-v/2,translate:m}),k[t][l].chartRendered=!1,k[t][l].subSeriesIndex=++T,r.push(k[t][l]),fg(this).attr("transform","translate("+m[0]+","+m[1]+")").call(k[t][l])})}),e.getSymbolSize=function(e){return i.dataObject.getXYvalue(s,c,u,d,h,e,"z",i.zscale)},O&&(e.renderedTimer=setTimeout(function(){e.chartRendered=!0;var t=i.seriesdata;t.forEach(function(e,n){var r=ln(i,_,n).value;if(Py.bubblePie.has(r)){var a=i.renderer[n];f.push({renderer:a,charttype:kb,chartObj:i,args:[e,n]}),f.push({renderer:a,charttype:"pieInnerLabels",chartObj:i,args:[t,n,P]})}})},C))}else e.chartRendered=!0}),e}var t,n,r;return e.getHighlighter=function(t,n){return e.highlighter||(e.highlighter=new ec(t,e)),e.highlighter},e.commonRendererProp=function(t){return arguments.length?(n=t,e):n},e.shiftInfo=function(n){return arguments.length?(t=n,e):t},e.endFunctions=function(){r.every(function(e){return e.chartRendered})&&(e.chartRendered=!0)},e};var EC=Dg(),LC=[fC,_C,wC,CC,vC,yC,mC,bC,xC,kC],MC=["POLY_TYPES","PATH_TYPES","BISECT_NORM_TYPES","BISECT_LEVEL_TYPES","QUADTREE_NORM_TYPES","QUADTREE_SIZE_TYPES","QUADTREE_PIE_TYPES","QUADTREE_BOUND_TYPES","QUADTREE_TEXT_TYPES","SEGMENT_TYPES"];EC.set("POLY_TYPES",qs),EC.set("PATH_TYPES",qs),EC.set("BISECT_NORM_TYPES",Fs),EC.set("BISECT_LEVEL_TYPES",function(e,t,n){var r=Fs(e.map(function(e,t){return n.renderer[e.seriesIndex].highlighter.box(e)}),t);if(!r)return vm;var a=r._point,i=Fs(n.renderer[a.seriesIndex].highlighter.levels(a),t);return i._point.subtype=i.type,i._point}),EC.set("QUADTREE_NORM_TYPES",Bs),EC.set("QUADTREE_SIZE_TYPES",Ns),EC.set("QUADTREE_PIE_TYPES",rc),EC.set("QUADTREE_BOUND_TYPES",function(e,t,n,r){if(e)return Fs(e,t)}),EC.set("QUADTREE_TEXT_TYPES",function(e,t,n,r){function a(e){var n=e.layout,r=gx.rotatePoint(t,n.rotation,{x:e._x,y:e._y});return Ky(r.y-e._y1)}if(e)return e=e.sort(function(e,t){return a(e)-a(t)}),Km.FIREFOX||(e=e.reverse()),Fs(e,t)}),EC.set("QUADTREE_TYPES",rc),EC.set("SEGMENT_TYPES",function(e,t,n,r){var a,i,o=n.cache.search.bisect?Bs(e,t,n,r):e;if(o)return o.map(function(e){a=n.eventHandler.dataAccesor().radius(r),t=[t.x,t.y];var o=n.renderer[e.seriesIndex].getSymbolBBox(e),l=function(e,t,n){var r=t.axes.rotated?"y":"x",a=t.axes.rotated?"x":"y",i=n.width/2,o={},l={};return o[r]=e["_"+r]-i,o[a]=e["_"+a],l[r]=e["_"+r]+i,l[a]=e["_"+a],[[o.x,o.y],[l.x,l.y]]}(e,n,o),s=Gs(t,l[0],l[1]);(s<a||null==a)&&(a=s,i=e)}),i}),ve(ac,Rs),ac.prototype.getPoly=function(e){return e._setPolygonType("path"),De(this).getPoly(e)};var zC=(_createClass(lc,[{key:"highlight",value:function(e){e.seriesIndex,e.itemIndex,e.subSeriesIndex,e.subseriesLength;var t=e.type||"series",n=this.getRenderer(e,t),r=n._defaultH();for(var a in r)if(r.hasOwnProperty(a)){var i=r[a],o=i.path.call(n,e,i),l=i.styles?i.styles.call(n,e):null;this.applyStyles(o,l)}}},{key:"getRenderer",value:function(e,t){return"series"==t?(ln(this.chart,e.paneid,e.seriesIndex).name,this.chart.renderer[e.rendererIndex||0].highlighter):"threshold-marker"==t||"levelMarker"==t||"marker"==t?e:void 0}},{key:"getRenderingContext",value:function(){}},{key:"applyStyles",value:function(e,t){e&&e.styles(t)}}]),lc);Rg(["line","scatter","threshold"]);var IC=Rg(["bubble","bubblepie","area","arearange","web","bar","bullet","gantt","heatmap","waterfall","boxplot","levelMarker","marker","sankey","treemap","wordcloud"]),DC=km.getComponent("annotation"),RC={};RC._defaultPlotBehaviour={mousemove:[{action:function(){return yc},allowifcustom:!0,type:"resetHighlight"},{action:function(){return sc},type:"highlight"},{action:function(){return dc},type:"cursor"},{action:function(){return cc},type:"reverseHighlight"},{action:function(){return ci},allowDefault:!0,type:"tooltip"}],click:[{action:function(){return pc},type:"hidetooltip"},{action:function(){return dc},type:"cursor",allowifcustom:bc},{action:function(){return uc},type:"highlightOnTaphold"}],doubleclick:[{action:function(){return pc},type:"hidetooltip"},{action:function(){return gc},type:"notes"},{action:function(){return dc},type:"cursor",allowDefault:bc}],mouseout:[{action:function(){return yc},type:"resetHighlight",allowDefault:!0},{action:function(){return vc},type:"resetTooltip",allowDefault:!0}],contextmenu:[]},RC._defaultPlotBehaviour.touchmove=RC._defaultPlotBehaviour.mousemove,RC._defaultPlotBehaviour.tap=RC._defaultPlotBehaviour.click,RC._defaultPlotBehaviour.doubletap=RC._defaultPlotBehaviour.doubleclick;var jC=fg(document.documentElement),HC=Cc;Km.isTouchDevice&&(Mr(jC,{},{tap:_c,taphold:_c,dbltap:_c},{preventDefault:!1}),jC.on("touchmove",function(){Cc()})),Tc.prototype.highlight=function(e){var t=this.chartObj;pe(this.legendComponents,function(n,r){var a=t.legendEvents.reverseEventManager[Ec(t,r)],i=t.legends.get(r);if(!Be(a)){var o=i.meta.encode;if(fn(a.options.config,o,!1).showOnDataHover&&e){var l=e,s=n.data,c=a.getData("mousemove",l);a.targetEvent=Hv(),s&&re(c.point)!==re(s.point)&&a.associateBehaviours("mouseout",s),function(e,t,n){var r=n.seriesIndex;switch(e){case"z":return Z(r)&&on(t.chartTypes[r].value)}}(o,t,e)&&(a.associateBehaviours("mousemove",c),n.data=_extends({},c),n.highlighted=!0)}}});var n=this.previousHoveredSeriesIndex,r=t.systemConf.legend,a=fn(r,"clr",!1),i=t.legend.component,o=e?t.renderer[e.rendererIndex||0].commonRendererProp():vm;if(t.dataObject.pivot&&e){var l=o.legendOrder();this.hoveredlegendOrder=l,i=t.legends[l].component.encode}if(i&&a&&a.showOnDataHover&&(!Dx.isContinousLegend(t)||a.type&&a.type!==fm)){var s=t.eventHandler.eventManager.selectionManager,c=i.highlightItem;if(!(t.isAxisCategory||t.dataObject.isPolarAxisCategory||t.isGeoMap||t.dataObject.isFlowChartCategory)||s&&s.nearest&&!Z(s.nearest.type)){var u,d,h;t.isAxisCategory||t.dataObject.isPolarAxisCategory||t.isGeoMap||t.dataObject.isFlowChartCategory?(d=(u=e).seriesIndex,h=e.itemIndex,t.dataObject.pivot&&e&&(d=o.legendIndex())):(u=e.data?e.data.data||e.data:e,d=e.seriesIndex,h=e.itemIndex,t.dataObject.pivot&&e&&(d=t.dataObject.isHierarchy?t.dataObject.hierarchical.gridOptions[e.paneid||"0_0"].legendIndices[e.seriesIndex||0]:o.legendIndex()));var f=this.hoveredSeriesIndex=this.getLegendIndex(u,t.isAxisCategory||t.dataObject.isPolarAxisCategory||t.isNonAxisMultiSeriesCategory||t.isGeoMap?d:h);if(Dx.isContinousLegend(t)){var p=t.dataset.getClr(u),g=r.colorBand.ranges,v=t.axes.clr.brushScale;c(g&&g.length?v(g[f])+v.bandwidth()/2:v(p),!0,vm,g&&g.length?f:[p]),this.itemHighlighted=!0}else{var y=this.legendElements;if(y[f]){var m=Dx.getLegendData(t);f!==n&&null!==n&&c(y[n],m[n],n,r),c(y[f],m[f],f,r,!0),this.itemHighlighted=!0,!this.legendScrollable||t.systemConf.legend.expandable&&t.systemConf.legend.expandable.show||(this.legendSeries.scrollTop=y[f].offsetTop-this.legend_series_height/2)}}this.previousHoveredSeriesIndex=f}}},Tc.prototype.reset=function(){var e=this.chartObj;if(pe(this.legendComponents,function(t,n){if(t.highlighted){var r=e.legendEvents.reverseEventManager,a=t.data,i=r[Ec(e,n)];if(Be(i))return;i.targetEvent=Hv(),i.associateBehaviours("mouseout",a),t.data=null,t.highlighted=!1}}),this.itemHighlighted){var t=this.legendElements,n=this.hoveredSeriesIndex,r=e.legend.component;if(e.dataObject.pivot&&(r=e.legends[this.hoveredlegendOrder||0].component.encode),!r)return;var a=r.highlightItem;if(Dx.isContinousLegend(e))a(vm,!1);else if(Z(t[n])){var i=Dx.getLegendData(e),o=e.systemConf.legend;a(t[n],i[n],n,o)}this.hoveredSeriesIndex=null}this.itemHighlighted=!1},Tc.prototype.getLegendIndex=function(e,t){var n=this.chartObj,r=n.axes.clr,a=n.chartTypes[0].name===Nb;if(r.scaleType)return dx.getItemIndex(n,r.indexScale,e);if(a){var i=n.renderer[0];return("link"===e._type?i.getLinkByPoint(e).source:i.getSankeyNodeByPoint(e)).point.itemIndex}return null!=t?t:void 0},Lc.prototype.highlight=function(e){var t=this.chartObj,n=t.dataObject.isHierarchy?Mc:vm,r=t.systemConf.legend.highlightEffect.applyUnselectedSeriesToPlot,a=this.previousPoint;if(r&&e&&(!a||re(a.data,n)!=re(e.data,n)||a.seriesPos!=e.seriesPos||a.itemPos!=e.itemPos||re(a.subseriesindex)!=re(e.subseriesindex))){var i=this.elements,o=t.legendHighlight.getLegendHighlightEffect(0,"unselectedSeries","plot",e.paneid),l=t.legendHighlight.getEffect(o,vm,vm,vm,0,"plot");this.getBackup(l),i.styles(l),this.previousPoint=e}},Lc.prototype.reset=function(){var e=this.backupStyles;e&&(this.elements.styles(e),this.backupStyles=vm,this.previousPoint=vm)},Lc.prototype.getBackup=function(e){var t=this.elements,n=this.backupStyles;if(!n){for(var r in n={},e)e.hasOwnProperty(r)&&(n[r]=t.style(r));this.backupStyles=n}};var BC=(_createClass(Rc,[{key:"init",value:function(){this.eventManager=new dC(this.chart),this.reverseLegendHighlight=new Tc(this.chart),this.unselectedHighlight=new Lc(this.chart),this.eventManager.bindTo(this.tracker),this.eventManager.init(),this.chart.isGeoMap||(this.addListeners(this.tracker),this.eventManager.dataFinder({mousemove:Rc.findData,click:Rc.findData,doubleclick:Rc.findData}),this.eventManager.defaultBehaviour=mc(),this.eventManager.customBehaviour=Rc.getCustomBehaviour,qv.customPoints&&(this.CustomPoints=new qv.customPoints(this.chart),this.CustomPoints.addPoints(this.chart.cache.thresholdCustomPoints,!0)))}},{key:"update",value:function(){this.rotated=this.chart.axes.rotated,this.tooltipElement.initialize(),this.bulletEvents=null,this.CustomPoints&&this.CustomPoints.addPoints(this.chart.cache.thresholdCustomPoints,!0)}},{key:"isSingleSource",value:function(){var e=Hv(),t=this.chart;if(e&&!this.isGeoMap&&t.dataObject.isCombinationalChart&&rn(t)){if(t.divScroll){var n=Tr(t.eventHandler.trackerElement.node(),e),r=t.eventHandler.dataAccesor({x:n[0],y:n[1]}),a=ln(t,r.paneId(),0);return!Re(Py.nonAxisSingleSourceEvent,a)}var i=e.target,o=t.eventHandler.trackerElement.node(),l=t.svg.selectAll("g.seriesholder").node();if(i===o||l.contains(i))return i===o;var s=t.eventHandler.eventManager.selectionManager.nearest,c=s&&te(s);if(s&&(c&&s.length||!c))return c}return this.isAxisCategory||this.isPolarAxisCategory||this.isFlowChartCategory||this.isGeoMap||t.dataObject.singleSourceEvent}},{key:"clearOldActions",value:function(){var e=this.chart.eventHandler.tooltipElement;null!=e&&null!=e.timeout&&clearTimeout(e.timeout)}},{key:"getSourceNode",value:function(){return this.isSingleSource()?this.chart.eventHandler.trackerElement.node():this.chart.svg.node()}},{key:"getRelativeMousePosition",value:function(e,t){var n=Tr(e,Hv());if(t){var r=M(e);n[0]-=r.x,n[1]-=r.y,this.isPolarAxisCategory&&(n[0]-=this.chart.plotarea_approx.x,n[1]-=this.chart.plotarea_approx.y)}return{x:(this.chart.eventHandler.mousePos=n)[0],y:n[1]}}},{key:"toNewObject",value:function(e){var t={nearest:e};return this.eventManager.updateSelectionManager(t),this.eventManager.selectionManager}},{key:"addListeners",value:function(e,t){var n=this.handlers=this.handlers||Pc.call(this),r={click:n.click,dblclick:n.doubleclick,contextmenu:n.contextmenu},a={mousemove:n.mousemove,mouseout:n.mouseout},i={tap:n.click,dbltap:n.doubleclick,singletouchmove:n.mousemove,touchend:n.mouseout},o={target:"plot",chartObj:this.chart};"tooltip"==t?this.eventManager.attachListeners(e,a,null,o):(this.eventManager.attachListeners(e,a,null,o,"chart"),this.eventManager.attachListeners(e,r,null,o,"chartmove"),this.eventManager.attachListeners(e,{},i,o))}},{key:"dataAccesor",value:function(e){var t=this.chart,n=0<this.chart.dataObject.noofBarEnabledSeries,r=vx.hasSharedSeries(t);return t.cache.search.bisect=n||r,{chart:t,parseKey:function(e){if(t.cache.thresholdCustomPoints&&-1!==e.indexOf("threshold"))return"threshold"},bestChartType:function(e){return"threshold"==e||"segment"==e?"scatter":e},radius:function(e){if(Re(Py.nonAxisSingleSourceEvent,Kv[e]))return qy(t.plotarea.width,t.plotarea.height);if(t.cache.thresholdCustomPoints&&-1!==e.indexOf("threshold"))return t.cache.thresholdCustomPoints[e].triggerOffset;var n=("line"==(e="threshold"==e||"segment"==e?"scatter":e)||"scatter"==e?1==t.dataObject.markerSize[e].size():null)&&parseInt(t.dataObject.markerSize[e].values()[0])||0;return Hm(ur(t,Kv[e]),10)+n/2},sizeOffset:function(e){if(Re(Py.nonAxisSingleSourceEvent,Kv[e]))return 0;e="threshold"==e?"scatter":e;var n=t.systemConf.chart.plot.plotoptions[e];return n&&n.events&&n.events.triggerOffset||10},extent:function(){return[t.plotarea.width,t.plotarea.height]},size:function(e){var n="line"==e||"scatter"==e?1<t.dataObject.markerSize[e].size():null;return t.dataObject.isBubbleEnabled||n||"segment"==e||Re(Py.nonAxisSingleSourceEvent,Kv[e])},toArray:function(e){var t=hr(this.rotated);return[e[t[0]],e[t[1]]]},bisectMode:function(){var e=t.dataset.getDataType("x");return t.dataObject.noofBarEnabledSeries||e==ox?"discrete":"continous"},median:function(){var n=void 0,a=void 0;t.dataObject.pivot&&(n=1<t.dataObject.hierarchical.pivotLayout.getRootNodeList("column").getLeavesCount(),a=t.cache.search.lastPane.split("_")[1]);var i=t.systemConf.chart.axes.xaxis.reversed,o=t.dataObject.noofBarEnabledSeries&&!t.dataObject.noofAreaEnabledSeries&&r,l=n?t.axes.x.leaves[a].scale:t.axes.x.scale,s=this.chart.dataset.getDataType("x"),c=Zv.invert(s,e,l,t.axes.rotated,null,i,o);return c=s==ox?l.domain()[c]:c},spliceIndices:function(){return[]},paneIndex:function(e,n){return t.dataObject.pivot?t.dataObject.hierarchical.pivotLayout.getRootNodeList("layer").panes[e+"_"+n].index:0},paneId:function(){return Dc(t,e)},hasDependantPoints:function(){return fr(t)}}}},{key:"getPointType",value:function(e){return e.seriesIndex,e.type||"series"}},{key:"eventDisabled",value:function(e){var t=e.plotoptions,n=Gt.helpers.getChartType(e.type||this.chart.userdata.seriesdata.type,"string"),r=this.chart.systemConf.chart.plot.plotoptions[n];return e.disabled||0==U(Gn(t,r,this.chart,"enabled"),!0)}}],[{key:"findData",value:function(e){var t=this.chart,n=0<this.chart.dataObject.noofBarEnabledSeries,r=vx.hasSharedSeries(t),a=t.cache.search.bisect=n||r,i=t.eventHandler.dataAccesor(e),o="pane"+i.paneId(),l=t.dataObject.flattenPoints.get(o);t.cache.search.lastPane=o;var s=rn(t)&&t.dataObject.hierarchical&&t.dataObject.hierarchical.gridOptions[o.replace("pane","")].chartTypes;s&&Re(Py.nonAxisSingleSourceEvent,s[0].value)&&(a=s.some(function(e){return Zn(e.value)}));var c=ic(l,e,a,i);return{nearby:r?c.nearby:null,nearest:c.nearest,dependents:c.dependents}}},{key:"getCustomBehaviour",value:function(e,t){var n=this.chart,r=this.targetEvent,a=e.nearest||e.oldSelectionSet[0],i=[],o=void 0,l=void 0;if(a){if("contextmenu"==t)o=n.systemConf.chart.plot.events;else{var s=a.seriesIndex,c=ln(n,a.paneid,s),u=a.type||c.name;if("threshold-marker"==u||"levelMarker"==u||"marker"==u)p=a;else{var d=Gt.helpers.getSeriesdata(n,a.paneid,a.seriesIndex),h=(a.seriesIndex,c.name),f=d.plotoptions,p=n.systemConf.chart.plot.plotoptions[h];n.zcEventType||n.eventHandler.targetEvent}o=Gn(f,p,n,t),l={x:a._x,y:a._y}}return o?"cursor"==t?o:(i.push({action:zc(o,a,Xn(r),l,n),type:"custom"}),i):null}}}]),Rc);km.setComponent("ZC_ChartEvents",BC),jc.prototype.addPoints=function(e,t){if(e){for(var n in e)e.hasOwnProperty(n)&&(t&&(e[n]=jc.toCircle(e[n])),Array.prototype.push.apply(this.points,jc.addType(be(e[n]))));return this}},jc.prototype.removePoints=function(e,t){return this.points.splice(e,t||1)},jc.prototype.hoverPoint=function(e,t,n,r,a,i){if(a=!1!==a,r=!1!==r){var o=this.chart.eventHandler.getSourceNode();n=this.chart.eventHandler.getRelativeMousePosition(o,!0),!function(e,t,n,r,a,i){var o,l=e.eventHandler.oldInfo,s=e.systemConf.tooltip,c=e.systemConf.tooltip.sharedSeriesInfo,u=e.staticPaneSVG.selectAll("g.eventgroup"),d=!0===s.enabled||!0===i,h=e.eventHandler.tooltipElement;l&&!1===l.isNoInfo&&e.eventHandler.mouseOut(),clearTimeout(h.timeout),u.selectAll("#zcscatterhighlight,#zcbarhighlight,#zcareahighlight").style("display",fm);var f=r._data(),p=f._x,g=f._y;if(Z(n)||(n={x:p,y:g}),Z(t)&&(t=Xn(t)),!Z(t)){var v=e.svg.node().getBoundingClientRect();t={clientX:p+e.plotarea.left+v.x,clientY:g+e.plotarea.top+v.y}}if(a&&"circle"===r._type&&(o=function(e,t,n,r,a,i){var o=r.selectAll("#zcscatterhighlight").style("display",null).attr("transform","translate("+a.left+","+a.top+")"),l=Rm(e.marker,"hoveroptions")||{},s={color:e.color,symbolSize:{inner:e._mSize/2,outer:e._mSize},transform:[t,n]};return Nt(o,null,l,s,i),o}(r,p,g,u,e.plotarea,e)),d){var y=lr(t,n,p,g,e,null,e.axes.rotated,c,null,!1,!1),m=[r.text,r.formattedValue].join(": "),b=r.marker,x=Hm(r.events,{}).tooltipContent;if(Z(x)){var w=V(x,t,{data:[r.columnInfo],itemIndex:r.itemIndex,point:r.point,pointFormatted:r.formattedValue},e);Z(w)&&(m=w)}y.helpers.backgroundColor=Hm(s.backgroundColor,b.fillColor,r.color),y.helpers.borderColor=Hm(s.borderColor,b.strokeColor,r.color),h.show(e,y,m,!1,y.helpers)}}(this.chart,t||Hv(),n,e,a,i)}},jc.toCircle=function(e){return e.forEach(function(e){if(!e._converted&&!Z(e.r)){var t=e._data();e.cx=t._x+e.width/2,e.cy=t._y+e.height/2,e.r=qy(e.width,e.height)/2,e._converted=!0}}),e},jc.addType=function(e){return e.forEach(function(e){var t=e._data();Z(e.r)?e._type="circle":Z(t._x)&&Z(t._y)&&Z(e.width)&&Z(e.height)?e._type="rect":e._type="poly"}),e},qv.customPoints=jc,Ry.svg=function(){function e(e,a,i,o){e.each(function(){var e=a,l=Hm(o,a);t&&(n=t.properties,r=n.rp.chartObj);var s=t&&vi(n.dataLabels,r),c=mt(fg(this),"g",[1],".","class",(i===Gx?"parentboundboxseries_":i===Ux?"innerboundboxseries_":"boundboxseries_")+l);n&&n.rangeChart&&(c=mt(c,"g",[1],".","class","rangePos_"+n.yrangePos));var u=mt(c,"g",s?t:[]);if(s){var d=n.chartType,h=cn(r,d,"polarAxis"),f=cn(r,d,"axis"),p=h?"translate("+r.plotarea_approx.x+","+r.plotarea_approx.y+")":f?null:n.translation;c.attr("transform",p);var g=gi(n.dataLabels,r),v=xi(g.hook),y=n.dataUpdate,m=n.data,b=n.rotation||0,x=yi(n.dataLabels,r),w=we(g.radius),C=pi(g.strokeColor,0,r,y,e),k=pi(g.fillColor,0,r,y,e),_=Z(g.strokeWidth)?+g.strokeWidth:1,S=rt(g.dashStyle,_),O=at(g.lineCap,g.dashStyle),A=kg(),P=r.plotarea,T=n.trans||[0,0],E=-T[0]+P.left,L=P.width-T[0]-P.left;u.attr("transform",function(e){return e.translation}).attr("class",function(e,t){return"subseries_"+t}).each(function(t,a){var i=t.dataUpdate||y,o=t.data||m,l=mt(fg(this),"path",i);l.attrs({d:function(e,r){var a=t[r],i=a.xy||[a.X,a.Y],o=i[0]-x,l=i[1]-x,s=a.width,c=a.height,u=void 0!==a.actualDY?a.actualDY:parseFloat(a.DY)||0,d=a.ANCHOR,p=a.hookPosition;return o="middle"===d?o-s/2:"end"===d?o-s:o,l-=A.domain([-.3,.9]).range([c,0])(u),f||h||"hierarchy"===n.type||(o<E&&(s-=E-o+_/2+x,o=E+_/2),L<o+s+_/2+x&&(s-=o+s-L+_/2+2*x),o+=(g.strokeWidth||1)*(p===ab?.5:p===rb?-.5:0)),Po(o,l,s,c,w,x,p,v,a.adjustVal)},transform:function(e,n){var r=t[n],a=r.xy||[r.X,r.Y];return"rotate("+b+" "+a[0]+" "+a[1]+")"},id:function(e,n){return"boundbox"+t[n].ID},levelbycolumn:function(e,t){var n=o?o[o.length-1-t]:e.data||e;if(n.levelByColumn)return n.levelByColumn},levelbyrow:function(e,t){var n=o?o[o.length-1-t]:e.data||e;if(n.levelByRow)return n.levelByRow},class:"zc_label_background"}).styles({display:function(e,n){return wi(t[n])?null:fm},fill:function(t,a){return V(k,t,Ci(a,e,n),r)},"fill-opacity":g.fillOpacity,stroke:function(t,a){return V(C,t,Ci(a,e,n),r)},"stroke-opacity":g.strokeOpacity,"stroke-width":g.strokeWidth,"stroke-dasharray":S,"stroke-linecap":O,opacity:function(e,t){if(Z(r.dataObject.hierarchical)&&Z(r.cache.hierarchical)&&r.cache.hierarchical.active)return!0===e.active?1:.1},transition:"opacity ease .2s"}),Fc(l,r,"label",o)})}})}var t,n,r;return e.args=function(n){return arguments.length?(t=n,e):t},e},gw.add("boundBox-svg",Ry.svg),gw.add("connector",function(e,t,n,r,a){r=Hm(r,n);var i=t&&t.properties||{},o=i.dataUpdate,l=void 0===o?[]:o,s=i.isSunburst,c=i.connectorPath,u=i.showlabel,d=i.dataLabels,h=(void 0===d?{}:d).line,f=l.length,p=Li(e),g=mt(a||p,"g",!t||!rn(e)&&"circular"===u?[]:[1],".","class","link_"+r);if(t&&h){var v=i.data;g.attr("transform",i.translation).styles({stroke:h.strokeColor,"stroke-width":h.strokeWidth,fill:fm}),t.forEach(function(t,r){var a="circular"!==(t.showlabel||u),o=mt(g,"g",a?[1]:[],".","class","subseries_"+r),d=mt(o,"path",t.dataUpdate||l);o.attr("transform",t.translation),d.styles({display:function(e,n){return!1===t[n].display?fm:vm},stroke:function(t,r){return s||h.strokeColor?vm:Ln(e,i.reverseColor?f-1-r:r,t&&t.data?t.data:t,n)}}).attrs({d:t.connectorPath||c,class:"zc_label_connector",id:function(e,t){return"link"+n+"_"+r+"_"+t},levelbycolumn:function(e,t){var n=v?v[v.length-1-t]:e.data||e;if(n.levelByColumn)return n.levelByColumn},levelbyrow:function(e,t){var n=v?v[v.length-1-t]:e.data||e;if(n.levelByRow)return n.levelByRow}}),Fc(d,e,"label",v)})}}),gw.add("bullet",function(e,t,n){var r=e.label||{},a=this,i=this.dataset,o=this.plotarea,l=this.systemConf,s=t.commonOption,c=t.commonRendererProp().params,u=c.axisrotated,d=c.yscale,h=c.xscale.bandwidth(),f=l.chart.axes.yaxis[0].orient||(this.axes.rotated?ib:rb),p=e.dataindex,g=!0===e.enabled&&!0===r.enabled&&Z(p),v=mt(this.staticPaneSVG.selectAll("g.qualitativeGroup"),"g",g?[1]:[],".","class","targetLabel");if(v.attr("transform","translate("+o.left+","+o.top+")"),g){var y=r.hAlign,m=r.vAlign,b=U(r.padding,2),x="fixed"===r.position,w=10*U(e.size,(s.levelMarkerWidth-2*U(e.padding,s.padding/2))/10),C=("line"===e.symbol?U(e.outerStrokeWidth,1):w)/2;m=u?(y=y||nb,m||(f===ib?ob:ib)):(y=y||(f===rb?ab:rb),m||nb);var k=this.userdata.metadata.columns,_=k.filter(function(t){return t.dataindex===e.dataindex}),S=_.length?_[0]:k[i.getColumnIdx("y",0)],O=S.datatype,A=S[O],P={left:0,right:0,top:0,bottom:0};u?P.top=P.bottom=o.adjust:P.left=P.right=o.adjust,x||!0!==l.chart.axes.yaxis[0].show||(P[f]=0);var T=a.container.node().getBoundingClientRect(),E=T.left+a.plotarea.left,L=T.top+a.plotarea.top,M=pr(a),z=M.left-P.left,I=M.top-P.top,D=M.right+P.left+P.right,R=M.bottom+P.top+P.bottom;kt(v,[r,l.chart,l.canvas,Qm]),mt(v,"text",n,null,null,null,null,function(e){return i.getX(e)}).each(function(e){var t=e[p];if(Z(t)){var n,o,l,c,f=i.getX(e),g=Z(r.text)?i.getCustomizedVal(a,r.text,0,null,null,e,"targetLabel"):Aa(A,t,O,a,"targetLabel"),v=t<0,k=v?-1:1,_=s.bandwidth1(f)+h/2,S=d(t);u?(n=S,o=_,m===ib?(o+=w/2,y===nb&&(l="1em",o=_+(x?h:w)/2)):m===nb?l="0.3em":m===ob&&(o-=w/2,y===nb?(l="-0.3em",o=_-(x?h:w)/2):l="1em"),y===nb?(c="middle",o-=m===nb?0:m===ob?b*k:-b*k):c=y===ab?(n+=(b+C)*k,v?"end":null):(n-=(b+C)*k,v?null:"end")):(n=_,o=S,y===ab?n+=(x?h:w)/2:y===nb?c="middle":y===rb&&(n-=(x?h:w)/2,c="end"),l=m===nb?(n+=y===nb?0:y===ab?b:-b,"0.3em"):m===ob?(o-=(b+C)*k,"-0.3em"):(o+=(b+C)*k,"1em")),fg(this).attrs({transform:"translate("+n+","+o+")","text-anchor":c,dy:l}).text(g);var P=this.getBoundingClientRect(),T=P.left-E,M=T+P.width,j=P.top-L,H=j+P.height,B=n+(T<z?z-T:D<M?-(M-D):0),N=o+(j<I?I-j:R<H?-(H-R):0);B!=n&&(n=B),N!=o&&(o=N),fg(this).attr("transform","translate("+n+","+o+")")}})}}),Zc.prototype.createElement=function(){return this.element=mt(this.chartObj.staticPaneSVG.selectAll("g.labelholder"),"text",[1],".","class","dummyText").text("qtyplkjhgfd").style("fill",fm)},Zc.prototype.setFont=function(e,t){_i(this.element,e,this.chartObj,fm,!1,t)},Zc.prototype.getMeasure=function(e){var t=M(this.element.node());return"w"===e?t.width:t.height},Zc.prototype.updateText=function(e,t){var n=e.contentType||"text",r="html"===n&&e.multiLine,a=this.element;a[n](e(t)),r&&ft(a,0)},gw.add("preCalculation",function(e,t,n){if(n.dataObject.hasLevelMarker||!t)return 0;var r,a=[],i=n.systemConf,o=n.dataObject,l=n.axes.rotated,s=o.isstacked(),c=o.noofBarEnabledSeries,u=.75*(l?n.plotarea.width:n.plotarea.height),d=i.chart.plot.datalabels.handleOverlapping,h="y"===e,f=new Zc(n),p=f.createElement(),g=n.datalabels.renderer?n.datalabels.renderer:n.datalabels.renderer=[],v=n.chartTypes[0].name===Nb;if(n.seriesdata.forEach(function(t,o){if(!t.disabled){var p=t.plotoptions,y=ki(i.chart.plot.plotoptions[n.chartTypes[o].name],p),m=Pi(y,n);if(g[o]=g[o]||{},g[o].show=m,g[o].config=y,g[o].labeltype=function(e){var t=e.showAs;if(rw.has(t))return t;var n=Dg();return t.toString().replace(Hy,function(){var e=arguments[1]||arguments[2]||arguments[3]||arguments[4]||arguments[5],t=arguments[0].match(/[a-z]+/gi)[0];if(n.has(t)){var r=n.get(t);r.push(e),n.set(t,r)}else n.set(t,[e])}),n}(y),m){f.setFont(y,o);var b=h&&c&&!s&&hl(n,o)===lb,x=bs(n,null,y,Wx,null,o),w=h?qy(0,Qy(U(y.padding,b&&Zn(n.chartTypes[o].value)?2:0),u)):0;(b&&vi(y,n)||v)&&(w=w+2*yi(y,n)+mi(y,n)),b&&(l||"html"===x.contentType)?function(e,t,n,r,a,i,o){var l,s=e.dataObject,c=e.seriesdata[o],u=Gt.helpers.getParsedYAxisOrder(c.yaxiscolumnorder),d=e.dataset.getDataType("y",u),h=s.getDomain(s.getCategories("x"),"x",!0),f=d==ox?s.getCategories("y",u):null,p=bs(e,null,t,Wx,null,o),g=Ie(Z(t.maxWidth)?t.maxWidth:"30%",e.plotarea.width);c.data.forEach(function(e,t){s.updateSeriesdatabyCategories(R(e),h,f,u).forEach(function(e){n.updateText(p,e),l=n.getMeasure(r?"w":"h"),r&&(l=Qy(l,g)),i.push(l+a)})})}(n,y,f,l,w,a,o):v?function(e,t,n,r,a){function i(t){var n=gw.get("hierarchy"),r=o.nodeAligns[t].map(function(e){return e.point}),a=[e.seriesdata[0],0,vm,vm,null,r,[0,0],null,!0];(n=n()).args(a).renderer(o),l.call(n,s);var i=s.getQueue(0),u=_slicedToArray(i,1)[0],d=vg(u.slice(c),function(e){return e.display?e.width:0});return c=r.length,d}var o=e.renderer[0],l=e.staticPaneSVG.selectAll("g.labelholder"),s=void 0,c=0;(s=Iy.initialize(e)).chartType="hierarchy";var u=i("start"),d=i("end");a.push(u),a.push(d)}(n,0,0,0,a):(r=f.getMeasure("h"),r+=w+(!d||l||"y"!=e||b?0:r),a.push(r))}}}),h&&c&&s&&!o.isStackedPercentChart){var y=n.dataObject.getEncode("stack"),m=Ya(n.dataObject.getEncode("stack",Object.keys(y)[0])),b=i.chart.plot.plotoptions[n.chartTypes[m].name].datalabels.stackLabels||{},x=!!b&&b.show,w=qy(0,Qy(U(b.padding,2),u));(n.datalabels.isStackedLabels=x)&&(f.setFont(b,m),hl(n,m,Yx)===lb&&(l||function(e,t){var n=e.dataObject.getEncode("stack");return Object.keys(n).some(function(n){var r=Ya(e.dataObject.getEncode("stack",n));return"html"===bs(e,null,t,Yx,null,r).contentType})}(n,b))?function(e,t,n,r,a,i){var o,l=e.dataObject.getEncode("stack"),s=Ie(Z(t.maxWidth)?t.maxWidth:"30%",e.plotarea.width);pe(l,function(l){var c=Ya(l),u=l.layout.getAllExtents(),d=bs(e,null,t,Yx,null,c);u.forEach(function(e){n.updateText(d,e),o=n.getMeasure(r?"w":"h"),r&&(o=Qy(o,s)),i.push(o+a)})})}(n,b,f,l,w,a):(r=f.getMeasure("h")+w,a.push(r)))}return p.remove(),v?a:0<a.length?qy.apply(null,a):0}),Iy.initialize=function(e){var t=e.plot.renderer.mode,n=gw.get(""+t),r=gw.get("connector"),a=Li(e),i=Kv,o={};o[Wx]=[],o[Yx]=[],o[Ux]=[],o[Gx]=[];var l,s={rangeChart:[i.arearange,i.boxplot],connector:[i.pie,i.sunburst,i.funnel,i.pyramid]};s[Ux]=Py.innerLabels,s[Gx]=Py.parentLabels;var c={add:function(t,n,r,a,i,c){i=i||Wx,c=Hm(c,n);var u=o[i];return u=u[c]=u[c]||[],i===Wx&&-1<s.rangeChart.indexOf(e.chartTypes[n].value)&&Z(a)&&(l=!0,u=u[a=a||0]=u[a]||[]),u[r]=u[r]||[],u[r].push.apply(u[r],t),Object.keys(t).filter(isNaN).forEach(function(e){return u[r][e]=t[e]}),u},update:function(e,t,n,r,a,i,o,l){o=o||Wx;var s=e.match(/\d+/g),u=s[0],d=s[1],h=s[2],f=s[4],p=Hm(s[3],u),g=(l||c.getQueue(p,f,o,u))[d][h];g&&(g.X+=t,g.Y+=n,g.display=g.display&&!r,void 0!==a&&(g.DY=a),i&&(g.hookPosition=i))},getQueue:function(t,n,r,a,i){r=r||Wx,a=Hm(a,t);var l=o[r];l=l[a];var c=ln(e,i,t);return r===Wx&&-1<s.rangeChart.indexOf(c.value)&&Z(n)&&l&&(l=l[n||0]),l},draw:function(){if(e.isAxisCategory){var i=e.dataObject.getEncode("stack"),c=e.dataObject.getStackGroup();(c=c?c.map(function(e,t){return t}):Object.keys(i)).forEach(function(r,i){var l=e.dataObject.getEncode("stack",r);if(o[Yx].length&&l){var s=Ya(l);n(e,o[Yx][s],i,"stacklabel")}else"svg"===t&&mt(a,"g",[],".","class","stacklabel_"+i)}),c.length||"svg"!==t||mt(a,"g",[],"#","id",Yx)}var u,d=e.dataObject.hierarchical,h=d&&d.facetRendering,f=[{data:e.seriesdata}];if(h){var p=(h&&d.pivotLayout).getRootNodeList("layer");f=Ve(p.panes),p.domain,u=d.pivotLayout.layers.groups}var g=0;f.forEach(function(t,i){t.data.forEach(function(t,i){var c,d=g++,f=(h&&t.layer,o[Wx][d]),p=h?u[t.layer].indexOf(t.value):i,v=h?t.row+"_"+t.column:i,y=ln(e,v,p).value,m=(e.renderer[d]||e.renderer[0]).commonRendererProp().params.bound;jn(e,v)&&0!==i||(h&&(c=Et("g",".grid"+(t.row||0)+"_"+(t.column||0),[1],a),Re(Py.axis,y)||c.attr("transform","translate("+m.x+","+m.y+")")),-1<s.rangeChart.indexOf(y)&&l?(n(e,f&&f[0],p,null,d,c),n(e,f&&f[1],p,null,d,c)):n(e,f,p,null,d,c),-1<s[Ux].indexOf(y)&&(-1<s.connector.indexOf(y)&&r(e,f,p,d,c),n(e,o[Ux][d],p,Ux,d,c)),-1<s[Gx].indexOf(y)&&n(e,o[Gx][d],p,Gx,d,c))})})}};return c},km.setComponent("labelRenderer",function(e,t,n){if(n.labelHandler=null,"image"!==n.plot.renderer.mode){n.dataObject;for(var r in n.isAxisCategory&&function(e){var t=e.dataObject,n=t.getEncode("stack")||[];pe(n,function(r,a){a=t.pivot?"0_0":+a;var i=Ya(r);if((t.noofBarEnabledSeries||t.isCombinationalChart)&&null!=i){var o=n[a].layout.getAllExtents();if(e.renderVisiblePointsOnly){var l=e.axes.x.scale.domain();o=o.filter(function(e){return Re(l,e[0])})}qc({renderer:e.renderer[i],chartObj:e,args:[{data:[o]},i,Yx,a],charttype:vb,paneid:"0_0"})}})}(n),e.forEach(qc),t)Qc(n,r)(n,t[r],e);if(n.staticPaneSVG.select(".temp_label").remove(),n.labelHandler){var a=n.staticPaneSVG.selectAll("g.labelholder"),i=n.plot.renderer.mode,o=n.dataObject.hierarchical,l=o&&o.facetRendering;e.forEach(function(e){var t=e.args[1],r=e.rendererIndex,o=e.paneid,s=/(pieInnerLabels|funnelInnerLabels)/.test(e.charttype),c="pieInnerLabels"===e.charttype&&Jn(ln(n,o,t).value)&&e.args[e.args.length-1]?Gx:s?Ux:Wx,u=function(e,t){var n=e.args[1],r=e.rendererIndex,a=e.paneid,i=ln(t,a,0).value,o=cn(t,i,"axis")?e.args[3]:null,l=/(pieInnerLabels|funnelInnerLabels)/.test(e.charttype),s="pieInnerLabels"===e.charttype&&Jn(ln(t,a,n).value)&&e.args[e.args.length-1]?Gx:l?Ux:Wx;return t.labelHandler.getQueue(n,o,s,r,a)}(e,n),d=gw.get("boundBox-"+i);if(d!==bm){var h=d().args(u);(l&&Z(o)?Et("g",".grid"+o,[1],a):a).call(h,t,c,r)}}),n.labelHandler.draw()}}}),gw.add("svg",function(e,t,n,r,a,i){function o(t,n,r,a,i){if(t[w](function(e,t){return n[t].text}),C&&t.each(function(e,t){ft(fg(this),n[t].X)}),t.styles({display:function(e,t){return!1===n[t].display?fm:null},fill:N,"pointer-events":fm}).attrs({x:function(e,t){return n[t].X},y:function(e,t){return n[t].Y},dy:function(e,t){return n[t].DY},"text-anchor":function(e,t){return n[t].ANCHOR},id:function(e,t){return n[t].ID},transform:function(e,t){var r=n[t].xy||[n[t].X,n[t].Y],a="";return n[t].xy&&(a="translate("+r+")"),Z(y)&&(a+="rotate("+y+" "+r+")"),a||vm},"clip-path":z?function(t,r){var a=M(this),i={name:"textClip",id:e.id,x:a.x,y:a.y,width:n[r].width,height:a.height},o={chartObj:e},l=tb.get(tb.svg_clips,"rect",i,o);return"url("+e.defsLocation+"#"+l+")"}:null,levelbycolumn:function(e,t){var n=i?i[i.length-1-t]:e.data||e;if(n.levelByColumn)return n.levelByColumn},levelbyrow:function(e,t){var n=i?i[i.length-1-t]:e.data||e;if(n.levelByRow)return n.levelByRow}}),Fc(t,e,"label",i),r&&("contrast"===H?t.attr("stroke",function(e,t){return oe(N?N(e,t):W)}):t.attr("stroke",F)),a&&t.attr("stroke-width",f.strokeWidth),P&&void 0!==f.fontColor&&f.fontColor==vm&&t.style("fill",function(e,t){var n=dx.getWaterfallColor(e,d.rp.categoryColorConfig);if(n)return n}),!(A||E||_||L||T||l||s||e.isGeoMap))if("html"===w){var o=vi(f,e)?yi(f,e)+mi(f,e):0;t.each(function(t,r){if(!1!==n[r].display){var a=fg(this),i=gt(a,I);if(pt(a,e,d.trans,d.txtHgt,null,i,n[r].isLeft?o:0),"middle"===n[r].ANCHOR){var l=(n[r].width-M(this).width)/2,s=n[r].isLeft?1:-1,c=n[r].X+l*s;a.attr("x",c),ft(a,c)}}})}else Ei(t,e,d.trans,d.txtHgt)}r=r||"label",a=Hm(a,n);var l="stacklabel"===r,s=r===Ux||r===Gx,c=Li(e),u=mt(i||c,"g",t?[1]:[],".","class",r+"_"+a);if(t){var d=t.properties,h=d.dataUpdate,f=d.dataLabels,p=d.data,g=d.rp,v=rn(e)?g.legendOrderIndex:n,y=d.rotation,m=d.rangeChart,b=d.yrangePos,x=d.reverseColor,w=d.contentType||"text",C=d.isMultiLine,k=d.chartType,_=cn(e,k,"polarAxis"),S=cn(e,k,"hierarchy"),O=cn(e,k,"nonAxisMultiSeries"),A=cn(e,k,"axis"),P=k==Kv.waterfall,T=k==Kv.packedbubble,E=k==Kv.treemap,L=k==Kv.bullet||k==Kv.dial,z="clip"===f.textOverlap,I=ys(f,e),D=A||_?vm:h.length,R="scatter"===d.type,j=dx.isQuantileColorScale(e),H=f.strokeColor,B=vm,N=vm,F=vm;H===Ey&&(H=e.systemConf.chart.plot.datalabels.strokeColor),(j||g.threshold||S||!(A||e.isGeoMap||_||O)||d.multiColoring)&&(N=(B=function(t){return function(r,a){var i=x?D-1-a:(A||_||O)&&!d.multiColoring?n:a,o=Ln(e,i,r&&r.data?r.data:r,v),l=d.isSunburst&&d.parentInnerLabel&&r.children?d.parentInnerLabel:f,c=((r&&r.data?r.data:r)||[]).paneid;return E&&s&&/(top-outset|bottom-outset)/.test(l.position)&&zg(o).opacity<.1&&(o="white"),Oi(e.systemConf,o,l,e,s,n,void 0,t,c)}})("fontColor"),F=B("strokeColor")),z&&mt((Km.SAFARI?e.svg:e.getPatternSvg()).selectAll("defs"),"g",[1],".","class","textClipPaths"),m&&(u=mt(u,"g",[1],".","class","rangePos_"+b)),l&&u.attr("id",Yx),u.attrs({"text-anchor":R?"middle":null,transform:d.translation});var V=_i(u,f,e,g.color,s,n,l),W=V.fill;H===Ey||He("paintOrder")||(u.style("stroke",null),F=F||V.stroke),_&&u.attr("transform","translate("+e.plotarea_approx.x+","+e.plotarea_approx.y+")"),t.forEach(function(e,t){var n,r=e.dataUpdate||h,a=e.data||p,i=mt(u,"g",[1],".","class","subseries_"+t),l=H!==Ey;if(i.attr("transform",e.translation),l&&!He("paintOrder")){var s=mt(mt(i,"g",[1],".","class","outlineGroup"),"text",r,".","class","outline");n=mt(i,d.GLT&&d.GLT.hasShowAsFunction?"g":"text",r,".","class","label"),o(s,e,l,l,a),o(n,e,void 0,void 0,a)}else o(n=mt(i,d.GLT&&d.GLT.hasShowAsFunction?"g":"text",r),e,l,void 0,a)})}}),gw.add("dial",function(){function e(e){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a=arguments[2];e.each(function(){var e=n[0],i=n[1],o=t.commonRendererProp().params,l=o.chartObj,s=o.commonPlotOptions,c=o.color,u=o.rendererIndex,d=void 0===u?i:u,h=r.paneid,f=e.plotoptions,p=l.plotarea_approx,g=l.axes.y.groups[0].scale.domain(),v=ki(s,f,l,i),y=Pi(v,l),m=bs(l,o,v,Wx,g[1]-g[0],0,void 0,h),b=m.contentType||"text",x="html"===b&&m.multiLine;if(y){var w=vi(v,l)?yi(v,l)+mi(v,l):0,C=mt(l.staticPaneSVG.select(".labelholder"),"text",[1],".","class","temp_label");_i(C,v,l,c[0]),C.style("fill",pm);var k=[e[0].data[0][0]],_=[];if(k.forEach(function(e,t){var n=x?"0.9em":"-.3em",r=m(e);C[b](r).attrs({x:o,dy:n,"text-anchor":"middle"});var a=M(C.node()),o=Z(v.x)?V(v.x,e,l,a):p.x,c=Z(v.y)?V(v.y,e,l,a):p.y+(s.needle.show?a.height+(+v.padding||0)+(+s.needle.width/2||7)+w:a.height/2);x&&(Z(v.y)||(c-=a.height),ft(C,o),a=M(C.node()));var u={X:o,Y:c,DY:n,ANCHOR:"middle",text:r,display:!0,ID:"lbl"+i+"_0_"+t,width:a.width,height:a.height};_.push(u)}),a){var S=_[0],O=mt(a,"text",y?k:[]);_i(O,v,l,c[0]),O[b](S.text).attrs({"text-anchor":S.ANCHOR,dy:S.DY,transform:"translate("+S.X+","+S.Y+")"}),x&&ft(C,S.X)}else(0,r.add)(_,i,0,null,null,d,h).properties={type:Eb,dataLabels:v,dataUpdate:k,showlabel:y,rp:o,contentType:b,isMultiLine:x,chartType:Kv.dial}}})}var t,n;return e.renderer=function(n){return arguments.length?(t=n,e):t},e.args=function(t){return arguments.length?(n=t,e):n},e}),gw.add("funnel",function(){function e(e,r){e.each(function(){function e(e){var t=c[$-1-e],n=Pn(C.getClr(t),b)&&!Bn(b,g,$-1-e);return t.disabled||!C.getY(t,k)||!n}function a(e){switch(Q){case"singleside":return!1;case"doubleside":return e%2==0;case"strokeddoubleside":return u/2<=e}}function i(e,t,n,r){var i=a(t);return K&&"overlap"!=n.stage?i?e.leftx-R:e.rightx+R:(r=Z(r)?r:F,i?0-r:v+r)}var o,l=n[0],s=n[1],c=n[2],u=n[3],d=n[4],h=n[5],f=n[6],p=n[7],g=r.paneid,v=f.width,y=f.height,m=t.commonRendererProp().params,b=m.chartObj,x=b.systemConf,w=m.commonPlotOptions,C=m.dataset,k=m.yaxiscolumnorder,_=Mi(m,g,n[8]),S=m.rendererIndex,O=void 0===S?s:S,A=ln(b,g,s),P=A.name,T=A.type,E=t.plotarea&&t.plotarea()&&t.plotarea().top||0,L="translate("+n[9]+")",z=P===Mb,I=(l=l[s]).plotoptions,D=0,R=0,j=0,H=0;if(vi(o=ki(w,I,b,s),b)){var B=gi(o,b),N=xi(B.hook);D=yi(o,b),R=D+mi(o,b)+N.height,j=N.width,H=B.radius}var F=f.datalabelPadding||+o.padding||0,V=o.type,W=!0===x.chart.plot.datalabels.handleOverlapping,Y=ys(o,b),U=bs(b,m,o,Wx,h,s,void 0,g),G=U.contentType||"text",X="html"===G,q=X&&U.multiLine,Q=Pi(o,b),K=!0===o.relativeX;if(Q){Q=Q?V:"hidden";var $=c.length,J=(Or(b.svg.selectAll("g."+P+"group")).translate,0),ee=mt(b.staticPaneSVG.select(".labelholder"),"text",[1],".","class","temp_label");_i(ee,o,b,m.color),ee.attr("transform",L).style("fill",pm);var te=r.add;(jn(b)?[l]:l.data).forEach(function(t,r){var l=p,u=[],h=Hm(n[8],r),f={},b=[];l.forEach(function(t,n){var r,o=!e(n),l=a(J),p=0,g=i(t,J,f)+(l?-R:R),y=z&&l?t.leftY:qy(t.y,Y-d-t.y),m=q?"middle":l?"end":null,x=q?"0.9em":"0.3em",w=t.data=c[$-1-n],C=U(w);if(ee[G](C).attrs({x:g,y:y,"text-anchor":m,dy:x}),o&&q&&(ft(ee,g),y-=(r=M(ee.node())).height/2,g+=r.width/2*(l?-1:1),ft(ee,g),ee.attr("y",y)),W){if(o){p=bi((r=M(ee.node())).height,D,H,j);var k=l?-(0+F+R):v+F+R;q&&(k+=r.width/2*(l?-1:1)),b.push({id:"lbl"+s+"_"+h+"_"+n,x1:r.x-R,x2:r.x+r.width+R,y1:r.y-5-R-p/2,isLeft:l,y2:r.y+r.height+5+R+p/2,DX:k-g})}}else p=bi((r=M(ee.node())).height,D,H,j);var _={X:g,Y:y,ANCHOR:m,DY:x,text:C,display:o,ID:"lbl"+s+"_"+h+"_"+n,width:o?r.width:0,height:o?r.height+p:0,hookPosition:l?ab:rb};X&&(_.isLeft=l),u.push(_),J+=o?1:0}),J=-1,u.id=g+"("+s+"_"+h+")",u.translation=L,u.dataUpdate=l,u.overlap=f,u.connectorPath=function(t,n){J+=e(n)?0:1;var r=u[n].Y+(q?u[n].height/2:0),o=z&&a(J)?t.leftY:t.y;return"M"+function(e,t){return a(t)?e.leftx+F:e.rightx-F}(t,J)+" "+o+" L"+i(t,J,f,0)+" "+o+" L"+i(t,J,f)+" "+r};var x=te(u,s,h,null,null,O);b.forEach(function(e){return e.queue=x}),_.push.apply(_,b),_.queue=x,_.queues=_.queues||[],_.queues.push(x),_.subSeriesIndex=h,x.properties={type:Tb,dataLabels:o,dataUpdate:l,showlabel:Q,rp:m,trans:n[9],txtHgt:Y,reverseColor:!0,onOverlap:function(e){e.overlap.stage="overlap"},contentType:G,isMultiLine:q,chartType:T},_.TOP=E-n[9][1],_.BOTTOM=y+n[9][1],_.actualType=Lb})}})}var t,n;return e.renderer=function(n){return arguments.length?(t=n,e):t},e.args=function(t){return arguments.length?(n=t,e):n},e}),gw.add("funnelInnerLabels",function(){function e(e,r){e.each(function(){var e=n[0],a=n[1],i=n[2],o=n[4],l=n[5],s=n[6],c=n[7],u=s.width,d=t.commonRendererProp().params,h=d.rendererIndex,f=void 0===h?a:h,p=d.chartObj,g=d.commonPlotOptions,v=d.dataset,y=d.yaxiscolumnorder,m=r.paneid,b=ln(p,m,a),x=b.name,w=b.value,C="translate("+n[9]+")",k=x===Mb,_=ki(g,(e=e[a]).plotoptions,p,a),S=_.innerLabel,O=s.datalabelPadding||+_.padding||0,A=i.length,P=!0===S.show,T=ys(S,p),E=bs(p,d,S,Ux,l,a,void 0,m),L=E.contentType||"text",z="html"===L&&E.multiLine,I=vi(_,p)?yi(_,p)+mi(_,p):0;if(P=P&&Ht(p,Wx),T+=2*I,!e.disabled&&P){var D=mt(p.staticPaneSVG.select(".labelholder"),"text",[1],".","class","temp_label");_i(D,S,p,d.color),D.attr("transform",C).style("fill",pm);var R=r.add;e.data.forEach(function(e,t){var r=c,l=[],h=Hm(n[8],t);r.forEach(function(e,t){var n=!function(e){var t=i[A-1-e],n=Pn(v.getClr(t),p)&&!Bn(p,m,A-1-e);return t.disabled||!v.getY(t,y)||!n}(t),r=k?e.midX:u/2,c=k?e.leftY:e.y,d=z?"0.9em":"0.5em",f=E(i[A-1-t]),g=null;if(D[L](f).attrs({x:r,y:c,dy:d,"text-anchor":"middle"}),n&&z&&(ft(D,r),c-=(g=M(D.node())).height/2,T=g.height),n)if(g=g||M(D.node()),k)n=!(T>2*(e.y0-e.leftY));else{var b=s.canOverlap?(e.rightx-e.leftx-2*O)/u*o:o;n=!(T<e.y-(e.y0-e.y)+b&&T>e.y0+b-(e.y-(e.y0-e.y)+b))}var x={X:r,Y:c,DY:d,ANCHOR:"middle",text:f,display:n,ID:"innerlbl"+a+"_"+h+"_"+t,width:n?g.width:0,height:n?g.height:0};l.push(x)}),l.dataUpdate=r,l.data=i,l.translation="translate("+n[9]+")",R(l,a,h,vm,Ux,f,m).properties={type:Tb,dataLabels:S,dataUpdate:r,showlabel:P,rp:d,trans:n[9],reverseColor:!0,contentType:L,isMultiLine:z,chartType:w,data:i}})}})}var t,n;return e.renderer=function(n){return arguments.length?(t=n,e):t},e.args=function(t){return arguments.length?(n=t,e):n},e}),gw.add("pie",function(){function e(e,u){e.each(function(){var e=a[0],d=a[2],h=a[3],f=a[4],p=a[5],g="translate("+a[8][0]+","+a[8][1]+")",v=a[9]||{},y=r.commonRendererProp().params;l=y.chartObj,s=l.dataset,c=u.paneid;var m=l.systemConf,b=y.commonPlotOptions,x=Mi(y,c,a[10]),w=y.datasetIndex||a[1]||0,C=Hm(u.rendererIndex,w),k=(r.plotarea&&r.plotarea()||l.plotarea).height,_=r.plotarea&&r.plotarea()&&r.plotarea().top||0,S=ln(l,c,w).value;o=Jn(S),e=e[w],i=a[6];var O,A,P,T,E=!0===m.chart.plot.datalabels.handleOverlapping,L=e.plotoptions,z=ki(b,L,l,w);if(T=Pi(z,l),!(e.disabled||!T||o&&Bn(l,c,w))){var I=z.type,D=z.line,R=bs(l,y,z,Wx,f,w,void 0,c),j=R.contentType||"text",H="html"===j,B=H&&R.multiLine,N=0,F=0,V=0,W=0;if(vi(z,l)){var Y=gi(z,l),G=xi(Y.hook);N=yi(z,l),F=N+mi(z,l)+G.height,V=G.width,W=Y.radius}T=T?I:"hidden",O=(v.padding||+(z.padding||0))+F,P=ys(z,l),A=+(zm.getValueOfPlotOptions(L,b)("outerPadding")||0),r.autoLabelDone=!1,r.showlabel=T,r.lineStrokeWidth=U(D.strokeWidth,1);var X=mt(l.staticPaneSVG.select(".labelholder"),"text",[1],".","class","temp_label");X.attr("transform",g);var Z=u.add;(o?e:jn(l)?[e]:e.data).forEach(function(e,s){var u=r.seriesdataAfterUpdate?r.seriesdataAfterUpdate[s]:o?e:d,f=Hm(a[10],s),v=[],m=[];_i(X,z,l,y.color),X.style("fill",pm),u.forEach(function(e,a){var i,l=null,c=!t(e),u=0,d=n(e),g=d<0||sm<d,y="doubleside"==T?d<0||sm<d?-(h+O):h+O:p.centroid(e)[0],b=p.centroid(e)[1]+qy(0,P-A-10-(h+p.centroid(e)[1])),x=B?"middle":g?"end":"start",C=B?"0.9em":"circular"==T&&sm/2<d&&d<3*sm/2?Jl(d)+"em":"0.3em",k=C,_=e.data;if(i=(o?0==e.depth:t(e))?null:R(_),X[j](i).attrs({x:y,y:b,dy:C,"text-anchor":x}),c&&B&&(ft(X,y),l=M(X.node()),"circular"==T?(b+=kg().range([-1,0]).domain(d<sm?[0,sm]:[2*sm,sm])(d)*l.height,y+=(0<d&&d<sm?.5:sm<d&&d<2*sm?-.5:0)*l.width):(b-=.5*l.height,y-=l.width/2*(g?1:-1)),X.attr("y",b),ft(X,y)),E){if(r.showlabel="auto",B||(C="0.3em",X.attr("dy",C)),c){u=bi((l=M(X.node())).height,N,W,V);var S=g?-(h+O+10):h+O+10;B&&(S+=l.width/2*(g?-1:1)),v.push({id:"lbl"+w+"_"+s+"_"+a,x1:l.x-F,x2:l.x+l.width+F,y1:l.y-5-F-u/2,y2:l.y+l.height+5+F+u/2,isLeft:g,actualDY:k,DX:S-y,overlappingHookPosition:g?ab:rb})}}else u=bi((l=M(X.node())).height,N,W,V);var L={X:y,Y:b,DY:C,ANCHOR:x,text:i,display:c,ID:"lbl"+w+"_"+f+"_"+a,width:c?l.width:0,height:c?l.height+u:0,hookPosition:"circular"===T?null:g?ab:rb};H&&(L.isLeft=g),m.push(L)}),m.id=c+"("+w+"_"+f+")",m.translation=g,m.dataUpdate=u,m.renderer=r;var b=Z(m,w,f,null,null,C);v.forEach(function(e){return e.queue=b}),x.push.apply(x,v),x.queue=b,x.queues=x.queues||[],x.queues.push(b),x.subSeriesIndex=f,b.properties={type:Tb,dataLabels:z,dataUpdate:u,showlabel:r.showlabel,rp:y,trans:a[8],txtHgt:P,isSunburst:o,connectorPath:function(e,t){var r=n(e);return"M "+i.centroid(e)[0]+" "+i.centroid(e)[1]+" L"+p.centroid(e)[0]+" "+p.centroid(e)[1]+" L"+p.centroid(e)[0]+" "+p.centroid(e)[1]+" L"+(r<0||sm<r?-(h+O-F):h+O-F)+" "+p.centroid(e)[1]},onNonOverlap:function(e){e.showlabel=e.renderer.showlabel=T,e.renderer.autoLabelDone=!0},onOverlap:function(e){e.connectorPath=function(t,r){var a=n(t),o=qy(0,P-A-10-(h+p.centroid(t)[1])),l=p.centroid(t)[1]+o,s=a<0||sm<a?-1:1,c=e[r].Y+(B?e[r].height/2:0),u=c-l?(h+O-F+10)*s:p.centroid(t)[0],d=p.centroid(t)[1],f=(h+O-F+10)*s,g=c;return"M "+i.centroid(t)[0]+" "+i.centroid(t)[1]+" Q "+u+" "+d+" "+f+" "+g}},contentType:j,isMultiLine:B,chartType:S},x.TOP=_-a[8][1],x.BOTTOM=_+k-a[8][1]})}})}function t(e){return!(Pn(s.getClr(o?e:e.data),l)&&(o||!Bn(l,c,e.index)))||o&&null==e.parent||0==e.value}function n(e){return((o?i.startAngle()(e):e.startAngle)+(o?i.endAngle()(e):e.endAngle))/2}var r,a,i,o,l,s,c;return e.renderer=function(t){return arguments.length?(r=t,e):r},e.args=function(t){return arguments.length?(a=t,e):a},e}),gw.add("pieInnerLabels",function(){function e(e,a){e.each(function(){function e(e,t){var n=h.innerRadius()(t),r=h.outerRadius()(t),a=h.startAngle()(t),o=h.endAngle()(t),l=e.x*e.x+e.y*e.y,s=i(e);return n*n<=l&&l<=r*r&&es(a,o,s)}function i(e){return am(e.x,-e.y)}function o(e){return!(yn(w?e:e.data||e,r)&&(_||w||!Bn(r,b,e.index)))||w&&null==e.parent||0==e.value}function l(e){return((w?C.startAngle()(e):e.startAngle)+(w?C.endAngle()(e):e.endAngle))/2}var s=n[0],c=n[2],u=n[4],d=n[8]?"translate("+n[8][0]+","+n[8][1]+")":null,h=n[7],f=n[9],p=t.commonRendererProp().params,g=p.rendererIndex,v=void 0===g?m:g;p.dataset,r=p.chartObj;var y=p.commonPlotOptions,m=n[1]||0,b=a.paneid,x=ln(r,b,m).value,w=Jn(x),C=n[6],k=p.yaxiscolumnorder;f=w?f:vm,s=s[m];var _=Py.bubblePie.has(x),S=ki(y,s.plotoptions,r,m).innerLabel,O=!0===S.show&&Ht(r,Wx);if(f){var A=Im(S.parentLabel,S);O=!1!==(Z(A.show)?A.show:S.show),S=A}var P=bs(r,p,S,Ux,u,m,void 0,b),T=P.contentType||"text",E="html"===T&&P.multiLine,L=S.textOverlap||"adjust",z=vi(S,r)?yi(S,r)+mi(S,r):0;if(!(s.disabled||!O||(_||w)&&Bn(r,b,m))){var I=mt(r.staticPaneSVG.select(".labelholder"),"text",[1],".","class","temp_label");_i(I,S,r,p.color),I.attr("transform",d).style("fill",pm);var D=a.add;(w?s:jn(r)?[s]:s.data).forEach(function(a,s){var u=_?t.seriesdataAfterUpdate?t.seriesdataAfterUpdate[s]:a:c,g=[],y=Hm(n[10],s);u.forEach(function(t,n){var a,c,u=null,d=!o(t),f=E?"0.9em":"0.35em",v=0,x=0;if(_){var O=p.stacked,A=p.axisrotated,D=p.xscale,R=p.yscale,j=cw.getKey(t,m,r),H=r.subrenderer[s][j];t=H.data[m],h=H.arc,v=r.dataObject.getXYvalue(A,O,D,R,k,t.data,"x",null),x=r.dataObject.getXYvalue(A,O,D,R,k,t.data,"y",null);var B=Ql(r.dataObject.getXYvalue(A,O,D,R,k,t.data,"z",r.zscale)/4,l(t));P=bs(r,p,S,Ux,H.total,m,void 0,b),a=v+B[0],c=x+B[1]}else a=h.centroid(t)[0],c=h.centroid(t)[1];var N=t.data,F=(w?0==t.depth:o(t))?null:P(N);if(I[T](F).attrs({x:a,y:c,dy:f,"text-anchor":"middle"}),d&&E&&(ft(I,a),c-=(u=M(I.node())).height/2),L!=fm){u=u||M(I.node());var V=h.centroid(t),W=u.width/2+z,Y=u.height/2+z,U={x:V[0]-W,y:V[1]-Y},G={x:V[0]+W,y:V[1]-Y},X={x:V[0]-W,y:V[1]+Y},Z={x:V[0]+W,y:V[1]+Y},q=e(U,t)&&e(G,t)&&e(X,t)&&e(Z,t);if(!q){if("adjust"===L){var Q=w?C.startAngle()(t):t.startAngle,K=w?C.endAngle()(t):t.endAngle,$=l(t),J=u.height+2*z,ee=[i(U),i(G),i(X),i(Z)],te=[U,G,X,Z],ne=Fg(ee),re=te[ee.indexOf(ne[0])],ae=te[ee.indexOf(ne[1])],ie=Jy((re.x-ae.x)*(re.x-ae.x)+(re.y-ae.y)*(re.y-ae.y)),oe=Ky(ie/2/rm((K-Q)/2))+J,le=[tm($)*oe,-em($)*oe];U={x:le[0]-W,y:le[1]-Y},G={x:le[0]+W,y:le[1]-Y},X={x:le[0]-W,y:le[1]+Y},Z={x:le[0]+W,y:le[1]+Y},q=e(U,t)&&e(G,t)&&e(X,t)&&e(Z,t)}q?(a=le[0]+v,c=le[1]+x):d=!1}}else u=M(I.node());var se={X:a,Y:c,DY:f,ANCHOR:"middle",text:F,display:d,ID:"innerlbl"+m+"_"+y+"_"+n,width:u.width,height:u.height};g.push(se)}),g.dataUpdate=u,g.translation=d,D(g,m,y,vm,f?Gx:Ux,v,b).properties={type:Tb,dataLabels:S,dataUpdate:u,showlabel:O,rp:p,trans:n[8],isSunburst:w,contentType:T,isMultiLine:E,chartType:x}})}})}var t,n,r;return e.renderer=function(n){return arguments.length?(t=n,e):t},e.args=function(t){return arguments.length?(n=t,e):n},e}),km.setComponent("mark",Kc);var NC={top:"0.91em",center:"0.3em",bottom:"-0.3em"},FC=(_createClass(eu,[{key:"create",value:function(){var e=this.spec,t=e.data,n=void 0===t?[1]:t,r=e.config,a=Kc("g",".zc-legend-title");if(!r.show)return this.encode=a;var i,o,l=this.parse(),s=l.titleParser,c=l.backgroundParser;return i=new Jc({data:n,parser:s}),a.children.push(i),o=Kc(Um,vm,n,{properties:{attrs:{d:function(){return c.poly(i.element)}},styles:{opacity:0}}}),a.children.push(o),this.encode=a}},{key:"parse",value:function(){var e=this.spec,t=e.config,n=xe(Hm(t.margin,3));return{titleParser:$c(e,[n.left,n.top],function(e,t){var n=e.x,r=void 0===n?0:n,a=e.y,i=void 0===a?0:a;return{left:r+t.left,top:i+t.top,right:r+e.maxWidth+t.left-t.right,bottom:i+e.maxHeight+t.top-t.bottom}}(e.bound,n),e.margin||n),backgroundParser:{poly:function(e){var t=function(e,t){return e.width||e.height?{x:e.x-t.left,y:e.y-t.top,w:e.width+t.left+t.right,h:e.height+t.top+t.bottom,r:we(0)}:void 0}(M(e),n);return t&&wt(t.x,t.y,t.w,t.h,t.r)}}}}}]),eu);km.setComponent("legendTitleSvg",FC);var VC=(_createClass(tu,[{key:"create",value:function(){var e=this.spec,t=e.data,n=void 0===t?[1]:t,r=e.onStart,a=e.onEnd,i=this.parse(),o=i.backgroundParser,l=i.borderParser,s=i.poly,c=Kc(Um,".zc-legend-background",n,{order:":first-child",properties:{attrs:{d:s},styles:_extends({},o,l)},onStart:function(e){e.style("display",fm),V(r,e)},onEnd:function(e){e.style("display",vm),V(a,e)}});return this.encode=c}},{key:"parse",value:function(){var e=this.spec,t=e.config,n=function(e){var t=e.color,n=void 0===t?pm:t,r=e.alpha;return{fillColor:n,fillOpacity:r}}(t.background),r=function(e){var t=e.show,n=e.color,r=e.size,a=e.alpha,i=e.style,o=e.lineCap,l=e.radius;return t?{strokeColor:n,strokeWidth:r,strokeOpacity:a,dashStyle:i,lineCap:o,radius:l}:{strokeWidth:0,radius:0}}(t.border),a=xe(e.margin||t.padding);return{backgroundParser:n,borderParser:r,poly:function(){var t=function(e,t,n){return{x:e.x-t.left,y:e.y-t.top,w:e.width+t.left+t.right,h:e.height+t.top+t.bottom,r:we(n)}}(e.bound(),a,r.radius);return wt(t.x,t.y,t.w,t.h,t.r)}}}}]),tu);km.setComponent("legendBackgroundSvg",VC);var WC=1e-12,YC={brush:function(e,t){var n=[],r=t.helperOptions,a=r.config,i=t.brushInstance;return function(){ou(r,i.parent_group,i,e);var o=k(e.legend.component.highlightItem),l=i.getSelection(),s=nu(r,l);!function(e,t,n){t.style("fill",function(t,r){return function(e,t,n,r,a){var i=n?[0,e.length-1]:[e.length-1,0];r&&i.reverse();var o=e[i[t]];return a(o)}(n,r,e.isHorizontal,e.reversed,e.scaleObj)})}(r,t.slider,s),o&&!r.singleDomainContinuous&&(a.filter.range=s,e.legend.component.highlightItem(vm,!1,!0),re(s)!==re(n)&&e.addRemoveSeries(),t.tooltipComponent.show(),n=s)}},end:function(e,t){var n=t.helperOptions,r=t.brushInstance,a=[];return function(i,o){e.cache.search={},t.tooltipComponent&&t.tooltipComponent.hide();var l=r.getSelection(),s=ru(n,l),c=re(l)===re(a);te(s)&&!c&&(s.sort(Wg),a=s,r.setSelection(s,o?250:0))}},start:function(){return function(e){var t=e.sourceEvent;t&&t.preventDefault&&t.preventDefault()}}};uu.prototype.initialize=function(e){var t,n,r,a=this.chartObj,i=e.position,o=e.spec,l=o.config,s=o.bound,c=Dx.getColorBandDimension(l,s,a),u=c[0],d=c[1],h=l,f=h.colorBand,p=Dx.getOrient(h),g=xr(h),v=a.dataset.getDataType("clr"),y=f.ranges,m=l.filter.range,b=a.axes.clr.scale,x=b.domain(),w=Dx.isReversedColorAxis(l),C="horizontal"===g.layout,k=C?[0,u]:[d,0],_=[[0,0],c];if(w&&k.reverse(),r=(t=hu(f,v,b,k)).singleDomainContinuous,t.domain(),n=du(y,m,b,a.axes.clr.brushScale=t,v),this.context=Et("g",".brush",l.filter.enabled?[1]:[],e.element||a.svg).attr("transform","translate("+i.join(" ")+")"),!this.context.empty()){this.helperOptions={isHorizontal:C,range:k,orient:p,singleDomainContinuous:r,dimension:c,initialExtent:n,scale_domain:x,datatype:v,reversed:w,scaleObj:b,config:l,bound:s,spec:o,ranges:y,type:C?"x":"y",element:e.element,scale:t,brushOptions:h.filter};var S=this.addBrush(_);this.addEvent(),S.setSelection(n),this.enableTooltip(p)}},uu.prototype.enableTooltip=function(e){var t=this,n=t.chartObj,r=t.brushInstance,a=t.helperOptions.brushOptions.slider.tooltip,i={show:function(){n.legend.component.highlightItem(vm,!1,!0)}};t.tooltipComponent=new Mo(a,r,e,function(e,n){return lu(t,e)},n,i)},uu.prototype.addBrush=function(e){var t=this.chartObj,n=this.helperOptions,r=n.config,a=n.bound,i=n.brushOptions.slider,o=i[i.type],l=Hm(i.shadow,o.shadow),s=To(r,a,t),c=fo(n.type,i.type,e,s[2],o),u=new Oo({type:n.type,behaviour:"resizeToMouse",extent:e,styles:{track:n.brushOptions.track,selection:{opacity:0}}}),d=this.brushInstance=new Pw(u);if(d.bindTo(this.context),this.slider=d.addCustomHandle(c),l){var h=Hm(c[0]._effectElementIndex,0)+1;this.slider.select("path:nth-child("+h+")").attr("filter",zt(Hm(i.shadow,o.shadow),t))}return d},uu.prototype.addEvent=function(){var e=this,t=e.chartObj,n=e.brushInstance;e.hooksIds=Rg(),pe(YC,function(r,a){e.hooksIds.add(n.addHook(a,r(t,e)))})};var UC={fillColor:"fill",fillOpacity:"fill-opacity",strokeColor:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",lineCap:"stroke-linecap",dashStyle:"stroke-dasharray"};km.setComponent("mark.render",gu),Xv.continuous=function(){},Xv.continuous.get=function(e){function t(r){return r.each(function(t){function r(){return Hr(i,n,null,h,l)}var a=l,o=a.colorBand,c=function(e){var t={label:{},grid:{color:pm},ticklabel:{fontColor:e.fontColor,fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontWeight:e.fontWeight,tooltip:e.tooltip},minmaxlabels:{padding:2,align:"center",fontSize:e.fontSize},tickmark:{color:"#B0B0B0",size:3},axisline:{show:!1}},n=e.colorAxis||{};return n=Im(t,n,!0)}(a),u=U(o.strokeWidth,1)/2,d=!1===c.show,h=fg(this);nt("filter",a,n.globalProp,function(e,t,n){var r={fillColor:pm},a={type:"lever",shadow:"0 0 2px rgba(0,0,0,0.2)",tooltip:_extends({},{enabled:!0,padding:5,margin:5,backgroundColor:"white",borderColor:"rgb(51, 51, 51)",fontColor:"rgb(51, 51, 51)"},{enabled:"continuous"===qt(e,n),fontSize:n.globalProp.fontL1Size.l5})};return{track:r,slider:Im(uo.apply(null,To(e,t,n)),a,!0)}}(l,s,n),!0),h.attr("transform",vm);var f=mt(h,"g",[1],".","class","zcheader"),p=mt(h,"path",[1],".","class","colorband"),g=mt(h,"g",d?[]:[1],".","class","legend-axis");h.selectAll(".brush,.highlight,.zc-legend-background").style("display",fm),vu(f,a,s,h,e.globalFont),Xv.colorBand(p,e,n),Xv.colorAxis(g,e,n,c);var v=d?[0,0]:Or(g).translate,y=mu(g,p,f,l,c,v,u),m=r();d||(Xv.colorAxis.handleOverlapNOverlap(g,y.axisGroupPosition,m,n,e,c,h),y=mu(g,p,f,l,c,v,u),vu(f,a,s,h,e.globalFont),m=r()),h.selectAll(".brush,.highlight").style("display",vm);var b={position:y.bandGroupPosition,element:h,spec:e};n.legend.brush=new uu(n,b),Xv.continuous.events(n,{position:y.bandGroupPosition,spec:e,element:h}),m=r(),function(e,t){var n={bound:function(){return M(e)},config:t,margin:t.colorBand.padding};gu(new VC(n).create(),e)}(h,l)}),t}var n,r,a,i,o=Vg("legendClick","legendDblclick","legendMouseover","legendMouseout"),l=e.config,s=e.bound;return t.dispatch=o,t.chartarea=function(e){return arguments.length?(i=e,t):i},t.systemconf=function(e){return arguments.length?(r=e,t):r},t.chartObj=function(e){return arguments.length?(n=e,t):n},t.color=function(e){return arguments.length?(a=e,t):a},t},Xv.continuous.slider=function(e,t,n){var r=mt(t,"g",[1],".","class","slider"),a=n.config,i=n.bound,o=a,l=fn(a,"clr"),s=Dx.getColorBandDimension(a,i,e),c="horizontal"===xr(o).layout,u=l.type,d=c?"x":"y",h={container:r,config:Im(uo.apply(null,To(a,i,e))[u],l[u],!0),type:u,chartObj:e,isHorizontal:c,bound:s};if(r.selectAll("*").remove(),u){var f=kw(u,h.config,d,s);Pw.ADD_HANDLE(f,r)}return{container:r}},Xv.continuous.tooltip=function(e,t,n){var r=fn(n,"clr"),a=Dx.getOrient(n),i={config:r.tooltip,chart:e,element:t,orient:a},o=a===ob||a===ib,l=Eo(i),s=e.legend.highlight.slider.container.selectAll("path"),c=s.node(),u=c?Or(c).translate:[0,0],d=Lo(s,l.config,o,u);return l.positionTooltip(d),l},Xv.continuous.events=function(e,t){e.legend.highlight={};var n,r,a,i=t.position,o=t.spec,l=o.config,s=t.element,c=e.legend.component,u=l,d=fn(u,"clr"),h=s.selectAll(u.filter.enabled?".selection":".colorband"),f=s.selectAll(".zcbrushhighlighttracker"),p="horizontal"===xr(u).layout,g=mt(s,"g",[1],".","class","highlight").style("display",vm),v=e.legend.highlight.slider=Xv.continuous.slider(e,g,o),y=e.legend.highlight.tooltip=Xv.continuous.tooltip(e,g,l),m=(v.container,u.events);if(g.style("display",fm).style("opacity",0),m&&(n=0==U(m.enabled,!0)),!n&&d.type&&d.type!==fm){var b={chartObj:e},x={mousemove:function(){var t=Tr((u.filter.enabled?f:h).node(),Hv()),n=p?t[0]:t[1];r=function(t){var n=e.axes.clr.scale,r=n.domain(),a=e.axes.clr.brushScale,i={scale:n,isHorizontal:p,config:u,ranges:u.colorBand.ranges,reversed:u.colorAxis&&u.colorAxis.reversed,brushScale:a,singleDomainContinuous:r[0]===r[1],encode:"clr"};return xu(t,i)}(t),Hv().stopImmediatePropagation(),e.legend.brush.tooltipComponent&&e.legend.brush.tooltipComponent.hide(!0),c.highlightItem(n,!0),c.highlightSeries(r,!0)},mouseout:function(e,t,n){c.highlightItem(vm,!1),c.highlightSeries(a,!1)}},w=vm;Mr(h,x,w,b,"highlight"),Mr(f,x,w,b,"highlight")}c.highlightItem=function(t,n,a,o){h.style("cursor",n?gm:vm),n?(function(t){var n,r=u.colorBand.ranges,a=u.colorAxis&&u.colorAxis.reversed,o=e.axes.clr.brushScale;if(r&&r.length){var l=o.bandwidth(),c=J(t/l);c=p&&a||!p&&!a?r.length-1-c:c,t=o(r[c])+l/2,n=e.seriesColor[c%e.seriesColor.length]}else n=e.axes.clr.scale(o.invert(t));var d=p?[t,0]:[0,t];d[0]+=i[0],d[1]+=i[1],ii(g),s.selectAll(".highlight").style("fill",n),g.style("display",vm).style("opacity",1).attr("transform","translate("+d+")")}(t),function(t){var n=u.colorBand.ranges,r=e.dataset.getColumn("clr"),a=r.datatype,i=r[a],o=n&&n.length?n[t]:t[0];y.show(Aa(i,o,a,e,"legend",Ey,"-"))}(Z(o)?o:r)):function(e){e?g.style("opacity",0):g.transition().style("opacity",0)}(a)},c.highlightSeries=function(t,n){e.highlightContext=vm;var r=e.legendHighlight;if(n){if(Z(a)&&re(a)!==re(t)){var i=a;a=vm,c.highlightSeries(i,!1)}e.seriesdata.forEach(function(e,n){r.highlightSelectedSeries(u,n,t),r.highlightUnselectedSeries(u,n,t)}),a=t}else e.seriesdata.forEach(function(n,a){r.reset(u,a,t,e.seriesdata.length-1===a)})}},Xv.continuous.events,Xv.colorBand=function(e,t,n){var r,a,i,o,l=t.config,s=t.bound,c=l,u=c.colorBand,d=Dx.getColorBandDimension(l,s,n),h=d[0],f=d[1],p="horizontal"===xr(c).layout,g=u.ranges&&u.ranges.length,v=Dx.isReversedColorAxis(l),y=we(u.borderRadius);v?(r=p?100:0,o=p?0:100):(a=p?100:0,i=p?0:100);var m,b,x,w=n.axes.clr.scale;if(g){b=w.range().filter(function(e){return e!==vm});for(var C=[],k=[],_=0;_<g;_++)C.push(_,_+1),k.push(b[_],b[_]);m=C,b=k,x=Og().domain(m).range([0,100])}else m=w.domain(),b=w.range(),m[0]===m[1]&&(b=[b[0],b[0]]),x=kg().domain([m[0],m[m.length-1]]).range([0,100]);var S=lt({type:"linear",options:{linear:{x1:r,y1:i,x2:a,y2:o,stopColor:b,stopOffset:m.map(function(e){return x(e)+"%"})}}},[0,h]),O={chartObj:n},A=tb.get(tb.svg_gradients,"svgGradientFill",S,O);e.attr("d",wt(0,0,h,f,y)).styles({stroke:u.strokeColor,"stroke-opacity":u.strokeOpacity,"stroke-width":u.strokeWidth,"fill-opacity":u.fillOpacity,fill:"url("+n.defsLocation+"#"+A+")","pointer-events":"visible"})};var GC=(_createClass(Cu,[{key:"draw",value:function(e){var t=this.encode;t&&gu(t,this.element=e)}},{key:"_addView",value:function(e,t){this._view[e]=t}},{key:"addView",value:function(e,t,n){var r=t.create(),a=!1!==n;return r.mark&&a&&(this.encode?this.encode.children.push(r):this.encode=r),this._addView(e,t),t}},{key:"getView",value:function(e){return this._view[e]}}]),Cu),XC=(_inherits(_u,GC),_createClass(_u,[{key:"create",value:function(){var e=this.spec.data,t=this.parse(),n=t.show,r=t.text,a=t.x,i=t.y,o=t.dy,l=t.anchor,s=t.styles,c=t.trimText,u=Kc("g","."+Mx,[1]);if(!n)return this.encode=u;var d=Kc(Wm,null,e,{properties:{attrs:{x:a,y:i,dy:o,"text-anchor":l},text:r,styles:s}});return u.children.push(d),u.onEnd=c,this.encode=u}},{key:"parse",value:function(){return Su(this.spec)}}]),_u);XC.adjustFactor=function(e,t,n,r,a){var i=a.layout===cb,o=Hm(e.padding,2),l=ws([e,r,Qm]),s=e.align,c=[0,0];return e.show&&(i&&s!==nb||!i&&s===nb?c[1]+=2*(o+l):c[0]+=o+l+.2*t),c},km.setComponent("legend.minmaxlabel",XC),km.setComponent("legend.minmaxlabel.parser",Su),Xv.colorAxis=function(e,t,n,r){var a,i=t.config,o=t.bound,l=i,s=l.colorBand,c=r.minmaxlabels,u=r.axisline,d=u.show?U(u.strokeWidth,1):0,h=Dx.getColorBandDimension(i,o,n),f=h[0],p=h[1],g=s.type,v=Dx.getOrient(l),y=xr(l),m=n.dataset.getColumn("clr"),b=m.datatype,x=m[b],w=n.axes.clr.component,C=n.axes.clr.scale.domain(),k=c.show&&c.excludeIntervals?[]:C,_=Dx.isReversedColorAxis(i),S="horizontal"===y.layout,O=S?[0,f]:[p,0],A=c.show&&c.excludeIntervals&&v===ob?[0,0]:v===ib||v===ob?[0,p]:[f,0],P=s.ranges&&s.ranges.length,T=s.labels;if(n.axes.clr.ticks=Gv.ticks(n,r,"clr",0,v,n.chartarea),_&&O.reverse(),P){C=Xt(i,n);var E=n.dataset.getDataType("clr")===ox;a="continuous"!==g||E?_g().domain(C).range(O).padding(0):(C=Ig(C),s.minRange!==C[0]&&C.splice(0,0,s.minRange),Og().domain(C).range(O))}else{if(k[0]===k[1]){var L=Ky(O[0]-O[1]);O=[L/2,L/2]}a=kg().domain([C[0],C[C.length-1]]).range(O)}a.origRange=O,k=c.show&&c.excludeIntervals?[]:C,w.orient(v).scale(a).tickSize(U(r.tickmark.size,6),0).majorTicks(function(e,t,n,r){var a,i,o,l;return a=i=o=l=0,e==ib?(i=-r,l=-n-r):e==ob?l=n+(i=r):e==rb?(a=t+r,o=r):e==ab&&(a=-t-r,o=-r),{x1:a,y1:i,x2:o,y2:l}}(v,f,p,d)).systemconf(n.systemConf).chartObj(n).tickValues(k).columnIndices([n.dataset.getColumnIdx("clr")]).tickFormat(function(e,t){if(T&&T.length){var r=Dx.getLabelIndex(e,s,n);if(Z(r))return this.__formattedValue=T[r],fg(this).text(T[r])}var a=Aa(x,e,b,n,"legend",null,"-");this.__formattedValue=a,fg(this).text(a)}),e.datum(r).attr("transform","translate("+A[0]+","+A[1]+")").call(w,"clr"),e.selectAll("g.tick").style("display",null),e.selectAll("line.minorTicks").attr(S?"x2":"y2",null),e.selectAll("text.ticklabel").style("pointer-events","visible"),function(e,t,n,r,a){var i=e.selectAll("path.domain");if(t.show){var o=U(t.strokeWidth,1),l=0,s=0;n===rb?l=o/2:n===ab?l=-o/2:s=n===ib?-o/2:o/2,i.attr("transform","translate("+l+","+s+")").attr("d",r?"M0,0 L"+a[0]+",0":"M0,0 L0,"+a[1]).styles({"stroke-dasharray":rt(t.style,o),"stroke-linecap":at(t.lineCap,t.style)})}else i.remove()}(e,u,v,S,h),e.call(ku,h,r,n,v,i)},Xv.colorAxis.handleOverlapNOverlap=function(e,t,n,r,a,i,o){var l=e.selectAll("g."+Mx).selectAll("text"),s=e.selectAll("g.tick").selectAll("text");!function(e,t,n,r,a,i,o){var l=M(o.node()),s=[],c=[],u=0;e.each(function(){c.push(M(this).width)}),c=vg(c),e.each(function(){var e=Or(this.parentNode).translate;s.push(Au(this,t,n,e)),function(e,t,n,r,a,i,o,l){var s=o.config,c=o.bound,u=Dx.getOrient(s),d=u===ab||u===rb?1:.5,h=(c=Pu(s,c,t.chartarea,t.canvasarea),s.title.show?M(l.selectAll(".zc-legend-title > text").node()).width:0),f=(c.x2-c.x1-(i.width-qy(a,h)))*d,p=c.y2-c.y1,g={left:n[0],top:n[1],right:n[0]+f,bottom:n[1]+p};if(r.x2-r.x1>f){var v={left:n[0],top:n[1],width:r.width,height:r.height};return bt(e,e.textContent,v,g,ib,"..",{left:5,right:5,top:5,bottom:5}),".."===e.textContent&&(fg(e).text(""),fg(e.parentNode).style("opacity",0)),!0}}(this,a,e,s[u],c,l,i,o)&&(s[u]=Au(this,t,n,e)),function(e,t,n,r){for(var a,i=r-1;0<=i&&!a;i--)a=Un(n[i],n[r]);if(t.length&&(Un(n[r],t[0])||Un(n[r],t[1]))||a)return fg(e.parentNode).style("display",fm),!0}(this,r,s,u)&&(s[u]={x1:0,y1:0,x2:0,y2:0}),u++})}(s,t,n,function(e,t,n,r,a){var i=a.config,o=a.bound,l=xr(i),s=[],c={left:(o=Pu(i,o,r.chartarea,r.canvasarea)).x1,top:o.y1,right:o.x2,bottom:o.y2},u={left:5,right:5,top:5,bottom:5};if(e.each(function(e,r){var a=Au(this,t,n),i={left:a.x1,top:a.y1,width:a.width,height:a.height};bt(this,this.textContent,i,c,ib,"..",u),".."===this.textContent&&fg(this).text(""),s[r]=Au(this,t,n)}),"horizontal"===l.layout&&s.length&&Un(s[0],s[1])){var d=s[1].x2-s[0].x1;e.each(function(e,r){var a=Au(this,t,n),i={left:a.x1,top:a.y1,width:a.width,height:a.height},o=Dm(c);0===r?o.right=a.x1+d/2:o.left=a.x2-d/2,bt(this,this.textContent,i,o,ib,"..",u),".."===this.textContent&&fg(this).text(""),s[r]=Au(this,t,n)})}return s}(l,t,n,r,a),r,a,o),!0===i.ticklabel.tooltip&&s.each(function(e){_t(fg(this),this.__formattedValue)})};var ZC=function(e){var t=e.encode,n=e.view;km.setComponent(Tu(t,n),e)},qC=function(e,t){return km.getComponent(Tu(e,t))},QC=(_createClass(Eu,[{key:"create",value:function(){this.encode=function(e,t){var n=Dx.isContinousLegend(e);return(e.legend.component=n?Xv.continuous.get(t):Xv.discrete.get(t)).chartarea(e.chartarea).systemconf(e.systemConf).color(e.seriesColor).chartObj(e)}(this.spec.chartObj,this.spec)}},{key:"draw",value:function(e){this.parent=e,this.encode(e.datum(this.spec.config))}},{key:"resize",value:function(e,t){if(e||t){var n=this.spec.bound,r=Rr(e,t,n),a=r.w,i=r.h;n.maxWidth=a,n.maxHeight=i,this.create(),this.draw(this.parent)}}}]),Eu),KC=(_inherits(Lu,QC),Lu);KC.encode="clr",KC.view="band",KC.domMode="svg",km.setComponent("colorLegendBand",KC),ZC(KC);var $C=Dx.hexToRGB;Xv.getHTML4ChartTypeSymbol=function(e,t,n,r,a){var i=dx.isQuantileColorScale(r),o=(r.isAxisCategory||r.dataObject.isPolarAxisCategory||r.dataObject.isHierarchy||r.isGeoMap)&&!i?a:0,l=r.chartTypes[o].name,s=r.systemConf.chart.plot.plotoptions[l],c=i?vm:r.seriesdata[o].plotoptions,u=Mu(l)(e);switch(l){case Cb:case zb:var d=.15*t,h=c&&c.marker?Im(s.marker,c.marker,!0):s.marker,f=function(e,t,n){var r,a=Y([e,t],"dashStyle"),i=rt(a,.75*n);if(i&&i.length){var o=at(Y([e,t],"lineCap"),a);r="stroke-dasharray:"+i+";stroke-linecap:"+o+";"}return r}(c,s,d),p="",g="stroke:"+n+";stroke-width:"+d+";";if(f)g+=f;else if(0!=h.enabled){var v=l===zb?.5:.65,y=l===zb?.25:.45;p=zu(h,e,t,n,"outer",Qy(e,t)*v),p+=zu(h,e,t,n,"inner",Qy(e,t)*y)}return"<path d='"+u+"' transform='translate("+e/2+","+t/2+")' style='"+g+"'></path>"+p;case kb:case Sb:case Ob:case _b:if((h=c&&c.marker?Im(s.marker,c.marker,!0):s.marker).imageUrl)return h.imageUrl;var m=Qy(e,t)-U(h.outerStrokeWidth,1),b=.5*Qy(e,t)-U(h.innerStrokeWidth,1),x=Iu(c,s,m,m,h.outerFillColor||n,r,l),w=Iu(c,s,b,b,h.innerFillColor||n,r,l);return x.defs+zu(h,e,t,n,"outer",m,x.fill)+w.defs+zu(h,e,t,n,"inner",b,w.fill);case Rb:return(S=Iu(c,s,C=Qy(e,t)-U(s.strokeWidth,1),C,n,r,l)).defs+zu(s,e,t,n,null,C,S.fill);case Ib:var C;if(s.symbol&&Bt(s.symbol))return(S=Iu(c,s,C=Qy(e,t)-U(s.strokeWidth,1),C,n,r,l)).defs+zu(s,e,t,n,null,C,S.fill);var k=e-(d=U(s.strokeWidth,1)),_=t-d;return(S=Iu(c,s,k,_,n,r,l)).defs+function(e,t,n,r,a,i){var o=e.borderRadius;o=o&&Qy(Qy(t,n)/4,o);var l=wt(-t/2,-n/2,t,n,a.dataObject.getTransRectValue("radius",null,null,null,null,o)),s="stroke:"+$C(e.strokeColor||r)+";stroke-width:"+U(e.strokeWidth,1)+";stroke-opacity:"+U(e.strokeOpacity,1)+";fill:"+(i||$C(e.fillColor||r))+";fill-opacity:"+U(e.fillOpacity,1)+";";return"<path d='"+l+"' transform='translate("+t/2+","+n/2+")' style='"+s+"'></path>"}(s,k,_,n,r,S.fill);default:var S=Iu(c,s,e,t,n,r,l),O=Hm(c&&c.fillOpacity,s.fillOpacity,1);return g="fill:"+(S.fill||n)+";fill-opacity:"+O+";",S.defs+"<path d='"+u+"' transform='translate("+e/2+","+t/2+")' style='"+g+"'></path>"}};var JC=(_inherits(Du,mw),_createClass(Du,[{key:"getDataSchema",value:function(){var e=this.encode,t=this.key,n=this.chartObj;return n.dataObject,{source:["a","b","c"],meta:n.dataset.getColumn(e,t)}}},{key:"parseRange",value:function(){return[1,2,3]}},{key:"parseDomain",value:function(){return["a","b","c"]}}]),Du);km.setComponent("colorScale",JC);var ek="width",tk="height",nk=(_createClass(Ru,[{key:"create",value:function(){var e=this,t=this,n=this.units;if(this.elementBound={},this.HEIGHT=function(t){return e.elementBound[t].height},this.WIDTH=function(t){return e.elementBound[t].width},n.length){this.findBound(n),this.prepare();var r=this.items;n=this.units,r.forEach(function(e,r){var a=e.unit;!a.enabled||xr(Vu(a)).floating||t.canFit(e)||(t.redraw(e,r),t.findBound(n[r]))}),this.position(n)}}},{key:"findBound",value:function(e){var t=this.elementBound;(e=be(e)).forEach(function(e){var n=e.element.node(),r=Vu(e),a=r.marginLeft,i=r.marginTop,o=r.marginRight,l=r.marginBottom,s=Lt(n)?M(n):n.getBoundingClientRect();t[e.id]={width:s.width+a+o,height:s.height+i+l}})}},{key:"prepare",value:function(){var e=this.HEIGHT,t=this.WIDTH,n=this.units=this.getUnitOrder();this.items=n.map(function(e){return{id:e.id,unit:e}}),function(e,t,n,r,a){function i(i){!function(e,t,n,r,a,i){function o(t){return function(a){var o=t===tk?r:n,l=o(a),s=e.map(function(e){return e.id}).filter(function(e){return e!==a}),c=Lg(s,function(e){return o(e)}),u=i[t],d=u/(s.length+1);return l<=d?l:c<d?u-c:d}}var l=function(e){return n(e)},s=function(e){return r(e)};a===rb||a===ab?s=o(tk):l=o(ek),t.forEach(function(t,n){var r=Vu(e[n]),a=Wu(r,"width",i),o=Wu(r,"height",i);t.width=a||l,t.height=o||s,t.strict=!(!a&&!o)})}(l.map(function(t){return Se(e,function(e){return e.id===t})}),l.map(function(e){return Se(t,function(t){return t.id===e})}),n,r,i,a),l=[]}var o=void 0,l=[];e.forEach(function(e){var t=e.enabled,n=e.id,r=Vu(e);if(t){var a=Hu(r);a&&(o&&o!==a&&i(o),l.push(n),o=a)}}),o&&i(o)}(n,this.items,t,e,this.area)}},{key:"canFit",value:function(e){var t=this.callbackArgs,n=this.HEIGHT,r=this.WIDTH,a=e.id,i=e.width.apply(e,[a].concat(_toConsumableArray(t))),o=e.height.apply(e,[a].concat(_toConsumableArray(t))),l=[];return r(a)>i&&(l[0]=i),n(a)>o&&(l[1]=o),!(e.update=l).length}},{key:"redraw",value:function(e,t){var n=this.units,r=Vu(n[t]),a=r.marginLeft,i=r.marginTop,o=r.marginRight,l=r.marginBottom,s=e.update,c=void 0,u=void 0;s[0]&&(c=s[0]-a-o),s[1]&&(u=s[1]-i-l),n[t].component.resize(c,u)}},{key:"position",value:function(e){function t(e){var t=Dm(l),a=void 0,u=void 0,d=function(e,t,n,r,a){var i=[],o=0,l=0;return e.some(function(e){return Se(a,function(t){return t.id===e.id}).strict})?(e.forEach(function(e,a){1<(l+=t[a][r])-n[r]&&(l=0,o++),i[o]=i[o]||[],i[o].push(a)}),i):[av(e.length)]}(s,c,o,e===rb||e===ab?tk:ek,r),h=[],f=[];d.forEach(function(n){a=function(e,t,n){if(e!==ab&&e!==ib)return{};var r=Nu(e),a=Bu(e,t),i=e===ab?rb:ob;return ju(i,n[r]-a,n),_defineProperty({},e===ab?"hAlign":"vAlign",i)}(e,c.filter(function(e,t){return-1<n.indexOf(t)}),t);var r=Dm(t);n.forEach(function(t){var n=s[t],o=Vu(n),l=n.element,d=xr(o),f=d.hAlign,p=d.vAlign,g=_extends({},o,a);f!==nb&&p!==nb||(u=u||function(e,t,n){var r=void 0,a=void 0,i=void 0;i=e===rb||e===ab?(r="vAlign",a=ob,tk):(r="hAlign",a=rb,ek);var o=Lg(t,function(e){return e[i]});return n[a]+=(n[i]-o)/2,n[i]-=o,_defineProperty({},r,a)}(e,c.slice(t,c.length),r),e===rb||e===ab?p=g.vAlign=u.vAlign:f=g.hAlign=u.hAlign);var v=i(l,g,r),y=e===rb||e===ab?tk:ek;ju(e===rb||e===ab?p:f,c[t][y],r),Ru.positionElement(l,v[0],v[1]),h.push(c[t])});var o=Bu(e,h);ju(e,o,t),f.push(o),h=[]});var p=Lg(f);ju(e,p,l),n.updateArea(e,p),s=[],c=[]}var n=this,r=n.items,a=n.elementBound,i=n.getPosition,o=n.area,l=Dm(o),s=[],c=[],u=void 0;e.forEach(function(e){var n=e.enabled,r=e.id,l=e.element,d=Vu(e);if(n){var h=Hu(d);if(h){u&&u!==h&&t(u);var f=a[r];s.push(e),c.push(f),u=h}else{var p=i(l,d,o);Ru.positionElement(l,p[0],p[1])}}}),u&&t(u)}},{key:"updateArea",value:function(e,t){ju(e,t,this.areaToBeUpdated)}},{key:"getUnitOrder",value:function(){var e=this.units,t=this.elementBound,n=this.order,r=this.callbackArgs;return(n?te(n)?n:V.apply(void 0,[n,e,t].concat(_toConsumableArray(r))):function(e,t){var n=[],r=[],a=[],i={left:[],right:[],top:[],bottom:[]},o={left:0,right:0,top:0,bottom:0};return e.forEach(function(e){var n=e.enabled,l=e.id,s=Vu(e);if(n){var c=Hu(s);if(c){var u=t[l][c===rb||c===ab?tk:ek];i[c].push(l),o[c]+=u}else a.push(l)}else r.push(l)}),Ue(o).sort(function(e,t){return Yg(e[1],t[1])}).forEach(function(t){var r=t[0],a=i[r].sort(function(t,n){var a=Fu(e,r,t),i=Fu(e,r,n);return Yg(a,i)});n.push.apply(n,_toConsumableArray(a))}),n.push.apply(n,a),n.push.apply(n,r),n}(e,t)).map(function(t){return Se(e,function(e){return e.id===t})})}}]),Ru);nk.positionElement=function(e,t,n){Lt(e)?e.attr("transform","translate("+t+","+n+")"):e.styles({left:t+"px",top:n+"px"})};var rk={top:2,bottom:1,left:2,right:1,center:0};Xv.render=function(e){var t=e.systemConf.legend;Lr(e,t.events,0,"init");var n=Yu(e).map(Uu).filter(function(e){return!!e});Zu(n,e);var r=n.get("clr-0");e.legendarea=qu(e,r),e._chartarea=Dm(e.chartarea),e._plotarea=Dm(e.plotarea),Xv.align(n,e,e.chartarea,e.plotarea),function(e,t){e&&!e.enabled&&"list"===e.meta.view&&(t.legend.component=Xv.discrete.get(e.meta),Xv.events(t,t.legendarea.element.selectAll("li.series"),{allSelected:!0,isFirstClickAfterDeselection:!1}))}(r,e),e.legends=n,Lr(e,t.events,0,e.updating?"onreload":"onload")},Xv.align=function(e,t,n,r){var a=t.systemConf.legend;if(t.legend.isSingleLayout)!function(e){var t=e.legendarea,n=t.x,r=t.y,a=t.element;t.show&&(nk.positionElement(a,n,r),Ir(e))}(t);else{var i={area:n,order:a.order,getPosition:function(e,n,r){return Hr(r,t,null,e,n)},callbackArgs:t},o=new nk(e,i);(e.layout=o).areaToBeUpdated.push(r),o.create()}};var ak=Dx.getClr,ik=Dx.isDisabled,ok=Dx.hexToRGB;Xv.setColorBoxBackground=function(e,t,n,r){function a(e,n,r,a){var i=ak(S(e),Hm(r,Mn(t,n,null,a)),d);return Km.IE&&m&&S(e)&&(i=function(e){var t=zg(e),n=J((t.r+t.g+t.b)/3);return"rgba("+n+","+n+","+n+","+t.opacity+")"}(i)),i}function i(e,t){return a(e,t,u.strokeColor,r)}function o(e){return S(e)?h.text||"":u.text}var l,s,c=1<r&&t.systemConf.legend.color?t.systemConf.legend.color[r]:t.systemConf.legend,u=c.colorBox,d=pn(c,"clr"),h=d.colorBox||{},f=c.imagePallete?jr.imagePallete.get(c.imagePallete):null,p=t.imagePallete&&Z(f)&&0<f.length,g=t.patternPallete,v=g&&g.length,y=!t.patternPallete&&(Z(c.shapes)||"square"!==u.shape),m=h.grayScale,b=+zm.getVal(c.fontSize||t.systemConf.canvas.fontSize),x=Dx.getFilterBoxSize(u,b),w=x[0],C=x[1],k=u.borderRadius,_=[],S=function(e){return ik(e,n.allSelected,n.isFirstClickAfterDeselection)},O={opacity:function(e){return S(e)?h.fillOpacity:null},filter:function(e){return S(e)&&m&&!Km.IE?"grayscale(1)":null},"border-radius":!y&&Z(k)?k+hm:null,color:function(e){return S(e)?h.fontColor:u.fontColor||"white"},border:function(e,t){return p||y?null:u.strokeWidth+hm+"solid "+i(e,t)},background:function(e,n){var o=S(e),c=null;if(s=a(e,n,u.fillColor,r),p)if(o&&d.color)l=d.color;else{l='url("'+f[n%f.length]+'")';var h=t.patternImageSizes&&t.patternImageSizes;c=h[n]?h[n%h.length][0]+hm+" "+h[n%h.length][1]+hm:null}else if(y)l=function(e,t,n,r,a,i){n=ok(n),r=ok(r);var o=a.systemConf.legend,l=o.colorBox,s=o.shapes,c=(s?s[i%s.length]:null)||l.shape,u=c||!Xv.getHTML4ChartTypeSymbol||dx.isQuantileColorScale(a)&&a.dataObject.isCombinationalChart?Ku(e,t,n,r,c,l):Xv.getHTML4ChartTypeSymbol(e,t,r,a,i);return Qu(u)?'url("'+u+'")':$u(u,e,t)}(w,C,i(e,n),s,t,n);else if(v){var b=g[n%v],x=Jm[b]?eb(b):ot(b);x.bgClr_base=s,x.stroke_base=s,x.width=w,x.customStaticClr=o?d.patternColor:t.userdata.legend.customPatternColor,x.x=x.y=0;var k="zp"+E(x,"legelegendndFill"),O=tb.svg_patterns.svgPatternFill(x,k,null,!0,!0,t,t.getPatternSvg(),"objectBoundingBox"),A=O.width,P=O.height;l='url("'+O.url+'")',c=(2*A<w?A:w/2)+hm+" "+(2*P<C?P:C/2)+hm}else l=s;if(Qu(l)&&(c=c||w+hm+" "+C+hm,o&&m&&Km.IE)){var T=c.split("px").map(function(e){return+e});l=function(e,t,n){var r=document.createElement("canvas"),a=r.getContext("2d");r.width=t,r.height=n;var i=new Image;i.src=e.substring(5,e.length-2),i.width=t,i.height=n,i.onload=function(){a.drawImage(i,0,0,t,n);for(var e=a.getImageData(0,0,r.width,r.height),o=0;o<e.height;o++)for(var l=0;l<e.width;l++){var s=4*o*e.width+4*l,c=(e.data[s]+e.data[1+s]+e.data[2+s])/3;e.data[s]=c,e.data[1+s]=c,e.data[2+s]=c}return a.putImageData(e,0,0,0,0,e.width,e.height),"url("+r.toDataURL()+")"}}(l,T[0],T[1])}return _[n]=c,l},"background-size":function(e,t){return _[t]}};return e?void e.styles(O).html(o):{styles:O,html:o}};var lk=Dx.getLegendData,sk=Dx.isDisabled,ck=Dx.isAllEnabled,uk=Dx.getClr,dk=Dx.toggleChartEvents,hk=Dx.updateData;Xv.selectAllBox=function(e,t,n,r){function a(){n.allSelected&&!ck(s,n.allSelected)||(n.allSelected=!n.allSelected),n.isFirstClickAfterDeselection=!1,S.html(n.allSelected?Hm(d.text,u.text)||"&#10003;":f.text||""),V(d.events[t.zcEventType||"click"],Hv(),n.allSelected,t)}function i(e,t,n,r){e.element.attr("align",t).styles({"border-width":n}),e.element.selectAll("div#tooltipcontent").style("color",r)}var o={show:!1,strokeColor:"#262626",strokeWidth:1,fillColor:pm,fontColor:"#262626",fillOpacity:1,strokeOpacity:1,disabledOpacity:.3,tooltip:{enabled:!0,color:"red",content:"Select atleast one legend"},events:{click:null}};o.events.click=t.legend.component.toggleSelectAll=function(){if(function(){s=s||lk(t,r),n.allSelected&&(kr(t)?(Yt(t.dataObject).forEach(function(e,t){e.layer===r&&e.data.forEach(function(e,t){e.node.filtered=!n.allSelected})}),s.forEach(function(e,t){return e.filtered=!n.allSelected})):s.forEach(function(e,r){e.disabled=!n.allSelected,hk(e,r,t)}),t.addRemoveSeries(s,0,[0,0],!0))}(),function(){var e,a,i=_r(t,"clr-"+r),o=i.selectAll("div.legendfilterbox"),l=i.selectAll("span.legendlabel, span.legendlabel * ");Xv.setColorBoxBackground(o,t,n,r),a=n.allSelected?(e=v,null):(e=uk(!0,v,h),JSON.parse(h.strikeout)?"line-through":null),l.styles({color:e,"text-decoration":a}),n.allSelected&&c.showAs&&i.selectAll("span.legendlabel").html(function(e,n){return Br(e,n,c,t)})}(),dk(t,n.allSelected),Dx.fadeChart(n.allSelected,t,_),k.enabled){var e=t.eventHandler.tooltipElement;l=l||e.element.selectAll("div#tooltipcontent").style("color");var a=t.systemConf.tooltip,o=$(Z(a.borderWidth)?a.borderWidth:1);if(n.allSelected)i(e=t.eventHandler.tooltipElement,null,o,l),e.hide(e.element);else{var u=Tr(C,Hv());u={x:u[0],y:u[1]};var d=Xn(Hv()),f=lr(d,u,0,0,t,{},!1,!1,!1,!0,!1),p=u.x-d.clientX,g=u.y-d.clientY;f.dLeft=p,f.dTop=g,f.helpers.color=k.color,f.helpers.backgroundColor=k.backgroundColor,f.helpers.borderColor=k.borderColor,f.helpers.renderTo="legendTitle",i(e,"center",null,k.fontColor||l),e.show(t,f,k.content,!1,f.helpers),setTimeout(function(){var e=t.eventHandler.tooltipElement;i(e,null,o,l),e.hide(e.element)},4e3)}}};var l,s=lk(t,r),c=t.systemConf.legend,u=c.colorBox,d=Im(o,c.selectAllBox,!0),h=pn(c,"clr"),f=h.colorBox||{},p=[c,t.systemConf.canvas,Qm],g=+zm.getVal(c.fontSize||t.systemConf.canvas.fontSize),v=Y(p,"fontColor"),y=(c.imagePallete&&jr.imagePallete.get(c.imagePallete),Im(u,d,!0)),m=Dx.getFilterBoxSize(y,g),b=m[0],x=m[1],w=Math.min(b,x)-(c.imagePallete||!Z(c.shapes)||"square"===u.shape?0:+u.strokeWidth),C=t.container.node(),k=d.tooltip,_=d.disabledOpacity;n.allSelected=Z(d.selected)?d.selected:n.allSelected;var S=mt(e,"div",[1],".","class","selectAll"),O=Hm(d.shape,u.shape),A="square"!==O,P={display:d.show?"inline-block":fm,width:w+"px",height:w+"px",float:"left",background:d.fillColor,position:"absolute","box-sizing":"border-box","text-align":"center","line-height":w+"px","font-family":u.fontFamily,"font-size":(u.fontSize||g-2)+"px",color:function(e){return d.fontColor||(sk(e,n.allSelected,n.isFirstClickAfterDeselection)?f.fontColor:u.fontColor)}};if(A){var T=Ku(w,w,d.strokeColor,d.fillColor,O,d);P.background=$u(T,w,w),P.border="none"}else P.border=d.strokeWidth+"px solid "+d.strokeColor;S.styles(P).html(function(){return ck(s,n.allSelected)?Hm(d.text,u.text)||"&#10003;":f.text||""}),e.style("cursor",d.show?gm:null);var E={click:a},L={tap:a};if(d.show?Mr(e,E,L):(zr(e,null,E),zr(e,null,L)),t.eventHandler){var M=t.eventHandler.tooltipElement;M.hide(M.element)}return{element:S,options:d,size:w}};var fk={SIZE_SLIDER:{_handlers:"_legendSizeSliderHandlers",_arguments:"_legendSizeSliderEventArguments"},SIZE_NESTED:{_handlers:"_legendSizeNestedHandlers",_arguments:"_legendSizeNestedEventArguments"},SIZE_LIST:{_handlers:"_legendSizeListHandlers",_arguments:"_legendSizeListEventArguments"},EXPANDABLE:{_handlers:"_legendExpandableHandlers",_arguments:"_legendExpandableEventArguments"}},pk=(_inherits(ed,dC),_createClass(ed,[{key:"updateSelectionManager",value:function(e){this.selectionManager.point=e}},{key:"detachListeners",value:function(e,t,n){var r=1<arguments.length&&void 0!==t?t:{},a=2<arguments.length&&void 0!==n?n:{},i=this.tracker;i&&!i.empty()&&(zr(i,e,r),zr(i,e,a))}}]),ed),gk=(_createClass(td,[{key:"init",value:function(){var e=this;e.chart.legends.forEach(function(t){pe(fk,function(n,r){e.initiateBehaviour(r,t)})})}},{key:"update",value:function(){this.init()}},{key:"initiateBehaviour",value:function(e,t){var n=this.chart,r=this.eventManager,a=this.reverseEventManager,i=fk[e],o=km.getComponent(T(i._handlers,[n])),l=t.id;if(!o._empty&&o.SUPPORTED(n,l)){var s=km.getComponent(T(i._arguments,[n]))(n,l),c=o.BEHAVIOUR,u=o.DATA_FINDER,d=o.LISTENER,h=o.REVERSE_BEHAVIOUR,f=o.REVERSE_DATA_FINDER,p=e+"("+l+")",g=nd(p,r,n,s);if(rd(g,c,u),g.customBehaviour=function(e){var t=e.options,n=e.chart,r=t.config.events,a=void 0===r?{}:r;return function(t,r){var i=a["dblclick"===r?"doubleclick":r];if(i)return[{action:zc(i,t.point,Xn(e.targetEvent),null,n),type:"custom"}]}}(g),!s.enabled)return void g.detachListeners("legend");var v=function(e,t){var n={},r={};return pe(t,function(t,a){function i(){e.targetEvent=Hv(),t.apply(e,[].concat(Array.prototype.slice.call(arguments),[a]))}Re(Rx,a)?r[a]=i:n[a]=i}),{mouseHandlers:n,touchHandlers:r}}(g,d),y=v.mouseHandlers,m=v.touchHandlers,b=s.trackerElement;g.bindTo(b),g.attachListeners(b,y,m,null,"legend"),rd(nd(p,a,n,s),h,f)}}}]),td);km.setComponent("LegendEvents",gk),km.setComponent("expandable.parser",ad);var vk=(_inherits(id,GC),_createClass(id,[{key:"create",value:function(){var e=this.spec.isHorizontal,t=this.parse(),n=t.show,r=t.styles,a=t.html,i=t.target,o=t.expanded,l={properties:{styles:r,html:a(o)}};this.expanded(o);var s=Kc(Zm,"."+Ex,n?[1]:[],l);return s.onEnd=function(t){var r=i(),a=e?"scrollLeft":"scrollTop";r.node()[a]=0,n?r.style("overflow","hidden"):t.empty()||(t.remove(),r.styles({"overflow-x":"hidden","overflow-y":"hidden"}))},this.encode=s}},{key:"parse",value:function(){return ad(this.spec)}},{key:"expanded",value:function(e){return Z(e)?void(this._expanded=e):Hm(this._expanded,!1)}}]),id);vk.adjustFactor=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=arguments[3],r=5<arguments.length&&void 0!==arguments[5]?arguments[5]:3,a=arguments[4].layout===cb,i=e.show,o=e.keepAligned,l=[0,0];return i&&(a&&o?l[0]+=.2*t+2*r:l[1]+=ws([e,n,Qm])+2*r),l},km.setComponent("expandable",vk),Xv.discrete=function(){},Xv.discrete.get=function(e){function t(e){return e.each(function(e){function a(n){var r=mt(ce,"li",n,".","class","series");mt(r,"div",[1],".","class","legendfilterbox"),mt(r,"span",[1],".","class","legendlabel"),r.styles({color:function(e){return g(v(e,R.allSelected,R.isFirstClickAfterDeselection),S,w)},position:"relative","white-space":"nowrap",padding:+e.itemMargin+"px",overflow:"hidden","text-align":"left","line-height":j,"font-size":_+"px",width:_e?e.itemWidth+"px":null,height:null==e.itemHeight||""==e.itemHeight?null:e.itemHeight+"px","font-family":Y(C,"fontFamily"),"font-weight":Y(C,"fontWeight"),display:function(e){return p(e)?fm:H?"inline-block":"block"}}).styles(N).style("vertical-align","top"),Xv.events(o,r,R,le,d);var a=r.select("span.legendlabel");Z(O)&&(a.styles({display:Hm(e.showAsDisplay,"inline-block"),overflow:"hidden"}),Z(t.legendLabelMaxWidth)&&ke&&a.style("width",t.legendLabelMaxWidth+hm)),a.style("padding-"+A,e.textPadding+"px").style("margin-"+A,L+"px").html(function(e,t){return ue.getLegendItemText(e,t)}).attr("title",function(){return e.tooltip?this.textContent:null}),kt(a,[F,e,i.canvas,Qm],!0),Z(O)&&r.each(function(t){v(t,R.allSelected,R.isFirstClickAfterDeselection)&&kt(fg(this).selectAll(".legendlabel, .legendlabel *"),[{fontColor:F.fontColor(t),textDecoration:F.textDecoration(t)},e,i.canvas,Qm],!0)});var l=r.select("span.legendlabel").node().offsetHeight,s=r.select("div.legendfilterbox"),c=Ju(x.vAlign,l,M,_,x.size,e.textOverflow);return s.styles({width:L+hm,height:M+hm,float:A,"margin-top":c+hm,"border-color":pm,"background-repeat":"repeat","line-height":M-x.strokeWidth+hm,"text-align":"center","font-family":x.fontFamily,"font-size":(x.fontSize||_)+hm,position:"absolute",display:"inline-block","box-sizing":"border-box"}),Xv.setColorBoxBackground(s,o,R,d),r}function l(e){return Qy(Ie(Q.maxWidth||(K?"50%":"100%"),e),e)}function y(e){if(H){ce.styles({width:null,height:null}),e.style("max-width",he+"px"),W.style("max-width",he+"px"),ce.styles({display:"inline","border-top":"1px solid"});var t=ze(ce).width;ce.styles({display:ee.display,"border-top":null}),W.style("max-width",Oe+"px"),Be=Gy(ce.node().offsetHeight/Se)||1,ce.style("height",Be*Se+2+"px"),ge=We(ce)||T&&Ce<b?s:0,ce.style("width",t+ge+2+"px")}else{ce.style("width",null);var n=ze(ce.style("display","inline-block")).width;ce.style("display",ee.display),ce.style("width",n+ge+2+"px"),ce.style("height",null)}}o.legend.state=o.legend.state||{};var m=h(o,d),b=f(o,m),x=e.colorBox,w=pn(e,"clr"),C=[e,i.canvas,Qm],k=null!=e.x&&""!==e.x&&null!=e.y&&""!==e.y,_=+zm.getVal(e.fontSize||i.canvas.fontSize),S=Y(C,"fontColor"),O=(o.dataset.getColumnIdx(o.isAxisCategory||o.isGeoMap||o.isNonAxisMultiSeriesCategory||dx.isQuantileColorScale(o)?"clr":"x"),e.showAs),A=x.position||"left",P=e.expandable||{},T=!0===P.show,E=(o.renderer.length,Dx.getFilterBoxSize(x,_)),L=E[0],M=E[1],D=xr(e),R=o.legend.state["clr-"+d]=o.legend.state["clr-"+d]||{allSelected:!0,isFirstClickAfterDeselection:!1},j=Z(x.size)?qy(_,M)+"px":(Km.OSX||Km.LINUX)&&Km.FIREFOX?"1.2":"normal",H="horizontal"===D.layout,B=Dm(o.plotarea);o.legend.states=o.legend.state["clr-0"];var N,F={fontColor:function(e){return g(v(e,R.allSelected,R.isFirstClickAfterDeselection),S,w)},textDecoration:function(e){return v(e,R.allSelected,R.isFirstClickAfterDeselection)&&w.strikeout?"line-through":null}};N="wrap"===e.textOverflow?{"word-wrap":"break-word","white-space":"normal","vertical-align":"top"}:{"text-overflow":"ellipsis","vertical-align":"middle"};var V=fg(this);t.update=function(){V.transition().call(t)},V.styles({display:"block",position:"absolute",left:null,top:null});var W=mt(V,"div",[e],".","class","legendgroup"),U=e.shadow;if(!0===U.show){var G=U.x+"px "+U.y+"px "+U.blur+"px "+U.color;G=U.inset?G+" inset":G,V.style("box-shadow",G)}else V.style("box-shadow",null);var X=zg(e.background.color.toString());V.style("background-color","rgba("+X.r+","+X.g+","+X.b+","+e.background.alpha+")");var q=e.border;!0===q.show?V.styles({border:+q.size+"px "+q.style+" "+q.color,"border-radius":q.radius+"px"}):V.style("border",null);var Q=e.title,K=Q.keepAligned&&H,J=Z(Q.margin)?Q.margin:3,ee={display:K?"inline-block":null,"vertical-align":"top"},te=Et("ul",".zcheader",!0===Q.show?[Q]:[],W,":first-child").styles(ee),ne=mt(te,"li",[1],".","class","zcheader");te.styles({"white-space":"normal",overflow:"hidden",width:"","list-style-type":fm,margin:0,padding:0}),ne.styles({padding:$(J),"white-space":"nowrap",overflow:"hidden","text-align":"left","text-overflow":"ellipsis","vertical-align":"middle"});var re=Xv.selectAllBox(ne,o,R,d),ae=re.element,ie=re.options,oe=re.size,le=ie.disabledOpacity;rn(o)||Dx.fadeChart(R.allSelected,o,le);var se=mt(ne,"span",[1],".","class","legendtitle");se.text(z(Q.text)).style("padding-"+A,ie.show?e.textPadding+"px":null).style("margin-"+A,ie.show?oe+"px":null),kt(se,[Q,i.canvas,Qm],!0),ae.style("margin",function(){return Math.max(0,(se.node().offsetHeight-ae.node().offsetHeight)/2)+"px 0px 0px 0px"}),ne.style("line-height",function(){var e=ie.show?ae.node().offsetHeight:0;return Math.max(se.node().offsetHeight,e)+"px"});var ce=mt(W,"ul",[e],".","class","legseries");ce.styles({"white-space":"normal","overflow-y":"hidden",width:"","list-style-type":fm,margin:0,padding:0,"-webkit-overflow-scrolling":"touch","font-size":"0px"}).styles(ee);var ue=function(e,t,n,r,a,i,o,l){var s=e.systemConf,c=s.legend,u=a[0],d=c.showAs,h=e.dataset.getColumnIdx(e.isAxisCategory||e.isGeoMap||e.isNonAxisMultiSeriesCategory||dx.isQuantileColorScale(e)||jn(e)?"clr":"x"),f="horizontal"===i.layout,p="number"==typeof c.itemWidth,g={getLegendItemText:function(t,n){if(dx.isQuantileColorScale(e)){var r=c.colorBand.labels;if(r&&r.length)return I(r[n])}var a=e.isAxisCategory||e.isNonAxisMultiSeriesCategory||e.isGeoMap||jn(e)?n:0,i=Br(t,n,c,e),o=t.node||t;return d?i:e.dataset.getDataPointValue(e,o,h,a,null,"legend")},getItemDimension:function(e){var t=v([e]),n=t.ul,r=t.li,a=t.span,i={label:{width:a.node().offsetWidth,height:a.node().offsetHeight},item:{width:r.node().offsetWidth,height:r.node().offsetHeight}};return n.remove(),i},getMaxItemWidth:function(){var e=v([n[0]]),t=e.span,r=e.li,a=null,i=void 0;return p?c.itemWidth:("auto"===c.itemWidth&&n.forEach(function(e,n){e.hideInLegend||(t.html(function(){return g.getLegendItemText(e,n)}),i=ze(r).width,a<i&&(a=i))}),e.li.remove(),a)},getRowsCount:function(e,t){return.9<t/e-(Xy(t/e)||1)?Gy(t/e)||1:Xy(t/e)||1},getVisibleItemRenderCount:function(e,t,a,i,o){var l=0;if(f){var s=!1;if(p){var u=c.itemWidth+2*+c.itemMargin;l=Xy(a/u)*t}else{for(var d=!1,h=void 0,g=null,y=-1;!s;){l++;var m=n.slice(0,l),b=(h=v(m,a,i)).li.last().node().offsetTop;g!==b&&(g=b,y++),d=t-1<y,s=r===l||d}d&&(l-=1),h.ul.remove()}}else l=t;return l}},v=function(t,n,r){var a=Et("ul",".tempUl",[1],e.d3container).styles({"max-width":Z(n)?n+"px":null,"max-height":Z(r)?r+"px":null,position:"absolute",top:0,left:0,padding:0}),i=Et("li",".tempItem",t,a).styles({display:f?"inline-block":"block","line-height":o,"white-space":"nowrap",padding:c.itemMargin+"px",width:p?c.itemWidth+"px":null,height:Z(c.itemHeight)?c.itemHeight+"px":null,"padding-left":u+c.itemMargin+"px"}),d=Et("span",".tempLabel",function(e){return[e]},i).style("padding-left",c.textPadding+"px").style("display",s.legend.showAs?"block":null);return s.legend.showAs&&d.styles({display:Hm(s.legend.showAsDisplay,"inline-block"),overflow:"hidden"}),i.select("span.tempLabel").html(function(e,t){return g.getLegendItemText(e,t)}),kt(i,[l,c,s.canvas,Qm],!0),{ul:a,li:i,span:d}};return g}(o,0,m,b,E,D,j,F),de=Ie(e.maxHeight||(H?mx:yx),r.height),he=Ie(e.maxWidth||(H?xx:bx),r.width);c.adjust&&(he=Qy(c.maxWidth||he,he),de-=ze(te).height,de=Qy(c.maxHeight?c.maxHeight-ze(te).height:de,de));var fe,pe,ge,ve,ye=l(he),me=ue.getItemDimension(m[0]),be=me.label.height,xe=me.item.height,we=null,Ce=null,ke="auto"===e.itemWidth,_e="number"==typeof e.itemWidth,Se=Hm(e.itemHeight&&+e.itemHeight,qy(be,M)+2*+e.itemMargin),Oe=he;if(T&&H&&(de=Xy(de/xe)*xe)<xe&&(de=xe),o.legend.hasScroll=de<b*Se,W.style("max-width",he+"px"),te.style("max-width",ye+"px"),pe=ze(te).width,H){var Ae=+e.marginLeft+ +e.marginRight+(e.border.show?2*e.border.size:0),Pe=o.canvasarea.width-Ae;Pe<he&&(he=Pe),ye=l(he),K&&(he-=pe),W.style("max-width",he+"px"),te.style("max-width",ye+"px")}if(T&&(fe=ue.getRowsCount(xe,de),de=Qy(fe*xe,de),c.adjust)){var Te=ue.getVisibleItemRenderCount(W,fe,he,de,xe),Ee=c.maxWidth,Le=c.maxHeight;if(m.length!==Te){var Me=vk.adjustFactor(P,Ee,Le,u,D,e.itemMargin);de-=Me[1],de=Qy(Le?Le-Me[1]:de,de)}}if(ce.styles({"max-width":he+hm,"max-height":de+hm}),t.itemMaxWidth=null,t.legendLabelMaxWidth=null,O&&ke){var De=ue.getMaxItemWidth(m);ve=Qy(De,he),t.itemMaxWidth=ve,t.legendLabelMaxWidth=ve-L-2*e.itemMargin,Km.WINDOWS&&H&&ce.style("max-width",he+2+"px")}Ce=ue.getVisibleItemRenderCount(W,fe,he,de,xe);var Re=od(o,W,m,ce,0,he,0,H,pe,a,y,n,0,V,r,B),je=qy(0,b-Ce);we=a(T&&0<je&&!o.legend.allRendered?m.slice(0,Ce):m),T&&0<je?Re.create(je):(T&&0===je||!T)&&Re.remove();var He=o.legend.expanded,Be=1;ge=We(ce)||T&&Ce<b?s:0,y(we),n(V,k,he,de);var Ne=!0===(T&&He||!T);Km.IE&&Ne&&(Ne=ce.node().scrollHeight-Be>ce.node().offsetHeight),ce.style("overflow-x","hidden"),ce.style("overflow-y",Ne?"auto":"hidden")}),t}function n(e){var t=arguments[3],n=0,a=0;if(1<arguments.length&&void 0!==arguments[1]&&arguments[1]){var l=i.legend,s=o.legendarea.element.node().getBoundingClientRect();n=Qy(o.canvasarea.width-s.width,l.x),a=Qy(o.canvasarea.height-Qy(s.height,t),l.y)}else{var c=Hr(r,o);n=c[0],a=c[1]}e.styles({left:n+"px",top:a+"px"})}var r,a,i,o,l=Vg("legendClick","legendDblclick","legendMouseover","legendMouseout"),s=20,c=e.bound,u=e.globalFont,d=(e.callbackArgs,e.order),h=Dx.getLegendData,f=Dx.getLegendDataLength,p=Dx.isHiddenItem,g=Dx.getClr,v=Dx.isDisabled;return t.dispatch=l,t.chartarea=function(e){return arguments.length?(r=Dm(e),t):r},t.systemconf=function(e){return arguments.length?(i=e,t):i},t.chartObj=function(e){return arguments.length?(o=e,t):o},t.color=function(e){return arguments.length?(a=e,t):a},t};var yk=Dx.getLegendData,mk=Dx.getLegendDataLength,bk=Dx.isHiddenItem,xk=Dx.isDisabled,wk=Dx.isItemDisabled,Ck=Dx.isAllEnabled,kk=Dx.getClr,_k=Dx.updateData;Xv.events=function(e,t,n,r){function a(t,n){(Qm.clickedTime=null)==b?s(this,t,n):V(e.zcEventType?C:b,Hv(),t,n,e)}function i(t,n){null==x?c(this,t,n):V(e.zcEventType?k:x,Hv(),t,n,e)}function o(t,n){Hv()&&Hv().touches&&Cc(),null==y?function(e,t,n){A.toggleItemNUpdateChart(e,t,n,P)}(this,t,n):V(e.zcEventType?w:y,Hv(),t,n,e)}function l(t,n){null==m||V(m,Hv(),t,n,e)}function s(t,n,r){A.highlightSeries(t,n,r,P,e,!0),A.highlightItem(t,n,r,P,!0)}function c(t,n,r){A.highlightSeries(t,n,r,P,e),A.highlightItem(t,n,r,P);}function u(e){return fg(t.nodes()[e])}function d(){if(!g&&(g=yk(e,O),v=mk(e,g),kr(e))){var t=Yt(e.dataObject),n=-1;t.forEach(function(t,r){var a=t.layer;t.data.forEach(function(t,r){if(n++,a===O){var i=e.rendererConf[n].legendIndex();R[i]=R[i]||[],R[i].push(t)}})})}}function h(){return rn(e)&&e.legends.get("clr-"+O).highlightManager||e.legendHighlight}var f,p,g,v,y,m,b,x,w,C,k,_,S,O=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,A=e.legend.component,P=e.systemConf.legend,T=fn(P,"clr"),E=pn(P,"clr"),L=P.colorBox,M=[P,e.systemConf.canvas,Qm],z=[T,P,e.systemConf.canvas,Qm],I=Y(M,"fontColor"),D=e.chartTypes[0].name===Nb,R=[],j=e.systemConf.legend.events;if(null!=j&&(S=0==U(j.enabled,!0),y=j.click,m=j.doubleclick,b=j.mouseover,x=j.mouseout,_=j.cursor,w=j.tap,C=j.taphold,k=j.tapholdend),!S){var H;t.style("cursor",_||gm);var B={chartObj:e},N=Km.PHANTOMJS?{move:"mousemove",out:"mouseout"}:{move:"mouseenter",out:"mouseleave"},F=(_defineProperty(H={},N.move,a),_defineProperty(H,N.out,i),_defineProperty(H,"click",o),_defineProperty(H,"dblclick",l),H);Mr(t,F,{taphold:a,tapholdend:i,tap:o,dbltap:l},B)}A.filterSeriesNUpdate=function(t,a,i){var o=be(a),l=function(t){if(!n.allSelected&&!n.isFirstClickAfterDeselection)return!0;if(D&&!t.disabled){var r=e.renderer[0].getSankeyNodeByPoint(t),a=e.dataObject.sankeyLayout.linkLength;return r.sourceLinks.length+r.targetLinks.length<a}return!0}(t);d(),!function(t,a){var i=void 0,o=void 0,l=g[t[0]],s=!0===wk(l);D&&(i=function(e,t,n){var r=t.dataObject.sankeyLayout,a=Dg(t.cache.sankey.legendSankeyLayout.nodes,function(e){return e.name}),i=!n.allSelected&&!n.isFirstClickAfterDeselection||e.disabled,o=t.renderer[0].getSankeyNodeByPoint(e,a),l=[];return i&&([].concat(_toConsumableArray(o.sourceLinks),_toConsumableArray(o.targetLinks)).forEach(function(e){l=[].concat(_toConsumableArray(l),_toConsumableArray(r.getConnectedNodes(e)))}),l=Fe(l.map(function(e){return e.point}))),l}(l,e,n),o=function(e,t){var n=t.dataObject.sankeyLayout,r=t.renderer[0].getSankeyNodeByPoint(e),a=[];if(r){var i=n.getAllConnectedPoints(r,!0),o=i.filter(function(e){return"link"===e._type});i.filter(function(e){return"node"===e._type}).forEach(function(e){e!==r&&0===[].concat(_toConsumableArray(e.sourceLinks),_toConsumableArray(e.targetLinks)).filter(function(e){return!Re(o,e)}).length&&a.push(e.point)})}return a}(l,e).filter(function(e){return!Re(i,e)}));var c=g.filter(function(t,c){return n.allSelected||n.isFirstClickAfterDeselection||(R&&R.length?R[c].forEach(function(e){return e.node.filtered=!n.allSelected}):t.disabled=D&&l!==t?!Re(i,t):!n.allSelected,_k(t,c,e),Dx.toggleChartEvents(e,!0),Dx.fadeChart(!0,e,r,!0,O),e.eventHandler.tooltipElement.hide()),D&&l!==t&&a&&(s?t.disabled&&(t.disabled=!Re(i,t)):t.disabled||(t.disabled=Re(o,t))),!bk(t)&&wk(t)}),u=t.filter(function(e){var t=g[e];return!bk(t)});return c.length==v-u.length&&u.every(function(e){var t=g[e];return!wk(t)})}(o,l)&&l&&(o.forEach(function(e){if(kr(i)){var t=Yt(i.dataObject),n=-1;t.forEach(function(t,r){var a=t.layer;t.data.forEach(function(t,r){n++,i.userdata.facets.color.length&&a!==O||i.rendererConf[n].legendIndex()!==e||(t.node.filtered=!t.node.filtered),a===O&&(g[i.rendererConf[n].legendIndex()].filtered=t.node.filtered)})})}else{var r=g[e];r.disabled=!r.disabled,i.dataObject.hierarchical&&!dx.isQuantileColorScale(i)&&(i.systemConf.seriesdata.chartdata[e].disabled=r.disabled),_k(r,e,i)}}),function(t){if(e.ismultiy){var n=Rg();return t.filter(function(e){var t=g[e],r=Gt.helpers.getParsedYAxisOrder(t.yaxiscolumnorder);return!n.has(r)&&(n.add(r),!0)})}return be(t[0])}(o).forEach(function(e){var t=g[e];i.addRemoveSeries(t,e,t.yaxiscolumnorder,!n.allSelected&&!n.isFirstClickAfterDeselection)}),n.allSelected||n.isFirstClickAfterDeselection||(n.isFirstClickAfterDeselection=!0))},A.toggleItemNUpdateChart=function(t,r,a,i){var o=be(a);if(f=f||_r(e,"clr-"+O).selectAll("div.legendfilterbox"),P.filter.enabled){h().resetSelection(),A.filterSeriesNUpdate(r,o,e);var l=o.filter(function(e){return wk(g[e])});if(A.highlightItem(t,r,l,i,!1,!0),D){var u=g.map(function(e){return e.itemIndex});A.updateLabel(u)}else A.updateLabel(o);Xv.setColorBoxBackground(f,e,n,O),Hv()&&!Hv().touches&&("canvas"===e.plot.renderer.mode&&A.highlightSeries(t,r,o,i,e),(wk(g[o[0]])?c:s)(t,r,o))}!function(){n.allSelected||(n.allSelected=!n.allSelected),(p=p||_r(e,"clr-"+O).selectAll("div.selectAll")).empty()||(d(),p.html(Ck(g,n.allSelected)?L.text||"&#10003;":(E.colorBox||{}).text||""))}()},A.highlightItem=function(t,r,a,i,o,l){var s=be(a);d(),s.forEach(function(t){var r=g[t];!function(t,r,a,i,o,l){if(l||!xk(r,n.allSelected,n.isFirstClickAfterDeselection)){var s=fn(i,"clr");if(!Be(s)){var c=fg(t),u=c.selectAll(".legendlabel"),d=(o?s:i).backgroundColor;c.style("background-color",d),!o&&Z(i.showAs)&&u.html(Br(r,a,i,e)),kt(c.selectAll(o?".legendlabel, .legendlabel *":".legendlabel"),o?z:M,!0)}}}(u(t).node(),r,t,i,o,l)})},A.highlightSeries=function(e,t,n,r,a,i){var o=h();if(a.highlightContext=null,A.handlePreviousHighlight.apply(A,arguments),dx.isQuantileColorScale(a)){var l=n;rn(a)?i?wk(t)||(o.highlightSelectedSeries(r,0,l),o.highlightUnselectedSeries(r,0,l)):o.reset(r,0,l):i?wk(t)||a.seriesdata.forEach(function(e,t){o.highlightSelectedSeries(r,t,l),o.highlightUnselectedSeries(r,t,l)}):a.seriesdata.forEach(function(e,t){o.reset(r,t,l,a.seriesdata.length-1===t)})}else i?wk(t)||(o.highlightSelectedSeries(r,n),o.highlightUnselectedSeries(r,n)):o.reset(r,n)},A.updateLabel=function(t){be(t).forEach(function(t){return function(t){var n=g[t],r=u(t),a=kk(wk(n),I,E),i=wk(n)&&E.strikeout?"line-through":null;r.selectAll(".legendlabel, .legendlabel *").styles({color:a,"text-decoration":i}),!wk(n)&&P.showAs&&r.selectAll(".legendlabel").html(Br(n,t,P,e))}(t)})},A.handlePreviousHighlight=function(){var e=h(),t=e.prevData,n=arguments[5];n&&t&&(t[5]=!1,e.prevData=vm,A.highlightSeries.apply(A,t)),e.prevData=n?arguments:vm}};var Sk=(_inherits(ld,QC),ld);Sk.encode="clr",Sk.view="list",Sk.domMode="html",km.setComponent("colorLegendList",Sk),ZC(Sk);var Ok={LISTENER:{click:sd,tap:sd},BEHAVIOUR:{click:[cd,dd,ud,hd],tap:[cd,dd,ud,hd]},SUPPORTED:function(e,t){return"z-0"===t&&un(fx)(e,t)}};km.setComponent("_legendExpandableHandlers",Ok),km.setComponent("_legendExpandableEventArguments",function(e,t){var n=e.legends.get(t),r=n.component,a=n.meta,i=n.element,o=a.config,l=a.globalFont,s=function(e){return e.selectAll("div."+Ex)}(i),c=void 0,u=void 0,d=n.enabled;return{enabled:d=d&&(u=(c=r.getView("ListLegend").getView("Expandable")).parse()).show,trackerElement:s,config:o,globalFont:l,expandableParser:u,expandableObj:c,legendInstance:n}}),km.setComponent("sizeListOptions",function(e){return{marker:{shape:"circle",hAlign:nb,vAlign:nb,fillColor:pm,strokeColor:"#808080"},label:{fontSize:e.fontL1Size.l5,padding:5,keepAligned:!0}}}),et.sizeLegend=function(e){var t=km.getComponent("sizeNestedOptions")(e),n=km.getComponent("sizeListOptions")(e),r=km.getComponent("sizeSliderOptions")(e);return{enabled:!0,hAlign:ab,vAlign:ob,layout:sb,itemMargin:3,marginTop:10,marginRight:10,marginBottom:10,marginLeft:10,title:{show:!1,text:"Legend",fontSize:e.fontL1Size.l4},background:{color:pm,alpha:0},border:{show:!0,size:1,style:"solid",radius:0,color:pm},shadow:{show:!1,color:"rgba(0,0,0,0.3)",x:2,y:2,blur:3,inset:!1},highlightEffect:{selectedSeries:null,unselectedSeries:"none"},list:n,nested:t,slider:r,hoverOptions:{slider:{tooltip:{fontSize:e.fontL1Size.l5}}},filter:{enabled:!0,slider:{track:{},tooltip:_extends({},{enabled:!0,padding:5,margin:5,backgroundColor:"white",borderColor:"rgb(51, 51, 51)",fontColor:"rgb(51, 51, 51)"},{fontSize:e.fontL1Size.l5})}}}};var Ak=(_inherits(yd,GC),_createClass(yd,[{key:"resize",value:function(e,t){var n=this.spec.bound;n.maxWidth=e,n.maxHeight=t,this.create(),this.draw(this.element)}},{key:"viewScaleComponent",value:function(){var e=this.spec,t=e.config,n=e.scaleComponent,r=e.view,a=n.getScale(),i=a.range(),o=a.domain(),l=i[i.length-1],s=n.schema.domain,c=n.schema.data,u=c.meta,d=c.dataType,h=u[u.datatype]||{},f=s.ranges,p=s.stops,g=gd(t,a,r),v=pd(t,a,r),y=r===fx,m=void 0,b=void 0,x=void 0;return d===lx&&function(e,t){var n=e.subfunction,r=cl(e,"legend");if(!Z(n)||"AUTO"===n||r){var a=Na(t[1]-t[0]);e.subfunction=a.subFunction}r&&((e.legendformat||e.format).specifier=null)}(h,o),d===ox&&(t.ranges||(t.ranges=o.map(function(e){return[e]}))),x=f||d===ox?(m=d===ox?o:f||o,Ag().domain(m).range(i)):(m=p?o:fd(a,d,v,h.subfunction,y),a),g&&(b=Al(m,g)),{ticks:m,labels:b||m,scale:x,bound:{width:l,height:l},labelData:f&&m._dummy&&1===m.length&&m[0][0]===m[0][1]?[[m[0][0]]]:null}}},{key:"updateScale",value:function(e,t){var n=this.spec.scaleComponent,r=n.d3_scale;r.range=n.parseRange({maxWidth:e,maxHeight:t}),n.scale.range(r.range)}}]),yd),Pk=(_inherits(Sd,GC),_createClass(Sd,[{key:"create",value:function(){var e=this.parse(),t=e.show,n=e.data,r=e.ulSpec,a=e.liSpec,i=e.markerSpec,o=e.labelSpec,l=e._class,s=Kc("ul","."+l+"legseries",[1],r);if(this.encode=s,!t)return s;var c=Kc("li","."+l+"series",n,a);s.children.push(c);var u=new Tk(i),d=u.create();c.children.push(d);var h=new Ek(o),f=h.create();return c.children.push(f),this._addView("Box",u),this._addView("Label",h),s}},{key:"parse",value:function(){var e=this.spec,t=e.data,n=e.config,r=e.align,a=e.format,i=void 0===a?function(e){return e}:a,o=e.globalFont,l=void 0===o?{}:o,s=e.class,c=void 0===s?"":s,u=this.spec.label.fontSize,d=n.list,h=n.show,f=void 0===h||h,p=d.marker,g=d.label,v=Pd(p,g,r,e.scale,u),y=function(e,t){function n(e,t){return i.filter&&i.filter.range&&d&&d.length&&d[_d(t,{config:i,ticks:l||a})].disabled}function r(e){return v.height/2-k(e)/2+"px"}var a=t.data,i=t.config,o=t.align,l=t.ticks,s=t.globalFont,c=t.label.fontSize,u=i.list,d=i.ranges,h=u.marker,f=u.label,p=pn(i),g=Dx.getFilterBoxSize(h,c),v=t.bound||{width:g[0],height:g[1]},y=Pd(h,f,o,t.scale,c),m=p.marker,b=Be(m)?m:Im(m,h),x=p.label,w=h.hAlign,C=y.width,k=y.height,_=y.size,S=y.overflow,O=y.totalHeight,A=f.keepAligned,P=void 0===A||A,T=f.padding,E=void 0===T?0:T,L=f.showAs,M=o.layout===cb,z={},I={},D={};if(Td(h)||(E=0),P){var R=vm,j=vm,H=vm,B=vm,N=void 0;if(M)R=function(e){return(qy(c,v.height)-k(e))/2+"px"},j=function(){return E+"px"},N=v.height+"px";else{R=function(e){return(w===ab?v.width-C(e):w===nb?(v.width-C(e))/2:0)+"px"},j=function(e){return(w===ab?0:w===nb?(v.width-C(e))/2:v.width-C(e))+E+"px"},"visible"===S&&(H=function(e,t){return(t?-(k(e)-O):0)+"px 0 0 0"},_(a[0])[0]<_(a[a.length-1])[0]&&(B=function(e,t){return a.length-1-t}));var F=vm;N=function(e){return F=F||ws([f,s,Qm]),qy(F,k(e))+"px"}}z={float:rb,display:"inline-block",margin:function(e){return M?R(e)+" 0 0 0":"0 0 0 "+R(e)}},I={display:L?"inline-block":vm,margin:function(e){return"0 0 0 "+j(e)}},D={"line-height":N,margin:H,"z-index":B}}else M?(z={margin:function(e){return r(e)+" auto 0px 0px"}},z={margin:function(e){var t=r(e);return"left"===w?t+" auto "+E+"px 0":"right"===w?t+" 0 "+E+"px auto":t+" auto "+E+"px auto"}}):(D={"text-align":w},z={margin:"right"===w?"0 0 "+E+"px auto":w===nb?"0 auto "+E+"px auto":"0 auto "+E+"px 0"}),z.float=vm,z.display=vm,I.display=vm,I.margin=vm,D=_extends({},D,{"line-height":vm,"z-index":vm,margin:vm});return{marker:{styles:z,onEnd:function(e){e.each(function(e,t){n(0,t)&&kd(fg(this),y,h,b)})}},label:{styles:I,onEnd:function(r){if(r.each(function(e,t){n(0,t)&&Cd(fg(this),i,s,x)}),!M){var a=r.node(),o=a&&a.offsetHeight;(function(e,t){return e.getView(t).encode.element})(e,"Box").style("margin-top",function(e){return function(e){return Ju(nb,o,y.height(e),c,t.scale?y.height(e):h.size,f.overflow)}(e)+"px"})}}},li:{styles:D}}}(this,e);return{show:f,data:t,_class:c,ulSpec:{properties:function(e){var t,n=e.layout===cb;return{styles:(_defineProperty(t={width:"",margin:0,padding:0,"white-space":n?"nowrap":vm},n?"overflow-x":"overflow-y","hidden"),_defineProperty(t,"list-style-type",fm),_defineProperty(t,"-webkit-overflow-scrolling","touch"),_defineProperty(t,"vertical-align",ob),_defineProperty(t,"font-size","0px"),t)}}(r)},liSpec:{properties:function(e,t,n){var r=e.list.label,a=void 0;return a="wrap"===r.overflow?{"word-wrap":"break-word","white-space":"normal","vertical-align":ob}:{"text-overflow":"ellipsis","vertical-align":fb},{styles:_extends({"white-space":"nowrap",position:"relative",overflow:"hidden","text-align":rb,padding:$(Hm(e.itemMargin,3)),height:Z(e.itemHeight)?e.itemHeight+"px":vm},a,{"vertical-align":ob,display:function(e){return Dx.isHiddenItem(e)?fm:t.layout===cb?"inline-block":"block"}},n.styles,{"font-size":"0px"},kt(vm,[r],!0))}}(n,r,y.li)},markerSpec:_extends({show:Td(p),config:p,bound:v,_class:c},y.marker),labelSpec:_extends({config:g,format:i,globalFont:l,_class:c},y.label)}}}]),Sd),Tk=(_createClass(Od,[{key:"create",value:function(){var e=this.spec,t=e.onEnd,n=e.show,r=e._class,a=e.data,i=void 0===a?[1]:a,o=this.parse(),l=Kc(Zm,"."+r+"legendfilterbox",n?i:[],{properties:o,depends:!0,onEnd:t});return this.encode=l}},{key:"parse",value:function(){var e=this.spec,t=e.bound,n=e.config,r=e.styles;return{styles:_extends({width:function(e){return t.width(e)+"px"},height:function(e){return t.height(e)+"px"},"background-repeat":"repeat","box-sizing":"border-box","text-align":nb},r,kt(vm,[n],!0),bd(n,t))}}}]),Od),Ek=(_createClass(Ad,[{key:"create",value:function(){var e=this.spec,t=e.onEnd,n=e._class,r=e.data,a=Kc("span","."+n+"legendlabel",void 0===r?[1]:r,{properties:this.parse(),depends:!0,onEnd:t});return this.encode=a}},{key:"parse",value:function(){var e=this.spec,t=e.globalFont,n=void 0===t?{}:t,r=e.config,a=e.format,i=void 0===a?function(e){return e}:a,o=e.styles;return{html:i,attrs:{title:function(){return r.tooltip?this.textContent:vm}},styles:_extends({},kt(vm,[r,n,Qm],!0),o)}}}]),Ad);km.setComponent("listView",Pk),km.setComponent("listView.markerSize",Pd);var Lk=(_createClass(Ed,[{key:"create",value:function(){var e=this.parse(),t=e.backgroundParser,n=e.borderParser,r=e.shadowParser,a={properties:{styles:_extends({},t,n,r)}};return this.encode=a}},{key:"parse",value:function(){var e=this.spec.config;return{backgroundParser:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.color,n=void 0===t?pm:t,r=e.alpha,a=zg(n.toString());return{"background-color":"rgba("+a.r+","+a.g+","+a.b+","+r+")"}}(e.background),borderParser:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.show,n=e.size,r=e.style,a=e.color,i=e.radius;return t?{border:+n+"px "+r+" "+a,"border-radius":i+"px"}:{border:vm}}(e.border),shadowParser:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.show,n=e.x,r=e.y,a=e.blur,i=e.color,o=e.inset;return t?{"box-shadow":n+"px "+r+"px "+a+"px "+i+(o?" inset":"")}:{"box-shadow":vm}}(e.shadow)}}}]),Ed);km.setComponent("legendBackgroundHtml",Lk);var Mk=(_createClass(Ld,[{key:"create",value:function(){var e=this.parse(),t=new Pk(e).create();return this.encode=t}},{key:"parse",value:function(){var e=this.spec,t=e.config,n=e.globalFont,r=t.title||{},a=Im(t.list.marker,t.selectAllBox,!0),i=_extends({},r,{keepAligned:!0,padding:t.textPadding});return{config:{show:r.show,itemMargin:r.margin,list:{marker:_extends({},a,{show:!1}),label:i}},data:[r.text],align:{layout:sb},format:function(e){return z(e)},globalFont:n,label:{fontSize:+zm.getVal(r.fontSize||n.fontSize)},class:"zc-header-"}}}]),Ld);Mk.adjustFactor=function(e,t,n,r,a){var i=a.layout===cb,o=e.show,l=e.keepAligned,s=[0,0];return o&&i&&l&&(s[0]+=.2*t),s},km.setComponent("legendTitleHtml",Mk);var zk=(_inherits(zd,GC),_createClass(zd,[{key:"create",value:function(){var e=this,t=this.parse(),n=t.titleSpec,r=t.backgroundSpec,a=t.viewSpec,i=t.expandableSpec,o=t.keepTitleAligned,l=t.setDimension,s=t.keepExpandableAligned,c=Kc(Zm,".legendgroup",[1]);c.onEnd=l,this.encode=c;var u=this.addView("LegendBackgroundHtml",new Lk(r));return c.properties=u.encode.properties,this.addView("LegendTitleHtml",new Mk(n)).encode.properties.styles.display=Id(o),this.addView("ListView",new Pk(a)).encode.properties.styles.display=Id(o,s),this.addView("Expandable",new vk(_extends({},i,{target:function(){return Dd(e,"ListView")}}))),c}},{key:"parse",value:function(){function e(e){var t=a.reversed?R(l).reverse():l;return Z(e)?t.slice(0,e):t}function t(e){var t=!f.show||n.getView("Expandable").expanded();!function(e,t,n,r,a,i){var o=e.selectAll("ul."+kx),l=e.selectAll("li."+_x),s=e.selectAll("ul.zc-header-legseries"),c=e.selectAll("div."+Ex),u=t.layout,d=a.title,h=a.border,f=void 0===h?{}:h,p=a.list.expandable,g=void 0===p?{}:p,v=f.show?f.size:0,y=r.maxWidth,m=r.maxHeight,b=g.show&&g.keepAligned,x=Id(n,b);y-=2*v,m-=2*v;var w=n?"50%":"100%",C=Qy(Ie(d.maxWidth||w,y),y);s.style("max-width",C+"px");var k=ze(s),_=ze(c);if(n||(m=Qy(m-k.height,m)),e.style("max-width",y+"px"),o.styles({"max-width":y+"px","max-height":m+"px"}),u===cb){o.styles({width:vm,height:vm});var S=y-(n?k.width:0)-(b?_.width:0);S-=n||b?2:0;var O=m-(b?0:_.height);o.style("max-width",S+"px"),o.style("max-height",O+"px"),o.style("border","1px solid");var A=ze(o);o.style("border",vm),o.style("width",A.width+2+"px");var P=We(o,"width")?20:0;o.style("height",A.height+P+2+"px");var T=o.node().scrollHeight-2>o.node().offsetHeight;o.style("overflow-x","auto"),o.style("overflow-y",T?"auto":"hidden")}else if(t.layout===cb){o.styles({width:vm,height:vm}),l.style("max-width",y+"px"),e.style("max-width",y+"px"),o.styles({display:"inline","border-top":"1px solid"});var E=ze(o).width;o.styles({display:x,"border-top":vm}),e.style("max-width",y+"px"),o.style("height",function(e,t){var n=0,r=0,a=0;return e.each(function(){var e=ze(this);r+e.width>t&&(n+=a,r=a=0),r+=e.width,a=qy(a,e.height)}),n+=a}(l,y)+2+"px");var L=We(o)?20:0;o.style("width",E+L+2+"px"),o.style("overflow","auto")}else{var M=m-_.height;o.style("max-height",M+"px");var z=We(o)?20:0;o.style("width",vm);var I=ze(o.style("display","inline-block")).width;o.style("display",x),o.style("width",I+z+2+"px"),o.style("height",vm),o.style("overflow-x",i?"auto":"hidden"),o.style("overflow-y",i?"auto":"hidden")}}(e,b,S,s,a,t)}var n=this,r=this.spec,a=r.config,i=r.globalFont,o=r.format,l=r.data,s=r.bound,c=r.callbackArgs,u=a.title,d=a.list,h=d.expandable,f=void 0===h?{}:h,p=this.viewScaleComponent(),g=p.scale,v=p.bound,y=p.ticks,m=p.labelData,b=xr(a),x=b.layout===cb,w=Hm(r.visibleItemCount,l.length),C=f._expanded?l.length:w,k=e(C),_=g&&qy(g(k[k.length-1]),g(k[0])),S=u&&u.show&&u.keepAligned&&b.layout===cb,O=d.marker,A=d.label,P=+zm.getVal(Y([d.label,i,Qm],"fontSize")),T=Pd(O,A,b,g,P),E=g?vg(k,function(e){return T.height(e)}):v&&v.height,L={config:a},M={align:b,config:a,globalFont:i},z={bound:_?{width:_,height:E}:v,config:a,format:o&&function(e,t){return o(m?m[t]:e,t)},globalFont:i,data:k,ticks:y,scale:g,align:b,label:{fontSize:+zm.getVal(Y([d.label,i,Qm],"fontSize"))},class:"zc-legend-"},I={config:f,globalFont:i,callbackArgs:c,renderList:function(){var t=_extends({},z,{bound:{width:v.width,height:Qy(E,v.height)},data:e()}),r=new Pk(t);r.create(),r.draw(n.encode.element)},bound:s,height:function(){var e=ze(Dd(n,"LegendTitleHtml")).height;return S?qy(e,Qy(E,Hm(_,v.height))):Qy(E,Hm(_,v.height))},isHorizontal:x,padding:a.itemMargin,expanded:f._expanded,remainingCount:l.length-w,margin:function(){return!S||f.keepAligned?0:"0 0 0 "+ze(Dd(n,"LegendTitleHtml")).width},setLegendDimension:function(){return t(n.encode.element)}};return{titleSpec:M,backgroundSpec:L,viewSpec:z,expandableSpec:I,keepTitleAligned:S,keepExpandableAligned:f.keepAligned,setDimension:t}}}]),zd);km.setComponent("listLegend",zk);var Ik=(_inherits(jd,Ak),_createClass(jd,[{key:"create",value:function(){var e=this.viewScaleComponent();this.spec.data=e.ticks,this.spec.visibleItemCount=Rd(this),this.encode=this.addView("ListLegend",new zk(this.spec,this.viewScaleComponent),!1).encode}},{key:"draw",value:function(e){e.styles({display:"block",position:"absolute",left:vm,top:vm}),_get(jd.prototype.__proto__||Object.getPrototypeOf(jd.prototype),"draw",this).call(this,e)}},{key:"resize",value:function(e,t){if(e||t){this.viewScaleComponent(),this.spec.visibleItemCount=Rd(this);var n=Rr(e,t,this.spec.bound),r=n.w,a=n.h;this.updateScale(r,a),_get(jd.prototype.__proto__||Object.getPrototypeOf(jd.prototype),"resize",this).call(this,r,a)}}}]),jd);Ik.adjustFactor=function(e,t,n,r){var a=xr(e),i=e.maxWidth,o=e.maxHeight,l=e.title,s=e.list.expandable,c=vk.adjustFactor(s,t,n,r,a,e.itemMargin),u=Mk.adjustFactor(l,t,n,r,a),d=[0,0];return a.layout===cb?d[1]+=22:d[0]+=22,o||(d[1]+=c[1]+u[1]),i||(d[0]+=c[0]+u[0]),d},Ik.encode="z",Ik.view="list",Ik.domMode="html",km.setComponent("sizeLegendList",Ik),ZC(Ik);var Dk=Km.PHANTOMJS?{move:"mousemove",out:"mouseout"}:{move:"mouseenter",out:"mouseleave"},Rk={LISTENER:(ig={},_defineProperty(ig,Dk.move,Hd),_defineProperty(ig,Dk.out,Hd),_defineProperty(ig,"click",Hd),_defineProperty(ig,"dblclick",Hd),_defineProperty(ig,"taphold",Hd),_defineProperty(ig,"tapholdend",Hd),_defineProperty(ig,"tap",Hd),ig),DATA_FINDER:(og={},_defineProperty(og,Dk.move,Bd),_defineProperty(og,Dk.out,Bd),_defineProperty(og,"click",Bd),_defineProperty(og,"dblclick",Bd),_defineProperty(og,"taphold",Bd),_defineProperty(og,"tapholdend",Bd),_defineProperty(og,"tap",Bd),og),BEHAVIOUR:(lg={},_defineProperty(lg,Dk.move,[Fd,Wd,Ud]),_defineProperty(lg,Dk.out,[Vd,Yd,Gd]),_defineProperty(lg,"click",[qd,Xd,Zd]),_defineProperty(lg,"dblclick",[]),_defineProperty(lg,"taphold",[Cc,Fd,Wd,Ud]),_defineProperty(lg,"tapholdend",[Vd,Yd,Gd]),_defineProperty(lg,"tap",[Cc,qd,Xd,Zd]),lg),REVERSE_DATA_FINDER:{mousemove:function(){return Nd.apply(this,arguments)}},REVERSE_BEHAVIOUR:{mousemove:[Ud,function(e,t){var n=this.options,r=n.scrollToItem,a=_d(t,n);if(r){var i=r.ulElement,o=r.liElement,l=r.available,s=r.isScrollable,c=r.isHorizontal,u=c?"offsetLeft":"offsetTop";s&&(i[c?"scrollLeft":"scrollTop"]=o[a][u]-l/2)}}],mouseout:[Gd]},SUPPORTED:function(e,t){return"z-0"===t&&hn(e.legends,t)===fx}};km.setComponent("_legendSizeListHandlers",Rk),km.setComponent("_legendSizeListEventArguments",function(e,t){var n=e.legends.get(t),r=n.component,a=n.element,i=n.meta,o=n.highlightManager,l=i.config,s=i.globalFont,c=i.scaleComponent,u=l.events,d=c.schema.data.dataType,h=function(e){return e.selectAll("li."+_x)}(a),f=r.viewScaleComponent(),p=f.ticks,g=f.scale,v=u&&0==U(u.enabled,!0),y=n.enabled&&!v,m=void 0,b=void 0;return y&&(b=r.getView("ListLegend").getView("ListView").getView("Box").spec.bound,m=function(e,t){var n=e&&e.selectAll("."+kx).node();if(n){var r=n?n.children:[],a=t.getView("ListLegend").getView("Expandable"),i=!a.parse().show||a.expanded(),o=a.spec.isHorizontal,l=o?"Width":"Height";return{ulElement:n,liElement:r,available:n["client"+l],isScrollable:n["scroll"+l]>n["client"+l]&&i,isHorizontal:o}}}(a,r)),{enabled:y,trackerElement:h,highlightManager:o,config:l,globalFont:s,dataType:d,legendInstance:n,scale:g,ticks:p,boxSize:b,scrollToItem:m}}),km.setComponent("sizeNestedOptions",function(e){return{marker:{shape:"circle",hAlign:nb,vAlign:ib,fillColor:pm,strokeColor:"#C0C2C4"},axis:{show:!0,tickOrient:ub,ticklabel:{fontSize:e.fontL1Size.l8},tickmark:{show:!1,color:"#AAACAF",size:10}}}});var jk="zc-nested-view";Qd.x=Kd,Qd.y=$d;var Hk=(_inherits(Jd,GC),_createClass(Jd,[{key:"create",value:function(){var e=this.spec.data||[],t=this.parse(),n=t.poly,r=t.position,a=t.styles,i=Kc("g","."+jk,[1]),o=Kc(Um,null,e,{properties:{attrs:{d:n,transform:r},styles:a}});return i.children.push(o),this.encode=i}},{key:"parse",value:function(){var e=this.spec,t=e.config,n=e.bound,r=e.scale,a=void 0===r?function(e){return e}:r,i=Bt(t.shape),o=Qd.x(n,a,t.hAlign),l=Qd.y(n,a,t.vAlign);return{poly:function(e){return i(a(e))},position:function(e){return"translate("+o(e)+","+l(e)+")"},styles:t}}}]),Jd);Hk.x=Qd.x,Hk.y=Qd.y,km.setComponent("nestedView",Hk);var Bk="center-center",Nk=(_createClass(lh,[{key:"create",value:function(){var e=this.spec,t=e.data,n=e.config,r=Kc("g",".zc-nested-axis");if(!n.show)return this.encode=r;var a=this.parse(),i=a.tickMarkParser,o=a.tickLabelParser,l=a.tickLabelEnd,s=Kc("g","."+Px),c=Kc(Um,null,i?t:[],{properties:i});s.children.push(c);var u=Kc("g","."+Px),d=Kc(Wm,null,o?t:[],{properties:o});return d.onEnd=function(){return l(d.element,c.element)},u.children.push(d),r.children.push(s,u),this.encode=r}},{key:"parse",value:function(){var e=this.spec,t=e.config,n=e.bound,r=e.scale,a=e.align,i=e.format,o=e.shape,l=void 0===o?"square":o,s=e.availableBound,c=t.ticklabel,u=t.tickmark,d=t.show,h=sh(t),f=d&&h&&nh(u,n,r,a,l),p=d&&rh(c,n,r,a,i,u,l,h);return{tickMarkParser:f,tickLabelParser:p,tickLabelEnd:function(e,t){return eh(e,t,s,n,p)}}}}]),lh),Fk=(_inherits(ch,Ak),_createClass(ch,[{key:"create",value:function(){var e=this.parse(),t=e.titleParser,n=e.backgroundParser,r=e.viewParser,a=e.axisParser,i=e.axisEnd,o=void 0;o=Kc("g",".legendgroup");var l=new FC(t).create();o.children.push(l);var s=new Hk(r).create();s.properties={attrs:{transform:function(){return"translate(0,"+M(l.element).height+")"}}},o.children.push(s);var c=new Nk(a).create();c.onEnd=function(){return i(c,s,l)},o.children.push(c);var u=new VC(_extends({},n,{bound:function(){return M(o.element)}})).create();o.children.push(u),this.encode=o}},{key:"parse",value:function(){var e=this.spec,t=e.config,n=e.bound,r=e.format,a=this.viewScaleComponent(),i=a.scale,o=a.bound,l=a.ticks,s=a.labels,c=t.nested,u=c.marker,d=c.axis,h=Hm(c.padding,3),f=xe(h);return{titleParser:{data:[1],config:t.title,bound:n},viewParser:{bound:o,data:R(l).reverse(),scale:i,config:u},axisParser:{bound:o,data:s||l,scale:i,config:d,align:{hAlign:u.hAlign,vAlign:u.vAlign},format:r,shape:u.shape,availableBound:{maxWidth:n.maxWidth-f.left-f.right,maxHeight:n.maxHeight-f.top-f.bottom}},backgroundParser:{data:[1],config:t,margin:h},axisEnd:function(e,t,n){var r=M(e.element),a=M(n.element),i=qy(-r.y,0)+a.height+h;e.element.attr("transform","translate(0,"+i+")"),t.element.attr("transform","translate(0,"+i+")")}}}},{key:"resize",value:function(e,t){if(e||t){var n=Rr(e,t,this.spec.bound),r=n.w,a=n.h,i=this.encode.children,o=M(i[3].element),l=M(i[1].element);r-=e?qy(o.width-l.width,0):0,a-=t?qy(o.height-l.height,0):0,this.updateScale(r,a),_get(ch.prototype.__proto__||Object.getPrototypeOf(ch.prototype),"resize",this).call(this,e,t)}}},{key:"draw",value:function(e){this.element=e,gu(this.encode,e);var t=this.spec,n=t.config,r=t.bound,a=n.maxWidth,i=n.maxHeight,o=r.maxWidth,l=r.maxHeight,s=M(e),c=s.width,u=s.height;(a||i)&&(1<c-o||1<u-l)&&(o-=a&&o<c?c-o:0,l-=i&&l<u?u-l:0,this.updateScale(o,l),this.create(),gu(this.encode,e))}}]),ch);Fk.adjustFactor=function(e,t,n,r){var a=[0,0],i=e.maxWidth,o=e.maxHeight,l=e.nested.axis;return l.show&&(o||(a[1]+=ws([l.ticklabel,r,Qm])),i||(a[0]+=t*(sh(l)?.3:.2))),a},Fk.encode="z",Fk.view="nested",Fk.domMode="svg",km.setComponent("sizeLegendNested",Fk),ZC(Fk),km.setComponent("geometryUtils.polygon.closestToPolygon",dh);var Vk={LISTENER:{mousemove:uh,mouseout:uh,taphold:uh,tapholdend:uh},DATA_FINDER:{mousemove:hh,mouseout:hh,taphold:hh,tapholdend:hh},BEHAVIOUR:{mousemove:[Fd,Wd,fh,yh],mouseout:[Vd,gh,Yd,ph],taphold:[Cc,Fd,Wd,fh,yh],tapholdend:[Vd,gh,Yd,ph]},REVERSE_DATA_FINDER:{mousemove:function(){return Nd.apply(this,arguments)}},REVERSE_BEHAVIOUR:{mousemove:[fh,yh],mouseout:[vh,ph]},SUPPORTED:un(hx)};km.setComponent("_legendSizeNestedHandlers",Vk),km.setComponent("_legendSizeNestedEventArguments",function(e,t){var n=e.legends.get(t),r=n.component,a=n.meta,i=n.element,o=n.highlightManager,l=a.config,s=a.scaleComponent,c=a.format,u=l.events,d=l.nested.marker.shape,h=s.schema.data.dataType,f=s.getScale(),p=function(e){return e.select("g."+jk).selectAll(Um).style("pointer-events","all")}(i),g=function(e){var t=e.select("g."+jk);return Et("g","."+Lx,[1],e).style("display",null).style("opacity",0).attr("transform",t.empty()?null:t.attr("transform"))}(i),v=r.viewScaleComponent(),y=v.ticks,m=v.scale,b=v.bound,x=u&&0==U(u.enabled,!0),w=!Be(fn(l).marker),C="circle"!==d?function(e){var t=[];return e.each(function(){t.push(It(this))}),t}(p):null;return{enabled:n.enabled&&!x&&w,trackerElement:p,highlightElement:g,highlightManager:o,config:l,ticks:y,viewScale:m,viewBound:b,scale:f,dataType:h,polygonPoints:C,legendInstance:n,tooltip:function(e,t,n){var r=fn(n).tooltip,a=r&&r.orient,i=a?aa(a):function(e){var t=e.nested.marker,n=t.hAlign,r=t.vAlign;return r!==nb?r:n!==nb?n:ib}(n);return Eo({config:_extends({},r,{orient:i}),orient:i,element:t,chart:e})}(e,g,l),format:c}}),km.setComponent("sizeSliderOptions",function(e){return{marker:{shape:"circle",hAlign:nb,vAlign:nb,fillColor:"#51545A",strokeColor:"white"},track:{show:!0,fillColor:"#F2F3F5"},connector:{show:!0,strokeColor:"#51545A"},axis:{show:!0,ticklabel:{fontSize:e.fontL1Size.l5},minmaxlabels:{padding:2,align:"center",fontSize:e.fontL1Size.l5},tickmark:{color:"rgb(97, 97, 97)",size:5},axisline:{show:!0,color:"rgb(97, 97, 97)"}}}});var Wk=(_createClass(xh,[{key:"create",value:function(){var e=this.parse(),t=e.show,n=e.styles,r=e.flashSpec,a=e.symbolSpec,i=Kc("g","."+e.className,[1],{properties:{styles:{visibility:t?null:"hidden"}}}),o={properties:{attrs:{d:a.path,transform:function(e){return Ar(a.position(e))}},styles:n}},l=Kc(Um,"."+Ox,a.data,o);i.children.push(l);var s={properties:{attrs:{d:r.path},styles:n}},c=Kc(Um,"."+Sx,[1],s);return c.onStart=function(){return s.properties.attrs.d=r.path(l.element)},i.children.push(c),this.encode=i}},{key:"parse",value:function(){var e=this,t=this.spec,n=t.bound,r=t.data,a=t.scale,i=t.brushScale,o=t.config,l=t.filterConfig,s=t.align,c=t.markerBound,u=t.className,d=t.trackConfig,h=o.marker,f=l.type,p=mh(a,i,h,n,s),g=p.x,v=p.y,y=Ug().curve(wg("linear-closed")),m={path:function(t){var n=e.getPolygon(p,t);return y(n)}},b={data:f?[]:r,path:function(e){return Bt(h.shape)(c.width(e),c.height(e))},position:function(e){return[g(e),v(e)]}};return{show:d.show,flashSpec:m,symbolSpec:b,styles:_extends({},d,{"shape-rendering":"crispedges"}),className:u||Ax}}},{key:"getPolygon",value:function(e,t){var n=this.spec,r=n.data,a=n.config,i=n.filterConfig,o=n.align,l=n.markerBound,s=a.width,c=a.height,u=a.marker.shape,d=i.type,h=o.layout===cb,f=e.x,p=e.y,g=e.r,v=r.map(function(e){return{x:f(e),y:p(e),r:g(e)/2,w:l.width(e),h:l.height(e)}}),y=void 0;if(d){var m=v[0],b=v[1],x=(h?c:s)||0,w=x/2||m.r,C=x/2||b.r;y=h?[[m.x,m.y+w],[b.x,b.y+C],[m.x,m.y-w],[b.x,b.y-C]]:[[m.x+w,m.y],[b.x+C,b.y],[m.x-w,m.y],[b.x-C,b.y]]}else if("circle"===u)y=gx.outerTangentPoints$Circle(v[0],v[1]);else if("square"===u||"rect"===u){var k=v[0],_=v[1];y=h?[[k.x+k.w/2,k.y-k.h/2],[_.x-_.w/2,_.y-_.h/2],[k.x+k.w/2,k.y+k.h/2],[_.x-_.w/2,_.y+_.h/2]]:[[k.x+k.w/2,k.y+k.h/2],[_.x+_.w/2,_.y-_.h/2],[k.x-k.w/2,k.y+k.h/2],[_.x-_.w/2,_.y-_.h/2]]}else if("horizontal-whisker"===u||"whisker"===u){var S=v[0],O=v[1];y=h?[[S.x,S.y-S.r],[O.x,O.y-O.r],[S.x,S.y+S.r],[O.x,O.y+O.r]]:[[S.x+S.r,S.y],[O.x+O.r,O.y],[S.x-S.r,S.y],[O.x-O.r,O.y]]}else{var A=[];t.each(function(){A.push(It(this))}),y=gx.tangentPoints$Polygon(A,h,v)}return y&&y.length?[y[0],y[1],y[3],y[2]]:[]}}]),xh);km.setComponent("sizeLegendSlider.tracker",Wk);var Yk=(_inherits(wh,GC),_createClass(wh,[{key:"create",value:function(){var e=this.parse(),t=e.data,n=e.styles,r=e.path,a=Kc("g",".zc-legend-connector",[1]),i=Kc(Um,".zc-connector-line",t,{properties:{attrs:{d:function(e){return r(e)}},styles:n}});return a.children.push(i),this.encode=a}},{key:"parse",value:function(){var e=this.spec,t=e.data,n=e.config.connector;return{data:n.show?[t]:[],path:this.getPath(),styles:n}}},{key:"getPath",value:function(){var e=this.spec,t=e.bound,n=e.scale,r=e.brushScale,a=e.align,i=e.config,o=e.filterConfig,l=e.markerBound,s=e.data,c=l.width,u=l.height,d=i.marker,h=d.shape,f=o.type,p=a.layout===cb,g=r.bandwidth?r.bandwidth():0,v=mh(n,r,d,t,a),y=Ug(),m=this,b=qy(n(s[0])/2,n(s[s.length-1])/2);return function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],a=e.map(function(e,a){var i=Hm(t[a],r(e)+g/2),o=n(e)/2;return p?{x:i,y:v.y(e),r:o,w:c(e),h:u(e)}:{x:v.x(e),y:i,r:o,w:c(e),h:u(e)}}),i=_slicedToArray(a,2),o=i[0],l=i[1],s=void 0;if(f||"whisker"===h||"horizontal-whisker"===h)s=[[o.x,o.y],[l.x,l.y]];else if("circle"===h)s=p?[[o.x+o.r,o.y],[l.x-l.r,l.y]]:[[o.x,o.y+o.r],[l.x,l.y-l.r]];else if("square"===h||"rect"===h)s=p?[[o.x+o.w/2,o.y],[l.x-l.w/2,l.y]]:[[o.x,o.y+o.h/2],[l.x,l.y-l.h/2]];else{if(!m.edges){var d=Et(Um,".temp_slider_marker",[1],pg("svg.svgPattern"));d.attr("d",Bt(h)(2*b)),m.edges=function(e){var t=It(e),n={};return t.forEach(function(e){var t=e[1]<1&&-1<e[1]&&e[0]<=0,r=e[1]<1&&-1<e[1]&&0<=e[0],a=e[0]<1&&-1<e[0]&&e[1]<=0,i=e[0]<1&&-1<e[0]&&0<=e[1];t&&(!n.left||n.left[0]>e[0])&&(n.left=e),r&&(!n.right||n.right[0]<e[0])&&(n.right=e),a&&(!n.top||n.top[1]>e[1])&&(n.top=e),i&&(!n.bottom||n.bottom[1]<e[1])&&(n.bottom=e)}),n}(d),d.remove()}var x=m.edges,w=x.right,C=x.left,k=x.top,_=x.bottom;if(p){var S=[w[0]/b*o.r,w[1]/b*o.r],O=[C[0]/b*l.r,C[1]/b*l.r];s=[[o.x+S[0],o.y+S[1]],[l.x+O[0],l.y+O[1]]]}else{var A=[_[0]/b*o.r,_[1]/b*o.r],P=[k[0]/b*l.r,k[1]/b*l.r];s=[[o.x+A[0],o.y+A[1]],[l.x+P[0],l.y+P[1]]]}}return(p?s[0][0]>s[1][0]||s[1][0]<s[0][0]:s[0][1]>s[1][1]||s[1][1]<s[0][1])&&(s=[]),y(s)}}}]),wh);km.setComponent("sizeLegendSlider.connector",Yk);var Uk=(_inherits(Ch,GC),_createClass(Ch,[{key:"create",value:function(){var e=Kc("g","."+Tx,[1]);return this.encode=e}}]),Ch);km.setComponent("sliderView",Uk);var Gk=(_createClass(kh,[{key:"create",value:function(){var e=this.spec.config,t=this.parse(),n=t.show,r=t.axisSpec,a=t.trimText,i=t.updateAxisLine,o=r.tickValues,l=Kc("g",".zc-slider-axis",[1]),s=Kc("g",null,n?[1]:[]);return l.children.push(s),s.onEnd=function(t){t.call(ql,r,e),i(t.selectAll("path.domain")),t.selectAll("g.tick").sort(function(e,t){return e===o[0]||e===o[o.length-1]?-1:1}),a(t),_h(t).style("pointer-events","visible")},this.encode=l}},{key:"parse",value:function(){function e(){_t(fg(this),this.__formattedValue)}var t=this.spec,n=t.scale,r=t.config,a=t.format,i=t.orient,o=t.viewBound,l=t.availableBound,s=t.align,c=t.data,u=r.show,d=r.tickmark,h=r.ticklabel,f=h.tooltip,p=h.labels,g=s.layout===cb;return{show:u,axisSpec:{orient:i,scale:n,tickFormat:function(e,t){var n=p&&p.length?p[t]:a(e);this.__formattedValue=n,fg(this).text(n)},tickValues:c,tickSizeInner:Hm(d.size,6),tickSizeOuter:0,gridSize:null,tickPadding:Hm(h.margin,3),rotation:0,renderTicklabel:!0,chart:{dataObject:{},systemConf:{canvas:{},chart:{plot:{border:{}}}}},axis:{ticks:{isHierarchialLevelType:function(){}}}},trimText:function(t){var n=_h(t),r=function(e){return e.selectAll("line.minorTicks")}(t),a={attrs:{"text-anchor":function(e){return e===ab?hb:e===rb?pb:fb}(i)},translateFunction:function(e){var t=Or(e).translate,n=Or(e.parentNode).translate;return[t[0]+n[0],t[1]+n[1]]}};eh(n,r,l,o,a),!0===f&&n.each(e)},updateAxisLine:function(e){if(n.bandwidth){var t=n.range(),r=n.bandwidth()/2-Hm(d.strokeWidth,1)/2,a=t[1]>t[0]?[t[0]+r,t[1]-r]:[t[0]-r,t[1]+r],i=g?"M"+a[0]+",0 L"+a[1]+",0":"M0,"+a[0]+" L0,"+a[1];e.attr("d",i)}}}}}]),kh);Gk.adjustFactor=function(e,t,n,r,a){var i=e.show,o=e.padding,l=e.tickmark,s=e.axisline,c=e.ticklabel,u=a.layout===cb,d=Hm(o,3),h=Hm(l.size,6),f=s?Hm(s.strokeWidth,1):0,p=Hm(c.margin,3),g=ws([c,r,Qm]),v=[0,0];return i&&(u?v[1]+=g+f+h+d+p:v[0]+=g+f+h+d+p+.2*t),v},km.setComponent("sizeLegendSlider.axis",Gk);var Xk=(_inherits(Sh,Ak),_createClass(Sh,[{key:"create",value:function(){var e=this,t=this.parse(),n=t.titleSpec,r=t.backgroundSpec,a=t.trackSpec,i=t.axisSpec,o=t.minmaxLabelSpec,l=t.connectorSpec,s=t.selectionTrackSpec,c=Kc("g",null,[1]);this.encode=c,this.addView("LegendTitleSvg",new FC(n)),this.addView("Tracker",new Wk(a)),this.addView("SelectionTracker",new Wk(s)),this.addView("SliderAxis",new Gk(i)),this.addView("Connector",new Yk(l)),this.addView("SliderView",new Uk),this.addView("MinmaxLabel",new XC(o));var u=_extends({},r,{bound:function(){return M(c.element)},onStart:function(){return e.align()}});this.addView("LegendBackgroundSvg",new VC(u))}},{key:"parse",value:function(){var e=this.spec,t=e.config,n=e.bound,r=e.format,a=e.globalFont,i=this.viewScaleComponent(),o=i.scale,l=i.bound,s=i.ticks,c=i.labels||s,u=t.slider,d=t.stops,h=t.ranges,f=u.axis,p=u.marker,g=u.track,v=pn(t),y=Hm(u.padding,3),m=f.show?Hm(f.padding,3):0,b=xe(y),x=xr(t),w=x.layout===cb,C=f.orient||(w?ib:ab),k=p.shape;this.viewScale=o,this.brushOptions=this.getBrushOptions();var _,S=this.brushOptions,O=S.reversed,A=S.brushScale,P=S.dimension,T=S.markerBound,E=S.singleDomainContinuous,L=S.sizeScale,z={width:P[0],height:P[1]},I=[c[0],c[c.length-1]],D=O?R(I).reverse():I,j=w?D:R(D).reverse(),H=E?L.domain():d&&!h?Fe(Ig([d,A.domain()])):A.domain(),B=j.map(function(e){return[o(e),o(e)]}),N=P,F={maxWidth:n.maxWidth-b.left-b.right,maxHeight:n.maxHeight-b.top-b.bottom};if(v.type){var V=Ou(v,P,0,x),W=w?1:0;B=B.map(function(e){return[V[0],e[W]]})}else if(S.handles&&"circle"!==k&&"square"!==k){var Y=Et("path",".temp_slider_marker",[1],pg("svg.svgPattern")),U=Bt(k),G=[];B=j.map(function(e){Y.attr("d",U(T.width(e),T.height(e)));var t=M(Y);return G.push(t),w?[t.width,t.width]:[t.height,t.height]}),Y.remove(),N=w?[P[0],vg(G,function(e){return e.height})]:[vg(G,function(e){return e.width}),P[1]]}_=w?Dm(B):Dm(B).reverse();var X=function(e,t,n,r,a){var i=e.maxWidth,o=e.maxHeight;return n?e:{maxWidth:i-=r===ab?t[0]+a:a,maxHeight:o}}(F,N,w,C,m),Z=A.bandwidth?A.bandwidth():0;Z&&B.forEach(function(e){e[0]-=Z,e[1]-=Z});var q={data:[1],config:t.title,bound:n},Q={data:[1],config:t,margin:y},K={isHorizontal:w,padding:y,axisPadding:m,axisOrient:C,markerSize:_},$={data:D,scale:o,brushScale:A,config:u,filterConfig:v,trackConfig:_extends({fillColor:pm},v.track,{show:g.show}),margin:y,bound:z,markerBound:T,align:x},J=_extends({},$,{trackConfig:g,className:Ax+"-selection"});return{titleSpec:q,backgroundSpec:Q,trackSpec:$,axisSpec:{data:H,format:r,scale:A,config:f,bound:z,viewBound:w?{width:l[0],height:N[1]}:{width:N[0],height:l[1]},align:x,orient:C,availableBound:X},minmaxLabelSpec:{format:r,data:j,index:w?void 0:function(e){return e?0:1},globalFont:a,config:f.minmaxlabels,orient:C,dimension:N,sliderSize:t.filter.enabled?B:[0,0],trimText:function(e){var t=e.selectAll("text"),r=f.minmaxlabels.align,a=function(e,t,n,r,a,i,o,l){var s=e.maxWidth,c=e.maxHeight,u=void 0;return r?{maxWidth:s,maxHeight:c,x:(o.maxWidth-i[0]-l[0][0]/2-l[1][0]/2)/2}:(a===rb&&n===ab?(s-=t[0],u=t[0]):n===rb?(s-=t[0],u=-t[0]):n===ab&&(s-=t[0]),{maxWidth:s,maxHeight:c,x:u})}(F,N,r,w,C,P,n,B),i={attrs:{"text-anchor":r===ab?"start":r===rb?"end":"middle"}};eh(t,e.selectAll(".nothing"),a,{width:0,height:0},i)}},connectorSpec:{config:u,data:D,align:x,bound:z,scale:o,brushScale:A,filterConfig:v,markerBound:T},alignSpec:K,selectionTrackSpec:J}}},{key:"resize",value:function(e,t){if(e||t){var n=Ah(this,"Tracker"),r=Ah(this,"LegendBackgroundSvg"),a=M(n),i=M(r),o=Rr(e,t,this.spec.bound),l=o.w,s=o.h;l-=e?qy(i.width-a.width,0):0,s-=t?qy(i.height-a.height,0):0,this.updateScale(l,s),_get(Sh.prototype.__proto__||Object.getPrototypeOf(Sh.prototype),"resize",this).call(this,l,s)}}},{key:"align",value:function(){var e=this.parse().alignSpec,t=e.isHorizontal,n=e.padding,r=e.axisPadding,a=e.axisOrient,i=e.markerSize,o=Ah(this,"LegendTitleSvg"),l=Ah(this,"Tracker"),s=Ah(this,"SliderView"),c=Ah(this,"SliderAxis"),u=Ah(this,"MinmaxLabel"),d=Ah(this,"Connector"),h=Ah(this,"SelectionTracker"),f=M(o),p=M(l),g=M(c),v=M(u),y=i[0][0]/2,m=void 0,b=void 0;t?a===ob?(Oh([m=y-Qy(0,g.x),(b=f.height+g.height+n)+r-p.y],l,s,d,h),Oh([m,b],c,u)):(Oh([m=y,(b=f.height+n)-p.y],l,s,d,h),Oh([m,b+p.height+r],c,u)):a===rb?(Oh([(m=g.width)+r,b=f.height+n+qy(-Qy(0,v.y),y)],l,s,d,h),Oh([m+p.x,b],c,u)):(Oh([m=0,b=f.height+n+qy(-Qy(0,v.y),y)],l,s,d,h),Oh([p.width+p.x+r,b],c),Oh([p.width+p.x,b],u)),Oh([Qy(0,u.node().getBoundingClientRect().left-o.node().getBoundingClientRect().left),0],o)}},{key:"getSliderArea",value:function(){var e=this.viewScale,t=this.spec,n=t.config,r=t.bound,a=t.area,i=r.maxWidth,o=r.maxHeight,l=n.slider,s=pn(n),c=e.domain(),u=[e(c[0]),e(c[c.length-1])],d=xr(n).layout===cb,h=s.type?l.width:d?l.width:null,f=s.type?l.height:d?null:l.height,p=void 0,g=void 0,v=u[0]+u[u.length-1],y=qy(u[0],u[u.length-1]);return d?(p=1.5*v,g=y,i-=v/2):(p=y,g=1.5*v,o-=v/2),{width:Qy(Ie(h,a.width,p),i),height:Qy(Ie(f,a.height,g),o)}}},{key:"getBrushOptions",value:function(){this.viewScale=this.viewScale||this.viewScaleComponent().scale;var e=this.getSliderArea(),t=this.viewScale,n=this.spec,r=n.config,a=n.format,i=r.ranges,o=r.reversed,l=this.spec.scaleComponent.schema.data.dataType,s=xr(r),c=s.layout===cb,u=c?[0,e.width]:[0,e.height],d=o?u.reverse():u,h=hu(r,l,t,d),f={config:r,reversed:o,ranges:i,range:d,isHorizontal:c,initialExtent:du(i,r.filter.range,t,h,l),align:s,format:a,brushScale:h,scale:h,sizeScale:t,datatype:l,type:c?"x":"y",orient:c?ib:rb,dimension:[e.width,e.height],scale_domain:t.domain(),singleDomainContinuous:h.singleDomainContinuous,markerBound:Pd(r.slider.marker,{},s,t,0),encode:"z"};return f.handles=function(e){var t=e.sizeScale,n=e.brushScale,r=e.config,a=e.dimension,i=e.align,o=e.isHorizontal,l={width:a[0],height:a[1]},s=r.slider,c=pn(r),u=s.marker,d=fn(r),h=c.type,f=u.shape||"circle",p=void 0,g=void 0;if(d.type){var v=uo(a,o);r.hoverOptions.slider=Im(v,d,!0)}if(h){var y=uo(a,o);r.filter.slider=Im(y,c,!0)}if(!h){var m=mh(t,n,u,l,i);return p=Bt(f),g=i.layout===cb?function(e){return[0,m.y(e)]}:function(e){return[m.x(e),0]},{shape:p,position:g,transform:function(e){return"translate("+g(e).join(" ")+") "}}}}(f),f}}]),Sh);Xk.adjustFactor=function(e,t,n,r,a){var i=e.maxWidth,o=e.maxHeight,l=e.slider.axis,s=l.minmaxlabels,c=xr(e),u=c.layout===cb,d=Gk.adjustFactor(l,t,n,r,c),h=XC.adjustFactor(s,t,n,r,c),f=[0,0];return o||(f[1]+=d[1]+h[1],u||(f[1]+=a[0]/2+a[a.length-1]/2)),i||(f[0]+=d[0]+h[0],u&&(f[0]+=a[0]/2+a[a.length-1]/2)),f},Xk.encode="z",Xk.view="slider",Xk.domMode="svg",km.setComponent("sizeLegendSlider",Xk),ZC(Xk),km.setComponent("_getLegendSizeSliderBrushArguments",function(e){var t=e.legends.get("z-0"),n=t.component,r=t.element,a=n.brushOptions,i=a.type,o=function(e,t){var n=_slicedToArray(e,2),r=n[0],a=n[1],i=t.brushScale,o=t.isHorizontal,l=t.ranges,s=(l&&1===l.length?0:i.bandwidth?i.bandwidth():0)/2;return o?[[s,0],[r-s,a]]:[[0,s],[r,a-s]]}(a.dimension,a);return new(km.getComponent("BrushD3Options"))({type:i,extent:o,component:n,behaviour:"resizeToMouse",element:function(e){return e.selectAll("g."+Tx)}(r),styles:{selection:{fillColor:pm,strokeColor:pm,fillOpacity:1},track:{fillColor:pm}}})});var Zk={LISTENER:{start:Ph,brush:Ph,end:Ph},DATA_FINDER:{start:Th,brush:Th,end:Th},BEHAVIOUR:{start:[function(e,t,n,r){var a=r.sourceEvent;a&&a.preventDefault&&a.preventDefault()}],brush:[function(){Mh.call.apply(Mh,[this].concat(Array.prototype.slice.call(arguments),[!0]))},function(e,t){var n=e.instance,r=n.customHandles;if(r){var a=r.selectAll("path."+Ix),i=n.options.component.brushOptions,o=i.handles,l=i.markerBound,s=l.width,c=l.height,u=bh(i,t.point);if(o){var d=o.shape,h=o.transform;a.attrs({d:function(e){return d(s(u[e.i]),c(u[e.i]))},transform:function(e){return h(u[e.i])}})}}},function(e,t,n){var r=this.chart,a=e.instance.options.component.brushOptions,i=a.config,o=a.singleDomainContinuous;if(n&&e.initialized&&!o){var l=nu(a,n);re(i.filter.range=l)!==re(e.previousRange)&&r.plot.renderer.draw(!0),e.previousRange=l}},function(e,t,n){var r=e.instance.tooltip;r&&(r.positionTooltip(),r.show())},function(e,t){var n=this.chart.legendEvents,r=n&&n.eventManager,a=r&&r["SIZE_SLIDER(z-0)"],i=a&&a.options;!Be(a)&&i.enabled&&(zh.call(a,null,null,!0),Vd.call(a),gh.call(a))},function(e,t,n){var r=t.point,a=e.instance.options.component,i=a.element,o=a.brushOptions,l=a.getView("Connector").parse(),s=i.selectAll(Um+".zc-connector-line"),c=bh(o,r);s.attr("d",l.path(c,n))},function(e,t,n){var r=this.chart,a=t.point,i=e.instance,o=i.options,l=o.component,s=o.extent,c=l.element,u=l.brushOptions,d=u.isHorizontal;if(pn(u.config).track.fillColor){var h=l.getView("SelectionTracker").parse().symbolSpec,f=c.selectAll("g."+Ax+"-selection"),p=f.selectAll(Um+"."+Sx),g=f.selectAll(Um+"."+Ox),v=bh(u,a);g.attrs({d:function(e,t){return h.path(v[t])},transform:function(e,t){var r=h.position(v[t]);return Ar(d?[n[t],r[1]]:[r[0],n[t]])}});var y=function(e,t,n){var r=Ug().curve(wg("linear-closed")),a=n?[[e[0],t[0][1]],[e[1],t[0][1]],[e[1],t[1][1]],[e[0],t[1][1]]]:[[t[0][0],e[0]],[t[1][0],e[0]],[t[1][0],e[1]],[t[0][0],e[1]]];return r(a)}(n,s,d),m=ww.GET_CLIP(i,[0,0],r,"size_slider_brush_selection-track",{desc:y});p.attr("clip-path",m)}}],end:[qd,Mh,function(e,t,n){function r(e){return parseInt(e)}var a=e.instance,i=a.options.component.brushOptions;if(e.initialized){var o=a.getSelection(),l=ru(i,o),s=e.snapSelection,c=s&&re(o.map(r))===re(s.map(r));te(l)&&!c&&(l.sort(Wg),e.snapSelection=l,a.setSelection(l,250))}},Ih]},LISTENER_TYPES:Rg(["start","brush","end"]),SUPPORTED:un("slider"),INIT:function(e){var t=this.chart,n=e.instance,r=n.options.component.getBrushOptions(),a=r.initialExtent,i=r.config,o=(r.handles,function(e){function t(e){return b(u(e),d(e))}var n=e.instance.options,r=n.component,a=n.extent,i=r.brushOptions,o=i.type,l=i.config,s=i.markerBound,c=i.handles,u=s.width,d=s.height,h=bh(i),f=pn(l),p=fn(l),g=l.slider.marker,v=f.type,y=g.shape||"circle";if(v)return fo(o,v,a,null,f[v]||{});var m=c.transform,b=c.shape;return ho("marker-"+y,{shape:Z(p.type)?[[t(h[0]),t(h[0])],[t(h[1]),t(h[1])]]:[[t(h[0])],[t(h[1])]],style:_extends({},pu(g),{transform:function(e){return m(h[e.i])}})}),fo(o,"marker-"+y,a,null,g)}(e)),l=function(e){var t=e.events,n=e.filter;return!(t&&0==U(t.enabled,!0))&&n.enabled}(i);e.initialized=!1,n.setSelection(a);var s=n.addCustomHandle(o);n.tooltip=Eh(e),Lh(pn(i),o,s,t),function(e,t){var n=e.instance,r=n.options.component.element.selectAll("g."+Ax).selectAll(Um+"."+Sx).attr("d")||"",a=ww.CLIP_TRACK(n,[0,0],t,"size_slider_brush",{desc:r});n._selection.attr("clip-path",a)}(e,t),Ih.call(this,e),l||(n.customHandles.attr("pointer-events","none"),n.destroy()),e.initialized=!0}};km.setComponent("_legendSizeSliderBrushHandlers",Zk);var qk={LISTENER:{mousemove:Dh,mouseout:Dh},DATA_FINDER:{mousemove:bu,mouseout:bu},BEHAVIOUR:{mousemove:[function(){Hv().stopImmediatePropagation();var e=this.chart.behaviouralEvents.eventManager.behaviours.LEGEND_SIZE_SLIDER_BRUSH;e&&Mh(e,0,0,0,!0)},Fd,Rh,Wd,Nh],mouseout:[Vd,function(){var e=this;Fh(e)?Bh.call.apply(Bh,[e].concat(Array.prototype.slice.call(arguments),[!0])):zh.call.apply(zh,[e].concat(Array.prototype.slice.call(arguments)))},Yd,function(){var e=this;Fh(e)?vh.call.apply(vh,[e].concat(Array.prototype.slice.call(arguments),[!0])):gh.call.apply(gh,[e].concat(Array.prototype.slice.call(arguments)))}]},REVERSE_DATA_FINDER:{mousemove:function(){return Nd.apply(this,arguments)}},REVERSE_BEHAVIOUR:{mousemove:[Rh,Nh],mouseout:[Bh,vh]},SUPPORTED:un("slider")};km.setComponent("_legendSizeSliderHandlers",qk),km.setComponent("_legendSizeSliderEventArguments",function(e,t){var n=e.legends.get(t),r=n.component,a=n.meta,i=n.element,o=n.highlightManager,l=a.scaleComponent.schema.data.dataType,s=r.brushOptions,c=s.config,u=c.events,d=fn(c),h=i.selectAll("g."+Tx),f=function(e,t){var n=t.filter.enabled?".selection,."+zx:"."+Sx+",."+Ox;return e.selectAll(n).style("pointer-events","all")}(i,c),p=function(e){return Et("g","."+Lx,[1],e).style("pointer-events","none").style("display",null).style("opacity",1)}(h),g=function(e,t,n){return Eo({config:fn(n).tooltip,orient:Dx.getOrient(n),element:t,chart:e})}(e,p,n.meta.config),v=u&&0==U(u.enabled,!0),y=n.enabled&&!v&&Z(d.type);return _extends({enabled:y,trackerElement:f,highlightElement:p,highlightManager:o,tooltip:g},s,{dataType:l,legendInstance:n})}),Vh.prototype={getDepth:function(){return"row"==this.tag?this.depthbyrow:this.depthbycolumn}},Gh.prototype={constructor:Gh,getPrevNodesCountBySetIdx:function(e){if(this.entries.get(e).prevNodesCount)return this.entries.get(e).prevNodesCount;for(var t=0,n=0;n<e;n++)t+=this.entries.has(n)?this.entries.get(n).list.count:0;return this.entries.get(e).prevNodesCount=t}},Xh.prototype={constructor:Xh},qh.prototype={constructor:qh},rf.prototype={constructor:rf,pushToBranch:$h,createCluster:Jh,pushToDiscreteCluster:ef,pushToContinuousCluster:tf,getCount:Wr,getBranchesCount:Yr,getLeavesCount:Ur,getClustersCount:Gr,hasMultiCluster:Xr,getDomainForBranch:Zr,getRangesForBranch:qr,getDomainForCluster:Qr,getDomainForClusterSet:Kr,getNodesForClusterSet:$r,getClusterNodes:ea,getBranchNodes:Jr,getNodesAtDepth:na,getParent:nf,getAllChildren:ta},af.prototype={constructor:af,pushToBranch:$h,createCluster:Jh,pushToDiscreteCluster:ef,pushToContinuousCluster:tf,getCount:Wr,getBranchesCount:Yr,getLeavesCount:Ur,getClustersCount:Gr,hasMultiCluster:Xr,getDomainForBranch:Zr,getRangesForBranch:qr,getDomainForCluster:Qr,getUniqueDomainForCluster:function(e){var t=this.clusters[e];if(t)return t.keys},getDomainForClusterSet:Kr,getNodesForClusterSet:$r,getDynamicDomainForClusterSet:function(e,t){var n=this.clusters[e];if(n){var r,a=n.entries.values()[t].customDomain;return a?(a.values().map(function(e){r=e.values}),Ig([n.entries.values()[t].domain,r])):n.entries.values()[t].domain}},getMergedDomainForClusterSet:function(e,t){if(this.clusters[e]){var n=this.getDomainForClusterSet(e,t),r=this.getDynamicDomainForCluster(e,t);return Ig([n,r])}},getDynamicDomainForCluster:function(e){var t=this,n=this.clusters[e],r=n.entries;if(n)return r.size()?Ig(r.values().map(function(n,r){return t.getDynamicDomainForClusterSet(e,r)})):n.domain},getClusterNodes:ea,getBranchNodes:Jr,getNodesAtDepth:na,getParent:nf,getAllChildren:ta,setNodeIndexForClusters:function(){var e=this;e.clusters.map(function(t,n){e.getClusterNodes(n).map(function(e,t){e.index=t,e.data.map(function(n){n.index=t,e.level=n.level=n.level.split("_").slice(0,-2).concat([n.index]).join("_"),e.levelByColumn=n.levelByColumn=n.levelByColumn.split("_").slice(0,-2).concat([n.index]).join("_"),e.levelByRow=n.levelByRow=n.levelByRow.split("_").slice(0,-2).concat([n.index]).join("_")})})})}},of.prototype={constructor:of,pushToLayers:function(e,t){var n,r=e.row,a=e.column,i=void 0,o=r+"_"+a,l=void 0,s=e.layer;n=e.layer=e.layer&&1<e.layer.length?e.layer.indexOf(e.layer[e.childIndexbyrow]):0,(i=this.groups[n])||(i=this.groups[n]=new Ni),(l=this.panes[o])||(l=this.panes[o]=new Zh)&&this.count++,l.index=this.count-1,l.row=r,l.column=a,l.layer=n,l.data.push(e),this.domain.add(e.value),i.add(e.value),this.isLayerNode=s,e.levelByColumn=""+Hm(e.parent&&e.parent.levelByColumn,""),e.levelByRow=""+Hm(e.parent&&e.parent.levelByRow,"")},createSeries:function(e,t){var n=e.node;if(!t[(this.splitClusters.count?this.splitClusters:this.domain).indexOf(e.value)]){var r={type:n.type,color:n.color,data:[[]],yaxiscolumnorder:n.yaxiscolumnorder,seriesname:n.seriesname,disabled:n.disabled,hideInLegend:n.hideInLegend,filtered:n.filtered};n.plotoptions&&(r.plotoptions=n.plotoptions),t.push(r)}},pushToSeries:function(e,t){var n=(this.splitClusters.count?this.splitClusters:this.domain).indexOf(function(e,t){var n=e.seriesname;if(!n)if("layer"==e.parent.tag)n=t?e.parent.parent.value:e.parent.value;else if("numeric"==e.parent.datatype)n=e.parent.value;else{var r="row"==e.parent.tag?e.childIndexbyrow:e.childIndexbycolumn;n="manual_"+r}return n}(e,this.splitClusters.count))||0;t[n]&&t[n].data[0].push(e.data)},getLayersCount:function(){return this.count},getPanesCount:function(){return this.getPanes().length},getPanes:function(){return Ve(this.panes)},createDuplicateLayerNode:function(e){var t="row"==e.tag?e.childIndexbyrow:e.childIndexbycolumn,n="layer"==e.mainTag?e.value:"manual_"+t,r=new Vh(e,e.depthbyrow,e.depthbycolumn,e.depth,"layer",n);return r.node=e.node,r.row=e.row,r.column=e.column,r.childIndexbyrow=e.childIndexbyrow,r.childIndexbycolumn=e.childIndexbycolumn,this.noLayers="layer"!==e.mainTag,r}},ff.prototype={row:rf,column:af,layer:of,process:lf,getRootNodeList:function(e){return"row"==e?this.rows:"column"==e?this.columns:"layer"==e?this.layers:void 0},setRanges:sf,setRangesForLeaf:function(e,t){for(var n="row"==e?this.rows:this.columns,r=(t.domain(),t.bandwidth()),a=n.count?n.branches[0].domain.length:1,i=n.clusters[0],o=0,l=0,s=new Array(0),c=0;c<a;c++){var u=i.entries.values()[c].customDomain,d=n.getDomainForClusterSet(0,c);d.map(function(e,n){var a,i=o;u&&u.get(0)&&n==d.length-1?(a=i+u.get(0).count,s[l]=[t(i),t(a)+r],o=a):s[l]=[t(i),r+t(i)],o++,l++})}return s},leafSize:cf,postProcess:function(e,t){var n=e.tag;t.row=e.row||0,t.column=e.column||0,"row"==n?t.childIndexbyrow=e.childIndexbyrow:"column"==n&&(t.childIndexbycolumn=e.childIndexbycolumn)}},km.setComponent("PivotLayout",ff),mf.prototype={},xf.prototype={row:rf,column:af,layer:of,process:lf,preProcess:function(e){"layer"==e.tag&&(e.data=[e.children.map(function(e){return e.data})]),this.process(e)},postProcess:function(e,t){t.row=e.row||0,t.column=e.column||0},getRootNodeList:function(e){return"row"==e?this.rows:"column"==e?this.columns:"layer"==e?this.layers:void 0},setRanges:sf,leafSize:cf,executor:mf},km.setComponent("LayerHierarchyLayout",xf),wf.prototype={process:lf,preProcess:function(e){"layer"==e.tag&&(e.data=[e.children.map(function(e){return e.data})]),this.process(e)},postProcess:function(e,t){t.row=e.row||0,t.column=e.column||0},getRootNodeList:function(e){return"row"==e?this.rows:this.columns},setRanges:sf,leafSize:cf},km.setComponent("GroupByTimeDataLayout",wf),et.scroll=function(){return{enabled:!0,categoryThickness:null,visibleCategories:null,height:10,thumb:{fillColor:"#b3b6b7",fillOpacity:.3,strokeColor:"black",strokeOpacity:.3,cursor:gm},resizer:{enabled:!1,type:"lever",tooltip:{backgroundColor:"#b3b6b7",borderColor:"rgb(51, 51, 51)",fontSize:14}},tracker:{fillColor:"#ECF0F1",cursor:gm}}};var Qk={LISTENER:{start:Cf,brush:Cf,end:Cf},DATA_FINDER:{start:kf,brush:kf,end:kf},BEHAVIOUR:{brush:function(e,t,n,r){var a=e.instance,i=this.behaviours,o=a.chart,l=t.point,s=l.x.domain,c=i.PLOT_BRUSH,u=i.PLOT_ZOOM,d=a.brushScale.range();if(o.axes.x.scale,o.viewPortExtent=s,a.lastScroll=n.map(a.scrollPositionScale.invert),!o.zooming){if(o.cache.scroll.selection=n,o.cache.scroll.domain=s,o.scroll.scrollDomain=s,o.disableAnimation=!!r.sourceEvent,o.scrolling=!0,te(s)){if(u){s=[s[0],s[s.length-1]];var h=po(o,s,"x",0,n);u.instance.zoomToIdentity(h,0)}else!0===a.settings.smooth?function(e,t,n,r,a){var i=po(r,e.x.domain,"x",0,t),o=la(r,"x",0),l=o.scale,s=o.orient,c=o.reversed,u=Ro({scale:l,baseScale:n.brushScale,orient:s,reversed:c},r.axes.rotated?"y":"x",i,a),d=u.range,h=u.domain;n.transform=i,e.x.range=d,e.x.domain=h,Nx.FILTER_CHART(e,r)}(l,n,a,o,d):Nx.FILTER_CHART(l,a.chart);c&&c.instance.updateExtent([[0,0],[o.plotarea.width,o.plotarea.height]])}a.tooltip&&r.sourceEvent&&a.tooltip.show(),clearTimeout(a.timer),a.timer=setTimeout(function(){return o.scrolling=!1,o.disableAnimation=!1},50)}},end:function(e,t,n){e.instance.tooltip&&e.instance.tooltip.hide()}},LISTENER_TYPES:Rg(["start","brush","end"]),SUPPORTED:function(e){return e.isAxisCategory&&!e.isPolarAxisCategory}};km.setComponent("_chartScrollHandlers",Qk),Gv.threshold=function(e,t){function n(t,n,a,i,o,l,s){var c=(s&&s.underlay?e.svg:e.staticPaneSVG).selectAll("g.threshold"),u=e.svg.selectAll("g."+o+"-axis-"+a),d=null==u||u.empty()||""!=u.style("visibility")&&"visible"!=u.style("visibility")?"hidden":"visible",h=mt(c,"g",s.show&&"visible"==d?[n]:[],".","class","threshold"+l+"-"+o+"-axis-"+a);if(null!=t&&n.show){var f=i&&null!=t.threshold&&null!=t.threshold[l]?t.threshold[l]:function(e,t,n,r){return e?(e.threshold||(e.threshold={}),e.threshold[r]=t.show?"line"==r?Gv.threshold.line():Gv.threshold.range():null,e.threshold[r]):null}(t,n,0,l);f=function(t,n,a,i,o,l){var s;return r.axisObj=function(e){return arguments.length?(n=e,r):n},r.thresholdIndex=function(e){return arguments.length?(a=e,r):a},r.type=function(e){return arguments.length?(i=e,r):i},r.values=function(e){return arguments.length?(s=e,r):s},r.chartObj=function(t){return arguments.length?(e=t,r):e},r.thresholdIndex(a).type(i).values(l.values).chartObj(e),"line"==o&&r.axisObj(n),t.parentObj(r),t}(f,t,a,o,l,s),h.call(f)}}var r={},a=e.systemConf,i=a.chart.axes.xaxis,o=H(e.userdata,"chart.axes.xaxis")?e.userdata.chart.axes.xaxis:{};null!=o.threshold&&null!=o.threshold.line&&n(e.axes.x,i.threshold.line,0,t,"x","line",o.threshold.line),null!=o.threshold&&null!=o.threshold.range&&n(e.axes.x,i.threshold.range,0,t,"x","range",o.threshold.range);for(var l=a.chart.axes.yaxis,s=H(e.userdata,"chart.axes.yaxis")?e.userdata.chart.axes.yaxis:{},c=0;c<e.axes.y.count;c++)null!=s&&null!=s[c]&&null!=s[c].threshold&&null!=s[c].threshold.line&&n(e.axes.y.groups[c],l[c].threshold.line,c,t,"y","line",s[c].threshold.line),null!=s&&null!=s[c]&&null!=s[c].threshold&&null!=s[c].threshold.range&&n(e.axes.y.groups[c],l[c].threshold.range,c,t,"y","range",s[c].threshold.range)},Gv.threshold.textAlign=function(e,t,n,r,a,i){var o;return a=a||0,"left"==e?o=r?"x"==t?a:n.height-a:"left"==i||"bottom"==i?"x"==t?n.height-a:a:"x"==t?a:n.width-a:"center"==e?o=r?"left"===i||"bottom"===i?"x"==t?(n.width+a)/2:(n.height-a)/2:"x"==t?(n.width-a)/2:(n.height+a)/2:"left"==i||"bottom"==i?"x"==t?(n.height-a)/2:(n.width+a)/2:"x"==t?(n.height+a)/2:(n.width-a)/2:"right"==e&&(o=r?"x"==t?n.width:0:"left"==i||"bottom"==i?"x"==t?0:n.width:"x"==t?n.height:0),o},Gv.threshold.overlay=function(e,t,n,r){var a=e.axes.rotated;if("discrete"==t){var i=r.values.slice(0),o=r.overlayRange,l=r.defaultColor,s="x"==n?e.axes.x.scale:e.axes.y.groups[0].scale,c=s.domain(),u=s.bandwidth;u&&(i=i.map(function(e,t){return c.indexOf(e)}));var d=Ig([i]);return"below"==o||"equalandbelow"==o?i.sort(Wg):"equal"!==o&&i.sort(Yg),function(e,t,n,a){var s=e.color,h=u?c.indexOf(n):n;if(null==r.values||0==r.length)return a;for(var f=0;f<i.length;f++){var p,g=i[f];switch(o){case"equal":p=h===g;break;case"equalandbelow":p=h<=g;break;case"equalandabove":p=g<=h;break;case"below":p=h<g;break;default:p=g<h}if(p){var v=d.indexOf(g);return null==s||null==s[v]?l?a:"black":s[v]}}return a}}if("continous"==t)return function(t,n,r,i){var o="x"==i?e.axes.x.scale:e.axes.y.groups[0].scale,l=r,s=n.values;if(null==s||0==s.length)return t;var c=s.slice(),u=n.color,d=n.overlayRange,h=n.defaultColor;d=d&&d.replace("equaland","");var f,p=e.dataset.getDataType(i,r);if("time"==p){var g=e.dataset.getColumn(i,r);f=null!=g.time?g.time:null}c=c.map(function(e,t){return"time"==p?La(e,0,f).getTime():e}),"x"==i&&!a||"y"==i&&a?c.sort(function(e,t){return e<t?-1:t<e?1:0}):c.sort(function(e,t){return t<e?-1:e<t?1:0});var v=o.domain().length,y="x"==i&&!a||"y"==i&&a?o(o.domain()[v-1])-o(o.domain()[0]):o(o.domain()[0])-o(o.domain()[v-1]),m=[];m.push(0);for(var b=0;b<c.length;b++){var x=(o(c[b])+(null!=o.bandwidth?o.bandwidth()/2:0))/y*100;x<100&&(m.push(x),m.push(x))}m.push(100);var w=[];for(("y"==i&&"below"==d&&!a||"x"==i&&"above"==d&&!a||"y"==i&&"above"==d&&a||"x"==i&&"below"==d&&a)&&w.push(t),b=0;b<c.length;b++)r=s.indexOf(c[b]),w.push(null==u||null==u[r]?h?t:"black":u[r]);("y"==i&&"above"==d&&!a||"x"==i&&"below"==d&&!a||"y"==i&&"below"==d&&a||"x"==i&&"above"==d&&a)&&w.push(t);var C=[];for(b=0;b<m.length;b++){var k={};k.offset=m[b]+"%",k.color=b%2==0?w[b/2]:w[(b-1)/2],C.push(k)}var _={type:"thresholdLinear",options:{}},S=_.options,O=a?e.axes.y.groups[0].scale:e.axes.x.scale,A=a?e.axes.x.scale:e.axes.y.groups[0].scale,P="x"==i&&!a||"y"==i&&a;S.x1=P?O(O.domain()[0]):0,S.x2=P?O(O.domain()[v-1]):0,S.y1=P?0:A(A.domain()[v-1]),S.y2=P?0:A(A.domain()[0]),S.values=c,S.color=w,S.seriesclr=t,S.overlayRange=d;var T=(P?O:A).domain();S.scale=T[0]+"_"+T[1];var E=e.plot.renderer.mode,L=e.chartTypes[l].name,M=e.systemConf.chart.plot.plotoptions[L],z="line"===L?M.strokeOpacity:M.fillOpacity,I=[S.x1,S.x2,S.y1,S.y2],D=lt(_,I,w,z),R={chartObj:e,offset:C,dimension:I,color:w},j="svg"==E?tb.get(tb.svg_gradients,"svgGradientFill",D,R):tb.get(tb.canvas_gradients,"canvasGradientFill",D,R);return"svg"==E?"url("+e.defsLocation+"#"+j+")":j}},Gv.threshold.overlay,Gv.threshold.line=function(){function e(u){u.each(function(u){var d=fg(this);e.update=function(){d.transition().call(e)},a=l.chartObj(),t=l.thresholdIndex(),o=l.type(),s=l.axisObj(),c=l.values(),n=a.plotarea;var h=s.scale,f=h.range();(f=f.slice(0,f.length)).sort(function(e,t){return e-t});var p=null!=h.bandwidth?h.bandwidth()/2:0,g=u.label;g=Zi(g,H(a.userdata,"chart.axes."+o+"axis"+("x"===o?"":"."+t)+".threshold.line.label",!0));var v=u.marker||{},y=Hm(v.enabled,!0);i=a.axes.rotated,r=a.systemConf;var m=[],b=[],x=[],w={x:2,y:2},C=r.chart.axes.xaxis.axisline,_=r.chart.axes.yaxis[t].axisline;Z(C)&&C.show&&(w.x+=+C.strokeWidth-1),Z(_)&&_.show&&(w.y+=+_.strokeWidth-1);var S,O=0,A=[],P=[],T=[],E=[],L=[],I=[],D=[],R=[],j=a.dataset.getDataType(o,t),B=!1!==Rm(u.events,"enabled"),N=a.dataset.getColumn(o,t),F=a.dataset.getColumnIdx(o,t);j==lx&&(S=Rm(N,lx)||null),c.map(function(e,t){var n=null!=e&&""!=e?j==lx?La(e,0,S).getTime():e:null;null!=e&&""!==e&&h(n)+p>=f[0]&&h(n)+p<=f[f.length-1]&&(m[O]=n,b[O]=rs(Rm(u,"label.text["+t+"]")||"",c,N,a),x[O]=(te(u.color)?u.color[t]:u.color)||"black",A[O]=Z(u.label)&&(te(u.label.hAlign)?u.label.hAlign[t]:u.label.hAlign)||"center",T[O]=(te(u.strokeWidth)?u.strokeWidth[t]:u.strokeWidth)||1,P[O]=te(u.dashStyle)?u.dashStyle[t]:u.dashStyle,E[O]=Z(u.marker)&&u.marker.enabled?(te(u.marker.strokeWidth)?u.marker.strokeWidth[t]:u.marker.strokeWidth)||2:null,I[O]=u.marker&&u.marker.enabled?(te(u.marker.size)?u.marker.size[t]:u.marker.size)||1:null,O++)});var V=a.container.node().getBoundingClientRect(),W={left:V.left+n.left,top:V.top+n.top,width:n.width,height:n.height,right:V.left+n.left+n.width,bottom:V.top+n.top+n.height},Y=W.left,U=W.top,G=s.component.orient(),X={top:0,left:0,right:0,bottom:0},q="threshold"+o+t,Q=a.cache.thresholdCustomPoints=Hm(a.cache.thresholdCustomPoints,{}),K=Q[q]=Hm(Q[q],[]),$=Hm(function(e,t){return Hm(Rm(e,"events.triggerOffset"),ur(t,t.chartTypes[0].value))}(u,a),10);K.superKey="threshold",K.triggerOffset=$,d.attr("transform","translate("+n.left+","+n.top+")");var J=mt(d,"g",[u],".","class","thresline-"+t),ee=a.staticPaneSVG.selectAll("g.plotareaBorder-property").node(),ne=ee.border||ee["border-"+G],re=ee.border||ee["border-"+aa(G)],ae=ne&&ne.clr!==pm?ne.size:0,ie=re&&re.clr!==pm?re.size:0,oe=ae+ie,le=mt(J,"path",null!=v&&y?m:[],".","class","marker");le.attr("d",function(e,t){return Bt(te(v.symbol)?v.symbol[t]:v.symbol)(10*I[t])}).style("stroke-width",function(e,t){return E[t]||2}).style("stroke",function(e,t){return(te(v.strokeColor)?v.strokeColor[t]:v.strokeColor)||x[t]}).attr("fill",function(e,t){var n=te(v.fillColor)?v.fillColor[t]:v.fillColor;return n||(null===n?x[t]:"white")}),le.attr("transform",function(e,r){var i=E[r]/2,l=M(this);L[r]=l.width+ae;var s,f,g="bottom"==G||"top"==G?h(e)+p:"left"==G?i+ae+l.width/2:n.width-(i+ae+l.width/2),y="bottom"==G?n.height-l.width/2-ae-i:"top"==G?i+l.height/2+ae:h(e)+p;return B&&qv.customPoints&&K.push({_data:(s=a,f=r,function(){var e=s.cache.thresholdCustomPoints[q][f];return{_x:e&&e._x,_y:e&&e._y,_size:e&&e._size,_visible:!0}}),_x:g,_y:y,_key:"threshold_"+a.id+"_"+o+"_"+t+"_"+r,width:L[r],height:L[r],color:x[r],text:b[r],type:"threshold-marker",triggerOffset:$,_size:10*(I[r]||E[r])+E[r]/2,_mSize:I[r],marker:v,point:c[r],formattedValue:Aa(N[N.datatype],c[r],N.datatype,a,"threshold",!1),thresholdType:o,columnIndex:F,columnInfo:N,yColumnIndex:t,itemIndex:r,events:u.events||{},disabled:function(){return d.__data__!=vm},_defaultH:function(){return[{shape:"marker",path:function(){return a.eventHandler.CustomPoints.hoverPoint(this)},context:function(){return jw.get("scatter").call(this,a)}}]}}),"translate("+g+","+y+")"}),mt(J,"line",m).attr("x1",function(e,t){return"bottom"==G||"top"==G?h(e)+p:"left"==G?(L[t]||0)+E[t]:ie}).attr("y1",function(e,t){return"bottom"==G?ae:"top"==G?(L[t]||0)+E[t]:h(e)+p}).attr("x2",function(e,t){return"bottom"==G||"top"==G?h(e)+p:"left"==G?n.width-ie:n.width-E[t]-(L[t]||0);}).attr("y2",function(e,t){return"bottom"==G?n.height-E[t]-(L[t]||0):"top"==G?n.height-ie:h(e)+p}).attr("stroke",function(e,t){return"    "+x[t]}).attr("stroke-width",function(e,t){return T[t]+"px"}).attr("shaperendering","crispedges").attr("stroke-dasharray",function(e,t){return rt(P[t],T[t])}),mt(J,"text",null!=g?m:[]).text(function(e,t){return z(b[t])}).attr("x",function(e,t){var r=10*I[t]+w[o]+(E[t]||2);return"x"==o&&!i||"y"==o&&i?-Gv.threshold.textAlign(A[t]||"right",o,n,i,r,G):Gv.threshold.textAlign(A[t]||"right",o,n,i,r,G)}).attr("y",function(e,t){return h(e)+p-5}).attr("transform","x"==o&&!i||"y"==o&&i?"rotate(-90)":"rotate(0)").styles({"font-family":function(e,t){return R[t]=(te(g.fontFamily)?g.fontFamily[t]:g.fontFamily)||r.chart.fontFamily||r.canvas.fontFamily||Qm.fontFamily,R[t]},"font-size":function(e,t){return D[t]=zm.getVal((k(g.fontSize)||te(g.fontSize)?g.fontSize[t]:g.fontSize)||r.chart.fontSize||r.canvas.fontSize),D[t]+"px"},fill:function(e,t){return(te(g.fontColor)?g.fontColor[t]:g.fontColor)||r.chart.fontColor||r.canvas.fontColor||Qm.fontColor},"font-weight":function(e,t){return(te(g.fontWeight)?g.fontWeight[t]:g.fontWeight)||r.chart.fontWeight||r.canvas.fontWeight||Qm.fontWeight},"font-style":function(e,t){return(te(g.fontStyle)?g.fontStyle[t]:g.fontStyle)||r.chart.fontStyle||r.canvas.fontStyle||Qm.fontStyle},"text-Anchor":function(e,t){return"left"==G||"bottom"==G?"center"==A[t]?"middle":"right"==A[t]?"end":"start":"center"==A[t]?"middle":"right"==A[t]?"start":"end"}}).each(function(e,t){var r,a=z(b[t]),i=10*I[t],o=zm.fontUtils.getTextWidth(a,D[t],R[t])+i,l="top"===G||"bottom"===G?n.height:n.width;l<o&&(r=Qy(o-l,i)+oe,W.left=Y+r,W.top=U+r,bt(this,this.textContent,this.getBoundingClientRect(),W,Xi(G),"..",X))})})}var t,n,r,a,i,o,l,s,c;return e.parentObj=function(t){return arguments.length?(l=t,e):l},e.getMetaInfo=function(e){return{itemIndex:e.itemIndex,point:e.point,data:Im(a.systemConf.metadata.columns[e.columnIndex],{columnindex:e.columnIndex})}},e},Gv.threshold.line,Gv.threshold.range=function(){function e(e){e.each(function(e){var i=fg(this);n=a.chartObj(),t=a.thresholdIndex(),r=a.type();var o=n.systemConf,l=e.label;l=Zi(l,H(n.userdata,"chart.axes."+r+"axis"+("x"===r?"":"."+t)+".threshold.range.label",!0));var s=[],c=[],u=[],d=[],h=[],f=[],p=[],g=[],v=[],y=[],m=[],b=[],x=n.container.node().getBoundingClientRect(),w=n.plotarea,C={left:x.left+w.left,top:x.top+w.top,width:w.width,height:w.height,right:x.left+w.left+w.width,bottom:x.top+w.top+w.height},k=n.axes[r].orient,_=a.axisObj().component.orient(),S={top:0,left:0,right:0,bottom:0},O=mt(i,"g",e.show?[e]:[],".","class","thresholdrangegroup-"+r),A=n.axes.rotated;if(e.show){var P,T=n.dataset.getDataType(r,t),E=n.dataset.getColumn(r,t);T==lx&&(P=null!=E.time?E.time:null);var L=[],I=[],D={x:2,y:2},R=o.chart.axes.xaxis.axisline,j=o.chart.axes.yaxis[t].axisline;Z(R)&&R.show&&(D.x+=+R.strokeWidth-1),Z(j)&&j.show&&(D.y+=+j.strokeWidth-1);var B=A?n.axes.y.groups[t].scale:n.axes.x.scale,N=A?n.axes.x.scale:n.axes.y.groups[t].scale,F=n.dataObject.noofBarEnabledSeries,V=null!=B.bandwidth&&F?B.bandwidth():0,W=null!=N.bandwidth&&F?N.bandwidth():0,Y=null==B.bandwidth||F?0:B.bandwidth()/2,G=null==N.bandwidth||F?0:N.bandwidth()/2,X=0,q=("x"==r&&!A||"y"==r&&A?B:N).domain(),Q=q.length-1;e.values.map(function(t,r){I=null!=t&&""!=t?t.map(function(e){return T==lx?La(e,0,P).getTime():e}):null;var a=T==ox?-1!==q.indexOf(I[0])&&-1!==q.indexOf(I[1]):!(I[0]>q[Q]||I[1]<q[0]);I&&a&&(T!==ox&&(I[0]=qy(I[0],q[0]),I[1]=Qy(I[1],q[Q])),L[X]=I,s[X]=(te(e.fillColor)?e.fillColor[r]:e.fillColor)||"grey",c[X]=U(te(e.fillOpacity)?e.fillOpacity[r]:e.fillOpacity,"0.2"),u[X]=(te(e.strokeColor)?e.strokeColor[r]:e.strokeColor)||"black",d[X]=te(e.dashStyle)?e.dashStyle[r]:e.dashStyle,h[X]=te(e.lineCap)?e.lineCap[r]:e.lineCap,f[X]=(te(e.label.hAlign)?e.label.hAlign[r]:e.label.hAlign)||"center",p[X]=rs(Rm(e,"label.text["+r+"]")||"",e.values,E,n),g[X]=te(l.fontColor)?l.fontColor[r]:l.fontColor,b[X]=te(l.fontStyle)?l.fontStyle[r]:l.fontStyle,y[X]=te(l.fontFamily)?l.fontFamily[r]:l.fontFamily,m[X]=te(l.fontWeight)?l.fontWeight[r]:l.fontWeight,v[X]=l.fontSize instanceof Function||te(l.fontSize)?l.fontSize[r]:l.fontSize,X++)});var K=mt(O,"g",L,".","class","rangebox-"+t);K.append("rect"),K.append("text");var $=K.select("rect"),J=K.select("text");$.attrs({x:function(e,t){return"x"==r&&!A||"y"==r&&A?B(e[0])+Y+n.plotarea.left:n.plotarea.left+D[r]},y:function(e,t){return"x"==r&&!A||"y"==r&&A?n.plotarea.top:N(e[1])+G+n.plotarea.top},width:function(e,t){return"x"==r&&!A||"y"==r&&A?B(e[1])-B(e[0])+V:n.plotarea.width-D[r]},height:function(e,t){return"x"==r&&!A||"y"==r&&A?n.plotarea.height-D[r]:N(e[0])-N(e[1])+W}}).styles({fill:function(e,t){return s[t]},"fill-opacity":function(e,t){return c[t]},stroke:function(e,t){return u[t]},"stroke-dasharray":function(e,t){return rt(d[t])},"stroke-linecap":function(e,t){return at(h[t],d[t])}}),J.attrs({transform:function(e,t){var a=M($.nodes()[t]),i=Gv.threshold.textAlign(f[t],r,n.plotarea,A,D[r],k);return"x"==r&&!A||"y"==r&&A?"translate("+(a.x+a.width/2)+","+(i+n.plotarea.top)+") rotate(-90)":"translate("+(i+n.plotarea.left)+","+(a.y+a.height/2)+")"},dy:"0.3em"}).styles({"font-family":function(e,t){return y[t]||o.chart.fontFamily||o.canvas.fontFamily||Qm.fontFamily},"font-size":function(e,t){return zm.getVal(v[t]||o.chart.fontSize||o.canvas.fontSize)+"px"},fill:function(e,t){return g[t]||o.chart.fontColor||o.canvas.fontColor||Qm.fontColor},"font-weight":function(e,t){return m[t]||o.chart.fontWeight||o.canvas.fontWeight||Qm.fontWeight},"font-style":function(e,t){return b[t]||o.chart.fontStyle||o.canvas.fontStyle||Qm.fontStyle},"text-Anchor":function(e,t){return"center"==f[t]?"middle":"right"==f[t]?"end":"start"}}).text(function(e,t){return z(p[t])}).each(function(){bt(this,this.textContent,this.getBoundingClientRect(),C,Xi(_),"..",S)})}})}var t,n,r,a;return e.parentObj=function(t){return arguments.length?(a=t,e):a},e},Gv.threshold.range;var Kk={};Kk.relative=function(e,t,n,r,a,i,o,l,s,c){function u(t){var n;/(top|bottom)/.test(t)?e.left-S/2<P.left?(n=d(t==ob?"blx":"tlx"),T.x=P.left,A.left=qy(n,e.left-P.left)/S*100):e.left+S/2>P.right?(n=d(t==ob?"brx":"trx"),T.x=P.right-S,A.left=100*(1-qy(n,P.right-e.left)/S)):A.left=50:e.top-O/2<P.top?(n=d(t==rb?"trY":"tly"),T.y=P.top,A.top=qy(n,e.top-P.top)/O*100):e.top+O/2>P.bottom?(n=d(t==rb?"bry":"bly"),T.y=P.bottom-O,A.top=100*(1-qy(n,P.bottom-e.top)/O)):(T.y=e.top-O/2,A.top=50)}function d(e){return r+l[e]+Jy($y(o,2)+$y(o,2))}t.selectAll("#tooltipcontent").styles({width:null,height:null,"max-width":s+hm,"max-height":c+hm});var h=t.node(),f=h.offsetWidth,p=h.offsetHeight,g=n.canvasarea,v=n.chartarea,y=a+r+(e.distance||0),m=e.dTop||0,b=e.dLeft||0,x=n.systemConf.tooltip,w=(x.relative||{}).orient,C=(x.borderTop,v.width-v.left+v.right),k=v.height,_=vx.getSize(x,[C,k],[f,p],[s,c]),S=_.w,O=_.h,A={left:50,top:100,rotation:0},P={left:Ky(Qy(b,0))+(n.scrolledX||0),top:Ky(Qy(m,0))+(n.scrolledY||0),right:g.width-2-qy(b,0)+Ky(Qy(b,0)),bottom:g.height-qy(m,0)+Ky(Qy(m,0))},T={x:e.left-S/2,y:e.top-O-y,maxw:s+hm,maxh:c+hm};if(i&&!n.scrolledX&&!n.scrolledY){var E=e.top-O-y,L=e.left+S+y,M=e.left-S-y,z=e.top+O+y;(w=w||(P.top<E?ob:L<P.right?ab:P.left<M?rb:z<P.bottom?ib:null))==ob?(u(ob),A.rotation=0,A.top=100):w==ab?(T.x=e.left+y,u(ab),A.rotation=90,A.left=0):w==rb?(T.x=e.left-y-S,u(rb),A.rotation=-90,A.left=100):w==ib&&(u(ib),T.y=e.top+y,A.rotation=180,A.top=0)}return T.hookPosition=A,T},Kk.fixed=function(e,t,n){t.selectAll("#tooltipcontent").styles({width:null,height:null,"max-width":null,"max-height":null}),t.style("border-width",0);var r,a=t.node(),i=a.offsetWidth,o=a.offsetHeight,l=n.canvasarea,s=e.dTop||0,c=e.dLeft||0,u=n.systemConf.tooltip,d=(u.fixed||{}).orient,h=u.borderTop||0,f=Hm(u.borderWidth,1),p=xe(f),g=p.top,v=p.right,y=p.bottom,m=p.left,b=l.width-m-v,x=l.height-g-y,w=vx.getSize(u,[b,x],[i,o]),C=w.w,k=w.h,_=0,S=0,O=window.innerWidth,A=window.innerHeight,P={x:Ky(Qy(c,0)),y:Ky(Qy(s,0))},T=Ky(Qy(c,0)),E=Ky(Qy(s,0)),L=C,M=k,z=P.y-k,I=P.x+l.width+C,D=P.x-C,R=P.y+l.height+k,j=s<=0||0<s&&l.height-s>k;return d||(S<z?d=ob:I<O&&j?d=ab:_<D&&j?d=rb:R<A&&(d=ib)),d===ob?(P.y=E-k-g-y,L=b-(0<c?c:0),r="40%"):d===ab?(P.x=T+l.width,M=x-(0<s?s:0)):d===rb?(P.x=T-C-v-m,M=x-(0<s?s:0)):(P.y=d===ib?E+l.height-(0<s?s:0):E,L=b-(0<c?c:0),r="40%"),w=vx.getSize(u,[b,x],[L,M]),P.w=w.w+hm,P.h=w.h-h+hm,P.maxw=b-(0<c?c:0)+hm,P.maxh=Qy(x-(0<s?s:0),B(u.height)&&B(u.maxHeight)&&Z(r)?Ie(r,x):1/0)+hm,t.style("border-width",$(f)),P},Kk.block=function(e,t,n){var r=n.chartarea,a=n.plotarea,i=n.systemConf.tooltip,o=i.block||{},l=i.borderTop||0,s=xe(Hm(i.borderWidth,1)),c=s.top,u=s.right,d=s.left,h=o.vAlign||ob,f=o.hAlign,p=e.dTop||0,g=e.dLeft||0,v=r.width-d-u,y=r.height,m=vx.getSize(i,[v,y],["100%",n.tooltip.preCalculatedHeight]),b=m.w,x=Qy(m.h,Ie(fw.MAXHEIGHT_BLOCK,y)),w={x:Ky(Qy(g,0))-qy(g,0)+r.left,y:Ky(Qy(p,0))-qy(p,0),w:b+hm,h:x-l+hm,align:f};return f===ab?w.x+=v-b:f===nb&&(w.x+=(v-b)/2),w.y+=h===ib?a.top+a.height+(a.bottom-qy(r.bottom,0)-x)-c-u:r.top,w},qv.tooltip=function(e,t,n){function r(e,t,n,r,a){var i=e.staticPaneSVG.selectAll("line."+a+"-crosshair"),o="x"==a&&!e.axes.rotated||"y"==a&&e.axes.rotated;i.attrs({x1:o?t:e.plotarea.left,y1:o?e.plotarea.top:n,x2:o?t:e.plotarea.left+e.plotarea.width,y2:o?e.plotarea.height+e.plotarea.top:n}).styles({"shape-rendering":"crispEdges",stroke:r.color,"stroke-width":r.strokeWidth,"stroke-dasharray":rt(r.dashStyle,r.strokeWidth),"pointer-events":fm})}function a(e,t,r,a,i,l){if(H(window.$ZC,"tooltip.getTheme")&&Z(s.tooltip.theme)&&""!==s.tooltip.theme&&Z(n.tooltip.content))return c.getCustomizedVal(n,n.tooltip.content,e,t,r,i,"tooltip",a);var u,d=ln(n,i&&i.paneid,e).name,p=o(d),g=c.getDataPoint(n,null,e,t,r,i),v=Ln(n,p?r:e,g,e),y=V(l||f,null,g,n).filter(function(a){return!(h[a]&&B(c.getDataPoint(n,a,e,t,r,i)))});if(d===Nb&&"node"===i._type){var m=n.dataset.getColumnIdx("x"),b=n.dataset.getColumnIdx("z");u="{{col("+m+")}} : {{val("+m+")}}<br>{{col("+b+")}} : {{val("+b+")}}"}else u=hw.getContentTemplate(n,vm,y);return c.getCustomizedVal(n,u,e,t,r,i,"tooltip",v)}function i(e,t){return function(n,r){var a=rv(parseInt(e),parseInt(t));return function(e){return a(e)+"px"}}}function o(e){var t=/(bar|scatter|bubble$|bullet|gantt|wordcloud|waterfall|boxplot)/.test(e)&&In(s.chart.plot.plotoptions[e],n),r=/(^pie|funnel|pyramid|sankey)/.test(e);return t||r}var l={element:e},s=n.systemConf,c=n.dataset,u=s.metadata,d=u.axes,h=u.columns,f=d.tooltip||av(h.length),p=s.tooltip,g=null,v=p.position||"relative",y=Z(p.hook)?p.hook:"relative"===v,m={left:50,top:100,rotation:0};if(p.theme&&""!==p.theme){var b=H(window.$ZC,"tooltip.getTheme")&&$ZC.tooltip.getTheme(p.theme,n);null!==b&&(p=n.systemConf.tooltip=Im(p,b.borderStyle,!0,!0),n.tooltip.content=[b.body],g=b.maxWidth)}var x,w,C,k,_=U(p.hookHeight,6),S=U(p.outerPadding,20),O=Z(p.borderWidth)?p.borderWidth:1,A=Z(p.borderRadius)?p.borderRadius:5,P=Z(p.borderStyle)?p.borderStyle:"solid",T=Z(p.padding)?""+p.padding:"5",E=U(p.withinChart,!0),L=U(p.hookBorderWidth,/ /g.test(O)?1:+O),M=we(A),z=Ie(p.maxWidth||g||"40%",n.chartarea.width),D=Ie(p.maxHeight||"100%",n.chartarea.height),R=qy(.05*n.chartarea.width,2*_),j=p.headerContent,N=p.footerContent,F=p.crosshair;return l.initialize=function(){var t=ys(p,n),r=+t+.35*+t,a=null!=n.userdata.canvas?n.userdata.canvas.fontColor:null,i=$(A),o=null;!1!==p.useChartEffect&&n.filterEffectsID&&(o="url(#"+n.filterEffectsID+")"),e.styles({width:"auto","box-shadow":p.shadow,opacity:p.opacity,"z-index":p.zindex,"border-radius":i,"border-width":$(O),"border-style":P,"-webkit-transform-style":"preserve-3d","-moz-transform-style":"preserve-3d","-ms-transform-style":"preserve-3d","-o-transform-style":"preserve-3d","transform-style":"preserve-3d","pointer-events":p.pointerEvents,filter:o}),mt(e,"div",p.borderTop?[p.borderTop]:[],".","class","borderTop").styles({height:p.borderTop+"px","border-radius":i,"border-bottom-left-radius":"1px","border-bottom-right-radius":"1px"}),(k=mt(e,"div",[1],"#","id","tooltipcontent")).styles({"box-sizing":"relative"===v?null:"border-box","max-width":"relative"===v?z+"px":null,"min-width":"relative"===v?R+"px":null,"line-height":(p.lineHeight||r)+"px","word-wrap":"break-word","white-space":"normal","overflow-y":"auto",padding:$(T)}),kt(k,[{fontColor:null==p.fontColor&&null==a?"white":p.fontColor||a},p,n.systemConf.canvas,Qm],!0),(x=mt(e,"div",y?[1]:[],"#","id","zctooltipbefore")).styles({"margin-left":-(_+2*L)+"px",border:_+2*L+"px solid transparent"}),(w=mt(e,"div",y?[1]:[],"#","id","zctooltipafter")).styles({"margin-left":-_+"px",border:_+"px solid transparent"}),(C=e.selectAll("div#zctooltipbefore,div#zctooltipafter")).styles({"border-color":pm,"border-top-color":"white",position:"absolute",top:"100%",left:"50%",width:0,height:0,content:" "})},l.show=function(t,l,s,u,d){function h(){if(G)return U.keys().map(function(e){var n=J(e),r=J(U.get(e)),a=c.getColumnIdx("clr"),i=t.seriesdata[n].yaxiscolumnorder||[0,0],o=t.ismultiy||null==a?c.getColumnIdx("y",i):a,l=c.getDataPoint(t,o,n,P,r);return{actData:l,metaInfo:c.getMetaInfoObj(t,l,n)}});var e=c.getDataPoint(t,null,A,P,R,d.d);return{actData:e,metaInfo:t.dataset.getMetaInfoObj(t,e,A),seriesIndex:A,subseriesIndex:P,itemIndex:R}}Z(d)||(d={});var g,y,b=d.color,O=d.svgFillFunc,A=d.seriesindex,P=d.subseriespos,T=d.subseriesLength,R=d.itempos,H=d.paneid,W=d.backgroundColor||p.backgroundColor,Y=d.borderColor||p.borderColor,U=d.tooltipSharedInfo,G=d.tooltipShared,X=null!=A&&ln(t,H,A).name||d.chartType&&d.chartType.name,q=d.renderTo||"plot";((u=null==s&&!0===u)||d.inheritColors)&&(g=o(X));var Q=b;if(u||d.inheritColors){var K=g?R:A,$=c.getDataPoint(t,null,A,P,R,d.d);Q=Ln(t,K,$,A,H)}else te(Q)&&(Q=Q[A%Q.length]);Q=G?"black":Q,Y=null!=Y?Y:Q,W=null!=W&&""!=W?W:Q,e.styles({visibility:"visible","background-color":W,"border-color":Y});var ee,ne,re="",ae="",ie="",oe=k.node();u&&null!=j&&(ae=V(j,Hv(),ee=h(),t)),re+=u?p.content?V(p.content,Hv(),ee=ee||h(),t):G?function(e,t,r,a,i,o,l,s){function u(e,t,r,a,i,o){if(n.ismultiy||null==d){var l=I(n.seriesdata[t].seriesname)||o.replace(/val/gi,"col");e=e.replace("{{val(null)}}",l)}return c.getCustomizedVal(n,e,t,r,a,vm,"tooltip",i,vm,s&&1<s?s:vm)}var d=c.getColumnIdx("clr"),h=n.seriesdata[e].yaxiscolumnorder||[0,0],p=n.dataObject.pieWithAxis&&!n.dataObject.isCombinationalChart?vx.getPieColumnIndex(n):c.getColumnIdx("y",h),g=i.keys(),v=i.y_val_pattern,y=V(f||f,null,a),m=hw.getRawSharedContent(n,i,y),b=0,x=[];return m.forEach(function(s,d){var h=(te(s)?s:[s]).some(function(e){return"string"==typeof e&&(-1!=e.indexOf("{{val("+p+")}}")||-1!=e.indexOf("{{per("+p+")}}"))});if(te(s)||h){b%=n.seriesdata.length;var f=g[b];if(h&&b++,B(f))return void x.push(d);var y=J(f),w=J(i.get(f)),C=v,k=o;if(te(k)){var _=c.getDataPoint(n,null,y,t,w,a);k=Ln(n,l?w:y,_,y)}te(s)?s.forEach(function(e,n){s[n]=u(s[n],y,t,w,k,C)}):m[d]=u(m[d],y,t,w,k,C)}else f=g[0],w=Z(f)?(y=J(f),J(i.get(f))):(y=e,r),m[d]=c.getCustomizedVal(n,s,y,t,w,a,"tooltip",o,vm)}),m=m.filter(function(e,t){return-1==x.indexOf(t)}),hw.getContentTemplate(n,m)}(A,P,R,d.d,U,b,g,T):a(A,P,R,Q,d.d):s,u&&null!=N&&(ie=V(N,Hv(),ee=ee||h(),t)),k.html(re),me(ae)||((ne=document.createElement("div")).innerHTML=ae,ae=ne),me(ie)||((ne=document.createElement("div")).innerHTML=ie,ie=ne),oe.insertBefore(ae,oe.firstChild),oe.appendChild(ie);var le,se=e.node();if(se.offsetWidth,se.offsetHeight,"plot"==q&&F.type!=fm&&t.isAxisCategory&&function(e,t,n,a){e.staticPaneSVG.selectAll("g.crosshair").style("visibility","visible");var i=a.type;"x"!=i&&"xy"!=i||r(e,t,n,a,"x"),"y"!=i&&"xy"!=i||r(e,t,n,a,"y")}(t,l.actLeft||l.left,l.actTop||l.top,F),"plot"==q&&l.helpers&&!l.helpers.isWithinPlot&&(y=!0),e.interrupt().transition(),e.transition().delay(0),"relative"===v){var ce=parseFloat(se.style.left),ue=parseFloat(se.style.top);le=Kk.relative(l,e,t,_,Ky(S),E,L,M,z,D),m=le.hookPosition,ce&&!isNaN(ce)&&ue&&!isNaN(ue)||e.styles({left:le.x+"px",top:le.y+"px"}),ce=!ce||isNaN(ce)?le.x:(2*ce+le.x)/3,ue=!ue||isNaN(ue)?le.y:(ue+le.y)/2,e.transition().duration(100).ease(xg).styleTween("left",i(ce,le.x)).styleTween("top",i(ue,le.y))}else"fixed"===v?(le=Kk.fixed(l,e,t),e.styles({left:le.x+"px",top:le.y+"px"})):(le=Kk.block(l,e,t),e.styles({left:le.x+"px",top:le.y+"px"}).attr("align",le.align));if(k.styles({width:le.w,height:le.h,"max-width":le.maxw,"max-height":le.maxh}),p.borderTop){var de=O?O(g?R:A,null,null,Q,null,null,{width:Qy(+le.w,+le.maxw)},!0):Y,he="object"===(void 0===de?"undefined":_typeof(de))?"url("+function(e,t){var n="<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='"+e.w+"' height='"+e.h+"'>"+(new XMLSerializer).serializeToString(e.node.node())+"<path d='M-5,-5 L5,-5 L5,5 L-5,5 Z' transform='translate("+e.w/2+","+e.h/2+")' style='fill: url(#"+e.id+")'></path> </svg>";return{url:Km.FIREFOX||t?"data:image/svg+xml;base64,"+Pm(n):"data:image/svg+xml;utf8,"+n,width:e.w,height:e.h}}(de,!0).url+")":de;e.selectAll("div.borderTop").styles({background:he})}if(G||y)C.style("display",fm);else{var fe="rotate("+m.rotation+"deg)",pe="50% 0%";C.styles({display:"",left:m.left+"%",top:m.top+"%",transform:fe,"-webkit-transform":fe,"-ms-transform":fe,"transform-origin":pe,"-webkit-transform-origin":pe,"-ms-transform-origin":pe}),x.style("border-top-color",Y),w.styles({"border-top-color":W,opacity:1})}},l.hide=function(e){(e=null==e?this.element:e).style("visibility","hidden"),n.systemConf.tooltip.crosshair.type!=fm&&n.staticPaneSVG.selectAll("g.crosshair").style("visibility","hidden")},l.destroy=function(){this.element.remove()},l.getTooltipContent=function(){return a.apply(null,arguments)},l};var $k=qv.tooltip;km.setComponent("tooltip",$k);var Jk=[];Km.isTouchDevice||(Jk=[tl]);var e_={LISTENER:{start:Sf,zoom:Sf,end:Sf},DATA_FINDER:{start:_f,zoom:_f,end:_f},BEHAVIOUR:{start:Jk,zoom:[tl,function(e,t){var n=this.chart;n.zooming=!0;var r=t.point;n.disableAnimation=!0,r.x&&r.x[0].domain&&(n.viewPortExtent=r.x&&r.x[0].domain),Nx.FILTER_CHART(r,n)},Io],end:al},LISTENER_TYPES:Rg(["start","zoom","end"]),SUPPORTED:function(e){return e.isAxisCategory&&!e.isPolarAxisCategory},UPDATE:function(e){var t=this.chart,n=e.instance.getTransform(),r=e.types||{},a=void 0,i=void 0;if(r.x&&(a=t.axes.x),r.y&&(i=t.axes.y.groups[0]),t.axes.rotated){var o=[i,a];a=o[0],i=o[1]}var l=pl(n.k,a,i);e.instance.zoomToIdentity(l,0,!1)}};km.setComponent("_chartZoomHandlers",e_),et.zoom=function(e){return{enabled:!1,type:"xy",minZoom:1,wheelZoom:!0,pan:!0,transitionDuration:1e3}};var t_=25;km.setComponent("_getPlotZoomArguments",function(e){var t=e.systemConf.chart.zoom,n=e.plotarea,r=[[0,0],[n.width,n.height]],a=km.getComponent("ZoomD3Options"),i=e.isGeoMap?"xy":t.type,o=t.maxZoom||function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:3,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"xy";if("xy"===n)return t_;var r=la(e,n,0).scale,a=e.axes.rotated?"height":"width";return"x"===n||"y"===n&&r.bandwidth?qy(1,e.plotarea[a]/zo(e,n,t)):t_}(e,Hm(t.minimumVisiblePoints,3),i);return new a({type:i,scaleExtent:[t.minZoom,o],translateExtent:r,extent:r,wheelZoom:!1!==t.wheelZoom,pan:!1!==t.pan,transitionDuration:t.transitionDuration,element:e.eventHandler.trackerGroup,metaKey:t.metaKey,filter:function(){if(Km.isTouchDevice){var e=Hv();return 1<e.touches.length||1<e.changedTouches.length}return!0}})});var n_={getGeoBBox:function(e,t){return this.geoBoundToRect(t.bounds(e))},geoBoundToRect:function(e){return{x:e[0][0],y:e[0][1],width:Math.abs(e[1][0]-e[0][0]),height:Math.abs(e[1][1]-e[0][1])}},getFeatureGradientBBox:function(e,t,n){return this.getGeoBBox(e,n)},toLatLong:function(e,t,n){var r=[t,n];return e.geo.utils.projection.invert(r)},toXY:function(e,t,n){if("geoOrthographic"===(e.systemConf.map.projection||{}).name){var r=e.geo.utils.projection.rotate(),a=[-r[0],-r[1]];if(Mv([t,n],a)>Math.PI/2)return[null,null]}return e.geo.utils.projection([t,n])||[null,null]},clearContext:function(e){e&&e.clearRect&&e.clearRect(0,0,e.canvas.width,e.canvas.height)},applyTransform:function(e,t){t.canvas?(t.translate(e.x,e.y),t.scale(e.k,e.k)):t.attr("transform",e)},round:function(e,t){var n=Math.pow(10,t||0);return Math.round(e*n)/n}},r_={START:function(e,t){return{cartesian:Av.cartesian(t),quaternion:Av(e)}},DRAG:function(e,t){var n=Av.cartesian(t),r=Av.multiply(e.quaternion,Av.delta(e.cartesian,n));return Av.rotation(r)}},a_={LISTENER:{start:Of,zoom:Of,end:Of},DATA_FINDER:{},BEHAVIOUR:{start:function(e,t,n){var r=this.chart;if(r.geo.isGlobeMap){var a=Pr(r.eventHandler.trackerElement.node()),i=n_.toLatLong(r,a[0],a[1]);e._baseRotate=r.geo.utils.projection.rotate(),e._basePosition=r_.START(e._baseRotate,i)}},zoom:function(e,t,n){var r=this.chart;r.geo.isGlobeMap?function(e,t,n){var r=e.geo.utils,a=Af(e);r.projection.scale(a.scale*t.k),r.projection.rotate(n._baseRotate);var i=Pr(e.eventHandler.trackerElement.node()),o=n_.toLatLong(e,i[0],i[1]),l=r_.DRAG(n._basePosition,o);r.projection.rotate(l)}(r,n,e):function(e,t){var n=Af(e),r=e.geo.utils;r.projection.translate([t.x+n.translate[0]*t.k,t.y+n.translate[1]*t.k]),r.projection.scale(n.scale*t.k)}(r,n),function(e){e.eventHandler.mapEvents.handleMouseOut(),e.eventHandler.tooltipElement.hide(),e.addRemoveSeries()}(r)},end:function(e,t,n){var r=this.chart.eventHandler.mapEvents;r.outLine=r.getOutLine()}},LISTENER_TYPES:Rg(["start","zoom","end"]),SUPPORTED:function(e){return e.isGeoMap}};km.setComponent("_mapZoomHandlers",a_);var i_={};Qv.canvasRenderer=function(e,t){var n={},r=e.systemConf,a=Gt.helpers;return n.draw=function(n){var i=e.scroll&&!e.scroll.initialized&&e.scroll.visible;if(e.container.select(".highlight-canvas").style("visibility","hidden"),e.canvasScrollGroup?(e.context=s_(e,"zc-canvas",null,e.canvasScrollGroup),e.labelHolderContext=s_(e,"zc-labelholder-canvas",null,e.canvasScrollGroup),e.canvasScrollGroup.selectAll("canvas").styles({left:0,top:0})):(e.context=s_(e,"zc-canvas",".static"),e.labelHolderContext=s_(e,"zc-labelholder-canvas",window.PointerEvent?e.container.selectAll("div.legendarea").node():null)),i)return!1;t.barDatasetIndex=0,e.systemConf.legend.enabled&&e.svg.select(".seriesholder").selectAll("*:not(.zmarea)").remove(),e.dataObject.isPolarAxisCategory&&e.labelHolderContext.translate(e.plotarea_approx.x,e.plotarea_approx.y),e.dataset.getDataType("x")==ox&&e.isAxisCategory&&Zv.barBandwidth(e);var o=null;e.chartRendered=!1;var l=e.dataObject.isCombinationalChart,s=e.plotarea,c=l?zy.arrangeSeriesRenderingOrder(e):e.seriesdata,u=e.dataObject.hierarchical,d=u&&u.facetRendering,h=[{data:c}];d&&(h=Ve((d&&u.pivotLayout).getRootNodeList("layer").panes));var f=0;h.forEach(function(n,i){t.barDatasetIndex=0,n.data.forEach(function(i,s){var u=d?zy.arrangeSeriesRenderingOrder(e,n.data,f,!0):c,h=d?i.node:i,g=l?d?s:u[s].seriesidx:s;p=d?f++:g;var v=d?i.layer:0;o=a.getChartType(h.type||e.userdata.seriesdata.type,"string");var y=a.getChartType(h.type||e.userdata.seriesdata.type,sx);null==e.renderer[p]&&(e.renderer[p]=o_(o),e.rendererConf[p]=new Qv.rendererConf),e.renderer[p].chartRendered=!1,0==s&&(Lr(e,r.chart.plot.events,0,"init"),e.hideLoading(e.container)),zy.setRendererProp(e,e.renderer[p],u,g,s,t,p,y,v)})});var p;if(f=0,h.forEach(function(t,n){t.data.forEach(function(n,r){var i=d?zy.arrangeSeriesRenderingOrder(e,t.data,f,!0):c,u=d?n.node:n,h=l?d?r:i[r].seriesidx:r;p=d?f++:h;var g=a.getChartType(u.type||e.userdata.seriesdata.type,sx),v=cn(e,g,"axis"),y=cn(e,g,"polarAxis");if(!e._isAxisCategory()&&!y&&0<h)e.renderer[p].chartRendered=!0;else if(o=a.getChartType(u.type||e.userdata.seriesdata.type,"string"),!e._isAxisCategory()||v||y||0==r){if(0<s.width&&0<s.height){var m=e.renderer[p].commonRendererProp().params.bound,b=v?0:m.x+(y?m.polar.x:0),x=v?0:m.y+(y?m.polar.y:0);e.context.translate(b,x),l_(e,i,e.renderer[p]),e.context.translate(-b,-x)}}else e.renderer[p].chartRendered=!0})}),zy.renderCompletedEvents(e,n,t),!n){var g=ei(e.systemConf.chart.plot.plotoptions[o],e.seriesdata[0].plotoptions,e,o),v=Z(g.duration)?g.duration:400;if(!Z(g.enabled)||0===v)return;var y=e.seriesdata.length,m=e.d3container.selectAll("canvas").style("opacity",0),b=setInterval(function(){var t=!0;if(e.renderer.length===y)for(var n=0;n<e.renderer.length;n++)if(!e.renderer[n].chartRendered){t=!1;break}t&&(clearInterval(b),m.style("opacity",0).transition().duration(v).style("opacity",1))},1e3/60)}},n};var o_=Qv.canvasRenderer.createCanvasRenderer=function(e){switch(e){case"bullet":e="bar";break;case"web":case"arearange":e="area";break;case"bubble":case"geobubble":case"geoscatter":e="scatter"}return new i_[e]},l_=Qv.canvasRenderer.drawCanvas=function(e,t,n,r,a,i,o,l){function s(e,t,n){return e.select("g."+t).attr("transform","translate("+n.x+","+n.y+")")}r=Z(r)?r:e.context,s(e.wrap,"seriesholder",{x:e.plotarea.left,y:e.plotarea.top}),s(e.staticPaneSVG,"labelholder",{x:e.plotarea.left,y:e.plotarea.top}),n(r,t,a,i,o,l)},s_=Qv.canvasRenderer.updateCanvasContext=function(e,t,n,r){var a=e.svg.node().parentNode.querySelector("canvas."+t),i=gr(e,"width"),o=gr(e,"height"),l=e.staticPaneSVG.node(),s=e.svg.node().parentNode;(r=r||s).isD3Selection&&(r=r.node()),a||((a=document.createElement("canvas")).className=t,a.setAttribute("actual-width",i),a.setAttribute("actual-height",o),a.style.position="absolute",a.style.pointerEvents=fm,"string"==typeof n&&(n=e.container.node().querySelector(n)),r.insertBefore(a,n||(s===r?l:null))),a.width=i,a.height=o,a.style.left=Gy(e.plotarea.left)+"px",a.style.top=Gy(e.plotarea.top)+"px",a.style.visibility="visible";var c=a.getContext("2d"),u=Km.prefix.lowercase+"ImageSmoothingEnabled";return c.clearRect(0,0,i,o),c[u]=!1,c.imageSmoothingEnabled=!1,_e(c)};ve(Tf,Qs);var c_=Tf.prototype;c_._defaultH=function(){var e=this;return[{shape:"marker",path:De(this).path,data:De(this).data,context:De(this).renderingContext,translate:this.translateContext},{shape:"poly",path:this.path,data:this.data,context:this.renderingContext,translate:this.translateContext,styles:function(t){return $s.call(e,t,"inherit")}}]},c_.data=function(e){var t=this.renderer.commonRendererProp().params,n=this.chart,r=this.renderer.layout[e.subSeriesIndex],a=r.innerRadius(),i=r._defined;return e._polydata=this.poly(e),function(){n.cache.data[e._key]||(n.cache.data[e._key]={});var r=n.cache.data[e._key];return r._x=e._x=r._x||n.dataObject.getXYvalue(t.axisrotated,t.stacked,t.xscale,t.yscale,t.yaxiscolumnorder,e,"x")+t.bound.x,r._y=e._y=r._y||n.dataObject.getXYvalue(t.axisrotated,t.stacked,t.xscale,t.yscale,t.yaxiscolumnorder,e,"y")+t.bound.y,r._y0=e._y0=r._y0||a(e,e.itemIndex),r._uid=e._uid=n.dataset.getX(e),r._defined=e._defined=Z(r._defined)?r._defined:i(e),r._visible=e._visible=dr(n,e),r._point=e}},c_.poly=function(e){var t=this.chart,n=this.renderer;return function(){t.cache.data[e._key]||(t.cache.data[e._key]={});var r=t.cache.data[e._key];if(!r._poly){var a=n.seriesdataAfterUpdate[e.subSeriesIndex],i=Vs(a,e),o=function(e){var t=[];return e.filter(function(e){e._data(),e._defined&&t.push([e._x,e._y])}),t}(a);i.points=o,r._poly=e._poly=i}return e._poly}},c_.renderingContext=function(){return jw.get("area").call(this,this.chart)},c_.translateContext=function(){return[this.chart.plotarea.left+this.chart.plotarea_approx.x,this.chart.plotarea.top+this.chart.plotarea_approx.y]},c_.options=function(e){var t=this.renderer.commonRendererProp().params,n=De(this).commonOptions.call(this,e),r=(n.symbol,n._size||t.gvp("strokeWidth")),a=t.gvp("mode"),i=t.hoverOptions.fillOpacity||.2;return n.size={outer:.7*r,inner:.35*r},n.fillopacity=i,n.interpolation=a,n},c_.path=function(e,t){var n,r=this.options(e),a=t.context.call(this),i=t.translate.call(this),o=this.renderer.commonRendererProp().params,l=this.renderer.layout[e.subSeriesIndex];return l.context(vm),a.style("display","").attr("transform","translate("+(i[0]+o.bound.x)+","+(i[1]+o.bound.y)+")"),(n=mt(a,"path",[1],".","class","highlight"+e.seriesIndex)).datum(this.renderer.seriesdataAfterUpdate[e.subSeriesIndex]).attr("d",l).attr("stroke","").styles({"fill-opacity":r.fillopacity,display:""}),n},i_.area=function(){function e(i,o,l,s){var c=t.params,u=c.chartObj,d=c.xscale,h=c.yscale,f=c.stacked,p=c.datasetIndex,g=c.legendOrderIndex,v=c.rendererIndex,y=c.axisrotated,m=c.commonPlotOptions,b=c.color,x=c.labelQueue,w=c.yaxiscolumnorder,C=o,k=(o=u.dataObject.categoryHierarchy?o[p]:u.seriesdata[p]).plotoptions,_=rn(u)?o.row+"_"+o.column:null,S=t.params.gvp=zm.getValueOfPlotOptions(k,m),O=S("fillOpacity"),A=S("strokeWidth"),P=S("strokeColor"),T=t.params.markerOptions=k&&k.marker?Im(m.marker,k.marker,!0):m.marker,E=(t.params.hoverOptions=k&&k.hoveroptions?Im(m.hoveroptions,k.hoveroptions,!0):m.hoveroptions,T.enabled),L=Z(A)&&""!=A&&0!=J(A)||Z(P)&&""!=P||E,M=u.dataset.getDataType("x"),z=u.dataset.getDataType("y",w),I=M==ox?d.domain():null,D=z==ox?h.domain():null,j=ln(u,_,p).name,H=c.isRangeChart="arearange"==j,N=nC(u,p);return e.fillColorFunc=Sn(u,g,_,N,null,null,null,c),P=An(u,g),Z(l)&&Z(s)&&(E=!0,O=1e-8),e.layout=[],e.seriesdataAfterUpdate=[],o.data.forEach(function(t,a){function v(e,n){e.beginPath(),e.fillStyle=n,x.context(e)(t),e.fill(),e.restore()}var m;m=M==ox||z==ox?u.dataObject.updateSeriesdatabyCategories(R(t),I,D,w):t,!u.renderVisiblePointsOnly&&null==n||(m=Gt.helpers.filterPointsInViewport(u,m,"area","x",p)),e.seriesdataAfterUpdate[a]=m,r=null!=n?null==r||0==r?u.dataObject.getXYvalue(y,f,d,h,w,m[m.length-1],"x")-u.dataObject.getXYvalue(y,f,d,h,w,m[m.length-2],"x"):r:0;var x=Pf(c,r,n,m,a,_);if(e.layout[a]=x,!o.disabled)if(u.imagePallete)tb.canvas_patterns.imageFill({context:i,name:wn(u,g,_)},v);else{var C=Z(l)&&B(s)?l:e.fillColorFunc(g,null,null,b,O,N,null,!1,a);v(i,C)}}),o.disabled||!L&&!E||o.disabled||(a.chartRendered=!1,a.commonRendererProp(t).shiftInfo(n),a(i,C,l,s)),!Z(Dy)||L||E||(H?(x.push({renderer:e,charttype:"scatter",chartObj:u,rendererIndex:v,paneid:_,args:[o,p,0,1]}),x.push({renderer:e,charttype:"scatter",chartObj:u,rendererIndex:v,paneid:_,args:[o,p,0,0]})):x.push({renderer:e,charttype:"scatter",chartObj:u,rendererIndex:v,paneid:_,args:[o,p,0,null]})),e.chartRendered=!0,e}var t,n,r,a=i_.line();return e.getHighlighter=function(t,n){return e.highlighter||(e.highlighter=t.dataObject.isPolarAxisCategory?new Tf(t,e):new Js(t,e)),e.highlighter},e.commonRendererProp=function(n){return arguments.length?(t=n,e):t},e.shiftInfo=function(t){return arguments.length?(n=t,e):n},e},et.area=function(){return{strokeOpacity:.5,outerPadding:.02,fillOpacity:.4,mode:"linear",stacked:{enabled:!1,showAs:"values"},marker:{enabled:!1,outerFillColor:"transparent",outerStrokeOpacity:.5,size:1},hoveroptions:{innerStrokeWidth:2,outerFillOpacity:.5,outerStrokeOpacity:.1},datalabels:{showAs:"y"},gradients:{options:{linear:{x2:50}}},animation:{type:"vertPathTweenAll",marquee:{enabled:!1,duration:300},blink:{enabled:!1,type:"twinkle",duration:800}}}},et.arearange=function(){return{strokeOpacity:.5,outerPadding:.02,fillOpacity:.4,mode:"linear",stacked:{enabled:!1,showAs:"values"},marker:{enabled:!1,outerFillColor:"transparent",outerStrokeOpacity:.5,size:1},hoveroptions:{innerStrokeWidth:2,outerFillOpacity:.5,outerStrokeOpacity:.1},datalabels:{showAs:"y"},gradients:{options:{linear:{x2:50}}},animation:{type:"vertPathTweenAll",marquee:{enabled:!1,duration:300},blink:{enabled:!1,type:"twinkle",duration:800}}}},et.web=function(){return{fillOpacity:.5,strokeWidth:2,mode:"linearClosed",outerPadding:10,stacked:{enabled:!1,showAs:"values"},marker:{enabled:!0,innerStrokeOpacity:1,outerFillColor:"white"},hoveroptions:{innerStrokeWidth:2,innerStrokeOpacity:1,outerFillColor:"white"},datalabels:{showAs:"y"},animation:{type:"strokeTween",marquee:{enabled:!1,duration:300},blink:{enabled:!1,type:"twinkle",duration:800}},gradients:{options:{linear:{x2:15,spreadMethod:"repeat",gradientUnits:"userSpaceOnUse"},radial:{radius:90,x:0,y:0}}}}},My.area=function(){function e(w){return w.each(function(w){var C=t.params;d=C.chartObj,n=C.xscale,r=C.yscale,v=C.stacked,g=C.datasetIndex,y=C.axisrotated,s=C.commonPlotOptions,o=C.color,l=C.labelQueue,u=C.hasNegValue,i=C.yaxiscolumnorder,a=C.dataset,c=d.systemConf;var k=C.renderingOrderIndex,_=C.legendOrderIndex,S=C.rendererIndex,O=d.defsLocation,A=d.dataObject.isPolarAxisCategory,P=w[g],T={data:P,index:k},E=P.plotoptions,L=P.data,M=P.row+"_"+P.column,z=ln(d,M,g).name,I=t.params.gvp=zm.getValueOfPlotOptions(E,s),D=I("fillOpacity"),j=I("strokeWidth"),H=I("strokeColor"),B=dx.isQuantileColorScale(d),N=t.params.markerOptions=E&&E.marker?Im(s.marker,E.marker,!0):s.marker,F=(t.params.hoverOptions=E&&E.hoveroptions?Im(s.hoveroptions,E.hoveroptions,!0):s.hoveroptions,B||N.enabled),V=null!=j&&""!=j&&0!=J(j)||null!=H&&""!=H||F,W=ei(s,E,d,z),Y=W.enabled,U=W.easingType,G=W.type;h=W.duration,G=G==Kb?Qb:G;var X=d.dataset.getDataType("x"),q=d.dataset.getDataType("y",i),Q=X==ox?n.domain():null,K=q==ox?r.domain():null,$=X!=ox||Z(d.dataObject.hierarchical)?d.dataObject.getCategories("x"):Q,ee=c.chart.axes.yaxis[i].reversed;X!=ox&&0==$.length&&Y&&G==tx&&($=d.dataObject.findXCategories());var te=C.isRangeChart="arearange"==z,ne=te?1:null;e.seriesdataAfterUpdate=[],e.layout=[],L.forEach(function(t,a){var o;o=X==ox||q==ox?d.dataObject.updateSeriesdatabyCategories(R(t),Q,K,i):t,!d.renderVisiblePointsOnly&&null==f||(o=Gt.helpers.filterPointsInViewport(d,o,z,"x",g)),e.seriesdataAfterUpdate[a]=o,d.systemConf.chart.axes.xaxis.reversed&&(o=o.slice(0).reverse()),p=null!=f?null==p||0==p?d.dataObject.getXYvalue(y,v,n,r,i,o[o.length-1],"x")-d.dataObject.getXYvalue(y,v,n,r,i,o[o.length-2],"x"):p:0,x[a]=Pf(C,p,f,o,a,M),e.layout[a]=x[a]});var re,ae=fg(this);if(e.update=function(){ae.transition().call(e)},re=A?((re=ae.selectAll("g.areaseries_"+g).data([T])).enter().insert("g",":first-child").merge(re).attr("class","areaseries_"+g),ae.selectAll("g.areaseries_"+g)):mt(ae,"g",[T],".","class","areaseries_"+g),V||F){if(b.commonRendererProp(t).shiftInfo(f),b.chartRendered=!1,te){b.yrangePos(1);var ie=My.line().commonRendererProp(t).shiftInfo(f).yrangePos(0);ie.chartRendered=!1,ae.call(ie)}ae.call(b)}else ae.selectAll("g.lineseries_"+g+",g.scatterseries_"+g).remove();L.forEach(function(t,l){var s,c=e.seriesdataAfterUpdate[l],p=c;if(Y){if(G==tx)p=c.map(function(e,t){return Object.create(c[0])});else{var b=G==Jb?a.xidx:a.yidx(i),w=G==Jb?n:r,k=A&&ee&&!v?w.domain().length-1:0;p=c.map(function(e,t){var n=Object.create(e);if(v&&G!=Jb)n.y0=A&&G===ex?Qy(0,w.domain()[0]):0,n.y=A||null==u||null==w(u)?w.domain()[0]:qy(u,w.domain()[0]);else if(te&&G==Qb){var r=new Array(2),a=d.dataset.getY(e,i,0);r[0]=a,r[1]=null==n[b]?null:null!=u&&null!=w(u)?qy(u,a):a,n[b]=r}else n[b]=null==n[b]?null:A||null==u||null==w(u)?w.domain()[k]:qy(u,w.domain()[0]);return n})}s=R(p)}var S=P.disabled,T=mt(re,"g",function(e){return S?[]:[e]},".","class","subseries_"+l).selectAll("path.area").data(function(e){return S?[]:[e]}),E=T.enter().append("path").datum(p,function(e){return a.getX(e)}).attr("class","area").style("opacity",D).style("fill",o).attr("d",x[l]);Y&&(G==nx||G==tx?ti(p,s,c,$,G,U,h,C,function(e){return{d:x[l](e)}},E):null!=E.node()&&G==ex?E.transition().duration(0).delay(h).attr("d",function(e){return x[l](e)}):E.transition().duration(h).ease(U).attrTween("d",function(){var e=tv(x[l](p),x[l](c));return function(t){return e(t)}}));var L=nC(d,g),I=e.fillColorFunc=Sn(d,g,M,L,null,null,null,C);if(null!=f&&m){var j=n(c[0][0])+(null!=n.bandwidth?n.bandwidth()/2:0),H=d.dataObject.getXYvalue(y,v,n,r,i,c[c.length-1],"x")-d.dataObject.getXYvalue(y,v,n,r,i,c[0],"x"),B={name:"rect",id:d.id,x:j,y:0,width:H,height:d.plotarea.height},N={chartObj:d},F=tb.get(tb.svg_clips,"rect",B,N);re.attr("clip-path","url("+O+"#"+F+")")}var V=c,W=E.merge(T).datum(c,function(e){return a.getX(e)}).styles({opacity:D,fill:I(_,null,null,o,vm,vm,vm,vm,l)});if(null!=f){var X=null!=f?Math.abs(d.dataObject.getXYvalue(y,v,e.oldXscale,r,i,c[0],"x",null,ne)-d.dataObject.getXYvalue(y,v,n,r,i,c[0],"x",null,ne)):null;T.datum(V).attr("d",x[l]).attr("transform",null).transition().duration(h).ease(U).attr("transform",function(){return null==X?null:"translate(-"+X+",0)"})}else null!=E.node()&&G==ex?W.datum(V).style("fill-opacity",0).transition().duration(0).delay(h).attr("d",x[l]).style("fill-opacity",null):W.datum(V).style("fill-opacity",null).transition().delay(G!=nx&&G!=tx||null==E.node()?0:h).duration(h).ease(U).attr("d",x[l]);Fc(W,d,z),d.dataObject.hierarchical&&(W.attr("levelbycolumn",function(e,t){return e[0]&&e[0].levelByColumn}),d.dataObject.pivot&&W.attr("levelbyrow",function(e,t){return e[0]&&e[0].levelByRow})),T.exit().remove()}),e.getSymbolSize=b.getSymbolSize,V||F||(te?(l.push({renderer:e,charttype:"scatter",chartObj:d,paneid:M,args:[P,_,0,1]}),l.push({renderer:e,charttype:"scatter",chartObj:d,paneid:M,args:[P,_,0,0]})):l.push({renderer:e,charttype:"scatter",chartObj:d,rendererIndex:S,paneid:M,args:[P,_,0]}))}),e.renderedTimer=setTimeout(function(){m=e.chartRendered=!0},h),e.oldXscale=n,e}var t,n,r,a,i,o,l,s,c,u,d,h,f,p,g=0,v=!1,y=!1,m=!1,b=My.line(),x=[];return e.getHighlighter=function(t,n){return e.highlighter||(e.highlighter=t.dataObject.isPolarAxisCategory?new Tf(t,e):new Js(t,e)),e.highlighter},e.commonRendererProp=function(n){return arguments.length?(t=n,e):t},e.shiftInfo=function(t){return arguments.length?(f=t,e):f},e},Gt.prototype.updateMinMaxForMarker=function(e,t,n){var r=this.chartObj,a=Ft(r),i=r.axes[t].orient===ib,o=a[i?rb:ob],l=a[i?ab:ib],s=e.range(),c=e.domain(),u=s[0],d=s[1],h=0,f=0;return n=n||0,e.bandwidth?(h=e(c[0])+e.bandwidth()/2-u-5,f=d-(e(c[c.length-1])+e.bandwidth()/2)-5):h=f=n/2*(d-u),[u-=qy(0,o-h),d+=qy(0,l-f)]},Gt.prototype.overMarker=function(e,t,n,r){var a=this.chartObj,i="x"===t?this.xaxisData:this.yaxesData[n],o=a.axes[t].orient,l=[0,a.plotarea[o===rb?"height":"width"]],s=kg().domain(e).range(l),c=this.updateMinMaxForMarker(s,t,r),u=Z(i.minRange)?0:l[0]-c[0],d=Z(i.maxRange)?0:c[1]-l[1],h=l[1]-l[0],f=(e[1]-e[0])/(h-u-d);return[u*f,d*f]};var u_=Ef.prototype;u_.add=function(e,t,n){var r=this._list,a=this._extent,i=this._base;e.forEach(function(e){var o,l=t(e),s=n(e)||i,c=+(i<=s);r.has(l)?o=r.get(l):((o=[Ey,Ey]).key=l,r.set(l,o));var u=o[c]||i,d=u+s;e.y0=u,e.y=s,o[c]=d,a=Fg([].concat(_toConsumableArray(a),[d,i]))}),this._extent=a,this._data=this._data.concat(e)},u_.getExtent=function(){return this._extent},km.setComponent("stackLayout",Ef),Ef.prototype.getAllExtents=function(){function e(e,t){var n=[e.key,t];return n.sum=(e[0]||0)+(e[1]||0),n}if(this._keyExtents)return this._keyExtents;var t=this._list,n=[];return t.each(function(t){0<=t[1]&&n.push(e(t,t[1])),t[0]<0&&n.push(e(t,t[0]))}),this._keyExtents=n},Ef.prototype.toPercent=function(e,t){var n=this._list;e.forEach(function(e){var r=t(e),a=n.get(r),i=a&&a[1];isNaN(i)||null==i||0==i||(e.y0/=i/100,e.y/=i/100)})},Lf.prototype={initialize:function(){this.hierarchyLayout=!0,this.dataCount=0,this.globalChartType=this.originalSeries.type},getCategories:function(){return this.categories},getPivotLayout:function(){return this.pivotLayout}},Lf.is3D=function(e){return te(e)&&te(e[0])},Lf.isArrayOfSeries=function(e){return Lf.is3D(e.data)&&Z(e.seriesname)},Lf.keysObject=function(e){var t={};return e&&e.length&&e.forEach(function(e){t[e.value]=e}),t};var d_={calculatePivotLayout:function(){var e=this.pivotHelpers(),t=this.pivot?km.getComponent("PivotLayout"):new km.getComponent("LayerHierarchyLayout"),n=this.pivot?new t({seriesname:"root",data:this.originalSeries},e):new t(this.originalSeries,e);this.pivotLayout=n},hasRows:function(){var e=this.pivotLayout.getRootNodeList("row"),t=e.getCount(),n=e.hasMultiCluster();return t||n},setScaleForRange:function(e){var t=this,n=this.chart;return{_padding:function(t,n,r){e.copy();var a=t[0].node,i=t[t.length-1].node,o=e.bandwidth,l=o?Zv._getDiscreteRangeBand(e,r):Zv.getContinuousRangeBand(e,n),s=o?l.rangeBand:l.rangeBand/2,c=l.outerPaddingInPixel;e.firstPt=a,e.lastPt=i,e.innerPadding=s,e.outerPadding=c,e.span=o?e.bandwidth():null,Z(r)||(e._innerPadding=s,e._outerPadding=c)},_scale:e,pointProperty:e.bandwidth?"index":"point",_rangeInfo:function(){var e="top"==n.axes.x.orient||"bottom"==n.axes.x.orient;return{sign:e?1:-1,startPos:e?0:n.plotarea.height}},_hasDynamicLeafScale:function(){return t.dynamicLeafScale},_haUniformLeafScale:n.systemConf.chart.axes.xaxis.uniformLeafScale}},setGridOptions:function(){var e=this,t=e.chart,n=e.gridOptions,r=e.legendOptions,a=e.pivotLayout.layers,i=a.isLayerNode,o=e.pivotLayout.getRootNodeList("row").hasMultiCluster(),l=Ve(a.panes),s=e.chart.seriesdata&&e.chart.userdata.seriesdata.type;t.dataObject.isAxisCategory||t.dataObject.isNonAxisMultiSeriesCategory,l.forEach(function(a,l){var c=new Array(0),u=new Array(0),d=new Array(0),h=a.row+"_"+a.column,f=t.systemConf.legend.color&&t.systemConf.legend.color[a.layer],p=f&&f.colors||[],g=a.layer,v=e.pivotLayout.layers.groups[g];a.data.forEach(function(t,n){var r=v.indexOf(t.value),a=o?i?r:l:r;c.push(t.node.color||p[n]||e.chart.mainSeriesColor[a%e.chart.mainSeriesColor.length]),e.chart.chartTypes[n]&&e.chart.chartTypes[n].value,u.push(Gt.helpers.getChartType(Hm(t.node.type,s),"object")),d.push(a)}),n[h]=n[h]||{},n[h].renderer=new Array(0),n[h].colors=c,n[h].chartTypes=u,n[h].legendOrder=a.layer,n[h].legendIndices=d,r[a.layer]||(r[a.layer]={colors:c})})},setDummyDomainForClusters:function(e,t){var n=this,r=(n.chart,n.pivotLayout.getRootNodeList("column")),a=0,i=0;e.map(function(e){e&&"auto"!==e&&(a+=e,i++)});var o=t.range(),l=Ky(o[1]-o[0])-a,s=_g().domain(av(t.domain().length-i)).range([0,l]).bandwidth();e.map(function(e,t){if(e&&"auto"!==e){var a=r.getNodesForClusterSet(0,t).length,i=s*a;n.dynamicLeafScale=!0;var o=0;if(i<e&&(o=Qy(Zy(e/i),5)),o){var l=r.clusters[0].entries.get(t+"_");l.customDomain=Dg();var c=new Array(o),u={count:o,values:c};for(t=0;t<o;t++)c[t]="domain_"+t;l.customDomain.set(0,u)}}})},getDynamicColumnSize:function(e,t){var n,r=this.chart,a=this.pivotLayout.getRootNodeList("column"),i=r.systemConf.facets.config.columns.leafSize;if(r.plotarea.width,!a.count&&!a.leafCount||a.clusters[0].datatype!=ox);else if(a.count){var o=a.branches[0].domain.map(function(e,t){return a.getNodesForClusterSet(0,t)}),l={nodes:o,count:o.length};n="default"==i?function(e,t,n){for(var r=n.systemConf.facets.config.columns.customLeafSizeColumns,a=Rg(r||[1]),i=new Array(e.count),o=0;o<e.count;o++)if(a.has(o)){var l,s=e.nodes[o],c="0_"+o,u=null,d=0,h=ln(n,c,0),f=Gt.helpers.getSeriesdata(n,c,0).plotoptions,p=ki(n.systemConf.chart.plot.plotoptions[h.name],f,n,0,c),g=bs(n,null,p,"datalabels",null,0,null,o+"_0");"html"!=g.contentType&&!g.multiLine||(l=mt(n.staticPaneSVG.selectAll("g.labelholder"),"text",[1],".","class","dummyText")),s.map(function(e){e.data.map(function(e){var t,n=g(e);(t="html"==g.contentType||g.multiLine?Rt(l,n,g.contentType,g.multiLine):dt(n,p.fontSize,p.fontFamily,null,null,p.fontStyle,p.fontWeight)).width>d&&(d=t.width,u=t.width)})}),i[o]=u,l&&l.remove()}else i[o]="auto";return i}(l,0,r):V(i,l,e,r),this.setDummyDomainForClusters(n,e)}},getNodeValueByColumnIdx:function(e,t,n){var r,a,i,o,l=this.chart,s=(l.userdata.facets,l.dataset.rowIndices),c=l.dataset.columnIndices;if(l.dataObject.pivot){var u=s.indexOf(t);if(-1!=u)r="row",a=u,i=s.length-1-u,o=e.levelByRow.split("_")[a];else{var d=c.indexOf(t);r="column",a=d,i=c.length-1-d,o=e.levelByColumn.split("_")[a]}}else r="column",a=n-1,i=l.axes.x.count-1-n,o=e.levelByColumn.split("_")[a];return l.dataObject.hierarchical.pivotLayout.getRootNodeList(r).getDomainForBranch(i)[o]},pivotHelpers:function(){var e=this,t=this.chart,n={children:function(e){if(qa.helpers.hasInnerSeries(e))return e.data;if(e.data){var t=Gt.helpers.is3D(e.data),r=!t&&e.data.length&&e.data[0].constructor!==Array,a=t?Ig(e.data):r?[e.data]:e.data,i=!a.length||a.some(function(e){return n.isDefined(e)});return a.length&&(1!=a.length||a[0].length)&&i?a:null}return null},nodeType:function(n,r){var a=n?Hm(r,n.depth):r,i=t.userdata.metadata.axes,o=Ig(i.y),l=t.userdata.metadata.columns,s=t.userdata.facets,c=function(e,t){var n={rows:[],columns:[],color:[]};return e?["rows","columns","color"].map(function(r){e[r]&&e[r].map(function(e){n[r].push(t[e].levelindex)})}):(n.color.push(0),t.map(function(e){e.levelindex&&n.columns.push(e.levelindex)})),n}(s,l),u=s?t.dataset.rowIndices||s.rows.filter(function(e){return-1==o.indexOf(e)}):c.rows,d=s?t.dataset.columnIndices||s.columns.filter(function(e){return-1==i.x.indexOf(e)}):c.columns,h=c.columns.indexOf(a),f=c.rows.indexOf(a),p=-1!=h,g=-1!=f,v=-1!=c.color.indexOf(a);t.dataset.rowIndices=u,t.dataset.columnIndices=d;var y=!n||n.node.data;if(n){var m=qa.helpers.hasInnerSeries(n);n.hasInnerChild=!0,e.pivot&&(n.hasInnerChild=m)}if(p&&y){var b=0==h,x=h==d.length-1;return n&&b&&(n.firstColumn=b),n&&x&&(n.lastColumn=x),"column"}if(g&&y){var w=0==f,C=f==u.length-1;return n&&w&&(n.firstRow=w),n&&C&&(n.lastRow=C),n&&!n.hasInnerChild&&c.color.length&&(n.mainTag="layer"),"row"}return v&&y?(n&&(n.layer=s&&s.color),"layer"):"leaf"},data:function(e){if(qa.helpers.hasInnerSeries(e))return e.data;if(e.data){var t=Gt.helpers.is3D(e.data),n=!t&&e.data.length&&e.data[0].constructor!==Array,r=t?e.data:n?[[e.data]]:[e.data];return e.data=r}return e},isEmpty:function(e){return!n.children(e)}};return n.dataType=function(e,n){var r=e.tag,a=Hm(n,e.depth),i=t.userdata.metadata.axes,o=t.userdata.metadata.columns,l=o[function(e,t,n){var r=Dg();return e?["rows","columns","color"].map(function(n){e[n]&&e[n].map(function(e){r.set(t[e].levelindex,e)})}):(r.set(0,n.clr[0]),t.map(function(e,t){e.levelindex&&r.set(e.levelindex,t)})),r}(t.userdata.facets,o,i).get(a)||0].datatype;return"leaf"==r&&(l={rows:o[i.y[0][0]].datatype,columns:o[i.x[0]].datatype}),l},n.nodeName=function(e){return e.seriesname||e[0]},n.layerName=function(e){return e.seriesname},n.isDisabledSeries=function(e){return e.disabled},n.isDefined=function(e){var n=Hm(t.dataset.getColumn("x"),{}),r=n.datatype,a=Hm(n.dataindex,0);return Z(n[r])&&Z(n[r].nullformatting)||Z(e[a])},n.hasSplitLeavesColumns=function(){return t.systemConf?t.systemConf.chart.axes.xaxis.splitLeaves:Rm(t.userdata,"chart.axes.xaxis.splitLeaves")},n},update:function(e){e||this.initialize(),this.pivot=this.isPivotModel(this.originalSeries),this.facetRendering=this.renderByFacet(),this.calculatePivotLayout()},isPivotModel:function(e){return"layer"!=this.pivotHelpers().nodeType(null,0)},renderByFacet:function(){return this.pivot||this.chart.userdata.facets&&this.chart.userdata.facets.renderByFacet},getSeries:function(e){return Z(e)?this.pivotLayout.series[e]:this.pivotLayout.series}};ve(Mf,Gt.HierarchicalDataAdapter=Lf),ge(Mf.prototype,d_),Gt.HierarchicalOrdinalDataAdapter=Mf,km.setComponent("_hierarchyOrdinal",Gt.HierarchicalOrdinalDataAdapter);var h_=["January","February","March","April","May","June","July","August","September","October","November","December"],f_=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],p_=["YEAR","QUARTER","MONTH","WEEK","DAY"],g_={YEAR:"YEAR",ABSQUARTER:"QUARTER",QUARTER:"QUARTER",MONTH:"MONTH",ABSMONTH:"MONTH",WEEK:"WEEK",ABSWEEK:"WEEK",ABSDAY:"DAY"},v_={setScaleForRange:function(e){var t=this;return{_padding:function(t,n){e.copy();var r=t[0].node,a=t[t.length-1].node,i=e.bandwidth,o=i?Zv._getDiscreteRangeBand(e):Zv.getContinuousRangeBand(e,n),l=i?o.rangeBand:o.rangeBand/2,s=o.outerPaddingInPixel;e.firstPt=r,e.lastPt=a,e.innerPadding=l,e.outerPadding=s},_rangebandForFirstBranch:function(n){var r=n[0],a=n[n.length-1],i="point",o=e.bandwidth?e.bandwidth():null;if(t.groupByContinuousTime){if(o=0,Z(t.tickValues[r.index+1])){t.tickValues[r.index],t.tickValues[r.index+1];var l=0==r.index?r.index:r.index-1,s=Zv.getContinuousRangeBand(e,t.tickValues,l).rangeBand;e.innerPadding=s}}else i="index";return e(a[i])-e(r[i])+this.getSpan(r,!0)+this.getSpan(a)+o},getSpan:function(t,n){return n&&t===e.firstPt||!n&&t===e.lastPt?e.outerPadding:e.innerPadding},_scale:e,pointProperty:e.bandwidth?"index":"point"}},update:function(e){this.groupByDiscreteTime&&(e=Hm(this.chart.dataObject.findXCategories(),e)),this.dataCount=0,this.tickValues=function(e,t){return e.map(function(e){return La(e,0,t)})}(e,this.columnInfo),this.process();var t=new km.getComponent("GroupByTimeDataLayout");this.pivotLayout=new t({data:this.categories})},process:function(){var e=this.tickValues,t=Hm(this.groupOrder,p_),n=this.groupByDiscreteTime,r=Df(e),a=t.slice(0),i=a.shift(),o=Rf(If(r,function(e){return e[i]}),!1,0,n);this.categories=function e(t,r,a){var i,o=r.shift();return t.forEach(function(t){o?(i=If(t.children,function(e){return e[o]}),t.children=Rf(i,!1,a,n),e(t.children,r.slice(0),a+1)):t.children=Rf(t.children,!0,a,n)}),t}(o,a.slice(0),1)},getPossibleGroupBy:function(e,t){var n=e[0],r=e[e.length-1],a=n.getFullYear()===r.getFullYear(),i=t[0],o=Ba(e[e.length-1]-e[0]);for(var l in o)if(o.hasOwnProperty(l)&&(1<o[l]||"YEAR"===l&&!a)){i=l;break}return i}};zf.getAutoGroupOrder=function(e){var t=p_.indexOf(g_[e]);return p_.slice(0,t)},ve(zf,Gt.HierarchicalDataAdapter),ge(zf.prototype,v_),Gt.HierarchicalTimeDataAdapter=zf,Gt.prototype.getMinMaxX=function(e){var t,n=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,a=this,i=a.xaxisData,o=a.processedseriesData,l=a.chartObj,s=a.dataset,c=i.minRange,u=i.maxRange,d=s.getDataType("x"),h=a.xRange,f=la(l,"x"),p=s.getColumn("x");if(e=Hm(e,.05),p.scaleType===pw&&(e=0,Z(f.logDomain)))return f.logDomain;if(H(l.systemConf,"chart.brush.x["+r+"]")&&n){var g=l.systemConf.chart.brush.x[r];return[g.minRange,g.maxRange]}if(!Z(h)){t=o.map(function(e){return e.data.map(function(e){return Fg(e,function(e){return s.getX(e)})})});var v=Hm(Rm(l.userdata,"chart.axes.xaxis"),{});h=a.xRange=Fg(Ig(Ig(t)).concat(qi(v)))}!a.isBubbleEnabled||d===lx||Z(c)||Z(u)||(t=a.overBubbles(h,"x"),h=[h[0]-t[0],h[1]+t[1]]),Gt.helpers.hasMarkerCorrection()&&d!==lx&&(t=a.overMarker(h,"x",e),h=[h[0]-t[0],h[1]+t[1]]);var y,m,b=0;return d!==lx&&0!==e&&(b=a.getCorrectionOverDataLabels(h,"x")),0===(y=h[1]-h[0])&&(y=1),m=y*e+b,[Hm(c,h[0]-m,0),Hm(u,h[1]+m,0)]},Gt.prototype.getCategories=function(e,t){var n,r=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],a=arguments[3],i=this.chartObj,o=this.hierarchical,l=this.categoriesStore,s=Z(o)&&o.categoryTree&&"x"===e&&0===t||i.dataObject.isWaterfallEnabled;if(t=t||0,r&&H(i.systemConf,"chart.brush."+e+"["+t+"].categories")&&(a=i.systemConf.chart.brush[e][t].categories,!s))return a;if(!(this.isAxisCategory||this.isPolarAxisCategory||i._isAxisCategory()))return[];var c=void 0,u=void 0;if(o&&(c=o.pivotLayout.getRootNodeList("row"),u=o.pivotLayout.getRootNodeList("column")),"x"===e){if(Z(o)&&o.groupByTime)n=0<t?u.getDomainForBranch(t-1):o.groupByDiscreteTime?Hm(this.xaxisData.categories,l.x.sort(Wg)):u.getDomainForCluster(0);else if(o){var d=u.getLeavesCount(),h=i.systemConf.chart.axes.xaxis.uniformLeafScale;n=d-1<t?u.getDomainForBranch(t-d):1<d?h?u.getUniqueDomainForCluster(0):u.getDomainForClusterSet(0,t):u.getDomainForCluster(0)}else n=this.xaxisData.categories;t=""}else n=Z(o)&&(c.getCount()||c.hasMultiCluster())?c.getCount()&&t>c.getLeavesCount()-1?c.getDomainForBranch(t-c.getLeavesCount()):c.getDomainForCluster(0):this.yaxesData[t].categories;return Z(n)&&0!==n.length||(n=l[e+t]),"y"!==e||o||l["y"+t].enabled||(n=["NoData","NoData"]),s&&te(a)&&(n=a.map(function(e){return n[e]})),n},Gt.prototype.getXYvalue=function(e,t,n,r,a,i,o,l,s){var c=this.yaxesData,u=this.dataset,d=this.chartObj;if(this.isPolarAxisCategory){var h=c[a].reversed&&!t?r.domain().length-1:0,f=n(u.getX(i)),p=t?r(i.y+i.y0):r(u.getY(i,a))+(null!=r.bandwidth?r.bandwidth()/2:0),g=Ql(p=qy(p,r.range()[h]),f);return"x"===o?g[0]:g[1]}if(this.isFlowChartCategory){var v=i._centroid;if(!i._centroid||"legendFilter"===d.phase){var y=this.chartObj.renderer[0].highlighter.getPolygon(i);v=1<y.length?i._centroid=Yv(y):y[0]}return"x"===o?v[0]:v[1]}switch(o){case"x":if(e)return t?r(i.y+i.y0):r(u.getY(i,a,s))+(null!=r.bandwidth?r.bandwidth()/2:0);var m=u.getX(i);return n(m)+(null!=n.bandwidth?n.bandwidth(m)/2:0);case"y":if(e){var b=u.getX(i);return n(b)+(null!=n.bandwidth?n.bandwidth(b)/2:0)}return t?r(i.y+i.y0):r(u.getY(i,a,s))+(null!=r.bandwidth?r.bandwidth()/2:0);case"z":return Nf(i,u,d)}},Gt.prototype.getTransRectValue=function(e,t,n,r,a,i,o){var l=this.dataset,s=a&&a.yscale,c=a&&a.addRangeBand(s),u=a&&"waterfall"==a.charttype,d=a&&a.stacked||u,h=a&&l.getY(t,a.yaxiscolumnorder)instanceof Array,f=a&&(s.bandwidth?s.ordinalRange[0]+c:s.range()[0]),p=a&&s.range()[1];switch(this.dataset.yAccessor=this.isPercentChart?function(e){return e.y}:this.dataset.getY,e){case"x":if(a.axisrotated){var g=l.getY(t,a.yaxiscolumnorder);o=null!=o?o:h?g[0]<g[1]?0:1:null;var v=this.dataset.yAccessor(t,a.yaxiscolumnorder,o);return s.bandwidth?s.origRange[0]:s(d?Qy(t.y0,t.y+t.y0):null!=o||h?v:null!=a.hasNegValue?v<a.hasNegValue?v:a.hasNegValue:Qy(v,s.domain()[0]))}var y=l.getX(t);return(a.stacked?a.bandwidth1(y)+a.bandwidth2(a.stackGroupIndex):a.bandwidth1(y)+a.bandwidth2(a.barDatasetIndex+n))+a.padding;case"y":return a.axisrotated?(y=l.getX(t),(a.stacked?a.bandwidth1(y)+a.bandwidth2(a.stackGroupIndex):a.bandwidth1(y)+a.bandwidth2(a.barDatasetIndex+n))+a.padding):(g=l.getY(t,a.yaxiscolumnorder),o=null!=o?o:h?g[0]>g[1]?0:1:null,v=this.dataset.yAccessor(t,a.yaxiscolumnorder,o),d?s(qy(t.y0,t.y+t.y0))+c:s(null!=s.bandwidth||h?v:qy(a.hasNegValue||0,v))+c);case"width":if(a.axisrotated){v=s(v=h?vg(l.getY(t,a.yaxiscolumnorder)):this.dataset.yAccessor(t,a.yaxiscolumnorder,o));var m=null==a.hasNegValue?h?s(this.dataset.yAccessor(t,a.yaxiscolumnorder,0)):f:s(h?gg(l.getY(t,a.yaxiscolumnorder)):a.hasNegValue);return o=h?1:null,s.bandwidth?v+c:d?Ky(s(t.y+t.y0)-s(t.y0))+c:(Ky(p-m-(p-v))||0)+c}return a.barWidth;case"height":return a.axisrotated?a.barWidth:(v=s(v=h?vg(l.getY(t,a.yaxiscolumnorder)):this.dataset.yAccessor(t,a.yaxiscolumnorder,o))+c,m=null==a.hasNegValue||h?h&&!d?s(gg(l.getY(t,a.yaxiscolumnorder))):f:s(a.hasNegValue),o=h?1:null,s.bandwidth?Ky(s.origRange[0]-v):d?Ky(m-s(t.y+t.y0)-(m-s(t.y0)))+c:Ky(m-v));case"radius":return we(i)}},Gt.prototype.getCorrectionOverDataLabels=function(e,t,n,r){var a=this,i=a.chartObj,o=a.xaxisData,l=a.yaxesData,s=a.domainCorrections,c=a.rangeCorrections.datalabels,u=i.dataset.getColumn(t,n),d="x"==t,h=t+(Z(n)?n:""),f=d?o:l[n],p=f.minRange,g=f.maxRange,v=i.plotarea.height;if(!a.isPercentChart&&(!a.isBubbleEnabled||a.pieWithAxis)&&(a.isAxisCategory||a.isNonAxisMultiSeriesCategory)&&(null==p||null==g)&&Dy&&(null==s.byDatalabels[h]||v!=s.plotHeight)){if(r)return!0;s.plotHeight=v;var y=i.axes[t].orient,m=i.plotarea["left"==y?"height":"width"],b=e[1]-e[0],x=a.getEncode(t,n).seriesData,w=0;if(null!=x&&(B(c[h])&&zi(i,t)&&(c[h]=gw.get("preCalculation")(t,x,i)||0),w=c[h]||0),u.scaleType===pw){var C=0;if(dl(i)){var k=ro(i.dataset,t,n)().domain(e).range([0,m-w]);C=k.invert(m)-k.invert(m-w)}s.byDatalabels[h]=C}else s.byDatalabels[h]=b/(m-w)*w}return s.byDatalabels[h]||0},Gt.prototype.findXCategories=function(e){var t=this.categoriesStore,n=this.processedseriesData,r=this.dataset,a=t.x;return n.forEach(function(t,n){var i=t.disabled&&!e,o=t.data;i||null==o||o.constructor!=Array||o.map(function(e,t){if(null!=e&&e.constructor==Array)return e.map(function(e){var t=r.getX(e);null!=t&&-1==a.indexOf(t)&&a.push(t)})})}),a},Gt.prototype.storeCategories=function(e,t,n,r,a,i,o,l){var s=this,c=s.dataset,u=s.categoriesStore,d=u.x,h=u["y"+o],f=Gt.helpers,p=f.isCatNull(c,"x"),g=f.isCatNull(c,"y",o);t?e.map(function(t,r){if(!e.disabled&&te(t))return t.map(function(e){var r=c.getActualX(e),a=0<n.length?c.getGroupByValues(e,n):null;r>s.lastCategoryValue&&!s.needXCategoriesSorting?s.lastCategoryValue=r:s.needXCategoriesSorting||-1!=d.indexOf(r)||(s.needXCategoriesSorting=!0),p(r)||-1!=d.indexOf(r)&&!l||d.push(r),null!=a&&(t.groupByVal=a,e.groupByVal=a,-1==u.subseries.indexOf(a)&&u.subseries.push(a))})}):a!==ox&&i!==ox||e.map(function(t,n){if(!e.disabled&&te(t))return t.map(function(e){var t=c.getActualX(e),n=c.getY(e,o);a!==ox||p(t)||!l&&-1!==d.indexOf(t)||d.push(t),i===ox&&(r===Kv.arearange||r===Kv.gantt?(Z(n)&&-1===h.indexOf(n[0])&&h.push(n[0]),Z(n)&&-1===h.indexOf(n[1])&&h.push(n[1])):g(n)||-1!==h.indexOf(n)||h.push(n))})})},Gt.prototype.isstacked=function(e){var t=this.data,n=t.chart.plot.plotoptions,r=this.stackedChart,a=Gt.helpers;if(Z(e)){var i=a.getChartType(e,sx);return n=n[e=a.getChartType(e,"string")],i===Kv.stkdarea||i===Kv.stkdbar||Re(Py.stacked,i)&&Rm(n,"stacked.enabled")}if(B(r)){var o=this.allChartTypes||a.getAllChartTypes(t),l=this;this.stackedChart=r=o.some(function(e){return l.isstacked.call(l,e)})}return r},Gt.prototype.isStackedPercent=function(){var e=this.dataset.seriesTypes,t=this.data.chart.plot.plotoptions;return Py.stackedPercent.some(function(n){return e.has(n)&&t[Ay.get(n)].stacked.showAs===ew})};var y_=Gt.prototype;y_.getStackGroup=function(){if(!this.isstacked())return vm;var e=this.cache;return e.stackGroup?e.stackGroup:e.stackGroup=this._createStackGroup()},y_._createStackGroup=function(){function e(e,t){var n;t=be(t),o[e]=o[e]||[],(n=o[e]).push.apply(n,_toConsumableArray(t))}var t,n=this,r=n.chartObj.seriesdata,a=n.globalChartType,i=Gt.helpers,o={},l=n.data.seriesdata.stackGroup;return l&&(t=Ig(l),l.forEach(function(t,n){e("user_"+n,t)})),r.forEach(function(r,o){var l=i.getChartType(r.type||a,sx);if(n.isstacked(l)&&(!t||!Re(t,o))){var s=i.getParsedYAxisOrder(r.yaxiscolumnorder);e(s+"_"+l,o)}}),Ve(o)},km.setComponent("cartesianDataProcessor",Ff),ve(Ff,Gt);var m_=function(e){function t(e){return Re(i,e)}var n=this,r=n.domainCorrections,a=n.yaxesData,i=n.allChartTypes,o=n.data,l=n.chartObj,s=n.globalChartType,c=o.metadata.axes.y.length,u=o.metadata,d=u.axes,h=o.chart.plot.plotoptions,f=n.isstacked(),p=n.dataset,g=n.categoriesStore={},v=n.processedseriesData,y=Gt.helpers;n.hierarchical&&!n.hierarchical.groupByTime&&Z(e)&&(n.hierarchical.update(),n.chartObj.seriesdata=n.hierarchical.getSeries()),n.xRange=null,n.yRange=[],n.qualitativeRanges=null,n.cache={},r.plotHeight=null,r.forBubbles={},n.lastCategoryValue=0,n.isBubbleEnabled=!1,n.noofBarEnabledSeries=0,n.noofAreaEnabledSeries=0,n.noofAreaRangeEnabledSeries=0,n.noofBoxplotEnabledSeries=0,n.isContinousChart=!0,n.isPercentChart=!1,g.x=[],g.z=[[0]],g.subseries=[],p.hasNullFormatter={},n.seriesExtermes=[],n.seriesAssist=[];var m=l.axes.y.groups,b=l.axes.y.leaves;l.cache.data={},l.cache.search={},l.cache.customPoints={};for(var x=0;x<c;x++)g["y"+x]=[],n.seriesExtermes[x]=[],Z(a[x])||(a[x]={}),m[x]=m[x]||{},m[x].disabled=!0,b[x]=b[x]||{},b[x].disabled=!1;if(te(v)){var w,C,k=d.x?p.getColumn("x"):null,_=k?k.datatype:null,S=Z(d.z),O=y.groupByDataIndices(u),A=o.metadata.axes.x,P=o.metadata.columns[A].datatype;n.hasZaxis=Z(p.zidx)&&Py.zaxis.some(t),n.isFlowChartCategory=Py.flow.some(t),n.needXCategoriesSorting=!1,(n.pivot?Yt(n):[{data:v}]).forEach(function(e){e.data.forEach(function(e){var t=e.disabled,r=y.getChartType(e.node&&e.node.type||e.type||s,sx);n.isBubbleEnabled=n.isBubbleEnabled||!t&&Qn(r),n.isWaterfallEnabled=n.isWaterfallEnabled||!t&&Kn(r),n.pieWithAxis=n.pieWithAxis||!t&&r==Kv.bubblepie,n.noofBarEnabledSeries+=Zn(r)&&!t?1:0,n.noofAreaEnabledSeries+=r!=Kv.area&&r!=Kv.stkdarea||t?0:1,n.noofAreaRangeEnabledSeries+=r!=Kv.arearange||t?0:1,n.noofBoxplotEnabledSeries+=r!=Kv.boxplot||t?0:1,n.isContinousChart=n.isContinousChart&&(r==Kv.line||an(r)||$n(r))})}),v.forEach(function(e,t){var r=e.disabled,a=e.data,o=y.getChartType(e.type||s,sx),c=y.getParsedYAxisOrder(e.yaxiscolumnorder),u=p.getDataType("y",c);if(te(a)&&Z(p.zidx)&&Re(Py.zaxis,o)&&n.saveEncode("z",0,t),!r&&te(a)){g["y"+c].enabled=!0,m[c].disabled=!1,w=o===Kv.waterfall&&null==w,n.seriesAssist[t]={};var d=p.getDataType("x",null,i),v=p.getColumn("y",c);Z(p.hasNullFormatter.x)||(p.hasNullFormatter.x=!(d!==ox||!H(k[_],"nullformatting"))),Z(p.hasNullFormatter["y"+c])||(p.hasNullFormatter["y"+c]=!(u!==ox||!H(v[v.datatype],"nullformatting"))),n.saveEncode("x",0,t),n.saveEncode("y",c,t),dx.isQuantileColorScale(l)&&n.saveEncode("color",0,t);var b,x=n.isstacked(o),A=ar(Ay.get(o),vb)&&h.bar.showAs;if((x||A)&&!n.pivot){b=Wa(n.getStackGroup(),t),n.saveEncode("stack",b,t),n.seriesAssist[t].layout=["stack"],n.seriesAssist[t].stackIndex=b;var P=n.getEncode("stack",b),T=km.getComponent("stackLayout");P.layout=P.layout||new T,Bf(n,a,t,b,o)}C=C||A,n.storeCategories(a,f,O,o,d,u,c,w),n.setExtremes(a,f,u,o,S,c)}});var T=Rm(l.userdata,"chart.axes.xaxis.categories");if(n.isAxisCategory&&P!==ox&&n.needXCategoriesSorting&&(!Z(T)||Z(T)&&0===T.length)&&g.x.sort(Wg),n.isCombinationalChart=n.pivot?1<sn(l).values().length:1<Fe(i,function(e){return Ay.get(e)}).length,n.isStackedPercentChart=f&&n.isStackedPercent(),n.isPercentChart=n.isStackedPercentChart||C,n.pieWithAxis?n.bubblepieData=n.processBubblePieData():n.isFlowChartCategory&&n.processSankeyData(),(f||n.isPercentChart)&&!n.isWaterfallEnabled)if(n.pivot){var E=n.hierarchical.pivotLayout,L=E.getRootNodeList("row"),M=E.getRootNodeList("column"),z=E.getRootNodeList("layer").panes;L.hasMultiCluster(),M.getBranchesCount(0),L.getBranchesCount(0),Ve(z).forEach(function(e,t){e.data.forEach(function(r,a){var i=e.row+"_"+e.column,o=t+a;n.saveEncode("stack",i,t,r.node),n.seriesAssist[o]=n.seriesAssist[o]||{},n.seriesAssist[o].layout=["stack"],n.seriesAssist[o].stackIndex=i;var l=n.getEncode("stack",i),c=km.getComponent("stackLayout");l.layout=l.layout||new c;var u=y.getChartType(e.data.type||s,sx);Bf(n,e.data,o,i,u)}),jf(e.data,p,n),Hf(e.data,p,n)})}else jf(v,p,n),Hf(v,p,n);n.isPercentChart&&!function(e,t){pe(e,function(e,n){var r=e.seriesData,a=e.layout;r.map(function(e){var n=Ig(e.data);a.toPercent(n,function(e){return t.getX(e)})})})}(n.getEncode("stack"),p)}},b_=Ff.prototype;b_.getSeriesData=function(){var e=this.chartObj;if(Z(this.hierarchical)&&this.hierarchical.categories){var t=this.hierarchical.getSeries();return e.seriesdata=t}return e.seriesdata},b_.containsNegativeData=function(e){return this.hasNegativeValue[e]},b_.saveBaseLine=function(e,t,n,r){var a=this.dataset.getDataType("y",e),i=vm;if(a===sx){var o=this.baseline[e],l=this.isstacked()||this.isPercentChart;i=!Z(o)||l||r&&!X(o,t)?n<0||t[0]<0?0:vm:o}this.hasNegativeValue[e]=i},b_.getMinMaxZ=function(){return Fg(Ig(this.categoriesStore.z))},b_.updateSeriesdatabyCategories=function(e,t,n,r,a){var i=this.dataset,o=this.chartObj,l=Gt.helpers,s=l.isCatNull(i,"x"),c=l.isCatNull(i,"y",r),u=Rg(),d=0,h="gantt"===o.chartTypes[0].name;return Hm(o.systemConf.chart.plot.allowDuplicateCategories,h)?e:e=e.filter(function(e){var o=!0,l=i.getX(e);if(t&&(o=o&&!s(l)&&-1<t.indexOf(l)),n){var h=i.getY(e,r);o=o&&!c(h)&&-1<n.indexOf(h)}return t&&a&&o&&(u.has(l)?o=!1:u.add(l)),o?(e._filter=!1,e.counter=d++):e._filter=!0,o})},b_.setExtremes=function(e,t,n,r,a,i){var o=this.dataset,l=this.categoriesStore.z;if(((n===sx||n===lx)&&!t||a)&&!e.disabled&&te(e)){var s=Ig(e);if(a){var c=Fg(s,function(e){return o.getZ(e)});l.push(c)}if(n===sx||n===lx){var u;if(Py.rangePlot.has(r)){var d=Ig(s.map(function(e){return o.getY(e,i)}));u=Fg(d)}else u=Fg(s,function(e){return o.getY(e,i)});this.seriesExtermes[i].push(u)}}},b_.getDomain=function(e,t,n){var r=void 0,a=void 0;this.hierarchical&&(r=this.hierarchical.pivotLayout.getRootNodeList("row").getCount(),a=this.hierarchical.pivotLayout.getRootNodeList("column").getCount());var i="x"==t?a:r;return this.hierarchical&&i&&(!this.hierarchical.groupByDiscreteTime||!n)||this.isWaterfallEnabled?av(e.length):e},Gt.prototype.extendOuterpadding=function(e,t,n,r,a,i,o){var l=this.rangeCorrections.datalabels,s=Gt.helpers.hasMarkerCorrection(),c=this.chartObj,u=0;if(c.datalabels.moduleExists&&Ii(c)||this.isBubbleEnabled||s){t[0]>t[1]&&(t=[t[1],t[0]]);var d=_g().domain(e).range(t).paddingInner(r).paddingOuter(a),h=t;if(this.isBubbleEnabled){var f=this.updateMinMaxForBubble(t,d,i,o),p=.5*qy(t[0]-f[0],f[1]-t[1]);h=[f[0]-p,f[1]+p]}else if(s)h=this.updateMinMaxForMarker(scale,i);else if(Dy){var g=this.getEncode(i,o).seriesData,v=d(d.domain()[0])-d.range()[0],y=i+(Z(o)?o:"");B(l[y])&&zi(c,i)&&(l[y]=gw.get("preCalculation")(i,g,c)||0),p=l[y]||0,p=qy(0,p-v),h=[t[0]-p,t[1]+p]}u=qy(h[1]-t[1],-h[0])}return u};var x_=Vf.prototype;x_._defaultH=function(){return[{shape:"rect",path:this.path,data:this.data,context:this.renderingContext,translate:this.translateContext,styles:$s}]},x_.data=function(e){var t=this.chart,n=this.renderer,r=n.commonRendererProp().params;return function(){t.cache.data[e._key]||(t.cache.data[e._key]={});var a,i=t.cache.data[e._key];if(!Z(i._x)){var o=t.dataObject.getTransRectValue("x",e,e.subSeriesIndex,0,n.commonOption),l=t.dataObject.getTransRectValue("y",e,e.subSeriesIndex,0,n.commonOption),s=t.dataObject.getTransRectValue("width",e,e.subSeriesIndex,0,n.commonOption),c=t.dataObject.getTransRectValue("height",e,e.subSeriesIndex,0,n.commonOption);a=xt(o,l,s,c,0,r.yaxisreversed,r.axisrotated),i._x=e._x=i._x||a.x1,i._y=e._y=i._y||a.y1,i._width=e._width=i._width||s,i._height=e._height=i._height||c,i._widthT=e._widthT=i._widthT||a.x2,i._heightT=e._heightT=i._heightT||a.y2,i._uid=e._uid=t.dataset.getX(e),i._point=e}return i._visible=e._visible=dr(t,e),e}},x_.options=function(e){var t=this.chart,n=this.renderer,r=n.commonRendererProp().params,a=r.gvp("border")||{},i=a.show?a.radius:0,o=Ln(this.chart,In(r.commonPlotOptions,this.chart)?Hm(e.categoryIndex,e.sortedItemIndex):e.seriesIndex,e,e.seriesIndex);return{radius:t.dataObject.getTransRectValue("radius",null,null,null,n.commonOption,i),color:o}},x_.renderingContext=function(){return jw.get("bar").call(this,this.chart)},x_.translateContext=function(){return[this.chart.plotarea.left,this.chart.plotarea.top]},x_.path=function(e,t){var n=this.chart.systemConf.chart.axes.yaxis[e.yaxisOrder||0].reversed,r=wt((e=e._data())._x,e._y,e._widthT,e._heightT,this.options(e).radius,n,this.chart.axes.rotated,!0),a=t.context.call(this),i=mt(a,"path",[1],".","class","highlight"+e.paneid+e.seriesIndex+e.subSeriesIndex);return a.style("display",""),i.style("display","").attr("d",r).attr("transform","translate("+this.chart.plotarea.left+","+this.chart.plotarea.top+")"),i},Wf.prototype.levelmarker=function(e){var t=this.chart,n=this.renderer,r=t.eventHandler.bulletEvents;if(!qv.BulletEvent)return[];if(!r){var a=this.renderer.commonRendererProp().params;t.eventHandler.bulletEvents=new qv.BulletEvent(t,n.commonOption,a.xscale,a.yscale)}var i=t.eventHandler.bulletEvents.getCurrentRectangles(e);return i.map(function(n,r){n._uid=t.dataset.getActualX(e),n._data=function(){var a=t.eventHandler.bulletEvents.getCurrentRectangles(e)[r];return a._uid=n._uid,a}}),i.disabled=function(){return t.seriesdata[e.seriesIndex].disabled},i},ve(Yf,Vf);var w_=Yf.prototype;w_._defaultH=function(){var e=this;return[{shape:"rect",path:De(this).path,data:De(this).data,context:De(this).renderingContext,translate:De(this).translateContext,styles:$s},{shape:"rect",path:this.levelMarker,context:this.renderingContext,translate:De(this).translateContext,styles:function(t){return e.getStylesForLevelMarker.call(e,t)}},{shape:"marker",path:this.markerPath,context:this.markerContext,translate:De(this).translateContext,type:"start"},{shape:"marker",path:this.markerPath,context:this.markerContext,translate:De(this).translateContext,type:"end"}]},w_.levelMarker=function(e,t){this.chart;var n=this.renderer.commonRendererProp().params.levelMarker||{},r=this.renderer.getBarLevelMarkerProp(e,e.subSeriesIndex,e.itemIndex,this.renderer,this.renderer.commonOption),a=wt(r.x,r.y,r.width,r.height,this.chart.dataObject.getTransRectValue("radius",null,null,null,0),vm,this.chart.axes.rotated),i=t.context.call(this),o=mt(i,"path",n.enabled?[1]:[],".","id","levelMarkerpath");return i.style("display",""),o.style("display","").attr("d",a).attr("transform","translate("+this.chart.plotarea.left+","+this.chart.plotarea.top+")"),o},w_.markerPosition=function(e,t){this.renderer;var n=void 0,r=void 0;switch(function(e,t){return t?"start"==e?"left":"right":"start"==e?"top":"bottom"}(t.type,this.chart.axes.rotated)){case"left":n=e._x,r=e._y+e._height/2;break;case"right":n=e._x+e._width,r=e._y+e._height/2;break;case"top":n=e._x+e._width/2,r=e._y;break;case"bottom":n=e._x+e._width/2,r=e._y+e._height}return{x:n,y:r}},w_.markerPath=function(e,t){var n=this.markerOptions(e,t.type),r=n.options,a=this.markerPosition(e,t);if(n.enabled){var i=t.context.call(this),o=t.translate.call(this),l=mt(i,"g",[1],".","class","yrangePos"+t.type);return Nt(l,null,r,{color:n.color,symbolSize:{inner:n.size.inner,outer:n.size.outer},transform:[a.x,a.y],imageSize:15},this.chart),i.attr("transform","translate("+o[0]+","+o[1]+")"),l}},w_.markerOptions=function(e,t){this.chart;var n=this.renderer.commonRendererProp().params,r=n.commonPlotOptions.hoveroptions[t],a=(a=this.chart.seriesdata[e.seriesIndex].plotoptions)&&a.hoveroptions?a.hoveroptions[t]:{},i=Im(r,a,!0),o=n.commonPlotOptions.marker[t],l=a&&a.marker?a.marker[t]:{},s=Im(o,l,!0);return i=Im(s,i,!0),{enabled:n.commonPlotOptions.marker&&n.commonPlotOptions.marker.enabled,options:i,symbol:i.symbol,_size:i.size,color:this.options(e).color,size:{outer:2*i.size,inner:1*i.size}}},w_.markerContext=function(){return jw.get("scatter").call(this,this.chart)},w_.getStylesForLevelMarker=function(e){var t=this.renderer.commonRendererProp().params.levelMarker||{},n=this.options(e);return{fill:t.color||n.color}},ve(Uf,Vf);var C_=Uf.prototype;C_.box=function(e){var t=this.chart,n=this.renderer,r=this.renderer.commonRendererProp().params,a=this.chart.dataset,i=(a.getX(e),r.whiskers),o=e[i.dataindex][0],l=e[i.dataindex][1],s=(t.dataObject.getTransRectValue,n.commonOption);t.cache.data[e._key]||(t.cache.data[e._key]={});var c=t.cache.data[e._key];return c._box=e._box=c._box||(i.enabled?Gf(t,s,r,Xf(e,[o,l],a),e):Gf(t,s,r,e,e)),e._box},C_.levels=function(e,t){var n=this.chart,r=this.renderer,a=this.renderer.commonRendererProp().params,i=a.targetMarker,o=a.whiskers,l=this.chart.dataset,s=(l.getX(e),l.getY(e,e.yaxisOrder)),c=e[i.dataindex],u=e[o.dataindex][0],d=e[o.dataindex][1],h=a.yscale(c),f=5*o.strokeWidth,p=a.axisrotated?-1:1,g=(n.dataObject.getTransRectValue,r.commonOption),v=Xf,y=a.yscale.invert;n.cache.data[e._key]||(n.cache.data[e._key]={});var m=n.cache.data[e._key];if(!m._levels){var b,x,w=void 0,C=void 0,k=void 0,_=[];b=Gf(n,g,a,v(e,[s[0],y(h+f*p)],l),e,"high"),x=Gf(n,g,a,v(e,[y(h-f*p),s[1]],l),e,"low"),_.push(b,x),(o.enabled||t)&&(w=Gf(n,g,a,v(e,[u,s[0]],l),e,"whisker0"),C=Gf(n,g,a,v(e,[s[1],d],l),e,"whisker1"),_.push(w,C)),(i.enabled||t)&&(k=Gf(n,g,a,v(e,[y(h+f*p),y(h-f*p)],l),e,"median"),_.push(k)),m._levels=e._levels=_}return e._levels},i_.bar=function(){function e(i,o,l,s){var c=t.params,u=c.chartObj,d=c.xscale,h=c.stacked,f=c.datasetIndex,p=c.axisrotated,g=c.commonPlotOptions,v=(c.color,c.paneColor),y=c.labelQueue,m=(c.hasNegValue,c.yaxiscolumnorder),b=c.dataset,x=c.legendOrderIndex,w=c.rendererIndex,C=u.systemConf,k=(u.plotarea,u.dataObject),_=Gt.helpers;o=u.dataObject.categoryHierarchy?o[f]:u.seriesdata[f];var S=rn(u)?o.row+"_"+o.column:null,O=ln(u,S,f);if(n&&r){a=c.yscale;var A=u.dataset.getDataType("y",m),P=d.domain(),T=A==ox?a.domain():null,E=(Z(k.hierarchical)&&k.getCategories("x"),O.name,null),L=c.yaxisreversed=u.systemConf.chart.axes.yaxis[m||0].reversed,M=(c.xaxisreversed=u.systemConf.chart.axes.xaxis.reversed,o.plotoptions),z=c.gvp=zm.getValueOfPlotOptions(M,g),I=O.value===Kv.bullet,D=z("targetMarker")||{},j=M&&M.levelMarker?Im(g.levelMarker,M.levelMarker,!0):g.levelMarker,H=M&&M.border?Im(g.border,M.border,!0):g.border,B=In(g,u),F=dx.isQuantileColorScale(u),V=(e.fillColorFunc=Sn(u,x,S,E,null,null,null,c),An(u,f,S,null,c),z("fillOpacity")),W=e.getParamValue=function(){return u.dataObject.getTransRectValue.apply(u.dataObject,N(arguments))},Y=Go(u.rendererConf[w],w,x),U=Y.levelMarkerWidth;j.overlayRange="below";var G=j.color,X={tlx:0,tly:0,trx:0,trY:0,brx:0,bry:0,blx:0,bly:0},q=0,Q=null,$=null,J=0;Z(H)&&K(H.show)&&(q=Z(H.size)?H.size:1,Q=H.color,$=H.style,J=H.radius,X=W("radius",null,null,null,Y,J));var ee,ne=rt($,null==q?2:q),re=C.legend,ae=function(e){for(var t in e)if(e.hasOwnProperty(t))return!!e[t];return!1}(X),ie=(re.patternPallete,re.patternPallete,Hm(D.size,U-2*Hm(D.padding,Y.padding/2))),oe=I?d.bandwidth():U,le=D.size;if(D.size=ie=Z(le)?I?Qy(ie,oe/10):ie:ie/10,h&&j.enabled&&!Z(l)){var se=Wa(k.getStackGroup(),f),ce=u.dataObject.getEncode("stack",se);ee=ce&&ce.seriesIndices[0]===f}return o.disabled||(e.seriesdataAfterUpdate=[],o.data.forEach(function(t,r){var o=u.dataObject.updateSeriesdatabyCategories(R(t),P,T,m,!0);u.systemConf.chart.axes.xaxis.reversed&&(o=o.slice(0).reverse()),F&&Z(s)&&(o=Dx.filterSelectionByColor(o,!0,s,u)),u.renderVisiblePointsOnly&&(o=_.filterPointsInViewport(u,o,"bar","x",f,r)),e.seriesdataAfterUpdate[r]=o,h&&j.enabled&&!Z(l)&&P.length!=o.length&&Qv.render.bulletHelpers.addDummyDataForLevelmarker(o,P,b,m),o.forEach(function(t,o){function s(e,t){e.save(),e.translate(y,m),e.strokeStyle=kn(d,V),e.fillStyle=t,ae?(e.beginPath(),xw.roundedRect(e,0,0,w,C,X)):(e.beginPath(),e.rect(0,0,w,C)),e.fill(),function(e,t,n,r){0<t&&(e.lineWidth=t,te(r)&&r.length&&Z(e.setLineDash)&&e.setLineDash(r),e.strokeStyle=n,e.stroke())}(e,q,Q||d,ne),e.closePath(),e.restore()}var d=Ln(u,B?o:x,t,f,S);if(j.enabled&&!Z(l)&&(h&&ee&&0===r||!h)){var g=Qv.render.bulletHelpers.ZC_BAR_getLevelMarkerRect(t,j,u,Y,c,r,f),y=p?g.y:g.x,m=p?g.x:g.y,w=g.width,C=g.height;i.save(),i.beginPath(),i.fillStyle=Qv.render.bulletHelpers.getBulletLevelMarkerGradient(t,j,u,d,G)||kn((te(j.color)?j.color[0]:j.color)||d,j.fillOpacity),xw.roundedRect(i,y,m,w,C,X,L,p),i.fill(),i.closePath(),i.restore()}if(y=W("x",t,r,o,Y),m=W("y",t,r,o,Y),w=W("width",t,r,o,Y),C=W("height",t,r,o,Y),L&&(p?y-=w:m-=C),E=[w,C],u.imagePallete){var k=wn(u,B?o:x,S);tb.canvas_patterns.imageFill({x:y,y:m,context:i,name:k},s)}else{var _=Z(l)?l:e.fillColorFunc(B?o:x,t,null,v,V,E,{x:y,y:m,width:w,height:C,context:i},!1);s(i,_)}I&&!0===D.enabled&&!t.isDummy&&(y=n(b.getX(t))+oe/2,m=a(t[D.dataindex]),function(e,t,n,r,a,i){var o=5*n,l=Hm(t.outerStrokeWidth,1),s=Hm(t.innerStrokeWidth,1),c=t.outerStrokeColor,u=t.innerStrokeColor,d=t.outerFillColor,h=t.innerFillColor;Z(t.outerFillOpacity)&&d&&(d=kn(d,t.outerFillOpacity)),Z(t.outerStrokeOpacity)&&c&&(c=kn(c,t.outerStrokeOpacity)),Z(t.innerFillOpacity)&&h&&(h=kn(h,t.innerFillOpacity)),Z(t.innerStrokeOpacity)&&u&&(u=kn(u,t.innerStrokeOpacity)),Z(t.dashStyle)&&(t.outerDashStyle=t.innerDashStyle=t.dashStyle);var f=i_.scatter.getCache(t.symbol,o,c,l,d,u,s,h,t),p=f.adjustPosition,g=f.canvas,v=f.width,y=o+l/2+p;e.save(),i?(e.translate(a,r),e.rotate(90*cm)):e.translate(r,a),e.drawImage(g,-y,-y,v,v),e.restore()}(i,D,ie,y,m,p))})})),D.size=le,y.push({renderer:e,charttype:"bar",chartObj:u,rendererIndex:w,paneid:S,args:[o,x,null,null,null,w]}),e.chartRendered=!0,e}e.chartRendered=!0}var t,n,r,a,i,o;return e.getHighlighter=function(t,n,r){if(e.highlighter)return e.highlighter;var a=r||ln(t,null,n).name,i="gantt"==a,o="boxplot"==a;return e.highlighter="bullet"==a?new Wf(t,e):i?new Yf(t,e):o?new Uf(t,e):new Vf(t,e)},e.commonRendererProp=function(n){return arguments.length?(t=n,e):t},e.bandwidth1=function(t){return arguments.length?(n=t,e):n},e.bandwidth2=function(t){return arguments.length?(r=t,e):r},e.barDatasetIndex=function(t){return arguments.length?(i=t,e):i},e.shiftInfo=function(t){return arguments.length?(o=t,e):o},e},et.bar=function(){return{outerPadding:.04,fillOpacity:.9,maxBandWidth:200,multiColoring:!1,border:{show:!1,size:null,style:"solid",radius:0,color:null},stacked:{enabled:!1,showAs:"values"},levelMarker:{enabled:!1,color:["#d8d8d8"],fillOpacity:.9},datalabels:{showAs:"y",stackLabels:{show:!1,showAs:"y"}},animation:{type:"verticalAll"},gradients:{options:{linear:{y2:50}}}}},Qv.render.bulletHelpers=function(){},Qv.render.bulletHelpers.getLevelMarkerParams=function(e,t,n,r,a){var i,o,l,s,c=r.commonRendererProp().params,u=c.chartObj,d=c.yaxiscolumnorder,h=c.axisrotated,f=c.dataset,p=a&&a.yscale.range()[1],g=e[a.levelMarker.dataindex],v=f.getY(e,d),y=v[0],m=(v[1]-y)*g/100,b=a.yscale(y+m),x=h?0:a.levelMarkerPadding,w=h?a.levelMarkerPadding:0;i=u.dataObject.getTransRectValue("x",e,t,n,a)+x;var C=null==a.hasNegValue?a.yscale(f.getY(e,a.yaxiscolumnorder,0)):a.yscale(a.hasNegValue);return s=a.axisrotated?(o=r.getParamValue("y",e,t,n,a)+w,l=a.stacked?Ky(a.yscale(e.y+e.y0)-a.yscale(e.y0))+a.addRangeBand(a.yscale):(Ky(p-C-(p-b))||0)+a.addRangeBand(a.yscale),a.levelMarkerWidth||a.barWidth):(o=b,l=a.levelMarkerWidth||a.barWidth,a.stacked?Ky(C-a.yscale(e.y+e.y0)-(C-a.yscale(e.y0)))+a.addRangeBand(a.yscale):Ky(C-b)+a.addRangeBand(a.yscale)),{x:i,y:o,width:l,height:s}},Qv.render.bulletHelpers.getBulletLevelMarkerGradient=function(e,t,n,r,a){var i=e[t.dataindex]||[];if(null!=i&&!(i instanceof Array))return null;if(!i.length)return null;if(a)a.constructor!=Array&&(t.color=[a]);else{t.color=[];var o=t.colorGamma||[.3,.9],l=L(r,[0,i.length-1],[+o[0],+o[1]]);t.color=i.map(function(e,t){return l(t)})}var s,c=i.filter(function(e){return e<0});if(0<c.length){var u=(s=i.slice()).indexOf(0);-1<u&&s.splice(u,1);var d=t.color;s=s.sort(Yg);for(var h=[],f=0;f<s.length;f++){var p=i.indexOf(s[f]);h.push(d[p])}t.color=h,s.splice(s.length-c.length,0,0),i=s}t.values=i;var g=Gv.threshold.overlay(n,"continous")(pm,t,0,"y");return 0<c.length&&(i=s),g},Qv.render.bulletHelpers.ZC_BAR_getLevelMarkerRect=function(e,t,n,r,a,i,o){var l,s,c=e[t.dataindex]||[],u=Z(t.dataindex),d=n.datalabels.hasFixedPosition,h=n.systemConf.chart.axes.yaxis[a.yaxiscolumnorder||0].reversed,f=r.stackGroupIndex,p=n.plotarea,g=a.stacked,v=a.axisrotated,y=a.hasNegValue,m=a.yaxiscolumnorder,b=a.dataset,x=a.yscale;n.eventHandler&&!n.eventHandler.bulletEvents&&qv.BulletEvent&&(n.eventHandler.bulletEvents=new qv.BulletEvent(n,r,a.xscale,a.yscale)),null==c||c instanceof Array||(c=[c]),u&&!c.length?l=s=0:(l=gg(c),s=vg(c));var w=b.getX(e),C=(g?r.bandwidth1(w)+(r.bandwidth2(f)||0):r.bandwidth1(w)+r.bandwidth2(r.barDatasetIndex+i))+r.levelMarkerPadding,k=u?x(v?Qy(0,l):qy(0,s)):v&&null!=y?x(y):0,_=v?u?x(qy(0,s))-x(Qy(0,l)):null!=y?p.width-x(y):p.width:r.levelMarkerWidth,S=v?r.levelMarkerWidth:u?x(Qy(0,l))-x(qy(0,s)):null!=y?x(y):p.height;if(!u)if(x.bandwidth){var O=x.ordinalRange,A=x.bandwidth()/2;v?(k=x.origRange[0],_=O[h?0:O.length-1]+A):(k=O[O.length-1]+A,S=O[h?O.length-1:0]+A)}else{var P;P=d?n.dataObject.ZC_BAR_getRangeY(m)[1]:x.domain()[1];var T=[x(P),x(Z(y)?y:x.domain()[0])];v?(T.reverse(),k=T[0],_=Ky(T[1]-T[0])):(k=T[0],S=Ky(T[1]-T[0]))}return{x:C,y:k,width:_,height:S}},Qv.render.bulletHelpers.addDummyDataForLevelmarker=function(e,t,n,r){var a=e.map(function(e){return n.getX(e)});t.forEach(function(t,i){var o=t;if(a.indexOf(o)<0){var l=[];l.splice(n.xidx,0,o),l.splice(n.yidx(r),0,0),l.isDummy=!0,l.y=0,l.y0=0,l.index=i,e.splice(i,0,l)}})},Qv.render.bulletHelpers,Gt.prototype.overLevelMarker=function(e){this.qualitativeRanges||(this.qualitativeRanges=[]);var t,n,r,a=Gt.helpers,i=this.qualitativeRanges[e],o=this.getEncode("y",e).seriesData,l=a.getChartType(o[0].type||this.globalChartType,"string"),s=this.data.chart.plot.plotoptions[l],c=s.levelMarker,u=s.targetMarker,d=s.whiskers;return i||(i=this.qualitativeRanges[e]=[],o.forEach(function(e){var a=e.plotoptions||{};c=Im(c,a.levelMarker),u=Im(u,a.targetMarker),d=Im(d,a.whiskers),t=c.dataindex,n=u.dataindex,r=d.dataindex,(c.enabled||u.enabled||d.enabled)&&(t||n||r?e.data.forEach(function(e){e.forEach(function(e){u.enabled&&Z(e[n])&&i.push(e[n]),c.enabled&&Z(e[t])&&(te(e[t])?i=i.concat(e[t]):i.push(e[t])),d.enabled&&Z(e[r])&&(i=i.concat(e[r]))})}):c.enabled&&(te(c.ranges)?i=Ig(c.ranges):Z(c.values)&&(i=i.concat(c.values))))})),i.length||this.hasLevelMarker?Fg([].concat(_toConsumableArray(i),[0])):[]},Gt.prototype.getLevelMarkerIndices=function(e){this.qualitativeRanges||(this.qualitativeRanges=[]);var t,n,r,a=Gt.helpers,i=this.qualitativeRanges[e],o=this.getEncode("y",e).seriesData,l=a.getChartType(o[0].type||this.globalChartType,"string"),s=this.data.chart.plot.plotoptions[l],c=s.levelMarker,u=s.targetMarker,d=s.whiskers,h=new Array(0);return i||(i=this.qualitativeRanges[e]=[],o.forEach(function(e){var a=e.plotoptions||{};c=Im(c,a.levelMarker),u=Im(u,a.targetMarker),d=Im(d,a.whiskers),t=c.dataindex,n=u.dataindex,r=d.dataindex,c.enabled&&(Z(t)?h.push(t):te(c.ranges)?i=Ig(c.ranges):Z(c.values)&&(i=i.concat(c.values))),u.enabled&&Z(n)&&h.push(n),d.enabled&&Z(r)&&h.push(r)})),{indices:h,values:i}},Gt.prototype.getStackingIndices=function(e){var t=this,n=t.getEncode("y",e),r=n.seriesData,a=n.seriesIndices,i=new Array(0),o=new Array(0),l=new Array(0),s=new Array(0);return t.pivot&&(r=Ve(t.hierarchical.pivotLayout.layers.panes)),r.map(function(e,n){var r=t.pivot?n:a[n],c=t.seriesAssist[r];if(Re(c.layout||[],"stack")){var u=t.pivot?e.row+"_"+e.column:c.stackIndex;i.push(u),l.push(e)}else o.push(n),s.push(e)}),{_stackData:l,_nonStackData:s,stackIndices:i,nonStackseriesIndices:o}},My.bar=function(){function e(u){return u.each(function(u){function d(e,t){return I&&(e.categoryIndex=t=oe.indexOf(T.getX(e))),t}function h(e,t){return de?(t=d(e,t),g.seriesColor[t%g.seriesColor.length]):_}var f=fg(this);e.update=function(){f.transition().call(e)};var p=t.params,g=p.chartObj,v=p.xscale,y=p.stacked,m=p.datasetIndex,b=p.renderingOrderIndex,x=p.legendOrderIndex,w=p.rendererIndex,C=p.axisrotated,k=p.commonPlotOptions,_=p.color,S=p.paneColor,O=p.labelQueue,A=p.hasNegValue,P=p.yaxiscolumnorder,T=p.dataset,E=g.systemConf,L=(g.plotarea,g.dataObject),M=(p.threshold,p.colorOverlay,p.yaxisreversed=E.chart.axes.yaxis[p.yaxiscolumnorder||0].reversed),z=p.xaxisreversed=g.systemConf.chart.axes.xaxis.reversed,I=E.chart.plot.allowDuplicateCategories;a=p.yscale;var D=u[m],j={data:D,index:b},H=g.defsLocation,B=D.plotoptions,F=D.data,V=D.row+"_"+D.column,W=ln(g,V,m),Y=W.name,U=p.gvp=zm.getValueOfPlotOptions(B,k),G=nC(g,m,V),X=g.patternPallete&&g.patternPallete.length,q=g.dataObject.noofBarEnabledSeries,Q="bullet"==Y,$="gantt"==Y,J="waterfall"==Y,ee="boxplot"==Y,ne=Py.rangePlot.has(W.value),re=g.dataset.getDataType("y",P),ae=v.domain(),ie=re==ox?a.domain():null,oe=(Z(L.hierarchical)&&L.getCategories("x"),ae),le=mt(f,"g",[j],".","class","barseries_"+m);if(n&&r){var se,ce=p.levelMarker=B&&B.levelMarker?Im(k.levelMarker,B.levelMarker,!0):k.levelMarker,ue=B&&B.border?Im(k.border,B.border,!0):k.border,de=In(k,g),he=ei(k,B,g,"bar"),fe=he.enabled,pe=he.easingType,ge=he.type,ve=fe?100:0;l=s?fe?300:0:he.duration;var ye=Go(g.rendererConf[w],w,x,V),me=ye.barWidth,be=ye.addRangeBand,xe=Wa(L.getStackGroup(),m);e.getParamValue=function(){return g.dataObject.getTransRectValue.apply(g.dataObject,N(arguments))};var we,Ce,ke,_e,Se;if(ce&&(ke=ce.color,ce.overlayRange="below"),Q||ne){var Oe=$?"marker":ee?"median":"targetMarker",Ae=ee?"threshold":"qualitativeGroup";t.params.targetMarker=we=B&&B[Oe]?Im(k[Oe],B[Oe],!0):k[Oe],we=ee?Zf(we,he):we,Ce=mt(g.staticPaneSVG.selectAll("g."+Ae),"g",!0!==we.enabled||D.disabled?[]:[m],".","class",$||ee?"markerSeries"+m:"markerSeries"),ee&&(t.params.whiskers=_e=B&&B.whiskers?Im(k.whiskers,B.whiskers,!0):k.whiskers,(_e=Zf(_e,he)).symbol="whiskers",Se=mt(g.staticPaneSVG.selectAll("g."+Ae),"g",!0!==_e.enabled||D.disabled?[]:[m],".","class","whiskerSeries"+m))}var Pe={tlx:0,tly:0,trx:0,trY:0,brx:0,bry:0,blx:0,bly:0},Te=Pe,Ee=0,Le=null,Me=null,ze=Pe;Z(ue)&&K(ue.show)&&(Ee=ue.size,Le=ue.color,Me=ue.style,Te=e.getParamValue("radius",null,null,null,ye,ue.radius));var Ie=rt(Me,null==Ee?2:Ee),De=e.fillColorFunc=Sn(g,m,V,G,null,null,null,p),Re=An(g,m,V,p);if(e.seriesdataAfterUpdate=[],F.forEach(function(t,u){function b(t,n,r,i,o){switch(t){case"x":return C?a(n.y0):e.getParamValue("x",n,r,i,o);case"y":return C?e.getParamValue("y",n,r,i,o):a(n.y0);case"width":return C?1:me;case"height":return C?me:1}}function w(t,n){return E=e.getParamValue("x",t,u,n,ye),I=e.getParamValue("y",t,u,n,ye),j=e.getParamValue("width",t,u,n,ye),N=e.getParamValue("height",t,u,n,ye),{x:E,y:I,width:j,height:N}}var _,O,E,I,j,N;e.getBarLevelMarkerProp=$?Qv.render.bulletHelpers.getLevelMarkerParams:null;var F,V=D.disabled,W=g.dataObject.updateSeriesdatabyCategories(R(t),ae,ie,P,!0);if(z&&(W=W.slice(0).reverse(),oe=oe.slice(0).reverse()),g.renderVisiblePointsOnly&&(W=c.filterPointsInViewport(g,W,"bar","x",m,u)),e.seriesdataAfterUpdate[u]=W,null!=o){F=R(t);for(var G=o.count,Z=0;Z<=G;Z++)F.splice(Z,0,[null,null]);if(s){var K=v(T.getX(t[0])),re={name:"rect",id:g.id,x:K,y:0,width:g.plotarea.width,height:g.plotarea.height},ue={chartObj:g},he=tb.get(tb.svg_clips,"rect",re,ue);le.attr("clip-path","url("+H+"#"+he+")")}}var fe=null!=o?F:e.seriesdataAfterUpdate[u];se=ge==qb||s?l:l/(fe.length*q);var Oe=ce&&!0===ce.enabled&&(y&&0<q||!V)&&!g.dataObject.isStackedPercentChart&&(!y||!!g.dataObject.getEncode("stack",xe)),Ae=(y?f:le).selectAll(y?"g.levelMarkerSeries_"+xe:"g.subseries_levelMarker_"+u).data(function(e){return Oe?[e]:[]});(y?le:f).selectAll(y?"g.subseries_levelMarker_"+u:"g.levelMarkerSeries_"+xe).remove(),Ae.exit().selectAll("path.levelMarker").transition().duration(ve).attr("d",function(t,n){if($){var r=Ot(fg(this).attr("d")),i=r[0].moves[0],o=r[3].moves[1],l=Qv.render.bulletHelpers.getLevelMarkerParams(t,u,n,e,ye);return wt(l.x||i,l.y+(C?0:l.height*(M?-1:1))||o,C?0:l.width,C?l.height:0,Te,M,C)}return wt(e.getParamValue("x",t,u,n,ye)||Ot(fg(this).attr("d"))[0].moves[0],a(a.domain()[0]),C?0:e.getParamValue("width",t,u,n,ye),C?e.getParamValue("height",t,u,n,ye):0,Te,M,C)}).remove();var Me=le.selectAll("g.subseries_"+u).data(function(e){return V?[]:[e]});Me.exit().selectAll("path.zcbar").transition().duration(ve).attr("d",function(t,n){var r=Ot(fg(this).attr("d")),i=r[0].moves[0],o=r[3].moves[1];return wt(e.getParamValue("x",t,u,n,ye)||i,(C?e.getParamValue("y",t,u,n,ye):ne?e.getParamValue("y",t,u,n,ye,null,0):(y?a(t.y0):null!=A?a(A):null!=a(0)?Qy(a(0),a.range()[0]):a.range()[0])+2*be())||o,C?0:e.getParamValue("width",t,u,n,ye),C?e.getParamValue("height",t,u,n,ye):0,Te,M,C)}).remove();var je=Me.enter().append("g").merge(Me).attr("class","subseries_"+u);if(J){var He=mt(y?f:le,"g",y||!V?[1]:[],".","class","connectorLines",null);My.waterfallHelpers.drawConnectorLines(He,fe,{chart:g,yaxiscolumnorder:P,axisrotated:C,stacked:y,xscale:v,yscale:a,renderer:e,seriesindex:u,plotoptions:B,commonPlotOptions:k});var Be=mt(y?f:le,"g",y||!V?[1]:[],".","class","comparisonLines",null);My.waterfallHelpers.drawComparisonLine(Be,fe,{chart:g,yaxiscolumnorder:P,axisrotated:C,stacked:y,xscale:v,yscale:a,renderer:e,seriesindex:u,plotoptions:B,commonPlotOptions:k})}var Ne=$?Ae.enter().append("g").merge(Ae):Ae.enter().insert("g",":first-child").merge(Ae);Ne.attr("class",y?"levelMarkerSeries_"+xe:"subseries_levelMarker_"+u),Oe&&y&&ae.length!=fe.length&&Qv.render.bulletHelpers.addDummyDataForLevelmarker(fe,ae,T,P);var Fe=Ne.selectAll("path.levelMarker").data(fe,function(e){return $?e:T.getX(e)}),Ve=Fe.enter().append("path").merge(Fe).attr("class","levelMarker");Ve.styles({fill:function(t,n){if($)return ce.color||h(t,n);if(!Qv.render.bulletHelpers.ZC_BAR_getLevelMarkerRect||!Qv.render.bulletHelpers.getBulletLevelMarkerGradient)throw"Level marker or bullet module was not loaded";var r=h(t,n),a=te(ce.color)?ce.color[0]:ce.color;if(X){var i=$?Qv.render.bulletHelpers.getLevelMarkerParams(t,u,n,e,ye):Qv.render.bulletHelpers.ZC_BAR_getLevelMarkerRect(t,ce,g,ye,p,u,m),o=i.x,l=i.y,s=i.width,c=i.height;a=De(de?d(t,n):x,null,null,a,null,null,{x:o,y:l,width:s,height:c})}return Qv.render.bulletHelpers.getBulletLevelMarkerGradient(t,ce,g,r,ke)||a||r},"fill-opacity":ce?ce.fillOpacity:null}).attr("d",function(t,n){var r=$?Qv.render.bulletHelpers.getLevelMarkerParams(t,u,n,e,ye):Qv.render.bulletHelpers.ZC_BAR_getLevelMarkerRect(t,ce,g,ye,p,u,m),a=r.x,i=r.y,o=r.width,l=r.height;return $?wt(a,i,o,l,ze,M,C):C?wt(i,a,o,l,Te,M,C):wt(a,i,o,l,Te,M,C)}),Fc(Ve,g,Y),L.hierarchical&&(Ve.attr("levelbycolumn",function(e,t){return e.levelByColumn}),L.pivot&&Ve.attr("levelbyrow",function(e,t){return e.levelByRow})),ce&&(ce.color=ke),Fe.exit().remove(),Q?(My.ganttHelpers.addMarker(Ce,fe,e,u,we,de,""),gw.get("bullet").call(g,we,e,fe)):$?(My.ganttHelpers.addMarker(Ce,fe,e,u,we.start,de,0),My.ganttHelpers.addMarker(Ce,fe,e,u,we.end,de,1)):ee&&(My.ganttHelpers.addMarker(Ce,fe,e,m,we,de,""),My.ganttHelpers.addMarker(Se,fe,e,m,_e,de,0),My.ganttHelpers.addMarker(Se,fe,e,m,_e,de,1));var We=je.selectAll("path.zcbar").attr("class","zcbar").data(fe,function(e){return $?e:T.getX(e)}),Ye=We.enter().append("path").style("fill-opacity",U("fillOpacity")).attrs({class:"zcbar",height:0,d:function(e,t){var o=function(e){var t=T.getX(e);return _=y?n(t):n(t)+r(i+u),O=a.bandwidth?a.origRange[0]:C?null!=A?a(A):a.range()[0]:y?null!=A?a(A):a.range()[0]:null!=A?a(A):null!=a(0)?Qy(a(0),a.range()[0]):a.range()[0],O=J?a(e.y0):O,{x:_,y:O,width:C?0:me,height:C?me:0}}(e);return fg(this).attr("y",o.y),C?wt(o.y,o.x,o.width,o.height,Pe,M,C):wt(o.x,o.y,o.width,o.height,Pe,M,C)}}).merge(We);if(Fc(Ye.attrs({stroke:function(e,t){return Re(de?d(e,t):x,e,Le||S)},"stroke-width":Ee,"stroke-dasharray":Ie}).styles({fill:function(t,n){return X?De(de?d(t,n):x,t,null,null,null,null,{x:e.getParamValue("x",t,u,n,ye),y:e.getParamValue("y",t,u,n,ye),width:e.getParamValue("width",t,u,n,ye),height:e.getParamValue("height",t,u,n,ye)}):De(de?d(t,Hm(t.sortedItemIndex,n)):x,t,null,S)},"fill-opacity":U("fillOpacity"),transition:"opacity ease 0.2s"}),g,Y),L.hierarchical&&(Ye.attr("levelbycolumn",function(e,t){return e.levelByColumn}),L.pivot&&Ye.attr("levelbyrow",function(e,t){return e.levelByRow})),null==o?Ye.transition().duration(s?se:0).delay(function(e,t){return ge==qb||s?0:(t*q+m)*se}).attr("d",function(t,n){var r=fg(this),a=parseFloat(r.attr("height"));return E=C&&!ne?parseFloat(r.attr("y")):e.getParamValue("x",t,u,n,ye),I=C?e.getParamValue("y",t,u,n,ye):ne&&!a?e.getParamValue("y",t,u,n,ye,null,0):parseFloat(r.attr("y")),j=C?parseFloat(r.attr("height")):e.getParamValue("width",t,u,n,ye),N=C?e.getParamValue("height",t,u,n,ye):a,wt(E,I,j,N,Te,M,C)}).on("end",function(e,t){fg(this).transition().delay(function(e,n){return ge==qb||s?0:(t*q+m)*se}).duration(se).ease(pe).attr("d",function(e){var n=w(e,t);return isNaN(n.x)||isNaN(n.y)?(n.x=-1,null):wt(n.x,n.y,n.width,n.height,Te,M,C)})}).attrs({y:function(t,n){return e.getParamValue(C?"x":"y",t,u,n,ye)},height:function(t,n){return e.getParamValue(C?"width":"height",t,u,n,ye)}}):Ye.transition().duration(s?se:0).attrs({d:function(e,t){var n=w(e,t);return wt(n.x,n.y,n.width,n.height,Te,M,C)},y:function(t,n){return e.getParamValue(C?"x":"y",t,u,n,ye)},height:function(t,n){return e.getParamValue(C?"width":"height",t,u,n,ye)}}),We.exit().transition().duration(se).remove(),0<u&&y){var Ue=mt(le,"g",V?[]:[1],".","class","subdividerseries_"+u).selectAll("rect").data(fe,function(e){return T.getX(e)}),Ge=Ue.enter().append("rect").merge(Ue).styles({fill:"white",opacity:.7,"shape-rendering":"crispedges"}).attrs({width:b("width"),height:b("height"),x:function(e,t){return b("x",e,u,t,ye)},y:function(e,t){return b("y",e,u,t,ye)}});Ge.transition().duration(se).ease(pe).styles({fill:"white",opacity:.7,"shape-rendering":"crispedges"}).attrs({width:b("width"),height:b("height"),x:function(e,t){return b("x",e,u,t,ye)},y:function(e,t){return b("y",e,u,t,ye)}}),Ge.exit().remove()}$&&My.ganttHelpers.showDependencies(e,fe,le,u),e.getMarkerPosition=$?My.ganttHelpers.getMarkerPosition:null}),ee){var je=g.dataset.getColumnIdx("y",P),He=we.columnindex,Be=_e.columnindex,Ne=g.datalabels.renderer,Fe=Ne?Ne[m]:{},Ve=[];if(Fe&&Fe.show){var We,Ye=Fe.labeltype;if("Map"==Ye.constructor.name){var Ue=Ye.get("val");Ue&&1==Ue.length?(We=Ue[0])==He?Ve.push(We):We==Be||We==je?Ve.push(We,We):Ve.push("others"):Ve.push("others")}else"y"==Ye?Ve.push(je,je):Ve.push("others");Ve.map(function(t,n){var r=t==He||"others"==t?null:n%2,a="others"==t?null:t;O.push({renderer:e,charttype:"bar",chartObj:g,rendererIndex:w,paneid:V,args:[D,m,0,r,a]})})}}else O.push({renderer:e,charttype:"bar",chartObj:g,rendererIndex:w,paneid:V,args:[D,x,null,null,null,w]})}else e.chartRendered=s=!0}),e.renderedTimer=setTimeout(function(){e.chartRendered=s=!0},2*l+10),e}var t,n,r,a,i,o,l,s=!1,c=Gt.helpers;return e.getHighlighter=function(t,n,r){if(!e.highlighter){var a=r||ln(t,null,n).name,i="gantt"==a,o="boxplot"==a;e.highlighter="bullet"==a?new Wf(t,e):i?new Yf(t,e):o?new Uf(t,e):new Vf(t,e)}return e.highlighter},e.commonRendererProp=function(n){return arguments.length?(t=n,e):t},e.bandwidth1=function(t){return arguments.length?(n=t,e):n},e.bandwidth2=function(t){return arguments.length?(r=t,e):r},e.barDatasetIndex=function(t){return arguments.length?(i=t,e):i},e.shiftInfo=function(t){return arguments.length?(o=t,e):o},e},et.boxplot=function(){return{outerPadding:.04,fillOpacity:.9,maxBandWidth:200,multiColoring:!1,border:{show:!1,size:null,style:"solid",radius:0,color:null},whiskers:{enabled:!0,columnindex:3,dataindex:3,size:"50%",color:"#d8d8d8",opacity:.9,strokeWidth:1},median:{enabled:!0,dataindex:2,columnindex:2,color:"#d8d8d8",opacity:.9,strokeWidth:1},datalabels:{showAs:"y"},animation:{type:"verticalAll"},gradients:{options:{linear:{y2:50}}}}},Gt.prototype.overBubbles=function(e,t,n){var r=this.domainCorrections,a=this.xaxisData,i=this.yaxesData,o=this.chartObj,l=t+(Z(n)?n:""),s=o.plotarea.height,c=this.chartObj;if(Z(r.forBubbles[l])&&r.plotHeight===s)return r.forBubbles[l];r.plotHeight=s;var u="x"===t,d=c.axes[t].orient,h=0,f=c.plotarea["left"===d?"height":"width"],p=[h,f],g=u?a:i[n],v=ro(c.dataset,t,n)().domain(e).range(p),y=this.updateMinMaxForBubble(p,v,t,n);return h=Z(g.minRange)?h:v.invert(y[0]),f=Z(g.maxRange)?f:v.invert(y[1]),r.forBubbles[l]=[e[0]-h,f-e[1]],r.forBubbles[l]},Gt.prototype.updateMinMaxForBubble=function(e,t,n,r){var a=this,i=(a.processedseriesData,a.dataset),o=(a.chartObj,Gt.helpers),l=e[0],s=e[1],c="x"==n,u=a.getEncode(n,r);return u?(u.seriesData.forEach(function(e,n){var u=e.data,d=e.disabled,h=o.getParsedYAxisOrder(e.yaxiscolumnorder);if(!d){var f=o.isCatNull(i,"x"),p=o.isCatNull(i,"y",h);u.forEach(function(e){e.forEach(function(e){var n=c?i.getX(e):i.getY(e,r);if(e&&!e.isDummy&&!f(i.getX(e))&&!p(i.getY(e,h))){var o=a.getXYvalue(null,null,null,null,null,e,"z"),u=t(n)+(null!=t.bandwidth?t.bandwidth()/2:0),d=u+o/2,g=u-o/2;s<d&&(s=d),g<l&&(l=g)}})})}}),[l,s]):e};var k_=Gt.prototype.processBubblePieData=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=t.chartType||Kv.bubblepie,r=t.keyAccessor||cw.getKey,a=t.dataIndex,i=this,o=e||i.processedseriesData,l=i.chartObj,s=i.dataset,c=i.data.chart.plot.plotoptions[Ay.get(n)],u=Hm(a,U(c&&c.dataindex,3)),d=[],h=[],f={x:vm,y:[]},p=Rm(l.userdata,"chart.axes.xaxis.categories");return s.getDataType("x")==ox&&p&&p.length&&!rn(l)&&(f.x=p),o.forEach(function(e,t){var n=Gt.helpers.getParsedYAxisOrder(e.yaxiscolumnorder),a=Rm(l.userdata,"chart.axes.yaxis["+n+"].categories"),c=s.getDataType("y",n)==ox&&a&&a.length&&!rn(l),u=ln(l,e.row+"_"+e.column,t).value;c&&(f.y[n]=a),e.data.forEach(function(e,a){e.forEach(function(e){var c=function(e,t,n){var r=o[t],a=Gt.helpers.getParsedYAxisOrder(r.yaxiscolumnorder),c=r.disabled||!(nr(n)||!Re(Py.axis,n)),u=s.getX(e),d=s.getY(e,a);return f.x&&(c=c||-1===f.x.indexOf(u)),f.y[a]&&(c=c||-1===f.y[a].indexOf(d)),l.isGeoMap&&!c&&(c=!i.isValidPoint(e)),c}(e,t,u);if(h[a]=h[a]||[],d[a]=d[a]||[],!c){var p=r(e,t,l),g=h[a].indexOf(p);-1===g&&(g=h[a].length,d[a][g]=function(e,t){var n=[];return n.x=s.getX(e),n.y=s.getY(e,t),n.z=s.getZ(e),n.reference=e,n}(e,n)),d[a][g][t]=e,h[a].push(p)}e.disabled=e.dummy=c}),d[a]=d[a]||[]})}),d.forEach(function(e){e.forEach(function(e){o.forEach(function(t,n){e[n]||(e[n]=function(e,t){var n=Gt.helpers.getParsedYAxisOrder(o[t].yaxiscolumnorder),r=l.dataset,a=[];return a[r.xidx]=e.x,k(r.yidx)&&(a[r.yidx(n)]=e.y),a[r.zidx]=e.z,a[u]=null,a.dummy=!0,a}(e,n))})})}),d};km.setComponent("size.isWithinSizeEncode",function(e,t){var n=Se(t.scales,function(e){return"z-0"===e.id}),r=n.scale,a=n.config,i=n.schema.data,o=i.dataType,l=i.meta,s=a.nullAs;return mn(t.dataset.getZ(e),"z",t,r,a,{condition:function(e){return!B(e)||Z(s)||o===ox&&H(l[l.datatype],"nullformatting")}})});var __=km.getComponent("annotation");My.pie=function(){function e(i){return i.each(function(i){function o(e){return e.data.disabled||e.startAngle===e.endAngle||!e.value?fm:vm}function l(){fg(this).style("display",o)}function s(e,t){var n=te(e,t);x.eventHandler.handlers.mousemove.call(x.eventHandler,n),Qf(e,n),x.cache.search.lastPane=E}function c(e,t){var n=te(e,t);x.eventHandler.handlers.mouseout.call(x.eventHandler,n),Qf(e,n),x.cache.search.lastPane=null}function u(t,n){var r=te(t,n);x.eventHandler.handlers.click.call(x.eventHandler,r,e,0,n,t),Qf(t,r),x.cache.search.lastPane=E}function M(e,t){var n=__._empty?e.data:Xo(e.data,vm),r=z.centroid(e);r=[r[0]+W,r[1]+G];var a=te(e,t);a.coordinate=r,a.basedOn="plot",a.data=n,x.eventHandler.handlers.doubleclick.call(x.eventHandler,a,t,a),Qf(e,a),x.cache.search.lastPane=E}function te(t,n){var r=Xn(Hv());return{renderer:e,seriesIndex:jn(x)?n:0,subSeriesIndex:0,itemIndex:n,paneid:E,rendererIndex:ce,color:_[n%_.length],coordinates:[r.pageX,r.pageY],element:this,data:t,selected:t.selected,_key:Gt.helpers.generatePointKey(x.id,E,0,0,n)}}var ne=b.params;x=ne.chartObj,I=ne.commonPlotOptions,_=ne.color,D=ne.notesArray,x.systemConf;var re=ne.labelQueue,ae=ne.yaxiscolumnorder,ie=ne.dataset,oe=ne.datasetIndex||0,le=ne.bound,se=ne.rendererIndex,ce=void 0===se?oe:se,ue=x.defsLocation,de=I.maxRadius+" _ "+I.outerPadding+" _ "+I.innerRadius;E=rn(x)?Y([i,i[oe]],"row")+"_"+Y([i,i[oe]],"column"):null;var he=ln(x,E,oe).name,fe=he===Tb,pe=!(R=he===Eb)&&!fe,ge=pe||rn(x)&&jn(x)?i:i[oe];Q=pe?U(I.dataindex,3):ie.yidx(ae),q=R?_extends({},x.plotarea_approx,le&&le.polar):_extends({},le,X),P=q.width,A=q.height,w=U(q.radius,Qy(P,A)/2),f=!1;var ve,ye=ge.plotoptions,me=I.datalabels,be=zm.getValueOfPlotOptions(ye,I),xe=U(be("maxRadius"),250),we=I.levelMarker,Ce=fe?+be("outerPadding"):0,ke=be("strokeWidth"),_e=be("cornerRadius")||0,Se=be("padAngle")||0;rn(x)&&w<Ce&&(Ce=0),m=void 0!==I.baseValue?I.baseValue:0;var Oe=x.datalabels.moduleExists&&Pi(me,x),Ae=Oe?+(me.padding||0)+(vi(me,x)?2*(yi(me,x)+mi(me,x)):0):0,Pe={},Te=0;if(p=x.datalabels.moduleExists&&vi(me,x),j=Qy(xe,w-(Ce+=fe?Ae:0)),fe&&Oe){var Ee=P*K,Le=P-2*j;Le<Ee&&(Ae=Pe.padding=5,Te=qy(Ee-Le,0),j-=Te/2)}if(C=ns(I,j),ke=U(ke,1),R&&we.enabled){var Me,ze;if(Z(I.bandWidth)||Z(I.maxBandWidth)){var De=U(I.maxBandWidth,j),Re=Qy(Ie(I.bandWidth,j,j-C),De);ze=Me=-(j-C-Re)/2,ve=0===Re?"hidden":vm}else Me=Qy(0,Ie(we.innerPadding,w,0)),ze=Qy(0,Ie(we.outerPadding,w,0));j+=ze,C-=Me}H=qy(C,j-=.5*ke),V=(ye&&ye.models?Im(I.models,ye.models,!0):I.models)||{};var je=ei(I,ye,x,he),He=je.enabled?ee?200:je.duration:0,Be=ee?xg:je.easingType,Ne=je.type,Fe=0==U(Gn(ye,I,x,"enabled"),!0),Ve=Fe?vm:Gn(ye,I,x,"cursor")||gm;S=fg(this),(O=mt(S,"g",[i],".","class","piegroup")).styles({"stroke-width":ke,"fill-opacity":be("fillOpacity"),"stroke-opacity":I.strokeOpacity,cursor:Ve,visibility:ve}),$.startAngle(I.startAngle).endAngle(I.endAngle).value(function(e){return e.disabled?0:Ky(e[Q]||0)});var We=$(i=pe||rn(x)&&jn(x)?i:ge.data[0]);N=(e.data=We).reduce(function(e,t,n){return e+(t.value?1:0)},0),e.total=k=We.reduce(function(e,t,n){return e+t.value},0),(e.arc=J).outerRadius(H).innerRadius(C),z=qg().innerRadius(H).outerRadius(H+Ae);var Ye=qg().innerRadius(H).outerRadius(H);B=ke;var Ue=a(O),Ge=(Ue.height+ke)/j,Xe=(Ue.width+ke)/j,Ze=j+Qy((P-2*Ce-Te-(Ue.width+ke))/Xe,(A-2*Ce-Te-(Ue.height+ke))/Ge);if(Ze=Qy(xe,qy(j,Ze)),R){de+=" _ "+I.bandWidth+" _ "+we.bandWidth+" _ "+we.innerPadding+" _ "+we.outerPadding;var qe=ne.yscale||x.axes.y.groups[0].scale,Qe=qe.domain();We.forEach(function(e){var t=e.data[Q];h=d,(d=t<0)?(e.startAngle=qe(m!=vm?Math.min(m,Qe[1]):Qe[1]),e.endAngle=qe(Math.max(t,Qe[0]))):(e.startAngle=qe(m!=vm?Math.max(m,Qe[0]):Qe[0]),e.endAngle=qe(Math.min(e.value,Qe[1])))})}else Ze!=j&&(C=ns(I,j=Ze),H=qy(C,j),J.outerRadius(H).innerRadius(C),z=qg().innerRadius(H).outerRadius(H+Ae),Ye=qg().innerRadius(H).outerRadius(H),a(O));J.cornerRadius(_e).padAngle(Se);var Ke=!R&&V.type?"url("+ue+"#"+function(e){var t={name:"pieModels",id:x.id,d:e},n={chartObj:x};return tb.get(tb.svg_clips,"polygon",t,n)}(function(){var e=-1,t=V.count,n="zigzag"==V.type?C/5-50:"sun"==V.type?-1:-10,r=function(e){for(var t=[],n=[],r=0,a=0;a<e;a++)"gear1"==V.type?n.push([r++,0],[r++,1],[r++,1]):n.push([r,0],[r++,1],[r,1],[r++,0]);return t.push(n),t}(t),a=kg().range([0,2*sm]).domain([0,"gear1"==V.type?3*t:2*t]),i=kg().range([C,H]).domain([n,1]);return Gg().curve(wg("linearClosed")).radius(function(e){return i(e[1])}).angle(function(t,n){return e="gear"==V.type?n%2==0?e+1:e:"gear1"!=V.type&&n%2!=0?e+1:e,a("gear1"==V.type?e++:e)})(r[0])}())+")":vm,$e=[H,H],Je=e.fillColorFunc=Sn(x,oe,E,$e),et=An(x,oe,E);if(F=2*Ie(be("sliceOutHeight"),j,0),L=O.selectAll(Um).data(),ii(T=mt(O,Um,We)),T.attrs({"clip-path":Ke,class:"zc_pie",id:function(e,t){return"arc_"+t}}).styles({display:function(e){var t=fg(this).style("display"),n=o(e);return!ee||t===fm&&n===fm||!yn(e,x,oe)?n:vm},fill:function(e,t){return rn(x)?Sn(x,t,E,$e)(t,e.data):Je(t,e.data,null)},stroke:function(e,t){return rn(x)?An(x,t,E)(t,e.data,I.strokeColor):et(t,e.data,I.strokeColor)}}),Hc(T,x,"pie"),Fc(T,x,"pie"),or(x,T,Fe,E),x.cache.search||(x.cache.search={}),Fe||Mr(T,{mousemove:s,mouseout:c,click:u,dblclick:M},{singletouchmove:s,touchend:c,tap:u,dbltap:M},{target:"plot",touchleave:!0,chartObj:x}),/(\D)+onebyone/.test(Ne)&&!ee){var tt="fanonebyone"==Ne,nt=tt?He:He/N,rt=0;T.transition().ease(Be).duration(function(e){return tt?nt*(e.value/k):nt}).delay(function(e){var t=nt*rt;return rt+=tt?e.value/k:1,t}).call(tt?n:t).on("end",l)}else{var at;at=ee?de!=g?t:r:"fanAll"==Ne?r:"inner"==Ne?t:n,T.transition().duration(He).ease(Be).call(at).on("end",l)}e.renderedTimer=setTimeout(function(){if(g=de,v=C,y=H,R)x.renderer[ce].endFunctions();else if(Dy&&!pe){var t=jn(x)?[W+q.translate[0],G+q.translate[1]]:[W,G],n=[O.datum(),0,We,H,k,z,Ye,J,t,Pe,e.subSeriesIndex||0];re.push({renderer:e,charttype:Tb,chartObj:x,rendererIndex:ce,paneid:Hm(E,oe),args:n}),re.push({renderer:e,charttype:"pieInnerLabels",chartObj:x,rendererIndex:ce,paneid:Hm(E,oe),args:n})}var r=x.systemConf.notes;Z(r)&&r.enabled&&!pe&&!__._empty&&(D=__.preprocessAnnotations(x.seriesdata,0,function(e,t,n){var r=z.centroid(We[n]);return[r[0]+W,r[1]+G]},D,x,ne)),ee=e.chartRendered=!0,jn(x)&&x.renderer[ce].endFunctions()},He+1e3/60)}),e}function t(e){qf(e,J,[ee?v:C,C],[ee?y:C,H])}function n(e){e.attrTween("d",function(e,t){var n=tv(e.startAngle,e.endAngle);return function(t){return e.endAngle=n(t),J(e)}})}function r(e){e.attrTween("d",function(e,t){var n,r,a=L[t]||L[L.length-1];r=d?(n=ee&&a&&h?a.endAngle:e.startAngle,ee&&a&&h?a.startAngle:e.startAngle):(n=ee&&a&&!h?a.endAngle:R?e.startAngle:I.startAngle,ee&&a&&!h?L[t]?a.startAngle:a.endAngle:R?e.startAngle:I.startAngle);var i=tv(n,e.endAngle),o=tv(r,e.startAngle);return function(n){return e.endAngle=i(n)||0,e.startAngle=o(n)||0,J(e,t)}})}function a(t){var n=[];n[Q]=1;var r=S.append(Um).attr("d",J($([n])[0],e.data.length-1)).styles({fill:fm,stroke:fm}),a=M(r.node());r.remove();var i=$l(a,P,A,j,B);return W=R?q.x:i[0],G=R?q.y:i[1],t.attr("transform",function(e,t){return"translate("+W+","+G+")"}),a}function i(t){var n=0<arguments.length&&void 0!==t?t:0,r=e.subSeriesIndex||0,a=rn(x)?x.staticPaneSVG.selectAll("g.grid"+E):x.staticPaneSVG;o=o||a.selectAll("g."+Ux+"_"+n+" g.subseries_"+r),l=l||a.selectAll("g.link_"+n+" g.subseries_"+r),s=s||a.selectAll("g.label_"+n+" g.subseries_"+r),u=u||a.selectAll("g.boundboxseries_"+n+" g.subseries_"+r),c=c||a.selectAll("g.innerboundboxseries_"+n+" g.subseries_"+r),f=!0}var o,l,s,c,u,d,h,f,p,g,v,y,m,b,x,w,C,k,_,S,O,A,P,T,E,L,z,I,D,R,j,H,B,N,F,V,W,G,X,q,Q,K=.3,$=$g().sort(vm),J=qg(),ee=!1;return e.commonRendererProp=function(t){return arguments.length?(b=t,e):b},e.plotarea=function(t){return arguments.length?(X=t,e):X||q},e.innerRadius=function(t){return arguments.length?(C=t,e):C},e.defaultMouseOverFunc=function(t,n,r){if(1!=N){f||i(b.params.rendererIndex);var a=function(e){return Ql(F,(e.startAngle+e.endAngle)/2)}(t),d=e.subSeriesIndex||0,h={transform:"translate("+a[0]+","+a[1]+")"};T.transition().ease(xg).attr("transform","translate(0,0)"),O.selectAll("#arc_"+r).transition().ease(xg).attrs(h),o.selectAll("#innerlbl0_"+d+"_"+r).transition().ease(xg).attrs(h),p||l.selectAll("#link0_"+d+"_"+r).style("stroke-width",3*e.lineStrokeWidth),"circular"==e.showlabel&&(s.selectAll("#lbl0_"+d+"_"+r).transition().ease(xg).attrs(h),u.selectAll("#boundboxlbl0_"+d+"_"+r).transition().ease(xg).attrs(h)),s.selectAll("#lbl0_"+d+"_"+r).style("text-shadow","0 0 0 rgba(0,0,0,1)"),c.selectAll("#boundboxinnerlbl0_"+d+"_"+r).transition().ease(xg).attrs(h)}},e.defaultMouseOutFunc=function(t,n,r){f||i(b.params.rendererIndex);var a={transform:"translate(0,0)"};return s.selectAll(Wm).style("text-shadow",vm),p||l.selectAll(Um).style("stroke-width",e.lineStrokeWidth),!Qm.clickedTime&&r?(T.attrs(a),o.selectAll(Wm).attrs(a),c.selectAll(Um).attrs(a),void("circular"==e.showlabel&&(s.selectAll(Wm).attrs(a),u.selectAll(Um).attrs(a)))):(T.transition().ease(xg).attrs(a),o.selectAll(Wm).transition().ease(xg).attrs(a),"circular"==e.showlabel&&(s.selectAll(Wm).transition().ease(xg).attrs(a),u.selectAll(Um).transition().ease(xg).attrs(a)),c.selectAll(Um).transition().ease(xg).attrs(a),void 0)},e};var S_=My.pie;km.setComponent("svgRenderer.pie",S_),et.pie=function(e){var t={startAngle:0,endAngle:2*sm,innerRadius:0,outerPadding:10,datalabels:{type:"circular",padding:5,line:{strokeColor:"grey",strokeWidth:.3},innerLabel:{show:!1,showAs:"percent"}},animation:{type:"fanAll"},gradients:{options:{linear:{x2:15,spreadMethod:"repeat",gradientUnits:"userSpaceOnUse"},radial:{radius:90}}},models:{count:50}};return"bubblepie"===e||"geobubblepie"===e?(t.strokeColor="transparent",t.outerPadding=.02,t.datalabels.showAs="percent",t.hoveroptions={innerFillColor:"transparent",innerStrokeColor:"transparent",outerFillColor:"transparent",outerStrokeWidth:3}):(t.strokeColor="white",t.sliceOutHeight=5,t.maxRadius=250,t.datalabels.showAs="x"),t};var O_=kg(),A_=Og(),P_=(_inherits($f,mw),_createClass($f,[{key:"init",value:function(){function e(e){return function(t){var n=t[e];return n=vn(n,s)}}_get($f.prototype.__proto__||Object.getPrototypeOf($f.prototype),"init",this).call(this),this.d3_scale.clamp=!0;var t=this.getConfig(),n=t.base,r=this.chartObj,a=this.schema.domain,i=a.ranges,o=this.schema;i&&i._dummy&&(a.ranges=null),this.schema.data.dataType===sx&&(r.isGeoMap||(this.schema.domain.base=n!==Ey?n:0),r.systemConf.legend.singleLayout&&(o.data.source=function(){return r.dataObject.getMinMaxZ()},o.data.condition=null,o.domain.key=[0,1]));var l=o.domain.key,s={config:t,columnKey:r.dataset.getColumnIdx("z")};o.domain.key=te(l)?l.map(e):e(l)}},{key:"create",value:function(){var e=_get($f.prototype.__proto__||Object.getPrototypeOf($f.prototype),"create",this).call(this),t=this.config,n=this.schema,r=function(e,t,n,r){var a=t.data,i=a.dataType,o=a.meta,l=t.domain,s=l.ranges,c=l.stops,u=e.ranges,d=function(e){var t=e.datatype;return(e[t]||{}).subfunction}(o),h=n.domain();if(r===fx&&!s&&i!==ox){var f=u&&u._cache;if(f&&f.subFunction===d&&re(f.domain)===re(h))return u;var p=pd(e,n,r),g=c?h:fd(n,i,p+1,d),v=1===g.length?[[g[0],g[0]]]:yg(g);return v._dummy=!0,v._cache={subFunction:d,domain:h},u&&re(u)===re(v)&&u.forEach(function(e,t){return v[t].disabled=e.disabled}),v}}(t,n,e,Gu("z",this));return r&&(t.ranges=r,n.domain.ranges=r,e=_get($f.prototype.__proto__||Object.getPrototypeOf($f.prototype),"create",this).call(this)),this.scale=e}},{key:"parseRange",value:function(e){function t(e){return Ie(e,r)}var n=this.chartObj,r=function(e){if(Jf(e))return 1;var t=e.plotarea;return Qy(t.width,t.height)}(n),a=this.getConfig(),i=a.sizes,o=this.schema.domain,l=this.d3_scale.domain,s=this.schema.data.dataType,c=o.ranges,u=Dr(a,n.chartarea,e);if(i)return(i=V(i,n,u,this)).map(t);var d=function(e,t,n,r){if(r.systemConf.legend.singleLayout)return e;var a=n.getConfig(),i=a.minSize,o=a.maxSize,l=a.title,s=Gu("z",n),c=qC("z",s),u=t.maxWidth,d=t.maxHeight,h=a[s]||{},f=Hm(h.padding,3),p=r.systemConf.canvas,g=xr(a).layout===cb;if(!Cr(a,r,"z")||c===bm)return e;if(c.adjustFactor){if(l.show){var v=xe(Hm(l.margin,3));l.keepAligned&&g||(d-=ws([l,p,Qm])+v.top+v.bottom)}var y=c.adjustFactor(a,u,d,p,e);u-=y[0],d-=y[1]}var m=Qy(u,d)-2*f,b=qy(m,20),x=qy(.1*m,5);return e[1]>m&&(B(o)&&(e[1]=b),B(i)&&(e[0]=x)),e[0]>e[1]&&(B(o)&&(e[1]=e[0]),B(i)&&(e[0]=e[1])),e}(function(e,t,n,r){var a=function(e){return Jf(e)?["25%","100%"]:e.systemConf.legend.singleLayout?["2.5%","25%"]:["2%","20%"]}(t),i=V(e.minSize,t,r,n),o=V(e.maxSize,t,r,n);return[Hm(i,a[0]),Hm(o,a[1])]}(a,n,this,u).map(t),u,this,n);if(c||s===ox){var h=c||l;return A_.domain(h).range(d),h.map(function(e){return A_(e)})}var f=[l[0],l[l.length-1]],p=d[0]+(d[1]-d[0])/2;return O_.domain(f).range(f[0]==f[1]?[p,p]:d),l.map(function(e){return O_(e)})}}]),$f);km.setComponent("sizeScale",P_),et.bullet=function(e){return{strictBandWidth:!0,outerPadding:1e-8,levelMarker:{enabled:!0,dataindex:2,color:[],colorGamma:[.3,.9],fillOpacity:.9,maxBandWidth:200},targetMarker:{enabled:!0,dataindex:3,symbol:"line",innerFillColor:"transparent",innerStrokeColor:"transparent",innerStrokeWidth:0,innerStrokeOpacity:0,outerFillColor:"rgba(0, 0, 0, 0.6)",outerStrokeOpacity:1,outerStrokeWidth:5,outerStrokeColor:"rgba(0, 0, 0, 0.6)",label:{fontSize:e.datalabels.fontSize.l5}},animation:{type:"verticalAll"},datalabels:{textOverlap:"none",showAs:"y",stackLabels:{show:!1,showAs:"y"}},gradients:{options:{linear:{y2:50}}},stacked:{enabled:!0}}},et.dial=function(e){return{startAngle:-sm/2,endAngle:sm/2,innerRadius:"65%",maxRadius:500,outerPadding:20,padding:0,strokeColor:"rgba(0,0,0,0.1)",animation:{type:"fanAll"},needle:{show:!0,type:"round",strokeColor:"black",fillColor:"grey",width:15,padding:15},minmaxlabels:{show:!0,fontSize:e.datalabels.fontSize.l5},datalabels:{show:!0,showAs:"y",padding:2},levelMarker:{enabled:!0,strokeColor:"rgba(0,0,0,0.1)",innerPadding:0,outerPadding:0,colorGamma:[.3,.9]},targetMarker:{outerStrokeWidth:3,symbol:"line",innerFillOpacity:0,innerStrokeOpacity:0,outerFillColor:"grey",outerStrokeColor:"#000"},gradients:{options:{linear:{x2:2,y2:2,spreadMethod:"repeat",gradientUnits:"userSpaceOnUse"},radial:{radius:16.5,spreadMethod:"reflect"}}},events:{enabled:!1}}},tC.handleEvents=function(e,t,n,r,a){function i(t,r){y?t[1]:t[n.dataindex];var a=h(t),i=lr(Hv(),{x:0,y:0},0,0,e,{seriesIndex:0,subseriesIndex:0,itemIndex:0});if(w){var o=V(C.tooltipContent,a,e)||(y?"Range: ":"Target: ")+a.formattedValue;e.eventHandler.tooltipElement.show(e,function(){var t=Tr(e.svg.node(),Hv()),n={x:t[0],y:t[1]},r={left:n.x,top:n.y},a=Xn(Hv()),i=n.x-a.clientX,o=n.y-a.clientY;return r.left-=i,r.top-=o,r.dLeft=i,r.dTop=o,r}(),o,!1,i.helpers)}}function o(){if(w){var t=e.eventHandler.tooltipElement;t.hide(t.element)}}function l(t,n){var r=e.eventHandler.tooltipElement;r&&r.timeout&&clearTimeout(r.timeout),!1!==e.stopPropogate&&Hv().stopPropagation();var a=e.zcEventType||"mousemove";d(v,a,Hv(),t),i(t)}function s(t,n){var r=e.zcEventType||"mouseout";d(v,r,Hv(),t),o()}function c(t,n){var a=Hv()&&Hv().touches,l=e.zcEventType||"click",s=A+n+1+("targetmarker"===r?b:0);if(d(v,l,Hv(),t),a&&"taphold"!==l){Cc(e),(new Date).getTime(),e.renderer[0];var c=e.eventHandler.tapOldInfo;c&&c.itemPos==s?(o(),e.eventHandler.tapOldInfo=null):(i(t),e.eventHandler.tapOldInfo={seriesPos:0,subseriesindex:0,itemPos:s,type:r})}}function u(t,n){var r=e.zcEventType||"doubleclick";d(v,r,Hv(),t)}function d(t,n,r,a){return V(C[n],r,h(a),e)}function h(t){var r=y?t[1]:t[n.dataindex];return{value:r,formattedValue:Aa(p,r,g,e),actualData:v,data:f=f||e.dataset.getMetaInfoObj(e,v,0)}}var f,p,g,v=a[0].data[0][0],y="levelmarker"===r,m=e.renderer[0].levelMarker,b=m&&m.values.length,x=e.systemConf.chart.plot.plotoptions.dial,w=e.systemConf.tooltip.enabled,C=n.events||{},k=U(C.enabled,x.events.enabled),_=k?C.cursor||gm:null;if(t.style("cursor",_),k){var S=e.dataset,O=e.userdata.metadata.columns,A=a[0].data[0].length,P=O.filter(function(e){return e.dataindex===n.dataindex}),T=P.length?P[0]:O[S.getColumnIdx("y",0)];g=T.datatype,p=T[g],Mr(t,{mousemove:l,mouseout:s,click:c,dblclick:u},{singletouchmove:l,touchend:s,tap:c,dbltap:u},{target:"plot",touchleave:!0,chartObj:e})}},tC.targetMarker=function(e,t,n,r,a,i){function o(e){var t=e[v.dataindex];if(Z(t)){t=tC.getValueWithinRange(t,p);var n=f(t),r=Ql(S,n),a=ts(n)+x;return"translate("+r[0]+","+r[1]+") rotate("+a+",0,0)"}}function l(e){return Z(e[v.dataindex])?null:fm}var s,c,u=r.systemConf,d=u.chart.plot.plotoptions.dial,h=r.dataset,f=r.axes.y.groups[0].scale,p=f.domain(),g=[a[0].data[0][0]],v=d.targetMarker,y=v.align,m=v.dAlign,b=+(v.padding||0),x=/line/.test(v.symbol)?90:0,w=!/(outer|inner)/g.test(y)&&/line/.test(v.symbol)?(t-n-2*b)/10:1,C=10*U(v.size,w),k={symbolSize:{outer:1,inner:.5},color:r.seriesColor[0],strokeWidth:w},_=m===db?C/2+b:m===ub?-C/2-b:0,S=y===db?t+_:y===ub?n+_:(t+n)/2,O=mt(e,"g",v.enabled?g:[],".","class","targetmarker"),A=mt(e,"g",v.enabled&&i?g:[],".","class","targetmarker-eventhandler");O.attr("transform",o).styles({display:l,"stroke-dasharray":rt(v.dashStyle,U(v.outerStrokeWidth,1)),"stroke-linecap":at(v.lineCap,v.dashStyle)}).each(function(){Nt(fg(this),null,v,k,r)}),s=A,c=v.events&&v.events.triggerOffset||0,k.strokeWidth=(C+2*c)/10,s.attrs({transform:o,class:function(e,t){return"ZCtargetmarker_eventhandler_"+t}}).styles({display:l,opacity:0}).each(function(){var e=fg(this);if(Nt(e,null,v,k,r),"line"===v.symbol){var a=t-n<=C?C:qy(C+c,t-n),i=c||1;e.selectAll("*").attr("d",Bt("rect")(a,i))}}),tC.handleEvents(r,A,v,"targetmarker",a);var P=v.label||{},T=U(P.padding,2),E=y===db?S+C/2+T:y===ub?(m===db?n:S-C/2)-T:t+T,L=mt(e,"text",v.enabled&&Hm(P.enabled,!0)&&!r.renderer[0].firedList.targetSeries?g:[]);kt(L,[P,u.chart,u.canvas,Qm]),L.each(function(e){var t=fg(this);t.style("display",fm);var n=e[v.dataindex];if(Z(n)){if(n=tC.getValueWithinRange(n,p),JSON.parse(d.minmaxlabels.show)&&-1!=p.indexOf(n))return;var a=f(n),i=Kl(a),o=Ql(E,a),l=r.userdata.metadata.columns,s=l.filter(function(e){return e.dataindex===v.dataindex}),c=s.length?s[0]:l[h.getColumnIdx("y",0)],u=c.datatype,g=c[u],m=y===ub?i<0||sm<i?null:"end":i<0||sm<i?"end":null,b=y===ub?sm/2<i&&i<3*sm/2?null:-Jl(i)+"em":sm/2<i&&i<3*sm/2?Jl(i)+"em":null,x=Z(P.text)?h.getCustomizedVal(r,P.text,0,null,null,e,"targetLabel"):Aa(g,n,u,r,"targetLabel");t.text(x).style("display",null).attrs({"text-anchor":m,dy:b,transform:"translate("+o[0]+","+o[1]+")"})}})},My.dial=function(){function e(x){return x.each(function(x){var w=n.params,C=w.bound;r=w.chartObj,i=w.commonPlotOptions,w.color,o=w.dataset,l=w.yaxiscolumnorder,r.systemConf;var k=x[0].plotoptions,_=x[0],S=rn(r)?_.row+"_"+_.column:null;s=o.getY(x[0].data[0][0],l),h=s<0;var O=r.defsLocation,A=w.labelQueue,P=w.rendererIndex;u=w.yscale||r.axes.y.groups[0].scale,d=u.domain(),c=C.polar;var T=ei(i=k?Im(i,k,!0):i,k,r,Eb),E=T.enabled,L=T.easingType,M=m?E?200:0:T.duration,z=fg(this).data(function(e){var t=e[0].data[0];return e[0].data[0]=[t[0]],[e]}(x));z.selectAll(Um+".dial").data();var I=i.levelMarker;v=i.innerRadius+" _ "+i.outerPadding+" _ "+i.maxRadius+" _ "+i.bandWidth+" _ "+I.bandWidth+" _ "+I.innerPadding+" _ "+I.outerPadding;var D,R,j,H=c.radius,B=U(I.strokeWidth,1),N=Hm(I.cornerRadius,i.cornerRadius),F=Hm(I.padAngle,i.padAngle),V=ns(i,H);if(y=qg().endAngle(function(e){return u(e[1])}).cornerRadius(N).padAngle(F),Z(I.bandWidth)||Z(I.maxBandWidth)){var W=U(I.maxBandWidth,H),Y=Math.min(Ie(I.bandWidth,H,H-V),W);j=R=(H-V-Y)/2,D=0===Y?"hidden":null}else R=qy(0,Ie(I.innerPadding,H,0)),j=qy(0,Ie(I.outerPadding,H,0));y.innerRadius(V+R).outerRadius(H-j-.5*B).startAngle(function(e){return u(e[0])});var G=e.levelMarker=tC.createLevelsNColors(x,I,Mn(r,0,S),d),X=G.colors,q=mt(mt(z,"g",[1],".","class","levelmarkerSeries"),Um,I.enabled?G.values:[]);q.attr("class",function(e,t){return"ZClevelmarker_"+t}).attr("transform","translate("+c.x+","+c.y+")").styles({stroke:function(e,t){return I.strokeColor||X[t]},"stroke-width":B,"stroke-opacity":I.strokeOpacity,"fill-opacity":I.fillOpacity,fill:function(e,t){var n=X[t],a=lt(i.gradients,[H,H],n),o=a?tb.get(tb.svg_gradients,"svgGradientFill",a,{offset:"pie",chartObj:r}):null;return o?"url("+O+"#"+o+")":n},visibility:D}),m&&v!=f?q.transition().duration(M).ease(xg).call(function(e){qf(e,y,[g,y.innerRadius()()],[p,y.outerRadius()()])}):q.attr("d",y),tC.handleEvents(r,q,I,"levelmarker",x),n.commonPlotOptions(i),b.commonRendererProp(n),b.chartRendered=!1,z.call(b),a=b.innerRadius();var Q=mt(z,"g",[1],".","class","targetSeries");tC.targetMarker(Q,c.actualRadius,c.innerRadius,r,x,!0),Q.attr("transform","translate("+c.x+","+c.y+")");var K=i.needle;mt(z,Um,K.show?[s]:[],".","class","dial").attr("d",tC.getNeedlePolygon(K,c,a)).styles({stroke:K.strokeColor||"black","stroke-width":K.strokeWidth,fill:K.fillColor||fm}).transition().duration(M).ease(L).call(t),Dy&&A.push({renderer:e,charttype:Eb,chartObj:r,args:[x,0],rendererIndex:P,paneid:Hm(S,0)})}),e}function t(e){var t,n,r,a,o=c.x,l=c.y,s=void 0!==i.baseValue?i.baseValue:0;e.attrTween("transform",function(e,i){a=m?Or(this).rotate:(n=h?d[1]:d[0],null!=s&&(n=h?Qy(s,n):qy(s,n)),ts(u(n))),t=Qy(qy(e,d[0]),d[1]),r=ts(u(t));var c=tv(a,r);return function(e){return"translate("+o+","+l+") rotate("+c(e)+",0,0)"}})}var n,r,a,i,o,l,s,c,u,d,h,f,p,g,v,y,m=!1,b=My.pie();return e.commonRendererProp=function(t){return arguments.length?(n=t,e):n},e.endFunctions=function(){f=v,p=y.outerRadius()(),g=y.innerRadius()(),m=e.chartRendered=!0},e.defaultMouseOutFunc=function(){if(r.systemConf.tooltip.enabled){var e=r.eventHandler.tooltipElement;e.hide(e.element)}},e},et.funnel=function(){return{weighted:"height",split:!1,canOverlap:!0,threeDimension:!0,outerPadding:"2%",stemHeight:"20%",stemWidth:"20%",coneWidth:"100%",strokeColor:"transparent",emptyFunnel:{show:!1,color:"#FAFAFA"},datalabels:{showAs:"x",type:"strokeddoubleside",padding:30,line:{strokeColor:"grey",strokeWidth:.3},innerLabel:{show:!1,showAs:"percent"}},gradients:{options:{linear:{x2:50,spreadMethod:"reflect",colorGamma:[.6,0]}}},animation:{type:"vertical"}}};var T_=km.getComponent("annotation");My.funnel=function(){function e(a){a.each(function(a){function s(e,t){var n=fe(e,t);u.eventHandler.handlers.mousemove.call(u.eventHandler,n),Qf(e,n),u.cache.search.lastPane=ae}function I(e,t){var n=fe(e,t);u.eventHandler.handlers.mouseout.call(u.eventHandler,n,t),Qf(e,n),u.cache.search.lastPane=null}function D(t,n){var r=fe(t,n);u.eventHandler.handlers.click.call(u.eventHandler,r,t,0,n,e),Qf(t,r),u.cache.search.lastPane=ae}function V(e,t){var n=T_._empty?e:Xo(e,null),r=x[a.length-1-t].bottomLeft;r=[r[0]+(m/2-oe.width/2),r[1]+(O+2+X)];var i=fe(e,t);i.coordinate=r,i.basedOn="plot",i.data=n,u.eventHandler.handlers.doubleclick.call(u.eventHandler,i,t,e),Qf(e,i),u.cache.search.lastPane=ae}function le(){e.renderedTimer=setTimeout(function(){var t=function(e){var t=[],n=0,r=0;return e.forEach(function(a,i){var o=e[e.length-1-i],l=y.getY(o,H),s=o.disabled,c=r=(r=(s?0:$||J?l?1/h:0:Ky(l)/b)*(oe.height-(h-1)*oe.gapHeight)/2)||0;r=n+r;var u=l/b;u=u||0;var d=$?j(u):oe.height-r>=f?oe.width/2-v:j(r),p=$?R(u):oe.height-r>=f?oe.width/2+v:R(r);t.push({rightx:p+Y,leftx:d-Y,y:Ky(oe.height-r),y0:Ky(oe.height-r+c)}),r+=c,n=!l||s?r:r+oe.gapHeight}),t}(d);if(Dy){var n=jn(u)?[je+be.translate[0],He+be.translate[1]]:[je,He],r=[u.seriesdata,0,d,h,O+2+X,b,oe,t,e.subSeriesIndex||0,n];pe.push({renderer:e,charttype:Lb,chartObj:u,args:r,rendererIndex:ye,paneid:ae}),pe.push({renderer:e,charttype:"funnelInnerLabels",chartObj:u,args:r,rendererIndex:ye,paneid:Hm(ae,0)})}T_._empty||(W=T_.preprocessAnnotations(u.seriesdata,0,function(e,t,n){return[x[x.length-1-n].bottomLeft[0]+(m/2-oe.width/2),x[x.length-1-n].bottomLeft[1]+(O+2+X)]},W,u,te)),e.chartRendered=ce=!0,jn(u)&&u.renderer[ye].endFunctions()},Ae?ce?Te:300:0)}function he(e){e._groups[0].reverse(),e.data(d)}function fe(t,n){var r=Xn(Hv());return{renderer:e,seriesIndex:jn(u)?n:0,subSeriesIndex:0,itemIndex:n,paneid:ae,rendererIndex:ye,color:C[n%C.length],coordinates:[r.pageX,r.pageY],element:this,data:t,selected:t.selected,_key:"ZC_"+u.id+"_0_0_"+n}}te=c.params,u=te.chartObj,N=te.commonPlotOptions,C=te.color,W=te.notesArray,H=te.yaxiscolumnorder,y=te.dataset,F=u.systemConf;var pe=te.labelQueue,ge=te,ve=ge.bound,ye=ge.rendererIndex,me=rn(u)&&jn(u)?a:a[0];ae=rn(u)?me.row+"_"+me.column:null,ee=u.defsLocation;var be=_extends({},ve,re);m=be.width,w=be.height,ne=!1,B=a[0].plotoptions;var xe=zm.getValueOfPlotOptions(B,N);Q=F.legend.imagePallete||Dx.hasPatternPallete(u),oe.canOverlap=xe("canOverlap"),G=xe("split"),S=xe("threeDimension");var we=N.emptyFunnel;Y=N.datalabels.padding;var Ce=u.datalabels.moduleExists&&Pi(N.datalabels,u),ke=An(u,0);T=Hm(N.minPadding,S?4:1),E=Hm(N.maxPadding,10);var _e=ei(N,B,u,Lb),Se=_e.type,Oe=_e.easingType,Ae=_e.enabled,Pe=_e.duration,Te=Ae?200:0;X=Ie(xe("outerPadding"),w,0)/2,g=xe("stemHeight"),v=xe("stemWidth"),$="width"===xe("weighted"),J=xe("weighted")===fm,$&&(g=v=0,G=!0),d=a=jn(u)?a:a[0].data[0],h=d.reduce(function(e,t,n){return e+(y.getY(t,H)&&!t.disabled?1:0)},0),p=h-1;var Ee=function(){var e=w-2*X,t=.05*e,n=i(e);return t=(t-d.length)/d.length,t=qy(se,t),t=S?oe.canOverlap?t+E/2:n/2-ue:0}();oe.height=w-2*Ee-.01*w-2*X;var Le=xe("coneWidth");if(Le=Ie(Le,oe.height,.95*oe.height),oe.width=Qy(m,Le),P=i(oe.height),oe.gapHeight=!Ae||G||ce?P:Se==$b?P:0,($||J)&&Z(N.maxSliceHeight)&&(oe.height-=qy(0,oe.height-P*p-Ie(N.maxSliceHeight,oe.height)*h)),Ce){var Me=m*ie,ze=m-oe.width;ze<Me&&(Y=oe.datalabelPadding=5,oe.width-=qy(Me-ze,0))}g=Ie(g,oe.height,.2*oe.height),v=Ie(v,oe.width,g*oe.width/oe.height)/2,f=oe.height-g,O=.05*oe.height,O=qy(se,(O-d.length)/d.length),A=O=S?oe.canOverlap?O+E/2:P/2-ue:0,e.total=b=d.reduce(function(e,t,n){return e+(d[n].disabled?0:Ky(y.getY(d[n],H)||0))},0),K=qy.apply(null,d.map(function(e,t){return d[t].disabled?0:Ky(y.getY(d[t],H))/b})),j=kg().domain($?[0,K]:[g,oe.height]).range([oe.width/2-v,0]),R=kg().domain($?[0,K]:[g,oe.height]).range([oe.width/2+v,oe.width]),x=t(d),q=[oe.width,oe.height],e.fillColorFunc=Sn(u,0,null,q),rn(u)?d.forEach(function(e,t){de[t]=Sn(u,t,ae,q)}):de[0]=e.fillColorFunc;var De=0==U(Gn(B,N,u,"enabled"),!0),Re=De?null:Gn(B,N,u,"cursor")||gm,je=m/2-oe.width/2,He=O+2+X,Be=fg(this);if((L=mt(Be,"g",[a],".","class","funnelgroup")).attr("transform","translate("+je+","+He+")").styles({cursor:Re,"stroke-opacity":xe("strokeOpacity"),"stroke-width":xe("strokeWidth")}),M=mt(L,"g",[1],".","class","ellipsegroup"),z=mt(L,"g",[1],".","class","trapezoidgroup"),he(k=mt(z,Um,d)),k.attrs({class:"zc_funnel",id:function(e,t){return"funnel"+t}}).styles({"fill-opacity":N.fillOpacity,fill:function(e,t){return rn(u)?de[t](t,e):de[0](t,e)},stroke:function(e,t){return rn(u)?An(u,t,ae)(t,e,N.strokeColor):ke(t,e,N.strokeColor)}}),he(_=mt(M,Um,S?d:[])),_.attrs({class:"zc_funnel",id:function(e,t){return"ellipse"+t}}).styles({"fill-opacity":N.fillOpacity,fill:function(e,t){return rn(u)?de[t](t,e,.5):de[0](t,e,.5)},stroke:function(e,t){return rn(u)?An(u,t,ae)(t,e,N.strokeColor,.5):ke(t,e,N.strokeColor,.5)}}),Hc(k,u),Hc(_,u),Fc(k,u,"funnel"),Fc(_,u,"funnel"),or(u,k,De,ae),or(u,_,De,ae),u.cache.search||(u.cache.search={}),!De){var Ne={target:"plot",touchleave:!0,chartObj:u},Fe={mousemove:s,mouseout:I,click:D,dblclick:V},Ve={singletouchmove:s,touchend:I,tap:D,dbltap:V};Mr(k,Fe,Ve,Ne),Mr(_,Fe,Ve,Ne)}var We=oe.canOverlap?2*v/oe.width*O:O+ue,Ye="M0,0L"+(oe.width/2-v)+","+f+"L"+(oe.width/2-v)+","+oe.height+"A"+v+","+We+",0,0,0,"+(oe.width/2+v)+","+oe.height+"L"+(oe.width/2+v)+","+f+"L"+oe.width+",0A"+oe.width/2+","+O+",0,0,0,0,0A"+oe.width/2+","+O+",0,0,0,"+oe.width+",0";if(mt(L,Um,!ce&&we.show&&Ae?[1]:[],"#","id","emptyFunnel").attr("d",Ye).styles({stroke:we.color||"grey",fill:fm}),function(e){var t;if($)t=null;else{var n={name:"FunnelClipPath",id:u.id,d:e},r={chartObj:u};t=tb.get(tb.svg_clips,"polygon",n,r)}L.attr("clip-path",t?"url("+ee+"#"+t+")":null)}(Ye),ce)k.transition().duration(Te).ease(xg).attr("d",function(e,t){return o(x[d.length-1-t])}),_.transition().duration(Te).ease(xg).attr("d",function(e,t){return l(x[d.length-1-t])}),r(a,Te),le();else{r(a,0);var Ue=0,Ge=0;k.transition().duration(function(e,t){var n=y.getY(e,H);return Se==Zb?e.disabled||!n?0:$||J?Pe/h:Ky(n)/b*Pe:Pe}).delay(function(e,t){var n=y.getY(e,H);return Ue+=e.disabled||!n?0:$||J?Pe/h:Ky(n),(Se==Zb?$||J?Pe-Ue:(b-Ue)/b*Pe:0)||0}).ease(Oe).attrTween("d",function(e,t){return n(e,d.length-1-t,"funnel",Se)}).on("end",function(e,t){Ge++}),Ue=0,_.transition().duration(function(e,t){var n=y.getY(e,H);return Se==Zb?e.disabled||!n?0:$||J?Pe/h:Ky(n)/b*Pe:Pe}).delay(function(e,t){var n=y.getY(e,H);return Ue+=e.disabled||!n?0:$||J?Pe/h:Ky(n),(Se==Zb?$||J?Pe-Ue:(b-Ue)/b*Pe:0)||0}).ease(Oe).attrTween("d",function(e,t){return n(e,d.length-1-t,"ellipse",Se)});var Xe=setInterval(function(){Ge==d.length&&(Se!=$b&&(oe.gapHeight=P,x=t(d),k.transition().duration(Ae?250:0).delay(50).ease(xg).attr("d",function(e,t){return o(x[d.length-1-t])}),_.transition().duration(Ae?250:0).delay(50).ease(xg).attr("d",function(e,t){return l(x[d.length-1-t])})),le(),L.selectAll(Um+"#emptyFunnel").transition().duration(50).delay(310).style("stroke-opacity",0).remove(),clearInterval(Xe))},10)}})}function t(e){var t=0,n=oe.height,r=0,a=0;return x=[],e.forEach(function(i,o){var l=e[e.length-1-o],s=y.getY(l,H),c=l.disabled;a=b?(c?0:$||J?s?1/h:0:Ky(s)/b)*(oe.height-(h-1)*oe.gapHeight):0,a=r+(a=a||0);var u=s/b;u=u||0;var d={};(t+=c?0:s)!=b||0!=s&&!c?$?(d.bottomLeft=[j(u),oe.height-a],d.topLeft=[j(u),n],d.middleLeft=[j(u),oe.height-a],d.bottomRight=[R(u),oe.height-a],d.topRight=[R(u),n],d.middleRight=[R(u),oe.height-a]):(d.bottomLeft=[oe.height-a>=f?oe.width/2-v:j(a),oe.height-a],d.topLeft=[f<=n?oe.width/2-v:j(r),n],d.middleLeft=[f<=n?oe.width/2-v:d.bottomLeft[0],f<=n&&oe.height-a<=f?f:oe.height-a],d.bottomRight=[oe.height-a>=f?oe.width/2+v:R(a),oe.height-a],d.topRight=[f<=n?oe.width/2+v:R(r),n],d.middleRight=[f<=n?oe.width/2+v:d.bottomRight[0],f<=n&&oe.height-a<=f?f:oe.height-a]):(d.topLeft=d.bottomLeft=d.middleLeft=[j($?K:oe.height),0],d.topRight=d.bottomRight=d.middleRight=[R($?K:oe.height),0]),x.push(d),n=!s||c?oe.height-a:oe.height-a-oe.gapHeight,r=!s||c?a:a+oe.gapHeight}),x}function n(e,t,n,r){var a=function(e,t){var n=Dm(x[e==qb?0:t]);return e===$b?n.topLeft[0]=n.middleLeft[0]=n.bottomLeft[0]=n.topRight[0]=n.middleRight[0]=n.bottomRight[0]=oe.width/2:(n.middleLeft=n.bottomLeft=n.topLeft,n.middleRight=n.bottomRight=n.topRight),n}(r,t),i=x[t],s="funnel"==n?tv(o(a),o(i)):tv(l(a),l(i));return function(e){return s(e)}}function r(e,t){_.each(function(n,r){var i=e[r].disabled||!y.getY(d[r],H),o=i?t:0;o?setTimeout(function(){a(r,i)},o):a(r,i)})}function a(e,t){var n=t?fm:null;M.selectAll("#ellipse"+e).style("display",n),z.selectAll("#funnel"+e).style("display",n)}function i(e){var t=N.padding;return Z(t)?V(t,e,p,u):Qy(E,qy(T,e*le/p))}function o(e){var t=(e.topRight[0]-e.topLeft[0])/2,n=(e.bottomRight[0]-e.bottomLeft[0])/2,r=oe.canOverlap?2*t/oe.width*O:A,a=oe.canOverlap?2*n/oe.width*O:A;return"M"+e.topLeft[0]+" "+e.topLeft[1]+" A"+t+" "+r+" 0 0 0 "+e.topRight[0]+" "+e.topRight[1]+" L"+e.middleRight[0]+" "+e.middleRight[1]+" L"+e.bottomRight[0]+" "+e.bottomRight[1]+" A"+n+" "+a+" 0 0 1 "+e.bottomLeft[0]+" "+e.bottomLeft[1]+" L"+e.middleLeft[0]+" "+e.middleLeft[1]+"Z"}function l(e){var t=(e.bottomRight[0]-e.bottomLeft[0])/2,n=oe.canOverlap?2*t/oe.width*O+ue:A;return"M"+e.bottomLeft[0]+" "+e.bottomLeft[1]+" A"+t+" "+n+" 0 0 1 "+e.bottomRight[0]+" "+e.bottomRight[1]+" A"+t+" "+(oe.canOverlap?n:n+ue)+" 0 0 1 "+e.bottomLeft[0]+" "+e.bottomLeft[1]}function s(t){var n=0<arguments.length&&void 0!==t?t:0,r=e.subSeriesIndex||0,a=rn(u)?u.staticPaneSVG.selectAll("g.grid"+ae):u.staticPaneSVG;D=D||a.selectAll("g.link_"+n+" g.subseries_"+r),I=I||a.selectAll("g.label_"+n+" g.subseries_"+r),ne=!0}var c,u,d,h,f,p,g,v,y,m,b,x,w,C,k,_,S,O,A,P,T,E,L,M,z,I,D,R,j,H,B,N,F,W,Y,G,X,q,Q,K,$,J,ee,te,ne,re,ae,ie=.3,oe={},le=.375,se=1,ce=!1,ue=0,de=[];return e.commonRendererProp=function(t){return arguments.length?(c=t,e):c},e.plotarea=function(t){return arguments.length?(re=t,e):re},e.defaultMouseOverFunc=function(t,n,r){ne||s(c.params.rendererIndex),Q?(k.style("opacity",function(e,t){return t===r?null:.4}),_.style("opacity",function(e,t){return t===r?null:.4})):(k.style("fill",function(e,t){return(rn(u)?de[t]:de[0])(t,e,t===r?.6:null)}),_.style("fill",function(e,t){return(rn(u)?de[t]:de[0])(t,e,t===r?1:.5)}));var a=e.subSeriesIndex||0;I.selectAll("text").style("text-shadow",null),D.selectAll(Um).style("stroke-width",null),I.selectAll("#lbl0_"+a+"_"+(d.length-1-r)).style("text-shadow","0 0 0 rgba(0,0,0,1)"),D.selectAll("#link0_"+a+"_"+(d.length-1-r)).style("stroke-width",1)},e.defaultMouseOutFunc=function(e,t){ne||s(c.params.rendererIndex),Q?(k.style("opacity",null),_.style("opacity",null)):(k.style("fill",function(e,t){return(rn(u)?de[t]:de[0])(t,e)}),_.style("fill",function(e,t){return(rn(u)?de[t]:de[0])(t,e,.5)})),I.selectAll("text").style("text-shadow",null),D.selectAll(Um).style("stroke-width",null)},e},et.gantt=function(){return{outerPadding:.04,padding:0,interPadding:.05,maxBandWidth:200,levelMarker:{enabled:!1,dataindex:2,fillOpacity:.3,bandWidth:4},hoveroptions:{enabled:!1,start:{innerStrokeOpacity:1,outerFillColor:"white",outerStrokeWidth:2},end:{innerStrokeOpacity:1,outerFillColor:"white",outerStrokeWidth:2}},marker:{enabled:!1,start:{size:1,innerStrokeWidth:0,outerStrokeWidth:2},end:{size:1,innerStrokeWidth:0,outerStrokeWidth:2}},border:{show:!1,size:null,style:"solid",radius:0,color:null},stacked:{enabled:!1,showAs:"values"},animation:{type:"verticalAll"},datalabels:{showAs:"y"},gradients:{options:{linear:{y2:50}}},dependency:{enabled:!1,targetIndex:0,link:{type:"ES",strokeWidth:2,strokeColor:"#111111",errorStyle:"red",padding:20},marker:{enabled:!0,padding:10,size:1.5,innerFillColor:"transparent",innerStrokeWidth:0,innerStrokeOpacity:0,outerStrokeOpacity:0,outerStrokeColor:"red",outerFillColor:"blue"}}}},My.ganttHelpers=function(){},Qv.render.ganttHelpers=function(){},My.ganttHelpers.showDependencies=function(e,t,n,r){var a=e.commonRendererProp().params,i=e.commonOption,o=a.chartObj,l=(o.plotarea,a.dataset),s=a.axisrotated,c=a.commonPlotOptions,u=i.yaxiscolumnorder,d=(a.color,c.dependency),h=!0===d.enabled,f=null,p=n.selectAll("g.dependencySeries").data(h?[t]:[]),g=p.enter().insert("g",":first-child").attr("class","dependencySeries").merge(p);if(g.exit().remove(),h&&Z(d.sourceIndex)&&Z(d.targetIndex)&&(f=function(e,t,n){var r=[];if(e.forEach(function(a){var i=a[t];e.forEach(function(e){e!==a&&Z(i)&&te(i)&&-1!==i.indexOf(e[n])&&r.push({source:a,target:e})})}),r.length)return r}(t,+d.sourceIndex,+d.targetIndex)),f){var v=d.marker,y=d.link,m=Z(y.padding)?y.padding:1,b=Z(v.padding)?v.padding:m;b=Qy(m,b);var x=mt(g,"g",[1],".","class","links"),w=mt(g,"g",[1],".","class","symbol");mt(x,"path",f,".","class","link").attr("d",function(t,n){var i=ep(t,d,e,r);return function(e,t,n,r,a,i){e=e.toUpperCase();var o=i.chartObj,l=i.axisrotated,s=o.systemConf.chart.axes.xaxis.reversed,c=null,u=null,d=null,h=function(e,t,n,r,a){var i=!1;switch(e){case"SS":case"EE":i=!0;break;case"SE":i=t?n.x>r.x+r.width:n.y+n.height<r.y;break;case"ES":i=t?n.x+n.width<r.x-2*a:n.y>r.y+r.height}return!i}(e,l,t,n,r);return Ug().x(function(i,o){switch(o){case 0:case 1:case 2:if(d=t,0==o)"SS"==e||"SE"==e?c=l?d.x:d.x+d.width/2:"EE"!=e&&"ES"!=e||(c=l?d.x+d.width:d.x+d.width/2);else if(1==o)"SS"==e||"SE"==e?c=l?d.x-r:c:"EE"!=e&&"ES"!=e||(c=l?d.x+d.width+r:c);else{var f;"SS"==e?(f=(f=t.x-n.x)<0?0:f,c=l?d.x-f-r:c):"EE"==e?(f=0<(f=t.x+t.width-(n.x+n.width))?0:f,c=l?d.x+d.width+r-f:c):"SE"==e?l?(c=d.x-r,u=h?d.y+d.height:n.y):c=s?c-d.width:c+d.width:"ES"==e&&(l?(c=d.x+r+d.width,u=h?d.y+d.height:n.y):c=s?c-d.width:c+d.width)}break;default:l&&(u=null),d=n,3==o?(l&&h&&(u=t.y+t.height),"SS"==e||"EE"==e?c=l?c:d.x+d.width/2:"SE"==e?c=l?d.x+d.width+r:c:"ES"==e&&(c=l?d.x-r:c)):4==o?"SE"==e?c=l?d.x+d.width+r:d.x+d.width/2:"ES"==e&&(c=l?c:d.x+d.width/2):"SS"==e||"ES"==e?c=l?d.x-a:c:"EE"!=e&&"SE"!=e||(c=l?d.x+d.width+a:c)}return c}).y(function(i,o){return l?(u||d.y)+d.height/2:(0==o?"SS"==e||"SE"==e?u=t.y+t.height:"EE"!=e&&"ES"!=e||(u=t.y):1==o?"SS"==e||"SE"==e?u+=r:"EE"!=e&&"ES"!=e||(u=t.y-r):2==o?"SS"==e?u=t.y+t.height<n.y+n.height?n.y+n.height+r:u:"EE"==e&&(u=t.y>n.y?n.y-r:u):3==o?"SE"==e?u=h?n.y-r:u:"ES"==e&&(u=h?n.y+n.height+r:u):4==o?u+=0:"SS"==e||"ES"==e?u=n.y+n.height+a:"EE"!=e&&"SE"!=e||(u=n.y-a),u)}).curve(wg("linear"))}(i.type,i.end,i.start,m,b,a)(new Array(6))}).attr("stroke",function(e){return l.getY(e.source,u)[0]<l.getY(e.target,u)[1]?y.errorStyle:y.strokeColor}).attr("stroke-width",y.strokeWidth).attr("fill","none");var C=mt(w,"g",!0===d.marker.enabled?f:[],".","class","arrow");d.marker.enabled&&C.each(function(t,n){v.symbol;var a,i=fg(this);i.attr("transform",function(t){var n,i,o=ep(t,d,e,r),l=o.type;return"SS"==l||"ES"==l?(n=s?o.start.x-b:o.start.x+o.start.width/2,i=s?o.start.y+o.start.height/2:o.start.y+o.start.height+b,a=s?"triangle-right":"triangle-up"):"EE"!=l&&"SE"!=l||(n=s?o.start.x+o.start.width+b:o.start.x+o.start.width/2,i=s?o.start.y+o.start.height/2:o.start.y-b,a=s?"triangle-left":"triangle-down"),"translate("+n+","+i+")"}),Nt(i,null,v,{symbolSize:{inner:.4,outer:.7},color:null,symbol:a},o)})}},My.ganttHelpers.addMarker=function(e,t,n,r,a,i,o){var l=n.commonRendererProp().params,s=n.commonOption,c=l.chartObj,u=c.plotarea,d=l.dataset,h=l.axisrotated,f=l.color,p=s.levelMarkerWidth,g=s.charttype,v="bullet"==g,y="gantt"==g,m="boxplot"==g,b="whiskers"==a.symbol,x=v?l.xscale.bandwidth():p,w=n.bandwidth1(),C=a.size,k=Z(C),_=k?C:p-2*U(a.padding,s.padding/2),S=mt(e,"g",[t],".","class","markers"+o,null,function(e){return[d.getX(e)]});k&&"string"==typeof _&&-1<_.indexOf("%")&&(_=parseFloat(_)/100*x/10);var O=Hm(a.strokeWidth,1);S.attrs({class:"markers"+o,transform:"translate("+u.left+","+u.top+")","stroke-width":O,"stroke-dasharray":rt(a.dashStyle,U(a.outerStrokeWidth,1)),"stroke-linecap":at(a.lineCap,a.dashStyle),fill:a.color,stroke:a.color});var A=mt(S,"g",t,null,null,null,null,function(e){return d.getX(e)});A.enter().append("g");var P="line"===a.symbol?{inner:0,outer:1}:{inner:.6,outer:1};A.each(function(e,t){var u,p,g=fg(this),C=i?c.seriesColor[t%c.seriesColor.length]:f;if(g.attrs({transform:function(e,t){var i=0,c=0;if(y){var u=My.ganttHelpers.getMarkerPosition(e,r,t,n);return c=0===o?(i=u.x+u.width/2,u.y-10*a.size/2):(i=u.x+u.width/2,u.y+u.height+10*a.size/2),"translate("+(h?c:i)+","+(h?i:c)+")"}return i=w(d.getX(e))+x/2,i=m?i+s.bandwidth2(s.barDatasetIndex)+s.padding:i,c=b?l.yscale(e[a.dataindex][o]):l.yscale(e[a.dataindex]),null==e[a.dataindex]?null:"translate("+(h?c:i)+","+(h?i:c)+") rotate("+(h?90:0)+")"}}).style("display",function(e){return null==e[a.dataindex]&&v?"none":null}),a.size=k?v?Qy(_,x/10):_:_/10,m&&b){var S=function(e,t,n,r,a){return t(e[r][a])-t(e[n][a])}(e,l.yscale,a.dataindex,d.yidx(s.yaxiscolumnorder),o);p={symbol:"vertical-line-z",size:S=h?-S:S}}Pn(d.getClr(e),c)||((u=_extends({},a)).outerStrokeColor="transparent"),Nt(g,null,u||a,{symbolSize:P,color:y?C:null,custom:p},c)}),a.size=C,y&&(n.markerProperties={subseriesIndex:r})},My.ganttHelpers.getMarkerPosition=function(e,t,n,r){var a=r.commonOption;return{x:r.getParamValue(a.axisrotated?"y":"x",e,t,n,a),y:r.getParamValue(a.axisrotated?"x":"y",e,t,n,a),width:r.getParamValue(a.axisrotated?"height":"width",e,t,n,a),height:r.getParamValue(a.axisrotated?"width":"height",e,t,n,a)}},Qv.render.ganttHelpers,ve(np,Vf);var E_=np.prototype;E_.data=function(e){var t=this.renderer.commonRendererProp().params,n=this.chart;return function(){n.cache.data[e._key]||(n.cache.data[e._key]={});var r=n.cache.data[e._key];return r.rect=r.rect||ir(n,e,t.xscale,t.yscale,t.yaxiscolumnorder),e._x=r.rect.x,e._y=r.rect.y,e._width=r.rect.width,e._height=r.rect.height,r._uid=e._uid=n.dataset.getX(e),r._visible=e._visible=dr(n,e),e}},E_.options=function(e){var t=this.chart,n=this.renderer,r=n.commonRendererProp().params,a=r.gvp("borderRadius"),i=Ln(this.chart,In(r.commonPlotOptions,this.chart)?e.itemIndex:e.seriesIndex,e,e.seriesIndex);return{radius:t.dataObject.getTransRectValue("radius",null,null,null,n.commonOption,a),color:i}},E_.renderingContext=function(){return jw.get("bar").call(this,this.chart)},E_.path=function(e,t){var n,r=this.renderer.commonRendererProp().params,a=t.translate.call(this),i=a[0],o=a[1],l=(n=r.gvp("symbol"))&&Bt(n);this.chart.systemConf.chart.axes.yaxis[e.yaxisOrder||0].reversed,l?(n=l(Qy(e._width,e._height)),i+=e._x+e._width/2,o+=e._y+e._height/2):n=wt(e._x,e._y,e._x+e._width,e._y+e._height,this.options(e).radius,vm,this.chart.axes.rotated,!0);var s=t.context.call(this),c=mt(s,"path",[1],".","class","highlight"+e.seriesIndex+e.subSeriesIndex);return s.style("display",""),c.style("display","").attr("d",n).attr("transform","translate("+i+","+o+")"),c},i_.heatmap=function(){function e(n,r,a,i){var o=t.params,l=o.chartObj,s=o.xscale,c=o.yscale,u=o.datasetIndex,d=o.commonPlotOptions,h=o.labelQueue,f=o.yaxiscolumnorder,p=l.dataset.getDataType("y",f),g=s.domain(),v=p==ox?c.domain():null,y=d.symbol&&Bt(d.symbol),m=l.dataObject.getTransRectValue("radius",null,null,null,null,d.borderRadius),b=(e.fillColorFunc=Sn(l,u),An(l,u)),x=dx.isQuantileColorScale(l),w=(r=l.dataObject.categoryHierarchy?r[u]:l.seriesdata[u]).plotoptions;return o.gvp=zm.getValueOfPlotOptions(w,d),r.disabled||(e.seriesdataAfterUpdate=[],r.data.forEach(function(t,r){var o=l.dataObject.updateSeriesdatabyCategories(R(t),g,v,f);e.seriesdataAfterUpdate[r]=o,x&&Z(i)&&(o=Dx.filterSelectionByColor(o,!0,i,l)),o.forEach(function(t,r){function i(e,n){if(e.save(),e.translate(h+g/2,p+v/2),e.beginPath(),e.lineWidth=d.strokeWidth,e.strokeStyle=b(u,t,d.strokeColor,vm,d.strokeOpacity),e.fillStyle=n,y){var r=Qy(g,v)/2;if("circle"===d.symbol)e.arc(0,0,r,0,2*sm);else{var a=y(2*r);xw.drawPath(e,a)}}else xw.roundedRect(e,-g/2,-v/2,g,v,m);e.fill(),e.stroke(),e.closePath(),e.restore()}var o=ir(l,t,s,c,f),h=o.x,p=o.y,g=o.width,v=o.height;if(l.imagePallete&&Pn(l.dataset.getClr(t),l))tb.canvas_patterns.imageFill({x:h,y:p,context:n,name:Ln(l,u,t,u)},i);else{var x=Z(a)?a:e.fillColorFunc(u,t,null,null,d.fillOpacity,[g,v]);i(n,x)}})})),Dy&&h.push({renderer:e,charttype:"hierarchy",chartObj:l,args:[r,u,null,null,null,r.disabled?[]:Ig(e.seriesdataAfterUpdate)]}),e.chartRendered=!0,e}var t;return e.getHighlighter=function(t,n){return e.highlighter||(e.highlighter=new np(t,e)),e.highlighter},e.commonRendererProp=function(n){return arguments.length?(t=n,e):t},e},et.heatmap=function(){return{strokeColor:"white",animation:{},datalabels:{showAs:"y"},gradients:{options:{linear:{y2:100},radial:{radius:100}}}}},My.heatmap=function(){function e(r){return r.each(function(r){var a=t.params,i=a.chartObj,o=a.xscale,l=a.yscale,s=a.datasetIndex,c=a.commonPlotOptions,u=a.labelQueue,d=a.yaxiscolumnorder,h=r[s],f=h.data,p=h.plotoptions,g=a.gvp=zm.getValueOfPlotOptions(p,c),v=ei(c,null,i,Ib),y=v.enabled,m=v.type,b=v.easingType,x=n?y?200:0:v.duration,w=m===Gb||m===Wb,C=n?0:w?function(){return lm()*(3*x/5)}:0,k=n?x:w?2*x/5:x,_=e.fillColorFunc=Sn(i,s),S=An(i,s),O=i.dataObject.getTransRectValue("radius",null,null,null,null,c.borderRadius),A=g("symbol"),P=A&&Bt(A),T=o.domain(),E=l.domain(),L=dx.isQuantileColorScale(i),M=mt(fg(this),"g",[1],".","class","heatmapseries_"+s);e.seriesdataAfterUpdate=[],f.forEach(function(t,r){var a=e.seriesdataAfterUpdate[r]=i.dataObject.updateSeriesdatabyCategories(R(t),T,E,d),u=mt(mt(M,"g",!L&&h.disabled?[]:[1],".","class","subseries_"+r),Um,a);u.styles({fill:function(e,t){var n=ir(i,e,o,l,d);return _(s,e,null,null,null,[n.width,n.height])},"fill-opacity":c.fillOpacity,stroke:function(e){return S(s,e,c.strokeColor)},"stroke-width":c.strokeWidth,"stroke-opacity":c.strokeOpacity}).attr("transform",function(e){var t=ir(i,e,o,l,d);return"translate("+(t.x+t.width/2)+","+(t.y+t.height/2)+")"}).attr("d",function(e){var t=ir(i,e,o,l,d);return P?P(Qy(t.width,t.height)):wt(-t.width/2,-t.height/2,t.width,t.height,O)}),n||(ii(u),u.attr("opacity",0).transition().delay(C).duration(k).ease(b).on("start",function(){fg(this).attr("opacity",null)}).call(w?ri:function(){}).call(m===Ub||m===Gb?ai:m===Yb||m===Wb?ri:ni))}),Dy&&u.push({renderer:e,charttype:"hierarchy",chartObj:i,args:[h,s,null,null,null,Ig(e.seriesdataAfterUpdate)]}),e.renderedTimer=setTimeout(function(){e.chartRendered=n=!0},x+17)}),e}var t,n=!1;return e.getHighlighter=function(t,n){return e.highlighter||(e.highlighter=new np(t,e)),e.highlighter},e.commonRendererProp=function(n){return arguments.length?(t=n,e):t},e},et.map=function(){return{allAreas:!0,renderingMode:window.rendererMode||"svg",fillColor:"#dddddd",strokeColor:"#444",strokeWidth:.6,gradients:{options:{linear:{y2:100},radial:{radius:100,gradientUnits:"objectBoundingBox"}}},globe:{strokeWidth:1.5},labels:{strokeWidth:1.5},extent:{top:10,right:10,bottom:10,left:10},layerName:"source",useMeshOutline:!0,textStrokeWidth:2,animation:{enabled:!0,type:"fade",duration:500,easingType:"cubic"}}},rp.GEO_FORMATS=Rg(["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon","GeometryCollection","Feature","FeatureCollection","Topology"]),rp.getMapFeatures=function(e){return"FeatureCollection"===e.type?e.features:be(e)},rp.prototype.getStyle=function(e,t,n){var r=this,a=r.styles||{},i=e.styles||{},o=e.properties||{},l=Hm(a[t],i[t],o[t],r.defaultStyles[t]);if("function"==typeof l)return l.call(this,e,l);if(n)if(r._gradient)l=r._gradient;else{var s=Hm(a.gradients,i.gradients,o.gradients,{});if("linear"===s.type||"radial"===s.type){var c=n_.getFeatureGradientBBox(e,s.type,r.utils.geoPath);l=On(s,[c.width,c.height],r.getStyle(e,"fillColor"),r.renderingMode,r.fillOpacity,"area",null,r.geoMap),e.transform={x:c.x,y:c.y},r.isCanvasMode||"linear"!==s.type||(r._gradient=l)}}else"dashStyle"===t&&Z(l)&&(l=rt(l,r.getStyle("strokeWidth")));return l},rp.prototype.initialize=function(){var e=this.layerContainer.isD3Selection?"svg":"canvas";this.defaultStyles={fillColor:"transparent",strokeColor:"#333",strokeWidth:.6,dashStyle:null},this.renderingMode=e,this.isCanvasMode=!0!==this.layerContainer.isD3Selection,this.renderingModeCapitialized=ke(e),this.paintLayer()},rp.prototype.update=function(e){e&&(this.layer=e),this.paintLayer(!0)},rp.prototype.paintLayer=function(e){this["paint"+this.renderingModeCapitialized+"Layer"](e)},rp.prototype.paintSvgLayer=function(e){function t(e){e.attrs({stroke:function(e){return n.getStyle(e,"strokeColor")},"stroke-width":function(e){return n.getStyle(e,"strokeWidth")},"stroke-dasharray":function(e){return n.getStyle(e,"dashStyle")},"stroke-opacity":function(e){return n.getStyle(e,"strokeOpacity")}})}var n=this,r=rp.getMapFeatures(n.layer),a=Et("path",".map-feature",rp.getMapFeatures(r),n.layerContainer).attrs({fill:function(e){return n.getStyle(e,"fillColor",!0)},"fill-opacity":function(e){return n.getStyle(e,"fillOpacity")||1},d:n.utils.geoPath});if(n.useMesh&&n.layer.length){var i=n.geoMap.dataObject.getFeatureMesh(rp.getMapFeatures(n.layer));n.mesh=a=Et("path",".map-feature-outline",[r[0]],n.layerContainer).attrs({fill:"none",d:n.utils.geoPath(i)}),a.raise(),t(a)}else n.mesh&&n.mesh.remove(),t(a)},rp.prototype.paintCanvasLayer=function(e){var t=this,n=t.layerContainer,r=rp.getMapFeatures(t.layer);if(t.utils.geoPath.context(n),pe(r,function(e){n.save(),n.fillStyle=t.getStyle(e,"fillColor",!0),n.strokeStyle=t.getStyle(e,"strokeColor"),n.lineWidth=t.getStyle(e,"strokeWidth");var r=t.getStyle(e,"dashStyle");r&&Z(n.setLineDash)&&n.setLineDash(r),n.beginPath(),t.utils.geoPath(e),e.transform&&n.translate(e.transform.x,e.transform.y),n.fill(),t.useMesh||n.stroke(),n.closePath(),n.restore()}),t.useMesh&&r.length){var a=t.geoMap.dataObject.getFeatureMesh(rp.getMapFeatures(t.layer));if(!a)return;n.save(),n.fillStyle=t.getStyle(r[0],"fillColor",!0),n.strokeStyle=t.getStyle(r[0],"strokeColor"),n.lineWidth=t.getStyle(r[0],"strokeWidth");var i=t.getStyle(a,"dashStyle");i&&Z(n.setLineDash)&&n.setLineDash(i),n.beginPath(),t.utils.geoPath(a),n.stroke(),n.closePath(),n.restore()}},rp.prototype.destroy=function(){var e=this;e.update([]),pe(e,function(t,n){e[n]=null,delete e[n]})},ap.prototype.toJSON=function(){return{x:this.x,y:this.y}},ap.prototype.toArray=function(){return[this.x,this.y]},ip.prototype.toJSON=function(){return{latitude:this.latitude,longitude:this.longitude}},ip.prototype.toArray=function(){return[this.longitude,this.latitude]},ip.prototype.toXY=function(e){var t=n_.toXY(e,this.longitude,this.latitude)||[null,null];return new ap(t[0],t[1])},ap.prototype.toLatLong=function(e){var t=n_.toLatLong(e,this.x,this.y)||[null,null];return new ip(t[0],t[1])},op.prototype.getXY=function(){var e=this._coordinates;return e=e||(this._coordinates=this.latLong.toXY(this.geoMap))},op.prototype.getDimension=function(){var e=this.styles,t=this._dimension;return t=t||(this._dimension={width:zm.fontUtils.getTextWidth(this.text,e.fontSize,e.fontFamily,e.fontStyle,e.fontWeight),height:zm.fontUtils.getTextHeight(this.text,e.fontSize,e.fontFamily,e.fontStyle,e.fontWeight)})},op.prototype.getBBox=function(){var e=this._bbox;if(!e){var t=this.getXY(),n=this.getDimension();e=this._bbox={x:t.x-n.width/2-2.5,y:t.y-n.height/2-2.5,width:n.width+2.5,height:n.height+2.5}}return e},op.prototype.overlapsWith=function(e){var t=this.getBBox(),n=e.getBBox();return t.x<n.x+n.width&&t.x+t.width>n.x&&t.y<n.y+n.height&&t.height+t.y>n.y},op.prototype.insideRect=function(e){var t=this.getBBox();return t.x+t.width<e.x+e.width&&t.x>e.x&&t.y>e.y&&t.y+t.height<e.y+e.height},op.prototype.clearCache=function(){this._bbox=this._coordinates=this._dimension=null},lp.prototype.initialize=function(){var e=this.geoMap,t=e.systemConf.map.labels||{},n=this.geoLabelStyles=Object.create(t),r=this.labels=[],a={x:0,y:0,width:e.plotarea.width,height:e.plotarea.height};!0===n.show&&(n.fontFamily=ms(t,e),n.fontSize=ys(t,e),n.fontWeight=t.fontWeight||"normal",n.fontStyle=t.fontStyle||"normal",n.fontColor=t.fontColor||"#333",n.textShadow=t.textShadow,n.strokeColor=t.strokeColor,n.strokeWidth=t.strokeWidth,n.type="background",!0===e.systemConf.map.allAreas&&e.dataObject.userUnmatchedMapFeatures.each(function(i,o){var l=i.properties,s=V(!0,t.showAs,i,e);!function(e){e.insideRect(a)&&!r.some(function(t){return e.overlapsWith(t)})&&r.push(e)}(new op(Hm(l[s],s,l.name),new ip(l.longitude,l.latitude),n,e))})),this.render()},lp.prototype.render=function(e){this.geoMap,this.geoMap.geo.isCanvasMode?this.renderCanvasLabel(e):this.renderSvgLabel(e)},lp.prototype.renderCanvasLabel=function(){var e=this.geoMap.geo.geoLabelLayer,t={};this.labels.forEach(function(n){var r=n.styles,a=Hm(n.fontColor,r.fontColor),i=r.strokeColor||oe(a),o=n.getXY();if(Z(o.x)&&Z(o.y)){if(e.save(),r.textShadow&&!Z(t[n.type])&&(t[n.type]=sC.parseTextShadow(r.textShadow)),t[n.type]){var l=t[n.type];Z(l)&&(e.shadowOffsetX=l[0],e.shadowOffsetY=l[1],e.shadowBlur=l[2],e.shadowColor=l[3])}e.textAlign="center",e.textBaseline="middle",e.fillStyle=a,e.strokeStyle=i,e.font=function(e,t,n,r){return e+" "+t+" "+n+"px "+r}(r.fontStyle,r.fontWeight,r.fontSize,r.fontFamily),0<r.strokeWidth&&(e.lineWidth=r.strokeWidth,e.strokeText(n.text,o.x,o.y)),e.fillText(n.text,o.x,o.y),e.restore()}})},lp.prototype.renderSvgLabel=function(){var e=this.geoMap.geo.geoLabelLayer;this.labelElements=Et("text",".geo-labels",this.labels,e).each(function(e){var t=fg(this),n=e.getXY(),r=e.styles,a=Hm(e.fontColor,r.fontColor),i=r.strokeColor||oe(a);Z(n.x)&&Z(n.y)&&(t.attrs({"font-family":r.fontFamily,"font-size":r.fontSize,"font-style":r.fontStyle,"font-weight":r.fontWeight,"text-anchor":"middle","dominant-baseline":"middle",transform:"translate("+n.x+","+n.y+")"}),r.textShadow&&t.style("text-shadow",r.textShadow),0<r.strokeWidth&&Et("tspan",".stroke-text",[1],t).text(e.text).attrs({stroke:i,"stroke-width":r.strokeWidth,x:0,y:0}),Et("tspan",".fill-text",[1],t).text(e.text).attrs({fill:a,x:0,y:0}))})},lp.prototype.update=function(){this.geoMap,this.labels.forEach(function(e){e.clearCache()}),this.initialize(!0)},sp.prototype.initialize=function(){var e,t=this,n=t.geoMap,r=n.geo,a=n.dataset,i=n.seriesdata,o=n.systemConf.map,l=Rg(o.excludeAreas||[]),s=Rg(o.includeAreas||[]),c=t.mapFeatures=r.defaultLayer.layerGeojson.features,u=t.joinByKey=a.getMapByKey(),d=t.hasLatLongJoinBy=a.latLongJoinByKeys.has(u),h=d?"zc-key":u,f=t.mapFeaturesHashed=sp.helpers.hashFeaturesByProperty(c,h,s,l,!0),p=t.userDataHashed=Dg(),g=t.userUnmatchedMapFeatures=Dg(),v=t.userMapFeatures=Dg(),y=t.userUnmatchedData=Rg();t.totalDataCount=0,t.extents=Dg(),t.hasPointChart=!1,t.isCombinationalChart=Rg(),t.flattenPoints=e=Dg(),t.hasHeatmap=t.hasBubblePie=t.hasPointChart=!1,t.encodes={},t.markerSize={},t.processedseriesData=i,n.isGeoMap=!0,n.hasColorScale=dx.isQuantileColorScale(n),t.hasZaxis=Z(a.zidx)&&Py.zaxis.some(function(e){return t.containsChartType(e)});var m=[];pe(i,function(r,i){sp.helpers.convertTo3DArray(r);var o=n.chartTypes[i];t.isCombinationalChart.add(o.name),r.disabled||(t.hasHeatmap||Kv.geoheatmap!==o.value||(t.hasHeatmap=t.containsChartType("geoheatmap")),t.hasBubblePie||Kv.geobubblepie!==o.value||(t.hasBubblePie=!0),t.isBubbleEnabled=t.isBubbleEnabled||Qn(o.value),t.hasPointChart||Kv.geoheatmap===o.value||(t.hasPointChart=!0),pe(r.data,function(r,o){pe(r,function(r,l){!function(r,i,o,l){var s=a.getGeo(r),c=n.chartTypes[i].name,u=e.get(c);r.seriesIndex=i,r.subSeriesIndex=o,r.itemIndex=l,Z(u)||(u=[],e.set(c,u)),u.push(r),d&&!t.isValidPoint(r)||(f.has(s)?(v.set(s,f.get(s)),p.has(s)?p.get(s).push(r):p.set(s,[r]),t.totalDataCount++):d?t.totalDataCount++:y.add(s))}(r,i,o,l)}),t.hasZaxis&&(t.saveEncode("z",0,i),m.push(Fg(r,function(e){return a.getZ(e)})))}))}),e.each(function(n,r){e.set(r,n.filter(function(e){if(t.isValidPoint(e))return e}))}),t.hasZaxis&&t.extents.set("z",Fg(Ig(m))),d?t.userUnmatchedMapFeatures=f:f.keys().forEach(function(e){v.has(e)||l.has(e)||g.set(e,f.get(e))}),t.hasBubblePie&&(t.data=n.systemConf,t.chartObj=n,t.dataset=a,t.processedseriesData=n.seriesdata,t.bubblepieData=t.processBubblePieData(null,{chartType:Kv.geobubblepie})),t.isCombinationalChart=1<t.isCombinationalChart.values().length,t.userMapFeaturesArray=v.values(),t.totalnoofdatas=t.totalDataCount},sp.prototype.getFeatureMesh=function(e){var t=Rg(),n=this.geoMap.geo.defaultLayer.layerOriginal,r=null,a=this.geoMap.systemConf.map.layerName,i=this.hasLatLongJoinBy?"zc-key":this.joinByKey;return"Topology"===n.type&&(e.forEach(function(e){e.properties&&e.properties[i]&&t.add(e.properties[i])}),r=Ov.mesh(n,n.objects[a],function(e,n){return t.has(e.properties[i])||t.has(n.properties[i])})),r},sp.prototype.getAxisRotated=function(){return!1},sp.prototype.containsChartType=function(e){return this.geoMap.chartTypes.some(function(t){return t.name===e||t.value===e})},sp.prototype.getXYPoint=function(e){return this.getLatLonPoint(e).toXY(this.geoMap)},sp.prototype.getFeatureByPoint=function(e){var t=this.userMapFeatures,n=this.geoMap.dataset.getGeo(e);return t.has(n)?t.get(n):null},sp.prototype.getLatLonPoint=function(e){var t=this.geoMap.dataset,n=this.userMapFeatures,r=t.getGeo(e),a=[0,0];if(n.has(r)){var i=n.get(r),o=i.properties;a=Z(o.latitude)&&Z(o.longitude)?[+o.longitude,+o.latitude]:Ev(i)}else this.hasLatLongJoinBy&&(a=[t.getLongitude(r),t.getLatitude(r)]);return new ip(a[0],a[1])},sp.prototype.getXYvalue=function(e,t,n,r,a,i,o){return"z"===o?this.getZFromPoint(i):this.getXYPoint(i)[o]},sp.prototype.getZFromPoint=function(e){var t=this.geoMap;return Nf(e,t.dataset,t)},sp.prototype.getXYFromLatLng=function(e){var t=n_.toXY(this.geoMap,e.longitude,e.latitude);return new ap(t[0],t[1])},sp.prototype.getUserMapFeatures=function(e){return"geojson"===e?sp.helpers.arrayToGeojson(this.userMapFeaturesArray):"array"===e?this.userMapFeaturesArray:this.userMapFeatures},sp.prototype.getMapFeaturesByDataPoint=function(e,t){var n=this,r=n.geoMap.dataset,a=Dg();return e[0]instanceof Array||(e=[e]),e.forEach(function(e){var t=e[r.geoidx];n.userMapFeatures.has(t)&&a.set(t,n.userMapFeatures.get(t))}),"geojson"===t?sp.helpers.arrayToGeojson(a.values()):"array"===t?a.values():a},sp.prototype.getMapFeatures=function(e){var t=this,n=Dg(t.userMapFeatures);return t.userUnmatchedMapFeatures.keys().forEach(function(e){n.set(e,t.userUnmatchedMapFeatures.get(e))}),"geojson"===e?sp.helpers.arrayToGeojson(n.values()):n},sp.prototype.getMinMaxZ=function(){return this.extents.get("z")},sp.prototype.isstacked=function(){return!1},sp.prototype.containsNegativeData=function(e){return!1},sp.prototype.getScaleProxy=function(){var e=this;return e.geoMap,{xScale:function(t){return e.getXYPoint(t).x},yScale:function(t){return e.getXYPoint(t).y}}},sp.prototype.isValidLatLong=function(e,t){return je(e,[-90,90])&&je(t,[-180,180])},sp.prototype.isValidPoint=function(e){var t=this.geoMap.dataset.getGeo(e);if(!e.length||!Z(t)||!t.length)return!1;if(this.hasLatLongJoinBy){var n=this.geoMap.dataset.getLatitude(t),r=this.geoMap.dataset.getLongitude(t);return Z(n)&&Z(r)&&this.isValidLatLong(n,r)}return this.userDataHashed.has(t)},sp.prototype.updateSeriesdatabyCategories=function(e){var t=this,n=0;return e.filter(function(e){var r=t.isValidPoint(e);return r&&(e.itemIndex=n++),r})},sp.prototype.processBubblePieData=k_,sp.helpers={is3D:function(e){return te(e)&&te(e[0])&&te(e[0][0])},convertTo3DArray:function(e){this.is3D(e.data)||(e.data=[e.data])},arrayToGeojson:function(e){return{type:"FeatureCollection",features:e}},hashFeaturesByProperty:function(e,t,n,r,a){var i=Dg();return pe(e,function(e,o){var l=e.properties[t]||o;!n.empty()&&!n.has(l)||!r.empty()&&r.has(l)||i.set(l,a?Object.create(e):e)}),i}},ge(sp.prototype,cx),cp.prototype.initialize=function(){var e,t=this,n=t.geoMap.userdata.metadata,r=t.columns=Hm(n.columns,{}),a=t.axes=Hm(n.axes,{geo:[0],clr:[1],z:[1]}),i=Hm(r[a.clr],{}),o=Hm(r[a.geo],{}),l=Hm(r[a.z],{});t.latLongJoinByKeys=Rg(["lat-long","long-lat"]),t.clridx=Hm(i.dataindex),t.zidx=Hm(l.dataindex),t.geoidx=Hm(o.dataindex,0),t.geoMapByKey=e=t.getJoinByKey(o),a.label&&r[a.label]&&(t.labelIndex=r[a.label].dataindex),t.latLongJoinByKeys.has(t.geoMapByKey)&&("lat-long"===e?(t.latitudeIndex=0,t.longitudeIndex=1):(t.latitudeIndex=1,t.longitudeIndex=0))},cp.prototype.getJoinByKey=function(e){var t=Hm(e,this.columns[this.axes.geo],{}),n=Hm(t.joinBy,"zc-key");return"zc-key"===n||this.latLongJoinByKeys.has(n)||Z(this.geoMap.geo.defaultLayer.layerGeojson.features[0].properties[n])||(n="zc-key"),n},cp.prototype.getColumnIdx=function(e){return te(this.axes[e])?this.axes[e][0]:null},cp.prototype.getDataType=function(e){var t=this.getColumnIdx(e);return Z(this.columns[t])?this.columns[t].datatype:ox},cp.prototype.getZ=function(e){return e[this.zidx]},cp.prototype.getClr=function(e){return e[this.clridx]},cp.prototype.getGeo=function(e){return e[this.geoidx]},cp.prototype.getLatitude=function(e){return e[this.latitudeIndex]},cp.prototype.getLongitude=function(e){return e[this.longitudeIndex]},cp.prototype.getMapByKey=function(){return this.geoMapByKey},cp.prototype.getColumn=function(e){return this.columns[this.getColumnIdx(e)]},cp.prototype.getX=cp.prototype.getY=cp.prototype.getGeo,cp.prototype.getDataPointValue=function(e,t,n,r,a,i,o,l,s){n=n&&+n,B(l)&&(l=!/(tooltip|legend)/.test(i));var c=this.axes,u=this.columns[n]||{},d=u.datatype,h=u.dataindex,f=u[d];if(null==t)return null;if(null==c.clr&&"legend"!==i||n!=c.clr){var p,g=a?Ma:Aa;if(s){for(var v=0,y=0;y<s;y++)v+=this.getDataPointUnformattedValue(d,r,y,n,t,i,a,h);p=v}else p=this.getDataPointUnformattedValue(d,r,o,n,t,i,a,h);return""===p&&a?p:g(f,p,d,e,i,l)}return Z(this.clridx)&&dx.isQuantileColorScale(e)?"legend"===i?Aa(f,t,d,e,i,l,"-"):Aa(f,this.getClr(t),d,e,i,l):Aa(f,this.geoMap.seriesdata[r].seriesname,d,e,i,l)},cp.prototype.getDataPointUnformattedValue=function(e,t,n,r,a,i,o,l){var s,c=this.geoMap;return o&&e===sx&&Z(s=Xa(c,t,n,r,a,o,i))?Hm((i===Yx?a:a[l])/s*100,0):i===Yx?a:a[l]},cp.prototype.getDataPoint=function(e,t,n,r,a,i){if(Z(i))return i;var o=e.seriesdata[n].data,l=e.renderer[n].seriesdataAfterUpdate;return l?l[r][a]:o[r][a]},cp.prototype.getCustomizedVal=function(e,t,n,r,a,i,o,l,s,c){var u=this;return B(s)&&(s=!/(tooltip|legend)/.test(o)),t.toString().replace(Hy,function(){var t,d=arguments[0],h=arguments[1],f=arguments[2],p=arguments[3],g=arguments[4],v=arguments[5],y=arguments[6],m=h||f||p||g||v;if(-1!==d.indexOf("{{clr}}"))return l;if(null!=u.columns[m]){if(null==(t=o===Yx?i:u.getDataPoint(e,m,n,r,a,i)))return"";var b=d.match(/[a-z]+/gi)[0];switch(b){case"col":return u.getColumnName(f,s);case"val":return u.getDataPointValue(e,t,h,n,!1,o,r,s,c);case Kx:case $x:case Jx:return u.getDataPointValue(e,t,p||g||v,n,b,o,r,s,c)}}else{if(!y)return d;t=u.getDataPoint(e,m,n,r,a,i);var x=e.dataObject.getMapFeaturesByDataPoint(t,"array");if(x.length)return x[0].properties[y]||d}})},cp.prototype.getColumnName=function(e,t){return t?I(this.columns[e].columnname):z(this.columns[e].columnname)},cp.prototype.getMetaInfoObj=function(e,t,n){function r(e,t){var n=Dm(i[e]||{});return n.value=t,n.columnindex=e,n}var a=this.axes,i=this.columns,o=this.geoMap.seriesdata,l=[];if(te(t)&&t.forEach(function(e,t){var n=i.indexOf(i.filter(function(e,n){return e.dataindex===t})[0]);l.push(r(n,e))}),Z(a.clr)){var s=te(a.clr)?a.clr[0]:a.clr;l.push(r(s,o[n].seriesname))}return l},up.prototype.initialize=function(){var e=this.geoMap,t=e.systemConf.chart.plot.renderer.mode.toLowerCase();pe(e.chartTypes,function(e){"canvas"===t&&Re(Py.svgOnly,e.value)&&(t="svg",Vy.warn("Fallback: "+e.name+" was rendered on svg mode"))}),e.renderer=[],e.rendererConf=[],this.mode=t,this.MODE=t.toUpperCase(),e.extraParams={labelQueue:[],notesArray:[],labelArray:{},barDatasetIndex:0}},up.prototype.draw=function(){var e=this.geoMap,t=e.systemConf;e.chartRendered=!1,Lr(e,t.chart.plot.events,0,"init"),e.setupZScale(),this.renderSeries(),this.transformWrap(),zy.renderCompletedEvents(e,e.updating,e.extraParams,function(){e.updating?e.chartRendered=!0:(e.animate(),e.updating=!1)})},up.prototype.update=function(){this.draw()},up.prototype.renderSeries=function(){var e,t=this.geoMap,n=(t.systemConf,zy.arrangeSeriesRenderingOrder(t)||[]),r=kg();t.rendererArranged=[],pe(n,function(n,a){var i=Hm(n.seriesidx,a),o=t.chartTypes[i];B(t.bubblePieRendererIndex)&&o.value===Kv.geobubblepie&&(t.bubblePieRendererIndex=i),!Z(e=t.renderer[i])&&jy.has(o.name)&&(e=new(jy.get(o.name))(n,t,i),t.renderer[i]=e,t.rendererConf[i]=new Qv.rendererConf),"geoheatmap"===o.name&&zy.setRendererProp(t,e,n,i,0,t.extraParams),t.rendererArranged.push(e),r.origRange=[0,0],t.rendererConf[i].xscale(r).yscale(r).datasetIndex(i).legendOrderIndex(i),clearTimeout(e.renderedTimer),e.render(t.updating)}),t.rendererArrangedReveresd=t.rendererArranged.slice(0).reverse()},up.prototype.triggerChartRendering=function(e){var t=this.geoMap,n=e.series,r=e.index,a=t.chartTypes[r].name;Z(e.chartRenderer)||(e.chartRenderer="CANVAS"===this.MODE?Qv.canvasRenderer.createCanvasRenderer(a):Qv.svgRenderer.createSVGRenderer(a,t)),t.container.select(".highlight-canvas").style("visibility","hidden"),e.commonRendererProp=e.chartRenderer.commonRendererProp,zy.setRendererProp(t,e.chartRenderer,n,r,0,t.extraParams),e.hasOwnProperty("chartRendered")||Object.defineProperty(e,"chartRendered",{get:function(){return e.chartRenderer.chartRendered}}),this["render"+this.MODE](e),e.hasOwnProperty("seriesdataAfterUpdate")||Object.defineProperty(e,"seriesdataAfterUpdate",{get:function(){return Hm(e.chartRenderer.seriesdataAfterUpdate)}})},up.prototype.renderSVG=function(e){var t=this.geoMap;e.series,Qv.svgRenderer.drawSVG(t,t.seriesdata,e.chartRenderer)},up.prototype.renderCANVAS=function(e){var t=this.geoMap,n=e.series;Qv.canvasRenderer.drawCanvas(t,n,e.chartRenderer)};var L_=!(up.prototype.transformWrap=function(){var e=this.geoMap,t=e.plotarea;e.staticPaneSVG.select(".labelholder").attr("transform","translate("+t.left+","+t.top+")")}),M_=null,z_=Dg(),I_=0,D_=(_createClass(dp,null,[{key:"__INIT_EVENT",value:function(){if(!L_){var e=fg(window);e.on("keydown.__META_KEY_ZC",function(){M_=Hv(),z_.each(function(e,t){var n=t.split(".").shift();dp.TEST_KEY(n)&&e(!0)})}),e.on("keyup.__META_KEY_ZC",function(){z_.each(function(e,t){var n=t.split(".").shift();dp.TEST_KEY(n)&&e(!1)}),M_=null}),L_=!0}}},{key:"TEST_KEY",value:function(e){return dp.__INIT_EVENT(),!!M_&&!!M_[e]}},{key:"ADD_HOOK",value:function(e,t){dp.__INIT_EVENT();var n=e+"."+ ++I_;return z_.set(n,t),n}},{key:"REMOVE_HOOK",value:function(e){z_.remove(e)}}]),dp),R_={wheelZoom:!0,doubleClickZoom:!1,pan:!0,scaleExtent:[1,8],extent:[[0,0],[0,0]],translateExtent:[[0,0],[0,0]],metaKey:null,transitionDuration:750},j_=(_createClass(hp,[{key:"initialize",value:function(){var e=this,t=e.options;e._maxZoom=qy.apply(void 0,_toConsumableArray(t.scaleExtent)),e._minZoom=Qy.apply(void 0,_toConsumableArray(t.scaleExtent)),e.d3_zoom=jg().scaleExtent([e._minZoom,e._maxZoom]),e._signal=Vg("start","zoom","end"),e.enableSignals(),t.filter&&e.d3_zoom.filter(t.filter),t.element&&t.element.isD3Selection&&e.bindTo(t.element)}},{key:"enableSignals",value:function(){var e=this,t=e.d3_zoom,n=e._signal;t.on("start",function(){!1!==e.__notify&&n.call("start",e,Hv())}),t.on("zoom",function(){!1!==e.__notify&&n.call("zoom",e,Hv())}),t.on("end",function(){!1!==e.__notify&&n.call("end",e,Hv()),e.__notify=!0})}},{key:"getSignals",value:function(){return this._signal}},{key:"addHook",value:function(e,t){this.hookCount++;var n=e+"."+this.hookCount;return this._signal.on(n,t),n}},{key:"removeHook",value:function(e){this._signal.on(e,null)}},{key:"bindTo",value:function(e){var t=this,n=this.d3_zoom,r=this.options;t._element=e,t._elementNode=e.node(),n.extent(t.__getExtent()),n.translateExtent(t.__getTranslateExtent()),r.metaKey?D_.ADD_HOOK(r.metaKey,function(r){r?(e.call(n),t.constrainEvent()):e.on(".zoom",null)}):(e.call(n),t.constrainEvent())}},{key:"constrainEvent",value:function(){var e=this.options,t=this._element;!1===e.doubleClickZoom&&t.on("dblclick.zoom",null),!1===e.wheelZoom&&t.on("wheel.zoom",null),!1===e.pan&&t.on("mousedown.zoom",null),!1===e.touchZoom&&t.on("touchstart.zoom",null)}},{key:"getTransform",value:function(){return Hv()&&Hv().transform||this._element&&Hg(this._element.node())||Bg}},{key:"step",value:function(e,t){e=e<=0?1/-e:e,this.d3_zoom.scaleBy(this.__getZoomTransition(t),e)}},{key:"zoomToBounds",value:function(e,t,n){this.zoomToRect(Ne(e),t,n)}},{key:"zoomToRect",value:function(e,t,n){this.zoomToPoint(hp.centroid(e),Hm(t,this.__getConstrainedScale(e)),n)}},{key:"zoomToPoint",value:function(e,t,n){t=this.__limitScale(Hm(t,this._maxZoom)),e=this.__constrainPoint(e,t),this.interpolateZoom(e,t,n)}},{key:"interpolateZoom",value:function(e,t,n){this.zoomToIdentity(hp.getIdentity(e,t),n)}},{key:"zoomToIdentity",value:function(e,t,n){var r=!(2<arguments.length&&void 0!==n)||n;this.__notify=r,this.__getZoomTransition(t).call(this.d3_zoom.transform,e)}},{key:"reset",value:function(){this._element.transition().duration(this.options.transitionDuration).call(this.d3_zoom.transform,Bg)}},{key:"invert",value:function(e){return this.getTransform().invert(e)}},{key:"update",value:function(e){var t=this.options=Im(this.options,e,!0,!0);this.d3_zoom.scaleExtent(t.scaleExtent).translateExtent(this.__getTranslateExtent())}},{key:"updateExtent",value:function(e){te(e)&&te(e[0])&&te(e[1])&&(this.options.extent=e,this.d3_zoom.extent(e),this.options.translateExtent=e,this.d3_zoom.translateExtent(e),this._element&&(this._element.call(this.d3_zoom),this.constrainEvent()))}},{key:"__getExtent",value:function(){return this.options.extent||[[0,0],[this._elementNode.clientWidth,this._elementNode.clientHeight]]}},{key:"destroy",value:function(){var e=this;e._signal=null,e._element&&e._element.on(".zoom",null),pe(e,function(t,n){e[n]=null,delete e[n]})}},{key:"__getTranslateExtent",value:function(){return this.options.translateExtent||this.__getExtent()}},{key:"__getZoomTransition",value:function(e){return this._element.transition().duration(Hm(e,this.options.transitionDuration))}},{key:"__getConstrainedScale",value:function(e){var t=Ne(this.__getTranslateExtent());return qy(1,Qy(this._maxZoom,1/qy(e.width/t.width,e.height/t.height)))}},{key:"__constrainPoint",value:function(e,t){var n=Ne(this.__getTranslateExtent());return[Qy(n.x,qy(n.width/2-t*e[0],n.width-n.width*t)),Qy(n.y,qy(n.height/2-t*e[1],n.height-n.height*t))]}},{key:"__limitScale",value:function(e){return qy(this._minZoom,Qy(e,this._maxZoom))}}],[{key:"getIdentity",value:function(e,t){return Bg.translate(e[0],e[1]).scale(t)}},{key:"centroid",value:function(e){return[+e.x+ +e.width/2,+e.y+ +e.height/2]}}]),hp);j_.prototype.on=j_.prototype.addHook,km.setComponent("ZoomD3",j_),km.setComponent("ZoomD3Options",function e(t){_classCallCheck(this,e),this.settings=_extends({},R_,t)});var H_={};ve(fp,wa),fp.helpers=wa.helpers,fp.SeriesTypes=jy,fp.getDefaultProjection=function(){return{name:"geoMercator"}},fp.getGeoJSON=function(e,t){if(Z(e)&&rp.GEO_FORMATS.has(e.type)&&"Topology"===e.type){var n=e.projection;e=Ov.feature(e,e.objects[t]),Z(n)&&(e.projection=n)}return e},fp.prototype.initialize=function(){var e=this,t=(e.userdata.map,e.chartTypes.some(function(e){return Re(Py.svgOnly,e.value)}));e.id="ZC_GEO_"+e.idNumeric,Km.IE&&parseFloat(Km.VERSION)<11&&(e.fixIE=!0),e.geo={layerCount:0,extraLayers:{},extraLayersRenderingOrder:["globe","graticule","allAreas","backgroundLayer"],utils:{},highlightUtils:{},rawLayers:[],customLayers:Dg()},e.processUserData(e.themeoptions),e.plot={},e.geo.isCanvasMode="svg"!==e.systemConf.map.renderingMode.toLowerCase(),e.geo.isPlotCanvasMode="svg"!==e.systemConf.chart.plot.renderer.mode.toLowerCase()&&!t,fp.helpers.constructChartGroups(e),e.seriesContainer=e.wrap.select(".seriesholder"),e.chartGroup=e.svg.select(".chartgroup"),e.legendHighlight=oi(this,this.wrap),e.render()},fp.prototype.render=function(){var e=this,t=e.systemConf,n=t.map.animation.enabled&&!e.updating;if(n=n&&(e.dataObject.hasHeatmap&&!e.dataObject.hasPointChart||!e.seriesdata.length),e.setChartDimension(),e.updateCanvasArea(),e.applyChartProperties(),!e.hasGeoLayer||!t.map.allAreas&&!e.dataObject.totalDataCount)return e.clearMap(),e.hideLoading(e.container),e.handleNoData(t.noDataHandler),e.chartRendered=!0,e.handleHiddenContainer(!0),void Lr(e,t.canvas.events,0,e.updating?"onreload":"onload");e.dataObject.totalDataCount||(e.clearMap(),e.clearChart(null,null,!0)),e.getChartSeriesColor(),e.parseScale(),e.hasSeriesPoints&&(Xv.render(e),fw.updatePlotarea4BlockTooltip(e));var r=km.getComponent("annotation");r._empty||r.addBlockAnnotations(e),e.updatePlotareaProp(),e.setupFeatureContainerLayer(),e.setUpMapLayer(),n&&(e.animateSelection=e.container.selectAll(".geomap-features-series,.geomap-features-extras,.xychart,.static,.label-container,.labelholder").style("opacity",0)),Lr(e,t.map.events,0,"init"),e.renderGlobe(),e.renderGraticule(),e.renderMapLayer(),Lr(e,t.map.events,0,e.updating?"onreload":"onload"),e.geo.customLayers.size()&&e.geo.customLayers.each(function(e){return e&&e.update()}),e.plot.renderer?e.plot.renderer.draw(!0):e.hasSeriesPoints&&(e.plot={renderer:new up(e)},e.plot.renderer.draw()),e.drawPlotBorder(),e.renderLabels(),e.handleEvent(),e.drawPlotareaClippath(),e.plot.renderer||(e.animate(),Lr(e,t.canvas.events,0,e.updating?"onreload":"onload"),e.updating=!1)},fp.prototype.setupFeatureContainerLayer=function(){var e=this,t=e.geo,n=(ke(t.isCanvasMode?"canvas":"svg"),t.isCanvasMode),r=t.isPlotCanvasMode,a=t.mapArea=Object.create(e.plotarea);e.seriesContainer.attr("transform","translate("+a.left+","+a.top+")"),n?(t.featureLayerExtra=Qv.canvasRenderer.updateCanvasContext(e,"geomap-features-extras",".static",e.chartParentElement),t.geoLabelLayer=t.featureSeriesLayer=Qv.canvasRenderer.updateCanvasContext(e,"geomap-features-series",".static",e.chartParentElement)):(t.featureSeriesLayer=Et("g",".feature-layer-series",[1],e.seriesContainer),t.geoLabelLayer=Et("g",".geo-label-layer",[1],e.seriesContainer)),r?(t.pointLabelLayer=e.labelHolderContext=Qv.canvasRenderer.updateCanvasContext(e,"label-container",e.fixIE?".static":"div.legendarea",e.chartParentElement),t.pointLayer=Qv.canvasRenderer.updateCanvasContext(e,"zc-canvas",".static",e.chartParentElement)):t.labelLayer=e.staticPaneSVG.select(".labelholder").attr("transform","translate("+a.left+","+a.top+")")},fp.prototype.setupLayerSettings=function(e){var t=this.geo,n=t.utils.projection,r=n&&n.rotate&&n.rotate(),a=(this.behaviouralEvents&&this.behaviouralEvents.eventManager.behaviours||{}).PLOT_ZOOM;if(n=t.utils.projection=t.highlightUtils.projection=this.getProjection(e),a){var i=this.getProjectionExtent(),o=a.instance.getTransform(),l=Af(this),s=j_.centroid(n_.geoBoundToRect(i)),c=l.translate,u=l.scale;this.geo.isGlobeMap?(n.scale(l.scale*o.k),n.translate(s),n.rotate(r)):(n.scale(u*o.k),n.translate([o.x+c[0]*o.k,o.y+c[1]*o.k]))}t.utils.geoPath=Pv().projection(n),t.highlightUtils.geoPath=Pv().projection(n),t.isCanvasMode&&t.utils.geoPath.context(t.featureSeriesLayer)},fp.prototype.getProjection=function(e){var t,n=this.geo.defaultLayer.layerGeojson,r=this.systemConf.map,a=Hm(r.projection,e.projection,n.projection),i=e,o=this.getProjectionExtent();for(var l in this.geo.isGlobeMap=a&&"geoOrthographic"===a.name,Z(a)?this.geo.isGlobeMap&&(i={type:"Sphere"}):a=fp.getDefaultProjection(),t=hg[a.name](),a)a.hasOwnProperty(l)&&"name"!==l&&t[l]&&t[l](a[l]);return t.fitExtent(o,i),t},fp.prototype.getProjectionExtent=function(){var e=this.geo.mapArea,t=this.systemConf.map.extent;return[[t.left,t.top],[e.width-t.right,e.height-t.bottom]]},fp.prototype.addLayer=function(e,t,n,r,a){var i=this.geo,o=i.layerCount++,l={series:i.featureSeriesLayer,extra:i.featureLayerExtra,highlight:i.highlightLayer}[r];return n=n||"map-layer-"+o,i.isCanvasMode||(l=Et("g","."+n,[n],i.featureSeriesLayer)),new rp(e,i.utils,l,t,this,a)},fp.prototype.addGeoLayer=function(e,t){var n=this.geo.customLayers,r="custom-geo-layer-"+this.geo.layerCount++,a=this.addLayer(e,t,r,"extra",!1);return n.set(r,a),r},fp.prototype.removeGeoLayer=function(e){this.geo.customLayers.has(e)&&(this.geo.customLayers.get(e).destroy(),this.geo.customLayers.remove(e)),n_.clearContext(this.geo.featureLayerExtra),this.repaintGeoLayer()},fp.prototype.setupSvgLayer=function(e){var t=this,n=t.geo,r=n.mapArea;t.systemConf.map,n.featureSeriesLayer=Et("g",".feature-layer-series",[1],t.seriesContainer),t.seriesContainer.attr("transform","translate("+r.left+","+r.top+")"),n.labelLayer=t.staticPaneSVG.select(".labelholder").attr("transform","translate("+r.left+","+r.top+")"),"canvas"===t.systemConf.chart.plot.renderer.mode&&(t.labelHolderContext=Qv.canvasRenderer.updateCanvasContext(t,"label-container",t.fixIE?".static":"div.legendarea",t.chartParentElement),n.pointLayer=Qv.canvasRenderer.updateCanvasContext(t,"zc-canvas",".static",t.chartParentElement))},fp.prototype.setupCanvasLayer=function(){var e=this,t=e.geo;t.featureLayerExtra=Qv.canvasRenderer.updateCanvasContext(e,"geomap-features-extras",".static",e.chartParentElement),t.featureSeriesLayer=Qv.canvasRenderer.updateCanvasContext(e,"geomap-features-series",".static",e.chartParentElement),e.dataObject.hasPointChart&&(t.pointLayer=Qv.canvasRenderer.updateCanvasContext(e,"zc-canvas",".static",e.chartParentElement)),t.labelLayer=e.labelHolderContext=Qv.canvasRenderer.updateCanvasContext(e,"label-container",e.fixIE?".static":"div.legendarea",e.chartParentElement)},fp.prototype.getLayerData=function(e){var t=H_;return Z(t[e])?(this.emptyMapLayer=!1,t[e]):void(this.emptyMapLayer=!0)},fp.prototype.setUpMapLayer=function(){var e,t=this.systemConf,n=this.dataObject;e=t.map.allAreas?"FeatureCollection"!==this.geo.defaultLayer.layerGeojson.type?this.geo.defaultLayer.layerGeojson:n.getMapFeatures("geojson"):n.getUserMapFeatures("geojson"),this.geo.renderedLayer=e,this.setupLayerSettings(e)},fp.prototype.setupZScale=function(){this.dataObject.hasZaxis&&(this.zscale=this.scales[0].create())},fp.prototype.renderGraticule=function(){var e=this.systemConf.map.graticule||{},t=!0===e.show,n=this.geo.extraLayers;if(t)if(this.updating&&n.graticule)n.graticule.update();else{var r=Tv();n.graticule=this.addLayer(r(),e,"graticule","extra")}else Z(n.graticule)&&(n.graticule.destroy(),n.graticule=null)},fp.prototype.renderGlobe=function(){var e=this.systemConf.map,t="geoOrthographic"===(e.projection||{}).name&&!Z(e.globe.show),n=this.geo.extraLayers;t||e.globe.show?this.updating&&n.globe?n.globe.update():n.globe=this.addLayer({type:"Sphere"},e.globe,"sphere","extra"):Z(n.globe)&&(n.globe.destroy(),n.globe=null)},fp.prototype.renderMapLayer=function(){var e=this,t=e.systemConf,n=e.dataObject,r=t.map,a=n.userUnmatchedMapFeatures.values();if(!n.hasHeatmap){var i,o=e.geo.defaultLayer.layerGeojson;((i="FeatureCollection"!==o.type?o:n.userMapFeatures.values()).length||i.type)&&(e.geo.extraLayers.backgroundLayer=e.addLayer(i,r,"background-layer","extra",r.useMeshOutline))}e.updating&&e.geo.extraLayers.allAreas?e.geo.extraLayers.allAreas.update(a):r.allAreas&&(n.userUnmatchedMapFeatures.empty()||(e.geo.extraLayers.allAreas=e.addLayer(a,r,"all-areas-layer","extra",r.useMeshOutline)))},fp.prototype.renderLabels=function(){this.geo.geoLabels=new lp(this)},fp.prototype.handleEvent=function(){var e=this,t=this,n=t.geo;if(t.updating&&t.eventHandler||!t.dataObject.totalDataCount){if(!t.eventHandler)return!1}else{t.createEventGroups();var r=Et("g",".trackerGroup",[1],t.eventWrap).attr("pointer-events","all"),a=Et("rect",".eventhandler",[1],r),i=t.eventHandler=new BC(t,r);t.eventHandler.trackerGroup=r,t.eventHandler.trackerElement=a,i.init(),i.mapEvents=new m.mapEvents(t),ui(t);var o={mousemove:function(){if(e.chartRendered){e.eventHandler.isSingleSource();var t=e.eventHandler.getSourceNode();return e.eventHandler.getRelativeMousePosition(t,!1),i.mapEvents.handleEvent(e.eventHandler.mousePos,"mousemove",e.eventHandler.targetEvent)}},mouseout:function(){if(e.chartRendered){e.eventHandler.isSingleSource();var t=e.eventHandler.getSourceNode();return e.eventHandler.getRelativeMousePosition(t,!1),i.mapEvents.handleEvent(null,"mouseout",e.eventHandler.targetEvent)}},click:function(){if(e.chartRendered){e.eventHandler.isSingleSource();var t=e.eventHandler.getSourceNode();return e.eventHandler.getRelativeMousePosition(t,!1),i.mapEvents.handleEvent(e.eventHandler.mousePos,"click",e.eventHandler.targetEvent)}},doubleclick:function(){if(e.chartRendered){e.eventHandler.isSingleSource();var t=e.eventHandler.getSourceNode();return e.eventHandler.getRelativeMousePosition(t,!1),i.mapEvents.handleEvent(e.eventHandler.mousePos,"doubleclick",e.eventHandler.targetEvent)}}},l={click:o.click,dblclick:o.doubleclick,contextmenu:o.contextmenu},s={mousemove:o.mousemove,mouseout:o.mouseout},c={tap:o.click,dbltap:o.doubleclick,singletouchmove:o.mousemove,touchend:o.mouseout},u={target:"plot",chartObj:this};this.eventHandler.handlers=o,Mr(r,s,null,u,"chart"),Mr(r,l,null,u,"chartmove"),Mr(r,{},c,u),n.eventLayer=i.trackerElement.styles({"pointer-events":"visible"})}t.eventHandler.mapEvents.cache=Dg(),t.positionEventTrackerElement(),t.behaviouralEvents?t.behaviouralEvents.update():t.behaviouralEvents=new Rw(t),t.handleLegendEvents()},fp.prototype.clearMap=function(){n_.clearContext(this.geo.featureLayerExtra),n_.clearContext(this.geo.featureSeriesLayer),n_.clearContext(this.geo.geoLabelLayer),n_.clearContext(this.geo.pointLayer),n_.clearContext(this.geo.pointLabelLayer),Z(this.eventHandler)&&this.eventHandler.mapEvents.clearHighlightedPoints()},fp.prototype.processUserData=function(e){var t,n=this,r=n.systemConf=Im(e,n.userdata,!0,!0),a=r.map,i=n.getLayerData(a.scope,a.layerName);n.updating||Lr(n,n.systemConf.canvas.events,0,"init"),t=Rm(r,"seriesdata")||{},n.seriesdata=t.chartdata||[],(n.geo.defaultLayer={layerGeojson:fp.getGeoJSON(i,a.layerName),layerOriginal:i}).layerGeojson?(n.hasGeoLayer=!0,n.dataset=new cp(n),n.dataObject=new sp(n),n.hasSeriesPoints=0<n.dataObject.totalDataCount,n.nochartdata=!n.hasSeriesPoints&&n.emptyMapLayer):(n.hasGeoLayer=!1,n.nochartdata=!0)},fp.prototype.addRemoveSeries=function(){this.eventHandler,this.updating=!0,this.clearMap(),this.dataObject.initialize(),this.updatePlotareaProp(),this.drawPlotareaClippath(),this.repaintChart()},fp.prototype.repaintChart=function(){this.repaintGeoLayer(),this.eventHandler.mapEvents.cache.clear(),this.eventHandler.oldInfo=null,this.plot.renderer.draw()},fp.prototype.repaintGeoLayer=function(){pe(this.geo.extraLayers,function(e){return e&&e.update()}),this.geo.customLayers.each(function(e){return e&&e.update()}),this.geo.geoLabels.update(!0)},fp.prototype.zoomToPoint=function(e,t){this.__enableZoom();var n=this.behaviouralEvents.eventManager.behaviours.PLOT_ZOOM.instance;!function(e,t,n){switch(e.type){case"bound":n.zoomToBounds(e[e.type],t);break;case"rect":n.zoomToRect(e.rect,t);break;case"point":n.zoomToPoint(e.point,t);break;case"rotate":n.rotateTo(e.rotate,t)}}(this.renderer[e.seriesIndex].getZoomPosition(e),t,n)},fp.prototype.animate=function(){var e=this,t=e.systemConf.map.animation,n=e.animateSelection;n&&!e.updating?n.transition().duration(t.duration).ease(bg(t.easingType)).on("start",function(){n.style("opacity",0)}).on("end",function(){e.chartRendered=!0}).attrTween("tween",function(){return function(e){return n.style("opacity",e),e}}):e.chartRendered=!0},Vx.GeoMap=fp,pp.fixMouseCoordinates=function(e,t){return t?{x:t[0],y:t[1]}:{x:null,y:null}},pp.fixEventArguments=function(e){return{seriesPos:e.seriesIndex,itemPos:e.itemIndex,subseriespos:e.subSeriesIndex,data:e}},pp.prototype.initialize=function(){var e=this.geoMap,t=e.geo,n=this.utils=t.utils;e.systemConf.map,this.eventConfig=Hm(e.systemConf.map.events,{}),this.outerGeoBounds=n.geoPath.bounds(t.defaultLayer.layerGeojson);var r=Et("g",".zcMapClipHighlight",[1],e.staticPaneSVG,":first-child").attr("clip-path","url("+e.defsLocation+"#highlight_group_clip_"+e.id);this.highlightElement=Et("g",".map-highlight",[1],r).attr("transform","translate("+e.plotarea.left+","+e.plotarea.top+")"),this.timers={},this.highlightCache={},this.outLine=this.getOutLine()},pp.prototype.showTooltip=function(e,t,n,r,a){var i,o,l=this.geoMap,s={x:0,y:0},c=!0,u=r.point.seriesIndex,d=l.chartTypes[u].value,h=l.renderer[u].plotOptions;"feature"!==r.type&&a||("point"===r.type&&(c=!1,s=l.dataObject.getXYPoint(t)),o=(i=lr(Xn(n),e,s.x,s.y,l,t,!1,!1,{},c,!1,!1)).helpers,Qn(d)?i.distance=l.dataObject.getXYvalue(!1,!1,null,null,null,t,"z")/2:"point"===r.type&&(i.distance=10*(h.marker.size-1)),o.itempos=t.itemIndex,o.subseriespos=t.subSeriesIndex,o.seriesindex=t.seriesIndex,l.eventHandler.tooltipElement.show(l,i,null,!0,i.helpers))},pp.prototype.hideTooltip=function(e){var t=this.geoMap.systemConf.tooltip.hideDelay,n=this.geoMap.eventHandler.tooltipElement;e?n.hide(n.element):(clearTimeout(this.timers.tooltipDelay),this.timers.tooltipDelay=setTimeout(function(){n.hide(n.element)},Hm(t,150)))},pp.prototype.getPoint=function(e){var t,n=this.geoMap,r=null;return e instanceof ap?(t=e.toArray(),e=e.toLatLong(this.geoMap).toArray()):e instanceof ip&&(t=e.toXY(n),e=e.toArray()),this.outLine.some(function(e){return Lv(e,t)})&&n.rendererArrangedReveresd.some(function(a){if(!n.eventHandler.eventDisabled(a.series)&&a.getPoint)return r=a.getPoint(e,t,a.index)}),r},pp.prototype.getPointsByIndex=function(e,t){var n=this.geoMap,r=[];if(Z(t)){var a=n.dataObject.flattenPoints.get("geoheatmap");r=Dx.filterSelectionByColor(a,!0,t,n)}else Z(e)&&n.seriesdata[e].data.forEach(function(e){r=r.concat(e)});return r},pp.prototype.getHighlightEffect=function(e,t,n,r){var a=this.geoMap,i=a.legendHighlight.getLegendHighlightEffect(e,n,r),o={fillColor:pm};return i!==fm&&(a.fixIE&&(t="transparent"),o=a.legendHighlight.getEffect(i,"area",t,{fill:pm,stroke:t},0,r),o=_extends({},o,{strokeWidth:Hm(o.strokeWidth,2),fillColor:o.fill})),o},pp.prototype.highlightPoints=function(e,t,n){var r=this.geoMap,a=r.eventWrap.selectAll("#zcscatterhighlight"),i=r.staticPaneSVG.selectAll("g.map-highlight");switch(el(r),t){case"feature":a.attr("visibility","hidden"),i.attr("visibility","visible"),this.highlightGeoFeature(e,n);break;case"point":a.attr("visibility","visible"),i.attr("visibility","hidden"),a.selectAll("*").remove(),a.attr("visibility","visible");var o=e.seriesIndex,l=(e.subSeriesIndex,e.itemIndex,r.chartTypes[o]),s=r.dataObject.getXYPoint(e),c=(r.seriesdata[o].plotoptions,r.systemConf.chart.plot.plotoptions[l.name],mt(a,"g",[1],".","class","highlight"+o),"geobubblepie"==l.name?r.renderer[r.bubblePieRendererIndex]:r.renderer[o]),u=c.chartRenderer.getHighlighter(r),d=u._defaultH();e._x=s.x,e._y=s.y,e._size=c.chartRenderer.getSymbolSize(e),d[0].path.call(u,e,d[0])}},pp.prototype.highlightGeoFeature=function(e,t){var n=this.geoMap;this.highlightLayer=new rp(e,n.geo.highlightUtils,this.highlightElement,t,n)},pp.prototype.clearHighlightedPoints=function(){this.geoMap.staticPaneSVG.selectAll("g#zcscatterhighlight, g.map-highlight").attr("visibility","hidden")},pp.prototype.getTransform=function(){return Hg(this.geoMap.geo.eventLayer.node())},pp.prototype.handleEvent=function(e,t,n){e=pp.fixMouseCoordinates(this.geoMap,e),n=n||Hv();var r=this.geoMap,a=new ap(e.x,e.y),i=this.getPoint(a),o=!1!==r.systemConf.tooltip.enabled,l=Hm(r.zcEventType,t),s=r.eventHandler.oldInfo,c=!(!s||s.point!==(i&&i.point));if("mouseout"===t)i=r.eventHandler.oldInfo;else if(Z(r.eventHandler.oldInfo)&&!Z(i)||("doubletap"===l||"tap"===l&&c)&&"mouseout"!==t)return r.eventHandler.mapEvents.handleEvent(null,"mouseout",r.eventHandler.targetEvent);if(Z(i)){var u=i.point,d=u.seriesIndex,h=r.renderer[d],f=Gn(null,h.plotOptions,r,l),p=r.eventHandler,g=!1,v=t,y={mousemove:"handleMouseMove",click:"handleMouseClick",mouseout:"handleMouseOut"};if(Km.isTouchDevice&&(g=!0,"click"===t&&(Oc(l,r),v="mousemove")),Z(f)){var m=zc(f,i,0,null,r);V(m.callback,r.eventHandler.targetEvent,m.args,r)}p.eventManager.isDefaultAllowed(f,n)&&Z(this[y[v]])&&this[y[v]](i,c),"mousemove"===v?(o&&(clearTimeout(this.timers.tooltipDelay),this.showTooltip(e,u,n,i,c)),c||(dc.call(r.eventHandler.eventManager,e,{nearest:u},Gn(null,h.plotOptions,r,"cursor")),r.eventHandler.eventManager.selectionManager.nearest=u,r.eventHandler.oldInfo=i,r.eventHandler.oldInfo.nearestPoint=pp.fixEventArguments(u)),r.eventHandler.reverseLegendHighlight.highlight(u),r.eventHandler.unselectedHighlight.highlight(u)):"mouseout"===v&&(o&&this.hideTooltip(g),hc.call(r.eventHandler.eventManager),r.eventHandler.reverseLegendHighlight.reset(),r.eventHandler.oldInfo=null)}},pp.prototype.getOutLine=function(){var e=this.geoMap,t=document.createElementNS(Dv("svg").space,"path");return fg(t).datum({type:"Sphere"}).attr("d",e.geo.highlightUtils.geoPath).attr("d").split("M").slice(1).map(function(e){return(e=e.slice(0,e.length-1)).split("L").map(function(e){return e.trim().split(/[,\s]/).map(function(e){return parseInt(e)})})})},pp.prototype.getTreeDiagram=function(e){var t=this.geoMap;return Iv().x(function(e){return t.dataObject.getXYPoint(e).x}).y(function(e){return t.dataObject.getXYPoint(e).y}).extent([[0,0],[t.plotarea.width,t.plotarea.height]]).addAll(e)},pp.prototype.handleMouseMove=function(e,t){var n=this.geoMap,r=e.point,a=r.seriesIndex;if(!t){var i=Ln(n,a,r),o=this.getHighlightEffect(a,i,"selectedSeries","plot");"feature"===e.type&&(r=e.feature),this.highlightPoints(r,e.type,o)}},pp.prototype.handleMouseOut=function(e){var t=this.geoMap;this.clearHighlightedPoints(),hc.call(t.eventHandler.eventManager)},pp.prototype.handleMouseClick=function(e){this.geoMap.eventHandler.mapEvents.hideTooltip(!0)},m.mapEvents=pp,gp.getPlotOptions=function(e,t){return Rm(e.systemConf,"chart.plot.plotoptions."+t)},gp.prototype.initialize=function(){var e=this,t=e.geoMap,n=t.chartTypes[e.index],r=nC(t,e.index);return t.context=Hm(t.geo.pointLayer,t.geo.featureLayer),e.isCanvasMode=t.geo.isCanvasMode,e.plotOptions=Im(gp.getPlotOptions(t,n.name),Hm(e.series.plotoptions,{}),!0),e.fillColor=Sn(t,e.index,null,r,null,e.renderingMode),e.strokeColor=An(t,e.index,r),e},gp.prototype.update=function(){this.render(!0)};var B_=(_createClass(vp,[{key:"getPosition",value:function(){return this[this.type]}}]),vp);ve(yp,gp),Vx.GeoMap.SeriesTypes.set("geoscatter",yp),yp.prototype.render=function(){this.geoMap.plot.renderer.triggerChartRendering(this)},yp.prototype.getZoomPosition=function(e){var t=this.geoMap,n=t.behaviouralEvents.eventManager.behaviours.PLOT_ZOOM.instance.getTransform();return new B_("point",n.invert(t.dataObject.getXYPoint(e).toArray()))},ve(mp,yp),Vx.GeoMap.SeriesTypes.set("geobubble",mp),mp.prototype.getPoint=function(e,t,n){var r,a=this.geoMap,i=a.dataObject,o=a.chartTypes[this.index].name,l=i.flattenPoints.get(o),s=ur(a,a.chartTypes[this.index].value),c=a.systemConf.chart.plot.plotoptions[o],u=c&&c.events&&c.events.triggerOffset||10,d=i.isCombinationalChart,h=a.eventHandler.mapEvents,f=h.cache.get("bubbleQuadtree"),p=a.plotarea;if(!l)return null;Z(f)||(f=h.getTreeDiagram(l).size(function(e){return i.getZFromPoint(e)}),h.cache.set("bubbleQuadtree",f));var g=f.findAll(t[0],t[1],s,u).points,v=null;if(!g)return null;var y=g.map(function(e){var n=i.getZFromPoint(e)/2,r=i.getXYPoint(e),a=function(e,t,n,r){return Jy((e-n)*(e-n)+(t-r)*(t-r))}(t[0],t[1],r.x,r.y);if(cr(r.x,r.y,{x:0,y:0,width:p.width,height:p.height}))return{radius:n,bubbleDistance:a-n,pointDistance:a,over:a-n<=0,point:e}}).filter(function(e){return Z(e)});return 1===y.length?(!d||d&&y[0].over)&&(v=y[0].point):1<y.length&&(1===(r=y.filter(function(e){return e.over})).length?v=r[0].point:1<r.length?v=r.slice(0).sort(function(e,t){return Wg(e.radius,t.radius)})[0].point:d||(v=y.slice(0).sort(function(e,t){return Wg(e.bubbleDistance,t.bubbleDistance)})[0].point)),v&&(n||yn(v,a))?{type:"point",point:v}:void 0},ve(bp,mp),Vx.GeoMap.SeriesTypes.set("geobubblepie",bp),bp.prototype.getPoint=function(e,t){var n,r,a,i,o=this.geoMap,l=De(this).getPoint.call(this,e,t,!0),s=null;if(l){if(n=l.point,r=o.dataset.getGeo(l.point),a=cw.getKey(vm,vm,vm,[r,r]),!(i=o.subrenderer[n.subSeriesIndex][a]))return!1;if(i.data.some(function(e){if(e.data.disabled||e.data.dummy)return!1;var n=e.data,r=o.dataObject.getXYPoint(e.data),a=nc(o,n.seriesIndex,n.subSeriesIndex,n),i=am(t[0]-r.x,-(t[1]-r.y)),l=a&&es(a.start,a.end,i);return l&&(s=n),l}),s&&yn(s,o))return{type:"point",point:s}}return null},et.geoheatmap=function(){return{animation:{enabled:!1},datalabels:{showAs:"geo",fontWeight:"bold",strokeColor:"contrast",strokeWidth:1.5,textOverlap:"hidden"},gradients:{options:{linear:{y2:100},radial:{radius:100,gradientUnits:"objectBoundingBox"}}}}},ve(xp,gp),Vx.GeoMap.SeriesTypes.set("geoheatmap",xp),xp.prototype.render=function(e){var t=this.initialize(),n=t.geoMap,r=n.dataObject.getUserMapFeatures(),a=t.plotOptions,i=a.gradients,o=n.systemConf.map,l=Rg(["radial","linear"]).has(i.type);t.features=[],t.seriesdataAfterUpdate=[],t.series.disabled||pe(t.series.data,function(e,s){e=n.dataObject.updateSeriesdatabyCategories(R(e)),pe(t.seriesdataAfterUpdate[s]=e,function(e,n){var s=t.geoMap.dataset.getGeo(e);if(r.has(s)){var c=r.get(s),u=null;if(l){var d=n_.getFeatureGradientBBox(c,i.type,t.geoMap.geo.utils.geoPath);u=[d.width,d.height],c.transform={x:d.x,y:d.y}}c.styles={fillColor:t.fillColor(t.index,e,null,null,t.plotOptions.fillOpacity,u),strokeColor:t.strokeColor(t.index,e,Hm(a.strokeColor,o.strokeColor),null,a.strokeOpacity,n),strokeWidth:a.strokeWidth,strokeStyle:a.strokeStyle,fillOpacity:Hm(a.fillOpacity,1),strokeOpacity:Hm(a.strokeOpacity,1)},t.features.push(c)}})}),e?t.mapLayer.update(t.features):t.mapLayer=t.geoMap.addLayer(t.features,null,"series-"+t.index,"series",o.useMeshOutline),Dy&&n.extraParams.labelQueue.push({renderer:t,charttype:"scatter",chartObj:n,args:[t.series,t.index]}),t.renderedTimer=setTimeout(function(){t.chartRendered=!0},17)},xp.prototype.commonRendererProp=function(){return this.geoMap.rendererConf[this.index]},xp.prototype.getZoomPosition=function(e){var t=this.geoMap,n=t.behaviouralEvents.eventManager.behaviours.PLOT_ZOOM.instance.getTransform();return t.geo.isGlobeMap?new B_("rotate",t.dataObject.getLatLonPoint(e)):new B_("bound",t.geo.utils.geoPath.bounds(t.dataObject.getFeatureByPoint(e)).map(function(e){return n.invert(e)}))},xp.prototype.getPoint=function(e,t,n){var r=this.features,a=this.geoMap,i=a.dataObject,o=Se(r,function(t){return zv(t,e)});if(o){for(var l,s=i.userDataHashed.get(o.properties[i.joinByKey]),c=s.length;c--;){var u=s[c].seriesIndex;if(u===n&&!a.seriesdata[u].disabled){l=s[c];break}}if(!a.hasColorScale||a.hasColorScale&&Pn(a.dataset.getClr(l),a))return{type:"feature",feature:o,point:l}}return null},yp.prototype.getPoint=function(e,t){var n=this.geoMap,r=n.plotarea,a=n.dataObject,i=n.chartTypes[this.index].name,o=a.flattenPoints.get(i),l=n.eventHandler.mapEvents,s=ur(n,n.chartTypes[this.index].value),c=l.cache.get("scatterQuadtree"),u=this.plotOptions,d=t[0],h=t[1];if(te(o)){Z(c)||(c=n.eventHandler.mapEvents.getTreeDiagram(o),l.cache.set("scatterQuadtree",c)),ix.has(u.marker.symbol)&&(h+=10*u.marker.size/2);var f=c.find(d,h,s),p=f&&a.getXYPoint(f);return f&&cr(p.x,p.y,{x:0,y:0,width:r.width,height:r.height})&&(!n.hasColorScale||n.hasColorScale&&yn(f,n))?{type:"point",point:f}:null}},i_.line=function(){function e(i,o,l,s){var c=t.params,u=c.chartObj,d=c.xscale,h=c.yscale,f=c.datasetIndex,p=c.legendOrderIndex,g=c.rendererIndex,v=(c.axisrotated,c.commonPlotOptions),y=c.color,m=c.labelQueue,b=c.yaxiscolumnorder,x=o,w=(x=u.dataObject.categoryHierarchy?o[f]:u.seriesdata[f]).plotoptions,C=t.params.gvp=zm.getValueOfPlotOptions(w,v),k=(u.systemConf.chart.axes.xaxis.reversed,nC(u,f)),_=u.canvasarea,S=x.row+"_"+x.column,O=ln(u,S,f),A=(O.value,C("dashStyle")),P=U(C("strokeWidth"),2),T=C("strokeOpacity"),E=An(u,p,S,k,c),L=t.params.markerOptions=w?Im(v.marker,w.marker,!0):v.marker,M=(t.params.hoverOptions=w&&w.hoveroptions?Im(v.hoveroptions,w.hoveroptions,!0):v.hoveroptions,at(C("lineCap"),A)),z=rt(A,P),I=!(!Ht(u,"marker")||!jt(u,"marker",Qy(_.width,_.height)))&&L.enabled,D=u.dataset.getDataType("x"),j=u.dataset.getDataType("y",b),H=D==ox?d.domain():null,B=j==ox?h.domain():null;Z(l)?(i.lineWidth=Hm(l["stroke-width"],P),Z(s)&&(I=!0,T=1e-8)):i.lineWidth=P,x.disabled||(e.seriesdataAfterUpdate=[],i.save(),x.data.forEach(function(t,a){var o;i.beginPath(),o=D==ox||j==ox?u.dataObject.updateSeriesdatabyCategories(R(t),H,B,b):t,u.renderVisiblePointsOnly&&(o=Gt.helpers.filterPointsInViewport(u,o,"line","x",f)),e.seriesdataAfterUpdate[a]=o,wp(c,o,n,r,S).context(i)(o),z.length&&"object"===(void 0===z?"undefined":_typeof(z))&&Z(i.setLineDash)&&(i.setLineDash(z),i.lineCap=M),i.strokeStyle=E(p,vm,C("strokeColor")||y,vm,T,a),i.stroke()}),i.restore(),I&&(a.commonRendererProp(t).shiftInfo(n),a.chartRendered=!1,a(i,o,l,s)));var N=0;return I||(N=I?.5*(L.size||P)*10+P/2:0,u.dataObject.markerSize[O.name]&&u.dataObject.markerSize[O.name].add(N),m.push({renderer:e,charttype:"scatter",chartObj:u,rendererIndex:g,paneid:S,args:[x,f,N]})),e.getSymbolSize=a.getSymbolSize||function(){return N},e.chartRendered=!0,e}var t,n,r,a=i_.scatter();return e.getHighlighter=function(t,n){return e.highlighter||(e.highlighter=new Ks(t,e)),e.highlighter},e.commonRendererProp=function(n){return arguments.length?(t=n)&&e:t},e.shiftInfo=function(t){return arguments.length?(n=t)&&e:n},e},et.line=function(){return{mode:"linear",strokeWidth:2,outerPadding:.02,stacked:{enabled:!1,showAs:"values"},marker:{enabled:!0,innerStrokeWidth:2,outerFillColor:"transparent",outerStrokeColor:"transparent"},hoveroptions:{innerStrokeWidth:2,outerFillOpacity:.5,outerStrokeOpacity:.1},datalabels:{showAs:"y"},animation:{type:"strokeTween",marquee:{enabled:!1,duration:300},blink:{enabled:!1,type:"twinkle",duration:800}},gradients:{options:{linear:{x2:10,spreadMethod:"reflect"}}}}},My.line=function(){function e(T){return T.each(function(T){var L=n.params;w=L.chartObj,r=L.xscale,a=L.yscale,v=L.stacked,i=L.datasetIndex,l=L.axisrotated,m=L.commonPlotOptions,c=L.color,y=L.labelQueue,x=L.hasNegValue,s=L.yaxiscolumnorder,o=L.dataset,b=w.systemConf;var M=L.renderingOrderIndex,z=L.legendOrderIndex,I=L.rendererIndex,D=w.defsLocation,j=T[i],H={data:j,index:M},B=j.plotoptions,N=j.data,F=j.row+"_"+j.column,V=ln(w,F,i),W=V.name,Y=(V.value,n.params.gvp=zm.getValueOfPlotOptions(B,m)),G="arearange"==W,X=w.dataObject.isPolarAxisCategory,q=nC(w,i),Q=w.canvasarea,K=Y("mode"),$=Y("dashStyle"),J=U(Y("strokeWidth"),2),ee=Y("strokeOpacity"),te=An(w,i,F,q,L),ne=dx.isQuantileColorScale(w),re=n.params.markerOptions=B&&B.marker?Im(m.marker,B.marker,!0):m.marker,ae=(n.params.hoverOptions=B&&B.hoveroptions?Im(m.hoveroptions,B.hoveroptions,!0):m.hoveroptions,ei(m,B,w,W)),ie=ae.enabled,oe=ae.easingType;_=ae.duration,S=(S=ae.type)==Kb?Qb:S;var le=B&&B.animation&&B.animation.blink?Im(m.animation.blink,B.animation.blink,!0):m.animation.blink,se=ne||!(!Ht(w,"marker")||!jt(w,"marker",Qy(Q.width,Q.height)))&&re.enabled,ce=at(Y("lineCap"),$),ue=Km.IE||Km.SAFARI||"stepBefore"==K||"stepAfter"==K||"step-before"==K||"step-after"==K||L.thresholdType||ne||Km.FIREFOX&&le.enabled;h=rt($,J);var de=B&&B.animation&&B.animation.marquee?Im(m.animation.marquee,B.animation.marquee,!0):m.animation.marquee;f=de.enabled,p=de.duration;var he=w.dataset.getDataType("x"),fe=w.dataset.getDataType("y",s),pe=he==ox?r.domain():null,ge=fe==ox?a.domain():null,ve=he!=ox||Z(w.dataObject.hierarchical)?w.dataObject.getCategories("x"):pe,ye=b.chart.axes.yaxis[s].reversed;he!=ox&&0==ve.length&&ie&&S==tx&&(ve=w.dataObject.findXCategories()),e.seriesdataAfterUpdate=[],N.forEach(function(t,n){var r;r=he==ox||fe==ox?w.dataObject.updateSeriesdatabyCategories(R(t),pe,ge,s):t,e.seriesdataAfterUpdate[n]=r,O[n]=wp(L,r,C,k,F)});var me=fg(this);e.update=function(){me.transition().call(e)},(u=mt(me,"g",[H],".","class","lineseries_"+i)).node().index=i,G&&(u=mt(u,"g",[H],".","class","rangePos_"+k));var be,xe=X?{inner:.32,outer:.56}:{inner:.4,outer:.7};se&&!ue&&(re.color=j.color||Ln(w,z,j,i,F),be=E(re,"marker")+E(le,"blink"),g=Nt(u,be,re,{color:re.color,symbolSize:xe,strokeWidth:J},w),delete re.color),se&&!ue&&Vt(g.selectAll(".outer,.inner"),le,w),se&&ue?(A.commonRendererProp(n).shiftInfo(C).yrangePos(k),A.chartRendered=!1,me.call(A)):me.selectAll("g.scatterseries_"+i).remove(),N.forEach(function(n,f){var p=j.disabled;w.renderVisiblePointsOnly&&(e.seriesdataAfterUpdate[f]=Gt.helpers.filterPointsInViewport(w,e.seriesdataAfterUpdate[f],"line","x",i));var g=e.seriesdataAfterUpdate[f];w.systemConf.chart.axes.xaxis.reversed&&(g=g.slice(0).reverse());var y,m=g,b=mt(u,"g",function(e){return p?[]:[e]},".","class","subseries_"+f);if(d=b.selectAll("path.line").data(function(e){return p?[]:[e]}),ie&&S!=ex){if(S==tx)m=g.map(function(e,t){return Object.create(g[0])});else{var A=S==Jb?o.xidx:o.yidx(s),T=S==Jb?r:a,E=X&&ye&&!v?T.domain().length-1:0;m=g.map(function(e,t){var n=Object.create(e);if(v&&S!=Jb)n.y0=0,n.y=X||null==x||null==T(x)?T.domain()[0]:qy(x,T.domain()[0]);else if(G&&S==Qb){var r=new Array(2),a=w.dataset.getY(e,s,0);r[0]=a,r[1]=null==n[A]?null:null!=x&&null!=T(x)?qy(x,a):a,n[A]=r}else n[A]=null==n[A]?null:X||null==x||null==T(x)?T.domain()[E]:qy(x,T.domain()[0]);return n})}y=R(m)}if(null!=C&&P){var M=r(g[0][0])+(null!=r.bandwidth?r.bandwidth()/2:0),z=w.dataObject.getXYvalue(l,v,r,a,s,g[g.length-1],"x",null,k)-w.dataObject.getXYvalue(l,v,r,a,s,g[0],"x",null,k),I={name:"rect",id:w.id,x:M,y:0,width:z,height:w.plotarea.height},H={chartObj:w},B=tb.get(tb.svg_clips,"rect",I,H);u.attr("clip-path","url("+D+"#"+B+")")}var N=d.enter().append("path").attr("class","line").datum(m,function(e){return o.getX(e)}).attr("d",O[f]).style("stroke",j.color||c).style("fill",fm).style("stroke-width",J).style("stroke-opacity",null==ee||""===ee?1:ee);ie&&(S==nx||S==tx?ti(m,y,g,ve,S,oe,_,L,function(e){return{d:O[f](e)}},N):S==ex?function(e,n,r){e.styles({"stroke-dasharray":function(){return this.getTotalLength()+" "+this.getTotalLength()},"stroke-dashoffset":function(){return this.getTotalLength()}}).transition().duration(r).ease(n).style("stroke-dashoffset",0).on("end",function(){t(fg(this))})}(N,oe,_):N.transition().duration(_).ease(oe).attrTween("d",function(){var e=tv(O[f](m),O[f](g));return function(t){return e(t)}}));var F=N.merge(d).datum(g,function(e){return o.getX(e)}).attrs({id:"line_"+i,"stroke-dasharray":h}).styles({"stroke-linecap":ce,"stroke-width":J,"stroke-opacity":U(ee,1),fill:fm,stroke:te(i,vm,Y("strokeColor")||c,vm,ee,f)}),V=g;if(null!=C){var W=null!=C?Math.abs(w.dataObject.getXYvalue(l,v,e.oldXscale,a,s,g[0],"x",null,k)-w.dataObject.getXYvalue(l,v,r,a,s,g[0],"x",null,k)):null;d.datum(V).attr("d",O[f]).transition().duration(_).ease(oe).attr("transform",function(){return null==W?null:"translate(-"+W+",0)"}),t(d)}else null==N.node()&&(d.datum(V).attr("transform",null).transition().duration(_).ease(oe).attr("d",O[f]),t(d));var Z=se&&!ue?"url("+D+"#"+be+")":vm,q=re.position,Q=q?{"marker-start":-1<q.indexOf(hb)?Z:vm,"marker-mid":-1<q.indexOf(fb)?Z:vm,"marker-end":-1<q.indexOf(pb)?Z:vm}:{marker:Z};F.styles(Q),Fc(F,w,"line"),w.dataObject.hierarchical&&(F.attr("levelbycolumn",function(e,t){return e[0]&&e[0].levelByColumn}),w.dataObject.pivot&&F.attr("levelbyrow",function(e,t){return e[0]&&e[0].levelByRow})),N.exit().remove()});var we=0;ue&&se||(we=se?.5*(re.size||J)*10+J/2:0,y.push({renderer:e,charttype:"scatter",chartObj:w,rendererIndex:I,paneid:F,args:[j,i,we,k]}),w.dataObject.markerSize[W]&&w.dataObject.markerSize[W].add(we)),e.getSymbolSize=A.getSymbolSize||function(){return we}}),e.renderedTimer=setTimeout(function(){f&&!function e(t,n,r,a){var i=r.reduce(function(e,t){return t+e},0);t.attr("stroke-dasharray",r).attr("stroke-dashoffset",i).transition().duration(n).ease(xg).attr("stroke-dashoffset",0).on("end",function(){a&&a.chartRendered&&e(t,n,r,a)})}(u.selectAll("#line_"+i),p,h,e),P=e.chartRendered=!0},P?2*_+20:_+20),e.oldXscale=r,e}function t(e){e.styles({"stroke-dasharray":h,"stroke-dashoffset":null})}var n,r,a,i,o,l,s,c,u,d,h,f,p,g,v,y,m,b,x,w,C,k,_,S,O=[],A=My.scatter(),P=!1;return e.getHighlighter=function(t,n){return e.highlighter||(e.highlighter=new Ks(t,e)),e.highlighter},e.commonRendererProp=function(t){return arguments.length?(n=t,e):n},e.shiftInfo=function(t){return arguments.length?(C=t,e):C},e.yrangePos=function(t){return arguments.length?(k=t,e):k},e},Cp.prototype.flattenData=Gt.prototype.flattenData,Cp.prototype.getFlattenedSeriesData=Gt.prototype.getFlattenedSeriesData,Cp.prototype.removeFlattenData=Gt.prototype.removeFlattenData,Cp.prototype.initialize=function(e){var t=this,n=t.data,r=t.dataset,a=t.chartObj,i=t.processedseriesData,o=t.globalChartType=n.seriesdata&&n.seriesdata.type,l=Gt.helpers;r.seriesTypes=Rg(),t.totalnoofdatas=0,t.isNonAxisMultiSeriesCategory=!0,t.isHierarchy=!0,t.hasHierarchyData=a.preProcessor.hasHierarchyData,t.seriesExtermes=[[]],a.cache.data={},a.cache.search={},a.cache.customPoints={},i&&te(i)&&(_p(i),function e(a){a.forEach(function(a,i){if(te(a[0]))e(a);else{var o=+a.level.split("_")[0],s=n.seriesdata.chartdata[o],c=l.getParsedYAxisOrder(s.yaxiscolumnorder);if(!s.disabled){var u=Fg([a],function(e){return r.getY(e,c)});t.seriesExtermes[0].push(u),t.totalnoofdatas++}}})}(i),i.forEach(function(e,n){var a=l.getChartType(e.type||o,sx);t.singleSourceEvent=t.singleSourceEvent||Re(Py.singleSourceEvent,a),r.seriesTypes.add(a)}))};var N_=(_createClass(kp,[{key:"convert",value:function(e,t){return function e(t,n){return t.map(function(t){var r;if(t.data&&t.data[0]&&te(t.data[0])){r=n.hierarchical&&n.hierarchical.facetRendering?Dm(t.data):t.data;var a=t.leafColors;a&&r.forEach(function(e,t){return e.color=a[t%a.length]})}else r=t.data?(n.hasHierarchyData=!0,e(t.data,n)):t;for(var i in t)t.hasOwnProperty(i)&&"data"!==i&&(r[i]=t[i]);return r})}(e,t)}},{key:"getData",value:function(){return this.data}}]),kp);km.setComponent("hierarchyDataProcessor",Cp),km.setComponent("hierarchyDataAdapter",N_),et.packedbubble=function(){return{fillOpacity:.2,outerPadding:5,animation:{type:"sizing"},datalabels:{showAs:"y"}}};var F_=km.getComponent("annotation");My.packedbubble=function(){function e(t){return t.each(function(n){function p(e){return e.depth&&n[r(e)].plotoptions}function g(e){return U(Gn(p(e),d,u,"enabled"),!0)}function C(e){return"translate("+e.x+","+e.y+")"}function k(e){return e.r}function _(e,t){return d.fillOpacity}function S(e,t){return d.strokeOpacity}function O(e,t){var n=E(e,t);u.eventHandler.handlers.mousemove.call(u.eventHandler,n),Qf(e,n),u.cache.search.lastPane=N}function A(e,t){var n=E(e,t);n.point=e.data,u.eventHandler.handlers.mouseout.call(u.eventHandler,n,r(e)),Qf(e,n),u.cache.search.lastPane=null}function P(t,n){var i=E(t,n);u.eventHandler.handlers.click.call(u.eventHandler,i,t,r(t),a(t),e),Qf(t,i),u.cache.search.lastPane=N}function T(t,a){if(e.chartRendered){var i=F_._empty?t.data:Xo(t.data,1<n.length?n[r(t)].seriesname:null),o=[t.x,t.y];o=[o[0]+(Y-ee)/2,o[1]+(G-ee)/2];var l=E(t,a);l.coordinate=o,l.basedOn="plot",l.data=i,l.point=t.data,u.eventHandler.handlers.doubleclick.call(u.eventHandler,l,r(t),t),Qf(t,l),u.cache.search.lastPane=N}}function E(t){var n=Xn(Hv()),i=r(t),o=a(t);return{renderer:e,seriesIndex:i,subSeriesIndex:0,itemIndex:o,paneid:N,rendererIndex:B,coordinates:[n.pageX,n.pageY],element:this,data:t,selected:t.selected,_key:"ZC_"+u.id+"_"+i+"_0_"+o}}var L=l.params;u=L.chartObj;var M=L.color,z=L.notesArray,I=L.yaxiscolumnorder,D=L.dataset,R=(u.systemConf,L.labelQueue),j=L.bound,H=L.rendererIndex,B=void 0===H?0:H;d=L.commonPlotOptions;var N=rn(u)&&n[0].row+"_"+n[0].column,F=[],V=[],W=n.filter(function(t,n){var r=u.rendererConf[B+n];return t.seriesIndex=n,w[n]=[],F[n]=e.fillColorFunc=Sn(u,n,N,null,null,null,null,r.params),V[n]=An(u,n,N,null,r.params),!t.disabled}),Y=j.width,G=j.height,X=1===W.length,Z=Dx.hasPatternPallete(u)||u.patternPallete,q=u.systemConf.notes,Q=q&&!0===q.enabled&&q.plotValues;h=d.mode,v=In(d,u);var K="absolute"===d.showAsNegative,$=+d.interPadding||0,J=+d.outerPadding||0,ee=Qy(Y,G)-J;f=[u.plotarea.left+(Y-ee)/2+L.bound.x,u.plotarea.top+(G-ee)/2+L.bound.y],y=function(e){if(!m&&i(n,e))return 0;var t=D.getY(e,I)||0;return t<0?K?Ky(t):0:t};var te=ei(d,null,u,Rb),ne=te.enabled,re=te.type,ae=te.easingType,ie=x?ne?200:0:te.duration,oe=!x&&(re===Yb||re===Fb);b.size([ee,ee]).padding($),(s=mt(t,"g",[1],".","class","hierarchychart")).attr("transform","translate("+(Y-ee)/2+","+(G-ee)/2+")"),(c=mt(s,Gm,o(n,!0))).attrs({class:function(e){return"zc_packedbubble series_"+r(e)}}).style("visibility",function(e){return i(n,e)?"hidden":null}),c=c.filter(function(e){return!i(n,e)});var le=o(W);e.total=le[0].value,(c=c.data(le)).attrs({transform:oe?C:function(e){var t=fg(this).attr("transform");return null!=t?t:"translate("+ee/2+","+ee/2+")"},r:oe?k:function(e){var t=fg(this).attr("r");return null!=t?t:0}}).styles({fill:function(e,t){var n=r(e);e.index=t,e.data.paneid=N,e.r=e.r||0,e.x=e.x||0,e.y=e.y||0,rn(u)?e.data._parent=e.parent:e.data.parent=e.parent,Q&&(e.data.x=e.x,e.data.y=e.y),!e.children&&e.parent&&w[n].push(e),e.depth?"flat"!==h&&1===e.depth&&v?e.arcColor="grey":e.arcColor=rn(u)?Ln(u,v?a(e):n,e.data,n,N):M[(v?a(e):n)%M.length]:e.arcColor="flat"==h||v||X?fm:"grey";var i=function(e,t){return e.children?e.arcColor:t}(e);return e.fillColor=!e.depth&&Z||i===fm?fm:F[n||0](v?a(e):n,e.data,null,i)},"fill-opacity":oe?0:_,"stroke-opacity":oe?0:S,stroke:function(e){var t=r(e);return e.arcColor===fm?fm:d.strokeColor?d.strokeColor:e.children?e.arcColor:V[t||0](v?a(e):t,e.data)},"stroke-width":function(e){return d.strokeWidth},cursor:function(e){var t=p(e);return g(e)?Gn(t,d,u,"cursor")||gm:vm},"pointer-events":function(e){return g(e)&&!e.children?null:fm}});var se=c.size(),ce=x||re!==Yb?ie:ie/se,ue=re===Yb?ce:0;c.transition().delay(function(e,t){return x?0:t*ue}).duration(ce).ease(x?xg:ae).attrs({transform:C,r:k}).styles({"fill-opacity":_,"stroke-opacity":S}),Hc(c,u,"packedbubble"),Fc(c,u,"packedbubble"),or(u,c,function(e){return!g(e)},N),u.cache.search||(u.cache.search={});var de={target:"plot",touchleave:!0,chartObj:u},he={mousemove:O,mouseout:A,click:P,dblclick:T},fe={singletouchmove:O,touchend:A,tap:P,dbltap:T};Mr(c.filter(function(e){return!e.children}),he,fe,de),e.renderedTimer=setTimeout(function(){function t(t,n){return n===ew?e.total:t.parent.value}if(F_._empty||n.forEach(function(e,t){z=F_.preprocessAnnotations(n,t,function(e,t,n){var r=[e.x,e.y];return[r[0]+(Y-ee)/2,r[1]+(G-ee)/2]},z,u,L)}),Dy){var r=[(Y-ee)/2,(G-ee)/2];n.forEach(function(e,a){var i=u.renderer[rn(u)?B+a:0],o=rn(u)?B+a:a,l=rn(u)?e.row+"_"+e.column:a;R.push({renderer:i,charttype:"hierarchy",chartObj:u,rendererIndex:o,paneid:l,args:[n[a],a,null,null,t,w[a],r]})})}e.chartRendered=x=!0},ie+17)}),e}function t(){if(!p){var e=u.staticPaneSVG.selectAll("g#zchierarchyhighlight");e.empty()||(g=mt(p=e,Um,[1]))}}function n(e){var t=e.level&&e.level.split("_").length;return!u.dataObject.hasHierarchyData&&1==t&&e.length<2&&e[0]&&te(e[0][0])?e[0]:te(e[0])?te(e[0][0])?e:e.filter(function(e){return te(e[0])||0<y(e)}):null}function r(e){var t=e.level||e.data&&e.data.level;if(t)return+t.split("_")[0]}function a(e){return e.data.itemPos}function i(e,t){var n=r(t);return Z(n)&&e[n].disabled}function o(e,t){m=t;var r=d.order||Wg;"string"==typeof r&&(r=Rm(window,r));var a=Qg(function(e){function t(e,t){var n=t.split(/_/);e.seriesPos=+n[0],e.itemPos=+n[n.length-1]}var r=[];return function e(a,i){var o=n(a);o?o.forEach(function(n,r){var a=Z(i)?i+"_"+r:""+n.seriesIndex;t(n,a),e(n,a)}):(t(a,i),"flat"==h&&r.push(a))}(e),"flat"==h?r:e}(e),n).sum(y).sort(r);return b(a),a.descendants()}var l,s,c,u,d,h,f,p,g,v,y,m,b=Kg(),x=!1,w=[];return e.commonRendererProp=function(t){return arguments.length?(l=t,e):l},e.defaultMouseOverFunc=function(e,n,r,a){t();var i=fg(c.nodes()[e.index]),o=Or(i).translate,l=u.legendHighlight.getLegendHighlightEffect(n,"selectedSeries","plot",a),s=Ln(u,v?r:n,e.data,n,a);p.style("opacity",null),g.attrs({transform:"translate("+(f[0]+o[0])+","+(f[1]+o[1])+")",d:Bt("circle")(2*+i.attr("r"))}).styles(u.legendHighlight.getEffect(l,Rb,Ny.test(l)?s:pm,{fill:pm,stroke:s},v?r:n,"plot"))},e.defaultMouseOutFunc=function(e,n){t(),p.style("opacity",0)},e},et.pyramid=function(){return{threeDimension:!0,strokeColor:"black",strokeWidth:null,strokeOpacity:.5,fillOpacity:.8,gradients:{options:{linear:{x2:50,spreadMethod:"reflect",colorGamma:[.8,0]}}},datalabels:{showAs:"y",type:"singleside",padding:10,relativeX:!0,line:{strokeColor:"grey",strokeWidth:.3},innerLabel:{show:!1,showAs:"percent"}},animation:{type:"vertical"}}};var V_=km.getComponent("annotation");My.pyramid=function(){function e(R){R.each(function(R){function j(e,t){var n=this.parentNode,r=J(fg(n).attr("id").replace(/section_/gi,"")),a=F(n,r);_.eventHandler.handlers.mousemove.call(_.eventHandler,a),Qf(R[r],a),_.cache.search.lastPane=q}function H(e,t){var n=this.parentNode,r=J(fg(n).attr("id").replace(/section_/gi,"")),a=F(e,r);_.eventHandler.handlers.mouseout.call(_.eventHandler,a,r),Qf(R[r],a),_.cache.search.lastPane=null}function B(){var t=this.parentNode,n=J(fg(t).attr("id").replace(/section_/gi,"")),r=F(t,n);_.eventHandler.handlers.click.call(_.eventHandler,r,e,0,n,R[n]),Qf(R[n],r),_.cache.search.lastPane=q}function N(e,t){var n=this.parentNode,r=J(fg(n).attr("id").replace(/section_/gi,"")),a=V_._empty?R[r]:Xo(R[r],null),i=k[r].previousHeight,o=[y(i+w(i)/2)+(l/2-z.width/2),w(i)/2+i+(s/2-z.height/2)],c=F(n,r);c.coordinate=o,c.basedOn="plot",c.data=a,_.eventHandler.handlers.doubleclick.call(_.eventHandler,c,r,e),Qf(R[r],c),_.cache.search.lastPane=q}function F(t,n){var r=Xn(Hv());return{renderer:e,seriesIndex:jn(_)?n:0,subSeriesIndex:0,itemIndex:n,paneid:q,rendererIndex:X,color:C[n%C.length],coordinates:[r.pageX,r.pageY],element:t,data:R[n],selected:R[n].selected,_key:"ZC_"+_.id+"_0_0_"+n}}function V(e,t){var n=t?"none":null;S.selectAll("#section_"+e).style("display",n)}var W=a.params;_=W.chartObj,c=W.commonPlotOptions,C=W.color,d=W.notesArray,o=W.yaxiscolumnorder,i=W.dataset,u=_.systemConf;var Y=W.labelQueue,G=W.bound,X=W.rendererIndex,Z=rn(_)&&jn(_)?R:R[0],q=rn(_)?Z.row+"_"+Z.column:null;_.defsLocation;var Q=_extends({},G,L);l=Q.width,s=Q.height;var K=Qy(l,s);if(E=c.datalabels.padding,_.datalabels.moduleExists&&Pi(c.datalabels,_)){var $=l*M,ee=l-K;ee<$&&(E=z.datalabelPadding=5,K-=qy($-ee,0))}z.width=K,z.height=4*K/5;var te=R[0].plotoptions,ne=zm.getValueOfPlotOptions(te,c);h=u.legend.imagePallete||Dx.hasPatternPallete(_);var re=ne("strokeWidth"),ae=ne("strokeOpacity"),ie=ne("threeDimension"),oe=ne("fillOpacity"),le=ei(c,te,_,Mb),se=le.enabled,ce=le.easingType,ue=I?se?200:0:le.duration;r=le.type;var de=0==U(Gn(te,c,_,"enabled"),!0),he=de?null:Gn(te,c,_,"cursor")||"pointer",fe=l/2-z.width/2,pe=s/2-z.height/2,ge=jn(_)?[fe+Q.translate[0],pe+Q.translate[1]]:[fe,pe],ve=fg(this);(S=mt(ve,"g",[R],".","class","pyramidgroup")).attr("transform","translate("+fe+","+pe+")").style("cursor",he),T=R=jn(_)?R:R[0].data[0],P=R.length,k=[],f=z.height,g=z.width,v=ie?z.height/6:0;var ye=Jy($y(v/tm(25*sm/180),2)-$y(v,2));g-=ye,y=kg().range([(g+ye)/2,0]).domain([0,f]),m=kg().range([(g+ye)/2,g]).domain([0,f]),b=kg().range([(g+ye)/2,g+ye]).domain([0,f]),x=kg().range([(g+ye)/2,ye]).domain([0,f]),w=kg().range([0,v]).domain([0,f-v/2]),O=[z.width,z.height],e.fillColorFunc=Sn(_,0,q,O);var me=An(_,0,q);rn(_)?R.forEach(function(e,t){var n=P-1-t;D[n]=Sn(_,n,q)}):D[0]=e.fillColorFunc;var be=0;e.total=p=R.reduce(function(e,t){return e+(n(t)?0:(be++,Ky(i.getY(t,o)||0)))},0);var xe=0;if(R.forEach(function(e,t){e._acutalData=function(){return R[P-1-t]},k.push({height:(xe+(n(e)?0:Ky(i.getY(e,o))))/p*(f-v/2)||0,previousHeight:xe/p*(f-v/2)||0}),xe+=n(e)?0:Ky(i.getY(e,o))}),(A=mt(S,"g",R,".","class","pyramidsection")).attr("id",function(e,t){return"section_"+(P-1-t)}).styles({stroke:function(e,t){return rn(_)?An(_,P-1-t,q)(P-1-t,R[P-1-t],c.strokeColor):me(P-1-t,R[P-1-t],c.strokeColor)},"stroke-opacity":ae,"stroke-width":re,"fill-opacity":oe,fill:function(e,t){return rn(_)?D[P-1-t](P-1-t,R[P-1-t]):D[0](P-1-t,R[P-1-t])}}).each(function(e,t){mt(fg(this),Um,[e,e,e,e]).attr("class","section_"+(P-1-t))}),Hc(A,_),Fc(A,_,"pyramid"),or(_,A,de,q),_.cache.search||(_.cache.search={}),!de){var we={target:"plot",touchleave:!0,chartObj:_},Ce={mousemove:j,mouseout:H,click:B,dblclick:N},ke={singletouchmove:j,touchend:H,tap:B,dbltap:N};Mr(A.selectAll(Um),Ce,ke,we)}var _e=0;A.each(function(e,a){var l=S.selectAll("#section_"+a).selectAll(Um);if(I)l.transition().duration(ue).ease(xg).attr("d",function(e,n){return t(a,n)});else{var s=i.getY(e,o),c=r==Zb?(n(e)||!s?0:Ky(s))/p*ue:ue;_e+=n(e)||!s?0:Ky(s);var u=r==Zb?(p-_e)/p*ue:0;l.transition().duration(c).delay(u).ease(ce).attrTween("d",function(e,n){return function(e,n,a){var i=tv(t(r==Zb?n:P-1,a,"down"),t(n,a));return function(e){return i(e)}}(0,a,n)})}}),function(){if(rn(_)){var e=I?ue:0;A.each(function(t,n){var r=t.dummy||!i.getY(t,o),a=r?e:0;a?setTimeout(function(){V(n,r)},a):V(n,r)})}}(),e.renderedTimer=setTimeout(function(){if(Dy){var t=[_.seriesdata,0,R,be,0,p,z,function(e){var t=[];return e.forEach(function(n,r){var a=e.length-1-r,i=k[a].height,o=k[a].previousHeight,l=(i+o)/2,s=b(i+w(i)/2),c=-w(i)/2+i,u=b(o+w(o)/2),d=-w(o)/2+o,h=y(i+w(i)/2),f=w(i)/2+i,p=(s+u)/2,g=(c+d)/2,v=(h+y(o+w(o)/2))/2,x=(f+(w(o)/2+o))/2,C=(y(l+w(l)/2)+m(l+w(l)/2))/2;t.push({rightx:p+E,leftx:v-E,y:g,y0:i+w(i)/2,midX:C,leftY:x})}),t}(R),e.subSeriesIndex||0,ge];Y.push({renderer:e,charttype:Lb,chartObj:_,args:t,rendererIndex:X,paneid:q}),Y.push({renderer:e,charttype:"funnelInnerLabels",chartObj:_,args:t,rendererIndex:X,paneid:q})}V_._empty||(d=V_.preprocessAnnotations(_.seriesdata,0,function(e,t,n){var r=k[n].previousHeight;return[y(r+w(r)/2)+(l/2-z.width/2),w(r)/2+r+(s/2-z.height/2)]},d,_,W)),e.chartRendered=I=!0,jn(_)&&_.renderer[X].endFunctions()},ue+10)})}function t(e,t,n){var r=k[e].height,a="down"==n?r:k[e].previousHeight;switch(t){case 0:return function(e,t){return"M"+b(e+w(e)/2)+" "+(-w(e)/2+e)+" L"+x(e+w(e)/2)+" "+(-w(e)/2+e)+" L"+x(t+w(t)/2)+" "+(-w(t)/2+t)+" L"+b(t+w(t)/2)+" "+(-w(t)/2+t)+" L"+b(e+w(e)/2)+" "+(-w(e)/2+e)}(r,a);case 1:return function(e,t){return"M"+x(e+w(e)/2)+" "+(-w(e)/2+e)+" L"+y(e+w(e)/2)+" "+(w(e)/2+e)+" L"+y(t+w(t)/2)+" "+(w(t)/2+t)+" L"+x(t+w(t)/2)+" "+(-w(t)/2+t)+" L"+x(e+w(e)/2)+" "+(-w(e)/2+e)}(r,a);case 2:return function(e,t){return"M"+y(e+w(e)/2)+" "+(w(e)/2+e)+" L"+m(e+w(e)/2)+" "+(w(e)/2+e)+" L"+m(t+w(t)/2)+" "+(w(t)/2+t)+" L"+y(t+w(t)/2)+" "+(w(t)/2+t)+" L"+y(e+w(e)/2)+" "+(w(e)/2+e)}(r,a);case 3:return function(e,t){return"M"+m(e+w(e)/2)+" "+(w(e)/2+e)+" L"+b(e+w(e)/2)+" "+(-w(e)/2+e)+" L"+b(t+w(t)/2)+" "+(-w(t)/2+t)+" L"+m(t+w(t)/2)+" "+(w(t)/2+t)+" L"+m(e+w(e)/2)+" "+(w(e)/2+e)}(r,a)}}function n(e){return e.disabled||e.dummy}var r,a,i,o,l,s,c,u,d,h,f,p,g,v,y,m,b,x,w,C,k,_,S,O,A,P,T,E,L,M=.3,z={},I=!1,D=[];return e.commonRendererProp=function(t){return arguments.length?(a=t,e):a},e.plotarea=function(t){return arguments.length?(L=t,e):L},e.defaultMouseOverFunc=function(e,t,n){h?A.style("opacity",function(e,t){return P-1-t==n?null:.2}):A.style("fill",function(e,t){return(rn(_)?D[P-1-t]:D[0])(P-1-t,T[P-1-t],P-1-t==n?.5:null)})},e.defaultMouseOutFunc=function(e,t){h?A.style("opacity",null):A.style("fill",function(e,t){return(rn(_)?D[P-1-t]:D[0])(P-1-t,T[P-1-t])})},e},i_.scatter=function(){function e(t,i,o,l){function s(e){return D&&(!e||e.isDummy)||!D&&L!==L.stkdarea&&(we(k.getX(e))||Ce(k.getY(e,C)))?0:I?d.dataObject.getXYvalue(m,p,h,f,C,e,"z",d.zscale,r):2*X}var c=4<arguments.length&&void 0!==arguments[4]?arguments[4]:"clr",u=n.params,d=u.chartObj,h=u.xscale,f=u.yscale,p=u.stacked,g=u.datasetIndex,v=u.legendOrderIndex,y=u.rendererIndex,m=u.axisrotated,b=u.commonPlotOptions,x=u.color,w=u.labelQueue,C=u.yaxiscolumnorder,k=u.dataset,_=u.threshold,S=d.dataObject.categoryHierarchy?i[g]:d.seriesdata[g],O=S.plotoptions||{},A=O?Im(b,O,!0):b,P=S.data,T=S.row+"_"+S.column,E=ln(d,T,g),L=E.value,M=E.name,z=qn(L),I=Py.bubble.has(L),D=d.dataObject.isPolarAxisCategory,j=d.systemConf.legend,H=n.params.markerOptions=O&&O.marker?Im(b.marker,O.marker,!0):b.marker,N=(n.params.hoverOptions=O&&O.hoveroptions?Im(b.hoveroptions,O.hoveroptions,!0):b.hoveroptions,H.symbol||"circle"),F=H.size,V=H.imageUrl,W=z&&In(A,d),Y=j.patternPallete,U=dx.isQuantileColorScale(d);z?F=Hm(F,1):(B(F)&&(F=Hm(A.strokeWidth,2)),V||(F*=D?.56:.7),x=Hm(S.color,x));var G=rn(d)?Ln(d,v,S,v,T):x,X=5*F,q=H.outerFillOpacity,Q=H.outerStrokeOpacity,K=H.innerFillOpacity,$=H.innerStrokeOpacity,J=Hm(H.outerStrokeWidth,1),ee=Hm(H.innerStrokeWidth,1),te=Hm(H.outerStrokeColor,G),ne=Hm(H.innerStrokeColor,G),re=Hm(H.outerFillColor,G),ae=Hm(H.innerFillColor,G),ie=rt(H.outerDashStyle,J),oe=rt(H.innerDashStyle,ee),le=at(H.outerLineCap,H.outerDashStyle),se=at(H.innerLineCap,H.innerDashStyle),ce=H.position;Z(o)&&(J=Hm(o["stroke-width"],J),!Z(l)||Q&&zg(te).opacity||(ee=Hm(o["stroke-width"],ee))),Z(q)&&re&&(re=kn(re,q)),Z(Q)&&te&&(te=kn(te,Q)),Z(K)&&ae&&(ae=kn(ae,K)),Z($)&&ne&&(ne=kn(ne,$)),z&&(e.highlighter=I?new ec(d,e):new Qs(d,e)),e.getSymbolSize=s,e.getSymbolBBox=function(e){var t=s(e)/2;return 0<t&&("line"==N||"vertical-line"==N)?"line"==N?{width:t,height:Ae||1}:"vertical-line"==N?{width:Ae||1,height:t}:void 0:null};var ue,de=!(Z(_)||W||"scatter"!==M&&"line"!==M&&"area"!==M||Y||V||U),he=(e.fillColorFunc=Sn(d,v,T,null,!z),An(d,v,T)),fe=Sn(d,v,T,null,!0);if(de){ye=e.fillColorFunc(v,S,null,re,null,z?[X,X]:null,!1);var pe=(ue=i_.scatter.getCache(N,X,te,J,ye,ne,ee,ae,H)).adjustPosition,ge=ue.canvas,ve=ue.width}if(!S.disabled){var ye,me,be=d.dataset.getDataType("x"),xe=d.dataset.getDataType("y",C),we=a.isCatNull(k,"x"),Ce=a.isCatNull(k,"y",C),ke=be==ox?h.domain():null,_e=xe==ox?f.domain():null;if((be!=ox||null==h.domain||Z(d.dataObject.hierarchical))&&d.dataObject.getCategories("x"),d.dataObject.markerSize[M]){var Se="line"==N||"vertical-line"==N?Ae||1:2*X;d.dataObject.markerSize[M].add(Se)}e.seriesdataAfterUpdate=[],P.forEach(function(n,r){var a;if(a=be==ox||xe==ox?d.dataObject.updateSeriesdatabyCategories(R(n),ke,_e,C):n,d.renderVisiblePointsOnly){var i="scatter"===M||"bubble"===M?"xy":"x";a=Gt.helpers.filterPointsInViewport(d,a,M,i,g)}e.seriesdataAfterUpdate[r]=a,U&&Z(o)&&"clr"===c&&(a=Dx.filterSelectionByColor(a,!0,l,d)),I&&Z(o)&&"z"===c&&(a=Dx.filterSelectionByColor(a,!0,l,d,"z")),a.forEach(function(n,r){function i(e,t,n){i_.scatter.drawPath(N,e,g,y,b,J,o,t,ie,le,V,n,q)}var o,l="z"===c?Hm(n.sortedItemIndex,r):r,u=0===r?hb:r===a.length-1?pb:fb;if(D||L===Kv.stkdarea||n&&!n.isDummy&&!we(k.getX(n))&&!Ce(k.getY(n,C))){if(ce&&ce.indexOf(u)<=-1)return;var g=d.dataObject.getXYvalue(m,p,h,f,C,n,"x"),y=d.dataObject.getXYvalue(m,p,h,f,C,n,"y"),b=s(n)/2;if(de){t.beginPath();var x=b+J/2+pe;t.drawImage(ge,g-x,y-x,ve-1,ve-1),t.closePath()}else{if(re||te)if(o=he(W?l:v,n,d.imagePallete?null:H.outerStrokeColor,vm,Q),V){var w={x:g,y:y,width:2*b,height:2*b,context:t,name:V,repeatMode:"no-repeat"};tb.canvas_patterns.imageFill(w,i)}else if(d.imagePallete)w={x:g,y:y,context:t,name:d.imagePallete[W?l:v]},tb.canvas_patterns.imageFill(w,i);else{var _=e.fillColorFunc(W?l:v,n,null,H.outerFillColor,q,z?[b,b]:null,!1);i(t,_)}var S=!0;!V&&(0!==ee||0!==K&&"transparent"!==H.innerFillColor)||(S=!1),S&&(_=fe(W?l:v,n,null,H.innerFillColor,K,null,!1),me=kn(he(W?l:v,n,d.imagePallete?null:H.innerStrokeColor),$),i_.scatter.drawPath(N,t,g,y,b/2,ee,me,_,oe,se,null,null,null,"inner"))}}})})}if(Z(Dy)){var Oe;if(z)Oe=2*X+H.outerStrokeWidth;else{var Ae=Hm(A.strokeWidth,2);Oe=Hm(H.size,Ae)*X+Ae/2}w.push({renderer:e,charttype:"scatter",chartObj:d,rendererIndex:y,paneid:T,args:[S,v,Oe,r]})}return e.chartRendered=!0,e}var t,n,r,a=Gt.helpers;return e.getHighlighter=function(t,n){if(!e.highlighter){var r=Py.bubble.has(ln(t,null,n).value);e.highlighter=r?new ec(t,e):new Qs(t,e)}return e.highlighter},e.commonRendererProp=function(t){return arguments.length?(n=t,e):n},e.shiftInfo=function(n){return arguments.length?(t=n,e):t},e.yrangePos=function(t){return arguments.length?(r=t,e):r},e},i_.scatter.drawPath=function(e,t,n,r,a,i,o,l,s,c,u,d,h,f){if(t.save(),t.translate(n,r),t.beginPath(),t.lineWidth=i,t.strokeStyle=o,"circle"===e)t.arc(0,0,a,0,2*sm);else{var p=Bt(e)(2*a,f);xw.drawPath(t,p)}u&&(t.globalAlpha=h,t.translate(-a+d.x,-a+d.y)),(t.fillStyle=l)&&t.fill(),u&&(t.globalAlpha=1),s&&s.length&&"object"===(void 0===s?"undefined":_typeof(s))&&Z(t.setLineDash)&&(t.setLineDash(s),t.lineCap=c),i&&o&&t.stroke(),t.closePath(),t.restore()},i_.scatter.getCache=function(e,t,n,r,a,i,o,l,s){var c=1.5*mm,u=document.createElement("canvas"),d=(t+r/2)*c+5,h=u.getContext("2d"),f=(2*t+r+10)*c,p=f/c;return u.height=u.width=f,this.drawPath(e,h,d,d,t*c,r*c,n,a,rt(s.outerDashStyle,r,c),at(s.outerLineCap,s.outerDashStyle)),this.drawPath(e,h,d,d,t/2*c,o*c,i,l,rt(s.innerDashStyle,o,c),at(s.innerLineCap,s.innerDashStyle),null,null,null,"inner"),{canvas:h.canvas,width:p,adjustPosition:5/c}},et.scatter=function(e){var t={outerPadding:.02,multiColoring:!1,marker:{size:1,innerFillColor:"white",innerStrokeColor:"white",innerStrokeWidth:0,innerStrokeOpacity:1,outerFillColor:"white",outerStrokeOpacity:1,outerStrokeWidth:2},hoveroptions:{innerStrokeOpacity:1,outerFillColor:"white",outerStrokeWidth:2},datalabels:{showAs:"y"},animation:{type:"allseries"},gradients:{options:{linear:{y2:100,gradientUnits:"userSpaceOnUse",colorGamma:[2,0]},radial:{radius:90,colorGamma:[2,0]}}}};return"geoscatter"===e&&(t.animation.type="sizing",t.datalabels.showAs="geo",t.datalabels.orient="bottom",t.datalabels.textOverlap="hidden"),t},My.scatter=function(){function e(g){return g.each(function(g){var x=v.params;t=x.chartObj,n=x.xscale,r=x.yscale,l=x.stacked,a=x.datasetIndex,c=x.axisrotated,d=x.commonPlotOptions,o=x.color,u=x.labelQueue,f=x.hasNegValue,i=x.yaxiscolumnorder,s=x.dataset,h=t.systemConf;var w=x.renderingOrderIndex,C=x.legendOrderIndex,k=x.rendererIndex,_=t.defsLocation,S=h.chart.axes.xaxis.reversed,O=h.chart.axes.yaxis[i].reversed,A=fg(this);e.update=function(){A.transition().call(e)};var P=g[a],T={data:P,index:w},E=P.plotoptions,L=P.data,M=P.row+"_"+P.column,z=ln(t,M,a),I=z.value,D=z.name,j=Py.bubble.has(I),H=qn(I),N=t.dataObject.isPolarAxisCategory,F=mt(A,"g",[T],".","class","scatterseries_"+a);"arearange"===D&&(F=mt(F,"g",[T],".","class","rangePos_"+y));var V=ei(d,E,t,D),W=V.enabled,Y=V.easingType,G=V.type;p=V.duration;var X=v.params.markerOptions=E&&E.marker?Im(d.marker,E.marker,!0):d.marker,q=(v.params.hoverOptions=E&&E.hoveroptions?Im(d.hoveroptions,E.hoveroptions,!0):d.hoveroptions,X.symbol),Q=X.size,K=X.imageUrl,$=X.position;H?(Q=U(Q,1),G=G==Fb?Yb:G):(B(Q)&&(Q=(E?zm.getValueOfPlotOptions(E,d)("strokeWidth"):d.strokeWidth)||2),K||(Q*=N?.56:.7),G=(G=G==Qb||G==Kb?qb:G)==Jb?$b:G,o=P.color);var J=Bt(q),ee=!!H&&In(d,t),te=10*Q,ne=G==Yb?0:X.outerFillOpacity,re=G==Yb?0:X.outerStrokeOpacity,ae=G==Yb?0:X.innerFillOpacity,ie=G==Yb?0:X.innerStrokeOpacity,oe={name:X.imageUrl},le=rt(X.outerDashStyle,X.outerStrokeWidth),se=rt(X.innerDashStyle,X.innerStrokeWidth),ce=at(X.outerLineCap,X.outerDashStyle),ue=at(X.innerLineCap,X.innerDashStyle),de=dx.isQuantileColorScale(t)&&!1===X.enabled?"hidden":vm,he=e.fillColorFunc=Sn(t,a,M,null,!H||null),fe=An(t,a,M);if(t.dataObject.markerSize[D]){var pe="line"==q||"vertical-line"==q?ke||1:te;t.dataObject.markerSize[D].add(pe)}e.seriesdataAfterUpdate=[];var ge=t.dataset.getDataType("x"),ve=t.dataset.getDataType("y",i),ye=b.isCatNull(s,"x"),me=b.isCatNull(s,"y",i),be=ge==ox?n.domain():null,xe=ve==ox?r.domain():null,we=ge!=ox||null==n.domain||Z(t.dataObject.hierarchical)?t.dataObject.getCategories("x"):be;if(L.forEach(function(u,h){function g(e,n){return N&&(!e||e.isDummy)||!N&&I!==Kv.stkdarea&&(!e||e.isDummy||ye(s.getX(e))||me(s.getY(e,i)))?[]:[{color:ee?t.seriesColor[n%t.seriesColor.length]:o,index:ee?n:C,data:e}]}function v(e){switch(G){case qb:var a=null!=f&&null!=r(f)?r(qy(f,r.domain()[0])):r.origRange[0];return c?a:t.dataObject.getXYvalue(c,l,n,r,i,e,"x",null,y);case $b:return a=(null!=f&&null!=n(f)?n(qy(f,n.domain()[0])):n.origRange[0])+(null!=n.bandwidth?n.bandwidth()/2:0),c?t.dataObject.getXYvalue(c,l,n,r,i,e,"x",null,y):a;case Yb:case Ub:case Gb:case tx:case nx:case ex:return t.dataObject.getXYvalue(c,l,n,r,i,e,"x",null,y);default:var o=(c?r:n).origRange;return o[c&&O||!c&&S?o.length-1:0]}}function b(e){switch(G){case qb:var a=null!=f&&null!=r(f)?r(qy(f,r.domain()[0])):r.origRange[0];return c?t.dataObject.getXYvalue(c,l,n,r,i,e,"y",null,y):a;case $b:var o=(null!=f&&null!=n(f)?n(qy(f,n.domain()[0])):n.origRange[0])+(null!=n.bandwidth?n.bandwidth()/2:0);return c?o:t.dataObject.getXYvalue(c,l,n,r,i,e,"y",null,y);case Yb:case Ub:case Gb:case tx:case nx:case ex:return t.dataObject.getXYvalue(c,l,n,r,i,e,"y",null,y);default:var s=(c?n:r).origRange;return s[c&&S||!c&&O?s.length-1:0]}}function w(e){return N&&(!e||e.isDummy)||!N&&I!==Kv.stkdarea&&(ye(s.getX(e))||me(s.getY(e,i)))?0:j?t.dataObject.getXYvalue(c,l,n,r,i,e,"z",t.zscale,y):te}var k;k=ge==ox||ve==ox?t.dataObject.updateSeriesdatabyCategories(R(u),be,xe,i):u,t.renderVisiblePointsOnly&&(k=Gt.helpers.filterPointsInViewport(t,k,"scatter","xy",a)),e.seriesdataAfterUpdate[h]=k;var A,T,L,M=P.disabled;if(G==nx||G==tx){if(A=k,S&&(A=A.slice(0).reverse()),T=A,G==tx)T=A.map(function(e,t){return Object.create(A[0])});else if(G==nx){var z=N&&O&&!l?r.domain().length-1:0;T=A.map(function(e,t){var n=Object.create(e),a=N||null==f||null==r(f)?r.domain()[z]:qy(f,r.domain()[0]);return l&&(n.y0=0,n.y=a),n[s.yidx(i)]=a,n})}L=R(T)}var D=mt(F,"g",function(e){return M?[]:[k]},".","class","subseries_"+h).selectAll("g.scatter").data(function(e){return e}).attr("class","scatter"),B=D.enter().append("g").attr("class","scatter"),V=B.size(),U=G!=ax?p:p/V;W&&(G==nx||G==tx?ti(T,L,A,we,G,Y,p,x,function(e){return{transform:function(t,n){return"translate("+v(e[n])+","+b(e[n])+")";}}},B,"scatter"):B.attr("transform",function(e,t){return"translate("+v(e)+","+b(e)+")"+(K&&G===Ub?" scale(0)":"")}).transition().delay(function(e,t){return G==ax?t*U:0}).duration(U).ease(Y).attr("transform",function(e){return"translate("+t.dataObject.getXYvalue(c,l,n,r,i,e,"x",null,y)+","+t.dataObject.getXYvalue(c,l,n,r,i,e,"y",null,y)+")"}));var Z=B.merge(D),Q=mt(Z,"path",g,".","class","outer");m||Q.styles({"fill-opacity":ne,"stroke-opacity":re,visibility:de});var pe=g;!K&&(0!==X.innerStrokeWidth||0!==X.innerFillOpacity&&"transparent"!==X.innerFillColor)||(pe=[]),mt(Z,"path",pe,".","class","inner").styles({"fill-opacity":ae,"stroke-opacity":ie,visibility:de}),m&&K&&Z.attr("transform",function(e){var t=fg(this).attr("transform"),n=fg(this).attr("size"),r=w(e);if(t)return t+" scale("+n/r+")"}),Z.style("visibility",function(e,t){if(!$)return vm;var n=0===t?hb:t===k.length-1?pb:fb;return-1<$.indexOf(n)?vm:"hidden"}).transition().delay(function(e,t){return G!=nx&&G!=tx||null==B.node()?G==ax?t*U:0:p}).duration(U).ease(Y).attr("transform",function(e){return"translate("+t.dataObject.getXYvalue(c,l,n,r,i,e,"x",null,y)+","+t.dataObject.getXYvalue(c,l,n,r,i,e,"y",null,y)+")"}).styles({transition:"opacity ease .2s"}),Fc(Z,t,"scatter"),t.dataObject.hierarchical&&(Z.attr("levelbycolumn",function(e,t){return e.levelByColumn}),t.dataObject.pivot&&Z.attr("levelbyrow",function(e,t){return e.levelByRow}));var Ce=G===Gb?2*p/5:U,_e=G===Gb?function(){return lm()*(3*p/5)}:0,Se=Z.selectAll("path.outer").attr("d",function(e,t){var n=fg(this.parentNode).attr("size"),r=w(e.data);return J(null!=n?K?r:n:G!=Ub&&G!==Gb||K?r:0)}).styles({"stroke-width":X.outerStrokeWidth,fill:function(e,n){var r=w(e.data);if(K)return oe.width=oe.height=parseFloat(r),oe.x=oe.y=-parseFloat(r)/2,"url("+_+"#"+tb.get(tb.svg_patterns,"imageFill",oe,{chartObj:t})+")";var a=r/2;return he(e.index,e.data,null,X.outerFillColor,null,H?[a,a]:null)},stroke:function(e,t){return fe(e.index,e.data,X.outerStrokeColor)},"stroke-dasharray":le,"stroke-linecap":ce,visibility:de}),Oe=Z.selectAll("path.inner").attr("d",function(e,t){var n=fg(this.parentNode).attr("size"),r=null!=n?n:G!=Ub&&G!==Gb||K?w(e.data):0;return J(r/2,"inner")}).styles({"stroke-width":X.innerStrokeWidth,fill:function(e,t){var n=w(e.data)/4;return he(e.index,e.data,null,X.innerFillColor,null,H?[n,n]:null)},stroke:function(e,t){return fe(e.index,e.data,X.innerStrokeColor)},"stroke-dasharray":se,"stroke-linecap":ue,visibility:de});Se.transition().delay(_e).duration(Ce).ease(Y).attr("d",function(e){return J(w(e.data))}).styles({"fill-opacity":X.outerFillOpacity,"stroke-opacity":X.outerStrokeOpacity}),Oe.transition().delay(_e).duration(Ce).ease(Y).attr("d",function(e){return J(w(e.data)/2,"inner")}).styles({"fill-opacity":X.innerFillOpacity,"stroke-opacity":X.innerStrokeOpacity});var Ae=(E&&E.animation&&E.animation.blink?Im(d.animation.blink,E.animation.blink,!0):d.animation.blink)||{};Vt(Z.selectAll(".outer,.inner"),Ae,t),Z.attr("size",function(e){return w(e)}),D.exit().remove(),e.getSymbolSize=w,e.getSymbolBBox=function(e){var t=w(e);return 0<t&&("line"==q||"vertical-line"==q)?"line"==q?{width:t,height:ke||1}:"vertical-line"==q?{height:ke||1,width:t}:void 0:null}}),H&&(e.highlighter=j?new ec(t,e):new Qs(t,e)),null!=Dy){var Ce;if(H||j)Ce=te+X.outerStrokeWidth;else{var ke=U(zm.getValueOfPlotOptions(E,d)("strokeWidth"),2);Ce=(X.size||ke)*te*.5+ke/2}u.push({renderer:e,charttype:"scatter",chartObj:t,rendererIndex:k,paneid:M,args:[P,a,Ce,y]})}e.renderedTimer=setTimeout(function(){e.chartRendered=m=!0},p)}),e}var t,n,r,a,i,o,l,s,c,u,d,h,f,p,g,v,y,m=!1,b=Gt.helpers;return e.getHighlighter=function(t,n){if(!e.highlighter){var r=Py.bubble.has(ln(t,null,n).value);e.highlighter=r?new ec(t,e):new Qs(t,e)}return e.highlighter},e.commonRendererProp=function(t){return arguments.length?(v=t,e):v},e.shiftInfo=function(t){return arguments.length?(g=t,e):g},e.yrangePos=function(t){return arguments.length?(y=t,e):y},e},et.bubble=function(){return{outerPadding:.02,multiColoring:!1,marker:{innerFillOpacity:0,innerStrokeWidth:0,innerStrokeOpacity:0,outerFillOpacity:.4,outerStrokeOpacity:1},hoveroptions:{innerFillColor:"transparent",innerStrokeColor:"transparent",innerStrokeOpacity:1,innerStrokeWidth:0,outerFillOpacity:.3,outerStrokeOpacity:.5},datalabels:{showAs:"y"},animation:{type:"sizing"},gradients:{options:{linear:{y2:100,gradientUnits:"userSpaceOnUse",colorGamma:[1.5,0]},radial:{radius:90,colorGamma:[1.5,0]}}}}},et.sunburst=function(){return{strokeColor:"white",innerRadius:30,outerPadding:20,animation:{type:"fan"},datalabels:{showAs:"y",type:"circular",padding:10,line:{strokeColor:"grey",strokeWidth:.3},innerLabel:{show:!1,showAs:"splitpercent",parentLabel:{}}}}};var W_=km.getComponent("annotation");My.sunburst=function(){function e(t){return t.each(function(E){function D(e){return l(E,e)||S(e)===O(e)||!e.value?fm:vm}function H(e){return e.depth&&pe[i(e)].plotoptions}function B(e){return U(Gn(H(e),_,x,"enabled"),!0)}function N(e,t){var n=Y(e,t);x.eventHandler.handlers.mousemove.call(x.eventHandler,n),Qf(e,n),x.cache.search.lastPane=K}function F(e,t){var n=Y(e,t);x.eventHandler.handlers.mouseout.call(x.eventHandler,n),Qf(e,n),x.cache.search.lastPane=null}function V(e,t){var n=Y(e,t);x.eventHandler.handlers.click.call(x.eventHandler,n),Qf(e,n),x.cache.search.lastPane=K}function W(t,n){if(e.chartRendered){var r=null==t.children?W_._empty?t:Xo(t,1<E.length?t.parent.data.seriesname:null):[t.data.seriesname,t.value],a=g.centroid(t);a=[a[0]+m/2,a[1]+b/2];var o=Y(t,n);o.coordinate=a,o.basedOn="plot",o.data=r,x.eventHandler.handlers.doubleclick.call(x.eventHandler,o,i(t),t),Qf(t,o),x.cache.search.lastPane=K}}function Y(t){var n=Xn(Hv()),r=o(t);return{renderer:e,seriesIndex:i(t),paneid:K,rendererIndex:q,coordinates:[n.pageX,n.pageY],element:this,data:t.data,level:r,selected:t.selected,_key:"ZC_"+x.id+"_"+r}}var G=c.params;x=G.chartObj,_=G.commonPlotOptions,G.color,w=G.notesArray,y=G.yaxiscolumnorder,p=G.dataset,x.systemConf;var X=G.labelQueue,Z=G.bound,q=G.rendererIndex;m=Z.width,b=Z.height;var Q,K=rn(x)?E[0].row+"_"+E[0].column:null,$=zm.getValueOfPlotOptions,J=_.datalabels,ee=+_.outerPadding||0,te="absolute"===_.showAsNegative;T=null,M=0,I=[];var ne=x.datalabels.moduleExists&&Pi(J,x)&&vi(J,x)?yi(J,x)+mi(J,x):0;L=_.events&&_.events.highlightHierarchy;var re=ei(_,null,x,Db),ae=re.enabled,ie=re.type,oe=re.easingType,le=R?ae?200:0:re.duration;f=Qy(m,b)/2-ee-2*ne;var se=Qy(qy(0,Ie(_.innerRadius,f)),Ie("95%",f)),ce=[],ue=[];S=function(e){return qy(0,Qy(2*sm,u(e.x0)))},O=function(e){return qy(0,Qy(2*sm,u(e.x1)))},A=function(e){return d(e.y0)+Q/2},P=function(e,t){return t=t||0,function(e){return d(e.y1)+t-Q/2}},z=function(e){if(l(E,e))return 0;var t=p.getY(e,y)||0;return t<0?te?Ky(t):0:t},h=qg().startAngle(S).endAngle(O).innerRadius(A).outerRadius(P(d)),g=qg().startAngle(S).endAngle(O).innerRadius(A).outerRadius(P(d)),(k=mt(t,"g",[E],".","class","hierarchychart")).attr("transform","translate("+m/2+","+b/2+")"),v=[],k.selectAll(Um).each(function(e){v.push({x0:e.x0,x1:e.x1})});var de=function(e){var t=Jg(),n=Qg(e,s).sum(z).sort(Wg);return t(n),n.descendants()}(E);e.total=de[0].value,ii(C=mt(k,Um,de));var he=[],fe=[],pe=[];E.forEach(function(t,n){ce[n]=e.fillColorFunc=Sn(x,n,K,[f,f]),ue[n]=An(x,n,K),fe[n]=[[]],fe[n].disabled=t.disabled,fe[n].plotoptions=t.plotoptions,pe[n]=[],pe[n].disabled=t.disabled,pe[n].plotoptions=t.plotoptions;var r=Mn(x,n,K);he[n]=kg().domain([0,Sp(t)]).range([r,_n(r,1.5,"brighter")])}),C.attr("class",function(e){return null!=o(e)?"zc_sunburst series_"+i(e):"zc_sunburst"}).attr("id",function(e){return"arcPath_"+o(e)}).each(function(e,t){e.index=t;var n=i(e),r=o(e);if(M=qy(M,e.depth),e.data._seriesIndex=n,e.data.paneid=K,e.depth){if(e.data.color)e.data.arcColor=e.data.color;else{var a=E[n].plotoptions,l=null!=a?$(a,_)("childrenColors"):_.childrenColors;if(e.children||null==l){var s=he[n](j[r]);e.data.arcColor=s}else e.data.arcColor=l[j[r]%l.length]}e.children||fe[n][0].push(e),pe[n].push(e),I[r]=e}else e.data.arcColor=pm}),u=kg().range([0,2*sm]),d=kg().range([se,f]).domain([de[0].y1,1]),Q=Qy(qy(0,Ie(_.padding,f,0)),.9*(f-se)/M),C.style("display",function(e){var t=fg(this).style("display"),n=D(e);return!R||t===fm&&n===fm?n:vm}).transition().duration(le).ease(R?xg:oe).attrTween("d",R||"fan"===ie?n:"wheel"===ie?a:r).on("end",function(){fg(this).style("display",D)}),C.styles({fill:function(e){var t=i(e);return e.fillColor=ce[t||0](t,e.data)},stroke:function(e){var t=i(e);return e.depth?_.strokeColor?_.strokeColor:ue[t||0](t,e.data):"white"},"stroke-opacity":function(e){return e.depth?$(E[i(e)].plotoptions,_)("strokeOpacity"):1},"fill-opacity":function(e){return e.depth?$(E[i(e)].plotoptions,_)("fillOpacity"):0},"stroke-width":function(e){return e.depth?$(E[i(e)].plotoptions,_)("strokeWidth"):0},cursor:function(e){var t=H(e);return B(e)?Gn(t,_,x,"cursor")||gm:vm},"pointer-events":function(e){return e.depth&&B(e)?null:"none"}}),Hc(C,x,"sunburst"),Fc(C,x,"sunburst"),or(x,C,function(e){return!B(e)},K),x.cache.search||(x.cache.search={});var ge={target:"plot",touchleave:!0,chartObj:x},ve={mousemove:N,mouseout:F,click:V,dblclick:W},ye={singletouchmove:N,touchend:F,tap:V,dbltap:W};Mr(C.filter(function(e){return e.depth&&B(e)}),ve,ye,ge),e.renderedTimer=setTimeout(function(){if(null!=Dy){var t=qg().startAngle(S).endAngle(O).innerRadius(P(d)).outerRadius(P(d)),n=_.datalabels.padding+ne,r=qg().startAngle(S).endAngle(O).innerRadius(P(d,n)).outerRadius(P(d,n));E.forEach(function(n,a){function i(n,i){return[fe,a,n,f,function(t,n){return n===ew?e.total:e.getProcessedNode(t).parent.value},r,t,g,[m/2,b/2],i]}var o=x.renderer[rn(x)?q+a:0],l=rn(x)?q+a:a,s=rn(x)?n.row+"_"+n.column:a;X.push({renderer:o,chartObj:x,charttype:Tb,rendererIndex:l,paneid:s,args:i(pe[a])}),X.push({renderer:o,chartObj:x,charttype:"pieInnerLabels",rendererIndex:l,paneid:s,args:i(fe[a][0])}),X.push({renderer:o,chartObj:x,charttype:"pieInnerLabels",rendererIndex:l,paneid:s,args:i(pe[a].filter(function(e){return e.children}),!0)})})}W_._empty||E.forEach(function(t,n){w=W_.preprocessAnnotations(E,n,function(t,n,r){var a=e.getProcessedNode(t),i=g.centroid(a);return[i[0]+m/2,i[1]+b/2]},w,x,G)}),e.chartRendered=R=!0},le+1e3/60)}),e}function t(){if(!T){var e=x.staticPaneSVG.selectAll("g#zchierarchyhighlight");e.empty()||((T=e).attr("transform","translate("+(x.plotarea.left+m/2)+","+(x.plotarea.top+b/2)+")"),E=mt(T,Um,av(L?M:1)))}}function n(e,t){var n=tv(R&&v[t]?S(v[t]):0,S(e)),r=tv(R&&v[t]?O(v[t]):0,O(e));return function(t){return h.startAngle(n(t)).endAngle(r(t)),h(e)}}function r(e){var t=tv(0,A(e)),n=tv(0,P(d)(e));return function(r){return h.innerRadius(t(r)).outerRadius(n(r)),h(e)}}function a(e){var t=tv(S(e),O(e));return function(n){return h.endAngle(t(n)),h(e)}}function i(e){var t=o(e);if(t)return+t.split("_")[0]}function o(e){return e.level||e.data&&e.data.level}function l(e,t){var n=i(t);return Z(n)&&e[n].disabled}function s(e){var t=o(e),n=t&&t.split("_").length;return j[t]=1===n?D=0:D,!x.dataObject.hasHierarchyData&&1==n&&e.length<2&&e[0]&&te(e[0][0])?e[0]:te(e[0])?e:(D++,null)}var c,u,d,h,f,p,g,v,y,m,b,x,w,C,k,_,S,O,A,P,T,E,L,M,z,I,D,R=!1,j={};return e.commonRendererProp=function(t){return arguments.length?(c=t,e):c},e.defaultMouseOverFunc=function(e,n,r,a){t();var i=x.legendHighlight.getLegendHighlightEffect(n,"selectedSeries","plot",a),l=function(e){var t=[],n=Um+"#arcPath";return L?e.split("_").forEach(function(e){n=n+"_"+e,t.push(n)}):t.push(n+"_"+e),t}(o(e));if(i!==fm){T.style("opacity",null);var s=[c.params.bound.x,c.params.bound.y],u=k.selectAll(l.join()).nodes();E.each(function(e,t){var r=fg(this);if(u[t]){var o=fg(u[t]),l=Ln(x,n,o.datum(),n,a);r.attr("d",o.attr("d")).styles(x.legendHighlight.getEffect(i,Db,Ny.test(i)?l:pm,{fill:pm,stroke:l},n,"plot")),r.attr("transform","translate("+s[0]+","+s[1]+")")}else r.attr("d",null)})}},e.defaultMouseOutFunc=function(e,n){t(),T.style("opacity",0)},e.getProcessedNode=function(e){return I[o(e)]},e},ve(Op,Vf);var Y_=Op.prototype;Y_.renderingContext=function(){return jw.get("nonaxis").call(this,this.chart)},Y_.translateContext=function(e){var t=this.chart,n=Ap(e,t,this.renderer),r=n.layout.dimension,a=n.commonRendererProp().bound(),i=t.plotarea;return[i.left+r.x+a.x,i.top+r.y+a.y]},Y_.data=function(e){var t=this.chart,n=Ap(e,t,this.renderer),r=n.layout,a=r.dimension,i=n.commonRendererProp().bound();return function(){t.cache.data[e._key]||(t.cache.data[e._key]={});var o=t.cache.data[e._key],l=n.getProcessedNode(e),s=cC.getTileBound(r,l);return o._x=e._x=o._x||s.x+a.x+i.x+s.width/2,o._y=e._y=o._y||s.y+a.y+i.y+s.height/2,o._width=e._width=o._width||s.width,o._height=e._height=o._height||s.height,e._centric=!0,o._size=e._size=2*Nn({x:e._x,y:e._y},{x:e._x-s.width/2,y:e._y-s.height/2}),o._uid=e._uid=t.dataset.getX(e),o._visible=e._visible=dr(t,e),o._point=e}},Y_.options=function(e){var t=this.chart,n=Ap(e,t,this.renderer),r=n.layout,a=n.commonRendererProp().params,i=r.dimension,o=e.seriesIndex,l=Pp(n,e),s=we(a.commonPlotOptions.borderRadius),c=In(a.commonPlotOptions,t),u=Ln(t,c?e.itemIndex:o,e,o);return"canvas"===t.plot.renderer.mode&&(s=Ct(s,l.width,l.height,!0)),{radius:s,color:u,strokeColor:pm,fillColor:Sn(t,o,null,[i.width,i.height],null,"svg")(o,e,null,null,null,[l.width,l.height])}},Y_.path=function(e,t){var n=t.context.call(this),r=t.translate.call(this,e),a=Ap(e,this.chart,this.renderer),i=a.commonRendererProp().params,o=Pp(a,e),l=wt(o.x,o.y,o.width,o.height,we(i.commonPlotOptions.borderRadius));return n.style("display","").style("opacity",null).attr("transform","translate("+r[0]+","+r[1]+")"),Et("path",".treemap-highlight",[e],n).attr("d",l)},Tp.prototype.createScale=function(){var e=this.dimension,t=kg().domain([0,e.width]).range([0,e.width]),n=kg().domain([0,e.height]).range([0,e.height]);this.xScale=t,this.yScale=n},Tp.prototype.getLayout=function(){var e=this.dimension,t=this.rp.commonPlotOptions,n=t.parent,r=xe(t.padding),a=t.mode;return ev().size([e.width,e.height]).tile(Cg(a)).round(!0).paddingInner(function(e){return e.value&&(e.children[0]&&e.children[0].children?n:t).interPadding||0}).paddingTop(function(e){return e.depth&&e.value?r.top:0}).paddingBottom(function(e){return e.depth&&e.value?r.bottom:0}).paddingLeft(function(e){return e.depth&&e.value?r.left:0}).paddingRight(function(e){return e.depth&&e.value?r.right:0})},Tp.prototype.getValue=function(e){var t=this.chartObj,n=this.rp,r=Ep(this,e),a=Gt.helpers.getParsedYAxisOrder(r.yaxiscolumnorder),i=t.dataset.getY(e,a)||0,o="absolute"===n.commonPlotOptions.negativeAs;return cC.isDisabled(r,e)?0:i<0?o?Ky(i):0:i},Tp.prototype.getChildren=function(e){var t=cC.getLevel(e),n=t&&t.split("_").length;return!this.chartObj.dataObject.hasHierarchyData&&1==n&&e.length<2&&e[0]&&te(e[0][0])?e[0]:te(e[0])?e:vm},Tp.prototype.processData=function(){var e=this,t=e.data,n=e.chartObj,r=e.commonRendererProp,a=e.dimension,i=e.rp,o=i.commonPlotOptions,l=i.color,s=i.rendererIndex,c=void 0===s?0:s,u=o.colorScheme||"solid",d=0,h={},f=[],p=[],g=[],v=[],y=[],m=[],b=[],x=Qg(t,function(t){return e.getChildren(t)}).sum(function(t){return e.getValue(t)}),w=e.layout(x).descendants(),C=t[0].row+"_"+t[0].column;t.forEach(function(e,t){var r=n.rendererConf[c+t],i=Ln(n,t,null,t,C);m[t]=Sn(n,t,C,[a.width,a.height],null,null,null,r.params),b[t]=An(n,t,C,null,r.params),p[t]=0,g[t]=[],g[t].disabled=e.disabled,g[t].plotoptions=e.plotoptions,f[t]=kg().domain([0,Sp(e)]).range([i,_n(i,"solid"===u?0:"shades"===u?-1:1,"brighter",Mg)])}),w.forEach(function(t,a){var i=cC.getLevel(t),s=cC.getSeriesIndex(t),c=cC.getItemIndex(t),u=Ep(e,t);if(t.index=a,t.data.paneid=C,t.depth){if(t.data.color)t.data.arcColor=t.data.color;else{var m=In(o,n)?l[c%l.length]:f[s](p[s]);t.data.arcColor=m}y[i]=t}t.children?t.data.arcColor=cC.getParentColor(r,t,C):(v[s]||(v[s]=[]),v[s].push(t),p[s]++),t.depth&&g[s].push(t),cC.isDisabled(u,t)||(h[i]=d++)}),n.renderer[0].fillColorFunc=m[0],e.processedData=w,e.previousSiblingsCount=h,e.seriesWiseNodes=g,e.leafNodes=v,e.nodes=y,e.fillColor=m,e.strokeColor=b};var U_=km.getComponent("annotation");i_.treemap=function(){function e(r,o,l,s,c,u){function d(t,n){return n===ew?e.total:e.getProcessedNode(t).parent.value}var h=t.params,f=h.chartObj,p=h.commonPlotOptions,g=h.notesArray,v=h.labelQueue,y=h.rendererIndex;e.layout=n=A?n:new Tp(t,rn(f)?o:f.seriesdata);var m=dx.isQuantileColorScale(f),b=In(p,f),x=we(p.borderRadius),w=p.parent,C=n.dimension,k=n.leafNodes,_=n.seriesWiseNodes,S=n.processedData,O=n.fillColor,A="highlight-canvas"===r.canvas.className;if(r.save(),r.translate(C.x,C.y),e.total=S[0].value,A){var P=u;S=S.filter(function(e){return a(e)===P&&!(m&&e.children)}),m&&(S=Dx.filterSelectionByColor(S,!0,s,f))}if(S.forEach(function(e,t){function o(t,n){t.save(),t.translate(h+v/2,g+y/2),t.beginPath(),t.lineWidth=(e.children?w.strokeWidth:vm)||p.strokeWidth,t.strokeStyle=kn(s,(e.children?w.strokeOpacity:vm)||p.strokeOpacity),t.fillStyle=n,xw.roundedRect(t,-v/2,-y/2,v,y,x),t.fill(),t.stroke(),t.closePath(),t.restore()}var s,c=a(e),u=i(e),d=cC.getTileBound(n,e),h=d.x,g=d.y,v=d.width,y=d.height,m=(e.children?w.strokeColor:vm)||p.strokeColor;e.depth?A&&B(l)&&f.legendHighlight.getLegendHighlightEffect(P,"selectedSeries",e.data.paneid)!==fm?s="black":m?s=m:e.children&&(s=e.data.arcColor):s=pm;var C;f.imagePallete&&Pn(f.dataset.getClr(e),f)&&e.depth?tb.canvas_patterns.imageFill({x:h,y:g,context:r,name:Ln(f,b?u:c,e,c)},o):(C=Z(l)?l:e.children?kn(e.data.arcColor,w.fillOpacity):O[c](c,e.data,vm,vm,p.fillOpacity,[v,y]),o(r,C))}),r.restore(),Dy){var T=[C.x,C.y];o.forEach(function(t,n){var r=rn(f)?y+n:n,a=rn(f)?t.row+"_"+t.column:n;v.push({renderer:e,charttype:"hierarchy",chartObj:f,rendererIndex:r,paneid:a,args:[_[n],n,vm,vm,d,k[n],T]}),v.push({renderer:e,charttype:"hierarchy",chartObj:f,rendererIndex:r,paneid:a,args:[_[n],n,vm,vm,d,[_[n][0]],T,!0]})})}return U_._empty||A||f.seriesdata.forEach(function(t,r){g=U_.preprocessAnnotations(f.seriesdata,r,function(t,r,a){var i=e.getProcessedNode(t),o=cC.getTileBound(n,i);return[o.x+C.x,o.y+C.y]},g,f,h)}),e.chartRendered=!0,e}var t,n,r=cC.getLevel,a=cC.getSeriesIndex,i=cC.getItemIndex;return e.commonRendererProp=function(n){return arguments.length?(t=n,e):t},e.getProcessedNode=function(e){return n.nodes[r(e)]},e.getHighlighter=function(t,n){return e.highlighter=new Op(t,e)},e},et.treemap=function(){return{outerPadding:5,strokeColor:"rgba(255,255,255,0.7)",animation:{type:"fadeOneByOne"},datalabels:{showAs:"y",vAlign:"bottom",hAlign:"left"},gradients:{options:{linear:{y2:100,x2:100,colorGamma:[.5,0]},radial:{radius:100}}},parent:{strokeOpacity:0,datalabels:{position:"inset",vAlign:"center",hAlign:"center",showAs:"y",show:!1},events:{}}}};var G_=km.getComponent("annotation");cC.addEvents=function(e){function t(){var t=Mp(e);if(i=t&&t.point){var n=t.rendererIndex;f=l.renderer[n],e=f.layout,h=e.data,v=rn(l)?e.data[0].row+"_"+e.data[0].column:0,c=e.rp.commonPlotOptions;var r=Lp(i,vm,f,v,n);l.eventHandler.handlers.mousemove.call(l.eventHandler,r),Qf(i,r);var a=Gn(h[cC.getSeriesIndex(i)].plotoptions,c,l,"cursor");dc.call(l.eventHandler,vm,a,v)}else if(o&&o.point){var i=o.point;n=o.rendererIndex,f=l.renderer[n],e=f.layout,v=rn(l)?e.data[0].row+"_"+e.data[0].column:0,c=e.rp.commonPlotOptions,r=Lp(i,vm,f,v,n),l.eventHandler.handlers.mouseout.call(l.eventHandler,r,i,u(i)),Qf(i,r),hc.call(l.eventHandler)}o=t}function n(){var e=o&&o.point;if(e){var t=Lp(e,vm,f,v,e.rendererIndex);l.eventHandler.handlers.mouseout.call(l.eventHandler,t,u(e)),Kf(e)}else i()}function r(){var t=Mp(e),n=t&&t.point;if(n){var r=t.rendererIndex;f=l.renderer[r],e=f.layout,v=rn(l)?e.data[0].row+"_"+e.data[0].column:0,c=e.rp.commonPlotOptions;var a=Lp(n,vm,f,v,r);l.eventHandler.handlers.click.call(l.eventHandler,a,n,u(n),d(n),f),Qf(n,a),o=t}}function a(){var t=Mp(e),n=t&&t.point;if(n){var r=t.rendererIndex;f=l.renderer[r],e=f.layout,h=e.data,v=rn(l)?e.data[0].row+"_"+e.data[0].column:0,c=e.rp.commonPlotOptions;var a=G_._empty?n:Xo(n,1<h.length?h[u(n)].seriesname:vm),i=cC.getTileBound(l,n),d=[i.x+s.x,i.y+s.y],p=Lp(n,vm,f,v,r);p.coordinate=d,p.basedOn="plot",p.data=a,l.eventHandler.handlers.doubleclick.call(l.eventHandler,p,u(n),n),Qf(n,p),o=t}}function i(e,t){l.staticPaneSVG.selectAll("g#zchierarchyhighlight").style("opacity",0)}var o,l=e.chartObj,s=e.dimension,c=e.rp.commonPlotOptions,u=cC.getSeriesIndex,d=cC.getItemIndex,h=e.data,f=l.renderer[e.rp.rendererIndex||0],p=[l.plotarea.left+s.x,l.plotarea.top+s.y],g=h.map(function(e,t){return Sn(l,t,null,[s.width,s.height],vm,"svg")}),v=rn(l)?e.data[0].row+"_"+e.data[0].column:0,y=l.eventHandler.tracker.removeAllListeners();l.positionEventTrackerElement(),f.defaultMouseOverFunc=function(t,n,r){var a=(t=t.data||t).paneid,i=we(c.borderRadius),o=In(c,l),s=l.staticPaneSVG.selectAll("g#zchierarchyhighlight"),u=s.selectAll(Um),d=l.legendHighlight.getLegendHighlightEffect(n,"selectedSeries","plot",a),h=l.legendHighlight.getLegendHighlightEffect(n,"unselectedSeries","plot",a),p=Ln(l,o?r:n,t,n),v=Ny.test(d)||Fy.test(h)?p:pm,y=f.getProcessedNode(t),m=cC.getTileBound(l,y);m.x+=e.rp.bound.x,m.y+=e.rp.bound.y,s.style("opacity",vm),u.attr("d",function(){return f.getProcessedNode(t),"canvas"===l.plot.renderer.mode&&(i=Ct(i,m.width,m.height,!0)),wt(m.x,m.y,m.width,m.height,i)}).style("fill",v===pm?pm:g[n](n,t,vm,vm,vm,[m.width,m.height])).styles(l.legendHighlight.getEffect(d,"treemap",v,{fill:v,stroke:p},o?r:n,"plot"))},f.defaultMouseOutFunc=i,mt(l.staticPaneSVG.selectAll("g#zchierarchyhighlight").attr("transform","translate("+p+")"),Um,[1]),Mr(y,{mousemove:t,mouseout:n,click:r,dblclick:a},{singletouchmove:t,touchend:n,tap:r,dbltap:a},{target:"plot",touchleave:!0,chartObj:l})};var X_=km.getComponent("annotation");My.treemap=function(){function e(f){return f.each(function(p){var g=t.params;a=g.chartObj,i=g.commonPlotOptions;var v=g.notesArray,y=a.systemConf,m=g.labelQueue,b=g.rendererIndex;e.layout=o=new Tp(t,p),l=o.dimension,o.nodes,s=o.leafNodes,c=o.seriesWiseNodes;var x=i.strokeWidth,w=i.strokeOpacity,C=i.fillOpacity,k=o.fillColor,_=o.strokeColor,S=we(i.borderRadius),O=[l.x,l.y],A=ei(i,vm,a,"treemap"),P=A.enabled,T=A.type,E=u?xg:A.easingType,L=u?P?200:0:A.duration,M=a.dataObject.totalnoofdatas,z=u?L:T===Vb?L/M:L,I=u?0:T===Vb?function(e){return o.previousSiblingsCount[d(e)]*(L/M)}:T===Wb?function(){return lm()*M*(L/M)}:0,D=T===Fb||T===Wb||T===Vb?0:vm,R=i.events?i.events.cursor||gm:y.chart.plot.events.cursor||gm,j=i.parent,H=j.events.cursor;(n=mt(f,"g",[p],".","class","hierarchychart")).attr("transform","translate("+l.x+","+l.y+")").styles({"stroke-width":x,"stroke-opacity":w,"fill-opacity":C,cursor:R});var B=o.processedData;e.total=B[0].value,r=mt(n,Um,B),e.total||r.remove(),r.styles({fill:function(e){if(e.children)return e.fillColor=e.data.arcColor;var t=cC.getTileBound(o,e),n=h(e);return e.fillColor=k[n](n,e.data,vm,vm,vm,[t.width,t.height])},stroke:function(e){var t=(e.children?j.strokeColor:vm)||i.strokeColor,n=h(e);return e.depth?t||(e.children?e.data.arcColor:_[n](n,e.data)):pm},visibility:function(e){return e.value?vm:"hidden"}}).attr("class",function(e){return Z(d(e))?"zc_treemap series_"+h(e)+(e.children?" zchierarchyparent":""):"zc_treemap"}).attr("id",function(e){return"tree_"+d(e)}),n.selectAll(Um+".zchierarchyparent").styles({"stroke-width":j.strokeWidth,"stroke-opacity":j.strokeOpacity,"fill-opacity":j.fillOpacity,cursor:H}),u||r.attr("transform",function(e){var t=cC.getTileBound(o,e),n=t.x+t.width/2,r=t.y+t.height/2;return T===Xb?(n=l.width/2,r=l.height/2):T===$b?n=t.width/2:T===qb&&(r=t.height/2),"translate("+n+","+r+")"}).attr("d",function(e){var t=cC.getTileBound(o,e),n=-t.width/2,r=-t.height/2,a=t.width,i=t.height;return T===$b?a=0:T===qb&&(i=0),wt(n,r,a,i,S)}).style("opacity",D),Hc(r,a,"treemap"),Fc(r,a,"treemap"),r.transition().duration(z).delay(I).ease(E).attr("transform",function(e){var t=cC.getTileBound(o,e);return"translate("+(t.x+t.width/2)+","+(t.y+t.height/2)+")"}).attr("d",function(e){var t=cC.getTileBound(o,e);return wt(-t.width/2,-t.height/2,t.width,t.height,S)}).style("opacity",rn(a)?function(){return fg(this).attr("filtered-opacity")||1}:vm),e.renderedTimer=setTimeout(function(){function t(t,n){return n===ew?e.total:e.getProcessedNode(t).parent.value}Dy&&p.forEach(function(e,n){var r=a.renderer[rn(a)?b+n:0],i=rn(a)?b+n:n,o=rn(a)?e.row+"_"+e.column:n;m.push({renderer:r,charttype:"hierarchy",chartObj:a,rendererIndex:i,paneid:o,args:[c[n],n,vm,vm,t,s[n],O]}),m.push({renderer:r,charttype:"hierarchy",chartObj:a,rendererIndex:i,paneid:o,args:[c[n],n,vm,vm,t,[c[n][0]],O,!0]})}),X_._empty||p.forEach(function(t,n){v=X_.preprocessAnnotations(p,n,function(t,n,r){var a=e.getProcessedNode(t),i=cC.getTileBound(o,a);return[i.x+l.x,i.y+l.y]},v,a,g)}),e.chartRendered=u=!0},L+17+(I?4*M:0))}),e}var t,n,r,a,i,o,l,s,c,u=!1,d=cC.getLevel,h=cC.getSeriesIndex;return e.commonRendererProp=function(n){return arguments.length?(t=n,e):t},e.getProcessedNode=function(e){return o.nodes[d(e)]},e.getHighlighter=function(t,n){return e.highlighter=new Op(t,e)},e},zy.getWaterfallCategoriesConfig=function(e,t){return{cascaded:e&&e.cascadeCategories?Im(t.cascadeCategories,e.cascadeCategories,!0):t.cascadeCategories,rising:e&&e.risingCategories?Im(t.risingCategories,e.risingCategories,!0):t.risingCategories,falling:e&&e.fallingCategories?Im(t.fallingCategories,e.fallingCategories,!0):t.fallingCategories}},dx.getWaterfallColor=function(e,t,n){return e.isCascaded?t.cascaded.color||n:e.isPositive?t.rising.color||n:t.falling.color||n},My.waterfallHelpers=function(){},My.waterfallHelpers.drawComparisonLine=function(e,t,n){var r=n.chart,a=function(e,t){var n=t.chart,r=t.renderer,a=n.dataset,i=t.seriesindex,o=t.yaxiscolumnorder,l=t.stacked,s=n.dataObject.waterfall.layout._keys,c=(Gt.helpers.isCatNull(a,"y",o),e.length,t.axisrotated?r.getParamValue("height",e[0],i,null,r.commonOption):r.getParamValue("width",e[0],i,null,r.commonOption)),u=(Qy(c/10,1),t.chart.dataObject.stackedChart?t.chart.dataObject.waterfall.stackExtent[0]:null),d=(function(e){e.filter(function(e,t){return e.isCascaded})}(e),0),h=[];return e.map(function(n,a){var o=e[a];if(o.isCascaded&&e[a+1]){var c=function(e,t,n){var r=e[t],a=n.chart.dataObject.stackedChart?n.chart.dataObject.waterfall.stackExtent[0]:null,i=0,o=r;if(r){for(;!r.isCascaded;){var l=zp(r,a);if(i<l&&(o=r,i=l),!(r=e[++t]))return}return{point:r,maxPt:o}}}(e,a+1,t);if(c){var f=c.maxPt,p=(Dp(o,"x",t,u),Dp(f,"x",t,u)),g=Dp(f,"y",t,u),v=Dp(o,"x",t,u),y=Dp(o,"y",t,u),m=Dp(o,"width",t,u),b=Dp(o,"height",t,u),x=0==o.index||o.index==e.length-1,w=c.point,C=function(e,t,n,r,a){var i,o,l,s,c=a.axisrotated,u=a.chart.dataObject.stacked,d=a.chart.dataObject.waterfall.datalabelPadding,h=qy(n.x,u?t.x:t.x+t.width),f=Qy(n.y,t.y),p=e.unshared?e.width/2:e.width/2+e.width/4,g=t.unshared?t.width/2:t.width/4,v=e.unshared?e.height/2:e.height/4,y=t.unshared?t.height/2:t.height/2+t.height/4;return s=c?(i=[e.x+e.width+d,e.y+v],o=[h+d+30,e.y+v],l=[h+d+30,t.y+y],[t.x+t.width+d,t.y+y]):(i=[e.x+p,e.y-d],o=[e.x+p,f-d-30],l=[t.x+g,f-d-30],[t.x+g,t.y-d]),[i,o,l,s]}({x:v,y:y,width:m,height:b,unshared:x},{x:Dp(w,"x",t,u),y:Dp(w,"y",t,u),width:Dp(w,"width",t,u),height:Dp(w,"height",t,u),unshared:0==w.index||w.index==e.length-1},{x:p,y:g},0,t);if(l){var k=s[o.index],_=s[w.index];C.y=(_.stackedValue-k.stackedValue)/qy(k.stackedValue,_.stackedValue)*100}else C.y=(w.y-o.y)/o.y*100;w.percent=C.y,0==d&&0!=a&&(r.getParamValue("y",e[0],i,null,r.commonOption),o.percent=(o.y-e[0].y)/o.y*100),h.push(C)}d++}}),h}(t,n),i=n.plotoptions,o=n.commonPlotOptions,l=ei(o,i,r,"waterfall"),s=l.enabled,c=i&&i.comparisonLine?Im(o.comparisonLine,i.comparisonLine,!0):o.comparisonLine;n.animationOptions=l;var u=Ug().x(function(e,t){return e[0]}).y(function(e,t){return e[1]});mt(mt(e,"g",c.enabled?[1]:[],".","class","zccomparisonLines"),"path",a,".","class","lines",null,function(e){return e.y}).attr("d",function(e,t){return u(e)}).styles({fill:"none",stroke:c.strokeColor||"black","stroke-width":c.strokeWidth||1,"stroke-dasharray":rt(c.dashStyle,c.strokeWidth||1),"stroke-opacity":0}).transition().duration(s?l.duration:0).styles({"stroke-opacity":c.strokeOpacity||1}),function(e,t,n,r,a){var i=a.chart,o=a.animationOptions.enabled,l=a.axisrotated,s=a.renderer,c=a.seriesindex,u=l?s.getParamValue("height",t[0],c,null,s.commonOption):s.getParamValue("width",t[0],c,null,s.commonOption),d=Qy(u/10,1),h=function(e){return e.map(function(t,n){return e[n][3]})}(n),f={inner:0,outer:1},p=l?"triangle-left":"triangle-down";mt(mt(e,"g",r.enabled?[1]:[],".","class","zcmarkerPointers"),"g",h,".","class","markers",null,function(e,t){return n[t]&&n[t].y}).each(function(e,t){var n=fg(this);n.attrs({transform:function(e){return"translate("+e[0]+","+e[1]+")"}}).style("opacity",0).transition().duration(o?a.animationOptions.duration:0).style("opacity",1),Nt(n,null,{size:d,symbol:p,outerFillOpacity:r.strokeOpacity,outerStrokeOpacity:r.strokeOpacity},{symbolSize:f,color:r.strokeColor||"black"},i)})}(e,t,a,c,n),function(e,t,n,r){var a=r.chart,i=a.systemConf,o=r.axisrotated,l=r.animationOptions.enabled,s=n.label||{},c=s.labelPos,u=zm.getVal(Y([s,i.chart,i.canvas,Qm],"fontSize")),d="fixedTop"==c?o?a.plotarea.width:u:null,h={format:{decimalPlaces:"2",signEnabled:!0,suffix:"%"}},f=mt(e,"g",n.enabled?[1]:[],".","class","zccomparisonLabels");mt(f,"text",t,".","class","labels",null,function(e){return e.y}).attrs({x:function(e,t){return o?d||e[1][0]+10:e[0][0]+(e[2][0]-e[0][0])/2},y:function(e,t){return o?e[1][1]+(e[2][1]-e[1][1])/2:d||e[1][1]-10}}).text(function(e,t){return Aa(h,e.y,sx,a)}).styles({"text-anchor":o?"fixedTop"==c?"end":"start":"middle",opacity:0}).transition().duration(l?r.animationOptions.duration:0).styles({opacity:1}),kt(f,[s,i.chart,i.canvas,Qm])}(e,a,c,n)},My.waterfallHelpers.drawComparisonLine;var Z_=Rp.prototype;Z_.add=function(e,t,n,r,a){var i=this,o=i._stack,l=i._keys,s=i._rows,c=i._extent,u=i._base,d=i._sum,h=u,f=u,p=l[t];l[t]=p={},p.runningTotal=[vm,vm],p.absoluteTotal=[u,u],e.forEach(function(e,i){n(e);var p=r(e)||u,g=a(e),v=+(u<=p),y=o?t:i,m=o?i:t,b=l[t].runningTotal,x=l[t].absoluteTotal;g&&(p=p||s[m]||h,v=+(u<=p),h=d=u,s[m]=u,r(e,p)),o&&(h=b[v]||d||u,b[v]=h+p,x[v]+=p,s[m]=(s[m]||u)+p,f+=p),e.y0=h,e.y=p,e.index=y,e.isPositive=v,e.isCascaded=g,h+=p,c=Fg([].concat(_toConsumableArray(c),[h,u]))}),i._extent=c,i._data=i._data.concat(e),i._sum=p.runningTotal[+(u<f)]},Z_.stack=function(e){this._stack=e},Gt.prototype.processDataForWaterFall=function(){function e(e){return i.getActualX(e)}function t(e,t){return t&&(e[i.yidx(r)]=t),i.getY(e,r)}function n(e){return e[p]}var r,a=this,i=a.dataset,o=a.data,l=a.chartObj,s=l.dataObject,c=a.processedseriesData,u=c.length,d=s.getCategories("x"),h=d.length,f=a.isstacked("waterfall"),p=U(o.chart.plot.plotoptions.waterfall.cascadeCategories.dataindex,2),g=[];a.waterfall={};var v=new Rp;if(f){v.stack(!0);for(var y=[],m=0;m<h;m++){for(var b=d[m],x=(o=[],0);x<u;x++){var w=c[x],C=w.disabled,k=w.data,_=k.length;if(r=Gt.helpers.getParsedYAxisOrder(w.yaxiscolumnorder),!C)for(var S=0;S<_;S++){var O=k[S];if(i.getActualX(O[m])==b)O[m].dummy||o.push(O[m]);else{var A=[];A[i.xidx]=b,A.dummy=!0,O.splice(m,0,A)}}}var P=v._sum||0;if(o.length){v.add(o,m,e,t,n);var T=v._keys[m];for(T.index=m,T.stackedValue=Lg(T.absoluteTotal),T.isPositive=+(0<T.stackedValue),T.isCascaded=n(o[0]),T.y=T.absoluteTotal[T.isPositive],T.y0=T.isCascaded?0:P,x=T.absoluteTotal.length-1;0<=x;x--)T.absoluteTotal[x]&&y.push([m,T.absoluteTotal[x],T.runningTotal[x]])}g=v._extent}a.waterfall.stackExtent=[],pe(a.getEncode("stack"),function(e,t){a.waterfall.stackExtent[t]=y,e.layout.getAllExtents=function(){return y}})}else c.forEach(function(a,o){var l=a.data;r=Gt.helpers.getParsedYAxisOrder(a.yaxiscolumnorder),l.forEach(function(r,a){d.forEach(function(e,t){var n=e,a=r[t];if((a?i.getActualX(a).toString():null)!==n.toString()){var o=[];return o[i.xidx]=n,o.dummy=!0,void r.splice(t,0,o)}}),v.add(r,o,e,t,n),g=v._extent})});return l.dataObject.waterfall.layout=v,Fg(g)},Gt.prototype.getCorrectionForWaterfall=function(e,t,n,r,a){var i=function(e,t){var n=e.dataObject.getEncode("y",t).seriesData,r=e.systemConf.chart.plot.plotoptions.waterfall;return n.some(function(e){var t=e.plotoptions;return(t&&t.comparisonLine?Im(r.comparisonLine,t.comparisonLine,!0):r.comparisonLine).enabled})}(r,n);a=!r.datalabels.hasFixedPosition&&a;var o=r.systemConf.chart.plot.datalabels.handleOverlapping,l=r.datalabels.isStackedLabels||r.datalabels.hasFixedPosition||!o,s=a?l?10:0:10;r.dataObject.waterfall.datalabelPadding=a?r.dataObject.rangeCorrections.datalabels.y0+s:s;var c,u=(e=function(e){return e[1]<0&&(e[1]=0),e}(e))[1]-e[0],d=r.axes.y.orient,h=r.plotarea["left"==d?"height":"width"],f=5,p=u/(h-f)*f;return i&&(c=u/(h-(f+=function(e){var t=e.systemConf.chart.plot.plotoptions.waterfall,n=e.axes.rotated,r=e.systemConf,a=0,i=mt(e.staticPaneSVG.selectAll("g.labelholder"),"text",[1],".","class","dummyText");return e.seriesdata.forEach(function(e,o){if(e.plotoptions||!a){var l=e.plotoptions,s=(l&&l.comparisonLine?Im(t.comparisonLine,l.comparisonLine,!0):t.comparisonLine).label;i.text("800%").style("fill","none"),kt(i,[s,r.chart,r.canvas,Qm]);var c=M(i.node());a=qy(n?c.width:c.height,a)}}),i.remove(),a+10}(r)+30+s))*f),e[1]+=i?c:p,e[0]-=r.dataObject.waterfall.hasNegativeCascaded?p:0,e},et.waterfall=function(){return{outerPadding:.04,fillOpacity:.9,maxBandWidth:200,multiColoring:!1,border:{show:!1,size:null,style:"solid",radius:0,color:null},stacked:{enabled:!1,showAs:"values"},connector:{},comparisonLine:{},cascadeCategories:{dataindex:2},risingCategories:{},fallingCategories:{},datalabels:{showAs:"y",stackLabels:{show:!1,showAs:"y"}},animation:{type:"verticalAll"},gradients:{options:{linear:{y2:50}}}}},My.waterfallHelpers.drawConnectorLines=function(e,t,n,r){var a=n.chart,i=a.dataset,o=n.axisrotated,l=n.stacked,s=(n.xscale,n.yscale,n.yaxiscolumnorder),c=n.renderer,u=n.seriesindex,d=l?a.dataObject.waterfall.layout._keys:t,h=(a.systemConf.chart.axes.yaxis[s||0].reversed,a.systemConf.chart.axes.xaxis.reversed),f=n.plotoptions,p=n.commonPlotOptions,g=f&&f.connector?Im(p.connector,f.connector,!0):p.connector,v=g.enabled?function(e,t){for(var n=t.chart.dataset,r=t.yaxiscolumnorder,a=(t.stacked,Gt.helpers.isCatNull(n,"y",r)),i=Hp,o=Object.keys(e),l=o.length-1,s=[],c=0;c<l;c++){var u=e[o[c]],d=e[o[c+1]],h=i(u,r),f=i(d,r),p=a(h),g=a(f);if(p)s.push([]);else if(g){for(var v=c+2,y=e[v],m=y&&i(y,r),b=!a(m);v<l&&!b;)y=e[++v],m=y&&i(y,r),b=!a(m);b&&s.push([u,y])}else s.push([u,d])}return s}(d,n):[],y=Ug().x(function(e,t){return jp(c.getParamValue("x",e,u,null,c.commonOption),c.getParamValue("width",e,u,null,c.commonOption),e,"x",h?1==t:0==t,o)}).y(function(e,t){return jp(c.getParamValue("y",e,u,null,c.commonOption),c.getParamValue("height",e,u,null,c.commonOption),e,"y",0==t,o)});mt(e,"path",v,".","class","zcconnectorLine",null,function(e){return i.getX(e)}).attr("d",function(e,t){return y(e)}).styles({fill:"none",stroke:g.strokeColor||"black","stroke-width":g.strokeWidth||1,"stroke-dasharray":rt(g.dashStyle,g.strokeWidth||1),"stroke-opacity":0}).transition().duration(1e3).styles({"stroke-opacity":g.strokeOpacity||1})},My.waterfallHelpers.drawConnectorLines;var q_={getSeriesIndex:function(e){return e.seriesIndex},getItemIndex:function(e){return e.itemIndex},getDy:function(e){return q_.isMultiLine(e)?.9:.4},isMultiLine:function(e){return(e.nodeList?e.nodeList.format:e.format).multiLine},getBoundBoxSize:function(e,t,n,r){var a=gi(t,r),i=(U(n.padding,2)+mi(t,r))/2;return{x:e.x-e.width/2+i,y:e.y-e.height/2+i+(q_.isMultiLine(e)?e.size*q_.getDy(e)-e.height/2:0),width:e.width-2*i,height:e.height-2*i,r:r.dataObject.getTransRectValue("radius",vm,vm,vm,vm,a.radius)}},getContainerTransformation:function(e,t){var n=e.output.scaleFactor;return{translate:[t.x-t.width*(n-1)/2,t.y-t.height*(n-1)/2],scale:n}},hasBoundBox:function(e){var t=H(e,"layout.nodeList.innerSVG",!0);return e.layout.size&&!(B(t)||""===t)}},Q_=Km.CHROME||Km.FIREFOX?32e3:Km.IE&&Km.isTouchDevice?4e3:8e3;ve(Yp,Vf);var K_=Yp.prototype;K_._defaultH=function(){return[{shape:Wm,path:this.path,data:this.data,context:this.renderingContext,translate:this.translateContext,styles:$s}]},K_.renderingContext=function(){return jw.get("nonaxis").call(this,this.chart)},K_.translateContext=function(e){var t=this.chart,n=Up(e,t,this.renderer),r=n.commonRendererProp().bound(),a=n.layout,i=a.dimension,o=q_.getContainerTransformation(a,i),l=o.translate,s=t.plotarea;return[s.left+l[0]+r.x,s.top+l[1]+r.y,o.scale]},K_.data=function(e){var t=this.chart,n=Up(e,t,this.renderer),r=n.layout,a=r.dimension,i=n.commonRendererProp().bound();return function(){t.cache.data[e._key]||(t.cache.data[e._key]={});var n=t.cache.data[e._key],o=(n._point=e).layout;if(!o)return n._visible=e._visible=!1,e;var l=q_.getContainerTransformation(r,a).translate,s=r.output.scaleFactor,c=o.x,u=o.y,d=o.width,h=o.height,f=o.rotation;c+=i.x;var p=u+=i.y;return c*=s,u*=s,d*=s,h*=s,n._x=e._x=n._x||c+l[0],n._y=e._y=n._y||u+l[1],n._y1=e._y1=n._y1||p+l[1],n._width=e._width=n._width||d,n._height=e._height=n._height||h,n._centric=e._centric=n._centric||!0,n._rotation=e._rotation=n._rotation||f,n._size=e._size=2*Nn({x:e._x,y:e._y},{x:e._x-d/2,y:e._y-h/2}),n._uid=e._uid=t.dataset.getX(e),n._visible=e._visible=dr(t,e),e}},K_.options=function(e){var t=e.seriesIndex,n=e.itemIndex,r=e.paneid,a=this.chart,i=Up(e,a,this.renderer),o=i.commonRendererProp().params,l=In(o.commonPlotOptions,a),s=i.layout,c=s.dimension,u=Ln(a,l?n:t,e,t,r),d=e.layout,h=q_.isMultiLine(d),f=d.x,p=d.y,g=c.width,v=c.height,y=void 0,m=void 0;return m=rn(a)?(y=Sn(a,t,r,{x1:0,x2:g,y1:0,y2:v,r:Qy(g,v)},vm,"svg"),An(a,t,r)):(y=Sn(a,0,null,{x1:0,x2:g,y1:0,y2:v,r:Qy(g,v)},vm,"svg"),An(a,0)),{x:f,y:p-(h?d.height/2:0),dy:q_.getDy(d),rotation:[ts(d.rotation),f,p],fontSize:d.size,font:s.datalabelOptions[t],contentType:d.nodeList.contentType,innerSVG:d.nodeList.innerSVG,color:u,fillColor:y(l?n:t,e),strokeColor:m(l?n:t,e,o.commonPlotOptions.strokeColor)}},K_.path=function(e,t){var n=t.context.call(this),r=t.translate.call(this,e),a=this.options(e),i=a.x,o=a.y,l=a.dy,s=a.rotation,c=a.fontSize,u=a.font,d=a.contentType,h=a.innerSVG,f=e.layout,p=q_.isMultiLine(f),g=this.chart;n.style("display","").style("opacity",null).attr("transform","translate("+r[0]+","+r[1]+") scale("+r[2]+")");var v=Et(Wm,".wordcloud-highlight",[e],n);return _i(v,u,g),v[d](h),v.attrs({x:i,y:o,dy:l+"em",transform:"rotate("+s[0]+" "+s[1]+" "+s[2]+")","text-anchor":fb}).styles({"font-size":c+hm,"paint-order":"stroke","stroke-linejoin":"round"}),p&&ft(v,f.x),v};var $_=km.getComponent("annotation");i_.wordcloud=function(){function e(i,o,l,s,c,u){function d(){var c=q_.getContainerTransformation(C,k);if(i.save(),i.translate(c.translate[0],c.translate[1]),i.scale(c.scale,c.scale),function(e,t,n,r){var a=t.mask.background,i=n.output.mask;r&&i&&a.color&&(e.globalAlpha=U(a.opacity,1),e.drawImage(i,0,0),e.globalAlpha=1)}(i,m,C,w),Z(g)&&(O=O.filter(function(e){return n(e)===g}),T&&(O=Dx.filterSelectionByColor(O,!0,s,y))),O.forEach(function(e,s){function c(n,r){if(L[w]["font-size"]=u.size+hm,n.save(),u.rotation&&(n.translate(v,b),n.rotate(u.rotation),n.translate(-v,-b)),!l&&q_.hasBoundBox(e)&&function(e,t,n,r){var a=r.params,i=a.chartObj,o=a.commonPlotOptions,l=t.layout,s=q_.getSeriesIndex(t),c=n.datalabelOptions[s],u=gi(c,i),d=Z(u.strokeWidth)?+u.strokeWidth:1,h=rt(u.dashStyle,d),f=at(u.lineCap,u.dashStyle),p=q_.getBoundBoxSize(l,c,o,i);vi(c,i)&&(e.beginPath(),e.lineWidth=d,te(h)&&h.length&&Z(e.setLineDash)&&(e.setLineDash(h),e.lineCap=f),e.strokeStyle=kn(u.strokeColor||pm,u.strokeOpacity),e.fillStyle=kn(u.fillColor||"#000",u.fillOpacity),xw.roundedRect(e,p.x,p.y,p.width,p.height,p.r),e.stroke(),e.fill(),e.closePath())}(n,e,C,t),a.addTextShadow(n,M[w]),n.font=lC(L[w]),n.textAlign=nb,"html"===u.nodeList.contentType)u.nodeList.forEach(function(t){var a,i,o=t.style,l=t.text;o.length&&(a=lC(L[w],o),parseFloat(o["font-size"]),i=o.fill),d=v+(t.dx||0),g=b+(t.dy||0)*u.size+u.size*x-(q_.isMultiLine(u)?u.height/2:0),n.font=a||lC(L[w]),n.strokeStyle=P[w](E?k:w,e,T,vm,m.strokeOpacity),n.lineWidth=O,n.strokeText(l,d,g),n.fillStyle=i||r,n.fillText(l,d,g)});else{var i=u.nodeList.innerSVG;d=v,g=b+u.size*x,n.strokeStyle=P[w](E?k:w,e,T,vm,I),n.lineWidth=O,n.lineJoin="round",n.strokeText(i,d,g),n.fillStyle=r,n.fillText(i,d,g)}n.restore()}var u=e.layout;if(u){u.text;var d,g,v=u.x,b=u.y,x=q_.getDy(u),w=n(e),k=r(e),_=C.datalabelOptions[w],S=(l?o:o[w]).plotoptions||{};L[w]=L[w]||xw.getFontStyles(y,_),M[w]=M[w]||a.parseTextShadow(_.textShadow);var O=Hm(h,S.strokeWidth,m.strokeWidth,1),T=Hm(f,S.strokeColor!==Ey?S.strokeColor:m.strokeColor),I=Hm(S.strokeOpacity,m.strokeOpacity),D=Hm(S.fillOpacity,m.fillOpacity),R=A[w].gradientOptions,j=vm;if("linear"===R.type&&"userSpaceOnUse"!==R.options[R.type].gradientUnits&&(j={x1:v-u.width/2,x2:v+u.width/2,y1:b-u.height/2,y2:b+u.height/2}),y.imagePallete&&Pn(y.dataset.getClr(e),y))tb.canvas_patterns.imageFill({x:v,y:b,context:i,name:Ln(y,E?k:w,e,w,z)},c);else{var H=p||A[w](E?k:w,e,vm,vm,D,j);c(i,H)}}}),i.restore(),!$_._empty&&!l){var u=C.output.scaleFactor;y.seriesdata.forEach(function(e,t){b=$_.preprocessAnnotations(y.seriesdata,t,function(e,t,n){var r=e.layout;return[c.translate[0]+(r.x-r.width/2)*u,c.translate[1]+(r.y-r.height*q_.getDy(r))*u]},b,y,v)})}e.chartRendered=!0,setTimeout(function(){},20)}var h,f,p,g,v=t.params,y=v.chartObj,m=v.commonPlotOptions,b=v.notesArray,x=y.renderer[v.rendererIndex||0],w="legendFilter-colorScale"!==y.phase&&!l,C=w?new Wp(t,o):x.layout,k=C.dimension,_=k.width,S=k.height,O=C.processedData,A=[],P=[],T=dx.isQuantileColorScale(y),E=In(m,y),L=[],M=[],z=rn(y)&&o[0].row+"_"+o[0].column;return l&&(g=u,h=l["stroke-width"],f=l.stroke,p=l.fill),e.total=C.sum,e.extentY=C.fontScale.domain(),C.data.forEach(function(t,n){A[n]=e.fillColorFunc=Sn(y,n,z,{x1:0,x2:_,y1:0,y2:S,r:Qy(_,S)}),P[n]=An(y,n,z)}),w?(C.drawLayout(d),x.layout=C):d(),(e.layout=C).paneid=rn(y)?o[0].row+"_"+o[0].column:0,e}var t,n=q_.getSeriesIndex,r=q_.getItemIndex,a=sC;return e.commonRendererProp=function(n){return arguments.length?(t=n,e):t},e.getHighlighter=function(t,n){return e.highlighter=new Yp(t,e)},e},et.wordcloud=function(){return{strokeColor:"transparent",size:"auto",animation:{type:"fadeOneByOne"},datalabels:{showAs:"x"},gradients:{options:{linear:{x2:100,y2:100,colorGamma:[0,1.5]},radial:{x:50,y:50,radius:100,colorGamma:[1,0]}}},mask:{background:{}}}};var J_=km.getComponent("annotation"),eS=q_.getSeriesIndex,tS=q_.getItemIndex;q_.addEvents=function(e){function t(){b.style("opacity",0)}function n(){if(l.chartRendered){var t=Xp(e);if(i=t&&t.point){var n=t.rendererIndex;d=l.renderer[n],e=d.layout,y=rn(l)?e.paneid:0,s=e.rp.commonPlotOptions;var r=Gp(i,vm,d,y,n);f.handlers.mousemove.call(l.eventHandler,r),Qf(i,r);var a=Gn(u[eS(i)].plotoptions,s,l,"cursor");dc.call(l.eventHandler,vm,a)}else if(o&&o.point){var i=o.point;n=o.rendererIndex,d=l.renderer[n],e=d.layout,r=Gp(i,vm,d,y,n),l.eventHandler.handlers.mouseout.call(l.eventHandler,r,{data:i},eS(i)),Qf(i,r),hc.call(l.eventHandler)}o=t}}function r(){var n=o,r=n&&n.point;if(r){var a=n.rendererIndex;d=l.renderer[a],e=d.layout,y=rn(l)?e.paneid:0,s=e.rp.commonPlotOptions;var i=Gp(r,vm,d,y,a);i.point=r,l.eventHandler.handlers.mouseout.call(l.eventHandler,i,{data:r},eS(r)),Kf(r)}else t()}function a(){if(l.chartRendered){var t=Xp(e),n=t&&t.point;if(n){var r=t.rendererIndex;d=l.renderer[r],e=d.layout,y=rn(l)?e.paneid:0,s=e.rp.commonPlotOptions;var a=Gp(n,vm,d,y,r);l.eventHandler.handlers.click.call(l.eventHandler,a,{data:n},eS(n),tS(n),d),Qf(n,a),o=t}}}function i(){if(l.chartRendered){var t=Xp(e),n=t&&t.point;if(n){var r=t.rendererIndex;d=l.renderer[r],e=d.layout,y=rn(l)?e.paneid:0,s=e.rp.commonPlotOptions;var a=J_._empty?n:Xo(n,1<u.length?u[eS(n)].seriesname:vm),i=n.layout,h=[i.x-.5*i.width+c.x,i.y-i.height*q_.getDy(i)+c.y],f=Gp(n,vm,d,y,r);f.coordinate=h,f.basedOn="plot",f.data=a,f.point=n,l.eventHandler.handlers.doubleclick.call(l.eventHandler,f,eS(n),n),Qf(n,f),o=t}}}var o,l=e.rp.chartObj,s=e.rp.commonPlotOptions,c=e.dimension,u=e.data,d=l.renderer[e.rp.rendererIndex||0],h=l.plotarea,f=l.eventHandler,p=q_.getContainerTransformation(e,c),g=c.width,v=c.height,y=e.paneid,m=f.tracker.removeAllListeners();l.positionEventTrackerElement();var b=l.staticPaneSVG.selectAll("g.zcplothighlight").attr("transform","translate("+(h.left+p.translate[0])+","+(h.top+p.translate[1])+") scale("+p.scale+")");mt(b,Wm,[1]),d.defaultMouseOverFunc=function(t,n,r,a){var i=In(s,l),o=b.selectAll(Wm),c=l.legendHighlight.getLegendHighlightEffect(n,"selectedSeries","plot",a),d=l.legendHighlight.getLegendHighlightEffect(n,"unselectedSeries","plot",a),h=Ln(l,i?r:n,t,n,a),f=Ny.test(c)||Fy.test(d)?h:pm,p=t.layout,y=q_.isMultiLine(p),m=u[n].plotoptions,x=m&&m.strokeColor;b.style("opacity",vm),_i(o,e.datalabelOptions[eS(t)],l),o[p.nodeList.contentType](p.nodeList.innerSVG);var w=p.x,C=p.y;o.attrs({x:w,y:C-(y?p.height/2:0),transform:"rotate("+ts(p.rotation)+" "+w+" "+C+")","text-anchor":fb,dy:q_.getDy(p)+"em"}).styles({"font-size":p.size+hm,"paint-order":"stroke","stroke-linejoin":"round",fill:function(e,t){return rn(l)?Sn(l,e,t,{x1:0,x2:g,y1:0,y2:v,r:Qy(g,v)},vm,"svg"):Sn(l,0,null,{x1:0,x2:g,y1:0,y2:v,r:Qy(g,v)},vm,"svg")}(n,a)(i?r:n,t),stroke:function(e,t){return rn(l)?An(l,e,t):An(l,0)}(n,a)(i?r:n,t,x!==Ey?x:s.strokeColor)}).styles(l.legendHighlight.getEffect(c,Hb,f,{fill:f,stroke:h},i?r:n,"plot")),y&&ft(o,p.x)},d.defaultMouseOutFunc=t,Mr(m,{mousemove:n,mouseout:r,click:a,dblclick:i},{singletouchmove:n,touchend:r,tap:a,dbltap:i},{target:"plot",touchleave:!0,chartObj:l})};var nS=km.getComponent("annotation");My.wordcloud=function(){function e(s){return s.each(function(s){function c(){!function(e,t,n){var r=t.mask.background,a=n.output.mask,i=n.dimension,o=Et("image",".mask-background",a&&r.color?[1]:[],e,":first-child");a&&o.attrs({width:i.width,height:i.height,"xlink:href":a.toDataURL()}).style("opacity",r.opacity)}(S,f,r),u=r.output.scaleFactor;var c=q_.getContainerTransformation(r,A);S.attrs({transform:"translate("+c.translate+") scale("+c.scale+")","text-anchor":fb});var g=mt(S,"g",[1],".","class","boundBoxes"),v=mt(S,"g",[1],".","class","words"),y=mt(g,Um,r.hasBoundBox?r.processedData:[]);(y=y.filter(l)).each(function(e){q_.hasBoundBox(e)&&function(e,t,n,r){var a=r.params,i=a.chartObj,o=a.commonPlotOptions,l=t.layout,s=q_.getSeriesIndex(t),c=n.datalabelOptions[s],u=gi(c,i),d=Z(u.strokeWidth)?+u.strokeWidth:1,h=rt(u.dashStyle,d),f=at(u.lineCap,u.dashStyle),p=q_.getBoundBoxSize(l,c,o,i);e.attrs({transform:"rotate("+ts(l.rotation)+" "+l.x+" "+l.y+")",d:Po(p.x,p.y,p.width,p.height,p.r,0,vm,{})}).styles({visibility:vi(c,i)?vm:"hidden",fill:u.fillColor,"fill-opacity":u.fillOpacity,stroke:u.strokeColor,"stroke-opacity":u.strokeOpacity,"stroke-width":d,"stroke-dasharray":h,"stroke-linecap":f})}(fg(this),e,r,n)});var w=mt(v,Wm,r.processedData);w=w.filter(l),t(S,f),w.each(function(e){var n=fg(this),a=i(e),l=o(e),c=e.layout,u=q_.isMultiLine(c),d=s[a].plotoptions,p=d&&d.strokeColor,g=L[a](M?l:a,e,p!==Ey?p:f.strokeColor),v=r.datalabelOptions[a];_i(n,v,h),n[c.nodeList.contentType](c.nodeList.innerSVG),n.styles({"font-size":c.size+hm,fill:E[a](M?l:a,e),stroke:g,filter:vm,"stroke-linejoin":"round"}).attrs({x:c.x,y:c.y-(u?c.height/2:0),dy:q_.getDy(c)+"em",transform:"rotate("+ts(c.rotation)+" "+c.x+" "+c.y+")",id:"word_"+a+"_"+e.subSeriesIndex+"_"+l,class:"zc_wordcloud series_"+a}),n.styles(Si(g,Hm(d&&d.strokeWidth,f.strokeWidth),v.textShadow)),u&&ft(n,c.x),d&&t(n,d)}),Hc(w,h),Fc(w,h,"wordcloud"),a||w.style("opacity",_).each(function(e){var t,n,r=e.layout;if(m===Ub)t=A.width/2,n=A.height/2;else if(m===Xb){var a=P/u,i=T/u;t=lm()*(a-r.width)-A.x+r.width/2+(P-a)/2,n=lm()*(i-r.height)-A.y+r.height/2+(T-i)/2}else t=r.x,n=r.y;fg(this).attrs({x:t,y:n-(q_.isMultiLine(r)?r.height/2:0),transform:"rotate("+ts(r.rotation)+" "+t+" "+n+")"})}),w.transition().duration(C).delay(k).ease(b).style("opacity",rn(h)?function(){return fg(this).attr("filtered-opacity")||1}:vm).attrs({x:function(e){return e.layout.x},y:function(e){var t=e.layout;return t.y-(q_.isMultiLine(t)?t.height/2:0)},transform:function(e){var t=e.layout;return"rotate("+ts(t.rotation)+" "+t.x+" "+t.y+")"}}),e.renderedTimer=setTimeout(function(){r.paneid=rn(h)?s[0].row+"_"+s[0].column:0,nS._empty||s.forEach(function(e,t){p=nS.preprocessAnnotations(s,t,function(e,t,n){var r=e.layout;return[c.translate[0]+(r.x-r.width/2)*u,c.translate[1]+(r.y-r.height*q_.getDy(r))*u]},p,h,d)}),a=e.chartRendered=!0},x+1e3/60)}var u,d=n.params,h=d.chartObj,f=d.commonPlotOptions,p=d.notesArray,g="legendFilter-colorScale"!==h.phase,v=ei(f,vm,h,Hb),y=v.enabled,m=v.type,b=a?xg:v.easingType,x=a?y?200:0:v.duration,w=h.dataObject.totalnoofdatas,C=a?x:m===Vb||m===Wb?x/w:x,k=a?0:m===Vb?function(e,t){return t*(x/w)}:m===Wb?function(){return lm()*w*(x/w)}:0,_=m===Fb||m===Wb||m===Vb?0:vm,S=mt(fg(this),"g",[s],".","class","wordcloudgroup"),O=rn(h)&&s[0].row+"_"+s[0].column;e.layout=r=g?new Wp(n,s):r;var A=r.dimension,P=A.width,T=A.height,E=[],L=[],M=In(f,h);s.forEach(function(t,n){E[n]=e.fillColorFunc=Sn(h,n,O,{x1:0,x2:P,y1:0,y2:T,r:Qy(P,T)}),L[n]=An(h,n,O)}),e.total=r.sum,e.extentY=r.fontScale.domain(),g?r.drawLayout(c):c()}),e}function t(e,t){e.styles({"paint-order":"stroke","fill-opacity":t.fillOpacity,"stroke-width":t.strokeWidth,"stroke-opacity":t.strokeOpacity})}var n,r,a=!1,i=q_.getSeriesIndex,o=q_.getItemIndex,l=function(e){return fg(this).style("opacity",e.layout?vm:0),e.layout};return e.commonRendererProp=function(t){return arguments.length?(n=t,e):n},e.getHighlighter=function(t,n){return e.highlighter=new Yp(t,e)},e};var rS=(_createClass(Zp,null,[{key:"isValidPoint",value:function(e,t,n){return Z(n)&&0<n&&Z(e)&&Z(t)&&e!==t}}]),_createClass(Zp,[{key:"getConnectedLinks",value:function(e){return[].concat(_toConsumableArray(e.sourceLinks),_toConsumableArray(e.targetLinks))}},{key:"getConnectedNodes",value:function(e){return[e.source,e.target]}},{key:"getAllConnectedPoints",value:function(e,t){var n=void 0;if("link"===e._type)n=t?[].concat(_toConsumableArray(this.getConnectedNodes(e)),[e]):{nodes:this.getConnectedNodes(e),links:[e]};else if("node"===e._type){var r=e.sourceLinks.map(function(e){return e.target}),a=e.targetLinks.map(function(e){return e.source}),i=this.getConnectedLinks(e),o=Fe([].concat(_toConsumableArray(a),_toConsumableArray(r),[e]));n=t?[].concat(_toConsumableArray(i),_toConsumableArray(o)):{nodes:o,links:i}}return n}}]),Zp);km.setComponent("sankeyLayout",rS),et.sankey=function(){return{datalabels:{showAs:"x",strokeWidth:1.5,strokeColor:"contrast",fontWeight:"bold",padding:5},link:{curve:"bezier",fillOpacity:.5,gradients:{show:!1,options:{linear:{x1:0,x2:100}}},strokeWidth:0},node:{width:20,padding:5,strokeWidth:0},animation:{easingType:"cubic",duration:1e3},hoveroptions:{fillOpacity:1},showAsNegative:"absolute"}};var aS={left:Fv,right:Vv,center:Nv,justify:Wv};ve(rg,Qs);var iS=rg.prototype;iS._defaultH=function(){var e=this;return[{shape:"poly",path:this.path,data:this.data,context:this.renderingContext,translate:this.translateContext,styles:function(t){var n=void 0;return n="link"===t._type?e.renderer.getSankeyNodeByPoint(t).index:t.itemIndex,$s.call(e,t,"inherit",n)}}]},iS.data=function(e){var t=this,n=this.chart,r={node:0,link:1};return e._setPolygonType=function(t){return e._polygonType=t},e._polydata=this.poly(e),e._getRank=function(){return r[e._type]},function(){n.cache.data[e._key]||(n.cache.data[e._key]={});var r=n.cache.data[e._key];if(!Z(r._x)){var a=Yv(t.getPolygon(this)),i=_slicedToArray(a,2),o=i[0],l=i[1];r._x=e._x=o,r._y=e._y=l,r._defined=e._defined=!0,r._point=e}return r._visible=e._visible=t.isVisible(e),e}},iS.isVisible=function(e,t){var n=this.chart,r=n.cache.disabledItems,a=n.dataset.getX(e),i=n.dataset.getY(e,0),o=n.dataset.getZ(e),l=!1;"absolute"===Rm(n.systemConf,"chart.plot.plotoptions.sankey.showAsNegative")&&(o=Ky(o));var s=!r.has(a)&&!r.has(i)&&0<o,c="node"===e._type||"link"===e._type&&Pn(n.dataset.getClr(e),n);return s&&"node"===e._type&&"legend"!==t&&(l=this.renderer.getSankeyNodeByPoint(e).hasOwnProperty("fixedValue")),s&&c&&!e.disabled&&!l},iS.getPolygon=function(e){var t=this.renderer,n=void 0,r="bezier"===t.sankeyOptions.link.curve;if("link"===e._type){var a=t.getLinkByPoint(e);a&&(n="path"===e._polygonType||r?function(e,t,n){for(var r,a=2<arguments.length&&void 0!==n?n:[0,0],i=e.getTotalLength(),o=[],l=_slicedToArray(a,2),s=l[0],c=l[1],u=0;u<=i;u+=t)r=e.getPointAtLength(u),o.push([r.x+s,r.y+c]);return o.push(o[0].slice(0)),o}(t.getPath(a,4),10):a._polypoints)}else{var i=t.getSankeyNodeByPoint(e);i&&(n=i._polypoints)}return n||[[null,null]]},iS.poly=function(e){var t=this,n=t.chart;return function(){n.cache.data[e._key]||(n.cache.data[e._key]={});var r=n.cache.data[e._key];return r._poly||(r._poly=e._poly={points:t.getPolygon(e)}),e._poly}},iS.renderingContext=function(){return jw.get("area").call(this,this.chart)},iS.translateContext=function(){return[this.chart.plotarea.left,this.chart.plotarea.top]},iS.options=function(e){var t=this.renderer.commonRendererProp().params,n=t.commonPlotOptions,r=t.hoverOptions.fillOpacity.fillOpacity;return n.fillOpacity=r,n.color=n[e._type].fillColor||this.renderer.getColor(e,!0),n},iS.path=function(e,t){var n=t.context.call(this),r=t.translate.call(this),a=this.renderer,i=a.sankeyOptions,o=i.link,l=i.node,s=l.strokeWidth;n.style("display","").attr("transform","translate("+(r[0]+s)+","+(r[1]+s)+")");var c=void 0;return"link"===e._type?c=a.getLinkByPoint(e):"node"===e._type&&(c=a.getSankeyNodeByPoint(e)),Et("path",".sankey-highlight-"+e._type+"-"+c.index,[c],n).attr("d",function(e){return Jp(e,l,o)})},iS.getDependentLayoutPoints=function(e,t,n){function r(e){return e.filter(function(e){var t=e.point;return t.hasOwnProperty("_visible")&&"legendFilter"!==l&&"legend"!==n?t._visible:t._visible=a.isVisible(t,n)})}var a=this,i=a.renderer,o=a.chart.dataObject.sankeyLayout,l=a.chart.phase,s={link:i.getLinkByPoint,node:i.getSankeyNodeByPoint}[e._type](e);if(s){var c=o.getAllConnectedPoints(s,t);return t?r(c):{links:r(c.links),nodes:r(c.nodes)}}return[]},My.sankey=ag,i_.sankey=ag,Dy.sankey=function(){function e(e,r){e.each(function(){var e,a=_slicedToArray(n,4),i=a[0],o=a[1],l=a[2],s=a[3],c=_slicedToArray(s,2),u=(c[0],c[1]),d=r.paneid,h=t.commonRendererProp().params,f=h.chartObj,p=f.systemConf,g=h.commonPlotOptions,v=(h.dataset,h.yaxiscolumnorder,Mi(h,d)),y=(f.chartTypes[0].name,(i=i[o]).plotoptions,0),m=0,b=0,x=0,w=g.node;if(g.link,vi(e=g.node.datalabels,f)){var C=gi(e,f),k=xi(C.hook);y=yi(e,f),m=y+mi(e,f)+k.height,b=k.width,x=C.radius}var _=e.padding||0,S=e.type,O=!0===p.chart.plot.datalabels.handleOverlapping,A=ys(e,f),P=bs(f,h,e,Wx,null,o,void 0,d),T=P.contentType||"text",E="html"===T,L=E&&P.multiLine,z=Pi(e,f);if(e.relativeX,z){z=z?S:"hidden";var I=[0,0],D=mt(f.staticPaneSVG.select(".labelholder"),"text",[1],".","class","temp_label");_i(D,e,f,h.color),D.attr("transform","").style("fill",pm);var R=r.add;i.data.forEach(function(t,n){var a=l.nodes,i=[],s=function(e){var t=Xe(e,"layer"),n=Object.keys(t).map(parseFloat).sort(Wg),r=n.shift(),a=n.pop(),i=[];return n.forEach(function(e){i=[].concat(_toConsumableArray(i),_toConsumableArray(t[e]))}),{start:t[r],center:i,end:t[a]||[]}}(l.nodes);a.forEach(function(e,t){var a,l,c=0,u=w.width,d=e.y0+(e.y1-e.y0)/2,h=L?"0.9em":"0.3em";a=s.center.includes(e)?e.x0+u/2:s.end.includes(e)?e.x0+u/2:e.x1-u/2,l=L||s.center.includes(e)?"middle":s.end.includes(e)?"end":"start";var f,p=e.name;if(D[T](p).attrs({x:a,y:d,"text-anchor":l,dy:h}),L&&(ft(D,a),d-=(f=M(D.node())).height/2,a+=f.width/2*-1,ft(D,a),D.attr("y",d)),O){c=bi((f=M(D.node())).height,y,x,b);var g=-(0+_+m);L&&(g+=f.width/2*-1);var C={id:"lbl"+o+"_"+n+"_"+t,x1:f.x-m,x2:f.x+f.width+m,y1:f.y-5-m-c/2,isLeft:!0,y2:f.y+f.height+5+m+c/2,DX:g-a,overlap:"hidden",translateFunction:r.update};v.push(C)}else c=bi((f=M(D.node())).height,y,x,b);var k={X:a,Y:d,ANCHOR:l,DY:h,text:p,display:!0,ID:"lbl"+o+"_"+n+"_"+t,width:f.width,height:f.height+c,hookPosition:ab};E&&(k.isLeft=!0),i.push(k)}),R(i,o,n).properties={type:Nb,dataLabels:e,dataUpdate:a,showlabel:z,rp:h,translation:"",trans:I,txtHgt:A,reverseColor:!0,onOverlap:function(){},contentType:T,isMultiLine:L},v.TOP=-I[1],v.BOTTOM=u+I[1],v.actualType=Nb})}})}var t,n;return e.renderer=function(n){return arguments.length?(t=n,e):t},e.args=function(t){return arguments.length?(n=t,e):n},e};var oS=km.getComponent("sankeyLayout");Gt.prototype.processSankeyData=function(){function e(e,t){return Wg(e.layer,t.layer)}var t,n,r,a=this,i=a.processedseriesData,o=a.dataset,l=a.dataset.xidx,s=a.dataset.yidx(0),c=a.dataset.zidx,u=a.chartObj,d=u.cache,h="legendFilter"!==u.phase,f=d.disabledItems=Rg(),p=d.sankey=d.sankey||{legend:[],legendItemsMap:Dg()},g=p.legend,v=p.legendItemsMap,y=void 0;if(g.length&&g.forEach(function(e){e.disabled&&f.add(e[l])}),null!=i&&te(i)){if(i.forEach(function(e,t){function n(e,t){var n=o.getColumn(t,0);return Aa(n[n.datatype],e,n.datatype,u)}var r=Gt.helpers.getChartType(null,null,t,a.data),i=r.name,l=r.type,s=(Rm(a.data,"chart.plot.plotoptions."+i+".link.renderEmpty"),"absolute"===Rm(a.data,"chart.plot.plotoptions."+i+".showAsNegative"));o.seriesTypes.add(l),te(e.data)&&!Gt.helpers.is3D(e.data)&&(e.data=[e.data]),e.data.forEach(function(e,r){function i(e){return n(o.getX(e,0),"x")}function l(e){return n(o.getY(e,0),"y")}function c(e){var t=o.getZ(e);return t<0?s?Ky(t):0:t}y=a.sankeyLayout=new oS(e,i,l,c,f),e.forEach(function(e,n){oS.isValidPoint(i(e),l(e),c(e))&&(e._key=Gt.helpers.generatePointKey(u.id,"pane0_0",t,r,n),e._type="link")})})}),y.nodeLength||y.linkLength){var m=ng({node:{width:1},link:{}},[[0,0],[u.canvasarea.width,u.canvasarea.height]]),b=m(y.graph),x=p.legendSankeyLayout=m(y.completeGraph);b.nodes.sort(e),x.nodes.sort(e),t=x.nodes,n=b.nodes,r=Dg(n,function(e){return e.name}),h?(v.clear(),g.length=0,t.forEach(function(e,t){var n=r.get(e.name),a=[];a[l]=a[s]=e.nameOriginal,a[c]=e.value,a._type="node",a.itemIndex=t,a.seriesIndex=0,a.disabled=f.has(e.name),g.push(a),e.point=a,e.index=t,n&&(n.index=t,n.point=a),v.set(e.name,{index:t,point:a})})):t.forEach(function(e){var t=v.get(e.name),n=t.point,a=t.index,i=r.get(e.name);e.index=a,e.point=n,i&&(i.index=a,i.point=n),n.disabled=f.has(e.name)})}return p}},e.version="2.12",e.versionName="Ortelius",e.d3Version="4.12.0",e.chartcategory=Py,e.charttypenames=Ay,e.charttype=Kv,e.setTheme=function(e,t){var n=Yy();n&&n.$ZC&&(n.$ZC[e]=t),Ly[e]=t},e.getTheme=function(e){return Ly[e]||window&&window.$ZC&&window.$ZC[e]},e.rename=function(e){if(null!=e&&""!=e&&"string"==typeof e){var t=Yy();if(t&&t.$ZC)return t[e]=$ZC,t.$ZC=null,delete t.$ZC,!0}return!1},e.tempCanvasContext=Wy,e.scale=Zv,e.requireXDataSorting=function(e){return arguments.length?void(Om=e):Om},e.imageFilePath=function(e){return arguments.length?void(_m=e):_m},e.dataEncoded=C,e.setGlobalPropByUserdata=$e,e.createHelperElements=Bx,e.getComponent=x,e.get=wm,e.set=Cm,e.getDefaultOptions=tt,e.setDefaultOptions=nt,e.setGlobalPatternSVG=function(e){Qm.patternSVG=e},e.utils=zm,e.appendElement=mt,e.getRawColor=Ln,e.CHART_DOMAIN_HELPERS=Nx,e.charts=Fx,e.maps=Vx,e.annotation=Uo,e.BrushD3=Pw,e._legendSizeSliderBrushD3=Pw,e.setCustomBrushHandle=ho,e.tickFilterMap=Jw,e.effects=tb,e.addPattern=it,e.getPattern=eb,e.PlotHighlighter=zC,e.setPlotDefaultBehaviour=function(e){RC._defaultPlotBehaviour=e},e.getPlotDefaultBehaviour=mc,e.getFormattedValue=Aa,e.generateFormatSpecifier=Ta,e.setLegendColorPallete=function(e,t){jr.colorpallete.set(e,t)},e.getLegendColorPallete=function(e){return jr.colorpallete.get(e)},e.setLegendPatternPallete=function(e,t){jr.patternPallete.set(e,t)},e.getLegendPatternPallete=function(e){return jr.patternPallete.get(e)},e.setLegendImagePallete=function(e,t){jr.imagePallete.set(e,t)},e.getLegendImagePallete=function(e){return jr.imagePallete.get(e)},e.legendHighlight=oi,e.getTooltipPosition=lr,e.mapCollections=H_,e.sankey=y,e.sankeyCenter=o,e.sankeyJustify=i,e.sankeyLeft=r,e.sankeyRight=a,Object.defineProperty(e,"__esModule",{value:!0})});